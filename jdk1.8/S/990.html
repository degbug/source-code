<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/JapaneseImperialCalendar.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L326">[^]</a><a href="#L2346">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L326" title="Defined at 326.">getCalendarType</a></li>
<li><a href="#L343" title="Defined at 343.">equals</a></li>
<li><a href="#L352" title="Defined at 352.">hashCode</a></li>
<li><a href="#L384" title="Defined at 384.">add</a></li>
<li><a href="#L512" title="Defined at 512.">roll</a></li>
<li><a href="#L536" title="Defined at 536.">roll</a></li>
<li><a href="#L965" title="Defined at 965.">getDisplayName</a></li>
<li><a href="#L991" title="Defined at 991.">getDisplayNames</a></li>
<li><a href="#L1046" title="Defined at 1046.">getMinimum</a></li>
<li><a href="#L1068" title="Defined at 1068.">getMaximum</a></li>
<li><a href="#L1099" title="Defined at 1099.">getGreatestMinimum</a></li>
<li><a href="#L1121" title="Defined at 1121.">getLeastMaximum</a></li>
<li><a href="#L1148" title="Defined at 1148.">getActualMinimum</a></li>
<li><a href="#L1257" title="Defined at 1257.">getActualMaximum</a></li>
<li><a href="#L1495" title="Defined at 1495.">getYearOffsetInMillis</a></li>
<li><a href="#L1500" title="Defined at 1500.">clone</a></li>
<li><a href="#L1509" title="Defined at 1509.">getTimeZone</a></li>
<li><a href="#L1516" title="Defined at 1516.">setTimeZone</a></li>
<li><a href="#L1537" title="Defined at 1537.">computeFields</a></li>
<li><a href="#L1571" title="Defined at 1571.">computeFields</a></li>
<li><a href="#L1800" title="Defined at 1800.">getWeekNumber</a></li>
<li><a href="#L1823" title="Defined at 1823.">computeTime</a></li>
<li><a href="#L1969" title="Defined at 1969.">getFixedDate</a></li>
<li><a href="#L2114" title="Defined at 2114.">getFixedDateJan1</a></li>
<li><a href="#L2140" title="Defined at 2140.">getFixedDateMonth1</a></li>
<li><a href="#L2161" title="Defined at 2161.">getCalendarDate</a></li>
<li><a href="#L2173" title="Defined at 2173.">monthLength</a></li>
<li><a href="#L2184" title="Defined at 2184.">monthLength</a></li>
<li><a href="#L2190" title="Defined at 2190.">actualMonthLength</a></li>
<li><a href="#L2213" title="Defined at 2213.">getTransitionEraIndex</a></li>
<li><a href="#L2230" title="Defined at 2230.">isTransitionYear</a></li>
<li><a href="#L2243" title="Defined at 2243.">getEraIndex</a></li>
<li><a href="#L2258" title="Defined at 2258.">getNormalizedCalendar</a></li>
<li><a href="#L2277" title="Defined at 2277.">pinDayOfMonth</a></li>
<li><a href="#L2321" title="Defined at 2321.">getRolledValue</a></li>
<li><a href="#L2339" title="Defined at 2339.">internalGetEra</a></li>
<li><a href="#L2346" title="Defined at 2346.">readObject</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2005, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.IOException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> sun.util.locale.provider.CalendarDataUtility;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> sun.util.calendar.BaseCalendar;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> sun.util.calendar.CalendarDate;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> sun.util.calendar.CalendarSystem;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> sun.util.calendar.CalendarUtils;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> sun.util.calendar.Era;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> sun.util.calendar.Gregorian;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> sun.util.calendar.LocalGregorianCalendar;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> sun.util.calendar.ZoneInfo;
<a id="L39" name="L39"></a>  39 
<div class="comment">
  <code>JapaneseImperialCalendar</code> implements a Japanese
  calendar system in which the imperial era-based year numbering is
  supported from the Meiji era. The following are the eras supported
  by this calendar system.
  <pre><tt>
  ERA value   Era name    Since (in Gregorian)
  ------------------------------------------------------
      0       N/A         N/A
      1       Meiji       1868-01-01 midnight local time
      2       Taisho      1912-07-30 midnight local time
      3       Showa       1926-12-25 midnight local time
      4       Heisei      1989-01-08 midnight local time
  ------------------------------------------------------
  </tt></pre>
  <p><code>ERA</code> value 0 specifies the years before Meiji and
  the Gregorian year values are used. Unlike {@link
  GregorianCalendar}, the Julian to Gregorian transition is not
  supported because it doesn't make any sense to the Japanese
  calendar systems used before Meiji. To represent the years before
  Gregorian year 1, 0 and negative values are used. The Japanese
  Imperial rescripts and government decrees don't specify how to deal
  with time differences for applying the era transitions. This
  calendar implementation assumes local time for all transitions.
  @author Masayoshi Okutsu
  @since 1.6</p></div>
<a id="L69" name="L69"></a>  69 <strong class="reserved">class</strong> <a href="../R/4277.html" title="Multiple referred from 11 places.">JapaneseImperialCalendar</a> <strong class="reserved">extends</strong> <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> <em class="brace">{</em>
<div class="comment">
      Implementation Notes
      This implementation uses
      sun.util.calendar.LocalGregorianCalendar to perform most of the
      calendar calculations. LocalGregorianCalendar is configurable
      and reads <jre_home>/lib/calendars.properties at the start-up.</jre_home></div>
<a id="L78" name="L78"></a>  78 
<div class="comment">
      The ERA constant designating the era before Meiji.</div>
<a id="L82" name="L82"></a>  82     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> BEFORE_MEIJI = 0;
<a id="L83" name="L83"></a>  83 
<div class="comment">
      The ERA constant designating the Meiji era.</div>
<a id="L87" name="L87"></a>  87     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MEIJI = 1;
<a id="L88" name="L88"></a>  88 
<div class="comment">
      The ERA constant designating the Taisho era.</div>
<a id="L92" name="L92"></a>  92     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TAISHO = 2;
<a id="L93" name="L93"></a>  93 
<div class="comment">
      The ERA constant designating the Showa era.</div>
<a id="L97" name="L97"></a>  97     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SHOWA = 3;
<a id="L98" name="L98"></a>  98 
<div class="comment">
      The ERA constant designating the Heisei era.</div>
<a id="L102" name="L102"></a> 102     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> HEISEI = 4;
<a id="L103" name="L103"></a> 103 
<a id="L104" name="L104"></a> 104     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> EPOCH_OFFSET   = 719163; <em class="comment">// Fixed date of January 1, 1970 (Gregorian)</em>
<a id="L105" name="L105"></a> 105     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> EPOCH_YEAR     = 1970;
<a id="L106" name="L106"></a> 106 
<a id="L107" name="L107"></a> 107     <em class="comment">// Useful millisecond constants.  Although ONE_DAY and ONE_WEEK can fit</em>
<a id="L108" name="L108"></a> 108     <em class="comment">// into ints, they must be longs in order to prevent arithmetic overflow</em>
<a id="L109" name="L109"></a> 109     <em class="comment">// when performing (bug 4173516).</em>
<a id="L110" name="L110"></a> 110     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>  ONE_SECOND = 1000;
<a id="L111" name="L111"></a> 111     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>  ONE_MINUTE = 60*ONE_SECOND;
<a id="L112" name="L112"></a> 112     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>  ONE_HOUR   = 60*ONE_MINUTE;
<a id="L113" name="L113"></a> 113     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_DAY    = 24*ONE_HOUR;
<a id="L114" name="L114"></a> 114     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_WEEK   = 7*ONE_DAY;
<a id="L115" name="L115"></a> 115 
<a id="L116" name="L116"></a> 116     <em class="comment">// Reference to the sun.util.calendar.LocalGregorianCalendar instance (singleton).</em>
<a id="L117" name="L117"></a> 117     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> LocalGregorianCalendar jcal
<a id="L118" name="L118"></a> 118         = (LocalGregorianCalendar) CalendarSystem.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>("japanese");
<a id="L119" name="L119"></a> 119 
<a id="L120" name="L120"></a> 120     <em class="comment">// Gregorian calendar instance. This is required because era</em>
<a id="L121" name="L121"></a> 121     <em class="comment">// transition dates are given in Gregorian dates.</em>
<a id="L122" name="L122"></a> 122     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> Gregorian gcal = CalendarSystem.getGregorianCalendar();
<a id="L123" name="L123"></a> 123 
<a id="L124" name="L124"></a> 124     <em class="comment">// The Era instance representing "before Meiji".</em>
<a id="L125" name="L125"></a> 125     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a> BEFORE_MEIJI_ERA = <strong class="reserved">new</strong> <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a>("BeforeMeiji", "BM", <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <strong class="reserved">false</strong>);
<a id="L126" name="L126"></a> 126 
<a id="L127" name="L127"></a> 127     <em class="comment">// Imperial eras. The sun.util.calendar.LocalGregorianCalendar</em>
<a id="L128" name="L128"></a> 128     <em class="comment">// doesn't have an Era representing before Meiji, which is</em>
<a id="L129" name="L129"></a> 129     <em class="comment">// inconvenient for a Calendar. So, era[0] is a reference to</em>
<a id="L130" name="L130"></a> 130     <em class="comment">// BEFORE_MEIJI_ERA.</em>
<a id="L131" name="L131"></a> 131     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a>[] <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>;
<a id="L132" name="L132"></a> 132 
<a id="L133" name="L133"></a> 133     <em class="comment">// Fixed date of the first date of each era.</em>
<a id="L134" name="L134"></a> 134     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong>[] sinceFixedDates;
<a id="L135" name="L135"></a> 135 
<div class="comment">
      <pre>                                      Greatest       Least
      Field name             Minimum   Minimum     Maximum     Maximum
      ----------             -------   -------     -------     -------
      ERA                          0         0           1           1
      YEAR                -292275055         1           ?           ?
      MONTH                        0         0          11          11
      WEEK_OF_YEAR                 1         1          52*         53
      WEEK_OF_MONTH                0         0           4*          6
      DAY_OF_MONTH                 1         1          28*         31
      DAY_OF_YEAR                  1         1         365*        366
      DAY_OF_WEEK                  1         1           7           7
      DAY_OF_WEEK_IN_MONTH        -1        -1           4*          6
      AM_PM                        0         0           1           1
      HOUR                         0         0          11          11
      HOUR_OF_DAY                  0         0          23          23
      MINUTE                       0         0          59          59
      SECOND                       0         0          59          59
      MILLISECOND                  0         0         999         999
      ZONE_OFFSET             -13:00    -13:00       14:00       14:00
      DST_OFFSET                0:00      0:00        0:20        2:00
      </pre>
      *: depends on eras</div>
<a id="L161" name="L161"></a> 161     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MIN_VALUES[] = <em class="brace">{</em>
<a id="L162" name="L162"></a> 162         0,              <em class="comment">// ERA</em>
<a id="L163" name="L163"></a> 163         -292275055,     <em class="comment">// YEAR</em>
<a id="L164" name="L164"></a> 164         JANUARY,        <em class="comment">// MONTH</em>
<a id="L165" name="L165"></a> 165         1,              <em class="comment">// WEEK_OF_YEAR</em>
<a id="L166" name="L166"></a> 166         0,              <em class="comment">// WEEK_OF_MONTH</em>
<a id="L167" name="L167"></a> 167         1,              <em class="comment">// DAY_OF_MONTH</em>
<a id="L168" name="L168"></a> 168         1,              <em class="comment">// DAY_OF_YEAR</em>
<a id="L169" name="L169"></a> 169         SUNDAY,         <em class="comment">// DAY_OF_WEEK</em>
<a id="L170" name="L170"></a> 170         1,              <em class="comment">// DAY_OF_WEEK_IN_MONTH</em>
<a id="L171" name="L171"></a> 171         AM,             <em class="comment">// AM_PM</em>
<a id="L172" name="L172"></a> 172         0,              <em class="comment">// HOUR</em>
<a id="L173" name="L173"></a> 173         0,              <em class="comment">// HOUR_OF_DAY</em>
<a id="L174" name="L174"></a> 174         0,              <em class="comment">// MINUTE</em>
<a id="L175" name="L175"></a> 175         0,              <em class="comment">// SECOND</em>
<a id="L176" name="L176"></a> 176         0,              <em class="comment">// MILLISECOND</em>
<a id="L177" name="L177"></a> 177         -13*ONE_HOUR,   <em class="comment">// ZONE_OFFSET (UNIX compatibility)</em>
<a id="L178" name="L178"></a> 178         0               <em class="comment">// DST_OFFSET</em>
<a id="L179" name="L179"></a> 179     <em class="brace">}</em>;
<a id="L180" name="L180"></a> 180     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> LEAST_MAX_VALUES[] = <em class="brace">{</em>
<a id="L181" name="L181"></a> 181         0,              <em class="comment">// ERA (initialized later)</em>
<a id="L182" name="L182"></a> 182         0,              <em class="comment">// YEAR (initialized later)</em>
<a id="L183" name="L183"></a> 183         JANUARY,        <em class="comment">// MONTH (Showa 64 ended in January.)</em>
<a id="L184" name="L184"></a> 184         0,              <em class="comment">// WEEK_OF_YEAR (Showa 1 has only 6 days which could be 0 weeks.)</em>
<a id="L185" name="L185"></a> 185         4,              <em class="comment">// WEEK_OF_MONTH</em>
<a id="L186" name="L186"></a> 186         28,             <em class="comment">// DAY_OF_MONTH</em>
<a id="L187" name="L187"></a> 187         0,              <em class="comment">// DAY_OF_YEAR (initialized later)</em>
<a id="L188" name="L188"></a> 188         SATURDAY,       <em class="comment">// DAY_OF_WEEK</em>
<a id="L189" name="L189"></a> 189         4,              <em class="comment">// DAY_OF_WEEK_IN</em>
<a id="L190" name="L190"></a> 190         PM,             <em class="comment">// AM_PM</em>
<a id="L191" name="L191"></a> 191         11,             <em class="comment">// HOUR</em>
<a id="L192" name="L192"></a> 192         23,             <em class="comment">// HOUR_OF_DAY</em>
<a id="L193" name="L193"></a> 193         59,             <em class="comment">// MINUTE</em>
<a id="L194" name="L194"></a> 194         59,             <em class="comment">// SECOND</em>
<a id="L195" name="L195"></a> 195         999,            <em class="comment">// MILLISECOND</em>
<a id="L196" name="L196"></a> 196         14*ONE_HOUR,    <em class="comment">// ZONE_OFFSET</em>
<a id="L197" name="L197"></a> 197         20*ONE_MINUTE   <em class="comment">// DST_OFFSET (historical least maximum)</em>
<a id="L198" name="L198"></a> 198     <em class="brace">}</em>;
<a id="L199" name="L199"></a> 199     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_VALUES[] = <em class="brace">{</em>
<a id="L200" name="L200"></a> 200         0,              <em class="comment">// ERA</em>
<a id="L201" name="L201"></a> 201         292278994,      <em class="comment">// YEAR</em>
<a id="L202" name="L202"></a> 202         DECEMBER,       <em class="comment">// MONTH</em>
<a id="L203" name="L203"></a> 203         53,             <em class="comment">// WEEK_OF_YEAR</em>
<a id="L204" name="L204"></a> 204         6,              <em class="comment">// WEEK_OF_MONTH</em>
<a id="L205" name="L205"></a> 205         31,             <em class="comment">// DAY_OF_MONTH</em>
<a id="L206" name="L206"></a> 206         366,            <em class="comment">// DAY_OF_YEAR</em>
<a id="L207" name="L207"></a> 207         SATURDAY,       <em class="comment">// DAY_OF_WEEK</em>
<a id="L208" name="L208"></a> 208         6,              <em class="comment">// DAY_OF_WEEK_IN</em>
<a id="L209" name="L209"></a> 209         PM,             <em class="comment">// AM_PM</em>
<a id="L210" name="L210"></a> 210         11,             <em class="comment">// HOUR</em>
<a id="L211" name="L211"></a> 211         23,             <em class="comment">// HOUR_OF_DAY</em>
<a id="L212" name="L212"></a> 212         59,             <em class="comment">// MINUTE</em>
<a id="L213" name="L213"></a> 213         59,             <em class="comment">// SECOND</em>
<a id="L214" name="L214"></a> 214         999,            <em class="comment">// MILLISECOND</em>
<a id="L215" name="L215"></a> 215         14*ONE_HOUR,    <em class="comment">// ZONE_OFFSET</em>
<a id="L216" name="L216"></a> 216         2*ONE_HOUR      <em class="comment">// DST_OFFSET (double summer time)</em>
<a id="L217" name="L217"></a> 217     <em class="brace">}</em>;
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219     <em class="comment">// Proclaim serialization compatibility with JDK 1.6</em>
<a id="L220" name="L220"></a> 220     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -3364572813905467929L;
<a id="L221" name="L221"></a> 221 
<a id="L222" name="L222"></a> 222     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L223" name="L223"></a> 223         <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a>[] es = jcal.<a href="../S/2455.html#L371" title="Defined at 371 in src/java/text/DateFormatSymbols.java.">getEras</a>();
<a id="L224" name="L224"></a> 224         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = es.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> + 1;
<a id="L225" name="L225"></a> 225         <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a> = <strong class="reserved">new</strong> <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a>[<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L226" name="L226"></a> 226         sinceFixedDates = <strong class="reserved">new</strong> <strong class="reserved">long</strong>[<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L227" name="L227"></a> 227 
<a id="L228" name="L228"></a> 228         <em class="comment">// eras[BEFORE_MEIJI] and sinceFixedDate[BEFORE_MEIJI] are the</em>
<a id="L229" name="L229"></a> 229         <em class="comment">// same as Gregorian.</em>
<a id="L230" name="L230"></a> 230         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = BEFORE_MEIJI;
<a id="L231" name="L231"></a> 231         sinceFixedDates[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(BEFORE_MEIJI_ERA.getSinceDate());
<a id="L232" name="L232"></a> 232         <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = BEFORE_MEIJI_ERA;
<a id="L233" name="L233"></a> 233         <strong class="reserved">for</strong> (<a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a> e : es) <em class="brace">{</em>
<a id="L234" name="L234"></a> 234             CalendarDate d = e.getSinceDate();
<a id="L235" name="L235"></a> 235             sinceFixedDates[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L236" name="L236"></a> 236             <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = e;
<a id="L237" name="L237"></a> 237         <em class="brace">}</em>
<a id="L238" name="L238"></a> 238 
<a id="L239" name="L239"></a> 239         LEAST_MAX_VALUES[<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>] = MAX_VALUES[<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>] = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1;
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241         <em class="comment">// Calculate the least maximum year and least day of Year</em>
<a id="L242" name="L242"></a> 242         <em class="comment">// values. The following code assumes that there's at most one</em>
<a id="L243" name="L243"></a> 243         <em class="comment">// era transition in a Gregorian year.</em>
<a id="L244" name="L244"></a> 244         <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L245" name="L245"></a> 245         <strong class="reserved">int</strong> dayOfYear = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L246" name="L246"></a> 246         CalendarDate <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = gcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L247" name="L247"></a> 247         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 1; i &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L248" name="L248"></a> 248             <strong class="reserved">long</strong> fd = sinceFixedDates[i];
<a id="L249" name="L249"></a> 249             CalendarDate transitionDate = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[i].getSinceDate();
<a id="L250" name="L250"></a> 250             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(transitionDate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>(), BaseCalendar.JANUARY, 1);
<a id="L251" name="L251"></a> 251             <strong class="reserved">long</strong> fdd = gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L252" name="L252"></a> 252             <strong class="reserved">if</strong> (fd != fdd) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253                 dayOfYear = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>((<strong class="reserved">int</strong>)(fd - fdd) + 1, dayOfYear);
<a id="L254" name="L254"></a> 254             <em class="brace">}</em>
<a id="L255" name="L255"></a> 255             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(transitionDate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>(), BaseCalendar.DECEMBER, 31);
<a id="L256" name="L256"></a> 256             fdd = gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L257" name="L257"></a> 257             <strong class="reserved">if</strong> (fd != fdd) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258                 dayOfYear = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>((<strong class="reserved">int</strong>)(fdd - fd) + 1, dayOfYear);
<a id="L259" name="L259"></a> 259             <em class="brace">}</em>
<a id="L260" name="L260"></a> 260             LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> lgd = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(fd - 1);
<a id="L261" name="L261"></a> 261             <strong class="reserved">int</strong> y = lgd.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L262" name="L262"></a> 262             <em class="comment">// Unless the first year starts from January 1, the actual</em>
<a id="L263" name="L263"></a> 263             <em class="comment">// max value could be one year short. For example, if it's</em>
<a id="L264" name="L264"></a> 264             <em class="comment">// Showa 63 January 8, 63 is the actual max value since</em>
<a id="L265" name="L265"></a> 265             <em class="comment">// Showa 64 January 8 doesn't exist.</em>
<a id="L266" name="L266"></a> 266             <strong class="reserved">if</strong> (!(lgd.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() == BaseCalendar.JANUARY &amp;&amp; lgd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() == 1)) <em class="brace">{</em>
<a id="L267" name="L267"></a> 267                 y--;
<a id="L268" name="L268"></a> 268             <em class="brace">}</em>
<a id="L269" name="L269"></a> 269             <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(y, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>);
<a id="L270" name="L270"></a> 270         <em class="brace">}</em>
<a id="L271" name="L271"></a> 271         LEAST_MAX_VALUES[<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>] = <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>; <em class="comment">// Max year could be smaller than this value.</em>
<a id="L272" name="L272"></a> 272         LEAST_MAX_VALUES[<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>] = dayOfYear;
<a id="L273" name="L273"></a> 273     <em class="brace">}</em>
<a id="L274" name="L274"></a> 274 
<div class="comment">
      jdate always has a sun.util.calendar.LocalGregorianCalendar.Date instance to
      avoid overhead of creating it for each calculation.</div>
<a id="L279" name="L279"></a> 279     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> jdate;
<a id="L280" name="L280"></a> 280 
<div class="comment">
      Temporary int[2] to get time zone offsets. zoneOffsets[0] gets
      the GMT offset value and zoneOffsets[1] gets the daylight saving
      value.</div>
<a id="L286" name="L286"></a> 286     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">int</strong>[] zoneOffsets;
<a id="L287" name="L287"></a> 287 
<div class="comment">
      Temporary storage for saving original fields[] values in
      non-lenient mode.</div>
<a id="L292" name="L292"></a> 292     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">int</strong>[] originalFields;
<a id="L293" name="L293"></a> 293 
<div class="comment">
      Constructs a <code>JapaneseImperialCalendar</code> based on the current time
      in the given time zone with the given locale.
      @param zone the given time zone.
      @param aLocale the given locale.</div>
<a id="L301" name="L301"></a> 301     JapaneseImperialCalendar(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>, <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> aLocale) <em class="brace">{</em>
<a id="L302" name="L302"></a> 302         <strong class="reserved">super</strong>(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>, aLocale);
<a id="L303" name="L303"></a> 303         jdate = jcal.newCalendarDate(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L304" name="L304"></a> 304         <a href="../S/866.html#L1794" title="Defined at 1794 in src/java/util/Calendar.java.">setTimeInMillis</a>(<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L353" title="Defined at 353 in src/java/lang/System.java.">currentTimeMillis</a>());
<a id="L305" name="L305"></a> 305     <em class="brace">}</em>
<a id="L306" name="L306"></a> 306 
<div class="comment">
      Constructs an "empty" <code>JapaneseImperialCalendar</code>.
      @param zone    the given time zone
      @param aLocale the given locale
      @param flag    the flag requesting an empty instance</div>
<a id="L314" name="L314"></a> 314     JapaneseImperialCalendar(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>, <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> aLocale, <strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L315" name="L315"></a> 315         <strong class="reserved">super</strong>(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>, aLocale);
<a id="L316" name="L316"></a> 316         jdate = jcal.newCalendarDate(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L317" name="L317"></a> 317     <em class="brace">}</em>
<a id="L318" name="L318"></a> 318 
<div class="comment">
      Returns <code>"japanese"</code> as the calendar type of this {@code
      JapaneseImperialCalendar}.
      @return <code>"japanese"</code></div>
<a id="L325" name="L325"></a> 325     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L326" name="L326"></a> 326     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/15426.html" title="Multiple referred from 12 places.">getCalendarType</a>() <em class="brace">{</em>
<a id="L327" name="L327"></a> 327         <strong class="reserved">return</strong> "japanese";
<a id="L328" name="L328"></a> 328     <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 
<div class="comment">
      Compares this <code>JapaneseImperialCalendar</code> to the specified
      <code>Object</code>. The result is <code>true</code> if and
      only if the argument is a <code>JapaneseImperialCalendar</code> object
      that represents the same time value (millisecond offset from
      the <a href="Calendar.html#Epoch">Epoch</a>) under the same
      <code>Calendar</code> parameters.
      @param obj the object to compare with.
      @return <code>true</code> if this object is equal to <code>obj</code>;
      <code>false</code> otherwise.
      @see Calendar#compareTo(Calendar)</div>
<a id="L343" name="L343"></a> 343     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L344" name="L344"></a> 344         <strong class="reserved">return</strong> obj <strong class="reserved">instanceof</strong> <a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a> &amp;&amp;
<a id="L345" name="L345"></a> 345             <strong class="reserved">super</strong>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(obj);
<a id="L346" name="L346"></a> 346     <em class="brace">}</em>
<a id="L347" name="L347"></a> 347 
<div class="comment">
      Generates the hash code for this
      <code>JapaneseImperialCalendar</code> object.</div>
<a id="L352" name="L352"></a> 352     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L353" name="L353"></a> 353         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() ^ jdate.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L354" name="L354"></a> 354     <em class="brace">}</em>
<a id="L355" name="L355"></a> 355 
<div class="comment">
      Adds the specified (signed) amount of time to the given calendar field,
      based on the calendar's rules.
      <p><em>Add rule 1</em>. The value of <code>field</code>
      after the call minus the value of <code>field</code> before the
      call is <code>amount</code>, modulo any overflow that has occurred in
      <code>field</code>. Overflow occurs when a field value exceeds its
      range and, as a result, the next larger field is incremented or
      decremented and the field value is adjusted back into its range.</p>
      <p><em>Add rule 2</em>. If a smaller field is expected to be
      invariant, but it is impossible for it to be equal to its
      prior value because of changes in its minimum or maximum after
      <code>field</code> is changed, then its value is adjusted to be as close
      as possible to its expected value. A smaller field represents a
      smaller unit of time. <code>HOUR</code> is a smaller field than
      <code>DAY_OF_MONTH</code>. No adjustment is made to smaller fields
      that are not expected to be invariant. The calendar system
      determines what fields are expected to be invariant.</p>
      @param field the calendar field.
      @param amount the amount of date or time to be added to the field.
      @exception IllegalArgumentException if <code>field</code> is
      <code>ZONE_OFFSET</code>, <code>DST_OFFSET</code>, or unknown,
      or if any calendar fields have out-of-range values in
      non-lenient mode.</div>
<a id="L384" name="L384"></a> 384     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<strong class="reserved">int</strong> field, <strong class="reserved">int</strong> amount) <em class="brace">{</em>
<a id="L385" name="L385"></a> 385         <em class="comment">// If amount == 0, do nothing even the given field is out of</em>
<a id="L386" name="L386"></a> 386         <em class="comment">// range. This is tested by JCK.</em>
<a id="L387" name="L387"></a> 387         <strong class="reserved">if</strong> (amount == 0) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             <strong class="reserved">return</strong>;   <em class="comment">// Do nothing!</em>
<a id="L389" name="L389"></a> 389         <em class="brace">}</em>
<a id="L390" name="L390"></a> 390 
<a id="L391" name="L391"></a> 391         <strong class="reserved">if</strong> (field &lt; 0 || field &gt;= ZONE_OFFSET) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L393" name="L393"></a> 393         <em class="brace">}</em>
<a id="L394" name="L394"></a> 394 
<a id="L395" name="L395"></a> 395         <em class="comment">// Sync the time and calendar fields.</em>
<a id="L396" name="L396"></a> 396         <a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a>();
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398         <strong class="reserved">if</strong> (field == <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>) <em class="brace">{</em>
<a id="L399" name="L399"></a> 399             LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = (LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) jdate.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L400" name="L400"></a> 400             d.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(amount);
<a id="L401" name="L401"></a> 401             <a href="../D/29357.html" title="Multiple defined in 2 places.">pinDayOfMonth</a>(d);
<a id="L402" name="L402"></a> 402             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>, <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(d));
<a id="L403" name="L403"></a> 403             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>, d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>());
<a id="L404" name="L404"></a> 404             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1);
<a id="L405" name="L405"></a> 405             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L406" name="L406"></a> 406         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (field == MONTH) <em class="brace">{</em>
<a id="L407" name="L407"></a> 407             LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = (LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) jdate.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L408" name="L408"></a> 408             d.addMonth(amount);
<a id="L409" name="L409"></a> 409             <a href="../D/29357.html" title="Multiple defined in 2 places.">pinDayOfMonth</a>(d);
<a id="L410" name="L410"></a> 410             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>, <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(d));
<a id="L411" name="L411"></a> 411             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>, d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>());
<a id="L412" name="L412"></a> 412             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1);
<a id="L413" name="L413"></a> 413             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L414" name="L414"></a> 414         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (field == <a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <strong class="reserved">int</strong> era = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>) + amount;
<a id="L416" name="L416"></a> 416             <strong class="reserved">if</strong> (era &lt; 0) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417                 era = 0;
<a id="L418" name="L418"></a> 418             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (era &gt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1) <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                 era = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1;
<a id="L420" name="L420"></a> 420             <em class="brace">}</em>
<a id="L421" name="L421"></a> 421             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>, era);
<a id="L422" name="L422"></a> 422         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L423" name="L423"></a> 423             <strong class="reserved">long</strong> delta = amount;
<a id="L424" name="L424"></a> 424             <strong class="reserved">long</strong> timeOfDay = 0;
<a id="L425" name="L425"></a> 425             <strong class="reserved">switch</strong> (field) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426             <em class="comment">// Handle the time fields here. Convert the given</em>
<a id="L427" name="L427"></a> 427             <em class="comment">// amount to milliseconds and call setTimeInMillis.</em>
<a id="L428" name="L428"></a> 428             <strong class="reserved">case</strong> HOUR:
<a id="L429" name="L429"></a> 429             <strong class="reserved">case</strong> <a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>:
<a id="L430" name="L430"></a> 430                 delta *= 60 * 60 * 1000;        <em class="comment">// hours to milliseconds</em>
<a id="L431" name="L431"></a> 431                 <strong class="reserved">break</strong>;
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433             <strong class="reserved">case</strong> MINUTE:
<a id="L434" name="L434"></a> 434                 delta *= 60 * 1000;             <em class="comment">// minutes to milliseconds</em>
<a id="L435" name="L435"></a> 435                 <strong class="reserved">break</strong>;
<a id="L436" name="L436"></a> 436 
<a id="L437" name="L437"></a> 437             <strong class="reserved">case</strong> SECOND:
<a id="L438" name="L438"></a> 438                 delta *= 1000;                  <em class="comment">// seconds to milliseconds</em>
<a id="L439" name="L439"></a> 439                 <strong class="reserved">break</strong>;
<a id="L440" name="L440"></a> 440 
<a id="L441" name="L441"></a> 441             <strong class="reserved">case</strong> MILLISECOND:
<a id="L442" name="L442"></a> 442                 <strong class="reserved">break</strong>;
<a id="L443" name="L443"></a> 443 
<a id="L444" name="L444"></a> 444             <em class="comment">// Handle week, day and AM_PM fields which involves</em>
<a id="L445" name="L445"></a> 445             <em class="comment">// time zone offset change adjustment. Convert the</em>
<a id="L446" name="L446"></a> 446             <em class="comment">// given amount to the number of days.</em>
<a id="L447" name="L447"></a> 447             <strong class="reserved">case</strong> WEEK_OF_YEAR:
<a id="L448" name="L448"></a> 448             <strong class="reserved">case</strong> WEEK_OF_MONTH:
<a id="L449" name="L449"></a> 449             <strong class="reserved">case</strong> DAY_OF_WEEK_IN_MONTH:
<a id="L450" name="L450"></a> 450                 delta *= 7;
<a id="L451" name="L451"></a> 451                 <strong class="reserved">break</strong>;
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453             <strong class="reserved">case</strong> <a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>: <em class="comment">// synonym of DATE</em>
<a id="L454" name="L454"></a> 454             <strong class="reserved">case</strong> <a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>:
<a id="L455" name="L455"></a> 455             <strong class="reserved">case</strong> <a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>:
<a id="L456" name="L456"></a> 456                 <strong class="reserved">break</strong>;
<a id="L457" name="L457"></a> 457 
<a id="L458" name="L458"></a> 458             <strong class="reserved">case</strong> AM_PM:
<a id="L459" name="L459"></a> 459                 <em class="comment">// Convert the amount to the number of days (delta)</em>
<a id="L460" name="L460"></a> 460                 <em class="comment">// and +12 or -12 hours (timeOfDay).</em>
<a id="L461" name="L461"></a> 461                 delta = amount / 2;
<a id="L462" name="L462"></a> 462                 timeOfDay = 12 * (amount % 2);
<a id="L463" name="L463"></a> 463                 <strong class="reserved">break</strong>;
<a id="L464" name="L464"></a> 464             <em class="brace">}</em>
<a id="L465" name="L465"></a> 465 
<a id="L466" name="L466"></a> 466             <em class="comment">// The time fields don't require time zone offset change</em>
<a id="L467" name="L467"></a> 467             <em class="comment">// adjustment.</em>
<a id="L468" name="L468"></a> 468             <strong class="reserved">if</strong> (field &gt;= HOUR) <em class="brace">{</em>
<a id="L469" name="L469"></a> 469                 <a href="../S/866.html#L1794" title="Defined at 1794 in src/java/util/Calendar.java.">setTimeInMillis</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> + delta);
<a id="L470" name="L470"></a> 470                 <strong class="reserved">return</strong>;
<a id="L471" name="L471"></a> 471             <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473             <em class="comment">// The rest of the fields (week, day or AM_PM fields)</em>
<a id="L474" name="L474"></a> 474             <em class="comment">// require time zone offset (both GMT and DST) change</em>
<a id="L475" name="L475"></a> 475             <em class="comment">// adjustment.</em>
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477             <em class="comment">// Translate the current time to the fixed date and time</em>
<a id="L478" name="L478"></a> 478             <em class="comment">// of the day.</em>
<a id="L479" name="L479"></a> 479             <strong class="reserved">long</strong> fd = cachedFixedDate;
<a id="L480" name="L480"></a> 480             timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>);
<a id="L481" name="L481"></a> 481             timeOfDay *= 60;
<a id="L482" name="L482"></a> 482             timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MINUTE);
<a id="L483" name="L483"></a> 483             timeOfDay *= 60;
<a id="L484" name="L484"></a> 484             timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(SECOND);
<a id="L485" name="L485"></a> 485             timeOfDay *= 1000;
<a id="L486" name="L486"></a> 486             timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MILLISECOND);
<a id="L487" name="L487"></a> 487             <strong class="reserved">if</strong> (timeOfDay &gt;= ONE_DAY) <em class="brace">{</em>
<a id="L488" name="L488"></a> 488                 fd++;
<a id="L489" name="L489"></a> 489                 timeOfDay -= ONE_DAY;
<a id="L490" name="L490"></a> 490             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (timeOfDay &lt; 0) <em class="brace">{</em>
<a id="L491" name="L491"></a> 491                 fd--;
<a id="L492" name="L492"></a> 492                 timeOfDay += ONE_DAY;
<a id="L493" name="L493"></a> 493             <em class="brace">}</em>
<a id="L494" name="L494"></a> 494 
<a id="L495" name="L495"></a> 495             fd += delta; <em class="comment">// fd is the expected fixed date after the calculation</em>
<a id="L496" name="L496"></a> 496             <strong class="reserved">int</strong> zoneOffset = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(ZONE_OFFSET) + <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(DST_OFFSET);
<a id="L497" name="L497"></a> 497             <a href="../S/866.html#L1794" title="Defined at 1794 in src/java/util/Calendar.java.">setTimeInMillis</a>((fd - EPOCH_OFFSET) * ONE_DAY + timeOfDay - zoneOffset);
<a id="L498" name="L498"></a> 498             zoneOffset -= <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(ZONE_OFFSET) + <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(DST_OFFSET);
<a id="L499" name="L499"></a> 499             <em class="comment">// If the time zone offset has changed, then adjust the difference.</em>
<a id="L500" name="L500"></a> 500             <strong class="reserved">if</strong> (zoneOffset != 0) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501                 <a href="../S/866.html#L1794" title="Defined at 1794 in src/java/util/Calendar.java.">setTimeInMillis</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> + zoneOffset);
<a id="L502" name="L502"></a> 502                 <strong class="reserved">long</strong> fd2 = cachedFixedDate;
<a id="L503" name="L503"></a> 503                 <em class="comment">// If the adjustment has changed the date, then take</em>
<a id="L504" name="L504"></a> 504                 <em class="comment">// the previous one.</em>
<a id="L505" name="L505"></a> 505                 <strong class="reserved">if</strong> (fd2 != fd) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506                     <a href="../S/866.html#L1794" title="Defined at 1794 in src/java/util/Calendar.java.">setTimeInMillis</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> - zoneOffset);
<a id="L507" name="L507"></a> 507                 <em class="brace">}</em>
<a id="L508" name="L508"></a> 508             <em class="brace">}</em>
<a id="L509" name="L509"></a> 509         <em class="brace">}</em>
<a id="L510" name="L510"></a> 510     <em class="brace">}</em>
<a id="L511" name="L511"></a> 511 
<a id="L512" name="L512"></a> 512     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26502.html" title="Multiple referred from 4 places.">roll</a>(<strong class="reserved">int</strong> field, <strong class="reserved">boolean</strong> up) <em class="brace">{</em>
<a id="L513" name="L513"></a> 513         <a href="../D/31435.html" title="Multiple defined in 6 places.">roll</a>(field, up ? +1 : -1);
<a id="L514" name="L514"></a> 514     <em class="brace">}</em>
<a id="L515" name="L515"></a> 515 
<div class="comment">
      Adds a signed amount to the specified calendar field without changing larger fields.
      A negative roll amount means to subtract from field without changing
      larger fields. If the specified amount is 0, this method performs nothing.
      <p>This method calls {@link #complete()} before adding the
      amount so that all the calendar fields are normalized. If there
      is any calendar field having an out-of-range value in non-lenient mode, then an
      <code>IllegalArgumentException</code> is thrown.
      @param field the calendar field.
      @param amount the signed amount to add to <code>field</code>.
      @exception IllegalArgumentException if <code>field</code> is
      <code>ZONE_OFFSET</code>, <code>DST_OFFSET</code>, or unknown,
      or if any calendar fields have out-of-range values in
      non-lenient mode.
      @see #roll(int,boolean)
      @see #add(int,int)
      @see #set(int,int)</p></div>
<a id="L536" name="L536"></a> 536     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26502.html" title="Multiple referred from 4 places.">roll</a>(<strong class="reserved">int</strong> field, <strong class="reserved">int</strong> amount) <em class="brace">{</em>
<a id="L537" name="L537"></a> 537         <em class="comment">// If amount == 0, do nothing even the given field is out of</em>
<a id="L538" name="L538"></a> 538         <em class="comment">// range. This is tested by JCK.</em>
<a id="L539" name="L539"></a> 539         <strong class="reserved">if</strong> (amount == 0) <em class="brace">{</em>
<a id="L540" name="L540"></a> 540             <strong class="reserved">return</strong>;
<a id="L541" name="L541"></a> 541         <em class="brace">}</em>
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543         <strong class="reserved">if</strong> (field &lt; 0 || field &gt;= ZONE_OFFSET) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L545" name="L545"></a> 545         <em class="brace">}</em>
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547         <em class="comment">// Sync the time and calendar fields.</em>
<a id="L548" name="L548"></a> 548         <a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a>();
<a id="L549" name="L549"></a> 549 
<a id="L550" name="L550"></a> 550         <strong class="reserved">int</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(field);
<a id="L551" name="L551"></a> 551         <strong class="reserved">int</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/20492.html" title="Multiple defined in 21 places.">getMaximum</a>(field);
<a id="L552" name="L552"></a> 552 
<a id="L553" name="L553"></a> 553         <strong class="reserved">switch</strong> (field) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554         <strong class="reserved">case</strong> <a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>:
<a id="L555" name="L555"></a> 555         <strong class="reserved">case</strong> AM_PM:
<a id="L556" name="L556"></a> 556         <strong class="reserved">case</strong> MINUTE:
<a id="L557" name="L557"></a> 557         <strong class="reserved">case</strong> SECOND:
<a id="L558" name="L558"></a> 558         <strong class="reserved">case</strong> MILLISECOND:
<a id="L559" name="L559"></a> 559             <em class="comment">// These fields are handled simply, since they have fixed</em>
<a id="L560" name="L560"></a> 560             <em class="comment">// minima and maxima. Other fields are complicated, since</em>
<a id="L561" name="L561"></a> 561             <em class="comment">// the range within they must roll varies depending on the</em>
<a id="L562" name="L562"></a> 562             <em class="comment">// date, a time zone and the era transitions.</em>
<a id="L563" name="L563"></a> 563             <strong class="reserved">break</strong>;
<a id="L564" name="L564"></a> 564 
<a id="L565" name="L565"></a> 565         <strong class="reserved">case</strong> HOUR:
<a id="L566" name="L566"></a> 566         <strong class="reserved">case</strong> <a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>:
<a id="L567" name="L567"></a> 567             <em class="brace">{</em>
<a id="L568" name="L568"></a> 568                 <strong class="reserved">int</strong> unit = <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> + 1; <em class="comment">// 12 or 24 hours</em>
<a id="L569" name="L569"></a> 569                 <strong class="reserved">int</strong> h = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field);
<a id="L570" name="L570"></a> 570                 <strong class="reserved">int</strong> nh = (h + amount) % unit;
<a id="L571" name="L571"></a> 571                 <strong class="reserved">if</strong> (nh &lt; 0) <em class="brace">{</em>
<a id="L572" name="L572"></a> 572                     nh += unit;
<a id="L573" name="L573"></a> 573                 <em class="brace">}</em>
<a id="L574" name="L574"></a> 574                 <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> += ONE_HOUR * (nh - h);
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576                 <em class="comment">// The day might have changed, which could happen if</em>
<a id="L577" name="L577"></a> 577                 <em class="comment">// the daylight saving time transition brings it to</em>
<a id="L578" name="L578"></a> 578                 <em class="comment">// the next day, although it's very unlikely. But we</em>
<a id="L579" name="L579"></a> 579                 <em class="comment">// have to make sure not to change the larger fields.</em>
<a id="L580" name="L580"></a> 580                 CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L581" name="L581"></a> 581                 <strong class="reserved">if</strong> (<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>) != d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()) <em class="brace">{</em>
<a id="L582" name="L582"></a> 582                     d.setEra(jdate.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>());
<a id="L583" name="L583"></a> 583                     d.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>),
<a id="L584" name="L584"></a> 584                               <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MONTH) + 1,
<a id="L585" name="L585"></a> 585                               <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>));
<a id="L586" name="L586"></a> 586                     <strong class="reserved">if</strong> (field == HOUR) <em class="brace">{</em>
<a id="L587" name="L587"></a> 587                         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> (<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(AM_PM) == PM);
<a id="L588" name="L588"></a> 588                         d.addHours(+12); <em class="comment">// restore PM</em>
<a id="L589" name="L589"></a> 589                     <em class="brace">}</em>
<a id="L590" name="L590"></a> 590                     <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = jcal.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>(d);
<a id="L591" name="L591"></a> 591                 <em class="brace">}</em>
<a id="L592" name="L592"></a> 592                 <strong class="reserved">int</strong> hourOfDay = d.<a href="../D/19498.html" title="Multiple defined in 6 places.">getHours</a>();
<a id="L593" name="L593"></a> 593                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(field, hourOfDay % unit);
<a id="L594" name="L594"></a> 594                 <strong class="reserved">if</strong> (field == HOUR) <em class="brace">{</em>
<a id="L595" name="L595"></a> 595                     <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>, hourOfDay);
<a id="L596" name="L596"></a> 596                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L597" name="L597"></a> 597                     <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(AM_PM, hourOfDay / 12);
<a id="L598" name="L598"></a> 598                     <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(HOUR, hourOfDay % 12);
<a id="L599" name="L599"></a> 599                 <em class="brace">}</em>
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601                 <em class="comment">// Time zone offset and/or daylight saving might have changed.</em>
<a id="L602" name="L602"></a> 602                 <strong class="reserved">int</strong> zoneOffset = d.getZoneOffset();
<a id="L603" name="L603"></a> 603                 <strong class="reserved">int</strong> saving = d.getDaylightSaving();
<a id="L604" name="L604"></a> 604                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(ZONE_OFFSET, zoneOffset - saving);
<a id="L605" name="L605"></a> 605                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(DST_OFFSET, saving);
<a id="L606" name="L606"></a> 606                 <strong class="reserved">return</strong>;
<a id="L607" name="L607"></a> 607             <em class="brace">}</em>
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609         <strong class="reserved">case</strong> <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>:
<a id="L610" name="L610"></a> 610             <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <a href="../D/16807.html" title="Multiple defined in 3 places.">getActualMinimum</a>(field);
<a id="L611" name="L611"></a> 611             <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(field);
<a id="L612" name="L612"></a> 612             <strong class="reserved">break</strong>;
<a id="L613" name="L613"></a> 613 
<a id="L614" name="L614"></a> 614         <strong class="reserved">case</strong> MONTH:
<a id="L615" name="L615"></a> 615             <em class="comment">// Rolling the month involves both pinning the final value to [0, 11]</em>
<a id="L616" name="L616"></a> 616             <em class="comment">// and adjusting the DAY_OF_MONTH if necessary.  We only adjust the</em>
<a id="L617" name="L617"></a> 617             <em class="comment">// DAY_OF_MONTH if, after updating the MONTH field, it is illegal.</em>
<a id="L618" name="L618"></a> 618             <em class="comment">// E.g., &lt;jan31&gt;.roll(MONTH, 1) -&gt; &lt;feb28&gt; or &lt;feb29&gt;.</em>
<a id="L619" name="L619"></a> 619             <em class="brace">{</em>
<a id="L620" name="L620"></a> 620                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear())) <em class="brace">{</em>
<a id="L621" name="L621"></a> 621                     <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L622" name="L622"></a> 622                     <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == <a href="../D/20492.html" title="Multiple defined in 21 places.">getMaximum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L623" name="L623"></a> 623                         CalendarDate jd = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L624" name="L624"></a> 624                         CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L625" name="L625"></a> 625                         <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L626" name="L626"></a> 626                         <strong class="reserved">int</strong> n = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field), amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>);
<a id="L627" name="L627"></a> 627                         <strong class="reserved">if</strong> (n == <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L628" name="L628"></a> 628                             <em class="comment">// To avoid overflow, use an equivalent year.</em>
<a id="L629" name="L629"></a> 629                             jd.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(-400);
<a id="L630" name="L630"></a> 630                             jd.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(n + 1);
<a id="L631" name="L631"></a> 631                             <strong class="reserved">if</strong> (jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() &gt; d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632                                 jd.setDayOfMonth(d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L633" name="L633"></a> 633                                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L634" name="L634"></a> 634                             <em class="brace">}</em>
<a id="L635" name="L635"></a> 635                             <strong class="reserved">if</strong> (jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() == d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()
<a id="L636" name="L636"></a> 636                                 &amp;&amp; jd.getTimeOfDay() &gt; d.getTimeOfDay()) <em class="brace">{</em>
<a id="L637" name="L637"></a> 637                                 jd.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(n + 1);
<a id="L638" name="L638"></a> 638                                 jd.setDayOfMonth(d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() - 1);
<a id="L639" name="L639"></a> 639                                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L640" name="L640"></a> 640                                 <em class="comment">// Month may have changed by the normalization.</em>
<a id="L641" name="L641"></a> 641                                 n = jd.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L642" name="L642"></a> 642                             <em class="brace">}</em>
<a id="L643" name="L643"></a> 643                             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L644" name="L644"></a> 644                         <em class="brace">}</em>
<a id="L645" name="L645"></a> 645                         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, n);
<a id="L646" name="L646"></a> 646                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L647" name="L647"></a> 647                         CalendarDate jd = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L648" name="L648"></a> 648                         CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L649" name="L649"></a> 649                         <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L650" name="L650"></a> 650                         <strong class="reserved">int</strong> n = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field), amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>);
<a id="L651" name="L651"></a> 651                         <strong class="reserved">if</strong> (n == <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>) <em class="brace">{</em>
<a id="L652" name="L652"></a> 652                             <em class="comment">// To avoid underflow, use an equivalent year.</em>
<a id="L653" name="L653"></a> 653                             jd.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(+400);
<a id="L654" name="L654"></a> 654                             jd.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(n + 1);
<a id="L655" name="L655"></a> 655                             <strong class="reserved">if</strong> (jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() &lt; d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()) <em class="brace">{</em>
<a id="L656" name="L656"></a> 656                                 jd.setDayOfMonth(d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L657" name="L657"></a> 657                                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L658" name="L658"></a> 658                             <em class="brace">}</em>
<a id="L659" name="L659"></a> 659                             <strong class="reserved">if</strong> (jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() == d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()
<a id="L660" name="L660"></a> 660                                 &amp;&amp; jd.getTimeOfDay() &lt; d.getTimeOfDay()) <em class="brace">{</em>
<a id="L661" name="L661"></a> 661                                 jd.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(n + 1);
<a id="L662" name="L662"></a> 662                                 jd.setDayOfMonth(d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() + 1);
<a id="L663" name="L663"></a> 663                                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L664" name="L664"></a> 664                                 <em class="comment">// Month may have changed by the normalization.</em>
<a id="L665" name="L665"></a> 665                                 n = jd.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L666" name="L666"></a> 666                             <em class="brace">}</em>
<a id="L667" name="L667"></a> 667                             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L668" name="L668"></a> 668                         <em class="brace">}</em>
<a id="L669" name="L669"></a> 669                         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, n);
<a id="L670" name="L670"></a> 670                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L671" name="L671"></a> 671                         <strong class="reserved">int</strong> mon = (<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MONTH) + amount) % 12;
<a id="L672" name="L672"></a> 672                         <strong class="reserved">if</strong> (mon &lt; 0) <em class="brace">{</em>
<a id="L673" name="L673"></a> 673                             mon += 12;
<a id="L674" name="L674"></a> 674                         <em class="brace">}</em>
<a id="L675" name="L675"></a> 675                         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, mon);
<a id="L676" name="L676"></a> 676 
<a id="L677" name="L677"></a> 677                         <em class="comment">// Keep the day of month in the range.  We</em>
<a id="L678" name="L678"></a> 678                         <em class="comment">// don't want to spill over into the next</em>
<a id="L679" name="L679"></a> 679                         <em class="comment">// month; e.g., we don't want jan31 + 1 mo -&gt;</em>
<a id="L680" name="L680"></a> 680                         <em class="comment">// feb31 -&gt; mar3.</em>
<a id="L681" name="L681"></a> 681                         <strong class="reserved">int</strong> monthLen = <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>(mon);
<a id="L682" name="L682"></a> 682                         <strong class="reserved">if</strong> (<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>) &gt; monthLen) <em class="brace">{</em>
<a id="L683" name="L683"></a> 683                             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, monthLen);
<a id="L684" name="L684"></a> 684                         <em class="brace">}</em>
<a id="L685" name="L685"></a> 685                     <em class="brace">}</em>
<a id="L686" name="L686"></a> 686                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L687" name="L687"></a> 687                     <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(jdate);
<a id="L688" name="L688"></a> 688                     CalendarDate transition = <strong class="reserved">null</strong>;
<a id="L689" name="L689"></a> 689                     <strong class="reserved">if</strong> (jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == 1) <em class="brace">{</em>
<a id="L690" name="L690"></a> 690                         transition = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex].getSinceDate();
<a id="L691" name="L691"></a> 691                         <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = transition.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L692" name="L692"></a> 692                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L693" name="L693"></a> 693                         <strong class="reserved">if</strong> (eraIndex &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1) <em class="brace">{</em>
<a id="L694" name="L694"></a> 694                             transition = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex + 1].getSinceDate();
<a id="L695" name="L695"></a> 695                             <strong class="reserved">if</strong> (transition.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == jdate.getNormalizedYear()) <em class="brace">{</em>
<a id="L696" name="L696"></a> 696                                 <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = transition.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L697" name="L697"></a> 697                                 <strong class="reserved">if</strong> (transition.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() == 1) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698                                     <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>--;
<a id="L699" name="L699"></a> 699                                 <em class="brace">}</em>
<a id="L700" name="L700"></a> 700                             <em class="brace">}</em>
<a id="L701" name="L701"></a> 701                         <em class="brace">}</em>
<a id="L702" name="L702"></a> 702                     <em class="brace">}</em>
<a id="L703" name="L703"></a> 703 
<a id="L704" name="L704"></a> 704                     <strong class="reserved">if</strong> (<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> == <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L705" name="L705"></a> 705                         <em class="comment">// The year has only one month. No need to</em>
<a id="L706" name="L706"></a> 706                         <em class="comment">// process further. (Showa Gan-nen (year 1)</em>
<a id="L707" name="L707"></a> 707                         <em class="comment">// and the last year have only one month.)</em>
<a id="L708" name="L708"></a> 708                         <strong class="reserved">return</strong>;
<a id="L709" name="L709"></a> 709                     <em class="brace">}</em>
<a id="L710" name="L710"></a> 710                     <strong class="reserved">int</strong> n = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field), amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>);
<a id="L711" name="L711"></a> 711                     <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, n);
<a id="L712" name="L712"></a> 712                     <strong class="reserved">if</strong> (n == <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713                         <strong class="reserved">if</strong> (!(transition.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() == BaseCalendar.JANUARY
<a id="L714" name="L714"></a> 714                               &amp;&amp; transition.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() == 1)) <em class="brace">{</em>
<a id="L715" name="L715"></a> 715                             <strong class="reserved">if</strong> (jdate.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() &lt; transition.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()) <em class="brace">{</em>
<a id="L716" name="L716"></a> 716                                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, transition.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L717" name="L717"></a> 717                             <em class="brace">}</em>
<a id="L718" name="L718"></a> 718                         <em class="brace">}</em>
<a id="L719" name="L719"></a> 719                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (n == <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> &amp;&amp; (transition.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1 == n)) <em class="brace">{</em>
<a id="L720" name="L720"></a> 720                         <strong class="reserved">int</strong> dom = transition.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>();
<a id="L721" name="L721"></a> 721                         <strong class="reserved">if</strong> (jdate.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() &gt;= dom) <em class="brace">{</em>
<a id="L722" name="L722"></a> 722                             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, dom - 1);
<a id="L723" name="L723"></a> 723                         <em class="brace">}</em>
<a id="L724" name="L724"></a> 724                     <em class="brace">}</em>
<a id="L725" name="L725"></a> 725                 <em class="brace">}</em>
<a id="L726" name="L726"></a> 726                 <strong class="reserved">return</strong>;
<a id="L727" name="L727"></a> 727             <em class="brace">}</em>
<a id="L728" name="L728"></a> 728 
<a id="L729" name="L729"></a> 729         <strong class="reserved">case</strong> WEEK_OF_YEAR:
<a id="L730" name="L730"></a> 730             <em class="brace">{</em>
<a id="L731" name="L731"></a> 731                 <strong class="reserved">int</strong> y = jdate.getNormalizedYear();
<a id="L732" name="L732"></a> 732                 <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(WEEK_OF_YEAR);
<a id="L733" name="L733"></a> 733                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>, <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>)); <em class="comment">// update stamp[field]</em>
<a id="L734" name="L734"></a> 734                 <strong class="reserved">int</strong> woy = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(WEEK_OF_YEAR);
<a id="L735" name="L735"></a> 735                 <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = woy + amount;
<a id="L736" name="L736"></a> 736                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear())) <em class="brace">{</em>
<a id="L737" name="L737"></a> 737                     <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L738" name="L738"></a> 738                     <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == <a href="../D/20492.html" title="Multiple defined in 21 places.">getMaximum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L739" name="L739"></a> 739                         <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(WEEK_OF_YEAR);
<a id="L740" name="L740"></a> 740                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L741" name="L741"></a> 741                         <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <a href="../D/16807.html" title="Multiple defined in 3 places.">getActualMinimum</a>(WEEK_OF_YEAR);
<a id="L742" name="L742"></a> 742                         <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(WEEK_OF_YEAR);
<a id="L743" name="L743"></a> 743                         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &gt; <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &lt; <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L744" name="L744"></a> 744                             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(WEEK_OF_YEAR, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L745" name="L745"></a> 745                             <strong class="reserved">return</strong>;
<a id="L746" name="L746"></a> 746                         <em class="brace">}</em>
<a id="L747" name="L747"></a> 747 
<a id="L748" name="L748"></a> 748                     <em class="brace">}</em>
<a id="L749" name="L749"></a> 749                     <em class="comment">// If the new value is in between min and max</em>
<a id="L750" name="L750"></a> 750                     <em class="comment">// (exclusive), then we can use the value.</em>
<a id="L751" name="L751"></a> 751                     <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &gt; <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &lt; <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L752" name="L752"></a> 752                         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(WEEK_OF_YEAR, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L753" name="L753"></a> 753                         <strong class="reserved">return</strong>;
<a id="L754" name="L754"></a> 754                     <em class="brace">}</em>
<a id="L755" name="L755"></a> 755                     <strong class="reserved">long</strong> fd = cachedFixedDate;
<a id="L756" name="L756"></a> 756                     <em class="comment">// Make sure that the min week has the current DAY_OF_WEEK</em>
<a id="L757" name="L757"></a> 757                     <strong class="reserved">long</strong> day1 = fd - (7 * (woy - <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>));
<a id="L758" name="L758"></a> 758                     <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> != <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L759" name="L759"></a> 759                         <strong class="reserved">if</strong> (gcal.getYearFromFixedDate(day1) != y) <em class="brace">{</em>
<a id="L760" name="L760"></a> 760                             <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>++;
<a id="L761" name="L761"></a> 761                         <em class="brace">}</em>
<a id="L762" name="L762"></a> 762                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L763" name="L763"></a> 763                         CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L764" name="L764"></a> 764                         <strong class="reserved">if</strong> (day1 &lt; jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d)) <em class="brace">{</em>
<a id="L765" name="L765"></a> 765                             <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>++;
<a id="L766" name="L766"></a> 766                         <em class="brace">}</em>
<a id="L767" name="L767"></a> 767                     <em class="brace">}</em>
<a id="L768" name="L768"></a> 768 
<a id="L769" name="L769"></a> 769                     <em class="comment">// Make sure the same thing for the max week</em>
<a id="L770" name="L770"></a> 770                     fd += 7 * (<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> - <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(WEEK_OF_YEAR));
<a id="L771" name="L771"></a> 771                     <strong class="reserved">if</strong> (gcal.getYearFromFixedDate(fd) != y) <em class="brace">{</em>
<a id="L772" name="L772"></a> 772                         <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>--;
<a id="L773" name="L773"></a> 773                     <em class="brace">}</em>
<a id="L774" name="L774"></a> 774                     <strong class="reserved">break</strong>;
<a id="L775" name="L775"></a> 775                 <em class="brace">}</em>
<a id="L776" name="L776"></a> 776 
<a id="L777" name="L777"></a> 777                 <em class="comment">// Handle transition here.</em>
<a id="L778" name="L778"></a> 778                 <strong class="reserved">long</strong> fd = cachedFixedDate;
<a id="L779" name="L779"></a> 779                 <strong class="reserved">long</strong> day1 = fd - (7 * (woy - <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>));
<a id="L780" name="L780"></a> 780                 <em class="comment">// Make sure that the min week has the current DAY_OF_WEEK</em>
<a id="L781" name="L781"></a> 781                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(day1);
<a id="L782" name="L782"></a> 782                 <strong class="reserved">if</strong> (!(d.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == jdate.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() &amp;&amp; d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>())) <em class="brace">{</em>
<a id="L783" name="L783"></a> 783                     <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>++;
<a id="L784" name="L784"></a> 784                 <em class="brace">}</em>
<a id="L785" name="L785"></a> 785 
<a id="L786" name="L786"></a> 786                 <em class="comment">// Make sure the same thing for the max week</em>
<a id="L787" name="L787"></a> 787                 fd += 7 * (<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> - woy);
<a id="L788" name="L788"></a> 788                 jcal.getCalendarDateFromFixedDate(d, fd);
<a id="L789" name="L789"></a> 789                 <strong class="reserved">if</strong> (!(d.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == jdate.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() &amp;&amp; d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>())) <em class="brace">{</em>
<a id="L790" name="L790"></a> 790                     <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>--;
<a id="L791" name="L791"></a> 791                 <em class="brace">}</em>
<a id="L792" name="L792"></a> 792                 <em class="comment">// value: the new WEEK_OF_YEAR which must be converted</em>
<a id="L793" name="L793"></a> 793                 <em class="comment">// to month and day of month.</em>
<a id="L794" name="L794"></a> 794                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(woy, amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) - 1;
<a id="L795" name="L795"></a> 795                 d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(day1 + <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> * 7);
<a id="L796" name="L796"></a> 796                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1);
<a id="L797" name="L797"></a> 797                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L798" name="L798"></a> 798                 <strong class="reserved">return</strong>;
<a id="L799" name="L799"></a> 799             <em class="brace">}</em>
<a id="L800" name="L800"></a> 800 
<a id="L801" name="L801"></a> 801         <strong class="reserved">case</strong> WEEK_OF_MONTH:
<a id="L802" name="L802"></a> 802             <em class="brace">{</em>
<a id="L803" name="L803"></a> 803                 <strong class="reserved">boolean</strong> <a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a> = <a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear());
<a id="L804" name="L804"></a> 804                 <em class="comment">// dow: relative day of week from the first day of week</em>
<a id="L805" name="L805"></a> 805                 <strong class="reserved">int</strong> dow = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>) - <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>();
<a id="L806" name="L806"></a> 806                 <strong class="reserved">if</strong> (dow &lt; 0) <em class="brace">{</em>
<a id="L807" name="L807"></a> 807                     dow += 7;
<a id="L808" name="L808"></a> 808                 <em class="brace">}</em>
<a id="L809" name="L809"></a> 809 
<a id="L810" name="L810"></a> 810                 <strong class="reserved">long</strong> fd = cachedFixedDate;
<a id="L811" name="L811"></a> 811                 <strong class="reserved">long</strong> month1;     <em class="comment">// fixed date of the first day (usually 1) of the month</em>
<a id="L812" name="L812"></a> 812                 <strong class="reserved">int</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>; <em class="comment">// actual month length</em>
<a id="L813" name="L813"></a> 813                 <strong class="reserved">if</strong> (<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>) <em class="brace">{</em>
<a id="L814" name="L814"></a> 814                     month1 = <a href="../D/19127.html" title="Multiple defined in 2 places.">getFixedDateMonth1</a>(jdate, fd);
<a id="L815" name="L815"></a> 815                     <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = <a href="../D/10617.html" title="Multiple defined in 2 places.">actualMonthLength</a>();
<a id="L816" name="L816"></a> 816                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L817" name="L817"></a> 817                     month1 = fd - <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>) + 1;
<a id="L818" name="L818"></a> 818                     <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(jdate);
<a id="L819" name="L819"></a> 819                 <em class="brace">}</em>
<a id="L820" name="L820"></a> 820 
<a id="L821" name="L821"></a> 821                 <em class="comment">// the first day of week of the month.</em>
<a id="L822" name="L822"></a> 822                 <strong class="reserved">long</strong> monthDay1st = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(month1 + 6,
<a id="L823" name="L823"></a> 823                                                                                      <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L824" name="L824"></a> 824                 <em class="comment">// if the week has enough days to form a week, the</em>
<a id="L825" name="L825"></a> 825                 <em class="comment">// week starts from the previous month.</em>
<a id="L826" name="L826"></a> 826                 <strong class="reserved">if</strong> ((<strong class="reserved">int</strong>)(monthDay1st - month1) &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>()) <em class="brace">{</em>
<a id="L827" name="L827"></a> 827                     monthDay1st -= 7;
<a id="L828" name="L828"></a> 828                 <em class="brace">}</em>
<a id="L829" name="L829"></a> 829                 <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(field);
<a id="L830" name="L830"></a> 830 
<a id="L831" name="L831"></a> 831                 <em class="comment">// value: the new WEEK_OF_MONTH value</em>
<a id="L832" name="L832"></a> 832                 <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field), amount, 1, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) - 1;
<a id="L833" name="L833"></a> 833 
<a id="L834" name="L834"></a> 834                 <em class="comment">// nfd: fixed date of the rolled date</em>
<a id="L835" name="L835"></a> 835                 <strong class="reserved">long</strong> nfd = monthDay1st + <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> * 7 + dow;
<a id="L836" name="L836"></a> 836 
<a id="L837" name="L837"></a> 837                 <em class="comment">// Unlike WEEK_OF_YEAR, we need to change day of week if the</em>
<a id="L838" name="L838"></a> 838                 <em class="comment">// nfd is out of the month.</em>
<a id="L839" name="L839"></a> 839                 <strong class="reserved">if</strong> (nfd &lt; month1) <em class="brace">{</em>
<a id="L840" name="L840"></a> 840                     nfd = month1;
<a id="L841" name="L841"></a> 841                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (nfd &gt;= (month1 + <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>)) <em class="brace">{</em>
<a id="L842" name="L842"></a> 842                     nfd = month1 + <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> - 1;
<a id="L843" name="L843"></a> 843                 <em class="brace">}</em>
<a id="L844" name="L844"></a> 844                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, (<strong class="reserved">int</strong>)(nfd - month1) + 1);
<a id="L845" name="L845"></a> 845                 <strong class="reserved">return</strong>;
<a id="L846" name="L846"></a> 846             <em class="brace">}</em>
<a id="L847" name="L847"></a> 847 
<a id="L848" name="L848"></a> 848         <strong class="reserved">case</strong> <a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>:
<a id="L849" name="L849"></a> 849             <em class="brace">{</em>
<a id="L850" name="L850"></a> 850                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear())) <em class="brace">{</em>
<a id="L851" name="L851"></a> 851                     <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(jdate);
<a id="L852" name="L852"></a> 852                     <strong class="reserved">break</strong>;
<a id="L853" name="L853"></a> 853                 <em class="brace">}</em>
<a id="L854" name="L854"></a> 854 
<a id="L855" name="L855"></a> 855                 <em class="comment">// TODO: Need to change the spec to be usable DAY_OF_MONTH rolling...</em>
<a id="L856" name="L856"></a> 856 
<a id="L857" name="L857"></a> 857                 <em class="comment">// Transition handling. We can't change year and era</em>
<a id="L858" name="L858"></a> 858                 <em class="comment">// values here due to the Calendar roll spec!</em>
<a id="L859" name="L859"></a> 859                 <strong class="reserved">long</strong> month1 = <a href="../D/19127.html" title="Multiple defined in 2 places.">getFixedDateMonth1</a>(jdate, cachedFixedDate);
<a id="L860" name="L860"></a> 860 
<a id="L861" name="L861"></a> 861                 <em class="comment">// It may not be a regular month. Convert the date and range to</em>
<a id="L862" name="L862"></a> 862                 <em class="comment">// the relative values, perform the roll, and</em>
<a id="L863" name="L863"></a> 863                 <em class="comment">// convert the result back to the rolled date.</em>
<a id="L864" name="L864"></a> 864                 <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>((<strong class="reserved">int</strong>)(cachedFixedDate - month1), amount,
<a id="L865" name="L865"></a> 865                                            0, <a href="../D/10617.html" title="Multiple defined in 2 places.">actualMonthLength</a>() - 1);
<a id="L866" name="L866"></a> 866                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(month1 + <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L867" name="L867"></a> 867                 <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(d) == <a href="../D/24931.html" title="Multiple defined in 2 places.">internalGetEra</a>()
<a id="L868" name="L868"></a> 868                     &amp;&amp; d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>) &amp;&amp; d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>()-1 == <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MONTH);
<a id="L869" name="L869"></a> 869                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L870" name="L870"></a> 870                 <strong class="reserved">return</strong>;
<a id="L871" name="L871"></a> 871             <em class="brace">}</em>
<a id="L872" name="L872"></a> 872 
<a id="L873" name="L873"></a> 873         <strong class="reserved">case</strong> <a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>:
<a id="L874" name="L874"></a> 874             <em class="brace">{</em>
<a id="L875" name="L875"></a> 875                 <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(field);
<a id="L876" name="L876"></a> 876                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear())) <em class="brace">{</em>
<a id="L877" name="L877"></a> 877                     <strong class="reserved">break</strong>;
<a id="L878" name="L878"></a> 878                 <em class="brace">}</em>
<a id="L879" name="L879"></a> 879 
<a id="L880" name="L880"></a> 880                 <em class="comment">// Handle transition. We can't change year and era values</em>
<a id="L881" name="L881"></a> 881                 <em class="comment">// here due to the Calendar roll spec.</em>
<a id="L882" name="L882"></a> 882                 <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>), amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>);
<a id="L883" name="L883"></a> 883                 <strong class="reserved">long</strong> jan0 = cachedFixedDate - <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>);
<a id="L884" name="L884"></a> 884                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(jan0 + <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L885" name="L885"></a> 885                 <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(d) == <a href="../D/24931.html" title="Multiple defined in 2 places.">internalGetEra</a>() &amp;&amp; d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>);
<a id="L886" name="L886"></a> 886                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(MONTH, d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1);
<a id="L887" name="L887"></a> 887                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L888" name="L888"></a> 888                 <strong class="reserved">return</strong>;
<a id="L889" name="L889"></a> 889             <em class="brace">}</em>
<a id="L890" name="L890"></a> 890 
<a id="L891" name="L891"></a> 891         <strong class="reserved">case</strong> <a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>:
<a id="L892" name="L892"></a> 892             <em class="brace">{</em>
<a id="L893" name="L893"></a> 893                 <strong class="reserved">int</strong> normalizedYear = jdate.getNormalizedYear();
<a id="L894" name="L894"></a> 894                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(normalizedYear) &amp;&amp; !<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(normalizedYear - 1)) <em class="brace">{</em>
<a id="L895" name="L895"></a> 895                     <em class="comment">// If the week of year is in the same year, we can</em>
<a id="L896" name="L896"></a> 896                     <em class="comment">// just change DAY_OF_WEEK.</em>
<a id="L897" name="L897"></a> 897                     <strong class="reserved">int</strong> <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(WEEK_OF_YEAR);
<a id="L898" name="L898"></a> 898                     <strong class="reserved">if</strong> (<a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> &gt; 1 &amp;&amp; <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> &lt; 52) <em class="brace">{</em>
<a id="L899" name="L899"></a> 899                         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(WEEK_OF_YEAR, <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(WEEK_OF_YEAR));
<a id="L900" name="L900"></a> 900                         <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = SATURDAY;
<a id="L901" name="L901"></a> 901                         <strong class="reserved">break</strong>;
<a id="L902" name="L902"></a> 902                     <em class="brace">}</em>
<a id="L903" name="L903"></a> 903                 <em class="brace">}</em>
<a id="L904" name="L904"></a> 904 
<a id="L905" name="L905"></a> 905                 <em class="comment">// We need to handle it in a different way around year</em>
<a id="L906" name="L906"></a> 906                 <em class="comment">// boundaries and in the transition year. Note that</em>
<a id="L907" name="L907"></a> 907                 <em class="comment">// changing era and year values violates the roll</em>
<a id="L908" name="L908"></a> 908                 <em class="comment">// rule: not changing larger calendar fields...</em>
<a id="L909" name="L909"></a> 909                 amount %= 7;
<a id="L910" name="L910"></a> 910                 <strong class="reserved">if</strong> (amount == 0) <em class="brace">{</em>
<a id="L911" name="L911"></a> 911                     <strong class="reserved">return</strong>;
<a id="L912" name="L912"></a> 912                 <em class="brace">}</em>
<a id="L913" name="L913"></a> 913                 <strong class="reserved">long</strong> fd = cachedFixedDate;
<a id="L914" name="L914"></a> 914                 <strong class="reserved">long</strong> dowFirst = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(fd, <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L915" name="L915"></a> 915                 fd += amount;
<a id="L916" name="L916"></a> 916                 <strong class="reserved">if</strong> (fd &lt; dowFirst) <em class="brace">{</em>
<a id="L917" name="L917"></a> 917                     fd += 7;
<a id="L918" name="L918"></a> 918                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (fd &gt;= dowFirst + 7) <em class="brace">{</em>
<a id="L919" name="L919"></a> 919                     fd -= 7;
<a id="L920" name="L920"></a> 920                 <em class="brace">}</em>
<a id="L921" name="L921"></a> 921                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(fd);
<a id="L922" name="L922"></a> 922                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>, <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(d));
<a id="L923" name="L923"></a> 923                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>(), d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L924" name="L924"></a> 924                 <strong class="reserved">return</strong>;
<a id="L925" name="L925"></a> 925             <em class="brace">}</em>
<a id="L926" name="L926"></a> 926 
<a id="L927" name="L927"></a> 927         <strong class="reserved">case</strong> DAY_OF_WEEK_IN_MONTH:
<a id="L928" name="L928"></a> 928             <em class="brace">{</em>
<a id="L929" name="L929"></a> 929                 <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = 1; <em class="comment">// after having normalized, min should be 1.</em>
<a id="L930" name="L930"></a> 930                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear())) <em class="brace">{</em>
<a id="L931" name="L931"></a> 931                     <strong class="reserved">int</strong> dom = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>);
<a id="L932" name="L932"></a> 932                     <strong class="reserved">int</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(jdate);
<a id="L933" name="L933"></a> 933                     <strong class="reserved">int</strong> lastDays = <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> % 7;
<a id="L934" name="L934"></a> 934                     <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> / 7;
<a id="L935" name="L935"></a> 935                     <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (dom - 1) % 7;
<a id="L936" name="L936"></a> 936                     <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; lastDays) <em class="brace">{</em>
<a id="L937" name="L937"></a> 937                         <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>++;
<a id="L938" name="L938"></a> 938                     <em class="brace">}</em>
<a id="L939" name="L939"></a> 939                     <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>, <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>));
<a id="L940" name="L940"></a> 940                     <strong class="reserved">break</strong>;
<a id="L941" name="L941"></a> 941                 <em class="brace">}</em>
<a id="L942" name="L942"></a> 942 
<a id="L943" name="L943"></a> 943                 <em class="comment">// Transition year handling.</em>
<a id="L944" name="L944"></a> 944                 <strong class="reserved">long</strong> fd = cachedFixedDate;
<a id="L945" name="L945"></a> 945                 <strong class="reserved">long</strong> month1 = <a href="../D/19127.html" title="Multiple defined in 2 places.">getFixedDateMonth1</a>(jdate, fd);
<a id="L946" name="L946"></a> 946                 <strong class="reserved">int</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = <a href="../D/10617.html" title="Multiple defined in 2 places.">actualMonthLength</a>();
<a id="L947" name="L947"></a> 947                 <strong class="reserved">int</strong> lastDays = <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> % 7;
<a id="L948" name="L948"></a> 948                 <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> / 7;
<a id="L949" name="L949"></a> 949                 <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (<strong class="reserved">int</strong>)(fd - month1) % 7;
<a id="L950" name="L950"></a> 950                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; lastDays) <em class="brace">{</em>
<a id="L951" name="L951"></a> 951                     <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>++;
<a id="L952" name="L952"></a> 952                 <em class="brace">}</em>
<a id="L953" name="L953"></a> 953                 <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field), amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) - 1;
<a id="L954" name="L954"></a> 954                 fd = month1 + <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> * 7 + <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L955" name="L955"></a> 955                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(fd);
<a id="L956" name="L956"></a> 956                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L957" name="L957"></a> 957                 <strong class="reserved">return</strong>;
<a id="L958" name="L958"></a> 958             <em class="brace">}</em>
<a id="L959" name="L959"></a> 959         <em class="brace">}</em>
<a id="L960" name="L960"></a> 960 
<a id="L961" name="L961"></a> 961         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(field, <a href="../D/22115.html" title="Multiple defined in 2 places.">getRolledValue</a>(<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field), amount, <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>));
<a id="L962" name="L962"></a> 962     <em class="brace">}</em>
<a id="L963" name="L963"></a> 963 
<a id="L964" name="L964"></a> 964     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L965" name="L965"></a> 965     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16189.html" title="Multiple referred from 20 places.">getDisplayName</a>(<strong class="reserved">int</strong> field, <strong class="reserved">int</strong> style, <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>) <em class="brace">{</em>
<a id="L966" name="L966"></a> 966         <strong class="reserved">if</strong> (!<a href="../S/866.html#L2213" title="Defined at 2213 in src/java/util/Calendar.java.">checkDisplayNameParams</a>(field, style, <a href="../S/1535.html#L104" title="Defined at 104 in src/java/time/format/TextStyle.java.">SHORT</a>, NARROW_FORMAT, <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>,
<a id="L967" name="L967"></a> 967                                     ERA_MASK|YEAR_MASK|MONTH_MASK|DAY_OF_WEEK_MASK|AM_PM_MASK)) <em class="brace">{</em>
<a id="L968" name="L968"></a> 968             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L969" name="L969"></a> 969         <em class="brace">}</em>
<a id="L970" name="L970"></a> 970 
<a id="L971" name="L971"></a> 971         <strong class="reserved">int</strong> fieldValue = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(field);
<a id="L972" name="L972"></a> 972 
<a id="L973" name="L973"></a> 973         <em class="comment">// "GanNen" is supported only in the LONG style.</em>
<a id="L974" name="L974"></a> 974         <strong class="reserved">if</strong> (field == <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>
<a id="L975" name="L975"></a> 975             &amp;&amp; (<a href="../S/866.html#L2575" title="Defined at 2575 in src/java/util/Calendar.java.">getBaseStyle</a>(style) != LONG || fieldValue != 1 || <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>) == 0)) <em class="brace">{</em>
<a id="L976" name="L976"></a> 976             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L977" name="L977"></a> 977         <em class="brace">}</em>
<a id="L978" name="L978"></a> 978 
<a id="L979" name="L979"></a> 979         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = CalendarDataUtility.retrieveFieldValueName(<a href="../D/17463.html" title="Multiple defined in 9 places.">getCalendarType</a>(), field,
<a id="L980" name="L980"></a> 980                                                                  fieldValue, style, <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>);
<a id="L981" name="L981"></a> 981         <em class="comment">// If the ERA value is null, then</em>
<a id="L982" name="L982"></a> 982         <em class="comment">// try to get its name or abbreviation from the Era instance.</em>
<a id="L983" name="L983"></a> 983         <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> == <strong class="reserved">null</strong> &amp;&amp; field == <a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a> &amp;&amp; fieldValue &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L984" name="L984"></a> 984             <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a> era = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[fieldValue];
<a id="L985" name="L985"></a> 985             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = (style == <a href="../S/1535.html#L104" title="Defined at 104 in src/java/time/format/TextStyle.java.">SHORT</a>) ? era.<a href="../S/1514.html#L339" title="Defined at 339 in src/java/time/chrono/JapaneseEra.java.">getAbbreviation</a>() : era.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L986" name="L986"></a> 986         <em class="brace">}</em>
<a id="L987" name="L987"></a> 987         <strong class="reserved">return</strong> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L988" name="L988"></a> 988     <em class="brace">}</em>
<a id="L989" name="L989"></a> 989 
<a id="L990" name="L990"></a> 990     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L991" name="L991"></a> 991     <strong class="reserved">public</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <a href="../R/16190.html" title="Multiple referred from 4 places.">getDisplayNames</a>(<strong class="reserved">int</strong> field, <strong class="reserved">int</strong> style, <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992         <strong class="reserved">if</strong> (!<a href="../S/866.html#L2213" title="Defined at 2213 in src/java/util/Calendar.java.">checkDisplayNameParams</a>(field, style, ALL_STYLES, NARROW_FORMAT, <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>,
<a id="L993" name="L993"></a> 993                                     ERA_MASK|YEAR_MASK|MONTH_MASK|DAY_OF_WEEK_MASK|AM_PM_MASK)) <em class="brace">{</em>
<a id="L994" name="L994"></a> 994             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L995" name="L995"></a> 995         <em class="brace">}</em>
<a id="L996" name="L996"></a> 996         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; names;
<a id="L997" name="L997"></a> 997         names = CalendarDataUtility.retrieveFieldValueNames(<a href="../D/17463.html" title="Multiple defined in 9 places.">getCalendarType</a>(), field, style, <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>);
<a id="L998" name="L998"></a> 998         <em class="comment">// If strings[] has fewer than eras[], get more names from eras[].</em>
<a id="L999" name="L999"></a> 999         <strong class="reserved">if</strong> (names != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1000" name="L1000"></a>1000             <strong class="reserved">if</strong> (field == <a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>) <em class="brace">{</em>
<a id="L1001" name="L1001"></a>1001                 <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = names.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1002" name="L1002"></a>1002                 <strong class="reserved">if</strong> (style == ALL_STYLES) <em class="brace">{</em>
<a id="L1003" name="L1003"></a>1003                     <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a> = <strong class="reserved">new</strong> <a href="../S/1136.html#L89" title="Defined at 89 in src/java/util/HashSet.java.">HashSet</a>&lt;&gt;();
<a id="L1004" name="L1004"></a>1004                     <em class="comment">// count unique era values</em>
<a id="L1005" name="L1005"></a>1005                     <strong class="reserved">for</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> : names.<a href="../D/26719.html" title="Multiple defined in 33 places.">keySet</a>()) <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006                         <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(names.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>));
<a id="L1007" name="L1007"></a>1007                     <em class="brace">}</em>
<a id="L1008" name="L1008"></a>1008                     <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1009" name="L1009"></a>1009                 <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010                 <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1011" name="L1011"></a>1011                     <strong class="reserved">int</strong> baseStyle = <a href="../S/866.html#L2575" title="Defined at 2575 in src/java/util/Calendar.java.">getBaseStyle</a>(style);
<a id="L1012" name="L1012"></a>1012                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1013" name="L1013"></a>1013                         <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a> era = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[i];
<a id="L1014" name="L1014"></a>1014                         <strong class="reserved">if</strong> (baseStyle == ALL_STYLES || baseStyle == <a href="../S/1535.html#L104" title="Defined at 104 in src/java/time/format/TextStyle.java.">SHORT</a>
<a id="L1015" name="L1015"></a>1015                                 || baseStyle == NARROW_FORMAT) <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016                             names.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(era.<a href="../S/1514.html#L339" title="Defined at 339 in src/java/time/chrono/JapaneseEra.java.">getAbbreviation</a>(), i);
<a id="L1017" name="L1017"></a>1017                         <em class="brace">}</em>
<a id="L1018" name="L1018"></a>1018                         <strong class="reserved">if</strong> (baseStyle == ALL_STYLES || baseStyle == LONG) <em class="brace">{</em>
<a id="L1019" name="L1019"></a>1019                             names.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(era.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), i);
<a id="L1020" name="L1020"></a>1020                         <em class="brace">}</em>
<a id="L1021" name="L1021"></a>1021                     <em class="brace">}</em>
<a id="L1022" name="L1022"></a>1022                 <em class="brace">}</em>
<a id="L1023" name="L1023"></a>1023             <em class="brace">}</em>
<a id="L1024" name="L1024"></a>1024         <em class="brace">}</em>
<a id="L1025" name="L1025"></a>1025         <strong class="reserved">return</strong> names;
<a id="L1026" name="L1026"></a>1026     <em class="brace">}</em>
<a id="L1027" name="L1027"></a>1027 
<div class="comment">
      Returns the minimum value for the given calendar field of this
      <code>Calendar</code> instance. The minimum value is
      defined as the smallest value returned by the {@link
      Calendar#get(int) get} method for any possible time value,
      taking into consideration the current values of the
      {@link Calendar#getFirstDayOfWeek() getFirstDayOfWeek},
      {@link Calendar#getMinimalDaysInFirstWeek() getMinimalDaysInFirstWeek},
      and {@link Calendar#getTimeZone() getTimeZone} methods.
      @param field the calendar field.
      @return the minimum value for the given calendar field.
      @see #getMaximum(int)
      @see #getGreatestMinimum(int)
      @see #getLeastMaximum(int)
      @see #getActualMinimum(int)
      @see #getActualMaximum(int)</div>
<a id="L1046" name="L1046"></a>1046     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17729.html" title="Multiple referred from 89 places.">getMinimum</a>(<strong class="reserved">int</strong> field) <em class="brace">{</em>
<a id="L1047" name="L1047"></a>1047         <strong class="reserved">return</strong> MIN_VALUES[field];
<a id="L1048" name="L1048"></a>1048     <em class="brace">}</em>
<a id="L1049" name="L1049"></a>1049 
<div class="comment">
      Returns the maximum value for the given calendar field of this
      <code>GregorianCalendar</code> instance. The maximum value is
      defined as the largest value returned by the {@link
      Calendar#get(int) get} method for any possible time value,
      taking into consideration the current values of the
      {@link Calendar#getFirstDayOfWeek() getFirstDayOfWeek},
      {@link Calendar#getMinimalDaysInFirstWeek() getMinimalDaysInFirstWeek},
      and {@link Calendar#getTimeZone() getTimeZone} methods.
      @param field the calendar field.
      @return the maximum value for the given calendar field.
      @see #getMinimum(int)
      @see #getGreatestMinimum(int)
      @see #getLeastMaximum(int)
      @see #getActualMinimum(int)
      @see #getActualMaximum(int)</div>
<a id="L1068" name="L1068"></a>1068     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17611.html" title="Multiple referred from 94 places.">getMaximum</a>(<strong class="reserved">int</strong> field) <em class="brace">{</em>
<a id="L1069" name="L1069"></a>1069         <strong class="reserved">switch</strong> (field) <em class="brace">{</em>
<a id="L1070" name="L1070"></a>1070         <strong class="reserved">case</strong> <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>:
<a id="L1071" name="L1071"></a>1071             <em class="brace">{</em>
<a id="L1072" name="L1072"></a>1072                 <em class="comment">// The value should depend on the time zone of this calendar.</em>
<a id="L1073" name="L1073"></a>1073                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE,
<a id="L1074" name="L1074"></a>1074                                                                      <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1075" name="L1075"></a>1075                 <strong class="reserved">return</strong> <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(LEAST_MAX_VALUES[<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>], d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>());
<a id="L1076" name="L1076"></a>1076             <em class="brace">}</em>
<a id="L1077" name="L1077"></a>1077         <em class="brace">}</em>
<a id="L1078" name="L1078"></a>1078         <strong class="reserved">return</strong> MAX_VALUES[field];
<a id="L1079" name="L1079"></a>1079     <em class="brace">}</em>
<a id="L1080" name="L1080"></a>1080 
<div class="comment">
      Returns the highest minimum value for the given calendar field
      of this <code>GregorianCalendar</code> instance. The highest
      minimum value is defined as the largest value returned by
      {@link #getActualMinimum(int)} for any possible time value,
      taking into consideration the current values of the
      {@link Calendar#getFirstDayOfWeek() getFirstDayOfWeek},
      {@link Calendar#getMinimalDaysInFirstWeek() getMinimalDaysInFirstWeek},
      and {@link Calendar#getTimeZone() getTimeZone} methods.
      @param field the calendar field.
      @return the highest minimum value for the given calendar field.
      @see #getMinimum(int)
      @see #getMaximum(int)
      @see #getLeastMaximum(int)
      @see #getActualMinimum(int)
      @see #getActualMaximum(int)</div>
<a id="L1099" name="L1099"></a>1099     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16818.html" title="Multiple referred from 3 places.">getGreatestMinimum</a>(<strong class="reserved">int</strong> field) <em class="brace">{</em>
<a id="L1100" name="L1100"></a>1100         <strong class="reserved">return</strong> field == <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a> ? 1 : MIN_VALUES[field];
<a id="L1101" name="L1101"></a>1101     <em class="brace">}</em>
<a id="L1102" name="L1102"></a>1102 
<div class="comment">
      Returns the lowest maximum value for the given calendar field
      of this <code>GregorianCalendar</code> instance. The lowest
      maximum value is defined as the smallest value returned by
      {@link #getActualMaximum(int)} for any possible time value,
      taking into consideration the current values of the
      {@link Calendar#getFirstDayOfWeek() getFirstDayOfWeek},
      {@link Calendar#getMinimalDaysInFirstWeek() getMinimalDaysInFirstWeek},
      and {@link Calendar#getTimeZone() getTimeZone} methods.
      @param field the calendar field
      @return the lowest maximum value for the given calendar field.
      @see #getMinimum(int)
      @see #getMaximum(int)
      @see #getGreatestMinimum(int)
      @see #getActualMinimum(int)
      @see #getActualMaximum(int)</div>
<a id="L1121" name="L1121"></a>1121     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17324.html" title="Multiple referred from 5 places.">getLeastMaximum</a>(<strong class="reserved">int</strong> field) <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122         <strong class="reserved">switch</strong> (field) <em class="brace">{</em>
<a id="L1123" name="L1123"></a>1123         <strong class="reserved">case</strong> <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>:
<a id="L1124" name="L1124"></a>1124             <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125                 <strong class="reserved">return</strong> <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(LEAST_MAX_VALUES[<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>], <a href="../D/20492.html" title="Multiple defined in 21 places.">getMaximum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>));
<a id="L1126" name="L1126"></a>1126             <em class="brace">}</em>
<a id="L1127" name="L1127"></a>1127         <em class="brace">}</em>
<a id="L1128" name="L1128"></a>1128         <strong class="reserved">return</strong> LEAST_MAX_VALUES[field];
<a id="L1129" name="L1129"></a>1129     <em class="brace">}</em>
<a id="L1130" name="L1130"></a>1130 
<div class="comment">
      Returns the minimum value that this calendar field could have,
      taking into consideration the given time value and the current
      values of the
      {@link Calendar#getFirstDayOfWeek() getFirstDayOfWeek},
      {@link Calendar#getMinimalDaysInFirstWeek() getMinimalDaysInFirstWeek},
      and {@link Calendar#getTimeZone() getTimeZone} methods.
      @param field the calendar field
      @return the minimum of the given field for the time value of
      this <code>JapaneseImperialCalendar</code>
      @see #getMinimum(int)
      @see #getMaximum(int)
      @see #getGreatestMinimum(int)
      @see #getLeastMaximum(int)
      @see #getActualMaximum(int)</div>
<a id="L1148" name="L1148"></a>1148     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/14967.html" title="Multiple referred from 3 places.">getActualMinimum</a>(<strong class="reserved">int</strong> field) <em class="brace">{</em>
<a id="L1149" name="L1149"></a>1149         <strong class="reserved">if</strong> (!<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(YEAR_MASK|MONTH_MASK|WEEK_OF_YEAR_MASK, field)) <em class="brace">{</em>
<a id="L1150" name="L1150"></a>1150             <strong class="reserved">return</strong> <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(field);
<a id="L1151" name="L1151"></a>1151         <em class="brace">}</em>
<a id="L1152" name="L1152"></a>1152 
<a id="L1153" name="L1153"></a>1153         <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = 0;
<a id="L1154" name="L1154"></a>1154         <a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a> jc = <a href="../D/21010.html" title="Multiple defined in 2 places.">getNormalizedCalendar</a>();
<a id="L1155" name="L1155"></a>1155         <em class="comment">// Get a local date which includes time of day and time zone,</em>
<a id="L1156" name="L1156"></a>1156         <em class="comment">// which are missing in jc.jdate.</em>
<a id="L1157" name="L1157"></a>1157         LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> jd = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(jc.<a href="../D/23146.html" title="Multiple defined in 5 places.">getTimeInMillis</a>(),
<a id="L1158" name="L1158"></a>1158                                                               <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1159" name="L1159"></a>1159         <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(jd);
<a id="L1160" name="L1160"></a>1160         <strong class="reserved">switch</strong> (field) <em class="brace">{</em>
<a id="L1161" name="L1161"></a>1161         <strong class="reserved">case</strong> <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>:
<a id="L1162" name="L1162"></a>1162             <em class="brace">{</em>
<a id="L1163" name="L1163"></a>1163                 <strong class="reserved">if</strong> (eraIndex &gt; BEFORE_MEIJI) <em class="brace">{</em>
<a id="L1164" name="L1164"></a>1164                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = 1;
<a id="L1165" name="L1165"></a>1165                     <strong class="reserved">long</strong> since = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex].getSince(<a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1166" name="L1166"></a>1166                     CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(since, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1167" name="L1167"></a>1167                     <em class="comment">// Use the same year in jd to take care of leap</em>
<a id="L1168" name="L1168"></a>1168                     <em class="comment">// years. i.e., both jd and d must agree on leap</em>
<a id="L1169" name="L1169"></a>1169                     <em class="comment">// or common years.</em>
<a id="L1170" name="L1170"></a>1170                     jd.<a href="../D/34371.html" title="Multiple defined in 6 places.">setYear</a>(d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>());
<a id="L1171" name="L1171"></a>1171                     jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L1172" name="L1172"></a>1172                     <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> jd.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>() == d.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>();
<a id="L1173" name="L1173"></a>1173                     <strong class="reserved">if</strong> (<a href="../D/23809.html" title="Multiple defined in 2 places.">getYearOffsetInMillis</a>(jd) &lt; <a href="../D/23809.html" title="Multiple defined in 2 places.">getYearOffsetInMillis</a>(d)) <em class="brace">{</em>
<a id="L1174" name="L1174"></a>1174                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1175" name="L1175"></a>1175                     <em class="brace">}</em>
<a id="L1176" name="L1176"></a>1176                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1177" name="L1177"></a>1177                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(field);
<a id="L1178" name="L1178"></a>1178                     CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1179" name="L1179"></a>1179                     <em class="comment">// Use an equvalent year of d.getYear() if</em>
<a id="L1180" name="L1180"></a>1180                     <em class="comment">// possible. Otherwise, ignore the leap year and</em>
<a id="L1181" name="L1181"></a>1181                     <em class="comment">// common year difference.</em>
<a id="L1182" name="L1182"></a>1182                     <strong class="reserved">int</strong> y = d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L1183" name="L1183"></a>1183                     <strong class="reserved">if</strong> (y &gt; 400) <em class="brace">{</em>
<a id="L1184" name="L1184"></a>1184                         y -= 400;
<a id="L1185" name="L1185"></a>1185                     <em class="brace">}</em>
<a id="L1186" name="L1186"></a>1186                     jd.<a href="../D/34371.html" title="Multiple defined in 6 places.">setYear</a>(y);
<a id="L1187" name="L1187"></a>1187                     jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L1188" name="L1188"></a>1188                     <strong class="reserved">if</strong> (<a href="../D/23809.html" title="Multiple defined in 2 places.">getYearOffsetInMillis</a>(jd) &lt; <a href="../D/23809.html" title="Multiple defined in 2 places.">getYearOffsetInMillis</a>(d)) <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1190" name="L1190"></a>1190                     <em class="brace">}</em>
<a id="L1191" name="L1191"></a>1191                 <em class="brace">}</em>
<a id="L1192" name="L1192"></a>1192             <em class="brace">}</em>
<a id="L1193" name="L1193"></a>1193             <strong class="reserved">break</strong>;
<a id="L1194" name="L1194"></a>1194 
<a id="L1195" name="L1195"></a>1195         <strong class="reserved">case</strong> MONTH:
<a id="L1196" name="L1196"></a>1196             <em class="brace">{</em>
<a id="L1197" name="L1197"></a>1197                 <em class="comment">// In Before Meiji and Meiji, January is the first month.</em>
<a id="L1198" name="L1198"></a>1198                 <strong class="reserved">if</strong> (eraIndex &gt; MEIJI &amp;&amp; jd.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == 1) <em class="brace">{</em>
<a id="L1199" name="L1199"></a>1199                     <strong class="reserved">long</strong> since = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex].getSince(<a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1200" name="L1200"></a>1200                     CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(since, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1201" name="L1201"></a>1201                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L1202" name="L1202"></a>1202                     <strong class="reserved">if</strong> (jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() &lt; d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()) <em class="brace">{</em>
<a id="L1203" name="L1203"></a>1203                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1204" name="L1204"></a>1204                     <em class="brace">}</em>
<a id="L1205" name="L1205"></a>1205                 <em class="brace">}</em>
<a id="L1206" name="L1206"></a>1206             <em class="brace">}</em>
<a id="L1207" name="L1207"></a>1207             <strong class="reserved">break</strong>;
<a id="L1208" name="L1208"></a>1208 
<a id="L1209" name="L1209"></a>1209         <strong class="reserved">case</strong> WEEK_OF_YEAR:
<a id="L1210" name="L1210"></a>1210             <em class="brace">{</em>
<a id="L1211" name="L1211"></a>1211                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = 1;
<a id="L1212" name="L1212"></a>1212                 CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1213" name="L1213"></a>1213                 <em class="comment">// shift 400 years to avoid underflow</em>
<a id="L1214" name="L1214"></a>1214                 d.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(+400);
<a id="L1215" name="L1215"></a>1215                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d);
<a id="L1216" name="L1216"></a>1216                 jd.setEra(d.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>());
<a id="L1217" name="L1217"></a>1217                 jd.<a href="../D/34371.html" title="Multiple defined in 6 places.">setYear</a>(d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>());
<a id="L1218" name="L1218"></a>1218                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L1219" name="L1219"></a>1219 
<a id="L1220" name="L1220"></a>1220                 <strong class="reserved">long</strong> jan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1221" name="L1221"></a>1221                 <strong class="reserved">long</strong> fd = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(jd);
<a id="L1222" name="L1222"></a>1222                 <strong class="reserved">int</strong> woy = <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(jan1, fd);
<a id="L1223" name="L1223"></a>1223                 <strong class="reserved">long</strong> day1 = fd - (7 * (woy - 1));
<a id="L1224" name="L1224"></a>1224                 <strong class="reserved">if</strong> ((day1 &lt; jan1) ||
<a id="L1225" name="L1225"></a>1225                     (day1 == jan1 &amp;&amp;
<a id="L1226" name="L1226"></a>1226                      jd.getTimeOfDay() &lt; d.getTimeOfDay())) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1228" name="L1228"></a>1228                 <em class="brace">}</em>
<a id="L1229" name="L1229"></a>1229             <em class="brace">}</em>
<a id="L1230" name="L1230"></a>1230             <strong class="reserved">break</strong>;
<a id="L1231" name="L1231"></a>1231         <em class="brace">}</em>
<a id="L1232" name="L1232"></a>1232         <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1233" name="L1233"></a>1233     <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234 
<div class="comment">
      Returns the maximum value that this calendar field could have,
      taking into consideration the given time value and the current
      values of the
      {@link Calendar#getFirstDayOfWeek() getFirstDayOfWeek},
      {@link Calendar#getMinimalDaysInFirstWeek() getMinimalDaysInFirstWeek},
      and
      {@link Calendar#getTimeZone() getTimeZone} methods.
      For example, if the date of this instance is Heisei 16February 1,
      the actual maximum value of the <code>DAY_OF_MONTH</code> field
      is 29 because Heisei 16 is a leap year, and if the date of this
      instance is Heisei 17 February 1, it's 28.
      @param field the calendar field
      @return the maximum of the given field for the time value of
      this <code>JapaneseImperialCalendar</code>
      @see #getMinimum(int)
      @see #getMaximum(int)
      @see #getGreatestMinimum(int)
      @see #getLeastMaximum(int)
      @see #getActualMinimum(int)</div>
<a id="L1257" name="L1257"></a>1257     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/14966.html" title="Multiple referred from 23 places.">getActualMaximum</a>(<strong class="reserved">int</strong> field) <em class="brace">{</em>
<a id="L1258" name="L1258"></a>1258         <strong class="reserved">final</strong> <strong class="reserved">int</strong> fieldsForFixedMax = ERA_MASK|DAY_OF_WEEK_MASK|HOUR_MASK|AM_PM_MASK|
<a id="L1259" name="L1259"></a>1259             HOUR_OF_DAY_MASK|MINUTE_MASK|SECOND_MASK|MILLISECOND_MASK|
<a id="L1260" name="L1260"></a>1260             ZONE_OFFSET_MASK|DST_OFFSET_MASK;
<a id="L1261" name="L1261"></a>1261         <strong class="reserved">if</strong> ((fieldsForFixedMax &amp; (1&lt;&lt;field)) != 0) <em class="brace">{</em>
<a id="L1262" name="L1262"></a>1262             <strong class="reserved">return</strong> <a href="../D/20492.html" title="Multiple defined in 21 places.">getMaximum</a>(field);
<a id="L1263" name="L1263"></a>1263         <em class="brace">}</em>
<a id="L1264" name="L1264"></a>1264 
<a id="L1265" name="L1265"></a>1265         <a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a> jc = <a href="../D/21010.html" title="Multiple defined in 2 places.">getNormalizedCalendar</a>();
<a id="L1266" name="L1266"></a>1266         LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = jc.jdate;
<a id="L1267" name="L1267"></a>1267         <strong class="reserved">int</strong> normalizedYear = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear();
<a id="L1268" name="L1268"></a>1268 
<a id="L1269" name="L1269"></a>1269         <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = -1;
<a id="L1270" name="L1270"></a>1270         <strong class="reserved">switch</strong> (field) <em class="brace">{</em>
<a id="L1271" name="L1271"></a>1271         <strong class="reserved">case</strong> MONTH:
<a id="L1272" name="L1272"></a>1272             <em class="brace">{</em>
<a id="L1273" name="L1273"></a>1273                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = DECEMBER;
<a id="L1274" name="L1274"></a>1274                 <strong class="reserved">if</strong> (<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear())) <em class="brace">{</em>
<a id="L1275" name="L1275"></a>1275                     <em class="comment">// TODO: there may be multiple transitions in a year.</em>
<a id="L1276" name="L1276"></a>1276                     <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L1277" name="L1277"></a>1277                     <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() != 1) <em class="brace">{</em>
<a id="L1278" name="L1278"></a>1278                         eraIndex++;
<a id="L1279" name="L1279"></a>1279                         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> eraIndex &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1280" name="L1280"></a>1280                     <em class="brace">}</em>
<a id="L1281" name="L1281"></a>1281                     <strong class="reserved">long</strong> transition = sinceFixedDates[eraIndex];
<a id="L1282" name="L1282"></a>1282                     <strong class="reserved">long</strong> fd = jc.cachedFixedDate;
<a id="L1283" name="L1283"></a>1283                     <strong class="reserved">if</strong> (fd &lt; transition) <em class="brace">{</em>
<a id="L1284" name="L1284"></a>1284                         LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> ldate
<a id="L1285" name="L1285"></a>1285                             = (LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1286" name="L1286"></a>1286                         jcal.getCalendarDateFromFixedDate(ldate, transition - 1);
<a id="L1287" name="L1287"></a>1287                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = ldate.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L1288" name="L1288"></a>1288                     <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290                     LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE,
<a id="L1291" name="L1291"></a>1291                                                                          <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1292" name="L1292"></a>1292                     <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == d.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>()) <em class="brace">{</em>
<a id="L1293" name="L1293"></a>1293                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L1294" name="L1294"></a>1294                     <em class="brace">}</em>
<a id="L1295" name="L1295"></a>1295                 <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296             <em class="brace">}</em>
<a id="L1297" name="L1297"></a>1297             <strong class="reserved">break</strong>;
<a id="L1298" name="L1298"></a>1298 
<a id="L1299" name="L1299"></a>1299         <strong class="reserved">case</strong> <a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>:
<a id="L1300" name="L1300"></a>1300             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L1301" name="L1301"></a>1301             <strong class="reserved">break</strong>;
<a id="L1302" name="L1302"></a>1302 
<a id="L1303" name="L1303"></a>1303         <strong class="reserved">case</strong> <a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>:
<a id="L1304" name="L1304"></a>1304             <em class="brace">{</em>
<a id="L1305" name="L1305"></a>1305                 <strong class="reserved">if</strong> (<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear())) <em class="brace">{</em>
<a id="L1306" name="L1306"></a>1306                     <em class="comment">// Handle transition year.</em>
<a id="L1307" name="L1307"></a>1307                     <em class="comment">// TODO: there may be multiple transitions in a year.</em>
<a id="L1308" name="L1308"></a>1308                     <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L1309" name="L1309"></a>1309                     <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() != 1) <em class="brace">{</em>
<a id="L1310" name="L1310"></a>1310                         eraIndex++;
<a id="L1311" name="L1311"></a>1311                         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> eraIndex &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1312" name="L1312"></a>1312                     <em class="brace">}</em>
<a id="L1313" name="L1313"></a>1313                     <strong class="reserved">long</strong> transition = sinceFixedDates[eraIndex];
<a id="L1314" name="L1314"></a>1314                     <strong class="reserved">long</strong> fd = jc.cachedFixedDate;
<a id="L1315" name="L1315"></a>1315                     CalendarDate d = gcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L1316" name="L1316"></a>1316                     d.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear(), BaseCalendar.JANUARY, 1);
<a id="L1317" name="L1317"></a>1317                     <strong class="reserved">if</strong> (fd &lt; transition) <em class="brace">{</em>
<a id="L1318" name="L1318"></a>1318                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = (<strong class="reserved">int</strong>)(transition - gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d));
<a id="L1319" name="L1319"></a>1319                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1320" name="L1320"></a>1320                         d.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(+1);
<a id="L1321" name="L1321"></a>1321                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = (<strong class="reserved">int</strong>)(gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d) - transition);
<a id="L1322" name="L1322"></a>1322                     <em class="brace">}</em>
<a id="L1323" name="L1323"></a>1323                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1324" name="L1324"></a>1324                     LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE,
<a id="L1325" name="L1325"></a>1325                                                                          <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1326" name="L1326"></a>1326                     <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == d.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>()) <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327                         <strong class="reserved">long</strong> fd = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1328" name="L1328"></a>1328                         <strong class="reserved">long</strong> jan1 = <a href="../D/19126.html" title="Multiple defined in 2 places.">getFixedDateJan1</a>(d, fd);
<a id="L1329" name="L1329"></a>1329                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = (<strong class="reserved">int</strong>)(fd - jan1) + 1;
<a id="L1330" name="L1330"></a>1330                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L1331" name="L1331"></a>1331                         CalendarDate d1 = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1332" name="L1332"></a>1332                         <strong class="reserved">long</strong> fd1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d1);
<a id="L1333" name="L1333"></a>1333                         d1.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(1);
<a id="L1334" name="L1334"></a>1334                         d1.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(BaseCalendar.JANUARY).setDayOfMonth(1);
<a id="L1335" name="L1335"></a>1335                         jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d1);
<a id="L1336" name="L1336"></a>1336                         <strong class="reserved">long</strong> fd2 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d1);
<a id="L1337" name="L1337"></a>1337                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = (<strong class="reserved">int</strong>)(fd2 - fd1);
<a id="L1338" name="L1338"></a>1338                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1339" name="L1339"></a>1339                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = jcal.<a href="../S/1502.html#L718" title="Defined at 718 in src/java/time/chrono/HijrahChronology.java.">getYearLength</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L1340" name="L1340"></a>1340                     <em class="brace">}</em>
<a id="L1341" name="L1341"></a>1341                 <em class="brace">}</em>
<a id="L1342" name="L1342"></a>1342             <em class="brace">}</em>
<a id="L1343" name="L1343"></a>1343             <strong class="reserved">break</strong>;
<a id="L1344" name="L1344"></a>1344 
<a id="L1345" name="L1345"></a>1345         <strong class="reserved">case</strong> WEEK_OF_YEAR:
<a id="L1346" name="L1346"></a>1346             <em class="brace">{</em>
<a id="L1347" name="L1347"></a>1347                 <strong class="reserved">if</strong> (!<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear())) <em class="brace">{</em>
<a id="L1348" name="L1348"></a>1348                     LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> jd = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE,
<a id="L1349" name="L1349"></a>1349                                                                           <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1350" name="L1350"></a>1350                     <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == jd.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == jd.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>()) <em class="brace">{</em>
<a id="L1351" name="L1351"></a>1351                         <strong class="reserved">long</strong> fd = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(jd);
<a id="L1352" name="L1352"></a>1352                         <strong class="reserved">long</strong> jan1 = <a href="../D/19126.html" title="Multiple defined in 2 places.">getFixedDateJan1</a>(jd, fd);
<a id="L1353" name="L1353"></a>1353                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(jan1, fd);
<a id="L1354" name="L1354"></a>1354                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == <strong class="reserved">null</strong> &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L1355" name="L1355"></a>1355                         CalendarDate d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1356" name="L1356"></a>1356                         <em class="comment">// shift 400 years to avoid underflow</em>
<a id="L1357" name="L1357"></a>1357                         d.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(+400);
<a id="L1358" name="L1358"></a>1358                         jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d);
<a id="L1359" name="L1359"></a>1359                         jd.setEra(d.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>());
<a id="L1360" name="L1360"></a>1360                         jd.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() + 1, BaseCalendar.JANUARY, 1);
<a id="L1361" name="L1361"></a>1361                         jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L1362" name="L1362"></a>1362                         <strong class="reserved">long</strong> jan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1363" name="L1363"></a>1363                         <strong class="reserved">long</strong> nextJan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(jd);
<a id="L1364" name="L1364"></a>1364                         <strong class="reserved">long</strong> nextJan1st = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(nextJan1 + 6,
<a id="L1365" name="L1365"></a>1365                                                                                             <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L1366" name="L1366"></a>1366                         <strong class="reserved">int</strong> ndays = (<strong class="reserved">int</strong>)(nextJan1st - nextJan1);
<a id="L1367" name="L1367"></a>1367                         <strong class="reserved">if</strong> (ndays &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>()) <em class="brace">{</em>
<a id="L1368" name="L1368"></a>1368                             nextJan1st -= 7;
<a id="L1369" name="L1369"></a>1369                         <em class="brace">}</em>
<a id="L1370" name="L1370"></a>1370                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(jan1, nextJan1st);
<a id="L1371" name="L1371"></a>1371                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1372" name="L1372"></a>1372                         <em class="comment">// Get the day of week of January 1 of the year</em>
<a id="L1373" name="L1373"></a>1373                         CalendarDate d = gcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L1374" name="L1374"></a>1374                         d.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear(), BaseCalendar.JANUARY, 1);
<a id="L1375" name="L1375"></a>1375                         <strong class="reserved">int</strong> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> = gcal.<a href="../D/18225.html" title="Multiple defined in 6 places.">getDayOfWeek</a>(d);
<a id="L1376" name="L1376"></a>1376                         <em class="comment">// Normalize the day of week with the firstDayOfWeek value</em>
<a id="L1377" name="L1377"></a>1377                         <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> -= <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>();
<a id="L1378" name="L1378"></a>1378                         <strong class="reserved">if</strong> (<a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> &lt; 0) <em class="brace">{</em>
<a id="L1379" name="L1379"></a>1379                             <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> += 7;
<a id="L1380" name="L1380"></a>1380                         <em class="brace">}</em>
<a id="L1381" name="L1381"></a>1381                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = 52;
<a id="L1382" name="L1382"></a>1382                         <strong class="reserved">int</strong> magic = <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> + <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>() - 1;
<a id="L1383" name="L1383"></a>1383                         <strong class="reserved">if</strong> ((magic == 6) ||
<a id="L1384" name="L1384"></a>1384                             (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>() &amp;&amp; (magic == 5 || magic == 12))) <em class="brace">{</em>
<a id="L1385" name="L1385"></a>1385                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1386" name="L1386"></a>1386                         <em class="brace">}</em>
<a id="L1387" name="L1387"></a>1387                     <em class="brace">}</em>
<a id="L1388" name="L1388"></a>1388                     <strong class="reserved">break</strong>;
<a id="L1389" name="L1389"></a>1389                 <em class="brace">}</em>
<a id="L1390" name="L1390"></a>1390 
<a id="L1391" name="L1391"></a>1391                 <strong class="reserved">if</strong> (jc == <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1392" name="L1392"></a>1392                     jc = (<a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a>) jc.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1393" name="L1393"></a>1393                 <em class="brace">}</em>
<a id="L1394" name="L1394"></a>1394                 <strong class="reserved">int</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = <a href="../D/16806.html" title="Multiple defined in 3 places.">getActualMaximum</a>(<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>);
<a id="L1395" name="L1395"></a>1395                 jc.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>);
<a id="L1396" name="L1396"></a>1396                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = jc.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(WEEK_OF_YEAR);
<a id="L1397" name="L1397"></a>1397                 <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == 1 &amp;&amp; <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> &gt; 7) <em class="brace">{</em>
<a id="L1398" name="L1398"></a>1398                     jc.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(WEEK_OF_YEAR, -1);
<a id="L1399" name="L1399"></a>1399                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = jc.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(WEEK_OF_YEAR);
<a id="L1400" name="L1400"></a>1400                 <em class="brace">}</em>
<a id="L1401" name="L1401"></a>1401             <em class="brace">}</em>
<a id="L1402" name="L1402"></a>1402             <strong class="reserved">break</strong>;
<a id="L1403" name="L1403"></a>1403 
<a id="L1404" name="L1404"></a>1404         <strong class="reserved">case</strong> WEEK_OF_MONTH:
<a id="L1405" name="L1405"></a>1405             <em class="brace">{</em>
<a id="L1406" name="L1406"></a>1406                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> jd = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE,
<a id="L1407" name="L1407"></a>1407                                                                       <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1408" name="L1408"></a>1408                 <strong class="reserved">if</strong> (!(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() == jd.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == jd.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>())) <em class="brace">{</em>
<a id="L1409" name="L1409"></a>1409                     CalendarDate d = gcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L1410" name="L1410"></a>1410                     d.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear(), <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>(), 1);
<a id="L1411" name="L1411"></a>1411                     <strong class="reserved">int</strong> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> = gcal.<a href="../D/18225.html" title="Multiple defined in 6 places.">getDayOfWeek</a>(d);
<a id="L1412" name="L1412"></a>1412                     <strong class="reserved">int</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = gcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(d);
<a id="L1413" name="L1413"></a>1413                     <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> -= <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>();
<a id="L1414" name="L1414"></a>1414                     <strong class="reserved">if</strong> (<a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> &lt; 0) <em class="brace">{</em>
<a id="L1415" name="L1415"></a>1415                         <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> += 7;
<a id="L1416" name="L1416"></a>1416                     <em class="brace">}</em>
<a id="L1417" name="L1417"></a>1417                     <strong class="reserved">int</strong> nDaysFirstWeek = 7 - <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>; <em class="comment">// # of days in the first week</em>
<a id="L1418" name="L1418"></a>1418                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = 3;
<a id="L1419" name="L1419"></a>1419                     <strong class="reserved">if</strong> (nDaysFirstWeek &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>()) <em class="brace">{</em>
<a id="L1420" name="L1420"></a>1420                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1421" name="L1421"></a>1421                     <em class="brace">}</em>
<a id="L1422" name="L1422"></a>1422                     <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> -= nDaysFirstWeek + 7 * 3;
<a id="L1423" name="L1423"></a>1423                     <strong class="reserved">if</strong> (<a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> &gt; 0) <em class="brace">{</em>
<a id="L1424" name="L1424"></a>1424                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1425" name="L1425"></a>1425                         <strong class="reserved">if</strong> (<a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> &gt; 7) <em class="brace">{</em>
<a id="L1426" name="L1426"></a>1426                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>++;
<a id="L1427" name="L1427"></a>1427                         <em class="brace">}</em>
<a id="L1428" name="L1428"></a>1428                     <em class="brace">}</em>
<a id="L1429" name="L1429"></a>1429                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430                     <strong class="reserved">long</strong> fd = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(jd);
<a id="L1431" name="L1431"></a>1431                     <strong class="reserved">long</strong> month1 = fd - jd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() + 1;
<a id="L1432" name="L1432"></a>1432                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(month1, fd);
<a id="L1433" name="L1433"></a>1433                 <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434             <em class="brace">}</em>
<a id="L1435" name="L1435"></a>1435             <strong class="reserved">break</strong>;
<a id="L1436" name="L1436"></a>1436 
<a id="L1437" name="L1437"></a>1437         <strong class="reserved">case</strong> DAY_OF_WEEK_IN_MONTH:
<a id="L1438" name="L1438"></a>1438             <em class="brace">{</em>
<a id="L1439" name="L1439"></a>1439                 <strong class="reserved">int</strong> ndays, dow1;
<a id="L1440" name="L1440"></a>1440                 <strong class="reserved">int</strong> dow = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18225.html" title="Multiple defined in 6 places.">getDayOfWeek</a>();
<a id="L1441" name="L1441"></a>1441                 BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1442" name="L1442"></a>1442                 ndays = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(d);
<a id="L1443" name="L1443"></a>1443                 d.setDayOfMonth(1);
<a id="L1444" name="L1444"></a>1444                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d);
<a id="L1445" name="L1445"></a>1445                 dow1 = d.<a href="../D/18225.html" title="Multiple defined in 6 places.">getDayOfWeek</a>();
<a id="L1446" name="L1446"></a>1446                 <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = dow - dow1;
<a id="L1447" name="L1447"></a>1447                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; 0) <em class="brace">{</em>
<a id="L1448" name="L1448"></a>1448                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> += 7;
<a id="L1449" name="L1449"></a>1449                 <em class="brace">}</em>
<a id="L1450" name="L1450"></a>1450                 ndays -= <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L1451" name="L1451"></a>1451                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = (ndays + 6) / 7;
<a id="L1452" name="L1452"></a>1452             <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453             <strong class="reserved">break</strong>;
<a id="L1454" name="L1454"></a>1454 
<a id="L1455" name="L1455"></a>1455         <strong class="reserved">case</strong> <a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>:
<a id="L1456" name="L1456"></a>1456             <em class="brace">{</em>
<a id="L1457" name="L1457"></a>1457                 CalendarDate jd = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(jc.<a href="../D/23146.html" title="Multiple defined in 5 places.">getTimeInMillis</a>(), <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1458" name="L1458"></a>1458                 CalendarDate d;
<a id="L1459" name="L1459"></a>1459                 <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L1460" name="L1460"></a>1460                 <strong class="reserved">if</strong> (eraIndex == <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1) <em class="brace">{</em>
<a id="L1461" name="L1461"></a>1461                     d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1462" name="L1462"></a>1462                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L1463" name="L1463"></a>1463                     <em class="comment">// Use an equivalent year for the</em>
<a id="L1464" name="L1464"></a>1464                     <em class="comment">// getYearOffsetInMillis call to avoid overflow.</em>
<a id="L1465" name="L1465"></a>1465                     <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &gt; 400) <em class="brace">{</em>
<a id="L1466" name="L1466"></a>1466                         jd.<a href="../D/34371.html" title="Multiple defined in 6 places.">setYear</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> - 400);
<a id="L1467" name="L1467"></a>1467                     <em class="brace">}</em>
<a id="L1468" name="L1468"></a>1468                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1469" name="L1469"></a>1469                     d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex + 1].getSince(<a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>()) - 1,
<a id="L1470" name="L1470"></a>1470                                              <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1471" name="L1471"></a>1471                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = d.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L1472" name="L1472"></a>1472                     <em class="comment">// Use the same year as d.getYear() to be</em>
<a id="L1473" name="L1473"></a>1473                     <em class="comment">// consistent with leap and common years.</em>
<a id="L1474" name="L1474"></a>1474                     jd.<a href="../D/34371.html" title="Multiple defined in 6 places.">setYear</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L1475" name="L1475"></a>1475                 <em class="brace">}</em>
<a id="L1476" name="L1476"></a>1476                 jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(jd);
<a id="L1477" name="L1477"></a>1477                 <strong class="reserved">if</strong> (<a href="../D/23809.html" title="Multiple defined in 2 places.">getYearOffsetInMillis</a>(jd) &gt; <a href="../D/23809.html" title="Multiple defined in 2 places.">getYearOffsetInMillis</a>(d)) <em class="brace">{</em>
<a id="L1478" name="L1478"></a>1478                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>--;
<a id="L1479" name="L1479"></a>1479                 <em class="brace">}</em>
<a id="L1480" name="L1480"></a>1480             <em class="brace">}</em>
<a id="L1481" name="L1481"></a>1481             <strong class="reserved">break</strong>;
<a id="L1482" name="L1482"></a>1482 
<a id="L1483" name="L1483"></a>1483         <strong class="reserved">default</strong>:
<a id="L1484" name="L1484"></a>1484             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a>(field);
<a id="L1485" name="L1485"></a>1485         <em class="brace">}</em>
<a id="L1486" name="L1486"></a>1486         <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1487" name="L1487"></a>1487     <em class="brace">}</em>
<a id="L1488" name="L1488"></a>1488 
<div class="comment">
      Returns the millisecond offset from the beginning of the
      year. In the year for Long.MIN_VALUE, it's a pseudo value
      beyond the limit. The given CalendarDate object must have been
      normalized before calling this method.</div>
<a id="L1495" name="L1495"></a>1495     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/19952.html" title="Multiple referred from 5 places.">getYearOffsetInMillis</a>(CalendarDate <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>) <em class="brace">{</em>
<a id="L1496" name="L1496"></a>1496         <strong class="reserved">long</strong> t = (jcal.<a href="../D/18226.html" title="Multiple defined in 6 places.">getDayOfYear</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>) - 1) * ONE_DAY;
<a id="L1497" name="L1497"></a>1497         <strong class="reserved">return</strong> t + <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getTimeOfDay() - <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getZoneOffset();
<a id="L1498" name="L1498"></a>1498     <em class="brace">}</em>
<a id="L1499" name="L1499"></a>1499 
<a id="L1500" name="L1500"></a>1500     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501         <a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a> other = (<a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a>) <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1502" name="L1502"></a>1502 
<a id="L1503" name="L1503"></a>1503         other.jdate = (LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) jdate.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1504" name="L1504"></a>1504         other.originalFields = <strong class="reserved">null</strong>;
<a id="L1505" name="L1505"></a>1505         other.zoneOffsets = <strong class="reserved">null</strong>;
<a id="L1506" name="L1506"></a>1506         <strong class="reserved">return</strong> other;
<a id="L1507" name="L1507"></a>1507     <em class="brace">}</em>
<a id="L1508" name="L1508"></a>1508 
<a id="L1509" name="L1509"></a>1509     <strong class="reserved">public</strong> <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <a href="../R/19499.html" title="Multiple referred from 41 places.">getTimeZone</a>() <em class="brace">{</em>
<a id="L1510" name="L1510"></a>1510         <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = <strong class="reserved">super</strong>.<a href="../D/23152.html" title="Multiple defined in 10 places.">getTimeZone</a>();
<a id="L1511" name="L1511"></a>1511         <em class="comment">// To share the zone by the CalendarDate</em>
<a id="L1512" name="L1512"></a>1512         jdate.setZone(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L1513" name="L1513"></a>1513         <strong class="reserved">return</strong> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>;
<a id="L1514" name="L1514"></a>1514     <em class="brace">}</em>
<a id="L1515" name="L1515"></a>1515 
<a id="L1516" name="L1516"></a>1516     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28298.html" title="Multiple referred from 14 places.">setTimeZone</a>(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>) <em class="brace">{</em>
<a id="L1517" name="L1517"></a>1517         <strong class="reserved">super</strong>.<a href="../D/34143.html" title="Multiple defined in 5 places.">setTimeZone</a>(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L1518" name="L1518"></a>1518         <em class="comment">// To share the zone by the CalendarDate</em>
<a id="L1519" name="L1519"></a>1519         jdate.setZone(<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L1520" name="L1520"></a>1520     <em class="brace">}</em>
<a id="L1521" name="L1521"></a>1521 
<div class="comment">
      The fixed date corresponding to jdate. If the value is
      Long.MIN_VALUE, the fixed date value is unknown.</div>
<a id="L1526" name="L1526"></a>1526     <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <strong class="reserved">long</strong> cachedFixedDate = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE;
<a id="L1527" name="L1527"></a>1527 
<div class="comment">
      Converts the time value (millisecond offset from the <a href="Calendar.html#Epoch">Epoch</a>) to calendar field values.
      The time is <em>not</em>
      recomputed first; to recompute the time, then the fields, call the
      <code>complete</code> method.
      @see Calendar#complete</div>
<a id="L1537" name="L1537"></a>1537     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11825.html" title="Multiple referred from 9 places.">computeFields</a>() <em class="brace">{</em>
<a id="L1538" name="L1538"></a>1538         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = 0;
<a id="L1539" name="L1539"></a>1539         <strong class="reserved">if</strong> (<a href="../S/866.html#L2377" title="Defined at 2377 in src/java/util/Calendar.java.">isPartiallyNormalized</a>()) <em class="brace">{</em>
<a id="L1540" name="L1540"></a>1540             <em class="comment">// Determine which calendar fields need to be computed.</em>
<a id="L1541" name="L1541"></a>1541             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = <a href="../S/866.html#L2296" title="Defined at 2296 in src/java/util/Calendar.java.">getSetStateFields</a>();
<a id="L1542" name="L1542"></a>1542             <strong class="reserved">int</strong> fieldMask = ~<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; ALL_FIELDS;
<a id="L1543" name="L1543"></a>1543             <strong class="reserved">if</strong> (fieldMask != 0 || cachedFixedDate == <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE) <em class="brace">{</em>
<a id="L1544" name="L1544"></a>1544                 <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= <a href="../D/13176.html" title="Multiple defined in 5 places.">computeFields</a>(fieldMask,
<a id="L1545" name="L1545"></a>1545                                       <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; (ZONE_OFFSET_MASK|DST_OFFSET_MASK));
<a id="L1546" name="L1546"></a>1546                 <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> == ALL_FIELDS;
<a id="L1547" name="L1547"></a>1547             <em class="brace">}</em>
<a id="L1548" name="L1548"></a>1548         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1549" name="L1549"></a>1549             <em class="comment">// Specify all fields</em>
<a id="L1550" name="L1550"></a>1550             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = ALL_FIELDS;
<a id="L1551" name="L1551"></a>1551             <a href="../D/13176.html" title="Multiple defined in 5 places.">computeFields</a>(<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>, 0);
<a id="L1552" name="L1552"></a>1552         <em class="brace">}</em>
<a id="L1553" name="L1553"></a>1553         <em class="comment">// After computing all the fields, set the field state to `COMPUTED'.</em>
<a id="L1554" name="L1554"></a>1554         <a href="../S/866.html#L2319" title="Defined at 2319 in src/java/util/Calendar.java.">setFieldsComputed</a>(<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>);
<a id="L1555" name="L1555"></a>1555     <em class="brace">}</em>
<a id="L1556" name="L1556"></a>1556 
<div class="comment">
      This computeFields implements the conversion from UTC
      (millisecond offset from the Epoch) to calendar
      field values. fieldMask specifies which fields to change the
      setting state to COMPUTED, although all fields are set to
      the correct values. This is required to fix 4685354.
      @param fieldMask a bit mask to specify which fields to change
      the setting state.
      @param tzMask a bit mask to specify which time zone offset
      fields to be used for time calculations
      @return a new field mask that indicates what field values have
      actually been set.</div>
<a id="L1571" name="L1571"></a>1571     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/11825.html" title="Multiple referred from 9 places.">computeFields</a>(<strong class="reserved">int</strong> fieldMask, <strong class="reserved">int</strong> tzMask) <em class="brace">{</em>
<a id="L1572" name="L1572"></a>1572         <strong class="reserved">int</strong> zoneOffset = 0;
<a id="L1573" name="L1573"></a>1573         <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> tz = <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>();
<a id="L1574" name="L1574"></a>1574         <strong class="reserved">if</strong> (zoneOffsets == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1575" name="L1575"></a>1575             zoneOffsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[2];
<a id="L1576" name="L1576"></a>1576         <em class="brace">}</em>
<a id="L1577" name="L1577"></a>1577         <strong class="reserved">if</strong> (tzMask != (ZONE_OFFSET_MASK|DST_OFFSET_MASK)) <em class="brace">{</em>
<a id="L1578" name="L1578"></a>1578             <strong class="reserved">if</strong> (tz <strong class="reserved">instanceof</strong> ZoneInfo) <em class="brace">{</em>
<a id="L1579" name="L1579"></a>1579                 zoneOffset = ((ZoneInfo)tz).<a href="../D/21181.html" title="Multiple defined in 4 places.">getOffsets</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, zoneOffsets);
<a id="L1580" name="L1580"></a>1580             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1581" name="L1581"></a>1581                 zoneOffset = tz.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L1582" name="L1582"></a>1582                 zoneOffsets[0] = tz.<a href="../D/21856.html" title="Multiple defined in 2 places.">getRawOffset</a>();
<a id="L1583" name="L1583"></a>1583                 zoneOffsets[1] = zoneOffset - zoneOffsets[0];
<a id="L1584" name="L1584"></a>1584             <em class="brace">}</em>
<a id="L1585" name="L1585"></a>1585         <em class="brace">}</em>
<a id="L1586" name="L1586"></a>1586         <strong class="reserved">if</strong> (tzMask != 0) <em class="brace">{</em>
<a id="L1587" name="L1587"></a>1587             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(tzMask, ZONE_OFFSET)) <em class="brace">{</em>
<a id="L1588" name="L1588"></a>1588                 zoneOffsets[0] = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(ZONE_OFFSET);
<a id="L1589" name="L1589"></a>1589             <em class="brace">}</em>
<a id="L1590" name="L1590"></a>1590             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(tzMask, DST_OFFSET)) <em class="brace">{</em>
<a id="L1591" name="L1591"></a>1591                 zoneOffsets[1] = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(DST_OFFSET);
<a id="L1592" name="L1592"></a>1592             <em class="brace">}</em>
<a id="L1593" name="L1593"></a>1593             zoneOffset = zoneOffsets[0] + zoneOffsets[1];
<a id="L1594" name="L1594"></a>1594         <em class="brace">}</em>
<a id="L1595" name="L1595"></a>1595 
<a id="L1596" name="L1596"></a>1596         <em class="comment">// By computing time and zoneOffset separately, we can take</em>
<a id="L1597" name="L1597"></a>1597         <em class="comment">// the wider range of time+zoneOffset than the previous</em>
<a id="L1598" name="L1598"></a>1598         <em class="comment">// implementation.</em>
<a id="L1599" name="L1599"></a>1599         <strong class="reserved">long</strong> fixedDate = zoneOffset / ONE_DAY;
<a id="L1600" name="L1600"></a>1600         <strong class="reserved">int</strong> timeOfDay = zoneOffset % (<strong class="reserved">int</strong>)ONE_DAY;
<a id="L1601" name="L1601"></a>1601         fixedDate += <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> / ONE_DAY;
<a id="L1602" name="L1602"></a>1602         timeOfDay += (<strong class="reserved">int</strong>) (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> % ONE_DAY);
<a id="L1603" name="L1603"></a>1603         <strong class="reserved">if</strong> (timeOfDay &gt;= ONE_DAY) <em class="brace">{</em>
<a id="L1604" name="L1604"></a>1604             timeOfDay -= ONE_DAY;
<a id="L1605" name="L1605"></a>1605             ++fixedDate;
<a id="L1606" name="L1606"></a>1606         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1607" name="L1607"></a>1607             <strong class="reserved">while</strong> (timeOfDay &lt; 0) <em class="brace">{</em>
<a id="L1608" name="L1608"></a>1608                 timeOfDay += ONE_DAY;
<a id="L1609" name="L1609"></a>1609                 --fixedDate;
<a id="L1610" name="L1610"></a>1610             <em class="brace">}</em>
<a id="L1611" name="L1611"></a>1611         <em class="brace">}</em>
<a id="L1612" name="L1612"></a>1612         fixedDate += EPOCH_OFFSET;
<a id="L1613" name="L1613"></a>1613 
<a id="L1614" name="L1614"></a>1614         <em class="comment">// See if we can use jdate to avoid date calculation.</em>
<a id="L1615" name="L1615"></a>1615         <strong class="reserved">if</strong> (fixedDate != cachedFixedDate || fixedDate &lt; 0) <em class="brace">{</em>
<a id="L1616" name="L1616"></a>1616             jcal.getCalendarDateFromFixedDate(jdate, fixedDate);
<a id="L1617" name="L1617"></a>1617             cachedFixedDate = fixedDate;
<a id="L1618" name="L1618"></a>1618         <em class="brace">}</em>
<a id="L1619" name="L1619"></a>1619         <strong class="reserved">int</strong> era = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(jdate);
<a id="L1620" name="L1620"></a>1620         <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L1621" name="L1621"></a>1621 
<a id="L1622" name="L1622"></a>1622         <em class="comment">// Always set the ERA and YEAR values.</em>
<a id="L1623" name="L1623"></a>1623         <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>, era);
<a id="L1624" name="L1624"></a>1624         <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>);
<a id="L1625" name="L1625"></a>1625         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = fieldMask | (ERA_MASK|YEAR_MASK);
<a id="L1626" name="L1626"></a>1626 
<a id="L1627" name="L1627"></a>1627         <strong class="reserved">int</strong> month =  jdate.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1; <em class="comment">// 0-based</em>
<a id="L1628" name="L1628"></a>1628         <strong class="reserved">int</strong> dayOfMonth = jdate.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>();
<a id="L1629" name="L1629"></a>1629 
<a id="L1630" name="L1630"></a>1630         <em class="comment">// Set the basic date fields.</em>
<a id="L1631" name="L1631"></a>1631         <strong class="reserved">if</strong> ((fieldMask &amp; (MONTH_MASK|DAY_OF_MONTH_MASK|DAY_OF_WEEK_MASK))
<a id="L1632" name="L1632"></a>1632             != 0) <em class="brace">{</em>
<a id="L1633" name="L1633"></a>1633             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(MONTH, month);
<a id="L1634" name="L1634"></a>1634             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>, dayOfMonth);
<a id="L1635" name="L1635"></a>1635             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>, jdate.<a href="../D/18225.html" title="Multiple defined in 6 places.">getDayOfWeek</a>());
<a id="L1636" name="L1636"></a>1636             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= MONTH_MASK|DAY_OF_MONTH_MASK|DAY_OF_WEEK_MASK;
<a id="L1637" name="L1637"></a>1637         <em class="brace">}</em>
<a id="L1638" name="L1638"></a>1638 
<a id="L1639" name="L1639"></a>1639         <strong class="reserved">if</strong> ((fieldMask &amp; (HOUR_OF_DAY_MASK|AM_PM_MASK|HOUR_MASK
<a id="L1640" name="L1640"></a>1640                           |MINUTE_MASK|SECOND_MASK|MILLISECOND_MASK)) != 0) <em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641             <strong class="reserved">if</strong> (timeOfDay != 0) <em class="brace">{</em>
<a id="L1642" name="L1642"></a>1642                 <strong class="reserved">int</strong> hours = timeOfDay / ONE_HOUR;
<a id="L1643" name="L1643"></a>1643                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>, hours);
<a id="L1644" name="L1644"></a>1644                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(AM_PM, hours / 12); <em class="comment">// Assume AM == 0</em>
<a id="L1645" name="L1645"></a>1645                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(HOUR, hours % 12);
<a id="L1646" name="L1646"></a>1646                 <strong class="reserved">int</strong> r = timeOfDay % ONE_HOUR;
<a id="L1647" name="L1647"></a>1647                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(MINUTE, r / ONE_MINUTE);
<a id="L1648" name="L1648"></a>1648                 r %= ONE_MINUTE;
<a id="L1649" name="L1649"></a>1649                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(SECOND, r / ONE_SECOND);
<a id="L1650" name="L1650"></a>1650                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(MILLISECOND, r % ONE_SECOND);
<a id="L1651" name="L1651"></a>1651             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1652" name="L1652"></a>1652                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>, 0);
<a id="L1653" name="L1653"></a>1653                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(AM_PM, AM);
<a id="L1654" name="L1654"></a>1654                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(HOUR, 0);
<a id="L1655" name="L1655"></a>1655                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(MINUTE, 0);
<a id="L1656" name="L1656"></a>1656                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(SECOND, 0);
<a id="L1657" name="L1657"></a>1657                 <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(MILLISECOND, 0);
<a id="L1658" name="L1658"></a>1658             <em class="brace">}</em>
<a id="L1659" name="L1659"></a>1659             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= (HOUR_OF_DAY_MASK|AM_PM_MASK|HOUR_MASK
<a id="L1660" name="L1660"></a>1660                      |MINUTE_MASK|SECOND_MASK|MILLISECOND_MASK);
<a id="L1661" name="L1661"></a>1661         <em class="brace">}</em>
<a id="L1662" name="L1662"></a>1662 
<a id="L1663" name="L1663"></a>1663         <strong class="reserved">if</strong> ((fieldMask &amp; (ZONE_OFFSET_MASK|DST_OFFSET_MASK)) != 0) <em class="brace">{</em>
<a id="L1664" name="L1664"></a>1664             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(ZONE_OFFSET, zoneOffsets[0]);
<a id="L1665" name="L1665"></a>1665             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(DST_OFFSET, zoneOffsets[1]);
<a id="L1666" name="L1666"></a>1666             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= (ZONE_OFFSET_MASK|DST_OFFSET_MASK);
<a id="L1667" name="L1667"></a>1667         <em class="brace">}</em>
<a id="L1668" name="L1668"></a>1668 
<a id="L1669" name="L1669"></a>1669         <strong class="reserved">if</strong> ((fieldMask &amp; (DAY_OF_YEAR_MASK|WEEK_OF_YEAR_MASK
<a id="L1670" name="L1670"></a>1670                           |WEEK_OF_MONTH_MASK|DAY_OF_WEEK_IN_MONTH_MASK)) != 0) <em class="brace">{</em>
<a id="L1671" name="L1671"></a>1671             <strong class="reserved">int</strong> normalizedYear = jdate.getNormalizedYear();
<a id="L1672" name="L1672"></a>1672             <em class="comment">// If it's a year of an era transition, we need to handle</em>
<a id="L1673" name="L1673"></a>1673             <em class="comment">// irregular year boundaries.</em>
<a id="L1674" name="L1674"></a>1674             <strong class="reserved">boolean</strong> transitionYear = <a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(jdate.getNormalizedYear());
<a id="L1675" name="L1675"></a>1675             <strong class="reserved">int</strong> dayOfYear;
<a id="L1676" name="L1676"></a>1676             <strong class="reserved">long</strong> fixedDateJan1;
<a id="L1677" name="L1677"></a>1677             <strong class="reserved">if</strong> (transitionYear) <em class="brace">{</em>
<a id="L1678" name="L1678"></a>1678                 fixedDateJan1 = <a href="../D/19126.html" title="Multiple defined in 2 places.">getFixedDateJan1</a>(jdate, fixedDate);
<a id="L1679" name="L1679"></a>1679                 dayOfYear = (<strong class="reserved">int</strong>)(fixedDate - fixedDateJan1) + 1;
<a id="L1680" name="L1680"></a>1680             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (normalizedYear == MIN_VALUES[<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>]) <em class="brace">{</em>
<a id="L1681" name="L1681"></a>1681                 CalendarDate dx = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1682" name="L1682"></a>1682                 fixedDateJan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(dx);
<a id="L1683" name="L1683"></a>1683                 dayOfYear = (<strong class="reserved">int</strong>)(fixedDate - fixedDateJan1) + 1;
<a id="L1684" name="L1684"></a>1684             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1685" name="L1685"></a>1685                 dayOfYear = (<strong class="reserved">int</strong>) jcal.<a href="../D/18226.html" title="Multiple defined in 6 places.">getDayOfYear</a>(jdate);
<a id="L1686" name="L1686"></a>1686                 fixedDateJan1 = fixedDate - dayOfYear + 1;
<a id="L1687" name="L1687"></a>1687             <em class="brace">}</em>
<a id="L1688" name="L1688"></a>1688             <strong class="reserved">long</strong> fixedDateMonth1 = transitionYear ?
<a id="L1689" name="L1689"></a>1689                 <a href="../D/19127.html" title="Multiple defined in 2 places.">getFixedDateMonth1</a>(jdate, fixedDate) : fixedDate - dayOfMonth + 1;
<a id="L1690" name="L1690"></a>1690 
<a id="L1691" name="L1691"></a>1691             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>, dayOfYear);
<a id="L1692" name="L1692"></a>1692             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(DAY_OF_WEEK_IN_MONTH, (dayOfMonth - 1) / 7 + 1);
<a id="L1693" name="L1693"></a>1693 
<a id="L1694" name="L1694"></a>1694             <strong class="reserved">int</strong> <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> = <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(fixedDateJan1, fixedDate);
<a id="L1695" name="L1695"></a>1695 
<a id="L1696" name="L1696"></a>1696             <em class="comment">// The spec is to calculate WEEK_OF_YEAR in the</em>
<a id="L1697" name="L1697"></a>1697             <em class="comment">// ISO8601-style. This creates problems, though.</em>
<a id="L1698" name="L1698"></a>1698             <strong class="reserved">if</strong> (<a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> == 0) <em class="brace">{</em>
<a id="L1699" name="L1699"></a>1699                 <em class="comment">// If the date belongs to the last week of the</em>
<a id="L1700" name="L1700"></a>1700                 <em class="comment">// previous year, use the week number of "12/31" of</em>
<a id="L1701" name="L1701"></a>1701                 <em class="comment">// the "previous" year. Again, if the previous year is</em>
<a id="L1702" name="L1702"></a>1702                 <em class="comment">// a transition year, we need to take care of it.</em>
<a id="L1703" name="L1703"></a>1703                 <em class="comment">// Usually the previous day of the first day of a year</em>
<a id="L1704" name="L1704"></a>1704                 <em class="comment">// is December 31, which is not always true in the</em>
<a id="L1705" name="L1705"></a>1705                 <em class="comment">// Japanese imperial calendar system.</em>
<a id="L1706" name="L1706"></a>1706                 <strong class="reserved">long</strong> fixedDec31 = fixedDateJan1 - 1;
<a id="L1707" name="L1707"></a>1707                 <strong class="reserved">long</strong> prevJan1;
<a id="L1708" name="L1708"></a>1708                 LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(fixedDec31);
<a id="L1709" name="L1709"></a>1709                 <strong class="reserved">if</strong> (!(transitionYear || <a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(d.getNormalizedYear()))) <em class="brace">{</em>
<a id="L1710" name="L1710"></a>1710                     prevJan1 = fixedDateJan1 - 365;
<a id="L1711" name="L1711"></a>1711                     <strong class="reserved">if</strong> (d.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>()) <em class="brace">{</em>
<a id="L1712" name="L1712"></a>1712                         --prevJan1;
<a id="L1713" name="L1713"></a>1713                     <em class="brace">}</em>
<a id="L1714" name="L1714"></a>1714                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (transitionYear) <em class="brace">{</em>
<a id="L1715" name="L1715"></a>1715                     <strong class="reserved">if</strong> (jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == 1) <em class="brace">{</em>
<a id="L1716" name="L1716"></a>1716                         <em class="comment">// As of Heisei (since Meiji) there's no case</em>
<a id="L1717" name="L1717"></a>1717                         <em class="comment">// that there are multiple transitions in a</em>
<a id="L1718" name="L1718"></a>1718                         <em class="comment">// year.  Historically there was such</em>
<a id="L1719" name="L1719"></a>1719                         <em class="comment">// case. There might be such case again in the</em>
<a id="L1720" name="L1720"></a>1720                         <em class="comment">// future.</em>
<a id="L1721" name="L1721"></a>1721                         <strong class="reserved">if</strong> (era &gt; HEISEI) <em class="brace">{</em>
<a id="L1722" name="L1722"></a>1722                             CalendarDate pd = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[era - 1].getSinceDate();
<a id="L1723" name="L1723"></a>1723                             <strong class="reserved">if</strong> (normalizedYear == pd.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>()) <em class="brace">{</em>
<a id="L1724" name="L1724"></a>1724                                 d.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(pd.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>()).setDayOfMonth(pd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L1725" name="L1725"></a>1725                             <em class="brace">}</em>
<a id="L1726" name="L1726"></a>1726                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1727" name="L1727"></a>1727                             d.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(LocalGregorianCalendar.JANUARY).setDayOfMonth(1);
<a id="L1728" name="L1728"></a>1728                         <em class="brace">}</em>
<a id="L1729" name="L1729"></a>1729                         jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d);
<a id="L1730" name="L1730"></a>1730                         prevJan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1731" name="L1731"></a>1731                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1732" name="L1732"></a>1732                         prevJan1 = fixedDateJan1 - 365;
<a id="L1733" name="L1733"></a>1733                         <strong class="reserved">if</strong> (d.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>()) <em class="brace">{</em>
<a id="L1734" name="L1734"></a>1734                             --prevJan1;
<a id="L1735" name="L1735"></a>1735                         <em class="brace">}</em>
<a id="L1736" name="L1736"></a>1736                     <em class="brace">}</em>
<a id="L1737" name="L1737"></a>1737                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1738" name="L1738"></a>1738                     CalendarDate cd = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[<a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(jdate)].getSinceDate();
<a id="L1739" name="L1739"></a>1739                     d.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(cd.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>()).setDayOfMonth(cd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L1740" name="L1740"></a>1740                     jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d);
<a id="L1741" name="L1741"></a>1741                     prevJan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1742" name="L1742"></a>1742                 <em class="brace">}</em>
<a id="L1743" name="L1743"></a>1743                 <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> = <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(prevJan1, fixedDec31);
<a id="L1744" name="L1744"></a>1744             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1745" name="L1745"></a>1745                 <strong class="reserved">if</strong> (!transitionYear) <em class="brace">{</em>
<a id="L1746" name="L1746"></a>1746                     <em class="comment">// Regular years</em>
<a id="L1747" name="L1747"></a>1747                     <strong class="reserved">if</strong> (<a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> &gt;= 52) <em class="brace">{</em>
<a id="L1748" name="L1748"></a>1748                         <strong class="reserved">long</strong> nextJan1 = fixedDateJan1 + 365;
<a id="L1749" name="L1749"></a>1749                         <strong class="reserved">if</strong> (jdate.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>()) <em class="brace">{</em>
<a id="L1750" name="L1750"></a>1750                             nextJan1++;
<a id="L1751" name="L1751"></a>1751                         <em class="brace">}</em>
<a id="L1752" name="L1752"></a>1752                         <strong class="reserved">long</strong> nextJan1st = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(nextJan1 + 6,
<a id="L1753" name="L1753"></a>1753                                                                                             <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L1754" name="L1754"></a>1754                         <strong class="reserved">int</strong> ndays = (<strong class="reserved">int</strong>)(nextJan1st - nextJan1);
<a id="L1755" name="L1755"></a>1755                         <strong class="reserved">if</strong> (ndays &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>() &amp;&amp; fixedDate &gt;= (nextJan1st - 7)) <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756                             <em class="comment">// The first days forms a week in which the date is included.</em>
<a id="L1757" name="L1757"></a>1757                             <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> = 1;
<a id="L1758" name="L1758"></a>1758                         <em class="brace">}</em>
<a id="L1759" name="L1759"></a>1759                     <em class="brace">}</em>
<a id="L1760" name="L1760"></a>1760                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1761" name="L1761"></a>1761                     LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = (LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) jdate.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1762" name="L1762"></a>1762                     <strong class="reserved">long</strong> nextJan1;
<a id="L1763" name="L1763"></a>1763                     <strong class="reserved">if</strong> (jdate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == 1) <em class="brace">{</em>
<a id="L1764" name="L1764"></a>1764                         d.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(+1);
<a id="L1765" name="L1765"></a>1765                         d.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(LocalGregorianCalendar.JANUARY).setDayOfMonth(1);
<a id="L1766" name="L1766"></a>1766                         nextJan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1767" name="L1767"></a>1767                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1768" name="L1768"></a>1768                         <strong class="reserved">int</strong> nextEraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(d) + 1;
<a id="L1769" name="L1769"></a>1769                         CalendarDate cd = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[nextEraIndex].getSinceDate();
<a id="L1770" name="L1770"></a>1770                         d.setEra(<a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[nextEraIndex]);
<a id="L1771" name="L1771"></a>1771                         d.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(1, cd.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>(), cd.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L1772" name="L1772"></a>1772                         jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(d);
<a id="L1773" name="L1773"></a>1773                         nextJan1 = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L1774" name="L1774"></a>1774                     <em class="brace">}</em>
<a id="L1775" name="L1775"></a>1775                     <strong class="reserved">long</strong> nextJan1st = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(nextJan1 + 6,
<a id="L1776" name="L1776"></a>1776                                                                                         <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L1777" name="L1777"></a>1777                     <strong class="reserved">int</strong> ndays = (<strong class="reserved">int</strong>)(nextJan1st - nextJan1);
<a id="L1778" name="L1778"></a>1778                     <strong class="reserved">if</strong> (ndays &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>() &amp;&amp; fixedDate &gt;= (nextJan1st - 7)) <em class="brace">{</em>
<a id="L1779" name="L1779"></a>1779                         <em class="comment">// The first days forms a week in which the date is included.</em>
<a id="L1780" name="L1780"></a>1780                         <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a> = 1;
<a id="L1781" name="L1781"></a>1781                     <em class="brace">}</em>
<a id="L1782" name="L1782"></a>1782                 <em class="brace">}</em>
<a id="L1783" name="L1783"></a>1783             <em class="brace">}</em>
<a id="L1784" name="L1784"></a>1784             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(WEEK_OF_YEAR, <a href="../S/1470.html#L519" title="Defined at 519 in src/java/time/temporal/WeekFields.java.">weekOfYear</a>);
<a id="L1785" name="L1785"></a>1785             <a href="../D/24956.html" title="Multiple defined in 2 places.">internalSet</a>(WEEK_OF_MONTH, <a href="../D/23663.html" title="Multiple defined in 2 places.">getWeekNumber</a>(fixedDateMonth1, fixedDate));
<a id="L1786" name="L1786"></a>1786             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= (DAY_OF_YEAR_MASK|WEEK_OF_YEAR_MASK|WEEK_OF_MONTH_MASK|DAY_OF_WEEK_IN_MONTH_MASK);
<a id="L1787" name="L1787"></a>1787         <em class="brace">}</em>
<a id="L1788" name="L1788"></a>1788         <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L1789" name="L1789"></a>1789     <em class="brace">}</em>
<a id="L1790" name="L1790"></a>1790 
<div class="comment">
      Returns the number of weeks in a period between fixedDay1 and
      fixedDate. The getFirstDayOfWeek-getMinimalDaysInFirstWeek rule
      is applied to calculate the number of weeks.
      @param fixedDay1 the fixed date of the first day of the period
      @param fixedDate the fixed date of the last day of the period
      @return the number of weeks of the given period</div>
<a id="L1800" name="L1800"></a>1800     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/19847.html" title="Multiple referred from 10 places.">getWeekNumber</a>(<strong class="reserved">long</strong> fixedDay1, <strong class="reserved">long</strong> fixedDate) <em class="brace">{</em>
<a id="L1801" name="L1801"></a>1801         <em class="comment">// We can always use `jcal' since Julian and Gregorian are the</em>
<a id="L1802" name="L1802"></a>1802         <em class="comment">// same thing for this calculation.</em>
<a id="L1803" name="L1803"></a>1803         <strong class="reserved">long</strong> fixedDay1st = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(fixedDay1 + 6,
<a id="L1804" name="L1804"></a>1804                                                                              <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L1805" name="L1805"></a>1805         <strong class="reserved">int</strong> ndays = (<strong class="reserved">int</strong>)(fixedDay1st - fixedDay1);
<a id="L1806" name="L1806"></a>1806         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> ndays &lt;= 7;
<a id="L1807" name="L1807"></a>1807         <strong class="reserved">if</strong> (ndays &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>()) <em class="brace">{</em>
<a id="L1808" name="L1808"></a>1808             fixedDay1st -= 7;
<a id="L1809" name="L1809"></a>1809         <em class="brace">}</em>
<a id="L1810" name="L1810"></a>1810         <strong class="reserved">int</strong> normalizedDayOfPeriod = (<strong class="reserved">int</strong>)(fixedDate - fixedDay1st);
<a id="L1811" name="L1811"></a>1811         <strong class="reserved">if</strong> (normalizedDayOfPeriod &gt;= 0) <em class="brace">{</em>
<a id="L1812" name="L1812"></a>1812             <strong class="reserved">return</strong> normalizedDayOfPeriod / 7 + 1;
<a id="L1813" name="L1813"></a>1813         <em class="brace">}</em>
<a id="L1814" name="L1814"></a>1814         <strong class="reserved">return</strong> CalendarUtils.floorDivide(normalizedDayOfPeriod, 7) + 1;
<a id="L1815" name="L1815"></a>1815     <em class="brace">}</em>
<a id="L1816" name="L1816"></a>1816 
<div class="comment">
      Converts calendar field values to the time value (millisecond
      offset from the <a href="Calendar.html#Epoch">Epoch</a>).
      @exception IllegalArgumentException if any calendar fields are invalid.</div>
<a id="L1823" name="L1823"></a>1823     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/866.html#L3393" title="Referred from 3393 in src/java/util/Calendar.java.">computeTime</a>() <em class="brace">{</em>
<a id="L1824" name="L1824"></a>1824         <em class="comment">// In non-lenient mode, perform brief checking of calendar</em>
<a id="L1825" name="L1825"></a>1825         <em class="comment">// fields which have been set externally. Through this</em>
<a id="L1826" name="L1826"></a>1826         <em class="comment">// checking, the field values are stored in originalFields[]</em>
<a id="L1827" name="L1827"></a>1827         <em class="comment">// to see if any of them are normalized later.</em>
<a id="L1828" name="L1828"></a>1828         <strong class="reserved">if</strong> (!<a href="../D/25791.html" title="Multiple defined in 2 places.">isLenient</a>()) <em class="brace">{</em>
<a id="L1829" name="L1829"></a>1829             <strong class="reserved">if</strong> (originalFields == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1830" name="L1830"></a>1830                 originalFields = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[FIELD_COUNT];
<a id="L1831" name="L1831"></a>1831             <em class="brace">}</em>
<a id="L1832" name="L1832"></a>1832             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> field = 0; field &lt; FIELD_COUNT; field++) <em class="brace">{</em>
<a id="L1833" name="L1833"></a>1833                 <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field);
<a id="L1834" name="L1834"></a>1834                 <strong class="reserved">if</strong> (<a href="../S/866.html#L2286" title="Defined at 2286 in src/java/util/Calendar.java.">isExternallySet</a>(field)) <em class="brace">{</em>
<a id="L1835" name="L1835"></a>1835                     <em class="comment">// Quick validation for any out of range values</em>
<a id="L1836" name="L1836"></a>1836                     <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &lt; <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(field) || <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &gt; <a href="../D/20492.html" title="Multiple defined in 21 places.">getMaximum</a>(field)) <em class="brace">{</em>
<a id="L1837" name="L1837"></a>1837                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(<a href="../D/19028.html" title="Multiple defined in 6 places.">getFieldName</a>(field));
<a id="L1838" name="L1838"></a>1838                     <em class="brace">}</em>
<a id="L1839" name="L1839"></a>1839                 <em class="brace">}</em>
<a id="L1840" name="L1840"></a>1840                 originalFields[field] = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1841" name="L1841"></a>1841             <em class="brace">}</em>
<a id="L1842" name="L1842"></a>1842         <em class="brace">}</em>
<a id="L1843" name="L1843"></a>1843 
<a id="L1844" name="L1844"></a>1844         <em class="comment">// Let the super class determine which calendar fields to be</em>
<a id="L1845" name="L1845"></a>1845         <em class="comment">// used to calculate the time.</em>
<a id="L1846" name="L1846"></a>1846         <strong class="reserved">int</strong> fieldMask = <a href="../S/866.html#L2424" title="Defined at 2424 in src/java/util/Calendar.java.">selectFields</a>();
<a id="L1847" name="L1847"></a>1847 
<a id="L1848" name="L1848"></a>1848         <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>;
<a id="L1849" name="L1849"></a>1849         <strong class="reserved">int</strong> era;
<a id="L1850" name="L1850"></a>1850 
<a id="L1851" name="L1851"></a>1851         <strong class="reserved">if</strong> (<a href="../D/26230.html" title="Multiple defined in 16 places.">isSet</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>)) <em class="brace">{</em>
<a id="L1852" name="L1852"></a>1852             era = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>);
<a id="L1853" name="L1853"></a>1853             <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = <a href="../D/26230.html" title="Multiple defined in 16 places.">isSet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>) ? <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>) : 1;
<a id="L1854" name="L1854"></a>1854         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1855" name="L1855"></a>1855             <strong class="reserved">if</strong> (<a href="../D/26230.html" title="Multiple defined in 16 places.">isSet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L1856" name="L1856"></a>1856                 era = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1;
<a id="L1857" name="L1857"></a>1857                 <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>);
<a id="L1858" name="L1858"></a>1858             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1859" name="L1859"></a>1859                 <em class="comment">// Equivalent to 1970 (Gregorian)</em>
<a id="L1860" name="L1860"></a>1860                 era = SHOWA;
<a id="L1861" name="L1861"></a>1861                 <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = 45;
<a id="L1862" name="L1862"></a>1862             <em class="brace">}</em>
<a id="L1863" name="L1863"></a>1863         <em class="brace">}</em>
<a id="L1864" name="L1864"></a>1864 
<a id="L1865" name="L1865"></a>1865         <em class="comment">// Calculate the time of day. We rely on the convention that</em>
<a id="L1866" name="L1866"></a>1866         <em class="comment">// an UNSET field has 0.</em>
<a id="L1867" name="L1867"></a>1867         <strong class="reserved">long</strong> timeOfDay = 0;
<a id="L1868" name="L1868"></a>1868         <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, <a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>)) <em class="brace">{</em>
<a id="L1869" name="L1869"></a>1869             timeOfDay += (<strong class="reserved">long</strong>) <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>);
<a id="L1870" name="L1870"></a>1870         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1871" name="L1871"></a>1871             timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(HOUR);
<a id="L1872" name="L1872"></a>1872             <em class="comment">// The default value of AM_PM is 0 which designates AM.</em>
<a id="L1873" name="L1873"></a>1873             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, AM_PM)) <em class="brace">{</em>
<a id="L1874" name="L1874"></a>1874                 timeOfDay += 12 * <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(AM_PM);
<a id="L1875" name="L1875"></a>1875             <em class="brace">}</em>
<a id="L1876" name="L1876"></a>1876         <em class="brace">}</em>
<a id="L1877" name="L1877"></a>1877         timeOfDay *= 60;
<a id="L1878" name="L1878"></a>1878         timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MINUTE);
<a id="L1879" name="L1879"></a>1879         timeOfDay *= 60;
<a id="L1880" name="L1880"></a>1880         timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(SECOND);
<a id="L1881" name="L1881"></a>1881         timeOfDay *= 1000;
<a id="L1882" name="L1882"></a>1882         timeOfDay += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MILLISECOND);
<a id="L1883" name="L1883"></a>1883 
<a id="L1884" name="L1884"></a>1884         <em class="comment">// Convert the time of day to the number of days and the</em>
<a id="L1885" name="L1885"></a>1885         <em class="comment">// millisecond offset from midnight.</em>
<a id="L1886" name="L1886"></a>1886         <strong class="reserved">long</strong> fixedDate = timeOfDay / ONE_DAY;
<a id="L1887" name="L1887"></a>1887         timeOfDay %= ONE_DAY;
<a id="L1888" name="L1888"></a>1888         <strong class="reserved">while</strong> (timeOfDay &lt; 0) <em class="brace">{</em>
<a id="L1889" name="L1889"></a>1889             timeOfDay += ONE_DAY;
<a id="L1890" name="L1890"></a>1890             --fixedDate;
<a id="L1891" name="L1891"></a>1891         <em class="brace">}</em>
<a id="L1892" name="L1892"></a>1892 
<a id="L1893" name="L1893"></a>1893         <em class="comment">// Calculate the fixed date since January 1, 1 (Gregorian).</em>
<a id="L1894" name="L1894"></a>1894         fixedDate += <a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(era, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, fieldMask);
<a id="L1895" name="L1895"></a>1895 
<a id="L1896" name="L1896"></a>1896         <em class="comment">// millis represents local wall-clock time in milliseconds.</em>
<a id="L1897" name="L1897"></a>1897         <strong class="reserved">long</strong> <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> = (fixedDate - EPOCH_OFFSET) * ONE_DAY + timeOfDay;
<a id="L1898" name="L1898"></a>1898 
<a id="L1899" name="L1899"></a>1899         <em class="comment">// Compute the time zone offset and DST offset.  There are two potential</em>
<a id="L1900" name="L1900"></a>1900         <em class="comment">// ambiguities here.  We'll assume a 2:00 am (wall time) switchover time</em>
<a id="L1901" name="L1901"></a>1901         <em class="comment">// for discussion purposes here.</em>
<a id="L1902" name="L1902"></a>1902         <em class="comment">// 1. The transition into DST.  Here, a designated time of 2:00 am - 2:59 am</em>
<a id="L1903" name="L1903"></a>1903         <em class="comment">//    can be in standard or in DST depending.  However, 2:00 am is an invalid</em>
<a id="L1904" name="L1904"></a>1904         <em class="comment">//    representation (the representation jumps from 1:59:59 am Std to 3:00:00 am DST).</em>
<a id="L1905" name="L1905"></a>1905         <em class="comment">//    We assume standard time.</em>
<a id="L1906" name="L1906"></a>1906         <em class="comment">// 2. The transition out of DST.  Here, a designated time of 1:00 am - 1:59 am</em>
<a id="L1907" name="L1907"></a>1907         <em class="comment">//    can be in standard or DST.  Both are valid representations (the rep</em>
<a id="L1908" name="L1908"></a>1908         <em class="comment">//    jumps from 1:59:59 DST to 1:00:00 Std).</em>
<a id="L1909" name="L1909"></a>1909         <em class="comment">//    Again, we assume standard time.</em>
<a id="L1910" name="L1910"></a>1910         <em class="comment">// We use the TimeZone object, unless the user has explicitly set the ZONE_OFFSET</em>
<a id="L1911" name="L1911"></a>1911         <em class="comment">// or DST_OFFSET fields; then we use those fields.</em>
<a id="L1912" name="L1912"></a>1912         <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>();
<a id="L1913" name="L1913"></a>1913         <strong class="reserved">if</strong> (zoneOffsets == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1914" name="L1914"></a>1914             zoneOffsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[2];
<a id="L1915" name="L1915"></a>1915         <em class="brace">}</em>
<a id="L1916" name="L1916"></a>1916         <strong class="reserved">int</strong> tzMask = fieldMask &amp; (ZONE_OFFSET_MASK|DST_OFFSET_MASK);
<a id="L1917" name="L1917"></a>1917         <strong class="reserved">if</strong> (tzMask != (ZONE_OFFSET_MASK|DST_OFFSET_MASK)) <em class="brace">{</em>
<a id="L1918" name="L1918"></a>1918             <strong class="reserved">if</strong> (<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> <strong class="reserved">instanceof</strong> ZoneInfo) <em class="brace">{</em>
<a id="L1919" name="L1919"></a>1919                 ((ZoneInfo)<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>).getOffsetsByWall(<a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a>, zoneOffsets);
<a id="L1920" name="L1920"></a>1920             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1921" name="L1921"></a>1921                 <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>.<a href="../D/21181.html" title="Multiple defined in 4 places.">getOffsets</a>(<a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> - <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>.<a href="../D/21856.html" title="Multiple defined in 2 places.">getRawOffset</a>(), zoneOffsets);
<a id="L1922" name="L1922"></a>1922             <em class="brace">}</em>
<a id="L1923" name="L1923"></a>1923         <em class="brace">}</em>
<a id="L1924" name="L1924"></a>1924         <strong class="reserved">if</strong> (tzMask != 0) <em class="brace">{</em>
<a id="L1925" name="L1925"></a>1925             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(tzMask, ZONE_OFFSET)) <em class="brace">{</em>
<a id="L1926" name="L1926"></a>1926                 zoneOffsets[0] = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(ZONE_OFFSET);
<a id="L1927" name="L1927"></a>1927             <em class="brace">}</em>
<a id="L1928" name="L1928"></a>1928             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(tzMask, DST_OFFSET)) <em class="brace">{</em>
<a id="L1929" name="L1929"></a>1929                 zoneOffsets[1] = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(DST_OFFSET);
<a id="L1930" name="L1930"></a>1930             <em class="brace">}</em>
<a id="L1931" name="L1931"></a>1931         <em class="brace">}</em>
<a id="L1932" name="L1932"></a>1932 
<a id="L1933" name="L1933"></a>1933         <em class="comment">// Adjust the time zone offset values to get the UTC time.</em>
<a id="L1934" name="L1934"></a>1934         <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> -= zoneOffsets[0] + zoneOffsets[1];
<a id="L1935" name="L1935"></a>1935 
<a id="L1936" name="L1936"></a>1936         <em class="comment">// Set this calendar's time in milliseconds</em>
<a id="L1937" name="L1937"></a>1937         <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a>;
<a id="L1938" name="L1938"></a>1938 
<a id="L1939" name="L1939"></a>1939         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = <a href="../D/13176.html" title="Multiple defined in 5 places.">computeFields</a>(fieldMask | <a href="../S/866.html#L2296" title="Defined at 2296 in src/java/util/Calendar.java.">getSetStateFields</a>(), tzMask);
<a id="L1940" name="L1940"></a>1940 
<a id="L1941" name="L1941"></a>1941         <strong class="reserved">if</strong> (!<a href="../D/25791.html" title="Multiple defined in 2 places.">isLenient</a>()) <em class="brace">{</em>
<a id="L1942" name="L1942"></a>1942             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> field = 0; field &lt; FIELD_COUNT; field++) <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943                 <strong class="reserved">if</strong> (!<a href="../S/866.html#L2286" title="Defined at 2286 in src/java/util/Calendar.java.">isExternallySet</a>(field)) <em class="brace">{</em>
<a id="L1944" name="L1944"></a>1944                     <strong class="reserved">continue</strong>;
<a id="L1945" name="L1945"></a>1945                 <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946                 <strong class="reserved">if</strong> (originalFields[field] != <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field)) <em class="brace">{</em>
<a id="L1947" name="L1947"></a>1947                     <strong class="reserved">int</strong> wrongValue = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(field);
<a id="L1948" name="L1948"></a>1948                     <em class="comment">// Restore the original field values</em>
<a id="L1949" name="L1949"></a>1949                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(originalFields, 0, <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>, 0, <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1950" name="L1950"></a>1950                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(<a href="../D/19028.html" title="Multiple defined in 6 places.">getFieldName</a>(field) + "=" + wrongValue
<a id="L1951" name="L1951"></a>1951                                                        + ", expected " + originalFields[field]);
<a id="L1952" name="L1952"></a>1952                 <em class="brace">}</em>
<a id="L1953" name="L1953"></a>1953             <em class="brace">}</em>
<a id="L1954" name="L1954"></a>1954         <em class="brace">}</em>
<a id="L1955" name="L1955"></a>1955         <a href="../S/866.html#L2356" title="Defined at 2356 in src/java/util/Calendar.java.">setFieldsNormalized</a>(<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>);
<a id="L1956" name="L1956"></a>1956     <em class="brace">}</em>
<a id="L1957" name="L1957"></a>1957 
<div class="comment">
      Computes the fixed date under either the Gregorian or the
      Julian calendar, using the given year and the specified calendar fields.
      @param era era index
      @param year the normalized year number, with 0 indicating the
      year 1 BCE, -1 indicating 2 BCE, etc.
      @param fieldMask the calendar fields to be used for the date calculation
      @return the fixed date
      @see Calendar#selectFields</div>
<a id="L1969" name="L1969"></a>1969     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/16635.html" title="Multiple referred from 48 places.">getFixedDate</a>(<strong class="reserved">int</strong> era, <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, <strong class="reserved">int</strong> fieldMask) <em class="brace">{</em>
<a id="L1970" name="L1970"></a>1970         <strong class="reserved">int</strong> month = JANUARY;
<a id="L1971" name="L1971"></a>1971         <strong class="reserved">int</strong> <a href="../S/1474.html#L165" title="Defined at 165 in src/java/time/temporal/TemporalAdjusters.java.">firstDayOfMonth</a> = 1;
<a id="L1972" name="L1972"></a>1972         <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, MONTH)) <em class="brace">{</em>
<a id="L1973" name="L1973"></a>1973             <em class="comment">// No need to check if MONTH has been set (no isSet(MONTH)</em>
<a id="L1974" name="L1974"></a>1974             <em class="comment">// call) since its unset value happens to be JANUARY (0).</em>
<a id="L1975" name="L1975"></a>1975             month = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(MONTH);
<a id="L1976" name="L1976"></a>1976 
<a id="L1977" name="L1977"></a>1977             <em class="comment">// If the month is out of range, adjust it into range.</em>
<a id="L1978" name="L1978"></a>1978             <strong class="reserved">if</strong> (month &gt; DECEMBER) <em class="brace">{</em>
<a id="L1979" name="L1979"></a>1979                 <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> += month / 12;
<a id="L1980" name="L1980"></a>1980                 month %= 12;
<a id="L1981" name="L1981"></a>1981             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (month &lt; JANUARY) <em class="brace">{</em>
<a id="L1982" name="L1982"></a>1982                 <strong class="reserved">int</strong>[] rem = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L1983" name="L1983"></a>1983                 <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> += CalendarUtils.floorDivide(month, 12, rem);
<a id="L1984" name="L1984"></a>1984                 month = rem[0];
<a id="L1985" name="L1985"></a>1985             <em class="brace">}</em>
<a id="L1986" name="L1986"></a>1986         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1987" name="L1987"></a>1987             <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == 1 &amp;&amp; era != 0) <em class="brace">{</em>
<a id="L1988" name="L1988"></a>1988                 CalendarDate d = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[era].getSinceDate();
<a id="L1989" name="L1989"></a>1989                 month = d.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L1990" name="L1990"></a>1990                 <a href="../S/1474.html#L165" title="Defined at 165 in src/java/time/temporal/TemporalAdjusters.java.">firstDayOfMonth</a> = d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>();
<a id="L1991" name="L1991"></a>1991             <em class="brace">}</em>
<a id="L1992" name="L1992"></a>1992         <em class="brace">}</em>
<a id="L1993" name="L1993"></a>1993 
<a id="L1994" name="L1994"></a>1994         <em class="comment">// Adjust the base date if year is the minimum value.</em>
<a id="L1995" name="L1995"></a>1995         <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == MIN_VALUES[<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>]) <em class="brace">{</em>
<a id="L1996" name="L1996"></a>1996             CalendarDate dx = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L1997" name="L1997"></a>1997             <strong class="reserved">int</strong> m = dx.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() - 1;
<a id="L1998" name="L1998"></a>1998             <strong class="reserved">if</strong> (month &lt; m) <em class="brace">{</em>
<a id="L1999" name="L1999"></a>1999                 month = m;
<a id="L2000" name="L2000"></a>2000             <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001             <strong class="reserved">if</strong> (month == m) <em class="brace">{</em>
<a id="L2002" name="L2002"></a>2002                 <a href="../S/1474.html#L165" title="Defined at 165 in src/java/time/temporal/TemporalAdjusters.java.">firstDayOfMonth</a> = dx.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>();
<a id="L2003" name="L2003"></a>2003             <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004         <em class="brace">}</em>
<a id="L2005" name="L2005"></a>2005 
<a id="L2006" name="L2006"></a>2006         LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = jcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L2007" name="L2007"></a>2007         <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.setEra(era &gt; 0 ? <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[era] : <strong class="reserved">null</strong>);
<a id="L2008" name="L2008"></a>2008         <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, month + 1, <a href="../S/1474.html#L165" title="Defined at 165 in src/java/time/temporal/TemporalAdjusters.java.">firstDayOfMonth</a>);
<a id="L2009" name="L2009"></a>2009         jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2010" name="L2010"></a>2010 
<a id="L2011" name="L2011"></a>2011         <em class="comment">// Get the fixed date since Jan 1, 1 (Gregorian). We are on</em>
<a id="L2012" name="L2012"></a>2012         <em class="comment">// the first day of either `month' or January in 'year'.</em>
<a id="L2013" name="L2013"></a>2013         <strong class="reserved">long</strong> fixedDate = jcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2014" name="L2014"></a>2014 
<a id="L2015" name="L2015"></a>2015         <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, MONTH)) <em class="brace">{</em>
<a id="L2016" name="L2016"></a>2016             <em class="comment">// Month-based calculations</em>
<a id="L2017" name="L2017"></a>2017             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, <a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>)) <em class="brace">{</em>
<a id="L2018" name="L2018"></a>2018                 <em class="comment">// We are on the "first day" of the month (which may</em>
<a id="L2019" name="L2019"></a>2019                 <em class="comment">// not be 1). Just add the offset if DAY_OF_MONTH is</em>
<a id="L2020" name="L2020"></a>2020                 <em class="comment">// set. If the isSet call returns false, that means</em>
<a id="L2021" name="L2021"></a>2021                 <em class="comment">// DAY_OF_MONTH has been selected just because of the</em>
<a id="L2022" name="L2022"></a>2022                 <em class="comment">// selected combination. We don't need to add any</em>
<a id="L2023" name="L2023"></a>2023                 <em class="comment">// since the default value is the "first day".</em>
<a id="L2024" name="L2024"></a>2024                 <strong class="reserved">if</strong> (<a href="../D/26230.html" title="Multiple defined in 16 places.">isSet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>)) <em class="brace">{</em>
<a id="L2025" name="L2025"></a>2025                     <em class="comment">// To avoid underflow with DAY_OF_MONTH-firstDayOfMonth, add</em>
<a id="L2026" name="L2026"></a>2026                     <em class="comment">// DAY_OF_MONTH, then subtract firstDayOfMonth.</em>
<a id="L2027" name="L2027"></a>2027                     fixedDate += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>);
<a id="L2028" name="L2028"></a>2028                     fixedDate -= <a href="../S/1474.html#L165" title="Defined at 165 in src/java/time/temporal/TemporalAdjusters.java.">firstDayOfMonth</a>;
<a id="L2029" name="L2029"></a>2029                 <em class="brace">}</em>
<a id="L2030" name="L2030"></a>2030             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2031" name="L2031"></a>2031                 <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, WEEK_OF_MONTH)) <em class="brace">{</em>
<a id="L2032" name="L2032"></a>2032                     <strong class="reserved">long</strong> firstDayOfWeek = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(fixedDate + 6,
<a id="L2033" name="L2033"></a>2033                                                                                             <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L2034" name="L2034"></a>2034                     <em class="comment">// If we have enough days in the first week, then</em>
<a id="L2035" name="L2035"></a>2035                     <em class="comment">// move to the previous week.</em>
<a id="L2036" name="L2036"></a>2036                     <strong class="reserved">if</strong> ((firstDayOfWeek - fixedDate) &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>()) <em class="brace">{</em>
<a id="L2037" name="L2037"></a>2037                         firstDayOfWeek -= 7;
<a id="L2038" name="L2038"></a>2038                     <em class="brace">}</em>
<a id="L2039" name="L2039"></a>2039                     <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, <a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>)) <em class="brace">{</em>
<a id="L2040" name="L2040"></a>2040                         firstDayOfWeek = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(firstDayOfWeek + 6,
<a id="L2041" name="L2041"></a>2041                                                                                            <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>));
<a id="L2042" name="L2042"></a>2042                     <em class="brace">}</em>
<a id="L2043" name="L2043"></a>2043                     <em class="comment">// In lenient mode, we treat days of the previous</em>
<a id="L2044" name="L2044"></a>2044                     <em class="comment">// months as a part of the specified</em>
<a id="L2045" name="L2045"></a>2045                     <em class="comment">// WEEK_OF_MONTH. See 4633646.</em>
<a id="L2046" name="L2046"></a>2046                     fixedDate = firstDayOfWeek + 7 * (<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(WEEK_OF_MONTH) - 1);
<a id="L2047" name="L2047"></a>2047                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2048" name="L2048"></a>2048                     <strong class="reserved">int</strong> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>;
<a id="L2049" name="L2049"></a>2049                     <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, <a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>)) <em class="brace">{</em>
<a id="L2050" name="L2050"></a>2050                         <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>);
<a id="L2051" name="L2051"></a>2051                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2052" name="L2052"></a>2052                         <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> = <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>();
<a id="L2053" name="L2053"></a>2053                     <em class="brace">}</em>
<a id="L2054" name="L2054"></a>2054                     <em class="comment">// We are basing this on the day-of-week-in-month.  The only</em>
<a id="L2055" name="L2055"></a>2055                     <em class="comment">// trickiness occurs if the day-of-week-in-month is</em>
<a id="L2056" name="L2056"></a>2056                     <em class="comment">// negative.</em>
<a id="L2057" name="L2057"></a>2057                     <strong class="reserved">int</strong> dowim;
<a id="L2058" name="L2058"></a>2058                     <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, DAY_OF_WEEK_IN_MONTH)) <em class="brace">{</em>
<a id="L2059" name="L2059"></a>2059                         dowim = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(DAY_OF_WEEK_IN_MONTH);
<a id="L2060" name="L2060"></a>2060                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2061" name="L2061"></a>2061                         dowim = 1;
<a id="L2062" name="L2062"></a>2062                     <em class="brace">}</em>
<a id="L2063" name="L2063"></a>2063                     <strong class="reserved">if</strong> (dowim &gt;= 0) <em class="brace">{</em>
<a id="L2064" name="L2064"></a>2064                         fixedDate = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(fixedDate + (7 * dowim) - 1,
<a id="L2065" name="L2065"></a>2065                                                                                       <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>);
<a id="L2066" name="L2066"></a>2066                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2067" name="L2067"></a>2067                         <em class="comment">// Go to the first day of the next week of</em>
<a id="L2068" name="L2068"></a>2068                         <em class="comment">// the specified week boundary.</em>
<a id="L2069" name="L2069"></a>2069                         <strong class="reserved">int</strong> lastDate = <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>(month, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>) + (7 * (dowim + 1));
<a id="L2070" name="L2070"></a>2070                         <em class="comment">// Then, get the day of week date on or before the last date.</em>
<a id="L2071" name="L2071"></a>2071                         fixedDate = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(fixedDate + lastDate - 1,
<a id="L2072" name="L2072"></a>2072                                                                                       <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>);
<a id="L2073" name="L2073"></a>2073                     <em class="brace">}</em>
<a id="L2074" name="L2074"></a>2074                 <em class="brace">}</em>
<a id="L2075" name="L2075"></a>2075             <em class="brace">}</em>
<a id="L2076" name="L2076"></a>2076         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2077" name="L2077"></a>2077             <em class="comment">// We are on the first day of the year.</em>
<a id="L2078" name="L2078"></a>2078             <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, <a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>)) <em class="brace">{</em>
<a id="L2079" name="L2079"></a>2079                 <strong class="reserved">if</strong> (<a href="../S/990.html#L2230" title="Defined at 2230 in src/java/util/JapaneseImperialCalendar.java.">isTransitionYear</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear())) <em class="brace">{</em>
<a id="L2080" name="L2080"></a>2080                     fixedDate = <a href="../D/19126.html" title="Multiple defined in 2 places.">getFixedDateJan1</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, fixedDate);
<a id="L2081" name="L2081"></a>2081                 <em class="brace">}</em>
<a id="L2082" name="L2082"></a>2082                 <em class="comment">// Add the offset, then subtract 1. (Make sure to avoid underflow.)</em>
<a id="L2083" name="L2083"></a>2083                 fixedDate += <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>);
<a id="L2084" name="L2084"></a>2084                 fixedDate--;
<a id="L2085" name="L2085"></a>2085             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2086" name="L2086"></a>2086                 <strong class="reserved">long</strong> firstDayOfWeek = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(fixedDate + 6,
<a id="L2087" name="L2087"></a>2087                                                                                         <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>());
<a id="L2088" name="L2088"></a>2088                 <em class="comment">// If we have enough days in the first week, then move</em>
<a id="L2089" name="L2089"></a>2089                 <em class="comment">// to the previous week.</em>
<a id="L2090" name="L2090"></a>2090                 <strong class="reserved">if</strong> ((firstDayOfWeek - fixedDate) &gt;= <a href="../D/20653.html" title="Multiple defined in 3 places.">getMinimalDaysInFirstWeek</a>()) <em class="brace">{</em>
<a id="L2091" name="L2091"></a>2091                     firstDayOfWeek -= 7;
<a id="L2092" name="L2092"></a>2092                 <em class="brace">}</em>
<a id="L2093" name="L2093"></a>2093                 <strong class="reserved">if</strong> (<a href="../S/866.html#L2400" title="Defined at 2400 in src/java/util/Calendar.java.">isFieldSet</a>(fieldMask, <a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>)) <em class="brace">{</em>
<a id="L2094" name="L2094"></a>2094                     <strong class="reserved">int</strong> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> = <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>);
<a id="L2095" name="L2095"></a>2095                     <strong class="reserved">if</strong> (<a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> != <a href="../D/19096.html" title="Multiple defined in 3 places.">getFirstDayOfWeek</a>()) <em class="brace">{</em>
<a id="L2096" name="L2096"></a>2096                         firstDayOfWeek = LocalGregorianCalendar.getDayOfWeekDateOnOrBefore(firstDayOfWeek + 6,
<a id="L2097" name="L2097"></a>2097                                                                                            <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>);
<a id="L2098" name="L2098"></a>2098                     <em class="brace">}</em>
<a id="L2099" name="L2099"></a>2099                 <em class="brace">}</em>
<a id="L2100" name="L2100"></a>2100                 fixedDate = firstDayOfWeek + 7 * ((<strong class="reserved">long</strong>)<a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(WEEK_OF_YEAR) - 1);
<a id="L2101" name="L2101"></a>2101             <em class="brace">}</em>
<a id="L2102" name="L2102"></a>2102         <em class="brace">}</em>
<a id="L2103" name="L2103"></a>2103         <strong class="reserved">return</strong> fixedDate;
<a id="L2104" name="L2104"></a>2104     <em class="brace">}</em>
<a id="L2105" name="L2105"></a>2105 
<div class="comment">
      Returns the fixed date of the first day of the year (usually
      January 1) before the specified date.
      @param date the date for which the first day of the year is
      calculated. The date has to be in the cut-over year.
      @param fixedDate the fixed date representation of the date</div>
<a id="L2114" name="L2114"></a>2114     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/16636.html" title="Multiple referred from 5 places.">getFixedDateJan1</a>(LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <strong class="reserved">long</strong> fixedDate) <em class="brace">{</em>
<a id="L2115" name="L2115"></a>2115         <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a> era = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>();
<a id="L2116" name="L2116"></a>2116         <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>() != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == 1) <em class="brace">{</em>
<a id="L2117" name="L2117"></a>2117             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>); eraIndex &gt; 0; eraIndex--) <em class="brace">{</em>
<a id="L2118" name="L2118"></a>2118                 CalendarDate d = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex].getSinceDate();
<a id="L2119" name="L2119"></a>2119                 <strong class="reserved">long</strong> fd = gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L2120" name="L2120"></a>2120                 <em class="comment">// There might be multiple era transitions in a year.</em>
<a id="L2121" name="L2121"></a>2121                 <strong class="reserved">if</strong> (fd &gt; fixedDate) <em class="brace">{</em>
<a id="L2122" name="L2122"></a>2122                     <strong class="reserved">continue</strong>;
<a id="L2123" name="L2123"></a>2123                 <em class="brace">}</em>
<a id="L2124" name="L2124"></a>2124                 <strong class="reserved">return</strong> fd;
<a id="L2125" name="L2125"></a>2125             <em class="brace">}</em>
<a id="L2126" name="L2126"></a>2126         <em class="brace">}</em>
<a id="L2127" name="L2127"></a>2127         CalendarDate d = gcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L2128" name="L2128"></a>2128         d.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear(), Gregorian.JANUARY, 1);
<a id="L2129" name="L2129"></a>2129         <strong class="reserved">return</strong> gcal.<a href="../D/19125.html" title="Multiple defined in 2 places.">getFixedDate</a>(d);
<a id="L2130" name="L2130"></a>2130     <em class="brace">}</em>
<a id="L2131" name="L2131"></a>2131 
<div class="comment">
      Returns the fixed date of the first date of the month (usually
      the 1st of the month) before the specified date.
      @param date the date for which the first day of the month is
      calculated. The date must be in the era transition year.
      @param fixedDate the fixed date representation of the date</div>
<a id="L2140" name="L2140"></a>2140     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/16637.html" title="Multiple referred from 13 places.">getFixedDateMonth1</a>(LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>,
<a id="L2141" name="L2141"></a>2141                                           <strong class="reserved">long</strong> fixedDate) <em class="brace">{</em>
<a id="L2142" name="L2142"></a>2142         <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2213" title="Defined at 2213 in src/java/util/JapaneseImperialCalendar.java.">getTransitionEraIndex</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2143" name="L2143"></a>2143         <strong class="reserved">if</strong> (eraIndex != -1) <em class="brace">{</em>
<a id="L2144" name="L2144"></a>2144             <strong class="reserved">long</strong> transition = sinceFixedDates[eraIndex];
<a id="L2145" name="L2145"></a>2145             <em class="comment">// If the given date is on or after the transition date, then</em>
<a id="L2146" name="L2146"></a>2146             <em class="comment">// return the transition date.</em>
<a id="L2147" name="L2147"></a>2147             <strong class="reserved">if</strong> (transition &lt;= fixedDate) <em class="brace">{</em>
<a id="L2148" name="L2148"></a>2148                 <strong class="reserved">return</strong> transition;
<a id="L2149" name="L2149"></a>2149             <em class="brace">}</em>
<a id="L2150" name="L2150"></a>2150         <em class="brace">}</em>
<a id="L2151" name="L2151"></a>2151 
<a id="L2152" name="L2152"></a>2152         <em class="comment">// Otherwise, we can use the 1st day of the month.</em>
<a id="L2153" name="L2153"></a>2153         <strong class="reserved">return</strong> fixedDate - <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() + 1;
<a id="L2154" name="L2154"></a>2154     <em class="brace">}</em>
<a id="L2155" name="L2155"></a>2155 
<div class="comment">
      Returns a LocalGregorianCalendar.Date produced from the specified fixed date.
      @param fd the fixed date</div>
<a id="L2161" name="L2161"></a>2161     <strong class="reserved">private</strong> <strong class="reserved">static</strong> LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../R/15422.html" title="Multiple referred from 60 places.">getCalendarDate</a>(<strong class="reserved">long</strong> fd) <em class="brace">{</em>
<a id="L2162" name="L2162"></a>2162         LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = jcal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L2163" name="L2163"></a>2163         jcal.getCalendarDateFromFixedDate(d, fd);
<a id="L2164" name="L2164"></a>2164         <strong class="reserved">return</strong> d;
<a id="L2165" name="L2165"></a>2165     <em class="brace">}</em>
<a id="L2166" name="L2166"></a>2166 
<div class="comment">
      Returns the length of the specified month in the specified
      Gregorian year. The year number must be normalized.
      @see GregorianCalendar#isLeapYear(int)</div>
<a id="L2173" name="L2173"></a>2173     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/23345.html" title="Multiple referred from 46 places.">monthLength</a>(<strong class="reserved">int</strong> month, <strong class="reserved">int</strong> gregorianYear) <em class="brace">{</em>
<a id="L2174" name="L2174"></a>2174         <strong class="reserved">return</strong> CalendarUtils.isGregorianLeapYear(gregorianYear) ?
<a id="L2175" name="L2175"></a>2175             <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.LEAP_MONTH_LENGTH[month] : <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.MONTH_LENGTH[month];
<a id="L2176" name="L2176"></a>2176     <em class="brace">}</em>
<a id="L2177" name="L2177"></a>2177 
<div class="comment">
      Returns the length of the specified month in the year provided
      by internalGet(YEAR).
      @see GregorianCalendar#isLeapYear(int)</div>
<a id="L2184" name="L2184"></a>2184     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/23345.html" title="Multiple referred from 46 places.">monthLength</a>(<strong class="reserved">int</strong> month) <em class="brace">{</em>
<a id="L2185" name="L2185"></a>2185         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> jdate.<a href="../D/25965.html" title="Multiple defined in 5 places.">isNormalized</a>();
<a id="L2186" name="L2186"></a>2186         <strong class="reserved">return</strong> jdate.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>() ?
<a id="L2187" name="L2187"></a>2187             <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.LEAP_MONTH_LENGTH[month] : <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.MONTH_LENGTH[month];
<a id="L2188" name="L2188"></a>2188     <em class="brace">}</em>
<a id="L2189" name="L2189"></a>2189 
<a id="L2190" name="L2190"></a>2190     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/9579.html" title="Multiple referred from 8 places.">actualMonthLength</a>() <em class="brace">{</em>
<a id="L2191" name="L2191"></a>2191         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(jdate);
<a id="L2192" name="L2192"></a>2192         <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2213" title="Defined at 2213 in src/java/util/JapaneseImperialCalendar.java.">getTransitionEraIndex</a>(jdate);
<a id="L2193" name="L2193"></a>2193         <strong class="reserved">if</strong> (eraIndex == -1) <em class="brace">{</em>
<a id="L2194" name="L2194"></a>2194             <strong class="reserved">long</strong> transitionFixedDate = sinceFixedDates[eraIndex];
<a id="L2195" name="L2195"></a>2195             CalendarDate d = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex].getSinceDate();
<a id="L2196" name="L2196"></a>2196             <strong class="reserved">if</strong> (transitionFixedDate &lt;= cachedFixedDate) <em class="brace">{</em>
<a id="L2197" name="L2197"></a>2197                 <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> -= d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() - 1;
<a id="L2198" name="L2198"></a>2198             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2199" name="L2199"></a>2199                 <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() - 1;
<a id="L2200" name="L2200"></a>2200             <em class="brace">}</em>
<a id="L2201" name="L2201"></a>2201         <em class="brace">}</em>
<a id="L2202" name="L2202"></a>2202         <strong class="reserved">return</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2203" name="L2203"></a>2203     <em class="brace">}</em>
<a id="L2204" name="L2204"></a>2204 
<div class="comment">
      Returns the index to the new era if the given date is in a
      transition month.  For example, if the give date is Heisei 1
      (1989) January 20, then the era index for Heisei is
      returned. Likewise, if the given date is Showa 64 (1989)
      January 3, then the era index for Heisei is returned. If the
      given date is not in any transition month, then -1 is returned.</div>
<a id="L2213" name="L2213"></a>2213     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/19576.html" title="Multiple referred from 2 places.">getTransitionEraIndex</a>(LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>) <em class="brace">{</em>
<a id="L2214" name="L2214"></a>2214         <strong class="reserved">int</strong> eraIndex = <a href="../S/990.html#L2243" title="Defined at 2243 in src/java/util/JapaneseImperialCalendar.java.">getEraIndex</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2215" name="L2215"></a>2215         CalendarDate transitionDate = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[eraIndex].getSinceDate();
<a id="L2216" name="L2216"></a>2216         <strong class="reserved">if</strong> (transitionDate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear() &amp;&amp;
<a id="L2217" name="L2217"></a>2217             transitionDate.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() == <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>()) <em class="brace">{</em>
<a id="L2218" name="L2218"></a>2218             <strong class="reserved">return</strong> eraIndex;
<a id="L2219" name="L2219"></a>2219         <em class="brace">}</em>
<a id="L2220" name="L2220"></a>2220         <strong class="reserved">if</strong> (eraIndex &lt; <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1) <em class="brace">{</em>
<a id="L2221" name="L2221"></a>2221             transitionDate = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[++eraIndex].getSinceDate();
<a id="L2222" name="L2222"></a>2222             <strong class="reserved">if</strong> (transitionDate.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>() == <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.getNormalizedYear() &amp;&amp;
<a id="L2223" name="L2223"></a>2223                 transitionDate.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() == <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>()) <em class="brace">{</em>
<a id="L2224" name="L2224"></a>2224                 <strong class="reserved">return</strong> eraIndex;
<a id="L2225" name="L2225"></a>2225             <em class="brace">}</em>
<a id="L2226" name="L2226"></a>2226         <em class="brace">}</em>
<a id="L2227" name="L2227"></a>2227         <strong class="reserved">return</strong> -1;
<a id="L2228" name="L2228"></a>2228     <em class="brace">}</em>
<a id="L2229" name="L2229"></a>2229 
<a id="L2230" name="L2230"></a>2230     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/22125.html" title="Multiple referred from 14 places.">isTransitionYear</a>(<strong class="reserved">int</strong> normalizedYear) <em class="brace">{</em>
<a id="L2231" name="L2231"></a>2231         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1; i &gt; 0; i--) <em class="brace">{</em>
<a id="L2232" name="L2232"></a>2232             <strong class="reserved">int</strong> transitionYear = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[i].getSinceDate().<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L2233" name="L2233"></a>2233             <strong class="reserved">if</strong> (normalizedYear == transitionYear) <em class="brace">{</em>
<a id="L2234" name="L2234"></a>2234                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2235" name="L2235"></a>2235             <em class="brace">}</em>
<a id="L2236" name="L2236"></a>2236             <strong class="reserved">if</strong> (normalizedYear &gt; transitionYear) <em class="brace">{</em>
<a id="L2237" name="L2237"></a>2237                 <strong class="reserved">break</strong>;
<a id="L2238" name="L2238"></a>2238             <em class="brace">}</em>
<a id="L2239" name="L2239"></a>2239         <em class="brace">}</em>
<a id="L2240" name="L2240"></a>2240         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2241" name="L2241"></a>2241     <em class="brace">}</em>
<a id="L2242" name="L2242"></a>2242 
<a id="L2243" name="L2243"></a>2243     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/16426.html" title="Multiple referred from 15 places.">getEraIndex</a>(LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>) <em class="brace">{</em>
<a id="L2244" name="L2244"></a>2244         <a href="../S/1498.html#L104" title="Defined at 104 in src/java/time/chrono/Era.java.">Era</a> era = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18840.html" title="Multiple defined in 6 places.">getEra</a>();
<a id="L2245" name="L2245"></a>2245         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1; i &gt; 0; i--) <em class="brace">{</em>
<a id="L2246" name="L2246"></a>2246             <strong class="reserved">if</strong> (<a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>[i] == era) <em class="brace">{</em>
<a id="L2247" name="L2247"></a>2247                 <strong class="reserved">return</strong> i;
<a id="L2248" name="L2248"></a>2248             <em class="brace">}</em>
<a id="L2249" name="L2249"></a>2249         <em class="brace">}</em>
<a id="L2250" name="L2250"></a>2250         <strong class="reserved">return</strong> 0;
<a id="L2251" name="L2251"></a>2251     <em class="brace">}</em>
<a id="L2252" name="L2252"></a>2252 
<div class="comment">
      Returns this object if it's normalized (all fields and time are
      in sync). Otherwise, a cloned object is returned after calling
      complete() in lenient mode.</div>
<a id="L2258" name="L2258"></a>2258     <strong class="reserved">private</strong> <a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a> <a href="../R/18005.html" title="Multiple referred from 6 places.">getNormalizedCalendar</a>() <em class="brace">{</em>
<a id="L2259" name="L2259"></a>2259         <a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a> jc;
<a id="L2260" name="L2260"></a>2260         <strong class="reserved">if</strong> (<a href="../S/866.html#L2385" title="Defined at 2385 in src/java/util/Calendar.java.">isFullyNormalized</a>()) <em class="brace">{</em>
<a id="L2261" name="L2261"></a>2261             jc = <strong class="reserved">this</strong>;
<a id="L2262" name="L2262"></a>2262         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2263" name="L2263"></a>2263             <em class="comment">// Create a clone and normalize the calendar fields</em>
<a id="L2264" name="L2264"></a>2264             jc = (<a href="../S/990.html#L69" title="Defined at 69 in src/java/util/JapaneseImperialCalendar.java.">JapaneseImperialCalendar</a>) <strong class="reserved">this</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L2265" name="L2265"></a>2265             jc.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">true</strong>);
<a id="L2266" name="L2266"></a>2266             jc.<a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a>();
<a id="L2267" name="L2267"></a>2267         <em class="brace">}</em>
<a id="L2268" name="L2268"></a>2268         <strong class="reserved">return</strong> jc;
<a id="L2269" name="L2269"></a>2269     <em class="brace">}</em>
<a id="L2270" name="L2270"></a>2270 
<div class="comment">
      After adjustments such as add(MONTH), add(YEAR), we don't want the
      month to jump around.  E.g., we don't want Jan 31 + 1 month to go to Mar
      3, we want it to go to Feb 28.  Adjustments which might run into this
      problem call this method to retain the proper month.</div>
<a id="L2277" name="L2277"></a>2277     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/24750.html" title="Multiple referred from 4 places.">pinDayOfMonth</a>(LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>) <em class="brace">{</em>
<a id="L2278" name="L2278"></a>2278         <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23806.html" title="Multiple defined in 9 places.">getYear</a>();
<a id="L2279" name="L2279"></a>2279         <strong class="reserved">int</strong> dom = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>();
<a id="L2280" name="L2280"></a>2280         <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> != <a href="../D/20655.html" title="Multiple defined in 19 places.">getMinimum</a>(<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>)) <em class="brace">{</em>
<a id="L2281" name="L2281"></a>2281             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.setDayOfMonth(1);
<a id="L2282" name="L2282"></a>2282             jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2283" name="L2283"></a>2283             <strong class="reserved">int</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2284" name="L2284"></a>2284             <strong class="reserved">if</strong> (dom &gt; <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>) <em class="brace">{</em>
<a id="L2285" name="L2285"></a>2285                 <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.setDayOfMonth(<a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>);
<a id="L2286" name="L2286"></a>2286             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2287" name="L2287"></a>2287                 <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.setDayOfMonth(dom);
<a id="L2288" name="L2288"></a>2288             <em class="brace">}</em>
<a id="L2289" name="L2289"></a>2289             jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L2290" name="L2290"></a>2290         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2291" name="L2291"></a>2291             LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L2292" name="L2292"></a>2292             LocalGregorianCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> realDate = jcal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, <a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L2293" name="L2293"></a>2293             <strong class="reserved">long</strong> tod = realDate.getTimeOfDay();
<a id="L2294" name="L2294"></a>2294             <em class="comment">// Use an equivalent year.</em>
<a id="L2295" name="L2295"></a>2295             realDate.<a href="../S/2471.html#L81" title="Defined at 81 in src/java/text/CalendarBuilder.java.">addYear</a>(+400);
<a id="L2296" name="L2296"></a>2296             realDate.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>());
<a id="L2297" name="L2297"></a>2297             realDate.setDayOfMonth(1);
<a id="L2298" name="L2298"></a>2298             jcal.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(realDate);
<a id="L2299" name="L2299"></a>2299             <strong class="reserved">int</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a> = jcal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(realDate);
<a id="L2300" name="L2300"></a>2300             <strong class="reserved">if</strong> (dom &gt; <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>) <em class="brace">{</em>
<a id="L2301" name="L2301"></a>2301                 realDate.setDayOfMonth(<a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>);
<a id="L2302" name="L2302"></a>2302             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2303" name="L2303"></a>2303                 <strong class="reserved">if</strong> (dom &lt; d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>()) <em class="brace">{</em>
<a id="L2304" name="L2304"></a>2304                     realDate.setDayOfMonth(d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L2305" name="L2305"></a>2305                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2306" name="L2306"></a>2306                     realDate.setDayOfMonth(dom);
<a id="L2307" name="L2307"></a>2307                 <em class="brace">}</em>
<a id="L2308" name="L2308"></a>2308             <em class="brace">}</em>
<a id="L2309" name="L2309"></a>2309             <strong class="reserved">if</strong> (realDate.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() == d.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() &amp;&amp; tod &lt; d.getTimeOfDay()) <em class="brace">{</em>
<a id="L2310" name="L2310"></a>2310                 realDate.setDayOfMonth(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dom + 1, <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>));
<a id="L2311" name="L2311"></a>2311             <em class="brace">}</em>
<a id="L2312" name="L2312"></a>2312             <em class="comment">// restore the year.</em>
<a id="L2313" name="L2313"></a>2313             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, realDate.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>(), realDate.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>());
<a id="L2314" name="L2314"></a>2314             <em class="comment">// Don't normalize date here so as not to cause underflow.</em>
<a id="L2315" name="L2315"></a>2315         <em class="brace">}</em>
<a id="L2316" name="L2316"></a>2316     <em class="brace">}</em>
<a id="L2317" name="L2317"></a>2317 
<div class="comment">
      Returns the new value after 'roll'ing the specified value and amount.</div>
<a id="L2321" name="L2321"></a>2321     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/18752.html" title="Multiple referred from 16 places.">getRolledValue</a>(<strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">int</strong> amount, <strong class="reserved">int</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, <strong class="reserved">int</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L2322" name="L2322"></a>2322         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &gt;= <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &lt;= <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>;
<a id="L2323" name="L2323"></a>2323         <strong class="reserved">int</strong> <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a> = <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> - <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> + 1;
<a id="L2324" name="L2324"></a>2324         amount %= <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a>;
<a id="L2325" name="L2325"></a>2325         <strong class="reserved">int</strong> n = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> + amount;
<a id="L2326" name="L2326"></a>2326         <strong class="reserved">if</strong> (n &gt; <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L2327" name="L2327"></a>2327             n -= <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a>;
<a id="L2328" name="L2328"></a>2328         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (n &lt; <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>) <em class="brace">{</em>
<a id="L2329" name="L2329"></a>2329             n += <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a>;
<a id="L2330" name="L2330"></a>2330         <em class="brace">}</em>
<a id="L2331" name="L2331"></a>2331         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> n &gt;= <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> &amp;&amp; n &lt;= <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>;
<a id="L2332" name="L2332"></a>2332         <strong class="reserved">return</strong> n;
<a id="L2333" name="L2333"></a>2333     <em class="brace">}</em>
<a id="L2334" name="L2334"></a>2334 
<div class="comment">
      Returns the ERA.  We need a special method for this because the
      default ERA is the current era, but a zero (unset) ERA means before Meiji.</div>
<a id="L2339" name="L2339"></a>2339     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20940.html" title="Multiple referred from 9 places.">internalGetEra</a>() <em class="brace">{</em>
<a id="L2340" name="L2340"></a>2340         <strong class="reserved">return</strong> <a href="../D/26230.html" title="Multiple defined in 16 places.">isSet</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>) ? <a href="../S/866.html#L1838" title="Defined at 1838 in src/java/util/Calendar.java.">internalGet</a>(<a href="../S/1483.html#L562" title="Defined at 562 in src/java/time/temporal/ChronoField.java.">ERA</a>) : <a href="../D/15693.html" title="Multiple defined in 6 places.">eras</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1;
<a id="L2341" name="L2341"></a>2341     <em class="brace">}</em>
<a id="L2342" name="L2342"></a>2342 
<div class="comment">
      Updates internal state.</div>
<a id="L2346" name="L2346"></a>2346     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>)
<a id="L2347" name="L2347"></a>2347             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L2348" name="L2348"></a>2348         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L2349" name="L2349"></a>2349         <strong class="reserved">if</strong> (jdate == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2350" name="L2350"></a>2350             jdate = jcal.newCalendarDate(<a href="../D/23816.html" title="Multiple defined in 10 places.">getZone</a>());
<a id="L2351" name="L2351"></a>2351             cachedFixedDate = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE;
<a id="L2352" name="L2352"></a>2352         <em class="brace">}</em>
<a id="L2353" name="L2353"></a>2353     <em class="brace">}</em>
<a id="L2354" name="L2354"></a>2354 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L326">[^]</a><a href="#L2346">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
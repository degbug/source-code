<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/ArrayBlockingQueue.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L131">[^]</a><a href="#L1411">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L131" title="Defined at 131.">dec</a></li>
<li><a href="#L138" title="Defined at 138.">SuppressWarnings</a></li>
<li><a href="#L139" title="Defined at 139.">itemAt</a></li>
<li><a href="#L148" title="Defined at 148.">checkNotNull</a></li>
<li><a href="#L157" title="Defined at 157.">enqueue</a></li>
<li><a href="#L172" title="Defined at 172.">dequeue</a></li>
<li><a href="#L193" title="Defined at 193.">removeAt</a></li>
<li><a href="#L311" title="Defined at 311.">add</a></li>
<li><a href="#L324" title="Defined at 324.">offer</a></li>
<li><a href="#L347" title="Defined at 347.">put</a></li>
<li><a href="#L368" title="Defined at 368.">offer</a></li>
<li><a href="#L388" title="Defined at 388.">poll</a></li>
<li><a href="#L398" title="Defined at 398.">take</a></li>
<li><a href="#L410" title="Defined at 410.">poll</a></li>
<li><a href="#L426" title="Defined at 426.">peek</a></li>
<li><a href="#L443" title="Defined at 443.">size</a></li>
<li><a href="#L466" title="Defined at 466.">remainingCapacity</a></li>
<li><a href="#L493" title="Defined at 493.">remove</a></li>
<li><a href="#L525" title="Defined at 525.">contains</a></li>
<li><a href="#L560" title="Defined at 560.">toArray</a></li>
<li><a href="#L615" title="Defined at 615.">SuppressWarnings</a></li>
<li><a href="#L616" title="Defined at 616.">toArray</a></li>
<li><a href="#L641" title="Defined at 641.">toString</a></li>
<li><a href="#L670" title="Defined at 670.">clear</a></li>
<li><a href="#L702" title="Defined at 702.">drainTo</a></li>
<li><a href="#L712" title="Defined at 712.">drainTo</a></li>
<li><a href="#L765" title="Defined at 765.">iterator</a></li>
<li><a href="#L858" title="Defined at 858.">doSomeSweeping</a></li>
<li><a href="#L914" title="Defined at 914.">register</a></li>
<li><a href="#L924" title="Defined at 924.">takeIndexWrapped</a></li>
<li><a href="#L953" title="Defined at 953.">removedAt</a></li>
<li><a href="#L981" title="Defined at 981.">queueIsEmpty</a></li>
<li><a href="#L997" title="Defined at 997.">elementDequeued</a></li>
<li><a href="#L1091" title="Defined at 1091.">isDetached</a></li>
<li><a href="#L1096" title="Defined at 1096.">incCursor</a></li>
<li><a href="#L1109" title="Defined at 1109.">invalidated</a></li>
<li><a href="#L1123" title="Defined at 1123.">incorporateDequeues</a></li>
<li><a href="#L1165" title="Defined at 1165.">detach</a></li>
<li><a href="#L1186" title="Defined at 1186.">hasNext</a></li>
<li><a href="#L1194" title="Defined at 1194.">noNext</a></li>
<li><a href="#L1216" title="Defined at 1216.">next</a></li>
<li><a href="#L1244" title="Defined at 1244.">remove</a></li>
<li><a href="#L1284" title="Defined at 1284.">shutdown</a></li>
<li><a href="#L1300" title="Defined at 1300.">distance</a></li>
<li><a href="#L1312" title="Defined at 1312.">removedAt</a></li>
<li><a href="#L1368" title="Defined at 1368.">takeIndexWrapped</a></li>
<li><a href="#L1411" title="Defined at 1411.">spliterator</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.concurrent.locks.Condition;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.concurrent.locks.ReentrantLock;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.util.AbstractQueue;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.util.Collection;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.util.NoSuchElementException;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.lang.ref.WeakReference;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.util.Spliterators;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.util.Spliterator;
<a id="L46" name="L46"></a>  46 
<div class="comment">
  A bounded {@linkplain BlockingQueue blocking queue} backed by an
  array.  This queue orders elements FIFO (first-in-first-out).  The
  <em>head</em> of the queue is that element that has been on the
  queue the longest time.  The <em>tail</em> of the queue is that
  element that has been on the queue the shortest time. New elements
  are inserted at the tail of the queue, and the queue retrieval
  operations obtain elements at the head of the queue.
  <p>This is a classic "bounded buffer", in which a
  fixed-sized array holds elements inserted by producers and
  extracted by consumers.  Once created, the capacity cannot be
  changed.  Attempts to <code>put</code> an element into a full queue
  will result in the operation blocking; attempts to <code>take</code> an
  element from an empty queue will similarly block.
  </p><p>This class supports an optional fairness policy for ordering
  waiting producer and consumer threads.  By default, this ordering
  is not guaranteed. However, a queue constructed with fairness set
  to <code>true</code> grants threads access in FIFO order. Fairness
  generally decreases throughput but reduces variability and avoids
  starvation.
  </p><p>This class and its iterator implement all of the
  <em>optional</em> methods of the {@link Collection} and {@link
  Iterator} interfaces.
  </p><p>This class is a member of the
  <a href="{@docRoot}/../technotes/guides/collections/index.html">
  Java Collections Framework</a>.
  @since 1.5
  @author Doug Lea
  @param <e> the type of elements held in this collection</e></p></div>
<a id="L82" name="L82"></a>  82 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/444.html" title="Multiple referred from 7 places.">ArrayBlockingQueue</a>&lt;E&gt; <strong class="reserved">extends</strong> <a href="../S/994.html#L64" title="Defined at 64 in src/java/util/AbstractQueue.java.">AbstractQueue</a>&lt;E&gt;
<a id="L83" name="L83"></a>  83         <strong class="reserved">implements</strong> <a href="../S/1109.html#L180" title="Defined at 180 in src/java/util/concurrent/BlockingQueue.java.">BlockingQueue</a>&lt;E&gt;, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L84" name="L84"></a>  84 
<div class="comment">
      Serialization ID. This class relies on default serialization
      even for the items array, which is default-serialized, even if
      it is empty. Otherwise it could not be declared final, which is
      necessary here.</div>
<a id="L91" name="L91"></a>  91     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -817911632652898426L;
<a id="L92" name="L92"></a>  92 
<div class="comment">
     /** The queued items */</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items;
<a id="L95" name="L95"></a>  95 
<div class="comment">
     /** items index for next take, poll, peek or remove */</div>
<a id="L97" name="L97"></a>  97     <strong class="reserved">int</strong> takeIndex;
<a id="L98" name="L98"></a>  98 
<div class="comment">
     /** items index for next put, offer, or add */</div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">int</strong> putIndex;
<a id="L101" name="L101"></a> 101 
<div class="comment">
     /** Number of elements in the queue */</div>
<a id="L103" name="L103"></a> 103     <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L104" name="L104"></a> 104 
<div class="comment">
      Concurrency control uses the classic two-condition algorithm
      found in any textbook.</div>
<a id="L109" name="L109"></a> 109 
<div class="comment">
     /** Main lock guarding all access */</div>
<a id="L111" name="L111"></a> 111     <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L112" name="L112"></a> 112 
<div class="comment">
     /** Condition for waiting takes */</div>
<a id="L114" name="L114"></a> 114     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> notEmpty;
<a id="L115" name="L115"></a> 115 
<div class="comment">
     /** Condition for waiting puts */</div>
<a id="L117" name="L117"></a> 117     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> notFull;
<a id="L118" name="L118"></a> 118 
<div class="comment">
      Shared state for currently active iterators, or null if there
      are known not to be any.  Allows queue operations to update
      iterator state.</div>
<a id="L124" name="L124"></a> 124     <strong class="reserved">transient</strong> <a href="../S/1118.html#L820" title="Defined at 820 in src/java/util/concurrent/ArrayBlockingQueue.java.">Itrs</a> itrs = <strong class="reserved">null</strong>;
<a id="L125" name="L125"></a> 125 
<a id="L126" name="L126"></a> 126     <em class="comment">// Internal helper methods</em>
<a id="L127" name="L127"></a> 127 
<div class="comment">
      Circularly decrement i.</div>
<a id="L131" name="L131"></a> 131     <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/12931.html" title="Multiple referred from 29 places.">dec</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L132" name="L132"></a> 132         <strong class="reserved">return</strong> ((i == 0) ? items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> : i) - 1;
<a id="L133" name="L133"></a> 133     <em class="brace">}</em>
<a id="L134" name="L134"></a> 134 
<div class="comment">
      Returns item at index i.</div>
<a id="L138" name="L138"></a> 138     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L139" name="L139"></a> 139     <strong class="reserved">final</strong> E <a href="../R/22288.html" title="Multiple referred from 5 places.">itemAt</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L140" name="L140"></a> 140         <strong class="reserved">return</strong> (E) items[i];
<a id="L141" name="L141"></a> 141     <em class="brace">}</em>
<a id="L142" name="L142"></a> 142 
<div class="comment">
      Throws NullPointerException if argument is null.
      @param v the element</div>
<a id="L148" name="L148"></a> 148     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11267.html" title="Multiple referred from 30 places.">checkNotNull</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> v) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149         <strong class="reserved">if</strong> (v == <strong class="reserved">null</strong>)
<a id="L150" name="L150"></a> 150             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L151" name="L151"></a> 151     <em class="brace">}</em>
<a id="L152" name="L152"></a> 152 
<div class="comment">
      Inserts element at current put position, advances, and signals.
      Call only when holding lock.</div>
<a id="L157" name="L157"></a> 157     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13893.html" title="Multiple referred from 18 places.">enqueue</a>(E <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L158" name="L158"></a> 158         <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L159" name="L159"></a> 159         <em class="comment">// assert items[putIndex] == null;</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L161" name="L161"></a> 161         items[putIndex] = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L162" name="L162"></a> 162         <strong class="reserved">if</strong> (++putIndex == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L163" name="L163"></a> 163             putIndex = 0;
<a id="L164" name="L164"></a> 164         <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++;
<a id="L165" name="L165"></a> 165         notEmpty.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L166" name="L166"></a> 166     <em class="brace">}</em>
<a id="L167" name="L167"></a> 167 
<div class="comment">
      Extracts element at current take position, advances, and signals.
      Call only when holding lock.</div>
<a id="L172" name="L172"></a> 172     <strong class="reserved">private</strong> E <a href="../R/13228.html" title="Multiple referred from 15 places.">dequeue</a>() <em class="brace">{</em>
<a id="L173" name="L173"></a> 173         <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L174" name="L174"></a> 174         <em class="comment">// assert items[takeIndex] != null;</em>
<a id="L175" name="L175"></a> 175         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L176" name="L176"></a> 176         @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L177" name="L177"></a> 177         E <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (E) items[takeIndex];
<a id="L178" name="L178"></a> 178         items[takeIndex] = <strong class="reserved">null</strong>;
<a id="L179" name="L179"></a> 179         <strong class="reserved">if</strong> (++takeIndex == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L180" name="L180"></a> 180             takeIndex = 0;
<a id="L181" name="L181"></a> 181         <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>--;
<a id="L182" name="L182"></a> 182         <strong class="reserved">if</strong> (itrs != <strong class="reserved">null</strong>)
<a id="L183" name="L183"></a> 183             itrs.<a href="../S/1118.html#L997" title="Defined at 997 in src/java/util/concurrent/ArrayBlockingQueue.java.">elementDequeued</a>();
<a id="L184" name="L184"></a> 184         notFull.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L185" name="L185"></a> 185         <strong class="reserved">return</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L186" name="L186"></a> 186     <em class="brace">}</em>
<a id="L187" name="L187"></a> 187 
<div class="comment">
      Deletes item at array index removeIndex.
      Utility for remove(Object) and iterator.remove.
      Call only when holding lock.</div>
<a id="L193" name="L193"></a> 193     <strong class="reserved">void</strong> <a href="../R/25904.html" title="Multiple referred from 8 places.">removeAt</a>(<strong class="reserved">final</strong> <strong class="reserved">int</strong> removeIndex) <em class="brace">{</em>
<a id="L194" name="L194"></a> 194         <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L195" name="L195"></a> 195         <em class="comment">// assert items[removeIndex] != null;</em>
<a id="L196" name="L196"></a> 196         <em class="comment">// assert removeIndex &gt;= 0 &amp;&amp; removeIndex &lt; items.length;</em>
<a id="L197" name="L197"></a> 197         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L198" name="L198"></a> 198         <strong class="reserved">if</strong> (removeIndex == takeIndex) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199             <em class="comment">// removing front item; just advance</em>
<a id="L200" name="L200"></a> 200             items[takeIndex] = <strong class="reserved">null</strong>;
<a id="L201" name="L201"></a> 201             <strong class="reserved">if</strong> (++takeIndex == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L202" name="L202"></a> 202                 takeIndex = 0;
<a id="L203" name="L203"></a> 203             <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>--;
<a id="L204" name="L204"></a> 204             <strong class="reserved">if</strong> (itrs != <strong class="reserved">null</strong>)
<a id="L205" name="L205"></a> 205                 itrs.<a href="../S/1118.html#L997" title="Defined at 997 in src/java/util/concurrent/ArrayBlockingQueue.java.">elementDequeued</a>();
<a id="L206" name="L206"></a> 206         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L207" name="L207"></a> 207             <em class="comment">// an "interior" remove</em>
<a id="L208" name="L208"></a> 208 
<a id="L209" name="L209"></a> 209             <em class="comment">// slide over all others up through putIndex.</em>
<a id="L210" name="L210"></a> 210             <strong class="reserved">final</strong> <strong class="reserved">int</strong> putIndex = <strong class="reserved">this</strong>.putIndex;
<a id="L211" name="L211"></a> 211             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = removeIndex;;) <em class="brace">{</em>
<a id="L212" name="L212"></a> 212                 <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = i + 1;
<a id="L213" name="L213"></a> 213                 <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L214" name="L214"></a> 214                     <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = 0;
<a id="L215" name="L215"></a> 215                 <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != putIndex) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216                     items[i] = items[<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>];
<a id="L217" name="L217"></a> 217                     i = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L218" name="L218"></a> 218                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L219" name="L219"></a> 219                     items[i] = <strong class="reserved">null</strong>;
<a id="L220" name="L220"></a> 220                     <strong class="reserved">this</strong>.putIndex = i;
<a id="L221" name="L221"></a> 221                     <strong class="reserved">break</strong>;
<a id="L222" name="L222"></a> 222                 <em class="brace">}</em>
<a id="L223" name="L223"></a> 223             <em class="brace">}</em>
<a id="L224" name="L224"></a> 224             <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>--;
<a id="L225" name="L225"></a> 225             <strong class="reserved">if</strong> (itrs != <strong class="reserved">null</strong>)
<a id="L226" name="L226"></a> 226                 itrs.<a href="../D/30998.html" title="Multiple defined in 2 places.">removedAt</a>(removeIndex);
<a id="L227" name="L227"></a> 227         <em class="brace">}</em>
<a id="L228" name="L228"></a> 228         notFull.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L229" name="L229"></a> 229     <em class="brace">}</em>
<a id="L230" name="L230"></a> 230 
<div class="comment">
      Creates an <code>ArrayBlockingQueue</code> with the given (fixed)
      capacity and default access policy.
      @param capacity the capacity of this queue
      @throws IllegalArgumentException if <code>capacity &lt; 1</code></div>
<a id="L238" name="L238"></a> 238     <strong class="reserved">public</strong> ArrayBlockingQueue(<strong class="reserved">int</strong> <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>) <em class="brace">{</em>
<a id="L239" name="L239"></a> 239         <strong class="reserved">this</strong>(<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>, <strong class="reserved">false</strong>);
<a id="L240" name="L240"></a> 240     <em class="brace">}</em>
<a id="L241" name="L241"></a> 241 
<div class="comment">
      Creates an <code>ArrayBlockingQueue</code> with the given (fixed)
      capacity and the specified access policy.
      @param capacity the capacity of this queue
      @param fair if <code>true</code> then queue accesses for threads blocked
             on insertion or removal, are processed in FIFO order;
             if <code>false</code> the access order is unspecified.
      @throws IllegalArgumentException if <code>capacity &lt; 1</code></div>
<a id="L252" name="L252"></a> 252     <strong class="reserved">public</strong> ArrayBlockingQueue(<strong class="reserved">int</strong> <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>, <strong class="reserved">boolean</strong> fair) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253         <strong class="reserved">if</strong> (<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> &lt;= 0)
<a id="L254" name="L254"></a> 254             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L255" name="L255"></a> 255         <strong class="reserved">this</strong>.items = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>];
<a id="L256" name="L256"></a> 256         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">new</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a>(fair);
<a id="L257" name="L257"></a> 257         notEmpty = <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L258" name="L258"></a> 258         notFull =  <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L259" name="L259"></a> 259     <em class="brace">}</em>
<a id="L260" name="L260"></a> 260 
<div class="comment">
      Creates an <code>ArrayBlockingQueue</code> with the given (fixed)
      capacity, the specified access policy and initially containing the
      elements of the given collection,
      added in traversal order of the collection's iterator.
      @param capacity the capacity of this queue
      @param fair if <code>true</code> then queue accesses for threads blocked
             on insertion or removal, are processed in FIFO order;
             if <code>false</code> the access order is unspecified.
      @param c the collection of elements to initially contain
      @throws IllegalArgumentException if <code>capacity</code> is less than
              <code>c.size()</code>, or less than 1.
      @throws NullPointerException if the specified collection or any
              of its elements are null</div>
<a id="L277" name="L277"></a> 277     <strong class="reserved">public</strong> ArrayBlockingQueue(<strong class="reserved">int</strong> <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>, <strong class="reserved">boolean</strong> fair,
<a id="L278" name="L278"></a> 278                               <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">extends</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279         <strong class="reserved">this</strong>(<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>, fair);
<a id="L280" name="L280"></a> 280 
<a id="L281" name="L281"></a> 281         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L282" name="L282"></a> 282         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>(); <em class="comment">// Lock only for visibility, not mutual exclusion</em>
<a id="L283" name="L283"></a> 283         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L284" name="L284"></a> 284             <strong class="reserved">int</strong> i = 0;
<a id="L285" name="L285"></a> 285             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L286" name="L286"></a> 286                 <strong class="reserved">for</strong> (E e : <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L287" name="L287"></a> 287                     <a href="../D/12564.html" title="Multiple defined in 5 places.">checkNotNull</a>(e);
<a id="L288" name="L288"></a> 288                     items[i++] = e;
<a id="L289" name="L289"></a> 289                 <em class="brace">}</em>
<a id="L290" name="L290"></a> 290             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L291" name="L291"></a> 291                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L292" name="L292"></a> 292             <em class="brace">}</em>
<a id="L293" name="L293"></a> 293             <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = i;
<a id="L294" name="L294"></a> 294             putIndex = (i == <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>) ? 0 : i;
<a id="L295" name="L295"></a> 295         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L296" name="L296"></a> 296             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L297" name="L297"></a> 297         <em class="brace">}</em>
<a id="L298" name="L298"></a> 298     <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<div class="comment">
      Inserts the specified element at the tail of this queue if it is
      possible to do so immediately without exceeding the queue's capacity,
      returning <code>true</code> upon success and throwing an
      <code>IllegalStateException</code> if this queue is full.
      @param e the element to add
      @return <code>true</code> (as specified by {@link Collection#add})
      @throws IllegalStateException if this queue is full
      @throws NullPointerException if the specified element is null</div>
<a id="L311" name="L311"></a> 311     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(E e) <em class="brace">{</em>
<a id="L312" name="L312"></a> 312         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(e);
<a id="L313" name="L313"></a> 313     <em class="brace">}</em>
<a id="L314" name="L314"></a> 314 
<div class="comment">
      Inserts the specified element at the tail of this queue if it is
      possible to do so immediately without exceeding the queue's capacity,
      returning <code>true</code> upon success and <code>false</code> if this queue
      is full.  This method is generally preferable to method {@link #add},
      which can fail to insert an element only by throwing an exception.
      @throws NullPointerException if the specified element is null</div>
<a id="L324" name="L324"></a> 324     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(E e) <em class="brace">{</em>
<a id="L325" name="L325"></a> 325         <a href="../D/12564.html" title="Multiple defined in 5 places.">checkNotNull</a>(e);
<a id="L326" name="L326"></a> 326         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L327" name="L327"></a> 327         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L328" name="L328"></a> 328         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L329" name="L329"></a> 329             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L330" name="L330"></a> 330                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L331" name="L331"></a> 331             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L332" name="L332"></a> 332                 <a href="../D/15582.html" title="Multiple defined in 9 places.">enqueue</a>(e);
<a id="L333" name="L333"></a> 333                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L334" name="L334"></a> 334             <em class="brace">}</em>
<a id="L335" name="L335"></a> 335         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L336" name="L336"></a> 336             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L337" name="L337"></a> 337         <em class="brace">}</em>
<a id="L338" name="L338"></a> 338     <em class="brace">}</em>
<a id="L339" name="L339"></a> 339 
<div class="comment">
      Inserts the specified element at the tail of this queue, waiting
      for space to become available if the queue is full.
      @throws InterruptedException {@inheritDoc}
      @throws NullPointerException {@inheritDoc}</div>
<a id="L347" name="L347"></a> 347     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(E e) <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L348" name="L348"></a> 348         <a href="../D/12564.html" title="Multiple defined in 5 places.">checkNotNull</a>(e);
<a id="L349" name="L349"></a> 349         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L350" name="L350"></a> 350         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L351" name="L351"></a> 351         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L352" name="L352"></a> 352             <strong class="reserved">while</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L353" name="L353"></a> 353                 notFull.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L354" name="L354"></a> 354             <a href="../D/15582.html" title="Multiple defined in 9 places.">enqueue</a>(e);
<a id="L355" name="L355"></a> 355         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L356" name="L356"></a> 356             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L357" name="L357"></a> 357         <em class="brace">}</em>
<a id="L358" name="L358"></a> 358     <em class="brace">}</em>
<a id="L359" name="L359"></a> 359 
<div class="comment">
      Inserts the specified element at the tail of this queue, waiting
      up to the specified wait time for space to become available if
      the queue is full.
      @throws InterruptedException {@inheritDoc}
      @throws NullPointerException {@inheritDoc}</div>
<a id="L368" name="L368"></a> 368     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(E e, <strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit)
<a id="L369" name="L369"></a> 369         <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L370" name="L370"></a> 370 
<a id="L371" name="L371"></a> 371         <a href="../D/12564.html" title="Multiple defined in 5 places.">checkNotNull</a>(e);
<a id="L372" name="L372"></a> 372         <strong class="reserved">long</strong> nanos = unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout);
<a id="L373" name="L373"></a> 373         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L374" name="L374"></a> 374         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L375" name="L375"></a> 375         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L376" name="L376"></a> 376             <strong class="reserved">while</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377                 <strong class="reserved">if</strong> (nanos &lt;= 0)
<a id="L378" name="L378"></a> 378                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L379" name="L379"></a> 379                 nanos = notFull.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L380" name="L380"></a> 380             <em class="brace">}</em>
<a id="L381" name="L381"></a> 381             <a href="../D/15582.html" title="Multiple defined in 9 places.">enqueue</a>(e);
<a id="L382" name="L382"></a> 382             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L383" name="L383"></a> 383         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L384" name="L384"></a> 384             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L385" name="L385"></a> 385         <em class="brace">}</em>
<a id="L386" name="L386"></a> 386     <em class="brace">}</em>
<a id="L387" name="L387"></a> 387 
<a id="L388" name="L388"></a> 388     <strong class="reserved">public</strong> E <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>() <em class="brace">{</em>
<a id="L389" name="L389"></a> 389         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L390" name="L390"></a> 390         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L391" name="L391"></a> 391         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <strong class="reserved">return</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0) ? <strong class="reserved">null</strong> : <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>();
<a id="L393" name="L393"></a> 393         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L394" name="L394"></a> 394             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L395" name="L395"></a> 395         <em class="brace">}</em>
<a id="L396" name="L396"></a> 396     <em class="brace">}</em>
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398     <strong class="reserved">public</strong> E <a href="../R/29108.html" title="Multiple referred from 11 places.">take</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L399" name="L399"></a> 399         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L400" name="L400"></a> 400         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L401" name="L401"></a> 401         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L402" name="L402"></a> 402             <strong class="reserved">while</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0)
<a id="L403" name="L403"></a> 403                 notEmpty.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L404" name="L404"></a> 404             <strong class="reserved">return</strong> <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>();
<a id="L405" name="L405"></a> 405         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L406" name="L406"></a> 406             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L407" name="L407"></a> 407         <em class="brace">}</em>
<a id="L408" name="L408"></a> 408     <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410     <strong class="reserved">public</strong> E <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>(<strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L411" name="L411"></a> 411         <strong class="reserved">long</strong> nanos = unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout);
<a id="L412" name="L412"></a> 412         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L413" name="L413"></a> 413         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L414" name="L414"></a> 414         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <strong class="reserved">while</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416                 <strong class="reserved">if</strong> (nanos &lt;= 0)
<a id="L417" name="L417"></a> 417                     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L418" name="L418"></a> 418                 nanos = notEmpty.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L419" name="L419"></a> 419             <em class="brace">}</em>
<a id="L420" name="L420"></a> 420             <strong class="reserved">return</strong> <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>();
<a id="L421" name="L421"></a> 421         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L422" name="L422"></a> 422             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L423" name="L423"></a> 423         <em class="brace">}</em>
<a id="L424" name="L424"></a> 424     <em class="brace">}</em>
<a id="L425" name="L425"></a> 425 
<a id="L426" name="L426"></a> 426     <strong class="reserved">public</strong> E <a href="../R/24689.html" title="Multiple referred from 168 places.">peek</a>() <em class="brace">{</em>
<a id="L427" name="L427"></a> 427         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L428" name="L428"></a> 428         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L429" name="L429"></a> 429         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L430" name="L430"></a> 430             <strong class="reserved">return</strong> <a href="../S/1118.html#L139" title="Defined at 139 in src/java/util/concurrent/ArrayBlockingQueue.java.">itemAt</a>(takeIndex); <em class="comment">// null when queue is empty</em>
<a id="L431" name="L431"></a> 431         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L432" name="L432"></a> 432             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L433" name="L433"></a> 433         <em class="brace">}</em>
<a id="L434" name="L434"></a> 434     <em class="brace">}</em>
<a id="L435" name="L435"></a> 435 
<a id="L436" name="L436"></a> 436     <em class="comment">// this doc comment is overridden to remove the reference to collections</em>
<a id="L437" name="L437"></a> 437     <em class="comment">// greater in size than Integer.MAX_VALUE</em>
<div class="comment">
      Returns the number of elements in this queue.
      @return the number of elements in this queue</div>
<a id="L443" name="L443"></a> 443     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L444" name="L444"></a> 444         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L445" name="L445"></a> 445         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L446" name="L446"></a> 446         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L447" name="L447"></a> 447             <strong class="reserved">return</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L448" name="L448"></a> 448         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L449" name="L449"></a> 449             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L450" name="L450"></a> 450         <em class="brace">}</em>
<a id="L451" name="L451"></a> 451     <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453     <em class="comment">// this doc comment is a modified copy of the inherited doc comment,</em>
<a id="L454" name="L454"></a> 454     <em class="comment">// without the reference to unlimited queues.</em>
<div class="comment">
      Returns the number of additional elements that this queue can ideally
      (in the absence of memory or resource constraints) accept without
      blocking. This is always equal to the initial capacity of this queue
      less the current <code>size</code> of this queue.
      <p>Note that you <em>cannot</em> always tell if an attempt to insert
      an element will succeed by inspecting <code>remainingCapacity</code>
      because it may be the case that another thread is about to
      insert or remove an element.</p></div>
<a id="L466" name="L466"></a> 466     <strong class="reserved">public</strong> <strong class="reserved">int</strong> remainingCapacity() <em class="brace">{</em>
<a id="L467" name="L467"></a> 467         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L468" name="L468"></a> 468         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L469" name="L469"></a> 469         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L470" name="L470"></a> 470             <strong class="reserved">return</strong> items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L471" name="L471"></a> 471         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L472" name="L472"></a> 472             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L473" name="L473"></a> 473         <em class="brace">}</em>
<a id="L474" name="L474"></a> 474     <em class="brace">}</em>
<a id="L475" name="L475"></a> 475 
<div class="comment">
      Removes a single instance of the specified element from this queue,
      if it is present.  More formally, removes an element <code>e</code> such
      that <code>o.equals(e)</code>, if this queue contains one or more such
      elements.
      Returns <code>true</code> if this queue contained the specified element
      (or equivalently, if this queue changed as a result of the call).
      <p>Removal of interior elements in circular array based queues
      is an intrinsically slow and disruptive operation, so should
      be undertaken only in exceptional circumstances, ideally
      only when the queue is known not to be accessible by other
      threads.
      @param o element to be removed from this queue, if present
      @return <code>true</code> if this queue changed as a result of the call</p></div>
<a id="L493" name="L493"></a> 493     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L494" name="L494"></a> 494         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L495" name="L495"></a> 495         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L496" name="L496"></a> 496         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L497" name="L497"></a> 497         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L498" name="L498"></a> 498         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L499" name="L499"></a> 499             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; 0) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> putIndex = <strong class="reserved">this</strong>.putIndex;
<a id="L501" name="L501"></a> 501                 <strong class="reserved">int</strong> i = takeIndex;
<a id="L502" name="L502"></a> 502                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L503" name="L503"></a> 503                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(items[i])) <em class="brace">{</em>
<a id="L504" name="L504"></a> 504                         <a href="../D/30707.html" title="Multiple defined in 3 places.">removeAt</a>(i);
<a id="L505" name="L505"></a> 505                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L506" name="L506"></a> 506                     <em class="brace">}</em>
<a id="L507" name="L507"></a> 507                     <strong class="reserved">if</strong> (++i == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L508" name="L508"></a> 508                         i = 0;
<a id="L509" name="L509"></a> 509                 <em class="brace">}</em> <strong class="reserved">while</strong> (i != putIndex);
<a id="L510" name="L510"></a> 510             <em class="brace">}</em>
<a id="L511" name="L511"></a> 511             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L512" name="L512"></a> 512         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L513" name="L513"></a> 513             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L514" name="L514"></a> 514         <em class="brace">}</em>
<a id="L515" name="L515"></a> 515     <em class="brace">}</em>
<a id="L516" name="L516"></a> 516 
<div class="comment">
      Returns <code>true</code> if this queue contains the specified element.
      More formally, returns <code>true</code> if and only if this queue contains
      at least one element <code>e</code> such that <code>o.equals(e)</code>.
      @param o object to be checked for containment in this queue
      @return <code>true</code> if this queue contains the specified element</div>
<a id="L525" name="L525"></a> 525     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L526" name="L526"></a> 526         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L527" name="L527"></a> 527         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L528" name="L528"></a> 528         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L529" name="L529"></a> 529         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L530" name="L530"></a> 530         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L531" name="L531"></a> 531             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; 0) <em class="brace">{</em>
<a id="L532" name="L532"></a> 532                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> putIndex = <strong class="reserved">this</strong>.putIndex;
<a id="L533" name="L533"></a> 533                 <strong class="reserved">int</strong> i = takeIndex;
<a id="L534" name="L534"></a> 534                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L535" name="L535"></a> 535                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(items[i]))
<a id="L536" name="L536"></a> 536                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L537" name="L537"></a> 537                     <strong class="reserved">if</strong> (++i == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L538" name="L538"></a> 538                         i = 0;
<a id="L539" name="L539"></a> 539                 <em class="brace">}</em> <strong class="reserved">while</strong> (i != putIndex);
<a id="L540" name="L540"></a> 540             <em class="brace">}</em>
<a id="L541" name="L541"></a> 541             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L542" name="L542"></a> 542         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L543" name="L543"></a> 543             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L544" name="L544"></a> 544         <em class="brace">}</em>
<a id="L545" name="L545"></a> 545     <em class="brace">}</em>
<a id="L546" name="L546"></a> 546 
<div class="comment">
      Returns an array containing all of the elements in this queue, in
      proper sequence.
      <p>The returned array will be "safe" in that no references to it are
      maintained by this queue.  (In other words, this method must allocate
      a new array).  The caller is thus free to modify the returned array.
      </p><p>This method acts as bridge between array-based and collection-based
      APIs.
      @return an array containing all of the elements in this queue</p></div>
<a id="L560" name="L560"></a> 560     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>() <em class="brace">{</em>
<a id="L561" name="L561"></a> 561         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L562" name="L562"></a> 562         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L563" name="L563"></a> 563         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L564" name="L564"></a> 564         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L565" name="L565"></a> 565             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <strong class="reserved">this</strong>.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L566" name="L566"></a> 566             <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>];
<a id="L567" name="L567"></a> 567             <strong class="reserved">int</strong> n = items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - takeIndex;
<a id="L568" name="L568"></a> 568             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt;= n)
<a id="L569" name="L569"></a> 569                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(items, takeIndex, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L570" name="L570"></a> 570             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L571" name="L571"></a> 571                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(items, takeIndex, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0, n);
<a id="L572" name="L572"></a> 572                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(items, 0, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, n, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> - n);
<a id="L573" name="L573"></a> 573             <em class="brace">}</em>
<a id="L574" name="L574"></a> 574         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L575" name="L575"></a> 575             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L576" name="L576"></a> 576         <em class="brace">}</em>
<a id="L577" name="L577"></a> 577         <strong class="reserved">return</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L578" name="L578"></a> 578     <em class="brace">}</em>
<a id="L579" name="L579"></a> 579 
<div class="comment">
      Returns an array containing all of the elements in this queue, in
      proper sequence; the runtime type of the returned array is that of
      the specified array.  If the queue fits in the specified array, it
      is returned therein.  Otherwise, a new array is allocated with the
      runtime type of the specified array and the size of this queue.
      <p>If this queue fits in the specified array with room to spare
      (i.e., the array has more elements than this queue), the element in
      the array immediately following the end of the queue is set to
      <code>null</code>.
      </p><p>Like the {@link #toArray()} method, this method acts as bridge between
      array-based and collection-based APIs.  Further, this method allows
      precise control over the runtime type of the output array, and may,
      under certain circumstances, be used to save allocation costs.
      </p><p>Suppose <code>x</code> is a queue known to contain only strings.
      The following code can be used to dump the queue into a newly
      allocated array of <code>String</code>:
       </p><pre> <code>String[] y = x.toArray(new String[0]);</code></pre>
      Note that <code>toArray(new Object[0])</code> is identical in function to
      <code>toArray()</code>.
      @param a the array into which the elements of the queue are to
               be stored, if it is big enough; otherwise, a new array of the
               same runtime type is allocated for this purpose
      @return an array containing all of the elements in this queue
      @throws ArrayStoreException if the runtime type of the specified array
              is not a supertype of the runtime type of every element in
              this queue
      @throws NullPointerException if the specified array is null</div>
<a id="L615" name="L615"></a> 615     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L616" name="L616"></a> 616     <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L618" name="L618"></a> 618         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L619" name="L619"></a> 619         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L620" name="L620"></a> 620         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L621" name="L621"></a> 621             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <strong class="reserved">this</strong>.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L622" name="L622"></a> 622             <strong class="reserved">final</strong> <strong class="reserved">int</strong> len = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L623" name="L623"></a> 623             <strong class="reserved">if</strong> (len &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>)
<a id="L624" name="L624"></a> 624                 <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[])<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.reflect.<a href="../D/487.html" title="Multiple defined in 2 places.">Array</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(
<a id="L625" name="L625"></a> 625                     <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/17880.html" title="Multiple defined in 2 places.">getComponentType</a>(), <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L626" name="L626"></a> 626             <strong class="reserved">int</strong> n = items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - takeIndex;
<a id="L627" name="L627"></a> 627             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt;= n)
<a id="L628" name="L628"></a> 628                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(items, takeIndex, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L629" name="L629"></a> 629             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L630" name="L630"></a> 630                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(items, takeIndex, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0, n);
<a id="L631" name="L631"></a> 631                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(items, 0, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, n, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> - n);
<a id="L632" name="L632"></a> 632             <em class="brace">}</em>
<a id="L633" name="L633"></a> 633             <strong class="reserved">if</strong> (len &gt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>)
<a id="L634" name="L634"></a> 634                 <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] = <strong class="reserved">null</strong>;
<a id="L635" name="L635"></a> 635         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L636" name="L636"></a> 636             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L637" name="L637"></a> 637         <em class="brace">}</em>
<a id="L638" name="L638"></a> 638         <strong class="reserved">return</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L639" name="L639"></a> 639     <em class="brace">}</em>
<a id="L640" name="L640"></a> 640 
<a id="L641" name="L641"></a> 641     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L642" name="L642"></a> 642         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L643" name="L643"></a> 643         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L644" name="L644"></a> 644         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L645" name="L645"></a> 645             <strong class="reserved">int</strong> k = <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L646" name="L646"></a> 646             <strong class="reserved">if</strong> (k == 0)
<a id="L647" name="L647"></a> 647                 <strong class="reserved">return</strong> "[]";
<a id="L648" name="L648"></a> 648 
<a id="L649" name="L649"></a> 649             <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L650" name="L650"></a> 650             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L651" name="L651"></a> 651             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('[');
<a id="L652" name="L652"></a> 652             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = takeIndex; ; ) <em class="brace">{</em>
<a id="L653" name="L653"></a> 653                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e = items[i];
<a id="L654" name="L654"></a> 654                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(e == <strong class="reserved">this</strong> ? "(this Collection)" : e);
<a id="L655" name="L655"></a> 655                 <strong class="reserved">if</strong> (--k == 0)
<a id="L656" name="L656"></a> 656                     <strong class="reserved">return</strong> sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(']').<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L657" name="L657"></a> 657                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(',').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(' ');
<a id="L658" name="L658"></a> 658                 <strong class="reserved">if</strong> (++i == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L659" name="L659"></a> 659                     i = 0;
<a id="L660" name="L660"></a> 660             <em class="brace">}</em>
<a id="L661" name="L661"></a> 661         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L662" name="L662"></a> 662             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L663" name="L663"></a> 663         <em class="brace">}</em>
<a id="L664" name="L664"></a> 664     <em class="brace">}</em>
<a id="L665" name="L665"></a> 665 
<div class="comment">
      Atomically removes all of the elements from this queue.
      The queue will be empty after this call returns.</div>
<a id="L670" name="L670"></a> 670     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L671" name="L671"></a> 671         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L672" name="L672"></a> 672         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L673" name="L673"></a> 673         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L674" name="L674"></a> 674         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L675" name="L675"></a> 675             <strong class="reserved">int</strong> k = <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L676" name="L676"></a> 676             <strong class="reserved">if</strong> (k &gt; 0) <em class="brace">{</em>
<a id="L677" name="L677"></a> 677                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> putIndex = <strong class="reserved">this</strong>.putIndex;
<a id="L678" name="L678"></a> 678                 <strong class="reserved">int</strong> i = takeIndex;
<a id="L679" name="L679"></a> 679                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                     items[i] = <strong class="reserved">null</strong>;
<a id="L681" name="L681"></a> 681                     <strong class="reserved">if</strong> (++i == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L682" name="L682"></a> 682                         i = 0;
<a id="L683" name="L683"></a> 683                 <em class="brace">}</em> <strong class="reserved">while</strong> (i != putIndex);
<a id="L684" name="L684"></a> 684                 takeIndex = putIndex;
<a id="L685" name="L685"></a> 685                 <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0;
<a id="L686" name="L686"></a> 686                 <strong class="reserved">if</strong> (itrs != <strong class="reserved">null</strong>)
<a id="L687" name="L687"></a> 687                     itrs.<a href="../S/1118.html#L981" title="Defined at 981 in src/java/util/concurrent/ArrayBlockingQueue.java.">queueIsEmpty</a>();
<a id="L688" name="L688"></a> 688                 <strong class="reserved">for</strong> (; k &gt; 0 &amp;&amp; <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/24209.html" title="Multiple defined in 6 places.">hasWaiters</a>(notFull); k--)
<a id="L689" name="L689"></a> 689                     notFull.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L690" name="L690"></a> 690             <em class="brace">}</em>
<a id="L691" name="L691"></a> 691         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L692" name="L692"></a> 692             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L693" name="L693"></a> 693         <em class="brace">}</em>
<a id="L694" name="L694"></a> 694     <em class="brace">}</em>
<a id="L695" name="L695"></a> 695 
<div class="comment">
      @throws UnsupportedOperationException {@inheritDoc}
      @throws ClassCastException            {@inheritDoc}
      @throws NullPointerException          {@inheritDoc}
      @throws IllegalArgumentException      {@inheritDoc}</div>
<a id="L702" name="L702"></a> 702     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703         <strong class="reserved">return</strong> <a href="../D/15160.html" title="Multiple defined in 18 places.">drainTo</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE);
<a id="L704" name="L704"></a> 704     <em class="brace">}</em>
<a id="L705" name="L705"></a> 705 
<div class="comment">
      @throws UnsupportedOperationException {@inheritDoc}
      @throws ClassCastException            {@inheritDoc}
      @throws NullPointerException          {@inheritDoc}
      @throws IllegalArgumentException      {@inheritDoc}</div>
<a id="L712" name="L712"></a> 712     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <strong class="reserved">int</strong> maxElements) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713         <a href="../D/12564.html" title="Multiple defined in 5 places.">checkNotNull</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L714" name="L714"></a> 714         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">this</strong>)
<a id="L715" name="L715"></a> 715             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L716" name="L716"></a> 716         <strong class="reserved">if</strong> (maxElements &lt;= 0)
<a id="L717" name="L717"></a> 717             <strong class="reserved">return</strong> 0;
<a id="L718" name="L718"></a> 718         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] items = <strong class="reserved">this</strong>.items;
<a id="L719" name="L719"></a> 719         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L720" name="L720"></a> 720         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L721" name="L721"></a> 721         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L722" name="L722"></a> 722             <strong class="reserved">int</strong> n = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(maxElements, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L723" name="L723"></a> 723             <strong class="reserved">int</strong> <a href="../D/35207.html" title="Multiple defined in 13 places.">take</a> = takeIndex;
<a id="L724" name="L724"></a> 724             <strong class="reserved">int</strong> i = 0;
<a id="L725" name="L725"></a> 725             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L726" name="L726"></a> 726                 <strong class="reserved">while</strong> (i &lt; n) <em class="brace">{</em>
<a id="L727" name="L727"></a> 727                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L728" name="L728"></a> 728                     E <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (E) items[<a href="../D/35207.html" title="Multiple defined in 13 places.">take</a>];
<a id="L729" name="L729"></a> 729                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L730" name="L730"></a> 730                     items[<a href="../D/35207.html" title="Multiple defined in 13 places.">take</a>] = <strong class="reserved">null</strong>;
<a id="L731" name="L731"></a> 731                     <strong class="reserved">if</strong> (++<a href="../D/35207.html" title="Multiple defined in 13 places.">take</a> == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L732" name="L732"></a> 732                         <a href="../D/35207.html" title="Multiple defined in 13 places.">take</a> = 0;
<a id="L733" name="L733"></a> 733                     i++;
<a id="L734" name="L734"></a> 734                 <em class="brace">}</em>
<a id="L735" name="L735"></a> 735                 <strong class="reserved">return</strong> n;
<a id="L736" name="L736"></a> 736             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L737" name="L737"></a> 737                 <em class="comment">// Restore invariants even if c.add() threw</em>
<a id="L738" name="L738"></a> 738                 <strong class="reserved">if</strong> (i &gt; 0) <em class="brace">{</em>
<a id="L739" name="L739"></a> 739                     <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> -= i;
<a id="L740" name="L740"></a> 740                     takeIndex = <a href="../D/35207.html" title="Multiple defined in 13 places.">take</a>;
<a id="L741" name="L741"></a> 741                     <strong class="reserved">if</strong> (itrs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L742" name="L742"></a> 742                         <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0)
<a id="L743" name="L743"></a> 743                             itrs.<a href="../S/1118.html#L981" title="Defined at 981 in src/java/util/concurrent/ArrayBlockingQueue.java.">queueIsEmpty</a>();
<a id="L744" name="L744"></a> 744                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (i &gt; <a href="../D/35207.html" title="Multiple defined in 13 places.">take</a>)
<a id="L745" name="L745"></a> 745                             itrs.<a href="../D/35210.html" title="Multiple defined in 2 places.">takeIndexWrapped</a>();
<a id="L746" name="L746"></a> 746                     <em class="brace">}</em>
<a id="L747" name="L747"></a> 747                     <strong class="reserved">for</strong> (; i &gt; 0 &amp;&amp; <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/24209.html" title="Multiple defined in 6 places.">hasWaiters</a>(notFull); i--)
<a id="L748" name="L748"></a> 748                         notFull.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L749" name="L749"></a> 749                 <em class="brace">}</em>
<a id="L750" name="L750"></a> 750             <em class="brace">}</em>
<a id="L751" name="L751"></a> 751         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L752" name="L752"></a> 752             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L753" name="L753"></a> 753         <em class="brace">}</em>
<a id="L754" name="L754"></a> 754     <em class="brace">}</em>
<a id="L755" name="L755"></a> 755 
<div class="comment">
      Returns an iterator over the elements in this queue in proper sequence.
      The elements will be returned in order from first (head) to last (tail).
      <p>The returned iterator is
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      @return an iterator over the elements in this queue in proper sequence</p></div>
<a id="L765" name="L765"></a> 765     <strong class="reserved">public</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L766" name="L766"></a> 766         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a>();
<a id="L767" name="L767"></a> 767     <em class="brace">}</em>
<a id="L768" name="L768"></a> 768 
<div class="comment">
      Shared data between iterators and their queue, allowing queue
      modifications to update iterators when elements are removed.
      This adds a lot of complexity for the sake of correctly
      handling some uncommon operations, but the combination of
      circular-arrays and supporting interior removes (i.e., those
      not at head) would cause iterators to sometimes lose their
      places and/or (re)report elements they shouldn't.  To avoid
      this, when a queue has one or more iterators, it keeps iterator
      state consistent by:
      (1) keeping track of the number of "cycles", that is, the
          number of times takeIndex has wrapped around to 0.
      (2) notifying all iterators via the callback removedAt whenever
          an interior element is removed (and thus other elements may
          be shifted).
      These suffice to eliminate iterator inconsistencies, but
      unfortunately add the secondary responsibility of maintaining
      the list of iterators.  We track all active iterators in a
      simple linked list (accessed only when the queue's lock is
      held) of weak references to Itr.  The list is cleaned up using
      3 different mechanisms:
      (1) Whenever a new iterator is created, do some O(1) checking for
          stale list elements.
      (2) Whenever takeIndex wraps around to 0, check for iterators
          that have been unused for more than one wrap-around cycle.
      (3) Whenever the queue becomes empty, all iterators are notified
          and this entire data structure is discarded.
      So in addition to the removedAt callback that is necessary for
      correctness, iterators have the shutdown and takeIndexWrapped
      callbacks that help remove stale iterators from the list.
      Whenever a list element is examined, it is expunged if either
      the GC has determined that the iterator is discarded, or if the
      iterator reports that it is "detached" (does not need any
      further state updates).  Overhead is maximal when takeIndex
      never advances, iterators are discarded before they are
      exhausted, and all removals are interior removes, in which case
      all stale iterators are discovered by the GC.  But even in this
      case we don't increase the amortized complexity.
      Care must be taken to keep list sweeping methods from
      reentrantly invoking another such method, causing subtle
      corruption bugs.</div>
<a id="L820" name="L820"></a> 820     <strong class="reserved">class</strong> <a href="../R/4057.html" title="Multiple referred from 2 places.">Itrs</a> <em class="brace">{</em>
<a id="L821" name="L821"></a> 821 
<div class="comment">
          Node in a linked list of weak iterator references.</div>
<a id="L825" name="L825"></a> 825         <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/5542.html" title="Multiple referred from 4060 places.">Node</a> <strong class="reserved">extends</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a>&gt; <em class="brace">{</em>
<a id="L826" name="L826"></a> 826             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>(<a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>, Node <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L829" name="L829"></a> 829                 <strong class="reserved">super</strong>(<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>);
<a id="L830" name="L830"></a> 830                 <strong class="reserved">this</strong>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L831" name="L831"></a> 831             <em class="brace">}</em>
<a id="L832" name="L832"></a> 832         <em class="brace">}</em>
<a id="L833" name="L833"></a> 833 
<div class="comment">
         /** Incremented whenever takeIndex wraps around to 0 */</div>
<a id="L835" name="L835"></a> 835         <strong class="reserved">int</strong> cycles = 0;
<a id="L836" name="L836"></a> 836 
<div class="comment">
         /** Linked list of weak iterator references */</div>
<a id="L838" name="L838"></a> 838         <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> head;
<a id="L839" name="L839"></a> 839 
<div class="comment">
         /** Used to expunge stale iterators */</div>
<a id="L841" name="L841"></a> 841         <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sweeper = <strong class="reserved">null</strong>;
<a id="L842" name="L842"></a> 842 
<a id="L843" name="L843"></a> 843         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SHORT_SWEEP_PROBES = 4;
<a id="L844" name="L844"></a> 844         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> LONG_SWEEP_PROBES = 16;
<a id="L845" name="L845"></a> 845 
<a id="L846" name="L846"></a> 846         Itrs(<a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> initial) <em class="brace">{</em>
<a id="L847" name="L847"></a> 847             <a href="../D/30517.html" title="Multiple defined in 40 places.">register</a>(initial);
<a id="L848" name="L848"></a> 848         <em class="brace">}</em>
<a id="L849" name="L849"></a> 849 
<div class="comment">
          Sweeps itrs, looking for and expunging stale iterators.
          If at least one was found, tries harder to find more.
          Called only from iterating thread.
          @param tryHarder whether to start in try-harder mode, because
          there is known to be at least one iterator to collect</div>
<a id="L858" name="L858"></a> 858         <strong class="reserved">void</strong> <a href="../R/13448.html" title="Multiple referred from 2 places.">doSomeSweeping</a>(<strong class="reserved">boolean</strong> tryHarder) <em class="brace">{</em>
<a id="L859" name="L859"></a> 859             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L860" name="L860"></a> 860             <em class="comment">// assert head != null;</em>
<a id="L861" name="L861"></a> 861             <strong class="reserved">int</strong> probes = tryHarder ? LONG_SWEEP_PROBES : SHORT_SWEEP_PROBES;
<a id="L862" name="L862"></a> 862             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>, p;
<a id="L863" name="L863"></a> 863             <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sweeper = <strong class="reserved">this</strong>.sweeper;
<a id="L864" name="L864"></a> 864             <strong class="reserved">boolean</strong> passedGo;   <em class="comment">// to limit search to one full sweep</em>
<a id="L865" name="L865"></a> 865 
<a id="L866" name="L866"></a> 866             <strong class="reserved">if</strong> (sweeper == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L867" name="L867"></a> 867                 <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <strong class="reserved">null</strong>;
<a id="L868" name="L868"></a> 868                 p = head;
<a id="L869" name="L869"></a> 869                 passedGo = <strong class="reserved">true</strong>;
<a id="L870" name="L870"></a> 870             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L871" name="L871"></a> 871                 <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = sweeper;
<a id="L872" name="L872"></a> 872                 p = <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L873" name="L873"></a> 873                 passedGo = <strong class="reserved">false</strong>;
<a id="L874" name="L874"></a> 874             <em class="brace">}</em>
<a id="L875" name="L875"></a> 875 
<a id="L876" name="L876"></a> 876             <strong class="reserved">for</strong> (; probes &gt; 0; probes--) <em class="brace">{</em>
<a id="L877" name="L877"></a> 877                 <strong class="reserved">if</strong> (p == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L878" name="L878"></a> 878                     <strong class="reserved">if</strong> (passedGo)
<a id="L879" name="L879"></a> 879                         <strong class="reserved">break</strong>;
<a id="L880" name="L880"></a> 880                     <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <strong class="reserved">null</strong>;
<a id="L881" name="L881"></a> 881                     p = head;
<a id="L882" name="L882"></a> 882                     passedGo = <strong class="reserved">true</strong>;
<a id="L883" name="L883"></a> 883                 <em class="brace">}</em>
<a id="L884" name="L884"></a> 884                 <strong class="reserved">final</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> it = p.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L885" name="L885"></a> 885                 <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L886" name="L886"></a> 886                 <strong class="reserved">if</strong> (it == <strong class="reserved">null</strong> || it.<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>()) <em class="brace">{</em>
<a id="L887" name="L887"></a> 887                     <em class="comment">// found a discarded/exhausted iterator</em>
<a id="L888" name="L888"></a> 888                     probes = LONG_SWEEP_PROBES; <em class="comment">// "try harder"</em>
<a id="L889" name="L889"></a> 889                     <em class="comment">// unlink p</em>
<a id="L890" name="L890"></a> 890                     p.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L891" name="L891"></a> 891                     p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L892" name="L892"></a> 892                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L893" name="L893"></a> 893                         head = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L894" name="L894"></a> 894                         <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L895" name="L895"></a> 895                             <em class="comment">// We've run out of iterators to track; retire</em>
<a id="L896" name="L896"></a> 896                             itrs = <strong class="reserved">null</strong>;
<a id="L897" name="L897"></a> 897                             <strong class="reserved">return</strong>;
<a id="L898" name="L898"></a> 898                         <em class="brace">}</em>
<a id="L899" name="L899"></a> 899                     <em class="brace">}</em>
<a id="L900" name="L900"></a> 900                     <strong class="reserved">else</strong>
<a id="L901" name="L901"></a> 901                         <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L902" name="L902"></a> 902                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L903" name="L903"></a> 903                     <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = p;
<a id="L904" name="L904"></a> 904                 <em class="brace">}</em>
<a id="L905" name="L905"></a> 905                 p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L906" name="L906"></a> 906             <em class="brace">}</em>
<a id="L907" name="L907"></a> 907 
<a id="L908" name="L908"></a> 908             <strong class="reserved">this</strong>.sweeper = (p == <strong class="reserved">null</strong>) ? <strong class="reserved">null</strong> : <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>;
<a id="L909" name="L909"></a> 909         <em class="brace">}</em>
<a id="L910" name="L910"></a> 910 
<div class="comment">
          Adds a new iterator to the linked list of tracked iterators.</div>
<a id="L914" name="L914"></a> 914         <strong class="reserved">void</strong> <a href="../R/25749.html" title="Multiple referred from 136 places.">register</a>(<a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> itr) <em class="brace">{</em>
<a id="L915" name="L915"></a> 915             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L916" name="L916"></a> 916             head = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>(itr, head);
<a id="L917" name="L917"></a> 917         <em class="brace">}</em>
<a id="L918" name="L918"></a> 918 
<div class="comment">
          Called whenever takeIndex wraps around to 0.
          Notifies all iterators, and expunges any that are now stale.</div>
<a id="L924" name="L924"></a> 924         <strong class="reserved">void</strong> <a href="../R/29111.html" title="Multiple referred from 3 places.">takeIndexWrapped</a>() <em class="brace">{</em>
<a id="L925" name="L925"></a> 925             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L926" name="L926"></a> 926             cycles++;
<a id="L927" name="L927"></a> 927             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <strong class="reserved">null</strong>, p = head; p != <strong class="reserved">null</strong>;) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928                 <strong class="reserved">final</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> it = p.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L929" name="L929"></a> 929                 <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L930" name="L930"></a> 930                 <strong class="reserved">if</strong> (it == <strong class="reserved">null</strong> || it.<a href="../D/35210.html" title="Multiple defined in 2 places.">takeIndexWrapped</a>()) <em class="brace">{</em>
<a id="L931" name="L931"></a> 931                     <em class="comment">// unlink p</em>
<a id="L932" name="L932"></a> 932                     <em class="comment">// assert it == null || it.isDetached();</em>
<a id="L933" name="L933"></a> 933                     p.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L934" name="L934"></a> 934                     p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L935" name="L935"></a> 935                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <strong class="reserved">null</strong>)
<a id="L936" name="L936"></a> 936                         head = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L937" name="L937"></a> 937                     <strong class="reserved">else</strong>
<a id="L938" name="L938"></a> 938                         <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L939" name="L939"></a> 939                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L940" name="L940"></a> 940                     <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = p;
<a id="L941" name="L941"></a> 941                 <em class="brace">}</em>
<a id="L942" name="L942"></a> 942                 p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L943" name="L943"></a> 943             <em class="brace">}</em>
<a id="L944" name="L944"></a> 944             <strong class="reserved">if</strong> (head == <strong class="reserved">null</strong>)   <em class="comment">// no more iterators to track</em>
<a id="L945" name="L945"></a> 945                 itrs = <strong class="reserved">null</strong>;
<a id="L946" name="L946"></a> 946         <em class="brace">}</em>
<a id="L947" name="L947"></a> 947 
<div class="comment">
          Called whenever an interior remove (not at takeIndex) occurred.
          Notifies all iterators, and expunges any that are now stale.</div>
<a id="L953" name="L953"></a> 953         <strong class="reserved">void</strong> <a href="../R/26105.html" title="Multiple referred from 2 places.">removedAt</a>(<strong class="reserved">int</strong> removedIndex) <em class="brace">{</em>
<a id="L954" name="L954"></a> 954             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <strong class="reserved">null</strong>, p = head; p != <strong class="reserved">null</strong>;) <em class="brace">{</em>
<a id="L955" name="L955"></a> 955                 <strong class="reserved">final</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> it = p.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L956" name="L956"></a> 956                 <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L957" name="L957"></a> 957                 <strong class="reserved">if</strong> (it == <strong class="reserved">null</strong> || it.<a href="../D/30998.html" title="Multiple defined in 2 places.">removedAt</a>(removedIndex)) <em class="brace">{</em>
<a id="L958" name="L958"></a> 958                     <em class="comment">// unlink p</em>
<a id="L959" name="L959"></a> 959                     <em class="comment">// assert it == null || it.isDetached();</em>
<a id="L960" name="L960"></a> 960                     p.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L961" name="L961"></a> 961                     p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L962" name="L962"></a> 962                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <strong class="reserved">null</strong>)
<a id="L963" name="L963"></a> 963                         head = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L964" name="L964"></a> 964                     <strong class="reserved">else</strong>
<a id="L965" name="L965"></a> 965                         <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L966" name="L966"></a> 966                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L967" name="L967"></a> 967                     <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = p;
<a id="L968" name="L968"></a> 968                 <em class="brace">}</em>
<a id="L969" name="L969"></a> 969                 p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L970" name="L970"></a> 970             <em class="brace">}</em>
<a id="L971" name="L971"></a> 971             <strong class="reserved">if</strong> (head == <strong class="reserved">null</strong>)   <em class="comment">// no more iterators to track</em>
<a id="L972" name="L972"></a> 972                 itrs = <strong class="reserved">null</strong>;
<a id="L973" name="L973"></a> 973         <em class="brace">}</em>
<a id="L974" name="L974"></a> 974 
<div class="comment">
          Called whenever the queue becomes empty.
          Notifies all active iterators that the queue is empty,
          clears all weak refs, and unlinks the itrs datastructure.</div>
<a id="L981" name="L981"></a> 981         <strong class="reserved">void</strong> <a href="../R/25376.html" title="Multiple referred from 3 places.">queueIsEmpty</a>() <em class="brace">{</em>
<a id="L982" name="L982"></a> 982             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L983" name="L983"></a> 983             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> p = head; p != <strong class="reserved">null</strong>; p = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L984" name="L984"></a> 984                 <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a> it = p.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L985" name="L985"></a> 985                 <strong class="reserved">if</strong> (it != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L986" name="L986"></a> 986                     p.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L987" name="L987"></a> 987                     it.<a href="../D/34538.html" title="Multiple defined in 27 places.">shutdown</a>();
<a id="L988" name="L988"></a> 988                 <em class="brace">}</em>
<a id="L989" name="L989"></a> 989             <em class="brace">}</em>
<a id="L990" name="L990"></a> 990             head = <strong class="reserved">null</strong>;
<a id="L991" name="L991"></a> 991             itrs = <strong class="reserved">null</strong>;
<a id="L992" name="L992"></a> 992         <em class="brace">}</em>
<a id="L993" name="L993"></a> 993 
<div class="comment">
          Called whenever an element has been dequeued (at takeIndex).</div>
<a id="L997" name="L997"></a> 997         <strong class="reserved">void</strong> <a href="../R/13639.html" title="Multiple referred from 2 places.">elementDequeued</a>() <em class="brace">{</em>
<a id="L998" name="L998"></a> 998             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L999" name="L999"></a> 999             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0)
<a id="L1000" name="L1000"></a>1000                 <a href="../S/1118.html#L981" title="Defined at 981 in src/java/util/concurrent/ArrayBlockingQueue.java.">queueIsEmpty</a>();
<a id="L1001" name="L1001"></a>1001             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (takeIndex == 0)
<a id="L1002" name="L1002"></a>1002                 <a href="../D/35210.html" title="Multiple defined in 2 places.">takeIndexWrapped</a>();
<a id="L1003" name="L1003"></a>1003         <em class="brace">}</em>
<a id="L1004" name="L1004"></a>1004     <em class="brace">}</em>
<a id="L1005" name="L1005"></a>1005 
<div class="comment">
      Iterator for ArrayBlockingQueue.
      To maintain weak consistency with respect to puts and takes, we
      read ahead one slot, so as to not report hasNext true but then
      not have an element to return.
      We switch into "detached" mode (allowing prompt unlinking from
      itrs without help from the GC) when all indices are negative, or
      when hasNext returns false for the first time.  This allows the
      iterator to track concurrent updates completely accurately,
      except for the corner case of the user calling Iterator.remove()
      after hasNext() returned false.  Even in this case, we ensure
      that we don't remove the wrong element by keeping track of the
      expected element to remove, in lastItem.  Yes, we may fail to
      remove lastItem from the queue if it moved due to an interleaved
      interior remove while in detached mode.</div>
<a id="L1024" name="L1024"></a>1024     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/4056.html" title="Multiple referred from 24 places.">Itr</a> <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <em class="brace">{</em>
<div class="comment">
         /** Index to look for new nextItem; NONE at end */</div>
<a id="L1026" name="L1026"></a>1026         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;
<a id="L1027" name="L1027"></a>1027 
<div class="comment">
         /** Element to be returned by next call to next(); null if none */</div>
<a id="L1029" name="L1029"></a>1029         <strong class="reserved">private</strong> E nextItem;
<a id="L1030" name="L1030"></a>1030 
<div class="comment">
         /** Index of nextItem; NONE if none, REMOVED if removed elsewhere */</div>
<a id="L1032" name="L1032"></a>1032         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>;
<a id="L1033" name="L1033"></a>1033 
<div class="comment">
         /** Last element returned; null if none or not detached. */</div>
<a id="L1035" name="L1035"></a>1035         <strong class="reserved">private</strong> E lastItem;
<a id="L1036" name="L1036"></a>1036 
<div class="comment">
         /** Index of lastItem, NONE if none, REMOVED if removed elsewhere */</div>
<a id="L1038" name="L1038"></a>1038         <strong class="reserved">private</strong> <strong class="reserved">int</strong> lastRet;
<a id="L1039" name="L1039"></a>1039 
<div class="comment">
         /** Previous value of takeIndex, or DETACHED when detached */</div>
<a id="L1041" name="L1041"></a>1041         <strong class="reserved">private</strong> <strong class="reserved">int</strong> prevTakeIndex;
<a id="L1042" name="L1042"></a>1042 
<div class="comment">
         /** Previous value of iters.cycles */</div>
<a id="L1044" name="L1044"></a>1044         <strong class="reserved">private</strong> <strong class="reserved">int</strong> prevCycles;
<a id="L1045" name="L1045"></a>1045 
<div class="comment">
         /** Special index value indicating "not available" or "undefined" */</div>
<a id="L1047" name="L1047"></a>1047         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a> = -1;
<a id="L1048" name="L1048"></a>1048 
<div class="comment">
          Special index value indicating "removed elsewhere", that is,
          removed by some operation other than a call to this.remove().</div>
<a id="L1053" name="L1053"></a>1053         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REMOVED = -2;
<a id="L1054" name="L1054"></a>1054 
<div class="comment">
         /** Special value for prevTakeIndex indicating "detached mode" */</div>
<a id="L1056" name="L1056"></a>1056         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DETACHED = -3;
<a id="L1057" name="L1057"></a>1057 
<a id="L1058" name="L1058"></a>1058         Itr() <em class="brace">{</em>
<a id="L1059" name="L1059"></a>1059             <em class="comment">// assert lock.getHoldCount() == 0;</em>
<a id="L1060" name="L1060"></a>1060             lastRet = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1061" name="L1061"></a>1061             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1062" name="L1062"></a>1062             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1063" name="L1063"></a>1063             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1064" name="L1064"></a>1064                 <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0) <em class="brace">{</em>
<a id="L1065" name="L1065"></a>1065                     <em class="comment">// assert itrs == null;</em>
<a id="L1066" name="L1066"></a>1066                     <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1067" name="L1067"></a>1067                     <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1068" name="L1068"></a>1068                     prevTakeIndex = DETACHED;
<a id="L1069" name="L1069"></a>1069                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1070" name="L1070"></a>1070                     <strong class="reserved">final</strong> <strong class="reserved">int</strong> takeIndex = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.takeIndex;
<a id="L1071" name="L1071"></a>1071                     prevTakeIndex = takeIndex;
<a id="L1072" name="L1072"></a>1072                     nextItem = <a href="../S/1118.html#L139" title="Defined at 139 in src/java/util/concurrent/ArrayBlockingQueue.java.">itemAt</a>(<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = takeIndex);
<a id="L1073" name="L1073"></a>1073                     <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../S/1118.html#L1096" title="Defined at 1096 in src/java/util/concurrent/ArrayBlockingQueue.java.">incCursor</a>(takeIndex);
<a id="L1074" name="L1074"></a>1074                     <strong class="reserved">if</strong> (itrs == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1075" name="L1075"></a>1075                         itrs = <strong class="reserved">new</strong> <a href="../S/1118.html#L820" title="Defined at 820 in src/java/util/concurrent/ArrayBlockingQueue.java.">Itrs</a>(<strong class="reserved">this</strong>);
<a id="L1076" name="L1076"></a>1076                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1077" name="L1077"></a>1077                         itrs.<a href="../D/30517.html" title="Multiple defined in 40 places.">register</a>(<strong class="reserved">this</strong>); <em class="comment">// in this order</em>
<a id="L1078" name="L1078"></a>1078                         itrs.<a href="../S/1118.html#L858" title="Defined at 858 in src/java/util/concurrent/ArrayBlockingQueue.java.">doSomeSweeping</a>(<strong class="reserved">false</strong>);
<a id="L1079" name="L1079"></a>1079                     <em class="brace">}</em>
<a id="L1080" name="L1080"></a>1080                     prevCycles = itrs.cycles;
<a id="L1081" name="L1081"></a>1081                     <em class="comment">// assert takeIndex &gt;= 0;</em>
<a id="L1082" name="L1082"></a>1082                     <em class="comment">// assert prevTakeIndex == takeIndex;</em>
<a id="L1083" name="L1083"></a>1083                     <em class="comment">// assert nextIndex &gt;= 0;</em>
<a id="L1084" name="L1084"></a>1084                     <em class="comment">// assert nextItem != null;</em>
<a id="L1085" name="L1085"></a>1085                 <em class="brace">}</em>
<a id="L1086" name="L1086"></a>1086             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1087" name="L1087"></a>1087                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1088" name="L1088"></a>1088             <em class="brace">}</em>
<a id="L1089" name="L1089"></a>1089         <em class="brace">}</em>
<a id="L1090" name="L1090"></a>1090 
<a id="L1091" name="L1091"></a>1091         <strong class="reserved">boolean</strong> <a href="../R/21354.html" title="Multiple referred from 7 places.">isDetached</a>() <em class="brace">{</em>
<a id="L1092" name="L1092"></a>1092             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1093" name="L1093"></a>1093             <strong class="reserved">return</strong> prevTakeIndex &lt; 0;
<a id="L1094" name="L1094"></a>1094         <em class="brace">}</em>
<a id="L1095" name="L1095"></a>1095 
<a id="L1096" name="L1096"></a>1096         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20468.html" title="Multiple referred from 2 places.">incCursor</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1098" name="L1098"></a>1098             <strong class="reserved">if</strong> (++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1099" name="L1099"></a>1099                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L1100" name="L1100"></a>1100             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == putIndex)
<a id="L1101" name="L1101"></a>1101                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1102" name="L1102"></a>1102             <strong class="reserved">return</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1103" name="L1103"></a>1103         <em class="brace">}</em>
<a id="L1104" name="L1104"></a>1104 
<div class="comment">
          Returns true if index is invalidated by the given number of
          dequeues, starting from prevTakeIndex.</div>
<a id="L1109" name="L1109"></a>1109         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21045.html" title="Multiple referred from 3 places.">invalidated</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> prevTakeIndex,
<a id="L1110" name="L1110"></a>1110                                     <strong class="reserved">long</strong> dequeues, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1111" name="L1111"></a>1111             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; 0)
<a id="L1112" name="L1112"></a>1112                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1113" name="L1113"></a>1113             <strong class="reserved">int</strong> <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> - prevTakeIndex;
<a id="L1114" name="L1114"></a>1114             <strong class="reserved">if</strong> (<a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a> &lt; 0)
<a id="L1115" name="L1115"></a>1115                 <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a> += <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1116" name="L1116"></a>1116             <strong class="reserved">return</strong> dequeues &gt; <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a>;
<a id="L1117" name="L1117"></a>1117         <em class="brace">}</em>
<a id="L1118" name="L1118"></a>1118 
<div class="comment">
          Adjusts indices to incorporate all dequeues since the last
          operation on this iterator.  Call only from iterating thread.</div>
<a id="L1123" name="L1123"></a>1123         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20483.html" title="Multiple referred from 3 places.">incorporateDequeues</a>() <em class="brace">{</em>
<a id="L1124" name="L1124"></a>1124             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1125" name="L1125"></a>1125             <em class="comment">// assert itrs != null;</em>
<a id="L1126" name="L1126"></a>1126             <em class="comment">// assert !isDetached();</em>
<a id="L1127" name="L1127"></a>1127             <em class="comment">// assert count &gt; 0;</em>
<a id="L1128" name="L1128"></a>1128 
<a id="L1129" name="L1129"></a>1129             <strong class="reserved">final</strong> <strong class="reserved">int</strong> cycles = itrs.cycles;
<a id="L1130" name="L1130"></a>1130             <strong class="reserved">final</strong> <strong class="reserved">int</strong> takeIndex = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.takeIndex;
<a id="L1131" name="L1131"></a>1131             <strong class="reserved">final</strong> <strong class="reserved">int</strong> prevCycles = <strong class="reserved">this</strong>.prevCycles;
<a id="L1132" name="L1132"></a>1132             <strong class="reserved">final</strong> <strong class="reserved">int</strong> prevTakeIndex = <strong class="reserved">this</strong>.prevTakeIndex;
<a id="L1133" name="L1133"></a>1133 
<a id="L1134" name="L1134"></a>1134             <strong class="reserved">if</strong> (cycles != prevCycles || takeIndex != prevTakeIndex) <em class="brace">{</em>
<a id="L1135" name="L1135"></a>1135                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> len = items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1136" name="L1136"></a>1136                 <em class="comment">// how far takeIndex has advanced since the previous</em>
<a id="L1137" name="L1137"></a>1137                 <em class="comment">// operation of this iterator</em>
<a id="L1138" name="L1138"></a>1138                 <strong class="reserved">long</strong> dequeues = (cycles - prevCycles) * len
<a id="L1139" name="L1139"></a>1139                     + (takeIndex - prevTakeIndex);
<a id="L1140" name="L1140"></a>1140 
<a id="L1141" name="L1141"></a>1141                 <em class="comment">// Check indices for invalidation</em>
<a id="L1142" name="L1142"></a>1142                 <strong class="reserved">if</strong> (<a href="../S/1118.html#L1109" title="Defined at 1109 in src/java/util/concurrent/ArrayBlockingQueue.java.">invalidated</a>(lastRet, prevTakeIndex, dequeues, len))
<a id="L1143" name="L1143"></a>1143                     lastRet = REMOVED;
<a id="L1144" name="L1144"></a>1144                 <strong class="reserved">if</strong> (<a href="../S/1118.html#L1109" title="Defined at 1109 in src/java/util/concurrent/ArrayBlockingQueue.java.">invalidated</a>(<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>, prevTakeIndex, dequeues, len))
<a id="L1145" name="L1145"></a>1145                     <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = REMOVED;
<a id="L1146" name="L1146"></a>1146                 <strong class="reserved">if</strong> (<a href="../S/1118.html#L1109" title="Defined at 1109 in src/java/util/concurrent/ArrayBlockingQueue.java.">invalidated</a>(<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>, prevTakeIndex, dequeues, len))
<a id="L1147" name="L1147"></a>1147                     <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = takeIndex;
<a id="L1148" name="L1148"></a>1148 
<a id="L1149" name="L1149"></a>1149                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &lt; 0 &amp;&amp; <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> &lt; 0 &amp;&amp; lastRet &lt; 0)
<a id="L1150" name="L1150"></a>1150                     <a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L1151" name="L1151"></a>1151                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1152" name="L1152"></a>1152                     <strong class="reserved">this</strong>.prevCycles = cycles;
<a id="L1153" name="L1153"></a>1153                     <strong class="reserved">this</strong>.prevTakeIndex = takeIndex;
<a id="L1154" name="L1154"></a>1154                 <em class="brace">}</em>
<a id="L1155" name="L1155"></a>1155             <em class="brace">}</em>
<a id="L1156" name="L1156"></a>1156         <em class="brace">}</em>
<a id="L1157" name="L1157"></a>1157 
<div class="comment">
          Called when itrs should stop tracking this iterator, either
          because there are no more indices to update (cursor &lt; 0 &amp;&amp;
          nextIndex &lt; 0 &amp;&amp; lastRet &lt; 0) or as a special exception, when
          lastRet &gt;= 0, because hasNext() is about to return false for the
          first time.  Call only from iterating thread.</div>
<a id="L1165" name="L1165"></a>1165         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>() <em class="brace">{</em>
<a id="L1166" name="L1166"></a>1166             <em class="comment">// Switch to detached mode</em>
<a id="L1167" name="L1167"></a>1167             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1168" name="L1168"></a>1168             <em class="comment">// assert cursor == NONE;</em>
<a id="L1169" name="L1169"></a>1169             <em class="comment">// assert nextIndex &lt; 0;</em>
<a id="L1170" name="L1170"></a>1170             <em class="comment">// assert lastRet &lt; 0 || nextItem == null;</em>
<a id="L1171" name="L1171"></a>1171             <em class="comment">// assert lastRet &lt; 0 ^ lastItem != null;</em>
<a id="L1172" name="L1172"></a>1172             <strong class="reserved">if</strong> (prevTakeIndex &gt;= 0) <em class="brace">{</em>
<a id="L1173" name="L1173"></a>1173                 <em class="comment">// assert itrs != null;</em>
<a id="L1174" name="L1174"></a>1174                 prevTakeIndex = DETACHED;
<a id="L1175" name="L1175"></a>1175                 <em class="comment">// try to unlink from itrs (but not too hard)</em>
<a id="L1176" name="L1176"></a>1176                 itrs.<a href="../S/1118.html#L858" title="Defined at 858 in src/java/util/concurrent/ArrayBlockingQueue.java.">doSomeSweeping</a>(<strong class="reserved">true</strong>);
<a id="L1177" name="L1177"></a>1177             <em class="brace">}</em>
<a id="L1178" name="L1178"></a>1178         <em class="brace">}</em>
<a id="L1179" name="L1179"></a>1179 
<div class="comment">
          For performance reasons, we would like not to acquire a lock in
          hasNext in the common case.  To allow for this, we only access
          fields (i.e. nextItem) that are not modified by update operations
          triggered by queue modifications.</div>
<a id="L1186" name="L1186"></a>1186         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20233.html" title="Multiple referred from 653 places.">hasNext</a>() <em class="brace">{</em>
<a id="L1187" name="L1187"></a>1187             <em class="comment">// assert lock.getHoldCount() == 0;</em>
<a id="L1188" name="L1188"></a>1188             <strong class="reserved">if</strong> (nextItem != <strong class="reserved">null</strong>)
<a id="L1189" name="L1189"></a>1189                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1190" name="L1190"></a>1190             <a href="../S/1118.html#L1194" title="Defined at 1194 in src/java/util/concurrent/ArrayBlockingQueue.java.">noNext</a>();
<a id="L1191" name="L1191"></a>1191             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1192" name="L1192"></a>1192         <em class="brace">}</em>
<a id="L1193" name="L1193"></a>1193 
<a id="L1194" name="L1194"></a>1194         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1118.html#L1190" title="Referred from 1190 in src/java/util/concurrent/ArrayBlockingQueue.java.">noNext</a>() <em class="brace">{</em>
<a id="L1195" name="L1195"></a>1195             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1196" name="L1196"></a>1196             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1197" name="L1197"></a>1197             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1198" name="L1198"></a>1198                 <em class="comment">// assert cursor == NONE;</em>
<a id="L1199" name="L1199"></a>1199                 <em class="comment">// assert nextIndex == NONE;</em>
<a id="L1200" name="L1200"></a>1200                 <strong class="reserved">if</strong> (!<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>()) <em class="brace">{</em>
<a id="L1201" name="L1201"></a>1201                     <em class="comment">// assert lastRet &gt;= 0;</em>
<a id="L1202" name="L1202"></a>1202                     <a href="../S/1118.html#L1123" title="Defined at 1123 in src/java/util/concurrent/ArrayBlockingQueue.java.">incorporateDequeues</a>(); <em class="comment">// might update lastRet</em>
<a id="L1203" name="L1203"></a>1203                     <strong class="reserved">if</strong> (lastRet &gt;= 0) <em class="brace">{</em>
<a id="L1204" name="L1204"></a>1204                         lastItem = <a href="../S/1118.html#L139" title="Defined at 139 in src/java/util/concurrent/ArrayBlockingQueue.java.">itemAt</a>(lastRet);
<a id="L1205" name="L1205"></a>1205                         <em class="comment">// assert lastItem != null;</em>
<a id="L1206" name="L1206"></a>1206                         <a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L1207" name="L1207"></a>1207                     <em class="brace">}</em>
<a id="L1208" name="L1208"></a>1208                 <em class="brace">}</em>
<a id="L1209" name="L1209"></a>1209                 <em class="comment">// assert isDetached();</em>
<a id="L1210" name="L1210"></a>1210                 <em class="comment">// assert lastRet &lt; 0 ^ lastItem != null;</em>
<a id="L1211" name="L1211"></a>1211             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1213" name="L1213"></a>1213             <em class="brace">}</em>
<a id="L1214" name="L1214"></a>1214         <em class="brace">}</em>
<a id="L1215" name="L1215"></a>1215 
<a id="L1216" name="L1216"></a>1216         <strong class="reserved">public</strong> E <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L1217" name="L1217"></a>1217             <em class="comment">// assert lock.getHoldCount() == 0;</em>
<a id="L1218" name="L1218"></a>1218             <strong class="reserved">final</strong> E <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = nextItem;
<a id="L1219" name="L1219"></a>1219             <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == <strong class="reserved">null</strong>)
<a id="L1220" name="L1220"></a>1220                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L1221" name="L1221"></a>1221             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1222" name="L1222"></a>1222             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1223" name="L1223"></a>1223             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1224" name="L1224"></a>1224                 <strong class="reserved">if</strong> (!<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>())
<a id="L1225" name="L1225"></a>1225                     <a href="../S/1118.html#L1123" title="Defined at 1123 in src/java/util/concurrent/ArrayBlockingQueue.java.">incorporateDequeues</a>();
<a id="L1226" name="L1226"></a>1226                 <em class="comment">// assert nextIndex != NONE;</em>
<a id="L1227" name="L1227"></a>1227                 <em class="comment">// assert lastItem == null;</em>
<a id="L1228" name="L1228"></a>1228                 lastRet = <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>;
<a id="L1229" name="L1229"></a>1229                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <strong class="reserved">this</strong>.<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;
<a id="L1230" name="L1230"></a>1230                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &gt;= 0) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231                     nextItem = <a href="../S/1118.html#L139" title="Defined at 139 in src/java/util/concurrent/ArrayBlockingQueue.java.">itemAt</a>(<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>);
<a id="L1232" name="L1232"></a>1232                     <em class="comment">// assert nextItem != null;</em>
<a id="L1233" name="L1233"></a>1233                     <strong class="reserved">this</strong>.<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../S/1118.html#L1096" title="Defined at 1096 in src/java/util/concurrent/ArrayBlockingQueue.java.">incCursor</a>(<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>);
<a id="L1234" name="L1234"></a>1234                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1235" name="L1235"></a>1235                     <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1236" name="L1236"></a>1236                     nextItem = <strong class="reserved">null</strong>;
<a id="L1237" name="L1237"></a>1237                 <em class="brace">}</em>
<a id="L1238" name="L1238"></a>1238             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1239" name="L1239"></a>1239                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1240" name="L1240"></a>1240             <em class="brace">}</em>
<a id="L1241" name="L1241"></a>1241             <strong class="reserved">return</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L1242" name="L1242"></a>1242         <em class="brace">}</em>
<a id="L1243" name="L1243"></a>1243 
<a id="L1244" name="L1244"></a>1244         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>() <em class="brace">{</em>
<a id="L1245" name="L1245"></a>1245             <em class="comment">// assert lock.getHoldCount() == 0;</em>
<a id="L1246" name="L1246"></a>1246             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1247" name="L1247"></a>1247             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1248" name="L1248"></a>1248             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1249" name="L1249"></a>1249                 <strong class="reserved">if</strong> (!<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>())
<a id="L1250" name="L1250"></a>1250                     <a href="../S/1118.html#L1123" title="Defined at 1123 in src/java/util/concurrent/ArrayBlockingQueue.java.">incorporateDequeues</a>(); <em class="comment">// might update lastRet or detach</em>
<a id="L1251" name="L1251"></a>1251                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> lastRet = <strong class="reserved">this</strong>.lastRet;
<a id="L1252" name="L1252"></a>1252                 <strong class="reserved">this</strong>.lastRet = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1253" name="L1253"></a>1253                 <strong class="reserved">if</strong> (lastRet &gt;= 0) <em class="brace">{</em>
<a id="L1254" name="L1254"></a>1254                     <strong class="reserved">if</strong> (!<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>())
<a id="L1255" name="L1255"></a>1255                         <a href="../D/30707.html" title="Multiple defined in 3 places.">removeAt</a>(lastRet);
<a id="L1256" name="L1256"></a>1256                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1257" name="L1257"></a>1257                         <strong class="reserved">final</strong> E lastItem = <strong class="reserved">this</strong>.lastItem;
<a id="L1258" name="L1258"></a>1258                         <em class="comment">// assert lastItem != null;</em>
<a id="L1259" name="L1259"></a>1259                         <strong class="reserved">this</strong>.lastItem = <strong class="reserved">null</strong>;
<a id="L1260" name="L1260"></a>1260                         <strong class="reserved">if</strong> (<a href="../S/1118.html#L139" title="Defined at 139 in src/java/util/concurrent/ArrayBlockingQueue.java.">itemAt</a>(lastRet) == lastItem)
<a id="L1261" name="L1261"></a>1261                             <a href="../D/30707.html" title="Multiple defined in 3 places.">removeAt</a>(lastRet);
<a id="L1262" name="L1262"></a>1262                     <em class="brace">}</em>
<a id="L1263" name="L1263"></a>1263                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lastRet == <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>)
<a id="L1264" name="L1264"></a>1264                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>();
<a id="L1265" name="L1265"></a>1265                 <em class="comment">// else lastRet == REMOVED and the last returned element was</em>
<a id="L1266" name="L1266"></a>1266                 <em class="comment">// previously asynchronously removed via an operation other</em>
<a id="L1267" name="L1267"></a>1267                 <em class="comment">// than this.remove(), so nothing to do.</em>
<a id="L1268" name="L1268"></a>1268 
<a id="L1269" name="L1269"></a>1269                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &lt; 0 &amp;&amp; <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> &lt; 0)
<a id="L1270" name="L1270"></a>1270                     <a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L1271" name="L1271"></a>1271             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1272" name="L1272"></a>1272                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1273" name="L1273"></a>1273                 <em class="comment">// assert lastRet == NONE;</em>
<a id="L1274" name="L1274"></a>1274                 <em class="comment">// assert lastItem == null;</em>
<a id="L1275" name="L1275"></a>1275             <em class="brace">}</em>
<a id="L1276" name="L1276"></a>1276         <em class="brace">}</em>
<a id="L1277" name="L1277"></a>1277 
<div class="comment">
          Called to notify the iterator that the queue is empty, or that it
          has fallen hopelessly behind, so that it should abandon any
          further iteration, except possibly to return one more element
          from next(), as promised by returning true from hasNext().</div>
<a id="L1284" name="L1284"></a>1284         <strong class="reserved">void</strong> <a href="../R/28585.html" title="Multiple referred from 25 places.">shutdown</a>() <em class="brace">{</em>
<a id="L1285" name="L1285"></a>1285             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1286" name="L1286"></a>1286             <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1287" name="L1287"></a>1287             <strong class="reserved">if</strong> (<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> &gt;= 0)
<a id="L1288" name="L1288"></a>1288                 <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = REMOVED;
<a id="L1289" name="L1289"></a>1289             <strong class="reserved">if</strong> (lastRet &gt;= 0) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290                 lastRet = REMOVED;
<a id="L1291" name="L1291"></a>1291                 lastItem = <strong class="reserved">null</strong>;
<a id="L1292" name="L1292"></a>1292             <em class="brace">}</em>
<a id="L1293" name="L1293"></a>1293             prevTakeIndex = DETACHED;
<a id="L1294" name="L1294"></a>1294             <em class="comment">// Don't set nextItem to null because we must continue to be</em>
<a id="L1295" name="L1295"></a>1295             <em class="comment">// able to return it on next().</em>
<a id="L1296" name="L1296"></a>1296             <em class="comment">//</em>
<a id="L1297" name="L1297"></a>1297             <em class="comment">// Caller will unlink from itrs when convenient.</em>
<a id="L1298" name="L1298"></a>1298         <em class="brace">}</em>
<a id="L1299" name="L1299"></a>1299 
<a id="L1300" name="L1300"></a>1300         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/13342.html" title="Multiple referred from 69 places.">distance</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> prevTakeIndex, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301             <strong class="reserved">int</strong> <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> - prevTakeIndex;
<a id="L1302" name="L1302"></a>1302             <strong class="reserved">if</strong> (<a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a> &lt; 0)
<a id="L1303" name="L1303"></a>1303                 <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a> += <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1304" name="L1304"></a>1304             <strong class="reserved">return</strong> <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a>;
<a id="L1305" name="L1305"></a>1305         <em class="brace">}</em>
<a id="L1306" name="L1306"></a>1306 
<div class="comment">
          Called whenever an interior remove (not at takeIndex) occurred.
          @return true if this iterator should be unlinked from itrs</div>
<a id="L1312" name="L1312"></a>1312         <strong class="reserved">boolean</strong> <a href="../R/26105.html" title="Multiple referred from 2 places.">removedAt</a>(<strong class="reserved">int</strong> removedIndex) <em class="brace">{</em>
<a id="L1313" name="L1313"></a>1313             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1314" name="L1314"></a>1314             <strong class="reserved">if</strong> (<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>())
<a id="L1315" name="L1315"></a>1315                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1316" name="L1316"></a>1316 
<a id="L1317" name="L1317"></a>1317             <strong class="reserved">final</strong> <strong class="reserved">int</strong> cycles = itrs.cycles;
<a id="L1318" name="L1318"></a>1318             <strong class="reserved">final</strong> <strong class="reserved">int</strong> takeIndex = <a href="../S/1118.html#L82" title="Defined at 82 in src/java/util/concurrent/ArrayBlockingQueue.java.">ArrayBlockingQueue</a>.<strong class="reserved">this</strong>.takeIndex;
<a id="L1319" name="L1319"></a>1319             <strong class="reserved">final</strong> <strong class="reserved">int</strong> prevCycles = <strong class="reserved">this</strong>.prevCycles;
<a id="L1320" name="L1320"></a>1320             <strong class="reserved">final</strong> <strong class="reserved">int</strong> prevTakeIndex = <strong class="reserved">this</strong>.prevTakeIndex;
<a id="L1321" name="L1321"></a>1321             <strong class="reserved">final</strong> <strong class="reserved">int</strong> len = items.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1322" name="L1322"></a>1322             <strong class="reserved">int</strong> cycleDiff = cycles - prevCycles;
<a id="L1323" name="L1323"></a>1323             <strong class="reserved">if</strong> (removedIndex &lt; takeIndex)
<a id="L1324" name="L1324"></a>1324                 cycleDiff++;
<a id="L1325" name="L1325"></a>1325             <strong class="reserved">final</strong> <strong class="reserved">int</strong> removedDistance =
<a id="L1326" name="L1326"></a>1326                 (cycleDiff * len) + (removedIndex - prevTakeIndex);
<a id="L1327" name="L1327"></a>1327             <em class="comment">// assert removedDistance &gt;= 0;</em>
<a id="L1328" name="L1328"></a>1328             <strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <strong class="reserved">this</strong>.<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;
<a id="L1329" name="L1329"></a>1329             <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &gt;= 0) <em class="brace">{</em>
<a id="L1330" name="L1330"></a>1330                 <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a>(<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>, prevTakeIndex, len);
<a id="L1331" name="L1331"></a>1331                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == removedDistance) <em class="brace">{</em>
<a id="L1332" name="L1332"></a>1332                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> == putIndex)
<a id="L1333" name="L1333"></a>1333                         <strong class="reserved">this</strong>.<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L1334" name="L1334"></a>1334                 <em class="brace">}</em>
<a id="L1335" name="L1335"></a>1335                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &gt; removedDistance) <em class="brace">{</em>
<a id="L1336" name="L1336"></a>1336                     <em class="comment">// assert cursor != prevTakeIndex;</em>
<a id="L1337" name="L1337"></a>1337                     <strong class="reserved">this</strong>.<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>(<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>);
<a id="L1338" name="L1338"></a>1338                 <em class="brace">}</em>
<a id="L1339" name="L1339"></a>1339             <em class="brace">}</em>
<a id="L1340" name="L1340"></a>1340             <strong class="reserved">int</strong> lastRet = <strong class="reserved">this</strong>.lastRet;
<a id="L1341" name="L1341"></a>1341             <strong class="reserved">if</strong> (lastRet &gt;= 0) <em class="brace">{</em>
<a id="L1342" name="L1342"></a>1342                 <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a>(lastRet, prevTakeIndex, len);
<a id="L1343" name="L1343"></a>1343                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == removedDistance)
<a id="L1344" name="L1344"></a>1344                     <strong class="reserved">this</strong>.lastRet = lastRet = REMOVED;
<a id="L1345" name="L1345"></a>1345                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &gt; removedDistance)
<a id="L1346" name="L1346"></a>1346                     <strong class="reserved">this</strong>.lastRet = lastRet = <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>(lastRet);
<a id="L1347" name="L1347"></a>1347             <em class="brace">}</em>
<a id="L1348" name="L1348"></a>1348             <strong class="reserved">int</strong> <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <strong class="reserved">this</strong>.<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>;
<a id="L1349" name="L1349"></a>1349             <strong class="reserved">if</strong> (<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> &gt;= 0) <em class="brace">{</em>
<a id="L1350" name="L1350"></a>1350                 <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/14975.html" title="Multiple defined in 4 places.">distance</a>(<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>, prevTakeIndex, len);
<a id="L1351" name="L1351"></a>1351                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == removedDistance)
<a id="L1352" name="L1352"></a>1352                     <strong class="reserved">this</strong>.<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = REMOVED;
<a id="L1353" name="L1353"></a>1353                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &gt; removedDistance)
<a id="L1354" name="L1354"></a>1354                     <strong class="reserved">this</strong>.<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>(<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>);
<a id="L1355" name="L1355"></a>1355             <em class="brace">}</em>
<a id="L1356" name="L1356"></a>1356             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &lt; 0 &amp;&amp; <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> &lt; 0 &amp;&amp; lastRet &lt; 0) <em class="brace">{</em>
<a id="L1357" name="L1357"></a>1357                 <strong class="reserved">this</strong>.prevTakeIndex = DETACHED;
<a id="L1358" name="L1358"></a>1358                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1359" name="L1359"></a>1359             <em class="brace">}</em>
<a id="L1360" name="L1360"></a>1360             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1361" name="L1361"></a>1361         <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362 
<div class="comment">
          Called whenever takeIndex wraps around to zero.
          @return true if this iterator should be unlinked from itrs</div>
<a id="L1368" name="L1368"></a>1368         <strong class="reserved">boolean</strong> <a href="../R/29111.html" title="Multiple referred from 3 places.">takeIndexWrapped</a>() <em class="brace">{</em>
<a id="L1369" name="L1369"></a>1369             <em class="comment">// assert lock.getHoldCount() == 1;</em>
<a id="L1370" name="L1370"></a>1370             <strong class="reserved">if</strong> (<a href="../S/1118.html#L1091" title="Defined at 1091 in src/java/util/concurrent/ArrayBlockingQueue.java.">isDetached</a>())
<a id="L1371" name="L1371"></a>1371                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1372" name="L1372"></a>1372             <strong class="reserved">if</strong> (itrs.cycles - prevCycles &gt; 1) <em class="brace">{</em>
<a id="L1373" name="L1373"></a>1373                 <em class="comment">// All the elements that existed at the time of the last</em>
<a id="L1374" name="L1374"></a>1374                 <em class="comment">// operation are gone, so abandon further iteration.</em>
<a id="L1375" name="L1375"></a>1375                 <a href="../D/34538.html" title="Multiple defined in 27 places.">shutdown</a>();
<a id="L1376" name="L1376"></a>1376                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1377" name="L1377"></a>1377             <em class="brace">}</em>
<a id="L1378" name="L1378"></a>1378             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1379" name="L1379"></a>1379         <em class="brace">}</em>
<a id="L1380" name="L1380"></a>1380 
<a id="L1381" name="L1381"></a>1381 <em class="comment">//         /** Uncomment for debugging. */</em>
<a id="L1382" name="L1382"></a>1382 <em class="comment">//         public String toString() {</em>
<a id="L1383" name="L1383"></a>1383 <em class="comment">//             return ("cursor=" + cursor + " " +</em>
<a id="L1384" name="L1384"></a>1384 <em class="comment">//                     "nextIndex=" + nextIndex + " " +</em>
<a id="L1385" name="L1385"></a>1385 <em class="comment">//                     "lastRet=" + lastRet + " " +</em>
<a id="L1386" name="L1386"></a>1386 <em class="comment">//                     "nextItem=" + nextItem + " " +</em>
<a id="L1387" name="L1387"></a>1387 <em class="comment">//                     "lastItem=" + lastItem + " " +</em>
<a id="L1388" name="L1388"></a>1388 <em class="comment">//                     "prevCycles=" + prevCycles + " " +</em>
<a id="L1389" name="L1389"></a>1389 <em class="comment">//                     "prevTakeIndex=" + prevTakeIndex + " " +</em>
<a id="L1390" name="L1390"></a>1390 <em class="comment">//                     "size()=" + size() + " " +</em>
<a id="L1391" name="L1391"></a>1391 <em class="comment">//                     "remainingCapacity()=" + remainingCapacity());</em>
<a id="L1392" name="L1392"></a>1392 <em class="comment">//         }</em>
<a id="L1393" name="L1393"></a>1393     <em class="brace">}</em>
<a id="L1394" name="L1394"></a>1394 
<div class="comment">
      Returns a {@link Spliterator} over the elements in this queue.
      <p>The returned spliterator is
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      </p><p>The <code>Spliterator</code> reports {@link Spliterator#CONCURRENT},
      {@link Spliterator#ORDERED}, and {@link Spliterator#NONNULL}.
      @implNote
      The <code>Spliterator</code> implements <code>trySplit</code> to permit limited
      parallelism.
      @return a <code>Spliterator</code> over the elements in this queue
      @since 1.8</p></div>
<a id="L1411" name="L1411"></a>1411     <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;E&gt; <a href="../R/28762.html" title="Multiple referred from 435 places.">spliterator</a>() <em class="brace">{</em>
<a id="L1412" name="L1412"></a>1412         <strong class="reserved">return</strong> <a href="../S/1188.html#L41" title="Defined at 41 in src/java/util/Spliterators.java.">Spliterators</a>.<a href="../D/34729.html" title="Multiple defined in 111 places.">spliterator</a>
<a id="L1413" name="L1413"></a>1413             (<strong class="reserved">this</strong>, <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.<a href="../S/915.html#L281" title="Defined at 281 in src/java/util/stream/StreamOpFlag.java.">ORDERED</a> | <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.NONNULL |
<a id="L1414" name="L1414"></a>1414              <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.CONCURRENT);
<a id="L1415" name="L1415"></a>1415     <em class="brace">}</em>
<a id="L1416" name="L1416"></a>1416 
<a id="L1417" name="L1417"></a>1417 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L131">[^]</a><a href="#L1411">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/NodeSetDTM.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L207">[^]</a><a href="#L1243">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L207" title="Defined at 207.">setEnvironment</a></li>
<li><a href="#L217" title="Defined at 217.">getRoot</a></li>
<li><a href="#L237" title="Defined at 237.">setRoot</a></li>
<li><a href="#L254" title="Defined at 254.">clone</a></li>
<li><a href="#L272" title="Defined at 272.">cloneWithReset</a></li>
<li><a href="#L285" title="Defined at 285.">reset</a></li>
<li><a href="#L302" title="Defined at 302.">getWhatToShow</a></li>
<li><a href="#L320" title="Defined at 320.">getFilter</a></li>
<li><a href="#L341" title="Defined at 341.">getExpandEntityReferences</a></li>
<li><a href="#L355" title="Defined at 355.">getDTM</a></li>
<li><a href="#L371" title="Defined at 371.">getDTMManager</a></li>
<li><a href="#L387" title="Defined at 387.">nextNode</a></li>
<li><a href="#L413" title="Defined at 413.">previousNode</a></li>
<li><a href="#L441" title="Defined at 441.">detach</a></li>
<li><a href="#L449" title="Defined at 449.">allowDetachToRelease</a></li>
<li><a href="#L463" title="Defined at 463.">isFresh</a></li>
<li><a href="#L480" title="Defined at 480.">runTo</a></li>
<li><a href="#L505" title="Defined at 505.">item</a></li>
<li><a href="#L521" title="Defined at 521.">getLength</a></li>
<li><a href="#L537" title="Defined at 537.">addNode</a></li>
<li><a href="#L555" title="Defined at 555.">insertNode</a></li>
<li><a href="#L571" title="Defined at 571.">removeNode</a></li>
<li><a href="#L648" title="Defined at 648.">addNodes</a></li>
<li><a href="#L705" title="Defined at 705.">addNodesInDocOrder</a></li>
<li><a href="#L794" title="Defined at 794.">addNodeInDocOrder</a></li>
<li><a href="#L869" title="Defined at 869.">addNodeInDocOrder</a></li>
<li><a href="#L883" title="Defined at 883.">size</a></li>
<li><a href="#L895" title="Defined at 895.">addElement</a></li>
<li><a href="#L915" title="Defined at 915.">insertElementAt</a></li>
<li><a href="#L931" title="Defined at 931.">appendNodes</a></li>
<li><a href="#L948" title="Defined at 948.">removeAllElements</a></li>
<li><a href="#L970" title="Defined at 970.">removeElement</a></li>
<li><a href="#L989" title="Defined at 989.">removeElementAt</a></li>
<li><a href="#L1010" title="Defined at 1010.">setElementAt</a></li>
<li><a href="#L1027" title="Defined at 1027.">setItem</a></li>
<li><a href="#L1043" title="Defined at 1043.">elementAt</a></li>
<li><a href="#L1058" title="Defined at 1058.">contains</a></li>
<li><a href="#L1077" title="Defined at 1077.">indexOf</a></li>
<li><a href="#L1095" title="Defined at 1095.">indexOf</a></li>
<li><a href="#L1115" title="Defined at 1115.">getCurrentPos</a></li>
<li><a href="#L1126" title="Defined at 1126.">setCurrentPos</a></li>
<li><a href="#L1143" title="Defined at 1143.">getCurrentNode</a></li>
<li><a href="#L1176" title="Defined at 1176.">getShouldCacheNodes</a></li>
<li><a href="#L1192" title="Defined at 1192.">setShouldCacheNodes</a></li>
<li><a href="#L1209" title="Defined at 1209.">isMutable</a></li>
<li><a href="#L1216" title="Defined at 1216.">getLast</a></li>
<li><a href="#L1221" title="Defined at 1221.">setLast</a></li>
<li><a href="#L1232" title="Defined at 1232.">isDocOrdered</a></li>
<li><a href="#L1243" title="Defined at 1243.">getAxis</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: NodeSetDTM.java,v 1.2.4.2 2005/09/14 20:30:06 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.res.XSLMessages;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMFilter;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMIterator;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMManager;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.NodeVector;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
<a id="L32" name="L32"></a>  32 
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> org.w3c.dom.traversal.NodeIterator;
<a id="L36" name="L36"></a>  36 
<a id="L37" name="L37"></a>  37 
<div class="comment">
  <p>The NodeSetDTM class can act as either a NodeVector,
  NodeList, or NodeIterator.  However, in order for it to
  act as a NodeVector or NodeList, it's required that
  setShouldCacheNodes(true) be called before the first
  nextNode() is called, in order that nodes can be added
  as they are fetched.  Derived classes that implement iterators
  must override runTo(int index), in order that they may
  run the iteration to the given index. </p>
  <p>Note that we directly implement the DOM's NodeIterator
  interface. We do not emulate all the behavior of the
  standard NodeIterator. In particular, we do not guarantee
  to present a "live view" of the document ... but in XSLT,
  the source document should never be mutated, so this should
  never be an issue.</p>
  <p>Thought: Should NodeSetDTM really implement NodeList and NodeIterator,
  or should there be specific subclasses of it which do so? The
  advantage of doing it all here is that all NodeSetDTMs will respond
  to the same calls; the disadvantage is that some of them may return
  less-than-enlightening results when you do so.</p>
  @xsl.usage advanced</div>
<a id="L62" name="L62"></a>  62 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/5563.html" title="Multiple referred from 35 places.">NodeSetDTM</a> <strong class="reserved">extends</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>
<a id="L63" name="L63"></a>  63         <div class="comment">
/* NodeList, NodeIterator, */</div> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>,
<a id="L64" name="L64"></a>  64         <a href="../S/1744.html#L53" title="Defined at 53 in src/java/lang/Cloneable.java.">Cloneable</a>
<a id="L65" name="L65"></a>  65 <em class="brace">{</em>
<a id="L66" name="L66"></a>  66     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7686480133331317070L;
<a id="L67" name="L67"></a>  67 
<div class="comment">
    Create an empty nodelist.</div>
<a id="L71" name="L71"></a>  71   <strong class="reserved">public</strong> NodeSetDTM(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> dtmManager)
<a id="L72" name="L72"></a>  72   <em class="brace">{</em>
<a id="L73" name="L73"></a>  73     <strong class="reserved">super</strong>();
<a id="L74" name="L74"></a>  74     m_manager = dtmManager;
<a id="L75" name="L75"></a>  75   <em class="brace">}</em>
<a id="L76" name="L76"></a>  76 
<div class="comment">
    Create an empty, using the given block size.
    @param blocksize Size of blocks to allocate
    @param dummy pass zero for right now...</div>
<a id="L83" name="L83"></a>  83   <strong class="reserved">public</strong> NodeSetDTM(<strong class="reserved">int</strong> blocksize, <strong class="reserved">int</strong> dummy, <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> dtmManager)
<a id="L84" name="L84"></a>  84   <em class="brace">{</em>
<a id="L85" name="L85"></a>  85     <strong class="reserved">super</strong>(blocksize);
<a id="L86" name="L86"></a>  86     m_manager = dtmManager;
<a id="L87" name="L87"></a>  87   <em class="brace">}</em>
<a id="L88" name="L88"></a>  88 
<a id="L89" name="L89"></a>  89   <em class="comment">// %TBD%</em>
<a id="L90" name="L90"></a>  90 <em class="comment">//  /**</em>
<a id="L91" name="L91"></a>  91 <em class="comment">//   * Create a NodeSetDTM, and copy the members of the</em>
<a id="L92" name="L92"></a>  92 <em class="comment">//   * given nodelist into it.</em>
<a id="L93" name="L93"></a>  93 <em class="comment">//   *</em>
<a id="L94" name="L94"></a>  94 <em class="comment">//   * @param nodelist List of Nodes to be made members of the new set.</em>
<a id="L95" name="L95"></a>  95 <em class="comment">//   */</em>
<a id="L96" name="L96"></a>  96 <em class="comment">//  public NodeSetDTM(NodeList nodelist)</em>
<a id="L97" name="L97"></a>  97 <em class="comment">//  {</em>
<a id="L98" name="L98"></a>  98 <em class="comment">//</em>
<a id="L99" name="L99"></a>  99 <em class="comment">//    super();</em>
<a id="L100" name="L100"></a> 100 <em class="comment">//</em>
<a id="L101" name="L101"></a> 101 <em class="comment">//    addNodes(nodelist);</em>
<a id="L102" name="L102"></a> 102 <em class="comment">//  }</em>
<a id="L103" name="L103"></a> 103 
<div class="comment">
    Create a NodeSetDTM, and copy the members of the
    given NodeSetDTM into it.
    @param nodelist Set of Nodes to be made members of the new set.</div>
<a id="L110" name="L110"></a> 110   <strong class="reserved">public</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>(NodeSetDTM <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>)
<a id="L111" name="L111"></a> 111   <em class="brace">{</em>
<a id="L112" name="L112"></a> 112 
<a id="L113" name="L113"></a> 113     <strong class="reserved">super</strong>();
<a id="L114" name="L114"></a> 114     m_manager = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L115" name="L115"></a> 115     m_root = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/22122.html" title="Multiple defined in 25 places.">getRoot</a>();
<a id="L116" name="L116"></a> 116 
<a id="L117" name="L117"></a> 117     <a href="../D/10968.html" title="Multiple defined in 5 places.">addNodes</a>((<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>) <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>);
<a id="L118" name="L118"></a> 118   <em class="brace">}</em>
<a id="L119" name="L119"></a> 119 
<div class="comment">
    Create a NodeSetDTM, and copy the members of the
    given DTMIterator into it.
    @param ni Iterator which yields Nodes to be made members of the new set.</div>
<a id="L126" name="L126"></a> 126   <strong class="reserved">public</strong> NodeSetDTM(<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> ni)
<a id="L127" name="L127"></a> 127   <em class="brace">{</em>
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129     <strong class="reserved">super</strong>();
<a id="L130" name="L130"></a> 130 
<a id="L131" name="L131"></a> 131     m_manager = ni.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L132" name="L132"></a> 132     m_root = ni.<a href="../D/22122.html" title="Multiple defined in 25 places.">getRoot</a>();
<a id="L133" name="L133"></a> 133     <a href="../D/10968.html" title="Multiple defined in 5 places.">addNodes</a>(ni);
<a id="L134" name="L134"></a> 134   <em class="brace">}</em>
<a id="L135" name="L135"></a> 135 
<div class="comment">
    Create a NodeSetDTM, and copy the members of the
    given DTMIterator into it.
    @param iterator Iterator which yields Nodes to be made members of the new set.</div>
<a id="L142" name="L142"></a> 142   <strong class="reserved">public</strong> NodeSetDTM(<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt)
<a id="L143" name="L143"></a> 143   <em class="brace">{</em>
<a id="L144" name="L144"></a> 144 
<a id="L145" name="L145"></a> 145     <strong class="reserved">super</strong>();
<a id="L146" name="L146"></a> 146 
<a id="L147" name="L147"></a> 147     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L148" name="L148"></a> 148     m_manager = xctxt.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L149" name="L149"></a> 149 
<a id="L150" name="L150"></a> 150     <strong class="reserved">while</strong> (<strong class="reserved">null</strong> != (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L151" name="L151"></a> 151     <em class="brace">{</em>
<a id="L152" name="L152"></a> 152       <strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = xctxt.<a href="../D/18177.html" title="Multiple defined in 3 places.">getDTMHandleFromNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L153" name="L153"></a> 153       <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>, xctxt);
<a id="L154" name="L154"></a> 154     <em class="brace">}</em>
<a id="L155" name="L155"></a> 155   <em class="brace">}</em>
<a id="L156" name="L156"></a> 156 
<div class="comment">
    Create a NodeSetDTM, and copy the members of the
    given DTMIterator into it.</div>
<a id="L162" name="L162"></a> 162   <strong class="reserved">public</strong> NodeSetDTM(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nodeList, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt)
<a id="L163" name="L163"></a> 163   <em class="brace">{</em>
<a id="L164" name="L164"></a> 164 
<a id="L165" name="L165"></a> 165     <strong class="reserved">super</strong>();
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167     m_manager = xctxt.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L168" name="L168"></a> 168 
<a id="L169" name="L169"></a> 169     <strong class="reserved">int</strong> n = nodeList.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L170" name="L170"></a> 170     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L171" name="L171"></a> 171     <em class="brace">{</em>
<a id="L172" name="L172"></a> 172       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = nodeList.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L173" name="L173"></a> 173       <strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = xctxt.<a href="../D/18177.html" title="Multiple defined in 3 places.">getDTMHandleFromNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L174" name="L174"></a> 174       <em class="comment">// Do not reorder or strip duplicate nodes from the given DOM nodelist</em>
<a id="L175" name="L175"></a> 175       <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>); <em class="comment">// addNodeInDocOrder(handle, xctxt);</em>
<a id="L176" name="L176"></a> 176     <em class="brace">}</em>
<a id="L177" name="L177"></a> 177   <em class="brace">}</em>
<a id="L178" name="L178"></a> 178 
<a id="L179" name="L179"></a> 179 
<div class="comment">
    Create a NodeSetDTM which contains the given Node.
    @param node Single node to be added to the new set.</div>
<a id="L185" name="L185"></a> 185   <strong class="reserved">public</strong> NodeSetDTM(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> dtmManager)
<a id="L186" name="L186"></a> 186   <em class="brace">{</em>
<a id="L187" name="L187"></a> 187 
<a id="L188" name="L188"></a> 188     <strong class="reserved">super</strong>();
<a id="L189" name="L189"></a> 189     m_manager = dtmManager;
<a id="L190" name="L190"></a> 190 
<a id="L191" name="L191"></a> 191     <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L192" name="L192"></a> 192   <em class="brace">}</em>
<a id="L193" name="L193"></a> 193 
<div class="comment">
    Set the environment in which this iterator operates, which should provide:
    a node (the context node... same value as "root" defined below)
    a pair of non-zero positive integers (the context position and the context size)
    a set of variable bindings
    a function library
    the set of namespace declarations in scope for the expression.
    <p>At this time the exact implementation of this environment is application
    dependent.  Probably a proper interface will be created fairly soon.</p>
    @param environment The environment object.</div>
<a id="L207" name="L207"></a> 207   <strong class="reserved">public</strong> <strong class="reserved">void</strong> setEnvironment(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L208" name="L208"></a> 208   <em class="brace">{</em>
<a id="L209" name="L209"></a> 209     <em class="comment">// no-op</em>
<a id="L210" name="L210"></a> 210   <em class="brace">}</em>
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212 
<div class="comment">
    @return The root node of the Iterator, as specified when it was created.
    For non-Iterator NodeSetDTMs, this will be null.</div>
<a id="L217" name="L217"></a> 217   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18758.html" title="Multiple referred from 54 places.">getRoot</a>()
<a id="L218" name="L218"></a> 218   <em class="brace">{</em>
<a id="L219" name="L219"></a> 219     <strong class="reserved">if</strong>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == m_root)
<a id="L220" name="L220"></a> 220     <em class="brace">{</em>
<a id="L221" name="L221"></a> 221       <strong class="reserved">if</strong>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0)
<a id="L222" name="L222"></a> 222         <strong class="reserved">return</strong> <a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(0);
<a id="L223" name="L223"></a> 223       <strong class="reserved">else</strong>
<a id="L224" name="L224"></a> 224         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L225" name="L225"></a> 225     <em class="brace">}</em>
<a id="L226" name="L226"></a> 226     <strong class="reserved">else</strong>
<a id="L227" name="L227"></a> 227       <strong class="reserved">return</strong> m_root;
<a id="L228" name="L228"></a> 228   <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<div class="comment">
    Initialize the context values for this expression
    after it is cloned.
    @param context The XPath runtime context for this
    transformation.</div>
<a id="L237" name="L237"></a> 237   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28067.html" title="Multiple referred from 27 places.">setRoot</a>(<strong class="reserved">int</strong> <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L238" name="L238"></a> 238   <em class="brace">{</em>
<a id="L239" name="L239"></a> 239     <em class="comment">// no-op, I guess...  (-sb)</em>
<a id="L240" name="L240"></a> 240   <em class="brace">}</em>
<a id="L241" name="L241"></a> 241 
<div class="comment">
    Clone this NodeSetDTM.
    At this time, we only expect this to be used with LocPathIterators;
    it may not work with other kinds of NodeSetDTMs.
    @return a new NodeSetDTM of the same type, having the same state...
    though unless overridden in the subclasses, it may not copy all
    the state information.
    @throws CloneNotSupportedException if this subclass of NodeSetDTM
    does not support the clone() operation.</div>
<a id="L254" name="L254"></a> 254   <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L255" name="L255"></a> 255   <em class="brace">{</em>
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257     <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>) <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L258" name="L258"></a> 258 
<a id="L259" name="L259"></a> 259     <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L260" name="L260"></a> 260   <em class="brace">}</em>
<a id="L261" name="L261"></a> 261 
<div class="comment">
    Get a cloned Iterator, and reset its state to the beginning of the
    iteration.
    @return a new NodeSetDTM of the same type, having the same state...
    except that the reset() operation has been called.
    @throws CloneNotSupportedException if this subclass of NodeSetDTM
    does not support the clone() operation.</div>
<a id="L272" name="L272"></a> 272   <strong class="reserved">public</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../R/11583.html" title="Multiple referred from 10 places.">cloneWithReset</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L273" name="L273"></a> 273   <em class="brace">{</em>
<a id="L274" name="L274"></a> 274 
<a id="L275" name="L275"></a> 275     <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>) <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L276" name="L276"></a> 276 
<a id="L277" name="L277"></a> 277     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L278" name="L278"></a> 278 
<a id="L279" name="L279"></a> 279     <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L280" name="L280"></a> 280   <em class="brace">}</em>
<a id="L281" name="L281"></a> 281 
<div class="comment">
    Reset the iterator. May have no effect on non-iterator Nodesets.</div>
<a id="L285" name="L285"></a> 285   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>()
<a id="L286" name="L286"></a> 286   <em class="brace">{</em>
<a id="L287" name="L287"></a> 287     m_next = 0;
<a id="L288" name="L288"></a> 288   <em class="brace">}</em>
<a id="L289" name="L289"></a> 289 
<div class="comment">
     This attribute determines which node types are presented via the
    iterator. The available set of constants is defined in the
    <code>DTMFilter</code> interface. For NodeSetDTMs, the mask has been
    hardcoded to show all nodes except EntityReference nodes, which have
    no equivalent in the XPath data model.
    @return integer used as a bit-array, containing flags defined in
    the DOM's DTMFilter class. The value will be
    <code>SHOW_ALL &amp; ~SHOW_ENTITY_REFERENCE</code>, meaning that
    only entity references are suppressed.</div>
<a id="L302" name="L302"></a> 302   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19853.html" title="Multiple referred from 27 places.">getWhatToShow</a>()
<a id="L303" name="L303"></a> 303   <em class="brace">{</em>
<a id="L304" name="L304"></a> 304     <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ALL &amp; ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ENTITY_REFERENCE;
<a id="L305" name="L305"></a> 305   <em class="brace">}</em>
<a id="L306" name="L306"></a> 306 
<div class="comment">
    The filter object used to screen nodes. Filters are applied to
    further reduce (and restructure) the DTMIterator's view of the
    document. In our case, we will be using hardcoded filters built
    into our iterators... but getFilter() is part of the DOM's
    DTMIterator interface, so we have to support it.
    @return null, which is slightly misleading. True, there is no
    user-written filter object, but in fact we are doing some very
    sophisticated custom filtering. A DOM purist might suggest
    returning a placeholder object just to indicate that this is
    not going to return all nodes selected by whatToShow.</div>
<a id="L320" name="L320"></a> 320   <strong class="reserved">public</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a> <a href="../R/16590.html" title="Multiple referred from 6 places.">getFilter</a>()
<a id="L321" name="L321"></a> 321   <em class="brace">{</em>
<a id="L322" name="L322"></a> 322     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L323" name="L323"></a> 323   <em class="brace">}</em>
<a id="L324" name="L324"></a> 324 
<div class="comment">
     The value of this flag determines whether the children of entity
    reference nodes are visible to the iterator. If false, they will be
    skipped over.
    <br> To produce a view of the document that has entity references
    expanded and does not expose the entity reference node itself, use the
    whatToShow flags to hide the entity reference node and set
    expandEntityReferences to true when creating the iterator. To produce
    a view of the document that has entity reference nodes but no entity
    expansion, use the whatToShow flags to show the entity reference node
    and set expandEntityReferences to false.
    @return true for all iterators based on NodeSetDTM, meaning that the
    contents of EntityRefrence nodes may be returned (though whatToShow
    says that the EntityReferences themselves are not shown.)</div>
<a id="L341" name="L341"></a> 341   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4889.html#L311" title="Referred from 311 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">getExpandEntityReferences</a>()
<a id="L342" name="L342"></a> 342   <em class="brace">{</em>
<a id="L343" name="L343"></a> 343     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L344" name="L344"></a> 344   <em class="brace">}</em>
<a id="L345" name="L345"></a> 345 
<div class="comment">
    Get an instance of a DTM that "owns" a node handle.  Since a node
    iterator may be passed without a DTMManager, this allows the
    caller to easily get the DTM using just the iterator.
    @param nodeHandle the nodeHandle.
    @return a non-null DTM reference.</div>
<a id="L355" name="L355"></a> 355   <strong class="reserved">public</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> <a href="../R/15933.html" title="Multiple referred from 85 places.">getDTM</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L356" name="L356"></a> 356   <em class="brace">{</em>
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358     <strong class="reserved">return</strong> m_manager.<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(nodeHandle);
<a id="L359" name="L359"></a> 359   <em class="brace">}</em>
<a id="L360" name="L360"></a> 360 
<div class="comment">
   /* An instance of the DTMManager. */</div>
<a id="L362" name="L362"></a> 362   <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> m_manager;
<a id="L363" name="L363"></a> 363 
<div class="comment">
    Get an instance of the DTMManager.  Since a node
    iterator may be passed without a DTMManager, this allows the
    caller to easily get the DTMManager using just the iterator.
    @return a non-null DTMManager reference.</div>
<a id="L371" name="L371"></a> 371   <strong class="reserved">public</strong> <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> <a href="../R/15939.html" title="Multiple referred from 22 places.">getDTMManager</a>()
<a id="L372" name="L372"></a> 372   <em class="brace">{</em>
<a id="L373" name="L373"></a> 373 
<a id="L374" name="L374"></a> 374     <strong class="reserved">return</strong> m_manager;
<a id="L375" name="L375"></a> 375   <em class="brace">}</em>
<a id="L376" name="L376"></a> 376 
<div class="comment">
     Returns the next node in the set and advances the position of the
    iterator in the set. After a DTMIterator is created, the first call
    to nextNode() returns the first node in the set.
    @return  The next <code>Node</code> in the set being iterated over, or
      <code>DTM.NULL</code> if there are no more members in that set.
    @throws DOMException
       INVALID_STATE_ERR: Raised if this method is called after the
      <code>detach</code> method was invoked.</div>
<a id="L387" name="L387"></a> 387   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>()
<a id="L388" name="L388"></a> 388   <em class="brace">{</em>
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390     <strong class="reserved">if</strong> ((m_next) &lt; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())
<a id="L391" name="L391"></a> 391     <em class="brace">{</em>
<a id="L392" name="L392"></a> 392       <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">this</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(m_next);
<a id="L393" name="L393"></a> 393 
<a id="L394" name="L394"></a> 394       m_next++;
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396       <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L397" name="L397"></a> 397     <em class="brace">}</em>
<a id="L398" name="L398"></a> 398     <strong class="reserved">else</strong>
<a id="L399" name="L399"></a> 399       <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L400" name="L400"></a> 400   <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<div class="comment">
     Returns the previous node in the set and moves the position of the
    iterator backwards in the set.
    @return  The previous <code>Node</code> in the set being iterated over,
      or<code>DTM.NULL</code> if there are no more members in that set.
    @throws DOMException
       INVALID_STATE_ERR: Raised if this method is called after the
      <code>detach</code> method was invoked.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a cached type, and hence doesn't know what the previous node was.</div>
<a id="L413" name="L413"></a> 413   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/24966.html" title="Multiple referred from 15 places.">previousNode</a>()
<a id="L414" name="L414"></a> 414   <em class="brace">{</em>
<a id="L415" name="L415"></a> 415 
<a id="L416" name="L416"></a> 416     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L417" name="L417"></a> 417       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L418" name="L418"></a> 418         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_CANNOT_ITERATE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM can not iterate to a previous node!");</em>
<a id="L419" name="L419"></a> 419 
<a id="L420" name="L420"></a> 420     <strong class="reserved">if</strong> ((m_next - 1) &gt; 0)
<a id="L421" name="L421"></a> 421     <em class="brace">{</em>
<a id="L422" name="L422"></a> 422       m_next--;
<a id="L423" name="L423"></a> 423 
<a id="L424" name="L424"></a> 424       <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(m_next);
<a id="L425" name="L425"></a> 425     <em class="brace">}</em>
<a id="L426" name="L426"></a> 426     <strong class="reserved">else</strong>
<a id="L427" name="L427"></a> 427       <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L428" name="L428"></a> 428   <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<div class="comment">
    Detaches the iterator from the set which it iterated over, releasing
    any computational resources and placing the iterator in the INVALID
    state. After<code>detach</code> has been invoked, calls to
    <code>nextNode</code> or<code>previousNode</code> will raise the
    exception INVALID_STATE_ERR.
    <p>
    This operation is a no-op in NodeSetDTM, and will not cause
    INVALID_STATE_ERR to be raised by later operations.
    </p></div>
<a id="L441" name="L441"></a> 441   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>()<em class="brace">{</em><em class="brace">}</em>
<a id="L442" name="L442"></a> 442 
<div class="comment">
    Specify if it's OK for detach to release the iterator for reuse.
    @param allowRelease true if it is OK for detach to release this iterator
    for pooling.</div>
<a id="L449" name="L449"></a> 449   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10150.html" title="Multiple referred from 6 places.">allowDetachToRelease</a>(<strong class="reserved">boolean</strong> allowRelease)
<a id="L450" name="L450"></a> 450   <em class="brace">{</em>
<a id="L451" name="L451"></a> 451     <em class="comment">// no action for right now.</em>
<a id="L452" name="L452"></a> 452   <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<a id="L454" name="L454"></a> 454 
<div class="comment">
    Tells if this NodeSetDTM is "fresh", in other words, if
    the first nextNode() that is called will return the
    first node in the set.
    @return true if nextNode() would return the first node in the set,
    false if it would return a later one.</div>
<a id="L463" name="L463"></a> 463   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21499.html" title="Multiple referred from 2 places.">isFresh</a>()
<a id="L464" name="L464"></a> 464   <em class="brace">{</em>
<a id="L465" name="L465"></a> 465     <strong class="reserved">return</strong> (m_next == 0);
<a id="L466" name="L466"></a> 466   <em class="brace">}</em>
<a id="L467" name="L467"></a> 467 
<div class="comment">
    If an index is requested, NodeSetDTM will call this method
    to run the iterator to the index.  By default this sets
    m_next to the index.  If the index argument is -1, this
    signals that the iterator should be run to the end.
    @param index Position to advance (or retreat) to, with
    0 requesting the reset ("fresh") position and -1 (or indeed
    any out-of-bounds value) requesting the final position.
    @throws RuntimeException thrown if this NodeSetDTM is not
    one of the types which supports indexing/counting.</div>
<a id="L480" name="L480"></a> 480   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26561.html" title="Multiple referred from 15 places.">runTo</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L481" name="L481"></a> 481   <em class="brace">{</em>
<a id="L482" name="L482"></a> 482 
<a id="L483" name="L483"></a> 483     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L484" name="L484"></a> 484       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L485" name="L485"></a> 485         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_CANNOT_INDEX, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM can not do indexing or counting functions!");</em>
<a id="L486" name="L486"></a> 486 
<a id="L487" name="L487"></a> 487     <strong class="reserved">if</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) &amp;&amp; (m_next &lt; m_firstFree))
<a id="L488" name="L488"></a> 488       m_next = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L489" name="L489"></a> 489     <strong class="reserved">else</strong>
<a id="L490" name="L490"></a> 490       m_next = m_firstFree - 1;
<a id="L491" name="L491"></a> 491   <em class="brace">}</em>
<a id="L492" name="L492"></a> 492 
<div class="comment">
    Returns the <code>index</code>th item in the collection. If
    <code>index</code> is greater than or equal to the number of nodes in
    the list, this returns <code>null</code>.
    TODO: What happens if index is out of range?
    @param index Index into the collection.
    @return The node at the <code>index</code>th position in the
      <code>NodeList</code>, or <code>null</code> if that is not a valid
      index.</div>
<a id="L505" name="L505"></a> 505   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/22287.html" title="Multiple referred from 822 places.">item</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L506" name="L506"></a> 506   <em class="brace">{</em>
<a id="L507" name="L507"></a> 507 
<a id="L508" name="L508"></a> 508     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510     <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L511" name="L511"></a> 511   <em class="brace">}</em>
<a id="L512" name="L512"></a> 512 
<div class="comment">
    The number of nodes in the list. The range of valid child node indices is
    0 to <code>length-1</code> inclusive. Note that this operation requires
    finding all the matching nodes, which may defeat attempts to defer
    that work.
    @return integer indicating how many nodes are represented by this list.</div>
<a id="L521" name="L521"></a> 521   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17335.html" title="Multiple referred from 644 places.">getLength</a>()
<a id="L522" name="L522"></a> 522   <em class="brace">{</em>
<a id="L523" name="L523"></a> 523 
<a id="L524" name="L524"></a> 524     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L525" name="L525"></a> 525 
<a id="L526" name="L526"></a> 526     <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L527" name="L527"></a> 527   <em class="brace">}</em>
<a id="L528" name="L528"></a> 528 
<div class="comment">
    Add a node to the NodeSetDTM. Not all types of NodeSetDTMs support this
    operation
    @param n Node to be added
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L537" name="L537"></a> 537   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9871.html" title="Multiple referred from 39 places.">addNode</a>(<strong class="reserved">int</strong> n)
<a id="L538" name="L538"></a> 538   <em class="brace">{</em>
<a id="L539" name="L539"></a> 539 
<a id="L540" name="L540"></a> 540     <strong class="reserved">if</strong> (!m_mutable)
<a id="L541" name="L541"></a> 541       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543     <strong class="reserved">this</strong>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(n);
<a id="L544" name="L544"></a> 544   <em class="brace">}</em>
<a id="L545" name="L545"></a> 545 
<div class="comment">
    Insert a node at a given position.
    @param n Node to be added
    @param pos Offset at which the node is to be inserted,
    with 0 being the first position.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L555" name="L555"></a> 555   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20782.html" title="Multiple referred from 4 places.">insertNode</a>(<strong class="reserved">int</strong> n, <strong class="reserved">int</strong> pos)
<a id="L556" name="L556"></a> 556   <em class="brace">{</em>
<a id="L557" name="L557"></a> 557 
<a id="L558" name="L558"></a> 558     <strong class="reserved">if</strong> (!m_mutable)
<a id="L559" name="L559"></a> 559       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L560" name="L560"></a> 560 
<a id="L561" name="L561"></a> 561     <a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(n, pos);
<a id="L562" name="L562"></a> 562   <em class="brace">}</em>
<a id="L563" name="L563"></a> 563 
<div class="comment">
    Remove a node.
    @param n Node to be added
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L571" name="L571"></a> 571   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26030.html" title="Multiple referred from 14 places.">removeNode</a>(<strong class="reserved">int</strong> n)
<a id="L572" name="L572"></a> 572   <em class="brace">{</em>
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574     <strong class="reserved">if</strong> (!m_mutable)
<a id="L575" name="L575"></a> 575       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L576" name="L576"></a> 576 
<a id="L577" name="L577"></a> 577     <strong class="reserved">this</strong>.<a href="../D/30774.html" title="Multiple defined in 14 places.">removeElement</a>(n);
<a id="L578" name="L578"></a> 578   <em class="brace">}</em>
<a id="L579" name="L579"></a> 579 
<a id="L580" name="L580"></a> 580   <em class="comment">// %TBD%</em>
<a id="L581" name="L581"></a> 581 <em class="comment">//  /**</em>
<a id="L582" name="L582"></a> 582 <em class="comment">//   * Copy NodeList members into this nodelist, adding in</em>
<a id="L583" name="L583"></a> 583 <em class="comment">//   * document order.  If a node is null, don't add it.</em>
<a id="L584" name="L584"></a> 584 <em class="comment">//   *</em>
<a id="L585" name="L585"></a> 585 <em class="comment">//   * @param nodelist List of nodes which should now be referenced by</em>
<a id="L586" name="L586"></a> 586 <em class="comment">//   * this NodeSetDTM.</em>
<a id="L587" name="L587"></a> 587 <em class="comment">//   * @throws RuntimeException thrown if this NodeSetDTM is not of</em>
<a id="L588" name="L588"></a> 588 <em class="comment">//   * a mutable type.</em>
<a id="L589" name="L589"></a> 589 <em class="comment">//   */</em>
<a id="L590" name="L590"></a> 590 <em class="comment">//  public void addNodes(NodeList nodelist)</em>
<a id="L591" name="L591"></a> 591 <em class="comment">//  {</em>
<a id="L592" name="L592"></a> 592 <em class="comment">//</em>
<a id="L593" name="L593"></a> 593 <em class="comment">//    if (!m_mutable)</em>
<a id="L594" name="L594"></a> 594 <em class="comment">//      throw new RuntimeException("This NodeSetDTM is not mutable!");</em>
<a id="L595" name="L595"></a> 595 <em class="comment">//</em>
<a id="L596" name="L596"></a> 596 <em class="comment">//    if (null != nodelist)  // defensive to fix a bug that Sanjiva reported.</em>
<a id="L597" name="L597"></a> 597 <em class="comment">//    {</em>
<a id="L598" name="L598"></a> 598 <em class="comment">//      int nChildren = nodelist.getLength();</em>
<a id="L599" name="L599"></a> 599 <em class="comment">//</em>
<a id="L600" name="L600"></a> 600 <em class="comment">//      for (int i = 0; i &lt; nChildren; i++)</em>
<a id="L601" name="L601"></a> 601 <em class="comment">//      {</em>
<a id="L602" name="L602"></a> 602 <em class="comment">//        int obj = nodelist.item(i);</em>
<a id="L603" name="L603"></a> 603 <em class="comment">//</em>
<a id="L604" name="L604"></a> 604 <em class="comment">//        if (null != obj)</em>
<a id="L605" name="L605"></a> 605 <em class="comment">//        {</em>
<a id="L606" name="L606"></a> 606 <em class="comment">//          addElement(obj);</em>
<a id="L607" name="L607"></a> 607 <em class="comment">//        }</em>
<a id="L608" name="L608"></a> 608 <em class="comment">//      }</em>
<a id="L609" name="L609"></a> 609 <em class="comment">//    }</em>
<a id="L610" name="L610"></a> 610 <em class="comment">//</em>
<a id="L611" name="L611"></a> 611 <em class="comment">//    // checkDups();</em>
<a id="L612" name="L612"></a> 612 <em class="comment">//  }</em>
<a id="L613" name="L613"></a> 613 
<a id="L614" name="L614"></a> 614   <em class="comment">// %TBD%</em>
<a id="L615" name="L615"></a> 615 <em class="comment">//  /**</em>
<a id="L616" name="L616"></a> 616 <em class="comment">//   * &lt;p&gt;Copy NodeList members into this nodelist, adding in</em>
<a id="L617" name="L617"></a> 617 <em class="comment">//   * document order.  Only genuine node references will be copied;</em>
<a id="L618" name="L618"></a> 618 <em class="comment">//   * nulls appearing in the source NodeSetDTM will</em>
<a id="L619" name="L619"></a> 619 <em class="comment">//   * not be added to this one. &lt;/p&gt;</em>
<a id="L620" name="L620"></a> 620 <em class="comment">//   *</em>
<a id="L621" name="L621"></a> 621 <em class="comment">//   * &lt;p&gt; In case you're wondering why this function is needed: NodeSetDTM</em>
<a id="L622" name="L622"></a> 622 <em class="comment">//   * implements both DTMIterator and NodeList. If this method isn't</em>
<a id="L623" name="L623"></a> 623 <em class="comment">//   * provided, Java can't decide which of those to use when addNodes()</em>
<a id="L624" name="L624"></a> 624 <em class="comment">//   * is invoked. Providing the more-explicit match avoids that</em>
<a id="L625" name="L625"></a> 625 <em class="comment">//   * ambiguity.)&lt;/p&gt;</em>
<a id="L626" name="L626"></a> 626 <em class="comment">//   *</em>
<a id="L627" name="L627"></a> 627 <em class="comment">//   * @param ns NodeSetDTM whose members should be merged into this NodeSetDTM.</em>
<a id="L628" name="L628"></a> 628 <em class="comment">//   * @throws RuntimeException thrown if this NodeSetDTM is not of</em>
<a id="L629" name="L629"></a> 629 <em class="comment">//   * a mutable type.</em>
<a id="L630" name="L630"></a> 630 <em class="comment">//   */</em>
<a id="L631" name="L631"></a> 631 <em class="comment">//  public void addNodes(NodeSetDTM ns)</em>
<a id="L632" name="L632"></a> 632 <em class="comment">//  {</em>
<a id="L633" name="L633"></a> 633 <em class="comment">//</em>
<a id="L634" name="L634"></a> 634 <em class="comment">//    if (!m_mutable)</em>
<a id="L635" name="L635"></a> 635 <em class="comment">//      throw new RuntimeException("This NodeSetDTM is not mutable!");</em>
<a id="L636" name="L636"></a> 636 <em class="comment">//</em>
<a id="L637" name="L637"></a> 637 <em class="comment">//    addNodes((DTMIterator) ns);</em>
<a id="L638" name="L638"></a> 638 <em class="comment">//  }</em>
<a id="L639" name="L639"></a> 639 
<div class="comment">
    Copy NodeList members into this nodelist, adding in
    document order.  Null references are not added.
    @param iterator DTMIterator which yields the nodes to be added.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L648" name="L648"></a> 648   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9875.html" title="Multiple referred from 8 places.">addNodes</a>(<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>)
<a id="L649" name="L649"></a> 649   <em class="brace">{</em>
<a id="L650" name="L650"></a> 650 
<a id="L651" name="L651"></a> 651     <strong class="reserved">if</strong> (!m_mutable)
<a id="L652" name="L652"></a> 652       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L653" name="L653"></a> 653 
<a id="L654" name="L654"></a> 654     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>)  <em class="comment">// defensive to fix a bug that Sanjiva reported.</em>
<a id="L655" name="L655"></a> 655     <em class="brace">{</em>
<a id="L656" name="L656"></a> 656       <strong class="reserved">int</strong> obj;
<a id="L657" name="L657"></a> 657 
<a id="L658" name="L658"></a> 658       <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (obj = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L659" name="L659"></a> 659       <em class="brace">{</em>
<a id="L660" name="L660"></a> 660         <a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(obj);
<a id="L661" name="L661"></a> 661       <em class="brace">}</em>
<a id="L662" name="L662"></a> 662     <em class="brace">}</em>
<a id="L663" name="L663"></a> 663 
<a id="L664" name="L664"></a> 664     <em class="comment">// checkDups();</em>
<a id="L665" name="L665"></a> 665   <em class="brace">}</em>
<a id="L666" name="L666"></a> 666 
<a id="L667" name="L667"></a> 667   <em class="comment">// %TBD%</em>
<a id="L668" name="L668"></a> 668 <em class="comment">//  /**</em>
<a id="L669" name="L669"></a> 669 <em class="comment">//   * Copy NodeList members into this nodelist, adding in</em>
<a id="L670" name="L670"></a> 670 <em class="comment">//   * document order.  If a node is null, don't add it.</em>
<a id="L671" name="L671"></a> 671 <em class="comment">//   *</em>
<a id="L672" name="L672"></a> 672 <em class="comment">//   * @param nodelist List of nodes to be added</em>
<a id="L673" name="L673"></a> 673 <em class="comment">//   * @param support The XPath runtime context.</em>
<a id="L674" name="L674"></a> 674 <em class="comment">//   * @throws RuntimeException thrown if this NodeSetDTM is not of</em>
<a id="L675" name="L675"></a> 675 <em class="comment">//   * a mutable type.</em>
<a id="L676" name="L676"></a> 676 <em class="comment">//   */</em>
<a id="L677" name="L677"></a> 677 <em class="comment">//  public void addNodesInDocOrder(NodeList nodelist, XPathContext support)</em>
<a id="L678" name="L678"></a> 678 <em class="comment">//  {</em>
<a id="L679" name="L679"></a> 679 <em class="comment">//</em>
<a id="L680" name="L680"></a> 680 <em class="comment">//    if (!m_mutable)</em>
<a id="L681" name="L681"></a> 681 <em class="comment">//      throw new RuntimeException("This NodeSetDTM is not mutable!");</em>
<a id="L682" name="L682"></a> 682 <em class="comment">//</em>
<a id="L683" name="L683"></a> 683 <em class="comment">//    int nChildren = nodelist.getLength();</em>
<a id="L684" name="L684"></a> 684 <em class="comment">//</em>
<a id="L685" name="L685"></a> 685 <em class="comment">//    for (int i = 0; i &lt; nChildren; i++)</em>
<a id="L686" name="L686"></a> 686 <em class="comment">//    {</em>
<a id="L687" name="L687"></a> 687 <em class="comment">//      int node = nodelist.item(i);</em>
<a id="L688" name="L688"></a> 688 <em class="comment">//</em>
<a id="L689" name="L689"></a> 689 <em class="comment">//      if (null != node)</em>
<a id="L690" name="L690"></a> 690 <em class="comment">//      {</em>
<a id="L691" name="L691"></a> 691 <em class="comment">//        addNodeInDocOrder(node, support);</em>
<a id="L692" name="L692"></a> 692 <em class="comment">//      }</em>
<a id="L693" name="L693"></a> 693 <em class="comment">//    }</em>
<a id="L694" name="L694"></a> 694 <em class="comment">//  }</em>
<a id="L695" name="L695"></a> 695 
<div class="comment">
    Copy NodeList members into this nodelist, adding in
    document order.  If a node is null, don't add it.
    @param iterator DTMIterator which yields the nodes to be added.
    @param support The XPath runtime context.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L705" name="L705"></a> 705   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9876.html" title="Multiple referred from 2 places.">addNodesInDocOrder</a>(<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L706" name="L706"></a> 706   <em class="brace">{</em>
<a id="L707" name="L707"></a> 707 
<a id="L708" name="L708"></a> 708     <strong class="reserved">if</strong> (!m_mutable)
<a id="L709" name="L709"></a> 709       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L710" name="L710"></a> 710 
<a id="L711" name="L711"></a> 711     <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L712" name="L712"></a> 712 
<a id="L713" name="L713"></a> 713     <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L714" name="L714"></a> 714     <em class="brace">{</em>
<a id="L715" name="L715"></a> 715       <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, support);
<a id="L716" name="L716"></a> 716     <em class="brace">}</em>
<a id="L717" name="L717"></a> 717   <em class="brace">}</em>
<a id="L718" name="L718"></a> 718 
<a id="L719" name="L719"></a> 719   <em class="comment">// %TBD%</em>
<a id="L720" name="L720"></a> 720 <em class="comment">//  /**</em>
<a id="L721" name="L721"></a> 721 <em class="comment">//   * Add the node list to this node set in document order.</em>
<a id="L722" name="L722"></a> 722 <em class="comment">//   *</em>
<a id="L723" name="L723"></a> 723 <em class="comment">//   * @param start index.</em>
<a id="L724" name="L724"></a> 724 <em class="comment">//   * @param end index.</em>
<a id="L725" name="L725"></a> 725 <em class="comment">//   * @param testIndex index.</em>
<a id="L726" name="L726"></a> 726 <em class="comment">//   * @param nodelist The nodelist to add.</em>
<a id="L727" name="L727"></a> 727 <em class="comment">//   * @param support The XPath runtime context.</em>
<a id="L728" name="L728"></a> 728 <em class="comment">//   *</em>
<a id="L729" name="L729"></a> 729 <em class="comment">//   * @return false always.</em>
<a id="L730" name="L730"></a> 730 <em class="comment">//   * @throws RuntimeException thrown if this NodeSetDTM is not of</em>
<a id="L731" name="L731"></a> 731 <em class="comment">//   * a mutable type.</em>
<a id="L732" name="L732"></a> 732 <em class="comment">//   */</em>
<a id="L733" name="L733"></a> 733 <em class="comment">//  private boolean addNodesInDocOrder(int start, int end, int testIndex,</em>
<a id="L734" name="L734"></a> 734 <em class="comment">//                                     NodeList nodelist, XPathContext support)</em>
<a id="L735" name="L735"></a> 735 <em class="comment">//  {</em>
<a id="L736" name="L736"></a> 736 <em class="comment">//</em>
<a id="L737" name="L737"></a> 737 <em class="comment">//    if (!m_mutable)</em>
<a id="L738" name="L738"></a> 738 <em class="comment">//      throw new RuntimeException("This NodeSetDTM is not mutable!");</em>
<a id="L739" name="L739"></a> 739 <em class="comment">//</em>
<a id="L740" name="L740"></a> 740 <em class="comment">//    boolean foundit = false;</em>
<a id="L741" name="L741"></a> 741 <em class="comment">//    int i;</em>
<a id="L742" name="L742"></a> 742 <em class="comment">//    int node = nodelist.item(testIndex);</em>
<a id="L743" name="L743"></a> 743 <em class="comment">//</em>
<a id="L744" name="L744"></a> 744 <em class="comment">//    for (i = end; i &gt;= start; i--)</em>
<a id="L745" name="L745"></a> 745 <em class="comment">//    {</em>
<a id="L746" name="L746"></a> 746 <em class="comment">//      int child = elementAt(i);</em>
<a id="L747" name="L747"></a> 747 <em class="comment">//</em>
<a id="L748" name="L748"></a> 748 <em class="comment">//      if (child == node)</em>
<a id="L749" name="L749"></a> 749 <em class="comment">//      {</em>
<a id="L750" name="L750"></a> 750 <em class="comment">//        i = -2;  // Duplicate, suppress insert</em>
<a id="L751" name="L751"></a> 751 <em class="comment">//</em>
<a id="L752" name="L752"></a> 752 <em class="comment">//        break;</em>
<a id="L753" name="L753"></a> 753 <em class="comment">//      }</em>
<a id="L754" name="L754"></a> 754 <em class="comment">//</em>
<a id="L755" name="L755"></a> 755 <em class="comment">//      if (!support.getDOMHelper().isNodeAfter(node, child))</em>
<a id="L756" name="L756"></a> 756 <em class="comment">//      {</em>
<a id="L757" name="L757"></a> 757 <em class="comment">//        insertElementAt(node, i + 1);</em>
<a id="L758" name="L758"></a> 758 <em class="comment">//</em>
<a id="L759" name="L759"></a> 759 <em class="comment">//        testIndex--;</em>
<a id="L760" name="L760"></a> 760 <em class="comment">//</em>
<a id="L761" name="L761"></a> 761 <em class="comment">//        if (testIndex &gt; 0)</em>
<a id="L762" name="L762"></a> 762 <em class="comment">//        {</em>
<a id="L763" name="L763"></a> 763 <em class="comment">//          boolean foundPrev = addNodesInDocOrder(0, i, testIndex, nodelist,</em>
<a id="L764" name="L764"></a> 764 <em class="comment">//                                                 support);</em>
<a id="L765" name="L765"></a> 765 <em class="comment">//</em>
<a id="L766" name="L766"></a> 766 <em class="comment">//          if (!foundPrev)</em>
<a id="L767" name="L767"></a> 767 <em class="comment">//          {</em>
<a id="L768" name="L768"></a> 768 <em class="comment">//            addNodesInDocOrder(i, size() - 1, testIndex, nodelist, support);</em>
<a id="L769" name="L769"></a> 769 <em class="comment">//          }</em>
<a id="L770" name="L770"></a> 770 <em class="comment">//        }</em>
<a id="L771" name="L771"></a> 771 <em class="comment">//</em>
<a id="L772" name="L772"></a> 772 <em class="comment">//        break;</em>
<a id="L773" name="L773"></a> 773 <em class="comment">//      }</em>
<a id="L774" name="L774"></a> 774 <em class="comment">//    }</em>
<a id="L775" name="L775"></a> 775 <em class="comment">//</em>
<a id="L776" name="L776"></a> 776 <em class="comment">//    if (i == -1)</em>
<a id="L777" name="L777"></a> 777 <em class="comment">//    {</em>
<a id="L778" name="L778"></a> 778 <em class="comment">//      insertElementAt(node, 0);</em>
<a id="L779" name="L779"></a> 779 <em class="comment">//    }</em>
<a id="L780" name="L780"></a> 780 <em class="comment">//</em>
<a id="L781" name="L781"></a> 781 <em class="comment">//    return foundit;</em>
<a id="L782" name="L782"></a> 782 <em class="comment">//  }</em>
<a id="L783" name="L783"></a> 783 
<div class="comment">
    Add the node into a vector of nodes where it should occur in
    document order.
    @param node The node to be added.
    @param test true if we should test for doc order
    @param support The XPath runtime context.
    @return insertIndex.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L794" name="L794"></a> 794   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/9873.html" title="Multiple referred from 8 places.">addNodeInDocOrder</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">boolean</strong> <a href="../D/35234.html" title="Multiple defined in 11 places.">test</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L795" name="L795"></a> 795   <em class="brace">{</em>
<a id="L796" name="L796"></a> 796 
<a id="L797" name="L797"></a> 797     <strong class="reserved">if</strong> (!m_mutable)
<a id="L798" name="L798"></a> 798       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L799" name="L799"></a> 799 
<a id="L800" name="L800"></a> 800     <strong class="reserved">int</strong> insertIndex = -1;
<a id="L801" name="L801"></a> 801 
<a id="L802" name="L802"></a> 802     <strong class="reserved">if</strong> (<a href="../D/35234.html" title="Multiple defined in 11 places.">test</a>)
<a id="L803" name="L803"></a> 803     <em class="brace">{</em>
<a id="L804" name="L804"></a> 804 
<a id="L805" name="L805"></a> 805       <em class="comment">// This needs to do a binary search, but a binary search</em>
<a id="L806" name="L806"></a> 806       <em class="comment">// is somewhat tough because the sequence test involves</em>
<a id="L807" name="L807"></a> 807       <em class="comment">// two nodes.</em>
<a id="L808" name="L808"></a> 808       <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(), i;
<a id="L809" name="L809"></a> 809 
<a id="L810" name="L810"></a> 810       <strong class="reserved">for</strong> (i = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1; i &gt;= 0; i--)
<a id="L811" name="L811"></a> 811       <em class="brace">{</em>
<a id="L812" name="L812"></a> 812         <strong class="reserved">int</strong> child = <a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L813" name="L813"></a> 813 
<a id="L814" name="L814"></a> 814         <strong class="reserved">if</strong> (child == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L815" name="L815"></a> 815         <em class="brace">{</em>
<a id="L816" name="L816"></a> 816           i = -2;  <em class="comment">// Duplicate, suppress insert</em>
<a id="L817" name="L817"></a> 817 
<a id="L818" name="L818"></a> 818           <strong class="reserved">break</strong>;
<a id="L819" name="L819"></a> 819         <em class="brace">}</em>
<a id="L820" name="L820"></a> 820 
<a id="L821" name="L821"></a> 821         <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> dtm = support.<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L822" name="L822"></a> 822         <strong class="reserved">if</strong> (!dtm.<a href="../D/25944.html" title="Multiple defined in 7 places.">isNodeAfter</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, child))
<a id="L823" name="L823"></a> 823         <em class="brace">{</em>
<a id="L824" name="L824"></a> 824           <strong class="reserved">break</strong>;
<a id="L825" name="L825"></a> 825         <em class="brace">}</em>
<a id="L826" name="L826"></a> 826       <em class="brace">}</em>
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828       <strong class="reserved">if</strong> (i != -2)
<a id="L829" name="L829"></a> 829       <em class="brace">{</em>
<a id="L830" name="L830"></a> 830         insertIndex = i + 1;
<a id="L831" name="L831"></a> 831 
<a id="L832" name="L832"></a> 832         <a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, insertIndex);
<a id="L833" name="L833"></a> 833       <em class="brace">}</em>
<a id="L834" name="L834"></a> 834     <em class="brace">}</em>
<a id="L835" name="L835"></a> 835     <strong class="reserved">else</strong>
<a id="L836" name="L836"></a> 836     <em class="brace">{</em>
<a id="L837" name="L837"></a> 837       insertIndex = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L838" name="L838"></a> 838 
<a id="L839" name="L839"></a> 839       <strong class="reserved">boolean</strong> foundit = <strong class="reserved">false</strong>;
<a id="L840" name="L840"></a> 840 
<a id="L841" name="L841"></a> 841       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; insertIndex; i++)
<a id="L842" name="L842"></a> 842       <em class="brace">{</em>
<a id="L843" name="L843"></a> 843         <strong class="reserved">if</strong> (i == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L844" name="L844"></a> 844         <em class="brace">{</em>
<a id="L845" name="L845"></a> 845           foundit = <strong class="reserved">true</strong>;
<a id="L846" name="L846"></a> 846 
<a id="L847" name="L847"></a> 847           <strong class="reserved">break</strong>;
<a id="L848" name="L848"></a> 848         <em class="brace">}</em>
<a id="L849" name="L849"></a> 849       <em class="brace">}</em>
<a id="L850" name="L850"></a> 850 
<a id="L851" name="L851"></a> 851       <strong class="reserved">if</strong> (!foundit)
<a id="L852" name="L852"></a> 852         <a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L853" name="L853"></a> 853     <em class="brace">}</em>
<a id="L854" name="L854"></a> 854 
<a id="L855" name="L855"></a> 855     <em class="comment">// checkDups();</em>
<a id="L856" name="L856"></a> 856     <strong class="reserved">return</strong> insertIndex;
<a id="L857" name="L857"></a> 857   <em class="brace">}</em>  <em class="comment">// end addNodeInDocOrder(Vector v, Object obj)</em>
<a id="L858" name="L858"></a> 858 
<div class="comment">
    Add the node into a vector of nodes where it should occur in
    document order.
    @param node The node to be added.
    @param support The XPath runtime context.
    @return The index where it was inserted.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L869" name="L869"></a> 869   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/9873.html" title="Multiple referred from 8 places.">addNodeInDocOrder</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L870" name="L870"></a> 870   <em class="brace">{</em>
<a id="L871" name="L871"></a> 871 
<a id="L872" name="L872"></a> 872     <strong class="reserved">if</strong> (!m_mutable)
<a id="L873" name="L873"></a> 873       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L874" name="L874"></a> 874 
<a id="L875" name="L875"></a> 875     <strong class="reserved">return</strong> <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">true</strong>, support);
<a id="L876" name="L876"></a> 876   <em class="brace">}</em>  <em class="comment">// end addNodeInDocOrder(Vector v, Object obj)</em>
<a id="L877" name="L877"></a> 877 
<div class="comment">
    Get the length of the list.
    @return The size of this node set.</div>
<a id="L883" name="L883"></a> 883   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>()
<a id="L884" name="L884"></a> 884   <em class="brace">{</em>
<a id="L885" name="L885"></a> 885     <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L886" name="L886"></a> 886   <em class="brace">}</em>
<a id="L887" name="L887"></a> 887 
<div class="comment">
    Append a Node onto the vector.
    @param value The node to be added.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L895" name="L895"></a> 895   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9708.html" title="Multiple referred from 886 places.">addElement</a>(<strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L896" name="L896"></a> 896   <em class="brace">{</em>
<a id="L897" name="L897"></a> 897 
<a id="L898" name="L898"></a> 898     <strong class="reserved">if</strong> (!m_mutable)
<a id="L899" name="L899"></a> 899       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L900" name="L900"></a> 900 
<a id="L901" name="L901"></a> 901     <strong class="reserved">super</strong>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L902" name="L902"></a> 902   <em class="brace">}</em>
<a id="L903" name="L903"></a> 903 
<div class="comment">
    Inserts the specified node in this vector at the specified index.
    Each component in this vector with an index greater or equal to
    the specified index is shifted upward to have an index one greater
    than the value it had previously.
    @param value The node to be inserted.
    @param at The index where the insert should occur.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L915" name="L915"></a> 915   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20769.html" title="Multiple referred from 72 places.">insertElementAt</a>(<strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">int</strong> <a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>)
<a id="L916" name="L916"></a> 916   <em class="brace">{</em>
<a id="L917" name="L917"></a> 917 
<a id="L918" name="L918"></a> 918     <strong class="reserved">if</strong> (!m_mutable)
<a id="L919" name="L919"></a> 919       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L920" name="L920"></a> 920 
<a id="L921" name="L921"></a> 921     <strong class="reserved">super</strong>.<a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>);
<a id="L922" name="L922"></a> 922   <em class="brace">}</em>
<a id="L923" name="L923"></a> 923 
<div class="comment">
    Append the nodes to the list.
    @param nodes The nodes to be appended to this node set.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L931" name="L931"></a> 931   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/4943.html#L937" title="Referred from 937 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">appendNodes</a>(<a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nodes)
<a id="L932" name="L932"></a> 932   <em class="brace">{</em>
<a id="L933" name="L933"></a> 933 
<a id="L934" name="L934"></a> 934     <strong class="reserved">if</strong> (!m_mutable)
<a id="L935" name="L935"></a> 935       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L936" name="L936"></a> 936 
<a id="L937" name="L937"></a> 937     <strong class="reserved">super</strong>.<a href="../D/11396.html" title="Multiple defined in 3 places.">appendNodes</a>(nodes);
<a id="L938" name="L938"></a> 938   <em class="brace">}</em>
<a id="L939" name="L939"></a> 939 
<div class="comment">
    Inserts the specified node in this vector at the specified index.
    Each component in this vector with an index greater or equal to
    the specified index is shifted upward to have an index one greater
    than the value it had previously.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L948" name="L948"></a> 948   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25892.html" title="Multiple referred from 90 places.">removeAllElements</a>()
<a id="L949" name="L949"></a> 949   <em class="brace">{</em>
<a id="L950" name="L950"></a> 950 
<a id="L951" name="L951"></a> 951     <strong class="reserved">if</strong> (!m_mutable)
<a id="L952" name="L952"></a> 952       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L953" name="L953"></a> 953 
<a id="L954" name="L954"></a> 954     <strong class="reserved">super</strong>.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L955" name="L955"></a> 955   <em class="brace">}</em>
<a id="L956" name="L956"></a> 956 
<div class="comment">
    Removes the first occurrence of the argument from this vector.
    If the object is found in this vector, each component in the vector
    with an index greater or equal to the object's index is shifted
    downward to have an index one smaller than the value it had
    previously.
    @param s The node to be removed.
    @return True if the node was successfully removed
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L970" name="L970"></a> 970   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25951.html" title="Multiple referred from 45 places.">removeElement</a>(<strong class="reserved">int</strong> s)
<a id="L971" name="L971"></a> 971   <em class="brace">{</em>
<a id="L972" name="L972"></a> 972 
<a id="L973" name="L973"></a> 973     <strong class="reserved">if</strong> (!m_mutable)
<a id="L974" name="L974"></a> 974       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L975" name="L975"></a> 975 
<a id="L976" name="L976"></a> 976     <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/30774.html" title="Multiple defined in 14 places.">removeElement</a>(s);
<a id="L977" name="L977"></a> 977   <em class="brace">}</em>
<a id="L978" name="L978"></a> 978 
<div class="comment">
    Deletes the component at the specified index. Each component in
    this vector with an index greater or equal to the specified
    index is shifted downward to have an index one smaller than
    the value it had previously.
    @param i The index of the node to be removed.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L989" name="L989"></a> 989   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25952.html" title="Multiple referred from 79 places.">removeElementAt</a>(<strong class="reserved">int</strong> i)
<a id="L990" name="L990"></a> 990   <em class="brace">{</em>
<a id="L991" name="L991"></a> 991 
<a id="L992" name="L992"></a> 992     <strong class="reserved">if</strong> (!m_mutable)
<a id="L993" name="L993"></a> 993       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L994" name="L994"></a> 994 
<a id="L995" name="L995"></a> 995     <strong class="reserved">super</strong>.<a href="../D/30775.html" title="Multiple defined in 12 places.">removeElementAt</a>(i);
<a id="L996" name="L996"></a> 996   <em class="brace">}</em>
<a id="L997" name="L997"></a> 997 
<div class="comment">
    Sets the component at the specified index of this vector to be the
    specified object. The previous component at that position is discarded.
    The index must be a value greater than or equal to 0 and less
    than the current size of the vector.
    @param node  The node to be set.
    @param index The index of the node to be replaced.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L1010" name="L1010"></a>1010   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27311.html" title="Multiple referred from 85 places.">setElementAt</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L1011" name="L1011"></a>1011   <em class="brace">{</em>
<a id="L1012" name="L1012"></a>1012 
<a id="L1013" name="L1013"></a>1013     <strong class="reserved">if</strong> (!m_mutable)
<a id="L1014" name="L1014"></a>1014       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L1015" name="L1015"></a>1015 
<a id="L1016" name="L1016"></a>1016     <strong class="reserved">super</strong>.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1017" name="L1017"></a>1017   <em class="brace">}</em>
<a id="L1018" name="L1018"></a>1018 
<div class="comment">
    Same as setElementAt.
    @param node  The node to be set.
    @param index The index of the node to be replaced.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L1027" name="L1027"></a>1027   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27608.html" title="Multiple referred from 8 places.">setItem</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L1028" name="L1028"></a>1028   <em class="brace">{</em>
<a id="L1029" name="L1029"></a>1029 
<a id="L1030" name="L1030"></a>1030     <strong class="reserved">if</strong> (!m_mutable)
<a id="L1031" name="L1031"></a>1031       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM is not mutable!");</em>
<a id="L1032" name="L1032"></a>1032 
<a id="L1033" name="L1033"></a>1033     <strong class="reserved">super</strong>.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1034" name="L1034"></a>1034   <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035 
<div class="comment">
    Get the nth element.
    @param i The index of the requested node.
    @return Node at specified index.</div>
<a id="L1043" name="L1043"></a>1043   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13630.html" title="Multiple referred from 1941 places.">elementAt</a>(<strong class="reserved">int</strong> i)
<a id="L1044" name="L1044"></a>1044   <em class="brace">{</em>
<a id="L1045" name="L1045"></a>1045 
<a id="L1046" name="L1046"></a>1046     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(i);
<a id="L1047" name="L1047"></a>1047 
<a id="L1048" name="L1048"></a>1048     <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1049" name="L1049"></a>1049   <em class="brace">}</em>
<a id="L1050" name="L1050"></a>1050 
<div class="comment">
    Tell if the table contains the given node.
    @param s Node to look for
    @return True if the given node was found.</div>
<a id="L1058" name="L1058"></a>1058   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<strong class="reserved">int</strong> s)
<a id="L1059" name="L1059"></a>1059   <em class="brace">{</em>
<a id="L1060" name="L1060"></a>1060 
<a id="L1061" name="L1061"></a>1061     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L1062" name="L1062"></a>1062 
<a id="L1063" name="L1063"></a>1063     <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(s);
<a id="L1064" name="L1064"></a>1064   <em class="brace">}</em>
<a id="L1065" name="L1065"></a>1065 
<div class="comment">
    Searches for the first occurence of the given argument,
    beginning the search at index, and testing for equality
    using the equals method.
    @param elem Node to look for
    @param index Index of where to start the search
    @return the index of the first occurrence of the object
    argument in this vector at position index or later in the
    vector; returns -1 if the object is not found.</div>
<a id="L1077" name="L1077"></a>1077   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<strong class="reserved">int</strong> elem, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L1078" name="L1078"></a>1078   <em class="brace">{</em>
<a id="L1079" name="L1079"></a>1079 
<a id="L1080" name="L1080"></a>1080     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L1081" name="L1081"></a>1081 
<a id="L1082" name="L1082"></a>1082     <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(elem, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1083" name="L1083"></a>1083   <em class="brace">}</em>
<a id="L1084" name="L1084"></a>1084 
<div class="comment">
    Searches for the first occurence of the given argument,
    beginning the search at index, and testing for equality
    using the equals method.
    @param elem Node to look for
    @return the index of the first occurrence of the object
    argument in this vector at position index or later in the
    vector; returns -1 if the object is not found.</div>
<a id="L1095" name="L1095"></a>1095   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<strong class="reserved">int</strong> elem)
<a id="L1096" name="L1096"></a>1096   <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097 
<a id="L1098" name="L1098"></a>1098     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L1099" name="L1099"></a>1099 
<a id="L1100" name="L1100"></a>1100     <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(elem);
<a id="L1101" name="L1101"></a>1101   <em class="brace">}</em>
<a id="L1102" name="L1102"></a>1102 
<div class="comment">
 If this node is being used as an iterator, the next index that nextNode()
   *  will return.  </div>
<a id="L1105" name="L1105"></a>1105   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_next = 0;
<a id="L1106" name="L1106"></a>1106 
<div class="comment">
    Get the current position, which is one less than
    the next nextNode() call will retrieve.  i.e. if
    you call getCurrentPos() and the return is 0, the next
    fetch will take place at index 1.
    @return The the current position index.</div>
<a id="L1115" name="L1115"></a>1115   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15900.html" title="Multiple referred from 15 places.">getCurrentPos</a>()
<a id="L1116" name="L1116"></a>1116   <em class="brace">{</em>
<a id="L1117" name="L1117"></a>1117     <strong class="reserved">return</strong> m_next;
<a id="L1118" name="L1118"></a>1118   <em class="brace">}</em>
<a id="L1119" name="L1119"></a>1119 
<div class="comment">
    Set the current position in the node set.
    @param i Must be a valid index.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a cached type, and thus doesn't permit indexed access.</div>
<a id="L1126" name="L1126"></a>1126   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27137.html" title="Multiple referred from 3 places.">setCurrentPos</a>(<strong class="reserved">int</strong> i)
<a id="L1127" name="L1127"></a>1127   <em class="brace">{</em>
<a id="L1128" name="L1128"></a>1128 
<a id="L1129" name="L1129"></a>1129     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L1130" name="L1130"></a>1130       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L1131" name="L1131"></a>1131         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_CANNOT_INDEX, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM can not do indexing or counting functions!");</em>
<a id="L1132" name="L1132"></a>1132 
<a id="L1133" name="L1133"></a>1133     m_next = i;
<a id="L1134" name="L1134"></a>1134   <em class="brace">}</em>
<a id="L1135" name="L1135"></a>1135 
<div class="comment">
    Return the last fetched node.  Needed to support the UnionPathIterator.
    @return the last fetched node.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a cached type, and thus doesn't permit indexed access.</div>
<a id="L1143" name="L1143"></a>1143   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15897.html" title="Multiple referred from 27 places.">getCurrentNode</a>()
<a id="L1144" name="L1144"></a>1144   <em class="brace">{</em>
<a id="L1145" name="L1145"></a>1145 
<a id="L1146" name="L1146"></a>1146     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L1147" name="L1147"></a>1147       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L1148" name="L1148"></a>1148         "This NodeSetDTM can not do indexing or counting functions!");
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150     <strong class="reserved">int</strong> saved = m_next;
<a id="L1151" name="L1151"></a>1151     <em class="comment">// because nextNode always increments</em>
<a id="L1152" name="L1152"></a>1152     <em class="comment">// But watch out for copy29, where the root iterator didn't</em>
<a id="L1153" name="L1153"></a>1153     <em class="comment">// have nextNode called on it.</em>
<a id="L1154" name="L1154"></a>1154     <strong class="reserved">int</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = (m_next &gt; 0) ? m_next-1 : m_next;
<a id="L1155" name="L1155"></a>1155     <strong class="reserved">int</strong> n = (<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> &lt; m_firstFree) ? <a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>) : <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1156" name="L1156"></a>1156     m_next = saved; <em class="comment">// HACK: I think this is a bit of a hack.  -sb</em>
<a id="L1157" name="L1157"></a>1157     <strong class="reserved">return</strong> n;
<a id="L1158" name="L1158"></a>1158   <em class="brace">}</em>
<a id="L1159" name="L1159"></a>1159 
<div class="comment">
   /** True if this list can be mutated.  */</div>
<a id="L1161" name="L1161"></a>1161   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_mutable = <strong class="reserved">true</strong>;
<a id="L1162" name="L1162"></a>1162 
<div class="comment">
 True if this list is cached.
   *  @serial  </div>
<a id="L1165" name="L1165"></a>1165   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_cacheNodes = <strong class="reserved">true</strong>;
<a id="L1166" name="L1166"></a>1166 
<div class="comment">
   /** The root of the iteration, if available. */</div>
<a id="L1168" name="L1168"></a>1168   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_root = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1169" name="L1169"></a>1169 
<div class="comment">
    Get whether or not this is a cached node set.
    @return True if this list is cached.</div>
<a id="L1176" name="L1176"></a>1176   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getShouldCacheNodes()
<a id="L1177" name="L1177"></a>1177   <em class="brace">{</em>
<a id="L1178" name="L1178"></a>1178     <strong class="reserved">return</strong> m_cacheNodes;
<a id="L1179" name="L1179"></a>1179   <em class="brace">}</em>
<a id="L1180" name="L1180"></a>1180 
<div class="comment">
    If setShouldCacheNodes(true) is called, then nodes will
    be cached.  They are not cached by default. This switch must
    be set before the first call to nextNode is made, to ensure
    that all nodes are cached.
    @param b true if this node set should be cached.
    @throws RuntimeException thrown if an attempt is made to
    request caching after we've already begun stepping through the
    nodes in this set.</div>
<a id="L1192" name="L1192"></a>1192   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28175.html" title="Multiple referred from 15 places.">setShouldCacheNodes</a>(<strong class="reserved">boolean</strong> b)
<a id="L1193" name="L1193"></a>1193   <em class="brace">{</em>
<a id="L1194" name="L1194"></a>1194 
<a id="L1195" name="L1195"></a>1195     <strong class="reserved">if</strong> (!<a href="../D/25614.html" title="Multiple defined in 6 places.">isFresh</a>())
<a id="L1196" name="L1196"></a>1196       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L1197" name="L1197"></a>1197         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANNOT_CALL_SETSHOULDCACHENODE, <strong class="reserved">null</strong>)); <em class="comment">//"Can not call setShouldCacheNodes after nextNode has been called!");</em>
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199     m_cacheNodes = b;
<a id="L1200" name="L1200"></a>1200     m_mutable = <strong class="reserved">true</strong>;
<a id="L1201" name="L1201"></a>1201   <em class="brace">}</em>
<a id="L1202" name="L1202"></a>1202 
<div class="comment">
    Tells if this iterator can have nodes added to it or set via
    the <code>setItem(int node, int index)</code> method.
    @return True if the nodelist can be mutated.</div>
<a id="L1209" name="L1209"></a>1209   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isMutable()
<a id="L1210" name="L1210"></a>1210   <em class="brace">{</em>
<a id="L1211" name="L1211"></a>1211     <strong class="reserved">return</strong> m_mutable;
<a id="L1212" name="L1212"></a>1212   <em class="brace">}</em>
<a id="L1213" name="L1213"></a>1213 
<a id="L1214" name="L1214"></a>1214   <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <strong class="reserved">int</strong> m_last = 0;
<a id="L1215" name="L1215"></a>1215 
<a id="L1216" name="L1216"></a>1216   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17269.html" title="Multiple referred from 11 places.">getLast</a>()
<a id="L1217" name="L1217"></a>1217   <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218     <strong class="reserved">return</strong> m_last;
<a id="L1219" name="L1219"></a>1219   <em class="brace">}</em>
<a id="L1220" name="L1220"></a>1220 
<a id="L1221" name="L1221"></a>1221   <strong class="reserved">public</strong> <strong class="reserved">void</strong> setLast(<strong class="reserved">int</strong> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>)
<a id="L1222" name="L1222"></a>1222   <em class="brace">{</em>
<a id="L1223" name="L1223"></a>1223     m_last = <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>;
<a id="L1224" name="L1224"></a>1224   <em class="brace">}</em>
<a id="L1225" name="L1225"></a>1225 
<div class="comment">
    Returns true if all the nodes in the iteration well be returned in document
    order.
    @return true as a default.</div>
<a id="L1232" name="L1232"></a>1232   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21373.html" title="Multiple referred from 8 places.">isDocOrdered</a>()
<a id="L1233" name="L1233"></a>1233   <em class="brace">{</em>
<a id="L1234" name="L1234"></a>1234     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1235" name="L1235"></a>1235   <em class="brace">}</em>
<a id="L1236" name="L1236"></a>1236 
<div class="comment">
    Returns the axis being iterated, if it is known.
    @return Axis.CHILD, etc., or -1 if the axis is not known or is of multiple
    types.</div>
<a id="L1243" name="L1243"></a>1243   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15203.html" title="Multiple referred from 33 places.">getAxis</a>()
<a id="L1244" name="L1244"></a>1244   <em class="brace">{</em>
<a id="L1245" name="L1245"></a>1245     <strong class="reserved">return</strong> -1;
<a id="L1246" name="L1246"></a>1246   <em class="brace">}</em>
<a id="L1247" name="L1247"></a>1247 
<a id="L1248" name="L1248"></a>1248 
<a id="L1249" name="L1249"></a>1249 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L207">[^]</a><a href="#L1243">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
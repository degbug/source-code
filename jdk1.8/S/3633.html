<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/management/remote/rmi/RMIConnectorServer.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L259">[^]</a><a href="#L825">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L259" title="Defined at 259.">toJMXConnector</a></li>
<li><a href="#L343" title="Defined at 343.">start</a></li>
<li><a href="#L518" title="Defined at 518.">stop</a></li>
<li><a href="#L579" title="Defined at 579.">isActive</a></li>
<li><a href="#L583" title="Defined at 583.">getAddress</a></li>
<li><a href="#L589" title="Defined at 589.">getAttributes</a></li>
<li><a href="#L596" title="Defined at 596.">setMBeanServerForwarder</a></li>
<li><a href="#L607" title="Defined at 607.">connectionOpened</a></li>
<li><a href="#L613" title="Defined at 613.">connectionClosed</a></li>
<li><a href="#L619" title="Defined at 619.">connectionFailed</a></li>
<li><a href="#L633" title="Defined at 633.">bind</a></li>
<li><a href="#L651" title="Defined at 651.">newServer</a></li>
<li><a href="#L670" title="Defined at 670.">encodeStubInAddress</a></li>
<li><a href="#L695" title="Defined at 695.">isIiopURL</a></li>
<li><a href="#L714" title="Defined at 714.">encodeStub</a></li>
<li><a href="#L722" title="Defined at 722.">encodeJRMPStub</a></li>
<li><a href="#L733" title="Defined at 733.">encodeIIOPStub</a></li>
<li><a href="#L748" title="Defined at 748.">objectToBind</a></li>
<li><a href="#L755" title="Defined at 755.">newJRMPServer</a></li>
<li><a href="#L764" title="Defined at 764.">newIIOPServer</a></li>
<li><a href="#L769" title="Defined at 769.">byteArrayToBase64</a></li>
<li><a href="#L825" title="Defined at 825.">newIOException</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2002, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.management.remote.rmi;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.jmx.remote.security.MBeanServerFileAccessController;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.jmx.remote.internal.IIOPHelper;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.jmx.remote.util.ClassLogger;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.jmx.remote.util.EnvHelp;
<a id="L33" name="L33"></a>  33 
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.io.ByteArrayOutputStream;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.io.IOException;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.io.ObjectOutputStream;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.net.MalformedURLException;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.rmi.server.RMIClientSocketFactory;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.rmi.server.RMIServerSocketFactory;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.util.Collections;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.util.HashSet;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.util.Map;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.util.Set;
<a id="L46" name="L46"></a>  46 
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> javax.management.InstanceNotFoundException;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> javax.management.MBeanServer;
<a id="L49" name="L49"></a>  49 
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> javax.management.remote.JMXConnectionNotification;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> javax.management.remote.JMXConnector;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> javax.management.remote.JMXConnectorServer;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> javax.management.remote.JMXServiceURL;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> javax.management.remote.MBeanServerForwarder;
<a id="L55" name="L55"></a>  55 
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> javax.naming.InitialContext;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> javax.naming.NamingException;
<a id="L58" name="L58"></a>  58 
<div class="comment">
  <p>A JMX API connector server that creates RMI-based connections
  from remote clients.  Usually, such connector servers are made
  using {@link javax.management.remote.JMXConnectorServerFactory
  JMXConnectorServerFactory}.  However, specialized applications can
  use this class directly, for example with an {@link RMIServerImpl}
  object.</p>
  @since 1.5</div>
<a id="L69" name="L69"></a>  69 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6424.html" title="Multiple referred from 9 places.">RMIConnectorServer</a> <strong class="reserved">extends</strong> <a href="../S/3611.html#L65" title="Defined at 65 in src/javax/management/remote/JMXConnectorServer.java.">JMXConnectorServer</a> <em class="brace">{</em>
<div class="comment">
      <p>Name of the attribute that specifies whether the {@link
      RMIServer} stub that represents an RMI connector server should
      override an existing stub at the same address.  The value
      associated with this attribute, if any, should be a string that
      is equal, ignoring case, to <code>"true"</code> or
      <code>"false"</code>.  The default value is false.</p></div>
<a id="L78" name="L78"></a>  78     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> JNDI_REBIND_ATTRIBUTE =
<a id="L79" name="L79"></a>  79         "jmx.remote.jndi.rebind";
<a id="L80" name="L80"></a>  80 
<div class="comment">
      <p>Name of the attribute that specifies the {@link
      RMIClientSocketFactory} for the RMI objects created in
      conjunction with this connector. The value associated with this
      attribute must be of type <code>RMIClientSocketFactory</code> and can
      only be specified in the <code>Map</code> argument supplied when
      creating a connector server.</p></div>
<a id="L89" name="L89"></a>  89     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE =
<a id="L90" name="L90"></a>  90         "jmx.remote.rmi.client.socket.factory";
<a id="L91" name="L91"></a>  91 
<div class="comment">
      <p>Name of the attribute that specifies the {@link
      RMIServerSocketFactory} for the RMI objects created in
      conjunction with this connector. The value associated with this
      attribute must be of type <code>RMIServerSocketFactory</code> and can
      only be specified in the <code>Map</code> argument supplied when
      creating a connector server.</p></div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> RMI_SERVER_SOCKET_FACTORY_ATTRIBUTE =
<a id="L101" name="L101"></a> 101         "jmx.remote.rmi.server.socket.factory";
<a id="L102" name="L102"></a> 102 
<div class="comment">
      <p>Makes an <code>RMIConnectorServer</code>.
      This is equivalent to calling {@link #RMIConnectorServer(
      JMXServiceURL,Map,RMIServerImpl,MBeanServer)
      RMIConnectorServer(directoryURL,environment,null,null)}</p>
      @param url the URL defining how to create the connector server.
      Cannot be null.
      @param environment attributes governing the creation and
      storing of the RMI object.  Can be null, which is equivalent to
      an empty Map.
      @exception IllegalArgumentException if <code>url</code> is null.
      @exception MalformedURLException if <code>url</code> does not
      conform to the syntax for an RMI connector, or if its protocol
      is not recognized by this implementation. Only "rmi" and "iiop"
      are valid when this constructor is used.
      @exception IOException if the connector server cannot be created
      for some reason or if it is inevitable that its {@link #start()
      start} method will fail.</div>
<a id="L127" name="L127"></a> 127     <strong class="reserved">public</strong> RMIConnectorServer(<a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a> url, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L128" name="L128"></a> 128             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L129" name="L129"></a> 129         <strong class="reserved">this</strong>(url, <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>, (<a href="../S/3578.html#L260" title="Defined at 260 in src/javax/management/MBeanServer.java.">MBeanServer</a>) <strong class="reserved">null</strong>);
<a id="L130" name="L130"></a> 130     <em class="brace">}</em>
<a id="L131" name="L131"></a> 131 
<div class="comment">
      <p>Makes an <code>RMIConnectorServer</code> for the given MBean
      server.
      This is equivalent to calling {@link #RMIConnectorServer(
      JMXServiceURL,Map,RMIServerImpl,MBeanServer)
      RMIConnectorServer(directoryURL,environment,null,mbeanServer)}</p>
      @param url the URL defining how to create the connector server.
      Cannot be null.
      @param environment attributes governing the creation and
      storing of the RMI object.  Can be null, which is equivalent to
      an empty Map.
      @param mbeanServer the MBean server to which the new connector
      server is attached, or null if it will be attached by being
      registered as an MBean in the MBean server.
      @exception IllegalArgumentException if <code>url</code> is null.
      @exception MalformedURLException if <code>url</code> does not
      conform to the syntax for an RMI connector, or if its protocol
      is not recognized by this implementation. Only "rmi" and "iiop"
      are valid when this constructor is used.
      @exception IOException if the connector server cannot be created
      for some reason or if it is inevitable that its {@link #start()
      start} method will fail.</div>
<a id="L161" name="L161"></a> 161     <strong class="reserved">public</strong> RMIConnectorServer(<a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a> url, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>,
<a id="L162" name="L162"></a> 162                               <a href="../S/3578.html#L260" title="Defined at 260 in src/javax/management/MBeanServer.java.">MBeanServer</a> mbeanServer)
<a id="L163" name="L163"></a> 163             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L164" name="L164"></a> 164         <strong class="reserved">this</strong>(url, <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>, (<a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a>) <strong class="reserved">null</strong>, mbeanServer);
<a id="L165" name="L165"></a> 165     <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<div class="comment">
      <p>Makes an <code>RMIConnectorServer</code> for the given MBean
      server.</p>
      @param url the URL defining how to create the connector server.
      Cannot be null.
      @param environment attributes governing the creation and
      storing of the RMI object.  Can be null, which is equivalent to
      an empty Map.
      @param rmiServerImpl An implementation of the RMIServer interface,
       consistent with the protocol type specified in <var>url</var>.
       If this parameter is non null, the protocol type specified by
       <var>url</var> is not constrained, and is assumed to be valid.
       Otherwise, only "rmi" and "iiop" will be recognized.
      @param mbeanServer the MBean server to which the new connector
      server is attached, or null if it will be attached by being
      registered as an MBean in the MBean server.
      @exception IllegalArgumentException if <code>url</code> is null.
      @exception MalformedURLException if <code>url</code> does not
      conform to the syntax for an RMI connector, or if its protocol
      is not recognized by this implementation. Only "rmi" and "iiop"
      are recognized when <var>rmiServerImpl</var> is null.
      @exception IOException if the connector server cannot be created
      for some reason or if it is inevitable that its {@link #start()
      start} method will fail.
      @see #start</div>
<a id="L201" name="L201"></a> 201     <strong class="reserved">public</strong> RMIConnectorServer(<a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a> url, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>,
<a id="L202" name="L202"></a> 202                               <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> rmiServerImpl,
<a id="L203" name="L203"></a> 203                               <a href="../S/3578.html#L260" title="Defined at 260 in src/javax/management/MBeanServer.java.">MBeanServer</a> mbeanServer)
<a id="L204" name="L204"></a> 204             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L205" name="L205"></a> 205         <strong class="reserved">super</strong>(mbeanServer);
<a id="L206" name="L206"></a> 206 
<a id="L207" name="L207"></a> 207         <strong class="reserved">if</strong> (url == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L208" name="L208"></a> 208             <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Null JMXServiceURL");
<a id="L209" name="L209"></a> 209         <strong class="reserved">if</strong> (rmiServerImpl == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> prt = url.<a href="../D/21751.html" title="Multiple defined in 10 places.">getProtocol</a>();
<a id="L211" name="L211"></a> 211             <strong class="reserved">if</strong> (prt == <strong class="reserved">null</strong> || !(prt.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("rmi") || prt.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("iiop"))) <em class="brace">{</em>
<a id="L212" name="L212"></a> 212                 <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = "Invalid protocol type: " + prt;
<a id="L213" name="L213"></a> 213                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L214" name="L214"></a> 214             <em class="brace">}</em>
<a id="L215" name="L215"></a> 215             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> urlPath = url.<a href="../S/3612.html#L572" title="Defined at 572 in src/javax/management/remote/JMXServiceURL.java.">getURLPath</a>();
<a id="L216" name="L216"></a> 216             <strong class="reserved">if</strong> (!urlPath.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("")
<a id="L217" name="L217"></a> 217                 &amp;&amp; !urlPath.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("/")
<a id="L218" name="L218"></a> 218                 &amp;&amp; !urlPath.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("/jndi/")) <em class="brace">{</em>
<a id="L219" name="L219"></a> 219                 <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = "URL path must be empty or start with " +
<a id="L220" name="L220"></a> 220                     "/jndi/";
<a id="L221" name="L221"></a> 221                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L222" name="L222"></a> 222             <em class="brace">}</em>
<a id="L223" name="L223"></a> 223         <em class="brace">}</em>
<a id="L224" name="L224"></a> 224 
<a id="L225" name="L225"></a> 225         <strong class="reserved">if</strong> (<a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a> == <strong class="reserved">null</strong>)
<a id="L226" name="L226"></a> 226             <strong class="reserved">this</strong>.<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> = <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L4519" title="Defined at 4519 in src/java/util/Collections.java.">emptyMap</a>();
<a id="L227" name="L227"></a> 227         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L228" name="L228"></a> 228             <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../D/12371.html" title="Multiple defined in 5 places.">checkAttributes</a>(<a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>);
<a id="L229" name="L229"></a> 229             <strong class="reserved">this</strong>.<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> = <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L1432" title="Defined at 1432 in src/java/util/Collections.java.">unmodifiableMap</a>(<a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>);
<a id="L230" name="L230"></a> 230         <em class="brace">}</em>
<a id="L231" name="L231"></a> 231 
<a id="L232" name="L232"></a> 232         <strong class="reserved">this</strong>.<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> = url;
<a id="L233" name="L233"></a> 233         <strong class="reserved">this</strong>.rmiServerImpl = rmiServerImpl;
<a id="L234" name="L234"></a> 234     <em class="brace">}</em>
<a id="L235" name="L235"></a> 235 
<div class="comment">
      <p>Returns a client stub for this connector server.  A client
      stub is a serializable object whose {@link
      JMXConnector#connect(Map) connect} method can be used to make
      one new connection to this connector server.</p>
      @param env client connection parameters of the same sort that
      could be provided to {@link JMXConnector#connect(Map)
      JMXConnector.connect(Map)}.  Can be null, which is equivalent
      to an empty map.
      @return a client stub that can be used to make a new connection
      to this connector server.
      @exception UnsupportedOperationException if this connector
      server does not support the generation of client stubs.
      @exception IllegalStateException if the JMXConnectorServer is
      not started (see {@link #isActive()}).
      @exception IOException if a communications problem means that a
      stub cannot be created.
     *</div>
<a id="L259" name="L259"></a> 259     <strong class="reserved">public</strong> <a href="../S/3635.html#L49" title="Defined at 49 in src/javax/management/remote/JMXConnector.java.">JMXConnector</a> toJMXConnector(<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L260" name="L260"></a> 260         <em class="comment">// The serialized for of rmiServerImpl is automatically</em>
<a id="L261" name="L261"></a> 261         <em class="comment">// a RMI server stub.</em>
<a id="L262" name="L262"></a> 262         <strong class="reserved">if</strong> (!<a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a>()) <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L263" name="L263"></a> 263             <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Connector is not active");
<a id="L264" name="L264"></a> 264 
<a id="L265" name="L265"></a> 265         <em class="comment">// Merge maps</em>
<a id="L266" name="L266"></a> 266         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>&gt; usemap = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>&gt;(
<a id="L267" name="L267"></a> 267                 (<strong class="reserved">this</strong>.<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>==<strong class="reserved">null</strong>)?<a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>&gt;<a href="../S/1147.html#L4519" title="Defined at 4519 in src/java/util/Collections.java.">emptyMap</a>():
<a id="L268" name="L268"></a> 268                     <strong class="reserved">this</strong>.<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270         <strong class="reserved">if</strong> (<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L271" name="L271"></a> 271             <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../D/12371.html" title="Multiple defined in 5 places.">checkAttributes</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L272" name="L272"></a> 272             usemap.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L273" name="L273"></a> 273         <em class="brace">}</em>
<a id="L274" name="L274"></a> 274 
<a id="L275" name="L275"></a> 275         usemap = <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../S/6493.html#L439" title="Defined at 439 in src/com/sun/jmx/remote/util/EnvHelp.java.">filterAttributes</a>(usemap);
<a id="L276" name="L276"></a> 276 
<a id="L277" name="L277"></a> 277         <strong class="reserved">final</strong> <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> stub=(<a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a>)rmiServerImpl.<a href="../D/35496.html" title="Multiple defined in 10 places.">toStub</a>();
<a id="L278" name="L278"></a> 278 
<a id="L279" name="L279"></a> 279         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3626.html#L121" title="Defined at 121 in src/javax/management/remote/rmi/RMIConnector.java.">RMIConnector</a>(stub, usemap);
<a id="L280" name="L280"></a> 280     <em class="brace">}</em>
<a id="L281" name="L281"></a> 281 
<div class="comment">
      <p>Activates the connector server, that is starts listening for
      client connections.  Calling this method when the connector
      server is already active has no effect.  Calling this method
      when the connector server has been stopped will generate an
      <code>IOException</code>.</p>
      <p>The behavior of this method when called for the first time
      depends on the parameters that were supplied at construction,
      as described below.</p>
      <p>First, an object of a subclass of {@link RMIServerImpl} is
      required, to export the connector server through RMI:</p>
      <ul><li>If an <code>RMIServerImpl</code> was supplied to the
      constructor, it is used.
      </li><li>Otherwise, if the protocol part of the
      <code>JMXServiceURL</code> supplied to the constructor was
      <code>iiop</code>, an object of type {@link RMIIIOPServerImpl}
      is created.
      </li><li>Otherwise, if the <code>JMXServiceURL</code>
      was null, or its protocol part was <code>rmi</code>, an object
      of type {@link RMIJRMPServerImpl} is created.
      </li><li>Otherwise, the implementation can create an
      implementation-specific {@link RMIServerImpl} or it can throw
      {@link MalformedURLException}.
      </li></ul>
      <p>If the given address includes a JNDI directory URL as
      specified in the package documentation for {@link
      javax.management.remote.rmi}, then this
      <code>RMIConnectorServer</code> will bootstrap by binding the
      <code>RMIServerImpl</code> to the given address.</p>
      <p>If the URL path part of the <code>JMXServiceURL</code> was
      empty or a single slash (<code>/</code>), then the RMI object
      will not be bound to a directory.  Instead, a reference to it
      will be encoded in the URL path of the RMIConnectorServer
      address (returned by {@link #getAddress()}).  The encodings for
      <code>rmi</code> and <code>iiop</code> are described in the
      package documentation for {@link
      javax.management.remote.rmi}.</p>
      <p>The behavior when the URL path is neither empty nor a JNDI
      directory URL, or when the protocol is neither <code>rmi</code>
      nor <code>iiop</code>, is implementation defined, and may
      include throwing {@link MalformedURLException} when the
      connector server is created or when it is started.</p>
      @exception IllegalStateException if the connector server has
      not been attached to an MBean server.
      @exception IOException if the connector server cannot be
      started, or in the case of the <code>iiop</code> protocol, that
      RMI/IIOP is not supported.</div>
<a id="L343" name="L343"></a> 343     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/28780.html" title="Multiple referred from 2027 places.">start</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L344" name="L344"></a> 344         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> tracing = <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../S/6492.html#L61" title="Defined at 61 in src/com/sun/jmx/remote/util/ClassLogger.java.">traceOn</a>();
<a id="L345" name="L345"></a> 345 
<a id="L346" name="L346"></a> 346         <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == STARTED) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347             <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "already started");
<a id="L348" name="L348"></a> 348             <strong class="reserved">return</strong>;
<a id="L349" name="L349"></a> 349         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == STOPPED) <em class="brace">{</em>
<a id="L350" name="L350"></a> 350             <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "already stopped");
<a id="L351" name="L351"></a> 351             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("The server has been stopped.");
<a id="L352" name="L352"></a> 352         <em class="brace">}</em>
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354         <strong class="reserved">if</strong> (<a href="../D/20324.html" title="Multiple defined in 8 places.">getMBeanServer</a>() == <strong class="reserved">null</strong>)
<a id="L355" name="L355"></a> 355             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("This connector server is not " +
<a id="L356" name="L356"></a> 356                                             "attached to an MBean server");
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358         <em class="comment">// Check the internal access file property to see</em>
<a id="L359" name="L359"></a> 359         <em class="comment">// if an MBeanServerForwarder is to be provided</em>
<a id="L360" name="L360"></a> 360         <em class="comment">//</em>
<a id="L361" name="L361"></a> 361         <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362             <em class="comment">// Check if access file property is specified</em>
<a id="L363" name="L363"></a> 363             <em class="comment">//</em>
<a id="L364" name="L364"></a> 364             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> accessFile =
<a id="L365" name="L365"></a> 365                 (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("jmx.remote.x.access.file");
<a id="L366" name="L366"></a> 366             <strong class="reserved">if</strong> (accessFile != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L367" name="L367"></a> 367                 <em class="comment">// Access file property specified, create an instance</em>
<a id="L368" name="L368"></a> 368                 <em class="comment">// of the MBeanServerFileAccessController class</em>
<a id="L369" name="L369"></a> 369                 <em class="comment">//</em>
<a id="L370" name="L370"></a> 370                 <a href="../S/3620.html#L40" title="Defined at 40 in src/javax/management/remote/MBeanServerForwarder.java.">MBeanServerForwarder</a> mbsf;
<a id="L371" name="L371"></a> 371                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L372" name="L372"></a> 372                     mbsf = <strong class="reserved">new</strong> <a href="../S/6494.html#L82" title="Defined at 82 in src/com/sun/jmx/remote/security/MBeanServerFileAccessController.java.">MBeanServerFileAccessController</a>(accessFile);
<a id="L373" name="L373"></a> 373                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374                     <strong class="reserved">throw</strong> <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(
<a id="L375" name="L375"></a> 375                         <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>()), e);
<a id="L376" name="L376"></a> 376                 <em class="brace">}</em>
<a id="L377" name="L377"></a> 377                 <em class="comment">// Set the MBeanServerForwarder</em>
<a id="L378" name="L378"></a> 378                 <em class="comment">//</em>
<a id="L379" name="L379"></a> 379                 <a href="../D/33165.html" title="Multiple defined in 3 places.">setMBeanServerForwarder</a>(mbsf);
<a id="L380" name="L380"></a> 380             <em class="brace">}</em>
<a id="L381" name="L381"></a> 381         <em class="brace">}</em>
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L384" name="L384"></a> 384             <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "setting default class loader");
<a id="L385" name="L385"></a> 385             defaultClassLoader = <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../S/6493.html#L121" title="Defined at 121 in src/com/sun/jmx/remote/util/EnvHelp.java.">resolveServerClassLoader</a>(
<a id="L386" name="L386"></a> 386                     <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../D/20324.html" title="Multiple defined in 8 places.">getMBeanServer</a>());
<a id="L387" name="L387"></a> 387         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3436.html#L34" title="Defined at 34 in src/javax/management/InstanceNotFoundException.java.">InstanceNotFoundException</a> infc) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <strong class="reserved">new</strong>
<a id="L389" name="L389"></a> 389                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("ClassLoader not found: "+infc);
<a id="L390" name="L390"></a> 390             <strong class="reserved">throw</strong> <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>,infc);
<a id="L391" name="L391"></a> 391         <em class="brace">}</em>
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393         <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "setting RMIServer object");
<a id="L394" name="L394"></a> 394         <strong class="reserved">final</strong> <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> rmiServer;
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396         <strong class="reserved">if</strong> (rmiServerImpl != <strong class="reserved">null</strong>)
<a id="L397" name="L397"></a> 397             rmiServer = rmiServerImpl;
<a id="L398" name="L398"></a> 398         <strong class="reserved">else</strong>
<a id="L399" name="L399"></a> 399             rmiServer = <a href="../S/3633.html#L651" title="Defined at 651 in src/javax/management/remote/rmi/RMIConnectorServer.java.">newServer</a>();
<a id="L400" name="L400"></a> 400 
<a id="L401" name="L401"></a> 401         rmiServer.<a href="../D/33164.html" title="Multiple defined in 14 places.">setMBeanServer</a>(<a href="../D/20324.html" title="Multiple defined in 8 places.">getMBeanServer</a>());
<a id="L402" name="L402"></a> 402         rmiServer.<a href="../S/3627.html#L111" title="Defined at 111 in src/javax/management/remote/rmi/RMIServerImpl.java.">setDefaultClassLoader</a>(defaultClassLoader);
<a id="L403" name="L403"></a> 403         rmiServer.<a href="../S/3627.html#L81" title="Defined at 81 in src/javax/management/remote/rmi/RMIServerImpl.java.">setRMIConnectorServer</a>(<strong class="reserved">this</strong>);
<a id="L404" name="L404"></a> 404         rmiServer.<a href="../D/15875.html" title="Multiple defined in 7 places.">export</a>();
<a id="L405" name="L405"></a> 405 
<a id="L406" name="L406"></a> 406         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L407" name="L407"></a> 407             <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "getting RMIServer object to export");
<a id="L408" name="L408"></a> 408             <strong class="reserved">final</strong> <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> objref = <a href="../S/3633.html#L748" title="Defined at 748 in src/javax/management/remote/rmi/RMIConnectorServer.java.">objectToBind</a>(rmiServer, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410             <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../S/3612.html#L572" title="Defined at 572 in src/javax/management/remote/JMXServiceURL.java.">getURLPath</a>().<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("/jndi/")) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411                 <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> jndiUrl = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../S/3612.html#L572" title="Defined at 572 in src/javax/management/remote/JMXServiceURL.java.">getURLPath</a>().<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(6);
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413                 <strong class="reserved">if</strong> (tracing)
<a id="L414" name="L414"></a> 414                     <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "Using external directory: " + jndiUrl);
<a id="L415" name="L415"></a> 415 
<a id="L416" name="L416"></a> 416                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> stringBoolean = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(JNDI_REBIND_ATTRIBUTE);
<a id="L417" name="L417"></a> 417                 <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../D/30364.html" title="Multiple defined in 23 places.">rebind</a> = <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../D/13167.html" title="Multiple defined in 2 places.">computeBooleanFromString</a>( stringBoolean );
<a id="L418" name="L418"></a> 418 
<a id="L419" name="L419"></a> 419                 <strong class="reserved">if</strong> (tracing)
<a id="L420" name="L420"></a> 420                     <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", JNDI_REBIND_ATTRIBUTE + "=" + <a href="../D/30364.html" title="Multiple defined in 23 places.">rebind</a>);
<a id="L421" name="L421"></a> 421 
<a id="L422" name="L422"></a> 422                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L423" name="L423"></a> 423                     <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "binding to " + jndiUrl);
<a id="L424" name="L424"></a> 424 
<a id="L425" name="L425"></a> 425                     <strong class="reserved">final</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;?, ?&gt; usemap = <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../S/6493.html#L735" title="Defined at 735 in src/com/sun/jmx/remote/util/EnvHelp.java.">mapToHashtable</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L426" name="L426"></a> 426 
<a id="L427" name="L427"></a> 427                     <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(jndiUrl, usemap, objref, <a href="../D/30364.html" title="Multiple defined in 23 places.">rebind</a>);
<a id="L428" name="L428"></a> 428 
<a id="L429" name="L429"></a> 429                     boundJndiUrl = jndiUrl;
<a id="L430" name="L430"></a> 430                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4338.html#L60" title="Defined at 60 in src/javax/naming/NamingException.java.">NamingException</a> e) <em class="brace">{</em>
<a id="L431" name="L431"></a> 431                     <em class="comment">// fit e in the nested exception if we are on 1.4</em>
<a id="L432" name="L432"></a> 432                     <strong class="reserved">throw</strong> <a href="../D/28008.html" title="Multiple defined in 2 places.">newIOException</a>("Cannot bind to URL ["+jndiUrl+"]: "
<a id="L433" name="L433"></a> 433                                          + e, e);
<a id="L434" name="L434"></a> 434                 <em class="brace">}</em>
<a id="L435" name="L435"></a> 435             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L436" name="L436"></a> 436                 <em class="comment">// if jndiURL is null, we must encode the stub into the URL.</em>
<a id="L437" name="L437"></a> 437                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "Encoding URL");
<a id="L438" name="L438"></a> 438 
<a id="L439" name="L439"></a> 439                 <a href="../S/3633.html#L670" title="Defined at 670 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeStubInAddress</a>(objref, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L440" name="L440"></a> 440 
<a id="L441" name="L441"></a> 441                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "Encoded URL: " + <strong class="reserved">this</strong>.<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>);
<a id="L442" name="L442"></a> 442             <em class="brace">}</em>
<a id="L443" name="L443"></a> 443         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L444" name="L444"></a> 444             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L445" name="L445"></a> 445                 rmiServer.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L446" name="L446"></a> 446             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447                 <em class="comment">// OK: we are already throwing another exception</em>
<a id="L448" name="L448"></a> 448             <em class="brace">}</em>
<a id="L449" name="L449"></a> 449             <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>)
<a id="L450" name="L450"></a> 450                 <strong class="reserved">throw</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>) e;
<a id="L451" name="L451"></a> 451             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>)
<a id="L452" name="L452"></a> 452                 <strong class="reserved">throw</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>) e;
<a id="L453" name="L453"></a> 453             <strong class="reserved">else</strong>
<a id="L454" name="L454"></a> 454                 <strong class="reserved">throw</strong> <a href="../D/28008.html" title="Multiple defined in 2 places.">newIOException</a>("Got unexpected exception while " +
<a id="L455" name="L455"></a> 455                                      "starting the connector server: "
<a id="L456" name="L456"></a> 456                                      + e, e);
<a id="L457" name="L457"></a> 457         <em class="brace">}</em>
<a id="L458" name="L458"></a> 458 
<a id="L459" name="L459"></a> 459         rmiServerImpl = rmiServer;
<a id="L460" name="L460"></a> 460 
<a id="L461" name="L461"></a> 461         <strong class="reserved">synchronized</strong>(openedServers) <em class="brace">{</em>
<a id="L462" name="L462"></a> 462             openedServers.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>);
<a id="L463" name="L463"></a> 463         <em class="brace">}</em>
<a id="L464" name="L464"></a> 464 
<a id="L465" name="L465"></a> 465         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = STARTED;
<a id="L466" name="L466"></a> 466 
<a id="L467" name="L467"></a> 467         <strong class="reserved">if</strong> (tracing) <em class="brace">{</em>
<a id="L468" name="L468"></a> 468             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "Connector Server Address = " + <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>);
<a id="L469" name="L469"></a> 469             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("start", "started.");
<a id="L470" name="L470"></a> 470         <em class="brace">}</em>
<a id="L471" name="L471"></a> 471     <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<div class="comment">
      <p>Deactivates the connector server, that is, stops listening for
      client connections.  Calling this method will also close all
      client connections that were made by this server.  After this
      method returns, whether normally or with an exception, the
      connector server will not create any new client
      connections.</p>
      <p>Once a connector server has been stopped, it cannot be started
      again.</p>
      <p>Calling this method when the connector server has already
      been stopped has no effect.  Calling this method when the
      connector server has not yet been started will disable the
      connector server object permanently.</p>
      <p>If closing a client connection produces an exception, that
      exception is not thrown from this method.  A {@link
      JMXConnectionNotification} is emitted from this MBean with the
      connection ID of the connection that could not be closed.</p>
      <p>Closing a connector server is a potentially slow operation.
      For example, if a client machine with an open connection has
      crashed, the close operation might have to wait for a network
      protocol timeout.  Callers that do not want to block in a close
      operation should do it in a separate thread.</p>
      <p>This method calls the method {@link RMIServerImpl#close()
      close} on the connector server's <code>RMIServerImpl</code>
      object.</p>
      <p>If the <code>RMIServerImpl</code> was bound to a JNDI
      directory by the {@link #start() start} method, it is unbound
      from the directory by this method.</p>
      @exception IOException if the server cannot be closed cleanly,
      or if the <code>RMIServerImpl</code> cannot be unbound from the
      directory.  When this exception is thrown, the server has
      already attempted to close all client connections, if
      appropriate; to call {@link RMIServerImpl#close()}; and to
      unbind the <code>RMIServerImpl</code> from its directory, if
      appropriate.  All client connections are closed except possibly
      those that generated exceptions when the server attempted to
      close them.</div>
<a id="L518" name="L518"></a> 518     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28900.html" title="Multiple referred from 176 places.">stop</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L519" name="L519"></a> 519         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> tracing = <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../S/6492.html#L61" title="Defined at 61 in src/com/sun/jmx/remote/util/ClassLogger.java.">traceOn</a>();
<a id="L520" name="L520"></a> 520 
<a id="L521" name="L521"></a> 521         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522             <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == STOPPED) <em class="brace">{</em>
<a id="L523" name="L523"></a> 523                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop","already stopped.");
<a id="L524" name="L524"></a> 524                 <strong class="reserved">return</strong>;
<a id="L525" name="L525"></a> 525             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == CREATED) <em class="brace">{</em>
<a id="L526" name="L526"></a> 526                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop","not started yet.");
<a id="L527" name="L527"></a> 527             <em class="brace">}</em>
<a id="L528" name="L528"></a> 528 
<a id="L529" name="L529"></a> 529             <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop", "stopping.");
<a id="L530" name="L530"></a> 530             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = STOPPED;
<a id="L531" name="L531"></a> 531         <em class="brace">}</em>
<a id="L532" name="L532"></a> 532 
<a id="L533" name="L533"></a> 533         <strong class="reserved">synchronized</strong>(openedServers) <em class="brace">{</em>
<a id="L534" name="L534"></a> 534             openedServers.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<strong class="reserved">this</strong>);
<a id="L535" name="L535"></a> 535         <em class="brace">}</em>
<a id="L536" name="L536"></a> 536 
<a id="L537" name="L537"></a> 537         <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> = <strong class="reserved">null</strong>;
<a id="L538" name="L538"></a> 538 
<a id="L539" name="L539"></a> 539         <em class="comment">// rmiServerImpl can be null if stop() called without start()</em>
<a id="L540" name="L540"></a> 540         <strong class="reserved">if</strong> (rmiServerImpl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L541" name="L541"></a> 541             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L542" name="L542"></a> 542                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop", "closing RMI server.");
<a id="L543" name="L543"></a> 543                 rmiServerImpl.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L544" name="L544"></a> 544             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop", "failed to close RMI server: " + e);
<a id="L546" name="L546"></a> 546                 <strong class="reserved">if</strong> (<a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../S/6492.html#L65" title="Defined at 65 in src/com/sun/jmx/remote/util/ClassLogger.java.">debugOn</a>()) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>("stop",e);
<a id="L547" name="L547"></a> 547                 <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> = e;
<a id="L548" name="L548"></a> 548             <em class="brace">}</em>
<a id="L549" name="L549"></a> 549         <em class="brace">}</em>
<a id="L550" name="L550"></a> 550 
<a id="L551" name="L551"></a> 551         <strong class="reserved">if</strong> (boundJndiUrl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                 <strong class="reserved">if</strong> (tracing)
<a id="L554" name="L554"></a> 554                     <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop",
<a id="L555" name="L555"></a> 555                           "unbind from external directory: " + boundJndiUrl);
<a id="L556" name="L556"></a> 556 
<a id="L557" name="L557"></a> 557                 <strong class="reserved">final</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;?, ?&gt; usemap = <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../S/6493.html#L735" title="Defined at 735 in src/com/sun/jmx/remote/util/EnvHelp.java.">mapToHashtable</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L558" name="L558"></a> 558 
<a id="L559" name="L559"></a> 559                 <a href="../S/4308.html#L131" title="Defined at 131 in src/javax/naming/InitialContext.java.">InitialContext</a> <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> =
<a id="L560" name="L560"></a> 560                     <strong class="reserved">new</strong> <a href="../S/4308.html#L131" title="Defined at 131 in src/javax/naming/InitialContext.java.">InitialContext</a>(usemap);
<a id="L561" name="L561"></a> 561 
<a id="L562" name="L562"></a> 562                 <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../D/35799.html" title="Multiple defined in 13 places.">unbind</a>(boundJndiUrl);
<a id="L563" name="L563"></a> 563 
<a id="L564" name="L564"></a> 564                 <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L565" name="L565"></a> 565             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4338.html#L60" title="Defined at 60 in src/javax/naming/NamingException.java.">NamingException</a> e) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566                 <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop", "failed to unbind RMI server: "+e);
<a id="L567" name="L567"></a> 567                 <strong class="reserved">if</strong> (<a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../S/6492.html#L65" title="Defined at 65 in src/com/sun/jmx/remote/util/ClassLogger.java.">debugOn</a>()) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>("stop",e);
<a id="L568" name="L568"></a> 568                 <em class="comment">// fit e in as the nested exception if we are on 1.4</em>
<a id="L569" name="L569"></a> 569                 <strong class="reserved">if</strong> (<a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> == <strong class="reserved">null</strong>)
<a id="L570" name="L570"></a> 570                     <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> = <a href="../D/28008.html" title="Multiple defined in 2 places.">newIOException</a>("Cannot bind to URL: " + e, e);
<a id="L571" name="L571"></a> 571             <em class="brace">}</em>
<a id="L572" name="L572"></a> 572         <em class="brace">}</em>
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574         <strong class="reserved">if</strong> (<a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> != <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a>;
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576         <strong class="reserved">if</strong> (tracing) <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>.<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>("stop", "stopped");
<a id="L577" name="L577"></a> 577     <em class="brace">}</em>
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">boolean</strong> <a href="../R/21137.html" title="Multiple referred from 67 places.">isActive</a>() <em class="brace">{</em>
<a id="L580" name="L580"></a> 580         <strong class="reserved">return</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == STARTED);
<a id="L581" name="L581"></a> 581     <em class="brace">}</em>
<a id="L582" name="L582"></a> 582 
<a id="L583" name="L583"></a> 583     <strong class="reserved">public</strong> <a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a> <a href="../R/14983.html" title="Multiple referred from 105 places.">getAddress</a>() <em class="brace">{</em>
<a id="L584" name="L584"></a> 584         <strong class="reserved">if</strong> (!<a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a>())
<a id="L585" name="L585"></a> 585             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L586" name="L586"></a> 586         <strong class="reserved">return</strong> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>;
<a id="L587" name="L587"></a> 587     <em class="brace">}</em>
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589     <strong class="reserved">public</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../R/15169.html" title="Multiple referred from 431 places.">getAttributes</a>() <em class="brace">{</em>
<a id="L590" name="L590"></a> 590         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../S/6493.html#L439" title="Defined at 439 in src/com/sun/jmx/remote/util/EnvHelp.java.">filterAttributes</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L591" name="L591"></a> 591         <strong class="reserved">return</strong> <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L1432" title="Defined at 1432 in src/java/util/Collections.java.">unmodifiableMap</a>(<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L592" name="L592"></a> 592     <em class="brace">}</em>
<a id="L593" name="L593"></a> 593 
<a id="L594" name="L594"></a> 594     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L595" name="L595"></a> 595     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong>
<a id="L596" name="L596"></a> 596         <strong class="reserved">void</strong> <a href="../R/27707.html" title="Multiple referred from 2 places.">setMBeanServerForwarder</a>(<a href="../S/3620.html#L40" title="Defined at 40 in src/javax/management/remote/MBeanServerForwarder.java.">MBeanServerForwarder</a> mbsf) <em class="brace">{</em>
<a id="L597" name="L597"></a> 597         <strong class="reserved">super</strong>.<a href="../D/33165.html" title="Multiple defined in 3 places.">setMBeanServerForwarder</a>(mbsf);
<a id="L598" name="L598"></a> 598         <strong class="reserved">if</strong> (rmiServerImpl != <strong class="reserved">null</strong>)
<a id="L599" name="L599"></a> 599             rmiServerImpl.<a href="../D/33164.html" title="Multiple defined in 14 places.">setMBeanServer</a>(<a href="../D/20324.html" title="Multiple defined in 8 places.">getMBeanServer</a>());
<a id="L600" name="L600"></a> 600     <em class="brace">}</em>
<a id="L601" name="L601"></a> 601 
<div class="comment">
 We repeat the definitions of connection{Opened,Closed,Failed}
       here so that they are accessible to other classes in this package
       even though they have protected access.  </div>
<a id="L605" name="L605"></a> 605 
<a id="L606" name="L606"></a> 606     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L607" name="L607"></a> 607     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11909.html" title="Multiple referred from 2 places.">connectionOpened</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> connectionId, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>,
<a id="L608" name="L608"></a> 608                                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData) <em class="brace">{</em>
<a id="L609" name="L609"></a> 609         <strong class="reserved">super</strong>.<a href="../D/13265.html" title="Multiple defined in 2 places.">connectionOpened</a>(connectionId, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, userData);
<a id="L610" name="L610"></a> 610     <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<a id="L612" name="L612"></a> 612     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L613" name="L613"></a> 613     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11907.html" title="Multiple referred from 2 places.">connectionClosed</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> connectionId, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>,
<a id="L614" name="L614"></a> 614                                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData) <em class="brace">{</em>
<a id="L615" name="L615"></a> 615         <strong class="reserved">super</strong>.<a href="../D/13262.html" title="Multiple defined in 3 places.">connectionClosed</a>(connectionId, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, userData);
<a id="L616" name="L616"></a> 616     <em class="brace">}</em>
<a id="L617" name="L617"></a> 617 
<a id="L618" name="L618"></a> 618     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L619" name="L619"></a> 619     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/3633.html#L621" title="Referred from 621 in src/javax/management/remote/rmi/RMIConnectorServer.java.">connectionFailed</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> connectionId, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>,
<a id="L620" name="L620"></a> 620                                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData) <em class="brace">{</em>
<a id="L621" name="L621"></a> 621         <strong class="reserved">super</strong>.<a href="../D/13264.html" title="Multiple defined in 2 places.">connectionFailed</a>(connectionId, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, userData);
<a id="L622" name="L622"></a> 622     <em class="brace">}</em>
<a id="L623" name="L623"></a> 623 
<div class="comment">
      Bind a stub to a registry.
      @param jndiUrl URL of the stub in the registry, extracted
             from the <code>JMXServiceURL</code>.
      @param attributes A Hashtable containing environment parameters,
             built from the Map specified at this object creation.
      @param rmiServer The object to bind in the registry
      @param rebind true if the object must be rebound.
     *</div>
<a id="L633" name="L633"></a> 633     <strong class="reserved">void</strong> <a href="../R/10598.html" title="Multiple referred from 221 places.">bind</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> jndiUrl, <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;?, ?&gt; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>,
<a id="L634" name="L634"></a> 634               <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> rmiServer, <strong class="reserved">boolean</strong> <a href="../D/30364.html" title="Multiple defined in 23 places.">rebind</a>)
<a id="L635" name="L635"></a> 635         <strong class="reserved">throws</strong> <a href="../S/4338.html#L60" title="Defined at 60 in src/javax/naming/NamingException.java.">NamingException</a>, <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> <em class="brace">{</em>
<a id="L636" name="L636"></a> 636         <em class="comment">// if jndiURL is not null, we nust bind the stub to a</em>
<a id="L637" name="L637"></a> 637         <em class="comment">// directory.</em>
<a id="L638" name="L638"></a> 638         <a href="../S/4308.html#L131" title="Defined at 131 in src/javax/naming/InitialContext.java.">InitialContext</a> <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> =
<a id="L639" name="L639"></a> 639             <strong class="reserved">new</strong> <a href="../S/4308.html#L131" title="Defined at 131 in src/javax/naming/InitialContext.java.">InitialContext</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L640" name="L640"></a> 640 
<a id="L641" name="L641"></a> 641         <strong class="reserved">if</strong> (<a href="../D/30364.html" title="Multiple defined in 23 places.">rebind</a>)
<a id="L642" name="L642"></a> 642             <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../D/30364.html" title="Multiple defined in 23 places.">rebind</a>(jndiUrl, rmiServer);
<a id="L643" name="L643"></a> 643         <strong class="reserved">else</strong>
<a id="L644" name="L644"></a> 644             <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(jndiUrl, rmiServer);
<a id="L645" name="L645"></a> 645         <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L646" name="L646"></a> 646     <em class="brace">}</em>
<a id="L647" name="L647"></a> 647 
<div class="comment">
      Creates a new RMIServerImpl.
     *</div>
<a id="L651" name="L651"></a> 651     <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> <a href="../S/3633.html#L399" title="Referred from 399 in src/javax/management/remote/rmi/RMIConnectorServer.java.">newServer</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L652" name="L652"></a> 652         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> iiop = <a href="../S/3633.html#L695" title="Defined at 695 in src/javax/management/remote/rmi/RMIConnectorServer.java.">isIiopURL</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>,<strong class="reserved">true</strong>);
<a id="L653" name="L653"></a> 653         <strong class="reserved">final</strong> <strong class="reserved">int</strong> port;
<a id="L654" name="L654"></a> 654         <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> == <strong class="reserved">null</strong>)
<a id="L655" name="L655"></a> 655             port = 0;
<a id="L656" name="L656"></a> 656         <strong class="reserved">else</strong>
<a id="L657" name="L657"></a> 657             port = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>();
<a id="L658" name="L658"></a> 658         <strong class="reserved">if</strong> (iiop)
<a id="L659" name="L659"></a> 659             <strong class="reserved">return</strong> <a href="../S/3633.html#L764" title="Defined at 764 in src/javax/management/remote/rmi/RMIConnectorServer.java.">newIIOPServer</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L660" name="L660"></a> 660         <strong class="reserved">else</strong>
<a id="L661" name="L661"></a> 661             <strong class="reserved">return</strong> <a href="../S/3633.html#L755" title="Defined at 755 in src/javax/management/remote/rmi/RMIConnectorServer.java.">newJRMPServer</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, port);
<a id="L662" name="L662"></a> 662     <em class="brace">}</em>
<a id="L663" name="L663"></a> 663 
<div class="comment">
      Encode a stub into the JMXServiceURL.
      @param rmiServer The stub object to encode in the URL
      @param attributes A Map containing environment parameters,
             built from the Map specified at this object creation.
     *</div>
<a id="L670" name="L670"></a> 670     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/3633.html#L439" title="Referred from 439 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeStubInAddress</a>(
<a id="L671" name="L671"></a> 671             <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> rmiServer, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>)
<a id="L672" name="L672"></a> 672             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L673" name="L673"></a> 673 
<a id="L674" name="L674"></a> 674         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> protocol, host;
<a id="L675" name="L675"></a> 675         <strong class="reserved">final</strong> <strong class="reserved">int</strong> port;
<a id="L676" name="L676"></a> 676 
<a id="L677" name="L677"></a> 677         <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L678" name="L678"></a> 678             <strong class="reserved">if</strong> (<a href="../S/6502.html#L40" title="Defined at 40 in src/com/sun/jmx/remote/internal/IIOPHelper.java.">IIOPHelper</a>.<a href="../D/26294.html" title="Multiple defined in 4 places.">isStub</a>(rmiServer))
<a id="L679" name="L679"></a> 679                 protocol = "iiop";
<a id="L680" name="L680"></a> 680             <strong class="reserved">else</strong>
<a id="L681" name="L681"></a> 681                 protocol = "rmi";
<a id="L682" name="L682"></a> 682             host = <strong class="reserved">null</strong>; <em class="comment">// will default to local host name</em>
<a id="L683" name="L683"></a> 683             port = 0;
<a id="L684" name="L684"></a> 684         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L685" name="L685"></a> 685             protocol = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/21751.html" title="Multiple defined in 10 places.">getProtocol</a>();
<a id="L686" name="L686"></a> 686             host = (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/19490.html" title="Multiple defined in 17 places.">getHost</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("")) ? <strong class="reserved">null</strong> : <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/19490.html" title="Multiple defined in 17 places.">getHost</a>();
<a id="L687" name="L687"></a> 687             port = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>();
<a id="L688" name="L688"></a> 688         <em class="brace">}</em>
<a id="L689" name="L689"></a> 689 
<a id="L690" name="L690"></a> 690         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> urlPath = <a href="../S/3633.html#L714" title="Defined at 714 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeStub</a>(rmiServer, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L691" name="L691"></a> 691 
<a id="L692" name="L692"></a> 692         <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> = <strong class="reserved">new</strong> <a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a>(protocol, host, port, urlPath);
<a id="L693" name="L693"></a> 693     <em class="brace">}</em>
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21563.html" title="Multiple referred from 2 places.">isIiopURL</a>(<a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a> directoryURL, <strong class="reserved">boolean</strong> strict)
<a id="L696" name="L696"></a> 696         <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> <em class="brace">{</em>
<a id="L697" name="L697"></a> 697         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> protocol = directoryURL.<a href="../D/21751.html" title="Multiple defined in 10 places.">getProtocol</a>();
<a id="L698" name="L698"></a> 698         <strong class="reserved">if</strong> (protocol.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("rmi"))
<a id="L699" name="L699"></a> 699             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L700" name="L700"></a> 700         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (protocol.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("iiop"))
<a id="L701" name="L701"></a> 701             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L702" name="L702"></a> 702         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (strict) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703 
<a id="L704" name="L704"></a> 704             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>("URL must have protocol " +
<a id="L705" name="L705"></a> 705                                             "\"rmi\" or \"iiop\": \"" +
<a id="L706" name="L706"></a> 706                                             protocol + "\"");
<a id="L707" name="L707"></a> 707         <em class="brace">}</em>
<a id="L708" name="L708"></a> 708         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L709" name="L709"></a> 709     <em class="brace">}</em>
<a id="L710" name="L710"></a> 710 
<div class="comment">
      Returns the IOR of the given rmiServer.
     *</div>
<a id="L714" name="L714"></a> 714     <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3633.html#L690" title="Referred from 690 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeStub</a>(
<a id="L715" name="L715"></a> 715             <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> rmiServer, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L716" name="L716"></a> 716         <strong class="reserved">if</strong> (<a href="../S/6502.html#L40" title="Defined at 40 in src/com/sun/jmx/remote/internal/IIOPHelper.java.">IIOPHelper</a>.<a href="../D/26294.html" title="Multiple defined in 4 places.">isStub</a>(rmiServer))
<a id="L717" name="L717"></a> 717             <strong class="reserved">return</strong> "/ior/" + <a href="../S/3633.html#L733" title="Defined at 733 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeIIOPStub</a>(rmiServer, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L718" name="L718"></a> 718         <strong class="reserved">else</strong>
<a id="L719" name="L719"></a> 719             <strong class="reserved">return</strong> "/stub/" + <a href="../S/3633.html#L722" title="Defined at 722 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeJRMPStub</a>(rmiServer, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L720" name="L720"></a> 720     <em class="brace">}</em>
<a id="L721" name="L721"></a> 721 
<a id="L722" name="L722"></a> 722     <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3633.html#L719" title="Referred from 719 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeJRMPStub</a>(
<a id="L723" name="L723"></a> 723             <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> rmiServer, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L724" name="L724"></a> 724             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L725" name="L725"></a> 725         <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a> bout = <strong class="reserved">new</strong> <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>();
<a id="L726" name="L726"></a> 726         <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> oout = <strong class="reserved">new</strong> <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>(bout);
<a id="L727" name="L727"></a> 727         oout.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(rmiServer);
<a id="L728" name="L728"></a> 728         oout.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L729" name="L729"></a> 729         <strong class="reserved">byte</strong>[] bytes = bout.<a href="../D/35362.html" title="Multiple defined in 10 places.">toByteArray</a>();
<a id="L730" name="L730"></a> 730         <strong class="reserved">return</strong> <a href="../D/11985.html" title="Multiple defined in 3 places.">byteArrayToBase64</a>(bytes);
<a id="L731" name="L731"></a> 731     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732 
<a id="L733" name="L733"></a> 733     <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3633.html#L717" title="Referred from 717 in src/javax/management/remote/rmi/RMIConnectorServer.java.">encodeIIOPStub</a>(
<a id="L734" name="L734"></a> 734             <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> rmiServer, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L735" name="L735"></a> 735             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L736" name="L736"></a> 736         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L737" name="L737"></a> 737             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28564.html" title="Multiple defined in 24 places.">orb</a> = <a href="../S/6502.html#L40" title="Defined at 40 in src/com/sun/jmx/remote/internal/IIOPHelper.java.">IIOPHelper</a>.<a href="../D/21234.html" title="Multiple defined in 3 places.">getOrb</a>(rmiServer);
<a id="L738" name="L738"></a> 738             <strong class="reserved">return</strong> <a href="../S/6502.html#L40" title="Defined at 40 in src/com/sun/jmx/remote/internal/IIOPHelper.java.">IIOPHelper</a>.<a href="../D/28407.html" title="Multiple defined in 3 places.">objectToString</a>(<a href="../D/28564.html" title="Multiple defined in 24 places.">orb</a>, rmiServer);
<a id="L739" name="L739"></a> 739         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L740" name="L740"></a> 740             <strong class="reserved">throw</strong> <a href="../D/28008.html" title="Multiple defined in 2 places.">newIOException</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>(), <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L741" name="L741"></a> 741         <em class="brace">}</em>
<a id="L742" name="L742"></a> 742     <em class="brace">}</em>
<a id="L743" name="L743"></a> 743 
<div class="comment">
      Object that we will bind to the registry.
      This object is a stub connected to our RMIServerImpl.
     *</div>
<a id="L748" name="L748"></a> 748     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a> <a href="../S/3633.html#L408" title="Referred from 408 in src/javax/management/remote/rmi/RMIConnectorServer.java.">objectToBind</a>(
<a id="L749" name="L749"></a> 749             <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> rmiServer, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L750" name="L750"></a> 750         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L751" name="L751"></a> 751         <strong class="reserved">return</strong> <a href="../S/3626.html#L121" title="Defined at 121 in src/javax/management/remote/rmi/RMIConnector.java.">RMIConnector</a>.
<a id="L752" name="L752"></a> 752             <a href="../S/3626.html#L1739" title="Defined at 1739 in src/javax/management/remote/rmi/RMIConnector.java.">connectStub</a>((<a href="../S/3628.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIServer.java.">RMIServer</a>)rmiServer.<a href="../D/35496.html" title="Multiple defined in 10 places.">toStub</a>(),<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L753" name="L753"></a> 753     <em class="brace">}</em>
<a id="L754" name="L754"></a> 754 
<a id="L755" name="L755"></a> 755     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> <a href="../S/3633.html#L661" title="Referred from 661 in src/javax/management/remote/rmi/RMIConnectorServer.java.">newJRMPServer</a>(<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">int</strong> port)
<a id="L756" name="L756"></a> 756             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L757" name="L757"></a> 757         <a href="../S/2531.html#L62" title="Defined at 62 in src/java/rmi/server/RMIClientSocketFactory.java.">RMIClientSocketFactory</a> csf = (<a href="../S/2531.html#L62" title="Defined at 62 in src/java/rmi/server/RMIClientSocketFactory.java.">RMIClientSocketFactory</a>)
<a id="L758" name="L758"></a> 758             <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE);
<a id="L759" name="L759"></a> 759         <a href="../S/2533.html#L61" title="Defined at 61 in src/java/rmi/server/RMIServerSocketFactory.java.">RMIServerSocketFactory</a> ssf = (<a href="../S/2533.html#L61" title="Defined at 61 in src/java/rmi/server/RMIServerSocketFactory.java.">RMIServerSocketFactory</a>)
<a id="L760" name="L760"></a> 760             <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(RMI_SERVER_SOCKET_FACTORY_ATTRIBUTE);
<a id="L761" name="L761"></a> 761         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3631.html#L54" title="Defined at 54 in src/javax/management/remote/rmi/RMIJRMPServerImpl.java.">RMIJRMPServerImpl</a>(port, csf, ssf, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L762" name="L762"></a> 762     <em class="brace">}</em>
<a id="L763" name="L763"></a> 763 
<a id="L764" name="L764"></a> 764     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> <a href="../S/3633.html#L659" title="Referred from 659 in src/javax/management/remote/rmi/RMIConnectorServer.java.">newIIOPServer</a>(<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L765" name="L765"></a> 765             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L766" name="L766"></a> 766         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3623.html#L49" title="Defined at 49 in src/javax/management/remote/rmi/RMIIIOPServerImpl.java.">RMIIIOPServerImpl</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L767" name="L767"></a> 767     <em class="brace">}</em>
<a id="L768" name="L768"></a> 768 
<a id="L769" name="L769"></a> 769     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/10736.html" title="Multiple referred from 5 places.">byteArrayToBase64</a>(<strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L770" name="L770"></a> 770         <strong class="reserved">int</strong> aLen = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L771" name="L771"></a> 771         <strong class="reserved">int</strong> numFullGroups = aLen/3;
<a id="L772" name="L772"></a> 772         <strong class="reserved">int</strong> numBytesInPartialGroup = aLen - 3*numFullGroups;
<a id="L773" name="L773"></a> 773         <strong class="reserved">int</strong> resultLen = 4*((aLen + 2)/3);
<a id="L774" name="L774"></a> 774         <strong class="reserved">final</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(resultLen);
<a id="L775" name="L775"></a> 775 
<a id="L776" name="L776"></a> 776         <em class="comment">// Translate all full groups from byte array elements to Base64</em>
<a id="L777" name="L777"></a> 777         <strong class="reserved">int</strong> inCursor = 0;
<a id="L778" name="L778"></a> 778         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;numFullGroups; i++) <em class="brace">{</em>
<a id="L779" name="L779"></a> 779             <strong class="reserved">int</strong> byte0 = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[inCursor++] &amp; 0xff;
<a id="L780" name="L780"></a> 780             <strong class="reserved">int</strong> byte1 = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[inCursor++] &amp; 0xff;
<a id="L781" name="L781"></a> 781             <strong class="reserved">int</strong> byte2 = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[inCursor++] &amp; 0xff;
<a id="L782" name="L782"></a> 782             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[byte0 &gt;&gt; 2]);
<a id="L783" name="L783"></a> 783             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[(byte0 &lt;&lt; 4)&amp;0x3f | (byte1 &gt;&gt; 4)]);
<a id="L784" name="L784"></a> 784             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[(byte1 &lt;&lt; 2)&amp;0x3f | (byte2 &gt;&gt; 6)]);
<a id="L785" name="L785"></a> 785             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[byte2 &amp; 0x3f]);
<a id="L786" name="L786"></a> 786         <em class="brace">}</em>
<a id="L787" name="L787"></a> 787 
<a id="L788" name="L788"></a> 788         <em class="comment">// Translate partial group if present</em>
<a id="L789" name="L789"></a> 789         <strong class="reserved">if</strong> (numBytesInPartialGroup != 0) <em class="brace">{</em>
<a id="L790" name="L790"></a> 790             <strong class="reserved">int</strong> byte0 = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[inCursor++] &amp; 0xff;
<a id="L791" name="L791"></a> 791             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[byte0 &gt;&gt; 2]);
<a id="L792" name="L792"></a> 792             <strong class="reserved">if</strong> (numBytesInPartialGroup == 1) <em class="brace">{</em>
<a id="L793" name="L793"></a> 793                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[(byte0 &lt;&lt; 4) &amp; 0x3f]);
<a id="L794" name="L794"></a> 794                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("==");
<a id="L795" name="L795"></a> 795             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L796" name="L796"></a> 796                 <em class="comment">// assert numBytesInPartialGroup == 2;</em>
<a id="L797" name="L797"></a> 797                 <strong class="reserved">int</strong> byte1 = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[inCursor++] &amp; 0xff;
<a id="L798" name="L798"></a> 798                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[(byte0 &lt;&lt; 4)&amp;0x3f | (byte1 &gt;&gt; 4)]);
<a id="L799" name="L799"></a> 799                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intToAlpha[(byte1 &lt;&lt; 2)&amp;0x3f]);
<a id="L800" name="L800"></a> 800                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('=');
<a id="L801" name="L801"></a> 801             <em class="brace">}</em>
<a id="L802" name="L802"></a> 802         <em class="brace">}</em>
<a id="L803" name="L803"></a> 803         <em class="comment">// assert inCursor == a.length;</em>
<a id="L804" name="L804"></a> 804         <em class="comment">// assert result.length() == resultLen;</em>
<a id="L805" name="L805"></a> 805         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L806" name="L806"></a> 806     <em class="brace">}</em>
<a id="L807" name="L807"></a> 807 
<div class="comment">
      This array is a lookup table that translates 6-bit positive integer
      index values into their "Base64 Alphabet" equivalents as specified
      in Table 1 of RFC 2045.</div>
<a id="L813" name="L813"></a> 813     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> intToAlpha[] = <em class="brace">{</em>
<a id="L814" name="L814"></a> 814         'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
<a id="L815" name="L815"></a> 815         'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
<a id="L816" name="L816"></a> 816         'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
<a id="L817" name="L817"></a> 817         'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
<a id="L818" name="L818"></a> 818         '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/'
<a id="L819" name="L819"></a> 819     <em class="brace">}</em>;
<a id="L820" name="L820"></a> 820 
<div class="comment">
      Construct a new IOException with a nested exception.
      The nested exception is set only if JDK {@literal &gt;= 1.4}</div>
<a id="L825" name="L825"></a> 825     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../R/23560.html" title="Multiple referred from 28 places.">newIOException</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>,
<a id="L826" name="L826"></a> 826                                               <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> cause) <em class="brace">{</em>
<a id="L827" name="L827"></a> 827         <strong class="reserved">final</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>(<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>);
<a id="L828" name="L828"></a> 828         <strong class="reserved">return</strong> <a href="../S/6493.html#L55" title="Defined at 55 in src/com/sun/jmx/remote/util/EnvHelp.java.">EnvHelp</a>.<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>,cause);
<a id="L829" name="L829"></a> 829     <em class="brace">}</em>
<a id="L830" name="L830"></a> 830 
<a id="L831" name="L831"></a> 831 
<a id="L832" name="L832"></a> 832     <em class="comment">// Private variables</em>
<a id="L833" name="L833"></a> 833     <em class="comment">// -----------------</em>
<a id="L834" name="L834"></a> 834 
<a id="L835" name="L835"></a> 835     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/6492.html#L30" title="Defined at 30 in src/com/sun/jmx/remote/util/ClassLogger.java.">ClassLogger</a> <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a> =
<a id="L836" name="L836"></a> 836         <strong class="reserved">new</strong> <a href="../S/6492.html#L30" title="Defined at 30 in src/com/sun/jmx/remote/util/ClassLogger.java.">ClassLogger</a>("javax.management.remote.rmi", "RMIConnectorServer");
<a id="L837" name="L837"></a> 837 
<a id="L838" name="L838"></a> 838     <strong class="reserved">private</strong> <a href="../S/3612.html#L121" title="Defined at 121 in src/javax/management/remote/JMXServiceURL.java.">JMXServiceURL</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>;
<a id="L839" name="L839"></a> 839     <strong class="reserved">private</strong> <a href="../S/3627.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIServerImpl.java.">RMIServerImpl</a> rmiServerImpl;
<a id="L840" name="L840"></a> 840     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, ?&gt; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>;
<a id="L841" name="L841"></a> 841     <strong class="reserved">private</strong> <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> defaultClassLoader = <strong class="reserved">null</strong>;
<a id="L842" name="L842"></a> 842 
<a id="L843" name="L843"></a> 843     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> boundJndiUrl;
<a id="L844" name="L844"></a> 844 
<a id="L845" name="L845"></a> 845     <em class="comment">// state</em>
<a id="L846" name="L846"></a> 846     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CREATED = 0;
<a id="L847" name="L847"></a> 847     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STARTED = 1;
<a id="L848" name="L848"></a> 848     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STOPPED = 2;
<a id="L849" name="L849"></a> 849 
<a id="L850" name="L850"></a> 850     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = CREATED;
<a id="L851" name="L851"></a> 851     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/3633.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIConnectorServer.java.">RMIConnectorServer</a>&gt; openedServers =
<a id="L852" name="L852"></a> 852             <strong class="reserved">new</strong> <a href="../S/1136.html#L89" title="Defined at 89 in src/java/util/HashSet.java.">HashSet</a>&lt;<a href="../S/3633.html#L69" title="Defined at 69 in src/javax/management/remote/rmi/RMIConnectorServer.java.">RMIConnectorServer</a>&gt;();
<a id="L853" name="L853"></a> 853 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L259">[^]</a><a href="#L825">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
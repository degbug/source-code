<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/regexp/internal/RE.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L498">[^]</a><a href="#L1751">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L498" title="Defined at 498.">simplePatternToFullRegularExpression</a></li>
<li><a href="#L542" title="Defined at 542.">setMatchFlags</a></li>
<li><a href="#L559" title="Defined at 559.">getMatchFlags</a></li>
<li><a href="#L572" title="Defined at 572.">setProgram</a></li>
<li><a href="#L588" title="Defined at 588.">getProgram</a></li>
<li><a href="#L598" title="Defined at 598.">getParenCount</a></li>
<li><a href="#L609" title="Defined at 609.">getParen</a></li>
<li><a href="#L625" title="Defined at 625.">getParenStart</a></li>
<li><a href="#L657" title="Defined at 657.">getParenEnd</a></li>
<li><a href="#L689" title="Defined at 689.">getParenLength</a></li>
<li><a href="#L704" title="Defined at 704.">setParenStart</a></li>
<li><a href="#L739" title="Defined at 739.">setParenEnd</a></li>
<li><a href="#L775" title="Defined at 775.">internalError</a></li>
<li><a href="#L783" title="Defined at 783.">allocParens</a></li>
<li><a href="#L806" title="Defined at 806.">matchNodes</a></li>
<li><a href="#L1352" title="Defined at 1352.">matchAt</a></li>
<li><a href="#L1394" title="Defined at 1394.">match</a></li>
<li><a href="#L1407" title="Defined at 1407.">match</a></li>
<li><a href="#L1470" title="Defined at 1470.">match</a></li>
<li><a href="#L1489" title="Defined at 1489.">split</a></li>
<li><a href="#L1566" title="Defined at 1566.">subst</a></li>
<li><a href="#L1599" title="Defined at 1599.">subst</a></li>
<li><a href="#L1702" title="Defined at 1702.">grep</a></li>
<li><a href="#L1729" title="Defined at 1729.">isNewline</a></li>
<li><a href="#L1751" title="Defined at 1751.">compareChars</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.regexp.internal;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> java.util.Vector;
<a id="L25" name="L25"></a>  25 
<div class="comment">
  RE is an efficient, lightweight regular expression evaluator/matcher
  class. Regular expressions are pattern descriptions which enable
  sophisticated matching of strings.  In addition to being able to
  match a string against a pattern, you can also extract parts of the
  match.  This is especially useful in text parsing! Details on the
  syntax of regular expression patterns are given below.
  <p>
  To compile a regular expression (RE), you can simply construct an RE
  matcher object from the string specification of the pattern, like this:
  </p><pre>   RE r = new RE("a*b");
  </pre>
  <p>
  Once you have done this, you can call either of the RE.match methods to
  perform matching on a String.  For example:
  </p><pre>   boolean matched = r.match("aaaab");
  </pre>
  will cause the boolean matched to be set to true because the
  pattern "a*b" matches the string "aaaab".
  <p>
  If you were interested in the <i>number</i> of a's which matched the
  first part of our example expression, you could change the expression to
  "(a*)b".  Then when you compiled the expression and matched it against
  something like "xaaaab", you would get results like this:
  </p><pre>   RE r = new RE("(a*)b");                  // Compile expression
   boolean matched = r.match("xaaaab");     // Match against "xaaaab"
   String wholeExpr = r.getParen(0);        // wholeExpr will be 'aaaab'
   String insideParens = r.getParen(1);     // insideParens will be 'aaaa'
   int startWholeExpr = r.getParenStart(0); // startWholeExpr will be index 1
   int endWholeExpr = r.getParenEnd(0);     // endWholeExpr will be index 6
   int lenWholeExpr = r.getParenLength(0);  // lenWholeExpr will be 5
   int startInside = r.getParenStart(1);    // startInside will be index 1
   int endInside = r.getParenEnd(1);        // endInside will be index 5
   int lenInside = r.getParenLength(1);     // lenInside will be 4
  </pre>
  You can also refer to the contents of a parenthesized expression
  within a regular expression itself.  This is called a
  'backreference'.  The first backreference in a regular expression is
  denoted by \1, the second by \2 and so on.  So the expression:
  <pre>   ([0-9]+)=\1
  </pre>
  will match any string of the form n=n (like 0=0 or 2=2).
  <p>
  The full regular expression syntax accepted by RE is described here:
  </p><pre>   <b><font face="times" roman>Characters</font></b>
     <i>unicodeChar</i>   Matches any identical unicode character
     \                    Used to quote a meta-character (like '*')
     \\                   Matches a single '\' character
     \0nnn                Matches a given octal character
     \xhh                 Matches a given 8-bit hexadecimal character
     \\uhhhh              Matches a given 16-bit hexadecimal character
     \t                   Matches an ASCII tab character
     \n                   Matches an ASCII newline character
     \r                   Matches an ASCII return character
     \f                   Matches an ASCII form feed character
   <b><font face="times" roman>Character Classes</font></b>
     [abc]                Simple character class
     [a-zA-Z]             Character class with ranges
     [^abc]               Negated character class
  </pre>
  <b>NOTE:</b> Incomplete ranges will be interpreted as "starts
  from zero" or "ends with last character".
  <br>
  I.e. [-a] is the same as [\\u0000-a], and [a-] is the same as [a-\\uFFFF],
  [-] means "all characters".
  <pre>   <b><font face="times" roman>Standard POSIX Character Classes</font></b>
     [:alnum:]            Alphanumeric characters.
     [:alpha:]            Alphabetic characters.
     [:blank:]            Space and tab characters.
     [:cntrl:]            Control characters.
     [:digit:]            Numeric characters.
     [:graph:]            Characters that are printable and are also visible.
                          (A space is printable, but not visible, while an
                          `a' is both.)
     [:lower:]            Lower-case alphabetic characters.
     [:print:]            Printable characters (characters that are not
                          control characters.)
     [:punct:]            Punctuation characters (characters that are not letter,
                          digits, control characters, or space characters).
     [:space:]            Space characters (such as space, tab, and formfeed,
                          to name a few).
     [:upper:]            Upper-case alphabetic characters.
     [:xdigit:]           Characters that are hexadecimal digits.
   <b><font face="times" roman>Non-standard POSIX-style Character Classes</font></b>
     [:javastart:]        Start of a Java identifier
     [:javapart:]         Part of a Java identifier
   <b><font face="times" roman>Predefined Classes</font></b>
     .         Matches any character other than newline
     \w        Matches a "word" character (alphanumeric plus "_")
     \W        Matches a non-word character
     \s        Matches a whitespace character
     \S        Matches a non-whitespace character
     \d        Matches a digit character
     \D        Matches a non-digit character
   <b><font face="times" roman>Boundary Matchers</font></b>
     ^         Matches only at the beginning of a line
     $         Matches only at the end of a line
     \b        Matches only at a word boundary
     \B        Matches only at a non-word boundary
   <b><font face="times" roman>Greedy Closures</font></b>
     A*        Matches A 0 or more times (greedy)
     A+        Matches A 1 or more times (greedy)
     A?        Matches A 1 or 0 times (greedy)
     A{n}      Matches A exactly n times (greedy)
     A{n,}     Matches A at least n times (greedy)
     A{n,m}    Matches A at least n but not more than m times (greedy)
   <b><font face="times" roman>Reluctant Closures</font></b>
     A*?       Matches A 0 or more times (reluctant)
     A+?       Matches A 1 or more times (reluctant)
     A??       Matches A 0 or 1 times (reluctant)
   <b><font face="times" roman>Logical Operators</font></b>
     AB        Matches A followed by B
     A|B       Matches either A or B
     (A)       Used for subexpression grouping
    (?:A)      Used for subexpression clustering (just like grouping but
               no backrefs)
   <b><font face="times" roman>Backreferences</font></b>
     \1    Backreference to 1st parenthesized subexpression
     \2    Backreference to 2nd parenthesized subexpression
     \3    Backreference to 3rd parenthesized subexpression
     \4    Backreference to 4th parenthesized subexpression
     \5    Backreference to 5th parenthesized subexpression
     \6    Backreference to 6th parenthesized subexpression
     \7    Backreference to 7th parenthesized subexpression
     \8    Backreference to 8th parenthesized subexpression
     \9    Backreference to 9th parenthesized subexpression
  </pre>
  <p>
  All closure operators (+, *, ?, {m,n}) are greedy by default, meaning
  that they match as many elements of the string as possible without
  causing the overall match to fail.  If you want a closure to be
  reluctant (non-greedy), you can simply follow it with a '?'.  A
  reluctant closure will match as few elements of the string as
  possible when finding matches.  {m,n} closures don't currently
  support reluctancy.
  </p><p>
  <b><font face="times roman">Line terminators</font></b>
  <br>
  A line terminator is a one- or two-character sequence that marks
  the end of a line of the input character sequence. The following
  are recognized as line terminators:
  </p><ul><li>A newline (line feed) character ('\n'),</li><li>A carriage-return character followed immediately by a newline character ("\r\n"),</li><li>A standalone carriage-return character ('\r'),</li><li>A next-line character ('\u0085'),</li><li>A line-separator character ('\u2028'), or</li><li>A paragraph-separator character ('\u2029).</li>
  </ul>
  <p>
  RE runs programs compiled by the RECompiler class.  But the RE
  matcher class does not include the actual regular expression compiler
  for reasons of efficiency.  In fact, if you want to pre-compile one
  or more regular expressions, the 'recompile' class can be invoked
  from the command line to produce compiled output like this:
  </p><pre>     // Pre-compiled regular expression "a*b"
     char[] re1Instructions =
     {
         0x007c, 0x0000, 0x001a, 0x007c, 0x0000, 0x000d, 0x0041,
         0x0001, 0x0004, 0x0061, 0x007c, 0x0000, 0x0003, 0x0047,
         0x0000, 0xfff6, 0x007c, 0x0000, 0x0003, 0x004e, 0x0000,
         0x0003, 0x0041, 0x0001, 0x0004, 0x0062, 0x0045, 0x0000,
         0x0000,
     };
     REProgram re1 = new REProgram(re1Instructions);
  </pre>
  You can then construct a regular expression matcher (RE) object from
  the pre-compiled expression re1 and thus avoid the overhead of
  compiling the expression at runtime. If you require more dynamic
  regular expressions, you can construct a single RECompiler object and
  re-use it to compile each expression. Similarly, you can change the
  program run by a given matcher object at any time. However, RE and
  RECompiler are not threadsafe (for efficiency reasons, and because
  requiring thread safety in this class is deemed to be a rare
  requirement), so you will need to construct a separate compiler or
  matcher object for each thread (unless you do thread synchronization
  yourself). Once expression compiled into the REProgram object, REProgram
  can be safely shared across multiple threads and RE objects.
  <br><p><br>
  <font color="red">
  <i>ISSUES:</i>
  </font></p><ul><li><font color="red">com.weusours.util.re is not currently compatible with all
       standard POSIX regcomp flags</font></li><li><font color="red">com.weusours.util.re does not support POSIX equivalence classes
       ([=foo=] syntax) (I18N/locale issue)</font></li><li><font color="red">com.weusours.util.re does not support nested POSIX character
       classes (definitely should, but not completely trivial)</font></li><li><font color="red">com.weusours.util.re Does not support POSIX character collation
       concepts ([.foo.] syntax) (I18N/locale issue)</font></li><li><font color="red">Should there be different matching styles (simple, POSIX, Perl etc?)</font></li><li><font color="red">Should RE support character iterators (for backwards RE matching!)?</font></li><li><font color="red">Should RE support reluctant {m,n} closures (does anyone care)?</font></li><li><font color="red">Not *all* possibilities are considered for greediness when backreferences
       are involved (as POSIX suggests should be the case).  The POSIX RE
       "(ac*)c*d[ac]*\1", when matched against "acdacaa" should yield a match
       of acdacaa where \1 is "a".  This is not the case in this RE package,
       and actually Perl doesn't go to this extent either!  Until someone
       actually complains about this, I'm not sure it's worth "fixing".
       If it ever is fixed, test #137 in RETest.txt should be updated.</font></li><font color="red">
  </font></ul><font color="red">
  </font>
  @see recompile
  @see RECompiler
  @author <a href="mailto:jonl@muppetlabs.com">Jonathan Locke</a>
  @author <a href="mailto:ts@sch-fer.de">Tobias Sch√§fer</a></div>
<a id="L298" name="L298"></a> 298 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6383.html" title="Multiple referred from 162 places.">RE</a> <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>
<a id="L299" name="L299"></a> 299 <em class="brace">{</em>
<div class="comment">
      Specifies normal, case-sensitive matching behaviour.</div>
<a id="L303" name="L303"></a> 303     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCH_NORMAL          = 0x0000;
<a id="L304" name="L304"></a> 304 
<div class="comment">
      Flag to indicate that matching should be case-independent (folded)</div>
<a id="L308" name="L308"></a> 308     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCH_CASEINDEPENDENT = 0x0001;
<a id="L309" name="L309"></a> 309 
<div class="comment">
      Newlines should match as BOL/EOL (^ and $)</div>
<a id="L313" name="L313"></a> 313     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCH_MULTILINE       = 0x0002;
<a id="L314" name="L314"></a> 314 
<div class="comment">
      Consider all input a single body of text - newlines are matched by .</div>
<a id="L318" name="L318"></a> 318     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCH_SINGLELINE      = 0x0004;
<a id="L319" name="L319"></a> 319 
<div class="comment">
**********************************************
                                                   *
      The format of a node in a program is:        *
                                                   *
      [ OPCODE ] [ OPDATA ] [ OPNEXT ] [ OPERAND ] *
                                                   *
      char OPCODE - instruction                    *
      char OPDATA - modifying data                 *
      char OPNEXT - next node (relative offset)    *
                                                   *
     ***********************************************</div>
<a id="L331" name="L331"></a> 331 
<a id="L332" name="L332"></a> 332                  <em class="comment">//   Opcode              Char       Opdata/Operand  Meaning</em>
<a id="L333" name="L333"></a> 333                  <em class="comment">//   ----------          ---------- --------------- --------------------------------------------------</em>
<a id="L334" name="L334"></a> 334     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_END              = 'E';  <em class="comment">//                 end of program</em>
<a id="L335" name="L335"></a> 335     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_BOL              = '^';  <em class="comment">//                 match only if at beginning of line</em>
<a id="L336" name="L336"></a> 336     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_EOL              = '$';  <em class="comment">//                 match only if at end of line</em>
<a id="L337" name="L337"></a> 337     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_ANY              = '.';  <em class="comment">//                 match any single character except newline</em>
<a id="L338" name="L338"></a> 338     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_ANYOF            = '[';  <em class="comment">// count/ranges    match any char in the list of ranges</em>
<a id="L339" name="L339"></a> 339     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_BRANCH           = '|';  <em class="comment">// node            match this alternative or the next one</em>
<a id="L340" name="L340"></a> 340     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_ATOM             = 'A';  <em class="comment">// length/string   length of string followed by string itself</em>
<a id="L341" name="L341"></a> 341     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_STAR             = '*';  <em class="comment">// node            kleene closure</em>
<a id="L342" name="L342"></a> 342     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_PLUS             = '+';  <em class="comment">// node            positive closure</em>
<a id="L343" name="L343"></a> 343     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_MAYBE            = '?';  <em class="comment">// node            optional closure</em>
<a id="L344" name="L344"></a> 344     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_ESCAPE           = '\\'; <em class="comment">// escape          special escape code char class (escape is E_* code)</em>
<a id="L345" name="L345"></a> 345     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_OPEN             = '(';  <em class="comment">// number          nth opening paren</em>
<a id="L346" name="L346"></a> 346     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_OPEN_CLUSTER     = '&lt;';  <em class="comment">//                 opening cluster</em>
<a id="L347" name="L347"></a> 347     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_CLOSE            = ')';  <em class="comment">// number          nth closing paren</em>
<a id="L348" name="L348"></a> 348     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_CLOSE_CLUSTER    = '&gt;';  <em class="comment">//                 closing cluster</em>
<a id="L349" name="L349"></a> 349     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_BACKREF          = '#';  <em class="comment">// number          reference nth already matched parenthesized string</em>
<a id="L350" name="L350"></a> 350     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_GOTO             = 'G';  <em class="comment">//                 nothing but a (back-)pointer</em>
<a id="L351" name="L351"></a> 351     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_NOTHING          = 'N';  <em class="comment">//                 match null string such as in '(a|)'</em>
<a id="L352" name="L352"></a> 352     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_RELUCTANTSTAR    = '8';  <em class="comment">// none/expr       reluctant '*' (mnemonic for char is unshifted '*')</em>
<a id="L353" name="L353"></a> 353     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_RELUCTANTPLUS    = '=';  <em class="comment">// none/expr       reluctant '+' (mnemonic for char is unshifted '+')</em>
<a id="L354" name="L354"></a> 354     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_RELUCTANTMAYBE   = '/';  <em class="comment">// none/expr       reluctant '?' (mnemonic for char is unshifted '?')</em>
<a id="L355" name="L355"></a> 355     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> OP_POSIXCLASS       = 'P';  <em class="comment">// classid         one of the posix character classes</em>
<a id="L356" name="L356"></a> 356 
<a id="L357" name="L357"></a> 357     <em class="comment">// Escape codes</em>
<a id="L358" name="L358"></a> 358     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_ALNUM             = 'w';  <em class="comment">// Alphanumeric</em>
<a id="L359" name="L359"></a> 359     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_NALNUM            = 'W';  <em class="comment">// Non-alphanumeric</em>
<a id="L360" name="L360"></a> 360     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_BOUND             = 'b';  <em class="comment">// Word boundary</em>
<a id="L361" name="L361"></a> 361     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_NBOUND            = 'B';  <em class="comment">// Non-word boundary</em>
<a id="L362" name="L362"></a> 362     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_SPACE             = 's';  <em class="comment">// Whitespace</em>
<a id="L363" name="L363"></a> 363     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_NSPACE            = 'S';  <em class="comment">// Non-whitespace</em>
<a id="L364" name="L364"></a> 364     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_DIGIT             = 'd';  <em class="comment">// Digit</em>
<a id="L365" name="L365"></a> 365     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> E_NDIGIT            = 'D';  <em class="comment">// Non-digit</em>
<a id="L366" name="L366"></a> 366 
<a id="L367" name="L367"></a> 367     <em class="comment">// Posix character classes</em>
<a id="L368" name="L368"></a> 368     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_ALNUM   = 'w';  <em class="comment">// Alphanumerics</em>
<a id="L369" name="L369"></a> 369     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_ALPHA   = 'a';  <em class="comment">// Alphabetics</em>
<a id="L370" name="L370"></a> 370     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_BLANK   = 'b';  <em class="comment">// Blanks</em>
<a id="L371" name="L371"></a> 371     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_CNTRL   = 'c';  <em class="comment">// Control characters</em>
<a id="L372" name="L372"></a> 372     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_DIGIT   = 'd';  <em class="comment">// Digits</em>
<a id="L373" name="L373"></a> 373     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_GRAPH   = 'g';  <em class="comment">// Graphic characters</em>
<a id="L374" name="L374"></a> 374     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_LOWER   = 'l';  <em class="comment">// Lowercase characters</em>
<a id="L375" name="L375"></a> 375     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_PRINT   = 'p';  <em class="comment">// Printable characters</em>
<a id="L376" name="L376"></a> 376     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_PUNCT   = '!';  <em class="comment">// Punctuation</em>
<a id="L377" name="L377"></a> 377     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_SPACE   = 's';  <em class="comment">// Spaces</em>
<a id="L378" name="L378"></a> 378     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_UPPER   = 'u';  <em class="comment">// Uppercase characters</em>
<a id="L379" name="L379"></a> 379     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_XDIGIT  = 'x';  <em class="comment">// Hexadecimal digits</em>
<a id="L380" name="L380"></a> 380     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_JSTART  = 'j';  <em class="comment">// Java identifier start</em>
<a id="L381" name="L381"></a> 381     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> POSIX_CLASS_JPART   = 'k';  <em class="comment">// Java identifier part</em>
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383     <em class="comment">// Limits</em>
<a id="L384" name="L384"></a> 384     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> maxNode  = 65536;            <em class="comment">// Maximum number of nodes in a program</em>
<a id="L385" name="L385"></a> 385     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_PAREN = 16;              <em class="comment">// Number of paren pairs (only 9 can be backrefs)</em>
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387     <em class="comment">// Node layout constants</em>
<a id="L388" name="L388"></a> 388     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> offsetOpcode = 0;            <em class="comment">// Opcode offset (first character)</em>
<a id="L389" name="L389"></a> 389     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> offsetOpdata = 1;            <em class="comment">// Opdata offset (second char)</em>
<a id="L390" name="L390"></a> 390     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> offsetNext   = 2;            <em class="comment">// Next index offset (third char)</em>
<a id="L391" name="L391"></a> 391     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> nodeSize     = 3;            <em class="comment">// Node size (in chars)</em>
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393     <em class="comment">// State of current program</em>
<a id="L394" name="L394"></a> 394     <a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a> program;                            <em class="comment">// Compiled regular expression 'program'</em>
<a id="L395" name="L395"></a> 395     <strong class="reserved">transient</strong> <a href="../D/1412.html" title="Multiple defined in 2 places.">CharacterIterator</a> <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>;           <em class="comment">// The string being matched against</em>
<a id="L396" name="L396"></a> 396     <strong class="reserved">int</strong> matchFlags;                               <em class="comment">// Match behaviour flags</em>
<a id="L397" name="L397"></a> 397     <strong class="reserved">int</strong> maxParen = MAX_PAREN;
<a id="L398" name="L398"></a> 398 
<a id="L399" name="L399"></a> 399     <em class="comment">// Parenthesized subexpressions</em>
<a id="L400" name="L400"></a> 400     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> parenCount;                     <em class="comment">// Number of subexpressions matched (num open parens + 1)</em>
<a id="L401" name="L401"></a> 401     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> <a href="../S/1769.html#L728" title="Defined at 728 in src/java/lang/Thread.java.">start0</a>;                         <em class="comment">// Cache of start[0]</em>
<a id="L402" name="L402"></a> 402     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> end0;                           <em class="comment">// Cache of start[0]</em>
<a id="L403" name="L403"></a> 403     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> start1;                         <em class="comment">// Cache of start[1]</em>
<a id="L404" name="L404"></a> 404     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> end1;                           <em class="comment">// Cache of start[1]</em>
<a id="L405" name="L405"></a> 405     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> start2;                         <em class="comment">// Cache of start[2]</em>
<a id="L406" name="L406"></a> 406     <strong class="reserved">transient</strong> <strong class="reserved">int</strong> end2;                           <em class="comment">// Cache of start[2]</em>
<a id="L407" name="L407"></a> 407     <strong class="reserved">transient</strong> <strong class="reserved">int</strong>[] startn;                       <em class="comment">// Lazy-alloced array of sub-expression starts</em>
<a id="L408" name="L408"></a> 408     <strong class="reserved">transient</strong> <strong class="reserved">int</strong>[] endn;                         <em class="comment">// Lazy-alloced array of sub-expression ends</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410     <em class="comment">// Backreferences</em>
<a id="L411" name="L411"></a> 411     <strong class="reserved">transient</strong> <strong class="reserved">int</strong>[] startBackref;                 <em class="comment">// Lazy-alloced array of backref starts</em>
<a id="L412" name="L412"></a> 412     <strong class="reserved">transient</strong> <strong class="reserved">int</strong>[] endBackref;                   <em class="comment">// Lazy-alloced array of backref ends</em>
<a id="L413" name="L413"></a> 413 
<div class="comment">
      Constructs a regular expression matcher from a String by compiling it
      using a new instance of RECompiler.  If you will be compiling many
      expressions, you may prefer to use a single RECompiler object instead.
      @param pattern The regular expression pattern to compile.
      @exception RESyntaxException Thrown if the regular expression has invalid syntax.
      @see RECompiler
      @see recompile</div>
<a id="L424" name="L424"></a> 424     <strong class="reserved">public</strong> RE(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>) <strong class="reserved">throws</strong> <a href="../S/4544.html#L33" title="Defined at 33 in src/com/sun/org/apache/regexp/internal/RESyntaxException.java.">RESyntaxException</a>
<a id="L425" name="L425"></a> 425     <em class="brace">{</em>
<a id="L426" name="L426"></a> 426         <strong class="reserved">this</strong>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, MATCH_NORMAL);
<a id="L427" name="L427"></a> 427     <em class="brace">}</em>
<a id="L428" name="L428"></a> 428 
<div class="comment">
      Constructs a regular expression matcher from a String by compiling it
      using a new instance of RECompiler.  If you will be compiling many
      expressions, you may prefer to use a single RECompiler object instead.
      @param pattern The regular expression pattern to compile.
      @param matchFlags The matching style
      @exception RESyntaxException Thrown if the regular expression has invalid syntax.
      @see RECompiler
      @see recompile</div>
<a id="L440" name="L440"></a> 440     <strong class="reserved">public</strong> RE(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <strong class="reserved">int</strong> matchFlags) <strong class="reserved">throws</strong> <a href="../S/4544.html#L33" title="Defined at 33 in src/com/sun/org/apache/regexp/internal/RESyntaxException.java.">RESyntaxException</a>
<a id="L441" name="L441"></a> 441     <em class="brace">{</em>
<a id="L442" name="L442"></a> 442         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/4545.html#L39" title="Defined at 39 in src/com/sun/org/apache/regexp/internal/RECompiler.java.">RECompiler</a>().<a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>));
<a id="L443" name="L443"></a> 443         <a href="../S/4535.html#L542" title="Defined at 542 in src/com/sun/org/apache/regexp/internal/RE.java.">setMatchFlags</a>(matchFlags);
<a id="L444" name="L444"></a> 444     <em class="brace">}</em>
<a id="L445" name="L445"></a> 445 
<div class="comment">
      Construct a matcher for a pre-compiled regular expression from program
      (bytecode) data.  Permits special flags to be passed in to modify matching
      behaviour.
      @param program Compiled regular expression program (see RECompiler and/or recompile)
      @param matchFlags One or more of the RE match behaviour flags (RE.MATCH_*):
      <pre>        MATCH_NORMAL              // Normal (case-sensitive) matching
        MATCH_CASEINDEPENDENT     // Case folded comparisons
        MATCH_MULTILINE           // Newline matches as BOL/EOL
      </pre>
      @see RECompiler
      @see REProgram
      @see recompile</div>
<a id="L464" name="L464"></a> 464     <strong class="reserved">public</strong> RE(<a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a> program, <strong class="reserved">int</strong> matchFlags)
<a id="L465" name="L465"></a> 465     <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <a href="../S/4535.html#L572" title="Defined at 572 in src/com/sun/org/apache/regexp/internal/RE.java.">setProgram</a>(program);
<a id="L467" name="L467"></a> 467         <a href="../S/4535.html#L542" title="Defined at 542 in src/com/sun/org/apache/regexp/internal/RE.java.">setMatchFlags</a>(matchFlags);
<a id="L468" name="L468"></a> 468     <em class="brace">}</em>
<a id="L469" name="L469"></a> 469 
<div class="comment">
      Construct a matcher for a pre-compiled regular expression from program
      (bytecode) data.
      @param program Compiled regular expression program
      @see RECompiler
      @see recompile</div>
<a id="L478" name="L478"></a> 478     <strong class="reserved">public</strong> RE(<a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a> program)
<a id="L479" name="L479"></a> 479     <em class="brace">{</em>
<a id="L480" name="L480"></a> 480         <strong class="reserved">this</strong>(program, MATCH_NORMAL);
<a id="L481" name="L481"></a> 481     <em class="brace">}</em>
<a id="L482" name="L482"></a> 482 
<div class="comment">
      Constructs a regular expression matcher with no initial program.
      This is likely to be an uncommon practice, but is still supported.</div>
<a id="L487" name="L487"></a> 487     <strong class="reserved">public</strong> RE()
<a id="L488" name="L488"></a> 488     <em class="brace">{</em>
<a id="L489" name="L489"></a> 489         <strong class="reserved">this</strong>((<a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a>)<strong class="reserved">null</strong>, MATCH_NORMAL);
<a id="L490" name="L490"></a> 490     <em class="brace">}</em>
<a id="L491" name="L491"></a> 491 
<div class="comment">
      Converts a 'simplified' regular expression to a full regular expression
      @param pattern The pattern to convert
      @return The full regular expression</div>
<a id="L498" name="L498"></a> 498     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4542.html#L47" title="Referred from 47 in src/com/sun/org/apache/regexp/internal/REUtil.java.">simplePatternToFullRegularExpression</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>)
<a id="L499" name="L499"></a> 499     <em class="brace">{</em>
<a id="L500" name="L500"></a> 500         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L501" name="L501"></a> 501         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); i++)
<a id="L502" name="L502"></a> 502         <em class="brace">{</em>
<a id="L503" name="L503"></a> 503             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L504" name="L504"></a> 504             <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>)
<a id="L505" name="L505"></a> 505             <em class="brace">{</em>
<a id="L506" name="L506"></a> 506                 <strong class="reserved">case</strong> '*':
<a id="L507" name="L507"></a> 507                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(".*");
<a id="L508" name="L508"></a> 508                     <strong class="reserved">break</strong>;
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510                 <strong class="reserved">case</strong> '.':
<a id="L511" name="L511"></a> 511                 <strong class="reserved">case</strong> '[':
<a id="L512" name="L512"></a> 512                 <strong class="reserved">case</strong> ']':
<a id="L513" name="L513"></a> 513                 <strong class="reserved">case</strong> '\\':
<a id="L514" name="L514"></a> 514                 <strong class="reserved">case</strong> '+':
<a id="L515" name="L515"></a> 515                 <strong class="reserved">case</strong> '?':
<a id="L516" name="L516"></a> 516                 <strong class="reserved">case</strong> '{':
<a id="L517" name="L517"></a> 517                 <strong class="reserved">case</strong> '}':
<a id="L518" name="L518"></a> 518                 <strong class="reserved">case</strong> '$':
<a id="L519" name="L519"></a> 519                 <strong class="reserved">case</strong> '^':
<a id="L520" name="L520"></a> 520                 <strong class="reserved">case</strong> '|':
<a id="L521" name="L521"></a> 521                 <strong class="reserved">case</strong> '(':
<a id="L522" name="L522"></a> 522                 <strong class="reserved">case</strong> ')':
<a id="L523" name="L523"></a> 523                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('\\');
<a id="L524" name="L524"></a> 524                 <strong class="reserved">default</strong>:
<a id="L525" name="L525"></a> 525                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L526" name="L526"></a> 526                     <strong class="reserved">break</strong>;
<a id="L527" name="L527"></a> 527             <em class="brace">}</em>
<a id="L528" name="L528"></a> 528         <em class="brace">}</em>
<a id="L529" name="L529"></a> 529         <strong class="reserved">return</strong> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L530" name="L530"></a> 530     <em class="brace">}</em>
<a id="L531" name="L531"></a> 531 
<div class="comment">
      Sets match behaviour flags which alter the way RE does matching.
      @param matchFlags One or more of the RE match behaviour flags (RE.MATCH_*):
      <pre>        MATCH_NORMAL              // Normal (case-sensitive) matching
        MATCH_CASEINDEPENDENT     // Case folded comparisons
        MATCH_MULTILINE           // Newline matches as BOL/EOL
      </pre></div>
<a id="L542" name="L542"></a> 542     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27718.html" title="Multiple referred from 5 places.">setMatchFlags</a>(<strong class="reserved">int</strong> matchFlags)
<a id="L543" name="L543"></a> 543     <em class="brace">{</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">this</strong>.matchFlags = matchFlags;
<a id="L545" name="L545"></a> 545     <em class="brace">}</em>
<a id="L546" name="L546"></a> 546 
<div class="comment">
      Returns the current match behaviour flags.
      @return Current match behaviour flags (RE.MATCH_*).
      <pre>        MATCH_NORMAL              // Normal (case-sensitive) matching
        MATCH_CASEINDEPENDENT     // Case folded comparisons
        MATCH_MULTILINE           // Newline matches as BOL/EOL
      </pre>
      @see #setMatchFlags</div>
<a id="L559" name="L559"></a> 559     <strong class="reserved">public</strong> <strong class="reserved">int</strong> getMatchFlags()
<a id="L560" name="L560"></a> 560     <em class="brace">{</em>
<a id="L561" name="L561"></a> 561         <strong class="reserved">return</strong> matchFlags;
<a id="L562" name="L562"></a> 562     <em class="brace">}</em>
<a id="L563" name="L563"></a> 563 
<div class="comment">
      Sets the current regular expression program used by this matcher object.
      @param program Regular expression program compiled by RECompiler.
      @see RECompiler
      @see REProgram
      @see recompile</div>
<a id="L572" name="L572"></a> 572     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27972.html" title="Multiple referred from 3 places.">setProgram</a>(<a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a> program)
<a id="L573" name="L573"></a> 573     <em class="brace">{</em>
<a id="L574" name="L574"></a> 574         <strong class="reserved">this</strong>.program = program;
<a id="L575" name="L575"></a> 575         <strong class="reserved">if</strong> (program != <strong class="reserved">null</strong> &amp;&amp; program.maxParens != -1) <em class="brace">{</em>
<a id="L576" name="L576"></a> 576             <strong class="reserved">this</strong>.maxParen = program.maxParens;
<a id="L577" name="L577"></a> 577         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L578" name="L578"></a> 578             <strong class="reserved">this</strong>.maxParen = MAX_PAREN;
<a id="L579" name="L579"></a> 579         <em class="brace">}</em>
<a id="L580" name="L580"></a> 580     <em class="brace">}</em>
<a id="L581" name="L581"></a> 581 
<div class="comment">
      Returns the current regular expression program in use by this matcher object.
      @return Regular expression program
      @see #setProgram</div>
<a id="L588" name="L588"></a> 588     <strong class="reserved">public</strong> <a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a> getProgram()
<a id="L589" name="L589"></a> 589     <em class="brace">{</em>
<a id="L590" name="L590"></a> 590         <strong class="reserved">return</strong> program;
<a id="L591" name="L591"></a> 591     <em class="brace">}</em>
<a id="L592" name="L592"></a> 592 
<div class="comment">
      Returns the number of parenthesized subexpressions available after a successful match.
      @return Number of available parenthesized subexpressions</div>
<a id="L598" name="L598"></a> 598     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18264.html" title="Multiple referred from 5 places.">getParenCount</a>()
<a id="L599" name="L599"></a> 599     <em class="brace">{</em>
<a id="L600" name="L600"></a> 600         <strong class="reserved">return</strong> parenCount;
<a id="L601" name="L601"></a> 601     <em class="brace">}</em>
<a id="L602" name="L602"></a> 602 
<div class="comment">
      Gets the contents of a parenthesized subexpression after a successful match.
      @param which Nesting level of subexpression
      @return String</div>
<a id="L609" name="L609"></a> 609     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18263.html" title="Multiple referred from 5 places.">getParen</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L610" name="L610"></a> 610     <em class="brace">{</em>
<a id="L611" name="L611"></a> 611         <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L612" name="L612"></a> 612         <strong class="reserved">if</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a> &lt; parenCount &amp;&amp; (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../S/4535.html#L625" title="Defined at 625 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenStart</a>(<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)) &gt;= 0)
<a id="L613" name="L613"></a> 613         <em class="brace">{</em>
<a id="L614" name="L614"></a> 614             <strong class="reserved">return</strong> <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../S/4535.html#L657" title="Defined at 657 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenEnd</a>(<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>));
<a id="L615" name="L615"></a> 615         <em class="brace">}</em>
<a id="L616" name="L616"></a> 616         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L617" name="L617"></a> 617     <em class="brace">}</em>
<a id="L618" name="L618"></a> 618 
<div class="comment">
      Returns the start index of a given paren level.
      @param which Nesting level of subexpression
      @return String index</div>
<a id="L625" name="L625"></a> 625     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/18268.html" title="Multiple referred from 6 places.">getParenStart</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L626" name="L626"></a> 626     <em class="brace">{</em>
<a id="L627" name="L627"></a> 627         <strong class="reserved">if</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a> &lt; parenCount)
<a id="L628" name="L628"></a> 628         <em class="brace">{</em>
<a id="L629" name="L629"></a> 629             <strong class="reserved">switch</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L630" name="L630"></a> 630             <em class="brace">{</em>
<a id="L631" name="L631"></a> 631                 <strong class="reserved">case</strong> 0:
<a id="L632" name="L632"></a> 632                     <strong class="reserved">return</strong> <a href="../S/1769.html#L728" title="Defined at 728 in src/java/lang/Thread.java.">start0</a>;
<a id="L633" name="L633"></a> 633 
<a id="L634" name="L634"></a> 634                 <strong class="reserved">case</strong> 1:
<a id="L635" name="L635"></a> 635                     <strong class="reserved">return</strong> start1;
<a id="L636" name="L636"></a> 636 
<a id="L637" name="L637"></a> 637                 <strong class="reserved">case</strong> 2:
<a id="L638" name="L638"></a> 638                     <strong class="reserved">return</strong> start2;
<a id="L639" name="L639"></a> 639 
<a id="L640" name="L640"></a> 640                 <strong class="reserved">default</strong>:
<a id="L641" name="L641"></a> 641                     <strong class="reserved">if</strong> (startn == <strong class="reserved">null</strong>)
<a id="L642" name="L642"></a> 642                     <em class="brace">{</em>
<a id="L643" name="L643"></a> 643                         <a href="../S/4535.html#L783" title="Defined at 783 in src/com/sun/org/apache/regexp/internal/RE.java.">allocParens</a>();
<a id="L644" name="L644"></a> 644                     <em class="brace">}</em>
<a id="L645" name="L645"></a> 645                     <strong class="reserved">return</strong> startn[<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>];
<a id="L646" name="L646"></a> 646             <em class="brace">}</em>
<a id="L647" name="L647"></a> 647         <em class="brace">}</em>
<a id="L648" name="L648"></a> 648         <strong class="reserved">return</strong> -1;
<a id="L649" name="L649"></a> 649     <em class="brace">}</em>
<a id="L650" name="L650"></a> 650 
<div class="comment">
      Returns the end index of a given paren level.
      @param which Nesting level of subexpression
      @return String index</div>
<a id="L657" name="L657"></a> 657     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/18265.html" title="Multiple referred from 6 places.">getParenEnd</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L658" name="L658"></a> 658     <em class="brace">{</em>
<a id="L659" name="L659"></a> 659         <strong class="reserved">if</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a> &lt; parenCount)
<a id="L660" name="L660"></a> 660         <em class="brace">{</em>
<a id="L661" name="L661"></a> 661             <strong class="reserved">switch</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L662" name="L662"></a> 662             <em class="brace">{</em>
<a id="L663" name="L663"></a> 663                 <strong class="reserved">case</strong> 0:
<a id="L664" name="L664"></a> 664                     <strong class="reserved">return</strong> end0;
<a id="L665" name="L665"></a> 665 
<a id="L666" name="L666"></a> 666                 <strong class="reserved">case</strong> 1:
<a id="L667" name="L667"></a> 667                     <strong class="reserved">return</strong> end1;
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669                 <strong class="reserved">case</strong> 2:
<a id="L670" name="L670"></a> 670                     <strong class="reserved">return</strong> end2;
<a id="L671" name="L671"></a> 671 
<a id="L672" name="L672"></a> 672                 <strong class="reserved">default</strong>:
<a id="L673" name="L673"></a> 673                     <strong class="reserved">if</strong> (endn == <strong class="reserved">null</strong>)
<a id="L674" name="L674"></a> 674                     <em class="brace">{</em>
<a id="L675" name="L675"></a> 675                         <a href="../S/4535.html#L783" title="Defined at 783 in src/com/sun/org/apache/regexp/internal/RE.java.">allocParens</a>();
<a id="L676" name="L676"></a> 676                     <em class="brace">}</em>
<a id="L677" name="L677"></a> 677                     <strong class="reserved">return</strong> endn[<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>];
<a id="L678" name="L678"></a> 678             <em class="brace">}</em>
<a id="L679" name="L679"></a> 679         <em class="brace">}</em>
<a id="L680" name="L680"></a> 680         <strong class="reserved">return</strong> -1;
<a id="L681" name="L681"></a> 681     <em class="brace">}</em>
<a id="L682" name="L682"></a> 682 
<div class="comment">
      Returns the length of a given paren level.
      @param which Nesting level of subexpression
      @return Number of characters in the parenthesized subexpression</div>
<a id="L689" name="L689"></a> 689     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/4549.html#L241" title="Referred from 241 in src/com/sun/org/apache/bcel/internal/util/InstructionFinder.java.">getParenLength</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L690" name="L690"></a> 690     <em class="brace">{</em>
<a id="L691" name="L691"></a> 691         <strong class="reserved">if</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a> &lt; parenCount)
<a id="L692" name="L692"></a> 692         <em class="brace">{</em>
<a id="L693" name="L693"></a> 693             <strong class="reserved">return</strong> <a href="../S/4535.html#L657" title="Defined at 657 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenEnd</a>(<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>) - <a href="../S/4535.html#L625" title="Defined at 625 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenStart</a>(<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>);
<a id="L694" name="L694"></a> 694         <em class="brace">}</em>
<a id="L695" name="L695"></a> 695         <strong class="reserved">return</strong> -1;
<a id="L696" name="L696"></a> 696     <em class="brace">}</em>
<a id="L697" name="L697"></a> 697 
<div class="comment">
      Sets the start of a paren level
      @param which Which paren level
      @param i Index in input array</div>
<a id="L704" name="L704"></a> 704     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/27911.html" title="Multiple referred from 2 places.">setParenStart</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>, <strong class="reserved">int</strong> i)
<a id="L705" name="L705"></a> 705     <em class="brace">{</em>
<a id="L706" name="L706"></a> 706         <strong class="reserved">if</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a> &lt; parenCount)
<a id="L707" name="L707"></a> 707         <em class="brace">{</em>
<a id="L708" name="L708"></a> 708             <strong class="reserved">switch</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L709" name="L709"></a> 709             <em class="brace">{</em>
<a id="L710" name="L710"></a> 710                 <strong class="reserved">case</strong> 0:
<a id="L711" name="L711"></a> 711                     <a href="../S/1769.html#L728" title="Defined at 728 in src/java/lang/Thread.java.">start0</a> = i;
<a id="L712" name="L712"></a> 712                     <strong class="reserved">break</strong>;
<a id="L713" name="L713"></a> 713 
<a id="L714" name="L714"></a> 714                 <strong class="reserved">case</strong> 1:
<a id="L715" name="L715"></a> 715                     start1 = i;
<a id="L716" name="L716"></a> 716                     <strong class="reserved">break</strong>;
<a id="L717" name="L717"></a> 717 
<a id="L718" name="L718"></a> 718                 <strong class="reserved">case</strong> 2:
<a id="L719" name="L719"></a> 719                     start2 = i;
<a id="L720" name="L720"></a> 720                     <strong class="reserved">break</strong>;
<a id="L721" name="L721"></a> 721 
<a id="L722" name="L722"></a> 722                 <strong class="reserved">default</strong>:
<a id="L723" name="L723"></a> 723                     <strong class="reserved">if</strong> (startn == <strong class="reserved">null</strong>)
<a id="L724" name="L724"></a> 724                     <em class="brace">{</em>
<a id="L725" name="L725"></a> 725                         <a href="../S/4535.html#L783" title="Defined at 783 in src/com/sun/org/apache/regexp/internal/RE.java.">allocParens</a>();
<a id="L726" name="L726"></a> 726                     <em class="brace">}</em>
<a id="L727" name="L727"></a> 727                     startn[<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>] = i;
<a id="L728" name="L728"></a> 728                     <strong class="reserved">break</strong>;
<a id="L729" name="L729"></a> 729             <em class="brace">}</em>
<a id="L730" name="L730"></a> 730         <em class="brace">}</em>
<a id="L731" name="L731"></a> 731     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732 
<div class="comment">
      Sets the end of a paren level
      @param which Which paren level
      @param i Index in input array</div>
<a id="L739" name="L739"></a> 739     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/27910.html" title="Multiple referred from 3 places.">setParenEnd</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>, <strong class="reserved">int</strong> i)
<a id="L740" name="L740"></a> 740     <em class="brace">{</em>
<a id="L741" name="L741"></a> 741         <strong class="reserved">if</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a> &lt; parenCount)
<a id="L742" name="L742"></a> 742         <em class="brace">{</em>
<a id="L743" name="L743"></a> 743             <strong class="reserved">switch</strong> (<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>)
<a id="L744" name="L744"></a> 744             <em class="brace">{</em>
<a id="L745" name="L745"></a> 745                 <strong class="reserved">case</strong> 0:
<a id="L746" name="L746"></a> 746                     end0 = i;
<a id="L747" name="L747"></a> 747                     <strong class="reserved">break</strong>;
<a id="L748" name="L748"></a> 748 
<a id="L749" name="L749"></a> 749                 <strong class="reserved">case</strong> 1:
<a id="L750" name="L750"></a> 750                     end1 = i;
<a id="L751" name="L751"></a> 751                     <strong class="reserved">break</strong>;
<a id="L752" name="L752"></a> 752 
<a id="L753" name="L753"></a> 753                 <strong class="reserved">case</strong> 2:
<a id="L754" name="L754"></a> 754                     end2 = i;
<a id="L755" name="L755"></a> 755                     <strong class="reserved">break</strong>;
<a id="L756" name="L756"></a> 756 
<a id="L757" name="L757"></a> 757                 <strong class="reserved">default</strong>:
<a id="L758" name="L758"></a> 758                     <strong class="reserved">if</strong> (endn == <strong class="reserved">null</strong>)
<a id="L759" name="L759"></a> 759                     <em class="brace">{</em>
<a id="L760" name="L760"></a> 760                         <a href="../S/4535.html#L783" title="Defined at 783 in src/com/sun/org/apache/regexp/internal/RE.java.">allocParens</a>();
<a id="L761" name="L761"></a> 761                     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762                     endn[<a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>] = i;
<a id="L763" name="L763"></a> 763                     <strong class="reserved">break</strong>;
<a id="L764" name="L764"></a> 764             <em class="brace">}</em>
<a id="L765" name="L765"></a> 765         <em class="brace">}</em>
<a id="L766" name="L766"></a> 766     <em class="brace">}</em>
<a id="L767" name="L767"></a> 767 
<div class="comment">
      Throws an Error representing an internal error condition probably resulting
      from a bug in the regular expression compiler (or possibly data corruption).
      In practice, this should be very rare.
      @param s Error description</div>
<a id="L775" name="L775"></a> 775     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20929.html" title="Multiple referred from 10 places.">internalError</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <strong class="reserved">throws</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>
<a id="L776" name="L776"></a> 776     <em class="brace">{</em>
<a id="L777" name="L777"></a> 777         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("RE internal error: " + s);
<a id="L778" name="L778"></a> 778     <em class="brace">}</em>
<a id="L779" name="L779"></a> 779 
<div class="comment">
      Performs lazy allocation of subexpression arrays</div>
<a id="L783" name="L783"></a> 783     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/10137.html" title="Multiple referred from 4 places.">allocParens</a>()
<a id="L784" name="L784"></a> 784     <em class="brace">{</em>
<a id="L785" name="L785"></a> 785         <em class="comment">// Allocate arrays for subexpressions</em>
<a id="L786" name="L786"></a> 786         startn = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[maxParen];
<a id="L787" name="L787"></a> 787         endn = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[maxParen];
<a id="L788" name="L788"></a> 788 
<a id="L789" name="L789"></a> 789         <em class="comment">// Set sub-expression pointers to invalid values</em>
<a id="L790" name="L790"></a> 790         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; maxParen; i++)
<a id="L791" name="L791"></a> 791         <em class="brace">{</em>
<a id="L792" name="L792"></a> 792             startn[i] = -1;
<a id="L793" name="L793"></a> 793             endn[i] = -1;
<a id="L794" name="L794"></a> 794         <em class="brace">}</em>
<a id="L795" name="L795"></a> 795     <em class="brace">}</em>
<a id="L796" name="L796"></a> 796 
<div class="comment">
      Try to match a string against a subset of nodes in the program
      @param firstNode Node to start at in program
      @param lastNode  Last valid node (used for matching a subexpression without
                       matching the rest of the program as well).
      @param idxStart  Starting position in character array
      @return Final input array index if match succeeded.  -1 if not.</div>
<a id="L806" name="L806"></a> 806     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/23144.html" title="Multiple referred from 11 places.">matchNodes</a>(<strong class="reserved">int</strong> <a href="../D/16409.html" title="Multiple defined in 3 places.">firstNode</a>, <strong class="reserved">int</strong> lastNode, <strong class="reserved">int</strong> idxStart)
<a id="L807" name="L807"></a> 807     <em class="brace">{</em>
<a id="L808" name="L808"></a> 808         <em class="comment">// Our current place in the string</em>
<a id="L809" name="L809"></a> 809         <strong class="reserved">int</strong> idx = idxStart;
<a id="L810" name="L810"></a> 810 
<a id="L811" name="L811"></a> 811         <em class="comment">// Loop while node is valid</em>
<a id="L812" name="L812"></a> 812         <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, opcode, opdata;
<a id="L813" name="L813"></a> 813         <strong class="reserved">int</strong> idxNew;
<a id="L814" name="L814"></a> 814         <strong class="reserved">char</strong>[] instruction = program.instruction;
<a id="L815" name="L815"></a> 815         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/16409.html" title="Multiple defined in 3 places.">firstNode</a>; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> &lt; lastNode; )
<a id="L816" name="L816"></a> 816         <em class="brace">{</em>
<a id="L817" name="L817"></a> 817             opcode = instruction[<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + offsetOpcode];
<a id="L818" name="L818"></a> 818             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>   = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + (<strong class="reserved">short</strong>)instruction[<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + offsetNext];
<a id="L819" name="L819"></a> 819             opdata = instruction[<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + offsetOpdata];
<a id="L820" name="L820"></a> 820 
<a id="L821" name="L821"></a> 821             <strong class="reserved">switch</strong> (opcode)
<a id="L822" name="L822"></a> 822             <em class="brace">{</em>
<a id="L823" name="L823"></a> 823                 <strong class="reserved">case</strong> OP_RELUCTANTMAYBE:
<a id="L824" name="L824"></a> 824                     <em class="brace">{</em>
<a id="L825" name="L825"></a> 825                         <strong class="reserved">int</strong> once = 0;
<a id="L826" name="L826"></a> 826                         <strong class="reserved">do</strong>
<a id="L827" name="L827"></a> 827                         <em class="brace">{</em>
<a id="L828" name="L828"></a> 828                             <em class="comment">// Try to match the rest without using the reluctant subexpr</em>
<a id="L829" name="L829"></a> 829                             <strong class="reserved">if</strong> ((idxNew = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, maxNode, idx)) != -1)
<a id="L830" name="L830"></a> 830                             <em class="brace">{</em>
<a id="L831" name="L831"></a> 831                                 <strong class="reserved">return</strong> idxNew;
<a id="L832" name="L832"></a> 832                             <em class="brace">}</em>
<a id="L833" name="L833"></a> 833                         <em class="brace">}</em>
<a id="L834" name="L834"></a> 834                         <strong class="reserved">while</strong> ((once++ == 0) &amp;&amp; (idx = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + nodeSize, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, idx)) != -1);
<a id="L835" name="L835"></a> 835                         <strong class="reserved">return</strong> -1;
<a id="L836" name="L836"></a> 836                     <em class="brace">}</em>
<a id="L837" name="L837"></a> 837 
<a id="L838" name="L838"></a> 838                 <strong class="reserved">case</strong> OP_RELUCTANTPLUS:
<a id="L839" name="L839"></a> 839                     <strong class="reserved">while</strong> ((idx = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + nodeSize, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, idx)) != -1)
<a id="L840" name="L840"></a> 840                     <em class="brace">{</em>
<a id="L841" name="L841"></a> 841                         <em class="comment">// Try to match the rest without using the reluctant subexpr</em>
<a id="L842" name="L842"></a> 842                         <strong class="reserved">if</strong> ((idxNew = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, maxNode, idx)) != -1)
<a id="L843" name="L843"></a> 843                         <em class="brace">{</em>
<a id="L844" name="L844"></a> 844                             <strong class="reserved">return</strong> idxNew;
<a id="L845" name="L845"></a> 845                         <em class="brace">}</em>
<a id="L846" name="L846"></a> 846                     <em class="brace">}</em>
<a id="L847" name="L847"></a> 847                     <strong class="reserved">return</strong> -1;
<a id="L848" name="L848"></a> 848 
<a id="L849" name="L849"></a> 849                 <strong class="reserved">case</strong> OP_RELUCTANTSTAR:
<a id="L850" name="L850"></a> 850                     <strong class="reserved">do</strong>
<a id="L851" name="L851"></a> 851                     <em class="brace">{</em>
<a id="L852" name="L852"></a> 852                         <em class="comment">// Try to match the rest without using the reluctant subexpr</em>
<a id="L853" name="L853"></a> 853                         <strong class="reserved">if</strong> ((idxNew = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, maxNode, idx)) != -1)
<a id="L854" name="L854"></a> 854                         <em class="brace">{</em>
<a id="L855" name="L855"></a> 855                             <strong class="reserved">return</strong> idxNew;
<a id="L856" name="L856"></a> 856                         <em class="brace">}</em>
<a id="L857" name="L857"></a> 857                     <em class="brace">}</em>
<a id="L858" name="L858"></a> 858                     <strong class="reserved">while</strong> ((idx = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + nodeSize, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, idx)) != -1);
<a id="L859" name="L859"></a> 859                     <strong class="reserved">return</strong> -1;
<a id="L860" name="L860"></a> 860 
<a id="L861" name="L861"></a> 861                 <strong class="reserved">case</strong> OP_OPEN:
<a id="L862" name="L862"></a> 862 
<a id="L863" name="L863"></a> 863                     <em class="comment">// Match subexpression</em>
<a id="L864" name="L864"></a> 864                     <strong class="reserved">if</strong> ((program.<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; <a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a>.OPT_HASBACKREFS) != 0)
<a id="L865" name="L865"></a> 865                     <em class="brace">{</em>
<a id="L866" name="L866"></a> 866                         startBackref[opdata] = idx;
<a id="L867" name="L867"></a> 867                     <em class="brace">}</em>
<a id="L868" name="L868"></a> 868                     <strong class="reserved">if</strong> ((idxNew = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, maxNode, idx)) != -1)
<a id="L869" name="L869"></a> 869                     <em class="brace">{</em>
<a id="L870" name="L870"></a> 870                         <em class="comment">// Increase valid paren count</em>
<a id="L871" name="L871"></a> 871                         <strong class="reserved">if</strong> ((opdata + 1) &gt; parenCount)
<a id="L872" name="L872"></a> 872                         <em class="brace">{</em>
<a id="L873" name="L873"></a> 873                             parenCount = opdata + 1;
<a id="L874" name="L874"></a> 874                         <em class="brace">}</em>
<a id="L875" name="L875"></a> 875 
<a id="L876" name="L876"></a> 876                         <em class="comment">// Don't set paren if already set later on</em>
<a id="L877" name="L877"></a> 877                         <strong class="reserved">if</strong> (<a href="../S/4535.html#L625" title="Defined at 625 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenStart</a>(opdata) == -1)
<a id="L878" name="L878"></a> 878                         <em class="brace">{</em>
<a id="L879" name="L879"></a> 879                             <a href="../S/4535.html#L704" title="Defined at 704 in src/com/sun/org/apache/regexp/internal/RE.java.">setParenStart</a>(opdata, idx);
<a id="L880" name="L880"></a> 880                         <em class="brace">}</em>
<a id="L881" name="L881"></a> 881                     <em class="brace">}</em>
<a id="L882" name="L882"></a> 882                     <strong class="reserved">return</strong> idxNew;
<a id="L883" name="L883"></a> 883 
<a id="L884" name="L884"></a> 884                 <strong class="reserved">case</strong> OP_CLOSE:
<a id="L885" name="L885"></a> 885 
<a id="L886" name="L886"></a> 886                     <em class="comment">// Done matching subexpression</em>
<a id="L887" name="L887"></a> 887                     <strong class="reserved">if</strong> ((program.<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; <a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a>.OPT_HASBACKREFS) != 0)
<a id="L888" name="L888"></a> 888                     <em class="brace">{</em>
<a id="L889" name="L889"></a> 889                         endBackref[opdata] = idx;
<a id="L890" name="L890"></a> 890                     <em class="brace">}</em>
<a id="L891" name="L891"></a> 891                     <strong class="reserved">if</strong> ((idxNew = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, maxNode, idx)) != -1)
<a id="L892" name="L892"></a> 892                     <em class="brace">{</em>
<a id="L893" name="L893"></a> 893                         <em class="comment">// Increase valid paren count</em>
<a id="L894" name="L894"></a> 894                         <strong class="reserved">if</strong> ((opdata + 1) &gt; parenCount)
<a id="L895" name="L895"></a> 895                         <em class="brace">{</em>
<a id="L896" name="L896"></a> 896                             parenCount = opdata + 1;
<a id="L897" name="L897"></a> 897                         <em class="brace">}</em>
<a id="L898" name="L898"></a> 898 
<a id="L899" name="L899"></a> 899                         <em class="comment">// Don't set paren if already set later on</em>
<a id="L900" name="L900"></a> 900                         <strong class="reserved">if</strong> (<a href="../S/4535.html#L657" title="Defined at 657 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenEnd</a>(opdata) == -1)
<a id="L901" name="L901"></a> 901                         <em class="brace">{</em>
<a id="L902" name="L902"></a> 902                             <a href="../S/4535.html#L739" title="Defined at 739 in src/com/sun/org/apache/regexp/internal/RE.java.">setParenEnd</a>(opdata, idx);
<a id="L903" name="L903"></a> 903                         <em class="brace">}</em>
<a id="L904" name="L904"></a> 904                     <em class="brace">}</em>
<a id="L905" name="L905"></a> 905                     <strong class="reserved">return</strong> idxNew;
<a id="L906" name="L906"></a> 906 
<a id="L907" name="L907"></a> 907                 <strong class="reserved">case</strong> OP_OPEN_CLUSTER:
<a id="L908" name="L908"></a> 908                 <strong class="reserved">case</strong> OP_CLOSE_CLUSTER:
<a id="L909" name="L909"></a> 909                     <em class="comment">// starting or ending the matching of a subexpression which has no backref.</em>
<a id="L910" name="L910"></a> 910                     <strong class="reserved">return</strong> <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, maxNode, idx );
<a id="L911" name="L911"></a> 911 
<a id="L912" name="L912"></a> 912                 <strong class="reserved">case</strong> OP_BACKREF:
<a id="L913" name="L913"></a> 913                     <em class="brace">{</em>
<a id="L914" name="L914"></a> 914                         <em class="comment">// Get the start and end of the backref</em>
<a id="L915" name="L915"></a> 915                         <strong class="reserved">int</strong> s = startBackref[opdata];
<a id="L916" name="L916"></a> 916                         <strong class="reserved">int</strong> e = endBackref[opdata];
<a id="L917" name="L917"></a> 917 
<a id="L918" name="L918"></a> 918                         <em class="comment">// We don't know the backref yet</em>
<a id="L919" name="L919"></a> 919                         <strong class="reserved">if</strong> (s == -1 || e == -1)
<a id="L920" name="L920"></a> 920                         <em class="brace">{</em>
<a id="L921" name="L921"></a> 921                             <strong class="reserved">return</strong> -1;
<a id="L922" name="L922"></a> 922                         <em class="brace">}</em>
<a id="L923" name="L923"></a> 923 
<a id="L924" name="L924"></a> 924                         <em class="comment">// The backref is empty size</em>
<a id="L925" name="L925"></a> 925                         <strong class="reserved">if</strong> (s == e)
<a id="L926" name="L926"></a> 926                         <em class="brace">{</em>
<a id="L927" name="L927"></a> 927                             <strong class="reserved">break</strong>;
<a id="L928" name="L928"></a> 928                         <em class="brace">}</em>
<a id="L929" name="L929"></a> 929 
<a id="L930" name="L930"></a> 930                         <em class="comment">// Get the length of the backref</em>
<a id="L931" name="L931"></a> 931                         <strong class="reserved">int</strong> l = e - s;
<a id="L932" name="L932"></a> 932 
<a id="L933" name="L933"></a> 933                         <em class="comment">// If there's not enough input left, give up.</em>
<a id="L934" name="L934"></a> 934                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx + l - 1))
<a id="L935" name="L935"></a> 935                         <em class="brace">{</em>
<a id="L936" name="L936"></a> 936                             <strong class="reserved">return</strong> -1;
<a id="L937" name="L937"></a> 937                         <em class="brace">}</em>
<a id="L938" name="L938"></a> 938 
<a id="L939" name="L939"></a> 939                         <em class="comment">// Case fold the backref?</em>
<a id="L940" name="L940"></a> 940                         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> caseFold =
<a id="L941" name="L941"></a> 941                             ((matchFlags &amp; MATCH_CASEINDEPENDENT) != 0);
<a id="L942" name="L942"></a> 942                         <em class="comment">// Compare backref to input</em>
<a id="L943" name="L943"></a> 943                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; l; i++)
<a id="L944" name="L944"></a> 944                         <em class="brace">{</em>
<a id="L945" name="L945"></a> 945                             <strong class="reserved">if</strong> (<a href="../S/4535.html#L1751" title="Defined at 1751 in src/com/sun/org/apache/regexp/internal/RE.java.">compareChars</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx++), <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(s + i), caseFold) != 0)
<a id="L946" name="L946"></a> 946                             <em class="brace">{</em>
<a id="L947" name="L947"></a> 947                                 <strong class="reserved">return</strong> -1;
<a id="L948" name="L948"></a> 948                             <em class="brace">}</em>
<a id="L949" name="L949"></a> 949                         <em class="brace">}</em>
<a id="L950" name="L950"></a> 950                     <em class="brace">}</em>
<a id="L951" name="L951"></a> 951                     <strong class="reserved">break</strong>;
<a id="L952" name="L952"></a> 952 
<a id="L953" name="L953"></a> 953                 <strong class="reserved">case</strong> OP_BOL:
<a id="L954" name="L954"></a> 954 
<a id="L955" name="L955"></a> 955                     <em class="comment">// Fail if we're not at the start of the string</em>
<a id="L956" name="L956"></a> 956                     <strong class="reserved">if</strong> (idx != 0)
<a id="L957" name="L957"></a> 957                     <em class="brace">{</em>
<a id="L958" name="L958"></a> 958                         <em class="comment">// If we're multiline matching, we could still be at the start of a line</em>
<a id="L959" name="L959"></a> 959                         <strong class="reserved">if</strong> ((matchFlags &amp; MATCH_MULTILINE) == MATCH_MULTILINE)
<a id="L960" name="L960"></a> 960                         <em class="brace">{</em>
<a id="L961" name="L961"></a> 961                             <em class="comment">// If not at start of line, give up</em>
<a id="L962" name="L962"></a> 962                             <strong class="reserved">if</strong> (idx &lt;= 0 || !<a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a>(idx - 1)) <em class="brace">{</em>
<a id="L963" name="L963"></a> 963                                 <strong class="reserved">return</strong> -1;
<a id="L964" name="L964"></a> 964                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L965" name="L965"></a> 965                                 <strong class="reserved">break</strong>;
<a id="L966" name="L966"></a> 966                             <em class="brace">}</em>
<a id="L967" name="L967"></a> 967                         <em class="brace">}</em>
<a id="L968" name="L968"></a> 968                         <strong class="reserved">return</strong> -1;
<a id="L969" name="L969"></a> 969                     <em class="brace">}</em>
<a id="L970" name="L970"></a> 970                     <strong class="reserved">break</strong>;
<a id="L971" name="L971"></a> 971 
<a id="L972" name="L972"></a> 972                 <strong class="reserved">case</strong> OP_EOL:
<a id="L973" name="L973"></a> 973 
<a id="L974" name="L974"></a> 974                     <em class="comment">// If we're not at the end of string</em>
<a id="L975" name="L975"></a> 975                     <strong class="reserved">if</strong> (!<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(0) &amp;&amp; !<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx))
<a id="L976" name="L976"></a> 976                     <em class="brace">{</em>
<a id="L977" name="L977"></a> 977                         <em class="comment">// If we're multi-line matching</em>
<a id="L978" name="L978"></a> 978                         <strong class="reserved">if</strong> ((matchFlags &amp; MATCH_MULTILINE) == MATCH_MULTILINE)
<a id="L979" name="L979"></a> 979                         <em class="brace">{</em>
<a id="L980" name="L980"></a> 980                             <em class="comment">// Give up if we're not at the end of a line</em>
<a id="L981" name="L981"></a> 981                             <strong class="reserved">if</strong> (!<a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a>(idx)) <em class="brace">{</em>
<a id="L982" name="L982"></a> 982                                 <strong class="reserved">return</strong> -1;
<a id="L983" name="L983"></a> 983                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L984" name="L984"></a> 984                                 <strong class="reserved">break</strong>;
<a id="L985" name="L985"></a> 985                             <em class="brace">}</em>
<a id="L986" name="L986"></a> 986                         <em class="brace">}</em>
<a id="L987" name="L987"></a> 987                         <strong class="reserved">return</strong> -1;
<a id="L988" name="L988"></a> 988                     <em class="brace">}</em>
<a id="L989" name="L989"></a> 989                     <strong class="reserved">break</strong>;
<a id="L990" name="L990"></a> 990 
<a id="L991" name="L991"></a> 991                 <strong class="reserved">case</strong> OP_ESCAPE:
<a id="L992" name="L992"></a> 992 
<a id="L993" name="L993"></a> 993                     <em class="comment">// Which escape?</em>
<a id="L994" name="L994"></a> 994                     <strong class="reserved">switch</strong> (opdata)
<a id="L995" name="L995"></a> 995                     <em class="brace">{</em>
<a id="L996" name="L996"></a> 996                         <em class="comment">// Word boundary match</em>
<a id="L997" name="L997"></a> 997                         <strong class="reserved">case</strong> E_NBOUND:
<a id="L998" name="L998"></a> 998                         <strong class="reserved">case</strong> E_BOUND:
<a id="L999" name="L999"></a> 999                             <em class="brace">{</em>
<a id="L1000" name="L1000"></a>1000                                 <strong class="reserved">char</strong> cLast = ((idx == 0) ? '\n' : <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx - 1));
<a id="L1001" name="L1001"></a>1001                                 <strong class="reserved">char</strong> cNext = ((<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx)) ? '\n' : <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx));
<a id="L1002" name="L1002"></a>1002                                 <strong class="reserved">if</strong> ((<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25795.html" title="Multiple defined in 2 places.">isLetterOrDigit</a>(cLast) == <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25795.html" title="Multiple defined in 2 places.">isLetterOrDigit</a>(cNext)) == (opdata == E_BOUND))
<a id="L1003" name="L1003"></a>1003                                 <em class="brace">{</em>
<a id="L1004" name="L1004"></a>1004                                     <strong class="reserved">return</strong> -1;
<a id="L1005" name="L1005"></a>1005                                 <em class="brace">}</em>
<a id="L1006" name="L1006"></a>1006                             <em class="brace">}</em>
<a id="L1007" name="L1007"></a>1007                             <strong class="reserved">break</strong>;
<a id="L1008" name="L1008"></a>1008 
<a id="L1009" name="L1009"></a>1009                         <em class="comment">// Alpha-numeric, digit, space, javaLetter, javaLetterOrDigit</em>
<a id="L1010" name="L1010"></a>1010                         <strong class="reserved">case</strong> E_ALNUM:
<a id="L1011" name="L1011"></a>1011                         <strong class="reserved">case</strong> E_NALNUM:
<a id="L1012" name="L1012"></a>1012                         <strong class="reserved">case</strong> E_DIGIT:
<a id="L1013" name="L1013"></a>1013                         <strong class="reserved">case</strong> E_NDIGIT:
<a id="L1014" name="L1014"></a>1014                         <strong class="reserved">case</strong> E_SPACE:
<a id="L1015" name="L1015"></a>1015                         <strong class="reserved">case</strong> E_NSPACE:
<a id="L1016" name="L1016"></a>1016 
<a id="L1017" name="L1017"></a>1017                             <em class="comment">// Give up if out of input</em>
<a id="L1018" name="L1018"></a>1018                             <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx))
<a id="L1019" name="L1019"></a>1019                             <em class="brace">{</em>
<a id="L1020" name="L1020"></a>1020                                 <strong class="reserved">return</strong> -1;
<a id="L1021" name="L1021"></a>1021                             <em class="brace">}</em>
<a id="L1022" name="L1022"></a>1022 
<a id="L1023" name="L1023"></a>1023                             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx);
<a id="L1024" name="L1024"></a>1024 
<a id="L1025" name="L1025"></a>1025                             <em class="comment">// Switch on escape</em>
<a id="L1026" name="L1026"></a>1026                             <strong class="reserved">switch</strong> (opdata)
<a id="L1027" name="L1027"></a>1027                             <em class="brace">{</em>
<a id="L1028" name="L1028"></a>1028                                 <strong class="reserved">case</strong> E_ALNUM:
<a id="L1029" name="L1029"></a>1029                                 <strong class="reserved">case</strong> E_NALNUM:
<a id="L1030" name="L1030"></a>1030                                     <strong class="reserved">if</strong> (!((<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25795.html" title="Multiple defined in 2 places.">isLetterOrDigit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) || <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '_') == (opdata == E_ALNUM)))
<a id="L1031" name="L1031"></a>1031                                     <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032                                         <strong class="reserved">return</strong> -1;
<a id="L1033" name="L1033"></a>1033                                     <em class="brace">}</em>
<a id="L1034" name="L1034"></a>1034                                     <strong class="reserved">break</strong>;
<a id="L1035" name="L1035"></a>1035 
<a id="L1036" name="L1036"></a>1036                                 <strong class="reserved">case</strong> E_DIGIT:
<a id="L1037" name="L1037"></a>1037                                 <strong class="reserved">case</strong> E_NDIGIT:
<a id="L1038" name="L1038"></a>1038                                     <strong class="reserved">if</strong> (!(<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) == (opdata == E_DIGIT)))
<a id="L1039" name="L1039"></a>1039                                     <em class="brace">{</em>
<a id="L1040" name="L1040"></a>1040                                         <strong class="reserved">return</strong> -1;
<a id="L1041" name="L1041"></a>1041                                     <em class="brace">}</em>
<a id="L1042" name="L1042"></a>1042                                     <strong class="reserved">break</strong>;
<a id="L1043" name="L1043"></a>1043 
<a id="L1044" name="L1044"></a>1044                                 <strong class="reserved">case</strong> E_SPACE:
<a id="L1045" name="L1045"></a>1045                                 <strong class="reserved">case</strong> E_NSPACE:
<a id="L1046" name="L1046"></a>1046                                     <strong class="reserved">if</strong> (!(<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/26507.html" title="Multiple defined in 18 places.">isWhitespace</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) == (opdata == E_SPACE)))
<a id="L1047" name="L1047"></a>1047                                     <em class="brace">{</em>
<a id="L1048" name="L1048"></a>1048                                         <strong class="reserved">return</strong> -1;
<a id="L1049" name="L1049"></a>1049                                     <em class="brace">}</em>
<a id="L1050" name="L1050"></a>1050                                     <strong class="reserved">break</strong>;
<a id="L1051" name="L1051"></a>1051                             <em class="brace">}</em>
<a id="L1052" name="L1052"></a>1052                             idx++;
<a id="L1053" name="L1053"></a>1053                             <strong class="reserved">break</strong>;
<a id="L1054" name="L1054"></a>1054 
<a id="L1055" name="L1055"></a>1055                         <strong class="reserved">default</strong>:
<a id="L1056" name="L1056"></a>1056                             <a href="../D/24920.html" title="Multiple defined in 2 places.">internalError</a>("Unrecognized escape '" + opdata + "'");
<a id="L1057" name="L1057"></a>1057                     <em class="brace">}</em>
<a id="L1058" name="L1058"></a>1058                     <strong class="reserved">break</strong>;
<a id="L1059" name="L1059"></a>1059 
<a id="L1060" name="L1060"></a>1060                 <strong class="reserved">case</strong> OP_ANY:
<a id="L1061" name="L1061"></a>1061 
<a id="L1062" name="L1062"></a>1062                     <strong class="reserved">if</strong> ((matchFlags &amp; MATCH_SINGLELINE) == MATCH_SINGLELINE) <em class="brace">{</em>
<a id="L1063" name="L1063"></a>1063                         <em class="comment">// Match anything</em>
<a id="L1064" name="L1064"></a>1064                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx))
<a id="L1065" name="L1065"></a>1065                         <em class="brace">{</em>
<a id="L1066" name="L1066"></a>1066                             <strong class="reserved">return</strong> -1;
<a id="L1067" name="L1067"></a>1067                         <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068                     <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069                     <strong class="reserved">else</strong>
<a id="L1070" name="L1070"></a>1070                     <em class="brace">{</em>
<a id="L1071" name="L1071"></a>1071                         <em class="comment">// Match anything but a newline</em>
<a id="L1072" name="L1072"></a>1072                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx) || <a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a>(idx))
<a id="L1073" name="L1073"></a>1073                         <em class="brace">{</em>
<a id="L1074" name="L1074"></a>1074                             <strong class="reserved">return</strong> -1;
<a id="L1075" name="L1075"></a>1075                         <em class="brace">}</em>
<a id="L1076" name="L1076"></a>1076                     <em class="brace">}</em>
<a id="L1077" name="L1077"></a>1077                     idx++;
<a id="L1078" name="L1078"></a>1078                     <strong class="reserved">break</strong>;
<a id="L1079" name="L1079"></a>1079 
<a id="L1080" name="L1080"></a>1080                 <strong class="reserved">case</strong> OP_ATOM:
<a id="L1081" name="L1081"></a>1081                     <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082                         <em class="comment">// Match an atom value</em>
<a id="L1083" name="L1083"></a>1083                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx))
<a id="L1084" name="L1084"></a>1084                         <em class="brace">{</em>
<a id="L1085" name="L1085"></a>1085                             <strong class="reserved">return</strong> -1;
<a id="L1086" name="L1086"></a>1086                         <em class="brace">}</em>
<a id="L1087" name="L1087"></a>1087 
<a id="L1088" name="L1088"></a>1088                         <em class="comment">// Get length of atom and starting index</em>
<a id="L1089" name="L1089"></a>1089                         <strong class="reserved">int</strong> lenAtom = opdata;
<a id="L1090" name="L1090"></a>1090                         <strong class="reserved">int</strong> startAtom = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + nodeSize;
<a id="L1091" name="L1091"></a>1091 
<a id="L1092" name="L1092"></a>1092                         <em class="comment">// Give up if not enough input remains to have a match</em>
<a id="L1093" name="L1093"></a>1093                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(lenAtom + idx - 1))
<a id="L1094" name="L1094"></a>1094                         <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095                             <strong class="reserved">return</strong> -1;
<a id="L1096" name="L1096"></a>1096                         <em class="brace">}</em>
<a id="L1097" name="L1097"></a>1097 
<a id="L1098" name="L1098"></a>1098                         <em class="comment">// Match atom differently depending on casefolding flag</em>
<a id="L1099" name="L1099"></a>1099                         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> caseFold =
<a id="L1100" name="L1100"></a>1100                             ((matchFlags &amp; MATCH_CASEINDEPENDENT) != 0);
<a id="L1101" name="L1101"></a>1101 
<a id="L1102" name="L1102"></a>1102                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; lenAtom; i++)
<a id="L1103" name="L1103"></a>1103                         <em class="brace">{</em>
<a id="L1104" name="L1104"></a>1104                             <strong class="reserved">if</strong> (<a href="../S/4535.html#L1751" title="Defined at 1751 in src/com/sun/org/apache/regexp/internal/RE.java.">compareChars</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx++), instruction[startAtom + i], caseFold) != 0)
<a id="L1105" name="L1105"></a>1105                             <em class="brace">{</em>
<a id="L1106" name="L1106"></a>1106                                 <strong class="reserved">return</strong> -1;
<a id="L1107" name="L1107"></a>1107                             <em class="brace">}</em>
<a id="L1108" name="L1108"></a>1108                         <em class="brace">}</em>
<a id="L1109" name="L1109"></a>1109                     <em class="brace">}</em>
<a id="L1110" name="L1110"></a>1110                     <strong class="reserved">break</strong>;
<a id="L1111" name="L1111"></a>1111 
<a id="L1112" name="L1112"></a>1112                 <strong class="reserved">case</strong> OP_POSIXCLASS:
<a id="L1113" name="L1113"></a>1113                     <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114                         <em class="comment">// Out of input?</em>
<a id="L1115" name="L1115"></a>1115                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx))
<a id="L1116" name="L1116"></a>1116                         <em class="brace">{</em>
<a id="L1117" name="L1117"></a>1117                             <strong class="reserved">return</strong> -1;
<a id="L1118" name="L1118"></a>1118                         <em class="brace">}</em>
<a id="L1119" name="L1119"></a>1119 
<a id="L1120" name="L1120"></a>1120                         <strong class="reserved">switch</strong> (opdata)
<a id="L1121" name="L1121"></a>1121                         <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122                             <strong class="reserved">case</strong> POSIX_CLASS_ALNUM:
<a id="L1123" name="L1123"></a>1123                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25795.html" title="Multiple defined in 2 places.">isLetterOrDigit</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1124" name="L1124"></a>1124                                 <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125                                     <strong class="reserved">return</strong> -1;
<a id="L1126" name="L1126"></a>1126                                 <em class="brace">}</em>
<a id="L1127" name="L1127"></a>1127                                 <strong class="reserved">break</strong>;
<a id="L1128" name="L1128"></a>1128 
<a id="L1129" name="L1129"></a>1129                             <strong class="reserved">case</strong> POSIX_CLASS_ALPHA:
<a id="L1130" name="L1130"></a>1130                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25794.html" title="Multiple defined in 3 places.">isLetter</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1131" name="L1131"></a>1131                                 <em class="brace">{</em>
<a id="L1132" name="L1132"></a>1132                                     <strong class="reserved">return</strong> -1;
<a id="L1133" name="L1133"></a>1133                                 <em class="brace">}</em>
<a id="L1134" name="L1134"></a>1134                                 <strong class="reserved">break</strong>;
<a id="L1135" name="L1135"></a>1135 
<a id="L1136" name="L1136"></a>1136                             <strong class="reserved">case</strong> POSIX_CLASS_DIGIT:
<a id="L1137" name="L1137"></a>1137                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1138" name="L1138"></a>1138                                 <em class="brace">{</em>
<a id="L1139" name="L1139"></a>1139                                     <strong class="reserved">return</strong> -1;
<a id="L1140" name="L1140"></a>1140                                 <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141                                 <strong class="reserved">break</strong>;
<a id="L1142" name="L1142"></a>1142 
<a id="L1143" name="L1143"></a>1143                             <strong class="reserved">case</strong> POSIX_CLASS_BLANK: <em class="comment">// JWL - bugbug: is this right??</em>
<a id="L1144" name="L1144"></a>1144                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/26262.html" title="Multiple defined in 2 places.">isSpaceChar</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1145" name="L1145"></a>1145                                 <em class="brace">{</em>
<a id="L1146" name="L1146"></a>1146                                     <strong class="reserved">return</strong> -1;
<a id="L1147" name="L1147"></a>1147                                 <em class="brace">}</em>
<a id="L1148" name="L1148"></a>1148                                 <strong class="reserved">break</strong>;
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150                             <strong class="reserved">case</strong> POSIX_CLASS_SPACE:
<a id="L1151" name="L1151"></a>1151                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/26507.html" title="Multiple defined in 18 places.">isWhitespace</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1152" name="L1152"></a>1152                                 <em class="brace">{</em>
<a id="L1153" name="L1153"></a>1153                                     <strong class="reserved">return</strong> -1;
<a id="L1154" name="L1154"></a>1154                                 <em class="brace">}</em>
<a id="L1155" name="L1155"></a>1155                                 <strong class="reserved">break</strong>;
<a id="L1156" name="L1156"></a>1156 
<a id="L1157" name="L1157"></a>1157                             <strong class="reserved">case</strong> POSIX_CLASS_CNTRL:
<a id="L1158" name="L1158"></a>1158                                 <strong class="reserved">if</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)) != <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.CONTROL)
<a id="L1159" name="L1159"></a>1159                                 <em class="brace">{</em>
<a id="L1160" name="L1160"></a>1160                                     <strong class="reserved">return</strong> -1;
<a id="L1161" name="L1161"></a>1161                                 <em class="brace">}</em>
<a id="L1162" name="L1162"></a>1162                                 <strong class="reserved">break</strong>;
<a id="L1163" name="L1163"></a>1163 
<a id="L1164" name="L1164"></a>1164                             <strong class="reserved">case</strong> POSIX_CLASS_GRAPH: <em class="comment">// JWL - bugbug???</em>
<a id="L1165" name="L1165"></a>1165                                 <strong class="reserved">switch</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1166" name="L1166"></a>1166                                 <em class="brace">{</em>
<a id="L1167" name="L1167"></a>1167                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.MATH_SYMBOL:
<a id="L1168" name="L1168"></a>1168                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.CURRENCY_SYMBOL:
<a id="L1169" name="L1169"></a>1169                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.MODIFIER_SYMBOL:
<a id="L1170" name="L1170"></a>1170                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.OTHER_SYMBOL:
<a id="L1171" name="L1171"></a>1171                                         <strong class="reserved">break</strong>;
<a id="L1172" name="L1172"></a>1172 
<a id="L1173" name="L1173"></a>1173                                     <strong class="reserved">default</strong>:
<a id="L1174" name="L1174"></a>1174                                         <strong class="reserved">return</strong> -1;
<a id="L1175" name="L1175"></a>1175                                 <em class="brace">}</em>
<a id="L1176" name="L1176"></a>1176                                 <strong class="reserved">break</strong>;
<a id="L1177" name="L1177"></a>1177 
<a id="L1178" name="L1178"></a>1178                             <strong class="reserved">case</strong> POSIX_CLASS_LOWER:
<a id="L1179" name="L1179"></a>1179                                 <strong class="reserved">if</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)) != <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.LOWERCASE_LETTER)
<a id="L1180" name="L1180"></a>1180                                 <em class="brace">{</em>
<a id="L1181" name="L1181"></a>1181                                     <strong class="reserved">return</strong> -1;
<a id="L1182" name="L1182"></a>1182                                 <em class="brace">}</em>
<a id="L1183" name="L1183"></a>1183                                 <strong class="reserved">break</strong>;
<a id="L1184" name="L1184"></a>1184 
<a id="L1185" name="L1185"></a>1185                             <strong class="reserved">case</strong> POSIX_CLASS_UPPER:
<a id="L1186" name="L1186"></a>1186                                 <strong class="reserved">if</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)) != <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.UPPERCASE_LETTER)
<a id="L1187" name="L1187"></a>1187                                 <em class="brace">{</em>
<a id="L1188" name="L1188"></a>1188                                     <strong class="reserved">return</strong> -1;
<a id="L1189" name="L1189"></a>1189                                 <em class="brace">}</em>
<a id="L1190" name="L1190"></a>1190                                 <strong class="reserved">break</strong>;
<a id="L1191" name="L1191"></a>1191 
<a id="L1192" name="L1192"></a>1192                             <strong class="reserved">case</strong> POSIX_CLASS_PRINT:
<a id="L1193" name="L1193"></a>1193                                 <strong class="reserved">if</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)) == <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.CONTROL)
<a id="L1194" name="L1194"></a>1194                                 <em class="brace">{</em>
<a id="L1195" name="L1195"></a>1195                                     <strong class="reserved">return</strong> -1;
<a id="L1196" name="L1196"></a>1196                                 <em class="brace">}</em>
<a id="L1197" name="L1197"></a>1197                                 <strong class="reserved">break</strong>;
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199                             <strong class="reserved">case</strong> POSIX_CLASS_PUNCT:
<a id="L1200" name="L1200"></a>1200                             <em class="brace">{</em>
<a id="L1201" name="L1201"></a>1201                                 <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx));
<a id="L1202" name="L1202"></a>1202                                 <strong class="reserved">switch</strong>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1203" name="L1203"></a>1203                                 <em class="brace">{</em>
<a id="L1204" name="L1204"></a>1204                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.DASH_PUNCTUATION:
<a id="L1205" name="L1205"></a>1205                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.START_PUNCTUATION:
<a id="L1206" name="L1206"></a>1206                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.END_PUNCTUATION:
<a id="L1207" name="L1207"></a>1207                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.CONNECTOR_PUNCTUATION:
<a id="L1208" name="L1208"></a>1208                                     <strong class="reserved">case</strong> <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.OTHER_PUNCTUATION:
<a id="L1209" name="L1209"></a>1209                                         <strong class="reserved">break</strong>;
<a id="L1210" name="L1210"></a>1210 
<a id="L1211" name="L1211"></a>1211                                     <strong class="reserved">default</strong>:
<a id="L1212" name="L1212"></a>1212                                         <strong class="reserved">return</strong> -1;
<a id="L1213" name="L1213"></a>1213                                 <em class="brace">}</em>
<a id="L1214" name="L1214"></a>1214                             <em class="brace">}</em>
<a id="L1215" name="L1215"></a>1215                             <strong class="reserved">break</strong>;
<a id="L1216" name="L1216"></a>1216 
<a id="L1217" name="L1217"></a>1217                             <strong class="reserved">case</strong> POSIX_CLASS_XDIGIT: <em class="comment">// JWL - bugbug??</em>
<a id="L1218" name="L1218"></a>1218                             <em class="brace">{</em>
<a id="L1219" name="L1219"></a>1219                                 <strong class="reserved">boolean</strong> isXDigit = ((<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx) &gt;= '0' &amp;&amp; <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx) &lt;= '9') ||
<a id="L1220" name="L1220"></a>1220                                                     (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx) &gt;= 'a' &amp;&amp; <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx) &lt;= 'f') ||
<a id="L1221" name="L1221"></a>1221                                                     (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx) &gt;= 'A' &amp;&amp; <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx) &lt;= 'F'));
<a id="L1222" name="L1222"></a>1222                                 <strong class="reserved">if</strong> (!isXDigit)
<a id="L1223" name="L1223"></a>1223                                 <em class="brace">{</em>
<a id="L1224" name="L1224"></a>1224                                     <strong class="reserved">return</strong> -1;
<a id="L1225" name="L1225"></a>1225                                 <em class="brace">}</em>
<a id="L1226" name="L1226"></a>1226                             <em class="brace">}</em>
<a id="L1227" name="L1227"></a>1227                             <strong class="reserved">break</strong>;
<a id="L1228" name="L1228"></a>1228 
<a id="L1229" name="L1229"></a>1229                             <strong class="reserved">case</strong> POSIX_CLASS_JSTART:
<a id="L1230" name="L1230"></a>1230                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25754.html" title="Multiple defined in 10 places.">isJavaIdentifierStart</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1231" name="L1231"></a>1231                                 <em class="brace">{</em>
<a id="L1232" name="L1232"></a>1232                                     <strong class="reserved">return</strong> -1;
<a id="L1233" name="L1233"></a>1233                                 <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234                                 <strong class="reserved">break</strong>;
<a id="L1235" name="L1235"></a>1235 
<a id="L1236" name="L1236"></a>1236                             <strong class="reserved">case</strong> POSIX_CLASS_JPART:
<a id="L1237" name="L1237"></a>1237                                 <strong class="reserved">if</strong> (!<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25753.html" title="Multiple defined in 11 places.">isJavaIdentifierPart</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx)))
<a id="L1238" name="L1238"></a>1238                                 <em class="brace">{</em>
<a id="L1239" name="L1239"></a>1239                                     <strong class="reserved">return</strong> -1;
<a id="L1240" name="L1240"></a>1240                                 <em class="brace">}</em>
<a id="L1241" name="L1241"></a>1241                                 <strong class="reserved">break</strong>;
<a id="L1242" name="L1242"></a>1242 
<a id="L1243" name="L1243"></a>1243                             <strong class="reserved">default</strong>:
<a id="L1244" name="L1244"></a>1244                                 <a href="../D/24920.html" title="Multiple defined in 2 places.">internalError</a>("Bad posix class");
<a id="L1245" name="L1245"></a>1245                                 <strong class="reserved">break</strong>;
<a id="L1246" name="L1246"></a>1246                         <em class="brace">}</em>
<a id="L1247" name="L1247"></a>1247 
<a id="L1248" name="L1248"></a>1248                         <em class="comment">// Matched.</em>
<a id="L1249" name="L1249"></a>1249                         idx++;
<a id="L1250" name="L1250"></a>1250                     <em class="brace">}</em>
<a id="L1251" name="L1251"></a>1251                     <strong class="reserved">break</strong>;
<a id="L1252" name="L1252"></a>1252 
<a id="L1253" name="L1253"></a>1253                 <strong class="reserved">case</strong> OP_ANYOF:
<a id="L1254" name="L1254"></a>1254                     <em class="brace">{</em>
<a id="L1255" name="L1255"></a>1255                         <em class="comment">// Out of input?</em>
<a id="L1256" name="L1256"></a>1256                         <strong class="reserved">if</strong> (<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(idx))
<a id="L1257" name="L1257"></a>1257                         <em class="brace">{</em>
<a id="L1258" name="L1258"></a>1258                             <strong class="reserved">return</strong> -1;
<a id="L1259" name="L1259"></a>1259                         <em class="brace">}</em>
<a id="L1260" name="L1260"></a>1260 
<a id="L1261" name="L1261"></a>1261                         <em class="comment">// Get character to match against character class and maybe casefold</em>
<a id="L1262" name="L1262"></a>1262                         <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(idx);
<a id="L1263" name="L1263"></a>1263                         <strong class="reserved">boolean</strong> caseFold = (matchFlags &amp; MATCH_CASEINDEPENDENT) != 0;
<a id="L1264" name="L1264"></a>1264                         <em class="comment">// Loop through character class checking our match character</em>
<a id="L1265" name="L1265"></a>1265                         <strong class="reserved">int</strong> idxRange = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + nodeSize;
<a id="L1266" name="L1266"></a>1266                         <strong class="reserved">int</strong> idxEnd = idxRange + (opdata * 2);
<a id="L1267" name="L1267"></a>1267                         <strong class="reserved">boolean</strong> <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> = <strong class="reserved">false</strong>;
<a id="L1268" name="L1268"></a>1268                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = idxRange; !<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> &amp;&amp; i &lt; idxEnd; )
<a id="L1269" name="L1269"></a>1269                         <em class="brace">{</em>
<a id="L1270" name="L1270"></a>1270                             <em class="comment">// Get start, end and match characters</em>
<a id="L1271" name="L1271"></a>1271                             <strong class="reserved">char</strong> s = instruction[i++];
<a id="L1272" name="L1272"></a>1272                             <strong class="reserved">char</strong> e = instruction[i++];
<a id="L1273" name="L1273"></a>1273 
<a id="L1274" name="L1274"></a>1274                             <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> = ((<a href="../S/4535.html#L1751" title="Defined at 1751 in src/com/sun/org/apache/regexp/internal/RE.java.">compareChars</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, s, caseFold) &gt;= 0)
<a id="L1275" name="L1275"></a>1275                                      &amp;&amp; (<a href="../S/4535.html#L1751" title="Defined at 1751 in src/com/sun/org/apache/regexp/internal/RE.java.">compareChars</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, e, caseFold) &lt;= 0));
<a id="L1276" name="L1276"></a>1276                         <em class="brace">}</em>
<a id="L1277" name="L1277"></a>1277 
<a id="L1278" name="L1278"></a>1278                         <em class="comment">// Fail if we didn't match the character class</em>
<a id="L1279" name="L1279"></a>1279                         <strong class="reserved">if</strong> (!<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>)
<a id="L1280" name="L1280"></a>1280                         <em class="brace">{</em>
<a id="L1281" name="L1281"></a>1281                             <strong class="reserved">return</strong> -1;
<a id="L1282" name="L1282"></a>1282                         <em class="brace">}</em>
<a id="L1283" name="L1283"></a>1283                         idx++;
<a id="L1284" name="L1284"></a>1284                     <em class="brace">}</em>
<a id="L1285" name="L1285"></a>1285                     <strong class="reserved">break</strong>;
<a id="L1286" name="L1286"></a>1286 
<a id="L1287" name="L1287"></a>1287                 <strong class="reserved">case</strong> OP_BRANCH:
<a id="L1288" name="L1288"></a>1288                 <em class="brace">{</em>
<a id="L1289" name="L1289"></a>1289                     <em class="comment">// Check for choices</em>
<a id="L1290" name="L1290"></a>1290                     <strong class="reserved">if</strong> (instruction[<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> + offsetOpcode] != OP_BRANCH)
<a id="L1291" name="L1291"></a>1291                     <em class="brace">{</em>
<a id="L1292" name="L1292"></a>1292                         <em class="comment">// If there aren't any other choices, just evaluate this branch.</em>
<a id="L1293" name="L1293"></a>1293                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> += nodeSize;
<a id="L1294" name="L1294"></a>1294                         <strong class="reserved">continue</strong>;
<a id="L1295" name="L1295"></a>1295                     <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296 
<a id="L1297" name="L1297"></a>1297                     <em class="comment">// Try all available branches</em>
<a id="L1298" name="L1298"></a>1298                     <strong class="reserved">short</strong> nextBranch;
<a id="L1299" name="L1299"></a>1299                     <strong class="reserved">do</strong>
<a id="L1300" name="L1300"></a>1300                     <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301                         <em class="comment">// Try matching the branch against the string</em>
<a id="L1302" name="L1302"></a>1302                         <strong class="reserved">if</strong> ((idxNew = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + nodeSize, maxNode, idx)) != -1)
<a id="L1303" name="L1303"></a>1303                         <em class="brace">{</em>
<a id="L1304" name="L1304"></a>1304                             <strong class="reserved">return</strong> idxNew;
<a id="L1305" name="L1305"></a>1305                         <em class="brace">}</em>
<a id="L1306" name="L1306"></a>1306 
<a id="L1307" name="L1307"></a>1307                         <em class="comment">// Go to next branch (if any)</em>
<a id="L1308" name="L1308"></a>1308                         nextBranch = (<strong class="reserved">short</strong>)instruction[<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + offsetNext];
<a id="L1309" name="L1309"></a>1309                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> += nextBranch;
<a id="L1310" name="L1310"></a>1310                     <em class="brace">}</em>
<a id="L1311" name="L1311"></a>1311                     <strong class="reserved">while</strong> (nextBranch != 0 &amp;&amp; (instruction[<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> + offsetOpcode] == OP_BRANCH));
<a id="L1312" name="L1312"></a>1312 
<a id="L1313" name="L1313"></a>1313                     <em class="comment">// Failed to match any branch!</em>
<a id="L1314" name="L1314"></a>1314                     <strong class="reserved">return</strong> -1;
<a id="L1315" name="L1315"></a>1315                 <em class="brace">}</em>
<a id="L1316" name="L1316"></a>1316 
<a id="L1317" name="L1317"></a>1317                 <strong class="reserved">case</strong> OP_NOTHING:
<a id="L1318" name="L1318"></a>1318                 <strong class="reserved">case</strong> OP_GOTO:
<a id="L1319" name="L1319"></a>1319 
<a id="L1320" name="L1320"></a>1320                     <em class="comment">// Just advance to the next node without doing anything</em>
<a id="L1321" name="L1321"></a>1321                     <strong class="reserved">break</strong>;
<a id="L1322" name="L1322"></a>1322 
<a id="L1323" name="L1323"></a>1323                 <strong class="reserved">case</strong> OP_END:
<a id="L1324" name="L1324"></a>1324 
<a id="L1325" name="L1325"></a>1325                     <em class="comment">// Match has succeeded!</em>
<a id="L1326" name="L1326"></a>1326                     <a href="../S/4535.html#L739" title="Defined at 739 in src/com/sun/org/apache/regexp/internal/RE.java.">setParenEnd</a>(0, idx);
<a id="L1327" name="L1327"></a>1327                     <strong class="reserved">return</strong> idx;
<a id="L1328" name="L1328"></a>1328 
<a id="L1329" name="L1329"></a>1329                 <strong class="reserved">default</strong>:
<a id="L1330" name="L1330"></a>1330 
<a id="L1331" name="L1331"></a>1331                     <em class="comment">// Corrupt program</em>
<a id="L1332" name="L1332"></a>1332                     <a href="../D/24920.html" title="Multiple defined in 2 places.">internalError</a>("Invalid opcode '" + opcode + "'");
<a id="L1333" name="L1333"></a>1333             <em class="brace">}</em>
<a id="L1334" name="L1334"></a>1334 
<a id="L1335" name="L1335"></a>1335             <em class="comment">// Advance to the next node in the program</em>
<a id="L1336" name="L1336"></a>1336             <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1337" name="L1337"></a>1337         <em class="brace">}</em>
<a id="L1338" name="L1338"></a>1338 
<a id="L1339" name="L1339"></a>1339         <em class="comment">// We "should" never end up here</em>
<a id="L1340" name="L1340"></a>1340         <a href="../D/24920.html" title="Multiple defined in 2 places.">internalError</a>("Corrupt program");
<a id="L1341" name="L1341"></a>1341         <strong class="reserved">return</strong> -1;
<a id="L1342" name="L1342"></a>1342     <em class="brace">}</em>
<a id="L1343" name="L1343"></a>1343 
<div class="comment">
      Match the current regular expression program against the current
      input string, starting at index i of the input string.  This method
      is only meant for internal use.
      @param i The input string index to start matching at
      @return True if the input matched the expression</div>
<a id="L1352" name="L1352"></a>1352     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/23122.html" title="Multiple referred from 2 places.">matchAt</a>(<strong class="reserved">int</strong> i)
<a id="L1353" name="L1353"></a>1353     <em class="brace">{</em>
<a id="L1354" name="L1354"></a>1354         <em class="comment">// Initialize start pointer, paren cache and paren count</em>
<a id="L1355" name="L1355"></a>1355         <a href="../S/1769.html#L728" title="Defined at 728 in src/java/lang/Thread.java.">start0</a> = -1;
<a id="L1356" name="L1356"></a>1356         end0   = -1;
<a id="L1357" name="L1357"></a>1357         start1 = -1;
<a id="L1358" name="L1358"></a>1358         end1   = -1;
<a id="L1359" name="L1359"></a>1359         start2 = -1;
<a id="L1360" name="L1360"></a>1360         end2   = -1;
<a id="L1361" name="L1361"></a>1361         startn = <strong class="reserved">null</strong>;
<a id="L1362" name="L1362"></a>1362         endn   = <strong class="reserved">null</strong>;
<a id="L1363" name="L1363"></a>1363         parenCount = 1;
<a id="L1364" name="L1364"></a>1364         <a href="../S/4535.html#L704" title="Defined at 704 in src/com/sun/org/apache/regexp/internal/RE.java.">setParenStart</a>(0, i);
<a id="L1365" name="L1365"></a>1365 
<a id="L1366" name="L1366"></a>1366         <em class="comment">// Allocate backref arrays (unless optimizations indicate otherwise)</em>
<a id="L1367" name="L1367"></a>1367         <strong class="reserved">if</strong> ((program.<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; <a href="../S/4543.html#L36" title="Defined at 36 in src/com/sun/org/apache/regexp/internal/REProgram.java.">REProgram</a>.OPT_HASBACKREFS) != 0)
<a id="L1368" name="L1368"></a>1368         <em class="brace">{</em>
<a id="L1369" name="L1369"></a>1369             startBackref = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[maxParen];
<a id="L1370" name="L1370"></a>1370             endBackref = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[maxParen];
<a id="L1371" name="L1371"></a>1371         <em class="brace">}</em>
<a id="L1372" name="L1372"></a>1372 
<a id="L1373" name="L1373"></a>1373         <em class="comment">// Match against string</em>
<a id="L1374" name="L1374"></a>1374         <strong class="reserved">int</strong> idx;
<a id="L1375" name="L1375"></a>1375         <strong class="reserved">if</strong> ((idx = <a href="../S/4535.html#L806" title="Defined at 806 in src/com/sun/org/apache/regexp/internal/RE.java.">matchNodes</a>(0, maxNode, i)) != -1)
<a id="L1376" name="L1376"></a>1376         <em class="brace">{</em>
<a id="L1377" name="L1377"></a>1377             <a href="../S/4535.html#L739" title="Defined at 739 in src/com/sun/org/apache/regexp/internal/RE.java.">setParenEnd</a>(0, idx);
<a id="L1378" name="L1378"></a>1378             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1379" name="L1379"></a>1379         <em class="brace">}</em>
<a id="L1380" name="L1380"></a>1380 
<a id="L1381" name="L1381"></a>1381         <em class="comment">// Didn't match</em>
<a id="L1382" name="L1382"></a>1382         parenCount = 0;
<a id="L1383" name="L1383"></a>1383         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1384" name="L1384"></a>1384     <em class="brace">}</em>
<a id="L1385" name="L1385"></a>1385 
<div class="comment">
      Matches the current regular expression program against a character array,
      starting at a given index.
      @param search String to match against
      @param i Index to start searching at
      @return True if string matched</div>
<a id="L1394" name="L1394"></a>1394     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23117.html" title="Multiple referred from 460 places.">match</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>, <strong class="reserved">int</strong> i)
<a id="L1395" name="L1395"></a>1395     <em class="brace">{</em>
<a id="L1396" name="L1396"></a>1396         <strong class="reserved">return</strong> <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>(<strong class="reserved">new</strong> <a href="../D/8429.html" title="Multiple defined in 2 places.">StringCharacterIterator</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>), i);
<a id="L1397" name="L1397"></a>1397     <em class="brace">}</em>
<a id="L1398" name="L1398"></a>1398 
<div class="comment">
      Matches the current regular expression program against a character array,
      starting at a given index.
      @param search String to match against
      @param i Index to start searching at
      @return True if string matched</div>
<a id="L1407" name="L1407"></a>1407     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23117.html" title="Multiple referred from 460 places.">match</a>(<a href="../D/1412.html" title="Multiple defined in 2 places.">CharacterIterator</a> <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>, <strong class="reserved">int</strong> i)
<a id="L1408" name="L1408"></a>1408     <em class="brace">{</em>
<a id="L1409" name="L1409"></a>1409         <em class="comment">// There is no compiled program to search with!</em>
<a id="L1410" name="L1410"></a>1410         <strong class="reserved">if</strong> (program == <strong class="reserved">null</strong>)
<a id="L1411" name="L1411"></a>1411         <em class="brace">{</em>
<a id="L1412" name="L1412"></a>1412             <em class="comment">// This should be uncommon enough to be an error case rather</em>
<a id="L1413" name="L1413"></a>1413             <em class="comment">// than an exception (which would have to be handled everywhere)</em>
<a id="L1414" name="L1414"></a>1414             <a href="../D/24920.html" title="Multiple defined in 2 places.">internalError</a>("No RE program to run!");
<a id="L1415" name="L1415"></a>1415         <em class="brace">}</em>
<a id="L1416" name="L1416"></a>1416 
<a id="L1417" name="L1417"></a>1417         <em class="comment">// Save string to search</em>
<a id="L1418" name="L1418"></a>1418         <strong class="reserved">this</strong>.<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a> = <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>;
<a id="L1419" name="L1419"></a>1419 
<a id="L1420" name="L1420"></a>1420         <em class="comment">// Can we optimize the search by looking for a prefix string?</em>
<a id="L1421" name="L1421"></a>1421         <strong class="reserved">if</strong> (program.<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <strong class="reserved">null</strong>)
<a id="L1422" name="L1422"></a>1422         <em class="brace">{</em>
<a id="L1423" name="L1423"></a>1423             <em class="comment">// Unprefixed matching must try for a match at each character</em>
<a id="L1424" name="L1424"></a>1424             <strong class="reserved">for</strong> ( ;! <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(i - 1); i++)
<a id="L1425" name="L1425"></a>1425             <em class="brace">{</em>
<a id="L1426" name="L1426"></a>1426                 <em class="comment">// Try a match at index i</em>
<a id="L1427" name="L1427"></a>1427                 <strong class="reserved">if</strong> (<a href="../S/4535.html#L1352" title="Defined at 1352 in src/com/sun/org/apache/regexp/internal/RE.java.">matchAt</a>(i))
<a id="L1428" name="L1428"></a>1428                 <em class="brace">{</em>
<a id="L1429" name="L1429"></a>1429                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1430" name="L1430"></a>1430                 <em class="brace">}</em>
<a id="L1431" name="L1431"></a>1431             <em class="brace">}</em>
<a id="L1432" name="L1432"></a>1432             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1433" name="L1433"></a>1433         <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434         <strong class="reserved">else</strong>
<a id="L1435" name="L1435"></a>1435         <em class="brace">{</em>
<a id="L1436" name="L1436"></a>1436             <em class="comment">// Prefix-anchored matching is possible</em>
<a id="L1437" name="L1437"></a>1437             <strong class="reserved">boolean</strong> caseIndependent = (matchFlags &amp; MATCH_CASEINDEPENDENT) != 0;
<a id="L1438" name="L1438"></a>1438             <strong class="reserved">char</strong>[] <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = program.<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L1439" name="L1439"></a>1439             <strong class="reserved">for</strong> ( ; !<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>(i + <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1); i++)
<a id="L1440" name="L1440"></a>1440             <em class="brace">{</em>
<a id="L1441" name="L1441"></a>1441                 <strong class="reserved">int</strong> j = i;
<a id="L1442" name="L1442"></a>1442                 <strong class="reserved">int</strong> k = 0;
<a id="L1443" name="L1443"></a>1443 
<a id="L1444" name="L1444"></a>1444                 <strong class="reserved">boolean</strong> <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>;
<a id="L1445" name="L1445"></a>1445                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L1446" name="L1446"></a>1446                     <em class="comment">// If there's a mismatch of any character in the prefix, give up</em>
<a id="L1447" name="L1447"></a>1447                     <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> = (<a href="../S/4535.html#L1751" title="Defined at 1751 in src/com/sun/org/apache/regexp/internal/RE.java.">compareChars</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(j++), <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>[k++], caseIndependent) == 0);
<a id="L1448" name="L1448"></a>1448                 <em class="brace">}</em> <strong class="reserved">while</strong> (<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> &amp;&amp; k &lt; <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1449" name="L1449"></a>1449 
<a id="L1450" name="L1450"></a>1450                 <em class="comment">// See if the whole prefix string matched</em>
<a id="L1451" name="L1451"></a>1451                 <strong class="reserved">if</strong> (k == <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1452" name="L1452"></a>1452                 <em class="brace">{</em>
<a id="L1453" name="L1453"></a>1453                     <em class="comment">// We matched the full prefix at firstChar, so try it</em>
<a id="L1454" name="L1454"></a>1454                     <strong class="reserved">if</strong> (<a href="../S/4535.html#L1352" title="Defined at 1352 in src/com/sun/org/apache/regexp/internal/RE.java.">matchAt</a>(i))
<a id="L1455" name="L1455"></a>1455                     <em class="brace">{</em>
<a id="L1456" name="L1456"></a>1456                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1457" name="L1457"></a>1457                     <em class="brace">}</em>
<a id="L1458" name="L1458"></a>1458                 <em class="brace">}</em>
<a id="L1459" name="L1459"></a>1459             <em class="brace">}</em>
<a id="L1460" name="L1460"></a>1460             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1461" name="L1461"></a>1461         <em class="brace">}</em>
<a id="L1462" name="L1462"></a>1462     <em class="brace">}</em>
<a id="L1463" name="L1463"></a>1463 
<div class="comment">
      Matches the current regular expression program against a String.
      @param search String to match against
      @return True if string matched</div>
<a id="L1470" name="L1470"></a>1470     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23117.html" title="Multiple referred from 460 places.">match</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>)
<a id="L1471" name="L1471"></a>1471     <em class="brace">{</em>
<a id="L1472" name="L1472"></a>1472         <strong class="reserved">return</strong> <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>(<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>, 0);
<a id="L1473" name="L1473"></a>1473     <em class="brace">}</em>
<a id="L1474" name="L1474"></a>1474 
<div class="comment">
      Splits a string into an array of strings on regular expression boundaries.
      This function works the same way as the Perl function of the same name.
      Given a regular expression of "[ab]+" and a string to split of
      "xyzzyababbayyzabbbab123", the result would be the array of Strings
      "[xyzzy, yyz, 123]".
      <p>Please note that the first string in the resulting array may be an empty
      string. This happens when the very first character of input string is
      matched by the pattern.
      @param s String to split on this regular exression
      @return Array of strings</p></div>
<a id="L1489" name="L1489"></a>1489     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/28754.html" title="Multiple referred from 96 places.">split</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s)
<a id="L1490" name="L1490"></a>1490     <em class="brace">{</em>
<a id="L1491" name="L1491"></a>1491         <em class="comment">// Create new vector</em>
<a id="L1492" name="L1492"></a>1492         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> v = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1493" name="L1493"></a>1493 
<a id="L1494" name="L1494"></a>1494         <em class="comment">// Start at position 0 and search the whole string</em>
<a id="L1495" name="L1495"></a>1495         <strong class="reserved">int</strong> pos = 0;
<a id="L1496" name="L1496"></a>1496         <strong class="reserved">int</strong> len = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1497" name="L1497"></a>1497 
<a id="L1498" name="L1498"></a>1498         <em class="comment">// Try a match at each position</em>
<a id="L1499" name="L1499"></a>1499         <strong class="reserved">while</strong> (pos &lt; len &amp;&amp; <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>(s, pos))
<a id="L1500" name="L1500"></a>1500         <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501             <em class="comment">// Get start of match</em>
<a id="L1502" name="L1502"></a>1502             <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../S/4535.html#L625" title="Defined at 625 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenStart</a>(0);
<a id="L1503" name="L1503"></a>1503 
<a id="L1504" name="L1504"></a>1504             <em class="comment">// Get end of match</em>
<a id="L1505" name="L1505"></a>1505             <strong class="reserved">int</strong> newpos = <a href="../S/4535.html#L657" title="Defined at 657 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenEnd</a>(0);
<a id="L1506" name="L1506"></a>1506 
<a id="L1507" name="L1507"></a>1507             <em class="comment">// Check if no progress was made</em>
<a id="L1508" name="L1508"></a>1508             <strong class="reserved">if</strong> (newpos == pos)
<a id="L1509" name="L1509"></a>1509             <em class="brace">{</em>
<a id="L1510" name="L1510"></a>1510                 v.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(s.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> + 1));
<a id="L1511" name="L1511"></a>1511                 newpos++;
<a id="L1512" name="L1512"></a>1512             <em class="brace">}</em>
<a id="L1513" name="L1513"></a>1513             <strong class="reserved">else</strong>
<a id="L1514" name="L1514"></a>1514             <em class="brace">{</em>
<a id="L1515" name="L1515"></a>1515                 v.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(s.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>));
<a id="L1516" name="L1516"></a>1516             <em class="brace">}</em>
<a id="L1517" name="L1517"></a>1517 
<a id="L1518" name="L1518"></a>1518             <em class="comment">// Move to new position</em>
<a id="L1519" name="L1519"></a>1519             pos = newpos;
<a id="L1520" name="L1520"></a>1520         <em class="brace">}</em>
<a id="L1521" name="L1521"></a>1521 
<a id="L1522" name="L1522"></a>1522         <em class="comment">// Push remainder if it's not empty</em>
<a id="L1523" name="L1523"></a>1523         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/30665.html" title="Multiple defined in 3 places.">remainder</a> = s.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos);
<a id="L1524" name="L1524"></a>1524         <strong class="reserved">if</strong> (<a href="../D/30665.html" title="Multiple defined in 3 places.">remainder</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0)
<a id="L1525" name="L1525"></a>1525         <em class="brace">{</em>
<a id="L1526" name="L1526"></a>1526             v.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/30665.html" title="Multiple defined in 3 places.">remainder</a>);
<a id="L1527" name="L1527"></a>1527         <em class="brace">}</em>
<a id="L1528" name="L1528"></a>1528 
<a id="L1529" name="L1529"></a>1529         <em class="comment">// Return vector as an array of strings</em>
<a id="L1530" name="L1530"></a>1530         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] ret = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[v.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L1531" name="L1531"></a>1531         v.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(ret);
<a id="L1532" name="L1532"></a>1532         <strong class="reserved">return</strong> ret;
<a id="L1533" name="L1533"></a>1533     <em class="brace">}</em>
<a id="L1534" name="L1534"></a>1534 
<div class="comment">
      Flag bit that indicates that subst should replace all occurrences of this
      regular expression.</div>
<a id="L1539" name="L1539"></a>1539     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REPLACE_ALL            = 0x0000;
<a id="L1540" name="L1540"></a>1540 
<div class="comment">
      Flag bit that indicates that subst should only replace the first occurrence
      of this regular expression.</div>
<a id="L1545" name="L1545"></a>1545     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REPLACE_FIRSTONLY      = 0x0001;
<a id="L1546" name="L1546"></a>1546 
<div class="comment">
      Flag bit that indicates that subst should replace backreferences</div>
<a id="L1550" name="L1550"></a>1550     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REPLACE_BACKREFERENCES = 0x0002;
<a id="L1551" name="L1551"></a>1551 
<div class="comment">
      Substitutes a string for this regular expression in another string.
      This method works like the Perl function of the same name.
      Given a regular expression of "a*b", a String to substituteIn of
      "aaaabfooaaabgarplyaaabwackyb" and the substitution String "-", the
      resulting String returned by subst would be "-foo-garply-wacky-".
      @param substituteIn String to substitute within
      @param substitution String to substitute for all matches of this regular expression.
      @return The string substituteIn with zero or more occurrences of the current
      regular expression replaced with the substitution String (if this regular
      expression object doesn't match at any position, the original String is returned
      unchanged).</div>
<a id="L1566" name="L1566"></a>1566     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29017.html" title="Multiple referred from 6 places.">subst</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> substituteIn, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> substitution)
<a id="L1567" name="L1567"></a>1567     <em class="brace">{</em>
<a id="L1568" name="L1568"></a>1568         <strong class="reserved">return</strong> <a href="../D/35008.html" title="Multiple defined in 2 places.">subst</a>(substituteIn, substitution, REPLACE_ALL);
<a id="L1569" name="L1569"></a>1569     <em class="brace">}</em>
<a id="L1570" name="L1570"></a>1570 
<div class="comment">
      Substitutes a string for this regular expression in another string.
      This method works like the Perl function of the same name.
      Given a regular expression of "a*b", a String to substituteIn of
      "aaaabfooaaabgarplyaaabwackyb" and the substitution String "-", the
      resulting String returned by subst would be "-foo-garply-wacky-".
      <p>
      It is also possible to reference the contents of a parenthesized expression
      with $0, $1, ... $9. A regular expression of "http://[\\.\\w\\-\\?/~_@&amp;=%]+",
      a String to substituteIn of "visit us: http://www.apache.org!" and the
      substitution String "&lt;a href=\"$0\"&gt;$0&lt;/a&gt;", the resulting String
      returned by subst would be
      "visit us: &lt;a href=\"http://www.apache.org\"&gt;http://www.apache.org&lt;/a&gt;!".
      </p><p>
      <i>Note:</i> $0 represents the whole match.
      @param substituteIn String to substitute within
      @param substitution String to substitute for matches of this regular expression
      @param flags One or more bitwise flags from REPLACE_*.  If the REPLACE_FIRSTONLY
      flag bit is set, only the first occurrence of this regular expression is replaced.
      If the bit is not set (REPLACE_ALL), all occurrences of this pattern will be
      replaced. If the flag REPLACE_BACKREFERENCES is set, all backreferences will
      be processed.
      @return The string substituteIn with zero or more occurrences of the current
      regular expression replaced with the substitution String (if this regular
      expression object doesn't match at any position, the original String is returned
      unchanged).</p></div>
<a id="L1599" name="L1599"></a>1599     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29017.html" title="Multiple referred from 6 places.">subst</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> substituteIn, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> substitution, <strong class="reserved">int</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>)
<a id="L1600" name="L1600"></a>1600     <em class="brace">{</em>
<a id="L1601" name="L1601"></a>1601         <em class="comment">// String to return</em>
<a id="L1602" name="L1602"></a>1602         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> ret = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L1603" name="L1603"></a>1603 
<a id="L1604" name="L1604"></a>1604         <em class="comment">// Start at position 0 and search the whole string</em>
<a id="L1605" name="L1605"></a>1605         <strong class="reserved">int</strong> pos = 0;
<a id="L1606" name="L1606"></a>1606         <strong class="reserved">int</strong> len = substituteIn.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1607" name="L1607"></a>1607 
<a id="L1608" name="L1608"></a>1608         <em class="comment">// Try a match at each position</em>
<a id="L1609" name="L1609"></a>1609         <strong class="reserved">while</strong> (pos &lt; len &amp;&amp; <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>(substituteIn, pos))
<a id="L1610" name="L1610"></a>1610         <em class="brace">{</em>
<a id="L1611" name="L1611"></a>1611             <em class="comment">// Append string before match</em>
<a id="L1612" name="L1612"></a>1612             ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(substituteIn.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos, <a href="../S/4535.html#L625" title="Defined at 625 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenStart</a>(0)));
<a id="L1613" name="L1613"></a>1613 
<a id="L1614" name="L1614"></a>1614             <strong class="reserved">if</strong> ((<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; REPLACE_BACKREFERENCES) != 0)
<a id="L1615" name="L1615"></a>1615             <em class="brace">{</em>
<a id="L1616" name="L1616"></a>1616                 <em class="comment">// Process backreferences</em>
<a id="L1617" name="L1617"></a>1617                 <strong class="reserved">int</strong> lCurrentPosition = 0;
<a id="L1618" name="L1618"></a>1618                 <strong class="reserved">int</strong> lLastPosition = -2;
<a id="L1619" name="L1619"></a>1619                 <strong class="reserved">int</strong> lLength = substitution.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1620" name="L1620"></a>1620                 <strong class="reserved">boolean</strong> bAddedPrefix = <strong class="reserved">false</strong>;
<a id="L1621" name="L1621"></a>1621 
<a id="L1622" name="L1622"></a>1622                 <strong class="reserved">while</strong> ((lCurrentPosition = substitution.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("$", lCurrentPosition)) &gt;= 0)
<a id="L1623" name="L1623"></a>1623                 <em class="brace">{</em>
<a id="L1624" name="L1624"></a>1624                     <strong class="reserved">if</strong> ((lCurrentPosition == 0 || substitution.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(lCurrentPosition - 1) != '\\')
<a id="L1625" name="L1625"></a>1625                         &amp;&amp; lCurrentPosition+1 &lt; lLength)
<a id="L1626" name="L1626"></a>1626                     <em class="brace">{</em>
<a id="L1627" name="L1627"></a>1627                         <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = substitution.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(lCurrentPosition + 1);
<a id="L1628" name="L1628"></a>1628                         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;= '0' &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= '9')
<a id="L1629" name="L1629"></a>1629                         <em class="brace">{</em>
<a id="L1630" name="L1630"></a>1630                             <strong class="reserved">if</strong> (bAddedPrefix == <strong class="reserved">false</strong>)
<a id="L1631" name="L1631"></a>1631                             <em class="brace">{</em>
<a id="L1632" name="L1632"></a>1632                                 <em class="comment">// Append everything between the beginning of the</em>
<a id="L1633" name="L1633"></a>1633                                 <em class="comment">// substitution string and the current $ sign</em>
<a id="L1634" name="L1634"></a>1634                                 ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(substitution.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, lCurrentPosition));
<a id="L1635" name="L1635"></a>1635                                 bAddedPrefix = <strong class="reserved">true</strong>;
<a id="L1636" name="L1636"></a>1636                             <em class="brace">}</em>
<a id="L1637" name="L1637"></a>1637                             <strong class="reserved">else</strong>
<a id="L1638" name="L1638"></a>1638                             <em class="brace">{</em>
<a id="L1639" name="L1639"></a>1639                                 <em class="comment">// Append everything between the last and the current $ sign</em>
<a id="L1640" name="L1640"></a>1640                                 ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(substitution.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(lLastPosition + 2, lCurrentPosition));
<a id="L1641" name="L1641"></a>1641                             <em class="brace">}</em>
<a id="L1642" name="L1642"></a>1642 
<a id="L1643" name="L1643"></a>1643                             <em class="comment">// Append the parenthesized expression</em>
<a id="L1644" name="L1644"></a>1644                             <em class="comment">// Note: if a parenthesized expression of the requested</em>
<a id="L1645" name="L1645"></a>1645                             <em class="comment">// index is not available "null" is added to the string</em>
<a id="L1646" name="L1646"></a>1646                             ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4535.html#L609" title="Defined at 609 in src/com/sun/org/apache/regexp/internal/RE.java.">getParen</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> - '0'));
<a id="L1647" name="L1647"></a>1647                             lLastPosition = lCurrentPosition;
<a id="L1648" name="L1648"></a>1648                         <em class="brace">}</em>
<a id="L1649" name="L1649"></a>1649                     <em class="brace">}</em>
<a id="L1650" name="L1650"></a>1650 
<a id="L1651" name="L1651"></a>1651                     <em class="comment">// Move forward, skipping past match</em>
<a id="L1652" name="L1652"></a>1652                     lCurrentPosition++;
<a id="L1653" name="L1653"></a>1653                 <em class="brace">}</em>
<a id="L1654" name="L1654"></a>1654 
<a id="L1655" name="L1655"></a>1655                 <em class="comment">// Append everything after the last $ sign</em>
<a id="L1656" name="L1656"></a>1656                 ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(substitution.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(lLastPosition + 2, lLength));
<a id="L1657" name="L1657"></a>1657             <em class="brace">}</em>
<a id="L1658" name="L1658"></a>1658             <strong class="reserved">else</strong>
<a id="L1659" name="L1659"></a>1659             <em class="brace">{</em>
<a id="L1660" name="L1660"></a>1660                 <em class="comment">// Append substitution without processing backreferences</em>
<a id="L1661" name="L1661"></a>1661                 ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(substitution);
<a id="L1662" name="L1662"></a>1662             <em class="brace">}</em>
<a id="L1663" name="L1663"></a>1663 
<a id="L1664" name="L1664"></a>1664             <em class="comment">// Move forward, skipping past match</em>
<a id="L1665" name="L1665"></a>1665             <strong class="reserved">int</strong> newpos = <a href="../S/4535.html#L657" title="Defined at 657 in src/com/sun/org/apache/regexp/internal/RE.java.">getParenEnd</a>(0);
<a id="L1666" name="L1666"></a>1666 
<a id="L1667" name="L1667"></a>1667             <em class="comment">// We always want to make progress!</em>
<a id="L1668" name="L1668"></a>1668             <strong class="reserved">if</strong> (newpos == pos)
<a id="L1669" name="L1669"></a>1669             <em class="brace">{</em>
<a id="L1670" name="L1670"></a>1670                 newpos++;
<a id="L1671" name="L1671"></a>1671             <em class="brace">}</em>
<a id="L1672" name="L1672"></a>1672 
<a id="L1673" name="L1673"></a>1673             <em class="comment">// Try new position</em>
<a id="L1674" name="L1674"></a>1674             pos = newpos;
<a id="L1675" name="L1675"></a>1675 
<a id="L1676" name="L1676"></a>1676             <em class="comment">// Break out if we're only supposed to replace one occurrence</em>
<a id="L1677" name="L1677"></a>1677             <strong class="reserved">if</strong> ((<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; REPLACE_FIRSTONLY) != 0)
<a id="L1678" name="L1678"></a>1678             <em class="brace">{</em>
<a id="L1679" name="L1679"></a>1679                 <strong class="reserved">break</strong>;
<a id="L1680" name="L1680"></a>1680             <em class="brace">}</em>
<a id="L1681" name="L1681"></a>1681         <em class="brace">}</em>
<a id="L1682" name="L1682"></a>1682 
<a id="L1683" name="L1683"></a>1683         <em class="comment">// If there's remaining input, append it</em>
<a id="L1684" name="L1684"></a>1684         <strong class="reserved">if</strong> (pos &lt; len)
<a id="L1685" name="L1685"></a>1685         <em class="brace">{</em>
<a id="L1686" name="L1686"></a>1686             ret.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(substituteIn.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos));
<a id="L1687" name="L1687"></a>1687         <em class="brace">}</em>
<a id="L1688" name="L1688"></a>1688 
<a id="L1689" name="L1689"></a>1689         <em class="comment">// Return string buffer as string</em>
<a id="L1690" name="L1690"></a>1690         <strong class="reserved">return</strong> ret.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1691" name="L1691"></a>1691     <em class="brace">}</em>
<a id="L1692" name="L1692"></a>1692 
<div class="comment">
      Returns an array of Strings, whose toString representation matches a regular
      expression. This method works like the Perl function of the same name.  Given
      a regular expression of "a*b" and an array of String objects of [foo, aab, zzz,
      aaaab], the array of Strings returned by grep would be [aab, aaaab].
      @param search Array of Objects to search
      @return Array of Strings whose toString() value matches this regular expression.</div>
<a id="L1702" name="L1702"></a>1702     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../S/4534.html#L486" title="Referred from 486 in src/com/sun/org/apache/regexp/internal/RETest.java.">grep</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>)
<a id="L1703" name="L1703"></a>1703     <em class="brace">{</em>
<a id="L1704" name="L1704"></a>1704         <em class="comment">// Create new vector to hold return items</em>
<a id="L1705" name="L1705"></a>1705         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> v = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1706" name="L1706"></a>1706 
<a id="L1707" name="L1707"></a>1707         <em class="comment">// Traverse array of objects</em>
<a id="L1708" name="L1708"></a>1708         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1709" name="L1709"></a>1709         <em class="brace">{</em>
<a id="L1710" name="L1710"></a>1710             <em class="comment">// Get next object as a string</em>
<a id="L1711" name="L1711"></a>1711             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s = <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>[i].<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1712" name="L1712"></a>1712 
<a id="L1713" name="L1713"></a>1713             <em class="comment">// If it matches this regexp, add it to the list</em>
<a id="L1714" name="L1714"></a>1714             <strong class="reserved">if</strong> (<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>(s))
<a id="L1715" name="L1715"></a>1715             <em class="brace">{</em>
<a id="L1716" name="L1716"></a>1716                 v.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(s);
<a id="L1717" name="L1717"></a>1717             <em class="brace">}</em>
<a id="L1718" name="L1718"></a>1718         <em class="brace">}</em>
<a id="L1719" name="L1719"></a>1719 
<a id="L1720" name="L1720"></a>1720         <em class="comment">// Return vector as an array of strings</em>
<a id="L1721" name="L1721"></a>1721         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] ret = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[v.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L1722" name="L1722"></a>1722         v.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(ret);
<a id="L1723" name="L1723"></a>1723         <strong class="reserved">return</strong> ret;
<a id="L1724" name="L1724"></a>1724     <em class="brace">}</em>
<a id="L1725" name="L1725"></a>1725 
<div class="comment">
      @return true if character at i-th position in the <code>search</code> string is a newline</div>
<a id="L1729" name="L1729"></a>1729     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21777.html" title="Multiple referred from 7 places.">isNewline</a>(<strong class="reserved">int</strong> i)
<a id="L1730" name="L1730"></a>1730     <em class="brace">{</em>
<a id="L1731" name="L1731"></a>1731         <strong class="reserved">char</strong> <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> = <a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1732" name="L1732"></a>1732 
<a id="L1733" name="L1733"></a>1733         <strong class="reserved">if</strong> (<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> == '\n' || <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> == '\r' || <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> == '\u0085'
<a id="L1734" name="L1734"></a>1734             || <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> == '\u2028' || <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> == '\u2029')
<a id="L1735" name="L1735"></a>1735         <em class="brace">{</em>
<a id="L1736" name="L1736"></a>1736             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1737" name="L1737"></a>1737         <em class="brace">}</em>
<a id="L1738" name="L1738"></a>1738 
<a id="L1739" name="L1739"></a>1739         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1740" name="L1740"></a>1740     <em class="brace">}</em>
<a id="L1741" name="L1741"></a>1741 
<div class="comment">
      Compares two characters.
      @param c1 first character to compare.
      @param c2 second character to compare.
      @param caseIndependent whether comparision is case insensitive or not.
      @return negative, 0, or positive integer as the first character
              less than, equal to, or greater then the second.</div>
<a id="L1751" name="L1751"></a>1751     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/11704.html" title="Multiple referred from 5 places.">compareChars</a>(<strong class="reserved">char</strong> c1, <strong class="reserved">char</strong> c2, <strong class="reserved">boolean</strong> caseIndependent)
<a id="L1752" name="L1752"></a>1752     <em class="brace">{</em>
<a id="L1753" name="L1753"></a>1753         <strong class="reserved">if</strong> (caseIndependent)
<a id="L1754" name="L1754"></a>1754         <em class="brace">{</em>
<a id="L1755" name="L1755"></a>1755             c1 = <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(c1);
<a id="L1756" name="L1756"></a>1756             c2 = <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(c2);
<a id="L1757" name="L1757"></a>1757         <em class="brace">}</em>
<a id="L1758" name="L1758"></a>1758         <strong class="reserved">return</strong> ((<strong class="reserved">int</strong>)c1 - (<strong class="reserved">int</strong>)c2);
<a id="L1759" name="L1759"></a>1759     <em class="brace">}</em>
<a id="L1760" name="L1760"></a>1760 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L498">[^]</a><a href="#L1751">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
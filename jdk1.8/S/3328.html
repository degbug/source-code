<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/DefaultStyledDocument.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L115">[^]</a><a href="#L2727">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L115" title="Defined at 115.">getDefaultRootElement</a></li>
<li><a href="#L125" title="Defined at 125.">create</a></li>
<li><a href="#L183" title="Defined at 183.">insert</a></li>
<li><a href="#L263" title="Defined at 263.">removeElement</a></li>
<li><a href="#L272" title="Defined at 272.">removeElementImpl</a></li>
<li><a href="#L383" title="Defined at 383.">addStyle</a></li>
<li><a href="#L393" title="Defined at 393.">removeStyle</a></li>
<li><a href="#L404" title="Defined at 404.">getStyle</a></li>
<li><a href="#L415" title="Defined at 415.">getStyleNames</a></li>
<li><a href="#L435" title="Defined at 435.">setLogicalStyle</a></li>
<li><a href="#L465" title="Defined at 465.">getLogicalStyle</a></li>
<li><a href="#L495" title="Defined at 495.">setCharacterAttributes</a></li>
<li><a href="#L547" title="Defined at 547.">setParagraphAttributes</a></li>
<li><a href="#L595" title="Defined at 595.">getParagraphElement</a></li>
<li><a href="#L612" title="Defined at 612.">getCharacterElement</a></li>
<li><a href="#L632" title="Defined at 632.">insertUpdate</a></li>
<li><a href="#L811" title="Defined at 811.">createSpecsForInsertAfterNewline</a></li>
<li><a href="#L882" title="Defined at 882.">removeUpdate</a></li>
<li><a href="#L893" title="Defined at 893.">createDefaultRoot</a></li>
<li><a href="#L919" title="Defined at 919.">getForeground</a></li>
<li><a href="#L930" title="Defined at 930.">getBackground</a></li>
<li><a href="#L941" title="Defined at 941.">getFont</a></li>
<li><a href="#L952" title="Defined at 952.">styleChanged</a></li>
<li><a href="#L977" title="Defined at 977.">addDocumentListener</a></li>
<li><a href="#L1007" title="Defined at 1007.">removeDocumentListener</a></li>
<li><a href="#L1028" title="Defined at 1028.">createStyleChangeListener</a></li>
<li><a href="#L1035" title="Defined at 1035.">createStyleContextChangeListener</a></li>
<li><a href="#L1043" title="Defined at 1043.">updateStylesListeningTo</a></li>
<li><a href="#L1081" title="Defined at 1081.">readObject</a></li>
<li><a href="#L1145" title="Defined at 1145.">getName</a></li>
<li><a href="#L1269" title="Defined at 1269.">setType</a></li>
<li><a href="#L1279" title="Defined at 1279.">getType</a></li>
<li><a href="#L1289" title="Defined at 1289.">setDirection</a></li>
<li><a href="#L1298" title="Defined at 1298.">getDirection</a></li>
<li><a href="#L1307" title="Defined at 1307.">getAttributes</a></li>
<li><a href="#L1316" title="Defined at 1316.">getArray</a></li>
<li><a href="#L1326" title="Defined at 1326.">getOffset</a></li>
<li><a href="#L1335" title="Defined at 1335.">getLength</a></li>
<li><a href="#L1344" title="Defined at 1344.">toString</a></li>
<li><a href="#L1416" title="Defined at 1416.">getRootElement</a></li>
<li><a href="#L1428" title="Defined at 1428.">insert</a></li>
<li><a href="#L1442" title="Defined at 1442.">create</a></li>
<li><a href="#L1507" title="Defined at 1507.">remove</a></li>
<li><a href="#L1520" title="Defined at 1520.">change</a></li>
<li><a href="#L1531" title="Defined at 1531.">insertUpdate</a></li>
<li><a href="#L1619" title="Defined at 1619.">removeUpdate</a></li>
<li><a href="#L1627" title="Defined at 1627.">changeUpdate</a></li>
<li><a href="#L1641" title="Defined at 1641.">split</a></li>
<li><a href="#L1725" title="Defined at 1725.">endEdits</a></li>
<li><a href="#L1766" title="Defined at 1766.">beginEdits</a></li>
<li><a href="#L1794" title="Defined at 1794.">push</a></li>
<li><a href="#L1799" title="Defined at 1799.">push</a></li>
<li><a href="#L1803" title="Defined at 1803.">pop</a></li>
<li><a href="#L1822" title="Defined at 1822.">advance</a></li>
<li><a href="#L1826" title="Defined at 1826.">insertElement</a></li>
<li><a href="#L1929" title="Defined at 1929.">removeElements</a></li>
<li><a href="#L2019" title="Defined at 2019.">canJoin</a></li>
<li><a href="#L2053" title="Defined at 2053.">join</a></li>
<li><a href="#L2118" title="Defined at 2118.">clone</a></li>
<li><a href="#L2139" title="Defined at 2139.">cloneAsNecessary</a></li>
<li><a href="#L2171" title="Defined at 2171.">fracture</a></li>
<li><a href="#L2221" title="Defined at 2221.">fractureFrom</a></li>
<li><a href="#L2334" title="Defined at 2334.">recreateFracturedElement</a></li>
<li><a href="#L2358" title="Defined at 2358.">fractureDeepestLeaf</a></li>
<li><a href="#L2383" title="Defined at 2383.">insertFirstContent</a></li>
<li><a href="#L2503" title="Defined at 2503.">toString</a></li>
<li><a href="#L2537" title="Defined at 2537.">redo</a></li>
<li><a href="#L2551" title="Defined at 2551.">undo</a></li>
<li><a href="#L2585" title="Defined at 2585.">redo</a></li>
<li><a href="#L2595" title="Defined at 2595.">undo</a></li>
<li><a href="#L2623" title="Defined at 2623.">getListener</a></li>
<li><a href="#L2653" title="Defined at 2653.">getStaleListeners</a></li>
<li><a href="#L2672" title="Defined at 2672.">stateChanged</a></li>
<li><a href="#L2680" title="Defined at 2680.">fireStateChanged</a></li>
<li><a href="#L2693" title="Defined at 2693.">fireStateChanged</a></li>
<li><a href="#L2714" title="Defined at 2714.">fireStateChanged</a></li>
<li><a href="#L2727" title="Defined at 2727.">run</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.awt.Color;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.Font;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.font.TextAttribute;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.lang.ref.ReferenceQueue;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.lang.ref.WeakReference;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.List;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Map;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.Stack;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.Vector;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.io.IOException;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> javax.swing.event.*;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> javax.swing.undo.AbstractUndoableEdit;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> javax.swing.undo.CannotRedoException;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> javax.swing.undo.CannotUndoException;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> javax.swing.undo.UndoableEdit;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> javax.swing.SwingUtilities;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> static sun.swing.SwingUtilities2.IMPLIED_CR;
<a id="L49" name="L49"></a>  49 
<div class="comment">
  A document that can be marked up with character and paragraph
  styles in a manner similar to the Rich Text Format.  The element
  structure for this document represents style crossings for
  style runs.  These style runs are mapped into a paragraph element
  structure (which may reside in some other structure).  The
  style runs break at paragraph boundaries since logical styles are
  assigned to paragraph boundaries.
  <p>
  <strong>Warning:</strong>
  Serialized objects of this class will not be compatible with
  future Swing releases. The current serialization support is
  appropriate for short term storage or RMI between applications running
  the same version of Swing.  As of 1.4, support for long term storage
  of all JavaBeansâ„¢
  has been added to the <code>java.beans</code> package.
  Please see {@link java.beans.XMLEncoder}.
  @author  Timothy Prinzing
  @see     Document
  @see     AbstractDocument</p></div>
<a id="L72" name="L72"></a>  72 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2130.html" title="Multiple referred from 17 places.">DefaultStyledDocument</a> <strong class="reserved">extends</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a> <strong class="reserved">implements</strong> <a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a> <em class="brace">{</em>
<a id="L73" name="L73"></a>  73 
<div class="comment">
      Constructs a styled document.
      @param c  the container for the content
      @param styles resources and style definitions which may
       be shared across documents</div>
<a id="L81" name="L81"></a>  81     <strong class="reserved">public</strong> DefaultStyledDocument(<a href="../S/3268.html#L1586" title="Defined at 1586 in src/javax/swing/text/AbstractDocument.java.">Content</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles) <em class="brace">{</em>
<a id="L82" name="L82"></a>  82         <strong class="reserved">super</strong>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, styles);
<a id="L83" name="L83"></a>  83         listeningStyles = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>&gt;();
<a id="L84" name="L84"></a>  84         <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a> = <strong class="reserved">new</strong> <a href="../S/3328.html#L1397" title="Defined at 1397 in src/javax/swing/text/DefaultStyledDocument.java.">ElementBuffer</a>(<a href="../D/13778.html" title="Multiple defined in 3 places.">createDefaultRoot</a>());
<a id="L85" name="L85"></a>  85         <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> defaultStyle = styles.<a href="../D/22802.html" title="Multiple defined in 21 places.">getStyle</a>(<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>.DEFAULT_STYLE);
<a id="L86" name="L86"></a>  86         <a href="../D/33149.html" title="Multiple defined in 3 places.">setLogicalStyle</a>(0, defaultStyle);
<a id="L87" name="L87"></a>  87     <em class="brace">}</em>
<a id="L88" name="L88"></a>  88 
<div class="comment">
      Constructs a styled document with the default content
      storage implementation and a shared set of styles.
      @param styles the styles</div>
<a id="L95" name="L95"></a>  95     <strong class="reserved">public</strong> DefaultStyledDocument(<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles) <em class="brace">{</em>
<a id="L96" name="L96"></a>  96         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/3248.html#L61" title="Defined at 61 in src/javax/swing/text/GapContent.java.">GapContent</a>(BUFFER_SIZE_DEFAULT), styles);
<a id="L97" name="L97"></a>  97     <em class="brace">}</em>
<a id="L98" name="L98"></a>  98 
<div class="comment">
      Constructs a default styled document.  This buffers
      input content by a size of <em>BUFFER_SIZE_DEFAULT</em>
      and has a style context that is scoped by the lifetime
      of the document and is not shared with other documents.</div>
<a id="L105" name="L105"></a> 105     <strong class="reserved">public</strong> DefaultStyledDocument() <em class="brace">{</em>
<a id="L106" name="L106"></a> 106         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/3248.html#L61" title="Defined at 61 in src/javax/swing/text/GapContent.java.">GapContent</a>(BUFFER_SIZE_DEFAULT), <strong class="reserved">new</strong> <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>());
<a id="L107" name="L107"></a> 107     <em class="brace">}</em>
<a id="L108" name="L108"></a> 108 
<div class="comment">
      Gets the default root element.
      @return the root
      @see Document#getDefaultRootElement</div>
<a id="L115" name="L115"></a> 115     <strong class="reserved">public</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/16072.html" title="Multiple referred from 34 places.">getDefaultRootElement</a>() <em class="brace">{</em>
<a id="L116" name="L116"></a> 116         <strong class="reserved">return</strong> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../S/3328.html#L1416" title="Defined at 1416 in src/javax/swing/text/DefaultStyledDocument.java.">getRootElement</a>();
<a id="L117" name="L117"></a> 117     <em class="brace">}</em>
<a id="L118" name="L118"></a> 118 
<div class="comment">
      Initialize the document to reflect the given element
      structure (i.e. the structure reported by the
      <code>getDefaultRootElement</code> method.  If the
      document contained any data it will first be removed.</div>
<a id="L125" name="L125"></a> 125     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/12190.html" title="Multiple referred from 234 places.">create</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>) <em class="brace">{</em>
<a id="L126" name="L126"></a> 126         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L127" name="L127"></a> 127             <strong class="reserved">if</strong> (<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() != 0) <em class="brace">{</em>
<a id="L128" name="L128"></a> 128                 <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(0, <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>());
<a id="L129" name="L129"></a> 129             <em class="brace">}</em>
<a id="L130" name="L130"></a> 130             <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L131" name="L131"></a> 131 
<a id="L132" name="L132"></a> 132             <em class="comment">// install the content</em>
<a id="L133" name="L133"></a> 133             <a href="../S/3268.html#L1586" title="Defined at 1586 in src/javax/swing/text/AbstractDocument.java.">Content</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17951.html" title="Multiple defined in 22 places.">getContent</a>();
<a id="L134" name="L134"></a> 134             <strong class="reserved">int</strong> n = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L135" name="L135"></a> 135             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L136" name="L136"></a> 136             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L137" name="L137"></a> 137                 <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> es = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[i];
<a id="L138" name="L138"></a> 138                 <strong class="reserved">if</strong> (es.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() &gt; 0) <em class="brace">{</em>
<a id="L139" name="L139"></a> 139                     sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(es.<a href="../D/17028.html" title="Multiple defined in 16 places.">getArray</a>(), es.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(),  es.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>());
<a id="L140" name="L140"></a> 140                 <em class="brace">}</em>
<a id="L141" name="L141"></a> 141             <em class="brace">}</em>
<a id="L142" name="L142"></a> 142             <a href="../S/3139.html#L68" title="Defined at 68 in src/javax/swing/undo/UndoableEdit.java.">UndoableEdit</a> cEdit = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/24774.html" title="Multiple defined in 12 places.">insertString</a>(0, sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L143" name="L143"></a> 143 
<a id="L144" name="L144"></a> 144             <em class="comment">// build the event and element structure</em>
<a id="L145" name="L145"></a> 145             <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = sb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L146" name="L146"></a> 146             <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> evnt =
<a id="L147" name="L147"></a> 147                 <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(0, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.INSERT);
<a id="L148" name="L148"></a> 148             evnt.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(cEdit);
<a id="L149" name="L149"></a> 149             <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>(<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, evnt);
<a id="L150" name="L150"></a> 150 
<a id="L151" name="L151"></a> 151             <em class="comment">// update bidi (possibly)</em>
<a id="L152" name="L152"></a> 152             <strong class="reserved">super</strong>.<a href="../D/24781.html" title="Multiple defined in 28 places.">insertUpdate</a>(evnt, <strong class="reserved">null</strong>);
<a id="L153" name="L153"></a> 153 
<a id="L154" name="L154"></a> 154             <em class="comment">// notify the listeners</em>
<a id="L155" name="L155"></a> 155             evnt.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L156" name="L156"></a> 156             <a href="../S/3268.html#L189" title="Defined at 189 in src/javax/swing/text/AbstractDocument.java.">fireInsertUpdate</a>(evnt);
<a id="L157" name="L157"></a> 157             <a href="../D/16389.html" title="Multiple defined in 2 places.">fireUndoableEditUpdate</a>(<strong class="reserved">new</strong> <a href="../S/3423.html#L44" title="Defined at 44 in src/javax/swing/event/UndoableEditEvent.java.">UndoableEditEvent</a>(<strong class="reserved">this</strong>, evnt));
<a id="L158" name="L158"></a> 158         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>("problem initializing");
<a id="L160" name="L160"></a> 160         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L161" name="L161"></a> 161             <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L162" name="L162"></a> 162         <em class="brace">}</em>
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164     <em class="brace">}</em>
<a id="L165" name="L165"></a> 165 
<div class="comment">
      Inserts new elements in bulk.  This is useful to allow
      parsing with the document in an unlocked state and
      prepare an element structure modification.  This method
      takes an array of tokens that describe how to update an
      element structure so the time within a write lock can
      be greatly reduced in an asynchronous update situation.
      <p>
      This method is thread safe, although most Swing methods
      are not. Please see
      <a href="https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html">Concurrency
      in Swing</a> for more information.
      @param offset the starting offset &gt;= 0
      @param data the element data
      @exception BadLocationException for an invalid starting offset</p></div>
<a id="L183" name="L183"></a> 183     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20751.html" title="Multiple referred from 148 places.">insert</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L184" name="L184"></a> 184         <strong class="reserved">if</strong> (<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> == <strong class="reserved">null</strong> || <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) <em class="brace">{</em>
<a id="L185" name="L185"></a> 185             <strong class="reserved">return</strong>;
<a id="L186" name="L186"></a> 186         <em class="brace">}</em>
<a id="L187" name="L187"></a> 187 
<a id="L188" name="L188"></a> 188         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L189" name="L189"></a> 189             <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L190" name="L190"></a> 190 
<a id="L191" name="L191"></a> 191             <em class="comment">// install the content</em>
<a id="L192" name="L192"></a> 192             <a href="../S/3268.html#L1586" title="Defined at 1586 in src/javax/swing/text/AbstractDocument.java.">Content</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17951.html" title="Multiple defined in 22 places.">getContent</a>();
<a id="L193" name="L193"></a> 193             <strong class="reserved">int</strong> n = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L194" name="L194"></a> 194             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L195" name="L195"></a> 195             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L196" name="L196"></a> 196                 <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> es = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[i];
<a id="L197" name="L197"></a> 197                 <strong class="reserved">if</strong> (es.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() &gt; 0) <em class="brace">{</em>
<a id="L198" name="L198"></a> 198                     sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(es.<a href="../D/17028.html" title="Multiple defined in 16 places.">getArray</a>(), es.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(),  es.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>());
<a id="L199" name="L199"></a> 199                 <em class="brace">}</em>
<a id="L200" name="L200"></a> 200             <em class="brace">}</em>
<a id="L201" name="L201"></a> 201             <strong class="reserved">if</strong> (sb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L202" name="L202"></a> 202                 <em class="comment">// Nothing to insert, bail.</em>
<a id="L203" name="L203"></a> 203                 <strong class="reserved">return</strong>;
<a id="L204" name="L204"></a> 204             <em class="brace">}</em>
<a id="L205" name="L205"></a> 205             <a href="../S/3139.html#L68" title="Defined at 68 in src/javax/swing/undo/UndoableEdit.java.">UndoableEdit</a> cEdit = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/24774.html" title="Multiple defined in 12 places.">insertString</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L206" name="L206"></a> 206 
<a id="L207" name="L207"></a> 207             <em class="comment">// create event and build the element structure</em>
<a id="L208" name="L208"></a> 208             <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = sb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L209" name="L209"></a> 209             <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> evnt =
<a id="L210" name="L210"></a> 210                 <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.INSERT);
<a id="L211" name="L211"></a> 211             evnt.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(cEdit);
<a id="L212" name="L212"></a> 212             <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, evnt);
<a id="L213" name="L213"></a> 213 
<a id="L214" name="L214"></a> 214             <em class="comment">// update bidi (possibly)</em>
<a id="L215" name="L215"></a> 215             <strong class="reserved">super</strong>.<a href="../D/24781.html" title="Multiple defined in 28 places.">insertUpdate</a>(evnt, <strong class="reserved">null</strong>);
<a id="L216" name="L216"></a> 216 
<a id="L217" name="L217"></a> 217             <em class="comment">// notify the listeners</em>
<a id="L218" name="L218"></a> 218             evnt.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L219" name="L219"></a> 219             <a href="../S/3268.html#L189" title="Defined at 189 in src/javax/swing/text/AbstractDocument.java.">fireInsertUpdate</a>(evnt);
<a id="L220" name="L220"></a> 220             <a href="../D/16389.html" title="Multiple defined in 2 places.">fireUndoableEditUpdate</a>(<strong class="reserved">new</strong> <a href="../S/3423.html#L44" title="Defined at 44 in src/javax/swing/event/UndoableEditEvent.java.">UndoableEditEvent</a>(<strong class="reserved">this</strong>, evnt));
<a id="L221" name="L221"></a> 221         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L222" name="L222"></a> 222             <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L223" name="L223"></a> 223         <em class="brace">}</em>
<a id="L224" name="L224"></a> 224     <em class="brace">}</em>
<a id="L225" name="L225"></a> 225 
<div class="comment">
      Removes an element from this document.
      <p>The element is removed from its parent element, as well as
      the text in the range identified by the element.  If the
      element isn't associated with the document, {@code
      IllegalArgumentException} is thrown.</p>
      <p>As empty branch elements are not allowed in the document, if the
      element is the sole child, its parent element is removed as well,
      recursively.  This means that when replacing all the children of a
      particular element, new children should be added <em>before</em>
      removing old children.
      </p><p>Element removal results in two events being fired, the
      <code>DocumentEvent</code> for changes in element structure and {@code
      UndoableEditEvent} for changes in document content.</p>
      <p>If the element contains end-of-content mark (the last {@code
      "\n"} character in document), this character is not removed;
      instead, preceding leaf element is extended to cover the
      character.  If the last leaf already ends with <code>"\n",</code> it is
      included in content removal.</p>
      <p>If the element is <code>null,</code> <code>NullPointerException</code> is
      thrown.  If the element structure would become invalid after the removal,
      for example if the element is the document root element, {@code
      IllegalArgumentException} is thrown.  If the current element structure is
      invalid, <code>IllegalStateException</code> is thrown.</p>
      @param  elem                      the element to remove
      @throws NullPointerException      if the element is <code>null</code>
      @throws IllegalArgumentException  if the element could not be removed
      @throws IllegalStateException     if the element structure is invalid
      @since  1.7</div>
<a id="L263" name="L263"></a> 263     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25951.html" title="Multiple referred from 45 places.">removeElement</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L265" name="L265"></a> 265             <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L266" name="L266"></a> 266             <a href="../S/3328.html#L272" title="Defined at 272 in src/javax/swing/text/DefaultStyledDocument.java.">removeElementImpl</a>(elem);
<a id="L267" name="L267"></a> 267         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L268" name="L268"></a> 268             <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L269" name="L269"></a> 269         <em class="brace">}</em>
<a id="L270" name="L270"></a> 270     <em class="brace">}</em>
<a id="L271" name="L271"></a> 271 
<a id="L272" name="L272"></a> 272     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/3328.html#L266" title="Referred from 266 in src/javax/swing/text/DefaultStyledDocument.java.">removeElementImpl</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L273" name="L273"></a> 273         <strong class="reserved">if</strong> (elem.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>() != <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L274" name="L274"></a> 274             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("element doesn't belong to document");
<a id="L275" name="L275"></a> 275         <em class="brace">}</em>
<a id="L276" name="L276"></a> 276         <a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = (<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>) elem.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L277" name="L277"></a> 277         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L278" name="L278"></a> 278             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("can't remove the root element");
<a id="L279" name="L279"></a> 279         <em class="brace">}</em>
<a id="L280" name="L280"></a> 280 
<a id="L281" name="L281"></a> 281         <strong class="reserved">int</strong> startOffset = elem.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L282" name="L282"></a> 282         <strong class="reserved">int</strong> removeFrom = startOffset;
<a id="L283" name="L283"></a> 283         <strong class="reserved">int</strong> endOffset = elem.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L284" name="L284"></a> 284         <strong class="reserved">int</strong> removeTo = endOffset;
<a id="L285" name="L285"></a> 285         <strong class="reserved">int</strong> lastEndOffset = <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() + 1;
<a id="L286" name="L286"></a> 286         <a href="../S/3268.html#L1586" title="Defined at 1586 in src/javax/swing/text/AbstractDocument.java.">Content</a> <a href="../D/13364.html" title="Multiple defined in 2 places.">content</a> = <a href="../D/17951.html" title="Multiple defined in 22 places.">getContent</a>();
<a id="L287" name="L287"></a> 287         <strong class="reserved">boolean</strong> atEnd = <strong class="reserved">false</strong>;
<a id="L288" name="L288"></a> 288         <strong class="reserved">boolean</strong> isComposedText = <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/25345.html" title="Multiple defined in 2 places.">isComposedTextElement</a>(elem);
<a id="L289" name="L289"></a> 289 
<a id="L290" name="L290"></a> 290         <strong class="reserved">if</strong> (endOffset &gt;= lastEndOffset) <em class="brace">{</em>
<a id="L291" name="L291"></a> 291             <em class="comment">// element includes the last "\n" character, needs special handling</em>
<a id="L292" name="L292"></a> 292             <strong class="reserved">if</strong> (startOffset &lt;= 0) <em class="brace">{</em>
<a id="L293" name="L293"></a> 293                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("can't remove the whole content");
<a id="L294" name="L294"></a> 294             <em class="brace">}</em>
<a id="L295" name="L295"></a> 295             removeTo = lastEndOffset - 1; <em class="comment">// last "\n" must not be removed</em>
<a id="L296" name="L296"></a> 296             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L297" name="L297"></a> 297                 <strong class="reserved">if</strong> (<a href="../D/13364.html" title="Multiple defined in 2 places.">content</a>.<a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(startOffset - 1, 1).<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0) == '\n') <em class="brace">{</em>
<a id="L298" name="L298"></a> 298                     removeFrom--; <em class="comment">// preceding leaf ends with "\n", remove it</em>
<a id="L299" name="L299"></a> 299                 <em class="brace">}</em>
<a id="L300" name="L300"></a> 300             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em> <em class="comment">// can't happen</em>
<a id="L301" name="L301"></a> 301                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(ble);
<a id="L302" name="L302"></a> 302             <em class="brace">}</em>
<a id="L303" name="L303"></a> 303             atEnd = <strong class="reserved">true</strong>;
<a id="L304" name="L304"></a> 304         <em class="brace">}</em>
<a id="L305" name="L305"></a> 305         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = removeTo - removeFrom;
<a id="L306" name="L306"></a> 306 
<a id="L307" name="L307"></a> 307         <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> dde = <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(removeFrom,
<a id="L308" name="L308"></a> 308                 <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.REMOVE);
<a id="L309" name="L309"></a> 309         <a href="../S/3139.html#L68" title="Defined at 68 in src/javax/swing/undo/UndoableEdit.java.">UndoableEdit</a> ue = <strong class="reserved">null</strong>;
<a id="L310" name="L310"></a> 310         <em class="comment">// do not leave empty branch elements</em>
<a id="L311" name="L311"></a> 311         <strong class="reserved">while</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() == 1) <em class="brace">{</em>
<a id="L312" name="L312"></a> 312             elem = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L313" name="L313"></a> 313             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = (<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>) <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L314" name="L314"></a> 314             <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == <strong class="reserved">null</strong>) <em class="brace">{</em> <em class="comment">// shouldn't happen</em>
<a id="L315" name="L315"></a> 315                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("invalid element structure");
<a id="L316" name="L316"></a> 316             <em class="brace">}</em>
<a id="L317" name="L317"></a> 317         <em class="brace">}</em>
<a id="L318" name="L318"></a> 318         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] removed = <em class="brace">{</em> elem <em class="brace">}</em>;
<a id="L319" name="L319"></a> 319         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] added = <em class="brace">{</em><em class="brace">}</em>;
<a id="L320" name="L320"></a> 320         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(startOffset);
<a id="L321" name="L321"></a> 321         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, 1, added);
<a id="L322" name="L322"></a> 322         dde.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(<strong class="reserved">new</strong> <a href="../S/3268.html#L2998" title="Defined at 2998 in src/javax/swing/text/AbstractDocument.java.">ElementEdit</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, removed, added));
<a id="L323" name="L323"></a> 323         <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0) <em class="brace">{</em>
<a id="L324" name="L324"></a> 324             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L325" name="L325"></a> 325                 ue = <a href="../D/13364.html" title="Multiple defined in 2 places.">content</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(removeFrom, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L326" name="L326"></a> 326                 <strong class="reserved">if</strong> (ue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327                     dde.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(ue);
<a id="L328" name="L328"></a> 328                 <em class="brace">}</em>
<a id="L329" name="L329"></a> 329             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em>
<a id="L330" name="L330"></a> 330                 <em class="comment">// can only happen if the element structure is severely broken</em>
<a id="L331" name="L331"></a> 331                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(ble);
<a id="L332" name="L332"></a> 332             <em class="brace">}</em>
<a id="L333" name="L333"></a> 333             lastEndOffset -= <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L334" name="L334"></a> 334         <em class="brace">}</em>
<a id="L335" name="L335"></a> 335 
<a id="L336" name="L336"></a> 336         <strong class="reserved">if</strong> (atEnd) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337             <em class="comment">// preceding leaf element should be extended to cover orphaned "\n"</em>
<a id="L338" name="L338"></a> 338             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> prevLeaf = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() - 1);
<a id="L339" name="L339"></a> 339             <strong class="reserved">while</strong> ((prevLeaf != <strong class="reserved">null</strong>) &amp;&amp; !prevLeaf.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340                 prevLeaf = prevLeaf.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(prevLeaf.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() - 1);
<a id="L341" name="L341"></a> 341             <em class="brace">}</em>
<a id="L342" name="L342"></a> 342             <strong class="reserved">if</strong> (prevLeaf == <strong class="reserved">null</strong>) <em class="brace">{</em> <em class="comment">// shouldn't happen</em>
<a id="L343" name="L343"></a> 343                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("invalid element structure");
<a id="L344" name="L344"></a> 344             <em class="brace">}</em>
<a id="L345" name="L345"></a> 345             <strong class="reserved">int</strong> prevStartOffset = prevLeaf.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L346" name="L346"></a> 346             <a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a> prevParent = (<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>) prevLeaf.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L347" name="L347"></a> 347             <strong class="reserved">int</strong> <a href="../S/1738.html#L356" title="Defined at 356 in src/java/lang/ThreadLocal.java.">prevIndex</a> = prevParent.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(prevStartOffset);
<a id="L348" name="L348"></a> 348             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newElem;
<a id="L349" name="L349"></a> 349             newElem = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(prevParent, prevLeaf.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L350" name="L350"></a> 350                                             prevStartOffset, lastEndOffset);
<a id="L351" name="L351"></a> 351             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] prevRemoved = <em class="brace">{</em> prevLeaf <em class="brace">}</em>;
<a id="L352" name="L352"></a> 352             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] prevAdded = <em class="brace">{</em> newElem <em class="brace">}</em>;
<a id="L353" name="L353"></a> 353             prevParent.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(<a href="../S/1738.html#L356" title="Defined at 356 in src/java/lang/ThreadLocal.java.">prevIndex</a>, 1, prevAdded);
<a id="L354" name="L354"></a> 354             dde.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(<strong class="reserved">new</strong> <a href="../S/3268.html#L2998" title="Defined at 2998 in src/javax/swing/text/AbstractDocument.java.">ElementEdit</a>(prevParent, <a href="../S/1738.html#L356" title="Defined at 356 in src/java/lang/ThreadLocal.java.">prevIndex</a>,
<a id="L355" name="L355"></a> 355                                                     prevRemoved, prevAdded));
<a id="L356" name="L356"></a> 356         <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358         <a href="../S/3268.html#L1009" title="Defined at 1009 in src/javax/swing/text/AbstractDocument.java.">postRemoveUpdate</a>(dde);
<a id="L359" name="L359"></a> 359         dde.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L360" name="L360"></a> 360         <a href="../S/3268.html#L247" title="Defined at 247 in src/javax/swing/text/AbstractDocument.java.">fireRemoveUpdate</a>(dde);
<a id="L361" name="L361"></a> 361         <strong class="reserved">if</strong> (! (isComposedText &amp;&amp; (ue != <strong class="reserved">null</strong>))) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362             <em class="comment">// do not fire UndoabeEdit event for composed text edit (unsupported)</em>
<a id="L363" name="L363"></a> 363             <a href="../D/16389.html" title="Multiple defined in 2 places.">fireUndoableEditUpdate</a>(<strong class="reserved">new</strong> <a href="../S/3423.html#L44" title="Defined at 44 in src/javax/swing/event/UndoableEditEvent.java.">UndoableEditEvent</a>(<strong class="reserved">this</strong>, dde));
<a id="L364" name="L364"></a> 364         <em class="brace">}</em>
<a id="L365" name="L365"></a> 365     <em class="brace">}</em>
<a id="L366" name="L366"></a> 366 
<div class="comment">
      Adds a new style into the logical style hierarchy.  Style attributes
      resolve from bottom up so an attribute specified in a child
      will override an attribute specified in the parent.
      @param nm   the name of the style (must be unique within the
        collection of named styles).  The name may be null if the style
        is unnamed, but the caller is responsible
        for managing the reference returned as an unnamed style can't
        be fetched by name.  An unnamed style may be useful for things
        like character attribute overrides such as found in a style
        run.
      @param parent the parent style.  This may be null if unspecified
        attributes need not be resolved in some other style.
      @return the style</div>
<a id="L383" name="L383"></a> 383     <strong class="reserved">public</strong> <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> <a href="../R/9971.html" title="Multiple referred from 9 places.">addStyle</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nm, <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L384" name="L384"></a> 384         <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L385" name="L385"></a> 385         <strong class="reserved">return</strong> styles.<a href="../D/11088.html" title="Multiple defined in 5 places.">addStyle</a>(nm, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L386" name="L386"></a> 386     <em class="brace">}</em>
<a id="L387" name="L387"></a> 387 
<div class="comment">
      Removes a named style previously added to the document.
      @param nm  the name of the style to remove</div>
<a id="L393" name="L393"></a> 393     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26076.html" title="Multiple referred from 4 places.">removeStyle</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nm) <em class="brace">{</em>
<a id="L394" name="L394"></a> 394         <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L395" name="L395"></a> 395         styles.<a href="../D/30960.html" title="Multiple defined in 6 places.">removeStyle</a>(nm);
<a id="L396" name="L396"></a> 396     <em class="brace">}</em>
<a id="L397" name="L397"></a> 397 
<div class="comment">
      Fetches a named style previously added.
      @param nm  the name of the style
      @return the style</div>
<a id="L404" name="L404"></a> 404     <strong class="reserved">public</strong> <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> <a href="../R/19237.html" title="Multiple referred from 151 places.">getStyle</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nm) <em class="brace">{</em>
<a id="L405" name="L405"></a> 405         <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L406" name="L406"></a> 406         <strong class="reserved">return</strong> styles.<a href="../D/22802.html" title="Multiple defined in 21 places.">getStyle</a>(nm);
<a id="L407" name="L407"></a> 407     <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<a id="L409" name="L409"></a> 409 
<div class="comment">
      Fetches the list of of style names.
      @return all the style names</div>
<a id="L415" name="L415"></a> 415     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;?&gt; <a href="../R/19239.html" title="Multiple referred from 4 places.">getStyleNames</a>() <em class="brace">{</em>
<a id="L416" name="L416"></a> 416         <strong class="reserved">return</strong> ((<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>()).<a href="../D/22804.html" title="Multiple defined in 2 places.">getStyleNames</a>();
<a id="L417" name="L417"></a> 417     <em class="brace">}</em>
<a id="L418" name="L418"></a> 418 
<div class="comment">
      Sets the logical style to use for the paragraph at the
      given position.  If attributes aren't explicitly set
      for character and paragraph attributes they will resolve
      through the logical style assigned to the paragraph, which
      in turn may resolve through some hierarchy completely
      independent of the element hierarchy in the document.
      <p>
      This method is thread safe, although most Swing methods
      are not. Please see
      <a href="https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html">Concurrency
      in Swing</a> for more information.
      @param pos the offset from the start of the document &gt;= 0
      @param s  the logical style to assign to the paragraph, null if none</p></div>
<a id="L435" name="L435"></a> 435     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27699.html" title="Multiple referred from 2 places.">setLogicalStyle</a>(<strong class="reserved">int</strong> pos, <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> s) <em class="brace">{</em>
<a id="L436" name="L436"></a> 436         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> paragraph = <a href="../D/21359.html" title="Multiple defined in 7 places.">getParagraphElement</a>(pos);
<a id="L437" name="L437"></a> 437         <strong class="reserved">if</strong> ((paragraph != <strong class="reserved">null</strong>) &amp;&amp; (paragraph <strong class="reserved">instanceof</strong> <a href="../S/3268.html#L1764" title="Defined at 1764 in src/javax/swing/text/AbstractDocument.java.">AbstractElement</a>)) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L439" name="L439"></a> 439                 <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L440" name="L440"></a> 440                 <a href="../S/3328.html#L2571" title="Defined at 2571 in src/javax/swing/text/DefaultStyledDocument.java.">StyleChangeUndoableEdit</a> <a href="../D/15277.html" title="Multiple defined in 2 places.">edit</a> = <strong class="reserved">new</strong> <a href="../S/3328.html#L2571" title="Defined at 2571 in src/javax/swing/text/DefaultStyledDocument.java.">StyleChangeUndoableEdit</a>((<a href="../S/3268.html#L1764" title="Defined at 1764 in src/javax/swing/text/AbstractDocument.java.">AbstractElement</a>)paragraph, s);
<a id="L441" name="L441"></a> 441                 ((<a href="../S/3268.html#L1764" title="Defined at 1764 in src/javax/swing/text/AbstractDocument.java.">AbstractElement</a>)paragraph).<a href="../D/33718.html" title="Multiple defined in 8 places.">setResolveParent</a>(s);
<a id="L442" name="L442"></a> 442                 <strong class="reserved">int</strong> p0 = paragraph.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L443" name="L443"></a> 443                 <strong class="reserved">int</strong> p1 = paragraph.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L444" name="L444"></a> 444                 <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> e =
<a id="L445" name="L445"></a> 445                   <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(p0, p1 - p0, <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.CHANGE);
<a id="L446" name="L446"></a> 446                 e.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(<a href="../D/15277.html" title="Multiple defined in 2 places.">edit</a>);
<a id="L447" name="L447"></a> 447                 e.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L448" name="L448"></a> 448                 <a href="../D/16316.html" title="Multiple defined in 2 places.">fireChangedUpdate</a>(e);
<a id="L449" name="L449"></a> 449                 <a href="../D/16389.html" title="Multiple defined in 2 places.">fireUndoableEditUpdate</a>(<strong class="reserved">new</strong> <a href="../S/3423.html#L44" title="Defined at 44 in src/javax/swing/event/UndoableEditEvent.java.">UndoableEditEvent</a>(<strong class="reserved">this</strong>, e));
<a id="L450" name="L450"></a> 450             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L451" name="L451"></a> 451                 <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L452" name="L452"></a> 452             <em class="brace">}</em>
<a id="L453" name="L453"></a> 453         <em class="brace">}</em>
<a id="L454" name="L454"></a> 454     <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Fetches the logical style assigned to the paragraph
      represented by the given position.
      @param p the location to translate to a paragraph
       and determine the logical style assigned &gt;= 0.  This
       is an offset from the start of the document.
      @return the style, null if none</div>
<a id="L465" name="L465"></a> 465     <strong class="reserved">public</strong> <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> <a href="../S/3430.html#L330" title="Referred from 330 in src/javax/swing/JTextPane.java.">getLogicalStyle</a>(<strong class="reserved">int</strong> p) <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> s = <strong class="reserved">null</strong>;
<a id="L467" name="L467"></a> 467         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> paragraph = <a href="../D/21359.html" title="Multiple defined in 7 places.">getParagraphElement</a>(p);
<a id="L468" name="L468"></a> 468         <strong class="reserved">if</strong> (paragraph != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L469" name="L469"></a> 469             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = paragraph.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L470" name="L470"></a> 470             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/22034.html" title="Multiple defined in 13 places.">getResolveParent</a>();
<a id="L471" name="L471"></a> 471             <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> <strong class="reserved">instanceof</strong> <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>) <em class="brace">{</em>
<a id="L472" name="L472"></a> 472                 s = (<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>) <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L473" name="L473"></a> 473             <em class="brace">}</em>
<a id="L474" name="L474"></a> 474         <em class="brace">}</em>
<a id="L475" name="L475"></a> 475         <strong class="reserved">return</strong> s;
<a id="L476" name="L476"></a> 476     <em class="brace">}</em>
<a id="L477" name="L477"></a> 477 
<div class="comment">
      Sets attributes for some part of the document.
      A write lock is held by this operation while changes
      are being made, and a DocumentEvent is sent to the listeners
      after the change has been successfully completed.
      <p>
      This method is thread safe, although most Swing methods
      are not. Please see
      <a href="https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html">Concurrency
      in Swing</a> for more information.
      @param offset the offset in the document &gt;= 0
      @param length the length &gt;= 0
      @param s the attributes
      @param replace true if the previous attributes should be replaced
       before setting the new attributes</p></div>
<a id="L495" name="L495"></a> 495     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27025.html" title="Multiple referred from 11 places.">setCharacterAttributes</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> s, <strong class="reserved">boolean</strong> <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496         <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) <em class="brace">{</em>
<a id="L497" name="L497"></a> 497             <strong class="reserved">return</strong>;
<a id="L498" name="L498"></a> 498         <em class="brace">}</em>
<a id="L499" name="L499"></a> 499         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L500" name="L500"></a> 500             <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L501" name="L501"></a> 501             <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a> =
<a id="L502" name="L502"></a> 502                 <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.CHANGE);
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504             <em class="comment">// split elements that need it</em>
<a id="L505" name="L505"></a> 505             <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>);
<a id="L506" name="L506"></a> 506 
<a id="L507" name="L507"></a> 507             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> sCopy = s.<a href="../D/13483.html" title="Multiple defined in 9 places.">copyAttributes</a>();
<a id="L508" name="L508"></a> 508 
<a id="L509" name="L509"></a> 509             <em class="comment">// PENDING(prinz) - this isn't a very efficient way to iterate</em>
<a id="L510" name="L510"></a> 510             <strong class="reserved">int</strong> lastEnd;
<a id="L511" name="L511"></a> 511             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> pos = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>; pos &lt; (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>); pos = lastEnd) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a> = <a href="../D/17608.html" title="Multiple defined in 2 places.">getCharacterElement</a>(pos);
<a id="L513" name="L513"></a> 513                 lastEnd = <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L514" name="L514"></a> 514                 <strong class="reserved">if</strong> (pos == lastEnd) <em class="brace">{</em>
<a id="L515" name="L515"></a> 515                     <em class="comment">// offset + length beyond length of document, bail.</em>
<a id="L516" name="L516"></a> 516                     <strong class="reserved">break</strong>;
<a id="L517" name="L517"></a> 517                 <em class="brace">}</em>
<a id="L518" name="L518"></a> 518                 <a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a>) <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L519" name="L519"></a> 519                 <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(<strong class="reserved">new</strong> <a href="../S/3328.html#L2520" title="Defined at 2520 in src/javax/swing/text/DefaultStyledDocument.java.">AttributeUndoableEdit</a>(<a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>, sCopy, <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>));
<a id="L520" name="L520"></a> 520                 <strong class="reserved">if</strong> (<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>) <em class="brace">{</em>
<a id="L521" name="L521"></a> 521                     <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/30716.html" title="Multiple defined in 21 places.">removeAttributes</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L522" name="L522"></a> 522                 <em class="brace">}</em>
<a id="L523" name="L523"></a> 523                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/10670.html" title="Multiple defined in 16 places.">addAttributes</a>(s);
<a id="L524" name="L524"></a> 524             <em class="brace">}</em>
<a id="L525" name="L525"></a> 525             <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L526" name="L526"></a> 526             <a href="../D/16316.html" title="Multiple defined in 2 places.">fireChangedUpdate</a>(<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>);
<a id="L527" name="L527"></a> 527             <a href="../D/16389.html" title="Multiple defined in 2 places.">fireUndoableEditUpdate</a>(<strong class="reserved">new</strong> <a href="../S/3423.html#L44" title="Defined at 44 in src/javax/swing/event/UndoableEditEvent.java.">UndoableEditEvent</a>(<strong class="reserved">this</strong>, <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>));
<a id="L528" name="L528"></a> 528         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L529" name="L529"></a> 529             <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L530" name="L530"></a> 530         <em class="brace">}</em>
<a id="L531" name="L531"></a> 531 
<a id="L532" name="L532"></a> 532     <em class="brace">}</em>
<a id="L533" name="L533"></a> 533 
<div class="comment">
      Sets attributes for a paragraph.
      <p>
      This method is thread safe, although most Swing methods
      are not. Please see
      <a href="https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html">Concurrency
      in Swing</a> for more information.
      @param offset the offset into the paragraph &gt;= 0
      @param length the number of characters affected &gt;= 0
      @param s the attributes
      @param replace whether to replace existing attributes, or merge them</p></div>
<a id="L547" name="L547"></a> 547     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27905.html" title="Multiple referred from 4 places.">setParagraphAttributes</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> s,
<a id="L548" name="L548"></a> 548                                        <strong class="reserved">boolean</strong> <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L550" name="L550"></a> 550             <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L551" name="L551"></a> 551             <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a> =
<a id="L552" name="L552"></a> 552                 <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.CHANGE);
<a id="L553" name="L553"></a> 553 
<a id="L554" name="L554"></a> 554             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> sCopy = s.<a href="../D/13483.html" title="Multiple defined in 9 places.">copyAttributes</a>();
<a id="L555" name="L555"></a> 555 
<a id="L556" name="L556"></a> 556             <em class="comment">// PENDING(prinz) - this assumes a particular element structure</em>
<a id="L557" name="L557"></a> 557             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> section = <a href="../D/18357.html" title="Multiple defined in 4 places.">getDefaultRootElement</a>();
<a id="L558" name="L558"></a> 558             <strong class="reserved">int</strong> index0 = section.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L559" name="L559"></a> 559             <strong class="reserved">int</strong> index1 = section.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + ((<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0) ? <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1 : 0));
<a id="L560" name="L560"></a> 560             <strong class="reserved">boolean</strong> isI18N = <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(I18NProperty));
<a id="L561" name="L561"></a> 561             <strong class="reserved">boolean</strong> hasRuns = <strong class="reserved">false</strong>;
<a id="L562" name="L562"></a> 562             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = index0; i &lt;= index1; i++) <em class="brace">{</em>
<a id="L563" name="L563"></a> 563                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> paragraph = section.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i);
<a id="L564" name="L564"></a> 564                 <a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a>) paragraph.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L565" name="L565"></a> 565                 <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(<strong class="reserved">new</strong> <a href="../S/3328.html#L2520" title="Defined at 2520 in src/javax/swing/text/DefaultStyledDocument.java.">AttributeUndoableEdit</a>(paragraph, sCopy, <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>));
<a id="L566" name="L566"></a> 566                 <strong class="reserved">if</strong> (<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>) <em class="brace">{</em>
<a id="L567" name="L567"></a> 567                     <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/30716.html" title="Multiple defined in 21 places.">removeAttributes</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L568" name="L568"></a> 568                 <em class="brace">}</em>
<a id="L569" name="L569"></a> 569                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/10670.html" title="Multiple defined in 16 places.">addAttributes</a>(s);
<a id="L570" name="L570"></a> 570                 <strong class="reserved">if</strong> (isI18N &amp;&amp; !hasRuns) <em class="brace">{</em>
<a id="L571" name="L571"></a> 571                     hasRuns = (<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../S/2367.html#L255" title="Defined at 255 in src/java/awt/font/TextAttribute.java.">TextAttribute</a>.RUN_DIRECTION) != <strong class="reserved">null</strong>);
<a id="L572" name="L572"></a> 572                 <em class="brace">}</em>
<a id="L573" name="L573"></a> 573             <em class="brace">}</em>
<a id="L574" name="L574"></a> 574 
<a id="L575" name="L575"></a> 575             <strong class="reserved">if</strong> (hasRuns) <em class="brace">{</em>
<a id="L576" name="L576"></a> 576                 <a href="../S/3268.html#L1024" title="Defined at 1024 in src/javax/swing/text/AbstractDocument.java.">updateBidi</a>( <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a> );
<a id="L577" name="L577"></a> 577             <em class="brace">}</em>
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579             <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L580" name="L580"></a> 580             <a href="../D/16316.html" title="Multiple defined in 2 places.">fireChangedUpdate</a>(<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>);
<a id="L581" name="L581"></a> 581             <a href="../D/16389.html" title="Multiple defined in 2 places.">fireUndoableEditUpdate</a>(<strong class="reserved">new</strong> <a href="../S/3423.html#L44" title="Defined at 44 in src/javax/swing/event/UndoableEditEvent.java.">UndoableEditEvent</a>(<strong class="reserved">this</strong>, <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>));
<a id="L582" name="L582"></a> 582         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L583" name="L583"></a> 583             <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L584" name="L584"></a> 584         <em class="brace">}</em>
<a id="L585" name="L585"></a> 585     <em class="brace">}</em>
<a id="L586" name="L586"></a> 586 
<div class="comment">
      Gets the paragraph element at the offset <code>pos</code>.
      A paragraph consists of at least one child Element, which is usually
      a leaf.
      @param pos the starting offset &gt;= 0
      @return the element</div>
<a id="L595" name="L595"></a> 595     <strong class="reserved">public</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/18247.html" title="Multiple referred from 33 places.">getParagraphElement</a>(<strong class="reserved">int</strong> pos) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e;
<a id="L597" name="L597"></a> 597         <strong class="reserved">for</strong> (e = <a href="../D/18357.html" title="Multiple defined in 4 places.">getDefaultRootElement</a>(); ! e.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>(); ) <em class="brace">{</em>
<a id="L598" name="L598"></a> 598             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = e.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(pos);
<a id="L599" name="L599"></a> 599             e = e.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L600" name="L600"></a> 600         <em class="brace">}</em>
<a id="L601" name="L601"></a> 601         <strong class="reserved">if</strong>(e != <strong class="reserved">null</strong>)
<a id="L602" name="L602"></a> 602             <strong class="reserved">return</strong> e.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L603" name="L603"></a> 603         <strong class="reserved">return</strong> e;
<a id="L604" name="L604"></a> 604     <em class="brace">}</em>
<a id="L605" name="L605"></a> 605 
<div class="comment">
      Gets a character element based on a position.
      @param pos the position in the document &gt;= 0
      @return the element</div>
<a id="L612" name="L612"></a> 612     <strong class="reserved">public</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/15525.html" title="Multiple referred from 17 places.">getCharacterElement</a>(<strong class="reserved">int</strong> pos) <em class="brace">{</em>
<a id="L613" name="L613"></a> 613         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e;
<a id="L614" name="L614"></a> 614         <strong class="reserved">for</strong> (e = <a href="../D/18357.html" title="Multiple defined in 4 places.">getDefaultRootElement</a>(); ! e.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>(); ) <em class="brace">{</em>
<a id="L615" name="L615"></a> 615             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = e.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(pos);
<a id="L616" name="L616"></a> 616             e = e.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L617" name="L617"></a> 617         <em class="brace">}</em>
<a id="L618" name="L618"></a> 618         <strong class="reserved">return</strong> e;
<a id="L619" name="L619"></a> 619     <em class="brace">}</em>
<a id="L620" name="L620"></a> 620 
<a id="L621" name="L621"></a> 621     <em class="comment">// --- local methods -------------------------------------------------</em>
<a id="L622" name="L622"></a> 622 
<div class="comment">
      Updates document structure as a result of text insertion.  This
      will happen within a write lock.  This implementation simply
      parses the inserted content for line breaks and builds up a set
      of instructions for the element buffer.
      @param chng a description of the document change
      @param attr the attributes</div>
<a id="L632" name="L632"></a> 632     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20799.html" title="Multiple referred from 23 places.">insertUpdate</a>(<a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> chng, <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = chng.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L634" name="L634"></a> 634         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = chng.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L635" name="L635"></a> 635         <strong class="reserved">if</strong> (<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L636" name="L636"></a> 636             <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../S/3236.html#L51" title="Defined at 51 in src/javax/swing/text/SimpleAttributeSet.java.">SimpleAttributeSet</a>.EMPTY;
<a id="L637" name="L637"></a> 637         <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<a id="L639" name="L639"></a> 639         <em class="comment">// Paragraph attributes should come from point after insertion.</em>
<a id="L640" name="L640"></a> 640         <em class="comment">// You really only notice this when inserting at a paragraph</em>
<a id="L641" name="L641"></a> 641         <em class="comment">// boundary.</em>
<a id="L642" name="L642"></a> 642         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> paragraph = <a href="../D/21359.html" title="Multiple defined in 7 places.">getParagraphElement</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L643" name="L643"></a> 643         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> pattr = paragraph.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L644" name="L644"></a> 644         <em class="comment">// Character attributes should come from actual insertion point.</em>
<a id="L645" name="L645"></a> 645         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> pParagraph = <a href="../D/21359.html" title="Multiple defined in 7 places.">getParagraphElement</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L646" name="L646"></a> 646         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a> = pParagraph.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(pParagraph.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>
<a id="L647" name="L647"></a> 647                                             (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>));
<a id="L648" name="L648"></a> 648         <strong class="reserved">int</strong> endOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L649" name="L649"></a> 649         <strong class="reserved">boolean</strong> insertingAtBoundry = (<a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() == endOffset);
<a id="L650" name="L650"></a> 650         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> cattr = <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L651" name="L651"></a> 651 
<a id="L652" name="L652"></a> 652         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L653" name="L653"></a> 653             <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <strong class="reserved">new</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>();
<a id="L654" name="L654"></a> 654             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>&gt; parseBuffer = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>&gt;();
<a id="L655" name="L655"></a> 655             <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> lastStartSpec = <strong class="reserved">null</strong>;
<a id="L656" name="L656"></a> 656             <strong class="reserved">boolean</strong> insertingAfterNewline = <strong class="reserved">false</strong>;
<a id="L657" name="L657"></a> 657             <strong class="reserved">short</strong> lastStartDirection = <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.OriginateDirection;
<a id="L658" name="L658"></a> 658             <em class="comment">// Check if the previous character was a newline.</em>
<a id="L659" name="L659"></a> 659             <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt; 0) <em class="brace">{</em>
<a id="L660" name="L660"></a> 660                 <a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> - 1, 1, s);
<a id="L661" name="L661"></a> 661                 <strong class="reserved">if</strong> (s.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>] == '\n') <em class="brace">{</em>
<a id="L662" name="L662"></a> 662                     <em class="comment">// Inserting after a newline.</em>
<a id="L663" name="L663"></a> 663                     insertingAfterNewline = <strong class="reserved">true</strong>;
<a id="L664" name="L664"></a> 664                     lastStartDirection = <a href="../S/3328.html#L811" title="Defined at 811 in src/javax/swing/text/DefaultStyledDocument.java.">createSpecsForInsertAfterNewline</a>
<a id="L665" name="L665"></a> 665                                   (paragraph, pParagraph, pattr, parseBuffer,
<a id="L666" name="L666"></a> 666                                    <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, endOffset);
<a id="L667" name="L667"></a> 667                     <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = parseBuffer.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1; counter &gt;= 0;
<a id="L668" name="L668"></a> 668                         counter--) <em class="brace">{</em>
<a id="L669" name="L669"></a> 669                         <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> spec = parseBuffer.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(counter);
<a id="L670" name="L670"></a> 670                         <strong class="reserved">if</strong>(spec.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.StartTagType) <em class="brace">{</em>
<a id="L671" name="L671"></a> 671                             lastStartSpec = spec;
<a id="L672" name="L672"></a> 672                             <strong class="reserved">break</strong>;
<a id="L673" name="L673"></a> 673                         <em class="brace">}</em>
<a id="L674" name="L674"></a> 674                     <em class="brace">}</em>
<a id="L675" name="L675"></a> 675                 <em class="brace">}</em>
<a id="L676" name="L676"></a> 676             <em class="brace">}</em>
<a id="L677" name="L677"></a> 677             <em class="comment">// If not inserting after a new line, pull the attributes for</em>
<a id="L678" name="L678"></a> 678             <em class="comment">// new paragraphs from the paragraph under the insertion point.</em>
<a id="L679" name="L679"></a> 679             <strong class="reserved">if</strong>(!insertingAfterNewline)
<a id="L680" name="L680"></a> 680                 pattr = pParagraph.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L681" name="L681"></a> 681 
<a id="L682" name="L682"></a> 682             <a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, s);
<a id="L683" name="L683"></a> 683             <strong class="reserved">char</strong>[] txt = s.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L684" name="L684"></a> 684             <strong class="reserved">int</strong> n = s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + s.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L685" name="L685"></a> 685             <strong class="reserved">int</strong> lastOffset = s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L686" name="L686"></a> 686 
<a id="L687" name="L687"></a> 687             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>; i &lt; n; i++) <em class="brace">{</em>
<a id="L688" name="L688"></a> 688                 <strong class="reserved">if</strong> (txt[i] == '\n') <em class="brace">{</em>
<a id="L689" name="L689"></a> 689                     <strong class="reserved">int</strong> breakOffset = i + 1;
<a id="L690" name="L690"></a> 690                     parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(
<a id="L691" name="L691"></a> 691                         <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType,
<a id="L692" name="L692"></a> 692                                                breakOffset - lastOffset));
<a id="L693" name="L693"></a> 693                     parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(
<a id="L694" name="L694"></a> 694                         <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(<strong class="reserved">null</strong>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.EndTagType));
<a id="L695" name="L695"></a> 695                     lastStartSpec = <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(pattr, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.
<a id="L696" name="L696"></a> 696                                                    StartTagType);
<a id="L697" name="L697"></a> 697                     parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(lastStartSpec);
<a id="L698" name="L698"></a> 698                     lastOffset = breakOffset;
<a id="L699" name="L699"></a> 699                 <em class="brace">}</em>
<a id="L700" name="L700"></a> 700             <em class="brace">}</em>
<a id="L701" name="L701"></a> 701             <strong class="reserved">if</strong> (lastOffset &lt; n) <em class="brace">{</em>
<a id="L702" name="L702"></a> 702                 parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(
<a id="L703" name="L703"></a> 703                     <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType,
<a id="L704" name="L704"></a> 704                                            n - lastOffset));
<a id="L705" name="L705"></a> 705             <em class="brace">}</em>
<a id="L706" name="L706"></a> 706 
<a id="L707" name="L707"></a> 707             <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = parseBuffer.<a href="../D/16403.html" title="Multiple defined in 2 places.">firstElement</a>();
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709             <strong class="reserved">int</strong> docLength = <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L710" name="L710"></a> 710 
<a id="L711" name="L711"></a> 711             <em class="comment">// Check for join previous of first content.</em>
<a id="L712" name="L712"></a> 712             <strong class="reserved">if</strong>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType &amp;&amp;
<a id="L713" name="L713"></a> 713                cattr.<a href="../D/25513.html" title="Multiple defined in 25 places.">isEqual</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>)) <em class="brace">{</em>
<a id="L714" name="L714"></a> 714                 <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinPreviousDirection);
<a id="L715" name="L715"></a> 715             <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<a id="L717" name="L717"></a> 717             <em class="comment">// Do a join fracture/next for last start spec if necessary.</em>
<a id="L718" name="L718"></a> 718             <strong class="reserved">if</strong>(lastStartSpec != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L719" name="L719"></a> 719                 <strong class="reserved">if</strong>(insertingAfterNewline) <em class="brace">{</em>
<a id="L720" name="L720"></a> 720                     lastStartSpec.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(lastStartDirection);
<a id="L721" name="L721"></a> 721                 <em class="brace">}</em>
<a id="L722" name="L722"></a> 722                 <em class="comment">// Join to the fracture if NOT inserting at the end</em>
<a id="L723" name="L723"></a> 723                 <em class="comment">// (fracture only happens when not inserting at end of</em>
<a id="L724" name="L724"></a> 724                 <em class="comment">// paragraph).</em>
<a id="L725" name="L725"></a> 725                 <strong class="reserved">else</strong> <strong class="reserved">if</strong>(pParagraph.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() != endOffset) <em class="brace">{</em>
<a id="L726" name="L726"></a> 726                     lastStartSpec.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.
<a id="L727" name="L727"></a> 727                                                JoinFractureDirection);
<a id="L728" name="L728"></a> 728                 <em class="brace">}</em>
<a id="L729" name="L729"></a> 729                 <em class="comment">// Join to next if parent of pParagraph has another</em>
<a id="L730" name="L730"></a> 730                 <em class="comment">// element after pParagraph, and it isn't a leaf.</em>
<a id="L731" name="L731"></a> 731                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L732" name="L732"></a> 732                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = pParagraph.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L733" name="L733"></a> 733                     <strong class="reserved">int</strong> pParagraphIndex = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L734" name="L734"></a> 734                     <strong class="reserved">if</strong>((pParagraphIndex + 1) &lt; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() &amp;&amp;
<a id="L735" name="L735"></a> 735                        !<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(pParagraphIndex + 1).<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L736" name="L736"></a> 736                         lastStartSpec.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.
<a id="L737" name="L737"></a> 737                                                    JoinNextDirection);
<a id="L738" name="L738"></a> 738                     <em class="brace">}</em>
<a id="L739" name="L739"></a> 739                 <em class="brace">}</em>
<a id="L740" name="L740"></a> 740             <em class="brace">}</em>
<a id="L741" name="L741"></a> 741 
<a id="L742" name="L742"></a> 742             <em class="comment">// Do a JoinNext for last spec if it is content, it doesn't</em>
<a id="L743" name="L743"></a> 743             <em class="comment">// already have a direction set, no new paragraphs have been</em>
<a id="L744" name="L744"></a> 744             <em class="comment">// inserted or a new paragraph has been inserted and its join</em>
<a id="L745" name="L745"></a> 745             <em class="comment">// direction isn't originate, and the element at endOffset</em>
<a id="L746" name="L746"></a> 746             <em class="comment">// is a leaf.</em>
<a id="L747" name="L747"></a> 747             <strong class="reserved">if</strong>(insertingAtBoundry &amp;&amp; endOffset &lt; docLength) <em class="brace">{</em>
<a id="L748" name="L748"></a> 748                 <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a> = parseBuffer.<a href="../D/26745.html" title="Multiple defined in 2 places.">lastElement</a>();
<a id="L749" name="L749"></a> 749                 <strong class="reserved">if</strong>(<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType &amp;&amp;
<a id="L750" name="L750"></a> 750                    <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>() != <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinPreviousDirection &amp;&amp;
<a id="L751" name="L751"></a> 751                    ((lastStartSpec == <strong class="reserved">null</strong> &amp;&amp; (paragraph == pParagraph ||
<a id="L752" name="L752"></a> 752                                                insertingAfterNewline)) ||
<a id="L753" name="L753"></a> 753                     (lastStartSpec != <strong class="reserved">null</strong> &amp;&amp; lastStartSpec.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>() !=
<a id="L754" name="L754"></a> 754                      <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.OriginateDirection))) <em class="brace">{</em>
<a id="L755" name="L755"></a> 755                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> nextRun = paragraph.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(paragraph.
<a id="L756" name="L756"></a> 756                                            <a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(endOffset));
<a id="L757" name="L757"></a> 757                     <em class="comment">// Don't try joining to a branch!</em>
<a id="L758" name="L758"></a> 758                     <strong class="reserved">if</strong>(nextRun.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>() &amp;&amp;
<a id="L759" name="L759"></a> 759                        <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/25513.html" title="Multiple defined in 25 places.">isEqual</a>(nextRun.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>())) <em class="brace">{</em>
<a id="L760" name="L760"></a> 760                         <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection);
<a id="L761" name="L761"></a> 761                     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762                 <em class="brace">}</em>
<a id="L763" name="L763"></a> 763             <em class="brace">}</em>
<a id="L764" name="L764"></a> 764             <em class="comment">// If not inserting at boundary and there is going to be a</em>
<a id="L765" name="L765"></a> 765             <em class="comment">// fracture, then can join next on last content if cattr</em>
<a id="L766" name="L766"></a> 766             <em class="comment">// matches the new attributes.</em>
<a id="L767" name="L767"></a> 767             <strong class="reserved">else</strong> <strong class="reserved">if</strong>(!insertingAtBoundry &amp;&amp; lastStartSpec != <strong class="reserved">null</strong> &amp;&amp;
<a id="L768" name="L768"></a> 768                     lastStartSpec.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>() ==
<a id="L769" name="L769"></a> 769                     <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinFractureDirection) <em class="brace">{</em>
<a id="L770" name="L770"></a> 770                 <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a> = parseBuffer.<a href="../D/26745.html" title="Multiple defined in 2 places.">lastElement</a>();
<a id="L771" name="L771"></a> 771                 <strong class="reserved">if</strong>(<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType &amp;&amp;
<a id="L772" name="L772"></a> 772                    <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>() != <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinPreviousDirection &amp;&amp;
<a id="L773" name="L773"></a> 773                    <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/25513.html" title="Multiple defined in 25 places.">isEqual</a>(cattr)) <em class="brace">{</em>
<a id="L774" name="L774"></a> 774                     <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection);
<a id="L775" name="L775"></a> 775                 <em class="brace">}</em>
<a id="L776" name="L776"></a> 776             <em class="brace">}</em>
<a id="L777" name="L777"></a> 777 
<a id="L778" name="L778"></a> 778             <em class="comment">// Check for the composed text element. If it is, merge the character attributes</em>
<a id="L779" name="L779"></a> 779             <em class="comment">// into this element as well.</em>
<a id="L780" name="L780"></a> 780             <strong class="reserved">if</strong> (<a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../S/3270.html#L874" title="Defined at 874 in src/javax/swing/text/Utilities.java.">isComposedTextAttributeDefined</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>)) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781                 <a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a> mattr = (<a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a>) <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>;
<a id="L782" name="L782"></a> 782                 mattr.<a href="../D/10670.html" title="Multiple defined in 16 places.">addAttributes</a>(cattr);
<a id="L783" name="L783"></a> 783                 mattr.<a href="../D/10660.html" title="Multiple defined in 56 places.">addAttribute</a>(<a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.ElementNameAttribute,
<a id="L784" name="L784"></a> 784                         <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.ContentElementName);
<a id="L785" name="L785"></a> 785 
<a id="L786" name="L786"></a> 786                 <em class="comment">// Assure that the composed text element is named properly</em>
<a id="L787" name="L787"></a> 787                 <em class="comment">// and doesn't have the CR attribute defined.</em>
<a id="L788" name="L788"></a> 788                 mattr.<a href="../D/10660.html" title="Multiple defined in 56 places.">addAttribute</a>(<a href="../S/3337.html#L49" title="Defined at 49 in src/javax/swing/text/StyleConstants.java.">StyleConstants</a>.NameAttribute,
<a id="L789" name="L789"></a> 789                         <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.ContentElementName);
<a id="L790" name="L790"></a> 790                 <strong class="reserved">if</strong> (mattr.<a href="../D/25416.html" title="Multiple defined in 13 places.">isDefined</a>(IMPLIED_CR)) <em class="brace">{</em>
<a id="L791" name="L791"></a> 791                     mattr.<a href="../D/30709.html" title="Multiple defined in 30 places.">removeAttribute</a>(IMPLIED_CR);
<a id="L792" name="L792"></a> 792                 <em class="brace">}</em>
<a id="L793" name="L793"></a> 793             <em class="brace">}</em>
<a id="L794" name="L794"></a> 794 
<a id="L795" name="L795"></a> 795             <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] spec = <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[parseBuffer.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L796" name="L796"></a> 796             parseBuffer.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(spec);
<a id="L797" name="L797"></a> 797             <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, spec, chng);
<a id="L798" name="L798"></a> 798         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L799" name="L799"></a> 799         <em class="brace">}</em>
<a id="L800" name="L800"></a> 800 
<a id="L801" name="L801"></a> 801         <strong class="reserved">super</strong>.<a href="../D/24781.html" title="Multiple defined in 28 places.">insertUpdate</a>( chng, <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> );
<a id="L802" name="L802"></a> 802     <em class="brace">}</em>
<a id="L803" name="L803"></a> 803 
<div class="comment">
      This is called by insertUpdate when inserting after a new line.
      It generates, in <code>parseBuffer</code>, ElementSpecs that will
      position the stack in <code>paragraph</code>.<p>
      It returns the direction the last StartSpec should have (this don't
      necessarily create the last start spec).</p></div>
<a id="L811" name="L811"></a> 811     <strong class="reserved">short</strong> <a href="../S/3328.html#L664" title="Referred from 664 in src/javax/swing/text/DefaultStyledDocument.java.">createSpecsForInsertAfterNewline</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> paragraph,
<a id="L812" name="L812"></a> 812             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> pParagraph, <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> pattr, <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>&gt; parseBuffer,
<a id="L813" name="L813"></a> 813                                                  <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> endOffset) <em class="brace">{</em>
<a id="L814" name="L814"></a> 814         <em class="comment">// Need to find the common parent of pParagraph and paragraph.</em>
<a id="L815" name="L815"></a> 815         <strong class="reserved">if</strong>(paragraph.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>() == pParagraph.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>()) <em class="brace">{</em>
<a id="L816" name="L816"></a> 816             <em class="comment">// The simple (and common) case that pParagraph and</em>
<a id="L817" name="L817"></a> 817             <em class="comment">// paragraph have the same parent.</em>
<a id="L818" name="L818"></a> 818             <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> spec = <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(pattr, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.EndTagType);
<a id="L819" name="L819"></a> 819             parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(spec);
<a id="L820" name="L820"></a> 820             spec = <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(pattr, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.StartTagType);
<a id="L821" name="L821"></a> 821             parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(spec);
<a id="L822" name="L822"></a> 822             <strong class="reserved">if</strong>(pParagraph.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() != endOffset)
<a id="L823" name="L823"></a> 823                 <strong class="reserved">return</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinFractureDirection;
<a id="L824" name="L824"></a> 824 
<a id="L825" name="L825"></a> 825             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = pParagraph.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L826" name="L826"></a> 826             <strong class="reserved">if</strong>((<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) + 1) &lt; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>())
<a id="L827" name="L827"></a> 827                 <strong class="reserved">return</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection;
<a id="L828" name="L828"></a> 828         <em class="brace">}</em>
<a id="L829" name="L829"></a> 829         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L830" name="L830"></a> 830             <em class="comment">// Will only happen for text with more than 2 levels.</em>
<a id="L831" name="L831"></a> 831             <em class="comment">// Find the common parent of a paragraph and pParagraph</em>
<a id="L832" name="L832"></a> 832             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; leftParents = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;();
<a id="L833" name="L833"></a> 833             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; rightParents = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;();
<a id="L834" name="L834"></a> 834             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = pParagraph;
<a id="L835" name="L835"></a> 835             <strong class="reserved">while</strong>(e != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L836" name="L836"></a> 836                 leftParents.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L837" name="L837"></a> 837                 e = e.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L838" name="L838"></a> 838             <em class="brace">}</em>
<a id="L839" name="L839"></a> 839             e = paragraph;
<a id="L840" name="L840"></a> 840             <strong class="reserved">int</strong> leftIndex = -1;
<a id="L841" name="L841"></a> 841             <strong class="reserved">while</strong>(e != <strong class="reserved">null</strong> &amp;&amp; (leftIndex = leftParents.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(e)) == -1) <em class="brace">{</em>
<a id="L842" name="L842"></a> 842                 rightParents.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L843" name="L843"></a> 843                 e = e.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L844" name="L844"></a> 844             <em class="brace">}</em>
<a id="L845" name="L845"></a> 845             <strong class="reserved">if</strong>(e != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L846" name="L846"></a> 846                 <em class="comment">// e identifies the common parent.</em>
<a id="L847" name="L847"></a> 847                 <em class="comment">// Build the ends.</em>
<a id="L848" name="L848"></a> 848                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = 0; counter &lt; leftIndex;
<a id="L849" name="L849"></a> 849                     counter++) <em class="brace">{</em>
<a id="L850" name="L850"></a> 850                     parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>
<a id="L851" name="L851"></a> 851                                               (<strong class="reserved">null</strong>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.EndTagType));
<a id="L852" name="L852"></a> 852                 <em class="brace">}</em>
<a id="L853" name="L853"></a> 853                 <em class="comment">// And the starts.</em>
<a id="L854" name="L854"></a> 854                 <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> spec;
<a id="L855" name="L855"></a> 855                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = rightParents.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1;
<a id="L856" name="L856"></a> 856                     counter &gt;= 0; counter--) <em class="brace">{</em>
<a id="L857" name="L857"></a> 857                     spec = <strong class="reserved">new</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>(rightParents.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(counter).<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L858" name="L858"></a> 858                                    <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.StartTagType);
<a id="L859" name="L859"></a> 859                     <strong class="reserved">if</strong>(counter &gt; 0)
<a id="L860" name="L860"></a> 860                         spec.<a href="../D/32461.html" title="Multiple defined in 6 places.">setDirection</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection);
<a id="L861" name="L861"></a> 861                     parseBuffer.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(spec);
<a id="L862" name="L862"></a> 862                 <em class="brace">}</em>
<a id="L863" name="L863"></a> 863                 <em class="comment">// If there are right parents, then we generated starts</em>
<a id="L864" name="L864"></a> 864                 <em class="comment">// down the right subtree and there will be an element to</em>
<a id="L865" name="L865"></a> 865                 <em class="comment">// join to.</em>
<a id="L866" name="L866"></a> 866                 <strong class="reserved">if</strong>(rightParents.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0)
<a id="L867" name="L867"></a> 867                     <strong class="reserved">return</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection;
<a id="L868" name="L868"></a> 868                 <em class="comment">// No right subtree, e.getElement(endOffset) is a</em>
<a id="L869" name="L869"></a> 869                 <em class="comment">// leaf. There will be a facture.</em>
<a id="L870" name="L870"></a> 870                 <strong class="reserved">return</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinFractureDirection;
<a id="L871" name="L871"></a> 871             <em class="brace">}</em>
<a id="L872" name="L872"></a> 872             <em class="comment">// else: Could throw an exception here, but should never get here!</em>
<a id="L873" name="L873"></a> 873         <em class="brace">}</em>
<a id="L874" name="L874"></a> 874         <strong class="reserved">return</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.OriginateDirection;
<a id="L875" name="L875"></a> 875     <em class="brace">}</em>
<a id="L876" name="L876"></a> 876 
<div class="comment">
      Updates document structure as a result of text removal.
      @param chng a description of the document change</div>
<a id="L882" name="L882"></a> 882     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/26095.html" title="Multiple referred from 20 places.">removeUpdate</a>(<a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> chng) <em class="brace">{</em>
<a id="L883" name="L883"></a> 883         <strong class="reserved">super</strong>.<a href="../D/30986.html" title="Multiple defined in 27 places.">removeUpdate</a>(chng);
<a id="L884" name="L884"></a> 884         <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(chng.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(), chng.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(), chng);
<a id="L885" name="L885"></a> 885     <em class="brace">}</em>
<a id="L886" name="L886"></a> 886 
<div class="comment">
      Creates the root element to be used to represent the
      default document structure.
      @return the element base</div>
<a id="L893" name="L893"></a> 893     <strong class="reserved">protected</strong> <a href="../S/3268.html#L1764" title="Defined at 1764 in src/javax/swing/text/AbstractDocument.java.">AbstractElement</a> <a href="../R/12348.html" title="Multiple referred from 2 places.">createDefaultRoot</a>() <em class="brace">{</em>
<a id="L894" name="L894"></a> 894         <em class="comment">// grabs a write-lock for this initialization and</em>
<a id="L895" name="L895"></a> 895         <em class="comment">// abandon it during initialization so in normal</em>
<a id="L896" name="L896"></a> 896         <em class="comment">// operation we can detect an illegitimate attempt</em>
<a id="L897" name="L897"></a> 897         <em class="comment">// to mutate attributes.</em>
<a id="L898" name="L898"></a> 898         <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L899" name="L899"></a> 899         <a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a> section = <strong class="reserved">new</strong> <a href="../S/3328.html#L1131" title="Defined at 1131 in src/javax/swing/text/DefaultStyledDocument.java.">SectionElement</a>();
<a id="L900" name="L900"></a> 900         <a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a> paragraph = <strong class="reserved">new</strong> <a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>(section, <strong class="reserved">null</strong>);
<a id="L901" name="L901"></a> 901 
<a id="L902" name="L902"></a> 902         <a href="../S/3268.html#L2489" title="Defined at 2489 in src/javax/swing/text/AbstractDocument.java.">LeafElement</a> brk = <strong class="reserved">new</strong> <a href="../S/3268.html#L2489" title="Defined at 2489 in src/javax/swing/text/AbstractDocument.java.">LeafElement</a>(paragraph, <strong class="reserved">null</strong>, 0, 1);
<a id="L903" name="L903"></a> 903         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] buff = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[1];
<a id="L904" name="L904"></a> 904         buff[0] = brk;
<a id="L905" name="L905"></a> 905         paragraph.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, buff);
<a id="L906" name="L906"></a> 906 
<a id="L907" name="L907"></a> 907         buff[0] = paragraph;
<a id="L908" name="L908"></a> 908         section.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, buff);
<a id="L909" name="L909"></a> 909         <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L910" name="L910"></a> 910         <strong class="reserved">return</strong> section;
<a id="L911" name="L911"></a> 911     <em class="brace">}</em>
<a id="L912" name="L912"></a> 912 
<div class="comment">
      Gets the foreground color from an attribute set.
      @param attr the attribute set
      @return the color</div>
<a id="L919" name="L919"></a> 919     <strong class="reserved">public</strong> <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> <a href="../R/16690.html" title="Multiple referred from 127 places.">getForeground</a>(<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>) <em class="brace">{</em>
<a id="L920" name="L920"></a> 920         <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L921" name="L921"></a> 921         <strong class="reserved">return</strong> styles.<a href="../D/19200.html" title="Multiple defined in 21 places.">getForeground</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L922" name="L922"></a> 922     <em class="brace">}</em>
<a id="L923" name="L923"></a> 923 
<div class="comment">
      Gets the background color from an attribute set.
      @param attr the attribute set
      @return the color</div>
<a id="L930" name="L930"></a> 930     <strong class="reserved">public</strong> <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> <a href="../R/15211.html" title="Multiple referred from 180 places.">getBackground</a>(<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>) <em class="brace">{</em>
<a id="L931" name="L931"></a> 931         <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L932" name="L932"></a> 932         <strong class="reserved">return</strong> styles.<a href="../D/17172.html" title="Multiple defined in 24 places.">getBackground</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L933" name="L933"></a> 933     <em class="brace">}</em>
<a id="L934" name="L934"></a> 934 
<div class="comment">
      Gets the font from an attribute set.
      @param attr the attribute set
      @return the font</div>
<a id="L941" name="L941"></a> 941     <strong class="reserved">public</strong> <a href="../S/2176.html#L224" title="Defined at 224 in src/java/awt/Font.java.">Font</a> <a href="../R/16676.html" title="Multiple referred from 256 places.">getFont</a>(<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>) <em class="brace">{</em>
<a id="L942" name="L942"></a> 942         <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>) <a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L943" name="L943"></a> 943         <strong class="reserved">return</strong> styles.<a href="../D/19178.html" title="Multiple defined in 44 places.">getFont</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L944" name="L944"></a> 944     <em class="brace">}</em>
<a id="L945" name="L945"></a> 945 
<div class="comment">
      Called when any of this document's styles have changed.
      Subclasses may wish to be intelligent about what gets damaged.
      @param style The Style that has changed.</div>
<a id="L952" name="L952"></a> 952     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/28983.html" title="Multiple referred from 2 places.">styleChanged</a>(<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> style) <em class="brace">{</em>
<a id="L953" name="L953"></a> 953         <em class="comment">// Only propagate change updated if have content</em>
<a id="L954" name="L954"></a> 954         <strong class="reserved">if</strong> (<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() != 0) <em class="brace">{</em>
<a id="L955" name="L955"></a> 955             <em class="comment">// lazily create a ChangeUpdateRunnable</em>
<a id="L956" name="L956"></a> 956             <strong class="reserved">if</strong> (updateRunnable == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L957" name="L957"></a> 957                 updateRunnable = <strong class="reserved">new</strong> <a href="../S/3328.html#L2724" title="Defined at 2724 in src/javax/swing/text/DefaultStyledDocument.java.">ChangeUpdateRunnable</a>();
<a id="L958" name="L958"></a> 958             <em class="brace">}</em>
<a id="L959" name="L959"></a> 959 
<a id="L960" name="L960"></a> 960             <em class="comment">// We may get a whole batch of these at once, so only</em>
<a id="L961" name="L961"></a> 961             <em class="comment">// queue the runnable if it is not already pending</em>
<a id="L962" name="L962"></a> 962             <strong class="reserved">synchronized</strong>(updateRunnable) <em class="brace">{</em>
<a id="L963" name="L963"></a> 963                 <strong class="reserved">if</strong> (!updateRunnable.isPending) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964                     <a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../D/25068.html" title="Multiple defined in 2 places.">invokeLater</a>(updateRunnable);
<a id="L965" name="L965"></a> 965                     updateRunnable.isPending = <strong class="reserved">true</strong>;
<a id="L966" name="L966"></a> 966                 <em class="brace">}</em>
<a id="L967" name="L967"></a> 967             <em class="brace">}</em>
<a id="L968" name="L968"></a> 968         <em class="brace">}</em>
<a id="L969" name="L969"></a> 969     <em class="brace">}</em>
<a id="L970" name="L970"></a> 970 
<div class="comment">
      Adds a document listener for notification of any changes.
      @param listener the listener
      @see Document#addDocumentListener</div>
<a id="L977" name="L977"></a> 977     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9695.html" title="Multiple referred from 14 places.">addDocumentListener</a>(<a href="../S/3408.html#L53" title="Defined at 53 in src/javax/swing/event/DocumentListener.java.">DocumentListener</a> listener) <em class="brace">{</em>
<a id="L978" name="L978"></a> 978         <strong class="reserved">synchronized</strong>(listeningStyles) <em class="brace">{</em>
<a id="L979" name="L979"></a> 979             <strong class="reserved">int</strong> oldDLCount = listenerList.<a href="../D/20164.html" title="Multiple defined in 4 places.">getListenerCount</a>
<a id="L980" name="L980"></a> 980                                           (<a href="../S/3408.html#L53" title="Defined at 53 in src/javax/swing/event/DocumentListener.java.">DocumentListener</a>.<strong class="reserved">class</strong>);
<a id="L981" name="L981"></a> 981             <strong class="reserved">super</strong>.<a href="../D/10761.html" title="Multiple defined in 3 places.">addDocumentListener</a>(listener);
<a id="L982" name="L982"></a> 982             <strong class="reserved">if</strong> (oldDLCount == 0) <em class="brace">{</em>
<a id="L983" name="L983"></a> 983                 <strong class="reserved">if</strong> (styleContextChangeListener == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L984" name="L984"></a> 984                     styleContextChangeListener =
<a id="L985" name="L985"></a> 985                                       <a href="../S/3328.html#L1035" title="Defined at 1035 in src/javax/swing/text/DefaultStyledDocument.java.">createStyleContextChangeListener</a>();
<a id="L986" name="L986"></a> 986                 <em class="brace">}</em>
<a id="L987" name="L987"></a> 987                 <strong class="reserved">if</strong> (styleContextChangeListener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L988" name="L988"></a> 988                     <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>)<a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L989" name="L989"></a> 989                     <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>&gt; staleListeners =
<a id="L990" name="L990"></a> 990                         <a href="../S/3328.html#L2611" title="Defined at 2611 in src/javax/swing/text/DefaultStyledDocument.java.">AbstractChangeHandler</a>.<a href="../S/3328.html#L2653" title="Defined at 2653 in src/javax/swing/text/DefaultStyledDocument.java.">getStaleListeners</a>(styleContextChangeListener);
<a id="L991" name="L991"></a> 991                     <strong class="reserved">for</strong> (<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> l: staleListeners) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992                         styles.<a href="../D/30730.html" title="Multiple defined in 23 places.">removeChangeListener</a>(l);
<a id="L993" name="L993"></a> 993                     <em class="brace">}</em>
<a id="L994" name="L994"></a> 994                     styles.<a href="../D/10697.html" title="Multiple defined in 23 places.">addChangeListener</a>(styleContextChangeListener);
<a id="L995" name="L995"></a> 995                 <em class="brace">}</em>
<a id="L996" name="L996"></a> 996                 <a href="../S/3328.html#L1043" title="Defined at 1043 in src/javax/swing/text/DefaultStyledDocument.java.">updateStylesListeningTo</a>();
<a id="L997" name="L997"></a> 997             <em class="brace">}</em>
<a id="L998" name="L998"></a> 998         <em class="brace">}</em>
<a id="L999" name="L999"></a> 999     <em class="brace">}</em>
<a id="L1000" name="L1000"></a>1000 
<div class="comment">
      Removes a document listener.
      @param listener the listener
      @see Document#removeDocumentListener</div>
<a id="L1007" name="L1007"></a>1007     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25942.html" title="Multiple referred from 10 places.">removeDocumentListener</a>(<a href="../S/3408.html#L53" title="Defined at 53 in src/javax/swing/event/DocumentListener.java.">DocumentListener</a> listener) <em class="brace">{</em>
<a id="L1008" name="L1008"></a>1008         <strong class="reserved">synchronized</strong>(listeningStyles) <em class="brace">{</em>
<a id="L1009" name="L1009"></a>1009             <strong class="reserved">super</strong>.<a href="../D/30761.html" title="Multiple defined in 3 places.">removeDocumentListener</a>(listener);
<a id="L1010" name="L1010"></a>1010             <strong class="reserved">if</strong> (listenerList.<a href="../D/20164.html" title="Multiple defined in 4 places.">getListenerCount</a>(<a href="../S/3408.html#L53" title="Defined at 53 in src/javax/swing/event/DocumentListener.java.">DocumentListener</a>.<strong class="reserved">class</strong>) == 0) <em class="brace">{</em>
<a id="L1011" name="L1011"></a>1011                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> counter = listeningStyles.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1; counter &gt;= 0;
<a id="L1012" name="L1012"></a>1012                      counter--) <em class="brace">{</em>
<a id="L1013" name="L1013"></a>1013                     listeningStyles.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(counter).
<a id="L1014" name="L1014"></a>1014                                     <a href="../D/30730.html" title="Multiple defined in 23 places.">removeChangeListener</a>(styleChangeListener);
<a id="L1015" name="L1015"></a>1015                 <em class="brace">}</em>
<a id="L1016" name="L1016"></a>1016                 listeningStyles.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L1017" name="L1017"></a>1017                 <strong class="reserved">if</strong> (styleContextChangeListener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1018" name="L1018"></a>1018                     <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>)<a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L1019" name="L1019"></a>1019                     styles.<a href="../D/30730.html" title="Multiple defined in 23 places.">removeChangeListener</a>(styleContextChangeListener);
<a id="L1020" name="L1020"></a>1020                 <em class="brace">}</em>
<a id="L1021" name="L1021"></a>1021             <em class="brace">}</em>
<a id="L1022" name="L1022"></a>1022         <em class="brace">}</em>
<a id="L1023" name="L1023"></a>1023     <em class="brace">}</em>
<a id="L1024" name="L1024"></a>1024 
<div class="comment">
      Returns a new instance of StyleChangeHandler.</div>
<a id="L1028" name="L1028"></a>1028     <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> <a href="../S/3328.html#L1047" title="Referred from 1047 in src/javax/swing/text/DefaultStyledDocument.java.">createStyleChangeListener</a>() <em class="brace">{</em>
<a id="L1029" name="L1029"></a>1029         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3328.html#L2687" title="Defined at 2687 in src/javax/swing/text/DefaultStyledDocument.java.">StyleChangeHandler</a>(<strong class="reserved">this</strong>);
<a id="L1030" name="L1030"></a>1030     <em class="brace">}</em>
<a id="L1031" name="L1031"></a>1031 
<div class="comment">
      Returns a new instance of StyleContextChangeHandler.</div>
<a id="L1035" name="L1035"></a>1035     <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> <a href="../R/12711.html" title="Multiple referred from 2 places.">createStyleContextChangeListener</a>() <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3328.html#L2708" title="Defined at 2708 in src/javax/swing/text/DefaultStyledDocument.java.">StyleContextChangeHandler</a>(<strong class="reserved">this</strong>);
<a id="L1037" name="L1037"></a>1037     <em class="brace">}</em>
<a id="L1038" name="L1038"></a>1038 
<div class="comment">
      Adds a ChangeListener to new styles, and removes ChangeListener from
      old styles.</div>
<a id="L1043" name="L1043"></a>1043     <strong class="reserved">void</strong> <a href="../R/29965.html" title="Multiple referred from 3 places.">updateStylesListeningTo</a>() <em class="brace">{</em>
<a id="L1044" name="L1044"></a>1044         <strong class="reserved">synchronized</strong>(listeningStyles) <em class="brace">{</em>
<a id="L1045" name="L1045"></a>1045             <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>)<a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L1046" name="L1046"></a>1046             <strong class="reserved">if</strong> (styleChangeListener == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1047" name="L1047"></a>1047                 styleChangeListener = <a href="../S/3328.html#L1028" title="Defined at 1028 in src/javax/swing/text/DefaultStyledDocument.java.">createStyleChangeListener</a>();
<a id="L1048" name="L1048"></a>1048             <em class="brace">}</em>
<a id="L1049" name="L1049"></a>1049             <strong class="reserved">if</strong> (styleChangeListener != <strong class="reserved">null</strong> &amp;&amp; styles != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1050" name="L1050"></a>1050                 <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> styleNames = styles.<a href="../D/22804.html" title="Multiple defined in 2 places.">getStyleNames</a>();
<a id="L1051" name="L1051"></a>1051                 <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> v = (<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>)listeningStyles.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L1052" name="L1052"></a>1052                 listeningStyles.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L1053" name="L1053"></a>1053                 <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>&gt; staleListeners =
<a id="L1054" name="L1054"></a>1054                     <a href="../S/3328.html#L2611" title="Defined at 2611 in src/javax/swing/text/DefaultStyledDocument.java.">AbstractChangeHandler</a>.<a href="../S/3328.html#L2653" title="Defined at 2653 in src/javax/swing/text/DefaultStyledDocument.java.">getStaleListeners</a>(styleChangeListener);
<a id="L1055" name="L1055"></a>1055                 <strong class="reserved">while</strong> (styleNames.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1056" name="L1056"></a>1056                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)styleNames.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1057" name="L1057"></a>1057                     <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> aStyle = styles.<a href="../D/22802.html" title="Multiple defined in 21 places.">getStyle</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1058" name="L1058"></a>1058                     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = v.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(aStyle);
<a id="L1059" name="L1059"></a>1059                     listeningStyles.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(aStyle);
<a id="L1060" name="L1060"></a>1060                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == -1) <em class="brace">{</em>
<a id="L1061" name="L1061"></a>1061                         <strong class="reserved">for</strong> (<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> l: staleListeners) <em class="brace">{</em>
<a id="L1062" name="L1062"></a>1062                             aStyle.<a href="../D/30730.html" title="Multiple defined in 23 places.">removeChangeListener</a>(l);
<a id="L1063" name="L1063"></a>1063                         <em class="brace">}</em>
<a id="L1064" name="L1064"></a>1064                         aStyle.<a href="../D/10697.html" title="Multiple defined in 23 places.">addChangeListener</a>(styleChangeListener);
<a id="L1065" name="L1065"></a>1065                     <em class="brace">}</em>
<a id="L1066" name="L1066"></a>1066                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1067" name="L1067"></a>1067                         v.<a href="../D/30775.html" title="Multiple defined in 12 places.">removeElementAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1068" name="L1068"></a>1068                     <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069                 <em class="brace">}</em>
<a id="L1070" name="L1070"></a>1070                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> counter = v.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1; counter &gt;= 0; counter--) <em class="brace">{</em>
<a id="L1071" name="L1071"></a>1071                     <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> aStyle = (<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>)v.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(counter);
<a id="L1072" name="L1072"></a>1072                     aStyle.<a href="../D/30730.html" title="Multiple defined in 23 places.">removeChangeListener</a>(styleChangeListener);
<a id="L1073" name="L1073"></a>1073                 <em class="brace">}</em>
<a id="L1074" name="L1074"></a>1074                 <strong class="reserved">if</strong> (listeningStyles.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0) <em class="brace">{</em>
<a id="L1075" name="L1075"></a>1075                     styleChangeListener = <strong class="reserved">null</strong>;
<a id="L1076" name="L1076"></a>1076                 <em class="brace">}</em>
<a id="L1077" name="L1077"></a>1077             <em class="brace">}</em>
<a id="L1078" name="L1078"></a>1078         <em class="brace">}</em>
<a id="L1079" name="L1079"></a>1079     <em class="brace">}</em>
<a id="L1080" name="L1080"></a>1080 
<a id="L1081" name="L1081"></a>1081     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L1082" name="L1082"></a>1082             <strong class="reserved">throws</strong> <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1083" name="L1083"></a>1083         listeningStyles = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>&gt;();
<a id="L1084" name="L1084"></a>1084         s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L1085" name="L1085"></a>1085         <em class="comment">// Reinstall style listeners.</em>
<a id="L1086" name="L1086"></a>1086         <strong class="reserved">if</strong> (styleContextChangeListener == <strong class="reserved">null</strong> &amp;&amp;
<a id="L1087" name="L1087"></a>1087             listenerList.<a href="../D/20164.html" title="Multiple defined in 4 places.">getListenerCount</a>(<a href="../S/3408.html#L53" title="Defined at 53 in src/javax/swing/event/DocumentListener.java.">DocumentListener</a>.<strong class="reserved">class</strong>) &gt; 0) <em class="brace">{</em>
<a id="L1088" name="L1088"></a>1088             styleContextChangeListener = <a href="../S/3328.html#L1035" title="Defined at 1035 in src/javax/swing/text/DefaultStyledDocument.java.">createStyleContextChangeListener</a>();
<a id="L1089" name="L1089"></a>1089             <strong class="reserved">if</strong> (styleContextChangeListener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1090" name="L1090"></a>1090                 <a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a> styles = (<a href="../S/3343.html#L65" title="Defined at 65 in src/javax/swing/text/StyleContext.java.">StyleContext</a>)<a href="../S/3268.html#L950" title="Defined at 950 in src/javax/swing/text/AbstractDocument.java.">getAttributeContext</a>();
<a id="L1091" name="L1091"></a>1091                 styles.<a href="../D/10697.html" title="Multiple defined in 23 places.">addChangeListener</a>(styleContextChangeListener);
<a id="L1092" name="L1092"></a>1092             <em class="brace">}</em>
<a id="L1093" name="L1093"></a>1093             <a href="../S/3328.html#L1043" title="Defined at 1043 in src/javax/swing/text/DefaultStyledDocument.java.">updateStylesListeningTo</a>();
<a id="L1094" name="L1094"></a>1094         <em class="brace">}</em>
<a id="L1095" name="L1095"></a>1095     <em class="brace">}</em>
<a id="L1096" name="L1096"></a>1096 
<a id="L1097" name="L1097"></a>1097     <em class="comment">// --- member variables -----------------------------------------------------------</em>
<a id="L1098" name="L1098"></a>1098 
<div class="comment">
      The default size of the initial content buffer.</div>
<a id="L1102" name="L1102"></a>1102     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> BUFFER_SIZE_DEFAULT = 4096;
<a id="L1103" name="L1103"></a>1103 
<a id="L1104" name="L1104"></a>1104     <strong class="reserved">protected</strong> <a href="../S/3328.html#L1397" title="Defined at 1397 in src/javax/swing/text/DefaultStyledDocument.java.">ElementBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>;
<a id="L1105" name="L1105"></a>1105 
<div class="comment">
     /** Styles listening to. */</div>
<a id="L1107" name="L1107"></a>1107     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>&gt; listeningStyles;
<a id="L1108" name="L1108"></a>1108 
<div class="comment">
     /** Listens to Styles. */</div>
<a id="L1110" name="L1110"></a>1110     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> styleChangeListener;
<a id="L1111" name="L1111"></a>1111 
<div class="comment">
     /** Listens to Styles. */</div>
<a id="L1113" name="L1113"></a>1113     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> styleContextChangeListener;
<a id="L1114" name="L1114"></a>1114 
<div class="comment">
     /** Run to create a change event for the document */</div>
<a id="L1116" name="L1116"></a>1116     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/3328.html#L2724" title="Defined at 2724 in src/javax/swing/text/DefaultStyledDocument.java.">ChangeUpdateRunnable</a> updateRunnable;
<a id="L1117" name="L1117"></a>1117 
<div class="comment">
      Default root element for a document... maps out the
      paragraphs/lines contained.
      <p>
      <strong>Warning:</strong>
      Serialized objects of this class will not be compatible with
      future Swing releases. The current serialization support is
      appropriate for short term storage or RMI between applications running
      the same version of Swing.  As of 1.4, support for long term storage
      of all JavaBeansâ„¢
      has been added to the <code>java.beans</code> package.
      Please see {@link java.beans.XMLEncoder}.</p></div>
<a id="L1131" name="L1131"></a>1131     <strong class="reserved">protected</strong> <strong class="reserved">class</strong> <a href="../S/3328.html#L899" title="Referred from 899 in src/javax/swing/text/DefaultStyledDocument.java.">SectionElement</a> <strong class="reserved">extends</strong> <a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a> <em class="brace">{</em>
<a id="L1132" name="L1132"></a>1132 
<div class="comment">
          Creates a new SectionElement.</div>
<a id="L1136" name="L1136"></a>1136         <strong class="reserved">public</strong> SectionElement() <em class="brace">{</em>
<a id="L1137" name="L1137"></a>1137             <strong class="reserved">super</strong>(<strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L1138" name="L1138"></a>1138         <em class="brace">}</em>
<a id="L1139" name="L1139"></a>1139 
<div class="comment">
          Gets the name of the element.
          @return the name</div>
<a id="L1145" name="L1145"></a>1145         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17826.html" title="Multiple referred from 2652 places.">getName</a>() <em class="brace">{</em>
<a id="L1146" name="L1146"></a>1146             <strong class="reserved">return</strong> SectionElementName;
<a id="L1147" name="L1147"></a>1147         <em class="brace">}</em>
<a id="L1148" name="L1148"></a>1148     <em class="brace">}</em>
<a id="L1149" name="L1149"></a>1149 
<div class="comment">
      Specification for building elements.
      <p>
      <strong>Warning:</strong>
      Serialized objects of this class will not be compatible with
      future Swing releases. The current serialization support is
      appropriate for short term storage or RMI between applications running
      the same version of Swing.  As of 1.4, support for long term storage
      of all JavaBeansâ„¢
      has been added to the <code>java.beans</code> package.
      Please see {@link java.beans.XMLEncoder}.</p></div>
<a id="L1162" name="L1162"></a>1162     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2597.html" title="Multiple referred from 97 places.">ElementSpec</a> <em class="brace">{</em>
<a id="L1163" name="L1163"></a>1163 
<div class="comment">
          A possible value for getType.  This specifies
          that this record type is a start tag and
          represents markup that specifies the start
          of an element.</div>
<a id="L1170" name="L1170"></a>1170         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> StartTagType = 1;
<a id="L1171" name="L1171"></a>1171 
<div class="comment">
          A possible value for getType.  This specifies
          that this record type is a end tag and
          represents markup that specifies the end
          of an element.</div>
<a id="L1178" name="L1178"></a>1178         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> EndTagType = 2;
<a id="L1179" name="L1179"></a>1179 
<div class="comment">
          A possible value for getType.  This specifies
          that this record type represents content.</div>
<a id="L1184" name="L1184"></a>1184         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> ContentType = 3;
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
          A possible value for getDirection.  This specifies
          that the data associated with this record should
          be joined to what precedes it.</div>
<a id="L1191" name="L1191"></a>1191         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> JoinPreviousDirection = 4;
<a id="L1192" name="L1192"></a>1192 
<div class="comment">
          A possible value for getDirection.  This specifies
          that the data associated with this record should
          be joined to what follows it.</div>
<a id="L1198" name="L1198"></a>1198         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> JoinNextDirection = 5;
<a id="L1199" name="L1199"></a>1199 
<div class="comment">
          A possible value for getDirection.  This specifies
          that the data associated with this record should
          be used to originate a new element.  This would be
          the normal value.</div>
<a id="L1206" name="L1206"></a>1206         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> OriginateDirection = 6;
<a id="L1207" name="L1207"></a>1207 
<div class="comment">
          A possible value for getDirection.  This specifies
          that the data associated with this record should
          be joined to the fractured element.</div>
<a id="L1213" name="L1213"></a>1213         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">short</strong> JoinFractureDirection = 7;
<a id="L1214" name="L1214"></a>1214 
<a id="L1215" name="L1215"></a>1215 
<div class="comment">
          Constructor useful for markup when the markup will not
          be stored in the document.
          @param a the attributes for the element
          @param type the type of the element (StartTagType, EndTagType,
           ContentType)</div>
<a id="L1224" name="L1224"></a>1224         <strong class="reserved">public</strong> ElementSpec(<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1225" name="L1225"></a>1225             <strong class="reserved">this</strong>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">null</strong>, 0, 0);
<a id="L1226" name="L1226"></a>1226         <em class="brace">}</em>
<a id="L1227" name="L1227"></a>1227 
<div class="comment">
          Constructor for parsing inside the document when
          the data has already been added, but len information
          is needed.
          @param a the attributes for the element
          @param type the type of the element (StartTagType, EndTagType,
           ContentType)
          @param len the length &gt;= 0</div>
<a id="L1238" name="L1238"></a>1238         <strong class="reserved">public</strong> ElementSpec(<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">int</strong> len) <em class="brace">{</em>
<a id="L1239" name="L1239"></a>1239             <strong class="reserved">this</strong>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">null</strong>, 0, len);
<a id="L1240" name="L1240"></a>1240         <em class="brace">}</em>
<a id="L1241" name="L1241"></a>1241 
<div class="comment">
          Constructor for creating a spec externally for batch
          input of content and markup into the document.
          @param a the attributes for the element
          @param type the type of the element (StartTagType, EndTagType,
           ContentType)
          @param txt the text for the element
          @param offs the offset into the text &gt;= 0
          @param len the length of the text &gt;= 0</div>
<a id="L1253" name="L1253"></a>1253         <strong class="reserved">public</strong> ElementSpec(<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">char</strong>[] txt,
<a id="L1254" name="L1254"></a>1254                                   <strong class="reserved">int</strong> offs, <strong class="reserved">int</strong> len) <em class="brace">{</em>
<a id="L1255" name="L1255"></a>1255             <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L1256" name="L1256"></a>1256             <strong class="reserved">this</strong>.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1257" name="L1257"></a>1257             <strong class="reserved">this</strong>.<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = txt;
<a id="L1258" name="L1258"></a>1258             <strong class="reserved">this</strong>.offs = offs;
<a id="L1259" name="L1259"></a>1259             <strong class="reserved">this</strong>.len = len;
<a id="L1260" name="L1260"></a>1260             <strong class="reserved">this</strong>.direction = OriginateDirection;
<a id="L1261" name="L1261"></a>1261         <em class="brace">}</em>
<a id="L1262" name="L1262"></a>1262 
<div class="comment">
          Sets the element type.
          @param type the type of the element (StartTagType, EndTagType,
           ContentType)</div>
<a id="L1269" name="L1269"></a>1269         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28332.html" title="Multiple referred from 31 places.">setType</a>(<strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1270" name="L1270"></a>1270             <strong class="reserved">this</strong>.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1271" name="L1271"></a>1271         <em class="brace">}</em>
<a id="L1272" name="L1272"></a>1272 
<div class="comment">
          Gets the element type.
          @return  the type of the element (StartTagType, EndTagType,
           ContentType)</div>
<a id="L1279" name="L1279"></a>1279         <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/19609.html" title="Multiple referred from 540 places.">getType</a>() <em class="brace">{</em>
<a id="L1280" name="L1280"></a>1280             <strong class="reserved">return</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1281" name="L1281"></a>1281         <em class="brace">}</em>
<a id="L1282" name="L1282"></a>1282 
<div class="comment">
          Sets the direction.
          @param direction the direction (JoinPreviousDirection,
            JoinNextDirection)</div>
<a id="L1289" name="L1289"></a>1289         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27238.html" title="Multiple referred from 27 places.">setDirection</a>(<strong class="reserved">short</strong> direction) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290             <strong class="reserved">this</strong>.direction = direction;
<a id="L1291" name="L1291"></a>1291         <em class="brace">}</em>
<a id="L1292" name="L1292"></a>1292 
<div class="comment">
          Gets the direction.
          @return the direction (JoinPreviousDirection, JoinNextDirection)</div>
<a id="L1298" name="L1298"></a>1298         <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/16171.html" title="Multiple referred from 18 places.">getDirection</a>() <em class="brace">{</em>
<a id="L1299" name="L1299"></a>1299             <strong class="reserved">return</strong> direction;
<a id="L1300" name="L1300"></a>1300         <em class="brace">}</em>
<a id="L1301" name="L1301"></a>1301 
<div class="comment">
          Gets the element attributes.
          @return the attribute set</div>
<a id="L1307" name="L1307"></a>1307         <strong class="reserved">public</strong> <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../R/15169.html" title="Multiple referred from 431 places.">getAttributes</a>() <em class="brace">{</em>
<a id="L1308" name="L1308"></a>1308             <strong class="reserved">return</strong> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>;
<a id="L1309" name="L1309"></a>1309         <em class="brace">}</em>
<a id="L1310" name="L1310"></a>1310 
<div class="comment">
          Gets the array of characters.
          @return the array</div>
<a id="L1316" name="L1316"></a>1316         <strong class="reserved">public</strong> <strong class="reserved">char</strong>[] <a href="../R/15117.html" title="Multiple referred from 67 places.">getArray</a>() <em class="brace">{</em>
<a id="L1317" name="L1317"></a>1317             <strong class="reserved">return</strong> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>;
<a id="L1318" name="L1318"></a>1318         <em class="brace">}</em>
<a id="L1319" name="L1319"></a>1319 
<a id="L1320" name="L1320"></a>1320 
<div class="comment">
          Gets the starting offset.
          @return the offset &gt;= 0</div>
<a id="L1326" name="L1326"></a>1326         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18115.html" title="Multiple referred from 163 places.">getOffset</a>() <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327             <strong class="reserved">return</strong> offs;
<a id="L1328" name="L1328"></a>1328         <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329 
<div class="comment">
          Gets the length.
          @return the length &gt;= 0</div>
<a id="L1335" name="L1335"></a>1335         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17335.html" title="Multiple referred from 644 places.">getLength</a>() <em class="brace">{</em>
<a id="L1336" name="L1336"></a>1336             <strong class="reserved">return</strong> len;
<a id="L1337" name="L1337"></a>1337         <em class="brace">}</em>
<a id="L1338" name="L1338"></a>1338 
<div class="comment">
          Converts the element to a string.
          @return the string</div>
<a id="L1344" name="L1344"></a>1344         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L1345" name="L1345"></a>1345             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> tlbl = "??";
<a id="L1346" name="L1346"></a>1346             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> plbl = "??";
<a id="L1347" name="L1347"></a>1347             <strong class="reserved">switch</strong>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1348" name="L1348"></a>1348             <strong class="reserved">case</strong> StartTagType:
<a id="L1349" name="L1349"></a>1349                 tlbl = "StartTag";
<a id="L1350" name="L1350"></a>1350                 <strong class="reserved">break</strong>;
<a id="L1351" name="L1351"></a>1351             <strong class="reserved">case</strong> ContentType:
<a id="L1352" name="L1352"></a>1352                 tlbl = "Content";
<a id="L1353" name="L1353"></a>1353                 <strong class="reserved">break</strong>;
<a id="L1354" name="L1354"></a>1354             <strong class="reserved">case</strong> EndTagType:
<a id="L1355" name="L1355"></a>1355                 tlbl = "EndTag";
<a id="L1356" name="L1356"></a>1356                 <strong class="reserved">break</strong>;
<a id="L1357" name="L1357"></a>1357             <em class="brace">}</em>
<a id="L1358" name="L1358"></a>1358             <strong class="reserved">switch</strong>(direction) <em class="brace">{</em>
<a id="L1359" name="L1359"></a>1359             <strong class="reserved">case</strong> JoinPreviousDirection:
<a id="L1360" name="L1360"></a>1360                 plbl = "JoinPrevious";
<a id="L1361" name="L1361"></a>1361                 <strong class="reserved">break</strong>;
<a id="L1362" name="L1362"></a>1362             <strong class="reserved">case</strong> JoinNextDirection:
<a id="L1363" name="L1363"></a>1363                 plbl = "JoinNext";
<a id="L1364" name="L1364"></a>1364                 <strong class="reserved">break</strong>;
<a id="L1365" name="L1365"></a>1365             <strong class="reserved">case</strong> OriginateDirection:
<a id="L1366" name="L1366"></a>1366                 plbl = "Originate";
<a id="L1367" name="L1367"></a>1367                 <strong class="reserved">break</strong>;
<a id="L1368" name="L1368"></a>1368             <strong class="reserved">case</strong> JoinFractureDirection:
<a id="L1369" name="L1369"></a>1369                 plbl = "Fracture";
<a id="L1370" name="L1370"></a>1370                 <strong class="reserved">break</strong>;
<a id="L1371" name="L1371"></a>1371             <em class="brace">}</em>
<a id="L1372" name="L1372"></a>1372             <strong class="reserved">return</strong> tlbl + ":" + plbl + ":" + <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1373" name="L1373"></a>1373         <em class="brace">}</em>
<a id="L1374" name="L1374"></a>1374 
<a id="L1375" name="L1375"></a>1375         <strong class="reserved">private</strong> <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>;
<a id="L1376" name="L1376"></a>1376         <strong class="reserved">private</strong> <strong class="reserved">int</strong> len;
<a id="L1377" name="L1377"></a>1377         <strong class="reserved">private</strong> <strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1378" name="L1378"></a>1378         <strong class="reserved">private</strong> <strong class="reserved">short</strong> direction;
<a id="L1379" name="L1379"></a>1379 
<a id="L1380" name="L1380"></a>1380         <strong class="reserved">private</strong> <strong class="reserved">int</strong> offs;
<a id="L1381" name="L1381"></a>1381         <strong class="reserved">private</strong> <strong class="reserved">char</strong>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>;
<a id="L1382" name="L1382"></a>1382     <em class="brace">}</em>
<a id="L1383" name="L1383"></a>1383 
<div class="comment">
      Class to manage changes to the element
      hierarchy.
      <p>
      <strong>Warning:</strong>
      Serialized objects of this class will not be compatible with
      future Swing releases. The current serialization support is
      appropriate for short term storage or RMI between applications running
      the same version of Swing.  As of 1.4, support for long term storage
      of all JavaBeansâ„¢
      has been added to the <code>java.beans</code> package.
      Please see {@link java.beans.XMLEncoder}.</p></div>
<a id="L1397" name="L1397"></a>1397     <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2577.html" title="Multiple referred from 2 places.">ElementBuffer</a> <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L1398" name="L1398"></a>1398 
<div class="comment">
          Creates a new ElementBuffer.
          @param root the root element
          @since 1.4</div>
<a id="L1405" name="L1405"></a>1405         <strong class="reserved">public</strong> ElementBuffer(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) <em class="brace">{</em>
<a id="L1406" name="L1406"></a>1406             <strong class="reserved">this</strong>.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L1407" name="L1407"></a>1407             <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a> = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>&gt;();
<a id="L1408" name="L1408"></a>1408             path = <strong class="reserved">new</strong> <a href="../S/1186.html#L49" title="Defined at 49 in src/java/util/Stack.java.">Stack</a>&lt;<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>&gt;();
<a id="L1409" name="L1409"></a>1409         <em class="brace">}</em>
<a id="L1410" name="L1410"></a>1410 
<div class="comment">
          Gets the root element.
          @return the root element</div>
<a id="L1416" name="L1416"></a>1416         <strong class="reserved">public</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/3328.html#L116" title="Referred from 116 in src/javax/swing/text/DefaultStyledDocument.java.">getRootElement</a>() <em class="brace">{</em>
<a id="L1417" name="L1417"></a>1417             <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L1418" name="L1418"></a>1418         <em class="brace">}</em>
<a id="L1419" name="L1419"></a>1419 
<div class="comment">
          Inserts new content.
          @param offset the starting offset &gt;= 0
          @param length the length &gt;= 0
          @param data the data to insert
          @param de the event capturing this edit</div>
<a id="L1428" name="L1428"></a>1428         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20751.html" title="Multiple referred from 148 places.">insert</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>,
<a id="L1429" name="L1429"></a>1429                                  <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> de) <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430             <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) <em class="brace">{</em>
<a id="L1431" name="L1431"></a>1431                 <em class="comment">// Nothing was inserted, no structure change.</em>
<a id="L1432" name="L1432"></a>1432                 <strong class="reserved">return</strong>;
<a id="L1433" name="L1433"></a>1433             <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434             <a href="../S/4999.html#L748" title="Defined at 748 in src/com/sun/org/apache/xpath/internal/compiler/XPathParser.java.">insertOp</a> = <strong class="reserved">true</strong>;
<a id="L1435" name="L1435"></a>1435             <a href="../S/3328.html#L1766" title="Defined at 1766 in src/javax/swing/text/DefaultStyledDocument.java.">beginEdits</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1436" name="L1436"></a>1436             <a href="../D/24781.html" title="Multiple defined in 28 places.">insertUpdate</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>);
<a id="L1437" name="L1437"></a>1437             <a href="../S/3328.html#L1725" title="Defined at 1725 in src/javax/swing/text/DefaultStyledDocument.java.">endEdits</a>(de);
<a id="L1438" name="L1438"></a>1438 
<a id="L1439" name="L1439"></a>1439             <a href="../S/4999.html#L748" title="Defined at 748 in src/com/sun/org/apache/xpath/internal/compiler/XPathParser.java.">insertOp</a> = <strong class="reserved">false</strong>;
<a id="L1440" name="L1440"></a>1440         <em class="brace">}</em>
<a id="L1441" name="L1441"></a>1441 
<a id="L1442" name="L1442"></a>1442         <strong class="reserved">void</strong> <a href="../R/12190.html" title="Multiple referred from 234 places.">create</a>(<strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> de) <em class="brace">{</em>
<a id="L1443" name="L1443"></a>1443             <a href="../S/4999.html#L748" title="Defined at 748 in src/com/sun/org/apache/xpath/internal/compiler/XPathParser.java.">insertOp</a> = <strong class="reserved">true</strong>;
<a id="L1444" name="L1444"></a>1444             <a href="../S/3328.html#L1766" title="Defined at 1766 in src/javax/swing/text/DefaultStyledDocument.java.">beginEdits</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1445" name="L1445"></a>1445 
<a id="L1446" name="L1446"></a>1446             <em class="comment">// PENDING(prinz) this needs to be fixed to create a new</em>
<a id="L1447" name="L1447"></a>1447             <em class="comment">// root element as well, but requires changes to the</em>
<a id="L1448" name="L1448"></a>1448             <em class="comment">// DocumentEvent to inform the views that there is a new</em>
<a id="L1449" name="L1449"></a>1449             <em class="comment">// root element.</em>
<a id="L1450" name="L1450"></a>1450 
<a id="L1451" name="L1451"></a>1451             <em class="comment">// Recreate the ending fake element to have the correct offsets.</em>
<a id="L1452" name="L1452"></a>1452             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L1453" name="L1453"></a>1453             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(0);
<a id="L1454" name="L1454"></a>1454             <strong class="reserved">while</strong> (! elem.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L1455" name="L1455"></a>1455                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1456" name="L1456"></a>1456                 <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(elem, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1457" name="L1457"></a>1457                 elem = child;
<a id="L1458" name="L1458"></a>1458                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(0);
<a id="L1459" name="L1459"></a>1459             <em class="brace">}</em>
<a id="L1460" name="L1460"></a>1460             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1461" name="L1461"></a>1461             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1462" name="L1462"></a>1462             ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L1463" name="L1463"></a>1463                                 child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(),
<a id="L1464" name="L1464"></a>1464                                 child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()));
<a id="L1465" name="L1465"></a>1465             ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L1466" name="L1466"></a>1466             <strong class="reserved">while</strong> (path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 1) <em class="brace">{</em>
<a id="L1467" name="L1467"></a>1467                 <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1468" name="L1468"></a>1468             <em class="brace">}</em>
<a id="L1469" name="L1469"></a>1469 
<a id="L1470" name="L1470"></a>1470             <strong class="reserved">int</strong> n = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1471" name="L1471"></a>1471 
<a id="L1472" name="L1472"></a>1472             <em class="comment">// Reset the root elements attributes.</em>
<a id="L1473" name="L1473"></a>1473             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> newAttrs = <strong class="reserved">null</strong>;
<a id="L1474" name="L1474"></a>1474             <strong class="reserved">if</strong> (n &gt; 0 &amp;&amp; <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[0].<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.StartTagType) <em class="brace">{</em>
<a id="L1475" name="L1475"></a>1475                 newAttrs = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[0].<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L1476" name="L1476"></a>1476             <em class="brace">}</em>
<a id="L1477" name="L1477"></a>1477             <strong class="reserved">if</strong> (newAttrs == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1478" name="L1478"></a>1478                 newAttrs = <a href="../S/3236.html#L51" title="Defined at 51 in src/javax/swing/text/SimpleAttributeSet.java.">SimpleAttributeSet</a>.EMPTY;
<a id="L1479" name="L1479"></a>1479             <em class="brace">}</em>
<a id="L1480" name="L1480"></a>1480             <a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a>)<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>.
<a id="L1481" name="L1481"></a>1481                                        <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L1482" name="L1482"></a>1482             de.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(<strong class="reserved">new</strong> <a href="../S/3328.html#L2520" title="Defined at 2520 in src/javax/swing/text/DefaultStyledDocument.java.">AttributeUndoableEdit</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, newAttrs, <strong class="reserved">true</strong>));
<a id="L1483" name="L1483"></a>1483             <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/30716.html" title="Multiple defined in 21 places.">removeAttributes</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L1484" name="L1484"></a>1484             <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/10670.html" title="Multiple defined in 16 places.">addAttributes</a>(newAttrs);
<a id="L1485" name="L1485"></a>1485 
<a id="L1486" name="L1486"></a>1486             <em class="comment">// fold in the specified subtree</em>
<a id="L1487" name="L1487"></a>1487             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 1; i &lt; n; i++) <em class="brace">{</em>
<a id="L1488" name="L1488"></a>1488                 <a href="../S/3328.html#L1826" title="Defined at 1826 in src/javax/swing/text/DefaultStyledDocument.java.">insertElement</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[i]);
<a id="L1489" name="L1489"></a>1489             <em class="brace">}</em>
<a id="L1490" name="L1490"></a>1490 
<a id="L1491" name="L1491"></a>1491             <em class="comment">// pop the remaining path</em>
<a id="L1492" name="L1492"></a>1492             <strong class="reserved">while</strong> (path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L1493" name="L1493"></a>1493                 <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1494" name="L1494"></a>1494             <em class="brace">}</em>
<a id="L1495" name="L1495"></a>1495 
<a id="L1496" name="L1496"></a>1496             <a href="../S/3328.html#L1725" title="Defined at 1725 in src/javax/swing/text/DefaultStyledDocument.java.">endEdits</a>(de);
<a id="L1497" name="L1497"></a>1497             <a href="../S/4999.html#L748" title="Defined at 748 in src/com/sun/org/apache/xpath/internal/compiler/XPathParser.java.">insertOp</a> = <strong class="reserved">false</strong>;
<a id="L1498" name="L1498"></a>1498         <em class="brace">}</em>
<a id="L1499" name="L1499"></a>1499 
<div class="comment">
          Removes content.
          @param offset the starting offset &gt;= 0
          @param length the length &gt;= 0
          @param de the event capturing this edit</div>
<a id="L1507" name="L1507"></a>1507         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> de) <em class="brace">{</em>
<a id="L1508" name="L1508"></a>1508             <a href="../S/3328.html#L1766" title="Defined at 1766 in src/javax/swing/text/DefaultStyledDocument.java.">beginEdits</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1509" name="L1509"></a>1509             <a href="../D/30986.html" title="Multiple defined in 27 places.">removeUpdate</a>();
<a id="L1510" name="L1510"></a>1510             <a href="../S/3328.html#L1725" title="Defined at 1725 in src/javax/swing/text/DefaultStyledDocument.java.">endEdits</a>(de);
<a id="L1511" name="L1511"></a>1511         <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512 
<div class="comment">
          Changes content.
          @param offset the starting offset &gt;= 0
          @param length the length &gt;= 0
          @param de the event capturing this edit</div>
<a id="L1520" name="L1520"></a>1520         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11011.html" title="Multiple referred from 110 places.">change</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> de) <em class="brace">{</em>
<a id="L1521" name="L1521"></a>1521             <a href="../S/3328.html#L1766" title="Defined at 1766 in src/javax/swing/text/DefaultStyledDocument.java.">beginEdits</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1522" name="L1522"></a>1522             <a href="../S/3328.html#L1627" title="Defined at 1627 in src/javax/swing/text/DefaultStyledDocument.java.">changeUpdate</a>();
<a id="L1523" name="L1523"></a>1523             <a href="../S/3328.html#L1725" title="Defined at 1725 in src/javax/swing/text/DefaultStyledDocument.java.">endEdits</a>(de);
<a id="L1524" name="L1524"></a>1524         <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525 
<div class="comment">
          Inserts an update into the document.
          @param data the elements to insert</div>
<a id="L1531" name="L1531"></a>1531         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20799.html" title="Multiple referred from 23 places.">insertUpdate</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>) <em class="brace">{</em>
<a id="L1532" name="L1532"></a>1532             <em class="comment">// push the path</em>
<a id="L1533" name="L1533"></a>1533             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L1534" name="L1534"></a>1534             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L1535" name="L1535"></a>1535             <strong class="reserved">while</strong> (! elem.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L1536" name="L1536"></a>1536                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1537" name="L1537"></a>1537                 <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(elem, (child.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>() ? <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> : <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1));
<a id="L1538" name="L1538"></a>1538                 elem = child;
<a id="L1539" name="L1539"></a>1539                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L1540" name="L1540"></a>1540             <em class="brace">}</em>
<a id="L1541" name="L1541"></a>1541 
<a id="L1542" name="L1542"></a>1542             <em class="comment">// Build a copy of the original path.</em>
<a id="L1543" name="L1543"></a>1543             insertPath = <strong class="reserved">new</strong> <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>[path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L1544" name="L1544"></a>1544             path.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(insertPath);
<a id="L1545" name="L1545"></a>1545 
<a id="L1546" name="L1546"></a>1546             <em class="comment">// Haven't created the fracture yet.</em>
<a id="L1547" name="L1547"></a>1547             createdFracture = <strong class="reserved">false</strong>;
<a id="L1548" name="L1548"></a>1548 
<a id="L1549" name="L1549"></a>1549             <em class="comment">// Insert the first content.</em>
<a id="L1550" name="L1550"></a>1550             <strong class="reserved">int</strong> i;
<a id="L1551" name="L1551"></a>1551 
<a id="L1552" name="L1552"></a>1552             recreateLeafs = <strong class="reserved">false</strong>;
<a id="L1553" name="L1553"></a>1553             <strong class="reserved">if</strong>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[0].<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType) <em class="brace">{</em>
<a id="L1554" name="L1554"></a>1554                 <a href="../S/3328.html#L2383" title="Defined at 2383 in src/javax/swing/text/DefaultStyledDocument.java.">insertFirstContent</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>);
<a id="L1555" name="L1555"></a>1555                 pos += <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[0].<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1556" name="L1556"></a>1556                 i = 1;
<a id="L1557" name="L1557"></a>1557             <em class="brace">}</em>
<a id="L1558" name="L1558"></a>1558             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1559" name="L1559"></a>1559                 <a href="../S/3328.html#L2358" title="Defined at 2358 in src/javax/swing/text/DefaultStyledDocument.java.">fractureDeepestLeaf</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>);
<a id="L1560" name="L1560"></a>1560                 i = 0;
<a id="L1561" name="L1561"></a>1561             <em class="brace">}</em>
<a id="L1562" name="L1562"></a>1562 
<a id="L1563" name="L1563"></a>1563             <em class="comment">// fold in the specified subtree</em>
<a id="L1564" name="L1564"></a>1564             <strong class="reserved">int</strong> n = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1565" name="L1565"></a>1565             <strong class="reserved">for</strong> (; i &lt; n; i++) <em class="brace">{</em>
<a id="L1566" name="L1566"></a>1566                 <a href="../S/3328.html#L1826" title="Defined at 1826 in src/javax/swing/text/DefaultStyledDocument.java.">insertElement</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[i]);
<a id="L1567" name="L1567"></a>1567             <em class="brace">}</em>
<a id="L1568" name="L1568"></a>1568 
<a id="L1569" name="L1569"></a>1569             <em class="comment">// Fracture, if we haven't yet.</em>
<a id="L1570" name="L1570"></a>1570             <strong class="reserved">if</strong>(!createdFracture)
<a id="L1571" name="L1571"></a>1571                 <a href="../S/3328.html#L2171" title="Defined at 2171 in src/javax/swing/text/DefaultStyledDocument.java.">fracture</a>(-1);
<a id="L1572" name="L1572"></a>1572 
<a id="L1573" name="L1573"></a>1573             <em class="comment">// pop the remaining path</em>
<a id="L1574" name="L1574"></a>1574             <strong class="reserved">while</strong> (path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L1575" name="L1575"></a>1575                 <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1576" name="L1576"></a>1576             <em class="brace">}</em>
<a id="L1577" name="L1577"></a>1577 
<a id="L1578" name="L1578"></a>1578             <em class="comment">// Offset the last index if necessary.</em>
<a id="L1579" name="L1579"></a>1579             <strong class="reserved">if</strong>(offsetLastIndex &amp;&amp; offsetLastIndexOnReplace) <em class="brace">{</em>
<a id="L1580" name="L1580"></a>1580                 insertPath[insertPath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1].<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L1581" name="L1581"></a>1581             <em class="brace">}</em>
<a id="L1582" name="L1582"></a>1582 
<a id="L1583" name="L1583"></a>1583             <em class="comment">// Make sure an edit is going to be created for each of the</em>
<a id="L1584" name="L1584"></a>1584             <em class="comment">// original path items that have a change.</em>
<a id="L1585" name="L1585"></a>1585             <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = insertPath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1; counter &gt;= 0;
<a id="L1586" name="L1586"></a>1586                 counter--) <em class="brace">{</em>
<a id="L1587" name="L1587"></a>1587                 <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a> = insertPath[counter];
<a id="L1588" name="L1588"></a>1588                 <strong class="reserved">if</strong>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == fracturedParent)
<a id="L1589" name="L1589"></a>1589                     <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(fracturedChild);
<a id="L1590" name="L1590"></a>1590                 <strong class="reserved">if</strong>((<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.added.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0 ||
<a id="L1591" name="L1591"></a>1591                     <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.removed.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) &amp;&amp; !<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>)) <em class="brace">{</em>
<a id="L1592" name="L1592"></a>1592                     <em class="comment">// PENDING(sky): Do I need to worry about order here?</em>
<a id="L1593" name="L1593"></a>1593                     <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>);
<a id="L1594" name="L1594"></a>1594                 <em class="brace">}</em>
<a id="L1595" name="L1595"></a>1595             <em class="brace">}</em>
<a id="L1596" name="L1596"></a>1596 
<a id="L1597" name="L1597"></a>1597             <em class="comment">// An insert at 0 with an initial end implies some elements</em>
<a id="L1598" name="L1598"></a>1598             <em class="comment">// will have no children (the bottomost leaf would have length 0)</em>
<a id="L1599" name="L1599"></a>1599             <em class="comment">// this will find what element need to be removed and remove it.</em>
<a id="L1600" name="L1600"></a>1600             <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> == 0 &amp;&amp; fracturedParent != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1601" name="L1601"></a>1601                 <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[0].<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.EndTagType) <em class="brace">{</em>
<a id="L1602" name="L1602"></a>1602                 <strong class="reserved">int</strong> counter = 0;
<a id="L1603" name="L1603"></a>1603                 <strong class="reserved">while</strong> (counter &lt; <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp;
<a id="L1604" name="L1604"></a>1604                        <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[counter].<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.EndTagType) <em class="brace">{</em>
<a id="L1605" name="L1605"></a>1605                     counter++;
<a id="L1606" name="L1606"></a>1606                 <em class="brace">}</em>
<a id="L1607" name="L1607"></a>1607                 <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a> = insertPath[insertPath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> -
<a id="L1608" name="L1608"></a>1608                                                counter - 1];
<a id="L1609" name="L1609"></a>1609                 <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.removed.<a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>
<a id="L1610" name="L1610"></a>1610                                                (--<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>), 0);
<a id="L1611" name="L1611"></a>1611             <em class="brace">}</em>
<a id="L1612" name="L1612"></a>1612         <em class="brace">}</em>
<a id="L1613" name="L1613"></a>1613 
<div class="comment">
          Updates the element structure in response to a removal from the
          associated sequence in the document.  Any elements consumed by the
          span of the removal are removed.</div>
<a id="L1619" name="L1619"></a>1619         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/26095.html" title="Multiple referred from 20 places.">removeUpdate</a>() <em class="brace">{</em>
<a id="L1620" name="L1620"></a>1620             <a href="../D/30778.html" title="Multiple defined in 3 places.">removeElements</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1621" name="L1621"></a>1621         <em class="brace">}</em>
<a id="L1622" name="L1622"></a>1622 
<div class="comment">
          Updates the element structure in response to a change in the
          document.</div>
<a id="L1627" name="L1627"></a>1627         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/3328.html#L1522" title="Referred from 1522 in src/javax/swing/text/DefaultStyledDocument.java.">changeUpdate</a>() <em class="brace">{</em>
<a id="L1628" name="L1628"></a>1628             <strong class="reserved">boolean</strong> didEnd = <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1629" name="L1629"></a>1629             <strong class="reserved">if</strong> (! didEnd) <em class="brace">{</em>
<a id="L1630" name="L1630"></a>1630                 <em class="comment">// need to do the other end</em>
<a id="L1631" name="L1631"></a>1631                 <strong class="reserved">while</strong> (path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L1632" name="L1632"></a>1632                     <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1633" name="L1633"></a>1633                 <em class="brace">}</em>
<a id="L1634" name="L1634"></a>1634                 <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0);
<a id="L1635" name="L1635"></a>1635             <em class="brace">}</em>
<a id="L1636" name="L1636"></a>1636             <strong class="reserved">while</strong> (path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L1637" name="L1637"></a>1637                 <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1638" name="L1638"></a>1638             <em class="brace">}</em>
<a id="L1639" name="L1639"></a>1639         <em class="brace">}</em>
<a id="L1640" name="L1640"></a>1640 
<a id="L1641" name="L1641"></a>1641         <strong class="reserved">boolean</strong> <a href="../R/28754.html" title="Multiple referred from 96 places.">split</a>(<strong class="reserved">int</strong> offs, <strong class="reserved">int</strong> len) <em class="brace">{</em>
<a id="L1642" name="L1642"></a>1642             <strong class="reserved">boolean</strong> splitEnd = <strong class="reserved">false</strong>;
<a id="L1643" name="L1643"></a>1643             <em class="comment">// push the path</em>
<a id="L1644" name="L1644"></a>1644             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L1645" name="L1645"></a>1645             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = e.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(offs);
<a id="L1646" name="L1646"></a>1646             <strong class="reserved">while</strong> (! e.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L1647" name="L1647"></a>1647                 <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(e, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1648" name="L1648"></a>1648                 e = e.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1649" name="L1649"></a>1649                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = e.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(offs);
<a id="L1650" name="L1650"></a>1650             <em class="brace">}</em>
<a id="L1651" name="L1651"></a>1651 
<a id="L1652" name="L1652"></a>1652             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1653" name="L1653"></a>1653             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1654" name="L1654"></a>1654             <em class="comment">// make sure there is something to do... if the</em>
<a id="L1655" name="L1655"></a>1655             <em class="comment">// offset is already at a boundary then there is</em>
<a id="L1656" name="L1656"></a>1656             <em class="comment">// nothing to do.</em>
<a id="L1657" name="L1657"></a>1657             <strong class="reserved">if</strong> (child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &lt; offs &amp;&amp; offs &lt; child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) <em class="brace">{</em>
<a id="L1658" name="L1658"></a>1658                 <em class="comment">// we need to split, now see if the other end is within</em>
<a id="L1659" name="L1659"></a>1659                 <em class="comment">// the same parent.</em>
<a id="L1660" name="L1660"></a>1660                 <strong class="reserved">int</strong> index0 = ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1661" name="L1661"></a>1661                 <strong class="reserved">int</strong> index1 = index0;
<a id="L1662" name="L1662"></a>1662                 <strong class="reserved">if</strong> (((offs + len) &lt; ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) &amp;&amp; (len != 0)) <em class="brace">{</em>
<a id="L1663" name="L1663"></a>1663                     <em class="comment">// it's a range split in the same parent</em>
<a id="L1664" name="L1664"></a>1664                     index1 = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(offs+len);
<a id="L1665" name="L1665"></a>1665                     <strong class="reserved">if</strong> (index1 == index0) <em class="brace">{</em>
<a id="L1666" name="L1666"></a>1666                         <em class="comment">// it's a three-way split</em>
<a id="L1667" name="L1667"></a>1667                         ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L1668" name="L1668"></a>1668                         e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1669" name="L1669"></a>1669                                               child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(), offs);
<a id="L1670" name="L1670"></a>1670                         ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1671" name="L1671"></a>1671                         e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1672" name="L1672"></a>1672                                           offs, offs + len);
<a id="L1673" name="L1673"></a>1673                         ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1674" name="L1674"></a>1674                         e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1675" name="L1675"></a>1675                                               offs + len, child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L1676" name="L1676"></a>1676                         ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1677" name="L1677"></a>1677                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1678" name="L1678"></a>1678                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1679" name="L1679"></a>1679                         child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(index1);
<a id="L1680" name="L1680"></a>1680                         <strong class="reserved">if</strong> ((offs + len) == child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>()) <em class="brace">{</em>
<a id="L1681" name="L1681"></a>1681                             <em class="comment">// end is already on a boundary</em>
<a id="L1682" name="L1682"></a>1682                             index1 = index0;
<a id="L1683" name="L1683"></a>1683                         <em class="brace">}</em>
<a id="L1684" name="L1684"></a>1684                     <em class="brace">}</em>
<a id="L1685" name="L1685"></a>1685                     splitEnd = <strong class="reserved">true</strong>;
<a id="L1686" name="L1686"></a>1686                 <em class="brace">}</em>
<a id="L1687" name="L1687"></a>1687 
<a id="L1688" name="L1688"></a>1688                 <em class="comment">// split the first location</em>
<a id="L1689" name="L1689"></a>1689                 pos = offs;
<a id="L1690" name="L1690"></a>1690                 child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(index0);
<a id="L1691" name="L1691"></a>1691                 ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L1692" name="L1692"></a>1692                 e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1693" name="L1693"></a>1693                                       child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(), pos);
<a id="L1694" name="L1694"></a>1694                 ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1695" name="L1695"></a>1695                 e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1696" name="L1696"></a>1696                                       pos, child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L1697" name="L1697"></a>1697                 ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1698" name="L1698"></a>1698 
<a id="L1699" name="L1699"></a>1699                 <em class="comment">// pick up things in the middle</em>
<a id="L1700" name="L1700"></a>1700                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = index0 + 1; i &lt; index1; i++) <em class="brace">{</em>
<a id="L1701" name="L1701"></a>1701                     child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i);
<a id="L1702" name="L1702"></a>1702                     ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L1703" name="L1703"></a>1703                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L1704" name="L1704"></a>1704                 <em class="brace">}</em>
<a id="L1705" name="L1705"></a>1705 
<a id="L1706" name="L1706"></a>1706                 <strong class="reserved">if</strong> (index1 != index0) <em class="brace">{</em>
<a id="L1707" name="L1707"></a>1707                     child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(index1);
<a id="L1708" name="L1708"></a>1708                     pos = offs + len;
<a id="L1709" name="L1709"></a>1709                     ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L1710" name="L1710"></a>1710                     e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1711" name="L1711"></a>1711                                           child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(), pos);
<a id="L1712" name="L1712"></a>1712                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1713" name="L1713"></a>1713                     e = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1714" name="L1714"></a>1714                                           pos, child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L1715" name="L1715"></a>1715                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1716" name="L1716"></a>1716                 <em class="brace">}</em>
<a id="L1717" name="L1717"></a>1717             <em class="brace">}</em>
<a id="L1718" name="L1718"></a>1718             <strong class="reserved">return</strong> splitEnd;
<a id="L1719" name="L1719"></a>1719         <em class="brace">}</em>
<a id="L1720" name="L1720"></a>1720 
<div class="comment">
          Creates the UndoableEdit record for the edits made
          in the buffer.</div>
<a id="L1725" name="L1725"></a>1725         <strong class="reserved">void</strong> <a href="../R/13765.html" title="Multiple referred from 4 places.">endEdits</a>(<a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> de) <em class="brace">{</em>
<a id="L1726" name="L1726"></a>1726             <strong class="reserved">int</strong> n = <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1727" name="L1727"></a>1727             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L1728" name="L1728"></a>1728                 <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1729" name="L1729"></a>1729                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] removed = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[ec.removed.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L1730" name="L1730"></a>1730                 ec.removed.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(removed);
<a id="L1731" name="L1731"></a>1731                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] added = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[ec.added.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L1732" name="L1732"></a>1732                 ec.added.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(added);
<a id="L1733" name="L1733"></a>1733                 <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1734" name="L1734"></a>1734                 ((<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>) ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>).<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, removed.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, added);
<a id="L1735" name="L1735"></a>1735                 <a href="../S/3268.html#L2998" title="Defined at 2998 in src/javax/swing/text/AbstractDocument.java.">ElementEdit</a> ee = <strong class="reserved">new</strong> <a href="../S/3268.html#L2998" title="Defined at 2998 in src/javax/swing/text/AbstractDocument.java.">ElementEdit</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, removed, added);
<a id="L1736" name="L1736"></a>1736                 de.<a href="../D/10772.html" title="Multiple defined in 5 places.">addEdit</a>(ee);
<a id="L1737" name="L1737"></a>1737             <em class="brace">}</em>
<a id="L1738" name="L1738"></a>1738 
<a id="L1739" name="L1739"></a>1739             <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L1740" name="L1740"></a>1740             path.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L1741" name="L1741"></a>1741 
<div class="comment">
            for (int i = 0; i &lt; n; i++) {
                ElemChanges ec = (ElemChanges) changes.elementAt(i);
                System.err.print("edited: " + ec.parent + " at: " + ec.index +
                    " removed " + ec.removed.size());
                if (ec.removed.size() &gt; 0) {
                    int r0 = ((Element) ec.removed.firstElement()).getStartOffset();
                    int r1 = ((Element) ec.removed.lastElement()).getEndOffset();
                    System.err.print("[" + r0 + "," + r1 + "]");
                }
                System.err.print(" added " + ec.added.size());
                if (ec.added.size() &gt; 0) {
                    int p0 = ((Element) ec.added.firstElement()).getStartOffset();
                    int p1 = ((Element) ec.added.lastElement()).getEndOffset();
                    System.err.print("[" + p0 + "," + p1 + "]");
                }
                System.err.println("");
            }</div>
<a id="L1761" name="L1761"></a>1761         <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762 
<div class="comment">
          Initialize the buffer</div>
<a id="L1766" name="L1766"></a>1766         <strong class="reserved">void</strong> <a href="../R/10566.html" title="Multiple referred from 4 places.">beginEdits</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1767" name="L1767"></a>1767             <strong class="reserved">this</strong>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L1768" name="L1768"></a>1768             <strong class="reserved">this</strong>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1769" name="L1769"></a>1769             <strong class="reserved">this</strong>.endOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1770" name="L1770"></a>1770             pos = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L1771" name="L1771"></a>1771             <strong class="reserved">if</strong> (<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1772" name="L1772"></a>1772                 <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a> = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>&gt;();
<a id="L1773" name="L1773"></a>1773             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1774" name="L1774"></a>1774                 <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L1775" name="L1775"></a>1775             <em class="brace">}</em>
<a id="L1776" name="L1776"></a>1776             <strong class="reserved">if</strong> (path == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1777" name="L1777"></a>1777                 path = <strong class="reserved">new</strong> <a href="../S/1186.html#L49" title="Defined at 49 in src/java/util/Stack.java.">Stack</a>&lt;<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>&gt;();
<a id="L1778" name="L1778"></a>1778             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1779" name="L1779"></a>1779                 path.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L1780" name="L1780"></a>1780             <em class="brace">}</em>
<a id="L1781" name="L1781"></a>1781             fracturedParent = <strong class="reserved">null</strong>;
<a id="L1782" name="L1782"></a>1782             fracturedChild = <strong class="reserved">null</strong>;
<a id="L1783" name="L1783"></a>1783             offsetLastIndex = offsetLastIndexOnReplace = <strong class="reserved">false</strong>;
<a id="L1784" name="L1784"></a>1784         <em class="brace">}</em>
<a id="L1785" name="L1785"></a>1785 
<div class="comment">
          Pushes a new element onto the stack that represents
          the current path.
          @param record Whether or not the push should be
           recorded as an element change or not.
          @param isFracture true if pushing on an element that was created
          as the result of a fracture.</div>
<a id="L1794" name="L1794"></a>1794         <strong class="reserved">void</strong> <a href="../R/25256.html" title="Multiple referred from 281 places.">push</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">boolean</strong> isFracture) <em class="brace">{</em>
<a id="L1795" name="L1795"></a>1795             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = <strong class="reserved">new</strong> <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>(e, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, isFracture);
<a id="L1796" name="L1796"></a>1796             path.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(ec);
<a id="L1797" name="L1797"></a>1797         <em class="brace">}</em>
<a id="L1798" name="L1798"></a>1798 
<a id="L1799" name="L1799"></a>1799         <strong class="reserved">void</strong> <a href="../R/25256.html" title="Multiple referred from 281 places.">push</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L1800" name="L1800"></a>1800             <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(e, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">false</strong>);
<a id="L1801" name="L1801"></a>1801         <em class="brace">}</em>
<a id="L1802" name="L1802"></a>1802 
<a id="L1803" name="L1803"></a>1803         <strong class="reserved">void</strong> <a href="../R/24804.html" title="Multiple referred from 176 places.">pop</a>() <em class="brace">{</em>
<a id="L1804" name="L1804"></a>1804             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1805" name="L1805"></a>1805             path.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1806" name="L1806"></a>1806             <strong class="reserved">if</strong> ((ec.added.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) || (ec.removed.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0)) <em class="brace">{</em>
<a id="L1807" name="L1807"></a>1807                 <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(ec);
<a id="L1808" name="L1808"></a>1808             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (! path.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L1809" name="L1809"></a>1809                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L1810" name="L1810"></a>1810                 <strong class="reserved">if</strong>(e.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() == 0) <em class="brace">{</em>
<a id="L1811" name="L1811"></a>1811                     <em class="comment">// if we pushed a branch element that didn't get</em>
<a id="L1812" name="L1812"></a>1812                     <em class="comment">// used, make sure its not marked as having been added.</em>
<a id="L1813" name="L1813"></a>1813                     ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1814" name="L1814"></a>1814                     ec.added.<a href="../D/30774.html" title="Multiple defined in 14 places.">removeElement</a>(e);
<a id="L1815" name="L1815"></a>1815                 <em class="brace">}</em>
<a id="L1816" name="L1816"></a>1816             <em class="brace">}</em>
<a id="L1817" name="L1817"></a>1817         <em class="brace">}</em>
<a id="L1818" name="L1818"></a>1818 
<div class="comment">
          move the current offset forward by n.</div>
<a id="L1822" name="L1822"></a>1822         <strong class="reserved">void</strong> <a href="../R/10102.html" title="Multiple referred from 119 places.">advance</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L1823" name="L1823"></a>1823             pos += n;
<a id="L1824" name="L1824"></a>1824         <em class="brace">}</em>
<a id="L1825" name="L1825"></a>1825 
<a id="L1826" name="L1826"></a>1826         <strong class="reserved">void</strong> <a href="../R/20768.html" title="Multiple referred from 9 places.">insertElement</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> es) <em class="brace">{</em>
<a id="L1827" name="L1827"></a>1827             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1828" name="L1828"></a>1828             <strong class="reserved">switch</strong>(es.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>()) <em class="brace">{</em>
<a id="L1829" name="L1829"></a>1829             <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.StartTagType:
<a id="L1830" name="L1830"></a>1830                 <strong class="reserved">switch</strong>(es.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>()) <em class="brace">{</em>
<a id="L1831" name="L1831"></a>1831                 <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection:
<a id="L1832" name="L1832"></a>1832                     <em class="comment">// Don't create a new element, use the existing one</em>
<a id="L1833" name="L1833"></a>1833                     <em class="comment">// at the specified location.</em>
<a id="L1834" name="L1834"></a>1834                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1835" name="L1835"></a>1835 
<a id="L1836" name="L1836"></a>1836                     <strong class="reserved">if</strong>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L1837" name="L1837"></a>1837                         <em class="comment">// This happens if inserting into a leaf, followed</em>
<a id="L1838" name="L1838"></a>1838                         <em class="comment">// by a join next where next sibling is not a leaf.</em>
<a id="L1839" name="L1839"></a>1839                         <strong class="reserved">if</strong>((ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1) &lt; ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>())
<a id="L1840" name="L1840"></a>1840                             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1);
<a id="L1841" name="L1841"></a>1841                         <strong class="reserved">else</strong>
<a id="L1842" name="L1842"></a>1842                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>("Join next to leaf");
<a id="L1843" name="L1843"></a>1843                     <em class="brace">}</em>
<a id="L1844" name="L1844"></a>1844                     <em class="comment">// Not really a fracture, but need to treat it like</em>
<a id="L1845" name="L1845"></a>1845                     <em class="comment">// one so that content join next will work correctly.</em>
<a id="L1846" name="L1846"></a>1846                     <em class="comment">// We can do this because there will never be a join</em>
<a id="L1847" name="L1847"></a>1847                     <em class="comment">// next followed by a join fracture.</em>
<a id="L1848" name="L1848"></a>1848                     <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, 0, <strong class="reserved">true</strong>);
<a id="L1849" name="L1849"></a>1849                     <strong class="reserved">break</strong>;
<a id="L1850" name="L1850"></a>1850                 <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinFractureDirection:
<a id="L1851" name="L1851"></a>1851                     <strong class="reserved">if</strong>(!createdFracture) <em class="brace">{</em>
<a id="L1852" name="L1852"></a>1852                         <em class="comment">// Should always be something on the stack!</em>
<a id="L1853" name="L1853"></a>1853                         <a href="../S/3328.html#L2171" title="Defined at 2171 in src/javax/swing/text/DefaultStyledDocument.java.">fracture</a>(path.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1);
<a id="L1854" name="L1854"></a>1854                     <em class="brace">}</em>
<a id="L1855" name="L1855"></a>1855                     <em class="comment">// If parent isn't a fracture, fracture will be</em>
<a id="L1856" name="L1856"></a>1856                     <em class="comment">// fracturedChild.</em>
<a id="L1857" name="L1857"></a>1857                     <strong class="reserved">if</strong>(!ec.isFracture) <em class="brace">{</em>
<a id="L1858" name="L1858"></a>1858                         <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(fracturedChild, 0, <strong class="reserved">true</strong>);
<a id="L1859" name="L1859"></a>1859                     <em class="brace">}</em>
<a id="L1860" name="L1860"></a>1860                     <strong class="reserved">else</strong>
<a id="L1861" name="L1861"></a>1861                         <em class="comment">// Parent is a fracture, use 1st element.</em>
<a id="L1862" name="L1862"></a>1862                         <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(0), 0, <strong class="reserved">true</strong>);
<a id="L1863" name="L1863"></a>1863                     <strong class="reserved">break</strong>;
<a id="L1864" name="L1864"></a>1864                 <strong class="reserved">default</strong>:
<a id="L1865" name="L1865"></a>1865                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> belem = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L1866" name="L1866"></a>1866                                                         es.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L1867" name="L1867"></a>1867                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(belem);
<a id="L1868" name="L1868"></a>1868                     <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(belem, 0);
<a id="L1869" name="L1869"></a>1869                     <strong class="reserved">break</strong>;
<a id="L1870" name="L1870"></a>1870                 <em class="brace">}</em>
<a id="L1871" name="L1871"></a>1871                 <strong class="reserved">break</strong>;
<a id="L1872" name="L1872"></a>1872             <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.EndTagType:
<a id="L1873" name="L1873"></a>1873                 <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1874" name="L1874"></a>1874                 <strong class="reserved">break</strong>;
<a id="L1875" name="L1875"></a>1875             <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.ContentType:
<a id="L1876" name="L1876"></a>1876               <strong class="reserved">int</strong> len = es.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1877" name="L1877"></a>1877                 <strong class="reserved">if</strong> (es.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>() != <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection) <em class="brace">{</em>
<a id="L1878" name="L1878"></a>1878                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> leaf = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, es.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L1879" name="L1879"></a>1879                                                      pos, pos + len);
<a id="L1880" name="L1880"></a>1880                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(leaf);
<a id="L1881" name="L1881"></a>1881                 <em class="brace">}</em>
<a id="L1882" name="L1882"></a>1882                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1883" name="L1883"></a>1883                     <em class="comment">// JoinNext on tail is only applicable if last element</em>
<a id="L1884" name="L1884"></a>1884                     <em class="comment">// and attributes come from that of first element.</em>
<a id="L1885" name="L1885"></a>1885                     <em class="comment">// With a little extra testing it would be possible</em>
<a id="L1886" name="L1886"></a>1886                     <em class="comment">// to NOT due this again, as more than likely fracture()</em>
<a id="L1887" name="L1887"></a>1887                     <em class="comment">// created this element.</em>
<a id="L1888" name="L1888"></a>1888                     <strong class="reserved">if</strong>(!ec.isFracture) <em class="brace">{</em>
<a id="L1889" name="L1889"></a>1889                         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">null</strong>;
<a id="L1890" name="L1890"></a>1890                         <strong class="reserved">if</strong>(insertPath != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1891" name="L1891"></a>1891                             <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = insertPath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1;
<a id="L1892" name="L1892"></a>1892                                 counter &gt;= 0; counter--) <em class="brace">{</em>
<a id="L1893" name="L1893"></a>1893                                 <strong class="reserved">if</strong>(insertPath[counter] == ec) <em class="brace">{</em>
<a id="L1894" name="L1894"></a>1894                                     <strong class="reserved">if</strong>(counter != (insertPath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1))
<a id="L1895" name="L1895"></a>1895                                         <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1896" name="L1896"></a>1896                                     <strong class="reserved">break</strong>;
<a id="L1897" name="L1897"></a>1897                                 <em class="brace">}</em>
<a id="L1898" name="L1898"></a>1898                             <em class="brace">}</em>
<a id="L1899" name="L1899"></a>1899                         <em class="brace">}</em>
<a id="L1900" name="L1900"></a>1900                         <strong class="reserved">if</strong>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>)
<a id="L1901" name="L1901"></a>1901                             <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1);
<a id="L1902" name="L1902"></a>1902                         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> leaf = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.
<a id="L1903" name="L1903"></a>1903                                  <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), pos, <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L1904" name="L1904"></a>1904                         ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(leaf);
<a id="L1905" name="L1905"></a>1905                         ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1906" name="L1906"></a>1906                     <em class="brace">}</em>
<a id="L1907" name="L1907"></a>1907                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1908" name="L1908"></a>1908                         <em class="comment">// Parent was fractured element.</em>
<a id="L1909" name="L1909"></a>1909                         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(0);
<a id="L1910" name="L1910"></a>1910                         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> leaf = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.
<a id="L1911" name="L1911"></a>1911                                  <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), pos, <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L1912" name="L1912"></a>1912                         ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(leaf);
<a id="L1913" name="L1913"></a>1913                         ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1914" name="L1914"></a>1914                     <em class="brace">}</em>
<a id="L1915" name="L1915"></a>1915                 <em class="brace">}</em>
<a id="L1916" name="L1916"></a>1916                 pos += len;
<a id="L1917" name="L1917"></a>1917                 <strong class="reserved">break</strong>;
<a id="L1918" name="L1918"></a>1918             <em class="brace">}</em>
<a id="L1919" name="L1919"></a>1919         <em class="brace">}</em>
<a id="L1920" name="L1920"></a>1920 
<div class="comment">
          Remove the elements from <code>elem</code> in range
          <code>rmOffs0</code>, <code>rmOffs1</code>. This uses
          <code>canJoin</code> and <code>join</code> to handle joining
          the endpoints of the insertion.
          @return true if elem will no longer have any elements.</div>
<a id="L1929" name="L1929"></a>1929         <strong class="reserved">boolean</strong> <a href="../R/25954.html" title="Multiple referred from 7 places.">removeElements</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem, <strong class="reserved">int</strong> rmOffs0, <strong class="reserved">int</strong> rmOffs1) <em class="brace">{</em>
<a id="L1930" name="L1930"></a>1930             <strong class="reserved">if</strong> (! elem.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L1931" name="L1931"></a>1931                 <em class="comment">// update path for changes</em>
<a id="L1932" name="L1932"></a>1932                 <strong class="reserved">int</strong> index0 = elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(rmOffs0);
<a id="L1933" name="L1933"></a>1933                 <strong class="reserved">int</strong> index1 = elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(rmOffs1);
<a id="L1934" name="L1934"></a>1934                 <a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(elem, index0);
<a id="L1935" name="L1935"></a>1935                 <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1936" name="L1936"></a>1936 
<a id="L1937" name="L1937"></a>1937                 <em class="comment">// if the range is contained by one element,</em>
<a id="L1938" name="L1938"></a>1938                 <em class="comment">// we just forward the request</em>
<a id="L1939" name="L1939"></a>1939                 <strong class="reserved">if</strong> (index0 == index1) <em class="brace">{</em>
<a id="L1940" name="L1940"></a>1940                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child0 = elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(index0);
<a id="L1941" name="L1941"></a>1941                     <strong class="reserved">if</strong>(rmOffs0 &lt;= child0.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &amp;&amp;
<a id="L1942" name="L1942"></a>1942                        rmOffs1 &gt;= child0.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943                         <em class="comment">// Element totally removed.</em>
<a id="L1944" name="L1944"></a>1944                         ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child0);
<a id="L1945" name="L1945"></a>1945                     <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946                     <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../D/30778.html" title="Multiple defined in 3 places.">removeElements</a>(child0, rmOffs0, rmOffs1)) <em class="brace">{</em>
<a id="L1947" name="L1947"></a>1947                         ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child0);
<a id="L1948" name="L1948"></a>1948                     <em class="brace">}</em>
<a id="L1949" name="L1949"></a>1949                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1950" name="L1950"></a>1950                     <em class="comment">// the removal range spans elements.  If we can join</em>
<a id="L1951" name="L1951"></a>1951                     <em class="comment">// the two endpoints, do it.  Otherwise we remove the</em>
<a id="L1952" name="L1952"></a>1952                     <em class="comment">// interior and forward to the endpoints.</em>
<a id="L1953" name="L1953"></a>1953                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child0 = elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(index0);
<a id="L1954" name="L1954"></a>1954                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child1 = elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(index1);
<a id="L1955" name="L1955"></a>1955                     <strong class="reserved">boolean</strong> containsOffs1 = (rmOffs1 &lt; elem.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L1956" name="L1956"></a>1956                     <strong class="reserved">if</strong> (containsOffs1 &amp;&amp; <a href="../S/3328.html#L2019" title="Defined at 2019 in src/javax/swing/text/DefaultStyledDocument.java.">canJoin</a>(child0, child1)) <em class="brace">{</em>
<a id="L1957" name="L1957"></a>1957                         <em class="comment">// remove and join</em>
<a id="L1958" name="L1958"></a>1958                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = index0; i &lt;= index1; i++) <em class="brace">{</em>
<a id="L1959" name="L1959"></a>1959                             ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i));
<a id="L1960" name="L1960"></a>1960                         <em class="brace">}</em>
<a id="L1961" name="L1961"></a>1961                         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/26697.html" title="Multiple defined in 17 places.">join</a>(elem, child0, child1, rmOffs0, rmOffs1);
<a id="L1962" name="L1962"></a>1962                         ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L1963" name="L1963"></a>1963                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1964" name="L1964"></a>1964                         <em class="comment">// remove interior and forward</em>
<a id="L1965" name="L1965"></a>1965                         <strong class="reserved">int</strong> rmIndex0 = index0 + 1;
<a id="L1966" name="L1966"></a>1966                         <strong class="reserved">int</strong> rmIndex1 = index1 - 1;
<a id="L1967" name="L1967"></a>1967                         <strong class="reserved">if</strong> (child0.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() == rmOffs0 ||
<a id="L1968" name="L1968"></a>1968                             (index0 == 0 &amp;&amp;
<a id="L1969" name="L1969"></a>1969                              child0.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &gt; rmOffs0 &amp;&amp;
<a id="L1970" name="L1970"></a>1970                              child0.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() &lt;= rmOffs1)) <em class="brace">{</em>
<a id="L1971" name="L1971"></a>1971                             <em class="comment">// start element completely consumed</em>
<a id="L1972" name="L1972"></a>1972                             child0 = <strong class="reserved">null</strong>;
<a id="L1973" name="L1973"></a>1973                             rmIndex0 = index0;
<a id="L1974" name="L1974"></a>1974                         <em class="brace">}</em>
<a id="L1975" name="L1975"></a>1975                         <strong class="reserved">if</strong> (!containsOffs1) <em class="brace">{</em>
<a id="L1976" name="L1976"></a>1976                             child1 = <strong class="reserved">null</strong>;
<a id="L1977" name="L1977"></a>1977                             rmIndex1++;
<a id="L1978" name="L1978"></a>1978                         <em class="brace">}</em>
<a id="L1979" name="L1979"></a>1979                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (child1.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() == rmOffs1) <em class="brace">{</em>
<a id="L1980" name="L1980"></a>1980                             <em class="comment">// end element not touched</em>
<a id="L1981" name="L1981"></a>1981                             child1 = <strong class="reserved">null</strong>;
<a id="L1982" name="L1982"></a>1982                         <em class="brace">}</em>
<a id="L1983" name="L1983"></a>1983                         <strong class="reserved">if</strong> (rmIndex0 &lt;= rmIndex1) <em class="brace">{</em>
<a id="L1984" name="L1984"></a>1984                             ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = rmIndex0;
<a id="L1985" name="L1985"></a>1985                         <em class="brace">}</em>
<a id="L1986" name="L1986"></a>1986                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = rmIndex0; i &lt;= rmIndex1; i++) <em class="brace">{</em>
<a id="L1987" name="L1987"></a>1987                             ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(elem.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i));
<a id="L1988" name="L1988"></a>1988                         <em class="brace">}</em>
<a id="L1989" name="L1989"></a>1989                         <strong class="reserved">if</strong> (child0 != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1990" name="L1990"></a>1990                             <strong class="reserved">if</strong>(<a href="../D/30778.html" title="Multiple defined in 3 places.">removeElements</a>(child0, rmOffs0, rmOffs1)) <em class="brace">{</em>
<a id="L1991" name="L1991"></a>1991                                 ec.removed.<a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(child0, 0);
<a id="L1992" name="L1992"></a>1992                                 ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = index0;
<a id="L1993" name="L1993"></a>1993                             <em class="brace">}</em>
<a id="L1994" name="L1994"></a>1994                         <em class="brace">}</em>
<a id="L1995" name="L1995"></a>1995                         <strong class="reserved">if</strong> (child1 != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1996" name="L1996"></a>1996                             <strong class="reserved">if</strong>(<a href="../D/30778.html" title="Multiple defined in 3 places.">removeElements</a>(child1, rmOffs0, rmOffs1)) <em class="brace">{</em>
<a id="L1997" name="L1997"></a>1997                                 ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child1);
<a id="L1998" name="L1998"></a>1998                             <em class="brace">}</em>
<a id="L1999" name="L1999"></a>1999                         <em class="brace">}</em>
<a id="L2000" name="L2000"></a>2000                     <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001                 <em class="brace">}</em>
<a id="L2002" name="L2002"></a>2002 
<a id="L2003" name="L2003"></a>2003                 <em class="comment">// publish changes</em>
<a id="L2004" name="L2004"></a>2004                 <a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L2005" name="L2005"></a>2005 
<a id="L2006" name="L2006"></a>2006                 <em class="comment">// Return true if we no longer have any children.</em>
<a id="L2007" name="L2007"></a>2007                 <strong class="reserved">if</strong>(elem.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() == (ec.removed.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() -
<a id="L2008" name="L2008"></a>2008                                               ec.added.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())) <em class="brace">{</em>
<a id="L2009" name="L2009"></a>2009                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2010" name="L2010"></a>2010                 <em class="brace">}</em>
<a id="L2011" name="L2011"></a>2011             <em class="brace">}</em>
<a id="L2012" name="L2012"></a>2012             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2013" name="L2013"></a>2013         <em class="brace">}</em>
<a id="L2014" name="L2014"></a>2014 
<div class="comment">
          Can the two given elements be coelesced together
          into one element?</div>
<a id="L2019" name="L2019"></a>2019         <strong class="reserved">boolean</strong> <a href="../R/10888.html" title="Multiple referred from 2 places.">canJoin</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e0, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e1) <em class="brace">{</em>
<a id="L2020" name="L2020"></a>2020             <strong class="reserved">if</strong> ((e0 == <strong class="reserved">null</strong>) || (e1 == <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L2021" name="L2021"></a>2021                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2022" name="L2022"></a>2022             <em class="brace">}</em>
<a id="L2023" name="L2023"></a>2023             <em class="comment">// Don't join a leaf to a branch.</em>
<a id="L2024" name="L2024"></a>2024             <strong class="reserved">boolean</strong> leaf0 = e0.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>();
<a id="L2025" name="L2025"></a>2025             <strong class="reserved">boolean</strong> leaf1 = e1.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>();
<a id="L2026" name="L2026"></a>2026             <strong class="reserved">if</strong>(leaf0 != leaf1) <em class="brace">{</em>
<a id="L2027" name="L2027"></a>2027                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2028" name="L2028"></a>2028             <em class="brace">}</em>
<a id="L2029" name="L2029"></a>2029             <strong class="reserved">if</strong> (leaf0) <em class="brace">{</em>
<a id="L2030" name="L2030"></a>2030                 <em class="comment">// Only join leaves if the attributes match, otherwise</em>
<a id="L2031" name="L2031"></a>2031                 <em class="comment">// style information will be lost.</em>
<a id="L2032" name="L2032"></a>2032                 <strong class="reserved">return</strong> e0.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>().<a href="../D/25513.html" title="Multiple defined in 25 places.">isEqual</a>(e1.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2033" name="L2033"></a>2033             <em class="brace">}</em>
<a id="L2034" name="L2034"></a>2034             <em class="comment">// Only join non-leafs if the names are equal. This may result</em>
<a id="L2035" name="L2035"></a>2035             <em class="comment">// in loss of style information, but this is typically acceptable</em>
<a id="L2036" name="L2036"></a>2036             <em class="comment">// for non-leafs.</em>
<a id="L2037" name="L2037"></a>2037             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> name0 = e0.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L2038" name="L2038"></a>2038             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> name1 = e1.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L2039" name="L2039"></a>2039             <strong class="reserved">if</strong> (name0 != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2040" name="L2040"></a>2040                 <strong class="reserved">return</strong> name0.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(name1);
<a id="L2041" name="L2041"></a>2041             <em class="brace">}</em>
<a id="L2042" name="L2042"></a>2042             <strong class="reserved">if</strong> (name1 != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2043" name="L2043"></a>2043                 <strong class="reserved">return</strong> name1.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(name0);
<a id="L2044" name="L2044"></a>2044             <em class="brace">}</em>
<a id="L2045" name="L2045"></a>2045             <em class="comment">// Both names null, treat as equal.</em>
<a id="L2046" name="L2046"></a>2046             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2047" name="L2047"></a>2047         <em class="brace">}</em>
<a id="L2048" name="L2048"></a>2048 
<div class="comment">
          Joins the two elements carving out a hole for the
          given removed range.</div>
<a id="L2053" name="L2053"></a>2053         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/22372.html" title="Multiple referred from 37 places.">join</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> p, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> left, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> right, <strong class="reserved">int</strong> rmOffs0, <strong class="reserved">int</strong> rmOffs1) <em class="brace">{</em>
<a id="L2054" name="L2054"></a>2054             <strong class="reserved">if</strong> (left.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>() &amp;&amp; right.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L2055" name="L2055"></a>2055                 <strong class="reserved">return</strong> <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(p, left.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), left.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2056" name="L2056"></a>2056                                          right.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2057" name="L2057"></a>2057             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((!left.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) &amp;&amp; (!right.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>())) <em class="brace">{</em>
<a id="L2058" name="L2058"></a>2058                 <em class="comment">// join two branch elements.  This copies the children before</em>
<a id="L2059" name="L2059"></a>2059                 <em class="comment">// the removal range on the left element, and after the removal</em>
<a id="L2060" name="L2060"></a>2060                 <em class="comment">// range on the right element.  The two elements on the edge</em>
<a id="L2061" name="L2061"></a>2061                 <em class="comment">// are joined if possible and needed.</em>
<a id="L2062" name="L2062"></a>2062                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/35341.html" title="Multiple defined in 2 places.">to</a> = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(p, left.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2063" name="L2063"></a>2063                 <strong class="reserved">int</strong> ljIndex = left.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(rmOffs0);
<a id="L2064" name="L2064"></a>2064                 <strong class="reserved">int</strong> rjIndex = right.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(rmOffs1);
<a id="L2065" name="L2065"></a>2065                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> lj = left.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ljIndex);
<a id="L2066" name="L2066"></a>2066                 <strong class="reserved">if</strong> (lj.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &gt;= rmOffs0) <em class="brace">{</em>
<a id="L2067" name="L2067"></a>2067                     lj = <strong class="reserved">null</strong>;
<a id="L2068" name="L2068"></a>2068                 <em class="brace">}</em>
<a id="L2069" name="L2069"></a>2069                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> rj = right.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(rjIndex);
<a id="L2070" name="L2070"></a>2070                 <strong class="reserved">if</strong> (rj.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() == rmOffs1) <em class="brace">{</em>
<a id="L2071" name="L2071"></a>2071                     rj = <strong class="reserved">null</strong>;
<a id="L2072" name="L2072"></a>2072                 <em class="brace">}</em>
<a id="L2073" name="L2073"></a>2073                 <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;();
<a id="L2074" name="L2074"></a>2074 
<a id="L2075" name="L2075"></a>2075                 <em class="comment">// transfer the left</em>
<a id="L2076" name="L2076"></a>2076                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ljIndex; i++) <em class="brace">{</em>
<a id="L2077" name="L2077"></a>2077                     <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, left.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i)));
<a id="L2078" name="L2078"></a>2078                 <em class="brace">}</em>
<a id="L2079" name="L2079"></a>2079 
<a id="L2080" name="L2080"></a>2080                 <em class="comment">// transfer the join/middle</em>
<a id="L2081" name="L2081"></a>2081                 <strong class="reserved">if</strong> (<a href="../S/3328.html#L2019" title="Defined at 2019 in src/javax/swing/text/DefaultStyledDocument.java.">canJoin</a>(lj, rj)) <em class="brace">{</em>
<a id="L2082" name="L2082"></a>2082                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/26697.html" title="Multiple defined in 17 places.">join</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, lj, rj, rmOffs0, rmOffs1);
<a id="L2083" name="L2083"></a>2083                     <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e);
<a id="L2084" name="L2084"></a>2084                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2085" name="L2085"></a>2085                     <strong class="reserved">if</strong> (lj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2086" name="L2086"></a>2086                         <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/3328.html#L2139" title="Defined at 2139 in src/javax/swing/text/DefaultStyledDocument.java.">cloneAsNecessary</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, lj, rmOffs0, rmOffs1));
<a id="L2087" name="L2087"></a>2087                     <em class="brace">}</em>
<a id="L2088" name="L2088"></a>2088                     <strong class="reserved">if</strong> (rj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2089" name="L2089"></a>2089                         <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/3328.html#L2139" title="Defined at 2139 in src/javax/swing/text/DefaultStyledDocument.java.">cloneAsNecessary</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, rj, rmOffs0, rmOffs1));
<a id="L2090" name="L2090"></a>2090                     <em class="brace">}</em>
<a id="L2091" name="L2091"></a>2091                 <em class="brace">}</em>
<a id="L2092" name="L2092"></a>2092 
<a id="L2093" name="L2093"></a>2093                 <em class="comment">// transfer the right</em>
<a id="L2094" name="L2094"></a>2094                 <strong class="reserved">int</strong> n = right.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L2095" name="L2095"></a>2095                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = (rj == <strong class="reserved">null</strong>) ? rjIndex : rjIndex + 1; i &lt; n; i++) <em class="brace">{</em>
<a id="L2096" name="L2096"></a>2096                     <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, right.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i)));
<a id="L2097" name="L2097"></a>2097                 <em class="brace">}</em>
<a id="L2098" name="L2098"></a>2098 
<a id="L2099" name="L2099"></a>2099                 <em class="comment">// install the children</em>
<a id="L2100" name="L2100"></a>2100                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[<a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L2101" name="L2101"></a>2101                 <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/13501.html" title="Multiple defined in 23 places.">copyInto</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2102" name="L2102"></a>2102                 ((<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>)<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>).<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2103" name="L2103"></a>2103                 <strong class="reserved">return</strong> <a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>;
<a id="L2104" name="L2104"></a>2104             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2105" name="L2105"></a>2105                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>(
<a id="L2106" name="L2106"></a>2106                     "No support to join leaf element with non-leaf element");
<a id="L2107" name="L2107"></a>2107             <em class="brace">}</em>
<a id="L2108" name="L2108"></a>2108         <em class="brace">}</em>
<a id="L2109" name="L2109"></a>2109 
<div class="comment">
          Creates a copy of this element, with a different
          parent.
          @param parent the parent element
          @param clonee the element to be cloned
          @return the copy</div>
<a id="L2118" name="L2118"></a>2118         <strong class="reserved">public</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> clonee) <em class="brace">{</em>
<a id="L2119" name="L2119"></a>2119             <strong class="reserved">if</strong> (clonee.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L2120" name="L2120"></a>2120                 <strong class="reserved">return</strong> <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, clonee.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L2121" name="L2121"></a>2121                                          clonee.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2122" name="L2122"></a>2122                                          clonee.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2123" name="L2123"></a>2123             <em class="brace">}</em>
<a id="L2124" name="L2124"></a>2124             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, clonee.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2125" name="L2125"></a>2125             <strong class="reserved">int</strong> n = clonee.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L2126" name="L2126"></a>2126             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[n];
<a id="L2127" name="L2127"></a>2127             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L2128" name="L2128"></a>2128                 <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>[i] = <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>(e, clonee.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i));
<a id="L2129" name="L2129"></a>2129             <em class="brace">}</em>
<a id="L2130" name="L2130"></a>2130             ((<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>)e).<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>);
<a id="L2131" name="L2131"></a>2131             <strong class="reserved">return</strong> e;
<a id="L2132" name="L2132"></a>2132         <em class="brace">}</em>
<a id="L2133" name="L2133"></a>2133 
<div class="comment">
          Creates a copy of this element, with a different
          parent. Children of this element included in the
          removal range will be discarded.</div>
<a id="L2139" name="L2139"></a>2139         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/11559.html" title="Multiple referred from 3 places.">cloneAsNecessary</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> clonee, <strong class="reserved">int</strong> rmOffs0, <strong class="reserved">int</strong> rmOffs1) <em class="brace">{</em>
<a id="L2140" name="L2140"></a>2140             <strong class="reserved">if</strong> (clonee.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L2141" name="L2141"></a>2141                 <strong class="reserved">return</strong> <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, clonee.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L2142" name="L2142"></a>2142                                          clonee.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2143" name="L2143"></a>2143                                          clonee.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2144" name="L2144"></a>2144             <em class="brace">}</em>
<a id="L2145" name="L2145"></a>2145             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, clonee.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2146" name="L2146"></a>2146             <strong class="reserved">int</strong> n = clonee.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L2147" name="L2147"></a>2147             <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; childrenList = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;(n);
<a id="L2148" name="L2148"></a>2148             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L2149" name="L2149"></a>2149                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem = clonee.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i);
<a id="L2150" name="L2150"></a>2150                 <strong class="reserved">if</strong> (elem.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &lt; rmOffs0 || elem.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() &gt; rmOffs1) <em class="brace">{</em>
<a id="L2151" name="L2151"></a>2151                     childrenList.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/3328.html#L2139" title="Defined at 2139 in src/javax/swing/text/DefaultStyledDocument.java.">cloneAsNecessary</a>(e, elem, rmOffs0, rmOffs1));
<a id="L2152" name="L2152"></a>2152                 <em class="brace">}</em>
<a id="L2153" name="L2153"></a>2153             <em class="brace">}</em>
<a id="L2154" name="L2154"></a>2154             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[childrenList.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L2155" name="L2155"></a>2155             <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = childrenList.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(<a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>);
<a id="L2156" name="L2156"></a>2156             ((<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>)e).<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>);
<a id="L2157" name="L2157"></a>2157             <strong class="reserved">return</strong> e;
<a id="L2158" name="L2158"></a>2158         <em class="brace">}</em>
<a id="L2159" name="L2159"></a>2159 
<div class="comment">
          Determines if a fracture needs to be performed. A fracture
          can be thought of as moving the right part of a tree to a
          new location, where the right part is determined by what has
          been inserted. <code>depth</code> is used to indicate a
          JoinToFracture is needed to an element at a depth
          of <code>depth</code>. Where the root is 0, 1 is the children
          of the root...
          <p>This will invoke <code>fractureFrom</code> if it is determined
          a fracture needs to happen.</p></div>
<a id="L2171" name="L2171"></a>2171         <strong class="reserved">void</strong> <a href="../R/14782.html" title="Multiple referred from 2 places.">fracture</a>(<strong class="reserved">int</strong> <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>) <em class="brace">{</em>
<a id="L2172" name="L2172"></a>2172             <strong class="reserved">int</strong> cLength = insertPath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2173" name="L2173"></a>2173             <strong class="reserved">int</strong> lastIndex = -1;
<a id="L2174" name="L2174"></a>2174             <strong class="reserved">boolean</strong> needRecreate = recreateLeafs;
<a id="L2175" name="L2175"></a>2175             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> lastChange = insertPath[cLength - 1];
<a id="L2176" name="L2176"></a>2176             <em class="comment">// Use childAltered to determine when a child has been altered,</em>
<a id="L2177" name="L2177"></a>2177             <em class="comment">// that is the point of insertion is less than the element count.</em>
<a id="L2178" name="L2178"></a>2178             <strong class="reserved">boolean</strong> childAltered = ((lastChange.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1) &lt;
<a id="L2179" name="L2179"></a>2179                                     lastChange.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>());
<a id="L2180" name="L2180"></a>2180             <strong class="reserved">int</strong> deepestAlteredIndex = (needRecreate) ? cLength : -1;
<a id="L2181" name="L2181"></a>2181             <strong class="reserved">int</strong> lastAlteredIndex = cLength - 1;
<a id="L2182" name="L2182"></a>2182 
<a id="L2183" name="L2183"></a>2183             createdFracture = <strong class="reserved">true</strong>;
<a id="L2184" name="L2184"></a>2184             <em class="comment">// Determine where to start recreating from.</em>
<a id="L2185" name="L2185"></a>2185             <em class="comment">// Start at - 2, as first one is indicated by recreateLeafs and</em>
<a id="L2186" name="L2186"></a>2186             <em class="comment">// childAltered.</em>
<a id="L2187" name="L2187"></a>2187             <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = cLength - 2; counter &gt;= 0; counter--) <em class="brace">{</em>
<a id="L2188" name="L2188"></a>2188                 <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a> = insertPath[counter];
<a id="L2189" name="L2189"></a>2189                 <strong class="reserved">if</strong>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.added.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0 || counter == <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>) <em class="brace">{</em>
<a id="L2190" name="L2190"></a>2190                     lastIndex = counter;
<a id="L2191" name="L2191"></a>2191                     <strong class="reserved">if</strong>(!needRecreate &amp;&amp; childAltered) <em class="brace">{</em>
<a id="L2192" name="L2192"></a>2192                         needRecreate = <strong class="reserved">true</strong>;
<a id="L2193" name="L2193"></a>2193                         <strong class="reserved">if</strong>(deepestAlteredIndex == -1)
<a id="L2194" name="L2194"></a>2194                             deepestAlteredIndex = lastAlteredIndex + 1;
<a id="L2195" name="L2195"></a>2195                     <em class="brace">}</em>
<a id="L2196" name="L2196"></a>2196                 <em class="brace">}</em>
<a id="L2197" name="L2197"></a>2197                 <strong class="reserved">if</strong>(!childAltered &amp;&amp; <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt;
<a id="L2198" name="L2198"></a>2198                    <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>()) <em class="brace">{</em>
<a id="L2199" name="L2199"></a>2199                     childAltered = <strong class="reserved">true</strong>;
<a id="L2200" name="L2200"></a>2200                     lastAlteredIndex = counter;
<a id="L2201" name="L2201"></a>2201                 <em class="brace">}</em>
<a id="L2202" name="L2202"></a>2202             <em class="brace">}</em>
<a id="L2203" name="L2203"></a>2203             <strong class="reserved">if</strong>(needRecreate) <em class="brace">{</em>
<a id="L2204" name="L2204"></a>2204                 <em class="comment">// Recreate all children to right of parent starting</em>
<a id="L2205" name="L2205"></a>2205                 <em class="comment">// at lastIndex.</em>
<a id="L2206" name="L2206"></a>2206                 <strong class="reserved">if</strong>(lastIndex == -1)
<a id="L2207" name="L2207"></a>2207                     lastIndex = cLength - 1;
<a id="L2208" name="L2208"></a>2208                 <a href="../S/3328.html#L2221" title="Defined at 2221 in src/javax/swing/text/DefaultStyledDocument.java.">fractureFrom</a>(insertPath, lastIndex, deepestAlteredIndex);
<a id="L2209" name="L2209"></a>2209             <em class="brace">}</em>
<a id="L2210" name="L2210"></a>2210         <em class="brace">}</em>
<a id="L2211" name="L2211"></a>2211 
<div class="comment">
          Recreates the elements to the right of the insertion point.
          This starts at <code>startIndex</code> in <code>changed</code>,
          and calls duplicate to duplicate existing elements.
          This will also duplicate the elements along the insertion
          point, until a depth of <code>endFractureIndex</code> is
          reached, at which point only the elements to the right of
          the insertion point are duplicated.</div>
<a id="L2221" name="L2221"></a>2221         <strong class="reserved">void</strong> <a href="../S/3328.html#L2208" title="Referred from 2208 in src/javax/swing/text/DefaultStyledDocument.java.">fractureFrom</a>(<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>[] <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a>, <strong class="reserved">int</strong> startIndex,
<a id="L2222" name="L2222"></a>2222                           <strong class="reserved">int</strong> endFractureIndex) <em class="brace">{</em>
<a id="L2223" name="L2223"></a>2223             <em class="comment">// Recreate the element representing the inserted index.</em>
<a id="L2224" name="L2224"></a>2224             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a> = <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a>[startIndex];
<a id="L2225" name="L2225"></a>2225             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child;
<a id="L2226" name="L2226"></a>2226             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newChild;
<a id="L2227" name="L2227"></a>2227             <strong class="reserved">int</strong> changeLength = <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2228" name="L2228"></a>2228 
<a id="L2229" name="L2229"></a>2229             <strong class="reserved">if</strong>((startIndex + 1) == changeLength)
<a id="L2230" name="L2230"></a>2230                 child = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L2231" name="L2231"></a>2231             <strong class="reserved">else</strong>
<a id="L2232" name="L2232"></a>2232                 child = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> - 1);
<a id="L2233" name="L2233"></a>2233             <strong class="reserved">if</strong>(child.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L2234" name="L2234"></a>2234                 newChild = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2235" name="L2235"></a>2235                                child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(endOffset,
<a id="L2236" name="L2236"></a>2236                                child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>()), child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2237" name="L2237"></a>2237             <em class="brace">}</em>
<a id="L2238" name="L2238"></a>2238             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2239" name="L2239"></a>2239                 newChild = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2240" name="L2240"></a>2240                                                child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2241" name="L2241"></a>2241             <em class="brace">}</em>
<a id="L2242" name="L2242"></a>2242             fracturedParent = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L2243" name="L2243"></a>2243             fracturedChild = newChild;
<a id="L2244" name="L2244"></a>2244 
<a id="L2245" name="L2245"></a>2245             <em class="comment">// Recreate all the elements to the right of the</em>
<a id="L2246" name="L2246"></a>2246             <em class="comment">// insertion point.</em>
<a id="L2247" name="L2247"></a>2247             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = newChild;
<a id="L2248" name="L2248"></a>2248 
<a id="L2249" name="L2249"></a>2249             <strong class="reserved">while</strong>(++startIndex &lt; endFractureIndex) <em class="brace">{</em>
<a id="L2250" name="L2250"></a>2250                 <strong class="reserved">boolean</strong> <a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a> = ((startIndex + 1) == endFractureIndex);
<a id="L2251" name="L2251"></a>2251                 <strong class="reserved">boolean</strong> isEndLeaf = ((startIndex + 1) == changeLength);
<a id="L2252" name="L2252"></a>2252 
<a id="L2253" name="L2253"></a>2253                 <em class="comment">// Create the newChild, a duplicate of the elment at</em>
<a id="L2254" name="L2254"></a>2254                 <em class="comment">// index. This isn't done if isEnd and offsetLastIndex are true</em>
<a id="L2255" name="L2255"></a>2255                 <em class="comment">// indicating a join previous was done.</em>
<a id="L2256" name="L2256"></a>2256                 <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a> = <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a>[startIndex];
<a id="L2257" name="L2257"></a>2257 
<a id="L2258" name="L2258"></a>2258                 <em class="comment">// Determine the child to duplicate, won't have to duplicate</em>
<a id="L2259" name="L2259"></a>2259                 <em class="comment">// if at end of fracture, or offseting index.</em>
<a id="L2260" name="L2260"></a>2260                 <strong class="reserved">if</strong>(<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>) <em class="brace">{</em>
<a id="L2261" name="L2261"></a>2261                     <strong class="reserved">if</strong>(offsetLastIndex || !isEndLeaf)
<a id="L2262" name="L2262"></a>2262                         child = <strong class="reserved">null</strong>;
<a id="L2263" name="L2263"></a>2263                     <strong class="reserved">else</strong>
<a id="L2264" name="L2264"></a>2264                         child = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L2265" name="L2265"></a>2265                 <em class="brace">}</em>
<a id="L2266" name="L2266"></a>2266                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2267" name="L2267"></a>2267                     child = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> - 1);
<a id="L2268" name="L2268"></a>2268                 <em class="brace">}</em>
<a id="L2269" name="L2269"></a>2269                 <em class="comment">// Duplicate it.</em>
<a id="L2270" name="L2270"></a>2270                 <strong class="reserved">if</strong>(child != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2271" name="L2271"></a>2271                     <strong class="reserved">if</strong>(child.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L2272" name="L2272"></a>2272                         newChild = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2273" name="L2273"></a>2273                                child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(endOffset,
<a id="L2274" name="L2274"></a>2274                                child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>()), child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2275" name="L2275"></a>2275                     <em class="brace">}</em>
<a id="L2276" name="L2276"></a>2276                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2277" name="L2277"></a>2277                         newChild = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2278" name="L2278"></a>2278                                                    child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2279" name="L2279"></a>2279                     <em class="brace">}</em>
<a id="L2280" name="L2280"></a>2280                 <em class="brace">}</em>
<a id="L2281" name="L2281"></a>2281                 <strong class="reserved">else</strong>
<a id="L2282" name="L2282"></a>2282                     newChild = <strong class="reserved">null</strong>;
<a id="L2283" name="L2283"></a>2283 
<a id="L2284" name="L2284"></a>2284                 <em class="comment">// Recreate the remaining children (there may be none).</em>
<a id="L2285" name="L2285"></a>2285                 <strong class="reserved">int</strong> kidsToMove = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() -
<a id="L2286" name="L2286"></a>2286                                  <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2287" name="L2287"></a>2287                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] kids;
<a id="L2288" name="L2288"></a>2288                 <strong class="reserved">int</strong> moveStartIndex;
<a id="L2289" name="L2289"></a>2289                 <strong class="reserved">int</strong> kidStartIndex = 1;
<a id="L2290" name="L2290"></a>2290 
<a id="L2291" name="L2291"></a>2291                 <strong class="reserved">if</strong>(newChild == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2292" name="L2292"></a>2292                     <em class="comment">// Last part of fracture.</em>
<a id="L2293" name="L2293"></a>2293                     <strong class="reserved">if</strong>(isEndLeaf) <em class="brace">{</em>
<a id="L2294" name="L2294"></a>2294                         kidsToMove--;
<a id="L2295" name="L2295"></a>2295                         moveStartIndex = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1;
<a id="L2296" name="L2296"></a>2296                     <em class="brace">}</em>
<a id="L2297" name="L2297"></a>2297                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2298" name="L2298"></a>2298                         moveStartIndex = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2299" name="L2299"></a>2299                     <em class="brace">}</em>
<a id="L2300" name="L2300"></a>2300                     kidStartIndex = 0;
<a id="L2301" name="L2301"></a>2301                     kids = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[kidsToMove];
<a id="L2302" name="L2302"></a>2302                 <em class="brace">}</em>
<a id="L2303" name="L2303"></a>2303                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2304" name="L2304"></a>2304                     <strong class="reserved">if</strong>(!<a href="../D/25500.html" title="Multiple defined in 5 places.">isEnd</a>) <em class="brace">{</em>
<a id="L2305" name="L2305"></a>2305                         <em class="comment">// Branch.</em>
<a id="L2306" name="L2306"></a>2306                         kidsToMove++;
<a id="L2307" name="L2307"></a>2307                         moveStartIndex = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2308" name="L2308"></a>2308                     <em class="brace">}</em>
<a id="L2309" name="L2309"></a>2309                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2310" name="L2310"></a>2310                         <em class="comment">// Last leaf, need to recreate part of it.</em>
<a id="L2311" name="L2311"></a>2311                         moveStartIndex = <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1;
<a id="L2312" name="L2312"></a>2312                     <em class="brace">}</em>
<a id="L2313" name="L2313"></a>2313                     kids = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[kidsToMove];
<a id="L2314" name="L2314"></a>2314                     kids[0] = newChild;
<a id="L2315" name="L2315"></a>2315                 <em class="brace">}</em>
<a id="L2316" name="L2316"></a>2316 
<a id="L2317" name="L2317"></a>2317                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = kidStartIndex; counter &lt; kidsToMove;
<a id="L2318" name="L2318"></a>2318                     counter++) <em class="brace">{</em>
<a id="L2319" name="L2319"></a>2319                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> toMove =<a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(moveStartIndex++);
<a id="L2320" name="L2320"></a>2320                     kids[counter] = <a href="../S/3328.html#L2334" title="Defined at 2334 in src/javax/swing/text/DefaultStyledDocument.java.">recreateFracturedElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, toMove);
<a id="L2321" name="L2321"></a>2321                     <a href="../S/3328.html#L1520" title="Defined at 1520 in src/javax/swing/text/DefaultStyledDocument.java.">change</a>.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(toMove);
<a id="L2322" name="L2322"></a>2322                 <em class="brace">}</em>
<a id="L2323" name="L2323"></a>2323                 ((<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>)<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>).<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, kids);
<a id="L2324" name="L2324"></a>2324                 <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = newChild;
<a id="L2325" name="L2325"></a>2325             <em class="brace">}</em>
<a id="L2326" name="L2326"></a>2326         <em class="brace">}</em>
<a id="L2327" name="L2327"></a>2327 
<div class="comment">
          Recreates <code>toDuplicate</code>. This is called when an
          element needs to be created as the result of an insertion. This
          will recurse and create all the children. This is similar to
          <code>clone</code>, but deteremines the offsets differently.</div>
<a id="L2334" name="L2334"></a>2334         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/25667.html" title="Multiple referred from 2 places.">recreateFracturedElement</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> toDuplicate) <em class="brace">{</em>
<a id="L2335" name="L2335"></a>2335             <strong class="reserved">if</strong>(toDuplicate.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L2336" name="L2336"></a>2336                 <strong class="reserved">return</strong> <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, toDuplicate.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L2337" name="L2337"></a>2337                                          <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(toDuplicate.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2338" name="L2338"></a>2338                                                   endOffset),
<a id="L2339" name="L2339"></a>2339                                          toDuplicate.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2340" name="L2340"></a>2340             <em class="brace">}</em>
<a id="L2341" name="L2341"></a>2341             <em class="comment">// Not a leaf</em>
<a id="L2342" name="L2342"></a>2342             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newParent = <a href="../D/13643.html" title="Multiple defined in 2 places.">createBranchElement</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, toDuplicate.
<a id="L2343" name="L2343"></a>2343                                                     <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>());
<a id="L2344" name="L2344"></a>2344             <strong class="reserved">int</strong> childCount = toDuplicate.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L2345" name="L2345"></a>2345             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] newKids = <strong class="reserved">new</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[childCount];
<a id="L2346" name="L2346"></a>2346             <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = 0; counter &lt; childCount; counter++) <em class="brace">{</em>
<a id="L2347" name="L2347"></a>2347                 newKids[counter] = <a href="../S/3328.html#L2334" title="Defined at 2334 in src/javax/swing/text/DefaultStyledDocument.java.">recreateFracturedElement</a>(newParent,
<a id="L2348" name="L2348"></a>2348                                              toDuplicate.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(counter));
<a id="L2349" name="L2349"></a>2349             <em class="brace">}</em>
<a id="L2350" name="L2350"></a>2350             ((<a href="../S/3268.html#L2233" title="Defined at 2233 in src/javax/swing/text/AbstractDocument.java.">BranchElement</a>)newParent).<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, newKids);
<a id="L2351" name="L2351"></a>2351             <strong class="reserved">return</strong> newParent;
<a id="L2352" name="L2352"></a>2352         <em class="brace">}</em>
<a id="L2353" name="L2353"></a>2353 
<div class="comment">
          Splits the bottommost leaf in <code>path</code>.
          This is called from insert when the first element is NOT content.</div>
<a id="L2358" name="L2358"></a>2358         <strong class="reserved">void</strong> <a href="../S/3328.html#L1559" title="Referred from 1559 in src/javax/swing/text/DefaultStyledDocument.java.">fractureDeepestLeaf</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] specs) <em class="brace">{</em>
<a id="L2359" name="L2359"></a>2359             <em class="comment">// Split the bottommost leaf. It will be recreated elsewhere.</em>
<a id="L2360" name="L2360"></a>2360             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L2361" name="L2361"></a>2361             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L2362" name="L2362"></a>2362             <em class="comment">// Inserts at offset 0 do not need to recreate child (it would</em>
<a id="L2363" name="L2363"></a>2363             <em class="comment">// have a length of 0!).</em>
<a id="L2364" name="L2364"></a>2364             <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> != 0) <em class="brace">{</em>
<a id="L2365" name="L2365"></a>2365                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newChild = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2366" name="L2366"></a>2366                                                  child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L2367" name="L2367"></a>2367                                                  child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2368" name="L2368"></a>2368                                                  <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L2369" name="L2369"></a>2369 
<a id="L2370" name="L2370"></a>2370                 ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(newChild);
<a id="L2371" name="L2371"></a>2371             <em class="brace">}</em>
<a id="L2372" name="L2372"></a>2372             ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L2373" name="L2373"></a>2373             <strong class="reserved">if</strong>(child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() != endOffset)
<a id="L2374" name="L2374"></a>2374                 recreateLeafs = <strong class="reserved">true</strong>;
<a id="L2375" name="L2375"></a>2375             <strong class="reserved">else</strong>
<a id="L2376" name="L2376"></a>2376                 offsetLastIndex = <strong class="reserved">true</strong>;
<a id="L2377" name="L2377"></a>2377         <em class="brace">}</em>
<a id="L2378" name="L2378"></a>2378 
<div class="comment">
          Inserts the first content. This needs to be separate to handle
          joining.</div>
<a id="L2383" name="L2383"></a>2383         <strong class="reserved">void</strong> <a href="../S/3328.html#L1554" title="Referred from 1554 in src/javax/swing/text/DefaultStyledDocument.java.">insertFirstContent</a>(<a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>[] specs) <em class="brace">{</em>
<a id="L2384" name="L2384"></a>2384             <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a> firstSpec = specs[0];
<a id="L2385" name="L2385"></a>2385             <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a> ec = path.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L2386" name="L2386"></a>2386             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L2387" name="L2387"></a>2387             <strong class="reserved">int</strong> firstEndOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + firstSpec.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L2388" name="L2388"></a>2388             <strong class="reserved">boolean</strong> isOnlyContent = (specs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 1);
<a id="L2389" name="L2389"></a>2389 
<a id="L2390" name="L2390"></a>2390             <strong class="reserved">switch</strong>(firstSpec.<a href="../D/18495.html" title="Multiple defined in 5 places.">getDirection</a>()) <em class="brace">{</em>
<a id="L2391" name="L2391"></a>2391             <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinPreviousDirection:
<a id="L2392" name="L2392"></a>2392                 <strong class="reserved">if</strong>(child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() != firstEndOffset &amp;&amp;
<a id="L2393" name="L2393"></a>2393                     !isOnlyContent) <em class="brace">{</em>
<a id="L2394" name="L2394"></a>2394                     <em class="comment">// Create the left split part containing new content.</em>
<a id="L2395" name="L2395"></a>2395                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newE = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2396" name="L2396"></a>2396                             child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2397" name="L2397"></a>2397                             firstEndOffset);
<a id="L2398" name="L2398"></a>2398                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(newE);
<a id="L2399" name="L2399"></a>2399                     ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L2400" name="L2400"></a>2400                     <em class="comment">// Remainder will be created later.</em>
<a id="L2401" name="L2401"></a>2401                     <strong class="reserved">if</strong>(child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() != endOffset)
<a id="L2402" name="L2402"></a>2402                         recreateLeafs = <strong class="reserved">true</strong>;
<a id="L2403" name="L2403"></a>2403                     <strong class="reserved">else</strong>
<a id="L2404" name="L2404"></a>2404                         offsetLastIndex = <strong class="reserved">true</strong>;
<a id="L2405" name="L2405"></a>2405                 <em class="brace">}</em>
<a id="L2406" name="L2406"></a>2406                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2407" name="L2407"></a>2407                     offsetLastIndex = <strong class="reserved">true</strong>;
<a id="L2408" name="L2408"></a>2408                     offsetLastIndexOnReplace = <strong class="reserved">true</strong>;
<a id="L2409" name="L2409"></a>2409                 <em class="brace">}</em>
<a id="L2410" name="L2410"></a>2410                 <em class="comment">// else Inserted at end, and is total length.</em>
<a id="L2411" name="L2411"></a>2411                 <em class="comment">// Update index incase something added/removed.</em>
<a id="L2412" name="L2412"></a>2412                 <strong class="reserved">break</strong>;
<a id="L2413" name="L2413"></a>2413             <strong class="reserved">case</strong> <a href="../S/3328.html#L1162" title="Defined at 1162 in src/javax/swing/text/DefaultStyledDocument.java.">ElementSpec</a>.JoinNextDirection:
<a id="L2414" name="L2414"></a>2414                 <strong class="reserved">if</strong>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> != 0) <em class="brace">{</em>
<a id="L2415" name="L2415"></a>2415                     <em class="comment">// Recreate the first element, its offset will have</em>
<a id="L2416" name="L2416"></a>2416                     <em class="comment">// changed.</em>
<a id="L2417" name="L2417"></a>2417                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newE = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2418" name="L2418"></a>2418                             child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2419" name="L2419"></a>2419                             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L2420" name="L2420"></a>2420                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(newE);
<a id="L2421" name="L2421"></a>2421                     <em class="comment">// Recreate the second, merge part. We do no checking</em>
<a id="L2422" name="L2422"></a>2422                     <em class="comment">// to see if JoinNextDirection is valid here!</em>
<a id="L2423" name="L2423"></a>2423                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> nextChild = ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(ec.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1);
<a id="L2424" name="L2424"></a>2424                     <strong class="reserved">if</strong>(isOnlyContent)
<a id="L2425" name="L2425"></a>2425                         newE = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, nextChild.
<a id="L2426" name="L2426"></a>2426                             <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, nextChild.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L2427" name="L2427"></a>2427                     <strong class="reserved">else</strong>
<a id="L2428" name="L2428"></a>2428                         newE = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, nextChild.
<a id="L2429" name="L2429"></a>2429                             <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, firstEndOffset);
<a id="L2430" name="L2430"></a>2430                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(newE);
<a id="L2431" name="L2431"></a>2431                     ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L2432" name="L2432"></a>2432                     ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(nextChild);
<a id="L2433" name="L2433"></a>2433                 <em class="brace">}</em>
<a id="L2434" name="L2434"></a>2434                 <em class="comment">// else nothin to do.</em>
<a id="L2435" name="L2435"></a>2435                 <em class="comment">// PENDING: if !isOnlyContent could raise here!</em>
<a id="L2436" name="L2436"></a>2436                 <strong class="reserved">break</strong>;
<a id="L2437" name="L2437"></a>2437             <strong class="reserved">default</strong>:
<a id="L2438" name="L2438"></a>2438                 <em class="comment">// Inserted into middle, need to recreate split left</em>
<a id="L2439" name="L2439"></a>2439                 <em class="comment">// new content, and split right.</em>
<a id="L2440" name="L2440"></a>2440                 <strong class="reserved">if</strong>(child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() != <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L2441" name="L2441"></a>2441                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newE = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2442" name="L2442"></a>2442                             child.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(), child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L2443" name="L2443"></a>2443                             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L2444" name="L2444"></a>2444                     ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(newE);
<a id="L2445" name="L2445"></a>2445                 <em class="brace">}</em>
<a id="L2446" name="L2446"></a>2446                 ec.removed.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L2447" name="L2447"></a>2447                 <em class="comment">// new content</em>
<a id="L2448" name="L2448"></a>2448                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> newE = <a href="../D/14006.html" title="Multiple defined in 2 places.">createLeafElement</a>(ec.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>,
<a id="L2449" name="L2449"></a>2449                                                  firstSpec.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>(),
<a id="L2450" name="L2450"></a>2450                                                  <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, firstEndOffset);
<a id="L2451" name="L2451"></a>2451                 ec.added.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(newE);
<a id="L2452" name="L2452"></a>2452                 <strong class="reserved">if</strong>(child.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() != endOffset) <em class="brace">{</em>
<a id="L2453" name="L2453"></a>2453                     <em class="comment">// Signals need to recreate right split later.</em>
<a id="L2454" name="L2454"></a>2454                     recreateLeafs = <strong class="reserved">true</strong>;
<a id="L2455" name="L2455"></a>2455                 <em class="brace">}</em>
<a id="L2456" name="L2456"></a>2456                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2457" name="L2457"></a>2457                     offsetLastIndex = <strong class="reserved">true</strong>;
<a id="L2458" name="L2458"></a>2458                 <em class="brace">}</em>
<a id="L2459" name="L2459"></a>2459                 <strong class="reserved">break</strong>;
<a id="L2460" name="L2460"></a>2460             <em class="brace">}</em>
<a id="L2461" name="L2461"></a>2461         <em class="brace">}</em>
<a id="L2462" name="L2462"></a>2462 
<a id="L2463" name="L2463"></a>2463         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L2464" name="L2464"></a>2464         <strong class="reserved">transient</strong> <strong class="reserved">int</strong> pos;          <em class="comment">// current position</em>
<a id="L2465" name="L2465"></a>2465         <strong class="reserved">transient</strong> <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L2466" name="L2466"></a>2466         <strong class="reserved">transient</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2467" name="L2467"></a>2467         <strong class="reserved">transient</strong> <strong class="reserved">int</strong> endOffset;
<a id="L2468" name="L2468"></a>2468         <strong class="reserved">transient</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>&gt; <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>;
<a id="L2469" name="L2469"></a>2469         <strong class="reserved">transient</strong> <a href="../S/1186.html#L49" title="Defined at 49 in src/java/util/Stack.java.">Stack</a>&lt;<a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>&gt; path;
<a id="L2470" name="L2470"></a>2470         <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> <a href="../S/4999.html#L748" title="Defined at 748 in src/com/sun/org/apache/xpath/internal/compiler/XPathParser.java.">insertOp</a>;
<a id="L2471" name="L2471"></a>2471 
<a id="L2472" name="L2472"></a>2472         <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> recreateLeafs; <em class="comment">// For insert.</em>
<a id="L2473" name="L2473"></a>2473 
<div class="comment">
         /** For insert, path to inserted elements. */</div>
<a id="L2475" name="L2475"></a>2475         <strong class="reserved">transient</strong> <a href="../S/3328.html#L2493" title="Defined at 2493 in src/javax/swing/text/DefaultStyledDocument.java.">ElemChanges</a>[] insertPath;
<div class="comment">
         /** Only for insert, set to true when the fracture has been created. */</div>
<a id="L2477" name="L2477"></a>2477         <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> createdFracture;
<div class="comment">
         /** Parent that contains the fractured child. */</div>
<a id="L2479" name="L2479"></a>2479         <strong class="reserved">transient</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> fracturedParent;
<div class="comment">
         /** Fractured child. */</div>
<a id="L2481" name="L2481"></a>2481         <strong class="reserved">transient</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> fracturedChild;
<div class="comment">
 Used to indicate when fracturing that the last leaf should be
         * skipped. </div>
<a id="L2484" name="L2484"></a>2484         <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> offsetLastIndex;
<div class="comment">
 Used to indicate that the parent of the deepest leaf should
          offset the index by 1 when adding/removing elements in an
         * insert. </div>
<a id="L2488" name="L2488"></a>2488         <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> offsetLastIndexOnReplace;
<a id="L2489" name="L2489"></a>2489 
<div class="comment">
          Internal record used to hold element change specifications</div>
<a id="L2493" name="L2493"></a>2493         <strong class="reserved">class</strong> <a href="../R/2572.html" title="Multiple referred from 23 places.">ElemChanges</a> <em class="brace">{</em>
<a id="L2494" name="L2494"></a>2494 
<a id="L2495" name="L2495"></a>2495             ElemChanges(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">boolean</strong> isFracture) <em class="brace">{</em>
<a id="L2496" name="L2496"></a>2496                 <strong class="reserved">this</strong>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L2497" name="L2497"></a>2497                 <strong class="reserved">this</strong>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2498" name="L2498"></a>2498                 <strong class="reserved">this</strong>.isFracture = isFracture;
<a id="L2499" name="L2499"></a>2499                 added = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;();
<a id="L2500" name="L2500"></a>2500                 removed = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;();
<a id="L2501" name="L2501"></a>2501             <em class="brace">}</em>
<a id="L2502" name="L2502"></a>2502 
<a id="L2503" name="L2503"></a>2503             <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L2504" name="L2504"></a>2504                 <strong class="reserved">return</strong> "added: " + added + "\nremoved: " + removed + "\n";
<a id="L2505" name="L2505"></a>2505             <em class="brace">}</em>
<a id="L2506" name="L2506"></a>2506 
<a id="L2507" name="L2507"></a>2507             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L2508" name="L2508"></a>2508             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2509" name="L2509"></a>2509             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; added;
<a id="L2510" name="L2510"></a>2510             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; removed;
<a id="L2511" name="L2511"></a>2511             <strong class="reserved">boolean</strong> isFracture;
<a id="L2512" name="L2512"></a>2512         <em class="brace">}</em>
<a id="L2513" name="L2513"></a>2513 
<a id="L2514" name="L2514"></a>2514     <em class="brace">}</em>
<a id="L2515" name="L2515"></a>2515 
<div class="comment">
      An UndoableEdit used to remember AttributeSet changes to an
      Element.</div>
<a id="L2520" name="L2520"></a>2520     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/540.html" title="Multiple referred from 5 places.">AttributeUndoableEdit</a> <strong class="reserved">extends</strong> <a href="../S/3141.html#L38" title="Defined at 38 in src/javax/swing/undo/AbstractUndoableEdit.java.">AbstractUndoableEdit</a> <em class="brace">{</em>
<a id="L2521" name="L2521"></a>2521         <strong class="reserved">public</strong> AttributeUndoableEdit(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> newAttributes,
<a id="L2522" name="L2522"></a>2522                               <strong class="reserved">boolean</strong> isReplacing) <em class="brace">{</em>
<a id="L2523" name="L2523"></a>2523             <strong class="reserved">super</strong>();
<a id="L2524" name="L2524"></a>2524             <strong class="reserved">this</strong>.<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<a id="L2525" name="L2525"></a>2525             <strong class="reserved">this</strong>.newAttributes = newAttributes;
<a id="L2526" name="L2526"></a>2526             <strong class="reserved">this</strong>.isReplacing = isReplacing;
<a id="L2527" name="L2527"></a>2527             <em class="comment">// If not replacing, it may be more efficient to only copy the</em>
<a id="L2528" name="L2528"></a>2528             <em class="comment">// changed values...</em>
<a id="L2529" name="L2529"></a>2529             <a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a> = <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>().<a href="../D/13483.html" title="Multiple defined in 9 places.">copyAttributes</a>();
<a id="L2530" name="L2530"></a>2530         <em class="brace">}</em>
<a id="L2531" name="L2531"></a>2531 
<div class="comment">
          Redoes a change.
          @exception CannotRedoException if the change cannot be redone</div>
<a id="L2537" name="L2537"></a>2537         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25693.html" title="Multiple referred from 14 places.">redo</a>() <strong class="reserved">throws</strong> <a href="../S/3138.html#L41" title="Defined at 41 in src/javax/swing/undo/CannotRedoException.java.">CannotRedoException</a> <em class="brace">{</em>
<a id="L2538" name="L2538"></a>2538             <strong class="reserved">super</strong>.<a href="../D/30435.html" title="Multiple defined in 13 places.">redo</a>();
<a id="L2539" name="L2539"></a>2539             <a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a> as = (<a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>
<a id="L2540" name="L2540"></a>2540                                      .<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L2541" name="L2541"></a>2541             <strong class="reserved">if</strong>(isReplacing)
<a id="L2542" name="L2542"></a>2542                 as.<a href="../D/30716.html" title="Multiple defined in 21 places.">removeAttributes</a>(as);
<a id="L2543" name="L2543"></a>2543             as.<a href="../D/10670.html" title="Multiple defined in 16 places.">addAttributes</a>(newAttributes);
<a id="L2544" name="L2544"></a>2544         <em class="brace">}</em>
<a id="L2545" name="L2545"></a>2545 
<div class="comment">
          Undoes a change.
          @exception CannotUndoException if the change cannot be undone</div>
<a id="L2551" name="L2551"></a>2551         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29628.html" title="Multiple referred from 38 places.">undo</a>() <strong class="reserved">throws</strong> <a href="../S/3140.html#L42" title="Defined at 42 in src/javax/swing/undo/CannotUndoException.java.">CannotUndoException</a> <em class="brace">{</em>
<a id="L2552" name="L2552"></a>2552             <strong class="reserved">super</strong>.<a href="../D/35822.html" title="Multiple defined in 13 places.">undo</a>();
<a id="L2553" name="L2553"></a>2553             <a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a> as = (<a href="../S/3240.html#L37" title="Defined at 37 in src/javax/swing/text/MutableAttributeSet.java.">MutableAttributeSet</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L2554" name="L2554"></a>2554             as.<a href="../D/30716.html" title="Multiple defined in 21 places.">removeAttributes</a>(as);
<a id="L2555" name="L2555"></a>2555             as.<a href="../D/10670.html" title="Multiple defined in 16 places.">addAttributes</a>(<a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>);
<a id="L2556" name="L2556"></a>2556         <em class="brace">}</em>
<a id="L2557" name="L2557"></a>2557 
<a id="L2558" name="L2558"></a>2558         <em class="comment">// AttributeSet containing additional entries, must be non-mutable!</em>
<a id="L2559" name="L2559"></a>2559         <strong class="reserved">protected</strong> <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> newAttributes;
<a id="L2560" name="L2560"></a>2560         <em class="comment">// Copy of the AttributeSet the Element contained.</em>
<a id="L2561" name="L2561"></a>2561         <strong class="reserved">protected</strong> <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>;
<a id="L2562" name="L2562"></a>2562         <em class="comment">// true if all the attributes in the element were removed first.</em>
<a id="L2563" name="L2563"></a>2563         <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> isReplacing;
<a id="L2564" name="L2564"></a>2564         <em class="comment">// Efected Element.</em>
<a id="L2565" name="L2565"></a>2565         <strong class="reserved">protected</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<a id="L2566" name="L2566"></a>2566     <em class="brace">}</em>
<a id="L2567" name="L2567"></a>2567 
<div class="comment">
      UndoableEdit for changing the resolve parent of an Element.</div>
<a id="L2571" name="L2571"></a>2571     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/3328.html#L440" title="Referred from 440 in src/javax/swing/text/DefaultStyledDocument.java.">StyleChangeUndoableEdit</a> <strong class="reserved">extends</strong> <a href="../S/3141.html#L38" title="Defined at 38 in src/javax/swing/undo/AbstractUndoableEdit.java.">AbstractUndoableEdit</a> <em class="brace">{</em>
<a id="L2572" name="L2572"></a>2572         <strong class="reserved">public</strong> StyleChangeUndoableEdit(<a href="../S/3268.html#L1764" title="Defined at 1764 in src/javax/swing/text/AbstractDocument.java.">AbstractElement</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>,
<a id="L2573" name="L2573"></a>2573                                        <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> newStyle) <em class="brace">{</em>
<a id="L2574" name="L2574"></a>2574             <strong class="reserved">super</strong>();
<a id="L2575" name="L2575"></a>2575             <strong class="reserved">this</strong>.<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<a id="L2576" name="L2576"></a>2576             <strong class="reserved">this</strong>.newStyle = newStyle;
<a id="L2577" name="L2577"></a>2577             oldStyle = <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/22034.html" title="Multiple defined in 13 places.">getResolveParent</a>();
<a id="L2578" name="L2578"></a>2578         <em class="brace">}</em>
<a id="L2579" name="L2579"></a>2579 
<div class="comment">
          Redoes a change.
          @exception CannotRedoException if the change cannot be redone</div>
<a id="L2585" name="L2585"></a>2585         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25693.html" title="Multiple referred from 14 places.">redo</a>() <strong class="reserved">throws</strong> <a href="../S/3138.html#L41" title="Defined at 41 in src/javax/swing/undo/CannotRedoException.java.">CannotRedoException</a> <em class="brace">{</em>
<a id="L2586" name="L2586"></a>2586             <strong class="reserved">super</strong>.<a href="../D/30435.html" title="Multiple defined in 13 places.">redo</a>();
<a id="L2587" name="L2587"></a>2587             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/33718.html" title="Multiple defined in 8 places.">setResolveParent</a>(newStyle);
<a id="L2588" name="L2588"></a>2588         <em class="brace">}</em>
<a id="L2589" name="L2589"></a>2589 
<div class="comment">
          Undoes a change.
          @exception CannotUndoException if the change cannot be undone</div>
<a id="L2595" name="L2595"></a>2595         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29628.html" title="Multiple referred from 38 places.">undo</a>() <strong class="reserved">throws</strong> <a href="../S/3140.html#L42" title="Defined at 42 in src/javax/swing/undo/CannotUndoException.java.">CannotUndoException</a> <em class="brace">{</em>
<a id="L2596" name="L2596"></a>2596             <strong class="reserved">super</strong>.<a href="../D/35822.html" title="Multiple defined in 13 places.">undo</a>();
<a id="L2597" name="L2597"></a>2597             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/33718.html" title="Multiple defined in 8 places.">setResolveParent</a>(oldStyle);
<a id="L2598" name="L2598"></a>2598         <em class="brace">}</em>
<a id="L2599" name="L2599"></a>2599 
<div class="comment">
         /** Element to change resolve parent of. */</div>
<a id="L2601" name="L2601"></a>2601         <strong class="reserved">protected</strong> <a href="../S/3268.html#L1764" title="Defined at 1764 in src/javax/swing/text/AbstractDocument.java.">AbstractElement</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<div class="comment">
         /** New style. */</div>
<a id="L2603" name="L2603"></a>2603         <strong class="reserved">protected</strong> <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a> newStyle;
<div class="comment">
         /** Old style, before setting newStyle. */</div>
<a id="L2605" name="L2605"></a>2605         <strong class="reserved">protected</strong> <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> oldStyle;
<a id="L2606" name="L2606"></a>2606     <em class="brace">}</em>
<a id="L2607" name="L2607"></a>2607 
<div class="comment">
      Base class for style change handlers with support for stale objects detection.</div>
<a id="L2611" name="L2611"></a>2611     <strong class="reserved">abstract</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/72.html" title="Multiple referred from 5 places.">AbstractChangeHandler</a> <strong class="reserved">implements</strong> <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> <em class="brace">{</em>
<a id="L2612" name="L2612"></a>2612 
<div class="comment">
         /* This has an implicit reference to the handler object.  */</div>
<a id="L2614" name="L2614"></a>2614         <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/2333.html" title="Multiple referred from 4 places.">DocReference</a> <strong class="reserved">extends</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt; <em class="brace">{</em>
<a id="L2615" name="L2615"></a>2615 
<a id="L2616" name="L2616"></a>2616             DocReference(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d, <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt; q) <em class="brace">{</em>
<a id="L2617" name="L2617"></a>2617                 <strong class="reserved">super</strong>(d, q);
<a id="L2618" name="L2618"></a>2618             <em class="brace">}</em>
<a id="L2619" name="L2619"></a>2619 
<div class="comment">
              Return a reference to the style change handler object.</div>
<a id="L2623" name="L2623"></a>2623             <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> <a href="../R/17387.html" title="Multiple referred from 19 places.">getListener</a>() <em class="brace">{</em>
<a id="L2624" name="L2624"></a>2624                 <strong class="reserved">return</strong> <a href="../S/3328.html#L2611" title="Defined at 2611 in src/javax/swing/text/DefaultStyledDocument.java.">AbstractChangeHandler</a>.<strong class="reserved">this</strong>;
<a id="L2625" name="L2625"></a>2625             <em class="brace">}</em>
<a id="L2626" name="L2626"></a>2626         <em class="brace">}</em>
<a id="L2627" name="L2627"></a>2627 
<div class="comment">
         /** Class-specific reference queues.  */</div>
<a id="L2629" name="L2629"></a>2629         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>, <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt;&gt; queueMap
<a id="L2630" name="L2630"></a>2630                 = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>, <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt;&gt;();
<a id="L2631" name="L2631"></a>2631 
<div class="comment">
         /** A weak reference to the document object.  */</div>
<a id="L2633" name="L2633"></a>2633         <strong class="reserved">private</strong> <a href="../S/3328.html#L2614" title="Defined at 2614 in src/javax/swing/text/DefaultStyledDocument.java.">DocReference</a> doc;
<a id="L2634" name="L2634"></a>2634 
<a id="L2635" name="L2635"></a>2635         AbstractChangeHandler(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d) <em class="brace">{</em>
<a id="L2636" name="L2636"></a>2636             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L2637" name="L2637"></a>2637             <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt; q;
<a id="L2638" name="L2638"></a>2638             <strong class="reserved">synchronized</strong> (queueMap) <em class="brace">{</em>
<a id="L2639" name="L2639"></a>2639                 q = queueMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2640" name="L2640"></a>2640                 <strong class="reserved">if</strong> (q == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2641" name="L2641"></a>2641                     q = <strong class="reserved">new</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt;();
<a id="L2642" name="L2642"></a>2642                     queueMap.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, q);
<a id="L2643" name="L2643"></a>2643                 <em class="brace">}</em>
<a id="L2644" name="L2644"></a>2644             <em class="brace">}</em>
<a id="L2645" name="L2645"></a>2645             doc = <strong class="reserved">new</strong> <a href="../S/3328.html#L2614" title="Defined at 2614 in src/javax/swing/text/DefaultStyledDocument.java.">DocReference</a>(d, q);
<a id="L2646" name="L2646"></a>2646         <em class="brace">}</em>
<a id="L2647" name="L2647"></a>2647 
<div class="comment">
          Return a list of stale change listeners.
          A change listener becomes "stale" when its document is cleaned by GC.</div>
<a id="L2653" name="L2653"></a>2653         <strong class="reserved">static</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>&gt; <a href="../R/19146.html" title="Multiple referred from 2 places.">getStaleListeners</a>(<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> l) <em class="brace">{</em>
<a id="L2654" name="L2654"></a>2654             <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>&gt; staleListeners = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>&gt;();
<a id="L2655" name="L2655"></a>2655             <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a>&gt; q = queueMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(l.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>());
<a id="L2656" name="L2656"></a>2656 
<a id="L2657" name="L2657"></a>2657             <strong class="reserved">if</strong> (q != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2658" name="L2658"></a>2658                 <a href="../S/3328.html#L2614" title="Defined at 2614 in src/javax/swing/text/DefaultStyledDocument.java.">DocReference</a> r;
<a id="L2659" name="L2659"></a>2659                 <strong class="reserved">synchronized</strong> (q) <em class="brace">{</em>
<a id="L2660" name="L2660"></a>2660                     <strong class="reserved">while</strong> ((r = (<a href="../S/3328.html#L2614" title="Defined at 2614 in src/javax/swing/text/DefaultStyledDocument.java.">DocReference</a>) q.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2661" name="L2661"></a>2661                         staleListeners.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(r.<a href="../D/20162.html" title="Multiple defined in 9 places.">getListener</a>());
<a id="L2662" name="L2662"></a>2662                     <em class="brace">}</em>
<a id="L2663" name="L2663"></a>2663                 <em class="brace">}</em>
<a id="L2664" name="L2664"></a>2664             <em class="brace">}</em>
<a id="L2665" name="L2665"></a>2665 
<a id="L2666" name="L2666"></a>2666             <strong class="reserved">return</strong> staleListeners;
<a id="L2667" name="L2667"></a>2667         <em class="brace">}</em>
<a id="L2668" name="L2668"></a>2668 
<div class="comment">
          The ChangeListener wrapper which guards against dead documents.</div>
<a id="L2672" name="L2672"></a>2672         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28874.html" title="Multiple referred from 23 places.">stateChanged</a>(<a href="../S/3414.html#L46" title="Defined at 46 in src/javax/swing/event/ChangeEvent.java.">ChangeEvent</a> e) <em class="brace">{</em>
<a id="L2673" name="L2673"></a>2673             <a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d = doc.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L2674" name="L2674"></a>2674             <strong class="reserved">if</strong> (d != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2675" name="L2675"></a>2675                 <a href="../D/16373.html" title="Multiple defined in 17 places.">fireStateChanged</a>(d, e);
<a id="L2676" name="L2676"></a>2676             <em class="brace">}</em>
<a id="L2677" name="L2677"></a>2677         <em class="brace">}</em>
<a id="L2678" name="L2678"></a>2678 
<div class="comment">
         /** Run the actual class-specific stateChanged() method.  */</div>
<a id="L2680" name="L2680"></a>2680         <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/14609.html" title="Multiple referred from 41 places.">fireStateChanged</a>(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d, <a href="../S/3414.html#L46" title="Defined at 46 in src/javax/swing/event/ChangeEvent.java.">ChangeEvent</a> e);
<a id="L2681" name="L2681"></a>2681     <em class="brace">}</em>
<a id="L2682" name="L2682"></a>2682 
<div class="comment">
      Added to all the Styles. When instances of this receive a
      stateChanged method, styleChanged is invoked.</div>
<a id="L2687" name="L2687"></a>2687     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/3328.html#L1029" title="Referred from 1029 in src/javax/swing/text/DefaultStyledDocument.java.">StyleChangeHandler</a> <strong class="reserved">extends</strong> <a href="../S/3328.html#L2611" title="Defined at 2611 in src/javax/swing/text/DefaultStyledDocument.java.">AbstractChangeHandler</a> <em class="brace">{</em>
<a id="L2688" name="L2688"></a>2688 
<a id="L2689" name="L2689"></a>2689         StyleChangeHandler(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d) <em class="brace">{</em>
<a id="L2690" name="L2690"></a>2690             <strong class="reserved">super</strong>(d);
<a id="L2691" name="L2691"></a>2691         <em class="brace">}</em>
<a id="L2692" name="L2692"></a>2692 
<a id="L2693" name="L2693"></a>2693         <strong class="reserved">void</strong> <a href="../R/14609.html" title="Multiple referred from 41 places.">fireStateChanged</a>(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d, <a href="../S/3414.html#L46" title="Defined at 46 in src/javax/swing/event/ChangeEvent.java.">ChangeEvent</a> e) <em class="brace">{</em>
<a id="L2694" name="L2694"></a>2694             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = e.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>();
<a id="L2695" name="L2695"></a>2695             <strong class="reserved">if</strong> (<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> <strong class="reserved">instanceof</strong> <a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>) <em class="brace">{</em>
<a id="L2696" name="L2696"></a>2696                 d.<a href="../S/3328.html#L952" title="Defined at 952 in src/javax/swing/text/DefaultStyledDocument.java.">styleChanged</a>((<a href="../S/3333.html#L48" title="Defined at 48 in src/javax/swing/text/Style.java.">Style</a>) <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>);
<a id="L2697" name="L2697"></a>2697             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2698" name="L2698"></a>2698                 d.<a href="../S/3328.html#L952" title="Defined at 952 in src/javax/swing/text/DefaultStyledDocument.java.">styleChanged</a>(<strong class="reserved">null</strong>);
<a id="L2699" name="L2699"></a>2699             <em class="brace">}</em>
<a id="L2700" name="L2700"></a>2700         <em class="brace">}</em>
<a id="L2701" name="L2701"></a>2701     <em class="brace">}</em>
<a id="L2702" name="L2702"></a>2702 
<a id="L2703" name="L2703"></a>2703 
<div class="comment">
      Added to the StyleContext. When the StyleContext changes, this invokes
      <code>updateStylesListeningTo</code>.</div>
<a id="L2708" name="L2708"></a>2708     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/3328.html#L1036" title="Referred from 1036 in src/javax/swing/text/DefaultStyledDocument.java.">StyleContextChangeHandler</a> <strong class="reserved">extends</strong> <a href="../S/3328.html#L2611" title="Defined at 2611 in src/javax/swing/text/DefaultStyledDocument.java.">AbstractChangeHandler</a> <em class="brace">{</em>
<a id="L2709" name="L2709"></a>2709 
<a id="L2710" name="L2710"></a>2710         StyleContextChangeHandler(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d) <em class="brace">{</em>
<a id="L2711" name="L2711"></a>2711             <strong class="reserved">super</strong>(d);
<a id="L2712" name="L2712"></a>2712         <em class="brace">}</em>
<a id="L2713" name="L2713"></a>2713 
<a id="L2714" name="L2714"></a>2714         <strong class="reserved">void</strong> <a href="../R/14609.html" title="Multiple referred from 41 places.">fireStateChanged</a>(<a href="../S/3328.html#L72" title="Defined at 72 in src/javax/swing/text/DefaultStyledDocument.java.">DefaultStyledDocument</a> d, <a href="../S/3414.html#L46" title="Defined at 46 in src/javax/swing/event/ChangeEvent.java.">ChangeEvent</a> e) <em class="brace">{</em>
<a id="L2715" name="L2715"></a>2715             d.<a href="../S/3328.html#L1043" title="Defined at 1043 in src/javax/swing/text/DefaultStyledDocument.java.">updateStylesListeningTo</a>();
<a id="L2716" name="L2716"></a>2716         <em class="brace">}</em>
<a id="L2717" name="L2717"></a>2717     <em class="brace">}</em>
<a id="L2718" name="L2718"></a>2718 
<a id="L2719" name="L2719"></a>2719 
<div class="comment">
      When run this creates a change event for the complete document
      and fires it.</div>
<a id="L2724" name="L2724"></a>2724     <strong class="reserved">class</strong> <a href="../R/1246.html" title="Multiple referred from 2 places.">ChangeUpdateRunnable</a> <strong class="reserved">implements</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <em class="brace">{</em>
<a id="L2725" name="L2725"></a>2725         <strong class="reserved">boolean</strong> isPending = <strong class="reserved">false</strong>;
<a id="L2726" name="L2726"></a>2726 
<a id="L2727" name="L2727"></a>2727         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26539.html" title="Multiple referred from 715 places.">run</a>() <em class="brace">{</em>
<a id="L2728" name="L2728"></a>2728             <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L2729" name="L2729"></a>2729                 isPending = <strong class="reserved">false</strong>;
<a id="L2730" name="L2730"></a>2730             <em class="brace">}</em>
<a id="L2731" name="L2731"></a>2731 
<a id="L2732" name="L2732"></a>2732             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2733" name="L2733"></a>2733                 <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>();
<a id="L2734" name="L2734"></a>2734                 <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a> dde = <strong class="reserved">new</strong> <a href="../S/3268.html#L2708" title="Defined at 2708 in src/javax/swing/text/AbstractDocument.java.">DefaultDocumentEvent</a>(0,
<a id="L2735" name="L2735"></a>2735                                               <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(),
<a id="L2736" name="L2736"></a>2736                                               <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.CHANGE);
<a id="L2737" name="L2737"></a>2737                 dde.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>();
<a id="L2738" name="L2738"></a>2738                 <a href="../D/16316.html" title="Multiple defined in 2 places.">fireChangedUpdate</a>(dde);
<a id="L2739" name="L2739"></a>2739             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2740" name="L2740"></a>2740                 <a href="../D/37203.html" title="Multiple defined in 3 places.">writeUnlock</a>();
<a id="L2741" name="L2741"></a>2741             <em class="brace">}</em>
<a id="L2742" name="L2742"></a>2742         <em class="brace">}</em>
<a id="L2743" name="L2743"></a>2743     <em class="brace">}</em>
<a id="L2744" name="L2744"></a>2744 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L115">[^]</a><a href="#L2727">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
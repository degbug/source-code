<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/serialize/HTMLSerializer.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L180">[^]</a><a href="#L867">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L180" title="Defined at 180.">setOutputFormat</a></li>
<li><a href="#L186" title="Defined at 186.">setXHTMLNamespace</a></li>
<li><a href="#L195" title="Defined at 195.">startElement</a></li>
<li><a href="#L376" title="Defined at 376.">endElement</a></li>
<li><a href="#L388" title="Defined at 388.">endElementIO</a></li>
<li><a href="#L461" title="Defined at 461.">characters</a></li>
<li><a href="#L477" title="Defined at 477.">startElement</a></li>
<li><a href="#L604" title="Defined at 604.">endElement</a></li>
<li><a href="#L628" title="Defined at 628.">startDocument</a></li>
<li><a href="#L700" title="Defined at 700.">serializeElement</a></li>
<li><a href="#L850" title="Defined at 850.">characters</a></li>
<li><a href="#L861" title="Defined at 861.">getEntityRef</a></li>
<li><a href="#L867" title="Defined at 867.">escapeURI</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 
<a id="L22" name="L22"></a>  22 <em class="comment">// Sep 14, 2000:</em>
<a id="L23" name="L23"></a>  23 <em class="comment">//  Fixed serializer to report IO exception directly, instead at</em>
<a id="L24" name="L24"></a>  24 <em class="comment">//  the end of document processing.</em>
<a id="L25" name="L25"></a>  25 <em class="comment">//  Reported by Patrick Higgins &lt;phiggins@transzap.com&gt;</em>
<a id="L26" name="L26"></a>  26 <em class="comment">// Aug 21, 2000:</em>
<a id="L27" name="L27"></a>  27 <em class="comment">//  Fixed bug in startDocument not calling prepare.</em>
<a id="L28" name="L28"></a>  28 <em class="comment">//  Reported by Mikael Staldal &lt;d96-mst-ingen-reklam@d.kth.se&gt;</em>
<a id="L29" name="L29"></a>  29 <em class="comment">// Aug 21, 2000:</em>
<a id="L30" name="L30"></a>  30 <em class="comment">//  Added ability to omit DOCTYPE declaration.</em>
<a id="L31" name="L31"></a>  31 <em class="comment">// Sep 1, 2000:</em>
<a id="L32" name="L32"></a>  32 <em class="comment">//   If no output format is provided the serializer now defaults</em>
<a id="L33" name="L33"></a>  33 <em class="comment">//   to ISO-8859-1 encoding. Reported by Mikael Staldal</em>
<a id="L34" name="L34"></a>  34 <em class="comment">//   &lt;d96-mst@d.kth.se&gt;</em>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 
<a id="L37" name="L37"></a>  37 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.<a href="../D/31785.html" title="Multiple defined in 18 places.">serialize</a>;
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.dom.DOMMessageFormatter;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.io.IOException;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.io.OutputStream;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.io.Writer;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.util.Locale;
<a id="L46" name="L46"></a>  46 
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> org.w3c.dom.Attr;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> org.w3c.dom.Element;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> org.w3c.dom.NamedNodeMap;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> org.xml.sax.AttributeList;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> org.xml.sax.Attributes;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> org.xml.sax.SAXException;
<a id="L54" name="L54"></a>  54 
<a id="L55" name="L55"></a>  55 
<div class="comment">
  Implements an HTML/XHTML serializer supporting both DOM and SAX
  pretty serializing. HTML/XHTML mode is determined in the
  constructor.  For usage instructions see {@link Serializer}.
  <p>
  If an output stream is used, the encoding is taken from the
  output format (defaults to <tt>UTF-8</tt>). If a writer is
  used, make sure the writer uses the same encoding (if applies)
  as specified in the output format.
  </p><p>
  The serializer supports both DOM and SAX. DOM serializing is done
  by calling {@link #serialize} and SAX serializing is done by firing
  SAX events and using the serializer as a document handler.
  </p><p>
  If an I/O exception occurs while serializing, the serializer
  will not throw an exception directly, but only throw it
  at the end of serializing (either DOM or SAX's {@link
  org.xml.sax.DocumentHandler#endDocument}.
  </p><p>
  For elements that are not specified as whitespace preserving,
  the serializer will potentially break long text lines at space
  boundaries, indent lines, and serialize elements on separate
  lines. Line terminators will be regarded as spaces, and
  spaces at beginning of line will be stripped.
  </p><p>
  XHTML is slightly different than HTML:
  </p><ul><li>Element/attribute names are lower case and case matters
  </li><li>Attributes must specify value, even if empty string
  </li><li>Empty elements must have '/' in empty tag
  </li><li>Contents of SCRIPT and STYLE elements serialized as CDATA
  </li></ul>
  @deprecated This class was deprecated in Xerces 2.6.2. It is
  recommended that new applications use JAXP's Transformation API
  for XML (TrAX) for serializing HTML. See the Xerces documentation
  for more information.
  @author <a href="mailto:arkin@intalio.com">Assaf Arkin</a>
  @see Serializer</div>
<a id="L96" name="L96"></a>  96 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/3367.html" title="Multiple referred from 2 places.">HTMLSerializer</a>
<a id="L97" name="L97"></a>  97     <strong class="reserved">extends</strong> <a href="../S/5797.html#L131" title="Defined at 131 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">BaseMarkupSerializer</a>
<a id="L98" name="L98"></a>  98 <em class="brace">{</em>
<a id="L99" name="L99"></a>  99 
<a id="L100" name="L100"></a> 100 
<div class="comment">
      True if serializing in XHTML format.</div>
<a id="L104" name="L104"></a> 104     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _xhtml;
<a id="L105" name="L105"></a> 105 
<a id="L106" name="L106"></a> 106 
<a id="L107" name="L107"></a> 107     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> XHTMLNamespace = "http://www.w3.org/1999/xhtml";
<a id="L108" name="L108"></a> 108 
<a id="L109" name="L109"></a> 109     <em class="comment">// for users to override XHTMLNamespace if need be.</em>
<a id="L110" name="L110"></a> 110     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fUserXHTMLNamespace = <strong class="reserved">null</strong>;
<a id="L111" name="L111"></a> 111 
<a id="L112" name="L112"></a> 112 
<div class="comment">
      Constructs a new HTML/XHTML serializer depending on the value of
      <tt>xhtml</tt>. The serializer cannot be used without calling
      {@link #setOutputCharStream} or {@link #setOutputByteStream} first.
      @param xhtml True if XHTML serializing</div>
<a id="L120" name="L120"></a> 120     <strong class="reserved">protected</strong> HTMLSerializer( <strong class="reserved">boolean</strong> xhtml, <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> )
<a id="L121" name="L121"></a> 121     <em class="brace">{</em>
<a id="L122" name="L122"></a> 122         <strong class="reserved">super</strong>( <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> );
<a id="L123" name="L123"></a> 123         _xhtml = xhtml;
<a id="L124" name="L124"></a> 124     <em class="brace">}</em>
<a id="L125" name="L125"></a> 125 
<a id="L126" name="L126"></a> 126 
<div class="comment">
      Constructs a new serializer. The serializer cannot be used without
      calling {@link #setOutputCharStream} or {@link #setOutputByteStream}
      first.</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">public</strong> HTMLSerializer()
<a id="L133" name="L133"></a> 133     <em class="brace">{</em>
<a id="L134" name="L134"></a> 134         <strong class="reserved">this</strong>( <strong class="reserved">false</strong>, <strong class="reserved">new</strong> <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a>( <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a>.<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>, "ISO-8859-1", <strong class="reserved">false</strong> ) );
<a id="L135" name="L135"></a> 135     <em class="brace">}</em>
<a id="L136" name="L136"></a> 136 
<a id="L137" name="L137"></a> 137 
<div class="comment">
      Constructs a new serializer. The serializer cannot be used without
      calling {@link #setOutputCharStream} or {@link #setOutputByteStream}
      first.</div>
<a id="L143" name="L143"></a> 143     <strong class="reserved">public</strong> HTMLSerializer( <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> )
<a id="L144" name="L144"></a> 144     <em class="brace">{</em>
<a id="L145" name="L145"></a> 145         <strong class="reserved">this</strong>( <strong class="reserved">false</strong>, <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> != <strong class="reserved">null</strong> ? <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> : <strong class="reserved">new</strong> <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a>( <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a>.<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>, "ISO-8859-1", <strong class="reserved">false</strong> ) );
<a id="L146" name="L146"></a> 146     <em class="brace">}</em>
<a id="L147" name="L147"></a> 147 
<a id="L148" name="L148"></a> 148 
<a id="L149" name="L149"></a> 149 
<div class="comment">
      Constructs a new serializer that writes to the specified writer
      using the specified output format. If <tt>format</tt> is null,
      will use a default output format.
      @param writer The writer to use
      @param format The output format to use, null for the default</div>
<a id="L158" name="L158"></a> 158     <strong class="reserved">public</strong> HTMLSerializer( <a href="../S/1393.html#L50" title="Defined at 50 in src/java/io/Writer.java.">Writer</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> )
<a id="L159" name="L159"></a> 159     <em class="brace">{</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">this</strong>( <strong class="reserved">false</strong>, <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> != <strong class="reserved">null</strong> ? <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> : <strong class="reserved">new</strong> <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a>( <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a>.<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>, "ISO-8859-1", <strong class="reserved">false</strong> ) );
<a id="L161" name="L161"></a> 161         <a href="../D/33454.html" title="Multiple defined in 2 places.">setOutputCharStream</a>( <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> );
<a id="L162" name="L162"></a> 162     <em class="brace">}</em>
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164 
<div class="comment">
      Constructs a new serializer that writes to the specified output
      stream using the specified output format. If <tt>format</tt>
      is null, will use a default output format.
      @param output The output stream to use
      @param format The output format to use, null for the default</div>
<a id="L173" name="L173"></a> 173     <strong class="reserved">public</strong> HTMLSerializer( <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>, <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> )
<a id="L174" name="L174"></a> 174     <em class="brace">{</em>
<a id="L175" name="L175"></a> 175         <strong class="reserved">this</strong>( <strong class="reserved">false</strong>, <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> != <strong class="reserved">null</strong> ? <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> : <strong class="reserved">new</strong> <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a>( <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a>.<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>, "ISO-8859-1", <strong class="reserved">false</strong> ) );
<a id="L176" name="L176"></a> 176         <a href="../D/33453.html" title="Multiple defined in 2 places.">setOutputByteStream</a>( <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a> );
<a id="L177" name="L177"></a> 177     <em class="brace">}</em>
<a id="L178" name="L178"></a> 178 
<a id="L179" name="L179"></a> 179 
<a id="L180" name="L180"></a> 180     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27877.html" title="Multiple referred from 9 places.">setOutputFormat</a>( <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> )
<a id="L181" name="L181"></a> 181     <em class="brace">{</em>
<a id="L182" name="L182"></a> 182         <strong class="reserved">super</strong>.<a href="../D/33455.html" title="Multiple defined in 14 places.">setOutputFormat</a>( <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> != <strong class="reserved">null</strong> ? <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> : <strong class="reserved">new</strong> <a href="../S/5804.html#L63" title="Defined at 63 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">OutputFormat</a>( <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a>.<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>, "ISO-8859-1", <strong class="reserved">false</strong> ) );
<a id="L183" name="L183"></a> 183     <em class="brace">}</em>
<a id="L184" name="L184"></a> 184 
<a id="L185" name="L185"></a> 185     <em class="comment">// Set  value for alternate XHTML namespace.</em>
<a id="L186" name="L186"></a> 186     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setXHTMLNamespace(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newNamespace) <em class="brace">{</em>
<a id="L187" name="L187"></a> 187         fUserXHTMLNamespace = newNamespace;
<a id="L188" name="L188"></a> 188     <em class="brace">}</em> <em class="comment">// setXHTMLNamespace(String)</em>
<a id="L189" name="L189"></a> 189 
<a id="L190" name="L190"></a> 190     <em class="comment">//-----------------------------------------//</em>
<a id="L191" name="L191"></a> 191     <em class="comment">// SAX content handler serializing methods //</em>
<a id="L192" name="L192"></a> 192     <em class="comment">//-----------------------------------------//</em>
<a id="L193" name="L193"></a> 193 
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>,
<a id="L196" name="L196"></a> 196                               <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rawName, <a href="../D/601.html" title="Multiple defined in 4 places.">Attributes</a> attrs )
<a id="L197" name="L197"></a> 197         <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L198" name="L198"></a> 198     <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <strong class="reserved">int</strong>          i;
<a id="L200" name="L200"></a> 200         <strong class="reserved">boolean</strong>      preserveSpace;
<a id="L201" name="L201"></a> 201         <a href="../S/5795.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/serialize/ElementState.java.">ElementState</a> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L202" name="L202"></a> 202         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L203" name="L203"></a> 203         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L204" name="L204"></a> 204         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       htmlName;
<a id="L205" name="L205"></a> 205         <strong class="reserved">boolean</strong>      addNSAttr = <strong class="reserved">false</strong>;
<a id="L206" name="L206"></a> 206 
<a id="L207" name="L207"></a> 207         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L208" name="L208"></a> 208             <strong class="reserved">if</strong> ( _printer == <strong class="reserved">null</strong> )
<a id="L209" name="L209"></a> 209                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(
<a id="L210" name="L210"></a> 210                                     <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L211" name="L211"></a> 211                                     <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.SERIALIZER_DOMAIN,
<a id="L212" name="L212"></a> 212                     "NoWriterSupplied", <strong class="reserved">null</strong>));
<a id="L213" name="L213"></a> 213 
<a id="L214" name="L214"></a> 214             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1815" title="Defined at 1815 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">getElementState</a>();
<a id="L215" name="L215"></a> 215             <strong class="reserved">if</strong> ( <a href="../S/5797.html#L1893" title="Defined at 1893 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">isDocumentState</a>() ) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216                 <em class="comment">// If this is the root element handle it differently.</em>
<a id="L217" name="L217"></a> 217                 <em class="comment">// If the first root element in the document, serialize</em>
<a id="L218" name="L218"></a> 218                 <em class="comment">// the document's DOCTYPE. Space preserving defaults</em>
<a id="L219" name="L219"></a> 219                 <em class="comment">// to that of the output format.</em>
<a id="L220" name="L220"></a> 220                 <strong class="reserved">if</strong> ( ! _started )
<a id="L221" name="L221"></a> 221                     <a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>( (<a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> == <strong class="reserved">null</strong> || <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L222" name="L222"></a> 222                         ? rawName : <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> );
<a id="L223" name="L223"></a> 223             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L224" name="L224"></a> 224                 <em class="comment">// For any other element, if first in parent, then</em>
<a id="L225" name="L225"></a> 225                 <em class="comment">// close parent's opening tag and use the parnet's</em>
<a id="L226" name="L226"></a> 226                 <em class="comment">// space preserving.</em>
<a id="L227" name="L227"></a> 227                 <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> )
<a id="L228" name="L228"></a> 228                     _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L229" name="L229"></a> 229                 <em class="comment">// Indent this element on a new line if the first</em>
<a id="L230" name="L230"></a> 230                 <em class="comment">// content of the parent element or immediately</em>
<a id="L231" name="L231"></a> 231                 <em class="comment">// following an element.</em>
<a id="L232" name="L232"></a> 232                 <strong class="reserved">if</strong> ( _indenting &amp;&amp; ! <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace &amp;&amp;
<a id="L233" name="L233"></a> 233                      ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> || <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.afterElement ) )
<a id="L234" name="L234"></a> 234                     _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L235" name="L235"></a> 235             <em class="brace">}</em>
<a id="L236" name="L236"></a> 236             preserveSpace = <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace;
<a id="L237" name="L237"></a> 237 
<a id="L238" name="L238"></a> 238             <em class="comment">// Do not change the current element state yet.</em>
<a id="L239" name="L239"></a> 239             <em class="comment">// This only happens in endElement().</em>
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241             <em class="comment">// As per SAX2, the namespace URI is an empty string if the element has no</em>
<a id="L242" name="L242"></a> 242             <em class="comment">// namespace URI, or namespaces is turned off. The check against null protects</em>
<a id="L243" name="L243"></a> 243             <em class="comment">// against broken SAX implementations, so I've left it there. - mrglavas</em>
<a id="L244" name="L244"></a> 244             <strong class="reserved">boolean</strong> hasNamespaceURI = (<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0);
<a id="L245" name="L245"></a> 245 
<a id="L246" name="L246"></a> 246             <em class="comment">// SAX2: rawName (QName) could be empty string if</em>
<a id="L247" name="L247"></a> 247             <em class="comment">// namespace-prefixes property is false.</em>
<a id="L248" name="L248"></a> 248             <strong class="reserved">if</strong> ( rawName == <strong class="reserved">null</strong> || rawName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L249" name="L249"></a> 249                 rawName = <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>;
<a id="L250" name="L250"></a> 250                 <strong class="reserved">if</strong> ( hasNamespaceURI ) <em class="brace">{</em>
<a id="L251" name="L251"></a> 251                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L252" name="L252"></a> 252                     <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>( <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a> );
<a id="L253" name="L253"></a> 253                     <strong class="reserved">if</strong> ( <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0 )
<a id="L254" name="L254"></a> 254                         rawName = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> + ":" + <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>;
<a id="L255" name="L255"></a> 255                 <em class="brace">}</em>
<a id="L256" name="L256"></a> 256                 addNSAttr = <strong class="reserved">true</strong>;
<a id="L257" name="L257"></a> 257             <em class="brace">}</em>
<a id="L258" name="L258"></a> 258             <strong class="reserved">if</strong> ( !hasNamespaceURI )
<a id="L259" name="L259"></a> 259                 htmlName = rawName;
<a id="L260" name="L260"></a> 260             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L261" name="L261"></a> 261                 <strong class="reserved">if</strong> ( <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>( XHTMLNamespace ) ||
<a id="L262" name="L262"></a> 262                         (fUserXHTMLNamespace != <strong class="reserved">null</strong> &amp;&amp; fUserXHTMLNamespace.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>)) )
<a id="L263" name="L263"></a> 263                     htmlName = <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>;
<a id="L264" name="L264"></a> 264                 <strong class="reserved">else</strong>
<a id="L265" name="L265"></a> 265                     htmlName = <strong class="reserved">null</strong>;
<a id="L266" name="L266"></a> 266             <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 
<a id="L268" name="L268"></a> 268             <em class="comment">// XHTML: element names are lower case, DOM will be different</em>
<a id="L269" name="L269"></a> 269             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&lt;' );
<a id="L270" name="L270"></a> 270             <strong class="reserved">if</strong> ( _xhtml )
<a id="L271" name="L271"></a> 271                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( rawName.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH) );
<a id="L272" name="L272"></a> 272             <strong class="reserved">else</strong>
<a id="L273" name="L273"></a> 273                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( rawName );
<a id="L274" name="L274"></a> 274             _printer.<a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a>();
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276             <em class="comment">// For each attribute serialize it's name and value as one part,</em>
<a id="L277" name="L277"></a> 277             <em class="comment">// separated with a space so the element can be broken on</em>
<a id="L278" name="L278"></a> 278             <em class="comment">// multiple lines.</em>
<a id="L279" name="L279"></a> 279             <strong class="reserved">if</strong> ( attrs != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L280" name="L280"></a> 280                 <strong class="reserved">for</strong> ( i = 0 ; i &lt; attrs.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() ; ++i ) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281                     _printer.<a href="../D/29701.html" title="Multiple defined in 3 places.">printSpace</a>();
<a id="L282" name="L282"></a> 282                     <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = attrs.<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>( i ).<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH);
<a id="L283" name="L283"></a> 283                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = attrs.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>( i );
<a id="L284" name="L284"></a> 284                     <strong class="reserved">if</strong> ( _xhtml || hasNamespaceURI ) <em class="brace">{</em>
<a id="L285" name="L285"></a> 285                         <em class="comment">// XHTML: print empty string for null values.</em>
<a id="L286" name="L286"></a> 286                         <strong class="reserved">if</strong> ( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L287" name="L287"></a> 287                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L288" name="L288"></a> 288                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"\"" );
<a id="L289" name="L289"></a> 289                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L290" name="L290"></a> 290                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L291" name="L291"></a> 291                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L292" name="L292"></a> 292                             <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L293" name="L293"></a> 293                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L294" name="L294"></a> 294                         <em class="brace">}</em>
<a id="L295" name="L295"></a> 295                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L296" name="L296"></a> 296                         <em class="comment">// HTML: Empty values print as attribute name, no value.</em>
<a id="L297" name="L297"></a> 297                         <em class="comment">// HTML: URI attributes will print unescaped</em>
<a id="L298" name="L298"></a> 298                         <strong class="reserved">if</strong> ( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L299" name="L299"></a> 299                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = "";
<a id="L300" name="L300"></a> 300                         <em class="brace">}</em>
<a id="L301" name="L301"></a> 301                         <strong class="reserved">if</strong> ( !_format.<a href="../S/5804.html#L815" title="Defined at 815 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">getPreserveEmptyAttributes</a>() &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 )
<a id="L302" name="L302"></a> 302                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L303" name="L303"></a> 303                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L284" title="Defined at 284 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isURI</a>( rawName, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> ) ) <em class="brace">{</em>
<a id="L304" name="L304"></a> 304                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L305" name="L305"></a> 305                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L306" name="L306"></a> 306                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../S/5798.html#L867" title="Defined at 867 in src/com/sun/org/apache/xml/internal/serialize/HTMLSerializer.java.">escapeURI</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> ) );
<a id="L307" name="L307"></a> 307                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L308" name="L308"></a> 308                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../D/25254.html" title="Multiple defined in 2 places.">isBoolean</a>( rawName, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> ) )
<a id="L309" name="L309"></a> 309                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L310" name="L310"></a> 310                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L311" name="L311"></a> 311                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L312" name="L312"></a> 312                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L313" name="L313"></a> 313                             <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L314" name="L314"></a> 314                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L315" name="L315"></a> 315                         <em class="brace">}</em>
<a id="L316" name="L316"></a> 316                     <em class="brace">}</em>
<a id="L317" name="L317"></a> 317                 <em class="brace">}</em>
<a id="L318" name="L318"></a> 318             <em class="brace">}</em>
<a id="L319" name="L319"></a> 319             <strong class="reserved">if</strong> ( htmlName != <strong class="reserved">null</strong> &amp;&amp; <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L207" title="Defined at 207 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isPreserveSpace</a>( htmlName ) )
<a id="L320" name="L320"></a> 320                 preserveSpace = <strong class="reserved">true</strong>;
<a id="L321" name="L321"></a> 321 
<a id="L322" name="L322"></a> 322             <strong class="reserved">if</strong> ( addNSAttr ) <em class="brace">{</em>
<a id="L323" name="L323"></a> 323                 <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>;
<a id="L324" name="L324"></a> 324 
<a id="L325" name="L325"></a> 325                 <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a> = _prefixes.<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>();
<a id="L326" name="L326"></a> 326                 <strong class="reserved">while</strong> ( <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>() ) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327                     _printer.<a href="../D/29701.html" title="Multiple defined in 3 places.">printSpace</a>();
<a id="L328" name="L328"></a> 328                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L329" name="L329"></a> 329                     <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) _prefixes.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L330" name="L330"></a> 330                     <strong class="reserved">if</strong> ( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 ) <em class="brace">{</em>
<a id="L331" name="L331"></a> 331                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "xmlns=\"" );
<a id="L332" name="L332"></a> 332                         <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L333" name="L333"></a> 333                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L334" name="L334"></a> 334                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L335" name="L335"></a> 335                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "xmlns:" );
<a id="L336" name="L336"></a> 336                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L337" name="L337"></a> 337                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L338" name="L338"></a> 338                         <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L339" name="L339"></a> 339                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L340" name="L340"></a> 340                     <em class="brace">}</em>
<a id="L341" name="L341"></a> 341                 <em class="brace">}</em>
<a id="L342" name="L342"></a> 342             <em class="brace">}</em>
<a id="L343" name="L343"></a> 343 
<a id="L344" name="L344"></a> 344             <em class="comment">// Now it's time to enter a new element state</em>
<a id="L345" name="L345"></a> 345             <em class="comment">// with the tag name and space preserving.</em>
<a id="L346" name="L346"></a> 346             <em class="comment">// We still do not change the curent element state.</em>
<a id="L347" name="L347"></a> 347             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1828" title="Defined at 1828 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">enterElementState</a>( <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>, <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, rawName, preserveSpace );
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349             <em class="comment">// Prevents line breaks inside A/TD</em>
<a id="L350" name="L350"></a> 350 
<a id="L351" name="L351"></a> 351             <strong class="reserved">if</strong> ( htmlName != <strong class="reserved">null</strong> &amp;&amp; ( htmlName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "A" ) ||
<a id="L352" name="L352"></a> 352                                        htmlName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "TD" ) ) ) <em class="brace">{</em>
<a id="L353" name="L353"></a> 353                 <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> = <strong class="reserved">false</strong>;
<a id="L354" name="L354"></a> 354                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L355" name="L355"></a> 355             <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<a id="L357" name="L357"></a> 357             <em class="comment">// Handle SCRIPT and STYLE specifically by changing the</em>
<a id="L358" name="L358"></a> 358             <em class="comment">// state of the current element to CDATA (XHTML) or</em>
<a id="L359" name="L359"></a> 359             <em class="comment">// unescaped (HTML).</em>
<a id="L360" name="L360"></a> 360             <strong class="reserved">if</strong> ( htmlName != <strong class="reserved">null</strong> &amp;&amp; ( rawName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "SCRIPT" ) ||
<a id="L361" name="L361"></a> 361                                        rawName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "STYLE" ) ) ) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362                 <strong class="reserved">if</strong> ( _xhtml ) <em class="brace">{</em>
<a id="L363" name="L363"></a> 363                     <em class="comment">// XHTML: Print contents as CDATA section</em>
<a id="L364" name="L364"></a> 364                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.doCData = <strong class="reserved">true</strong>;
<a id="L365" name="L365"></a> 365                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L366" name="L366"></a> 366                     <em class="comment">// HTML: Print contents unescaped</em>
<a id="L367" name="L367"></a> 367                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.unescaped = <strong class="reserved">true</strong>;
<a id="L368" name="L368"></a> 368                 <em class="brace">}</em>
<a id="L369" name="L369"></a> 369             <em class="brace">}</em>
<a id="L370" name="L370"></a> 370         <em class="brace">}</em> <strong class="reserved">catch</strong> ( <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> ) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>( <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> );
<a id="L372" name="L372"></a> 372         <em class="brace">}</em>
<a id="L373" name="L373"></a> 373     <em class="brace">}</em>
<a id="L374" name="L374"></a> 374 
<a id="L375" name="L375"></a> 375 
<a id="L376" name="L376"></a> 376     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>,
<a id="L377" name="L377"></a> 377                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rawName )
<a id="L378" name="L378"></a> 378         <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L379" name="L379"></a> 379     <em class="brace">{</em>
<a id="L380" name="L380"></a> 380         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L381" name="L381"></a> 381             <a href="../D/15449.html" title="Multiple defined in 3 places.">endElementIO</a>( <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>, <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, rawName );
<a id="L382" name="L382"></a> 382         <em class="brace">}</em> <strong class="reserved">catch</strong> ( <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> ) <em class="brace">{</em>
<a id="L383" name="L383"></a> 383             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>( <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> );
<a id="L384" name="L384"></a> 384         <em class="brace">}</em>
<a id="L385" name="L385"></a> 385     <em class="brace">}</em>
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387 
<a id="L388" name="L388"></a> 388     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13767.html" title="Multiple referred from 6 places.">endElementIO</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>,
<a id="L389" name="L389"></a> 389                               <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rawName )
<a id="L390" name="L390"></a> 390         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L391" name="L391"></a> 391     <em class="brace">{</em>
<a id="L392" name="L392"></a> 392         <a href="../S/5795.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/serialize/ElementState.java.">ElementState</a> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L393" name="L393"></a> 393         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       htmlName;
<a id="L394" name="L394"></a> 394 
<a id="L395" name="L395"></a> 395         <em class="comment">// Works much like content() with additions for closing</em>
<a id="L396" name="L396"></a> 396         <em class="comment">// an element. Note the different checks for the closed</em>
<a id="L397" name="L397"></a> 397         <em class="comment">// element's state and the parent element's state.</em>
<a id="L398" name="L398"></a> 398         _printer.<a href="../D/35857.html" title="Multiple defined in 2 places.">unindent</a>();
<a id="L399" name="L399"></a> 399         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1815" title="Defined at 1815 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">getElementState</a>();
<a id="L400" name="L400"></a> 400 
<a id="L401" name="L401"></a> 401         <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a> == <strong class="reserved">null</strong> || <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 )
<a id="L402" name="L402"></a> 402             htmlName = <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.rawName;
<a id="L403" name="L403"></a> 403         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L404" name="L404"></a> 404             <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>( XHTMLNamespace ) ||
<a id="L405" name="L405"></a> 405                         (fUserXHTMLNamespace != <strong class="reserved">null</strong> &amp;&amp; fUserXHTMLNamespace.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>)) )
<a id="L406" name="L406"></a> 406                 htmlName = <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>;
<a id="L407" name="L407"></a> 407             <strong class="reserved">else</strong>
<a id="L408" name="L408"></a> 408                 htmlName = <strong class="reserved">null</strong>;
<a id="L409" name="L409"></a> 409         <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<a id="L411" name="L411"></a> 411         <strong class="reserved">if</strong> ( _xhtml) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412             <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> ) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( " /&gt;" );
<a id="L414" name="L414"></a> 414             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L415" name="L415"></a> 415                 <em class="comment">// Must leave CData section first</em>
<a id="L416" name="L416"></a> 416                 <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.inCData )
<a id="L417" name="L417"></a> 417                     _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "]]&gt;" );
<a id="L418" name="L418"></a> 418                 <em class="comment">// XHTML: element names are lower case, DOM will be different</em>
<a id="L419" name="L419"></a> 419                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "&lt;/" );
<a id="L420" name="L420"></a> 420                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.rawName.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH) );
<a id="L421" name="L421"></a> 421                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L422" name="L422"></a> 422             <em class="brace">}</em>
<a id="L423" name="L423"></a> 423         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L424" name="L424"></a> 424             <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> )
<a id="L425" name="L425"></a> 425                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L426" name="L426"></a> 426             <em class="comment">// This element is not empty and that last content was</em>
<a id="L427" name="L427"></a> 427             <em class="comment">// another element, so print a line break before that</em>
<a id="L428" name="L428"></a> 428             <em class="comment">// last element and this element's closing tag.</em>
<a id="L429" name="L429"></a> 429             <em class="comment">// [keith] Provided this is not an anchor.</em>
<a id="L430" name="L430"></a> 430             <em class="comment">// HTML: some elements do not print closing tag (e.g. LI)</em>
<a id="L431" name="L431"></a> 431             <strong class="reserved">if</strong> ( htmlName == <strong class="reserved">null</strong> || ! <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L234" title="Defined at 234 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isOnlyOpening</a>( htmlName ) ) <em class="brace">{</em>
<a id="L432" name="L432"></a> 432                 <strong class="reserved">if</strong> ( _indenting &amp;&amp; ! <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace &amp;&amp; <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.afterElement )
<a id="L433" name="L433"></a> 433                     _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L434" name="L434"></a> 434                 <em class="comment">// Must leave CData section first (Illegal in HTML, but still)</em>
<a id="L435" name="L435"></a> 435                 <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.inCData )
<a id="L436" name="L436"></a> 436                     _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "]]&gt;" );
<a id="L437" name="L437"></a> 437                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "&lt;/" );
<a id="L438" name="L438"></a> 438                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.rawName );
<a id="L439" name="L439"></a> 439                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L440" name="L440"></a> 440             <em class="brace">}</em>
<a id="L441" name="L441"></a> 441         <em class="brace">}</em>
<a id="L442" name="L442"></a> 442         <em class="comment">// Leave the element state and update that of the parent</em>
<a id="L443" name="L443"></a> 443         <em class="comment">// (if we're not root) to not empty and after element.</em>
<a id="L444" name="L444"></a> 444         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1871" title="Defined at 1871 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">leaveElementState</a>();
<a id="L445" name="L445"></a> 445         <em class="comment">// Temporary hack to prevent line breaks inside A/TD</em>
<a id="L446" name="L446"></a> 446         <strong class="reserved">if</strong> ( htmlName == <strong class="reserved">null</strong> || ( ! htmlName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "A" ) &amp;&amp;
<a id="L447" name="L447"></a> 447                                    ! htmlName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "TD" ) ) )
<a id="L448" name="L448"></a> 448 
<a id="L449" name="L449"></a> 449             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.afterElement = <strong class="reserved">true</strong>;
<a id="L450" name="L450"></a> 450         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> = <strong class="reserved">false</strong>;
<a id="L451" name="L451"></a> 451         <strong class="reserved">if</strong> ( <a href="../S/5797.html#L1893" title="Defined at 1893 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">isDocumentState</a>() )
<a id="L452" name="L452"></a> 452             _printer.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L453" name="L453"></a> 453     <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<a id="L455" name="L455"></a> 455 
<a id="L456" name="L456"></a> 456     <em class="comment">//------------------------------------------//</em>
<a id="L457" name="L457"></a> 457     <em class="comment">// SAX document handler serializing methods //</em>
<a id="L458" name="L458"></a> 458     <em class="comment">//------------------------------------------//</em>
<a id="L459" name="L459"></a> 459 
<a id="L460" name="L460"></a> 460 
<a id="L461" name="L461"></a> 461     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>( <strong class="reserved">char</strong>[] <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>, <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> )
<a id="L462" name="L462"></a> 462         <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L463" name="L463"></a> 463     <em class="brace">{</em>
<a id="L464" name="L464"></a> 464         <a href="../S/5795.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/serialize/ElementState.java.">ElementState</a> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L465" name="L465"></a> 465 
<a id="L466" name="L466"></a> 466         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L467" name="L467"></a> 467             <em class="comment">// HTML: no CDATA section</em>
<a id="L468" name="L468"></a> 468             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../D/13364.html" title="Multiple defined in 2 places.">content</a>();
<a id="L469" name="L469"></a> 469             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.doCData = <strong class="reserved">false</strong>;
<a id="L470" name="L470"></a> 470             <strong class="reserved">super</strong>.<a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>( <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> );
<a id="L471" name="L471"></a> 471         <em class="brace">}</em> <strong class="reserved">catch</strong> ( <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> ) <em class="brace">{</em>
<a id="L472" name="L472"></a> 472             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>( <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> );
<a id="L473" name="L473"></a> 473         <em class="brace">}</em>
<a id="L474" name="L474"></a> 474     <em class="brace">}</em>
<a id="L475" name="L475"></a> 475 
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> tagName, <a href="../D/576.html" title="Multiple defined in 3 places.">AttributeList</a> attrs )
<a id="L478" name="L478"></a> 478         <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L479" name="L479"></a> 479     <em class="brace">{</em>
<a id="L480" name="L480"></a> 480         <strong class="reserved">int</strong>          i;
<a id="L481" name="L481"></a> 481         <strong class="reserved">boolean</strong>      preserveSpace;
<a id="L482" name="L482"></a> 482         <a href="../S/5795.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/serialize/ElementState.java.">ElementState</a> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L483" name="L483"></a> 483         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L484" name="L484"></a> 484         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L485" name="L485"></a> 485 
<a id="L486" name="L486"></a> 486         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L487" name="L487"></a> 487             <strong class="reserved">if</strong> ( _printer == <strong class="reserved">null</strong> )
<a id="L488" name="L488"></a> 488                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(
<a id="L489" name="L489"></a> 489                                     <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L490" name="L490"></a> 490                                     <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.SERIALIZER_DOMAIN,
<a id="L491" name="L491"></a> 491                     "NoWriterSupplied", <strong class="reserved">null</strong>));
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493 
<a id="L494" name="L494"></a> 494             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1815" title="Defined at 1815 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">getElementState</a>();
<a id="L495" name="L495"></a> 495             <strong class="reserved">if</strong> ( <a href="../S/5797.html#L1893" title="Defined at 1893 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">isDocumentState</a>() ) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496                 <em class="comment">// If this is the root element handle it differently.</em>
<a id="L497" name="L497"></a> 497                 <em class="comment">// If the first root element in the document, serialize</em>
<a id="L498" name="L498"></a> 498                 <em class="comment">// the document's DOCTYPE. Space preserving defaults</em>
<a id="L499" name="L499"></a> 499                 <em class="comment">// to that of the output format.</em>
<a id="L500" name="L500"></a> 500                 <strong class="reserved">if</strong> ( ! _started )
<a id="L501" name="L501"></a> 501                     <a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>( tagName );
<a id="L502" name="L502"></a> 502             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L503" name="L503"></a> 503                 <em class="comment">// For any other element, if first in parent, then</em>
<a id="L504" name="L504"></a> 504                 <em class="comment">// close parent's opening tag and use the parnet's</em>
<a id="L505" name="L505"></a> 505                 <em class="comment">// space preserving.</em>
<a id="L506" name="L506"></a> 506                 <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> )
<a id="L507" name="L507"></a> 507                     _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L508" name="L508"></a> 508                 <em class="comment">// Indent this element on a new line if the first</em>
<a id="L509" name="L509"></a> 509                 <em class="comment">// content of the parent element or immediately</em>
<a id="L510" name="L510"></a> 510                 <em class="comment">// following an element.</em>
<a id="L511" name="L511"></a> 511                 <strong class="reserved">if</strong> ( _indenting &amp;&amp; ! <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace &amp;&amp;
<a id="L512" name="L512"></a> 512                      ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> || <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.afterElement ) )
<a id="L513" name="L513"></a> 513                     _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L514" name="L514"></a> 514             <em class="brace">}</em>
<a id="L515" name="L515"></a> 515             preserveSpace = <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace;
<a id="L516" name="L516"></a> 516 
<a id="L517" name="L517"></a> 517             <em class="comment">// Do not change the current element state yet.</em>
<a id="L518" name="L518"></a> 518             <em class="comment">// This only happens in endElement().</em>
<a id="L519" name="L519"></a> 519 
<a id="L520" name="L520"></a> 520             <em class="comment">// XHTML: element names are lower case, DOM will be different</em>
<a id="L521" name="L521"></a> 521             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&lt;' );
<a id="L522" name="L522"></a> 522             <strong class="reserved">if</strong> ( _xhtml )
<a id="L523" name="L523"></a> 523                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( tagName.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH) );
<a id="L524" name="L524"></a> 524             <strong class="reserved">else</strong>
<a id="L525" name="L525"></a> 525                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( tagName );
<a id="L526" name="L526"></a> 526             _printer.<a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a>();
<a id="L527" name="L527"></a> 527 
<a id="L528" name="L528"></a> 528             <em class="comment">// For each attribute serialize it's name and value as one part,</em>
<a id="L529" name="L529"></a> 529             <em class="comment">// separated with a space so the element can be broken on</em>
<a id="L530" name="L530"></a> 530             <em class="comment">// multiple lines.</em>
<a id="L531" name="L531"></a> 531             <strong class="reserved">if</strong> ( attrs != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L532" name="L532"></a> 532                 <strong class="reserved">for</strong> ( i = 0 ; i &lt; attrs.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() ; ++i ) <em class="brace">{</em>
<a id="L533" name="L533"></a> 533                     _printer.<a href="../D/29701.html" title="Multiple defined in 3 places.">printSpace</a>();
<a id="L534" name="L534"></a> 534                     <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = attrs.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>( i ).<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH);
<a id="L535" name="L535"></a> 535                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = attrs.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>( i );
<a id="L536" name="L536"></a> 536                     <strong class="reserved">if</strong> ( _xhtml ) <em class="brace">{</em>
<a id="L537" name="L537"></a> 537                         <em class="comment">// XHTML: print empty string for null values.</em>
<a id="L538" name="L538"></a> 538                         <strong class="reserved">if</strong> ( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L539" name="L539"></a> 539                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L540" name="L540"></a> 540                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"\"" );
<a id="L541" name="L541"></a> 541                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L542" name="L542"></a> 542                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L543" name="L543"></a> 543                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L544" name="L544"></a> 544                             <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L545" name="L545"></a> 545                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L546" name="L546"></a> 546                         <em class="brace">}</em>
<a id="L547" name="L547"></a> 547                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L548" name="L548"></a> 548                         <em class="comment">// HTML: Empty values print as attribute name, no value.</em>
<a id="L549" name="L549"></a> 549                         <em class="comment">// HTML: URI attributes will print unescaped</em>
<a id="L550" name="L550"></a> 550                         <strong class="reserved">if</strong> ( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = "";
<a id="L552" name="L552"></a> 552                         <em class="brace">}</em>
<a id="L553" name="L553"></a> 553                         <strong class="reserved">if</strong> ( !_format.<a href="../S/5804.html#L815" title="Defined at 815 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">getPreserveEmptyAttributes</a>() &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 )
<a id="L554" name="L554"></a> 554                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L555" name="L555"></a> 555                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L284" title="Defined at 284 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isURI</a>( tagName, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> ) ) <em class="brace">{</em>
<a id="L556" name="L556"></a> 556                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L557" name="L557"></a> 557                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L558" name="L558"></a> 558                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../S/5798.html#L867" title="Defined at 867 in src/com/sun/org/apache/xml/internal/serialize/HTMLSerializer.java.">escapeURI</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> ) );
<a id="L559" name="L559"></a> 559                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L560" name="L560"></a> 560                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../D/25254.html" title="Multiple defined in 2 places.">isBoolean</a>( tagName, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> ) )
<a id="L561" name="L561"></a> 561                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L562" name="L562"></a> 562                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L563" name="L563"></a> 563                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L564" name="L564"></a> 564                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L565" name="L565"></a> 565                             <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L566" name="L566"></a> 566                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L567" name="L567"></a> 567                         <em class="brace">}</em>
<a id="L568" name="L568"></a> 568                     <em class="brace">}</em>
<a id="L569" name="L569"></a> 569                 <em class="brace">}</em>
<a id="L570" name="L570"></a> 570             <em class="brace">}</em>
<a id="L571" name="L571"></a> 571             <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L207" title="Defined at 207 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isPreserveSpace</a>( tagName ) )
<a id="L572" name="L572"></a> 572                 preserveSpace = <strong class="reserved">true</strong>;
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574             <em class="comment">// Now it's time to enter a new element state</em>
<a id="L575" name="L575"></a> 575             <em class="comment">// with the tag name and space preserving.</em>
<a id="L576" name="L576"></a> 576             <em class="comment">// We still do not change the curent element state.</em>
<a id="L577" name="L577"></a> 577             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1828" title="Defined at 1828 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">enterElementState</a>( <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, tagName, preserveSpace );
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579             <em class="comment">// Prevents line breaks inside A/TD</em>
<a id="L580" name="L580"></a> 580             <strong class="reserved">if</strong> ( tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "A" ) || tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "TD" ) ) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581                 <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> = <strong class="reserved">false</strong>;
<a id="L582" name="L582"></a> 582                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L583" name="L583"></a> 583             <em class="brace">}</em>
<a id="L584" name="L584"></a> 584 
<a id="L585" name="L585"></a> 585             <em class="comment">// Handle SCRIPT and STYLE specifically by changing the</em>
<a id="L586" name="L586"></a> 586             <em class="comment">// state of the current element to CDATA (XHTML) or</em>
<a id="L587" name="L587"></a> 587             <em class="comment">// unescaped (HTML).</em>
<a id="L588" name="L588"></a> 588             <strong class="reserved">if</strong> ( tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "SCRIPT" ) ||
<a id="L589" name="L589"></a> 589                  tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "STYLE" ) ) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590                 <strong class="reserved">if</strong> ( _xhtml ) <em class="brace">{</em>
<a id="L591" name="L591"></a> 591                     <em class="comment">// XHTML: Print contents as CDATA section</em>
<a id="L592" name="L592"></a> 592                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.doCData = <strong class="reserved">true</strong>;
<a id="L593" name="L593"></a> 593                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L594" name="L594"></a> 594                     <em class="comment">// HTML: Print contents unescaped</em>
<a id="L595" name="L595"></a> 595                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.unescaped = <strong class="reserved">true</strong>;
<a id="L596" name="L596"></a> 596                 <em class="brace">}</em>
<a id="L597" name="L597"></a> 597             <em class="brace">}</em>
<a id="L598" name="L598"></a> 598         <em class="brace">}</em> <strong class="reserved">catch</strong> ( <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> ) <em class="brace">{</em>
<a id="L599" name="L599"></a> 599             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>( <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a> );
<a id="L600" name="L600"></a> 600         <em class="brace">}</em>
<a id="L601" name="L601"></a> 601     <em class="brace">}</em>
<a id="L602" name="L602"></a> 602 
<a id="L603" name="L603"></a> 603 
<a id="L604" name="L604"></a> 604     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> tagName )
<a id="L605" name="L605"></a> 605         <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L606" name="L606"></a> 606     <em class="brace">{</em>
<a id="L607" name="L607"></a> 607         <a href="../D/15448.html" title="Multiple defined in 90 places.">endElement</a>( <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, tagName );
<a id="L608" name="L608"></a> 608     <em class="brace">}</em>
<a id="L609" name="L609"></a> 609 
<a id="L610" name="L610"></a> 610 
<a id="L611" name="L611"></a> 611     <em class="comment">//------------------------------------------//</em>
<a id="L612" name="L612"></a> 612     <em class="comment">// Generic node serializing methods methods //</em>
<a id="L613" name="L613"></a> 613     <em class="comment">//------------------------------------------//</em>
<a id="L614" name="L614"></a> 614 
<a id="L615" name="L615"></a> 615 
<div class="comment">
      Called to serialize the document's DOCTYPE by the root element.
      The document type declaration must name the root element,
      but the root element is only known when that element is serialized,
      and not at the start of the document.
      <p>
      This method will check if it has not been called before ({@link #_started}),
      will serialize the document type declaration, and will serialize all
      pre-root comments and PIs that were accumulated in the document
      (see {@link #serializePreRoot}). Pre-root will be serialized even if
      this is not the first root element of the document.</p></div>
<a id="L628" name="L628"></a> 628     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/28800.html" title="Multiple referred from 67 places.">startDocument</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rootTagName )
<a id="L629" name="L629"></a> 629         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L630" name="L630"></a> 630     <em class="brace">{</em>
<a id="L631" name="L631"></a> 631         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>;
<a id="L632" name="L632"></a> 632 
<a id="L633" name="L633"></a> 633         <em class="comment">// Not supported in HTML/XHTML, but we still have to switch</em>
<a id="L634" name="L634"></a> 634         <em class="comment">// out of DTD mode.</em>
<a id="L635" name="L635"></a> 635         _printer.<a href="../D/26797.html" title="Multiple defined in 2 places.">leaveDTD</a>();
<a id="L636" name="L636"></a> 636         <strong class="reserved">if</strong> ( ! _started ) <em class="brace">{</em>
<a id="L637" name="L637"></a> 637             <em class="comment">// If the public and system identifiers were not specified</em>
<a id="L638" name="L638"></a> 638             <em class="comment">// in the output format, use the appropriate ones for HTML</em>
<a id="L639" name="L639"></a> 639             <em class="comment">// or XHTML.</em>
<a id="L640" name="L640"></a> 640             <strong class="reserved">if</strong> ( _docTypePublicId == <strong class="reserved">null</strong> &amp;&amp; _docTypeSystemId == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L641" name="L641"></a> 641                 <strong class="reserved">if</strong> ( _xhtml ) <em class="brace">{</em>
<a id="L642" name="L642"></a> 642                     _docTypePublicId = <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.XHTMLPublicId;
<a id="L643" name="L643"></a> 643                     _docTypeSystemId = <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.XHTMLSystemId;
<a id="L644" name="L644"></a> 644                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L645" name="L645"></a> 645                     _docTypePublicId = <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.HTMLPublicId;
<a id="L646" name="L646"></a> 646                     _docTypeSystemId = <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.HTMLSystemId;
<a id="L647" name="L647"></a> 647                 <em class="brace">}</em>
<a id="L648" name="L648"></a> 648             <em class="brace">}</em>
<a id="L649" name="L649"></a> 649 
<a id="L650" name="L650"></a> 650             <strong class="reserved">if</strong> ( ! _format.<a href="../S/5804.html#L576" title="Defined at 576 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">getOmitDocumentType</a>() ) <em class="brace">{</em>
<a id="L651" name="L651"></a> 651                 <em class="comment">// XHTML: If public identifier and system identifier</em>
<a id="L652" name="L652"></a> 652                 <em class="comment">//  specified, print them, else print just system identifier</em>
<a id="L653" name="L653"></a> 653                 <em class="comment">// HTML: If public identifier specified, print it with</em>
<a id="L654" name="L654"></a> 654                 <em class="comment">//  system identifier, if specified.</em>
<a id="L655" name="L655"></a> 655                 <em class="comment">// XHTML requires that all element names are lower case, so the</em>
<a id="L656" name="L656"></a> 656                 <em class="comment">// root on the DOCTYPE must be 'html'. - mrglavas</em>
<a id="L657" name="L657"></a> 657                 <strong class="reserved">if</strong> ( _docTypePublicId != <strong class="reserved">null</strong> &amp;&amp; ( ! _xhtml || _docTypeSystemId != <strong class="reserved">null</strong> )  ) <em class="brace">{</em>
<a id="L658" name="L658"></a> 658                     <strong class="reserved">if</strong> (_xhtml) <em class="brace">{</em>
<a id="L659" name="L659"></a> 659                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "&lt;!DOCTYPE html PUBLIC " );
<a id="L660" name="L660"></a> 660                     <em class="brace">}</em>
<a id="L661" name="L661"></a> 661                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L662" name="L662"></a> 662                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "&lt;!DOCTYPE HTML PUBLIC " );
<a id="L663" name="L663"></a> 663                     <em class="brace">}</em>
<a id="L664" name="L664"></a> 664                     <a href="../S/5797.html#L1724" title="Defined at 1724 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">printDoctypeURL</a>( _docTypePublicId );
<a id="L665" name="L665"></a> 665                     <strong class="reserved">if</strong> ( _docTypeSystemId != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L666" name="L666"></a> 666                         <strong class="reserved">if</strong> ( _indenting ) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667                             _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L668" name="L668"></a> 668                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "                      " );
<a id="L669" name="L669"></a> 669                         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L670" name="L670"></a> 670                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( ' ' );
<a id="L671" name="L671"></a> 671                         <a href="../S/5797.html#L1724" title="Defined at 1724 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">printDoctypeURL</a>( _docTypeSystemId );
<a id="L672" name="L672"></a> 672                     <em class="brace">}</em>
<a id="L673" name="L673"></a> 673                     _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L674" name="L674"></a> 674                     _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L675" name="L675"></a> 675                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( _docTypeSystemId != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L676" name="L676"></a> 676                     <strong class="reserved">if</strong> (_xhtml) <em class="brace">{</em>
<a id="L677" name="L677"></a> 677                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "&lt;!DOCTYPE html SYSTEM " );
<a id="L678" name="L678"></a> 678                     <em class="brace">}</em>
<a id="L679" name="L679"></a> 679                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "&lt;!DOCTYPE HTML SYSTEM " );
<a id="L681" name="L681"></a> 681                     <em class="brace">}</em>
<a id="L682" name="L682"></a> 682                     <a href="../S/5797.html#L1724" title="Defined at 1724 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">printDoctypeURL</a>( _docTypeSystemId );
<a id="L683" name="L683"></a> 683                     _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L684" name="L684"></a> 684                     _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L685" name="L685"></a> 685                 <em class="brace">}</em>
<a id="L686" name="L686"></a> 686             <em class="brace">}</em>
<a id="L687" name="L687"></a> 687         <em class="brace">}</em>
<a id="L688" name="L688"></a> 688 
<a id="L689" name="L689"></a> 689         _started = <strong class="reserved">true</strong>;
<a id="L690" name="L690"></a> 690         <em class="comment">// Always serialize these, even if not te first root element.</em>
<a id="L691" name="L691"></a> 691         <a href="../S/5797.html#L1502" title="Defined at 1502 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">serializePreRoot</a>();
<a id="L692" name="L692"></a> 692     <em class="brace">}</em>
<a id="L693" name="L693"></a> 693 
<a id="L694" name="L694"></a> 694 
<div class="comment">
      Called to serialize a DOM element. Equivalent to calling {@link
      #startElement}, {@link #endElement} and serializing everything
      inbetween, but better optimized.</div>
<a id="L700" name="L700"></a> 700     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/26811.html" title="Multiple referred from 2 places.">serializeElement</a>( <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem )
<a id="L701" name="L701"></a> 701         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L702" name="L702"></a> 702     <em class="brace">{</em>
<a id="L703" name="L703"></a> 703         <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>         <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>;
<a id="L704" name="L704"></a> 704         <a href="../S/114.html#L56" title="Defined at 56 in src/org/w3c/dom/NamedNodeMap.java.">NamedNodeMap</a> attrMap;
<a id="L705" name="L705"></a> 705         <strong class="reserved">int</strong>          i;
<a id="L706" name="L706"></a> 706         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>         child;
<a id="L707" name="L707"></a> 707         <a href="../S/5795.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/serialize/ElementState.java.">ElementState</a> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L708" name="L708"></a> 708         <strong class="reserved">boolean</strong>      preserveSpace;
<a id="L709" name="L709"></a> 709         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L710" name="L710"></a> 710         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L711" name="L711"></a> 711         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>       tagName;
<a id="L712" name="L712"></a> 712 
<a id="L713" name="L713"></a> 713         tagName = elem.<a href="../D/22989.html" title="Multiple defined in 9 places.">getTagName</a>();
<a id="L714" name="L714"></a> 714         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1815" title="Defined at 1815 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">getElementState</a>();
<a id="L715" name="L715"></a> 715         <strong class="reserved">if</strong> ( <a href="../S/5797.html#L1893" title="Defined at 1893 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">isDocumentState</a>() ) <em class="brace">{</em>
<a id="L716" name="L716"></a> 716             <em class="comment">// If this is the root element handle it differently.</em>
<a id="L717" name="L717"></a> 717             <em class="comment">// If the first root element in the document, serialize</em>
<a id="L718" name="L718"></a> 718             <em class="comment">// the document's DOCTYPE. Space preserving defaults</em>
<a id="L719" name="L719"></a> 719             <em class="comment">// to that of the output format.</em>
<a id="L720" name="L720"></a> 720             <strong class="reserved">if</strong> ( ! _started )
<a id="L721" name="L721"></a> 721                 <a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>( tagName );
<a id="L722" name="L722"></a> 722         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L723" name="L723"></a> 723             <em class="comment">// For any other element, if first in parent, then</em>
<a id="L724" name="L724"></a> 724             <em class="comment">// close parent's opening tag and use the parnet's</em>
<a id="L725" name="L725"></a> 725             <em class="comment">// space preserving.</em>
<a id="L726" name="L726"></a> 726             <strong class="reserved">if</strong> ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> )
<a id="L727" name="L727"></a> 727                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L728" name="L728"></a> 728             <em class="comment">// Indent this element on a new line if the first</em>
<a id="L729" name="L729"></a> 729             <em class="comment">// content of the parent element or immediately</em>
<a id="L730" name="L730"></a> 730             <em class="comment">// following an element.</em>
<a id="L731" name="L731"></a> 731             <strong class="reserved">if</strong> ( _indenting &amp;&amp; ! <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace &amp;&amp;
<a id="L732" name="L732"></a> 732                  ( <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> || <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.afterElement ) )
<a id="L733" name="L733"></a> 733                 _printer.<a href="../D/11915.html" title="Multiple defined in 4 places.">breakLine</a>();
<a id="L734" name="L734"></a> 734         <em class="brace">}</em>
<a id="L735" name="L735"></a> 735         preserveSpace = <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.preserveSpace;
<a id="L736" name="L736"></a> 736 
<a id="L737" name="L737"></a> 737         <em class="comment">// Do not change the current element state yet.</em>
<a id="L738" name="L738"></a> 738         <em class="comment">// This only happens in endElement().</em>
<a id="L739" name="L739"></a> 739 
<a id="L740" name="L740"></a> 740         <em class="comment">// XHTML: element names are lower case, DOM will be different</em>
<a id="L741" name="L741"></a> 741         _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&lt;' );
<a id="L742" name="L742"></a> 742         <strong class="reserved">if</strong> ( _xhtml )
<a id="L743" name="L743"></a> 743             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( tagName.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH) );
<a id="L744" name="L744"></a> 744         <strong class="reserved">else</strong>
<a id="L745" name="L745"></a> 745             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( tagName );
<a id="L746" name="L746"></a> 746         _printer.<a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a>();
<a id="L747" name="L747"></a> 747 
<a id="L748" name="L748"></a> 748         <em class="comment">// Lookup the element's attribute, but only print specified</em>
<a id="L749" name="L749"></a> 749         <em class="comment">// attributes. (Unspecified attributes are derived from the DTD.</em>
<a id="L750" name="L750"></a> 750         <em class="comment">// For each attribute print it's name and value as one part,</em>
<a id="L751" name="L751"></a> 751         <em class="comment">// separated with a space so the element can be broken on</em>
<a id="L752" name="L752"></a> 752         <em class="comment">// multiple lines.</em>
<a id="L753" name="L753"></a> 753         attrMap = elem.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L754" name="L754"></a> 754         <strong class="reserved">if</strong> ( attrMap != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L755" name="L755"></a> 755             <strong class="reserved">for</strong> ( i = 0 ; i &lt; attrMap.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() ; ++i ) <em class="brace">{</em>
<a id="L756" name="L756"></a> 756                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>) attrMap.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>( i );
<a id="L757" name="L757"></a> 757                 <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH);
<a id="L758" name="L758"></a> 758                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L759" name="L759"></a> 759                 <strong class="reserved">if</strong> ( <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/22666.html" title="Multiple defined in 7 places.">getSpecified</a>() ) <em class="brace">{</em>
<a id="L760" name="L760"></a> 760                     _printer.<a href="../D/29701.html" title="Multiple defined in 3 places.">printSpace</a>();
<a id="L761" name="L761"></a> 761                     <strong class="reserved">if</strong> ( _xhtml ) <em class="brace">{</em>
<a id="L762" name="L762"></a> 762                         <em class="comment">// XHTML: print empty string for null values.</em>
<a id="L763" name="L763"></a> 763                         <strong class="reserved">if</strong> ( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L765" name="L765"></a> 765                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"\"" );
<a id="L766" name="L766"></a> 766                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L767" name="L767"></a> 767                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L768" name="L768"></a> 768                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L769" name="L769"></a> 769                             <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L770" name="L770"></a> 770                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L771" name="L771"></a> 771                         <em class="brace">}</em>
<a id="L772" name="L772"></a> 772                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L773" name="L773"></a> 773                         <em class="comment">// HTML: Empty values print as attribute name, no value.</em>
<a id="L774" name="L774"></a> 774                         <em class="comment">// HTML: URI attributes will print unescaped</em>
<a id="L775" name="L775"></a> 775                         <strong class="reserved">if</strong> ( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L776" name="L776"></a> 776                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = "";
<a id="L777" name="L777"></a> 777                         <em class="brace">}</em>
<a id="L778" name="L778"></a> 778                         <strong class="reserved">if</strong> ( !_format.<a href="../S/5804.html#L815" title="Defined at 815 in src/com/sun/org/apache/xml/internal/serialize/OutputFormat.java.">getPreserveEmptyAttributes</a>() &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 )
<a id="L779" name="L779"></a> 779                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L780" name="L780"></a> 780                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L284" title="Defined at 284 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isURI</a>( tagName, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> ) ) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L782" name="L782"></a> 782                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L783" name="L783"></a> 783                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../S/5798.html#L867" title="Defined at 867 in src/com/sun/org/apache/xml/internal/serialize/HTMLSerializer.java.">escapeURI</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> ) );
<a id="L784" name="L784"></a> 784                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L785" name="L785"></a> 785                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../D/25254.html" title="Multiple defined in 2 places.">isBoolean</a>( tagName, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> ) )
<a id="L786" name="L786"></a> 786                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L787" name="L787"></a> 787                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L788" name="L788"></a> 788                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> );
<a id="L789" name="L789"></a> 789                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( "=\"" );
<a id="L790" name="L790"></a> 790                             <a href="../D/29660.html" title="Multiple defined in 4 places.">printEscaped</a>( <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> );
<a id="L791" name="L791"></a> 791                             _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '"' );
<a id="L792" name="L792"></a> 792                         <em class="brace">}</em>
<a id="L793" name="L793"></a> 793                     <em class="brace">}</em>
<a id="L794" name="L794"></a> 794                 <em class="brace">}</em>
<a id="L795" name="L795"></a> 795             <em class="brace">}</em>
<a id="L796" name="L796"></a> 796         <em class="brace">}</em>
<a id="L797" name="L797"></a> 797         <strong class="reserved">if</strong> ( <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L207" title="Defined at 207 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isPreserveSpace</a>( tagName ) )
<a id="L798" name="L798"></a> 798             preserveSpace = <strong class="reserved">true</strong>;
<a id="L799" name="L799"></a> 799 
<a id="L800" name="L800"></a> 800         <em class="comment">// If element has children, or if element is not an empty tag,</em>
<a id="L801" name="L801"></a> 801         <em class="comment">// serialize an opening tag.</em>
<a id="L802" name="L802"></a> 802         <strong class="reserved">if</strong> ( elem.<a href="../D/24077.html" title="Multiple defined in 16 places.">hasChildNodes</a>() || ! <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L179" title="Defined at 179 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">isEmptyTag</a>( tagName ) ) <em class="brace">{</em>
<a id="L803" name="L803"></a> 803             <em class="comment">// Enter an element state, and serialize the children</em>
<a id="L804" name="L804"></a> 804             <em class="comment">// one by one. Finally, end the element.</em>
<a id="L805" name="L805"></a> 805             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../S/5797.html#L1828" title="Defined at 1828 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">enterElementState</a>( <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, tagName, preserveSpace );
<a id="L806" name="L806"></a> 806 
<a id="L807" name="L807"></a> 807             <em class="comment">// Prevents line breaks inside A/TD</em>
<a id="L808" name="L808"></a> 808             <strong class="reserved">if</strong> ( tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "A" ) || tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "TD" ) ) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809                 <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> = <strong class="reserved">false</strong>;
<a id="L810" name="L810"></a> 810                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L811" name="L811"></a> 811             <em class="brace">}</em>
<a id="L812" name="L812"></a> 812 
<a id="L813" name="L813"></a> 813             <em class="comment">// Handle SCRIPT and STYLE specifically by changing the</em>
<a id="L814" name="L814"></a> 814             <em class="comment">// state of the current element to CDATA (XHTML) or</em>
<a id="L815" name="L815"></a> 815             <em class="comment">// unescaped (HTML).</em>
<a id="L816" name="L816"></a> 816             <strong class="reserved">if</strong> ( tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "SCRIPT" ) ||
<a id="L817" name="L817"></a> 817                  tagName.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>( "STYLE" ) ) <em class="brace">{</em>
<a id="L818" name="L818"></a> 818                 <strong class="reserved">if</strong> ( _xhtml ) <em class="brace">{</em>
<a id="L819" name="L819"></a> 819                     <em class="comment">// XHTML: Print contents as CDATA section</em>
<a id="L820" name="L820"></a> 820                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.doCData = <strong class="reserved">true</strong>;
<a id="L821" name="L821"></a> 821                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L822" name="L822"></a> 822                     <em class="comment">// HTML: Print contents unescaped</em>
<a id="L823" name="L823"></a> 823                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.unescaped = <strong class="reserved">true</strong>;
<a id="L824" name="L824"></a> 824                 <em class="brace">}</em>
<a id="L825" name="L825"></a> 825             <em class="brace">}</em>
<a id="L826" name="L826"></a> 826             child = elem.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L827" name="L827"></a> 827             <strong class="reserved">while</strong> ( child != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L828" name="L828"></a> 828                 <a href="../D/31789.html" title="Multiple defined in 2 places.">serializeNode</a>( child );
<a id="L829" name="L829"></a> 829                 child = child.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L830" name="L830"></a> 830             <em class="brace">}</em>
<a id="L831" name="L831"></a> 831             <a href="../D/15449.html" title="Multiple defined in 3 places.">endElementIO</a>( <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, tagName );
<a id="L832" name="L832"></a> 832         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L833" name="L833"></a> 833             _printer.<a href="../D/35857.html" title="Multiple defined in 2 places.">unindent</a>();
<a id="L834" name="L834"></a> 834             <em class="comment">// XHTML: Close empty tag with ' /&gt;' so it's XML and HTML compatible.</em>
<a id="L835" name="L835"></a> 835             <em class="comment">// HTML: Empty tags are defined as such in DTD no in document.</em>
<a id="L836" name="L836"></a> 836             <strong class="reserved">if</strong> ( _xhtml )
<a id="L837" name="L837"></a> 837                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( " /&gt;" );
<a id="L838" name="L838"></a> 838             <strong class="reserved">else</strong>
<a id="L839" name="L839"></a> 839                 _printer.<a href="../D/29710.html" title="Multiple defined in 15 places.">printText</a>( '&gt;' );
<a id="L840" name="L840"></a> 840             <em class="comment">// After element but parent element is no longer empty.</em>
<a id="L841" name="L841"></a> 841             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.afterElement = <strong class="reserved">true</strong>;
<a id="L842" name="L842"></a> 842             <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>.<a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> = <strong class="reserved">false</strong>;
<a id="L843" name="L843"></a> 843             <strong class="reserved">if</strong> ( <a href="../S/5797.html#L1893" title="Defined at 1893 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">isDocumentState</a>() )
<a id="L844" name="L844"></a> 844                 _printer.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L845" name="L845"></a> 845         <em class="brace">}</em>
<a id="L846" name="L846"></a> 846     <em class="brace">}</em>
<a id="L847" name="L847"></a> 847 
<a id="L848" name="L848"></a> 848 
<a id="L849" name="L849"></a> 849 
<a id="L850" name="L850"></a> 850     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> )
<a id="L851" name="L851"></a> 851         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L852" name="L852"></a> 852     <em class="brace">{</em>
<a id="L853" name="L853"></a> 853         <a href="../S/5795.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/serialize/ElementState.java.">ElementState</a> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L854" name="L854"></a> 854 
<a id="L855" name="L855"></a> 855         <em class="comment">// HTML: no CDATA section</em>
<a id="L856" name="L856"></a> 856         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <a href="../D/13364.html" title="Multiple defined in 2 places.">content</a>();
<a id="L857" name="L857"></a> 857         <strong class="reserved">super</strong>.<a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>( <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> );
<a id="L858" name="L858"></a> 858     <em class="brace">}</em>
<a id="L859" name="L859"></a> 859 
<a id="L860" name="L860"></a> 860 
<a id="L861" name="L861"></a> 861     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/5797.html#L1749" title="Referred from 1749 in src/com/sun/org/apache/xml/internal/serialize/BaseMarkupSerializer.java.">getEntityRef</a>( <strong class="reserved">int</strong> ch )
<a id="L862" name="L862"></a> 862     <em class="brace">{</em>
<a id="L863" name="L863"></a> 863         <strong class="reserved">return</strong> <a href="../S/5806.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">HTMLdtd</a>.<a href="../S/5806.html#L342" title="Defined at 342 in src/com/sun/org/apache/xml/internal/serialize/HTMLdtd.java.">fromChar</a>( ch );
<a id="L864" name="L864"></a> 864     <em class="brace">}</em>
<a id="L865" name="L865"></a> 865 
<a id="L866" name="L866"></a> 866 
<a id="L867" name="L867"></a> 867     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14037.html" title="Multiple referred from 3 places.">escapeURI</a>( <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri )
<a id="L868" name="L868"></a> 868     <em class="brace">{</em>
<a id="L869" name="L869"></a> 869         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L870" name="L870"></a> 870 
<a id="L871" name="L871"></a> 871         <em class="comment">// XXX  Apparently Netscape doesn't like if we escape the URI</em>
<a id="L872" name="L872"></a> 872         <em class="comment">//      using %nn, so we leave it as is, just remove any quotes.</em>
<a id="L873" name="L873"></a> 873         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = uri.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( "\"" );
<a id="L874" name="L874"></a> 874         <strong class="reserved">if</strong> ( <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0 )
<a id="L875" name="L875"></a> 875             <strong class="reserved">return</strong> uri.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>( 0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> );
<a id="L876" name="L876"></a> 876         <strong class="reserved">else</strong>
<a id="L877" name="L877"></a> 877             <strong class="reserved">return</strong> uri;
<a id="L878" name="L878"></a> 878     <em class="brace">}</em>
<a id="L879" name="L879"></a> 879 
<a id="L880" name="L880"></a> 880 
<a id="L881" name="L881"></a> 881 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L180">[^]</a><a href="#L867">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
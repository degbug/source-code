<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/PriorityBlockingQueue.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L108">[^]</a><a href="#L1026">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L108" title="Defined at 108.">SuppressWarnings</a></li>
<li><a href="#L288" title="Defined at 288.">tryGrow</a></li>
<li><a href="#L322" title="Defined at 322.">dequeue</a></li>
<li><a href="#L356" title="Defined at 356.">siftUpComparable</a></li>
<li><a href="#L369" title="Defined at 369.">siftUpUsingComparator</a></li>
<li><a href="#L392" title="Defined at 392.">siftDownComparable</a></li>
<li><a href="#L413" title="Defined at 413.">siftDownUsingComparator</a></li>
<li><a href="#L437" title="Defined at 437.">heapify</a></li>
<li><a href="#L462" title="Defined at 462.">add</a></li>
<li><a href="#L477" title="Defined at 477.">offer</a></li>
<li><a href="#L510" title="Defined at 510.">put</a></li>
<li><a href="#L529" title="Defined at 529.">offer</a></li>
<li><a href="#L533" title="Defined at 533.">poll</a></li>
<li><a href="#L543" title="Defined at 543.">take</a></li>
<li><a href="#L556" title="Defined at 556.">poll</a></li>
<li><a href="#L570" title="Defined at 570.">peek</a></li>
<li><a href="#L589" title="Defined at 589.">comparator</a></li>
<li><a href="#L593" title="Defined at 593.">size</a></li>
<li><a href="#L608" title="Defined at 608.">remainingCapacity</a></li>
<li><a href="#L612" title="Defined at 612.">indexOf</a></li>
<li><a href="#L626" title="Defined at 626.">removeAt</a></li>
<li><a href="#L660" title="Defined at 660.">remove</a></li>
<li><a href="#L677" title="Defined at 677.">removeEQ</a></li>
<li><a href="#L701" title="Defined at 701.">contains</a></li>
<li><a href="#L724" title="Defined at 724.">toArray</a></li>
<li><a href="#L734" title="Defined at 734.">toString</a></li>
<li><a href="#L761" title="Defined at 761.">drainTo</a></li>
<li><a href="#L771" title="Defined at 771.">drainTo</a></li>
<li><a href="#L796" title="Defined at 796.">clear</a></li>
<li><a href="#L846" title="Defined at 846.">toArray</a></li>
<li><a href="#L872" title="Defined at 872.">iterator</a></li>
<li><a href="#L889" title="Defined at 889.">hasNext</a></li>
<li><a href="#L893" title="Defined at 893.">next</a></li>
<li><a href="#L900" title="Defined at 900.">remove</a></li>
<li><a href="#L918" title="Defined at 918.">writeObject</a></li>
<li><a href="#L939" title="Defined at 939.">readObject</a></li>
<li><a href="#L967" title="Defined at 967.">getFence</a></li>
<li><a href="#L974" title="Defined at 974.">trySplit</a></li>
<li><a href="#L980" title="Defined at 980.">SuppressWarnings</a></li>
<li><a href="#L981" title="Defined at 981.">forEachRemaining</a></li>
<li><a href="#L993" title="Defined at 993.">tryAdvance</a></li>
<li><a href="#L1004" title="Defined at 1004.">estimateSize</a></li>
<li><a href="#L1006" title="Defined at 1006.">characteristics</a></li>
<li><a href="#L1026" title="Defined at 1026.">spliterator</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent;
<a id="L37" name="L37"></a>  37 
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.concurrent.locks.Condition;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.util.concurrent.locks.ReentrantLock;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.util.AbstractQueue;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.util.Collection;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.util.Comparator;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.util.NoSuchElementException;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> java.util.PriorityQueue;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> java.util.Queue;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> java.util.SortedSet;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> java.util.Spliterator;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> java.util.function.Consumer;
<a id="L51" name="L51"></a>  51 
<div class="comment">
  An unbounded {@linkplain BlockingQueue blocking queue} that uses
  the same ordering rules as class <a href="../S/998.html#L82" title="Defined at 82 in src/java/util/PriorityQueue.java.">PriorityQueue</a> and supplies
  blocking retrieval operations.  While this queue is logically
  unbounded, attempted additions may fail due to resource exhaustion
  (causing <code>OutOfMemoryError</code>). This class does not permit
  <code>null</code> elements.  A priority queue relying on {@linkplain
  Comparable natural ordering} also does not permit insertion of
  non-comparable objects (doing so results in
  <code>ClassCastException</code>).
  <p>This class and its iterator implement all of the
  <em>optional</em> methods of the <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a> and {@link
  Iterator} interfaces.  The Iterator provided in method {@link
  #iterator()} is <em>not</em> guaranteed to traverse the elements of
  the PriorityBlockingQueue in any particular order. If you need
  ordered traversal, consider using
  <code>Arrays.sort(pq.toArray())</code>.  Also, method <code>drainTo</code>
  can be used to <em>remove</em> some or all elements in priority
  order and place them in another collection.
  </p><p>Operations on this class make no guarantees about the ordering
  of elements with equal priority. If you need to enforce an
  ordering, you can define custom classes or comparators that use a
  secondary key to break ties in primary priority values.  For
  example, here is a class that applies first-in-first-out
  tie-breaking to comparable elements. To use it, you would insert a
  <code>new FIFOEntry(anEntry)</code> instead of a plain entry object.
   </p><pre> {@code
  class FIFOEntry<e extends comparable<? super e>&gt;
      implements Comparable<fifoentry><e>&gt; {
    static final AtomicLong seq = new AtomicLong(0);
    final long seqNum;
    final E entry;
    public FIFOEntry(E entry) {
      seqNum = seq.getAndIncrement();
      this.entry = entry;
    }
    public E getEntry() { return entry; }
    public int compareTo(FIFOEntry<e> other) {
      int res = entry.compareTo(other.entry);
      if (res == 0 &amp;&amp; other.entry != this.entry)
        res = (seqNum &lt; other.seqNum ? -1 : 1);
      return res;
    }
  }}</e></e></fifoentry></e></pre>
  <p>This class is a member of the
  <a href="{@docRoot}/../technotes/guides/collections/index.html">
  Java Collections Framework</a>.
  @since 1.5
  @author Doug Lea
  @param <e> the type of elements held in this collection</e></p></div>
<a id="L108" name="L108"></a> 108 @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L109" name="L109"></a> 109 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6264.html" title="Multiple referred from 7 places.">PriorityBlockingQueue</a>&lt;E&gt; <strong class="reserved">extends</strong> <a href="../S/994.html#L64" title="Defined at 64 in src/java/util/AbstractQueue.java.">AbstractQueue</a>&lt;E&gt;
<a id="L110" name="L110"></a> 110     <strong class="reserved">implements</strong> <a href="../S/1109.html#L180" title="Defined at 180 in src/java/util/concurrent/BlockingQueue.java.">BlockingQueue</a>&lt;E&gt;, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L111" name="L111"></a> 111     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 5595510919245408276L;
<a id="L112" name="L112"></a> 112 
<div class="comment">
      The implementation uses an array-based binary heap, with public
      operations protected with a single lock. However, allocation
      during resizing uses a simple spinlock (used only while not
      holding main lock) in order to allow takes to operate
      concurrently with allocation.  This avoids repeated
      postponement of waiting consumers and consequent element
      build-up. The need to back away from lock during allocation
      makes it impossible to simply wrap delegated
      java.util.PriorityQueue operations within a lock, as was done
      in a previous version of this class. To maintain
      interoperability, a plain PriorityQueue is still used during
      serialization, which maintains compatibility at the expense of
      transiently doubling overhead.</div>
<a id="L128" name="L128"></a> 128 
<div class="comment">
      Default array capacity.</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DEFAULT_INITIAL_CAPACITY = 11;
<a id="L133" name="L133"></a> 133 
<div class="comment">
      The maximum size of array to allocate.
      Some VMs reserve some header words in an array.
      Attempts to allocate larger arrays may result in
      OutOfMemoryError: Requested array size exceeds VM limit</div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_ARRAY_SIZE = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE - 8;
<a id="L141" name="L141"></a> 141 
<div class="comment">
      Priority queue represented as a balanced binary heap: the two
      children of queue[n] are queue[2*n+1] and queue[2*(n+1)].  The
      priority queue is ordered by comparator, or by the elements'
      natural ordering, if comparator is null: For each node n in the
      heap and each descendant d of n, n &lt;= d.  The element with the
      lowest value is in queue[0], assuming the queue is nonempty.</div>
<a id="L150" name="L150"></a> 150     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] queue;
<a id="L151" name="L151"></a> 151 
<div class="comment">
      The number of elements in the priority queue.</div>
<a id="L155" name="L155"></a> 155     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L156" name="L156"></a> 156 
<div class="comment">
      The comparator, or null if priority queue uses elements'
      natural ordering.</div>
<a id="L161" name="L161"></a> 161     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L162" name="L162"></a> 162 
<div class="comment">
      Lock used for all public operations</div>
<a id="L166" name="L166"></a> 166     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L167" name="L167"></a> 167 
<div class="comment">
      Condition for blocking when empty</div>
<a id="L171" name="L171"></a> 171     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> notEmpty;
<a id="L172" name="L172"></a> 172 
<div class="comment">
      Spinlock for allocation, acquired via CAS.</div>
<a id="L176" name="L176"></a> 176     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <strong class="reserved">int</strong> allocationSpinLock;
<a id="L177" name="L177"></a> 177 
<div class="comment">
      A plain PriorityQueue used only for serialization,
      to maintain compatibility with previous versions
      of this class. Non-null only during serialization/deserialization.</div>
<a id="L183" name="L183"></a> 183     <strong class="reserved">private</strong> <a href="../S/998.html#L82" title="Defined at 82 in src/java/util/PriorityQueue.java.">PriorityQueue</a>&lt;E&gt; q;
<a id="L184" name="L184"></a> 184 
<div class="comment">
      Creates a <code>PriorityBlockingQueue</code> with the default
      initial capacity (11) that orders its elements according to
      their {@linkplain Comparable natural ordering}.</div>
<a id="L190" name="L190"></a> 190     <strong class="reserved">public</strong> PriorityBlockingQueue() <em class="brace">{</em>
<a id="L191" name="L191"></a> 191         <strong class="reserved">this</strong>(DEFAULT_INITIAL_CAPACITY, <strong class="reserved">null</strong>);
<a id="L192" name="L192"></a> 192     <em class="brace">}</em>
<a id="L193" name="L193"></a> 193 
<div class="comment">
      Creates a <code>PriorityBlockingQueue</code> with the specified
      initial capacity that orders its elements according to their
      {@linkplain Comparable natural ordering}.
      @param initialCapacity the initial capacity for this priority queue
      @throws IllegalArgumentException if <code>initialCapacity</code> is less
              than 1</div>
<a id="L203" name="L203"></a> 203     <strong class="reserved">public</strong> PriorityBlockingQueue(<strong class="reserved">int</strong> initialCapacity) <em class="brace">{</em>
<a id="L204" name="L204"></a> 204         <strong class="reserved">this</strong>(initialCapacity, <strong class="reserved">null</strong>);
<a id="L205" name="L205"></a> 205     <em class="brace">}</em>
<a id="L206" name="L206"></a> 206 
<div class="comment">
      Creates a <code>PriorityBlockingQueue</code> with the specified initial
      capacity that orders its elements according to the specified
      comparator.
      @param initialCapacity the initial capacity for this priority queue
      @param  comparator the comparator that will be used to order this
              priority queue.  If <code>null</code>, the {@linkplain Comparable
              natural ordering} of the elements will be used.
      @throws IllegalArgumentException if <code>initialCapacity</code> is less
              than 1</div>
<a id="L219" name="L219"></a> 219     <strong class="reserved">public</strong> PriorityBlockingQueue(<strong class="reserved">int</strong> initialCapacity,
<a id="L220" name="L220"></a> 220                                  <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>) <em class="brace">{</em>
<a id="L221" name="L221"></a> 221         <strong class="reserved">if</strong> (initialCapacity &lt; 1)
<a id="L222" name="L222"></a> 222             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L223" name="L223"></a> 223         <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">new</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a>();
<a id="L224" name="L224"></a> 224         <strong class="reserved">this</strong>.notEmpty = <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L225" name="L225"></a> 225         <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L226" name="L226"></a> 226         <strong class="reserved">this</strong>.queue = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[initialCapacity];
<a id="L227" name="L227"></a> 227     <em class="brace">}</em>
<a id="L228" name="L228"></a> 228 
<div class="comment">
      Creates a <code>PriorityBlockingQueue</code> containing the elements
      in the specified collection.  If the specified collection is a
      <a href="../S/852.html#L108" title="Defined at 108 in src/java/util/SortedSet.java.">SortedSet</a> or a <a href="../S/998.html#L82" title="Defined at 82 in src/java/util/PriorityQueue.java.">PriorityQueue</a>, this
      priority queue will be ordered according to the same ordering.
      Otherwise, this priority queue will be ordered according to the
      {@linkplain Comparable natural ordering} of its elements.
      @param  c the collection whose elements are to be placed
              into this priority queue
      @throws ClassCastException if elements of the specified collection
              cannot be compared to one another according to the priority
              queue's ordering
      @throws NullPointerException if the specified collection or any
              of its elements are null</div>
<a id="L245" name="L245"></a> 245     <strong class="reserved">public</strong> PriorityBlockingQueue(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">extends</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L246" name="L246"></a> 246         <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">new</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a>();
<a id="L247" name="L247"></a> 247         <strong class="reserved">this</strong>.notEmpty = <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L248" name="L248"></a> 248         <strong class="reserved">boolean</strong> <a href="../D/24228.html" title="Multiple defined in 4 places.">heapify</a> = <strong class="reserved">true</strong>; <em class="comment">// true if not known to be in heap order</em>
<a id="L249" name="L249"></a> 249         <strong class="reserved">boolean</strong> screen = <strong class="reserved">true</strong>;  <em class="comment">// true if must screen for nulls</em>
<a id="L250" name="L250"></a> 250         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> <strong class="reserved">instanceof</strong> <a href="../S/852.html#L108" title="Defined at 108 in src/java/util/SortedSet.java.">SortedSet</a>&lt;?&gt;) <em class="brace">{</em>
<a id="L251" name="L251"></a> 251             <a href="../S/852.html#L108" title="Defined at 108 in src/java/util/SortedSet.java.">SortedSet</a>&lt;? <strong class="reserved">extends</strong> E&gt; ss = (<a href="../S/852.html#L108" title="Defined at 108 in src/java/util/SortedSet.java.">SortedSet</a>&lt;? <strong class="reserved">extends</strong> E&gt;) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L252" name="L252"></a> 252             <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> = (<a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt;) ss.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>();
<a id="L253" name="L253"></a> 253             <a href="../D/24228.html" title="Multiple defined in 4 places.">heapify</a> = <strong class="reserved">false</strong>;
<a id="L254" name="L254"></a> 254         <em class="brace">}</em>
<a id="L255" name="L255"></a> 255         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> <strong class="reserved">instanceof</strong> <a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>&lt;?&gt;) <em class="brace">{</em>
<a id="L256" name="L256"></a> 256             <a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>&lt;? <strong class="reserved">extends</strong> E&gt; pq =
<a id="L257" name="L257"></a> 257                 (<a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>&lt;? <strong class="reserved">extends</strong> E&gt;) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L258" name="L258"></a> 258             <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> = (<a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt;) pq.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>();
<a id="L259" name="L259"></a> 259             screen = <strong class="reserved">false</strong>;
<a id="L260" name="L260"></a> 260             <strong class="reserved">if</strong> (pq.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>() == <a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>.<strong class="reserved">class</strong>) <em class="comment">// exact match</em>
<a id="L261" name="L261"></a> 261                 <a href="../D/24228.html" title="Multiple defined in 4 places.">heapify</a> = <strong class="reserved">false</strong>;
<a id="L262" name="L262"></a> 262         <em class="brace">}</em>
<a id="L263" name="L263"></a> 263         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>();
<a id="L264" name="L264"></a> 264         <strong class="reserved">int</strong> n = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L265" name="L265"></a> 265         <em class="comment">// If c.toArray incorrectly doesn't return Object[], copy it.</em>
<a id="L266" name="L266"></a> 266         <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>() != <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[].<strong class="reserved">class</strong>)
<a id="L267" name="L267"></a> 267             <a href="../R/9491.html" title="Multiple referred from 7296 places.">a</a> = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, n, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[].<strong class="reserved">class</strong>);
<a id="L268" name="L268"></a> 268         <strong class="reserved">if</strong> (screen &amp;&amp; (n == 1 || <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> != <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; ++i)
<a id="L270" name="L270"></a> 270                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i] == <strong class="reserved">null</strong>)
<a id="L271" name="L271"></a> 271                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L272" name="L272"></a> 272         <em class="brace">}</em>
<a id="L273" name="L273"></a> 273         <strong class="reserved">this</strong>.queue = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L274" name="L274"></a> 274         <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = n;
<a id="L275" name="L275"></a> 275         <strong class="reserved">if</strong> (<a href="../D/24228.html" title="Multiple defined in 4 places.">heapify</a>)
<a id="L276" name="L276"></a> 276             <a href="../D/24228.html" title="Multiple defined in 4 places.">heapify</a>();
<a id="L277" name="L277"></a> 277     <em class="brace">}</em>
<a id="L278" name="L278"></a> 278 
<div class="comment">
      Tries to grow array to accommodate at least one more element
      (but normally expand by about 50%), giving up (allowing retry)
      on contention (which we expect to be rare). Call only while
      holding lock.
      @param array the heap array
      @param oldCap the length of the array</div>
<a id="L288" name="L288"></a> 288     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1121.html#L485" title="Referred from 485 in src/java/util/concurrent/PriorityBlockingQueue.java.">tryGrow</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, <strong class="reserved">int</strong> oldCap) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>(); <em class="comment">// must release and then re-acquire main lock</em>
<a id="L290" name="L290"></a> 290         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = <strong class="reserved">null</strong>;
<a id="L291" name="L291"></a> 291         <strong class="reserved">if</strong> (allocationSpinLock == 0 &amp;&amp;
<a id="L292" name="L292"></a> 292             UNSAFE.compareAndSwapInt(<strong class="reserved">this</strong>, allocationSpinLockOffset,
<a id="L293" name="L293"></a> 293                                      0, 1)) <em class="brace">{</em>
<a id="L294" name="L294"></a> 294             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L295" name="L295"></a> 295                 <strong class="reserved">int</strong> newCap = oldCap + ((oldCap &lt; 64) ?
<a id="L296" name="L296"></a> 296                                        (oldCap + 2) : <em class="comment">// grow faster if small</em>
<a id="L297" name="L297"></a> 297                                        (oldCap &gt;&gt; 1));
<a id="L298" name="L298"></a> 298                 <strong class="reserved">if</strong> (newCap - MAX_ARRAY_SIZE &gt; 0) <em class="brace">{</em>    <em class="comment">// possible overflow</em>
<a id="L299" name="L299"></a> 299                     <strong class="reserved">int</strong> minCap = oldCap + 1;
<a id="L300" name="L300"></a> 300                     <strong class="reserved">if</strong> (minCap &lt; 0 || minCap &gt; MAX_ARRAY_SIZE)
<a id="L301" name="L301"></a> 301                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1597.html#L41" title="Defined at 41 in src/java/lang/OutOfMemoryError.java.">OutOfMemoryError</a>();
<a id="L302" name="L302"></a> 302                     newCap = MAX_ARRAY_SIZE;
<a id="L303" name="L303"></a> 303                 <em class="brace">}</em>
<a id="L304" name="L304"></a> 304                 <strong class="reserved">if</strong> (newCap &gt; oldCap &amp;&amp; queue == <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>)
<a id="L305" name="L305"></a> 305                     <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[newCap];
<a id="L306" name="L306"></a> 306             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L307" name="L307"></a> 307                 allocationSpinLock = 0;
<a id="L308" name="L308"></a> 308             <em class="brace">}</em>
<a id="L309" name="L309"></a> 309         <em class="brace">}</em>
<a id="L310" name="L310"></a> 310         <strong class="reserved">if</strong> (<a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> == <strong class="reserved">null</strong>) <em class="comment">// back off if another thread is allocating</em>
<a id="L311" name="L311"></a> 311             <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L282" title="Defined at 282 in src/java/lang/Thread.java.">yield</a>();
<a id="L312" name="L312"></a> 312         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L313" name="L313"></a> 313         <strong class="reserved">if</strong> (<a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> != <strong class="reserved">null</strong> &amp;&amp; queue == <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314             queue = <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>;
<a id="L315" name="L315"></a> 315             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>, 0, oldCap);
<a id="L316" name="L316"></a> 316         <em class="brace">}</em>
<a id="L317" name="L317"></a> 317     <em class="brace">}</em>
<a id="L318" name="L318"></a> 318 
<div class="comment">
      Mechanics for poll().  Call only while holding lock.</div>
<a id="L322" name="L322"></a> 322     <strong class="reserved">private</strong> E <a href="../R/13228.html" title="Multiple referred from 15 places.">dequeue</a>() <em class="brace">{</em>
<a id="L323" name="L323"></a> 323         <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1;
<a id="L324" name="L324"></a> 324         <strong class="reserved">if</strong> (n &lt; 0)
<a id="L325" name="L325"></a> 325             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L326" name="L326"></a> 326         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L327" name="L327"></a> 327             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue;
<a id="L328" name="L328"></a> 328             E <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (E) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[0];
<a id="L329" name="L329"></a> 329             E <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (E) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[n];
<a id="L330" name="L330"></a> 330             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[n] = <strong class="reserved">null</strong>;
<a id="L331" name="L331"></a> 331             <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; cmp = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L332" name="L332"></a> 332             <strong class="reserved">if</strong> (cmp == <strong class="reserved">null</strong>)
<a id="L333" name="L333"></a> 333                 <a href="../D/34548.html" title="Multiple defined in 2 places.">siftDownComparable</a>(0, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, n);
<a id="L334" name="L334"></a> 334             <strong class="reserved">else</strong>
<a id="L335" name="L335"></a> 335                 <a href="../D/34549.html" title="Multiple defined in 2 places.">siftDownUsingComparator</a>(0, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, n, cmp);
<a id="L336" name="L336"></a> 336             <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = n;
<a id="L337" name="L337"></a> 337             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L338" name="L338"></a> 338         <em class="brace">}</em>
<a id="L339" name="L339"></a> 339     <em class="brace">}</em>
<a id="L340" name="L340"></a> 340 
<div class="comment">
      Inserts item x at position k, maintaining heap invariant by
      promoting x up the tree until it is greater than or equal to
      its parent, or is the root.
      To simplify and speed up coercions and comparisons. the
      Comparable and Comparator versions are separated into different
      methods that are otherwise identical. (Similarly for siftDown.)
      These methods are static, with heap state as arguments, to
      simplify use in light of possible comparator exceptions.
      @param k the position to fill
      @param x the item to insert
      @param array the heap array</div>
<a id="L356" name="L356"></a> 356     <strong class="reserved">private</strong> <strong class="reserved">static</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">void</strong> <a href="../R/28598.html" title="Multiple referred from 3 places.">siftUpComparable</a>(<strong class="reserved">int</strong> k, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L357" name="L357"></a> 357         <a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = (<a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;) <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L358" name="L358"></a> 358         <strong class="reserved">while</strong> (k &gt; 0) <em class="brace">{</em>
<a id="L359" name="L359"></a> 359             <strong class="reserved">int</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = (k - 1) &gt;&gt;&gt; 1;
<a id="L360" name="L360"></a> 360             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>];
<a id="L361" name="L361"></a> 361             <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>((<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) e) &gt;= 0)
<a id="L362" name="L362"></a> 362                 <strong class="reserved">break</strong>;
<a id="L363" name="L363"></a> 363             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = e;
<a id="L364" name="L364"></a> 364             k = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L365" name="L365"></a> 365         <em class="brace">}</em>
<a id="L366" name="L366"></a> 366         <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L367" name="L367"></a> 367     <em class="brace">}</em>
<a id="L368" name="L368"></a> 368 
<a id="L369" name="L369"></a> 369     <strong class="reserved">private</strong> <strong class="reserved">static</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">void</strong> <a href="../R/28599.html" title="Multiple referred from 3 places.">siftUpUsingComparator</a>(<strong class="reserved">int</strong> k, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>,
<a id="L370" name="L370"></a> 370                                        <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; cmp) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371         <strong class="reserved">while</strong> (k &gt; 0) <em class="brace">{</em>
<a id="L372" name="L372"></a> 372             <strong class="reserved">int</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = (k - 1) &gt;&gt;&gt; 1;
<a id="L373" name="L373"></a> 373             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>];
<a id="L374" name="L374"></a> 374             <strong class="reserved">if</strong> (cmp.<a href="../D/13032.html" title="Multiple defined in 71 places.">compare</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) e) &gt;= 0)
<a id="L375" name="L375"></a> 375                 <strong class="reserved">break</strong>;
<a id="L376" name="L376"></a> 376             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = e;
<a id="L377" name="L377"></a> 377             k = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L378" name="L378"></a> 378         <em class="brace">}</em>
<a id="L379" name="L379"></a> 379         <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L380" name="L380"></a> 380     <em class="brace">}</em>
<a id="L381" name="L381"></a> 381 
<div class="comment">
      Inserts item x at position k, maintaining heap invariant by
      demoting x down the tree repeatedly until it is less than or
      equal to its children or is a leaf.
      @param k the position to fill
      @param x the item to insert
      @param array the heap array
      @param n heap size</div>
<a id="L392" name="L392"></a> 392     <strong class="reserved">private</strong> <strong class="reserved">static</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">void</strong> <a href="../R/28595.html" title="Multiple referred from 4 places.">siftDownComparable</a>(<strong class="reserved">int</strong> k, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>,
<a id="L393" name="L393"></a> 393                                                <strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L394" name="L394"></a> 394         <strong class="reserved">if</strong> (n &gt; 0) <em class="brace">{</em>
<a id="L395" name="L395"></a> 395             <a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = (<a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;)<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L396" name="L396"></a> 396             <strong class="reserved">int</strong> half = n &gt;&gt;&gt; 1;           <em class="comment">// loop while a non-leaf</em>
<a id="L397" name="L397"></a> 397             <strong class="reserved">while</strong> (k &lt; half) <em class="brace">{</em>
<a id="L398" name="L398"></a> 398                 <strong class="reserved">int</strong> child = (k &lt;&lt; 1) + 1; <em class="comment">// assume left child is least</em>
<a id="L399" name="L399"></a> 399                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[child];
<a id="L400" name="L400"></a> 400                 <strong class="reserved">int</strong> right = child + 1;
<a id="L401" name="L401"></a> 401                 <strong class="reserved">if</strong> (right &lt; n &amp;&amp;
<a id="L402" name="L402"></a> 402                     ((<a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>).<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>((<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[right]) &gt; 0)
<a id="L403" name="L403"></a> 403                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[child = right];
<a id="L404" name="L404"></a> 404                 <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>((<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &lt;= 0)
<a id="L405" name="L405"></a> 405                     <strong class="reserved">break</strong>;
<a id="L406" name="L406"></a> 406                 <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L407" name="L407"></a> 407                 k = child;
<a id="L408" name="L408"></a> 408             <em class="brace">}</em>
<a id="L409" name="L409"></a> 409             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L410" name="L410"></a> 410         <em class="brace">}</em>
<a id="L411" name="L411"></a> 411     <em class="brace">}</em>
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413     <strong class="reserved">private</strong> <strong class="reserved">static</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">void</strong> <a href="../R/28596.html" title="Multiple referred from 4 places.">siftDownUsingComparator</a>(<strong class="reserved">int</strong> k, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>,
<a id="L414" name="L414"></a> 414                                                     <strong class="reserved">int</strong> n,
<a id="L415" name="L415"></a> 415                                                     <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; cmp) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416         <strong class="reserved">if</strong> (n &gt; 0) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417             <strong class="reserved">int</strong> half = n &gt;&gt;&gt; 1;
<a id="L418" name="L418"></a> 418             <strong class="reserved">while</strong> (k &lt; half) <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                 <strong class="reserved">int</strong> child = (k &lt;&lt; 1) + 1;
<a id="L420" name="L420"></a> 420                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[child];
<a id="L421" name="L421"></a> 421                 <strong class="reserved">int</strong> right = child + 1;
<a id="L422" name="L422"></a> 422                 <strong class="reserved">if</strong> (right &lt; n &amp;&amp; cmp.<a href="../D/13032.html" title="Multiple defined in 71 places.">compare</a>((<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[right]) &gt; 0)
<a id="L423" name="L423"></a> 423                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[child = right];
<a id="L424" name="L424"></a> 424                 <strong class="reserved">if</strong> (cmp.<a href="../D/13032.html" title="Multiple defined in 71 places.">compare</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &lt;= 0)
<a id="L425" name="L425"></a> 425                     <strong class="reserved">break</strong>;
<a id="L426" name="L426"></a> 426                 <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L427" name="L427"></a> 427                 k = child;
<a id="L428" name="L428"></a> 428             <em class="brace">}</em>
<a id="L429" name="L429"></a> 429             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[k] = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L430" name="L430"></a> 430         <em class="brace">}</em>
<a id="L431" name="L431"></a> 431     <em class="brace">}</em>
<a id="L432" name="L432"></a> 432 
<div class="comment">
      Establishes the heap invariant (described above) in the entire tree,
      assuming nothing about the order of the elements prior to the call.</div>
<a id="L437" name="L437"></a> 437     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20306.html" title="Multiple referred from 13 places.">heapify</a>() <em class="brace">{</em>
<a id="L438" name="L438"></a> 438         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue;
<a id="L439" name="L439"></a> 439         <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L440" name="L440"></a> 440         <strong class="reserved">int</strong> half = (n &gt;&gt;&gt; 1) - 1;
<a id="L441" name="L441"></a> 441         <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; cmp = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L442" name="L442"></a> 442         <strong class="reserved">if</strong> (cmp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L443" name="L443"></a> 443             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = half; i &gt;= 0; i--)
<a id="L444" name="L444"></a> 444                 <a href="../D/34548.html" title="Multiple defined in 2 places.">siftDownComparable</a>(i, (E) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i], <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, n);
<a id="L445" name="L445"></a> 445         <em class="brace">}</em>
<a id="L446" name="L446"></a> 446         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L447" name="L447"></a> 447             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = half; i &gt;= 0; i--)
<a id="L448" name="L448"></a> 448                 <a href="../D/34549.html" title="Multiple defined in 2 places.">siftDownUsingComparator</a>(i, (E) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i], <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, n, cmp);
<a id="L449" name="L449"></a> 449         <em class="brace">}</em>
<a id="L450" name="L450"></a> 450     <em class="brace">}</em>
<a id="L451" name="L451"></a> 451 
<div class="comment">
      Inserts the specified element into this priority queue.
      @param e the element to add
      @return <code>true</code> (as specified by {@link Collection#add})
      @throws ClassCastException if the specified element cannot be compared
              with elements currently in the priority queue according to the
              priority queue's ordering
      @throws NullPointerException if the specified element is null</div>
<a id="L462" name="L462"></a> 462     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(E e) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463         <strong class="reserved">return</strong> <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L464" name="L464"></a> 464     <em class="brace">}</em>
<a id="L465" name="L465"></a> 465 
<div class="comment">
      Inserts the specified element into this priority queue.
      As the queue is unbounded, this method will never return <code>false</code>.
      @param e the element to add
      @return <code>true</code> (as specified by {@link Queue#offer})
      @throws ClassCastException if the specified element cannot be compared
              with elements currently in the priority queue according to the
              priority queue's ordering
      @throws NullPointerException if the specified element is null</div>
<a id="L477" name="L477"></a> 477     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(E e) <em class="brace">{</em>
<a id="L478" name="L478"></a> 478         <strong class="reserved">if</strong> (e == <strong class="reserved">null</strong>)
<a id="L479" name="L479"></a> 479             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L480" name="L480"></a> 480         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L481" name="L481"></a> 481         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L482" name="L482"></a> 482         <strong class="reserved">int</strong> n, cap;
<a id="L483" name="L483"></a> 483         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L484" name="L484"></a> 484         <strong class="reserved">while</strong> ((n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>) &gt;= (cap = (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue).<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>))
<a id="L485" name="L485"></a> 485             <a href="../S/1121.html#L288" title="Defined at 288 in src/java/util/concurrent/PriorityBlockingQueue.java.">tryGrow</a>(<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, cap);
<a id="L486" name="L486"></a> 486         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L487" name="L487"></a> 487             <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; cmp = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L488" name="L488"></a> 488             <strong class="reserved">if</strong> (cmp == <strong class="reserved">null</strong>)
<a id="L489" name="L489"></a> 489                 <a href="../D/34551.html" title="Multiple defined in 2 places.">siftUpComparable</a>(n, e, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>);
<a id="L490" name="L490"></a> 490             <strong class="reserved">else</strong>
<a id="L491" name="L491"></a> 491                 <a href="../D/34552.html" title="Multiple defined in 2 places.">siftUpUsingComparator</a>(n, e, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, cmp);
<a id="L492" name="L492"></a> 492             <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = n + 1;
<a id="L493" name="L493"></a> 493             notEmpty.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L494" name="L494"></a> 494         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L495" name="L495"></a> 495             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L496" name="L496"></a> 496         <em class="brace">}</em>
<a id="L497" name="L497"></a> 497         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L498" name="L498"></a> 498     <em class="brace">}</em>
<a id="L499" name="L499"></a> 499 
<div class="comment">
      Inserts the specified element into this priority queue.
      As the queue is unbounded, this method will never block.
      @param e the element to add
      @throws ClassCastException if the specified element cannot be compared
              with elements currently in the priority queue according to the
              priority queue's ordering
      @throws NullPointerException if the specified element is null</div>
<a id="L510" name="L510"></a> 510     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(E e) <em class="brace">{</em>
<a id="L511" name="L511"></a> 511         <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e); <em class="comment">// never need to block</em>
<a id="L512" name="L512"></a> 512     <em class="brace">}</em>
<a id="L513" name="L513"></a> 513 
<div class="comment">
      Inserts the specified element into this priority queue.
      As the queue is unbounded, this method will never block or
      return <code>false</code>.
      @param e the element to add
      @param timeout This parameter is ignored as the method never blocks
      @param unit This parameter is ignored as the method never blocks
      @return <code>true</code> (as specified by
       {@link BlockingQueue#offer(Object,long,TimeUnit) BlockingQueue.offer})
      @throws ClassCastException if the specified element cannot be compared
              with elements currently in the priority queue according to the
              priority queue's ordering
      @throws NullPointerException if the specified element is null</div>
<a id="L529" name="L529"></a> 529     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(E e, <strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L530" name="L530"></a> 530         <strong class="reserved">return</strong> <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e); <em class="comment">// never need to block</em>
<a id="L531" name="L531"></a> 531     <em class="brace">}</em>
<a id="L532" name="L532"></a> 532 
<a id="L533" name="L533"></a> 533     <strong class="reserved">public</strong> E <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>() <em class="brace">{</em>
<a id="L534" name="L534"></a> 534         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L535" name="L535"></a> 535         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L536" name="L536"></a> 536         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L537" name="L537"></a> 537             <strong class="reserved">return</strong> <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>();
<a id="L538" name="L538"></a> 538         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L539" name="L539"></a> 539             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L540" name="L540"></a> 540         <em class="brace">}</em>
<a id="L541" name="L541"></a> 541     <em class="brace">}</em>
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543     <strong class="reserved">public</strong> E <a href="../R/29108.html" title="Multiple referred from 11 places.">take</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L545" name="L545"></a> 545         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L546" name="L546"></a> 546         E <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L547" name="L547"></a> 547         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L548" name="L548"></a> 548             <strong class="reserved">while</strong> ( (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>()) == <strong class="reserved">null</strong>)
<a id="L549" name="L549"></a> 549                 notEmpty.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L550" name="L550"></a> 550         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L551" name="L551"></a> 551             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L552" name="L552"></a> 552         <em class="brace">}</em>
<a id="L553" name="L553"></a> 553         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L554" name="L554"></a> 554     <em class="brace">}</em>
<a id="L555" name="L555"></a> 555 
<a id="L556" name="L556"></a> 556     <strong class="reserved">public</strong> E <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>(<strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L557" name="L557"></a> 557         <strong class="reserved">long</strong> nanos = unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout);
<a id="L558" name="L558"></a> 558         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L559" name="L559"></a> 559         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L560" name="L560"></a> 560         E <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L561" name="L561"></a> 561         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L562" name="L562"></a> 562             <strong class="reserved">while</strong> ( (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>()) == <strong class="reserved">null</strong> &amp;&amp; nanos &gt; 0)
<a id="L563" name="L563"></a> 563                 nanos = notEmpty.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L564" name="L564"></a> 564         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L565" name="L565"></a> 565             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L566" name="L566"></a> 566         <em class="brace">}</em>
<a id="L567" name="L567"></a> 567         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L568" name="L568"></a> 568     <em class="brace">}</em>
<a id="L569" name="L569"></a> 569 
<a id="L570" name="L570"></a> 570     <strong class="reserved">public</strong> E <a href="../R/24689.html" title="Multiple referred from 168 places.">peek</a>() <em class="brace">{</em>
<a id="L571" name="L571"></a> 571         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L572" name="L572"></a> 572         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L573" name="L573"></a> 573         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L574" name="L574"></a> 574             <strong class="reserved">return</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> == 0) ? <strong class="reserved">null</strong> : (E) queue[0];
<a id="L575" name="L575"></a> 575         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L576" name="L576"></a> 576             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L577" name="L577"></a> 577         <em class="brace">}</em>
<a id="L578" name="L578"></a> 578     <em class="brace">}</em>
<a id="L579" name="L579"></a> 579 
<div class="comment">
      Returns the comparator used to order the elements in this queue,
      or <code>null</code> if this queue uses the {@linkplain Comparable
      natural ordering} of its elements.
      @return the comparator used to order the elements in this queue,
              or <code>null</code> if this queue uses the natural
              ordering of its elements</div>
<a id="L589" name="L589"></a> 589     <strong class="reserved">public</strong> <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../R/11690.html" title="Multiple referred from 242 places.">comparator</a>() <em class="brace">{</em>
<a id="L590" name="L590"></a> 590         <strong class="reserved">return</strong> <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L591" name="L591"></a> 591     <em class="brace">}</em>
<a id="L592" name="L592"></a> 592 
<a id="L593" name="L593"></a> 593     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L594" name="L594"></a> 594         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L595" name="L595"></a> 595         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L596" name="L596"></a> 596         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L597" name="L597"></a> 597             <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L598" name="L598"></a> 598         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L599" name="L599"></a> 599             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L600" name="L600"></a> 600         <em class="brace">}</em>
<a id="L601" name="L601"></a> 601     <em class="brace">}</em>
<a id="L602" name="L602"></a> 602 
<div class="comment">
      Always returns <code>Integer.MAX_VALUE</code> because
      a <code>PriorityBlockingQueue</code> is not capacity constrained.
      @return <code>Integer.MAX_VALUE</code> always</div>
<a id="L608" name="L608"></a> 608     <strong class="reserved">public</strong> <strong class="reserved">int</strong> remainingCapacity() <em class="brace">{</em>
<a id="L609" name="L609"></a> 609         <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L610" name="L610"></a> 610     <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<a id="L612" name="L612"></a> 612     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L613" name="L613"></a> 613         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L614" name="L614"></a> 614             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue;
<a id="L615" name="L615"></a> 615             <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L616" name="L616"></a> 616             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L617" name="L617"></a> 617                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]))
<a id="L618" name="L618"></a> 618                     <strong class="reserved">return</strong> i;
<a id="L619" name="L619"></a> 619         <em class="brace">}</em>
<a id="L620" name="L620"></a> 620         <strong class="reserved">return</strong> -1;
<a id="L621" name="L621"></a> 621     <em class="brace">}</em>
<a id="L622" name="L622"></a> 622 
<div class="comment">
      Removes the ith element from queue.</div>
<a id="L626" name="L626"></a> 626     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25904.html" title="Multiple referred from 8 places.">removeAt</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L627" name="L627"></a> 627         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue;
<a id="L628" name="L628"></a> 628         <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1;
<a id="L629" name="L629"></a> 629         <strong class="reserved">if</strong> (n == i) <em class="comment">// removed last element</em>
<a id="L630" name="L630"></a> 630             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i] = <strong class="reserved">null</strong>;
<a id="L631" name="L631"></a> 631         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L632" name="L632"></a> 632             E moved = (E) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[n];
<a id="L633" name="L633"></a> 633             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[n] = <strong class="reserved">null</strong>;
<a id="L634" name="L634"></a> 634             <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> E&gt; cmp = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L635" name="L635"></a> 635             <strong class="reserved">if</strong> (cmp == <strong class="reserved">null</strong>)
<a id="L636" name="L636"></a> 636                 <a href="../D/34548.html" title="Multiple defined in 2 places.">siftDownComparable</a>(i, moved, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, n);
<a id="L637" name="L637"></a> 637             <strong class="reserved">else</strong>
<a id="L638" name="L638"></a> 638                 <a href="../D/34549.html" title="Multiple defined in 2 places.">siftDownUsingComparator</a>(i, moved, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, n, cmp);
<a id="L639" name="L639"></a> 639             <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i] == moved) <em class="brace">{</em>
<a id="L640" name="L640"></a> 640                 <strong class="reserved">if</strong> (cmp == <strong class="reserved">null</strong>)
<a id="L641" name="L641"></a> 641                     <a href="../D/34551.html" title="Multiple defined in 2 places.">siftUpComparable</a>(i, moved, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>);
<a id="L642" name="L642"></a> 642                 <strong class="reserved">else</strong>
<a id="L643" name="L643"></a> 643                     <a href="../D/34552.html" title="Multiple defined in 2 places.">siftUpUsingComparator</a>(i, moved, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, cmp);
<a id="L644" name="L644"></a> 644             <em class="brace">}</em>
<a id="L645" name="L645"></a> 645         <em class="brace">}</em>
<a id="L646" name="L646"></a> 646         <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = n;
<a id="L647" name="L647"></a> 647     <em class="brace">}</em>
<a id="L648" name="L648"></a> 648 
<div class="comment">
      Removes a single instance of the specified element from this queue,
      if it is present.  More formally, removes an element <code>e</code> such
      that <code>o.equals(e)</code>, if this queue contains one or more such
      elements.  Returns <code>true</code> if and only if this queue contained
      the specified element (or equivalently, if this queue changed as a
      result of the call).
      @param o element to be removed from this queue, if present
      @return <code>true</code> if this queue changed as a result of the call</div>
<a id="L660" name="L660"></a> 660     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L661" name="L661"></a> 661         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L662" name="L662"></a> 662         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L663" name="L663"></a> 663         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L664" name="L664"></a> 664             <strong class="reserved">int</strong> i = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>);
<a id="L665" name="L665"></a> 665             <strong class="reserved">if</strong> (i == -1)
<a id="L666" name="L666"></a> 666                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L667" name="L667"></a> 667             <a href="../D/30707.html" title="Multiple defined in 3 places.">removeAt</a>(i);
<a id="L668" name="L668"></a> 668             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L669" name="L669"></a> 669         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L670" name="L670"></a> 670             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L671" name="L671"></a> 671         <em class="brace">}</em>
<a id="L672" name="L672"></a> 672     <em class="brace">}</em>
<a id="L673" name="L673"></a> 673 
<div class="comment">
      Identity-based version for use in Itr.remove</div>
<a id="L677" name="L677"></a> 677     <strong class="reserved">void</strong> <a href="../R/25946.html" title="Multiple referred from 2 places.">removeEQ</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L678" name="L678"></a> 678         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L679" name="L679"></a> 679         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L680" name="L680"></a> 680         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L681" name="L681"></a> 681             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue;
<a id="L682" name="L682"></a> 682             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0, n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i &lt; n; i++) <em class="brace">{</em>
<a id="L683" name="L683"></a> 683                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]) <em class="brace">{</em>
<a id="L684" name="L684"></a> 684                     <a href="../D/30707.html" title="Multiple defined in 3 places.">removeAt</a>(i);
<a id="L685" name="L685"></a> 685                     <strong class="reserved">break</strong>;
<a id="L686" name="L686"></a> 686                 <em class="brace">}</em>
<a id="L687" name="L687"></a> 687             <em class="brace">}</em>
<a id="L688" name="L688"></a> 688         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L689" name="L689"></a> 689             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L690" name="L690"></a> 690         <em class="brace">}</em>
<a id="L691" name="L691"></a> 691     <em class="brace">}</em>
<a id="L692" name="L692"></a> 692 
<div class="comment">
      Returns <code>true</code> if this queue contains the specified element.
      More formally, returns <code>true</code> if and only if this queue contains
      at least one element <code>e</code> such that <code>o.equals(e)</code>.
      @param o object to be checked for containment in this queue
      @return <code>true</code> if this queue contains the specified element</div>
<a id="L701" name="L701"></a> 701     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L702" name="L702"></a> 702         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L703" name="L703"></a> 703         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L704" name="L704"></a> 704         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L705" name="L705"></a> 705             <strong class="reserved">return</strong> <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) != -1;
<a id="L706" name="L706"></a> 706         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L707" name="L707"></a> 707             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L708" name="L708"></a> 708         <em class="brace">}</em>
<a id="L709" name="L709"></a> 709     <em class="brace">}</em>
<a id="L710" name="L710"></a> 710 
<div class="comment">
      Returns an array containing all of the elements in this queue.
      The returned array elements are in no particular order.
      <p>The returned array will be "safe" in that no references to it are
      maintained by this queue.  (In other words, this method must allocate
      a new array).  The caller is thus free to modify the returned array.
      </p><p>This method acts as bridge between array-based and collection-based
      APIs.
      @return an array containing all of the elements in this queue</p></div>
<a id="L724" name="L724"></a> 724     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>() <em class="brace">{</em>
<a id="L725" name="L725"></a> 725         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L726" name="L726"></a> 726         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L727" name="L727"></a> 727         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L728" name="L728"></a> 728             <strong class="reserved">return</strong> <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(queue, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L729" name="L729"></a> 729         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L730" name="L730"></a> 730             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L731" name="L731"></a> 731         <em class="brace">}</em>
<a id="L732" name="L732"></a> 732     <em class="brace">}</em>
<a id="L733" name="L733"></a> 733 
<a id="L734" name="L734"></a> 734     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L735" name="L735"></a> 735         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L736" name="L736"></a> 736         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L737" name="L737"></a> 737         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L738" name="L738"></a> 738             <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L739" name="L739"></a> 739             <strong class="reserved">if</strong> (n == 0)
<a id="L740" name="L740"></a> 740                 <strong class="reserved">return</strong> "[]";
<a id="L741" name="L741"></a> 741             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L742" name="L742"></a> 742             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('[');
<a id="L743" name="L743"></a> 743             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; ++i) <em class="brace">{</em>
<a id="L744" name="L744"></a> 744                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e = queue[i];
<a id="L745" name="L745"></a> 745                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(e == <strong class="reserved">this</strong> ? "(this Collection)" : e);
<a id="L746" name="L746"></a> 746                 <strong class="reserved">if</strong> (i != n - 1)
<a id="L747" name="L747"></a> 747                     sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(',').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(' ');
<a id="L748" name="L748"></a> 748             <em class="brace">}</em>
<a id="L749" name="L749"></a> 749             <strong class="reserved">return</strong> sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(']').<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L750" name="L750"></a> 750         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L751" name="L751"></a> 751             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L752" name="L752"></a> 752         <em class="brace">}</em>
<a id="L753" name="L753"></a> 753     <em class="brace">}</em>
<a id="L754" name="L754"></a> 754 
<div class="comment">
      @throws UnsupportedOperationException {@inheritDoc}
      @throws ClassCastException            {@inheritDoc}
      @throws NullPointerException          {@inheritDoc}
      @throws IllegalArgumentException      {@inheritDoc}</div>
<a id="L761" name="L761"></a> 761     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L762" name="L762"></a> 762         <strong class="reserved">return</strong> <a href="../D/15160.html" title="Multiple defined in 18 places.">drainTo</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE);
<a id="L763" name="L763"></a> 763     <em class="brace">}</em>
<a id="L764" name="L764"></a> 764 
<div class="comment">
      @throws UnsupportedOperationException {@inheritDoc}
      @throws ClassCastException            {@inheritDoc}
      @throws NullPointerException          {@inheritDoc}
      @throws IllegalArgumentException      {@inheritDoc}</div>
<a id="L771" name="L771"></a> 771     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <strong class="reserved">int</strong> maxElements) <em class="brace">{</em>
<a id="L772" name="L772"></a> 772         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>)
<a id="L773" name="L773"></a> 773             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L774" name="L774"></a> 774         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">this</strong>)
<a id="L775" name="L775"></a> 775             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L776" name="L776"></a> 776         <strong class="reserved">if</strong> (maxElements &lt;= 0)
<a id="L777" name="L777"></a> 777             <strong class="reserved">return</strong> 0;
<a id="L778" name="L778"></a> 778         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L779" name="L779"></a> 779         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L780" name="L780"></a> 780         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L781" name="L781"></a> 781             <strong class="reserved">int</strong> n = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, maxElements);
<a id="L782" name="L782"></a> 782             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L783" name="L783"></a> 783                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>((E) queue[0]); <em class="comment">// In this order, in case add() throws.</em>
<a id="L784" name="L784"></a> 784                 <a href="../D/14835.html" title="Multiple defined in 6 places.">dequeue</a>();
<a id="L785" name="L785"></a> 785             <em class="brace">}</em>
<a id="L786" name="L786"></a> 786             <strong class="reserved">return</strong> n;
<a id="L787" name="L787"></a> 787         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L788" name="L788"></a> 788             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L789" name="L789"></a> 789         <em class="brace">}</em>
<a id="L790" name="L790"></a> 790     <em class="brace">}</em>
<a id="L791" name="L791"></a> 791 
<div class="comment">
      Atomically removes all of the elements from this queue.
      The queue will be empty after this call returns.</div>
<a id="L796" name="L796"></a> 796     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L797" name="L797"></a> 797         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L798" name="L798"></a> 798         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L799" name="L799"></a> 799         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L800" name="L800"></a> 800             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue;
<a id="L801" name="L801"></a> 801             <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L802" name="L802"></a> 802             <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L803" name="L803"></a> 803             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L804" name="L804"></a> 804                 <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i] = <strong class="reserved">null</strong>;
<a id="L805" name="L805"></a> 805         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L806" name="L806"></a> 806             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L807" name="L807"></a> 807         <em class="brace">}</em>
<a id="L808" name="L808"></a> 808     <em class="brace">}</em>
<a id="L809" name="L809"></a> 809 
<div class="comment">
      Returns an array containing all of the elements in this queue; the
      runtime type of the returned array is that of the specified array.
      The returned array elements are in no particular order.
      If the queue fits in the specified array, it is returned therein.
      Otherwise, a new array is allocated with the runtime type of the
      specified array and the size of this queue.
      <p>If this queue fits in the specified array with room to spare
      (i.e., the array has more elements than this queue), the element in
      the array immediately following the end of the queue is set to
      <code>null</code>.
      </p><p>Like the {@link #toArray()} method, this method acts as bridge between
      array-based and collection-based APIs.  Further, this method allows
      precise control over the runtime type of the output array, and may,
      under certain circumstances, be used to save allocation costs.
      </p><p>Suppose <code>x</code> is a queue known to contain only strings.
      The following code can be used to dump the queue into a newly
      allocated array of <code>String</code>:
       </p><pre> <code>String[] y = x.toArray(new String[0]);</code></pre>
      Note that <code>toArray(new Object[0])</code> is identical in function to
      <code>toArray()</code>.
      @param a the array into which the elements of the queue are to
               be stored, if it is big enough; otherwise, a new array of the
               same runtime type is allocated for this purpose
      @return an array containing all of the elements in this queue
      @throws ArrayStoreException if the runtime type of the specified array
              is not a supertype of the runtime type of every element in
              this queue
      @throws NullPointerException if the specified array is null</div>
<a id="L846" name="L846"></a> 846     <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L847" name="L847"></a> 847         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L848" name="L848"></a> 848         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L849" name="L849"></a> 849         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L850" name="L850"></a> 850             <strong class="reserved">int</strong> n = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L851" name="L851"></a> 851             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; n)
<a id="L852" name="L852"></a> 852                 <em class="comment">// Make a new array of a's runtime type, but my contents:</em>
<a id="L853" name="L853"></a> 853                 <strong class="reserved">return</strong> (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[]) <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(queue, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>());
<a id="L854" name="L854"></a> 854             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(queue, 0, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0, n);
<a id="L855" name="L855"></a> 855             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; n)
<a id="L856" name="L856"></a> 856                 <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[n] = <strong class="reserved">null</strong>;
<a id="L857" name="L857"></a> 857             <strong class="reserved">return</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L858" name="L858"></a> 858         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L859" name="L859"></a> 859             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L860" name="L860"></a> 860         <em class="brace">}</em>
<a id="L861" name="L861"></a> 861     <em class="brace">}</em>
<a id="L862" name="L862"></a> 862 
<div class="comment">
      Returns an iterator over the elements in this queue. The
      iterator does not return the elements in any particular order.
      <p>The returned iterator is
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      @return an iterator over the elements in this queue</p></div>
<a id="L872" name="L872"></a> 872     <strong class="reserved">public</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L873" name="L873"></a> 873         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a>(<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>());
<a id="L874" name="L874"></a> 874     <em class="brace">}</em>
<a id="L875" name="L875"></a> 875 
<div class="comment">
      Snapshot iterator that works off copy of underlying q array.</div>
<a id="L879" name="L879"></a> 879     <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4056.html" title="Multiple referred from 24 places.">Itr</a> <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <em class="brace">{</em>
<a id="L880" name="L880"></a> 880         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>; <em class="comment">// Array of all elements</em>
<a id="L881" name="L881"></a> 881         <strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;           <em class="comment">// index of next element to return</em>
<a id="L882" name="L882"></a> 882         <strong class="reserved">int</strong> lastRet;          <em class="comment">// index of last element, or -1 if no such</em>
<a id="L883" name="L883"></a> 883 
<a id="L884" name="L884"></a> 884         Itr(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L885" name="L885"></a> 885             lastRet = -1;
<a id="L886" name="L886"></a> 886             <strong class="reserved">this</strong>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L887" name="L887"></a> 887         <em class="brace">}</em>
<a id="L888" name="L888"></a> 888 
<a id="L889" name="L889"></a> 889         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20233.html" title="Multiple referred from 653 places.">hasNext</a>() <em class="brace">{</em>
<a id="L890" name="L890"></a> 890             <strong class="reserved">return</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &lt; <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L891" name="L891"></a> 891         <em class="brace">}</em>
<a id="L892" name="L892"></a> 892 
<a id="L893" name="L893"></a> 893         <strong class="reserved">public</strong> E <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L894" name="L894"></a> 894             <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &gt;= <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L895" name="L895"></a> 895                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L896" name="L896"></a> 896             lastRet = <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;
<a id="L897" name="L897"></a> 897             <strong class="reserved">return</strong> (E)<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>++];
<a id="L898" name="L898"></a> 898         <em class="brace">}</em>
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>() <em class="brace">{</em>
<a id="L901" name="L901"></a> 901             <strong class="reserved">if</strong> (lastRet &lt; 0)
<a id="L902" name="L902"></a> 902                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>();
<a id="L903" name="L903"></a> 903             <a href="../D/30769.html" title="Multiple defined in 2 places.">removeEQ</a>(<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[lastRet]);
<a id="L904" name="L904"></a> 904             lastRet = -1;
<a id="L905" name="L905"></a> 905         <em class="brace">}</em>
<a id="L906" name="L906"></a> 906     <em class="brace">}</em>
<a id="L907" name="L907"></a> 907 
<div class="comment">
      Saves this queue to a stream (that is, serializes it).
      For compatibility with previous version of this class, elements
      are first copied to a java.util.PriorityQueue, which is then
      serialized.
      @param s the stream
      @throws java.io.IOException if an I/O error occurs</div>
<a id="L918" name="L918"></a> 918     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> s)
<a id="L919" name="L919"></a> 919         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L920" name="L920"></a> 920         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L921" name="L921"></a> 921         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L922" name="L922"></a> 922             <em class="comment">// avoid zero capacity argument</em>
<a id="L923" name="L923"></a> 923             q = <strong class="reserved">new</strong> <a href="../S/998.html#L82" title="Defined at 82 in src/java/util/PriorityQueue.java.">PriorityQueue</a>&lt;E&gt;(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, 1), <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>);
<a id="L924" name="L924"></a> 924             q.<a href="../D/10646.html" title="Multiple defined in 78 places.">addAll</a>(<strong class="reserved">this</strong>);
<a id="L925" name="L925"></a> 925             s.<a href="../D/14752.html" title="Multiple defined in 6 places.">defaultWriteObject</a>();
<a id="L926" name="L926"></a> 926         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L927" name="L927"></a> 927             q = <strong class="reserved">null</strong>;
<a id="L928" name="L928"></a> 928             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L929" name="L929"></a> 929         <em class="brace">}</em>
<a id="L930" name="L930"></a> 930     <em class="brace">}</em>
<a id="L931" name="L931"></a> 931 
<div class="comment">
      Reconstitutes this queue from a stream (that is, deserializes it).
      @param s the stream
      @throws ClassNotFoundException if the class of a serialized object
              could not be found
      @throws java.io.IOException if an I/O error occurs</div>
<a id="L939" name="L939"></a> 939     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L940" name="L940"></a> 940         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L941" name="L941"></a> 941         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L942" name="L942"></a> 942             s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L943" name="L943"></a> 943             <strong class="reserved">this</strong>.queue = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[q.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()];
<a id="L944" name="L944"></a> 944             <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> = q.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>();
<a id="L945" name="L945"></a> 945             <a href="../D/10646.html" title="Multiple defined in 78 places.">addAll</a>(q);
<a id="L946" name="L946"></a> 946         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L947" name="L947"></a> 947             q = <strong class="reserved">null</strong>;
<a id="L948" name="L948"></a> 948         <em class="brace">}</em>
<a id="L949" name="L949"></a> 949     <em class="brace">}</em>
<a id="L950" name="L950"></a> 950 
<a id="L951" name="L951"></a> 951     <em class="comment">// Similar to Collections.ArraySnapshotSpliterator but avoids</em>
<a id="L952" name="L952"></a> 952     <em class="comment">// commitment to toArray until needed</em>
<a id="L953" name="L953"></a> 953     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5893.html" title="Multiple referred from 2 places.">PBQSpliterator</a>&lt;E&gt; <strong class="reserved">implements</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;E&gt; <em class="brace">{</em>
<a id="L954" name="L954"></a> 954         <strong class="reserved">final</strong> <a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>&lt;E&gt; queue;
<a id="L955" name="L955"></a> 955         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L956" name="L956"></a> 956         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L957" name="L957"></a> 957         <strong class="reserved">int</strong> fence;
<a id="L958" name="L958"></a> 958 
<a id="L959" name="L959"></a> 959         PBQSpliterator(<a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>&lt;E&gt; queue, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>,
<a id="L960" name="L960"></a> 960                        <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> fence) <em class="brace">{</em>
<a id="L961" name="L961"></a> 961             <strong class="reserved">this</strong>.queue = queue;
<a id="L962" name="L962"></a> 962             <strong class="reserved">this</strong>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L963" name="L963"></a> 963             <strong class="reserved">this</strong>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L964" name="L964"></a> 964             <strong class="reserved">this</strong>.fence = fence;
<a id="L965" name="L965"></a> 965         <em class="brace">}</em>
<a id="L966" name="L966"></a> 966 
<a id="L967" name="L967"></a> 967         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/16544.html" title="Multiple referred from 40 places.">getFence</a>() <em class="brace">{</em>
<a id="L968" name="L968"></a> 968             <strong class="reserved">int</strong> hi;
<a id="L969" name="L969"></a> 969             <strong class="reserved">if</strong> ((hi = fence) &lt; 0)
<a id="L970" name="L970"></a> 970                 hi = fence = (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = queue.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>()).<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L971" name="L971"></a> 971             <strong class="reserved">return</strong> hi;
<a id="L972" name="L972"></a> 972         <em class="brace">}</em>
<a id="L973" name="L973"></a> 973 
<a id="L974" name="L974"></a> 974         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;E&gt; <a href="../R/29563.html" title="Multiple referred from 18 places.">trySplit</a>() <em class="brace">{</em>
<a id="L975" name="L975"></a> 975             <strong class="reserved">int</strong> hi = <a href="../D/19014.html" title="Multiple defined in 8 places.">getFence</a>(), lo = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, mid = (lo + hi) &gt;&gt;&gt; 1;
<a id="L976" name="L976"></a> 976             <strong class="reserved">return</strong> (lo &gt;= mid) ? <strong class="reserved">null</strong> :
<a id="L977" name="L977"></a> 977                 <strong class="reserved">new</strong> <a href="../S/1121.html#L953" title="Defined at 953 in src/java/util/concurrent/PriorityBlockingQueue.java.">PBQSpliterator</a>&lt;E&gt;(queue, <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, lo, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = mid);
<a id="L978" name="L978"></a> 978         <em class="brace">}</em>
<a id="L979" name="L979"></a> 979 
<a id="L980" name="L980"></a> 980         @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L981" name="L981"></a> 981         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14732.html" title="Multiple referred from 54 places.">forEachRemaining</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L982" name="L982"></a> 982             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">int</strong> i, hi; <em class="comment">// hoist accesses and checks from loop</em>
<a id="L983" name="L983"></a> 983             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L984" name="L984"></a> 984                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L985" name="L985"></a> 985             <strong class="reserved">if</strong> ((<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) == <strong class="reserved">null</strong>)
<a id="L986" name="L986"></a> 986                 fence = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = queue.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>()).<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L987" name="L987"></a> 987             <strong class="reserved">if</strong> ((hi = fence) &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp;
<a id="L988" name="L988"></a> 988                 (i = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) &gt;= 0 &amp;&amp; i &lt; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = hi)) <em class="brace">{</em>
<a id="L989" name="L989"></a> 989                 <strong class="reserved">do</strong> <em class="brace">{</em> <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>((E)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i]); <em class="brace">}</em> <strong class="reserved">while</strong> (++i &lt; hi);
<a id="L990" name="L990"></a> 990             <em class="brace">}</em>
<a id="L991" name="L991"></a> 991         <em class="brace">}</em>
<a id="L992" name="L992"></a> 992 
<a id="L993" name="L993"></a> 993         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29541.html" title="Multiple referred from 73 places.">tryAdvance</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L994" name="L994"></a> 994             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L995" name="L995"></a> 995                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L996" name="L996"></a> 996             <strong class="reserved">if</strong> (<a href="../D/19014.html" title="Multiple defined in 8 places.">getFence</a>() &gt; <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &amp;&amp; <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) <em class="brace">{</em>
<a id="L997" name="L997"></a> 997                 @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked") E e = (E) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++];
<a id="L998" name="L998"></a> 998                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(e);
<a id="L999" name="L999"></a> 999                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1000" name="L1000"></a>1000             <em class="brace">}</em>
<a id="L1001" name="L1001"></a>1001             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1002" name="L1002"></a>1002         <em class="brace">}</em>
<a id="L1003" name="L1003"></a>1003 
<a id="L1004" name="L1004"></a>1004         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/14042.html" title="Multiple referred from 29 places.">estimateSize</a>() <em class="brace">{</em> <strong class="reserved">return</strong> (<strong class="reserved">long</strong>)(<a href="../D/19014.html" title="Multiple defined in 8 places.">getFence</a>() - <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>); <em class="brace">}</em>
<a id="L1005" name="L1005"></a>1005 
<a id="L1006" name="L1006"></a>1006         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11055.html" title="Multiple referred from 149 places.">characteristics</a>() <em class="brace">{</em>
<a id="L1007" name="L1007"></a>1007             <strong class="reserved">return</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.NONNULL | <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.<a href="../S/915.html#L296" title="Defined at 296 in src/java/util/stream/StreamOpFlag.java.">SIZED</a> | <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.SUBSIZED;
<a id="L1008" name="L1008"></a>1008         <em class="brace">}</em>
<a id="L1009" name="L1009"></a>1009     <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010 
<div class="comment">
      Returns a <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a> over the elements in this queue.
      <p>The returned spliterator is
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      </p><p>The <code>Spliterator</code> reports {@link Spliterator#SIZED} and
      {@link Spliterator#NONNULL}.
      @implNote
      The <code>Spliterator</code> additionally reports {@link Spliterator#SUBSIZED}.
      @return a <code>Spliterator</code> over the elements in this queue
      @since 1.8</p></div>
<a id="L1026" name="L1026"></a>1026     <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;E&gt; <a href="../R/28762.html" title="Multiple referred from 435 places.">spliterator</a>() <em class="brace">{</em>
<a id="L1027" name="L1027"></a>1027         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1121.html#L953" title="Defined at 953 in src/java/util/concurrent/PriorityBlockingQueue.java.">PBQSpliterator</a>&lt;E&gt;(<strong class="reserved">this</strong>, <strong class="reserved">null</strong>, 0, -1);
<a id="L1028" name="L1028"></a>1028     <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029 
<a id="L1030" name="L1030"></a>1030     <em class="comment">// Unsafe mechanics</em>
<a id="L1031" name="L1031"></a>1031     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> sun.misc.Unsafe UNSAFE;
<a id="L1032" name="L1032"></a>1032     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> allocationSpinLockOffset;
<a id="L1033" name="L1033"></a>1033     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L1034" name="L1034"></a>1034         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1035" name="L1035"></a>1035             UNSAFE = sun.misc.Unsafe.getUnsafe();
<a id="L1036" name="L1036"></a>1036             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; k = <a href="../S/1121.html#L109" title="Defined at 109 in src/java/util/concurrent/PriorityBlockingQueue.java.">PriorityBlockingQueue</a>.<strong class="reserved">class</strong>;
<a id="L1037" name="L1037"></a>1037             allocationSpinLockOffset = UNSAFE.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L1038" name="L1038"></a>1038                 (k.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("allocationSpinLock"));
<a id="L1039" name="L1039"></a>1039         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L1040" name="L1040"></a>1040             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>(e);
<a id="L1041" name="L1041"></a>1041         <em class="brace">}</em>
<a id="L1042" name="L1042"></a>1042     <em class="brace">}</em>
<a id="L1043" name="L1043"></a>1043 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L108">[^]</a><a href="#L1026">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/io/Console.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L100">[^]</a><a href="#L556">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L100" title="Defined at 100.">writer</a></li>
<li><a href="#L135" title="Defined at 135.">reader</a></li>
<li><a href="#L169" title="Defined at 169.">format</a></li>
<li><a href="#L208" title="Defined at 208.">printf</a></li>
<li><a href="#L243" title="Defined at 243.">readLine</a></li>
<li><a href="#L271" title="Defined at 271.">readLine</a></li>
<li><a href="#L307" title="Defined at 307.">readPassword</a></li>
<li><a href="#L351" title="Defined at 351.">readPassword</a></li>
<li><a href="#L359" title="Defined at 359.">flush</a></li>
<li><a href="#L371" title="Defined at 371.">encoding</a></li>
<li><a href="#L372" title="Defined at 372.">echo</a></li>
<li><a href="#L375" title="Defined at 375.">readline</a></li>
<li><a href="#L396" title="Defined at 396.">grow</a></li>
<li><a href="#L415" title="Defined at 415.">close</a></li>
<li><a href="#L416" title="Defined at 416.">ready</a></li>
<li><a href="#L421" title="Defined at 421.">read</a></li>
<li><a href="#L556" title="Defined at 556.">istty</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2005, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.*;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.nio.charset.Charset;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> sun.nio.cs.StreamDecoder;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> sun.nio.cs.StreamEncoder;
<a id="L32" name="L32"></a>  32 
<div class="comment">
  Methods to access the character-based console device, if any, associated
  with the current Java virtual machine.
  <p> Whether a virtual machine has a console is dependent upon the
  underlying platform and also upon the manner in which the virtual
  machine is invoked.  If the virtual machine is started from an
  interactive command line without redirecting the standard input and
  output streams then its console will exist and will typically be
  connected to the keyboard and display from which the virtual machine
  was launched.  If the virtual machine is started automatically, for
  example by a background job scheduler, then it will typically not
  have a console.
  </p><p>
  If this virtual machine has a console then it is represented by a
  unique instance of this class which can be obtained by invoking the
  {@link java.lang.System#console()} method.  If no console device is
  available then an invocation of that method will return <tt>null</tt>.
  </p><p>
  Read and write operations are synchronized to guarantee the atomic
  completion of critical operations; therefore invoking methods
  {@link #readLine()}, {@link #readPassword()}, <a href="#L169" title="Defined at 169.">format</a>,
  <a href="#L208" title="Defined at 208.">printf</a> as well as the read, format and write operations
  on the objects returned by {@link #reader()} and {@link #writer()} may
  block in multithreaded scenarios.
  </p><p>
  Invoking <tt>close()</tt> on the objects returned by the {@link #reader()}
  and the {@link #writer()} will not close the underlying stream of those
  objects.
  </p><p>
  The console-read methods return <tt>null</tt> when the end of the
  console input stream is reached, for example by typing control-D on
  Unix or control-Z on Windows.  Subsequent read operations will succeed
  if additional characters are later entered on the console's input
  device.
  </p><p>
  Unless otherwise specified, passing a <tt>null</tt> argument to any method
  in this class will cause a {@link NullPointerException} to be thrown.
  </p><p>
  <b>Security note:</b>
  If an application needs to read a password or other secure data, it should
  use {@link #readPassword()} or {@link #readPassword(String, Object...)} and
  manually zero the returned character array after processing to minimize the
  lifetime of sensitive data in memory.
  </p><blockquote><pre>{@code
  Console cons;
  char[] passwd;
  if ((cons = System.console()) != null &amp;&amp;
      (passwd = cons.readPassword("[%s]", "Password:")) != null) {
      ...
      java.util.Arrays.fill(passwd, ' ');
  }
  }</pre></blockquote>
  @author  Xueming Shen
  @since   1.6</div>
<a id="L91" name="L91"></a>  91 
<a id="L92" name="L92"></a>  92 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/1658.html" title="Multiple referred from 7 places.">Console</a> <strong class="reserved">implements</strong> <a href="../S/1403.html#L37" title="Defined at 37 in src/java/io/Flushable.java.">Flushable</a>
<a id="L93" name="L93"></a>  93 <em class="brace">{</em>
<div class="comment">
     Retrieves the unique {@link java.io.PrintWriter PrintWriter} object
     associated with this console.
     @return  The printwriter associated with this console</div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">public</strong> <a href="../S/1445.html#L56" title="Defined at 56 in src/java/io/PrintWriter.java.">PrintWriter</a> <a href="../R/30817.html" title="Multiple referred from 709 places.">writer</a>() <em class="brace">{</em>
<a id="L101" name="L101"></a> 101         <strong class="reserved">return</strong> pw;
<a id="L102" name="L102"></a> 102     <em class="brace">}</em>
<a id="L103" name="L103"></a> 103 
<div class="comment">
     Retrieves the unique {@link java.io.Reader Reader} object associated
     with this console.
     <p>
     This method is intended to be used by sophisticated applications, for
     example, a {@link java.util.Scanner} object which utilizes the rich
     parsing/scanning functionality provided by the <tt>Scanner</tt>:
     </p><blockquote><pre>     Console con = System.console();
     if (con != null) {
         Scanner sc = new Scanner(con.reader());
         ...
     }
     </pre></blockquote>
     <p>
     For simple applications requiring only line-oriented reading, use
     <tt><a href="#L243" title="Defined at 243.">readLine</a></tt>.
     </p><p>
     The bulk read operations {@link java.io.Reader#read(char[]) read(char[]) },
     {@link java.io.Reader#read(char[], int, int) read(char[], int, int) } and
     {@link java.io.Reader#read(java.nio.CharBuffer) read(java.nio.CharBuffer)}
     on the returned object will not read in characters beyond the line
     bound for each invocation, even if the destination buffer has space for
     more characters. The <code>Reader</code>'s <code>read</code> methods may block if a
     line bound has not been entered or reached on the console's input device.
     A line bound is considered to be any one of a line feed (<tt>'\n'</tt>),
     a carriage return (<tt>'\r'</tt>), a carriage return followed immediately
     by a linefeed, or an end of stream.
     @return  The reader associated with this console</p></div>
<a id="L135" name="L135"></a> 135     <strong class="reserved">public</strong> <a href="../S/1412.html#L51" title="Defined at 51 in src/java/io/Reader.java.">Reader</a> <a href="../R/25623.html" title="Multiple referred from 539 places.">reader</a>() <em class="brace">{</em>
<a id="L136" name="L136"></a> 136         <strong class="reserved">return</strong> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>;
<a id="L137" name="L137"></a> 137     <em class="brace">}</em>
<a id="L138" name="L138"></a> 138 
<div class="comment">
     Writes a formatted string to this console's output stream using
     the specified format string and arguments.
     @param  fmt
             A format string as described in <a href="../util/Formatter.html#syntax">Format string syntax</a>
     @param  args
             Arguments referenced by the format specifiers in the format
             string.  If there are more arguments than format specifiers, the
             extra arguments are ignored.  The number of arguments is
             variable and may be zero.  The maximum number of arguments is
             limited by the maximum dimension of a Java array as defined by
             <cite>The Javaâ„¢ Virtual Machine Specification</cite>.
             The behaviour on a
             <tt>null</tt> argument depends on the <a href="../util/Formatter.html#syntax">conversion</a>.
     @throws  IllegalFormatException
              If a format string contains an illegal syntax, a format
              specifier that is incompatible with the given arguments,
              insufficient arguments given the format string, or other
              illegal conditions.  For specification of all possible
              formatting errors, see the <a href="../util/Formatter.html#detail">Details</a> section
              of the formatter class specification.
     @return  This console</div>
<a id="L169" name="L169"></a> 169     <strong class="reserved">public</strong> <a href="../S/1437.html#L92" title="Defined at 92 in src/java/io/Console.java.">Console</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmt, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ...args) <em class="brace">{</em>
<a id="L170" name="L170"></a> 170         <a href="../S/1537.html#L4367" title="Defined at 4367 in src/java/time/format/DateTimeFormatterBuilder.java.">formatter</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(fmt, args).<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L171" name="L171"></a> 171         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L172" name="L172"></a> 172     <em class="brace">}</em>
<a id="L173" name="L173"></a> 173 
<div class="comment">
     A convenience method to write a formatted string to this console's
     output stream using the specified format string and arguments.
     <p> An invocation of this method of the form <tt>con.printf(format,
     args)</tt> behaves in exactly the same way as the invocation of
     </p><pre>con.format(format, args)</pre>.
     @param  format
             A format string as described in <a href="../util/Formatter.html#syntax">Format string syntax</a>.
     @param  args
             Arguments referenced by the format specifiers in the format
             string.  If there are more arguments than format specifiers, the
             extra arguments are ignored.  The number of arguments is
             variable and may be zero.  The maximum number of arguments is
             limited by the maximum dimension of a Java array as defined by
             <cite>The Javaâ„¢ Virtual Machine Specification</cite>.
             The behaviour on a
             <tt>null</tt> argument depends on the <a href="../util/Formatter.html#syntax">conversion</a>.
     @throws  IllegalFormatException
              If a format string contains an illegal syntax, a format
              specifier that is incompatible with the given arguments,
              insufficient arguments given the format string, or other
              illegal conditions.  For specification of all possible
              formatting errors, see the <a href="../util/Formatter.html#detail">Details</a> section of the
              formatter class specification.
     @return  This console</div>
<a id="L208" name="L208"></a> 208     <strong class="reserved">public</strong> <a href="../S/1437.html#L92" title="Defined at 92 in src/java/io/Console.java.">Console</a> <a href="../R/25061.html" title="Multiple referred from 40 places.">printf</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ... args) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209         <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>, args);
<a id="L210" name="L210"></a> 210     <em class="brace">}</em>
<a id="L211" name="L211"></a> 211 
<div class="comment">
     Provides a formatted prompt, then reads a single line of text from the
     console.
     @param  fmt
             A format string as described in <a href="../util/Formatter.html#syntax">Format string syntax</a>.
     @param  args
             Arguments referenced by the format specifiers in the format
             string.  If there are more arguments than format specifiers, the
             extra arguments are ignored.  The maximum number of arguments is
             limited by the maximum dimension of a Java array as defined by
             <cite>The Javaâ„¢ Virtual Machine Specification</cite>.
     @throws  IllegalFormatException
              If a format string contains an illegal syntax, a format
              specifier that is incompatible with the given arguments,
              insufficient arguments given the format string, or other
              illegal conditions.  For specification of all possible
              formatting errors, see the <a href="../util/Formatter.html#detail">Details</a> section
              of the formatter class specification.
     @throws IOError
             If an I/O error occurs.
     @return  A string containing the line read from the console, not
              including any line-termination characters, or <tt>null</tt>
              if an end of stream has been reached.</div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25502.html" title="Multiple referred from 43 places.">readLine</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmt, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ... args) <em class="brace">{</em>
<a id="L244" name="L244"></a> 244         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <strong class="reserved">null</strong>;
<a id="L245" name="L245"></a> 245         <strong class="reserved">synchronized</strong> (<a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>) <em class="brace">{</em>
<a id="L246" name="L246"></a> 246             <strong class="reserved">synchronized</strong>(<a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>) <em class="brace">{</em>
<a id="L247" name="L247"></a> 247                 <strong class="reserved">if</strong> (fmt.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0)
<a id="L248" name="L248"></a> 248                     pw.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(fmt, args);
<a id="L249" name="L249"></a> 249                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L250" name="L250"></a> 250                     <strong class="reserved">char</strong>[] ca = <a href="../S/1437.html#L375" title="Defined at 375 in src/java/io/Console.java.">readline</a>(<strong class="reserved">false</strong>);
<a id="L251" name="L251"></a> 251                     <strong class="reserved">if</strong> (ca != <strong class="reserved">null</strong>)
<a id="L252" name="L252"></a> 252                         <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>(ca);
<a id="L253" name="L253"></a> 253                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1418.html#L34" title="Defined at 34 in src/java/io/IOError.java.">IOError</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L255" name="L255"></a> 255                 <em class="brace">}</em>
<a id="L256" name="L256"></a> 256             <em class="brace">}</em>
<a id="L257" name="L257"></a> 257         <em class="brace">}</em>
<a id="L258" name="L258"></a> 258         <strong class="reserved">return</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>;
<a id="L259" name="L259"></a> 259     <em class="brace">}</em>
<a id="L260" name="L260"></a> 260 
<div class="comment">
     Reads a single line of text from the console.
     @throws IOError
             If an I/O error occurs.
     @return  A string containing the line read from the console, not
              including any line-termination characters, or <tt>null</tt>
              if an end of stream has been reached.</div>
<a id="L271" name="L271"></a> 271     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25502.html" title="Multiple referred from 43 places.">readLine</a>() <em class="brace">{</em>
<a id="L272" name="L272"></a> 272         <strong class="reserved">return</strong> <a href="../D/30213.html" title="Multiple defined in 17 places.">readLine</a>("");
<a id="L273" name="L273"></a> 273     <em class="brace">}</em>
<a id="L274" name="L274"></a> 274 
<div class="comment">
     Provides a formatted prompt, then reads a password or passphrase from
     the console with echoing disabled.
     @param  fmt
             A format string as described in <a href="../util/Formatter.html#syntax">Format string syntax</a>
             for the prompt text.
     @param  args
             Arguments referenced by the format specifiers in the format
             string.  If there are more arguments than format specifiers, the
             extra arguments are ignored.  The maximum number of arguments is
             limited by the maximum dimension of a Java array as defined by
             <cite>The Javaâ„¢ Virtual Machine Specification</cite>.
     @throws  IllegalFormatException
              If a format string contains an illegal syntax, a format
              specifier that is incompatible with the given arguments,
              insufficient arguments given the format string, or other
              illegal conditions.  For specification of all possible
              formatting errors, see the <a href="../util/Formatter.html#detail">Details</a>
              section of the formatter class specification.
     @throws IOError
             If an I/O error occurs.
     @return  A character array containing the password or passphrase read
              from the console, not including any line-termination characters,
              or <tt>null</tt> if an end of stream has been reached.</div>
<a id="L307" name="L307"></a> 307     <strong class="reserved">public</strong> <strong class="reserved">char</strong>[] <a href="../R/25529.html" title="Multiple referred from 4 places.">readPassword</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmt, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ... args) <em class="brace">{</em>
<a id="L308" name="L308"></a> 308         <strong class="reserved">char</strong>[] passwd = <strong class="reserved">null</strong>;
<a id="L309" name="L309"></a> 309         <strong class="reserved">synchronized</strong> (<a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310             <strong class="reserved">synchronized</strong>(<a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>) <em class="brace">{</em>
<a id="L311" name="L311"></a> 311                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L312" name="L312"></a> 312                     echoOff = <a href="../S/1437.html#L372" title="Defined at 372 in src/java/io/Console.java.">echo</a>(<strong class="reserved">false</strong>);
<a id="L313" name="L313"></a> 313                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1418.html#L34" title="Defined at 34 in src/java/io/IOError.java.">IOError</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L315" name="L315"></a> 315                 <em class="brace">}</em>
<a id="L316" name="L316"></a> 316                 <a href="../S/1418.html#L34" title="Defined at 34 in src/java/io/IOError.java.">IOError</a> ioe = <strong class="reserved">null</strong>;
<a id="L317" name="L317"></a> 317                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L318" name="L318"></a> 318                     <strong class="reserved">if</strong> (fmt.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0)
<a id="L319" name="L319"></a> 319                         pw.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(fmt, args);
<a id="L320" name="L320"></a> 320                     passwd = <a href="../S/1437.html#L375" title="Defined at 375 in src/java/io/Console.java.">readline</a>(<strong class="reserved">true</strong>);
<a id="L321" name="L321"></a> 321                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L322" name="L322"></a> 322                     ioe = <strong class="reserved">new</strong> <a href="../S/1418.html#L34" title="Defined at 34 in src/java/io/IOError.java.">IOError</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L323" name="L323"></a> 323                 <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L324" name="L324"></a> 324                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L325" name="L325"></a> 325                         echoOff = <a href="../S/1437.html#L372" title="Defined at 372 in src/java/io/Console.java.">echo</a>(<strong class="reserved">true</strong>);
<a id="L326" name="L326"></a> 326                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327                         <strong class="reserved">if</strong> (ioe == <strong class="reserved">null</strong>)
<a id="L328" name="L328"></a> 328                             ioe = <strong class="reserved">new</strong> <a href="../S/1418.html#L34" title="Defined at 34 in src/java/io/IOError.java.">IOError</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L329" name="L329"></a> 329                         <strong class="reserved">else</strong>
<a id="L330" name="L330"></a> 330                             ioe.<a href="../S/1726.html#L1041" title="Defined at 1041 in src/java/lang/Throwable.java.">addSuppressed</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L331" name="L331"></a> 331                     <em class="brace">}</em>
<a id="L332" name="L332"></a> 332                     <strong class="reserved">if</strong> (ioe != <strong class="reserved">null</strong>)
<a id="L333" name="L333"></a> 333                         <strong class="reserved">throw</strong> ioe;
<a id="L334" name="L334"></a> 334                 <em class="brace">}</em>
<a id="L335" name="L335"></a> 335                 pw.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>();
<a id="L336" name="L336"></a> 336             <em class="brace">}</em>
<a id="L337" name="L337"></a> 337         <em class="brace">}</em>
<a id="L338" name="L338"></a> 338         <strong class="reserved">return</strong> passwd;
<a id="L339" name="L339"></a> 339     <em class="brace">}</em>
<a id="L340" name="L340"></a> 340 
<div class="comment">
     Reads a password or passphrase from the console with echoing disabled
     @throws IOError
             If an I/O error occurs.
     @return  A character array containing the password or passphrase read
              from the console, not including any line-termination characters,
              or <tt>null</tt> if an end of stream has been reached.</div>
<a id="L351" name="L351"></a> 351     <strong class="reserved">public</strong> <strong class="reserved">char</strong>[] <a href="../R/25529.html" title="Multiple referred from 4 places.">readPassword</a>() <em class="brace">{</em>
<a id="L352" name="L352"></a> 352         <strong class="reserved">return</strong> <a href="../D/30244.html" title="Multiple defined in 2 places.">readPassword</a>("");
<a id="L353" name="L353"></a> 353     <em class="brace">}</em>
<a id="L354" name="L354"></a> 354 
<div class="comment">
      Flushes the console and forces any buffered output to be written
      immediately .</div>
<a id="L359" name="L359"></a> 359     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14697.html" title="Multiple referred from 199 places.">flush</a>() <em class="brace">{</em>
<a id="L360" name="L360"></a> 360         pw.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L361" name="L361"></a> 361     <em class="brace">}</em>
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>;
<a id="L364" name="L364"></a> 364     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>;
<a id="L365" name="L365"></a> 365     <strong class="reserved">private</strong> <a href="../S/1412.html#L51" title="Defined at 51 in src/java/io/Reader.java.">Reader</a> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>;
<a id="L366" name="L366"></a> 366     <strong class="reserved">private</strong> <a href="../S/1393.html#L50" title="Defined at 50 in src/java/io/Writer.java.">Writer</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>;
<a id="L367" name="L367"></a> 367     <strong class="reserved">private</strong> <a href="../S/1445.html#L56" title="Defined at 56 in src/java/io/PrintWriter.java.">PrintWriter</a> pw;
<a id="L368" name="L368"></a> 368     <strong class="reserved">private</strong> <a href="../D/3384.html" title="Multiple defined in 2 places.">Formatter</a> <a href="../S/1537.html#L4367" title="Defined at 4367 in src/java/time/format/DateTimeFormatterBuilder.java.">formatter</a>;
<a id="L369" name="L369"></a> 369     <strong class="reserved">private</strong> <a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a> cs;
<a id="L370" name="L370"></a> 370     <strong class="reserved">private</strong> <strong class="reserved">char</strong>[] rcb;
<a id="L371" name="L371"></a> 371     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/13742.html" title="Multiple referred from 816 places.">encoding</a>();
<a id="L372" name="L372"></a> 372     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">boolean</strong> <a href="../R/13619.html" title="Multiple referred from 3 places.">echo</a>(<strong class="reserved">boolean</strong> <a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L373" name="L373"></a> 373     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> echoOff;
<a id="L374" name="L374"></a> 374 
<a id="L375" name="L375"></a> 375     <strong class="reserved">private</strong> <strong class="reserved">char</strong>[] <a href="../R/25625.html" title="Multiple referred from 2 places.">readline</a>(<strong class="reserved">boolean</strong> zeroOut) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L376" name="L376"></a> 376         <strong class="reserved">int</strong> len = <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(rcb, 0, rcb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L377" name="L377"></a> 377         <strong class="reserved">if</strong> (len &lt; 0)
<a id="L378" name="L378"></a> 378             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;  <em class="comment">//EOL</em>
<a id="L379" name="L379"></a> 379         <strong class="reserved">if</strong> (rcb[len-1] == '\r')
<a id="L380" name="L380"></a> 380             len--;        <em class="comment">//remove CR at end;</em>
<a id="L381" name="L381"></a> 381         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (rcb[len-1] == '\n') <em class="brace">{</em>
<a id="L382" name="L382"></a> 382             len--;        <em class="comment">//remove LF at end;</em>
<a id="L383" name="L383"></a> 383             <strong class="reserved">if</strong> (len &gt; 0 &amp;&amp; rcb[len-1] == '\r')
<a id="L384" name="L384"></a> 384                 len--;    <em class="comment">//remove the CR, if there is one</em>
<a id="L385" name="L385"></a> 385         <em class="brace">}</em>
<a id="L386" name="L386"></a> 386         <strong class="reserved">char</strong>[] b = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[len];
<a id="L387" name="L387"></a> 387         <strong class="reserved">if</strong> (len &gt; 0) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(rcb, 0, b, 0, len);
<a id="L389" name="L389"></a> 389             <strong class="reserved">if</strong> (zeroOut) <em class="brace">{</em>
<a id="L390" name="L390"></a> 390                 <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(rcb, 0, len, ' ');
<a id="L391" name="L391"></a> 391             <em class="brace">}</em>
<a id="L392" name="L392"></a> 392         <em class="brace">}</em>
<a id="L393" name="L393"></a> 393         <strong class="reserved">return</strong> b;
<a id="L394" name="L394"></a> 394     <em class="brace">}</em>
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396     <strong class="reserved">private</strong> <strong class="reserved">char</strong>[] <a href="../R/20041.html" title="Multiple referred from 53 places.">grow</a>() <em class="brace">{</em>
<a id="L397" name="L397"></a> 397         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L1488" title="Defined at 1488 in src/java/lang/Thread.java.">holdsLock</a>(<a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>);
<a id="L398" name="L398"></a> 398         <strong class="reserved">char</strong>[] t = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[rcb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> * 2];
<a id="L399" name="L399"></a> 399         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(rcb, 0, t, 0, rcb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L400" name="L400"></a> 400         rcb = t;
<a id="L401" name="L401"></a> 401         <strong class="reserved">return</strong> rcb;
<a id="L402" name="L402"></a> 402     <em class="brace">}</em>
<a id="L403" name="L403"></a> 403 
<a id="L404" name="L404"></a> 404     <strong class="reserved">class</strong> <a href="../R/4595.html" title="Multiple referred from 4 places.">LineReader</a> <strong class="reserved">extends</strong> <a href="../S/1412.html#L51" title="Defined at 51 in src/java/io/Reader.java.">Reader</a> <em class="brace">{</em>
<a id="L405" name="L405"></a> 405         <strong class="reserved">private</strong> <a href="../S/1412.html#L51" title="Defined at 51 in src/java/io/Reader.java.">Reader</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L406" name="L406"></a> 406         <strong class="reserved">private</strong> <strong class="reserved">char</strong>[] cb;
<a id="L407" name="L407"></a> 407         <strong class="reserved">private</strong> <strong class="reserved">int</strong> nChars, <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>;
<a id="L408" name="L408"></a> 408         <strong class="reserved">boolean</strong> leftoverLF;
<a id="L409" name="L409"></a> 409         LineReader(<a href="../S/1412.html#L51" title="Defined at 51 in src/java/io/Reader.java.">Reader</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <em class="brace">{</em>
<a id="L410" name="L410"></a> 410             <strong class="reserved">this</strong>.<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L411" name="L411"></a> 411             cb = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[1024];
<a id="L412" name="L412"></a> 412             <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> = nChars = 0;
<a id="L413" name="L413"></a> 413             leftoverLF = <strong class="reserved">false</strong>;
<a id="L414" name="L414"></a> 414         <em class="brace">}</em>
<a id="L415" name="L415"></a> 415         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a> () <em class="brace">{</em><em class="brace">}</em>
<a id="L416" name="L416"></a> 416         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25626.html" title="Multiple referred from 11 places.">ready</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L417" name="L417"></a> 417             <em class="comment">//in.ready synchronizes on readLock already</em>
<a id="L418" name="L418"></a> 418             <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30354.html" title="Multiple defined in 12 places.">ready</a>();
<a id="L419" name="L419"></a> 419         <em class="brace">}</em>
<a id="L420" name="L420"></a> 420 
<a id="L421" name="L421"></a> 421         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>(<strong class="reserved">char</strong> cbuf[], <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L422" name="L422"></a> 422             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L423" name="L423"></a> 423         <em class="brace">{</em>
<a id="L424" name="L424"></a> 424             <strong class="reserved">int</strong> off = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L425" name="L425"></a> 425             <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L426" name="L426"></a> 426             <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &lt; 0 || <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt; cbuf.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; 0 ||
<a id="L427" name="L427"></a> 427                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &lt; 0 || <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt; cbuf.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L428" name="L428"></a> 428                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a>();
<a id="L429" name="L429"></a> 429             <em class="brace">}</em>
<a id="L430" name="L430"></a> 430             <strong class="reserved">synchronized</strong>(<a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>) <em class="brace">{</em>
<a id="L431" name="L431"></a> 431                 <strong class="reserved">boolean</strong> eof = <strong class="reserved">false</strong>;
<a id="L432" name="L432"></a> 432                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0;
<a id="L433" name="L433"></a> 433                 <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434                     <strong class="reserved">if</strong> (<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> &gt;= nChars) <em class="brace">{</em>   <em class="comment">//fill</em>
<a id="L435" name="L435"></a> 435                         <strong class="reserved">int</strong> n = 0;
<a id="L436" name="L436"></a> 436                         <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L437" name="L437"></a> 437                             n = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(cb, 0, cb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L438" name="L438"></a> 438                         <em class="brace">}</em> <strong class="reserved">while</strong> (n == 0);
<a id="L439" name="L439"></a> 439                         <strong class="reserved">if</strong> (n &gt; 0) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440                             nChars = n;
<a id="L441" name="L441"></a> 441                             <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> = 0;
<a id="L442" name="L442"></a> 442                             <strong class="reserved">if</strong> (n &lt; cb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp;
<a id="L443" name="L443"></a> 443                                 cb[n-1] != '\n' &amp;&amp; cb[n-1] != '\r') <em class="brace">{</em>
<div class="comment">
                                  we're in canonical mode so each "fill" should
                                  come back with an eol. if there no lf or nl at
                                  the end of returned bytes we reached an eof.</div>
<a id="L449" name="L449"></a> 449                                 eof = <strong class="reserved">true</strong>;
<a id="L450" name="L450"></a> 450                             <em class="brace">}</em>
<a id="L451" name="L451"></a> 451                         <em class="brace">}</em> <strong class="reserved">else</strong> <div class="comment">
/*EOF*/</div>
<a id="L452" name="L452"></a> 452                             <strong class="reserved">if</strong> (off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> == 0)
<a id="L453" name="L453"></a> 453                                 <strong class="reserved">return</strong> -1;
<a id="L454" name="L454"></a> 454                             <strong class="reserved">return</strong> off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L455" name="L455"></a> 455                         <em class="brace">}</em>
<a id="L456" name="L456"></a> 456                     <em class="brace">}</em>
<a id="L457" name="L457"></a> 457                     <strong class="reserved">if</strong> (leftoverLF &amp;&amp; cbuf == rcb &amp;&amp; cb[<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>] == '\n') <em class="brace">{</em>
<div class="comment">
                          if invoked by our readline, skip the leftover, otherwise
                          return the LF.</div>
<a id="L462" name="L462"></a> 462                         <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>++;
<a id="L463" name="L463"></a> 463                     <em class="brace">}</em>
<a id="L464" name="L464"></a> 464                     leftoverLF = <strong class="reserved">false</strong>;
<a id="L465" name="L465"></a> 465                     <strong class="reserved">while</strong> (<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> &lt; nChars) <em class="brace">{</em>
<a id="L466" name="L466"></a> 466                         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = cbuf[off++] = cb[<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>];
<a id="L467" name="L467"></a> 467                         cb[<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>++] = 0;
<a id="L468" name="L468"></a> 468                         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\n') <em class="brace">{</em>
<a id="L469" name="L469"></a> 469                             <strong class="reserved">return</strong> off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L470" name="L470"></a> 470                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\r') <em class="brace">{</em>
<a id="L471" name="L471"></a> 471                             <strong class="reserved">if</strong> (off == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<div class="comment">
 no space left even the next is LF, so return
                                  whatever we have if the invoker is not our
                                  readLine()</div>
<a id="L476" name="L476"></a> 476                                 <strong class="reserved">if</strong> (cbuf == rcb) <em class="brace">{</em>
<a id="L477" name="L477"></a> 477                                     cbuf = <a href="../D/23921.html" title="Multiple defined in 19 places.">grow</a>();
<a id="L478" name="L478"></a> 478                                     <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = cbuf.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L479" name="L479"></a> 479                                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L480" name="L480"></a> 480                                     leftoverLF = <strong class="reserved">true</strong>;
<a id="L481" name="L481"></a> 481                                     <strong class="reserved">return</strong> off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L482" name="L482"></a> 482                                 <em class="brace">}</em>
<a id="L483" name="L483"></a> 483                             <em class="brace">}</em>
<a id="L484" name="L484"></a> 484                             <strong class="reserved">if</strong> (<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> == nChars &amp;&amp; <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30354.html" title="Multiple defined in 12 places.">ready</a>()) <em class="brace">{</em>
<div class="comment">
                                  we have a CR and we reached the end of
                                  the read in buffer, fill to make sure we
                                  don't miss a LF, if there is one, it's possible
                                  that it got cut off during last round reading
                                  simply because the read in buffer was full.</div>
<a id="L492" name="L492"></a> 492                                 nChars = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(cb, 0, cb.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L493" name="L493"></a> 493                                 <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> = 0;
<a id="L494" name="L494"></a> 494                             <em class="brace">}</em>
<a id="L495" name="L495"></a> 495                             <strong class="reserved">if</strong> (<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a> &lt; nChars &amp;&amp; cb[<a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>] == '\n') <em class="brace">{</em>
<a id="L496" name="L496"></a> 496                                 cbuf[off++] = '\n';
<a id="L497" name="L497"></a> 497                                 <a href="../S/5943.html#L296" title="Defined at 296 in src/com/sun/org/apache/xml/internal/resolver/readers/TextCatalogReader.java.">nextChar</a>++;
<a id="L498" name="L498"></a> 498                             <em class="brace">}</em>
<a id="L499" name="L499"></a> 499                             <strong class="reserved">return</strong> off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L500" name="L500"></a> 500                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (off == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501                            <strong class="reserved">if</strong> (cbuf == rcb) <em class="brace">{</em>
<a id="L502" name="L502"></a> 502                                 cbuf = <a href="../D/23921.html" title="Multiple defined in 19 places.">grow</a>();
<a id="L503" name="L503"></a> 503                                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = cbuf.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L504" name="L504"></a> 504                            <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L505" name="L505"></a> 505                                <strong class="reserved">return</strong> off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L506" name="L506"></a> 506                            <em class="brace">}</em>
<a id="L507" name="L507"></a> 507                         <em class="brace">}</em>
<a id="L508" name="L508"></a> 508                     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509                     <strong class="reserved">if</strong> (eof)
<a id="L510" name="L510"></a> 510                         <strong class="reserved">return</strong> off - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L511" name="L511"></a> 511                 <em class="brace">}</em>
<a id="L512" name="L512"></a> 512             <em class="brace">}</em>
<a id="L513" name="L513"></a> 513         <em class="brace">}</em>
<a id="L514" name="L514"></a> 514     <em class="brace">}</em>
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516     <em class="comment">// Set up JavaIOAccess in SharedSecrets</em>
<a id="L517" name="L517"></a> 517     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L518" name="L518"></a> 518         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L519" name="L519"></a> 519             <em class="comment">// Add a shutdown hook to restore console's echo state should</em>
<a id="L520" name="L520"></a> 520             <em class="comment">// it be necessary.</em>
<a id="L521" name="L521"></a> 521             sun.misc.SharedSecrets.getJavaLangAccess()
<div class="comment">
                 .registerShutdownHook(0 /* shutdown hook invocation order */</div>,
<a id="L523" name="L523"></a> 523                     <div class="comment">
/* only register if shutdown is not in progress */</div>,
<a id="L524" name="L524"></a> 524                     <strong class="reserved">new</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>() <em class="brace">{</em>
<a id="L525" name="L525"></a> 525                         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L526" name="L526"></a> 526                             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L527" name="L527"></a> 527                                 <strong class="reserved">if</strong> (echoOff) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528                                     <a href="../S/1437.html#L372" title="Defined at 372 in src/java/io/Console.java.">echo</a>(<strong class="reserved">true</strong>);
<a id="L529" name="L529"></a> 529                                 <em class="brace">}</em>
<a id="L530" name="L530"></a> 530                             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em> <em class="brace">}</em>
<a id="L531" name="L531"></a> 531                         <em class="brace">}</em>
<a id="L532" name="L532"></a> 532                     <em class="brace">}</em>);
<a id="L533" name="L533"></a> 533         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a> e) <em class="brace">{</em>
<a id="L534" name="L534"></a> 534             <em class="comment">// shutdown is already in progress and console is first used</em>
<a id="L535" name="L535"></a> 535             <em class="comment">// by a shutdown hook</em>
<a id="L536" name="L536"></a> 536         <em class="brace">}</em>
<a id="L537" name="L537"></a> 537 
<a id="L538" name="L538"></a> 538         sun.misc.SharedSecrets.setJavaIOAccess(<strong class="reserved">new</strong> sun.misc.JavaIOAccess() <em class="brace">{</em>
<a id="L539" name="L539"></a> 539             <strong class="reserved">public</strong> <a href="../S/1437.html#L92" title="Defined at 92 in src/java/io/Console.java.">Console</a> <a href="../S/1557.html#L212" title="Defined at 212 in src/java/lang/System.java.">console</a>() <em class="brace">{</em>
<a id="L540" name="L540"></a> 540                 <strong class="reserved">if</strong> (<a href="../S/1437.html#L556" title="Defined at 556 in src/java/io/Console.java.">istty</a>()) <em class="brace">{</em>
<a id="L541" name="L541"></a> 541                     <strong class="reserved">if</strong> (cons == <strong class="reserved">null</strong>)
<a id="L542" name="L542"></a> 542                         cons = <strong class="reserved">new</strong> <a href="../S/1437.html#L92" title="Defined at 92 in src/java/io/Console.java.">Console</a>();
<a id="L543" name="L543"></a> 543                     <strong class="reserved">return</strong> cons;
<a id="L544" name="L544"></a> 544                 <em class="brace">}</em>
<a id="L545" name="L545"></a> 545                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L546" name="L546"></a> 546             <em class="brace">}</em>
<a id="L547" name="L547"></a> 547 
<a id="L548" name="L548"></a> 548             <strong class="reserved">public</strong> <a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a> <a href="../D/12344.html" title="Multiple defined in 2 places.">charset</a>() <em class="brace">{</em>
<a id="L549" name="L549"></a> 549                 <em class="comment">// This method is called in sun.security.util.Password,</em>
<a id="L550" name="L550"></a> 550                 <em class="comment">// cons already exists when this method is called</em>
<a id="L551" name="L551"></a> 551                 <strong class="reserved">return</strong> cons.cs;
<a id="L552" name="L552"></a> 552             <em class="brace">}</em>
<a id="L553" name="L553"></a> 553         <em class="brace">}</em>);
<a id="L554" name="L554"></a> 554     <em class="brace">}</em>
<a id="L555" name="L555"></a> 555     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1437.html#L92" title="Defined at 92 in src/java/io/Console.java.">Console</a> cons;
<a id="L556" name="L556"></a> 556     <strong class="reserved">private</strong> <strong class="reserved">native</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/1437.html#L540" title="Referred from 540 in src/java/io/Console.java.">istty</a>();
<a id="L557" name="L557"></a> 557     <strong class="reserved">private</strong> Console() <em class="brace">{</em>
<a id="L558" name="L558"></a> 558         <a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a> = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L559" name="L559"></a> 559         <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a> = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L560" name="L560"></a> 560         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> csname = <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>();
<a id="L561" name="L561"></a> 561         <strong class="reserved">if</strong> (csname != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L562" name="L562"></a> 562             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L563" name="L563"></a> 563                 cs = <a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a>.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(csname);
<a id="L564" name="L564"></a> 564             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em><em class="brace">}</em>
<a id="L565" name="L565"></a> 565         <em class="brace">}</em>
<a id="L566" name="L566"></a> 566         <strong class="reserved">if</strong> (cs == <strong class="reserved">null</strong>)
<a id="L567" name="L567"></a> 567             cs = <a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a>.<a href="../S/2005.html#L604" title="Defined at 604 in src/java/nio/charset/Charset.java.">defaultCharset</a>();
<a id="L568" name="L568"></a> 568         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a> = StreamEncoder.forOutputStreamWriter(
<a id="L569" name="L569"></a> 569                   <strong class="reserved">new</strong> <a href="../S/1382.html#L53" title="Defined at 53 in src/java/io/FileOutputStream.java.">FileOutputStream</a>(<a href="../S/1371.html#L43" title="Defined at 43 in src/java/io/FileDescriptor.java.">FileDescriptor</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>),
<a id="L570" name="L570"></a> 570                   <a href="../D/37100.html" title="Multiple defined in 7 places.">writeLock</a>,
<a id="L571" name="L571"></a> 571                   cs);
<a id="L572" name="L572"></a> 572         pw = <strong class="reserved">new</strong> <a href="../S/1445.html#L56" title="Defined at 56 in src/java/io/PrintWriter.java.">PrintWriter</a>(<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>, <strong class="reserved">true</strong>) <em class="brace">{</em> <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>() <em class="brace">{</em><em class="brace">}</em> <em class="brace">}</em>;
<a id="L573" name="L573"></a> 573         <a href="../S/1537.html#L4367" title="Defined at 4367 in src/java/time/format/DateTimeFormatterBuilder.java.">formatter</a> = <strong class="reserved">new</strong> <a href="../D/3384.html" title="Multiple defined in 2 places.">Formatter</a>(<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L574" name="L574"></a> 574         <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = <strong class="reserved">new</strong> <a href="../D/5056.html" title="Multiple defined in 2 places.">LineReader</a>(StreamDecoder.forInputStreamReader(
<a id="L575" name="L575"></a> 575                      <strong class="reserved">new</strong> <a href="../S/1386.html#L49" title="Defined at 49 in src/java/io/FileInputStream.java.">FileInputStream</a>(<a href="../S/1371.html#L43" title="Defined at 43 in src/java/io/FileDescriptor.java.">FileDescriptor</a>.<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>),
<a id="L576" name="L576"></a> 576                      <a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>,
<a id="L577" name="L577"></a> 577                      cs));
<a id="L578" name="L578"></a> 578         rcb = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[1024];
<a id="L579" name="L579"></a> 579     <em class="brace">}</em>
<a id="L580" name="L580"></a> 580 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L100">[^]</a><a href="#L556">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/time/zone/ZoneOffsetTransitionRule.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L171">[^]</a><a href="#L611">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L171" title="Defined at 171.">of</a></li>
<li><a href="#L241" title="Defined at 241.">readObject</a></li>
<li><a href="#L290" title="Defined at 290.">writeReplace</a></li>
<li><a href="#L300" title="Defined at 300.">writeExternal</a></li>
<li><a href="#L340" title="Defined at 340.">readExternal</a></li>
<li><a href="#L369" title="Defined at 369.">getMonth</a></li>
<li><a href="#L391" title="Defined at 391.">getDayOfMonthIndicator</a></li>
<li><a href="#L407" title="Defined at 407.">getDayOfWeek</a></li>
<li><a href="#L419" title="Defined at 419.">getLocalTime</a></li>
<li><a href="#L430" title="Defined at 430.">isMidnightEndOfDay</a></li>
<li><a href="#L442" title="Defined at 442.">getTimeDefinition</a></li>
<li><a href="#L451" title="Defined at 451.">getStandardOffset</a></li>
<li><a href="#L460" title="Defined at 460.">getOffsetBefore</a></li>
<li><a href="#L469" title="Defined at 469.">getOffsetAfter</a></li>
<li><a href="#L482" title="Defined at 482.">createTransition</a></li>
<li><a href="#L513" title="Defined at 513.">equals</a></li>
<li><a href="#L536" title="Defined at 536.">hashCode</a></li>
<li><a href="#L551" title="Defined at 551.">toString</a></li>
<li><a href="#L611" title="Defined at 611.">createDateTime</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  Copyright (c) 2009-2012, Stephen Colebourne &amp; Michael Nascimento Santos
  All rights reserved.
  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:
   * Redistributions of source code must retain the above copyright notice,
     this list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright notice,
     this list of conditions and the following disclaimer in the documentation
     and/or other materials provided with the distribution.
   * Neither the name of JSR-310 nor the names of its contributors
     may be used to endorse or promote products derived from this software
     without specific prior written permission.
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</div>
<a id="L62" name="L62"></a>  62 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>;
<a id="L63" name="L63"></a>  63 
<a id="L64" name="L64"></a>  64 <strong class="reserved">import</strong> static java.time.temporal.TemporalAdjusters.nextOrSame;
<a id="L65" name="L65"></a>  65 <strong class="reserved">import</strong> static java.time.temporal.TemporalAdjusters.previousOrSame;
<a id="L66" name="L66"></a>  66 
<a id="L67" name="L67"></a>  67 <strong class="reserved">import</strong> java.io.DataInput;
<a id="L68" name="L68"></a>  68 <strong class="reserved">import</strong> java.io.DataOutput;
<a id="L69" name="L69"></a>  69 <strong class="reserved">import</strong> java.io.IOException;
<a id="L70" name="L70"></a>  70 <strong class="reserved">import</strong> java.io.InvalidObjectException;
<a id="L71" name="L71"></a>  71 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L72" name="L72"></a>  72 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L73" name="L73"></a>  73 <strong class="reserved">import</strong> java.time.DayOfWeek;
<a id="L74" name="L74"></a>  74 <strong class="reserved">import</strong> java.time.LocalDate;
<a id="L75" name="L75"></a>  75 <strong class="reserved">import</strong> java.time.LocalDateTime;
<a id="L76" name="L76"></a>  76 <strong class="reserved">import</strong> java.time.LocalTime;
<a id="L77" name="L77"></a>  77 <strong class="reserved">import</strong> java.time.Month;
<a id="L78" name="L78"></a>  78 <strong class="reserved">import</strong> java.time.ZoneOffset;
<a id="L79" name="L79"></a>  79 <strong class="reserved">import</strong> java.time.chrono.IsoChronology;
<a id="L80" name="L80"></a>  80 <strong class="reserved">import</strong> java.util.Objects;
<a id="L81" name="L81"></a>  81 
<div class="comment">
  A rule expressing how to create a transition.
  <p>
  This class allows rules for identifying future transitions to be expressed.
  A rule might be written in many forms:
  </p><ul><li>the 16th March
  </li><li>the Sunday on or after the 16th March
  </li><li>the Sunday on or before the 16th March
  </li><li>the last Sunday in February
  </li></ul>
  These different rule types can be expressed and queried.
  @implSpec
  This class is immutable and thread-safe.
  @since 1.8</div>
<a id="L100" name="L100"></a> 100 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/9348.html" title="Multiple referred from 21 places.">ZoneOffsetTransitionRule</a> <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L101" name="L101"></a> 101 
<div class="comment">
      Serialization version.</div>
<a id="L105" name="L105"></a> 105     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 6889046316657758795L;
<a id="L106" name="L106"></a> 106 
<div class="comment">
      The month of the month-day of the first day of the cutover week.
      The actual date will be adjusted by the dowChange field.</div>
<a id="L111" name="L111"></a> 111     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1550.html#L106" title="Defined at 106 in src/java/time/Month.java.">Month</a> month;
<div class="comment">
      The day-of-month of the month-day of the cutover week.
      If positive, it is the start of the week where the cutover can occur.
      If negative, it represents the end of the week where cutover can occur.
      The value is the number of days from the end of the month, such that
      <code>-1</code> is the last day of the month, <code>-2</code> is the second
      to last day, and so on.</div>
<a id="L120" name="L120"></a> 120     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong> dom;
<div class="comment">
      The cutover day-of-week, null to retain the day-of-month.</div>
<a id="L124" name="L124"></a> 124     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1486.html#L109" title="Defined at 109 in src/java/time/DayOfWeek.java.">DayOfWeek</a> dow;
<div class="comment">
      The cutover time in the 'before' offset.</div>
<a id="L128" name="L128"></a> 128     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>;
<div class="comment">
      Whether the cutover time is midnight at the end of day.</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> timeEndOfDay;
<div class="comment">
      The definition of how the local time should be interpreted.</div>
<a id="L136" name="L136"></a> 136     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1524.html#L586" title="Defined at 586 in src/java/time/zone/ZoneOffsetTransitionRule.java.">TimeDefinition</a> timeDefinition;
<div class="comment">
      The standard offset at the cutover.</div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> standardOffset;
<div class="comment">
      The offset before the cutover.</div>
<a id="L144" name="L144"></a> 144     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> offsetBefore;
<div class="comment">
      The offset after the cutover.</div>
<a id="L148" name="L148"></a> 148     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> offsetAfter;
<a id="L149" name="L149"></a> 149 
<div class="comment">
      Obtains an instance defining the yearly rule to create transitions between two offsets.
      <p>
      Applications should normally obtain an instance from {@link ZoneRules}.
      This factory is only intended for use when creating {@link ZoneRules}.
      @param month  the month of the month-day of the first day of the cutover week, not null
      @param dayOfMonthIndicator  the day of the month-day of the cutover week, positive if the week is that
       day or later, negative if the week is that day or earlier, counting from the last day of the month,
       from -28 to 31 excluding 0
      @param dayOfWeek  the required day-of-week, null if the month-day should not be changed
      @param time  the cutover time in the 'before' offset, not null
      @param timeEndOfDay  whether the time is midnight at the end of day
      @param timeDefnition  how to interpret the cutover
      @param standardOffset  the standard offset in force at the cutover, not null
      @param offsetBefore  the offset before the cutover, not null
      @param offsetAfter  the offset after the cutover, not null
      @return the rule, not null
      @throws IllegalArgumentException if the day of month indicator is invalid
      @throws IllegalArgumentException if the end of day flag is true when the time is not midnight</p></div>
<a id="L171" name="L171"></a> 171     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a> <a href="../R/23902.html" title="Multiple referred from 267 places.">of</a>(
<a id="L172" name="L172"></a> 172             <a href="../S/1550.html#L106" title="Defined at 106 in src/java/time/Month.java.">Month</a> month,
<a id="L173" name="L173"></a> 173             <strong class="reserved">int</strong> dayOfMonthIndicator,
<a id="L174" name="L174"></a> 174             <a href="../S/1486.html#L109" title="Defined at 109 in src/java/time/DayOfWeek.java.">DayOfWeek</a> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>,
<a id="L175" name="L175"></a> 175             <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>,
<a id="L176" name="L176"></a> 176             <strong class="reserved">boolean</strong> timeEndOfDay,
<a id="L177" name="L177"></a> 177             <a href="../S/1524.html#L586" title="Defined at 586 in src/java/time/zone/ZoneOffsetTransitionRule.java.">TimeDefinition</a> timeDefnition,
<a id="L178" name="L178"></a> 178             <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> standardOffset,
<a id="L179" name="L179"></a> 179             <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> offsetBefore,
<a id="L180" name="L180"></a> 180             <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> offsetAfter) <em class="brace">{</em>
<a id="L181" name="L181"></a> 181         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(month, "month");
<a id="L182" name="L182"></a> 182         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, "time");
<a id="L183" name="L183"></a> 183         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(timeDefnition, "timeDefnition");
<a id="L184" name="L184"></a> 184         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(standardOffset, "standardOffset");
<a id="L185" name="L185"></a> 185         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(offsetBefore, "offsetBefore");
<a id="L186" name="L186"></a> 186         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(offsetAfter, "offsetAfter");
<a id="L187" name="L187"></a> 187         <strong class="reserved">if</strong> (dayOfMonthIndicator &lt; -28 || dayOfMonthIndicator &gt; 31 || dayOfMonthIndicator == 0) <em class="brace">{</em>
<a id="L188" name="L188"></a> 188             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Day of month indicator must be between -28 and 31 inclusive excluding zero");
<a id="L189" name="L189"></a> 189         <em class="brace">}</em>
<a id="L190" name="L190"></a> 190         <strong class="reserved">if</strong> (timeEndOfDay &amp;&amp; <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a>.MIDNIGHT) == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L191" name="L191"></a> 191             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Time must be midnight when end of day flag is true");
<a id="L192" name="L192"></a> 192         <em class="brace">}</em>
<a id="L193" name="L193"></a> 193         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a>(month, dayOfMonthIndicator, <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, timeEndOfDay, timeDefnition, standardOffset, offsetBefore, offsetAfter);
<a id="L194" name="L194"></a> 194     <em class="brace">}</em>
<a id="L195" name="L195"></a> 195 
<div class="comment">
      Creates an instance defining the yearly rule to create transitions between two offsets.
      @param month  the month of the month-day of the first day of the cutover week, not null
      @param dayOfMonthIndicator  the day of the month-day of the cutover week, positive if the week is that
       day or later, negative if the week is that day or earlier, counting from the last day of the month,
       from -28 to 31 excluding 0
      @param dayOfWeek  the required day-of-week, null if the month-day should not be changed
      @param time  the cutover time in the 'before' offset, not null
      @param timeEndOfDay  whether the time is midnight at the end of day
      @param timeDefnition  how to interpret the cutover
      @param standardOffset  the standard offset in force at the cutover, not null
      @param offsetBefore  the offset before the cutover, not null
      @param offsetAfter  the offset after the cutover, not null
      @throws IllegalArgumentException if the day of month indicator is invalid
      @throws IllegalArgumentException if the end of day flag is true when the time is not midnight</div>
<a id="L213" name="L213"></a> 213     ZoneOffsetTransitionRule(
<a id="L214" name="L214"></a> 214             <a href="../S/1550.html#L106" title="Defined at 106 in src/java/time/Month.java.">Month</a> month,
<a id="L215" name="L215"></a> 215             <strong class="reserved">int</strong> dayOfMonthIndicator,
<a id="L216" name="L216"></a> 216             <a href="../S/1486.html#L109" title="Defined at 109 in src/java/time/DayOfWeek.java.">DayOfWeek</a> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>,
<a id="L217" name="L217"></a> 217             <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>,
<a id="L218" name="L218"></a> 218             <strong class="reserved">boolean</strong> timeEndOfDay,
<a id="L219" name="L219"></a> 219             <a href="../S/1524.html#L586" title="Defined at 586 in src/java/time/zone/ZoneOffsetTransitionRule.java.">TimeDefinition</a> timeDefnition,
<a id="L220" name="L220"></a> 220             <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> standardOffset,
<a id="L221" name="L221"></a> 221             <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> offsetBefore,
<a id="L222" name="L222"></a> 222             <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> offsetAfter) <em class="brace">{</em>
<a id="L223" name="L223"></a> 223         <strong class="reserved">this</strong>.month = month;
<a id="L224" name="L224"></a> 224         <strong class="reserved">this</strong>.dom = (<strong class="reserved">byte</strong>) dayOfMonthIndicator;
<a id="L225" name="L225"></a> 225         <strong class="reserved">this</strong>.dow = <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>;
<a id="L226" name="L226"></a> 226         <strong class="reserved">this</strong>.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>;
<a id="L227" name="L227"></a> 227         <strong class="reserved">this</strong>.timeEndOfDay = timeEndOfDay;
<a id="L228" name="L228"></a> 228         <strong class="reserved">this</strong>.timeDefinition = timeDefnition;
<a id="L229" name="L229"></a> 229         <strong class="reserved">this</strong>.standardOffset = standardOffset;
<a id="L230" name="L230"></a> 230         <strong class="reserved">this</strong>.offsetBefore = offsetBefore;
<a id="L231" name="L231"></a> 231         <strong class="reserved">this</strong>.offsetAfter = offsetAfter;
<a id="L232" name="L232"></a> 232     <em class="brace">}</em>
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234     <em class="comment">//-----------------------------------------------------------------------</em>
<div class="comment">
      Defend against malicious streams.
      @param s the stream to read
      @throws InvalidObjectException always</div>
<a id="L241" name="L241"></a> 241     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s) <strong class="reserved">throws</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a> <em class="brace">{</em>
<a id="L242" name="L242"></a> 242         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>("Deserialization via serialization delegate");
<a id="L243" name="L243"></a> 243     <em class="brace">}</em>
<a id="L244" name="L244"></a> 244 
<div class="comment">
      Writes the object using a
      <a href="../../../serialized-form.html#java.time.zone.Ser">dedicated serialized form</a>.
      @serialData
      Refer to the serialized form of
      <a href="../../../serialized-form.html#java.time.zone.ZoneRules">ZoneRules.writeReplace</a>
      for the encoding of epoch seconds and offsets.
      <pre style="font-size:1.0em">{@code
           out.writeByte(3);                // identifies a ZoneOffsetTransition
           final int timeSecs = (timeEndOfDay ? 86400 : time.toSecondOfDay());
           final int stdOffset = standardOffset.getTotalSeconds();
           final int beforeDiff = offsetBefore.getTotalSeconds() - stdOffset;
           final int afterDiff = offsetAfter.getTotalSeconds() - stdOffset;
           final int timeByte = (timeSecs % 3600 == 0 ? (timeEndOfDay ? 24 : time.getHour()) : 31);
           final int stdOffsetByte = (stdOffset % 900 == 0 ? stdOffset / 900 + 128 : 255);
           final int beforeByte = (beforeDiff == 0 || beforeDiff == 1800 || beforeDiff == 3600 ? beforeDiff / 1800 : 3);
           final int afterByte = (afterDiff == 0 || afterDiff == 1800 || afterDiff == 3600 ? afterDiff / 1800 : 3);
           final int dowByte = (dow == null ? 0 : dow.getValue());
           int b = (month.getValue() &lt;&lt; 28) +          // 4 bits
                   ((dom + 32) &lt;&lt; 22) +                // 6 bits
                   (dowByte &lt;&lt; 19) +                   // 3 bits
                   (timeByte &lt;&lt; 14) +                  // 5 bits
                   (timeDefinition.ordinal() &lt;&lt; 12) +  // 2 bits
                   (stdOffsetByte &lt;&lt; 4) +              // 8 bits
                   (beforeByte &lt;&lt; 2) +                 // 2 bits
                   afterByte;                          // 2 bits
           out.writeInt(b);
           if (timeByte == 31) {
               out.writeInt(timeSecs);
           }
           if (stdOffsetByte == 255) {
               out.writeInt(stdOffset);
           }
           if (beforeByte == 3) {
               out.writeInt(offsetBefore.getTotalSeconds());
           }
           if (afterByte == 3) {
               out.writeInt(offsetAfter.getTotalSeconds());
           }
      }
      </pre>
      @return the replacing object, not null</div>
<a id="L290" name="L290"></a> 290     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/30703.html" title="Multiple referred from 7 places.">writeReplace</a>() <em class="brace">{</em>
<a id="L291" name="L291"></a> 291         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/7725.html" title="Multiple defined in 3 places.">Ser</a>(<a href="../D/7725.html" title="Multiple defined in 3 places.">Ser</a>.ZOTRULE, <strong class="reserved">this</strong>);
<a id="L292" name="L292"></a> 292     <em class="brace">}</em>
<a id="L293" name="L293"></a> 293 
<div class="comment">
      Writes the state to the stream.
      @param out  the output stream, not null
      @throws IOException if an error occurs</div>
<a id="L300" name="L300"></a> 300     <strong class="reserved">void</strong> <a href="../R/30621.html" title="Multiple referred from 43 places.">writeExternal</a>(<a href="../S/1422.html#L50" title="Defined at 50 in src/java/io/DataOutput.java.">DataOutput</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L301" name="L301"></a> 301         <strong class="reserved">final</strong> <strong class="reserved">int</strong> timeSecs = (timeEndOfDay ? 86400 : <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../S/1527.html#L1450" title="Defined at 1450 in src/java/time/LocalTime.java.">toSecondOfDay</a>());
<a id="L302" name="L302"></a> 302         <strong class="reserved">final</strong> <strong class="reserved">int</strong> stdOffset = standardOffset.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>();
<a id="L303" name="L303"></a> 303         <strong class="reserved">final</strong> <strong class="reserved">int</strong> beforeDiff = offsetBefore.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>() - stdOffset;
<a id="L304" name="L304"></a> 304         <strong class="reserved">final</strong> <strong class="reserved">int</strong> afterDiff = offsetAfter.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>() - stdOffset;
<a id="L305" name="L305"></a> 305         <strong class="reserved">final</strong> <strong class="reserved">int</strong> timeByte = (timeSecs % 3600 == 0 ? (timeEndOfDay ? 24 : <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../D/19497.html" title="Multiple defined in 7 places.">getHour</a>()) : 31);
<a id="L306" name="L306"></a> 306         <strong class="reserved">final</strong> <strong class="reserved">int</strong> stdOffsetByte = (stdOffset % 900 == 0 ? stdOffset / 900 + 128 : 255);
<a id="L307" name="L307"></a> 307         <strong class="reserved">final</strong> <strong class="reserved">int</strong> beforeByte = (beforeDiff == 0 || beforeDiff == 1800 || beforeDiff == 3600 ? beforeDiff / 1800 : 3);
<a id="L308" name="L308"></a> 308         <strong class="reserved">final</strong> <strong class="reserved">int</strong> afterByte = (afterDiff == 0 || afterDiff == 1800 || afterDiff == 3600 ? afterDiff / 1800 : 3);
<a id="L309" name="L309"></a> 309         <strong class="reserved">final</strong> <strong class="reserved">int</strong> dowByte = (dow == <strong class="reserved">null</strong> ? 0 : dow.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>());
<a id="L310" name="L310"></a> 310         <strong class="reserved">int</strong> b = (month.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>() &lt;&lt; 28) +          <em class="comment">// 4 bits</em>
<a id="L311" name="L311"></a> 311                 ((dom + 32) &lt;&lt; 22) +                <em class="comment">// 6 bits</em>
<a id="L312" name="L312"></a> 312                 (dowByte &lt;&lt; 19) +                   <em class="comment">// 3 bits</em>
<a id="L313" name="L313"></a> 313                 (timeByte &lt;&lt; 14) +                  <em class="comment">// 5 bits</em>
<a id="L314" name="L314"></a> 314                 (timeDefinition.<a href="../D/28579.html" title="Multiple defined in 2 places.">ordinal</a>() &lt;&lt; 12) +  <em class="comment">// 2 bits</em>
<a id="L315" name="L315"></a> 315                 (stdOffsetByte &lt;&lt; 4) +              <em class="comment">// 8 bits</em>
<a id="L316" name="L316"></a> 316                 (beforeByte &lt;&lt; 2) +                 <em class="comment">// 2 bits</em>
<a id="L317" name="L317"></a> 317                 afterByte;                          <em class="comment">// 2 bits</em>
<a id="L318" name="L318"></a> 318         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(b);
<a id="L319" name="L319"></a> 319         <strong class="reserved">if</strong> (timeByte == 31) <em class="brace">{</em>
<a id="L320" name="L320"></a> 320             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(timeSecs);
<a id="L321" name="L321"></a> 321         <em class="brace">}</em>
<a id="L322" name="L322"></a> 322         <strong class="reserved">if</strong> (stdOffsetByte == 255) <em class="brace">{</em>
<a id="L323" name="L323"></a> 323             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(stdOffset);
<a id="L324" name="L324"></a> 324         <em class="brace">}</em>
<a id="L325" name="L325"></a> 325         <strong class="reserved">if</strong> (beforeByte == 3) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(offsetBefore.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>());
<a id="L327" name="L327"></a> 327         <em class="brace">}</em>
<a id="L328" name="L328"></a> 328         <strong class="reserved">if</strong> (afterByte == 3) <em class="brace">{</em>
<a id="L329" name="L329"></a> 329             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(offsetAfter.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>());
<a id="L330" name="L330"></a> 330         <em class="brace">}</em>
<a id="L331" name="L331"></a> 331     <em class="brace">}</em>
<a id="L332" name="L332"></a> 332 
<div class="comment">
      Reads the state from the stream.
      @param in  the input stream, not null
      @return the created object, not null
      @throws IOException if an error occurs</div>
<a id="L340" name="L340"></a> 340     <strong class="reserved">static</strong> <a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a> <a href="../R/25469.html" title="Multiple referred from 41 places.">readExternal</a>(<a href="../S/1438.html#L149" title="Defined at 149 in src/java/io/DataInput.java.">DataInput</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L341" name="L341"></a> 341         <strong class="reserved">int</strong> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L342" name="L342"></a> 342         <a href="../S/1550.html#L106" title="Defined at 106 in src/java/time/Month.java.">Month</a> month = <a href="../S/1550.html#L106" title="Defined at 106 in src/java/time/Month.java.">Month</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &gt;&gt;&gt; 28);
<a id="L343" name="L343"></a> 343         <strong class="reserved">int</strong> dom = ((<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; (63 &lt;&lt; 22)) &gt;&gt;&gt; 22) - 32;
<a id="L344" name="L344"></a> 344         <strong class="reserved">int</strong> dowByte = (<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; (7 &lt;&lt; 19)) &gt;&gt;&gt; 19;
<a id="L345" name="L345"></a> 345         <a href="../S/1486.html#L109" title="Defined at 109 in src/java/time/DayOfWeek.java.">DayOfWeek</a> dow = dowByte == 0 ? <strong class="reserved">null</strong> : <a href="../S/1486.html#L109" title="Defined at 109 in src/java/time/DayOfWeek.java.">DayOfWeek</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(dowByte);
<a id="L346" name="L346"></a> 346         <strong class="reserved">int</strong> timeByte = (<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; (31 &lt;&lt; 14)) &gt;&gt;&gt; 14;
<a id="L347" name="L347"></a> 347         <a href="../S/1524.html#L586" title="Defined at 586 in src/java/time/zone/ZoneOffsetTransitionRule.java.">TimeDefinition</a> defn = <a href="../S/1524.html#L586" title="Defined at 586 in src/java/time/zone/ZoneOffsetTransitionRule.java.">TimeDefinition</a>.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()[(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; (3 &lt;&lt; 12)) &gt;&gt;&gt; 12];
<a id="L348" name="L348"></a> 348         <strong class="reserved">int</strong> stdByte = (<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; (255 &lt;&lt; 4)) &gt;&gt;&gt; 4;
<a id="L349" name="L349"></a> 349         <strong class="reserved">int</strong> beforeByte = (<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; (3 &lt;&lt; 2)) &gt;&gt;&gt; 2;
<a id="L350" name="L350"></a> 350         <strong class="reserved">int</strong> afterByte = (<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> &amp; 3);
<a id="L351" name="L351"></a> 351         <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = (timeByte == 31 ? <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a>.<a href="../S/1527.html#L357" title="Defined at 357 in src/java/time/LocalTime.java.">ofSecondOfDay</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>()) : <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(timeByte % 24, 0));
<a id="L352" name="L352"></a> 352         <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> std = (stdByte == 255 ? <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1553.html#L413" title="Defined at 413 in src/java/time/ZoneOffset.java.">ofTotalSeconds</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>()) : <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1553.html#L413" title="Defined at 413 in src/java/time/ZoneOffset.java.">ofTotalSeconds</a>((stdByte - 128) * 900));
<a id="L353" name="L353"></a> 353         <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> <a href="../D/11800.html" title="Multiple defined in 3 places.">before</a> = (beforeByte == 3 ? <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1553.html#L413" title="Defined at 413 in src/java/time/ZoneOffset.java.">ofTotalSeconds</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>()) : <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1553.html#L413" title="Defined at 413 in src/java/time/ZoneOffset.java.">ofTotalSeconds</a>(std.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>() + beforeByte * 1800));
<a id="L354" name="L354"></a> 354         <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> = (afterByte == 3 ? <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1553.html#L413" title="Defined at 413 in src/java/time/ZoneOffset.java.">ofTotalSeconds</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>()) : <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1553.html#L413" title="Defined at 413 in src/java/time/ZoneOffset.java.">ofTotalSeconds</a>(std.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>() + afterByte * 1800));
<a id="L355" name="L355"></a> 355         <strong class="reserved">return</strong> <a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(month, dom, dow, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, timeByte == 24, defn, std, <a href="../D/11800.html" title="Multiple defined in 3 places.">before</a>, <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>);
<a id="L356" name="L356"></a> 356     <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358     <em class="comment">//-----------------------------------------------------------------------</em>
<div class="comment">
      Gets the month of the transition.
      <p>
      If the rule defines an exact date then the month is the month of that date.
      </p><p>
      If the rule defines a week where the transition might occur, then the month
      if the month of either the earliest or latest possible date of the cutover.
      @return the month of the transition, not null</p></div>
<a id="L369" name="L369"></a> 369     <strong class="reserved">public</strong> <a href="../S/1550.html#L106" title="Defined at 106 in src/java/time/Month.java.">Month</a> <a href="../R/17791.html" title="Multiple referred from 80 places.">getMonth</a>() <em class="brace">{</em>
<a id="L370" name="L370"></a> 370         <strong class="reserved">return</strong> month;
<a id="L371" name="L371"></a> 371     <em class="brace">}</em>
<a id="L372" name="L372"></a> 372 
<div class="comment">
      Gets the indicator of the day-of-month of the transition.
      <p>
      If the rule defines an exact date then the day is the month of that date.
      </p><p>
      If the rule defines a week where the transition might occur, then the day
      defines either the start of the end of the transition week.
      </p><p>
      If the value is positive, then it represents a normal day-of-month, and is the
      earliest possible date that the transition can be.
      The date may refer to 29th February which should be treated as 1st March in non-leap years.
      </p><p>
      If the value is negative, then it represents the number of days back from the
      end of the month where <code>-1</code> is the last day of the month.
      In this case, the day identified is the latest possible date that the transition can be.
      @return the day-of-month indicator, from -28 to 31 excluding 0</p></div>
<a id="L391" name="L391"></a> 391     <strong class="reserved">public</strong> <strong class="reserved">int</strong> getDayOfMonthIndicator() <em class="brace">{</em>
<a id="L392" name="L392"></a> 392         <strong class="reserved">return</strong> dom;
<a id="L393" name="L393"></a> 393     <em class="brace">}</em>
<a id="L394" name="L394"></a> 394 
<div class="comment">
      Gets the day-of-week of the transition.
      <p>
      If the rule defines an exact date then this returns null.
      </p><p>
      If the rule defines a week where the cutover might occur, then this method
      returns the day-of-week that the month-day will be adjusted to.
      If the day is positive then the adjustment is later.
      If the day is negative then the adjustment is earlier.
      @return the day-of-week that the transition occurs, null if the rule defines an exact date</p></div>
<a id="L407" name="L407"></a> 407     <strong class="reserved">public</strong> <a href="../S/1486.html#L109" title="Defined at 109 in src/java/time/DayOfWeek.java.">DayOfWeek</a> <a href="../R/15963.html" title="Multiple referred from 25 places.">getDayOfWeek</a>() <em class="brace">{</em>
<a id="L408" name="L408"></a> 408         <strong class="reserved">return</strong> dow;
<a id="L409" name="L409"></a> 409     <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<div class="comment">
      Gets the local time of day of the transition which must be checked with
      {@link #isMidnightEndOfDay()}.
      <p>
      The time is converted into an instant using the time definition.
      @return the local time of day of the transition, not null</p></div>
<a id="L419" name="L419"></a> 419     <strong class="reserved">public</strong> <a href="../S/1527.html#L125" title="Defined at 125 in src/java/time/LocalTime.java.">LocalTime</a> getLocalTime() <em class="brace">{</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">return</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>;
<a id="L421" name="L421"></a> 421     <em class="brace">}</em>
<a id="L422" name="L422"></a> 422 
<div class="comment">
      Is the transition local time midnight at the end of day.
      <p>
      The transition may be represented as occurring at 24:00.
      @return whether a local time of midnight is at the start or end of the day</p></div>
<a id="L430" name="L430"></a> 430     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isMidnightEndOfDay() <em class="brace">{</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">return</strong> timeEndOfDay;
<a id="L432" name="L432"></a> 432     <em class="brace">}</em>
<a id="L433" name="L433"></a> 433 
<div class="comment">
      Gets the time definition, specifying how to convert the time to an instant.
      <p>
      The local time can be converted to an instant using the standard offset,
      the wall offset or UTC.
      @return the time definition, not null</p></div>
<a id="L442" name="L442"></a> 442     <strong class="reserved">public</strong> <a href="../S/1524.html#L586" title="Defined at 586 in src/java/time/zone/ZoneOffsetTransitionRule.java.">TimeDefinition</a> getTimeDefinition() <em class="brace">{</em>
<a id="L443" name="L443"></a> 443         <strong class="reserved">return</strong> timeDefinition;
<a id="L444" name="L444"></a> 444     <em class="brace">}</em>
<a id="L445" name="L445"></a> 445 
<div class="comment">
      Gets the standard offset in force at the transition.
      @return the standard offset, not null</div>
<a id="L451" name="L451"></a> 451     <strong class="reserved">public</strong> <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> <a href="../R/19156.html" title="Multiple referred from 2 places.">getStandardOffset</a>() <em class="brace">{</em>
<a id="L452" name="L452"></a> 452         <strong class="reserved">return</strong> standardOffset;
<a id="L453" name="L453"></a> 453     <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<div class="comment">
      Gets the offset before the transition.
      @return the offset before, not null</div>
<a id="L460" name="L460"></a> 460     <strong class="reserved">public</strong> <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> <a href="../R/18117.html" title="Multiple referred from 12 places.">getOffsetBefore</a>() <em class="brace">{</em>
<a id="L461" name="L461"></a> 461         <strong class="reserved">return</strong> offsetBefore;
<a id="L462" name="L462"></a> 462     <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 
<div class="comment">
      Gets the offset after the transition.
      @return the offset after, not null</div>
<a id="L469" name="L469"></a> 469     <strong class="reserved">public</strong> <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> <a href="../R/18116.html" title="Multiple referred from 14 places.">getOffsetAfter</a>() <em class="brace">{</em>
<a id="L470" name="L470"></a> 470         <strong class="reserved">return</strong> offsetAfter;
<a id="L471" name="L471"></a> 471     <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473     <em class="comment">//-----------------------------------------------------------------------</em>
<div class="comment">
      Creates a transition instance for the specified year.
      <p>
      Calculations are performed using the ISO-8601 chronology.
      @param year  the year to create a transition for, not null
      @return the transition instance, not null</p></div>
<a id="L482" name="L482"></a> 482     <strong class="reserved">public</strong> <a href="../S/1520.html#L99" title="Defined at 99 in src/java/time/zone/ZoneOffsetTransition.java.">ZoneOffsetTransition</a> <a href="../S/1522.html#L730" title="Referred from 730 in src/java/time/zone/ZoneRules.java.">createTransition</a>(<strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>) <em class="brace">{</em>
<a id="L483" name="L483"></a> 483         <a href="../S/1549.html#L137" title="Defined at 137 in src/java/time/LocalDate.java.">LocalDate</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>;
<a id="L484" name="L484"></a> 484         <strong class="reserved">if</strong> (dom &lt; 0) <em class="brace">{</em>
<a id="L485" name="L485"></a> 485             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../S/1549.html#L137" title="Defined at 137 in src/java/time/LocalDate.java.">LocalDate</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, month, month.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(<a href="../S/1513.html#L123" title="Defined at 123 in src/java/time/chrono/IsoChronology.java.">IsoChronology</a>.INSTANCE.<a href="../D/25782.html" title="Multiple defined in 12 places.">isLeapYear</a>(<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>)) + 1 + dom);
<a id="L486" name="L486"></a> 486             <strong class="reserved">if</strong> (dow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L487" name="L487"></a> 487                 <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/36897.html" title="Multiple defined in 48 places.">with</a>(<a href="../S/1474.html#L466" title="Defined at 466 in src/java/time/temporal/TemporalAdjusters.java.">previousOrSame</a>(dow));
<a id="L488" name="L488"></a> 488             <em class="brace">}</em>
<a id="L489" name="L489"></a> 489         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L490" name="L490"></a> 490             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../S/1549.html#L137" title="Defined at 137 in src/java/time/LocalDate.java.">LocalDate</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, month, dom);
<a id="L491" name="L491"></a> 491             <strong class="reserved">if</strong> (dow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L492" name="L492"></a> 492                 <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/36897.html" title="Multiple defined in 48 places.">with</a>(<a href="../S/1474.html#L412" title="Defined at 412 in src/java/time/temporal/TemporalAdjusters.java.">nextOrSame</a>(dow));
<a id="L493" name="L493"></a> 493             <em class="brace">}</em>
<a id="L494" name="L494"></a> 494         <em class="brace">}</em>
<a id="L495" name="L495"></a> 495         <strong class="reserved">if</strong> (timeEndOfDay) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/29362.html" title="Multiple defined in 12 places.">plusDays</a>(1);
<a id="L497" name="L497"></a> 497         <em class="brace">}</em>
<a id="L498" name="L498"></a> 498         <a href="../S/1518.html#L135" title="Defined at 135 in src/java/time/LocalDateTime.java.">LocalDateTime</a> localDT = <a href="../S/1518.html#L135" title="Defined at 135 in src/java/time/LocalDateTime.java.">LocalDateTime</a>.<a href="../D/28425.html" title="Multiple defined in 123 places.">of</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L499" name="L499"></a> 499         <a href="../S/1518.html#L135" title="Defined at 135 in src/java/time/LocalDateTime.java.">LocalDateTime</a> transition = timeDefinition.<a href="../D/13754.html" title="Multiple defined in 4 places.">createDateTime</a>(localDT, standardOffset, offsetBefore);
<a id="L500" name="L500"></a> 500         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1520.html#L99" title="Defined at 99 in src/java/time/zone/ZoneOffsetTransition.java.">ZoneOffsetTransition</a>(transition, offsetBefore, offsetAfter);
<a id="L501" name="L501"></a> 501     <em class="brace">}</em>
<a id="L502" name="L502"></a> 502 
<a id="L503" name="L503"></a> 503     <em class="comment">//-----------------------------------------------------------------------</em>
<div class="comment">
      Checks if this object equals another.
      <p>
      The entire state of the object is compared.
      @param otherRule  the other object to compare to, null returns false
      @return true if equal</p></div>
<a id="L512" name="L512"></a> 512     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L513" name="L513"></a> 513     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> otherRule) <em class="brace">{</em>
<a id="L514" name="L514"></a> 514         <strong class="reserved">if</strong> (otherRule == <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L515" name="L515"></a> 515             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L516" name="L516"></a> 516         <em class="brace">}</em>
<a id="L517" name="L517"></a> 517         <strong class="reserved">if</strong> (otherRule <strong class="reserved">instanceof</strong> <a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a>) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518             <a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a> other = (<a href="../S/1524.html#L100" title="Defined at 100 in src/java/time/zone/ZoneOffsetTransitionRule.java.">ZoneOffsetTransitionRule</a>) otherRule;
<a id="L519" name="L519"></a> 519             <strong class="reserved">return</strong> month == other.month &amp;&amp; dom == other.dom &amp;&amp; dow == other.dow &amp;&amp;
<a id="L520" name="L520"></a> 520                 timeDefinition == other.timeDefinition &amp;&amp;
<a id="L521" name="L521"></a> 521                 <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>) &amp;&amp;
<a id="L522" name="L522"></a> 522                 timeEndOfDay == other.timeEndOfDay &amp;&amp;
<a id="L523" name="L523"></a> 523                 standardOffset.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.standardOffset) &amp;&amp;
<a id="L524" name="L524"></a> 524                 offsetBefore.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.offsetBefore) &amp;&amp;
<a id="L525" name="L525"></a> 525                 offsetAfter.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.offsetAfter);
<a id="L526" name="L526"></a> 526         <em class="brace">}</em>
<a id="L527" name="L527"></a> 527         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L528" name="L528"></a> 528     <em class="brace">}</em>
<a id="L529" name="L529"></a> 529 
<div class="comment">
      Returns a suitable hash code.
      @return the hash code</div>
<a id="L535" name="L535"></a> 535     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L536" name="L536"></a> 536     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L537" name="L537"></a> 537         <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = ((<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../S/1527.html#L1450" title="Defined at 1450 in src/java/time/LocalTime.java.">toSecondOfDay</a>() + (timeEndOfDay ? 1 : 0)) &lt;&lt; 15) +
<a id="L538" name="L538"></a> 538                 (month.<a href="../D/28579.html" title="Multiple defined in 2 places.">ordinal</a>() &lt;&lt; 11) + ((dom + 32) &lt;&lt; 5) +
<a id="L539" name="L539"></a> 539                 ((dow == <strong class="reserved">null</strong> ? 7 : dow.<a href="../D/28579.html" title="Multiple defined in 2 places.">ordinal</a>()) &lt;&lt; 2) + (timeDefinition.<a href="../D/28579.html" title="Multiple defined in 2 places.">ordinal</a>());
<a id="L540" name="L540"></a> 540         <strong class="reserved">return</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> ^ standardOffset.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() ^
<a id="L541" name="L541"></a> 541                 offsetBefore.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() ^ offsetAfter.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L542" name="L542"></a> 542     <em class="brace">}</em>
<a id="L543" name="L543"></a> 543 
<a id="L544" name="L544"></a> 544     <em class="comment">//-----------------------------------------------------------------------</em>
<div class="comment">
      Returns a string describing this object.
      @return a string for debugging, not null</div>
<a id="L550" name="L550"></a> 550     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L551" name="L551"></a> 551     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L552" name="L552"></a> 552         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L553" name="L553"></a> 553         <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("TransitionRule[")
<a id="L554" name="L554"></a> 554             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(offsetBefore.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(offsetAfter) &gt; 0 ? "Gap " : "Overlap ")
<a id="L555" name="L555"></a> 555             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(offsetBefore).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" to ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(offsetAfter).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(", ");
<a id="L556" name="L556"></a> 556         <strong class="reserved">if</strong> (dow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L557" name="L557"></a> 557             <strong class="reserved">if</strong> (dom == -1) <em class="brace">{</em>
<a id="L558" name="L558"></a> 558                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(dow.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>()).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" on or before last day of ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(month.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>());
<a id="L559" name="L559"></a> 559             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (dom &lt; 0) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(dow.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>()).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" on or before last day minus ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(-dom - 1).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" of ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(month.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>());
<a id="L561" name="L561"></a> 561             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L562" name="L562"></a> 562                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(dow.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>()).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" on or after ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(month.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>()).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(' ').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(dom);
<a id="L563" name="L563"></a> 563             <em class="brace">}</em>
<a id="L564" name="L564"></a> 564         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L565" name="L565"></a> 565             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(month.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>()).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(' ').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(dom);
<a id="L566" name="L566"></a> 566         <em class="brace">}</em>
<a id="L567" name="L567"></a> 567         <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" at ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(timeEndOfDay ? "24:00" : <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>())
<a id="L568" name="L568"></a> 568             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(" ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(timeDefinition)
<a id="L569" name="L569"></a> 569             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(", standard offset ").<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(standardOffset)
<a id="L570" name="L570"></a> 570             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(']');
<a id="L571" name="L571"></a> 571         <strong class="reserved">return</strong> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L572" name="L572"></a> 572     <em class="brace">}</em>
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574     <em class="comment">//-----------------------------------------------------------------------</em>
<div class="comment">
      A definition of the way a local time can be converted to the actual
      transition date-time.
      <p>
      Time zone rules are expressed in one of three ways:
      </p><ul><li>Relative to UTC</li><li>Relative to the standard offset in force</li><li>Relative to the wall offset (what you would see on a clock on the wall)</li>
      </ul></div>
<a id="L586" name="L586"></a> 586     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">enum</strong> <a href="../R/8163.html" title="Multiple referred from 5 places.">TimeDefinition</a> <em class="brace">{</em>
<div class="comment">
         /** The local date-time is expressed in terms of the UTC offset. */</div>
<a id="L588" name="L588"></a> 588         <a href="../S/1157.html#L317" title="Defined at 317 in src/java/util/Date.java.">UTC</a>,
<div class="comment">
         /** The local date-time is expressed in terms of the wall offset. */</div>
<a id="L590" name="L590"></a> 590         WALL,
<div class="comment">
         /** The local date-time is expressed in terms of the standard offset. */</div>
<a id="L592" name="L592"></a> 592         STANDARD;
<a id="L593" name="L593"></a> 593 
<div class="comment">
          Converts the specified local date-time to the local date-time actually
          seen on a wall clock.
          <p>
          This method converts using the type of this enum.
          The output is defined relative to the 'before' offset of the transition.
          </p><p>
          The UTC type uses the UTC offset.
          The STANDARD type uses the standard offset.
          The WALL type returns the input date-time.
          The result is intended for use with the wall-offset.
          @param dateTime  the local date-time, not null
          @param standardOffset  the standard offset, not null
          @param wallOffset  the wall offset, not null
          @return the date-time relative to the wall/before offset, not null</p></div>
<a id="L611" name="L611"></a> 611         <strong class="reserved">public</strong> <a href="../S/1518.html#L135" title="Defined at 135 in src/java/time/LocalDateTime.java.">LocalDateTime</a> <a href="../R/12326.html" title="Multiple referred from 2 places.">createDateTime</a>(<a href="../S/1518.html#L135" title="Defined at 135 in src/java/time/LocalDateTime.java.">LocalDateTime</a> <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>, <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> standardOffset, <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a> wallOffset) <em class="brace">{</em>
<a id="L612" name="L612"></a> 612             <strong class="reserved">switch</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L613" name="L613"></a> 613                 <strong class="reserved">case</strong> <a href="../S/1157.html#L317" title="Defined at 317 in src/java/util/Date.java.">UTC</a>: <em class="brace">{</em>
<a id="L614" name="L614"></a> 614                     <strong class="reserved">int</strong> <a href="../D/14900.html" title="Multiple defined in 5 places.">difference</a> = wallOffset.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>() - <a href="../S/1553.html#L130" title="Defined at 130 in src/java/time/ZoneOffset.java.">ZoneOffset</a>.<a href="../S/1157.html#L317" title="Defined at 317 in src/java/util/Date.java.">UTC</a>.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>();
<a id="L615" name="L615"></a> 615                     <strong class="reserved">return</strong> <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/29368.html" title="Multiple defined in 8 places.">plusSeconds</a>(<a href="../D/14900.html" title="Multiple defined in 5 places.">difference</a>);
<a id="L616" name="L616"></a> 616                 <em class="brace">}</em>
<a id="L617" name="L617"></a> 617                 <strong class="reserved">case</strong> STANDARD: <em class="brace">{</em>
<a id="L618" name="L618"></a> 618                     <strong class="reserved">int</strong> <a href="../D/14900.html" title="Multiple defined in 5 places.">difference</a> = wallOffset.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>() - standardOffset.<a href="../S/1553.html#L473" title="Defined at 473 in src/java/time/ZoneOffset.java.">getTotalSeconds</a>();
<a id="L619" name="L619"></a> 619                     <strong class="reserved">return</strong> <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/29368.html" title="Multiple defined in 8 places.">plusSeconds</a>(<a href="../D/14900.html" title="Multiple defined in 5 places.">difference</a>);
<a id="L620" name="L620"></a> 620                 <em class="brace">}</em>
<a id="L621" name="L621"></a> 621                 <strong class="reserved">default</strong>:  <em class="comment">// WALL</em>
<a id="L622" name="L622"></a> 622                     <strong class="reserved">return</strong> <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>;
<a id="L623" name="L623"></a> 623             <em class="brace">}</em>
<a id="L624" name="L624"></a> 624         <em class="brace">}</em>
<a id="L625" name="L625"></a> 625     <em class="brace">}</em>
<a id="L626" name="L626"></a> 626 
<a id="L627" name="L627"></a> 627 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L171">[^]</a><a href="#L611">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
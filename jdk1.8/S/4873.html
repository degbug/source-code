<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L69">[^]</a><a href="#L557">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L69" title="Defined at 69.">setRoot</a></li>
<li><a href="#L100" title="Defined at 100.">addIterator</a></li>
<li><a href="#L133" title="Defined at 133.">detach</a></li>
<li><a href="#L181" title="Defined at 181.">createUnionIterator</a></li>
<li><a href="#L233" title="Defined at 233.">getAnalysisBits</a></li>
<li><a href="#L259" title="Defined at 259.">readObject</a></li>
<li><a href="#L281" title="Defined at 281.">clone</a></li>
<li><a href="#L312" title="Defined at 312.">createDTMIterator</a></li>
<li><a href="#L331" title="Defined at 331.">loadLocationPaths</a></li>
<li><a href="#L384" title="Defined at 384.">nextNode</a></li>
<li><a href="#L455" title="Defined at 455.">fixupVariables</a></li>
<li><a href="#L487" title="Defined at 487.">getAxis</a></li>
<li><a href="#L505" title="Defined at 505.">getExpression</a></li>
<li><a href="#L513" title="Defined at 513.">setExpression</a></li>
<li><a href="#L539" title="Defined at 539.">callVisitors</a></li>
<li><a href="#L557" title="Defined at 557.">deepEquals</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: UnionPathIterator.java,v 1.2.4.1 2005/09/14 19:43:25 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal.axes;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.Axis;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMIterator;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.Expression;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.ExpressionOwner;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPathVisitor;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.compiler.Compiler;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.compiler.OpCodes;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.compiler.OpMap;
<a id="L34" name="L34"></a>  34 
<div class="comment">
  This class extends NodeSetDTM, which implements DTMIterator,
  and fetches nodes one at a time in document order based on a XPath
  <a href="http://www.w3.org/TR/xpath#NT-UnionExpr">UnionExpr</a>.
  As each node is iterated via nextNode(), the node is also stored
  in the NodeVector, so that previousNode() can easily be done.
  @xsl.usage advanced</div>
<a id="L43" name="L43"></a>  43 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/8468.html" title="Multiple referred from 9 places.">UnionPathIterator</a> <strong class="reserved">extends</strong> <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>
<a id="L44" name="L44"></a>  44         <strong class="reserved">implements</strong> <a href="../S/1744.html#L53" title="Defined at 53 in src/java/lang/Cloneable.java.">Cloneable</a>, <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>, <a href="../S/4870.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/axes/PathComponent.java.">PathComponent</a>
<a id="L45" name="L45"></a>  45 <em class="brace">{</em>
<a id="L46" name="L46"></a>  46     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -3910351546843826781L;
<a id="L47" name="L47"></a>  47 
<div class="comment">
    Constructor to create an instance which you can add location paths to.</div>
<a id="L51" name="L51"></a>  51   <strong class="reserved">public</strong> UnionPathIterator()
<a id="L52" name="L52"></a>  52   <em class="brace">{</em>
<a id="L53" name="L53"></a>  53 
<a id="L54" name="L54"></a>  54     <strong class="reserved">super</strong>();
<a id="L55" name="L55"></a>  55 
<a id="L56" name="L56"></a>  56     <em class="comment">// m_mutable = false;</em>
<a id="L57" name="L57"></a>  57     <em class="comment">// m_cacheNodes = false;</em>
<a id="L58" name="L58"></a>  58     m_iterators = <strong class="reserved">null</strong>;
<a id="L59" name="L59"></a>  59     m_exprs = <strong class="reserved">null</strong>;
<a id="L60" name="L60"></a>  60   <em class="brace">}</em>
<a id="L61" name="L61"></a>  61 
<div class="comment">
    Initialize the context values for this expression
    after it is cloned.
    @param context The XPath runtime context for this
    transformation.</div>
<a id="L69" name="L69"></a>  69   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28067.html" title="Multiple referred from 27 places.">setRoot</a>(<strong class="reserved">int</strong> <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L70" name="L70"></a>  70   <em class="brace">{</em>
<a id="L71" name="L71"></a>  71     <strong class="reserved">super</strong>.<a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(<a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>);
<a id="L72" name="L72"></a>  72 
<a id="L73" name="L73"></a>  73     <strong class="reserved">try</strong>
<a id="L74" name="L74"></a>  74     <em class="brace">{</em>
<a id="L75" name="L75"></a>  75       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_exprs)
<a id="L76" name="L76"></a>  76       <em class="brace">{</em>
<a id="L77" name="L77"></a>  77         <strong class="reserved">int</strong> n = m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L78" name="L78"></a>  78         <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> newIters[] = <strong class="reserved">new</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>[n];
<a id="L79" name="L79"></a>  79 
<a id="L80" name="L80"></a>  80         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L81" name="L81"></a>  81         <em class="brace">{</em>
<a id="L82" name="L82"></a>  82           <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = m_exprs[i].<a href="../D/11541.html" title="Multiple defined in 2 places.">asIterator</a>(m_execContext, <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>);
<a id="L83" name="L83"></a>  83           newIters[i] = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>;
<a id="L84" name="L84"></a>  84           <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L85" name="L85"></a>  85         <em class="brace">}</em>
<a id="L86" name="L86"></a>  86         m_iterators = newIters;
<a id="L87" name="L87"></a>  87       <em class="brace">}</em>
<a id="L88" name="L88"></a>  88     <em class="brace">}</em>
<a id="L89" name="L89"></a>  89     <strong class="reserved">catch</strong>(<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e)
<a id="L90" name="L90"></a>  90     <em class="brace">{</em>
<a id="L91" name="L91"></a>  91       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> com.sun.org.apache.xml.internal.utils.<a href="../D/9772.html" title="Multiple defined in 2 places.">WrappedRuntimeException</a>(e);
<a id="L92" name="L92"></a>  92     <em class="brace">}</em>
<a id="L93" name="L93"></a>  93   <em class="brace">}</em>
<a id="L94" name="L94"></a>  94 
<div class="comment">
    Add an iterator to the union list.
    @param expr non-null reference to a location path iterator.</div>
<a id="L100" name="L100"></a> 100   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6052.html#L266" title="Referred from 266 in src/com/sun/org/apache/xalan/internal/xsltc/dom/LoadDocument.java.">addIterator</a>(<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L101" name="L101"></a> 101   <em class="brace">{</em>
<a id="L102" name="L102"></a> 102 
<a id="L103" name="L103"></a> 103     <em class="comment">// Increase array size by only 1 at a time.  Fix this</em>
<a id="L104" name="L104"></a> 104     <em class="comment">// if it looks to be a problem.</em>
<a id="L105" name="L105"></a> 105     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_iterators)
<a id="L106" name="L106"></a> 106     <em class="brace">{</em>
<a id="L107" name="L107"></a> 107       m_iterators = <strong class="reserved">new</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>[1];
<a id="L108" name="L108"></a> 108       m_iterators[0] = <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>;
<a id="L109" name="L109"></a> 109     <em class="brace">}</em>
<a id="L110" name="L110"></a> 110     <strong class="reserved">else</strong>
<a id="L111" name="L111"></a> 111     <em class="brace">{</em>
<a id="L112" name="L112"></a> 112       <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>[] exprs = m_iterators;
<a id="L113" name="L113"></a> 113       <strong class="reserved">int</strong> len = m_iterators.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L114" name="L114"></a> 114 
<a id="L115" name="L115"></a> 115       m_iterators = <strong class="reserved">new</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>[len + 1];
<a id="L116" name="L116"></a> 116 
<a id="L117" name="L117"></a> 117       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(exprs, 0, m_iterators, 0, len);
<a id="L118" name="L118"></a> 118 
<a id="L119" name="L119"></a> 119       m_iterators[len] = <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>;
<a id="L120" name="L120"></a> 120     <em class="brace">}</em>
<a id="L121" name="L121"></a> 121     <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L122" name="L122"></a> 122     <strong class="reserved">if</strong>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> <strong class="reserved">instanceof</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>)
<a id="L123" name="L123"></a> 123         ((<a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>)<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>).<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(<strong class="reserved">this</strong>);
<a id="L124" name="L124"></a> 124   <em class="brace">}</em>
<a id="L125" name="L125"></a> 125 
<div class="comment">
     Detaches the iterator from the set which it iterated over, releasing
    any computational resources and placing the iterator in the INVALID
    state. After<code>detach</code> has been invoked, calls to
    <code>nextNode</code> or<code>previousNode</code> will raise the
    exception INVALID_STATE_ERR.</div>
<a id="L133" name="L133"></a> 133   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>()
<a id="L134" name="L134"></a> 134   <em class="brace">{</em>
<a id="L135" name="L135"></a> 135           <strong class="reserved">if</strong>(m_allowDetach &amp;&amp; <strong class="reserved">null</strong> != m_iterators)<em class="brace">{</em>
<a id="L136" name="L136"></a> 136                   <strong class="reserved">int</strong> n = m_iterators.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L137" name="L137"></a> 137                   <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L138" name="L138"></a> 138                   <em class="brace">{</em>
<a id="L139" name="L139"></a> 139                           m_iterators[i].<a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L140" name="L140"></a> 140                   <em class="brace">}</em>
<a id="L141" name="L141"></a> 141                   m_iterators = <strong class="reserved">null</strong>;
<a id="L142" name="L142"></a> 142           <em class="brace">}</em>
<a id="L143" name="L143"></a> 143   <em class="brace">}</em>
<a id="L144" name="L144"></a> 144 
<a id="L145" name="L145"></a> 145 
<div class="comment">
    Create a UnionPathIterator object, including creation
    of location path iterators from the opcode list, and call back
    into the Compiler to create predicate expressions.
    @param compiler The Compiler which is creating
    this expression.
    @param opPos The position of this iterator in the
    opcode list from the compiler.
    @throws javax.xml.transform.TransformerException</div>
<a id="L158" name="L158"></a> 158   <strong class="reserved">public</strong> UnionPathIterator(<a href="../D/1702.html" title="Multiple defined in 2 places.">Compiler</a> compiler, <strong class="reserved">int</strong> opPos)
<a id="L159" name="L159"></a> 159           <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L160" name="L160"></a> 160   <em class="brace">{</em>
<a id="L161" name="L161"></a> 161 
<a id="L162" name="L162"></a> 162     <strong class="reserved">super</strong>();
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164     opPos = <a href="../S/4996.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">OpMap</a>.<a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L165" name="L165"></a> 165 
<a id="L166" name="L166"></a> 166     <a href="../S/4873.html#L331" title="Defined at 331 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">loadLocationPaths</a>(compiler, opPos, 0);
<a id="L167" name="L167"></a> 167   <em class="brace">}</em>
<a id="L168" name="L168"></a> 168 
<div class="comment">
    This will return an iterator capable of handling the union of paths given.
    @param compiler The Compiler which is creating
    this expression.
    @param opPos The position of this iterator in the
    opcode list from the compiler.
    @return Object that is derived from LocPathIterator.
    @throws javax.xml.transform.TransformerException</div>
<a id="L181" name="L181"></a> 181   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> <a href="../S/4997.html#L606" title="Referred from 606 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">createUnionIterator</a>(<a href="../D/1702.html" title="Multiple defined in 2 places.">Compiler</a> compiler, <strong class="reserved">int</strong> opPos)
<a id="L182" name="L182"></a> 182           <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L183" name="L183"></a> 183   <em class="brace">{</em>
<a id="L184" name="L184"></a> 184         <em class="comment">// For the moment, I'm going to first create a full UnionPathIterator, and</em>
<a id="L185" name="L185"></a> 185         <em class="comment">// then see if I can reduce it to a UnionChildIterator.  It would obviously</em>
<a id="L186" name="L186"></a> 186         <em class="comment">// be more effecient to just test for the conditions for a UnionChildIterator,</em>
<a id="L187" name="L187"></a> 187         <em class="comment">// and then create that directly.</em>
<a id="L188" name="L188"></a> 188         <a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a> upi = <strong class="reserved">new</strong> <a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a>(compiler, opPos);
<a id="L189" name="L189"></a> 189         <strong class="reserved">int</strong> nPaths = upi.m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L190" name="L190"></a> 190         <strong class="reserved">boolean</strong> isAllChildIterators = <strong class="reserved">true</strong>;
<a id="L191" name="L191"></a> 191         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; nPaths; i++)
<a id="L192" name="L192"></a> 192         <em class="brace">{</em>
<a id="L193" name="L193"></a> 193                 <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> lpi = upi.m_exprs[i];
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195                 <strong class="reserved">if</strong>(lpi.<a href="../D/17162.html" title="Multiple defined in 25 places.">getAxis</a>() != <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD)
<a id="L196" name="L196"></a> 196                 <em class="brace">{</em>
<a id="L197" name="L197"></a> 197                         isAllChildIterators = <strong class="reserved">false</strong>;
<a id="L198" name="L198"></a> 198                         <strong class="reserved">break</strong>;
<a id="L199" name="L199"></a> 199                 <em class="brace">}</em>
<a id="L200" name="L200"></a> 200                 <strong class="reserved">else</strong>
<a id="L201" name="L201"></a> 201                 <em class="brace">{</em>
<a id="L202" name="L202"></a> 202                         <em class="comment">// check for positional predicates or position function, which won't work.</em>
<a id="L203" name="L203"></a> 203                         <strong class="reserved">if</strong>(<a href="../S/4872.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/axes/HasPositionalPredChecker.java.">HasPositionalPredChecker</a>.<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>(lpi))
<a id="L204" name="L204"></a> 204                         <em class="brace">{</em>
<a id="L205" name="L205"></a> 205                                 isAllChildIterators = <strong class="reserved">false</strong>;
<a id="L206" name="L206"></a> 206                                 <strong class="reserved">break</strong>;
<a id="L207" name="L207"></a> 207                         <em class="brace">}</em>
<a id="L208" name="L208"></a> 208                 <em class="brace">}</em>
<a id="L209" name="L209"></a> 209         <em class="brace">}</em>
<a id="L210" name="L210"></a> 210         <strong class="reserved">if</strong>(isAllChildIterators)
<a id="L211" name="L211"></a> 211         <em class="brace">{</em>
<a id="L212" name="L212"></a> 212                 <a href="../S/4865.html#L35" title="Defined at 35 in src/com/sun/org/apache/xpath/internal/axes/UnionChildIterator.java.">UnionChildIterator</a> uci = <strong class="reserved">new</strong> <a href="../S/4865.html#L35" title="Defined at 35 in src/com/sun/org/apache/xpath/internal/axes/UnionChildIterator.java.">UnionChildIterator</a>();
<a id="L213" name="L213"></a> 213 
<a id="L214" name="L214"></a> 214                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; nPaths; i++)
<a id="L215" name="L215"></a> 215                 <em class="brace">{</em>
<a id="L216" name="L216"></a> 216                         <a href="../S/4867.html#L36" title="Defined at 36 in src/com/sun/org/apache/xpath/internal/axes/PredicatedNodeTest.java.">PredicatedNodeTest</a> lpi = upi.m_exprs[i];
<a id="L217" name="L217"></a> 217                         <em class="comment">// I could strip the lpi down to a pure PredicatedNodeTest, but</em>
<a id="L218" name="L218"></a> 218                         <em class="comment">// I don't think it's worth it.  Note that the test can be used</em>
<a id="L219" name="L219"></a> 219                         <em class="comment">// as a static object... so it doesn't have to be cloned.</em>
<a id="L220" name="L220"></a> 220                         uci.<a href="../S/4865.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/axes/UnionChildIterator.java.">addNodeTest</a>(lpi);
<a id="L221" name="L221"></a> 221                 <em class="brace">}</em>
<a id="L222" name="L222"></a> 222                 <strong class="reserved">return</strong> uci;
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224         <em class="brace">}</em>
<a id="L225" name="L225"></a> 225         <strong class="reserved">else</strong>
<a id="L226" name="L226"></a> 226                 <strong class="reserved">return</strong> upi;
<a id="L227" name="L227"></a> 227   <em class="brace">}</em>
<a id="L228" name="L228"></a> 228 
<div class="comment">
    Get the analysis bits for this walker, as defined in the WalkerFactory.
    @return One of WalkerFactory#BIT_DESCENDANT, etc.</div>
<a id="L233" name="L233"></a> 233   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15048.html" title="Multiple referred from 7 places.">getAnalysisBits</a>()
<a id="L234" name="L234"></a> 234   <em class="brace">{</em>
<a id="L235" name="L235"></a> 235     <strong class="reserved">int</strong> bits = 0;
<a id="L236" name="L236"></a> 236 
<a id="L237" name="L237"></a> 237     <strong class="reserved">if</strong> (m_exprs != <strong class="reserved">null</strong>)
<a id="L238" name="L238"></a> 238     <em class="brace">{</em>
<a id="L239" name="L239"></a> 239       <strong class="reserved">int</strong> n = m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L242" name="L242"></a> 242       <em class="brace">{</em>
<a id="L243" name="L243"></a> 243         <strong class="reserved">int</strong> <a href="../D/11869.html" title="Multiple defined in 2 places.">bit</a> = m_exprs[i].<a href="../D/16923.html" title="Multiple defined in 10 places.">getAnalysisBits</a>();
<a id="L244" name="L244"></a> 244         bits |= <a href="../D/11869.html" title="Multiple defined in 2 places.">bit</a>;
<a id="L245" name="L245"></a> 245       <em class="brace">}</em>
<a id="L246" name="L246"></a> 246     <em class="brace">}</em>
<a id="L247" name="L247"></a> 247 
<a id="L248" name="L248"></a> 248     <strong class="reserved">return</strong> bits;
<a id="L249" name="L249"></a> 249   <em class="brace">}</em>
<a id="L250" name="L250"></a> 250 
<div class="comment">
    Read the object from a serialization stream.
    @param stream Input stream to read from
    @throws java.io.IOException
    @throws javax.xml.transform.TransformerException</div>
<a id="L259" name="L259"></a> 259   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>)
<a id="L260" name="L260"></a> 260           <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L261" name="L261"></a> 261   <em class="brace">{</em>
<a id="L262" name="L262"></a> 262     <strong class="reserved">try</strong>
<a id="L263" name="L263"></a> 263     <em class="brace">{</em>
<a id="L264" name="L264"></a> 264       <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L265" name="L265"></a> 265       m_clones =  <strong class="reserved">new</strong> <a href="../S/4864.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/axes/IteratorPool.java.">IteratorPool</a>(<strong class="reserved">this</strong>);
<a id="L266" name="L266"></a> 266     <em class="brace">}</em>
<a id="L267" name="L267"></a> 267     <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> cnfe)
<a id="L268" name="L268"></a> 268     <em class="brace">{</em>
<a id="L269" name="L269"></a> 269       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(cnfe);
<a id="L270" name="L270"></a> 270     <em class="brace">}</em>
<a id="L271" name="L271"></a> 271   <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<div class="comment">
    Get a cloned LocPathIterator that holds the same
    position as this iterator.
    @return A clone of this iterator that holds the same node position.
    @throws CloneNotSupportedException</div>
<a id="L281" name="L281"></a> 281   <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L282" name="L282"></a> 282   <em class="brace">{</em>
<a id="L283" name="L283"></a> 283 
<a id="L284" name="L284"></a> 284     <a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a>) <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L285" name="L285"></a> 285     <strong class="reserved">if</strong> (m_iterators != <strong class="reserved">null</strong>)
<a id="L286" name="L286"></a> 286     <em class="brace">{</em>
<a id="L287" name="L287"></a> 287       <strong class="reserved">int</strong> n = m_iterators.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L288" name="L288"></a> 288 
<a id="L289" name="L289"></a> 289       <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_iterators = <strong class="reserved">new</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>[n];
<a id="L290" name="L290"></a> 290 
<a id="L291" name="L291"></a> 291       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L292" name="L292"></a> 292       <em class="brace">{</em>
<a id="L293" name="L293"></a> 293         <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_iterators[i] = (<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>)m_iterators[i].<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L294" name="L294"></a> 294       <em class="brace">}</em>
<a id="L295" name="L295"></a> 295     <em class="brace">}</em>
<a id="L296" name="L296"></a> 296 
<a id="L297" name="L297"></a> 297     <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L298" name="L298"></a> 298   <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300 
<div class="comment">
    Create a new location path iterator.
    @param compiler The Compiler which is creating
    this expression.
    @param opPos The position of this iterator in the
    @return New location path iterator.
    @throws javax.xml.transform.TransformerException</div>
<a id="L312" name="L312"></a> 312   <strong class="reserved">protected</strong> <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> <a href="../R/12321.html" title="Multiple referred from 4 places.">createDTMIterator</a>(
<a id="L313" name="L313"></a> 313           <a href="../D/1702.html" title="Multiple defined in 2 places.">Compiler</a> compiler, <strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L314" name="L314"></a> 314   <em class="brace">{</em>
<a id="L315" name="L315"></a> 315     <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> lpi = (<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>)<a href="../S/4868.html#L46" title="Defined at 46 in src/com/sun/org/apache/xpath/internal/axes/WalkerFactory.java.">WalkerFactory</a>.<a href="../S/4868.html#L160" title="Defined at 160 in src/com/sun/org/apache/xpath/internal/axes/WalkerFactory.java.">newDTMIterator</a>(compiler, opPos,
<a id="L316" name="L316"></a> 316                                       (compiler.<a href="../S/4997.html#L620" title="Defined at 620 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">getLocationPathDepth</a>() &lt;= 0));
<a id="L317" name="L317"></a> 317     <strong class="reserved">return</strong> lpi;
<a id="L318" name="L318"></a> 318   <em class="brace">}</em>
<a id="L319" name="L319"></a> 319 
<div class="comment">
    Initialize the location path iterators.  Recursive.
    @param compiler The Compiler which is creating
    this expression.
    @param opPos The position of this iterator in the
    opcode list from the compiler.
    @param count The insert position of the iterator.
    @throws javax.xml.transform.TransformerException</div>
<a id="L331" name="L331"></a> 331   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/22602.html" title="Multiple referred from 3 places.">loadLocationPaths</a>(<a href="../D/1702.html" title="Multiple defined in 2 places.">Compiler</a> compiler, <strong class="reserved">int</strong> opPos, <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>)
<a id="L332" name="L332"></a> 332           <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L333" name="L333"></a> 333   <em class="brace">{</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335     <em class="comment">// TODO: Handle unwrapped FilterExpr</em>
<a id="L336" name="L336"></a> 336     <strong class="reserved">int</strong> steptype = compiler.<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos);
<a id="L337" name="L337"></a> 337 
<a id="L338" name="L338"></a> 338     <strong class="reserved">if</strong> (steptype == <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LOCATIONPATH)
<a id="L339" name="L339"></a> 339     <em class="brace">{</em>
<a id="L340" name="L340"></a> 340       <a href="../S/4873.html#L331" title="Defined at 331 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">loadLocationPaths</a>(compiler, compiler.<a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos), <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> + 1);
<a id="L341" name="L341"></a> 341 
<a id="L342" name="L342"></a> 342       m_exprs[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] = <a href="../D/13748.html" title="Multiple defined in 13 places.">createDTMIterator</a>(compiler, opPos);
<a id="L343" name="L343"></a> 343       m_exprs[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>].<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(<strong class="reserved">this</strong>);
<a id="L344" name="L344"></a> 344     <em class="brace">}</em>
<a id="L345" name="L345"></a> 345     <strong class="reserved">else</strong>
<a id="L346" name="L346"></a> 346     <em class="brace">{</em>
<a id="L347" name="L347"></a> 347 
<a id="L348" name="L348"></a> 348       <em class="comment">// Have to check for unwrapped functions, which the LocPathIterator</em>
<a id="L349" name="L349"></a> 349       <em class="comment">// doesn't handle.</em>
<a id="L350" name="L350"></a> 350       <strong class="reserved">switch</strong> (steptype)
<a id="L351" name="L351"></a> 351       <em class="brace">{</em>
<a id="L352" name="L352"></a> 352       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_VARIABLE :
<a id="L353" name="L353"></a> 353       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_EXTFUNCTION :
<a id="L354" name="L354"></a> 354       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_FUNCTION :
<a id="L355" name="L355"></a> 355       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_GROUP :
<a id="L356" name="L356"></a> 356         <a href="../S/4873.html#L331" title="Defined at 331 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">loadLocationPaths</a>(compiler, compiler.<a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos), <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> + 1);
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358         <a href="../S/4875.html#L38" title="Defined at 38 in src/com/sun/org/apache/xpath/internal/axes/WalkingIterator.java.">WalkingIterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> =
<a id="L359" name="L359"></a> 359           <strong class="reserved">new</strong> <a href="../S/4875.html#L38" title="Defined at 38 in src/com/sun/org/apache/xpath/internal/axes/WalkingIterator.java.">WalkingIterator</a>(compiler.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>());
<a id="L360" name="L360"></a> 360         <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(<strong class="reserved">this</strong>);
<a id="L361" name="L361"></a> 361 
<a id="L362" name="L362"></a> 362         <strong class="reserved">if</strong>(compiler.<a href="../S/4997.html#L620" title="Defined at 620 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">getLocationPathDepth</a>() &lt;= 0)
<a id="L363" name="L363"></a> 363           <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../S/4876.html#L334" title="Defined at 334 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">setIsTopLevel</a>(<strong class="reserved">true</strong>);
<a id="L364" name="L364"></a> 364 
<a id="L365" name="L365"></a> 365         <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.m_firstWalker = <strong class="reserved">new</strong> com.sun.org.apache.xpath.internal.axes.<a href="../S/4878.html#L41" title="Defined at 41 in src/com/sun/org/apache/xpath/internal/axes/FilterExprWalker.java.">FilterExprWalker</a>(<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>);
<a id="L366" name="L366"></a> 366 
<a id="L367" name="L367"></a> 367         <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.m_firstWalker.<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>(compiler, opPos, steptype);
<a id="L368" name="L368"></a> 368 
<a id="L369" name="L369"></a> 369         m_exprs[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>;
<a id="L370" name="L370"></a> 370         <strong class="reserved">break</strong>;
<a id="L371" name="L371"></a> 371       <strong class="reserved">default</strong> :
<a id="L372" name="L372"></a> 372         m_exprs = <strong class="reserved">new</strong> <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>];
<a id="L373" name="L373"></a> 373       <em class="brace">}</em>
<a id="L374" name="L374"></a> 374     <em class="brace">}</em>
<a id="L375" name="L375"></a> 375   <em class="brace">}</em>
<a id="L376" name="L376"></a> 376 
<div class="comment">
     Returns the next node in the set and advances the position of the
    iterator in the set. After a DTMIterator is created, the first call
    to nextNode() returns the first node in the set.
    @return  The next <code>Node</code> in the set being iterated over, or
      <code>null</code> if there are no more members in that set.</div>
<a id="L384" name="L384"></a> 384   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>()
<a id="L385" name="L385"></a> 385   <em class="brace">{</em>
<a id="L386" name="L386"></a> 386         <strong class="reserved">if</strong>(m_foundLast)
<a id="L387" name="L387"></a> 387                 <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L388" name="L388"></a> 388 
<a id="L389" name="L389"></a> 389     <em class="comment">// Loop through the iterators getting the current fetched</em>
<a id="L390" name="L390"></a> 390     <em class="comment">// node, and get the earliest occuring in document order</em>
<a id="L391" name="L391"></a> 391     <strong class="reserved">int</strong> earliestNode = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_iterators)
<a id="L394" name="L394"></a> 394     <em class="brace">{</em>
<a id="L395" name="L395"></a> 395       <strong class="reserved">int</strong> n = m_iterators.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L396" name="L396"></a> 396       <strong class="reserved">int</strong> iteratorUsed = -1;
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L399" name="L399"></a> 399       <em class="brace">{</em>
<a id="L400" name="L400"></a> 400         <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_iterators[i].<a href="../D/18114.html" title="Multiple defined in 11 places.">getCurrentNode</a>();
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402         <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L403" name="L403"></a> 403           <strong class="reserved">continue</strong>;
<a id="L404" name="L404"></a> 404         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == earliestNode)
<a id="L405" name="L405"></a> 405         <em class="brace">{</em>
<a id="L406" name="L406"></a> 406           iteratorUsed = i;
<a id="L407" name="L407"></a> 407           earliestNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L408" name="L408"></a> 408         <em class="brace">}</em>
<a id="L409" name="L409"></a> 409         <strong class="reserved">else</strong>
<a id="L410" name="L410"></a> 410         <em class="brace">{</em>
<a id="L411" name="L411"></a> 411           <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == earliestNode)
<a id="L412" name="L412"></a> 412           <em class="brace">{</em>
<a id="L413" name="L413"></a> 413 
<a id="L414" name="L414"></a> 414             <em class="comment">// Found a duplicate, so skip past it.</em>
<a id="L415" name="L415"></a> 415             m_iterators[i].<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L416" name="L416"></a> 416           <em class="brace">}</em>
<a id="L417" name="L417"></a> 417           <strong class="reserved">else</strong>
<a id="L418" name="L418"></a> 418           <em class="brace">{</em>
<a id="L419" name="L419"></a> 419             <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> dtm = <a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L420" name="L420"></a> 420 
<a id="L421" name="L421"></a> 421             <strong class="reserved">if</strong> (dtm.<a href="../D/25944.html" title="Multiple defined in 7 places.">isNodeAfter</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, earliestNode))
<a id="L422" name="L422"></a> 422             <em class="brace">{</em>
<a id="L423" name="L423"></a> 423               iteratorUsed = i;
<a id="L424" name="L424"></a> 424               earliestNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L425" name="L425"></a> 425             <em class="brace">}</em>
<a id="L426" name="L426"></a> 426           <em class="brace">}</em>
<a id="L427" name="L427"></a> 427         <em class="brace">}</em>
<a id="L428" name="L428"></a> 428       <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<a id="L430" name="L430"></a> 430       <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != earliestNode)
<a id="L431" name="L431"></a> 431       <em class="brace">{</em>
<a id="L432" name="L432"></a> 432         m_iterators[iteratorUsed].<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L433" name="L433"></a> 433 
<a id="L434" name="L434"></a> 434         <a href="../S/4876.html#L448" title="Defined at 448 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">incrementCurrentPos</a>();
<a id="L435" name="L435"></a> 435       <em class="brace">}</em>
<a id="L436" name="L436"></a> 436       <strong class="reserved">else</strong>
<a id="L437" name="L437"></a> 437         m_foundLast = <strong class="reserved">true</strong>;
<a id="L438" name="L438"></a> 438     <em class="brace">}</em>
<a id="L439" name="L439"></a> 439 
<a id="L440" name="L440"></a> 440     m_lastFetched = earliestNode;
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442     <strong class="reserved">return</strong> earliestNode;
<a id="L443" name="L443"></a> 443   <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<div class="comment">
    This function is used to fixup variables from QNames to stack frame
    indexes at stylesheet build time.
    @param vars List of QNames that correspond to variables.  This list
    should be searched backwards for the first qualified name that
    corresponds to the variable reference qname.  The position of the
    QName in the vector from the start of the vector will be its position
    in the stack frame (but variables above the globalsTop value will need
    to be offset to the current stack frame).</div>
<a id="L455" name="L455"></a> 455   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14669.html" title="Multiple referred from 33 places.">fixupVariables</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> vars, <strong class="reserved">int</strong> globalsSize)
<a id="L456" name="L456"></a> 456   <em class="brace">{</em>
<a id="L457" name="L457"></a> 457     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L458" name="L458"></a> 458     <em class="brace">{</em>
<a id="L459" name="L459"></a> 459       m_exprs[i].<a href="../D/16440.html" title="Multiple defined in 31 places.">fixupVariables</a>(vars, globalsSize);
<a id="L460" name="L460"></a> 460     <em class="brace">}</em>
<a id="L461" name="L461"></a> 461 
<a id="L462" name="L462"></a> 462   <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 
<div class="comment">
    The location path iterators, one for each
    <a href="http://www.w3.org/TR/xpath#NT-LocationPath">location
    path</a> contained in the union expression.
    @serial</div>
<a id="L470" name="L470"></a> 470   <strong class="reserved">protected</strong> <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>[] m_exprs;
<a id="L471" name="L471"></a> 471 
<a id="L472" name="L472"></a> 472 
<div class="comment">
    The location path iterators, one for each
    <a href="http://www.w3.org/TR/xpath#NT-LocationPath">location
    path</a> contained in the union expression.
    @serial</div>
<a id="L479" name="L479"></a> 479   <strong class="reserved">protected</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>[] m_iterators;
<a id="L480" name="L480"></a> 480 
<div class="comment">
    Returns the axis being iterated, if it is known.
    @return Axis.CHILD, etc., or -1 if the axis is not known or is of multiple
    types.</div>
<a id="L487" name="L487"></a> 487   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15203.html" title="Multiple referred from 33 places.">getAxis</a>()
<a id="L488" name="L488"></a> 488   <em class="brace">{</em>
<a id="L489" name="L489"></a> 489     <em class="comment">// Could be smarter.</em>
<a id="L490" name="L490"></a> 490     <strong class="reserved">return</strong> -1;
<a id="L491" name="L491"></a> 491   <em class="brace">}</em>
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493   <strong class="reserved">class</strong> <a href="../S/4873.html#L548" title="Referred from 548 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">iterOwner</a> <strong class="reserved">implements</strong> <a href="../S/4989.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/ExpressionOwner.java.">ExpressionOwner</a>
<a id="L494" name="L494"></a> 494   <em class="brace">{</em>
<a id="L495" name="L495"></a> 495         <strong class="reserved">int</strong> m_index;
<a id="L496" name="L496"></a> 496 
<a id="L497" name="L497"></a> 497         iterOwner(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L498" name="L498"></a> 498         <em class="brace">{</em>
<a id="L499" name="L499"></a> 499                 m_index = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L500" name="L500"></a> 500         <em class="brace">}</em>
<a id="L501" name="L501"></a> 501 
<div class="comment">
      @see ExpressionOwner#getExpression()</div>
<a id="L505" name="L505"></a> 505     <strong class="reserved">public</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/16497.html" title="Multiple referred from 16 places.">getExpression</a>()
<a id="L506" name="L506"></a> 506     <em class="brace">{</em>
<a id="L507" name="L507"></a> 507       <strong class="reserved">return</strong> m_exprs[m_index];
<a id="L508" name="L508"></a> 508     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<div class="comment">
      @see ExpressionOwner#setExpression(Expression)</div>
<a id="L513" name="L513"></a> 513     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27380.html" title="Multiple referred from 3 places.">setExpression</a>(<a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>)
<a id="L514" name="L514"></a> 514     <em class="brace">{</em>
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516         <strong class="reserved">if</strong>(!(<a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> <strong class="reserved">instanceof</strong> <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>))
<a id="L517" name="L517"></a> 517         <em class="brace">{</em>
<a id="L518" name="L518"></a> 518                 <em class="comment">// Yuck.  Need FilterExprIter.  Or make it so m_exprs can be just</em>
<a id="L519" name="L519"></a> 519                 <em class="comment">// plain expressions?</em>
<a id="L520" name="L520"></a> 520                 <a href="../S/4875.html#L38" title="Defined at 38 in src/com/sun/org/apache/xpath/internal/axes/WalkingIterator.java.">WalkingIterator</a> <a href="../S/4879.html#L58" title="Defined at 58 in src/com/sun/org/apache/xpath/internal/axes/AxesWalker.java.">wi</a> = <strong class="reserved">new</strong> <a href="../S/4875.html#L38" title="Defined at 38 in src/com/sun/org/apache/xpath/internal/axes/WalkingIterator.java.">WalkingIterator</a>(<a href="../S/4876.html#L889" title="Defined at 889 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">getPrefixResolver</a>());
<a id="L521" name="L521"></a> 521                 <a href="../S/4878.html#L41" title="Defined at 41 in src/com/sun/org/apache/xpath/internal/axes/FilterExprWalker.java.">FilterExprWalker</a> few = <strong class="reserved">new</strong> <a href="../S/4878.html#L41" title="Defined at 41 in src/com/sun/org/apache/xpath/internal/axes/FilterExprWalker.java.">FilterExprWalker</a>(<a href="../S/4879.html#L58" title="Defined at 58 in src/com/sun/org/apache/xpath/internal/axes/AxesWalker.java.">wi</a>);
<a id="L522" name="L522"></a> 522                 <a href="../S/4879.html#L58" title="Defined at 58 in src/com/sun/org/apache/xpath/internal/axes/AxesWalker.java.">wi</a>.<a href="../S/4875.html#L225" title="Defined at 225 in src/com/sun/org/apache/xpath/internal/axes/WalkingIterator.java.">setFirstWalker</a>(few);
<a id="L523" name="L523"></a> 523                 few.<a href="../D/32951.html" title="Multiple defined in 3 places.">setInnerExpression</a>(<a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>);
<a id="L524" name="L524"></a> 524                 <a href="../S/4879.html#L58" title="Defined at 58 in src/com/sun/org/apache/xpath/internal/axes/AxesWalker.java.">wi</a>.<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(<a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a>.<strong class="reserved">this</strong>);
<a id="L525" name="L525"></a> 525                 few.<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(<a href="../S/4879.html#L58" title="Defined at 58 in src/com/sun/org/apache/xpath/internal/axes/AxesWalker.java.">wi</a>);
<a id="L526" name="L526"></a> 526                 <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>.<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(few);
<a id="L527" name="L527"></a> 527                 <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = <a href="../S/4879.html#L58" title="Defined at 58 in src/com/sun/org/apache/xpath/internal/axes/AxesWalker.java.">wi</a>;
<a id="L528" name="L528"></a> 528         <em class="brace">}</em>
<a id="L529" name="L529"></a> 529         <strong class="reserved">else</strong>
<a id="L530" name="L530"></a> 530                 <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>.<a href="../D/15890.html" title="Multiple defined in 3 places.">exprSetParent</a>(<a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a>.<strong class="reserved">this</strong>);
<a id="L531" name="L531"></a> 531         m_exprs[m_index] = (<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>)<a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>;
<a id="L532" name="L532"></a> 532     <em class="brace">}</em>
<a id="L533" name="L533"></a> 533 
<a id="L534" name="L534"></a> 534   <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<div class="comment">
    @see com.sun.org.apache.xpath.internal.XPathVisitable#callVisitors(ExpressionOwner, XPathVisitor)</div>
<a id="L539" name="L539"></a> 539   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10860.html" title="Multiple referred from 22 places.">callVisitors</a>(<a href="../S/4989.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/ExpressionOwner.java.">ExpressionOwner</a> <a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a>, <a href="../S/4945.html#L53" title="Defined at 53 in src/com/sun/org/apache/xpath/internal/XPathVisitor.java.">XPathVisitor</a> visitor)
<a id="L540" name="L540"></a> 540   <em class="brace">{</em>
<a id="L541" name="L541"></a> 541                 <strong class="reserved">if</strong>(visitor.<a href="../S/4945.html#L74" title="Defined at 74 in src/com/sun/org/apache/xpath/internal/XPathVisitor.java.">visitUnionPath</a>(<a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a>, <strong class="reserved">this</strong>))
<a id="L542" name="L542"></a> 542                 <em class="brace">{</em>
<a id="L543" name="L543"></a> 543                         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_exprs)
<a id="L544" name="L544"></a> 544                         <em class="brace">{</em>
<a id="L545" name="L545"></a> 545                                 <strong class="reserved">int</strong> n = m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L546" name="L546"></a> 546                                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L547" name="L547"></a> 547                                 <em class="brace">{</em>
<a id="L548" name="L548"></a> 548                                         m_exprs[i].<a href="../D/12116.html" title="Multiple defined in 16 places.">callVisitors</a>(<strong class="reserved">new</strong> <a href="../S/4873.html#L493" title="Defined at 493 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">iterOwner</a>(i), visitor);
<a id="L549" name="L549"></a> 549                                 <em class="brace">}</em>
<a id="L550" name="L550"></a> 550                         <em class="brace">}</em>
<a id="L551" name="L551"></a> 551                 <em class="brace">}</em>
<a id="L552" name="L552"></a> 552   <em class="brace">}</em>
<a id="L553" name="L553"></a> 553 
<div class="comment">
      @see Expression#deepEquals(Expression)</div>
<a id="L557" name="L557"></a> 557     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13134.html" title="Multiple referred from 37 places.">deepEquals</a>(<a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L558" name="L558"></a> 558     <em class="brace">{</em>
<a id="L559" name="L559"></a> 559       <strong class="reserved">if</strong> (!<strong class="reserved">super</strong>.<a href="../D/14718.html" title="Multiple defined in 25 places.">deepEquals</a>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>))
<a id="L560" name="L560"></a> 560             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L561" name="L561"></a> 561 
<a id="L562" name="L562"></a> 562       <a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a> upi = (<a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a>) <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>;
<a id="L563" name="L563"></a> 563 
<a id="L564" name="L564"></a> 564       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_exprs)
<a id="L565" name="L565"></a> 565       <em class="brace">{</em>
<a id="L566" name="L566"></a> 566         <strong class="reserved">int</strong> n = m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L567" name="L567"></a> 567 
<a id="L568" name="L568"></a> 568         <strong class="reserved">if</strong>((<strong class="reserved">null</strong> == upi.m_exprs) || (upi.m_exprs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> != n))
<a id="L569" name="L569"></a> 569                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L570" name="L570"></a> 570 
<a id="L571" name="L571"></a> 571         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L572" name="L572"></a> 572         <em class="brace">{</em>
<a id="L573" name="L573"></a> 573           <strong class="reserved">if</strong>(!m_exprs[i].<a href="../D/14718.html" title="Multiple defined in 25 places.">deepEquals</a>(upi.m_exprs[i]))
<a id="L574" name="L574"></a> 574                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L575" name="L575"></a> 575         <em class="brace">}</em>
<a id="L576" name="L576"></a> 576       <em class="brace">}</em>
<a id="L577" name="L577"></a> 577       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != upi.m_exprs)
<a id="L578" name="L578"></a> 578       <em class="brace">{</em>
<a id="L579" name="L579"></a> 579           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L580" name="L580"></a> 580       <em class="brace">}</em>
<a id="L581" name="L581"></a> 581 
<a id="L582" name="L582"></a> 582       <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L583" name="L583"></a> 583     <em class="brace">}</em>
<a id="L584" name="L584"></a> 584 
<a id="L585" name="L585"></a> 585 
<a id="L586" name="L586"></a> 586 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L69">[^]</a><a href="#L557">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
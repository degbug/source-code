<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesHandlerImpl.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L124">[^]</a><a href="#L348">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L124" title="Defined at 124.">getSystemId</a></li>
<li><a href="#L134" title="Defined at 134.">setSystemId</a></li>
<li><a href="#L141" title="Defined at 141.">setURIResolver</a></li>
<li><a href="#L154" title="Defined at 154.">getTemplates</a></li>
<li><a href="#L167" title="Defined at 167.">loadSource</a></li>
<li><a href="#L186" title="Defined at 186.">startDocument</a></li>
<li><a href="#L196" title="Defined at 196.">endDocument</a></li>
<li><a href="#L290" title="Defined at 290.">startPrefixMapping</a></li>
<li><a href="#L297" title="Defined at 297.">endPrefixMapping</a></li>
<li><a href="#L304" title="Defined at 304.">startElement</a></li>
<li><a href="#L313" title="Defined at 313.">endElement</a></li>
<li><a href="#L320" title="Defined at 320.">characters</a></li>
<li><a href="#L327" title="Defined at 327.">processingInstruction</a></li>
<li><a href="#L334" title="Defined at 334.">ignorableWhitespace</a></li>
<li><a href="#L341" title="Defined at 341.">skippedEntity</a></li>
<li><a href="#L348" title="Defined at 348.">setDocumentLocator</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: TemplatesHandlerImpl.java,v 1.2.4.1 2005/09/06 12:09:03 pvedula Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.xsltc.trax;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> javax.xml.XMLConstants;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> javax.xml.transform.Source;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> javax.xml.transform.Templates;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> javax.xml.transform.TransformerException;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> javax.xml.transform.URIResolver;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> javax.xml.transform.sax.TemplatesHandler;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.XalanConstants;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.CompilerException;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.Parser;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.SourceLoader;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.Stylesheet;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.SyntaxTreeNode;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.XSLTC;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.ErrorMsg;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> org.xml.sax.ContentHandler;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> org.xml.sax.InputSource;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> org.xml.sax.Locator;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> org.xml.sax.SAXException;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> org.xml.sax.Attributes;
<a id="L46" name="L46"></a>  46 
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> java.util.Vector;
<a id="L48" name="L48"></a>  48 
<div class="comment">
  Implementation of a JAXP1.1 TemplatesHandler
  @author Morten Jorgensen
  @author Santiago Pericas-Geertsen</div>
<a id="L54" name="L54"></a>  54 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/8047.html" title="Multiple referred from 2 places.">TemplatesHandlerImpl</a>
<a id="L55" name="L55"></a>  55     <strong class="reserved">implements</strong> <a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a>, <a href="../S/4035.html#L38" title="Defined at 38 in src/javax/xml/transform/sax/TemplatesHandler.java.">TemplatesHandler</a>, <a href="../S/6170.html#L31" title="Defined at 31 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SourceLoader.java.">SourceLoader</a>
<a id="L56" name="L56"></a>  56 <em class="brace">{</em>
<div class="comment">
      System ID for this stylesheet.</div>
<a id="L60" name="L60"></a>  60     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _systemId;
<a id="L61" name="L61"></a>  61 
<div class="comment">
      Number of spaces to add for output indentation.</div>
<a id="L65" name="L65"></a>  65     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _indentNumber;
<a id="L66" name="L66"></a>  66 
<div class="comment">
      This URIResolver is passed to all Transformers.</div>
<a id="L70" name="L70"></a>  70     <strong class="reserved">private</strong> <a href="../S/4040.html#L32" title="Defined at 32 in src/javax/xml/transform/URIResolver.java.">URIResolver</a> _uriResolver = <strong class="reserved">null</strong>;
<a id="L71" name="L71"></a>  71 
<div class="comment">
      A reference to the transformer factory that this templates
      object belongs to.</div>
<a id="L76" name="L76"></a>  76     <strong class="reserved">private</strong> <a href="../S/6006.html#L90" title="Defined at 90 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerFactoryImpl.java.">TransformerFactoryImpl</a> _tfactory = <strong class="reserved">null</strong>;
<a id="L77" name="L77"></a>  77 
<div class="comment">
      A reference to XSLTC's parser object.</div>
<a id="L81" name="L81"></a>  81     <strong class="reserved">private</strong> <a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> _parser = <strong class="reserved">null</strong>;
<a id="L82" name="L82"></a>  82 
<div class="comment">
      The created Templates object.</div>
<a id="L86" name="L86"></a>  86     <strong class="reserved">private</strong> <a href="../S/6010.html#L54" title="Defined at 54 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java.">TemplatesImpl</a> _templates = <strong class="reserved">null</strong>;
<a id="L87" name="L87"></a>  87 
<div class="comment">
      Default constructor</div>
<a id="L91" name="L91"></a>  91     <strong class="reserved">protected</strong> TemplatesHandlerImpl(<strong class="reserved">int</strong> indentNumber,
<a id="L92" name="L92"></a>  92         <a href="../S/6006.html#L90" title="Defined at 90 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerFactoryImpl.java.">TransformerFactoryImpl</a> tfactory)
<a id="L93" name="L93"></a>  93     <em class="brace">{</em>
<a id="L94" name="L94"></a>  94         _indentNumber = indentNumber;
<a id="L95" name="L95"></a>  95         _tfactory = tfactory;
<a id="L96" name="L96"></a>  96 
<a id="L97" name="L97"></a>  97         <em class="comment">// Instantiate XSLTC and get reference to parser object</em>
<a id="L98" name="L98"></a>  98         <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a> xsltc = <strong class="reserved">new</strong> <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a>(tfactory.<a href="../D/36285.html" title="Multiple defined in 9 places.">useServicesMechnism</a>(), tfactory.<a href="../S/6006.html#L625" title="Defined at 625 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerFactoryImpl.java.">getFeatureManager</a>());
<a id="L99" name="L99"></a>  99         <strong class="reserved">if</strong> (tfactory.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.FEATURE_SECURE_PROCESSING))
<a id="L100" name="L100"></a> 100             xsltc.<a href="../D/33833.html" title="Multiple defined in 5 places.">setSecureProcessing</a>(<strong class="reserved">true</strong>);
<a id="L101" name="L101"></a> 101 
<a id="L102" name="L102"></a> 102         xsltc.<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.<a href="../S/6254.html#L44" title="Defined at 44 in src/com/sun/org/apache/xalan/internal/utils/XMLSecurityPropertyManager.java.">ACCESS_EXTERNAL_STYLESHEET</a>,
<a id="L103" name="L103"></a> 103                 (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)tfactory.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.<a href="../S/6254.html#L44" title="Defined at 44 in src/com/sun/org/apache/xalan/internal/utils/XMLSecurityPropertyManager.java.">ACCESS_EXTERNAL_STYLESHEET</a>));
<a id="L104" name="L104"></a> 104         xsltc.<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.<a href="../D/4.html" title="Multiple defined in 2 places.">ACCESS_EXTERNAL_DTD</a>,
<a id="L105" name="L105"></a> 105                 (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)tfactory.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.<a href="../D/4.html" title="Multiple defined in 2 places.">ACCESS_EXTERNAL_DTD</a>));
<a id="L106" name="L106"></a> 106         xsltc.<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>(<a href="../S/6256.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/XalanConstants.java.">XalanConstants</a>.SECURITY_MANAGER,
<a id="L107" name="L107"></a> 107                 tfactory.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../S/6256.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/XalanConstants.java.">XalanConstants</a>.SECURITY_MANAGER));
<a id="L108" name="L108"></a> 108 
<a id="L109" name="L109"></a> 109 
<a id="L110" name="L110"></a> 110         <strong class="reserved">if</strong> ("true".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(tfactory.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../S/6006.html#L90" title="Defined at 90 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerFactoryImpl.java.">TransformerFactoryImpl</a>.ENABLE_INLINING)))
<a id="L111" name="L111"></a> 111             xsltc.<a href="../D/34089.html" title="Multiple defined in 2 places.">setTemplateInlining</a>(<strong class="reserved">true</strong>);
<a id="L112" name="L112"></a> 112         <strong class="reserved">else</strong>
<a id="L113" name="L113"></a> 113             xsltc.<a href="../D/34089.html" title="Multiple defined in 2 places.">setTemplateInlining</a>(<strong class="reserved">false</strong>);
<a id="L114" name="L114"></a> 114 
<a id="L115" name="L115"></a> 115         _parser = xsltc.<a href="../D/21413.html" title="Multiple defined in 8 places.">getParser</a>();
<a id="L116" name="L116"></a> 116     <em class="brace">}</em>
<a id="L117" name="L117"></a> 117 
<div class="comment">
      Implements javax.xml.transform.sax.TemplatesHandler.getSystemId()
      Get the base ID (URI or system ID) from where relative URLs will be
      resolved.
      @return The systemID that was set with setSystemId(String id)</div>
<a id="L124" name="L124"></a> 124     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19319.html" title="Multiple referred from 162 places.">getSystemId</a>() <em class="brace">{</em>
<a id="L125" name="L125"></a> 125         <strong class="reserved">return</strong> _systemId;
<a id="L126" name="L126"></a> 126     <em class="brace">}</em>
<a id="L127" name="L127"></a> 127 
<div class="comment">
      Implements javax.xml.transform.sax.TemplatesHandler.setSystemId()
      Get the base ID (URI or system ID) from where relative URLs will be
      resolved.
      @param id Base URI for this stylesheet</div>
<a id="L134" name="L134"></a> 134     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28252.html" title="Multiple referred from 67 places.">setSystemId</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L135" name="L135"></a> 135         _systemId = <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>;
<a id="L136" name="L136"></a> 136     <em class="brace">}</em>
<a id="L137" name="L137"></a> 137 
<div class="comment">
      Store URIResolver needed for Transformers.</div>
<a id="L141" name="L141"></a> 141     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28340.html" title="Multiple referred from 18 places.">setURIResolver</a>(<a href="../S/4040.html#L32" title="Defined at 32 in src/javax/xml/transform/URIResolver.java.">URIResolver</a> resolver) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142         _uriResolver = resolver;
<a id="L143" name="L143"></a> 143     <em class="brace">}</em>
<a id="L144" name="L144"></a> 144 
<div class="comment">
      Implements javax.xml.transform.sax.TemplatesHandler.getTemplates()
      When a TemplatesHandler object is used as a ContentHandler or
      DocumentHandler for the parsing of transformation instructions, it
      creates a Templates object, which the caller can get once the SAX
      events have been completed.
      @return The Templates object that was created during the SAX event
              process, or null if no Templates object has been created.</div>
<a id="L154" name="L154"></a> 154     <strong class="reserved">public</strong> <a href="../S/4042.html#L41" title="Defined at 41 in src/javax/xml/transform/Templates.java.">Templates</a> <a href="../R/19417.html" title="Multiple referred from 2 places.">getTemplates</a>() <em class="brace">{</em>
<a id="L155" name="L155"></a> 155         <strong class="reserved">return</strong> _templates;
<a id="L156" name="L156"></a> 156     <em class="brace">}</em>
<a id="L157" name="L157"></a> 157 
<div class="comment">
      This method implements XSLTC's SourceLoader interface. It is used to
      glue a TrAX URIResolver to the XSLTC compiler's Input and Import classes.
      @param href The URI of the document to load
      @param context The URI of the currently loaded document
      @param xsltc The compiler that resuests the document
      @return An InputSource with the loaded document</div>
<a id="L167" name="L167"></a> 167     <strong class="reserved">public</strong> <a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a> <a href="../R/22623.html" title="Multiple referred from 2 places.">loadSource</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> href, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a> xsltc) <em class="brace">{</em>
<a id="L168" name="L168"></a> 168         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L169" name="L169"></a> 169             <em class="comment">// A _uriResolver must be set if this method is called</em>
<a id="L170" name="L170"></a> 170             <strong class="reserved">final</strong> <a href="../S/4049.html#L32" title="Defined at 32 in src/javax/xml/transform/Source.java.">Source</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = _uriResolver.<a href="../D/31237.html" title="Multiple defined in 38 places.">resolve</a>(href, <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>);
<a id="L171" name="L171"></a> 171             <strong class="reserved">if</strong> (<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L172" name="L172"></a> 172                 <strong class="reserved">return</strong> <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../D/19743.html" title="Multiple defined in 3 places.">getInputSource</a>(xsltc, <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>);
<a id="L173" name="L173"></a> 173             <em class="brace">}</em>
<a id="L174" name="L174"></a> 174         <em class="brace">}</em>
<a id="L175" name="L175"></a> 175         <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e) <em class="brace">{</em>
<a id="L176" name="L176"></a> 176             <em class="comment">// Falls through</em>
<a id="L177" name="L177"></a> 177         <em class="brace">}</em>
<a id="L178" name="L178"></a> 178         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L179" name="L179"></a> 179     <em class="brace">}</em>
<a id="L180" name="L180"></a> 180 
<a id="L181" name="L181"></a> 181     <em class="comment">// -- ContentHandler --------------------------------------------------</em>
<a id="L182" name="L182"></a> 182 
<div class="comment">
      Re-initialize parser and forward SAX2 event.</div>
<a id="L186" name="L186"></a> 186     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28800.html" title="Multiple referred from 67 places.">startDocument</a>() <em class="brace">{</em>
<a id="L187" name="L187"></a> 187         <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a> xsltc = _parser.<a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>();
<a id="L188" name="L188"></a> 188         xsltc.<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>();   <em class="comment">// calls _parser.init()</em>
<a id="L189" name="L189"></a> 189         xsltc.<a href="../D/33461.html" title="Multiple defined in 2 places.">setOutputType</a>(<a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a>.BYTEARRAY_OUTPUT);
<a id="L190" name="L190"></a> 190         _parser.<a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>();
<a id="L191" name="L191"></a> 191     <em class="brace">}</em>
<a id="L192" name="L192"></a> 192 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L196" name="L196"></a> 196     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13761.html" title="Multiple referred from 58 places.">endDocument</a>() <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> <em class="brace">{</em>
<a id="L197" name="L197"></a> 197         _parser.<a href="../D/15443.html" title="Multiple defined in 65 places.">endDocument</a>();
<a id="L198" name="L198"></a> 198 
<a id="L199" name="L199"></a> 199         <em class="comment">// create the templates</em>
<a id="L200" name="L200"></a> 200         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L201" name="L201"></a> 201             <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a> xsltc = _parser.<a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>();
<a id="L202" name="L202"></a> 202 
<a id="L203" name="L203"></a> 203             <em class="comment">// Set the translet class name if not already set</em>
<a id="L204" name="L204"></a> 204             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> transletName;
<a id="L205" name="L205"></a> 205             <strong class="reserved">if</strong> (_systemId != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206                 transletName = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../D/11780.html" title="Multiple defined in 2 places.">baseName</a>(_systemId);
<a id="L207" name="L207"></a> 207             <em class="brace">}</em>
<a id="L208" name="L208"></a> 208             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L209" name="L209"></a> 209                 transletName = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)_tfactory.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("translet-name");
<a id="L210" name="L210"></a> 210             <em class="brace">}</em>
<a id="L211" name="L211"></a> 211             xsltc.<a href="../D/32157.html" title="Multiple defined in 7 places.">setClassName</a>(transletName);
<a id="L212" name="L212"></a> 212 
<a id="L213" name="L213"></a> 213             <em class="comment">// Get java-legal class name from XSLTC module</em>
<a id="L214" name="L214"></a> 214             transletName = xsltc.<a href="../D/17698.html" title="Multiple defined in 41 places.">getClassName</a>();
<a id="L215" name="L215"></a> 215 
<a id="L216" name="L216"></a> 216             <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> stylesheet = <strong class="reserved">null</strong>;
<a id="L217" name="L217"></a> 217             <a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = _parser.<a href="../D/18566.html" title="Multiple defined in 9 places.">getDocumentRoot</a>();
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219             <em class="comment">// Compile the translet - this is where the work is done!</em>
<a id="L220" name="L220"></a> 220             <strong class="reserved">if</strong> (!_parser.<a href="../S/6089.html#L1179" title="Defined at 1179 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">errorsFound</a>() &amp;&amp; <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L221" name="L221"></a> 221                 <em class="comment">// Create a Stylesheet element from the root node</em>
<a id="L222" name="L222"></a> 222                 stylesheet = _parser.<a href="../S/6089.html#L364" title="Defined at 364 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">makeStylesheet</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>);
<a id="L223" name="L223"></a> 223                 stylesheet.<a href="../D/34059.html" title="Multiple defined in 31 places.">setSystemId</a>(_systemId);
<a id="L224" name="L224"></a> 224                 stylesheet.<a href="../S/6198.html#L402" title="Defined at 402 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">setParentStylesheet</a>(<strong class="reserved">null</strong>);
<a id="L225" name="L225"></a> 225 
<a id="L226" name="L226"></a> 226                 <strong class="reserved">if</strong> (xsltc.<a href="../D/23032.html" title="Multiple defined in 2 places.">getTemplateInlining</a>())
<a id="L227" name="L227"></a> 227                    stylesheet.<a href="../D/34089.html" title="Multiple defined in 2 places.">setTemplateInlining</a>(<strong class="reserved">true</strong>);
<a id="L228" name="L228"></a> 228                 <strong class="reserved">else</strong>
<a id="L229" name="L229"></a> 229                    stylesheet.<a href="../D/34089.html" title="Multiple defined in 2 places.">setTemplateInlining</a>(<strong class="reserved">false</strong>);
<a id="L230" name="L230"></a> 230 
<a id="L231" name="L231"></a> 231                 <em class="comment">// Set a document loader (for xsl:include/import) if defined</em>
<a id="L232" name="L232"></a> 232                 <strong class="reserved">if</strong> (_uriResolver != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L233" name="L233"></a> 233                     stylesheet.<a href="../D/33963.html" title="Multiple defined in 2 places.">setSourceLoader</a>(<strong class="reserved">this</strong>);
<a id="L234" name="L234"></a> 234                 <em class="brace">}</em>
<a id="L235" name="L235"></a> 235 
<a id="L236" name="L236"></a> 236                 _parser.<a href="../S/6089.html#L228" title="Defined at 228 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">setCurrentStylesheet</a>(stylesheet);
<a id="L237" name="L237"></a> 237 
<a id="L238" name="L238"></a> 238                 <em class="comment">// Set it as top-level in the XSLTC object</em>
<a id="L239" name="L239"></a> 239                 xsltc.<a href="../S/6196.html#L752" title="Defined at 752 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">setStylesheet</a>(stylesheet);
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241                 <em class="comment">// Create AST under the Stylesheet element</em>
<a id="L242" name="L242"></a> 242                 _parser.<a href="../S/6089.html#L395" title="Defined at 395 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">createAST</a>(stylesheet);
<a id="L243" name="L243"></a> 243             <em class="brace">}</em>
<a id="L244" name="L244"></a> 244 
<a id="L245" name="L245"></a> 245             <em class="comment">// Generate the bytecodes and output the translet class(es)</em>
<a id="L246" name="L246"></a> 246             <strong class="reserved">if</strong> (!_parser.<a href="../S/6089.html#L1179" title="Defined at 1179 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">errorsFound</a>() &amp;&amp; stylesheet != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L247" name="L247"></a> 247                 stylesheet.<a href="../D/33298.html" title="Multiple defined in 3 places.">setMultiDocument</a>(xsltc.<a href="../D/25902.html" title="Multiple defined in 2 places.">isMultiDocument</a>());
<a id="L248" name="L248"></a> 248                 stylesheet.<a href="../D/32832.html" title="Multiple defined in 3 places.">setHasIdCall</a>(xsltc.<a href="../D/24104.html" title="Multiple defined in 2 places.">hasIdCall</a>());
<a id="L249" name="L249"></a> 249 
<a id="L250" name="L250"></a> 250                 <em class="comment">// Class synchronization is needed for BCEL</em>
<a id="L251" name="L251"></a> 251                 <strong class="reserved">synchronized</strong> (xsltc.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>()) <em class="brace">{</em>
<a id="L252" name="L252"></a> 252                     stylesheet.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>();
<a id="L253" name="L253"></a> 253                 <em class="brace">}</em>
<a id="L254" name="L254"></a> 254             <em class="brace">}</em>
<a id="L255" name="L255"></a> 255 
<a id="L256" name="L256"></a> 256             <strong class="reserved">if</strong> (!_parser.<a href="../S/6089.html#L1179" title="Defined at 1179 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">errorsFound</a>()) <em class="brace">{</em>
<a id="L257" name="L257"></a> 257                 <em class="comment">// Check that the transformation went well before returning</em>
<a id="L258" name="L258"></a> 258                 <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[][] bytecodes = xsltc.<a href="../S/6196.html#L553" title="Defined at 553 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getBytecodes</a>();
<a id="L259" name="L259"></a> 259                 <strong class="reserved">if</strong> (bytecodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L260" name="L260"></a> 260                     _templates =
<a id="L261" name="L261"></a> 261                     <strong class="reserved">new</strong> <a href="../S/6010.html#L54" title="Defined at 54 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java.">TemplatesImpl</a>(xsltc.<a href="../S/6196.html#L553" title="Defined at 553 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getBytecodes</a>(), transletName,
<a id="L262" name="L262"></a> 262                         _parser.<a href="../D/21277.html" title="Multiple defined in 7 places.">getOutputProperties</a>(), _indentNumber, _tfactory);
<a id="L263" name="L263"></a> 263 
<a id="L264" name="L264"></a> 264                     <em class="comment">// Set URIResolver on templates object</em>
<a id="L265" name="L265"></a> 265                     <strong class="reserved">if</strong> (_uriResolver != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L266" name="L266"></a> 266                         _templates.<a href="../D/34208.html" title="Multiple defined in 10 places.">setURIResolver</a>(_uriResolver);
<a id="L267" name="L267"></a> 267                     <em class="brace">}</em>
<a id="L268" name="L268"></a> 268                 <em class="brace">}</em>
<a id="L269" name="L269"></a> 269             <em class="brace">}</em>
<a id="L270" name="L270"></a> 270             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L271" name="L271"></a> 271                 <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> errorMessage = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L272" name="L272"></a> 272                 <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../S/7704.html#L88" title="Defined at 88 in src/com/sun/javadoc/PackageDoc.java.">errors</a> = _parser.<a href="../D/18861.html" title="Multiple defined in 2 places.">getErrors</a>();
<a id="L273" name="L273"></a> 273                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <a href="../S/7704.html#L88" title="Defined at 88 in src/com/sun/javadoc/PackageDoc.java.">errors</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L274" name="L274"></a> 274                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>; i++) <em class="brace">{</em>
<a id="L275" name="L275"></a> 275                     <strong class="reserved">if</strong> (errorMessage.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0)
<a id="L276" name="L276"></a> 276                         errorMessage.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('\n');
<a id="L277" name="L277"></a> 277                     errorMessage.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/7704.html#L88" title="Defined at 88 in src/com/sun/javadoc/PackageDoc.java.">errors</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i).<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L278" name="L278"></a> 278                 <em class="brace">}</em>
<a id="L279" name="L279"></a> 279                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>.JAXP_COMPILE_ERR, <strong class="reserved">new</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(errorMessage.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()));
<a id="L280" name="L280"></a> 280             <em class="brace">}</em>
<a id="L281" name="L281"></a> 281         <em class="brace">}</em>
<a id="L282" name="L282"></a> 282         <strong class="reserved">catch</strong> (<a href="../S/6241.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/CompilerException.java.">CompilerException</a> e) <em class="brace">{</em>
<a id="L283" name="L283"></a> 283             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>.JAXP_COMPILE_ERR, e);
<a id="L284" name="L284"></a> 284         <em class="brace">}</em>
<a id="L285" name="L285"></a> 285     <em class="brace">}</em>
<a id="L286" name="L286"></a> 286 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L290" name="L290"></a> 290     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28846.html" title="Multiple referred from 46 places.">startPrefixMapping</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri) <em class="brace">{</em>
<a id="L291" name="L291"></a> 291         _parser.<a href="../D/34818.html" title="Multiple defined in 38 places.">startPrefixMapping</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L292" name="L292"></a> 292     <em class="brace">}</em>
<a id="L293" name="L293"></a> 293 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L297" name="L297"></a> 297     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13786.html" title="Multiple referred from 22 places.">endPrefixMapping</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>) <em class="brace">{</em>
<a id="L298" name="L298"></a> 298         _parser.<a href="../D/15470.html" title="Multiple defined in 28 places.">endPrefixMapping</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L299" name="L299"></a> 299     <em class="brace">}</em>
<a id="L300" name="L300"></a> 300 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L304" name="L304"></a> 304     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> localname, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qname,
<a id="L305" name="L305"></a> 305         <a href="../D/601.html" title="Multiple defined in 4 places.">Attributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L306" name="L306"></a> 306     <em class="brace">{</em>
<a id="L307" name="L307"></a> 307         _parser.<a href="../D/34781.html" title="Multiple defined in 105 places.">startElement</a>(uri, localname, qname, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L308" name="L308"></a> 308     <em class="brace">}</em>
<a id="L309" name="L309"></a> 309 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L313" name="L313"></a> 313     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> localname, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qname) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314         _parser.<a href="../D/15448.html" title="Multiple defined in 90 places.">endElement</a>(uri, localname, qname);
<a id="L315" name="L315"></a> 315     <em class="brace">}</em>
<a id="L316" name="L316"></a> 316 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L320" name="L320"></a> 320     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>(<strong class="reserved">char</strong>[] ch, <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L321" name="L321"></a> 321         _parser.<a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>(ch, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L322" name="L322"></a> 322     <em class="brace">}</em>
<a id="L323" name="L323"></a> 323 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L327" name="L327"></a> 327     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25204.html" title="Multiple referred from 66 places.">processingInstruction</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328         _parser.<a href="../D/29876.html" title="Multiple defined in 72 places.">processingInstruction</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L329" name="L329"></a> 329     <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L334" name="L334"></a> 334     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20375.html" title="Multiple referred from 42 places.">ignorableWhitespace</a>(<strong class="reserved">char</strong>[] ch, <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L335" name="L335"></a> 335         _parser.<a href="../D/24316.html" title="Multiple defined in 59 places.">ignorableWhitespace</a>(ch, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L336" name="L336"></a> 336     <em class="brace">}</em>
<a id="L337" name="L337"></a> 337 
<div class="comment">
      Just forward SAX2 event to parser object.</div>
<a id="L341" name="L341"></a> 341     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28670.html" title="Multiple referred from 11 places.">skippedEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L342" name="L342"></a> 342         _parser.<a href="../D/34628.html" title="Multiple defined in 25 places.">skippedEntity</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L343" name="L343"></a> 343     <em class="brace">}</em>
<a id="L344" name="L344"></a> 344 
<div class="comment">
      Set internal system Id and forward SAX2 event to parser object.</div>
<a id="L348" name="L348"></a> 348     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27270.html" title="Multiple referred from 45 places.">setDocumentLocator</a>(<a href="../D/5191.html" title="Multiple defined in 3 places.">Locator</a> locator) <em class="brace">{</em>
<a id="L349" name="L349"></a> 349         <a href="../D/34059.html" title="Multiple defined in 31 places.">setSystemId</a>(locator.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>());
<a id="L350" name="L350"></a> 350         _parser.<a href="../D/32500.html" title="Multiple defined in 33 places.">setDocumentLocator</a>(locator);
<a id="L351" name="L351"></a> 351     <em class="brace">}</em>
<a id="L352" name="L352"></a> 352 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L124">[^]</a><a href="#L348">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
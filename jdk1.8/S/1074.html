<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/ConcurrentHashMap.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L632">[^]</a><a href="#L6246">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L632" title="Defined at 632.">getKey</a></li>
<li><a href="#L633" title="Defined at 633.">getValue</a></li>
<li><a href="#L634" title="Defined at 634.">hashCode</a></li>
<li><a href="#L635" title="Defined at 635.">toString</a></li>
<li><a href="#L636" title="Defined at 636.">setValue</a></li>
<li><a href="#L640" title="Defined at 640.">equals</a></li>
<li><a href="#L652" title="Defined at 652.">find</a></li>
<li><a href="#L684" title="Defined at 684.">spread</a></li>
<li><a href="#L692" title="Defined at 692.">tableSizeFor</a></li>
<li><a href="#L706" title="Defined at 706.">comparableClassFor</a></li>
<li><a href="#L729" title="Defined at 729.">SuppressWarnings</a></li>
<li><a href="#L730" title="Defined at 730.">compareComparables</a></li>
<li><a href="#L753" title="Defined at 753.">SuppressWarnings</a></li>
<li><a href="#L754" title="Defined at 754.">tabAt</a></li>
<li><a href="#L758" title="Defined at 758.">casTabAt</a></li>
<li><a href="#L763" title="Defined at 763.">setTabAt</a></li>
<li><a href="#L909" title="Defined at 909.">size</a></li>
<li><a href="#L919" title="Defined at 919.">isEmpty</a></li>
<li><a href="#L934" title="Defined at 934.">get</a></li>
<li><a href="#L963" title="Defined at 963.">containsKey</a></li>
<li><a href="#L977" title="Defined at 977.">containsValue</a></li>
<li><a href="#L1005" title="Defined at 1005.">put</a></li>
<li><a href="#L1010" title="Defined at 1010.">putVal</a></li>
<li><a href="#L1081" title="Defined at 1081.">putAll</a></li>
<li><a href="#L1096" title="Defined at 1096.">remove</a></li>
<li><a href="#L1105" title="Defined at 1105.">replaceNode</a></li>
<li><a href="#L1179" title="Defined at 1179.">clear</a></li>
<li><a href="#L1229" title="Defined at 1229.">keySet</a></li>
<li><a href="#L1252" title="Defined at 1252.">values</a></li>
<li><a href="#L1274" title="Defined at 1274.">entrySet</a></li>
<li><a href="#L1286" title="Defined at 1286.">hashCode</a></li>
<li><a href="#L1308" title="Defined at 1308.">toString</a></li>
<li><a href="#L1340" title="Defined at 1340.">equals</a></li>
<li><a href="#L1386" title="Defined at 1386.">writeObject</a></li>
<li><a href="#L1428" title="Defined at 1428.">readObject</a></li>
<li><a href="#L1534" title="Defined at 1534.">putIfAbsent</a></li>
<li><a href="#L1543" title="Defined at 1543.">remove</a></li>
<li><a href="#L1554" title="Defined at 1554.">replace</a></li>
<li><a href="#L1567" title="Defined at 1567.">replace</a></li>
<li><a href="#L1586" title="Defined at 1586.">getOrDefault</a></li>
<li><a href="#L1591" title="Defined at 1591.">forEach</a></li>
<li><a href="#L1602" title="Defined at 1602.">replaceAll</a></li>
<li><a href="#L1643" title="Defined at 1643.">computeIfAbsent</a></li>
<li><a href="#L1744" title="Defined at 1744.">computeIfPresent</a></li>
<li><a href="#L1834" title="Defined at 1834.">compute</a></li>
<li><a href="#L1960" title="Defined at 1960.">merge</a></li>
<li><a href="#L2066" title="Defined at 2066.">contains</a></li>
<li><a href="#L2076" title="Defined at 2076.">keys</a></li>
<li><a href="#L2088" title="Defined at 2088.">elements</a></li>
<li><a href="#L2106" title="Defined at 2106.">mappingCount</a></li>
<li><a href="#L2119" title="Defined at 2119.">newKeySet</a></li>
<li><a href="#L2136" title="Defined at 2136.">newKeySet</a></li>
<li><a href="#L2152" title="Defined at 2152.">keySet</a></li>
<li><a href="#L2170" title="Defined at 2170.">find</a></li>
<li><a href="#L2205" title="Defined at 2205.">find</a></li>
<li><a href="#L2216" title="Defined at 2216.">resizeStamp</a></li>
<li><a href="#L2223" title="Defined at 2223.">initTable</a></li>
<li><a href="#L2256" title="Defined at 2256.">addCount</a></li>
<li><a href="#L2297" title="Defined at 2297.">helpTransfer</a></li>
<li><a href="#L2322" title="Defined at 2322.">tryPresize</a></li>
<li><a href="#L2367" title="Defined at 2367.">transfer</a></li>
<li><a href="#L2511" title="Defined at 2511.">sumCount</a></li>
<li><a href="#L2524" title="Defined at 2524.">fullAddCount</a></li>
<li><a href="#L2611" title="Defined at 2611.">treeifyBin</a></li>
<li><a href="#L2640" title="Defined at 2640.">untreeify</a></li>
<li><a href="#L2671" title="Defined at 2671.">find</a></li>
<li><a href="#L2679" title="Defined at 2679.">findTreeNode</a></li>
<li><a href="#L2735" title="Defined at 2735.">tieBreakOrder</a></li>
<li><a href="#L2795" title="Defined at 2795.">lockRoot</a></li>
<li><a href="#L2803" title="Defined at 2803.">unlockRoot</a></li>
<li><a href="#L2810" title="Defined at 2810.">contendedLock</a></li>
<li><a href="#L2836" title="Defined at 2836.">find</a></li>
<li><a href="#L2869" title="Defined at 2869.">putTreeVal</a></li>
<li><a href="#L2936" title="Defined at 2936.">removeTreeNode</a></li>
<li><a href="#L3035" title="Defined at 3035.">rotateLeft</a></li>
<li><a href="#L3053" title="Defined at 3053.">rotateRight</a></li>
<li><a href="#L3071" title="Defined at 3071.">balanceInsertion</a></li>
<li><a href="#L3126" title="Defined at 3126.">balanceDeletion</a></li>
<li><a href="#L3221" title="Defined at 3221.">checkInvariants</a></li>
<li><a href="#L3312" title="Defined at 3312.">advance</a></li>
<li><a href="#L3345" title="Defined at 3345.">pushState</a></li>
<li><a href="#L3363" title="Defined at 3363.">recoverState</a></li>
<li><a href="#L3394" title="Defined at 3394.">hasNext</a></li>
<li><a href="#L3395" title="Defined at 3395.">hasMoreElements</a></li>
<li><a href="#L3397" title="Defined at 3397.">remove</a></li>
<li><a href="#L3413" title="Defined at 3413.">next</a></li>
<li><a href="#L3423" title="Defined at 3423.">nextElement</a></li>
<li><a href="#L3433" title="Defined at 3433.">next</a></li>
<li><a href="#L3443" title="Defined at 3443.">nextElement</a></li>
<li><a href="#L3453" title="Defined at 3453.">next</a></li>
<li><a href="#L3477" title="Defined at 3477.">getKey</a></li>
<li><a href="#L3478" title="Defined at 3478.">getValue</a></li>
<li><a href="#L3479" title="Defined at 3479.">hashCode</a></li>
<li><a href="#L3480" title="Defined at 3480.">toString</a></li>
<li><a href="#L3482" title="Defined at 3482.">equals</a></li>
<li><a href="#L3499" title="Defined at 3499.">setValue</a></li>
<li><a href="#L3517" title="Defined at 3517.">trySplit</a></li>
<li><a href="#L3524" title="Defined at 3524.">forEachRemaining</a></li>
<li><a href="#L3530" title="Defined at 3530.">tryAdvance</a></li>
<li><a href="#L3539" title="Defined at 3539.">estimateSize</a></li>
<li><a href="#L3541" title="Defined at 3541.">characteristics</a></li>
<li><a href="#L3556" title="Defined at 3556.">trySplit</a></li>
<li><a href="#L3563" title="Defined at 3563.">forEachRemaining</a></li>
<li><a href="#L3569" title="Defined at 3569.">tryAdvance</a></li>
<li><a href="#L3578" title="Defined at 3578.">estimateSize</a></li>
<li><a href="#L3580" title="Defined at 3580.">characteristics</a></li>
<li><a href="#L3596" title="Defined at 3596.">trySplit</a></li>
<li><a href="#L3603" title="Defined at 3603.">forEachRemaining</a></li>
<li><a href="#L3609" title="Defined at 3609.">tryAdvance</a></li>
<li><a href="#L3618" title="Defined at 3618.">estimateSize</a></li>
<li><a href="#L3620" title="Defined at 3620.">characteristics</a></li>
<li><a href="#L3636" title="Defined at 3636.">batchFor</a></li>
<li><a href="#L3652" title="Defined at 3652.">forEach</a></li>
<li><a href="#L3673" title="Defined at 3673.">forEach</a></li>
<li><a href="#L3699" title="Defined at 3699.">search</a></li>
<li><a href="#L3723" title="Defined at 3723.">reduce</a></li>
<li><a href="#L3748" title="Defined at 3748.">reduceToDouble</a></li>
<li><a href="#L3774" title="Defined at 3774.">reduceToLong</a></li>
<li><a href="#L3800" title="Defined at 3800.">reduceToInt</a></li>
<li><a href="#L3819" title="Defined at 3819.">forEachKey</a></li>
<li><a href="#L3840" title="Defined at 3840.">forEachKey</a></li>
<li><a href="#L3866" title="Defined at 3866.">searchKeys</a></li>
<li><a href="#L3885" title="Defined at 3885.">reduceKeys</a></li>
<li><a href="#L3909" title="Defined at 3909.">reduceKeys</a></li>
<li><a href="#L3934" title="Defined at 3934.">reduceKeysToDouble</a></li>
<li><a href="#L3960" title="Defined at 3960.">reduceKeysToLong</a></li>
<li><a href="#L3986" title="Defined at 3986.">reduceKeysToInt</a></li>
<li><a href="#L4005" title="Defined at 4005.">forEachValue</a></li>
<li><a href="#L4027" title="Defined at 4027.">forEachValue</a></li>
<li><a href="#L4053" title="Defined at 4053.">searchValues</a></li>
<li><a href="#L4071" title="Defined at 4071.">reduceValues</a></li>
<li><a href="#L4095" title="Defined at 4095.">reduceValues</a></li>
<li><a href="#L4120" title="Defined at 4120.">reduceValuesToDouble</a></li>
<li><a href="#L4146" title="Defined at 4146.">reduceValuesToLong</a></li>
<li><a href="#L4172" title="Defined at 4172.">reduceValuesToInt</a></li>
<li><a href="#L4191" title="Defined at 4191.">forEachEntry</a></li>
<li><a href="#L4211" title="Defined at 4211.">forEachEntry</a></li>
<li><a href="#L4237" title="Defined at 4237.">searchEntries</a></li>
<li><a href="#L4255" title="Defined at 4255.">reduceEntries</a></li>
<li><a href="#L4279" title="Defined at 4279.">reduceEntries</a></li>
<li><a href="#L4304" title="Defined at 4304.">reduceEntriesToDouble</a></li>
<li><a href="#L4330" title="Defined at 4330.">reduceEntriesToLong</a></li>
<li><a href="#L4356" title="Defined at 4356.">reduceEntriesToInt</a></li>
<li><a href="#L4384" title="Defined at 4384.">getMap</a></li>
<li><a href="#L4390" title="Defined at 4390.">clear</a></li>
<li><a href="#L4391" title="Defined at 4391.">size</a></li>
<li><a href="#L4392" title="Defined at 4392.">isEmpty</a></li>
<li><a href="#L4404" title="Defined at 4404.">iterator</a></li>
<li><a href="#L4405" title="Defined at 4405.">contains</a></li>
<li><a href="#L4406" title="Defined at 4406.">remove</a></li>
<li><a href="#L4410" title="Defined at 4410.">toArray</a></li>
<li><a href="#L4432" title="Defined at 4432.">SuppressWarnings</a></li>
<li><a href="#L4433" title="Defined at 4433.">toArray</a></li>
<li><a href="#L4473" title="Defined at 4473.">toString</a></li>
<li><a href="#L4489" title="Defined at 4489.">containsAll</a></li>
<li><a href="#L4499" title="Defined at 4499.">removeAll</a></li>
<li><a href="#L4511" title="Defined at 4511.">retainAll</a></li>
<li><a href="#L4552" title="Defined at 4552.">getMappedValue</a></li>
<li><a href="#L4558" title="Defined at 4558.">contains</a></li>
<li><a href="#L4569" title="Defined at 4569.">remove</a></li>
<li><a href="#L4574" title="Defined at 4574.">iterator</a></li>
<li><a href="#L4591" title="Defined at 4591.">add</a></li>
<li><a href="#L4609" title="Defined at 4609.">addAll</a></li>
<li><a href="#L4621" title="Defined at 4621.">hashCode</a></li>
<li><a href="#L4628" title="Defined at 4628.">equals</a></li>
<li><a href="#L4635" title="Defined at 4635.">spliterator</a></li>
<li><a href="#L4643" title="Defined at 4643.">forEach</a></li>
<li><a href="#L4663" title="Defined at 4663.">contains</a></li>
<li><a href="#L4667" title="Defined at 4667.">remove</a></li>
<li><a href="#L4679" title="Defined at 4679.">iterator</a></li>
<li><a href="#L4686" title="Defined at 4686.">add</a></li>
<li><a href="#L4689" title="Defined at 4689.">addAll</a></li>
<li><a href="#L4693" title="Defined at 4693.">spliterator</a></li>
<li><a href="#L4701" title="Defined at 4701.">forEach</a></li>
<li><a href="#L4722" title="Defined at 4722.">contains</a></li>
<li><a href="#L4731" title="Defined at 4731.">remove</a></li>
<li><a href="#L4742" title="Defined at 4742.">iterator</a></li>
<li><a href="#L4749" title="Defined at 4749.">add</a></li>
<li><a href="#L4753" title="Defined at 4753.">addAll</a></li>
<li><a href="#L4762" title="Defined at 4762.">hashCode</a></li>
<li><a href="#L4774" title="Defined at 4774.">equals</a></li>
<li><a href="#L4781" title="Defined at 4781.">spliterator</a></li>
<li><a href="#L4789" title="Defined at 4789.">forEach</a></li>
<li><a href="#L4807" title="Defined at 4807.">SuppressWarnings</a></li>
<li><a href="#L4835" title="Defined at 4835.">advance</a></li>
<li><a href="#L4865" title="Defined at 4865.">pushState</a></li>
<li><a href="#L4878" title="Defined at 4878.">recoverState</a></li>
<li><a href="#L4902" title="Defined at 4902.">SuppressWarnings</a></li>
<li><a href="#L4912" title="Defined at 4912.">compute</a></li>
<li><a href="#L4929" title="Defined at 4929.">SuppressWarnings</a></li>
<li><a href="#L4939" title="Defined at 4939.">compute</a></li>
<li><a href="#L4956" title="Defined at 4956.">SuppressWarnings</a></li>
<li><a href="#L4966" title="Defined at 4966.">compute</a></li>
<li><a href="#L4983" title="Defined at 4983.">SuppressWarnings</a></li>
<li><a href="#L4993" title="Defined at 4993.">compute</a></li>
<li><a href="#L5010" title="Defined at 5010.">SuppressWarnings</a></li>
<li><a href="#L5021" title="Defined at 5021.">compute</a></li>
<li><a href="#L5043" title="Defined at 5043.">SuppressWarnings</a></li>
<li><a href="#L5054" title="Defined at 5054.">compute</a></li>
<li><a href="#L5076" title="Defined at 5076.">SuppressWarnings</a></li>
<li><a href="#L5087" title="Defined at 5087.">compute</a></li>
<li><a href="#L5109" title="Defined at 5109.">SuppressWarnings</a></li>
<li><a href="#L5121" title="Defined at 5121.">compute</a></li>
<li><a href="#L5143" title="Defined at 5143.">SuppressWarnings</a></li>
<li><a href="#L5155" title="Defined at 5155.">getRawResult</a></li>
<li><a href="#L5156" title="Defined at 5156.">compute</a></li>
<li><a href="#L5187" title="Defined at 5187.">SuppressWarnings</a></li>
<li><a href="#L5199" title="Defined at 5199.">getRawResult</a></li>
<li><a href="#L5200" title="Defined at 5200.">compute</a></li>
<li><a href="#L5231" title="Defined at 5231.">SuppressWarnings</a></li>
<li><a href="#L5243" title="Defined at 5243.">getRawResult</a></li>
<li><a href="#L5244" title="Defined at 5244.">compute</a></li>
<li><a href="#L5275" title="Defined at 5275.">SuppressWarnings</a></li>
<li><a href="#L5287" title="Defined at 5287.">getRawResult</a></li>
<li><a href="#L5288" title="Defined at 5288.">compute</a></li>
<li><a href="#L5319" title="Defined at 5319.">SuppressWarnings</a></li>
<li><a href="#L5332" title="Defined at 5332.">getRawResult</a></li>
<li><a href="#L5333" title="Defined at 5333.">compute</a></li>
<li><a href="#L5367" title="Defined at 5367.">SuppressWarnings</a></li>
<li><a href="#L5380" title="Defined at 5380.">getRawResult</a></li>
<li><a href="#L5381" title="Defined at 5381.">compute</a></li>
<li><a href="#L5415" title="Defined at 5415.">SuppressWarnings</a></li>
<li><a href="#L5428" title="Defined at 5428.">getRawResult</a></li>
<li><a href="#L5429" title="Defined at 5429.">compute</a></li>
<li><a href="#L5461" title="Defined at 5461.">SuppressWarnings</a></li>
<li><a href="#L5477" title="Defined at 5477.">getRawResult</a></li>
<li><a href="#L5478" title="Defined at 5478.">compute</a></li>
<li><a href="#L5515" title="Defined at 5515.">SuppressWarnings</a></li>
<li><a href="#L5531" title="Defined at 5531.">getRawResult</a></li>
<li><a href="#L5532" title="Defined at 5532.">compute</a></li>
<li><a href="#L5569" title="Defined at 5569.">SuppressWarnings</a></li>
<li><a href="#L5585" title="Defined at 5585.">getRawResult</a></li>
<li><a href="#L5586" title="Defined at 5586.">compute</a></li>
<li><a href="#L5623" title="Defined at 5623.">SuppressWarnings</a></li>
<li><a href="#L5639" title="Defined at 5639.">getRawResult</a></li>
<li><a href="#L5640" title="Defined at 5640.">compute</a></li>
<li><a href="#L5677" title="Defined at 5677.">SuppressWarnings</a></li>
<li><a href="#L5695" title="Defined at 5695.">getRawResult</a></li>
<li><a href="#L5696" title="Defined at 5696.">compute</a></li>
<li><a href="#L5727" title="Defined at 5727.">SuppressWarnings</a></li>
<li><a href="#L5745" title="Defined at 5745.">getRawResult</a></li>
<li><a href="#L5746" title="Defined at 5746.">compute</a></li>
<li><a href="#L5777" title="Defined at 5777.">SuppressWarnings</a></li>
<li><a href="#L5795" title="Defined at 5795.">getRawResult</a></li>
<li><a href="#L5796" title="Defined at 5796.">compute</a></li>
<li><a href="#L5827" title="Defined at 5827.">SuppressWarnings</a></li>
<li><a href="#L5845" title="Defined at 5845.">getRawResult</a></li>
<li><a href="#L5846" title="Defined at 5846.">compute</a></li>
<li><a href="#L5877" title="Defined at 5877.">SuppressWarnings</a></li>
<li><a href="#L5895" title="Defined at 5895.">getRawResult</a></li>
<li><a href="#L5896" title="Defined at 5896.">compute</a></li>
<li><a href="#L5927" title="Defined at 5927.">SuppressWarnings</a></li>
<li><a href="#L5945" title="Defined at 5945.">getRawResult</a></li>
<li><a href="#L5946" title="Defined at 5946.">compute</a></li>
<li><a href="#L5977" title="Defined at 5977.">SuppressWarnings</a></li>
<li><a href="#L5995" title="Defined at 5995.">getRawResult</a></li>
<li><a href="#L5996" title="Defined at 5996.">compute</a></li>
<li><a href="#L6027" title="Defined at 6027.">SuppressWarnings</a></li>
<li><a href="#L6045" title="Defined at 6045.">getRawResult</a></li>
<li><a href="#L6046" title="Defined at 6046.">compute</a></li>
<li><a href="#L6077" title="Defined at 6077.">SuppressWarnings</a></li>
<li><a href="#L6095" title="Defined at 6095.">getRawResult</a></li>
<li><a href="#L6096" title="Defined at 6096.">compute</a></li>
<li><a href="#L6127" title="Defined at 6127.">SuppressWarnings</a></li>
<li><a href="#L6145" title="Defined at 6145.">getRawResult</a></li>
<li><a href="#L6146" title="Defined at 6146.">compute</a></li>
<li><a href="#L6177" title="Defined at 6177.">SuppressWarnings</a></li>
<li><a href="#L6195" title="Defined at 6195.">getRawResult</a></li>
<li><a href="#L6196" title="Defined at 6196.">compute</a></li>
<li><a href="#L6227" title="Defined at 6227.">SuppressWarnings</a></li>
<li><a href="#L6245" title="Defined at 6245.">getRawResult</a></li>
<li><a href="#L6246" title="Defined at 6246.">compute</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent;
<a id="L37" name="L37"></a>  37 
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.io.ObjectStreamField;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.lang.reflect.ParameterizedType;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.lang.reflect.Type;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.util.AbstractMap;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.util.Collection;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.util.Comparator;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> java.util.Map;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> java.util.NoSuchElementException;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> java.util.Set;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> java.util.Spliterator;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentMap;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> java.util.concurrent.ForkJoinPool;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> java.util.concurrent.atomic.AtomicReference;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> java.util.concurrent.locks.LockSupport;
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> java.util.concurrent.locks.ReentrantLock;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> java.util.function.BiConsumer;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> java.util.function.BiFunction;
<a id="L61" name="L61"></a>  61 <strong class="reserved">import</strong> java.util.function.BinaryOperator;
<a id="L62" name="L62"></a>  62 <strong class="reserved">import</strong> java.util.function.Consumer;
<a id="L63" name="L63"></a>  63 <strong class="reserved">import</strong> java.util.function.DoubleBinaryOperator;
<a id="L64" name="L64"></a>  64 <strong class="reserved">import</strong> java.util.function.Function;
<a id="L65" name="L65"></a>  65 <strong class="reserved">import</strong> java.util.function.IntBinaryOperator;
<a id="L66" name="L66"></a>  66 <strong class="reserved">import</strong> java.util.function.LongBinaryOperator;
<a id="L67" name="L67"></a>  67 <strong class="reserved">import</strong> java.util.function.ToDoubleBiFunction;
<a id="L68" name="L68"></a>  68 <strong class="reserved">import</strong> java.util.function.ToDoubleFunction;
<a id="L69" name="L69"></a>  69 <strong class="reserved">import</strong> java.util.function.ToIntBiFunction;
<a id="L70" name="L70"></a>  70 <strong class="reserved">import</strong> java.util.function.ToIntFunction;
<a id="L71" name="L71"></a>  71 <strong class="reserved">import</strong> java.util.function.ToLongBiFunction;
<a id="L72" name="L72"></a>  72 <strong class="reserved">import</strong> java.util.function.ToLongFunction;
<a id="L73" name="L73"></a>  73 <strong class="reserved">import</strong> java.util.stream.Stream;
<a id="L74" name="L74"></a>  74 
<div class="comment">
  A hash table supporting full concurrency of retrievals and
  high expected concurrency for updates. This class obeys the
  same functional specification as {@link java.util.Hashtable}, and
  includes versions of methods corresponding to each method of
  <code>Hashtable</code>. However, even though all operations are
  thread-safe, retrieval operations do <em>not</em> entail locking,
  and there is <em>not</em> any support for locking the entire table
  in a way that prevents all access.  This class is fully
  interoperable with <code>Hashtable</code> in programs that rely on its
  thread safety but not on its synchronization details.
  <p>Retrieval operations (including <code>get</code>) generally do not
  block, so may overlap with update operations (including <code>put</code>
  and <code>remove</code>). Retrievals reflect the results of the most
  recently <em>completed</em> update operations holding upon their
  onset. (More formally, an update operation for a given key bears a
  <em>happens-before</em> relation with any (non-null) retrieval for
  that key reporting the updated value.)  For aggregate operations
  such as <code>putAll</code> and <code>clear</code>, concurrent retrievals may
  reflect insertion or removal of only some entries.  Similarly,
  Iterators, Spliterators and Enumerations return elements reflecting the
  state of the hash table at some point at or since the creation of the
  iterator/enumeration.  They do <em>not</em> throw {@link
  java.util.ConcurrentModificationException ConcurrentModificationException}.
  However, iterators are designed to be used by only one thread at a time.
  Bear in mind that the results of aggregate status methods including
  <code>size</code>, <code>isEmpty</code>, and <code>containsValue</code> are typically
  useful only when a map is not undergoing concurrent updates in other threads.
  Otherwise the results of these methods reflect transient states
  that may be adequate for monitoring or estimation purposes, but not
  for program control.
  </p><p>The table is dynamically expanded when there are too many
  collisions (i.e., keys that have distinct hash codes but fall into
  the same slot modulo the table size), with the expected average
  effect of maintaining roughly two bins per mapping (corresponding
  to a 0.75 load factor threshold for resizing). There may be much
  variance around this average as mappings are added and removed, but
  overall, this maintains a commonly accepted time/space tradeoff for
  hash tables.  However, resizing this or any other kind of hash
  table may be a relatively slow operation. When possible, it is a
  good idea to provide a size estimate as an optional {@code
  initialCapacity} constructor argument. An additional optional
  <code>loadFactor</code> constructor argument provides a further means of
  customizing initial table capacity by specifying the table density
  to be used in calculating the amount of space to allocate for the
  given number of elements.  Also, for compatibility with previous
  versions of this class, constructors may optionally specify an
  expected <code>concurrencyLevel</code> as an additional hint for
  internal sizing.  Note that using many keys with exactly the same
  <code>hashCode()</code> is a sure way to slow down performance of any
  hash table. To ameliorate impact, when keys are {@link Comparable},
  this class may use comparison order among keys to help break ties.
  </p><p>A {@link Set} projection of a ConcurrentHashMap may be created
  (using {@link #newKeySet()} or {@link #newKeySet(int)}), or viewed
  (using {@link #keySet(Object)} when only keys are of interest, and the
  mapped values are (perhaps transiently) not used or all take the
  same mapping value.
  </p><p>A ConcurrentHashMap can be used as scalable frequency map (a
  form of histogram or multiset) by using {@link
  java.util.concurrent.atomic.LongAdder} values and initializing via
  {@link #computeIfAbsent computeIfAbsent}. For example, to add a count
  to a <code>ConcurrentHashMap<string,longadder> freqs</string,longadder></code>, you can use
  <code>freqs.computeIfAbsent(k -&gt; new LongAdder()).increment();</code>
  </p><p>This class and its views and iterators implement all of the
  <em>optional</em> methods of the {@link Map} and {@link Iterator}
  interfaces.
  </p><p>Like {@link Hashtable} but unlike {@link HashMap}, this class
  does <em>not</em> allow <code>null</code> to be used as a key or value.
  </p><p>ConcurrentHashMaps support a set of sequential and parallel bulk
  operations that, unlike most {@link Stream} methods, are designed
  to be safely, and often sensibly, applied even with maps that are
  being concurrently updated by other threads; for example, when
  computing a snapshot summary of the values in a shared registry.
  There are three kinds of operation, each with four forms, accepting
  functions with Keys, Values, Entries, and (Key, Value) arguments
  and/or return values. Because the elements of a ConcurrentHashMap
  are not ordered in any particular way, and may be processed in
  different orders in different parallel executions, the correctness
  of supplied functions should not depend on any ordering, or on any
  other objects or values that may transiently change while
  computation is in progress; and except for forEach actions, should
  ideally be side-effect-free. Bulk operations on {@link java.util.Map.Entry}
  objects do not support method <code>setValue</code>.
  </p><ul><li> forEach: Perform a given action on each element.
  A variant form applies a given transformation on each element
  before performing the action.</li><li> search: Return the first available non-null result of
  applying a given function on each element; skipping further
  search when a result is found.</li><li> reduce: Accumulate each element.  The supplied reduction
  function cannot rely on ordering (more formally, it should be
  both associative and commutative).  There are five variants:
  <ul><li> Plain reductions. (There is not a form of this method for
  (key, value) function arguments since there is no corresponding
  return type.)</li><li> Mapped reductions that accumulate the results of a given
  function applied to each element.</li><li> Reductions to scalar doubles, longs, and ints, using a
  given basis value.</li>
  </ul>
  </li>
  </ul>
  <p>These bulk operations accept a <code>parallelismThreshold</code>
  argument. Methods proceed sequentially if the current map size is
  estimated to be less than the given threshold. Using a value of
  <code>Long.MAX_VALUE</code> suppresses all parallelism.  Using a value
  of <code>1</code> results in maximal parallelism by partitioning into
  enough subtasks to fully utilize the {@link
  ForkJoinPool#commonPool()} that is used for all parallel
  computations. Normally, you would initially choose one of these
  extreme values, and then measure performance of using in-between
  values that trade off overhead versus throughput.
  </p><p>The concurrency properties of bulk operations follow
  from those of ConcurrentHashMap: Any non-null result returned
  from <code>get(key)</code> and related access methods bears a
  happens-before relation with the associated insertion or
  update.  The result of any bulk operation reflects the
  composition of these per-element relations (but is not
  necessarily atomic with respect to the map as a whole unless it
  is somehow known to be quiescent).  Conversely, because keys
  and values in the map are never null, null serves as a reliable
  atomic indicator of the current lack of any result.  To
  maintain this property, null serves as an implicit basis for
  all non-scalar reduction operations. For the double, long, and
  int versions, the basis should be one that, when combined with
  any other value, returns that other value (more formally, it
  should be the identity element for the reduction). Most common
  reductions have these properties; for example, computing a sum
  with basis 0 or a minimum with basis MAX_VALUE.
  </p><p>Search and transformation functions provided as arguments
  should similarly return null to indicate the lack of any result
  (in which case it is not used). In the case of mapped
  reductions, this also enables transformations to serve as
  filters, returning null (or, in the case of primitive
  specializations, the identity basis) if the element should not
  be combined. You can create compound transformations and
  filterings by composing them yourself under this "null means
  there is nothing there now" rule before using them in search or
  reduce operations.
  </p><p>Methods accepting and/or returning Entry arguments maintain
  key-value associations. They may be useful for example when
  finding the key for the greatest value. Note that "plain" Entry
  arguments can be supplied using {@code new
  AbstractMap.SimpleEntry(k,v)}.
  </p><p>Bulk operations may complete abruptly, throwing an
  exception encountered in the application of a supplied
  function. Bear in mind when handling such exceptions that other
  concurrently executing functions could also have thrown
  exceptions, or would have done so if the first exception had
  not occurred.
  </p><p>Speedups for parallel compared to sequential forms are common
  but not guaranteed.  Parallel operations involving brief functions
  on small maps may execute more slowly than sequential forms if the
  underlying work to parallelize the computation is more expensive
  than the computation itself.  Similarly, parallelization may not
  lead to much actual parallelism if all processors are busy
  performing unrelated tasks.
  </p><p>All arguments to all task methods must be non-null.
  </p><p>This class is a member of the
  <a href="{@docRoot}/../technotes/guides/collections/index.html">
  Java Collections Framework</a>.
  @since 1.5
  @author Doug Lea
  @param <k> the type of keys maintained by this map
  @param <v> the type of mapped values</v></k></p></div>
<a id="L267" name="L267"></a> 267 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1628.html" title="Multiple referred from 127 places.">ConcurrentHashMap</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1135.html#L68" title="Defined at 68 in src/java/util/AbstractMap.java.">AbstractMap</a>&lt;K,V&gt;
<a id="L268" name="L268"></a> 268     <strong class="reserved">implements</strong> <a href="../S/1110.html#L63" title="Defined at 63 in src/java/util/concurrent/ConcurrentMap.java.">ConcurrentMap</a>&lt;K,V&gt;, <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L269" name="L269"></a> 269     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7249069246763182397L;
<a id="L270" name="L270"></a> 270 
<div class="comment">
      Overview:
      The primary design goal of this hash table is to maintain
      concurrent readability (typically method get(), but also
      iterators and related methods) while minimizing update
      contention. Secondary goals are to keep space consumption about
      the same or better than java.util.HashMap, and to support high
      initial insertion rates on an empty table by many threads.
      This map usually acts as a binned (bucketed) hash table.  Each
      key-value mapping is held in a Node.  Most nodes are instances
      of the basic Node class with hash, key, value, and next
      fields. However, various subclasses exist: TreeNodes are
      arranged in balanced trees, not lists.  TreeBins hold the roots
      of sets of TreeNodes. ForwardingNodes are placed at the heads
      of bins during resizing. ReservationNodes are used as
      placeholders while establishing values in computeIfAbsent and
      related methods.  The types TreeBin, ForwardingNode, and
      ReservationNode do not hold normal user keys, values, or
      hashes, and are readily distinguishable during search etc
      because they have negative hash fields and null key and value
      fields. (These special nodes are either uncommon or transient,
      so the impact of carrying around some unused fields is
      insignificant.)
      The table is lazily initialized to a power-of-two size upon the
      first insertion.  Each bin in the table normally contains a
      list of Nodes (most often, the list has only zero or one Node).
      Table accesses require volatile/atomic reads, writes, and
      CASes.  Because there is no other way to arrange this without
      adding further indirections, we use intrinsics
      (sun.misc.Unsafe) operations.
      We use the top (sign) bit of Node hash fields for control
      purposes -- it is available anyway because of addressing
      constraints.  Nodes with negative hash fields are specially
      handled or ignored in map methods.
      Insertion (via put or its variants) of the first node in an
      empty bin is performed by just CASing it to the bin.  This is
      by far the most common case for put operations under most
      key/hash distributions.  Other update operations (insert,
      delete, and replace) require locks.  We do not want to waste
      the space required to associate a distinct lock object with
      each bin, so instead use the first node of a bin list itself as
      a lock. Locking support for these locks relies on builtin
      "synchronized" monitors.
      Using the first node of a list as a lock does not by itself
      suffice though: When a node is locked, any update must first
      validate that it is still the first node after locking it, and
      retry if not. Because new nodes are always appended to lists,
      once a node is first in a bin, it remains first until deleted
      or the bin becomes invalidated (upon resizing).
      The main disadvantage of per-bin locks is that other update
      operations on other nodes in a bin list protected by the same
      lock can stall, for example when user equals() or mapping
      functions take a long time.  However, statistically, under
      random hash codes, this is not a common problem.  Ideally, the
      frequency of nodes in bins follows a Poisson distribution
      (http://en.wikipedia.org/wiki/Poisson_distribution) with a
      parameter of about 0.5 on average, given the resizing threshold
      of 0.75, although with a large variance because of resizing
      granularity. Ignoring variance, the expected occurrences of
      list size k are (exp(-0.5) * pow(0.5, k) / factorial(k)). The
      first values are:
      0:    0.60653066
      1:    0.30326533
      2:    0.07581633
      3:    0.01263606
      4:    0.00157952
      5:    0.00015795
      6:    0.00001316
      7:    0.00000094
      8:    0.00000006
      more: less than 1 in ten million
      Lock contention probability for two threads accessing distinct
      elements is roughly 1 / (8 * #elements) under random hashes.
      Actual hash code distributions encountered in practice
      sometimes deviate significantly from uniform randomness.  This
      includes the case when N &gt; (1&lt;&lt;30), so some keys MUST collide.
      Similarly for dumb or hostile usages in which multiple keys are
      designed to have identical hash codes or ones that differs only
      in masked-out high bits. So we use a secondary strategy that
      applies when the number of nodes in a bin exceeds a
      threshold. These TreeBins use a balanced tree to hold nodes (a
      specialized form of red-black trees), bounding search time to
      O(log N).  Each search step in a TreeBin is at least twice as
      slow as in a regular list, but given that N cannot exceed
      (1&lt;&lt;64) (before running out of addresses) this bounds search
      steps, lock hold times, etc, to reasonable constants (roughly
      100 nodes inspected per operation worst case) so long as keys
      are Comparable (which is very common -- String, Long, etc).
      TreeBin nodes (TreeNodes) also maintain the same "next"
      traversal pointers as regular nodes, so can be traversed in
      iterators in the same way.
      The table is resized when occupancy exceeds a percentage
      threshold (nominally, 0.75, but see below).  Any thread
      noticing an overfull bin may assist in resizing after the
      initiating thread allocates and sets up the replacement array.
      However, rather than stalling, these other threads may proceed
      with insertions etc.  The use of TreeBins shields us from the
      worst case effects of overfilling while resizes are in
      progress.  Resizing proceeds by transferring bins, one by one,
      from the table to the next table. However, threads claim small
      blocks of indices to transfer (via field transferIndex) before
      doing so, reducing contention.  A generation stamp in field
      sizeCtl ensures that resizings do not overlap. Because we are
      using power-of-two expansion, the elements from each bin must
      either stay at same index, or move with a power of two
      offset. We eliminate unnecessary node creation by catching
      cases where old nodes can be reused because their next fields
      won't change.  On average, only about one-sixth of them need
      cloning when a table doubles. The nodes they replace will be
      garbage collectable as soon as they are no longer referenced by
      any reader thread that may be in the midst of concurrently
      traversing table.  Upon transfer, the old table bin contains
      only a special forwarding node (with hash field "MOVED") that
      contains the next table as its key. On encountering a
      forwarding node, access and update operations restart, using
      the new table.
      Each bin transfer requires its bin lock, which can stall
      waiting for locks while resizing. However, because other
      threads can join in and help resize rather than contend for
      locks, average aggregate waits become shorter as resizing
      progresses.  The transfer operation must also ensure that all
      accessible bins in both the old and new table are usable by any
      traversal.  This is arranged in part by proceeding from the
      last bin (table.length - 1) up towards the first.  Upon seeing
      a forwarding node, traversals (see class Traverser) arrange to
      move to the new table without revisiting nodes.  To ensure that
      no intervening nodes are skipped even when moved out of order,
      a stack (see class TableStack) is created on first encounter of
      a forwarding node during a traversal, to maintain its place if
      later processing the current table. The need for these
      save/restore mechanics is relatively rare, but when one
      forwarding node is encountered, typically many more will be.
      So Traversers use a simple caching scheme to avoid creating so
      many new TableStack nodes. (Thanks to Peter Levart for
      suggesting use of a stack here.)
      The traversal scheme also applies to partial traversals of
      ranges of bins (via an alternate Traverser constructor)
      to support partitioned aggregate operations.  Also, read-only
      operations give up if ever forwarded to a null table, which
      provides support for shutdown-style clearing, which is also not
      currently implemented.
      Lazy table initialization minimizes footprint until first use,
      and also avoids resizings when the first operation is from a
      putAll, constructor with map argument, or deserialization.
      These cases attempt to override the initial capacity settings,
      but harmlessly fail to take effect in cases of races.
      The element count is maintained using a specialization of
      LongAdder. We need to incorporate a specialization rather than
      just use a LongAdder in order to access implicit
      contention-sensing that leads to creation of multiple
      CounterCells.  The counter mechanics avoid contention on
      updates but can encounter cache thrashing if read too
      frequently during concurrent access. To avoid reading so often,
      resizing under contention is attempted only upon adding to a
      bin already holding two or more nodes. Under uniform hash
      distributions, the probability of this occurring at threshold
      is around 13%, meaning that only about 1 in 8 puts check
      threshold (and after resizing, many fewer do so).
      TreeBins use a special form of comparison for search and
      related operations (which is the main reason we cannot use
      existing collections such as TreeMaps). TreeBins contain
      Comparable elements, but may contain others, as well as
      elements that are Comparable but not necessarily Comparable for
      the same T, so we cannot invoke compareTo among them. To handle
      this, the tree is ordered primarily by hash value, then by
      Comparable.compareTo order if applicable.  On lookup at a node,
      if elements are not comparable or compare as 0 then both left
      and right children may need to be searched in the case of tied
      hash values. (This corresponds to the full list search that
      would be necessary if all elements were non-Comparable and had
      tied hashes.) On insertion, to keep a total ordering (or as
      close as is required here) across rebalancings, we compare
      classes and identityHashCodes as tie-breakers. The red-black
      balancing code is updated from pre-jdk-collections
      (http://gee.cs.oswego.edu/dl/classes/collections/RBCell.java)
      based in turn on Cormen, Leiserson, and Rivest "Introduction to
      Algorithms" (CLR).
      TreeBins also require an additional locking mechanism.  While
      list traversal is always possible by readers even during
      updates, tree traversal is not, mainly because of tree-rotations
      that may change the root node and/or its linkages.  TreeBins
      include a simple read-write lock mechanism parasitic on the
      main bin-synchronization strategy: Structural adjustments
      associated with an insertion or removal are already bin-locked
      (and so cannot conflict with other writers) but must wait for
      ongoing readers to finish. Since there can be only one such
      waiter, we use a simple scheme using a single "waiter" field to
      block writers.  However, readers need never block.  If the root
      lock is held, they proceed along the slow traversal path (via
      next-pointers) until the lock becomes available or the list is
      exhausted, whichever comes first. These cases are not fast, but
      maximize aggregate expected throughput.
      Maintaining API and serialization compatibility with previous
      versions of this class introduces several oddities. Mainly: We
      leave untouched but unused constructor arguments refering to
      concurrencyLevel. We accept a loadFactor constructor argument,
      but apply it only to initial table capacity (which is the only
      time that we can guarantee to honor it.) We also declare an
      unused "Segment" class that is instantiated in minimal form
      only when serializing.
      Also, solely for compatibility with previous versions of this
      class, it extends AbstractMap, even though all of its methods
      are overridden, so it is just useless baggage.
      This file is organized to make things a little easier to follow
      while reading than they might otherwise: First the main static
      declarations and utilities, then fields, then main public
      methods (with a few factorings of multiple public methods into
      internal ones), then sizing methods, trees, traversers, and
      bulk operations.</div>
<a id="L501" name="L501"></a> 501 
<div class="comment">
     /* ---------------- Constants -------------- */</div>
<a id="L503" name="L503"></a> 503 
<div class="comment">
      The largest possible table capacity.  This value must be
      exactly 1&lt;&lt;30 to stay within Java array allocation and indexing
      bounds for power of two table sizes, and is further required
      because the top two bits of 32bit hash fields are used for
      control purposes.</div>
<a id="L511" name="L511"></a> 511     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAXIMUM_CAPACITY = 1 &lt;&lt; 30;
<a id="L512" name="L512"></a> 512 
<div class="comment">
      The default initial table capacity.  Must be a power of 2
      (i.e., at least 1) and at most MAXIMUM_CAPACITY.</div>
<a id="L517" name="L517"></a> 517     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DEFAULT_CAPACITY = 16;
<a id="L518" name="L518"></a> 518 
<div class="comment">
      The largest possible (non-power of two) array size.
      Needed by toArray and related methods.</div>
<a id="L523" name="L523"></a> 523     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_ARRAY_SIZE = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE - 8;
<a id="L524" name="L524"></a> 524 
<div class="comment">
      The default concurrency level for this table. Unused but
      defined for compatibility with previous versions of this class.</div>
<a id="L529" name="L529"></a> 529     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DEFAULT_CONCURRENCY_LEVEL = 16;
<a id="L530" name="L530"></a> 530 
<div class="comment">
      The load factor for this table. Overrides of this value in
      constructors affect only the initial table capacity.  The
      actual floating point value isn't normally used -- it is
      simpler to use expressions such as <code>n - (n &gt;&gt;&gt; 2)</code> for
      the associated resizing threshold.</div>
<a id="L538" name="L538"></a> 538     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> LOAD_FACTOR = 0.75f;
<a id="L539" name="L539"></a> 539 
<div class="comment">
      The bin count threshold for using a tree rather than list for a
      bin.  Bins are converted to trees when adding an element to a
      bin with at least this many nodes. The value must be greater
      than 2, and should be at least 8 to mesh with assumptions in
      tree removal about conversion back to plain bins upon
      shrinkage.</div>
<a id="L548" name="L548"></a> 548     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TREEIFY_THRESHOLD = 8;
<a id="L549" name="L549"></a> 549 
<div class="comment">
      The bin count threshold for untreeifying a (split) bin during a
      resize operation. Should be less than TREEIFY_THRESHOLD, and at
      most 6 to mesh with shrinkage detection under removal.</div>
<a id="L555" name="L555"></a> 555     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> UNTREEIFY_THRESHOLD = 6;
<a id="L556" name="L556"></a> 556 
<div class="comment">
      The smallest table capacity for which bins may be treeified.
      (Otherwise the table is resized if too many nodes in a bin.)
      The value should be at least 4 * TREEIFY_THRESHOLD to avoid
      conflicts between resizing and treeification thresholds.</div>
<a id="L563" name="L563"></a> 563     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MIN_TREEIFY_CAPACITY = 64;
<a id="L564" name="L564"></a> 564 
<div class="comment">
      Minimum number of rebinnings per transfer step. Ranges are
      subdivided to allow multiple resizer threads.  This value
      serves as a lower bound to avoid resizers encountering
      excessive memory contention.  The value should be at least
      DEFAULT_CAPACITY.</div>
<a id="L572" name="L572"></a> 572     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MIN_TRANSFER_STRIDE = 16;
<a id="L573" name="L573"></a> 573 
<div class="comment">
      The number of bits used for generation stamp in sizeCtl.
      Must be at least 6 for 32bit arrays.</div>
<a id="L578" name="L578"></a> 578     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> RESIZE_STAMP_BITS = 16;
<a id="L579" name="L579"></a> 579 
<div class="comment">
      The maximum number of threads that can help resize.
      Must fit in 32 - RESIZE_STAMP_BITS bits.</div>
<a id="L584" name="L584"></a> 584     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_RESIZERS = (1 &lt;&lt; (32 - RESIZE_STAMP_BITS)) - 1;
<a id="L585" name="L585"></a> 585 
<div class="comment">
      The bit shift for recording size stamp in sizeCtl.</div>
<a id="L589" name="L589"></a> 589     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS;
<a id="L590" name="L590"></a> 590 
<div class="comment">
      Encodings for Node hash fields. See above for explanation.</div>
<a id="L594" name="L594"></a> 594     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MOVED     = -1; <em class="comment">// hash for forwarding nodes</em>
<a id="L595" name="L595"></a> 595     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TREEBIN   = -2; <em class="comment">// hash for roots of trees</em>
<a id="L596" name="L596"></a> 596     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> RESERVED  = -3; <em class="comment">// hash for transient reservations</em>
<a id="L597" name="L597"></a> 597     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> HASH_BITS = 0x7fffffff; <em class="comment">// usable bits of normal node hash</em>
<a id="L598" name="L598"></a> 598 
<div class="comment">
     /** Number of CPUS, to place bounds on some sizings */</div>
<a id="L600" name="L600"></a> 600     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NCPU = <a href="../S/1774.html#L46" title="Defined at 46 in src/java/lang/Runtime.java.">Runtime</a>.<a href="../S/1774.html#L57" title="Defined at 57 in src/java/lang/Runtime.java.">getRuntime</a>().<a href="../S/1774.html#L635" title="Defined at 635 in src/java/lang/Runtime.java.">availableProcessors</a>();
<a id="L601" name="L601"></a> 601 
<div class="comment">
     /** For serialization compatibility. */</div>
<a id="L603" name="L603"></a> 603     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] serialPersistentFields = <em class="brace">{</em>
<a id="L604" name="L604"></a> 604         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("segments", <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>[].<strong class="reserved">class</strong>),
<a id="L605" name="L605"></a> 605         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("segmentMask", <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.TYPE),
<a id="L606" name="L606"></a> 606         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("segmentShift", <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.TYPE)
<a id="L607" name="L607"></a> 607     <em class="brace">}</em>;
<a id="L608" name="L608"></a> 608 
<div class="comment">
     /* ---------------- Nodes -------------- */</div>
<a id="L610" name="L610"></a> 610 
<div class="comment">
      Key-value entry.  This class is never exported out as a
      user-mutable Map.Entry (i.e., one supporting setValue; see
      MapEntry below), but can be used for read-only traversals used
      in bulk tasks.  Subclasses of Node with a negative hash field
      are special, and contain null keys and values (but are never
      exported).  Otherwise, keys and vals are never null.</div>
<a id="L619" name="L619"></a> 619     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/5542.html" title="Multiple referred from 4060 places.">Node</a>&lt;K,V&gt; <strong class="reserved">implements</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L620" name="L620"></a> 620         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L621" name="L621"></a> 621         <strong class="reserved">final</strong> K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L622" name="L622"></a> 622         <strong class="reserved">volatile</strong> V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L623" name="L623"></a> 623         <strong class="reserved">volatile</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L624" name="L624"></a> 624 
<a id="L625" name="L625"></a> 625         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>(<strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, Node&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L626" name="L626"></a> 626             <strong class="reserved">this</strong>.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L627" name="L627"></a> 627             <strong class="reserved">this</strong>.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L628" name="L628"></a> 628             <strong class="reserved">this</strong>.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L629" name="L629"></a> 629             <strong class="reserved">this</strong>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L630" name="L630"></a> 630         <em class="brace">}</em>
<a id="L631" name="L631"></a> 631 
<a id="L632" name="L632"></a> 632         <strong class="reserved">public</strong> <strong class="reserved">final</strong> K <a href="../R/17222.html" title="Multiple referred from 269 places.">getKey</a>()       <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>; <em class="brace">}</em>
<a id="L633" name="L633"></a> 633         <strong class="reserved">public</strong> <strong class="reserved">final</strong> V <a href="../R/19753.html" title="Multiple referred from 961 places.">getValue</a>()     <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>; <em class="brace">}</em>
<a id="L634" name="L634"></a> 634         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>()   <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() ^ <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>(); <em class="brace">}</em>
<a id="L635" name="L635"></a> 635         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>()<em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> + "=" + <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>; <em class="brace">}</em>
<a id="L636" name="L636"></a> 636         <strong class="reserved">public</strong> <strong class="reserved">final</strong> V <a href="../R/28371.html" title="Multiple referred from 200 places.">setValue</a>(V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L637" name="L637"></a> 637             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L638" name="L638"></a> 638         <em class="brace">}</em>
<a id="L639" name="L639"></a> 639 
<a id="L640" name="L640"></a> 640         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L641" name="L641"></a> 641             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k, v, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>; <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt; e;
<a id="L642" name="L642"></a> 642             <strong class="reserved">return</strong> ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>) &amp;&amp;
<a id="L643" name="L643"></a> 643                     (k = (e = (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt;)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L644" name="L644"></a> 644                     (v = e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L645" name="L645"></a> 645                     (k == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> || k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) &amp;&amp;
<a id="L646" name="L646"></a> 646                     (v == (<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) || v.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>)));
<a id="L647" name="L647"></a> 647         <em class="brace">}</em>
<a id="L648" name="L648"></a> 648 
<div class="comment">
          Virtualized support for map.get(); overridden in subclasses.</div>
<a id="L652" name="L652"></a> 652         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/14339.html" title="Multiple referred from 69 places.">find</a>(<strong class="reserved">int</strong> h, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k) <em class="brace">{</em>
<a id="L653" name="L653"></a> 653             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = <strong class="reserved">this</strong>;
<a id="L654" name="L654"></a> 654             <strong class="reserved">if</strong> (k != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L655" name="L655"></a> 655                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L656" name="L656"></a> 656                     K ek;
<a id="L657" name="L657"></a> 657                     <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L658" name="L658"></a> 658                         ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == k || (ek != <strong class="reserved">null</strong> &amp;&amp; k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek))))
<a id="L659" name="L659"></a> 659                         <strong class="reserved">return</strong> e;
<a id="L660" name="L660"></a> 660                 <em class="brace">}</em> <strong class="reserved">while</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) != <strong class="reserved">null</strong>);
<a id="L661" name="L661"></a> 661             <em class="brace">}</em>
<a id="L662" name="L662"></a> 662             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L663" name="L663"></a> 663         <em class="brace">}</em>
<a id="L664" name="L664"></a> 664     <em class="brace">}</em>
<a id="L665" name="L665"></a> 665 
<div class="comment">
     /* ---------------- Static utilities -------------- */</div>
<a id="L667" name="L667"></a> 667 
<div class="comment">
      Spreads (XORs) higher bits of hash to lower and also forces top
      bit to 0. Because the table uses power-of-two masking, sets of
      hashes that vary only in bits above the current mask will
      always collide. (Among known examples are sets of Float keys
      holding consecutive whole numbers in small tables.)  So we
      apply a transform that spreads the impact of higher bits
      downward. There is a tradeoff between speed, utility, and
      quality of bit-spreading. Because many common sets of hashes
      are already reasonably distributed (so don't benefit from
      spreading), and because we use trees to handle large sets of
      collisions in bins, we just XOR some shifted bits in the
      cheapest possible way to reduce systematic lossage, as well as
      to incorporate impact of the highest bits that would otherwise
      never be used in index calculations because of table bounds.</div>
<a id="L684" name="L684"></a> 684     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/28764.html" title="Multiple referred from 17 places.">spread</a>(<strong class="reserved">int</strong> h) <em class="brace">{</em>
<a id="L685" name="L685"></a> 685         <strong class="reserved">return</strong> (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS;
<a id="L686" name="L686"></a> 686     <em class="brace">}</em>
<a id="L687" name="L687"></a> 687 
<div class="comment">
      Returns a power of two table size for the given desired capacity.
      See Hackers Delight, sec 3.2</div>
<a id="L692" name="L692"></a> 692     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/29103.html" title="Multiple referred from 7 places.">tableSizeFor</a>(<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L693" name="L693"></a> 693         <strong class="reserved">int</strong> n = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> - 1;
<a id="L694" name="L694"></a> 694         n |= n &gt;&gt;&gt; 1;
<a id="L695" name="L695"></a> 695         n |= n &gt;&gt;&gt; 2;
<a id="L696" name="L696"></a> 696         n |= n &gt;&gt;&gt; 4;
<a id="L697" name="L697"></a> 697         n |= n &gt;&gt;&gt; 8;
<a id="L698" name="L698"></a> 698         n |= n &gt;&gt;&gt; 16;
<a id="L699" name="L699"></a> 699         <strong class="reserved">return</strong> (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;
<a id="L700" name="L700"></a> 700     <em class="brace">}</em>
<a id="L701" name="L701"></a> 701 
<div class="comment">
      Returns x's Class if it is of the form "class C implements
      Comparable<c>", else null.</c></div>
<a id="L706" name="L706"></a> 706     <strong class="reserved">static</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/11688.html" title="Multiple referred from 6 places.">comparableClassFor</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L707" name="L707"></a> 707         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> <strong class="reserved">instanceof</strong> <a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>) <em class="brace">{</em>
<a id="L708" name="L708"></a> 708             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>; <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] ts, as; <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t; <a href="../D/6610.html" title="Multiple defined in 2 places.">ParameterizedType</a> p;
<a id="L709" name="L709"></a> 709             <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>()) == <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong>) <em class="comment">// bypass checks</em>
<a id="L710" name="L710"></a> 710                 <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L711" name="L711"></a> 711             <strong class="reserved">if</strong> ((ts = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1722.html#L911" title="Defined at 911 in src/java/lang/Class.java.">getGenericInterfaces</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L712" name="L712"></a> 712                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ts.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; ++i) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713                     <strong class="reserved">if</strong> (((t = ts[i]) <strong class="reserved">instanceof</strong> <a href="../D/6610.html" title="Multiple defined in 2 places.">ParameterizedType</a>) &amp;&amp;
<a id="L714" name="L714"></a> 714                         ((p = (<a href="../D/6610.html" title="Multiple defined in 2 places.">ParameterizedType</a>)t).<a href="../S/1668.html#L75" title="Defined at 75 in src/java/lang/reflect/ParameterizedType.java.">getRawType</a>() ==
<a id="L715" name="L715"></a> 715                          <a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>.<strong class="reserved">class</strong>) &amp;&amp;
<a id="L716" name="L716"></a> 716                         (as = p.<a href="../S/1668.html#L65" title="Defined at 65 in src/java/lang/reflect/ParameterizedType.java.">getActualTypeArguments</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L717" name="L717"></a> 717                         as.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 1 &amp;&amp; as[0] == <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="comment">// type arg is c</em>
<a id="L718" name="L718"></a> 718                         <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L719" name="L719"></a> 719                 <em class="brace">}</em>
<a id="L720" name="L720"></a> 720             <em class="brace">}</em>
<a id="L721" name="L721"></a> 721         <em class="brace">}</em>
<a id="L722" name="L722"></a> 722         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L723" name="L723"></a> 723     <em class="brace">}</em>
<a id="L724" name="L724"></a> 724 
<div class="comment">
      Returns k.compareTo(x) if x matches kc (k's screened comparable
      class), else 0.</div>
<a id="L729" name="L729"></a> 729     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>(<em class="brace">{</em>"rawtypes","unchecked"<em class="brace">}</em>) <em class="comment">// for cast to Comparable</em>
<a id="L730" name="L730"></a> 730     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11706.html" title="Multiple referred from 6 places.">compareComparables</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; kc, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L731" name="L731"></a> 731         <strong class="reserved">return</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == <strong class="reserved">null</strong> || <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>() != kc ? 0 :
<a id="L732" name="L732"></a> 732                 ((<a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>)k).<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>));
<a id="L733" name="L733"></a> 733     <em class="brace">}</em>
<a id="L734" name="L734"></a> 734 
<div class="comment">
     /* ---------------- Table element access -------------- */</div>
<a id="L736" name="L736"></a> 736 
<div class="comment">
      Volatile access methods are used for table elements as well as
      elements of in-progress next table while resizing.  All uses of
      the tab arguments must be null checked by callers.  All callers
      also paranoically precheck that tab's length is not zero (or an
      equivalent check), thus ensuring that any index argument taking
      the form of a hash value anded with (length - 1) is a valid
      index.  Note that, to be correct wrt arbitrary concurrency
      errors by users, these checks must operate on local variables,
      which accounts for some odd-looking inline assignments below.
      Note that calls to setTabAt always occur within locked regions,
      and so in principle require only release ordering, not
      full volatile semantics, but are currently coded as volatile
      writes to be conservative.</div>
<a id="L752" name="L752"></a> 752 
<a id="L753" name="L753"></a> 753     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L754" name="L754"></a> 754     <strong class="reserved">static</strong> <strong class="reserved">final</strong> &lt;K,V&gt; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/29098.html" title="Multiple referred from 23 places.">tabAt</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L755" name="L755"></a> 755         <strong class="reserved">return</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;)U.getObjectVolatile(tab, ((<strong class="reserved">long</strong>)i &lt;&lt; ASHIFT) + ABASE);
<a id="L756" name="L756"></a> 756     <em class="brace">}</em>
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758     <strong class="reserved">static</strong> <strong class="reserved">final</strong> &lt;K,V&gt; <strong class="reserved">boolean</strong> <a href="../R/10992.html" title="Multiple referred from 5 places.">casTabAt</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> i,
<a id="L759" name="L759"></a> 759                                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; v) <em class="brace">{</em>
<a id="L760" name="L760"></a> 760         <strong class="reserved">return</strong> U.compareAndSwapObject(tab, ((<strong class="reserved">long</strong>)i &lt;&lt; ASHIFT) + ABASE, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, v);
<a id="L761" name="L761"></a> 761     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762 
<a id="L763" name="L763"></a> 763     <strong class="reserved">static</strong> <strong class="reserved">final</strong> &lt;K,V&gt; <strong class="reserved">void</strong> <a href="../R/28254.html" title="Multiple referred from 20 places.">setTabAt</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> i, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; v) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764         U.putObjectVolatile(tab, ((<strong class="reserved">long</strong>)i &lt;&lt; ASHIFT) + ABASE, v);
<a id="L765" name="L765"></a> 765     <em class="brace">}</em>
<a id="L766" name="L766"></a> 766 
<div class="comment">
     /* ---------------- Fields -------------- */</div>
<a id="L768" name="L768"></a> 768 
<div class="comment">
      The array of bins. Lazily initialized upon first insertion.
      Size is always a power of two. Accessed directly by iterators.</div>
<a id="L773" name="L773"></a> 773     <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] table;
<a id="L774" name="L774"></a> 774 
<div class="comment">
      The next table to use; non-null only while resizing.</div>
<a id="L778" name="L778"></a> 778     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nextTable;
<a id="L779" name="L779"></a> 779 
<div class="comment">
      Base counter value, used mainly when there is no contention,
      but also as a fallback during table initialization
      races. Updated via CAS.</div>
<a id="L785" name="L785"></a> 785     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <strong class="reserved">long</strong> baseCount;
<a id="L786" name="L786"></a> 786 
<div class="comment">
      Table initialization and resizing control.  When negative, the
      table is being initialized or resized: -1 for initialization,
      else -(1 + the number of active resizing threads).  Otherwise,
      when table is null, holds the initial table size to use upon
      creation, or 0 for default. After initialization, holds the
      next element count value upon which to resize the table.</div>
<a id="L795" name="L795"></a> 795     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <strong class="reserved">int</strong> sizeCtl;
<a id="L796" name="L796"></a> 796 
<div class="comment">
      The next table index (plus one) to split while resizing.</div>
<a id="L800" name="L800"></a> 800     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <strong class="reserved">int</strong> transferIndex;
<a id="L801" name="L801"></a> 801 
<div class="comment">
      Spinlock (locked via CAS) used when resizing and/or creating CounterCells.</div>
<a id="L805" name="L805"></a> 805     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <strong class="reserved">int</strong> cellsBusy;
<a id="L806" name="L806"></a> 806 
<div class="comment">
      Table of counter cells. When non-null, size is a power of 2.</div>
<a id="L810" name="L810"></a> 810     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">volatile</strong> <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] counterCells;
<a id="L811" name="L811"></a> 811 
<a id="L812" name="L812"></a> 812     <em class="comment">// views</em>
<a id="L813" name="L813"></a> 813     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,V&gt; <a href="../D/26719.html" title="Multiple defined in 33 places.">keySet</a>;
<a id="L814" name="L814"></a> 814     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/1074.html#L4659" title="Defined at 4659 in src/java/util/concurrent/ConcurrentHashMap.java.">ValuesView</a>&lt;K,V&gt; <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>;
<a id="L815" name="L815"></a> 815     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/2931.html" title="Multiple defined in 2 places.">EntrySetView</a>&lt;K,V&gt; <a href="../D/15653.html" title="Multiple defined in 34 places.">entrySet</a>;
<a id="L816" name="L816"></a> 816 
<a id="L817" name="L817"></a> 817 
<div class="comment">
     /* ---------------- Public operations -------------- */</div>
<a id="L819" name="L819"></a> 819 
<div class="comment">
      Creates a new, empty map with the default initial table size (16).</div>
<a id="L823" name="L823"></a> 823     <strong class="reserved">public</strong> ConcurrentHashMap() <em class="brace">{</em>
<a id="L824" name="L824"></a> 824     <em class="brace">}</em>
<a id="L825" name="L825"></a> 825 
<div class="comment">
      Creates a new, empty map with an initial table size
      accommodating the specified number of elements without the need
      to dynamically resize.
      @param initialCapacity The implementation performs internal
      sizing to accommodate this many elements.
      @throws IllegalArgumentException if the initial capacity of
      elements is negative</div>
<a id="L836" name="L836"></a> 836     <strong class="reserved">public</strong> ConcurrentHashMap(<strong class="reserved">int</strong> initialCapacity) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837         <strong class="reserved">if</strong> (initialCapacity &lt; 0)
<a id="L838" name="L838"></a> 838             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L839" name="L839"></a> 839         <strong class="reserved">int</strong> cap = ((initialCapacity &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ?
<a id="L840" name="L840"></a> 840                    MAXIMUM_CAPACITY :
<a id="L841" name="L841"></a> 841                    <a href="../D/35202.html" title="Multiple defined in 2 places.">tableSizeFor</a>(initialCapacity + (initialCapacity &gt;&gt;&gt; 1) + 1));
<a id="L842" name="L842"></a> 842         <strong class="reserved">this</strong>.sizeCtl = cap;
<a id="L843" name="L843"></a> 843     <em class="brace">}</em>
<a id="L844" name="L844"></a> 844 
<div class="comment">
      Creates a new map with the same mappings as the given map.
      @param m the map</div>
<a id="L850" name="L850"></a> 850     <strong class="reserved">public</strong> ConcurrentHashMap(<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;? <strong class="reserved">extends</strong> K, ? <strong class="reserved">extends</strong> V&gt; m) <em class="brace">{</em>
<a id="L851" name="L851"></a> 851         <strong class="reserved">this</strong>.sizeCtl = DEFAULT_CAPACITY;
<a id="L852" name="L852"></a> 852         <a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(m);
<a id="L853" name="L853"></a> 853     <em class="brace">}</em>
<a id="L854" name="L854"></a> 854 
<div class="comment">
      Creates a new, empty map with an initial table size based on
      the given number of elements (<code>initialCapacity</code>) and
      initial table density (<code>loadFactor</code>).
      @param initialCapacity the initial capacity. The implementation
      performs internal sizing to accommodate this many elements,
      given the specified load factor.
      @param loadFactor the load factor (table density) for
      establishing the initial table size
      @throws IllegalArgumentException if the initial capacity of
      elements is negative or the load factor is nonpositive
      @since 1.6</div>
<a id="L870" name="L870"></a> 870     <strong class="reserved">public</strong> ConcurrentHashMap(<strong class="reserved">int</strong> initialCapacity, <strong class="reserved">float</strong> <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>) <em class="brace">{</em>
<a id="L871" name="L871"></a> 871         <strong class="reserved">this</strong>(initialCapacity, <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>, 1);
<a id="L872" name="L872"></a> 872     <em class="brace">}</em>
<a id="L873" name="L873"></a> 873 
<div class="comment">
      Creates a new, empty map with an initial table size based on
      the given number of elements (<code>initialCapacity</code>), table
      density (<code>loadFactor</code>), and number of concurrently
      updating threads (<code>concurrencyLevel</code>).
      @param initialCapacity the initial capacity. The implementation
      performs internal sizing to accommodate this many elements,
      given the specified load factor.
      @param loadFactor the load factor (table density) for
      establishing the initial table size
      @param concurrencyLevel the estimated number of concurrently
      updating threads. The implementation may use this value as
      a sizing hint.
      @throws IllegalArgumentException if the initial capacity is
      negative or the load factor or concurrencyLevel are
      nonpositive</div>
<a id="L892" name="L892"></a> 892     <strong class="reserved">public</strong> ConcurrentHashMap(<strong class="reserved">int</strong> initialCapacity,
<a id="L893" name="L893"></a> 893                              <strong class="reserved">float</strong> <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>, <strong class="reserved">int</strong> concurrencyLevel) <em class="brace">{</em>
<a id="L894" name="L894"></a> 894         <strong class="reserved">if</strong> (!(<a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a> &gt; 0.0f) || initialCapacity &lt; 0 || concurrencyLevel &lt;= 0)
<a id="L895" name="L895"></a> 895             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L896" name="L896"></a> 896         <strong class="reserved">if</strong> (initialCapacity &lt; concurrencyLevel)   <em class="comment">// Use at least as many bins</em>
<a id="L897" name="L897"></a> 897             initialCapacity = concurrencyLevel;   <em class="comment">// as estimated threads</em>
<a id="L898" name="L898"></a> 898         <strong class="reserved">long</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = (<strong class="reserved">long</strong>)(1.0 + (<strong class="reserved">long</strong>)initialCapacity / <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>);
<a id="L899" name="L899"></a> 899         <strong class="reserved">int</strong> cap = (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= (<strong class="reserved">long</strong>)MAXIMUM_CAPACITY) ?
<a id="L900" name="L900"></a> 900             MAXIMUM_CAPACITY : <a href="../D/35202.html" title="Multiple defined in 2 places.">tableSizeFor</a>((<strong class="reserved">int</strong>)<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L901" name="L901"></a> 901         <strong class="reserved">this</strong>.sizeCtl = cap;
<a id="L902" name="L902"></a> 902     <em class="brace">}</em>
<a id="L903" name="L903"></a> 903 
<a id="L904" name="L904"></a> 904     <em class="comment">// Original (since JDK1.2) Map methods</em>
<a id="L905" name="L905"></a> 905 
<div class="comment">
      {@inheritDoc}</div>
<a id="L909" name="L909"></a> 909     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L910" name="L910"></a> 910         <strong class="reserved">long</strong> n = <a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L911" name="L911"></a> 911         <strong class="reserved">return</strong> ((n &lt; 0L) ? 0 :
<a id="L912" name="L912"></a> 912                 (n &gt; (<strong class="reserved">long</strong>)<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE) ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE :
<a id="L913" name="L913"></a> 913                 (<strong class="reserved">int</strong>)n);
<a id="L914" name="L914"></a> 914     <em class="brace">}</em>
<a id="L915" name="L915"></a> 915 
<div class="comment">
      {@inheritDoc}</div>
<a id="L919" name="L919"></a> 919     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21404.html" title="Multiple referred from 435 places.">isEmpty</a>() <em class="brace">{</em>
<a id="L920" name="L920"></a> 920         <strong class="reserved">return</strong> <a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>() &lt;= 0L; <em class="comment">// ignore transient negative values</em>
<a id="L921" name="L921"></a> 921     <em class="brace">}</em>
<a id="L922" name="L922"></a> 922 
<div class="comment">
      Returns the value to which the specified key is mapped,
      or <code>null</code> if this map contains no mapping for the key.
      <p>More formally, if this map contains a mapping from a key
      <code>k</code> to a value <code>v</code> such that <code>key.equals(k)</code>,
      then this method returns <code>v</code>; otherwise it returns
      <code>null</code>.  (There can be at most one such mapping.)
      @throws NullPointerException if the specified key is null</p></div>
<a id="L934" name="L934"></a> 934     <strong class="reserved">public</strong> V <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L935" name="L935"></a> 935         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e, p; <strong class="reserved">int</strong> n, eh; K ek;
<a id="L936" name="L936"></a> 936         <strong class="reserved">int</strong> h = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L937" name="L937"></a> 937         <strong class="reserved">if</strong> ((tab = table) != <strong class="reserved">null</strong> &amp;&amp; (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &gt; 0 &amp;&amp;
<a id="L938" name="L938"></a> 938             (e = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, (n - 1) &amp; h)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L939" name="L939"></a> 939             <strong class="reserved">if</strong> ((eh = e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == h) <em class="brace">{</em>
<a id="L940" name="L940"></a> 940                 <strong class="reserved">if</strong> ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> || (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))
<a id="L941" name="L941"></a> 941                     <strong class="reserved">return</strong> e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L942" name="L942"></a> 942             <em class="brace">}</em>
<a id="L943" name="L943"></a> 943             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (eh &lt; 0)
<a id="L944" name="L944"></a> 944                 <strong class="reserved">return</strong> (p = e.<a href="../D/16082.html" title="Multiple defined in 26 places.">find</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong> ? p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> : <strong class="reserved">null</strong>;
<a id="L945" name="L945"></a> 945             <strong class="reserved">while</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L946" name="L946"></a> 946                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L947" name="L947"></a> 947                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> || (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek))))
<a id="L948" name="L948"></a> 948                     <strong class="reserved">return</strong> e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L949" name="L949"></a> 949             <em class="brace">}</em>
<a id="L950" name="L950"></a> 950         <em class="brace">}</em>
<a id="L951" name="L951"></a> 951         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L952" name="L952"></a> 952     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953 
<div class="comment">
      Tests if the specified object is a key in this table.
      @param  key possible key
      @return <code>true</code> if and only if the specified object
              is a key in this table, as determined by the
              <code>equals</code> method; <code>false</code> otherwise
      @throws NullPointerException if the specified key is null</div>
<a id="L963" name="L963"></a> 963     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11964.html" title="Multiple referred from 263 places.">containsKey</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964         <strong class="reserved">return</strong> <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) != <strong class="reserved">null</strong>;
<a id="L965" name="L965"></a> 965     <em class="brace">}</em>
<a id="L966" name="L966"></a> 966 
<div class="comment">
      Returns <code>true</code> if this map maps one or more keys to the
      specified value. Note: This method may require a full traversal
      of the map, and is much slower than method <code>containsKey</code>.
      @param value value whose presence in this map is to be tested
      @return <code>true</code> if this map maps one or more keys to the
              specified value
      @throws NullPointerException if the specified value is null</div>
<a id="L977" name="L977"></a> 977     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11980.html" title="Multiple referred from 28 places.">containsValue</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L978" name="L978"></a> 978         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>)
<a id="L979" name="L979"></a> 979             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L980" name="L980"></a> 980         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L981" name="L981"></a> 981         <strong class="reserved">if</strong> ((t = table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L982" name="L982"></a> 982             <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L983" name="L983"></a> 983             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L984" name="L984"></a> 984                 V v;
<a id="L985" name="L985"></a> 985                 <strong class="reserved">if</strong> ((v = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) == <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> || (v != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(v)))
<a id="L986" name="L986"></a> 986                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L987" name="L987"></a> 987             <em class="brace">}</em>
<a id="L988" name="L988"></a> 988         <em class="brace">}</em>
<a id="L989" name="L989"></a> 989         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L990" name="L990"></a> 990     <em class="brace">}</em>
<a id="L991" name="L991"></a> 991 
<div class="comment">
      Maps the specified key to the specified value in this table.
      Neither the key nor the value can be null.
      <p>The value can be retrieved by calling the <code>get</code> method
      with a key that is equal to the original key.
      @param key key with which the specified value is to be associated
      @param value value to be associated with the specified key
      @return the previous value associated with <code>key</code>, or
              <code>null</code> if there was no mapping for <code>key</code>
      @throws NullPointerException if the specified key or value is null</p></div>
<a id="L1005" name="L1005"></a>1005     <strong class="reserved">public</strong> V <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006         <strong class="reserved">return</strong> <a href="../D/30050.html" title="Multiple defined in 2 places.">putVal</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">false</strong>);
<a id="L1007" name="L1007"></a>1007     <em class="brace">}</em>
<a id="L1008" name="L1008"></a>1008 
<div class="comment">
     /** Implementation for put and putIfAbsent */</div>
<a id="L1010" name="L1010"></a>1010     <strong class="reserved">final</strong> V <a href="../R/25357.html" title="Multiple referred from 10 places.">putVal</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">boolean</strong> onlyIfAbsent) <em class="brace">{</em>
<a id="L1011" name="L1011"></a>1011         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1012" name="L1012"></a>1012         <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L1013" name="L1013"></a>1013         <strong class="reserved">int</strong> binCount = 0;
<a id="L1014" name="L1014"></a>1014         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;;) <em class="brace">{</em>
<a id="L1015" name="L1015"></a>1015             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> n, i, fh;
<a id="L1016" name="L1016"></a>1016             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0)
<a id="L1017" name="L1017"></a>1017                 tab = <a href="../S/1074.html#L2223" title="Defined at 2223 in src/java/util/concurrent/ConcurrentHashMap.java.">initTable</a>();
<a id="L1018" name="L1018"></a>1018             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i = (n - 1) &amp; <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1019" name="L1019"></a>1019                 <strong class="reserved">if</strong> (<a href="../S/1074.html#L758" title="Defined at 758 in src/java/util/concurrent/ConcurrentHashMap.java.">casTabAt</a>(tab, i, <strong class="reserved">null</strong>,
<a id="L1020" name="L1020"></a>1020                              <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">null</strong>)))
<a id="L1021" name="L1021"></a>1021                     <strong class="reserved">break</strong>;                   <em class="comment">// no lock when adding to empty bin</em>
<a id="L1022" name="L1022"></a>1022             <em class="brace">}</em>
<a id="L1023" name="L1023"></a>1023             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L1024" name="L1024"></a>1024                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1025" name="L1025"></a>1025             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1026" name="L1026"></a>1026                 V oldVal = <strong class="reserved">null</strong>;
<a id="L1027" name="L1027"></a>1027                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1028" name="L1028"></a>1028                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1029" name="L1029"></a>1029                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L1030" name="L1030"></a>1030                             binCount = 1;
<a id="L1031" name="L1031"></a>1031                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = f;; ++binCount) <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032                                 K ek;
<a id="L1033" name="L1033"></a>1033                                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp;&amp;
<a id="L1034" name="L1034"></a>1034                                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> ||
<a id="L1035" name="L1035"></a>1035                                      (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036                                     oldVal = e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1037" name="L1037"></a>1037                                     <strong class="reserved">if</strong> (!onlyIfAbsent)
<a id="L1038" name="L1038"></a>1038                                         e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1039" name="L1039"></a>1039                                     <strong class="reserved">break</strong>;
<a id="L1040" name="L1040"></a>1040                                 <em class="brace">}</em>
<a id="L1041" name="L1041"></a>1041                                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = e;
<a id="L1042" name="L1042"></a>1042                                 <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1043" name="L1043"></a>1043                                     <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>,
<a id="L1044" name="L1044"></a>1044                                                               <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">null</strong>);
<a id="L1045" name="L1045"></a>1045                                     <strong class="reserved">break</strong>;
<a id="L1046" name="L1046"></a>1046                                 <em class="brace">}</em>
<a id="L1047" name="L1047"></a>1047                             <em class="brace">}</em>
<a id="L1048" name="L1048"></a>1048                         <em class="brace">}</em>
<a id="L1049" name="L1049"></a>1049                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L1050" name="L1050"></a>1050                             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L1051" name="L1051"></a>1051                             binCount = 2;
<a id="L1052" name="L1052"></a>1052                             <strong class="reserved">if</strong> ((p = ((<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f).<a href="../D/30049.html" title="Multiple defined in 2 places.">putTreeVal</a>(<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>,
<a id="L1053" name="L1053"></a>1053                                                            <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1054" name="L1054"></a>1054                                 oldVal = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1055" name="L1055"></a>1055                                 <strong class="reserved">if</strong> (!onlyIfAbsent)
<a id="L1056" name="L1056"></a>1056                                     p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1057" name="L1057"></a>1057                             <em class="brace">}</em>
<a id="L1058" name="L1058"></a>1058                         <em class="brace">}</em>
<a id="L1059" name="L1059"></a>1059                     <em class="brace">}</em>
<a id="L1060" name="L1060"></a>1060                 <em class="brace">}</em>
<a id="L1061" name="L1061"></a>1061                 <strong class="reserved">if</strong> (binCount != 0) <em class="brace">{</em>
<a id="L1062" name="L1062"></a>1062                     <strong class="reserved">if</strong> (binCount &gt;= TREEIFY_THRESHOLD)
<a id="L1063" name="L1063"></a>1063                         <a href="../D/35695.html" title="Multiple defined in 2 places.">treeifyBin</a>(tab, i);
<a id="L1064" name="L1064"></a>1064                     <strong class="reserved">if</strong> (oldVal != <strong class="reserved">null</strong>)
<a id="L1065" name="L1065"></a>1065                         <strong class="reserved">return</strong> oldVal;
<a id="L1066" name="L1066"></a>1066                     <strong class="reserved">break</strong>;
<a id="L1067" name="L1067"></a>1067                 <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068             <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069         <em class="brace">}</em>
<a id="L1070" name="L1070"></a>1070         <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>(1L, binCount);
<a id="L1071" name="L1071"></a>1071         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1072" name="L1072"></a>1072     <em class="brace">}</em>
<a id="L1073" name="L1073"></a>1073 
<div class="comment">
      Copies all of the mappings from the specified map to this one.
      These mappings replace any mappings that this map had for any of the
      keys currently in the specified map.
      @param m mappings to be stored in this map</div>
<a id="L1081" name="L1081"></a>1081     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25286.html" title="Multiple referred from 45 places.">putAll</a>(<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;? <strong class="reserved">extends</strong> K, ? <strong class="reserved">extends</strong> V&gt; m) <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082         <a href="../S/1074.html#L2322" title="Defined at 2322 in src/java/util/concurrent/ConcurrentHashMap.java.">tryPresize</a>(m.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());
<a id="L1083" name="L1083"></a>1083         <strong class="reserved">for</strong> (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;? <strong class="reserved">extends</strong> K, ? <strong class="reserved">extends</strong> V&gt; e : m.<a href="../D/15653.html" title="Multiple defined in 34 places.">entrySet</a>())
<a id="L1084" name="L1084"></a>1084             <a href="../D/30050.html" title="Multiple defined in 2 places.">putVal</a>(e.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>(), e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(), <strong class="reserved">false</strong>);
<a id="L1085" name="L1085"></a>1085     <em class="brace">}</em>
<a id="L1086" name="L1086"></a>1086 
<div class="comment">
      Removes the key (and its corresponding value) from this map.
      This method does nothing if the key is not in the map.
      @param  key the key that needs to be removed
      @return the previous value associated with <code>key</code>, or
              <code>null</code> if there was no mapping for <code>key</code>
      @throws NullPointerException if the specified key is null</div>
<a id="L1096" name="L1096"></a>1096     <strong class="reserved">public</strong> V <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097         <strong class="reserved">return</strong> <a href="../S/1074.html#L1105" title="Defined at 1105 in src/java/util/concurrent/ConcurrentHashMap.java.">replaceNode</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L1098" name="L1098"></a>1098     <em class="brace">}</em>
<a id="L1099" name="L1099"></a>1099 
<div class="comment">
      Implementation for the four public remove/replace methods:
      Replaces node value with v, conditional upon match of cv if
      non-null.  If resulting value is null, delete.</div>
<a id="L1105" name="L1105"></a>1105     <strong class="reserved">final</strong> V <a href="../R/26157.html" title="Multiple referred from 6 places.">replaceNode</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> cv) <em class="brace">{</em>
<a id="L1106" name="L1106"></a>1106         <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L1107" name="L1107"></a>1107         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;;) <em class="brace">{</em>
<a id="L1108" name="L1108"></a>1108             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> n, i, fh;
<a id="L1109" name="L1109"></a>1109             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0 ||
<a id="L1110" name="L1110"></a>1110                 (f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i = (n - 1) &amp; <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>)) == <strong class="reserved">null</strong>)
<a id="L1111" name="L1111"></a>1111                 <strong class="reserved">break</strong>;
<a id="L1112" name="L1112"></a>1112             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L1113" name="L1113"></a>1113                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1114" name="L1114"></a>1114             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1115" name="L1115"></a>1115                 V oldVal = <strong class="reserved">null</strong>;
<a id="L1116" name="L1116"></a>1116                 <strong class="reserved">boolean</strong> validated = <strong class="reserved">false</strong>;
<a id="L1117" name="L1117"></a>1117                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1118" name="L1118"></a>1118                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1119" name="L1119"></a>1119                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L1120" name="L1120"></a>1120                             validated = <strong class="reserved">true</strong>;
<a id="L1121" name="L1121"></a>1121                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = f, <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = <strong class="reserved">null</strong>;;) <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122                                 K ek;
<a id="L1123" name="L1123"></a>1123                                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp;&amp;
<a id="L1124" name="L1124"></a>1124                                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> ||
<a id="L1125" name="L1125"></a>1125                                      (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))) <em class="brace">{</em>
<a id="L1126" name="L1126"></a>1126                                     V ev = e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1127" name="L1127"></a>1127                                     <strong class="reserved">if</strong> (cv == <strong class="reserved">null</strong> || cv == ev ||
<a id="L1128" name="L1128"></a>1128                                         (ev != <strong class="reserved">null</strong> &amp;&amp; cv.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ev))) <em class="brace">{</em>
<a id="L1129" name="L1129"></a>1129                                         oldVal = ev;
<a id="L1130" name="L1130"></a>1130                                         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L1131" name="L1131"></a>1131                                             e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1132" name="L1132"></a>1132                                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> != <strong class="reserved">null</strong>)
<a id="L1133" name="L1133"></a>1133                                             <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1134" name="L1134"></a>1134                                         <strong class="reserved">else</strong>
<a id="L1135" name="L1135"></a>1135                                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L1136" name="L1136"></a>1136                                     <em class="brace">}</em>
<a id="L1137" name="L1137"></a>1137                                     <strong class="reserved">break</strong>;
<a id="L1138" name="L1138"></a>1138                                 <em class="brace">}</em>
<a id="L1139" name="L1139"></a>1139                                 <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = e;
<a id="L1140" name="L1140"></a>1140                                 <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>)
<a id="L1141" name="L1141"></a>1141                                     <strong class="reserved">break</strong>;
<a id="L1142" name="L1142"></a>1142                             <em class="brace">}</em>
<a id="L1143" name="L1143"></a>1143                         <em class="brace">}</em>
<a id="L1144" name="L1144"></a>1144                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L1145" name="L1145"></a>1145                             validated = <strong class="reserved">true</strong>;
<a id="L1146" name="L1146"></a>1146                             <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f;
<a id="L1147" name="L1147"></a>1147                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, p;
<a id="L1148" name="L1148"></a>1148                             <strong class="reserved">if</strong> ((r = t.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1149" name="L1149"></a>1149                                 (p = r.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1150" name="L1150"></a>1150                                 V pv = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1151" name="L1151"></a>1151                                 <strong class="reserved">if</strong> (cv == <strong class="reserved">null</strong> || cv == pv ||
<a id="L1152" name="L1152"></a>1152                                     (pv != <strong class="reserved">null</strong> &amp;&amp; cv.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(pv))) <em class="brace">{</em>
<a id="L1153" name="L1153"></a>1153                                     oldVal = pv;
<a id="L1154" name="L1154"></a>1154                                     <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L1155" name="L1155"></a>1155                                         p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1156" name="L1156"></a>1156                                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (t.<a href="../D/30975.html" title="Multiple defined in 2 places.">removeTreeNode</a>(p))
<a id="L1157" name="L1157"></a>1157                                         <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, <a href="../D/36021.html" title="Multiple defined in 2 places.">untreeify</a>(t.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>));
<a id="L1158" name="L1158"></a>1158                                 <em class="brace">}</em>
<a id="L1159" name="L1159"></a>1159                             <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160                         <em class="brace">}</em>
<a id="L1161" name="L1161"></a>1161                     <em class="brace">}</em>
<a id="L1162" name="L1162"></a>1162                 <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163                 <strong class="reserved">if</strong> (validated) <em class="brace">{</em>
<a id="L1164" name="L1164"></a>1164                     <strong class="reserved">if</strong> (oldVal != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1165" name="L1165"></a>1165                         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>)
<a id="L1166" name="L1166"></a>1166                             <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>(-1L, -1);
<a id="L1167" name="L1167"></a>1167                         <strong class="reserved">return</strong> oldVal;
<a id="L1168" name="L1168"></a>1168                     <em class="brace">}</em>
<a id="L1169" name="L1169"></a>1169                     <strong class="reserved">break</strong>;
<a id="L1170" name="L1170"></a>1170                 <em class="brace">}</em>
<a id="L1171" name="L1171"></a>1171             <em class="brace">}</em>
<a id="L1172" name="L1172"></a>1172         <em class="brace">}</em>
<a id="L1173" name="L1173"></a>1173         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1174" name="L1174"></a>1174     <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175 
<div class="comment">
      Removes all of the mappings from this map.</div>
<a id="L1179" name="L1179"></a>1179     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L1180" name="L1180"></a>1180         <strong class="reserved">long</strong> delta = 0L; <em class="comment">// negative number of deletions</em>
<a id="L1181" name="L1181"></a>1181         <strong class="reserved">int</strong> i = 0;
<a id="L1182" name="L1182"></a>1182         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;
<a id="L1183" name="L1183"></a>1183         <strong class="reserved">while</strong> (tab != <strong class="reserved">null</strong> &amp;&amp; i &lt; tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1184" name="L1184"></a>1184             <strong class="reserved">int</strong> fh;
<a id="L1185" name="L1185"></a>1185             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i);
<a id="L1186" name="L1186"></a>1186             <strong class="reserved">if</strong> (f == <strong class="reserved">null</strong>)
<a id="L1187" name="L1187"></a>1187                 ++i;
<a id="L1188" name="L1188"></a>1188             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED) <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1190" name="L1190"></a>1190                 i = 0; <em class="comment">// restart</em>
<a id="L1191" name="L1191"></a>1191             <em class="brace">}</em>
<a id="L1192" name="L1192"></a>1192             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1193" name="L1193"></a>1193                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1194" name="L1194"></a>1194                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1195" name="L1195"></a>1195                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p = (fh &gt;= 0 ? f :
<a id="L1196" name="L1196"></a>1196                                        (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) ?
<a id="L1197" name="L1197"></a>1197                                        ((<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f).<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> : <strong class="reserved">null</strong>);
<a id="L1198" name="L1198"></a>1198                         <strong class="reserved">while</strong> (p != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1199" name="L1199"></a>1199                             --delta;
<a id="L1200" name="L1200"></a>1200                             p = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1201" name="L1201"></a>1201                         <em class="brace">}</em>
<a id="L1202" name="L1202"></a>1202                         <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i++, <strong class="reserved">null</strong>);
<a id="L1203" name="L1203"></a>1203                     <em class="brace">}</em>
<a id="L1204" name="L1204"></a>1204                 <em class="brace">}</em>
<a id="L1205" name="L1205"></a>1205             <em class="brace">}</em>
<a id="L1206" name="L1206"></a>1206         <em class="brace">}</em>
<a id="L1207" name="L1207"></a>1207         <strong class="reserved">if</strong> (delta != 0L)
<a id="L1208" name="L1208"></a>1208             <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>(delta, -1);
<a id="L1209" name="L1209"></a>1209     <em class="brace">}</em>
<a id="L1210" name="L1210"></a>1210 
<div class="comment">
      Returns a {@link Set} view of the keys contained in this map.
      The set is backed by the map, so changes to the map are
      reflected in the set, and vice-versa. The set supports element
      removal, which removes the corresponding mapping from this map,
      via the <code>Iterator.remove</code>, <code>Set.remove</code>,
      <code>removeAll</code>, <code>retainAll</code>, and <code>clear</code>
      operations.  It does not support the <code>add</code> or
      <code>addAll</code> operations.
      <p>The view's iterators and spliterators are
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      </p><p>The view's <code>spliterator</code> reports {@link Spliterator#CONCURRENT},
      {@link Spliterator#DISTINCT}, and {@link Spliterator#NONNULL}.
      @return the set view</p></div>
<a id="L1229" name="L1229"></a>1229     <strong class="reserved">public</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,V&gt; <a href="../R/22393.html" title="Multiple referred from 182 places.">keySet</a>() <em class="brace">{</em>
<a id="L1230" name="L1230"></a>1230         <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,V&gt; ks;
<a id="L1231" name="L1231"></a>1231         <strong class="reserved">return</strong> (ks = <a href="../D/26719.html" title="Multiple defined in 33 places.">keySet</a>) != <strong class="reserved">null</strong> ? ks : (<a href="../D/26719.html" title="Multiple defined in 33 places.">keySet</a> = <strong class="reserved">new</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,V&gt;(<strong class="reserved">this</strong>, <strong class="reserved">null</strong>));
<a id="L1232" name="L1232"></a>1232     <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233 
<div class="comment">
      Returns a {@link Collection} view of the values contained in this map.
      The collection is backed by the map, so changes to the map are
      reflected in the collection, and vice-versa.  The collection
      supports element removal, which removes the corresponding
      mapping from this map, via the <code>Iterator.remove</code>,
      <code>Collection.remove</code>, <code>removeAll</code>,
      <code>retainAll</code>, and <code>clear</code> operations.  It does not
      support the <code>add</code> or <code>addAll</code> operations.
      <p>The view's iterators and spliterators are
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      </p><p>The view's <code>spliterator</code> reports {@link Spliterator#CONCURRENT}
      and {@link Spliterator#NONNULL}.
      @return the collection view</p></div>
<a id="L1252" name="L1252"></a>1252     <strong class="reserved">public</strong> <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;V&gt; <a href="../R/30107.html" title="Multiple referred from 933 places.">values</a>() <em class="brace">{</em>
<a id="L1253" name="L1253"></a>1253         <a href="../S/1074.html#L4659" title="Defined at 4659 in src/java/util/concurrent/ConcurrentHashMap.java.">ValuesView</a>&lt;K,V&gt; vs;
<a id="L1254" name="L1254"></a>1254         <strong class="reserved">return</strong> (vs = <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>) != <strong class="reserved">null</strong> ? vs : (<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a> = <strong class="reserved">new</strong> <a href="../S/1074.html#L4659" title="Defined at 4659 in src/java/util/concurrent/ConcurrentHashMap.java.">ValuesView</a>&lt;K,V&gt;(<strong class="reserved">this</strong>));
<a id="L1255" name="L1255"></a>1255     <em class="brace">}</em>
<a id="L1256" name="L1256"></a>1256 
<div class="comment">
      Returns a {@link Set} view of the mappings contained in this map.
      The set is backed by the map, so changes to the map are
      reflected in the set, and vice-versa.  The set supports element
      removal, which removes the corresponding mapping from the map,
      via the <code>Iterator.remove</code>, <code>Set.remove</code>,
      <code>removeAll</code>, <code>retainAll</code>, and <code>clear</code>
      operations.
      <p>The view's iterators and spliterators are
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      </p><p>The view's <code>spliterator</code> reports {@link Spliterator#CONCURRENT},
      {@link Spliterator#DISTINCT}, and {@link Spliterator#NONNULL}.
      @return the set view</p></div>
<a id="L1274" name="L1274"></a>1274     <strong class="reserved">public</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../R/13962.html" title="Multiple referred from 210 places.">entrySet</a>() <em class="brace">{</em>
<a id="L1275" name="L1275"></a>1275         <a href="../D/2931.html" title="Multiple defined in 2 places.">EntrySetView</a>&lt;K,V&gt; es;
<a id="L1276" name="L1276"></a>1276         <strong class="reserved">return</strong> (es = <a href="../D/15653.html" title="Multiple defined in 34 places.">entrySet</a>) != <strong class="reserved">null</strong> ? es : (<a href="../D/15653.html" title="Multiple defined in 34 places.">entrySet</a> = <strong class="reserved">new</strong> <a href="../D/2931.html" title="Multiple defined in 2 places.">EntrySetView</a>&lt;K,V&gt;(<strong class="reserved">this</strong>));
<a id="L1277" name="L1277"></a>1277     <em class="brace">}</em>
<a id="L1278" name="L1278"></a>1278 
<div class="comment">
      Returns the hash code value for this {@link Map}, i.e.,
      the sum of, for each key-value pair in the map,
      <code>key.hashCode() ^ value.hashCode()</code>.
      @return the hash code value for this map</div>
<a id="L1286" name="L1286"></a>1286     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287         <strong class="reserved">int</strong> h = 0;
<a id="L1288" name="L1288"></a>1288         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L1289" name="L1289"></a>1289         <strong class="reserved">if</strong> ((t = table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290             <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1291" name="L1291"></a>1291             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L1292" name="L1292"></a>1292                 h += p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() ^ p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L1293" name="L1293"></a>1293         <em class="brace">}</em>
<a id="L1294" name="L1294"></a>1294         <strong class="reserved">return</strong> h;
<a id="L1295" name="L1295"></a>1295     <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296 
<div class="comment">
      Returns a string representation of this map.  The string
      representation consists of a list of key-value mappings (in no
      particular order) enclosed in braces ("<code>{</code>}").  Adjacent
      mappings are separated by the characters <code>", "</code> (comma
      and space).  Each key-value mapping is rendered as the key
      followed by an equals sign ("<code>=</code>") followed by the
      associated value.
      @return a string representation of this map</div>
<a id="L1308" name="L1308"></a>1308     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L1309" name="L1309"></a>1309         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L1310" name="L1310"></a>1310         <strong class="reserved">int</strong> f = (t = table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1311" name="L1311"></a>1311         <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, f, 0, f);
<a id="L1312" name="L1312"></a>1312         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1313" name="L1313"></a>1313         sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('{');
<a id="L1314" name="L1314"></a>1314         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L1315" name="L1315"></a>1315         <strong class="reserved">if</strong> ((p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1316" name="L1316"></a>1316             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L1317" name="L1317"></a>1317                 K k = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L1318" name="L1318"></a>1318                 V v = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1319" name="L1319"></a>1319                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(k == <strong class="reserved">this</strong> ? "(this Map)" : k);
<a id="L1320" name="L1320"></a>1320                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('=');
<a id="L1321" name="L1321"></a>1321                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(v == <strong class="reserved">this</strong> ? "(this Map)" : v);
<a id="L1322" name="L1322"></a>1322                 <strong class="reserved">if</strong> ((p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>)
<a id="L1323" name="L1323"></a>1323                     <strong class="reserved">break</strong>;
<a id="L1324" name="L1324"></a>1324                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(',').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(' ');
<a id="L1325" name="L1325"></a>1325             <em class="brace">}</em>
<a id="L1326" name="L1326"></a>1326         <em class="brace">}</em>
<a id="L1327" name="L1327"></a>1327         <strong class="reserved">return</strong> sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('}').<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1328" name="L1328"></a>1328     <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329 
<div class="comment">
      Compares the specified object with this map for equality.
      Returns <code>true</code> if the given object is a map with the same
      mappings as this map.  This operation may return misleading
      results if either map is concurrently modified during execution
      of this method.
      @param o object to be compared for equality with this map
      @return <code>true</code> if the specified object is equal to this map</div>
<a id="L1340" name="L1340"></a>1340     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L1341" name="L1341"></a>1341         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> != <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1342" name="L1342"></a>1342             <strong class="reserved">if</strong> (!(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>))
<a id="L1343" name="L1343"></a>1343                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1344" name="L1344"></a>1344             <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;?,?&gt; m = (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;?,?&gt;) <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>;
<a id="L1345" name="L1345"></a>1345             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L1346" name="L1346"></a>1346             <strong class="reserved">int</strong> f = (t = table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1347" name="L1347"></a>1347             <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, f, 0, f);
<a id="L1348" name="L1348"></a>1348             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L1349" name="L1349"></a>1349                 V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1350" name="L1350"></a>1350                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> v = m.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1351" name="L1351"></a>1351                 <strong class="reserved">if</strong> (v == <strong class="reserved">null</strong> || (v != <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> &amp;&amp; !v.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)))
<a id="L1352" name="L1352"></a>1352                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1353" name="L1353"></a>1353             <em class="brace">}</em>
<a id="L1354" name="L1354"></a>1354             <strong class="reserved">for</strong> (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt; e : m.<a href="../D/15653.html" title="Multiple defined in 34 places.">entrySet</a>()) <em class="brace">{</em>
<a id="L1355" name="L1355"></a>1355                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> mk, mv, v;
<a id="L1356" name="L1356"></a>1356                 <strong class="reserved">if</strong> ((mk = e.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>()) == <strong class="reserved">null</strong> ||
<a id="L1357" name="L1357"></a>1357                     (mv = e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>()) == <strong class="reserved">null</strong> ||
<a id="L1358" name="L1358"></a>1358                     (v = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(mk)) == <strong class="reserved">null</strong> ||
<a id="L1359" name="L1359"></a>1359                     (mv != v &amp;&amp; !mv.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(v)))
<a id="L1360" name="L1360"></a>1360                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1361" name="L1361"></a>1361             <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362         <em class="brace">}</em>
<a id="L1363" name="L1363"></a>1363         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1364" name="L1364"></a>1364     <em class="brace">}</em>
<a id="L1365" name="L1365"></a>1365 
<div class="comment">
      Stripped-down version of helper class used in previous version,
      declared for the sake of serialization compatibility</div>
<a id="L1370" name="L1370"></a>1370     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/6998.html" title="Multiple referred from 91 places.">Segment</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L1371" name="L1371"></a>1371         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2249069246763182397L;
<a id="L1372" name="L1372"></a>1372         <strong class="reserved">final</strong> <strong class="reserved">float</strong> <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>;
<a id="L1373" name="L1373"></a>1373         Segment(<strong class="reserved">float</strong> lf) <em class="brace">{</em> <strong class="reserved">this</strong>.<a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a> = lf; <em class="brace">}</em>
<a id="L1374" name="L1374"></a>1374     <em class="brace">}</em>
<a id="L1375" name="L1375"></a>1375 
<div class="comment">
      Saves the state of the <code>ConcurrentHashMap</code> instance to a
      stream (i.e., serializes it).
      @param s the stream
      @throws java.io.IOException if an I/O error occurs
      @serialData
      the key (Object) and value (Object)
      for each key-value mapping, followed by a null pair.
      The key-value mappings are emitted in no particular order.</div>
<a id="L1386" name="L1386"></a>1386     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> s)
<a id="L1387" name="L1387"></a>1387         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1388" name="L1388"></a>1388         <em class="comment">// For serialization compatibility</em>
<a id="L1389" name="L1389"></a>1389         <em class="comment">// Emulate segment calculation from previous version of this class</em>
<a id="L1390" name="L1390"></a>1390         <strong class="reserved">int</strong> sshift = 0;
<a id="L1391" name="L1391"></a>1391         <strong class="reserved">int</strong> ssize = 1;
<a id="L1392" name="L1392"></a>1392         <strong class="reserved">while</strong> (ssize &lt; DEFAULT_CONCURRENCY_LEVEL) <em class="brace">{</em>
<a id="L1393" name="L1393"></a>1393             ++sshift;
<a id="L1394" name="L1394"></a>1394             ssize &lt;&lt;= 1;
<a id="L1395" name="L1395"></a>1395         <em class="brace">}</em>
<a id="L1396" name="L1396"></a>1396         <strong class="reserved">int</strong> segmentShift = 32 - sshift;
<a id="L1397" name="L1397"></a>1397         <strong class="reserved">int</strong> segmentMask = ssize - 1;
<a id="L1398" name="L1398"></a>1398         @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L1399" name="L1399"></a>1399         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>&lt;K,V&gt;[] segments = (<a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>&lt;K,V&gt;[])
<a id="L1400" name="L1400"></a>1400             <strong class="reserved">new</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>&lt;?,?&gt;[DEFAULT_CONCURRENCY_LEVEL];
<a id="L1401" name="L1401"></a>1401         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; segments.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; ++i)
<a id="L1402" name="L1402"></a>1402             segments[i] = <strong class="reserved">new</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>&lt;K,V&gt;(LOAD_FACTOR);
<a id="L1403" name="L1403"></a>1403         s.<a href="../D/29995.html" title="Multiple defined in 2 places.">putFields</a>().<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("segments", segments);
<a id="L1404" name="L1404"></a>1404         s.<a href="../D/29995.html" title="Multiple defined in 2 places.">putFields</a>().<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("segmentShift", segmentShift);
<a id="L1405" name="L1405"></a>1405         s.<a href="../D/29995.html" title="Multiple defined in 2 places.">putFields</a>().<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("segmentMask", segmentMask);
<a id="L1406" name="L1406"></a>1406         s.<a href="../D/37065.html" title="Multiple defined in 3 places.">writeFields</a>();
<a id="L1407" name="L1407"></a>1407 
<a id="L1408" name="L1408"></a>1408         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L1409" name="L1409"></a>1409         <strong class="reserved">if</strong> ((t = table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1410" name="L1410"></a>1410             <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1411" name="L1411"></a>1411             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L1412" name="L1412"></a>1412                 s.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1413" name="L1413"></a>1413                 s.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1414" name="L1414"></a>1414             <em class="brace">}</em>
<a id="L1415" name="L1415"></a>1415         <em class="brace">}</em>
<a id="L1416" name="L1416"></a>1416         s.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(<strong class="reserved">null</strong>);
<a id="L1417" name="L1417"></a>1417         s.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(<strong class="reserved">null</strong>);
<a id="L1418" name="L1418"></a>1418         segments = <strong class="reserved">null</strong>; <em class="comment">// throw away</em>
<a id="L1419" name="L1419"></a>1419     <em class="brace">}</em>
<a id="L1420" name="L1420"></a>1420 
<div class="comment">
      Reconstitutes the instance from a stream (that is, deserializes it).
      @param s the stream
      @throws ClassNotFoundException if the class of a serialized object
              could not be found
      @throws java.io.IOException if an I/O error occurs</div>
<a id="L1428" name="L1428"></a>1428     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L1429" name="L1429"></a>1429         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<div class="comment">
          To improve performance in typical cases, we create nodes
          while reading, then place in table once size is known.
          However, we must also validate uniqueness and deal with
          overpopulated bins while doing so, which requires
          specialized versions of putVal mechanics.</div>
<a id="L1437" name="L1437"></a>1437         sizeCtl = -1; <em class="comment">// force exclusion for table construction</em>
<a id="L1438" name="L1438"></a>1438         s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L1439" name="L1439"></a>1439         <strong class="reserved">long</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0L;
<a id="L1440" name="L1440"></a>1440         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p = <strong class="reserved">null</strong>;
<a id="L1441" name="L1441"></a>1441         <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L1442" name="L1442"></a>1442             @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L1443" name="L1443"></a>1443             K k = (K) s.<a href="../D/30232.html" title="Multiple defined in 322 places.">readObject</a>();
<a id="L1444" name="L1444"></a>1444             @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L1445" name="L1445"></a>1445             V v = (V) s.<a href="../D/30232.html" title="Multiple defined in 322 places.">readObject</a>();
<a id="L1446" name="L1446"></a>1446             <strong class="reserved">if</strong> (k != <strong class="reserved">null</strong> &amp;&amp; v != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1447" name="L1447"></a>1447                 p = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(<a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(k.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>()), k, v, p);
<a id="L1448" name="L1448"></a>1448                 ++<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L1449" name="L1449"></a>1449             <em class="brace">}</em>
<a id="L1450" name="L1450"></a>1450             <strong class="reserved">else</strong>
<a id="L1451" name="L1451"></a>1451                 <strong class="reserved">break</strong>;
<a id="L1452" name="L1452"></a>1452         <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453         <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> == 0L)
<a id="L1454" name="L1454"></a>1454             sizeCtl = 0;
<a id="L1455" name="L1455"></a>1455         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1456" name="L1456"></a>1456             <strong class="reserved">int</strong> n;
<a id="L1457" name="L1457"></a>1457             <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= (<strong class="reserved">long</strong>)(MAXIMUM_CAPACITY &gt;&gt;&gt; 1))
<a id="L1458" name="L1458"></a>1458                 n = MAXIMUM_CAPACITY;
<a id="L1459" name="L1459"></a>1459             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1460" name="L1460"></a>1460                 <strong class="reserved">int</strong> sz = (<strong class="reserved">int</strong>)<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L1461" name="L1461"></a>1461                 n = <a href="../D/35202.html" title="Multiple defined in 2 places.">tableSizeFor</a>(sz + (sz &gt;&gt;&gt; 1) + 1);
<a id="L1462" name="L1462"></a>1462             <em class="brace">}</em>
<a id="L1463" name="L1463"></a>1463             @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L1464" name="L1464"></a>1464             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[])<strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;?,?&gt;[n];
<a id="L1465" name="L1465"></a>1465             <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = n - 1;
<a id="L1466" name="L1466"></a>1466             <strong class="reserved">long</strong> added = 0L;
<a id="L1467" name="L1467"></a>1467             <strong class="reserved">while</strong> (p != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1468" name="L1468"></a>1468                 <strong class="reserved">boolean</strong> insertAtFront;
<a id="L1469" name="L1469"></a>1469                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1470" name="L1470"></a>1470                 <strong class="reserved">int</strong> h = p.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, j = h &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L1471" name="L1471"></a>1471                 <strong class="reserved">if</strong> ((<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, j)) == <strong class="reserved">null</strong>)
<a id="L1472" name="L1472"></a>1472                     insertAtFront = <strong class="reserved">true</strong>;
<a id="L1473" name="L1473"></a>1473                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1474" name="L1474"></a>1474                     K k = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L1475" name="L1475"></a>1475                     <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &lt; 0) <em class="brace">{</em>
<a id="L1476" name="L1476"></a>1476                         <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1477" name="L1477"></a>1477                         <strong class="reserved">if</strong> (t.<a href="../D/30049.html" title="Multiple defined in 2 places.">putTreeVal</a>(h, k, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) == <strong class="reserved">null</strong>)
<a id="L1478" name="L1478"></a>1478                             ++added;
<a id="L1479" name="L1479"></a>1479                         insertAtFront = <strong class="reserved">false</strong>;
<a id="L1480" name="L1480"></a>1480                     <em class="brace">}</em>
<a id="L1481" name="L1481"></a>1481                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1482" name="L1482"></a>1482                         <strong class="reserved">int</strong> binCount = 0;
<a id="L1483" name="L1483"></a>1483                         insertAtFront = <strong class="reserved">true</strong>;
<a id="L1484" name="L1484"></a>1484                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; q; K qk;
<a id="L1485" name="L1485"></a>1485                         <strong class="reserved">for</strong> (q = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>; q != <strong class="reserved">null</strong>; q = q.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L1486" name="L1486"></a>1486                             <strong class="reserved">if</strong> (q.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L1487" name="L1487"></a>1487                                 ((qk = q.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == k ||
<a id="L1488" name="L1488"></a>1488                                  (qk != <strong class="reserved">null</strong> &amp;&amp; k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(qk)))) <em class="brace">{</em>
<a id="L1489" name="L1489"></a>1489                                 insertAtFront = <strong class="reserved">false</strong>;
<a id="L1490" name="L1490"></a>1490                                 <strong class="reserved">break</strong>;
<a id="L1491" name="L1491"></a>1491                             <em class="brace">}</em>
<a id="L1492" name="L1492"></a>1492                             ++binCount;
<a id="L1493" name="L1493"></a>1493                         <em class="brace">}</em>
<a id="L1494" name="L1494"></a>1494                         <strong class="reserved">if</strong> (insertAtFront &amp;&amp; binCount &gt;= TREEIFY_THRESHOLD) <em class="brace">{</em>
<a id="L1495" name="L1495"></a>1495                             insertAtFront = <strong class="reserved">false</strong>;
<a id="L1496" name="L1496"></a>1496                             ++added;
<a id="L1497" name="L1497"></a>1497                             p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1498" name="L1498"></a>1498                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; hd = <strong class="reserved">null</strong>, tl = <strong class="reserved">null</strong>;
<a id="L1499" name="L1499"></a>1499                             <strong class="reserved">for</strong> (q = p; q != <strong class="reserved">null</strong>; q = q.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L1500" name="L1500"></a>1500                                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; t = <strong class="reserved">new</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;
<a id="L1501" name="L1501"></a>1501                                     (q.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, q.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, q.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L1502" name="L1502"></a>1502                                 <strong class="reserved">if</strong> ((t.prev = tl) == <strong class="reserved">null</strong>)
<a id="L1503" name="L1503"></a>1503                                     hd = t;
<a id="L1504" name="L1504"></a>1504                                 <strong class="reserved">else</strong>
<a id="L1505" name="L1505"></a>1505                                     tl.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = t;
<a id="L1506" name="L1506"></a>1506                                 tl = t;
<a id="L1507" name="L1507"></a>1507                             <em class="brace">}</em>
<a id="L1508" name="L1508"></a>1508                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, j, <strong class="reserved">new</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;(hd));
<a id="L1509" name="L1509"></a>1509                         <em class="brace">}</em>
<a id="L1510" name="L1510"></a>1510                     <em class="brace">}</em>
<a id="L1511" name="L1511"></a>1511                 <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512                 <strong class="reserved">if</strong> (insertAtFront) <em class="brace">{</em>
<a id="L1513" name="L1513"></a>1513                     ++added;
<a id="L1514" name="L1514"></a>1514                     p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1515" name="L1515"></a>1515                     <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, j, p);
<a id="L1516" name="L1516"></a>1516                 <em class="brace">}</em>
<a id="L1517" name="L1517"></a>1517                 p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1518" name="L1518"></a>1518             <em class="brace">}</em>
<a id="L1519" name="L1519"></a>1519             table = tab;
<a id="L1520" name="L1520"></a>1520             sizeCtl = n - (n &gt;&gt;&gt; 2);
<a id="L1521" name="L1521"></a>1521             baseCount = added;
<a id="L1522" name="L1522"></a>1522         <em class="brace">}</em>
<a id="L1523" name="L1523"></a>1523     <em class="brace">}</em>
<a id="L1524" name="L1524"></a>1524 
<a id="L1525" name="L1525"></a>1525     <em class="comment">// ConcurrentMap methods</em>
<a id="L1526" name="L1526"></a>1526 
<div class="comment">
      {@inheritDoc}
      @return the previous value associated with the specified key,
              or <code>null</code> if there was no mapping for the key
      @throws NullPointerException if the specified key or value is null</div>
<a id="L1534" name="L1534"></a>1534     <strong class="reserved">public</strong> V <a href="../R/25316.html" title="Multiple referred from 43 places.">putIfAbsent</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L1535" name="L1535"></a>1535         <strong class="reserved">return</strong> <a href="../D/30050.html" title="Multiple defined in 2 places.">putVal</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">true</strong>);
<a id="L1536" name="L1536"></a>1536     <em class="brace">}</em>
<a id="L1537" name="L1537"></a>1537 
<div class="comment">
      {@inheritDoc}
      @throws NullPointerException if the specified key is null</div>
<a id="L1543" name="L1543"></a>1543     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L1544" name="L1544"></a>1544         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong>)
<a id="L1545" name="L1545"></a>1545             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1546" name="L1546"></a>1546         <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../S/1074.html#L1105" title="Defined at 1105 in src/java/util/concurrent/ConcurrentHashMap.java.">replaceNode</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) != <strong class="reserved">null</strong>;
<a id="L1547" name="L1547"></a>1547     <em class="brace">}</em>
<a id="L1548" name="L1548"></a>1548 
<div class="comment">
      {@inheritDoc}
      @throws NullPointerException if any of the arguments are null</div>
<a id="L1554" name="L1554"></a>1554     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/26140.html" title="Multiple referred from 310 places.">replace</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V oldValue, V newValue) <em class="brace">{</em>
<a id="L1555" name="L1555"></a>1555         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || oldValue == <strong class="reserved">null</strong> || newValue == <strong class="reserved">null</strong>)
<a id="L1556" name="L1556"></a>1556             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1557" name="L1557"></a>1557         <strong class="reserved">return</strong> <a href="../S/1074.html#L1105" title="Defined at 1105 in src/java/util/concurrent/ConcurrentHashMap.java.">replaceNode</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, newValue, oldValue) != <strong class="reserved">null</strong>;
<a id="L1558" name="L1558"></a>1558     <em class="brace">}</em>
<a id="L1559" name="L1559"></a>1559 
<div class="comment">
      {@inheritDoc}
      @return the previous value associated with the specified key,
              or <code>null</code> if there was no mapping for the key
      @throws NullPointerException if the specified key or value is null</div>
<a id="L1567" name="L1567"></a>1567     <strong class="reserved">public</strong> V <a href="../R/26140.html" title="Multiple referred from 310 places.">replace</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L1568" name="L1568"></a>1568         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>)
<a id="L1569" name="L1569"></a>1569             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1570" name="L1570"></a>1570         <strong class="reserved">return</strong> <a href="../S/1074.html#L1105" title="Defined at 1105 in src/java/util/concurrent/ConcurrentHashMap.java.">replaceNode</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">null</strong>);
<a id="L1571" name="L1571"></a>1571     <em class="brace">}</em>
<a id="L1572" name="L1572"></a>1572 
<a id="L1573" name="L1573"></a>1573     <em class="comment">// Overrides of JDK8+ Map extension method defaults</em>
<a id="L1574" name="L1574"></a>1574 
<div class="comment">
      Returns the value to which the specified key is mapped, or the
      given default value if this map contains no mapping for the
      key.
      @param key the key whose associated value is to be returned
      @param defaultValue the value to return if this map contains
      no mapping for the given key
      @return the mapping for the key, if present; else the default value
      @throws NullPointerException if the specified key is null</div>
<a id="L1586" name="L1586"></a>1586     <strong class="reserved">public</strong> V <a href="../R/18161.html" title="Multiple referred from 3 places.">getOrDefault</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a>) <em class="brace">{</em>
<a id="L1587" name="L1587"></a>1587         V v;
<a id="L1588" name="L1588"></a>1588         <strong class="reserved">return</strong> (v = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) == <strong class="reserved">null</strong> ? <a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a> : v;
<a id="L1589" name="L1589"></a>1589     <em class="brace">}</em>
<a id="L1590" name="L1590"></a>1590 
<a id="L1591" name="L1591"></a>1591     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14730.html" title="Multiple referred from 50 places.">forEach</a>(<a href="../S/971.html#L45" title="Defined at 45 in src/java/util/function/BiConsumer.java.">BiConsumer</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L1592" name="L1592"></a>1592         <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1593" name="L1593"></a>1593         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L1594" name="L1594"></a>1594         <strong class="reserved">if</strong> ((t = table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1595" name="L1595"></a>1595             <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1596" name="L1596"></a>1596             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L1597" name="L1597"></a>1597                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1598" name="L1598"></a>1598             <em class="brace">}</em>
<a id="L1599" name="L1599"></a>1599         <em class="brace">}</em>
<a id="L1600" name="L1600"></a>1600     <em class="brace">}</em>
<a id="L1601" name="L1601"></a>1601 
<a id="L1602" name="L1602"></a>1602     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26141.html" title="Multiple referred from 16 places.">replaceAll</a>(<a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; function) <em class="brace">{</em>
<a id="L1603" name="L1603"></a>1603         <strong class="reserved">if</strong> (function == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1604" name="L1604"></a>1604         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L1605" name="L1605"></a>1605         <strong class="reserved">if</strong> ((t = table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1606" name="L1606"></a>1606             <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1607" name="L1607"></a>1607             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L1608" name="L1608"></a>1608                 V oldValue = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1609" name="L1609"></a>1609                 <strong class="reserved">for</strong> (K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;;) <em class="brace">{</em>
<a id="L1610" name="L1610"></a>1610                     V newValue = function.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, oldValue);
<a id="L1611" name="L1611"></a>1611                     <strong class="reserved">if</strong> (newValue == <strong class="reserved">null</strong>)
<a id="L1612" name="L1612"></a>1612                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1613" name="L1613"></a>1613                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L1105" title="Defined at 1105 in src/java/util/concurrent/ConcurrentHashMap.java.">replaceNode</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, newValue, oldValue) != <strong class="reserved">null</strong> ||
<a id="L1614" name="L1614"></a>1614                         (oldValue = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) == <strong class="reserved">null</strong>)
<a id="L1615" name="L1615"></a>1615                         <strong class="reserved">break</strong>;
<a id="L1616" name="L1616"></a>1616                 <em class="brace">}</em>
<a id="L1617" name="L1617"></a>1617             <em class="brace">}</em>
<a id="L1618" name="L1618"></a>1618         <em class="brace">}</em>
<a id="L1619" name="L1619"></a>1619     <em class="brace">}</em>
<a id="L1620" name="L1620"></a>1620 
<div class="comment">
      If the specified key is not already associated with a value,
      attempts to compute its value using the given mapping function
      and enters it into this map unless <code>null</code>.  The entire
      method invocation is performed atomically, so the function is
      applied at most once per key.  Some attempted update operations
      on this map by other threads may be blocked while computation
      is in progress, so the computation should be short and simple,
      and must not attempt to update any other mappings of this map.
      @param key key with which the specified value is to be associated
      @param mappingFunction the function to compute a value
      @return the current (existing or computed) value associated with
              the specified key, or null if the computed value is null
      @throws NullPointerException if the specified key or mappingFunction
              is null
      @throws IllegalStateException if the computation detectably
              attempts a recursive update to this map that would
              otherwise never complete
      @throws RuntimeException or Error if the mappingFunction does so,
              in which case the mapping is left unestablished</div>
<a id="L1643" name="L1643"></a>1643     <strong class="reserved">public</strong> V <a href="../R/11829.html" title="Multiple referred from 8 places.">computeIfAbsent</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> V&gt; mappingFunction) <em class="brace">{</em>
<a id="L1644" name="L1644"></a>1644         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || mappingFunction == <strong class="reserved">null</strong>)
<a id="L1645" name="L1645"></a>1645             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1646" name="L1646"></a>1646         <strong class="reserved">int</strong> h = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L1647" name="L1647"></a>1647         V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <strong class="reserved">null</strong>;
<a id="L1648" name="L1648"></a>1648         <strong class="reserved">int</strong> binCount = 0;
<a id="L1649" name="L1649"></a>1649         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;;) <em class="brace">{</em>
<a id="L1650" name="L1650"></a>1650             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> n, i, fh;
<a id="L1651" name="L1651"></a>1651             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0)
<a id="L1652" name="L1652"></a>1652                 tab = <a href="../S/1074.html#L2223" title="Defined at 2223 in src/java/util/concurrent/ConcurrentHashMap.java.">initTable</a>();
<a id="L1653" name="L1653"></a>1653             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i = (n - 1) &amp; h)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1654" name="L1654"></a>1654                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; r = <strong class="reserved">new</strong> <a href="../S/1074.html#L2200" title="Defined at 2200 in src/java/util/concurrent/ConcurrentHashMap.java.">ReservationNode</a>&lt;K,V&gt;();
<a id="L1655" name="L1655"></a>1655                 <strong class="reserved">synchronized</strong> (r) <em class="brace">{</em>
<a id="L1656" name="L1656"></a>1656                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L758" title="Defined at 758 in src/java/util/concurrent/ConcurrentHashMap.java.">casTabAt</a>(tab, i, <strong class="reserved">null</strong>, r)) <em class="brace">{</em>
<a id="L1657" name="L1657"></a>1657                         binCount = 1;
<a id="L1658" name="L1658"></a>1658                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <strong class="reserved">null</strong>;
<a id="L1659" name="L1659"></a>1659                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1660" name="L1660"></a>1660                             <strong class="reserved">if</strong> ((<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = mappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong>)
<a id="L1661" name="L1661"></a>1661                                 <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>);
<a id="L1662" name="L1662"></a>1662                         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1663" name="L1663"></a>1663                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L1664" name="L1664"></a>1664                         <em class="brace">}</em>
<a id="L1665" name="L1665"></a>1665                     <em class="brace">}</em>
<a id="L1666" name="L1666"></a>1666                 <em class="brace">}</em>
<a id="L1667" name="L1667"></a>1667                 <strong class="reserved">if</strong> (binCount != 0)
<a id="L1668" name="L1668"></a>1668                     <strong class="reserved">break</strong>;
<a id="L1669" name="L1669"></a>1669             <em class="brace">}</em>
<a id="L1670" name="L1670"></a>1670             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L1671" name="L1671"></a>1671                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1672" name="L1672"></a>1672             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1673" name="L1673"></a>1673                 <strong class="reserved">boolean</strong> added = <strong class="reserved">false</strong>;
<a id="L1674" name="L1674"></a>1674                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1675" name="L1675"></a>1675                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1676" name="L1676"></a>1676                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L1677" name="L1677"></a>1677                             binCount = 1;
<a id="L1678" name="L1678"></a>1678                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = f;; ++binCount) <em class="brace">{</em>
<a id="L1679" name="L1679"></a>1679                                 K ek; V ev;
<a id="L1680" name="L1680"></a>1680                                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L1681" name="L1681"></a>1681                                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> ||
<a id="L1682" name="L1682"></a>1682                                      (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))) <em class="brace">{</em>
<a id="L1683" name="L1683"></a>1683                                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1684" name="L1684"></a>1684                                     <strong class="reserved">break</strong>;
<a id="L1685" name="L1685"></a>1685                                 <em class="brace">}</em>
<a id="L1686" name="L1686"></a>1686                                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = e;
<a id="L1687" name="L1687"></a>1687                                 <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1688" name="L1688"></a>1688                                     <strong class="reserved">if</strong> ((<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = mappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1689" name="L1689"></a>1689                                         added = <strong class="reserved">true</strong>;
<a id="L1690" name="L1690"></a>1690                                         <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>);
<a id="L1691" name="L1691"></a>1691                                     <em class="brace">}</em>
<a id="L1692" name="L1692"></a>1692                                     <strong class="reserved">break</strong>;
<a id="L1693" name="L1693"></a>1693                                 <em class="brace">}</em>
<a id="L1694" name="L1694"></a>1694                             <em class="brace">}</em>
<a id="L1695" name="L1695"></a>1695                         <em class="brace">}</em>
<a id="L1696" name="L1696"></a>1696                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L1697" name="L1697"></a>1697                             binCount = 2;
<a id="L1698" name="L1698"></a>1698                             <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f;
<a id="L1699" name="L1699"></a>1699                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, p;
<a id="L1700" name="L1700"></a>1700                             <strong class="reserved">if</strong> ((r = t.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1701" name="L1701"></a>1701                                 (p = r.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>)) != <strong class="reserved">null</strong>)
<a id="L1702" name="L1702"></a>1702                                 <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1703" name="L1703"></a>1703                             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = mappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1704" name="L1704"></a>1704                                 added = <strong class="reserved">true</strong>;
<a id="L1705" name="L1705"></a>1705                                 t.<a href="../D/30049.html" title="Multiple defined in 2 places.">putTreeVal</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1706" name="L1706"></a>1706                             <em class="brace">}</em>
<a id="L1707" name="L1707"></a>1707                         <em class="brace">}</em>
<a id="L1708" name="L1708"></a>1708                     <em class="brace">}</em>
<a id="L1709" name="L1709"></a>1709                 <em class="brace">}</em>
<a id="L1710" name="L1710"></a>1710                 <strong class="reserved">if</strong> (binCount != 0) <em class="brace">{</em>
<a id="L1711" name="L1711"></a>1711                     <strong class="reserved">if</strong> (binCount &gt;= TREEIFY_THRESHOLD)
<a id="L1712" name="L1712"></a>1712                         <a href="../D/35695.html" title="Multiple defined in 2 places.">treeifyBin</a>(tab, i);
<a id="L1713" name="L1713"></a>1713                     <strong class="reserved">if</strong> (!added)
<a id="L1714" name="L1714"></a>1714                         <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1715" name="L1715"></a>1715                     <strong class="reserved">break</strong>;
<a id="L1716" name="L1716"></a>1716                 <em class="brace">}</em>
<a id="L1717" name="L1717"></a>1717             <em class="brace">}</em>
<a id="L1718" name="L1718"></a>1718         <em class="brace">}</em>
<a id="L1719" name="L1719"></a>1719         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>)
<a id="L1720" name="L1720"></a>1720             <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>(1L, binCount);
<a id="L1721" name="L1721"></a>1721         <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1722" name="L1722"></a>1722     <em class="brace">}</em>
<a id="L1723" name="L1723"></a>1723 
<div class="comment">
      If the value for the specified key is present, attempts to
      compute a new mapping given the key and its current mapped
      value.  The entire method invocation is performed atomically.
      Some attempted update operations on this map by other threads
      may be blocked while computation is in progress, so the
      computation should be short and simple, and must not attempt to
      update any other mappings of this map.
      @param key key with which a value may be associated
      @param remappingFunction the function to compute a value
      @return the new value associated with the specified key, or null if none
      @throws NullPointerException if the specified key or remappingFunction
              is null
      @throws IllegalStateException if the computation detectably
              attempts a recursive update to this map that would
              otherwise never complete
      @throws RuntimeException or Error if the remappingFunction does so,
              in which case the mapping is unchanged</div>
<a id="L1744" name="L1744"></a>1744     <strong class="reserved">public</strong> V <a href="../R/11830.html" title="Multiple referred from 4 places.">computeIfPresent</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; remappingFunction) <em class="brace">{</em>
<a id="L1745" name="L1745"></a>1745         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || remappingFunction == <strong class="reserved">null</strong>)
<a id="L1746" name="L1746"></a>1746             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1747" name="L1747"></a>1747         <strong class="reserved">int</strong> h = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L1748" name="L1748"></a>1748         V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <strong class="reserved">null</strong>;
<a id="L1749" name="L1749"></a>1749         <strong class="reserved">int</strong> delta = 0;
<a id="L1750" name="L1750"></a>1750         <strong class="reserved">int</strong> binCount = 0;
<a id="L1751" name="L1751"></a>1751         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;;) <em class="brace">{</em>
<a id="L1752" name="L1752"></a>1752             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> n, i, fh;
<a id="L1753" name="L1753"></a>1753             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0)
<a id="L1754" name="L1754"></a>1754                 tab = <a href="../S/1074.html#L2223" title="Defined at 2223 in src/java/util/concurrent/ConcurrentHashMap.java.">initTable</a>();
<a id="L1755" name="L1755"></a>1755             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i = (n - 1) &amp; h)) == <strong class="reserved">null</strong>)
<a id="L1756" name="L1756"></a>1756                 <strong class="reserved">break</strong>;
<a id="L1757" name="L1757"></a>1757             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L1758" name="L1758"></a>1758                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1759" name="L1759"></a>1759             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1760" name="L1760"></a>1760                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1761" name="L1761"></a>1761                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1762" name="L1762"></a>1762                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L1763" name="L1763"></a>1763                             binCount = 1;
<a id="L1764" name="L1764"></a>1764                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = f, <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = <strong class="reserved">null</strong>;; ++binCount) <em class="brace">{</em>
<a id="L1765" name="L1765"></a>1765                                 K ek;
<a id="L1766" name="L1766"></a>1766                                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L1767" name="L1767"></a>1767                                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> ||
<a id="L1768" name="L1768"></a>1768                                      (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))) <em class="brace">{</em>
<a id="L1769" name="L1769"></a>1769                                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1770" name="L1770"></a>1770                                     <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>)
<a id="L1771" name="L1771"></a>1771                                         e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1772" name="L1772"></a>1772                                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1773" name="L1773"></a>1773                                         delta = -1;
<a id="L1774" name="L1774"></a>1774                                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; en = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1775" name="L1775"></a>1775                                         <strong class="reserved">if</strong> (<a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> != <strong class="reserved">null</strong>)
<a id="L1776" name="L1776"></a>1776                                             <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = en;
<a id="L1777" name="L1777"></a>1777                                         <strong class="reserved">else</strong>
<a id="L1778" name="L1778"></a>1778                                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, en);
<a id="L1779" name="L1779"></a>1779                                     <em class="brace">}</em>
<a id="L1780" name="L1780"></a>1780                                     <strong class="reserved">break</strong>;
<a id="L1781" name="L1781"></a>1781                                 <em class="brace">}</em>
<a id="L1782" name="L1782"></a>1782                                 <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = e;
<a id="L1783" name="L1783"></a>1783                                 <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>)
<a id="L1784" name="L1784"></a>1784                                     <strong class="reserved">break</strong>;
<a id="L1785" name="L1785"></a>1785                             <em class="brace">}</em>
<a id="L1786" name="L1786"></a>1786                         <em class="brace">}</em>
<a id="L1787" name="L1787"></a>1787                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L1788" name="L1788"></a>1788                             binCount = 2;
<a id="L1789" name="L1789"></a>1789                             <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f;
<a id="L1790" name="L1790"></a>1790                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, p;
<a id="L1791" name="L1791"></a>1791                             <strong class="reserved">if</strong> ((r = t.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1792" name="L1792"></a>1792                                 (p = r.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1793" name="L1793"></a>1793                                 <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1794" name="L1794"></a>1794                                 <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>)
<a id="L1795" name="L1795"></a>1795                                     p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1796" name="L1796"></a>1796                                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1797" name="L1797"></a>1797                                     delta = -1;
<a id="L1798" name="L1798"></a>1798                                     <strong class="reserved">if</strong> (t.<a href="../D/30975.html" title="Multiple defined in 2 places.">removeTreeNode</a>(p))
<a id="L1799" name="L1799"></a>1799                                         <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, <a href="../D/36021.html" title="Multiple defined in 2 places.">untreeify</a>(t.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>));
<a id="L1800" name="L1800"></a>1800                                 <em class="brace">}</em>
<a id="L1801" name="L1801"></a>1801                             <em class="brace">}</em>
<a id="L1802" name="L1802"></a>1802                         <em class="brace">}</em>
<a id="L1803" name="L1803"></a>1803                     <em class="brace">}</em>
<a id="L1804" name="L1804"></a>1804                 <em class="brace">}</em>
<a id="L1805" name="L1805"></a>1805                 <strong class="reserved">if</strong> (binCount != 0)
<a id="L1806" name="L1806"></a>1806                     <strong class="reserved">break</strong>;
<a id="L1807" name="L1807"></a>1807             <em class="brace">}</em>
<a id="L1808" name="L1808"></a>1808         <em class="brace">}</em>
<a id="L1809" name="L1809"></a>1809         <strong class="reserved">if</strong> (delta != 0)
<a id="L1810" name="L1810"></a>1810             <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>((<strong class="reserved">long</strong>)delta, binCount);
<a id="L1811" name="L1811"></a>1811         <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1812" name="L1812"></a>1812     <em class="brace">}</em>
<a id="L1813" name="L1813"></a>1813 
<div class="comment">
      Attempts to compute a mapping for the specified key and its
      current mapped value (or <code>null</code> if there is no current
      mapping). The entire method invocation is performed atomically.
      Some attempted update operations on this map by other threads
      may be blocked while computation is in progress, so the
      computation should be short and simple, and must not attempt to
      update any other mappings of this Map.
      @param key key with which the specified value is to be associated
      @param remappingFunction the function to compute a value
      @return the new value associated with the specified key, or null if none
      @throws NullPointerException if the specified key or remappingFunction
              is null
      @throws IllegalStateException if the computation detectably
              attempts a recursive update to this map that would
              otherwise never complete
      @throws RuntimeException or Error if the remappingFunction does so,
              in which case the mapping is unchanged</div>
<a id="L1834" name="L1834"></a>1834     <strong class="reserved">public</strong> V <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>,
<a id="L1835" name="L1835"></a>1835                      <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; remappingFunction) <em class="brace">{</em>
<a id="L1836" name="L1836"></a>1836         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || remappingFunction == <strong class="reserved">null</strong>)
<a id="L1837" name="L1837"></a>1837             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1838" name="L1838"></a>1838         <strong class="reserved">int</strong> h = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L1839" name="L1839"></a>1839         V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <strong class="reserved">null</strong>;
<a id="L1840" name="L1840"></a>1840         <strong class="reserved">int</strong> delta = 0;
<a id="L1841" name="L1841"></a>1841         <strong class="reserved">int</strong> binCount = 0;
<a id="L1842" name="L1842"></a>1842         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;;) <em class="brace">{</em>
<a id="L1843" name="L1843"></a>1843             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> n, i, fh;
<a id="L1844" name="L1844"></a>1844             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0)
<a id="L1845" name="L1845"></a>1845                 tab = <a href="../S/1074.html#L2223" title="Defined at 2223 in src/java/util/concurrent/ConcurrentHashMap.java.">initTable</a>();
<a id="L1846" name="L1846"></a>1846             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i = (n - 1) &amp; h)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1847" name="L1847"></a>1847                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; r = <strong class="reserved">new</strong> <a href="../S/1074.html#L2200" title="Defined at 2200 in src/java/util/concurrent/ConcurrentHashMap.java.">ReservationNode</a>&lt;K,V&gt;();
<a id="L1848" name="L1848"></a>1848                 <strong class="reserved">synchronized</strong> (r) <em class="brace">{</em>
<a id="L1849" name="L1849"></a>1849                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L758" title="Defined at 758 in src/java/util/concurrent/ConcurrentHashMap.java.">casTabAt</a>(tab, i, <strong class="reserved">null</strong>, r)) <em class="brace">{</em>
<a id="L1850" name="L1850"></a>1850                         binCount = 1;
<a id="L1851" name="L1851"></a>1851                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <strong class="reserved">null</strong>;
<a id="L1852" name="L1852"></a>1852                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1853" name="L1853"></a>1853                             <strong class="reserved">if</strong> ((<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1854" name="L1854"></a>1854                                 delta = 1;
<a id="L1855" name="L1855"></a>1855                                 <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>);
<a id="L1856" name="L1856"></a>1856                             <em class="brace">}</em>
<a id="L1857" name="L1857"></a>1857                         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1858" name="L1858"></a>1858                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L1859" name="L1859"></a>1859                         <em class="brace">}</em>
<a id="L1860" name="L1860"></a>1860                     <em class="brace">}</em>
<a id="L1861" name="L1861"></a>1861                 <em class="brace">}</em>
<a id="L1862" name="L1862"></a>1862                 <strong class="reserved">if</strong> (binCount != 0)
<a id="L1863" name="L1863"></a>1863                     <strong class="reserved">break</strong>;
<a id="L1864" name="L1864"></a>1864             <em class="brace">}</em>
<a id="L1865" name="L1865"></a>1865             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L1866" name="L1866"></a>1866                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1867" name="L1867"></a>1867             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1868" name="L1868"></a>1868                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1869" name="L1869"></a>1869                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1870" name="L1870"></a>1870                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L1871" name="L1871"></a>1871                             binCount = 1;
<a id="L1872" name="L1872"></a>1872                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = f, <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = <strong class="reserved">null</strong>;; ++binCount) <em class="brace">{</em>
<a id="L1873" name="L1873"></a>1873                                 K ek;
<a id="L1874" name="L1874"></a>1874                                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L1875" name="L1875"></a>1875                                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> ||
<a id="L1876" name="L1876"></a>1876                                      (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))) <em class="brace">{</em>
<a id="L1877" name="L1877"></a>1877                                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1878" name="L1878"></a>1878                                     <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>)
<a id="L1879" name="L1879"></a>1879                                         e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1880" name="L1880"></a>1880                                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1881" name="L1881"></a>1881                                         delta = -1;
<a id="L1882" name="L1882"></a>1882                                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; en = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1883" name="L1883"></a>1883                                         <strong class="reserved">if</strong> (<a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> != <strong class="reserved">null</strong>)
<a id="L1884" name="L1884"></a>1884                                             <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = en;
<a id="L1885" name="L1885"></a>1885                                         <strong class="reserved">else</strong>
<a id="L1886" name="L1886"></a>1886                                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, en);
<a id="L1887" name="L1887"></a>1887                                     <em class="brace">}</em>
<a id="L1888" name="L1888"></a>1888                                     <strong class="reserved">break</strong>;
<a id="L1889" name="L1889"></a>1889                                 <em class="brace">}</em>
<a id="L1890" name="L1890"></a>1890                                 <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = e;
<a id="L1891" name="L1891"></a>1891                                 <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1892" name="L1892"></a>1892                                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L1893" name="L1893"></a>1893                                     <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1894" name="L1894"></a>1894                                         delta = 1;
<a id="L1895" name="L1895"></a>1895                                         <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> =
<a id="L1896" name="L1896"></a>1896                                             <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>);
<a id="L1897" name="L1897"></a>1897                                     <em class="brace">}</em>
<a id="L1898" name="L1898"></a>1898                                     <strong class="reserved">break</strong>;
<a id="L1899" name="L1899"></a>1899                                 <em class="brace">}</em>
<a id="L1900" name="L1900"></a>1900                             <em class="brace">}</em>
<a id="L1901" name="L1901"></a>1901                         <em class="brace">}</em>
<a id="L1902" name="L1902"></a>1902                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L1903" name="L1903"></a>1903                             binCount = 1;
<a id="L1904" name="L1904"></a>1904                             <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f;
<a id="L1905" name="L1905"></a>1905                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, p;
<a id="L1906" name="L1906"></a>1906                             <strong class="reserved">if</strong> ((r = t.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) != <strong class="reserved">null</strong>)
<a id="L1907" name="L1907"></a>1907                                 p = r.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L1908" name="L1908"></a>1908                             <strong class="reserved">else</strong>
<a id="L1909" name="L1909"></a>1909                                 p = <strong class="reserved">null</strong>;
<a id="L1910" name="L1910"></a>1910                             V pv = (p == <strong class="reserved">null</strong>) ? <strong class="reserved">null</strong> : p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1911" name="L1911"></a>1911                             <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, pv);
<a id="L1912" name="L1912"></a>1912                             <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1913" name="L1913"></a>1913                                 <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong>)
<a id="L1914" name="L1914"></a>1914                                     p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1915" name="L1915"></a>1915                                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1916" name="L1916"></a>1916                                     delta = 1;
<a id="L1917" name="L1917"></a>1917                                     t.<a href="../D/30049.html" title="Multiple defined in 2 places.">putTreeVal</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1918" name="L1918"></a>1918                                 <em class="brace">}</em>
<a id="L1919" name="L1919"></a>1919                             <em class="brace">}</em>
<a id="L1920" name="L1920"></a>1920                             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1921" name="L1921"></a>1921                                 delta = -1;
<a id="L1922" name="L1922"></a>1922                                 <strong class="reserved">if</strong> (t.<a href="../D/30975.html" title="Multiple defined in 2 places.">removeTreeNode</a>(p))
<a id="L1923" name="L1923"></a>1923                                     <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, <a href="../D/36021.html" title="Multiple defined in 2 places.">untreeify</a>(t.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>));
<a id="L1924" name="L1924"></a>1924                             <em class="brace">}</em>
<a id="L1925" name="L1925"></a>1925                         <em class="brace">}</em>
<a id="L1926" name="L1926"></a>1926                     <em class="brace">}</em>
<a id="L1927" name="L1927"></a>1927                 <em class="brace">}</em>
<a id="L1928" name="L1928"></a>1928                 <strong class="reserved">if</strong> (binCount != 0) <em class="brace">{</em>
<a id="L1929" name="L1929"></a>1929                     <strong class="reserved">if</strong> (binCount &gt;= TREEIFY_THRESHOLD)
<a id="L1930" name="L1930"></a>1930                         <a href="../D/35695.html" title="Multiple defined in 2 places.">treeifyBin</a>(tab, i);
<a id="L1931" name="L1931"></a>1931                     <strong class="reserved">break</strong>;
<a id="L1932" name="L1932"></a>1932                 <em class="brace">}</em>
<a id="L1933" name="L1933"></a>1933             <em class="brace">}</em>
<a id="L1934" name="L1934"></a>1934         <em class="brace">}</em>
<a id="L1935" name="L1935"></a>1935         <strong class="reserved">if</strong> (delta != 0)
<a id="L1936" name="L1936"></a>1936             <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>((<strong class="reserved">long</strong>)delta, binCount);
<a id="L1937" name="L1937"></a>1937         <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1938" name="L1938"></a>1938     <em class="brace">}</em>
<a id="L1939" name="L1939"></a>1939 
<div class="comment">
      If the specified key is not already associated with a
      (non-null) value, associates it with the given value.
      Otherwise, replaces the value with the results of the given
      remapping function, or removes if <code>null</code>. The entire
      method invocation is performed atomically.  Some attempted
      update operations on this map by other threads may be blocked
      while computation is in progress, so the computation should be
      short and simple, and must not attempt to update any other
      mappings of this Map.
      @param key key with which the specified value is to be associated
      @param value the value to use if absent
      @param remappingFunction the function to recompute a value if present
      @return the new value associated with the specified key, or null if none
      @throws NullPointerException if the specified key or the
              remappingFunction is null
      @throws RuntimeException or Error if the remappingFunction does so,
              in which case the mapping is unchanged</div>
<a id="L1960" name="L1960"></a>1960     <strong class="reserved">public</strong> V <a href="../R/23225.html" title="Multiple referred from 21 places.">merge</a>(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; remappingFunction) <em class="brace">{</em>
<a id="L1961" name="L1961"></a>1961         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> == <strong class="reserved">null</strong> || <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong> || remappingFunction == <strong class="reserved">null</strong>)
<a id="L1962" name="L1962"></a>1962             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1963" name="L1963"></a>1963         <strong class="reserved">int</strong> h = <a href="../D/34731.html" title="Multiple defined in 2 places.">spread</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>());
<a id="L1964" name="L1964"></a>1964         V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <strong class="reserved">null</strong>;
<a id="L1965" name="L1965"></a>1965         <strong class="reserved">int</strong> delta = 0;
<a id="L1966" name="L1966"></a>1966         <strong class="reserved">int</strong> binCount = 0;
<a id="L1967" name="L1967"></a>1967         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table;;) <em class="brace">{</em>
<a id="L1968" name="L1968"></a>1968             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> n, i, fh;
<a id="L1969" name="L1969"></a>1969             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0)
<a id="L1970" name="L1970"></a>1970                 tab = <a href="../S/1074.html#L2223" title="Defined at 2223 in src/java/util/concurrent/ConcurrentHashMap.java.">initTable</a>();
<a id="L1971" name="L1971"></a>1971             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i = (n - 1) &amp; h)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1972" name="L1972"></a>1972                 <strong class="reserved">if</strong> (<a href="../S/1074.html#L758" title="Defined at 758 in src/java/util/concurrent/ConcurrentHashMap.java.">casTabAt</a>(tab, i, <strong class="reserved">null</strong>, <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">null</strong>))) <em class="brace">{</em>
<a id="L1973" name="L1973"></a>1973                     delta = 1;
<a id="L1974" name="L1974"></a>1974                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1975" name="L1975"></a>1975                     <strong class="reserved">break</strong>;
<a id="L1976" name="L1976"></a>1976                 <em class="brace">}</em>
<a id="L1977" name="L1977"></a>1977             <em class="brace">}</em>
<a id="L1978" name="L1978"></a>1978             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L1979" name="L1979"></a>1979                 tab = <a href="../S/1074.html#L2297" title="Defined at 2297 in src/java/util/concurrent/ConcurrentHashMap.java.">helpTransfer</a>(tab, f);
<a id="L1980" name="L1980"></a>1980             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1981" name="L1981"></a>1981                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L1982" name="L1982"></a>1982                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L1983" name="L1983"></a>1983                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L1984" name="L1984"></a>1984                             binCount = 1;
<a id="L1985" name="L1985"></a>1985                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = f, <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = <strong class="reserved">null</strong>;; ++binCount) <em class="brace">{</em>
<a id="L1986" name="L1986"></a>1986                                 K ek;
<a id="L1987" name="L1987"></a>1987                                 <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L1988" name="L1988"></a>1988                                     ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> ||
<a id="L1989" name="L1989"></a>1989                                      (ek != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek)))) <em class="brace">{</em>
<a id="L1990" name="L1990"></a>1990                                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L1991" name="L1991"></a>1991                                     <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>)
<a id="L1992" name="L1992"></a>1992                                         e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1993" name="L1993"></a>1993                                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1994" name="L1994"></a>1994                                         delta = -1;
<a id="L1995" name="L1995"></a>1995                                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; en = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1996" name="L1996"></a>1996                                         <strong class="reserved">if</strong> (<a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> != <strong class="reserved">null</strong>)
<a id="L1997" name="L1997"></a>1997                                             <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = en;
<a id="L1998" name="L1998"></a>1998                                         <strong class="reserved">else</strong>
<a id="L1999" name="L1999"></a>1999                                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, en);
<a id="L2000" name="L2000"></a>2000                                     <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001                                     <strong class="reserved">break</strong>;
<a id="L2002" name="L2002"></a>2002                                 <em class="brace">}</em>
<a id="L2003" name="L2003"></a>2003                                 <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = e;
<a id="L2004" name="L2004"></a>2004                                 <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2005" name="L2005"></a>2005                                     delta = 1;
<a id="L2006" name="L2006"></a>2006                                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L2007" name="L2007"></a>2007                                     <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> =
<a id="L2008" name="L2008"></a>2008                                         <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>);
<a id="L2009" name="L2009"></a>2009                                     <strong class="reserved">break</strong>;
<a id="L2010" name="L2010"></a>2010                                 <em class="brace">}</em>
<a id="L2011" name="L2011"></a>2011                             <em class="brace">}</em>
<a id="L2012" name="L2012"></a>2012                         <em class="brace">}</em>
<a id="L2013" name="L2013"></a>2013                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L2014" name="L2014"></a>2014                             binCount = 2;
<a id="L2015" name="L2015"></a>2015                             <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f;
<a id="L2016" name="L2016"></a>2016                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r = t.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L2017" name="L2017"></a>2017                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p = (r == <strong class="reserved">null</strong>) ? <strong class="reserved">null</strong> :
<a id="L2018" name="L2018"></a>2018                                 r.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L2019" name="L2019"></a>2019                             <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = (p == <strong class="reserved">null</strong>) ? <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> :
<a id="L2020" name="L2020"></a>2020                                 remappingFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L2021" name="L2021"></a>2021                             <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2022" name="L2022"></a>2022                                 <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong>)
<a id="L2023" name="L2023"></a>2023                                     p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2024" name="L2024"></a>2024                                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2025" name="L2025"></a>2025                                     delta = 1;
<a id="L2026" name="L2026"></a>2026                                     t.<a href="../D/30049.html" title="Multiple defined in 2 places.">putTreeVal</a>(h, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L2027" name="L2027"></a>2027                                 <em class="brace">}</em>
<a id="L2028" name="L2028"></a>2028                             <em class="brace">}</em>
<a id="L2029" name="L2029"></a>2029                             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2030" name="L2030"></a>2030                                 delta = -1;
<a id="L2031" name="L2031"></a>2031                                 <strong class="reserved">if</strong> (t.<a href="../D/30975.html" title="Multiple defined in 2 places.">removeTreeNode</a>(p))
<a id="L2032" name="L2032"></a>2032                                     <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, <a href="../D/36021.html" title="Multiple defined in 2 places.">untreeify</a>(t.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>));
<a id="L2033" name="L2033"></a>2033                             <em class="brace">}</em>
<a id="L2034" name="L2034"></a>2034                         <em class="brace">}</em>
<a id="L2035" name="L2035"></a>2035                     <em class="brace">}</em>
<a id="L2036" name="L2036"></a>2036                 <em class="brace">}</em>
<a id="L2037" name="L2037"></a>2037                 <strong class="reserved">if</strong> (binCount != 0) <em class="brace">{</em>
<a id="L2038" name="L2038"></a>2038                     <strong class="reserved">if</strong> (binCount &gt;= TREEIFY_THRESHOLD)
<a id="L2039" name="L2039"></a>2039                         <a href="../D/35695.html" title="Multiple defined in 2 places.">treeifyBin</a>(tab, i);
<a id="L2040" name="L2040"></a>2040                     <strong class="reserved">break</strong>;
<a id="L2041" name="L2041"></a>2041                 <em class="brace">}</em>
<a id="L2042" name="L2042"></a>2042             <em class="brace">}</em>
<a id="L2043" name="L2043"></a>2043         <em class="brace">}</em>
<a id="L2044" name="L2044"></a>2044         <strong class="reserved">if</strong> (delta != 0)
<a id="L2045" name="L2045"></a>2045             <a href="../S/1074.html#L2256" title="Defined at 2256 in src/java/util/concurrent/ConcurrentHashMap.java.">addCount</a>((<strong class="reserved">long</strong>)delta, binCount);
<a id="L2046" name="L2046"></a>2046         <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2047" name="L2047"></a>2047     <em class="brace">}</em>
<a id="L2048" name="L2048"></a>2048 
<a id="L2049" name="L2049"></a>2049     <em class="comment">// Hashtable legacy methods</em>
<a id="L2050" name="L2050"></a>2050 
<div class="comment">
      Legacy method testing if some key maps into the specified value
      in this table.  This method is identical in functionality to
      {@link #containsValue(Object)}, and exists solely to ensure
      full compatibility with class {@link java.util.Hashtable},
      which supported this method prior to introduction of the
      Java Collections framework.
      @param  value a value to search for
      @return <code>true</code> if and only if some key maps to the
              <code>value</code> argument in this table as
              determined by the <code>equals</code> method;
              <code>false</code> otherwise
      @throws NullPointerException if the specified value is null</div>
<a id="L2066" name="L2066"></a>2066     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L2067" name="L2067"></a>2067         <strong class="reserved">return</strong> <a href="../D/13361.html" title="Multiple defined in 32 places.">containsValue</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L2068" name="L2068"></a>2068     <em class="brace">}</em>
<a id="L2069" name="L2069"></a>2069 
<div class="comment">
      Returns an enumeration of the keys in this table.
      @return an enumeration of the keys in this table
      @see #keySet()</div>
<a id="L2076" name="L2076"></a>2076     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;K&gt; <a href="../R/22399.html" title="Multiple referred from 606 places.">keys</a>() <em class="brace">{</em>
<a id="L2077" name="L2077"></a>2077         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L2078" name="L2078"></a>2078         <strong class="reserved">int</strong> f = (t = table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2079" name="L2079"></a>2079         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4806.html" title="Multiple defined in 7 places.">KeyIterator</a>&lt;K,V&gt;(t, f, 0, f, <strong class="reserved">this</strong>);
<a id="L2080" name="L2080"></a>2080     <em class="brace">}</em>
<a id="L2081" name="L2081"></a>2081 
<div class="comment">
      Returns an enumeration of the values in this table.
      @return an enumeration of the values in this table
      @see #values()</div>
<a id="L2088" name="L2088"></a>2088     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;V&gt; <a href="../R/13650.html" title="Multiple referred from 679 places.">elements</a>() <em class="brace">{</em>
<a id="L2089" name="L2089"></a>2089         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L2090" name="L2090"></a>2090         <strong class="reserved">int</strong> f = (t = table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2091" name="L2091"></a>2091         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/9501.html" title="Multiple defined in 7 places.">ValueIterator</a>&lt;K,V&gt;(t, f, 0, f, <strong class="reserved">this</strong>);
<a id="L2092" name="L2092"></a>2092     <em class="brace">}</em>
<a id="L2093" name="L2093"></a>2093 
<a id="L2094" name="L2094"></a>2094     <em class="comment">// ConcurrentHashMap-only methods</em>
<a id="L2095" name="L2095"></a>2095 
<div class="comment">
      Returns the number of mappings. This method should be used
      instead of {@link #size} because a ConcurrentHashMap may
      contain more mappings than can be represented as an int. The
      value returned is an estimate; the actual count may differ if
      there are concurrent insertions or removals.
      @return the number of mappings
      @since 1.8</div>
<a id="L2106" name="L2106"></a>2106     <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/23082.html" title="Multiple referred from 2 places.">mappingCount</a>() <em class="brace">{</em>
<a id="L2107" name="L2107"></a>2107         <strong class="reserved">long</strong> n = <a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L2108" name="L2108"></a>2108         <strong class="reserved">return</strong> (n &lt; 0L) ? 0L : n; <em class="comment">// ignore transient negative values</em>
<a id="L2109" name="L2109"></a>2109     <em class="brace">}</em>
<a id="L2110" name="L2110"></a>2110 
<div class="comment">
      Creates a new {@link Set} backed by a ConcurrentHashMap
      from the given type to <code>Boolean.TRUE</code>.
      @param <k> the element type of the returned set
      @return the new set
      @since 1.8</k></div>
<a id="L2119" name="L2119"></a>2119     <strong class="reserved">public</strong> <strong class="reserved">static</strong> &lt;K&gt; <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt; newKeySet() <em class="brace">{</em>
<a id="L2120" name="L2120"></a>2120         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;
<a id="L2121" name="L2121"></a>2121             (<strong class="reserved">new</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;(), <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L2122" name="L2122"></a>2122     <em class="brace">}</em>
<a id="L2123" name="L2123"></a>2123 
<div class="comment">
      Creates a new {@link Set} backed by a ConcurrentHashMap
      from the given type to <code>Boolean.TRUE</code>.
      @param initialCapacity The implementation performs internal
      sizing to accommodate this many elements.
      @param <k> the element type of the returned set
      @return the new set
      @throws IllegalArgumentException if the initial capacity of
      elements is negative
      @since 1.8</k></div>
<a id="L2136" name="L2136"></a>2136     <strong class="reserved">public</strong> <strong class="reserved">static</strong> &lt;K&gt; <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt; newKeySet(<strong class="reserved">int</strong> initialCapacity) <em class="brace">{</em>
<a id="L2137" name="L2137"></a>2137         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;
<a id="L2138" name="L2138"></a>2138             (<strong class="reserved">new</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;(initialCapacity), <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L2139" name="L2139"></a>2139     <em class="brace">}</em>
<a id="L2140" name="L2140"></a>2140 
<div class="comment">
      Returns a {@link Set} view of the keys in this map, using the
      given common mapped value for any additions (i.e., {@link
      Collection#add} and {@link Collection#addAll(Collection)}).
      This is of course only appropriate if it is acceptable to use
      the same value for all additions from this view.
      @param mappedValue the mapped value to use for any additions
      @return the set view
      @throws NullPointerException if the mappedValue is null</div>
<a id="L2152" name="L2152"></a>2152     <strong class="reserved">public</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,V&gt; <a href="../R/22393.html" title="Multiple referred from 182 places.">keySet</a>(V mappedValue) <em class="brace">{</em>
<a id="L2153" name="L2153"></a>2153         <strong class="reserved">if</strong> (mappedValue == <strong class="reserved">null</strong>)
<a id="L2154" name="L2154"></a>2154             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L2155" name="L2155"></a>2155         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L4536" title="Defined at 4536 in src/java/util/concurrent/ConcurrentHashMap.java.">KeySetView</a>&lt;K,V&gt;(<strong class="reserved">this</strong>, mappedValue);
<a id="L2156" name="L2156"></a>2156     <em class="brace">}</em>
<a id="L2157" name="L2157"></a>2157 
<div class="comment">
     /* ---------------- Special Nodes -------------- */</div>
<a id="L2159" name="L2159"></a>2159 
<div class="comment">
      A node inserted at head of bins during transfer operations.</div>
<a id="L2163" name="L2163"></a>2163     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3113.html" title="Multiple referred from 9 places.">ForwardingNode</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L2164" name="L2164"></a>2164         <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nextTable;
<a id="L2165" name="L2165"></a>2165         ForwardingNode(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab) <em class="brace">{</em>
<a id="L2166" name="L2166"></a>2166             <strong class="reserved">super</strong>(MOVED, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L2167" name="L2167"></a>2167             <strong class="reserved">this</strong>.nextTable = tab;
<a id="L2168" name="L2168"></a>2168         <em class="brace">}</em>
<a id="L2169" name="L2169"></a>2169 
<a id="L2170" name="L2170"></a>2170         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/14339.html" title="Multiple referred from 69 places.">find</a>(<strong class="reserved">int</strong> h, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k) <em class="brace">{</em>
<a id="L2171" name="L2171"></a>2171             <em class="comment">// loop to avoid arbitrarily deep recursion on forwarding nodes</em>
<a id="L2172" name="L2172"></a>2172             outer: <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = nextTable;;) <em class="brace">{</em>
<a id="L2173" name="L2173"></a>2173                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e; <strong class="reserved">int</strong> n;
<a id="L2174" name="L2174"></a>2174                 <strong class="reserved">if</strong> (k == <strong class="reserved">null</strong> || tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0 ||
<a id="L2175" name="L2175"></a>2175                     (e = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, (n - 1) &amp; h)) == <strong class="reserved">null</strong>)
<a id="L2176" name="L2176"></a>2176                     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2177" name="L2177"></a>2177                 <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L2178" name="L2178"></a>2178                     <strong class="reserved">int</strong> eh; K ek;
<a id="L2179" name="L2179"></a>2179                     <strong class="reserved">if</strong> ((eh = e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == h &amp;&amp;
<a id="L2180" name="L2180"></a>2180                         ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == k || (ek != <strong class="reserved">null</strong> &amp;&amp; k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek))))
<a id="L2181" name="L2181"></a>2181                         <strong class="reserved">return</strong> e;
<a id="L2182" name="L2182"></a>2182                     <strong class="reserved">if</strong> (eh &lt; 0) <em class="brace">{</em>
<a id="L2183" name="L2183"></a>2183                         <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>) <em class="brace">{</em>
<a id="L2184" name="L2184"></a>2184                             tab = ((<a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>&lt;K,V&gt;)e).nextTable;
<a id="L2185" name="L2185"></a>2185                             <strong class="reserved">continue</strong> outer;
<a id="L2186" name="L2186"></a>2186                         <em class="brace">}</em>
<a id="L2187" name="L2187"></a>2187                         <strong class="reserved">else</strong>
<a id="L2188" name="L2188"></a>2188                             <strong class="reserved">return</strong> e.<a href="../D/16082.html" title="Multiple defined in 26 places.">find</a>(h, k);
<a id="L2189" name="L2189"></a>2189                     <em class="brace">}</em>
<a id="L2190" name="L2190"></a>2190                     <strong class="reserved">if</strong> ((e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>)
<a id="L2191" name="L2191"></a>2191                         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2192" name="L2192"></a>2192                 <em class="brace">}</em>
<a id="L2193" name="L2193"></a>2193             <em class="brace">}</em>
<a id="L2194" name="L2194"></a>2194         <em class="brace">}</em>
<a id="L2195" name="L2195"></a>2195     <em class="brace">}</em>
<a id="L2196" name="L2196"></a>2196 
<div class="comment">
      A place-holder node used in computeIfAbsent and compute</div>
<a id="L2200" name="L2200"></a>2200     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6666.html" title="Multiple referred from 2 places.">ReservationNode</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L2201" name="L2201"></a>2201         ReservationNode() <em class="brace">{</em>
<a id="L2202" name="L2202"></a>2202             <strong class="reserved">super</strong>(RESERVED, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L2203" name="L2203"></a>2203         <em class="brace">}</em>
<a id="L2204" name="L2204"></a>2204 
<a id="L2205" name="L2205"></a>2205         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/14339.html" title="Multiple referred from 69 places.">find</a>(<strong class="reserved">int</strong> h, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k) <em class="brace">{</em>
<a id="L2206" name="L2206"></a>2206             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2207" name="L2207"></a>2207         <em class="brace">}</em>
<a id="L2208" name="L2208"></a>2208     <em class="brace">}</em>
<a id="L2209" name="L2209"></a>2209 
<div class="comment">
     /* ---------------- Table Initialization and Resizing -------------- */</div>
<a id="L2211" name="L2211"></a>2211 
<div class="comment">
      Returns the stamp bits for resizing a table of size n.
      Must be negative when shifted left by RESIZE_STAMP_SHIFT.</div>
<a id="L2216" name="L2216"></a>2216     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/26315.html" title="Multiple referred from 4 places.">resizeStamp</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L2217" name="L2217"></a>2217         <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/28378.html" title="Multiple defined in 2 places.">numberOfLeadingZeros</a>(n) | (1 &lt;&lt; (RESIZE_STAMP_BITS - 1));
<a id="L2218" name="L2218"></a>2218     <em class="brace">}</em>
<a id="L2219" name="L2219"></a>2219 
<div class="comment">
      Initializes table, using the size recorded in sizeCtl.</div>
<a id="L2223" name="L2223"></a>2223     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] <a href="../R/20661.html" title="Multiple referred from 5 places.">initTable</a>() <em class="brace">{</em>
<a id="L2224" name="L2224"></a>2224         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab; <strong class="reserved">int</strong> sc;
<a id="L2225" name="L2225"></a>2225         <strong class="reserved">while</strong> ((tab = table) == <strong class="reserved">null</strong> || tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) <em class="brace">{</em>
<a id="L2226" name="L2226"></a>2226             <strong class="reserved">if</strong> ((sc = sizeCtl) &lt; 0)
<a id="L2227" name="L2227"></a>2227                 <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L282" title="Defined at 282 in src/java/lang/Thread.java.">yield</a>(); <em class="comment">// lost initialization race; just spin</em>
<a id="L2228" name="L2228"></a>2228             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc, -1)) <em class="brace">{</em>
<a id="L2229" name="L2229"></a>2229                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2230" name="L2230"></a>2230                     <strong class="reserved">if</strong> ((tab = table) == <strong class="reserved">null</strong> || tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) <em class="brace">{</em>
<a id="L2231" name="L2231"></a>2231                         <strong class="reserved">int</strong> n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY;
<a id="L2232" name="L2232"></a>2232                         @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L2233" name="L2233"></a>2233                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nt = (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[])<strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;?,?&gt;[n];
<a id="L2234" name="L2234"></a>2234                         table = tab = nt;
<a id="L2235" name="L2235"></a>2235                         sc = n - (n &gt;&gt;&gt; 2);
<a id="L2236" name="L2236"></a>2236                     <em class="brace">}</em>
<a id="L2237" name="L2237"></a>2237                 <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2238" name="L2238"></a>2238                     sizeCtl = sc;
<a id="L2239" name="L2239"></a>2239                 <em class="brace">}</em>
<a id="L2240" name="L2240"></a>2240                 <strong class="reserved">break</strong>;
<a id="L2241" name="L2241"></a>2241             <em class="brace">}</em>
<a id="L2242" name="L2242"></a>2242         <em class="brace">}</em>
<a id="L2243" name="L2243"></a>2243         <strong class="reserved">return</strong> tab;
<a id="L2244" name="L2244"></a>2244     <em class="brace">}</em>
<a id="L2245" name="L2245"></a>2245 
<div class="comment">
      Adds to count, and if table is too small and not already
      resizing, initiates transfer. If already resizing, helps
      perform transfer if work is available.  Rechecks occupancy
      after a transfer to see if another resize is already needed
      because resizings are lagging additions.
      @param x the count to add
      @param check if &lt;0, don't check resize, if &lt;= 1 only check if uncontended</div>
<a id="L2256" name="L2256"></a>2256     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/9676.html" title="Multiple referred from 7 places.">addCount</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> <a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>) <em class="brace">{</em>
<a id="L2257" name="L2257"></a>2257         <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] as; <strong class="reserved">long</strong> b, s;
<a id="L2258" name="L2258"></a>2258         <strong class="reserved">if</strong> ((as = counterCells) != <strong class="reserved">null</strong> ||
<a id="L2259" name="L2259"></a>2259             !U.compareAndSwapLong(<strong class="reserved">this</strong>, BASECOUNT, b = baseCount, s = b + <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>)) <em class="brace">{</em>
<a id="L2260" name="L2260"></a>2260             <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">long</strong> v; <strong class="reserved">int</strong> m;
<a id="L2261" name="L2261"></a>2261             <strong class="reserved">boolean</strong> uncontended = <strong class="reserved">true</strong>;
<a id="L2262" name="L2262"></a>2262             <strong class="reserved">if</strong> (as == <strong class="reserved">null</strong> || (m = as.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1) &lt; 0 ||
<a id="L2263" name="L2263"></a>2263                 (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = as[<a href="../S/1056.html#L82" title="Defined at 82 in src/java/util/concurrent/ThreadLocalRandom.java.">ThreadLocalRandom</a>.<a href="../D/21692.html" title="Multiple defined in 2 places.">getProbe</a>() &amp; m]) == <strong class="reserved">null</strong> ||
<a id="L2264" name="L2264"></a>2264                 !(uncontended =
<a id="L2265" name="L2265"></a>2265                   U.compareAndSwapLong(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, CELLVALUE, v = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, v + <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>))) <em class="brace">{</em>
<a id="L2266" name="L2266"></a>2266                 <a href="../S/1074.html#L2524" title="Defined at 2524 in src/java/util/concurrent/ConcurrentHashMap.java.">fullAddCount</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, uncontended);
<a id="L2267" name="L2267"></a>2267                 <strong class="reserved">return</strong>;
<a id="L2268" name="L2268"></a>2268             <em class="brace">}</em>
<a id="L2269" name="L2269"></a>2269             <strong class="reserved">if</strong> (<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a> &lt;= 1)
<a id="L2270" name="L2270"></a>2270                 <strong class="reserved">return</strong>;
<a id="L2271" name="L2271"></a>2271             s = <a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L2272" name="L2272"></a>2272         <em class="brace">}</em>
<a id="L2273" name="L2273"></a>2273         <strong class="reserved">if</strong> (<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a> &gt;= 0) <em class="brace">{</em>
<a id="L2274" name="L2274"></a>2274             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, nt; <strong class="reserved">int</strong> n, sc;
<a id="L2275" name="L2275"></a>2275             <strong class="reserved">while</strong> (s &gt;= (<strong class="reserved">long</strong>)(sc = sizeCtl) &amp;&amp; (tab = table) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2276" name="L2276"></a>2276                    (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &lt; MAXIMUM_CAPACITY) <em class="brace">{</em>
<a id="L2277" name="L2277"></a>2277                 <strong class="reserved">int</strong> rs = <a href="../S/1074.html#L2216" title="Defined at 2216 in src/java/util/concurrent/ConcurrentHashMap.java.">resizeStamp</a>(n);
<a id="L2278" name="L2278"></a>2278                 <strong class="reserved">if</strong> (sc &lt; 0) <em class="brace">{</em>
<a id="L2279" name="L2279"></a>2279                     <strong class="reserved">if</strong> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
<a id="L2280" name="L2280"></a>2280                         sc == rs + MAX_RESIZERS || (nt = nextTable) == <strong class="reserved">null</strong> ||
<a id="L2281" name="L2281"></a>2281                         transferIndex &lt;= 0)
<a id="L2282" name="L2282"></a>2282                         <strong class="reserved">break</strong>;
<a id="L2283" name="L2283"></a>2283                     <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc, sc + 1))
<a id="L2284" name="L2284"></a>2284                         <a href="../D/35577.html" title="Multiple defined in 8 places.">transfer</a>(tab, nt);
<a id="L2285" name="L2285"></a>2285                 <em class="brace">}</em>
<a id="L2286" name="L2286"></a>2286                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc,
<a id="L2287" name="L2287"></a>2287                                              (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2))
<a id="L2288" name="L2288"></a>2288                     <a href="../D/35577.html" title="Multiple defined in 8 places.">transfer</a>(tab, <strong class="reserved">null</strong>);
<a id="L2289" name="L2289"></a>2289                 s = <a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L2290" name="L2290"></a>2290             <em class="brace">}</em>
<a id="L2291" name="L2291"></a>2291         <em class="brace">}</em>
<a id="L2292" name="L2292"></a>2292     <em class="brace">}</em>
<a id="L2293" name="L2293"></a>2293 
<div class="comment">
      Helps transfer if a resize is in progress.</div>
<a id="L2297" name="L2297"></a>2297     <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] <a href="../R/20315.html" title="Multiple referred from 7 places.">helpTransfer</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f) <em class="brace">{</em>
<a id="L2298" name="L2298"></a>2298         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nextTab; <strong class="reserved">int</strong> sc;
<a id="L2299" name="L2299"></a>2299         <strong class="reserved">if</strong> (tab != <strong class="reserved">null</strong> &amp;&amp; (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>) &amp;&amp;
<a id="L2300" name="L2300"></a>2300             (nextTab = ((<a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>&lt;K,V&gt;)f).nextTable) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2301" name="L2301"></a>2301             <strong class="reserved">int</strong> rs = <a href="../S/1074.html#L2216" title="Defined at 2216 in src/java/util/concurrent/ConcurrentHashMap.java.">resizeStamp</a>(tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L2302" name="L2302"></a>2302             <strong class="reserved">while</strong> (nextTab == nextTable &amp;&amp; table == tab &amp;&amp;
<a id="L2303" name="L2303"></a>2303                    (sc = sizeCtl) &lt; 0) <em class="brace">{</em>
<a id="L2304" name="L2304"></a>2304                 <strong class="reserved">if</strong> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
<a id="L2305" name="L2305"></a>2305                     sc == rs + MAX_RESIZERS || transferIndex &lt;= 0)
<a id="L2306" name="L2306"></a>2306                     <strong class="reserved">break</strong>;
<a id="L2307" name="L2307"></a>2307                 <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc, sc + 1)) <em class="brace">{</em>
<a id="L2308" name="L2308"></a>2308                     <a href="../D/35577.html" title="Multiple defined in 8 places.">transfer</a>(tab, nextTab);
<a id="L2309" name="L2309"></a>2309                     <strong class="reserved">break</strong>;
<a id="L2310" name="L2310"></a>2310                 <em class="brace">}</em>
<a id="L2311" name="L2311"></a>2311             <em class="brace">}</em>
<a id="L2312" name="L2312"></a>2312             <strong class="reserved">return</strong> nextTab;
<a id="L2313" name="L2313"></a>2313         <em class="brace">}</em>
<a id="L2314" name="L2314"></a>2314         <strong class="reserved">return</strong> table;
<a id="L2315" name="L2315"></a>2315     <em class="brace">}</em>
<a id="L2316" name="L2316"></a>2316 
<div class="comment">
      Tries to presize table to accommodate the given number of elements.
      @param size number of elements (doesn't need to be perfectly accurate)</div>
<a id="L2322" name="L2322"></a>2322     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29556.html" title="Multiple referred from 2 places.">tryPresize</a>(<strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>) <em class="brace">{</em>
<a id="L2323" name="L2323"></a>2323         <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY :
<a id="L2324" name="L2324"></a>2324             <a href="../D/35202.html" title="Multiple defined in 2 places.">tableSizeFor</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> + (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;&gt;&gt; 1) + 1);
<a id="L2325" name="L2325"></a>2325         <strong class="reserved">int</strong> sc;
<a id="L2326" name="L2326"></a>2326         <strong class="reserved">while</strong> ((sc = sizeCtl) &gt;= 0) <em class="brace">{</em>
<a id="L2327" name="L2327"></a>2327             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab = table; <strong class="reserved">int</strong> n;
<a id="L2328" name="L2328"></a>2328             <strong class="reserved">if</strong> (tab == <strong class="reserved">null</strong> || (n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) == 0) <em class="brace">{</em>
<a id="L2329" name="L2329"></a>2329                 n = (sc &gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) ? sc : <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L2330" name="L2330"></a>2330                 <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc, -1)) <em class="brace">{</em>
<a id="L2331" name="L2331"></a>2331                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2332" name="L2332"></a>2332                         <strong class="reserved">if</strong> (table == tab) <em class="brace">{</em>
<a id="L2333" name="L2333"></a>2333                             @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L2334" name="L2334"></a>2334                             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nt = (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[])<strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;?,?&gt;[n];
<a id="L2335" name="L2335"></a>2335                             table = nt;
<a id="L2336" name="L2336"></a>2336                             sc = n - (n &gt;&gt;&gt; 2);
<a id="L2337" name="L2337"></a>2337                         <em class="brace">}</em>
<a id="L2338" name="L2338"></a>2338                     <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2339" name="L2339"></a>2339                         sizeCtl = sc;
<a id="L2340" name="L2340"></a>2340                     <em class="brace">}</em>
<a id="L2341" name="L2341"></a>2341                 <em class="brace">}</em>
<a id="L2342" name="L2342"></a>2342             <em class="brace">}</em>
<a id="L2343" name="L2343"></a>2343             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= sc || n &gt;= MAXIMUM_CAPACITY)
<a id="L2344" name="L2344"></a>2344                 <strong class="reserved">break</strong>;
<a id="L2345" name="L2345"></a>2345             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (tab == table) <em class="brace">{</em>
<a id="L2346" name="L2346"></a>2346                 <strong class="reserved">int</strong> rs = <a href="../S/1074.html#L2216" title="Defined at 2216 in src/java/util/concurrent/ConcurrentHashMap.java.">resizeStamp</a>(n);
<a id="L2347" name="L2347"></a>2347                 <strong class="reserved">if</strong> (sc &lt; 0) <em class="brace">{</em>
<a id="L2348" name="L2348"></a>2348                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nt;
<a id="L2349" name="L2349"></a>2349                     <strong class="reserved">if</strong> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
<a id="L2350" name="L2350"></a>2350                         sc == rs + MAX_RESIZERS || (nt = nextTable) == <strong class="reserved">null</strong> ||
<a id="L2351" name="L2351"></a>2351                         transferIndex &lt;= 0)
<a id="L2352" name="L2352"></a>2352                         <strong class="reserved">break</strong>;
<a id="L2353" name="L2353"></a>2353                     <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc, sc + 1))
<a id="L2354" name="L2354"></a>2354                         <a href="../D/35577.html" title="Multiple defined in 8 places.">transfer</a>(tab, nt);
<a id="L2355" name="L2355"></a>2355                 <em class="brace">}</em>
<a id="L2356" name="L2356"></a>2356                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc,
<a id="L2357" name="L2357"></a>2357                                              (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2))
<a id="L2358" name="L2358"></a>2358                     <a href="../D/35577.html" title="Multiple defined in 8 places.">transfer</a>(tab, <strong class="reserved">null</strong>);
<a id="L2359" name="L2359"></a>2359             <em class="brace">}</em>
<a id="L2360" name="L2360"></a>2360         <em class="brace">}</em>
<a id="L2361" name="L2361"></a>2361     <em class="brace">}</em>
<a id="L2362" name="L2362"></a>2362 
<div class="comment">
      Moves and/or copies the nodes in each bin to new table. See
      above for explanation.</div>
<a id="L2367" name="L2367"></a>2367     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29413.html" title="Multiple referred from 15 places.">transfer</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nextTab) <em class="brace">{</em>
<a id="L2368" name="L2368"></a>2368         <strong class="reserved">int</strong> n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, stride;
<a id="L2369" name="L2369"></a>2369         <strong class="reserved">if</strong> ((stride = (NCPU &gt; 1) ? (n &gt;&gt;&gt; 3) / NCPU : n) &lt; MIN_TRANSFER_STRIDE)
<a id="L2370" name="L2370"></a>2370             stride = MIN_TRANSFER_STRIDE; <em class="comment">// subdivide range</em>
<a id="L2371" name="L2371"></a>2371         <strong class="reserved">if</strong> (nextTab == <strong class="reserved">null</strong>) <em class="brace">{</em>            <em class="comment">// initiating</em>
<a id="L2372" name="L2372"></a>2372             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2373" name="L2373"></a>2373                 @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L2374" name="L2374"></a>2374                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] nt = (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[])<strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;?,?&gt;[n &lt;&lt; 1];
<a id="L2375" name="L2375"></a>2375                 nextTab = nt;
<a id="L2376" name="L2376"></a>2376             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>      <em class="comment">// try to cope with OOME</em>
<a id="L2377" name="L2377"></a>2377                 sizeCtl = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L2378" name="L2378"></a>2378                 <strong class="reserved">return</strong>;
<a id="L2379" name="L2379"></a>2379             <em class="brace">}</em>
<a id="L2380" name="L2380"></a>2380             nextTable = nextTab;
<a id="L2381" name="L2381"></a>2381             transferIndex = n;
<a id="L2382" name="L2382"></a>2382         <em class="brace">}</em>
<a id="L2383" name="L2383"></a>2383         <strong class="reserved">int</strong> nextn = nextTab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2384" name="L2384"></a>2384         <a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>&lt;K,V&gt; fwd = <strong class="reserved">new</strong> <a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>&lt;K,V&gt;(nextTab);
<a id="L2385" name="L2385"></a>2385         <strong class="reserved">boolean</strong> <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">true</strong>;
<a id="L2386" name="L2386"></a>2386         <strong class="reserved">boolean</strong> finishing = <strong class="reserved">false</strong>; <em class="comment">// to ensure sweep before committing nextTab</em>
<a id="L2387" name="L2387"></a>2387         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0, bound = 0;;) <em class="brace">{</em>
<a id="L2388" name="L2388"></a>2388             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; f; <strong class="reserved">int</strong> fh;
<a id="L2389" name="L2389"></a>2389             <strong class="reserved">while</strong> (<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>) <em class="brace">{</em>
<a id="L2390" name="L2390"></a>2390                 <strong class="reserved">int</strong> <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>, nextBound;
<a id="L2391" name="L2391"></a>2391                 <strong class="reserved">if</strong> (--i &gt;= bound || finishing)
<a id="L2392" name="L2392"></a>2392                     <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">false</strong>;
<a id="L2393" name="L2393"></a>2393                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> = transferIndex) &lt;= 0) <em class="brace">{</em>
<a id="L2394" name="L2394"></a>2394                     i = -1;
<a id="L2395" name="L2395"></a>2395                     <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">false</strong>;
<a id="L2396" name="L2396"></a>2396                 <em class="brace">}</em>
<a id="L2397" name="L2397"></a>2397                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapInt
<a id="L2398" name="L2398"></a>2398                          (<strong class="reserved">this</strong>, TRANSFERINDEX, <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a>,
<a id="L2399" name="L2399"></a>2399                           nextBound = (<a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> &gt; stride ?
<a id="L2400" name="L2400"></a>2400                                        <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> - stride : 0))) <em class="brace">{</em>
<a id="L2401" name="L2401"></a>2401                     bound = nextBound;
<a id="L2402" name="L2402"></a>2402                     i = <a href="../D/28157.html" title="Multiple defined in 12 places.">nextIndex</a> - 1;
<a id="L2403" name="L2403"></a>2403                     <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">false</strong>;
<a id="L2404" name="L2404"></a>2404                 <em class="brace">}</em>
<a id="L2405" name="L2405"></a>2405             <em class="brace">}</em>
<a id="L2406" name="L2406"></a>2406             <strong class="reserved">if</strong> (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) <em class="brace">{</em>
<a id="L2407" name="L2407"></a>2407                 <strong class="reserved">int</strong> sc;
<a id="L2408" name="L2408"></a>2408                 <strong class="reserved">if</strong> (finishing) <em class="brace">{</em>
<a id="L2409" name="L2409"></a>2409                     nextTable = <strong class="reserved">null</strong>;
<a id="L2410" name="L2410"></a>2410                     table = nextTab;
<a id="L2411" name="L2411"></a>2411                     sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1);
<a id="L2412" name="L2412"></a>2412                     <strong class="reserved">return</strong>;
<a id="L2413" name="L2413"></a>2413                 <em class="brace">}</em>
<a id="L2414" name="L2414"></a>2414                 <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, SIZECTL, sc = sizeCtl, sc - 1)) <em class="brace">{</em>
<a id="L2415" name="L2415"></a>2415                     <strong class="reserved">if</strong> ((sc - 2) != <a href="../S/1074.html#L2216" title="Defined at 2216 in src/java/util/concurrent/ConcurrentHashMap.java.">resizeStamp</a>(n) &lt;&lt; RESIZE_STAMP_SHIFT)
<a id="L2416" name="L2416"></a>2416                         <strong class="reserved">return</strong>;
<a id="L2417" name="L2417"></a>2417                     finishing = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">true</strong>;
<a id="L2418" name="L2418"></a>2418                     i = n; <em class="comment">// recheck before commit</em>
<a id="L2419" name="L2419"></a>2419                 <em class="brace">}</em>
<a id="L2420" name="L2420"></a>2420             <em class="brace">}</em>
<a id="L2421" name="L2421"></a>2421             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((f = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i)) == <strong class="reserved">null</strong>)
<a id="L2422" name="L2422"></a>2422                 <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <a href="../S/1074.html#L758" title="Defined at 758 in src/java/util/concurrent/ConcurrentHashMap.java.">casTabAt</a>(tab, i, <strong class="reserved">null</strong>, fwd);
<a id="L2423" name="L2423"></a>2423             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((fh = f.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) == MOVED)
<a id="L2424" name="L2424"></a>2424                 <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">true</strong>; <em class="comment">// already processed</em>
<a id="L2425" name="L2425"></a>2425             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2426" name="L2426"></a>2426                 <strong class="reserved">synchronized</strong> (f) <em class="brace">{</em>
<a id="L2427" name="L2427"></a>2427                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, i) == f) <em class="brace">{</em>
<a id="L2428" name="L2428"></a>2428                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; ln, hn;
<a id="L2429" name="L2429"></a>2429                         <strong class="reserved">if</strong> (fh &gt;= 0) <em class="brace">{</em>
<a id="L2430" name="L2430"></a>2430                             <strong class="reserved">int</strong> runBit = fh &amp; n;
<a id="L2431" name="L2431"></a>2431                             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; lastRun = f;
<a id="L2432" name="L2432"></a>2432                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p = f.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>; p != <strong class="reserved">null</strong>; p = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L2433" name="L2433"></a>2433                                 <strong class="reserved">int</strong> b = p.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp; n;
<a id="L2434" name="L2434"></a>2434                                 <strong class="reserved">if</strong> (b != runBit) <em class="brace">{</em>
<a id="L2435" name="L2435"></a>2435                                     runBit = b;
<a id="L2436" name="L2436"></a>2436                                     lastRun = p;
<a id="L2437" name="L2437"></a>2437                                 <em class="brace">}</em>
<a id="L2438" name="L2438"></a>2438                             <em class="brace">}</em>
<a id="L2439" name="L2439"></a>2439                             <strong class="reserved">if</strong> (runBit == 0) <em class="brace">{</em>
<a id="L2440" name="L2440"></a>2440                                 ln = lastRun;
<a id="L2441" name="L2441"></a>2441                                 hn = <strong class="reserved">null</strong>;
<a id="L2442" name="L2442"></a>2442                             <em class="brace">}</em>
<a id="L2443" name="L2443"></a>2443                             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2444" name="L2444"></a>2444                                 hn = lastRun;
<a id="L2445" name="L2445"></a>2445                                 ln = <strong class="reserved">null</strong>;
<a id="L2446" name="L2446"></a>2446                             <em class="brace">}</em>
<a id="L2447" name="L2447"></a>2447                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p = f; p != lastRun; p = p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L2448" name="L2448"></a>2448                                 <strong class="reserved">int</strong> ph = p.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>; K pk = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>; V pv = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2449" name="L2449"></a>2449                                 <strong class="reserved">if</strong> ((ph &amp; n) == 0)
<a id="L2450" name="L2450"></a>2450                                     ln = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(ph, pk, pv, ln);
<a id="L2451" name="L2451"></a>2451                                 <strong class="reserved">else</strong>
<a id="L2452" name="L2452"></a>2452                                     hn = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(ph, pk, pv, hn);
<a id="L2453" name="L2453"></a>2453                             <em class="brace">}</em>
<a id="L2454" name="L2454"></a>2454                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(nextTab, i, ln);
<a id="L2455" name="L2455"></a>2455                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(nextTab, i + n, hn);
<a id="L2456" name="L2456"></a>2456                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, fwd);
<a id="L2457" name="L2457"></a>2457                             <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">true</strong>;
<a id="L2458" name="L2458"></a>2458                         <em class="brace">}</em>
<a id="L2459" name="L2459"></a>2459                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>) <em class="brace">{</em>
<a id="L2460" name="L2460"></a>2460                             <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt; t = (<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)f;
<a id="L2461" name="L2461"></a>2461                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; lo = <strong class="reserved">null</strong>, loTail = <strong class="reserved">null</strong>;
<a id="L2462" name="L2462"></a>2462                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; hi = <strong class="reserved">null</strong>, hiTail = <strong class="reserved">null</strong>;
<a id="L2463" name="L2463"></a>2463                             <strong class="reserved">int</strong> lc = 0, hc = 0;
<a id="L2464" name="L2464"></a>2464                             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = t.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>; e != <strong class="reserved">null</strong>; e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L2465" name="L2465"></a>2465                                 <strong class="reserved">int</strong> h = e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L2466" name="L2466"></a>2466                                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p = <strong class="reserved">new</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;
<a id="L2467" name="L2467"></a>2467                                     (h, e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L2468" name="L2468"></a>2468                                 <strong class="reserved">if</strong> ((h &amp; n) == 0) <em class="brace">{</em>
<a id="L2469" name="L2469"></a>2469                                     <strong class="reserved">if</strong> ((p.prev = loTail) == <strong class="reserved">null</strong>)
<a id="L2470" name="L2470"></a>2470                                         lo = p;
<a id="L2471" name="L2471"></a>2471                                     <strong class="reserved">else</strong>
<a id="L2472" name="L2472"></a>2472                                         loTail.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p;
<a id="L2473" name="L2473"></a>2473                                     loTail = p;
<a id="L2474" name="L2474"></a>2474                                     ++lc;
<a id="L2475" name="L2475"></a>2475                                 <em class="brace">}</em>
<a id="L2476" name="L2476"></a>2476                                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2477" name="L2477"></a>2477                                     <strong class="reserved">if</strong> ((p.prev = hiTail) == <strong class="reserved">null</strong>)
<a id="L2478" name="L2478"></a>2478                                         hi = p;
<a id="L2479" name="L2479"></a>2479                                     <strong class="reserved">else</strong>
<a id="L2480" name="L2480"></a>2480                                         hiTail.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p;
<a id="L2481" name="L2481"></a>2481                                     hiTail = p;
<a id="L2482" name="L2482"></a>2482                                     ++hc;
<a id="L2483" name="L2483"></a>2483                                 <em class="brace">}</em>
<a id="L2484" name="L2484"></a>2484                             <em class="brace">}</em>
<a id="L2485" name="L2485"></a>2485                             ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? <a href="../D/36021.html" title="Multiple defined in 2 places.">untreeify</a>(lo) :
<a id="L2486" name="L2486"></a>2486                                 (hc != 0) ? <strong class="reserved">new</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;(lo) : t;
<a id="L2487" name="L2487"></a>2487                             hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? <a href="../D/36021.html" title="Multiple defined in 2 places.">untreeify</a>(hi) :
<a id="L2488" name="L2488"></a>2488                                 (lc != 0) ? <strong class="reserved">new</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;(hi) : t;
<a id="L2489" name="L2489"></a>2489                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(nextTab, i, ln);
<a id="L2490" name="L2490"></a>2490                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(nextTab, i + n, hn);
<a id="L2491" name="L2491"></a>2491                             <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, i, fwd);
<a id="L2492" name="L2492"></a>2492                             <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a> = <strong class="reserved">true</strong>;
<a id="L2493" name="L2493"></a>2493                         <em class="brace">}</em>
<a id="L2494" name="L2494"></a>2494                     <em class="brace">}</em>
<a id="L2495" name="L2495"></a>2495                 <em class="brace">}</em>
<a id="L2496" name="L2496"></a>2496             <em class="brace">}</em>
<a id="L2497" name="L2497"></a>2497         <em class="brace">}</em>
<a id="L2498" name="L2498"></a>2498     <em class="brace">}</em>
<a id="L2499" name="L2499"></a>2499 
<div class="comment">
     /* ---------------- Counter support -------------- */</div>
<a id="L2501" name="L2501"></a>2501 
<div class="comment">
      A padded cell for distributing counts.  Adapted from LongAdder
      and Striped64.  See their internal docs for explanation.</div>
<a id="L2506" name="L2506"></a>2506     @sun.misc.<a href="../D/1850.html" title="Multiple defined in 3 places.">Contended</a> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/1789.html" title="Multiple referred from 11 places.">CounterCell</a> <em class="brace">{</em>
<a id="L2507" name="L2507"></a>2507         <strong class="reserved">volatile</strong> <strong class="reserved">long</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L2508" name="L2508"></a>2508         CounterCell(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>; <em class="brace">}</em>
<a id="L2509" name="L2509"></a>2509     <em class="brace">}</em>
<a id="L2510" name="L2510"></a>2510 
<a id="L2511" name="L2511"></a>2511     <strong class="reserved">final</strong> <strong class="reserved">long</strong> <a href="../R/29033.html" title="Multiple referred from 9 places.">sumCount</a>() <em class="brace">{</em>
<a id="L2512" name="L2512"></a>2512         <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] as = counterCells; <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L2513" name="L2513"></a>2513         <strong class="reserved">long</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = baseCount;
<a id="L2514" name="L2514"></a>2514         <strong class="reserved">if</strong> (as != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2515" name="L2515"></a>2515             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; as.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; ++i) <em class="brace">{</em>
<a id="L2516" name="L2516"></a>2516                 <strong class="reserved">if</strong> ((<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = as[i]) != <strong class="reserved">null</strong>)
<a id="L2517" name="L2517"></a>2517                     <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> += <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L2518" name="L2518"></a>2518             <em class="brace">}</em>
<a id="L2519" name="L2519"></a>2519         <em class="brace">}</em>
<a id="L2520" name="L2520"></a>2520         <strong class="reserved">return</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>;
<a id="L2521" name="L2521"></a>2521     <em class="brace">}</em>
<a id="L2522" name="L2522"></a>2522 
<a id="L2523" name="L2523"></a>2523     <em class="comment">// See LongAdder version for explanation</em>
<a id="L2524" name="L2524"></a>2524     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/1074.html#L2266" title="Referred from 2266 in src/java/util/concurrent/ConcurrentHashMap.java.">fullAddCount</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">boolean</strong> wasUncontended) <em class="brace">{</em>
<a id="L2525" name="L2525"></a>2525         <strong class="reserved">int</strong> h;
<a id="L2526" name="L2526"></a>2526         <strong class="reserved">if</strong> ((h = <a href="../S/1056.html#L82" title="Defined at 82 in src/java/util/concurrent/ThreadLocalRandom.java.">ThreadLocalRandom</a>.<a href="../D/21692.html" title="Multiple defined in 2 places.">getProbe</a>()) == 0) <em class="brace">{</em>
<a id="L2527" name="L2527"></a>2527             <a href="../S/1056.html#L82" title="Defined at 82 in src/java/util/concurrent/ThreadLocalRandom.java.">ThreadLocalRandom</a>.<a href="../S/1056.html#L207" title="Defined at 207 in src/java/util/concurrent/ThreadLocalRandom.java.">localInit</a>();      <em class="comment">// force initialization</em>
<a id="L2528" name="L2528"></a>2528             h = <a href="../S/1056.html#L82" title="Defined at 82 in src/java/util/concurrent/ThreadLocalRandom.java.">ThreadLocalRandom</a>.<a href="../D/21692.html" title="Multiple defined in 2 places.">getProbe</a>();
<a id="L2529" name="L2529"></a>2529             wasUncontended = <strong class="reserved">true</strong>;
<a id="L2530" name="L2530"></a>2530         <em class="brace">}</em>
<a id="L2531" name="L2531"></a>2531         <strong class="reserved">boolean</strong> collide = <strong class="reserved">false</strong>;                <em class="comment">// True if last slot nonempty</em>
<a id="L2532" name="L2532"></a>2532         <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L2533" name="L2533"></a>2533             <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] as; <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">int</strong> n; <strong class="reserved">long</strong> v;
<a id="L2534" name="L2534"></a>2534             <strong class="reserved">if</strong> ((as = counterCells) != <strong class="reserved">null</strong> &amp;&amp; (n = as.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &gt; 0) <em class="brace">{</em>
<a id="L2535" name="L2535"></a>2535                 <strong class="reserved">if</strong> ((<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = as[(n - 1) &amp; h]) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2536" name="L2536"></a>2536                     <strong class="reserved">if</strong> (cellsBusy == 0) <em class="brace">{</em>            <em class="comment">// Try to attach new Cell</em>
<a id="L2537" name="L2537"></a>2537                         <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a> r = <strong class="reserved">new</strong> <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>); <em class="comment">// Optimistic create</em>
<a id="L2538" name="L2538"></a>2538                         <strong class="reserved">if</strong> (cellsBusy == 0 &amp;&amp;
<a id="L2539" name="L2539"></a>2539                             U.compareAndSwapInt(<strong class="reserved">this</strong>, CELLSBUSY, 0, 1)) <em class="brace">{</em>
<a id="L2540" name="L2540"></a>2540                             <strong class="reserved">boolean</strong> created = <strong class="reserved">false</strong>;
<a id="L2541" name="L2541"></a>2541                             <strong class="reserved">try</strong> <em class="brace">{</em>               <em class="comment">// Recheck under lock</em>
<a id="L2542" name="L2542"></a>2542                                 <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] rs; <strong class="reserved">int</strong> m, j;
<a id="L2543" name="L2543"></a>2543                                 <strong class="reserved">if</strong> ((rs = counterCells) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2544" name="L2544"></a>2544                                     (m = rs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &gt; 0 &amp;&amp;
<a id="L2545" name="L2545"></a>2545                                     rs[j = (m - 1) &amp; h] == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2546" name="L2546"></a>2546                                     rs[j] = r;
<a id="L2547" name="L2547"></a>2547                                     created = <strong class="reserved">true</strong>;
<a id="L2548" name="L2548"></a>2548                                 <em class="brace">}</em>
<a id="L2549" name="L2549"></a>2549                             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2550" name="L2550"></a>2550                                 cellsBusy = 0;
<a id="L2551" name="L2551"></a>2551                             <em class="brace">}</em>
<a id="L2552" name="L2552"></a>2552                             <strong class="reserved">if</strong> (created)
<a id="L2553" name="L2553"></a>2553                                 <strong class="reserved">break</strong>;
<a id="L2554" name="L2554"></a>2554                             <strong class="reserved">continue</strong>;           <em class="comment">// Slot is now non-empty</em>
<a id="L2555" name="L2555"></a>2555                         <em class="brace">}</em>
<a id="L2556" name="L2556"></a>2556                     <em class="brace">}</em>
<a id="L2557" name="L2557"></a>2557                     collide = <strong class="reserved">false</strong>;
<a id="L2558" name="L2558"></a>2558                 <em class="brace">}</em>
<a id="L2559" name="L2559"></a>2559                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!wasUncontended)       <em class="comment">// CAS already known to fail</em>
<a id="L2560" name="L2560"></a>2560                     wasUncontended = <strong class="reserved">true</strong>;      <em class="comment">// Continue after rehash</em>
<a id="L2561" name="L2561"></a>2561                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapLong(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, CELLVALUE, v = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, v + <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>))
<a id="L2562" name="L2562"></a>2562                     <strong class="reserved">break</strong>;
<a id="L2563" name="L2563"></a>2563                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (counterCells != as || n &gt;= NCPU)
<a id="L2564" name="L2564"></a>2564                     collide = <strong class="reserved">false</strong>;            <em class="comment">// At max size or stale</em>
<a id="L2565" name="L2565"></a>2565                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!collide)
<a id="L2566" name="L2566"></a>2566                     collide = <strong class="reserved">true</strong>;
<a id="L2567" name="L2567"></a>2567                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (cellsBusy == 0 &amp;&amp;
<a id="L2568" name="L2568"></a>2568                          U.compareAndSwapInt(<strong class="reserved">this</strong>, CELLSBUSY, 0, 1)) <em class="brace">{</em>
<a id="L2569" name="L2569"></a>2569                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2570" name="L2570"></a>2570                         <strong class="reserved">if</strong> (counterCells == as) <em class="brace">{</em><em class="comment">// Expand table unless stale</em>
<a id="L2571" name="L2571"></a>2571                             <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] rs = <strong class="reserved">new</strong> <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[n &lt;&lt; 1];
<a id="L2572" name="L2572"></a>2572                             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; ++i)
<a id="L2573" name="L2573"></a>2573                                 rs[i] = as[i];
<a id="L2574" name="L2574"></a>2574                             counterCells = rs;
<a id="L2575" name="L2575"></a>2575                         <em class="brace">}</em>
<a id="L2576" name="L2576"></a>2576                     <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2577" name="L2577"></a>2577                         cellsBusy = 0;
<a id="L2578" name="L2578"></a>2578                     <em class="brace">}</em>
<a id="L2579" name="L2579"></a>2579                     collide = <strong class="reserved">false</strong>;
<a id="L2580" name="L2580"></a>2580                     <strong class="reserved">continue</strong>;                   <em class="comment">// Retry with expanded table</em>
<a id="L2581" name="L2581"></a>2581                 <em class="brace">}</em>
<a id="L2582" name="L2582"></a>2582                 h = <a href="../S/1056.html#L82" title="Defined at 82 in src/java/util/concurrent/ThreadLocalRandom.java.">ThreadLocalRandom</a>.<a href="../D/11251.html" title="Multiple defined in 2 places.">advanceProbe</a>(h);
<a id="L2583" name="L2583"></a>2583             <em class="brace">}</em>
<a id="L2584" name="L2584"></a>2584             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (cellsBusy == 0 &amp;&amp; counterCells == as &amp;&amp;
<a id="L2585" name="L2585"></a>2585                      U.compareAndSwapInt(<strong class="reserved">this</strong>, CELLSBUSY, 0, 1)) <em class="brace">{</em>
<a id="L2586" name="L2586"></a>2586                 <strong class="reserved">boolean</strong> <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a> = <strong class="reserved">false</strong>;
<a id="L2587" name="L2587"></a>2587                 <strong class="reserved">try</strong> <em class="brace">{</em>                           <em class="comment">// Initialize table</em>
<a id="L2588" name="L2588"></a>2588                     <strong class="reserved">if</strong> (counterCells == as) <em class="brace">{</em>
<a id="L2589" name="L2589"></a>2589                         <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[] rs = <strong class="reserved">new</strong> <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>[2];
<a id="L2590" name="L2590"></a>2590                         rs[h &amp; 1] = <strong class="reserved">new</strong> <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L2591" name="L2591"></a>2591                         counterCells = rs;
<a id="L2592" name="L2592"></a>2592                         <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a> = <strong class="reserved">true</strong>;
<a id="L2593" name="L2593"></a>2593                     <em class="brace">}</em>
<a id="L2594" name="L2594"></a>2594                 <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2595" name="L2595"></a>2595                     cellsBusy = 0;
<a id="L2596" name="L2596"></a>2596                 <em class="brace">}</em>
<a id="L2597" name="L2597"></a>2597                 <strong class="reserved">if</strong> (<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>)
<a id="L2598" name="L2598"></a>2598                     <strong class="reserved">break</strong>;
<a id="L2599" name="L2599"></a>2599             <em class="brace">}</em>
<a id="L2600" name="L2600"></a>2600             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapLong(<strong class="reserved">this</strong>, BASECOUNT, v = baseCount, v + <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>))
<a id="L2601" name="L2601"></a>2601                 <strong class="reserved">break</strong>;                          <em class="comment">// Fall back on using base</em>
<a id="L2602" name="L2602"></a>2602         <em class="brace">}</em>
<a id="L2603" name="L2603"></a>2603     <em class="brace">}</em>
<a id="L2604" name="L2604"></a>2604 
<div class="comment">
     /* ---------------- Conversion from/to TreeBins -------------- */</div>
<a id="L2606" name="L2606"></a>2606 
<div class="comment">
      Replaces all linked nodes in bin at given index unless table is
      too small, in which case resizes instead.</div>
<a id="L2611" name="L2611"></a>2611     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29524.html" title="Multiple referred from 8 places.">treeifyBin</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L2612" name="L2612"></a>2612         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; b; <strong class="reserved">int</strong> n, sc;
<a id="L2613" name="L2613"></a>2613         <strong class="reserved">if</strong> (tab != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2614" name="L2614"></a>2614             <strong class="reserved">if</strong> ((n = tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &lt; MIN_TREEIFY_CAPACITY)
<a id="L2615" name="L2615"></a>2615                 <a href="../S/1074.html#L2322" title="Defined at 2322 in src/java/util/concurrent/ConcurrentHashMap.java.">tryPresize</a>(n &lt;&lt; 1);
<a id="L2616" name="L2616"></a>2616             <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((b = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)) != <strong class="reserved">null</strong> &amp;&amp; b.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &gt;= 0) <em class="brace">{</em>
<a id="L2617" name="L2617"></a>2617                 <strong class="reserved">synchronized</strong> (b) <em class="brace">{</em>
<a id="L2618" name="L2618"></a>2618                     <strong class="reserved">if</strong> (<a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(tab, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) == b) <em class="brace">{</em>
<a id="L2619" name="L2619"></a>2619                         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; hd = <strong class="reserved">null</strong>, tl = <strong class="reserved">null</strong>;
<a id="L2620" name="L2620"></a>2620                         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = b; e != <strong class="reserved">null</strong>; e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L2621" name="L2621"></a>2621                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p =
<a id="L2622" name="L2622"></a>2622                                 <strong class="reserved">new</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;(e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, e.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>,
<a id="L2623" name="L2623"></a>2623                                                   <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L2624" name="L2624"></a>2624                             <strong class="reserved">if</strong> ((p.prev = tl) == <strong class="reserved">null</strong>)
<a id="L2625" name="L2625"></a>2625                                 hd = p;
<a id="L2626" name="L2626"></a>2626                             <strong class="reserved">else</strong>
<a id="L2627" name="L2627"></a>2627                                 tl.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p;
<a id="L2628" name="L2628"></a>2628                             tl = p;
<a id="L2629" name="L2629"></a>2629                         <em class="brace">}</em>
<a id="L2630" name="L2630"></a>2630                         <a href="../S/1074.html#L763" title="Defined at 763 in src/java/util/concurrent/ConcurrentHashMap.java.">setTabAt</a>(tab, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">new</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;(hd));
<a id="L2631" name="L2631"></a>2631                     <em class="brace">}</em>
<a id="L2632" name="L2632"></a>2632                 <em class="brace">}</em>
<a id="L2633" name="L2633"></a>2633             <em class="brace">}</em>
<a id="L2634" name="L2634"></a>2634         <em class="brace">}</em>
<a id="L2635" name="L2635"></a>2635     <em class="brace">}</em>
<a id="L2636" name="L2636"></a>2636 
<div class="comment">
      Returns a list on non-TreeNodes replacing those in given list.</div>
<a id="L2640" name="L2640"></a>2640     <strong class="reserved">static</strong> &lt;K,V&gt; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/29793.html" title="Multiple referred from 9 places.">untreeify</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; b) <em class="brace">{</em>
<a id="L2641" name="L2641"></a>2641         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; hd = <strong class="reserved">null</strong>, tl = <strong class="reserved">null</strong>;
<a id="L2642" name="L2642"></a>2642         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; q = b; q != <strong class="reserved">null</strong>; q = q.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L2643" name="L2643"></a>2643             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;(q.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, q.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, q.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">null</strong>);
<a id="L2644" name="L2644"></a>2644             <strong class="reserved">if</strong> (tl == <strong class="reserved">null</strong>)
<a id="L2645" name="L2645"></a>2645                 hd = p;
<a id="L2646" name="L2646"></a>2646             <strong class="reserved">else</strong>
<a id="L2647" name="L2647"></a>2647                 tl.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = p;
<a id="L2648" name="L2648"></a>2648             tl = p;
<a id="L2649" name="L2649"></a>2649         <em class="brace">}</em>
<a id="L2650" name="L2650"></a>2650         <strong class="reserved">return</strong> hd;
<a id="L2651" name="L2651"></a>2651     <em class="brace">}</em>
<a id="L2652" name="L2652"></a>2652 
<div class="comment">
     /* ---------------- TreeNodes -------------- */</div>
<a id="L2654" name="L2654"></a>2654 
<div class="comment">
      Nodes for use in TreeBins</div>
<a id="L2658" name="L2658"></a>2658     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8315.html" title="Multiple referred from 266 places.">TreeNode</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L2659" name="L2659"></a>2659         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;  <em class="comment">// red-black tree links</em>
<a id="L2660" name="L2660"></a>2660         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; left;
<a id="L2661" name="L2661"></a>2661         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; right;
<a id="L2662" name="L2662"></a>2662         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; prev;    <em class="comment">// needed to unlink next upon deletion</em>
<a id="L2663" name="L2663"></a>2663         <strong class="reserved">boolean</strong> red;
<a id="L2664" name="L2664"></a>2664 
<a id="L2665" name="L2665"></a>2665         TreeNode(<strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>,
<a id="L2666" name="L2666"></a>2666                  <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L2667" name="L2667"></a>2667             <strong class="reserved">super</strong>(<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L2668" name="L2668"></a>2668             <strong class="reserved">this</strong>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L2669" name="L2669"></a>2669         <em class="brace">}</em>
<a id="L2670" name="L2670"></a>2670 
<a id="L2671" name="L2671"></a>2671         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/14339.html" title="Multiple referred from 69 places.">find</a>(<strong class="reserved">int</strong> h, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k) <em class="brace">{</em>
<a id="L2672" name="L2672"></a>2672             <strong class="reserved">return</strong> <a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, k, <strong class="reserved">null</strong>);
<a id="L2673" name="L2673"></a>2673         <em class="brace">}</em>
<a id="L2674" name="L2674"></a>2674 
<div class="comment">
          Returns the TreeNode (or null if not found) for the given key
          starting at given root.</div>
<a id="L2679" name="L2679"></a>2679         <strong class="reserved">final</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../R/14494.html" title="Multiple referred from 10 places.">findTreeNode</a>(<strong class="reserved">int</strong> h, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; kc) <em class="brace">{</em>
<a id="L2680" name="L2680"></a>2680             <strong class="reserved">if</strong> (k != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2681" name="L2681"></a>2681                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p = <strong class="reserved">this</strong>;
<a id="L2682" name="L2682"></a>2682                 <strong class="reserved">do</strong>  <em class="brace">{</em>
<a id="L2683" name="L2683"></a>2683                     <strong class="reserved">int</strong> ph, dir; K pk; <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; q;
<a id="L2684" name="L2684"></a>2684                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; pl = p.left, <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a> = p.right;
<a id="L2685" name="L2685"></a>2685                     <strong class="reserved">if</strong> ((ph = p.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) &gt; h)
<a id="L2686" name="L2686"></a>2686                         p = pl;
<a id="L2687" name="L2687"></a>2687                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ph &lt; h)
<a id="L2688" name="L2688"></a>2688                         p = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>;
<a id="L2689" name="L2689"></a>2689                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((pk = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == k || (pk != <strong class="reserved">null</strong> &amp;&amp; k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(pk)))
<a id="L2690" name="L2690"></a>2690                         <strong class="reserved">return</strong> p;
<a id="L2691" name="L2691"></a>2691                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pl == <strong class="reserved">null</strong>)
<a id="L2692" name="L2692"></a>2692                         p = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>;
<a id="L2693" name="L2693"></a>2693                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a> == <strong class="reserved">null</strong>)
<a id="L2694" name="L2694"></a>2694                         p = pl;
<a id="L2695" name="L2695"></a>2695                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((kc != <strong class="reserved">null</strong> ||
<a id="L2696" name="L2696"></a>2696                               (kc = <a href="../D/13029.html" title="Multiple defined in 2 places.">comparableClassFor</a>(k)) != <strong class="reserved">null</strong>) &amp;&amp;
<a id="L2697" name="L2697"></a>2697                              (dir = <a href="../D/13048.html" title="Multiple defined in 2 places.">compareComparables</a>(kc, k, pk)) != 0)
<a id="L2698" name="L2698"></a>2698                         p = (dir &lt; 0) ? pl : <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>;
<a id="L2699" name="L2699"></a>2699                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((q = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, k, kc)) != <strong class="reserved">null</strong>)
<a id="L2700" name="L2700"></a>2700                         <strong class="reserved">return</strong> q;
<a id="L2701" name="L2701"></a>2701                     <strong class="reserved">else</strong>
<a id="L2702" name="L2702"></a>2702                         p = pl;
<a id="L2703" name="L2703"></a>2703                 <em class="brace">}</em> <strong class="reserved">while</strong> (p != <strong class="reserved">null</strong>);
<a id="L2704" name="L2704"></a>2704             <em class="brace">}</em>
<a id="L2705" name="L2705"></a>2705             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2706" name="L2706"></a>2706         <em class="brace">}</em>
<a id="L2707" name="L2707"></a>2707     <em class="brace">}</em>
<a id="L2708" name="L2708"></a>2708 
<div class="comment">
     /* ---------------- TreeBins -------------- */</div>
<a id="L2710" name="L2710"></a>2710 
<div class="comment">
      TreeNodes used at the heads of bins. TreeBins do not hold user
      keys or values, but instead point to list of TreeNodes and
      their root. They also maintain a parasitic read-write lock
      forcing writers (who hold bin lock) to wait for readers (who do
      not) to complete before tree restructuring operations.</div>
<a id="L2718" name="L2718"></a>2718     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8295.html" title="Multiple referred from 26 places.">TreeBin</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L2719" name="L2719"></a>2719         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L2720" name="L2720"></a>2720         <strong class="reserved">volatile</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L2721" name="L2721"></a>2721         <strong class="reserved">volatile</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> waiter;
<a id="L2722" name="L2722"></a>2722         <strong class="reserved">volatile</strong> <strong class="reserved">int</strong> lockState;
<a id="L2723" name="L2723"></a>2723         <em class="comment">// values for lockState</em>
<a id="L2724" name="L2724"></a>2724         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> WRITER = 1; <em class="comment">// set while holding write lock</em>
<a id="L2725" name="L2725"></a>2725         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> WAITER = 2; <em class="comment">// set when waiting for write lock</em>
<a id="L2726" name="L2726"></a>2726         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/3764.html#L1337" title="Defined at 1337 in src/javax/print/DocFlavor.java.">READER</a> = 4; <em class="comment">// increment value for setting read lock</em>
<a id="L2727" name="L2727"></a>2727 
<div class="comment">
          Tie-breaking utility for ordering insertions when equal
          hashCodes and non-comparable. We don't require a total
          order, just a consistent insertion rule to maintain
          equivalence across rebalancings. Tie-breaking further than
          necessary simplifies testing a bit.</div>
<a id="L2735" name="L2735"></a>2735         <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/29195.html" title="Multiple referred from 4 places.">tieBreakOrder</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> b) <em class="brace">{</em>
<a id="L2736" name="L2736"></a>2736             <strong class="reserved">int</strong> d;
<a id="L2737" name="L2737"></a>2737             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || b == <strong class="reserved">null</strong> ||
<a id="L2738" name="L2738"></a>2738                 (d = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().
<a id="L2739" name="L2739"></a>2739                  <a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(b.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>())) == 0)
<a id="L2740" name="L2740"></a>2740                 d = (<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L508" title="Defined at 508 in src/java/lang/System.java.">identityHashCode</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) &lt;= <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L508" title="Defined at 508 in src/java/lang/System.java.">identityHashCode</a>(b) ?
<a id="L2741" name="L2741"></a>2741                      -1 : 1);
<a id="L2742" name="L2742"></a>2742             <strong class="reserved">return</strong> d;
<a id="L2743" name="L2743"></a>2743         <em class="brace">}</em>
<a id="L2744" name="L2744"></a>2744 
<div class="comment">
          Creates bin with initial set of nodes headed by b.</div>
<a id="L2748" name="L2748"></a>2748         TreeBin(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; b) <em class="brace">{</em>
<a id="L2749" name="L2749"></a>2749             <strong class="reserved">super</strong>(TREEBIN, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L2750" name="L2750"></a>2750             <strong class="reserved">this</strong>.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = b;
<a id="L2751" name="L2751"></a>2751             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r = <strong class="reserved">null</strong>;
<a id="L2752" name="L2752"></a>2752             <strong class="reserved">for</strong> (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = b, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> != <strong class="reserved">null</strong>; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L2753" name="L2753"></a>2753                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;)<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2754" name="L2754"></a>2754                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.left = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.right = <strong class="reserved">null</strong>;
<a id="L2755" name="L2755"></a>2755                 <strong class="reserved">if</strong> (r == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2756" name="L2756"></a>2756                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <strong class="reserved">null</strong>;
<a id="L2757" name="L2757"></a>2757                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red = <strong class="reserved">false</strong>;
<a id="L2758" name="L2758"></a>2758                     r = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2759" name="L2759"></a>2759                 <em class="brace">}</em>
<a id="L2760" name="L2760"></a>2760                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2761" name="L2761"></a>2761                     K k = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L2762" name="L2762"></a>2762                     <strong class="reserved">int</strong> h = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L2763" name="L2763"></a>2763                     <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; kc = <strong class="reserved">null</strong>;
<a id="L2764" name="L2764"></a>2764                     <strong class="reserved">for</strong> (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p = r;;) <em class="brace">{</em>
<a id="L2765" name="L2765"></a>2765                         <strong class="reserved">int</strong> dir, ph;
<a id="L2766" name="L2766"></a>2766                         K pk = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L2767" name="L2767"></a>2767                         <strong class="reserved">if</strong> ((ph = p.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) &gt; h)
<a id="L2768" name="L2768"></a>2768                             dir = -1;
<a id="L2769" name="L2769"></a>2769                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ph &lt; h)
<a id="L2770" name="L2770"></a>2770                             dir = 1;
<a id="L2771" name="L2771"></a>2771                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((kc == <strong class="reserved">null</strong> &amp;&amp;
<a id="L2772" name="L2772"></a>2772                                   (kc = <a href="../D/13029.html" title="Multiple defined in 2 places.">comparableClassFor</a>(k)) == <strong class="reserved">null</strong>) ||
<a id="L2773" name="L2773"></a>2773                                  (dir = <a href="../D/13048.html" title="Multiple defined in 2 places.">compareComparables</a>(kc, k, pk)) == 0)
<a id="L2774" name="L2774"></a>2774                             dir = <a href="../D/35325.html" title="Multiple defined in 2 places.">tieBreakOrder</a>(k, pk);
<a id="L2775" name="L2775"></a>2775                             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; xp = p;
<a id="L2776" name="L2776"></a>2776                         <strong class="reserved">if</strong> ((p = (dir &lt;= 0) ? p.left : p.right) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2777" name="L2777"></a>2777                             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = xp;
<a id="L2778" name="L2778"></a>2778                             <strong class="reserved">if</strong> (dir &lt;= 0)
<a id="L2779" name="L2779"></a>2779                                 xp.left = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2780" name="L2780"></a>2780                             <strong class="reserved">else</strong>
<a id="L2781" name="L2781"></a>2781                                 xp.right = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2782" name="L2782"></a>2782                             r = <a href="../D/11775.html" title="Multiple defined in 2 places.">balanceInsertion</a>(r, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L2783" name="L2783"></a>2783                             <strong class="reserved">break</strong>;
<a id="L2784" name="L2784"></a>2784                         <em class="brace">}</em>
<a id="L2785" name="L2785"></a>2785                     <em class="brace">}</em>
<a id="L2786" name="L2786"></a>2786                 <em class="brace">}</em>
<a id="L2787" name="L2787"></a>2787             <em class="brace">}</em>
<a id="L2788" name="L2788"></a>2788             <strong class="reserved">this</strong>.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = r;
<a id="L2789" name="L2789"></a>2789             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../D/12504.html" title="Multiple defined in 3 places.">checkInvariants</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>);
<a id="L2790" name="L2790"></a>2790         <em class="brace">}</em>
<a id="L2791" name="L2791"></a>2791 
<div class="comment">
          Acquires write lock for tree restructuring.</div>
<a id="L2795" name="L2795"></a>2795         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/22672.html" title="Multiple referred from 2 places.">lockRoot</a>() <em class="brace">{</em>
<a id="L2796" name="L2796"></a>2796             <strong class="reserved">if</strong> (!U.compareAndSwapInt(<strong class="reserved">this</strong>, LOCKSTATE, 0, WRITER))
<a id="L2797" name="L2797"></a>2797                 <a href="../S/1074.html#L2810" title="Defined at 2810 in src/java/util/concurrent/ConcurrentHashMap.java.">contendedLock</a>(); <em class="comment">// offload to separate method</em>
<a id="L2798" name="L2798"></a>2798         <em class="brace">}</em>
<a id="L2799" name="L2799"></a>2799 
<div class="comment">
          Releases write lock for tree restructuring.</div>
<a id="L2803" name="L2803"></a>2803         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29715.html" title="Multiple referred from 2 places.">unlockRoot</a>() <em class="brace">{</em>
<a id="L2804" name="L2804"></a>2804             lockState = 0;
<a id="L2805" name="L2805"></a>2805         <em class="brace">}</em>
<a id="L2806" name="L2806"></a>2806 
<div class="comment">
          Possibly blocks awaiting root lock.</div>
<a id="L2810" name="L2810"></a>2810         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/1074.html#L2797" title="Referred from 2797 in src/java/util/concurrent/ConcurrentHashMap.java.">contendedLock</a>() <em class="brace">{</em>
<a id="L2811" name="L2811"></a>2811             <strong class="reserved">boolean</strong> waiting = <strong class="reserved">false</strong>;
<a id="L2812" name="L2812"></a>2812             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> s;;) <em class="brace">{</em>
<a id="L2813" name="L2813"></a>2813                 <strong class="reserved">if</strong> (((s = lockState) &amp; ~WAITER) == 0) <em class="brace">{</em>
<a id="L2814" name="L2814"></a>2814                     <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, LOCKSTATE, s, WRITER)) <em class="brace">{</em>
<a id="L2815" name="L2815"></a>2815                         <strong class="reserved">if</strong> (waiting)
<a id="L2816" name="L2816"></a>2816                             waiter = <strong class="reserved">null</strong>;
<a id="L2817" name="L2817"></a>2817                         <strong class="reserved">return</strong>;
<a id="L2818" name="L2818"></a>2818                     <em class="brace">}</em>
<a id="L2819" name="L2819"></a>2819                 <em class="brace">}</em>
<a id="L2820" name="L2820"></a>2820                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((s &amp; WAITER) == 0) <em class="brace">{</em>
<a id="L2821" name="L2821"></a>2821                     <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, LOCKSTATE, s, s | WAITER)) <em class="brace">{</em>
<a id="L2822" name="L2822"></a>2822                         waiting = <strong class="reserved">true</strong>;
<a id="L2823" name="L2823"></a>2823                         waiter = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L2824" name="L2824"></a>2824                     <em class="brace">}</em>
<a id="L2825" name="L2825"></a>2825                 <em class="brace">}</em>
<a id="L2826" name="L2826"></a>2826                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (waiting)
<a id="L2827" name="L2827"></a>2827                     <a href="../S/1045.html#L120" title="Defined at 120 in src/java/util/concurrent/locks/LockSupport.java.">LockSupport</a>.<a href="../D/29072.html" title="Multiple defined in 2 places.">park</a>(<strong class="reserved">this</strong>);
<a id="L2828" name="L2828"></a>2828             <em class="brace">}</em>
<a id="L2829" name="L2829"></a>2829         <em class="brace">}</em>
<a id="L2830" name="L2830"></a>2830 
<div class="comment">
          Returns matching node or null if none. Tries to search
          using tree comparisons from root, but continues linear
          search when lock not available.</div>
<a id="L2836" name="L2836"></a>2836         <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/14339.html" title="Multiple referred from 69 places.">find</a>(<strong class="reserved">int</strong> h, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k) <em class="brace">{</em>
<a id="L2837" name="L2837"></a>2837             <strong class="reserved">if</strong> (k != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2838" name="L2838"></a>2838                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>; e != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L2839" name="L2839"></a>2839                     <strong class="reserved">int</strong> s; K ek;
<a id="L2840" name="L2840"></a>2840                     <strong class="reserved">if</strong> (((s = lockState) &amp; (WAITER|WRITER)) != 0) <em class="brace">{</em>
<a id="L2841" name="L2841"></a>2841                         <strong class="reserved">if</strong> (e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == h &amp;&amp;
<a id="L2842" name="L2842"></a>2842                             ((ek = e.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == k || (ek != <strong class="reserved">null</strong> &amp;&amp; k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(ek))))
<a id="L2843" name="L2843"></a>2843                             <strong class="reserved">return</strong> e;
<a id="L2844" name="L2844"></a>2844                         e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2845" name="L2845"></a>2845                     <em class="brace">}</em>
<a id="L2846" name="L2846"></a>2846                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (U.compareAndSwapInt(<strong class="reserved">this</strong>, LOCKSTATE, s,
<a id="L2847" name="L2847"></a>2847                                                  s + <a href="../S/3764.html#L1337" title="Defined at 1337 in src/javax/print/DocFlavor.java.">READER</a>)) <em class="brace">{</em>
<a id="L2848" name="L2848"></a>2848                         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, p;
<a id="L2849" name="L2849"></a>2849                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2850" name="L2850"></a>2850                             p = ((r = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) == <strong class="reserved">null</strong> ? <strong class="reserved">null</strong> :
<a id="L2851" name="L2851"></a>2851                                  r.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, k, <strong class="reserved">null</strong>));
<a id="L2852" name="L2852"></a>2852                         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2853" name="L2853"></a>2853                             <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> w;
<a id="L2854" name="L2854"></a>2854                             <strong class="reserved">if</strong> (U.getAndAddInt(<strong class="reserved">this</strong>, LOCKSTATE, -<a href="../S/3764.html#L1337" title="Defined at 1337 in src/javax/print/DocFlavor.java.">READER</a>) ==
<a id="L2855" name="L2855"></a>2855                                 (<a href="../S/3764.html#L1337" title="Defined at 1337 in src/javax/print/DocFlavor.java.">READER</a>|WAITER) &amp;&amp; (w = waiter) != <strong class="reserved">null</strong>)
<a id="L2856" name="L2856"></a>2856                                 <a href="../S/1045.html#L120" title="Defined at 120 in src/java/util/concurrent/locks/LockSupport.java.">LockSupport</a>.<a href="../S/1045.html#L139" title="Defined at 139 in src/java/util/concurrent/locks/LockSupport.java.">unpark</a>(w);
<a id="L2857" name="L2857"></a>2857                         <em class="brace">}</em>
<a id="L2858" name="L2858"></a>2858                         <strong class="reserved">return</strong> p;
<a id="L2859" name="L2859"></a>2859                     <em class="brace">}</em>
<a id="L2860" name="L2860"></a>2860                 <em class="brace">}</em>
<a id="L2861" name="L2861"></a>2861             <em class="brace">}</em>
<a id="L2862" name="L2862"></a>2862             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2863" name="L2863"></a>2863         <em class="brace">}</em>
<a id="L2864" name="L2864"></a>2864 
<div class="comment">
          Finds or adds a node.
          @return null if added</div>
<a id="L2869" name="L2869"></a>2869         <strong class="reserved">final</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../R/25356.html" title="Multiple referred from 9 places.">putTreeVal</a>(<strong class="reserved">int</strong> h, K k, V v) <em class="brace">{</em>
<a id="L2870" name="L2870"></a>2870             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; kc = <strong class="reserved">null</strong>;
<a id="L2871" name="L2871"></a>2871             <strong class="reserved">boolean</strong> searched = <strong class="reserved">false</strong>;
<a id="L2872" name="L2872"></a>2872             <strong class="reserved">for</strong> (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;;) <em class="brace">{</em>
<a id="L2873" name="L2873"></a>2873                 <strong class="reserved">int</strong> dir, ph; K pk;
<a id="L2874" name="L2874"></a>2874                 <strong class="reserved">if</strong> (p == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2875" name="L2875"></a>2875                     <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <strong class="reserved">new</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;(h, k, v, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L2876" name="L2876"></a>2876                     <strong class="reserved">break</strong>;
<a id="L2877" name="L2877"></a>2877                 <em class="brace">}</em>
<a id="L2878" name="L2878"></a>2878                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((ph = p.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) &gt; h)
<a id="L2879" name="L2879"></a>2879                     dir = -1;
<a id="L2880" name="L2880"></a>2880                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ph &lt; h)
<a id="L2881" name="L2881"></a>2881                     dir = 1;
<a id="L2882" name="L2882"></a>2882                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((pk = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) == k || (pk != <strong class="reserved">null</strong> &amp;&amp; k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(pk)))
<a id="L2883" name="L2883"></a>2883                     <strong class="reserved">return</strong> p;
<a id="L2884" name="L2884"></a>2884                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((kc == <strong class="reserved">null</strong> &amp;&amp;
<a id="L2885" name="L2885"></a>2885                           (kc = <a href="../D/13029.html" title="Multiple defined in 2 places.">comparableClassFor</a>(k)) == <strong class="reserved">null</strong>) ||
<a id="L2886" name="L2886"></a>2886                          (dir = <a href="../D/13048.html" title="Multiple defined in 2 places.">compareComparables</a>(kc, k, pk)) == 0) <em class="brace">{</em>
<a id="L2887" name="L2887"></a>2887                     <strong class="reserved">if</strong> (!searched) <em class="brace">{</em>
<a id="L2888" name="L2888"></a>2888                         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; q, ch;
<a id="L2889" name="L2889"></a>2889                         searched = <strong class="reserved">true</strong>;
<a id="L2890" name="L2890"></a>2890                         <strong class="reserved">if</strong> (((ch = p.left) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2891" name="L2891"></a>2891                              (q = ch.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, k, kc)) != <strong class="reserved">null</strong>) ||
<a id="L2892" name="L2892"></a>2892                             ((ch = p.right) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2893" name="L2893"></a>2893                              (q = ch.<a href="../S/1074.html#L2679" title="Defined at 2679 in src/java/util/concurrent/ConcurrentHashMap.java.">findTreeNode</a>(h, k, kc)) != <strong class="reserved">null</strong>))
<a id="L2894" name="L2894"></a>2894                             <strong class="reserved">return</strong> q;
<a id="L2895" name="L2895"></a>2895                     <em class="brace">}</em>
<a id="L2896" name="L2896"></a>2896                     dir = <a href="../D/35325.html" title="Multiple defined in 2 places.">tieBreakOrder</a>(k, pk);
<a id="L2897" name="L2897"></a>2897                 <em class="brace">}</em>
<a id="L2898" name="L2898"></a>2898 
<a id="L2899" name="L2899"></a>2899                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; xp = p;
<a id="L2900" name="L2900"></a>2900                 <strong class="reserved">if</strong> ((p = (dir &lt;= 0) ? p.left : p.right) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2901" name="L2901"></a>2901                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, f = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L2902" name="L2902"></a>2902                     <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <strong class="reserved">new</strong> <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;(h, k, v, f, xp);
<a id="L2903" name="L2903"></a>2903                     <strong class="reserved">if</strong> (f != <strong class="reserved">null</strong>)
<a id="L2904" name="L2904"></a>2904                         f.prev = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2905" name="L2905"></a>2905                     <strong class="reserved">if</strong> (dir &lt;= 0)
<a id="L2906" name="L2906"></a>2906                         xp.left = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2907" name="L2907"></a>2907                     <strong class="reserved">else</strong>
<a id="L2908" name="L2908"></a>2908                         xp.right = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2909" name="L2909"></a>2909                     <strong class="reserved">if</strong> (!xp.red)
<a id="L2910" name="L2910"></a>2910                         <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red = <strong class="reserved">true</strong>;
<a id="L2911" name="L2911"></a>2911                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2912" name="L2912"></a>2912                         <a href="../S/1074.html#L2795" title="Defined at 2795 in src/java/util/concurrent/ConcurrentHashMap.java.">lockRoot</a>();
<a id="L2913" name="L2913"></a>2913                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2914" name="L2914"></a>2914                             <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/11775.html" title="Multiple defined in 2 places.">balanceInsertion</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L2915" name="L2915"></a>2915                         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2916" name="L2916"></a>2916                             <a href="../S/1074.html#L2803" title="Defined at 2803 in src/java/util/concurrent/ConcurrentHashMap.java.">unlockRoot</a>();
<a id="L2917" name="L2917"></a>2917                         <em class="brace">}</em>
<a id="L2918" name="L2918"></a>2918                     <em class="brace">}</em>
<a id="L2919" name="L2919"></a>2919                     <strong class="reserved">break</strong>;
<a id="L2920" name="L2920"></a>2920                 <em class="brace">}</em>
<a id="L2921" name="L2921"></a>2921             <em class="brace">}</em>
<a id="L2922" name="L2922"></a>2922             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../D/12504.html" title="Multiple defined in 3 places.">checkInvariants</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>);
<a id="L2923" name="L2923"></a>2923             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2924" name="L2924"></a>2924         <em class="brace">}</em>
<a id="L2925" name="L2925"></a>2925 
<div class="comment">
          Removes the given node, that must be present before this
          call.  This is messier than typical red-black deletion code
          because we cannot swap the contents of an interior node
          with a leaf successor that is pinned by "next" pointers
          that are accessible independently of lock. So instead we
          swap the tree linkages.
          @return true if now too small, so should be untreeified</div>
<a id="L2936" name="L2936"></a>2936         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/26086.html" title="Multiple referred from 5 places.">removeTreeNode</a>(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p) <em class="brace">{</em>
<a id="L2937" name="L2937"></a>2937             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;)p.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2938" name="L2938"></a>2938             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> = p.prev;  <em class="comment">// unlink traversal pointers</em>
<a id="L2939" name="L2939"></a>2939             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, rl;
<a id="L2940" name="L2940"></a>2940             <strong class="reserved">if</strong> (<a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a> == <strong class="reserved">null</strong>)
<a id="L2941" name="L2941"></a>2941                 <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2942" name="L2942"></a>2942             <strong class="reserved">else</strong>
<a id="L2943" name="L2943"></a>2943                 <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2944" name="L2944"></a>2944             <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>)
<a id="L2945" name="L2945"></a>2945                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.prev = <a href="../S/1076.html#L734" title="Defined at 734 in src/java/util/concurrent/ConcurrentLinkedDeque.java.">pred</a>;
<a id="L2946" name="L2946"></a>2946             <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2947" name="L2947"></a>2947                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <strong class="reserved">null</strong>;
<a id="L2948" name="L2948"></a>2948                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2949" name="L2949"></a>2949             <em class="brace">}</em>
<a id="L2950" name="L2950"></a>2950             <strong class="reserved">if</strong> ((r = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) == <strong class="reserved">null</strong> || r.right == <strong class="reserved">null</strong> || <em class="comment">// too small</em>
<a id="L2951" name="L2951"></a>2951                 (rl = r.left) == <strong class="reserved">null</strong> || rl.left == <strong class="reserved">null</strong>)
<a id="L2952" name="L2952"></a>2952                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2953" name="L2953"></a>2953             <a href="../S/1074.html#L2795" title="Defined at 2795 in src/java/util/concurrent/ConcurrentHashMap.java.">lockRoot</a>();
<a id="L2954" name="L2954"></a>2954             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2955" name="L2955"></a>2955                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>;
<a id="L2956" name="L2956"></a>2956                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; pl = p.left;
<a id="L2957" name="L2957"></a>2957                 <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a> = p.right;
<a id="L2958" name="L2958"></a>2958                 <strong class="reserved">if</strong> (pl != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2959" name="L2959"></a>2959                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; s = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>, sl;
<a id="L2960" name="L2960"></a>2960                     <strong class="reserved">while</strong> ((sl = s.left) != <strong class="reserved">null</strong>) <em class="comment">// find successor</em>
<a id="L2961" name="L2961"></a>2961                         s = sl;
<a id="L2962" name="L2962"></a>2962                     <strong class="reserved">boolean</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = s.red; s.red = p.red; p.red = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>; <em class="comment">// swap colors</em>
<a id="L2963" name="L2963"></a>2963                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; sr = s.right;
<a id="L2964" name="L2964"></a>2964                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; pp = p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L2965" name="L2965"></a>2965                     <strong class="reserved">if</strong> (s == <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>) <em class="brace">{</em> <em class="comment">// p was s's direct parent</em>
<a id="L2966" name="L2966"></a>2966                         p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = s;
<a id="L2967" name="L2967"></a>2967                         s.right = p;
<a id="L2968" name="L2968"></a>2968                     <em class="brace">}</em>
<a id="L2969" name="L2969"></a>2969                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2970" name="L2970"></a>2970                         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; sp = s.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L2971" name="L2971"></a>2971                         <strong class="reserved">if</strong> ((p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = sp) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2972" name="L2972"></a>2972                             <strong class="reserved">if</strong> (s == sp.left)
<a id="L2973" name="L2973"></a>2973                                 sp.left = p;
<a id="L2974" name="L2974"></a>2974                             <strong class="reserved">else</strong>
<a id="L2975" name="L2975"></a>2975                                 sp.right = p;
<a id="L2976" name="L2976"></a>2976                         <em class="brace">}</em>
<a id="L2977" name="L2977"></a>2977                         <strong class="reserved">if</strong> ((s.right = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>) != <strong class="reserved">null</strong>)
<a id="L2978" name="L2978"></a>2978                             <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = s;
<a id="L2979" name="L2979"></a>2979                     <em class="brace">}</em>
<a id="L2980" name="L2980"></a>2980                     p.left = <strong class="reserved">null</strong>;
<a id="L2981" name="L2981"></a>2981                     <strong class="reserved">if</strong> ((p.right = sr) != <strong class="reserved">null</strong>)
<a id="L2982" name="L2982"></a>2982                         sr.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = p;
<a id="L2983" name="L2983"></a>2983                     <strong class="reserved">if</strong> ((s.left = pl) != <strong class="reserved">null</strong>)
<a id="L2984" name="L2984"></a>2984                         pl.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = s;
<a id="L2985" name="L2985"></a>2985                     <strong class="reserved">if</strong> ((s.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = pp) == <strong class="reserved">null</strong>)
<a id="L2986" name="L2986"></a>2986                         r = s;
<a id="L2987" name="L2987"></a>2987                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p == pp.left)
<a id="L2988" name="L2988"></a>2988                         pp.left = s;
<a id="L2989" name="L2989"></a>2989                     <strong class="reserved">else</strong>
<a id="L2990" name="L2990"></a>2990                         pp.right = s;
<a id="L2991" name="L2991"></a>2991                     <strong class="reserved">if</strong> (sr != <strong class="reserved">null</strong>)
<a id="L2992" name="L2992"></a>2992                         <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = sr;
<a id="L2993" name="L2993"></a>2993                     <strong class="reserved">else</strong>
<a id="L2994" name="L2994"></a>2994                         <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = p;
<a id="L2995" name="L2995"></a>2995                 <em class="brace">}</em>
<a id="L2996" name="L2996"></a>2996                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pl != <strong class="reserved">null</strong>)
<a id="L2997" name="L2997"></a>2997                     <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = pl;
<a id="L2998" name="L2998"></a>2998                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a> != <strong class="reserved">null</strong>)
<a id="L2999" name="L2999"></a>2999                     <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>;
<a id="L3000" name="L3000"></a>3000                 <strong class="reserved">else</strong>
<a id="L3001" name="L3001"></a>3001                     <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = p;
<a id="L3002" name="L3002"></a>3002                 <strong class="reserved">if</strong> (<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> != p) <em class="brace">{</em>
<a id="L3003" name="L3003"></a>3003                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; pp = <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L3004" name="L3004"></a>3004                     <strong class="reserved">if</strong> (pp == <strong class="reserved">null</strong>)
<a id="L3005" name="L3005"></a>3005                         r = <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>;
<a id="L3006" name="L3006"></a>3006                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p == pp.left)
<a id="L3007" name="L3007"></a>3007                         pp.left = <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>;
<a id="L3008" name="L3008"></a>3008                     <strong class="reserved">else</strong>
<a id="L3009" name="L3009"></a>3009                         pp.right = <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>;
<a id="L3010" name="L3010"></a>3010                     p.left = p.right = p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <strong class="reserved">null</strong>;
<a id="L3011" name="L3011"></a>3011                 <em class="brace">}</em>
<a id="L3012" name="L3012"></a>3012 
<a id="L3013" name="L3013"></a>3013                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = (p.red) ? r : <a href="../D/11774.html" title="Multiple defined in 2 places.">balanceDeletion</a>(r, <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>);
<a id="L3014" name="L3014"></a>3014 
<a id="L3015" name="L3015"></a>3015                 <strong class="reserved">if</strong> (p == <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>) <em class="brace">{</em>  <em class="comment">// detach pointers</em>
<a id="L3016" name="L3016"></a>3016                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; pp;
<a id="L3017" name="L3017"></a>3017                     <strong class="reserved">if</strong> ((pp = p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3018" name="L3018"></a>3018                         <strong class="reserved">if</strong> (p == pp.left)
<a id="L3019" name="L3019"></a>3019                             pp.left = <strong class="reserved">null</strong>;
<a id="L3020" name="L3020"></a>3020                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p == pp.right)
<a id="L3021" name="L3021"></a>3021                             pp.right = <strong class="reserved">null</strong>;
<a id="L3022" name="L3022"></a>3022                         p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <strong class="reserved">null</strong>;
<a id="L3023" name="L3023"></a>3023                     <em class="brace">}</em>
<a id="L3024" name="L3024"></a>3024                 <em class="brace">}</em>
<a id="L3025" name="L3025"></a>3025             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L3026" name="L3026"></a>3026                 <a href="../S/1074.html#L2803" title="Defined at 2803 in src/java/util/concurrent/ConcurrentHashMap.java.">unlockRoot</a>();
<a id="L3027" name="L3027"></a>3027             <em class="brace">}</em>
<a id="L3028" name="L3028"></a>3028             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../D/12504.html" title="Multiple defined in 3 places.">checkInvariants</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>);
<a id="L3029" name="L3029"></a>3029             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3030" name="L3030"></a>3030         <em class="brace">}</em>
<a id="L3031" name="L3031"></a>3031 
<div class="comment">
         /* ------------------------------------------------------------ */</div>
<a id="L3033" name="L3033"></a>3033         <em class="comment">// Red-black tree methods, all adapted from CLR</em>
<a id="L3034" name="L3034"></a>3034 
<a id="L3035" name="L3035"></a>3035         <strong class="reserved">static</strong> &lt;K,V&gt; <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../R/26520.html" title="Multiple referred from 20 places.">rotateLeft</a>(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>,
<a id="L3036" name="L3036"></a>3036                                               <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p) <em class="brace">{</em>
<a id="L3037" name="L3037"></a>3037             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; r, pp, rl;
<a id="L3038" name="L3038"></a>3038             <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong> &amp;&amp; (r = p.right) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3039" name="L3039"></a>3039                 <strong class="reserved">if</strong> ((rl = p.right = r.left) != <strong class="reserved">null</strong>)
<a id="L3040" name="L3040"></a>3040                     rl.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = p;
<a id="L3041" name="L3041"></a>3041                 <strong class="reserved">if</strong> ((pp = r.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong>)
<a id="L3042" name="L3042"></a>3042                     (<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = r).red = <strong class="reserved">false</strong>;
<a id="L3043" name="L3043"></a>3043                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pp.left == p)
<a id="L3044" name="L3044"></a>3044                     pp.left = r;
<a id="L3045" name="L3045"></a>3045                 <strong class="reserved">else</strong>
<a id="L3046" name="L3046"></a>3046                     pp.right = r;
<a id="L3047" name="L3047"></a>3047                 r.left = p;
<a id="L3048" name="L3048"></a>3048                 p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = r;
<a id="L3049" name="L3049"></a>3049             <em class="brace">}</em>
<a id="L3050" name="L3050"></a>3050             <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3051" name="L3051"></a>3051         <em class="brace">}</em>
<a id="L3052" name="L3052"></a>3052 
<a id="L3053" name="L3053"></a>3053         <strong class="reserved">static</strong> &lt;K,V&gt; <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../R/26521.html" title="Multiple referred from 15 places.">rotateRight</a>(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>,
<a id="L3054" name="L3054"></a>3054                                                <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; p) <em class="brace">{</em>
<a id="L3055" name="L3055"></a>3055             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; l, pp, lr;
<a id="L3056" name="L3056"></a>3056             <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong> &amp;&amp; (l = p.left) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3057" name="L3057"></a>3057                 <strong class="reserved">if</strong> ((lr = p.left = l.right) != <strong class="reserved">null</strong>)
<a id="L3058" name="L3058"></a>3058                     lr.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = p;
<a id="L3059" name="L3059"></a>3059                 <strong class="reserved">if</strong> ((pp = l.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong>)
<a id="L3060" name="L3060"></a>3060                     (<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = l).red = <strong class="reserved">false</strong>;
<a id="L3061" name="L3061"></a>3061                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pp.right == p)
<a id="L3062" name="L3062"></a>3062                     pp.right = l;
<a id="L3063" name="L3063"></a>3063                 <strong class="reserved">else</strong>
<a id="L3064" name="L3064"></a>3064                     pp.left = l;
<a id="L3065" name="L3065"></a>3065                 l.right = p;
<a id="L3066" name="L3066"></a>3066                 p.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = l;
<a id="L3067" name="L3067"></a>3067             <em class="brace">}</em>
<a id="L3068" name="L3068"></a>3068             <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3069" name="L3069"></a>3069         <em class="brace">}</em>
<a id="L3070" name="L3070"></a>3070 
<a id="L3071" name="L3071"></a>3071         <strong class="reserved">static</strong> &lt;K,V&gt; <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../R/10533.html" title="Multiple referred from 4 places.">balanceInsertion</a>(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>,
<a id="L3072" name="L3072"></a>3072                                                     <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L3073" name="L3073"></a>3073             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red = <strong class="reserved">true</strong>;
<a id="L3074" name="L3074"></a>3074             <strong class="reserved">for</strong> (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; xp, xpp, xppl, xppr;;) <em class="brace">{</em>
<a id="L3075" name="L3075"></a>3075                 <strong class="reserved">if</strong> ((xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3076" name="L3076"></a>3076                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red = <strong class="reserved">false</strong>;
<a id="L3077" name="L3077"></a>3077                     <strong class="reserved">return</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L3078" name="L3078"></a>3078                 <em class="brace">}</em>
<a id="L3079" name="L3079"></a>3079                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!xp.red || (xpp = xp.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong>)
<a id="L3080" name="L3080"></a>3080                     <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3081" name="L3081"></a>3081                 <strong class="reserved">if</strong> (xp == (xppl = xpp.left)) <em class="brace">{</em>
<a id="L3082" name="L3082"></a>3082                     <strong class="reserved">if</strong> ((xppr = xpp.right) != <strong class="reserved">null</strong> &amp;&amp; xppr.red) <em class="brace">{</em>
<a id="L3083" name="L3083"></a>3083                         xppr.red = <strong class="reserved">false</strong>;
<a id="L3084" name="L3084"></a>3084                         xp.red = <strong class="reserved">false</strong>;
<a id="L3085" name="L3085"></a>3085                         xpp.red = <strong class="reserved">true</strong>;
<a id="L3086" name="L3086"></a>3086                         <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xpp;
<a id="L3087" name="L3087"></a>3087                     <em class="brace">}</em>
<a id="L3088" name="L3088"></a>3088                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3089" name="L3089"></a>3089                         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == xp.right) <em class="brace">{</em>
<a id="L3090" name="L3090"></a>3090                             <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31454.html" title="Multiple defined in 5 places.">rotateLeft</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xp);
<a id="L3091" name="L3091"></a>3091                             xpp = (xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong> ? <strong class="reserved">null</strong> : xp.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L3092" name="L3092"></a>3092                         <em class="brace">}</em>
<a id="L3093" name="L3093"></a>3093                         <strong class="reserved">if</strong> (xp != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3094" name="L3094"></a>3094                             xp.red = <strong class="reserved">false</strong>;
<a id="L3095" name="L3095"></a>3095                             <strong class="reserved">if</strong> (xpp != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3096" name="L3096"></a>3096                                 xpp.red = <strong class="reserved">true</strong>;
<a id="L3097" name="L3097"></a>3097                                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31455.html" title="Multiple defined in 5 places.">rotateRight</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xpp);
<a id="L3098" name="L3098"></a>3098                             <em class="brace">}</em>
<a id="L3099" name="L3099"></a>3099                         <em class="brace">}</em>
<a id="L3100" name="L3100"></a>3100                     <em class="brace">}</em>
<a id="L3101" name="L3101"></a>3101                 <em class="brace">}</em>
<a id="L3102" name="L3102"></a>3102                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3103" name="L3103"></a>3103                     <strong class="reserved">if</strong> (xppl != <strong class="reserved">null</strong> &amp;&amp; xppl.red) <em class="brace">{</em>
<a id="L3104" name="L3104"></a>3104                         xppl.red = <strong class="reserved">false</strong>;
<a id="L3105" name="L3105"></a>3105                         xp.red = <strong class="reserved">false</strong>;
<a id="L3106" name="L3106"></a>3106                         xpp.red = <strong class="reserved">true</strong>;
<a id="L3107" name="L3107"></a>3107                         <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xpp;
<a id="L3108" name="L3108"></a>3108                     <em class="brace">}</em>
<a id="L3109" name="L3109"></a>3109                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3110" name="L3110"></a>3110                         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == xp.left) <em class="brace">{</em>
<a id="L3111" name="L3111"></a>3111                             <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31455.html" title="Multiple defined in 5 places.">rotateRight</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xp);
<a id="L3112" name="L3112"></a>3112                             xpp = (xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong> ? <strong class="reserved">null</strong> : xp.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L3113" name="L3113"></a>3113                         <em class="brace">}</em>
<a id="L3114" name="L3114"></a>3114                         <strong class="reserved">if</strong> (xp != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3115" name="L3115"></a>3115                             xp.red = <strong class="reserved">false</strong>;
<a id="L3116" name="L3116"></a>3116                             <strong class="reserved">if</strong> (xpp != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3117" name="L3117"></a>3117                                 xpp.red = <strong class="reserved">true</strong>;
<a id="L3118" name="L3118"></a>3118                                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31454.html" title="Multiple defined in 5 places.">rotateLeft</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xpp);
<a id="L3119" name="L3119"></a>3119                             <em class="brace">}</em>
<a id="L3120" name="L3120"></a>3120                         <em class="brace">}</em>
<a id="L3121" name="L3121"></a>3121                     <em class="brace">}</em>
<a id="L3122" name="L3122"></a>3122                 <em class="brace">}</em>
<a id="L3123" name="L3123"></a>3123             <em class="brace">}</em>
<a id="L3124" name="L3124"></a>3124         <em class="brace">}</em>
<a id="L3125" name="L3125"></a>3125 
<a id="L3126" name="L3126"></a>3126         <strong class="reserved">static</strong> &lt;K,V&gt; <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../R/10532.html" title="Multiple referred from 2 places.">balanceDeletion</a>(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>,
<a id="L3127" name="L3127"></a>3127                                                    <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L3128" name="L3128"></a>3128             <strong class="reserved">for</strong> (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; xp, xpl, xpr;;)  <em class="brace">{</em>
<a id="L3129" name="L3129"></a>3129                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == <strong class="reserved">null</strong> || <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>)
<a id="L3130" name="L3130"></a>3130                     <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3131" name="L3131"></a>3131                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3132" name="L3132"></a>3132                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red = <strong class="reserved">false</strong>;
<a id="L3133" name="L3133"></a>3133                     <strong class="reserved">return</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L3134" name="L3134"></a>3134                 <em class="brace">}</em>
<a id="L3135" name="L3135"></a>3135                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red) <em class="brace">{</em>
<a id="L3136" name="L3136"></a>3136                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.red = <strong class="reserved">false</strong>;
<a id="L3137" name="L3137"></a>3137                     <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3138" name="L3138"></a>3138                 <em class="brace">}</em>
<a id="L3139" name="L3139"></a>3139                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((xpl = xp.left) == <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L3140" name="L3140"></a>3140                     <strong class="reserved">if</strong> ((xpr = xp.right) != <strong class="reserved">null</strong> &amp;&amp; xpr.red) <em class="brace">{</em>
<a id="L3141" name="L3141"></a>3141                         xpr.red = <strong class="reserved">false</strong>;
<a id="L3142" name="L3142"></a>3142                         xp.red = <strong class="reserved">true</strong>;
<a id="L3143" name="L3143"></a>3143                         <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31454.html" title="Multiple defined in 5 places.">rotateLeft</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xp);
<a id="L3144" name="L3144"></a>3144                         xpr = (xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong> ? <strong class="reserved">null</strong> : xp.right;
<a id="L3145" name="L3145"></a>3145                     <em class="brace">}</em>
<a id="L3146" name="L3146"></a>3146                     <strong class="reserved">if</strong> (xpr == <strong class="reserved">null</strong>)
<a id="L3147" name="L3147"></a>3147                         <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xp;
<a id="L3148" name="L3148"></a>3148                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3149" name="L3149"></a>3149                         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; sl = xpr.left, sr = xpr.right;
<a id="L3150" name="L3150"></a>3150                         <strong class="reserved">if</strong> ((sr == <strong class="reserved">null</strong> || !sr.red) &amp;&amp;
<a id="L3151" name="L3151"></a>3151                             (sl == <strong class="reserved">null</strong> || !sl.red)) <em class="brace">{</em>
<a id="L3152" name="L3152"></a>3152                             xpr.red = <strong class="reserved">true</strong>;
<a id="L3153" name="L3153"></a>3153                             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xp;
<a id="L3154" name="L3154"></a>3154                         <em class="brace">}</em>
<a id="L3155" name="L3155"></a>3155                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3156" name="L3156"></a>3156                             <strong class="reserved">if</strong> (sr == <strong class="reserved">null</strong> || !sr.red) <em class="brace">{</em>
<a id="L3157" name="L3157"></a>3157                                 <strong class="reserved">if</strong> (sl != <strong class="reserved">null</strong>)
<a id="L3158" name="L3158"></a>3158                                     sl.red = <strong class="reserved">false</strong>;
<a id="L3159" name="L3159"></a>3159                                 xpr.red = <strong class="reserved">true</strong>;
<a id="L3160" name="L3160"></a>3160                                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31455.html" title="Multiple defined in 5 places.">rotateRight</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xpr);
<a id="L3161" name="L3161"></a>3161                                 xpr = (xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong> ?
<a id="L3162" name="L3162"></a>3162                                     <strong class="reserved">null</strong> : xp.right;
<a id="L3163" name="L3163"></a>3163                             <em class="brace">}</em>
<a id="L3164" name="L3164"></a>3164                             <strong class="reserved">if</strong> (xpr != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3165" name="L3165"></a>3165                                 xpr.red = (xp == <strong class="reserved">null</strong>) ? <strong class="reserved">false</strong> : xp.red;
<a id="L3166" name="L3166"></a>3166                                 <strong class="reserved">if</strong> ((sr = xpr.right) != <strong class="reserved">null</strong>)
<a id="L3167" name="L3167"></a>3167                                     sr.red = <strong class="reserved">false</strong>;
<a id="L3168" name="L3168"></a>3168                             <em class="brace">}</em>
<a id="L3169" name="L3169"></a>3169                             <strong class="reserved">if</strong> (xp != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3170" name="L3170"></a>3170                                 xp.red = <strong class="reserved">false</strong>;
<a id="L3171" name="L3171"></a>3171                                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31454.html" title="Multiple defined in 5 places.">rotateLeft</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xp);
<a id="L3172" name="L3172"></a>3172                             <em class="brace">}</em>
<a id="L3173" name="L3173"></a>3173                             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3174" name="L3174"></a>3174                         <em class="brace">}</em>
<a id="L3175" name="L3175"></a>3175                     <em class="brace">}</em>
<a id="L3176" name="L3176"></a>3176                 <em class="brace">}</em>
<a id="L3177" name="L3177"></a>3177                 <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// symmetric</em>
<a id="L3178" name="L3178"></a>3178                     <strong class="reserved">if</strong> (xpl != <strong class="reserved">null</strong> &amp;&amp; xpl.red) <em class="brace">{</em>
<a id="L3179" name="L3179"></a>3179                         xpl.red = <strong class="reserved">false</strong>;
<a id="L3180" name="L3180"></a>3180                         xp.red = <strong class="reserved">true</strong>;
<a id="L3181" name="L3181"></a>3181                         <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31455.html" title="Multiple defined in 5 places.">rotateRight</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xp);
<a id="L3182" name="L3182"></a>3182                         xpl = (xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong> ? <strong class="reserved">null</strong> : xp.left;
<a id="L3183" name="L3183"></a>3183                     <em class="brace">}</em>
<a id="L3184" name="L3184"></a>3184                     <strong class="reserved">if</strong> (xpl == <strong class="reserved">null</strong>)
<a id="L3185" name="L3185"></a>3185                         <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xp;
<a id="L3186" name="L3186"></a>3186                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3187" name="L3187"></a>3187                         <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; sl = xpl.left, sr = xpl.right;
<a id="L3188" name="L3188"></a>3188                         <strong class="reserved">if</strong> ((sl == <strong class="reserved">null</strong> || !sl.red) &amp;&amp;
<a id="L3189" name="L3189"></a>3189                             (sr == <strong class="reserved">null</strong> || !sr.red)) <em class="brace">{</em>
<a id="L3190" name="L3190"></a>3190                             xpl.red = <strong class="reserved">true</strong>;
<a id="L3191" name="L3191"></a>3191                             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = xp;
<a id="L3192" name="L3192"></a>3192                         <em class="brace">}</em>
<a id="L3193" name="L3193"></a>3193                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3194" name="L3194"></a>3194                             <strong class="reserved">if</strong> (sl == <strong class="reserved">null</strong> || !sl.red) <em class="brace">{</em>
<a id="L3195" name="L3195"></a>3195                                 <strong class="reserved">if</strong> (sr != <strong class="reserved">null</strong>)
<a id="L3196" name="L3196"></a>3196                                     sr.red = <strong class="reserved">false</strong>;
<a id="L3197" name="L3197"></a>3197                                 xpl.red = <strong class="reserved">true</strong>;
<a id="L3198" name="L3198"></a>3198                                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31454.html" title="Multiple defined in 5 places.">rotateLeft</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xpl);
<a id="L3199" name="L3199"></a>3199                                 xpl = (xp = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) == <strong class="reserved">null</strong> ?
<a id="L3200" name="L3200"></a>3200                                     <strong class="reserved">null</strong> : xp.left;
<a id="L3201" name="L3201"></a>3201                             <em class="brace">}</em>
<a id="L3202" name="L3202"></a>3202                             <strong class="reserved">if</strong> (xpl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3203" name="L3203"></a>3203                                 xpl.red = (xp == <strong class="reserved">null</strong>) ? <strong class="reserved">false</strong> : xp.red;
<a id="L3204" name="L3204"></a>3204                                 <strong class="reserved">if</strong> ((sl = xpl.left) != <strong class="reserved">null</strong>)
<a id="L3205" name="L3205"></a>3205                                     sl.red = <strong class="reserved">false</strong>;
<a id="L3206" name="L3206"></a>3206                             <em class="brace">}</em>
<a id="L3207" name="L3207"></a>3207                             <strong class="reserved">if</strong> (xp != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3208" name="L3208"></a>3208                                 xp.red = <strong class="reserved">false</strong>;
<a id="L3209" name="L3209"></a>3209                                 <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/31455.html" title="Multiple defined in 5 places.">rotateRight</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, xp);
<a id="L3210" name="L3210"></a>3210                             <em class="brace">}</em>
<a id="L3211" name="L3211"></a>3211                             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L3212" name="L3212"></a>3212                         <em class="brace">}</em>
<a id="L3213" name="L3213"></a>3213                     <em class="brace">}</em>
<a id="L3214" name="L3214"></a>3214                 <em class="brace">}</em>
<a id="L3215" name="L3215"></a>3215             <em class="brace">}</em>
<a id="L3216" name="L3216"></a>3216         <em class="brace">}</em>
<a id="L3217" name="L3217"></a>3217 
<div class="comment">
          Recursive invariant check</div>
<a id="L3221" name="L3221"></a>3221         <strong class="reserved">static</strong> &lt;K,V&gt; <strong class="reserved">boolean</strong> <a href="../R/11209.html" title="Multiple referred from 35 places.">checkInvariants</a>(<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; t) <em class="brace">{</em>
<a id="L3222" name="L3222"></a>3222             <a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt; tp = t.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, tl = t.left, tr = t.right,
<a id="L3223" name="L3223"></a>3223                 tb = t.prev, tn = (<a href="../D/9145.html" title="Multiple defined in 4 places.">TreeNode</a>&lt;K,V&gt;)t.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L3224" name="L3224"></a>3224             <strong class="reserved">if</strong> (tb != <strong class="reserved">null</strong> &amp;&amp; tb.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != t)
<a id="L3225" name="L3225"></a>3225                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3226" name="L3226"></a>3226             <strong class="reserved">if</strong> (tn != <strong class="reserved">null</strong> &amp;&amp; tn.prev != t)
<a id="L3227" name="L3227"></a>3227                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3228" name="L3228"></a>3228             <strong class="reserved">if</strong> (tp != <strong class="reserved">null</strong> &amp;&amp; t != tp.left &amp;&amp; t != tp.right)
<a id="L3229" name="L3229"></a>3229                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3230" name="L3230"></a>3230             <strong class="reserved">if</strong> (tl != <strong class="reserved">null</strong> &amp;&amp; (tl.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != t || tl.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &gt; t.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>))
<a id="L3231" name="L3231"></a>3231                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3232" name="L3232"></a>3232             <strong class="reserved">if</strong> (tr != <strong class="reserved">null</strong> &amp;&amp; (tr.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != t || tr.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &lt; t.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>))
<a id="L3233" name="L3233"></a>3233                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3234" name="L3234"></a>3234             <strong class="reserved">if</strong> (t.red &amp;&amp; tl != <strong class="reserved">null</strong> &amp;&amp; tl.red &amp;&amp; tr != <strong class="reserved">null</strong> &amp;&amp; tr.red)
<a id="L3235" name="L3235"></a>3235                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3236" name="L3236"></a>3236             <strong class="reserved">if</strong> (tl != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/12504.html" title="Multiple defined in 3 places.">checkInvariants</a>(tl))
<a id="L3237" name="L3237"></a>3237                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3238" name="L3238"></a>3238             <strong class="reserved">if</strong> (tr != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/12504.html" title="Multiple defined in 3 places.">checkInvariants</a>(tr))
<a id="L3239" name="L3239"></a>3239                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3240" name="L3240"></a>3240             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3241" name="L3241"></a>3241         <em class="brace">}</em>
<a id="L3242" name="L3242"></a>3242 
<a id="L3243" name="L3243"></a>3243         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> sun.misc.Unsafe U;
<a id="L3244" name="L3244"></a>3244         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> LOCKSTATE;
<a id="L3245" name="L3245"></a>3245         <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L3246" name="L3246"></a>3246             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L3247" name="L3247"></a>3247                 U = sun.misc.Unsafe.getUnsafe();
<a id="L3248" name="L3248"></a>3248                 <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; k = <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>.<strong class="reserved">class</strong>;
<a id="L3249" name="L3249"></a>3249                 LOCKSTATE = U.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L3250" name="L3250"></a>3250                     (k.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("lockState"));
<a id="L3251" name="L3251"></a>3251             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L3252" name="L3252"></a>3252                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>(e);
<a id="L3253" name="L3253"></a>3253             <em class="brace">}</em>
<a id="L3254" name="L3254"></a>3254         <em class="brace">}</em>
<a id="L3255" name="L3255"></a>3255     <em class="brace">}</em>
<a id="L3256" name="L3256"></a>3256 
<div class="comment">
     /* ----------------Table Traversal -------------- */</div>
<a id="L3258" name="L3258"></a>3258 
<div class="comment">
      Records the table, its length, and current traversal index for a
      traverser that must process a region of a forwarded table before
      proceeding with current table.</div>
<a id="L3264" name="L3264"></a>3264     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8002.html" title="Multiple referred from 11 places.">TableStack</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L3265" name="L3265"></a>3265         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L3266" name="L3266"></a>3266         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L3267" name="L3267"></a>3267         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab;
<a id="L3268" name="L3268"></a>3268         <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L3269" name="L3269"></a>3269     <em class="brace">}</em>
<a id="L3270" name="L3270"></a>3270 
<div class="comment">
      Encapsulates traversal for methods such as containsValue; also
      serves as a base class for other iterators and spliterators.
      Method advance visits once each still-valid node that was
      reachable upon iterator construction. It might miss some that
      were added to a bin after the bin was visited, which is OK wrt
      consistency guarantees. Maintaining this property in the face
      of possible ongoing resizes requires a fair amount of
      bookkeeping state that is difficult to optimize away amidst
      volatile accesses.  Even so, traversal maintains reasonable
      throughput.
      Normally, iteration proceeds bin-by-bin traversing lists.
      However, if the table has been resized, then all future steps
      must traverse both the bin at the current index as well as at
      (index + baseSize); and so on for further resizings. To
      paranoically cope with potential sharing by users of iterators
      across threads, iteration terminates if a bounds checks fails
      for a table read.</div>
<a id="L3292" name="L3292"></a>3292     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/8291.html" title="Multiple referred from 15 places.">Traverser</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L3293" name="L3293"></a>3293         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab;        <em class="comment">// current table; updated if resized</em>
<a id="L3294" name="L3294"></a>3294         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;         <em class="comment">// the next entry to use</em>
<a id="L3295" name="L3295"></a>3295         <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; stack, spare; <em class="comment">// to save/restore on ForwardingNodes</em>
<a id="L3296" name="L3296"></a>3296         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;              <em class="comment">// index of bin to use next</em>
<a id="L3297" name="L3297"></a>3297         <strong class="reserved">int</strong> baseIndex;          <em class="comment">// current index of initial table</em>
<a id="L3298" name="L3298"></a>3298         <strong class="reserved">int</strong> baseLimit;          <em class="comment">// index bound for initial table</em>
<a id="L3299" name="L3299"></a>3299         <strong class="reserved">final</strong> <strong class="reserved">int</strong> baseSize;     <em class="comment">// initial table size</em>
<a id="L3300" name="L3300"></a>3300 
<a id="L3301" name="L3301"></a>3301         Traverser(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L3302" name="L3302"></a>3302             <strong class="reserved">this</strong>.tab = tab;
<a id="L3303" name="L3303"></a>3303             <strong class="reserved">this</strong>.baseSize = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L3304" name="L3304"></a>3304             <strong class="reserved">this</strong>.baseIndex = <strong class="reserved">this</strong>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L3305" name="L3305"></a>3305             <strong class="reserved">this</strong>.baseLimit = <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>;
<a id="L3306" name="L3306"></a>3306             <strong class="reserved">this</strong>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L3307" name="L3307"></a>3307         <em class="brace">}</em>
<a id="L3308" name="L3308"></a>3308 
<div class="comment">
          Advances if possible, returning next valid node, or null if none.</div>
<a id="L3312" name="L3312"></a>3312         <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/10102.html" title="Multiple referred from 119 places.">advance</a>() <em class="brace">{</em>
<a id="L3313" name="L3313"></a>3313             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e;
<a id="L3314" name="L3314"></a>3314             <strong class="reserved">if</strong> ((e = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) != <strong class="reserved">null</strong>)
<a id="L3315" name="L3315"></a>3315                 e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L3316" name="L3316"></a>3316             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L3317" name="L3317"></a>3317                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t; <strong class="reserved">int</strong> i, n;  <em class="comment">// must use locals in checks</em>
<a id="L3318" name="L3318"></a>3318                 <strong class="reserved">if</strong> (e != <strong class="reserved">null</strong>)
<a id="L3319" name="L3319"></a>3319                     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = e;
<a id="L3320" name="L3320"></a>3320                 <strong class="reserved">if</strong> (baseIndex &gt;= baseLimit || (t = tab) == <strong class="reserved">null</strong> ||
<a id="L3321" name="L3321"></a>3321                     (n = t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &lt;= (i = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) || i &lt; 0)
<a id="L3322" name="L3322"></a>3322                     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L3323" name="L3323"></a>3323                 <strong class="reserved">if</strong> ((e = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(t, i)) != <strong class="reserved">null</strong> &amp;&amp; e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &lt; 0) <em class="brace">{</em>
<a id="L3324" name="L3324"></a>3324                     <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>) <em class="brace">{</em>
<a id="L3325" name="L3325"></a>3325                         tab = ((<a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>&lt;K,V&gt;)e).nextTable;
<a id="L3326" name="L3326"></a>3326                         e = <strong class="reserved">null</strong>;
<a id="L3327" name="L3327"></a>3327                         <a href="../D/29968.html" title="Multiple defined in 2 places.">pushState</a>(t, i, n);
<a id="L3328" name="L3328"></a>3328                         <strong class="reserved">continue</strong>;
<a id="L3329" name="L3329"></a>3329                     <em class="brace">}</em>
<a id="L3330" name="L3330"></a>3330                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>)
<a id="L3331" name="L3331"></a>3331                         e = ((<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)e).<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L3332" name="L3332"></a>3332                     <strong class="reserved">else</strong>
<a id="L3333" name="L3333"></a>3333                         e = <strong class="reserved">null</strong>;
<a id="L3334" name="L3334"></a>3334                 <em class="brace">}</em>
<a id="L3335" name="L3335"></a>3335                 <strong class="reserved">if</strong> (stack != <strong class="reserved">null</strong>)
<a id="L3336" name="L3336"></a>3336                     <a href="../D/30403.html" title="Multiple defined in 2 places.">recoverState</a>(n);
<a id="L3337" name="L3337"></a>3337                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = i + baseSize) &gt;= n)
<a id="L3338" name="L3338"></a>3338                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = ++baseIndex; <em class="comment">// visit upper slots if present</em>
<a id="L3339" name="L3339"></a>3339             <em class="brace">}</em>
<a id="L3340" name="L3340"></a>3340         <em class="brace">}</em>
<a id="L3341" name="L3341"></a>3341 
<div class="comment">
          Saves traversal state upon encountering a forwarding node.</div>
<a id="L3345" name="L3345"></a>3345         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25283.html" title="Multiple referred from 2 places.">pushState</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L3346" name="L3346"></a>3346             <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; s = spare;  <em class="comment">// reuse if possible</em>
<a id="L3347" name="L3347"></a>3347             <strong class="reserved">if</strong> (s != <strong class="reserved">null</strong>)
<a id="L3348" name="L3348"></a>3348                 spare = s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L3349" name="L3349"></a>3349             <strong class="reserved">else</strong>
<a id="L3350" name="L3350"></a>3350                 s = <strong class="reserved">new</strong> <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt;();
<a id="L3351" name="L3351"></a>3351             s.tab = t;
<a id="L3352" name="L3352"></a>3352             s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = n;
<a id="L3353" name="L3353"></a>3353             s.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = i;
<a id="L3354" name="L3354"></a>3354             s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = stack;
<a id="L3355" name="L3355"></a>3355             stack = s;
<a id="L3356" name="L3356"></a>3356         <em class="brace">}</em>
<a id="L3357" name="L3357"></a>3357 
<div class="comment">
          Possibly pops traversal state.
          @param n length of current table</div>
<a id="L3363" name="L3363"></a>3363         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25666.html" title="Multiple referred from 2 places.">recoverState</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L3364" name="L3364"></a>3364             <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; s; <strong class="reserved">int</strong> len;
<a id="L3365" name="L3365"></a>3365             <strong class="reserved">while</strong> ((s = stack) != <strong class="reserved">null</strong> &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += (len = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)) &gt;= n) <em class="brace">{</em>
<a id="L3366" name="L3366"></a>3366                 n = len;
<a id="L3367" name="L3367"></a>3367                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = s.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L3368" name="L3368"></a>3368                 tab = s.tab;
<a id="L3369" name="L3369"></a>3369                 s.tab = <strong class="reserved">null</strong>;
<a id="L3370" name="L3370"></a>3370                 <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L3371" name="L3371"></a>3371                 s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = spare; <em class="comment">// save for reuse</em>
<a id="L3372" name="L3372"></a>3372                 stack = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L3373" name="L3373"></a>3373                 spare = s;
<a id="L3374" name="L3374"></a>3374             <em class="brace">}</em>
<a id="L3375" name="L3375"></a>3375             <strong class="reserved">if</strong> (s == <strong class="reserved">null</strong> &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += baseSize) &gt;= n)
<a id="L3376" name="L3376"></a>3376                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = ++baseIndex;
<a id="L3377" name="L3377"></a>3377         <em class="brace">}</em>
<a id="L3378" name="L3378"></a>3378     <em class="brace">}</em>
<a id="L3379" name="L3379"></a>3379 
<div class="comment">
      Base of key, value, and entry Iterators. Adds fields to
      Traverser to support iterator.remove.</div>
<a id="L3384" name="L3384"></a>3384     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/655.html" title="Multiple referred from 3 places.">BaseIterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L3385" name="L3385"></a>3385         <strong class="reserved">final</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L3386" name="L3386"></a>3386         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; lastReturned;
<a id="L3387" name="L3387"></a>3387         BaseIterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3388" name="L3388"></a>3388                     <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L3389" name="L3389"></a>3389             <strong class="reserved">super</strong>(tab, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>);
<a id="L3390" name="L3390"></a>3390             <strong class="reserved">this</strong>.<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L3391" name="L3391"></a>3391             <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>();
<a id="L3392" name="L3392"></a>3392         <em class="brace">}</em>
<a id="L3393" name="L3393"></a>3393 
<a id="L3394" name="L3394"></a>3394         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/20233.html" title="Multiple referred from 653 places.">hasNext</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>; <em class="brace">}</em>
<a id="L3395" name="L3395"></a>3395         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/20227.html" title="Multiple referred from 465 places.">hasMoreElements</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>; <em class="brace">}</em>
<a id="L3396" name="L3396"></a>3396 
<a id="L3397" name="L3397"></a>3397         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>() <em class="brace">{</em>
<a id="L3398" name="L3398"></a>3398             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3399" name="L3399"></a>3399             <strong class="reserved">if</strong> ((p = lastReturned) == <strong class="reserved">null</strong>)
<a id="L3400" name="L3400"></a>3400                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>();
<a id="L3401" name="L3401"></a>3401             lastReturned = <strong class="reserved">null</strong>;
<a id="L3402" name="L3402"></a>3402             <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../S/1074.html#L1105" title="Defined at 1105 in src/java/util/concurrent/ConcurrentHashMap.java.">replaceNode</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L3403" name="L3403"></a>3403         <em class="brace">}</em>
<a id="L3404" name="L3404"></a>3404     <em class="brace">}</em>
<a id="L3405" name="L3405"></a>3405 
<a id="L3406" name="L3406"></a>3406     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4370.html" title="Multiple referred from 8 places.">KeyIterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3384" title="Defined at 3384 in src/java/util/concurrent/ConcurrentHashMap.java.">BaseIterator</a>&lt;K,V&gt;
<a id="L3407" name="L3407"></a>3407         <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;K&gt;, <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;K&gt; <em class="brace">{</em>
<a id="L3408" name="L3408"></a>3408         KeyIterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3409" name="L3409"></a>3409                     <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L3410" name="L3410"></a>3410             <strong class="reserved">super</strong>(tab, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L3411" name="L3411"></a>3411         <em class="brace">}</em>
<a id="L3412" name="L3412"></a>3412 
<a id="L3413" name="L3413"></a>3413         <strong class="reserved">public</strong> <strong class="reserved">final</strong> K <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L3414" name="L3414"></a>3414             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3415" name="L3415"></a>3415             <strong class="reserved">if</strong> ((p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>)
<a id="L3416" name="L3416"></a>3416                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L3417" name="L3417"></a>3417             K k = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L3418" name="L3418"></a>3418             lastReturned = p;
<a id="L3419" name="L3419"></a>3419             <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>();
<a id="L3420" name="L3420"></a>3420             <strong class="reserved">return</strong> k;
<a id="L3421" name="L3421"></a>3421         <em class="brace">}</em>
<a id="L3422" name="L3422"></a>3422 
<a id="L3423" name="L3423"></a>3423         <strong class="reserved">public</strong> <strong class="reserved">final</strong> K <a href="../R/23661.html" title="Multiple referred from 479 places.">nextElement</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>(); <em class="brace">}</em>
<a id="L3424" name="L3424"></a>3424     <em class="brace">}</em>
<a id="L3425" name="L3425"></a>3425 
<a id="L3426" name="L3426"></a>3426     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8626.html" title="Multiple referred from 8 places.">ValueIterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3384" title="Defined at 3384 in src/java/util/concurrent/ConcurrentHashMap.java.">BaseIterator</a>&lt;K,V&gt;
<a id="L3427" name="L3427"></a>3427         <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;V&gt;, <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;V&gt; <em class="brace">{</em>
<a id="L3428" name="L3428"></a>3428         ValueIterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3429" name="L3429"></a>3429                       <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L3430" name="L3430"></a>3430             <strong class="reserved">super</strong>(tab, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L3431" name="L3431"></a>3431         <em class="brace">}</em>
<a id="L3432" name="L3432"></a>3432 
<a id="L3433" name="L3433"></a>3433         <strong class="reserved">public</strong> <strong class="reserved">final</strong> V <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L3434" name="L3434"></a>3434             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3435" name="L3435"></a>3435             <strong class="reserved">if</strong> ((p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>)
<a id="L3436" name="L3436"></a>3436                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L3437" name="L3437"></a>3437             V v = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3438" name="L3438"></a>3438             lastReturned = p;
<a id="L3439" name="L3439"></a>3439             <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>();
<a id="L3440" name="L3440"></a>3440             <strong class="reserved">return</strong> v;
<a id="L3441" name="L3441"></a>3441         <em class="brace">}</em>
<a id="L3442" name="L3442"></a>3442 
<a id="L3443" name="L3443"></a>3443         <strong class="reserved">public</strong> <strong class="reserved">final</strong> V <a href="../R/23661.html" title="Multiple referred from 479 places.">nextElement</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>(); <em class="brace">}</em>
<a id="L3444" name="L3444"></a>3444     <em class="brace">}</em>
<a id="L3445" name="L3445"></a>3445 
<a id="L3446" name="L3446"></a>3446     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2697.html" title="Multiple referred from 7 places.">EntryIterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3384" title="Defined at 3384 in src/java/util/concurrent/ConcurrentHashMap.java.">BaseIterator</a>&lt;K,V&gt;
<a id="L3447" name="L3447"></a>3447         <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <em class="brace">{</em>
<a id="L3448" name="L3448"></a>3448         EntryIterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3449" name="L3449"></a>3449                       <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L3450" name="L3450"></a>3450             <strong class="reserved">super</strong>(tab, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L3451" name="L3451"></a>3451         <em class="brace">}</em>
<a id="L3452" name="L3452"></a>3452 
<a id="L3453" name="L3453"></a>3453         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L3454" name="L3454"></a>3454             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3455" name="L3455"></a>3455             <strong class="reserved">if</strong> ((p = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) == <strong class="reserved">null</strong>)
<a id="L3456" name="L3456"></a>3456                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L3457" name="L3457"></a>3457             K k = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L3458" name="L3458"></a>3458             V v = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3459" name="L3459"></a>3459             lastReturned = p;
<a id="L3460" name="L3460"></a>3460             <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>();
<a id="L3461" name="L3461"></a>3461             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/5400.html" title="Multiple defined in 2 places.">MapEntry</a>&lt;K,V&gt;(k, v, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L3462" name="L3462"></a>3462         <em class="brace">}</em>
<a id="L3463" name="L3463"></a>3463     <em class="brace">}</em>
<a id="L3464" name="L3464"></a>3464 
<div class="comment">
      Exported Entry for EntryIterator</div>
<a id="L3468" name="L3468"></a>3468     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4912.html" title="Multiple referred from 7 places.">MapEntry</a>&lt;K,V&gt; <strong class="reserved">implements</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; <em class="brace">{</em>
<a id="L3469" name="L3469"></a>3469         <strong class="reserved">final</strong> K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>; <em class="comment">// non-null</em>
<a id="L3470" name="L3470"></a>3470         V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;       <em class="comment">// non-null</em>
<a id="L3471" name="L3471"></a>3471         <strong class="reserved">final</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L3472" name="L3472"></a>3472         MapEntry(K <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, V <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L3473" name="L3473"></a>3473             <strong class="reserved">this</strong>.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L3474" name="L3474"></a>3474             <strong class="reserved">this</strong>.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3475" name="L3475"></a>3475             <strong class="reserved">this</strong>.<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L3476" name="L3476"></a>3476         <em class="brace">}</em>
<a id="L3477" name="L3477"></a>3477         <strong class="reserved">public</strong> K <a href="../R/17222.html" title="Multiple referred from 269 places.">getKey</a>()        <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>; <em class="brace">}</em>
<a id="L3478" name="L3478"></a>3478         <strong class="reserved">public</strong> V <a href="../R/19753.html" title="Multiple referred from 961 places.">getValue</a>()      <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>; <em class="brace">}</em>
<a id="L3479" name="L3479"></a>3479         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>()    <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() ^ <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(); <em class="brace">}</em>
<a id="L3480" name="L3480"></a>3480         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> + "=" + <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>; <em class="brace">}</em>
<a id="L3481" name="L3481"></a>3481 
<a id="L3482" name="L3482"></a>3482         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L3483" name="L3483"></a>3483             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k, v; <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt; e;
<a id="L3484" name="L3484"></a>3484             <strong class="reserved">return</strong> ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>) &amp;&amp;
<a id="L3485" name="L3485"></a>3485                     (k = (e = (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt;)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L3486" name="L3486"></a>3486                     (v = e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L3487" name="L3487"></a>3487                     (k == <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> || k.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) &amp;&amp;
<a id="L3488" name="L3488"></a>3488                     (v == <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> || v.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)));
<a id="L3489" name="L3489"></a>3489         <em class="brace">}</em>
<a id="L3490" name="L3490"></a>3490 
<div class="comment">
          Sets our entry's value and writes through to the map. The
          value to return is somewhat arbitrary here. Since we do not
          necessarily track asynchronous changes, the most recent
          "previous" value could be different from what we return (or
          could even have been removed, in which case the put will
          re-establish). We do not and cannot guarantee more.</div>
<a id="L3499" name="L3499"></a>3499         <strong class="reserved">public</strong> V <a href="../R/28371.html" title="Multiple referred from 200 places.">setValue</a>(V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L3500" name="L3500"></a>3500             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3501" name="L3501"></a>3501             V v = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3502" name="L3502"></a>3502             <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L3503" name="L3503"></a>3503             <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L3504" name="L3504"></a>3504             <strong class="reserved">return</strong> v;
<a id="L3505" name="L3505"></a>3505         <em class="brace">}</em>
<a id="L3506" name="L3506"></a>3506     <em class="brace">}</em>
<a id="L3507" name="L3507"></a>3507 
<a id="L3508" name="L3508"></a>3508     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4391.html" title="Multiple referred from 18 places.">KeySpliterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;
<a id="L3509" name="L3509"></a>3509         <strong class="reserved">implements</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;K&gt; <em class="brace">{</em>
<a id="L3510" name="L3510"></a>3510         <strong class="reserved">long</strong> est;               <em class="comment">// size estimate</em>
<a id="L3511" name="L3511"></a>3511         KeySpliterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3512" name="L3512"></a>3512                        <strong class="reserved">long</strong> est) <em class="brace">{</em>
<a id="L3513" name="L3513"></a>3513             <strong class="reserved">super</strong>(tab, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>);
<a id="L3514" name="L3514"></a>3514             <strong class="reserved">this</strong>.est = est;
<a id="L3515" name="L3515"></a>3515         <em class="brace">}</em>
<a id="L3516" name="L3516"></a>3516 
<a id="L3517" name="L3517"></a>3517         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;K&gt; <a href="../R/29563.html" title="Multiple referred from 18 places.">trySplit</a>() <em class="brace">{</em>
<a id="L3518" name="L3518"></a>3518             <strong class="reserved">int</strong> i, f, h;
<a id="L3519" name="L3519"></a>3519             <strong class="reserved">return</strong> (h = ((i = baseIndex) + (f = baseLimit)) &gt;&gt;&gt; 1) &lt;= i ? <strong class="reserved">null</strong> :
<a id="L3520" name="L3520"></a>3520                 <strong class="reserved">new</strong> <a href="../D/4828.html" title="Multiple defined in 6 places.">KeySpliterator</a>&lt;K,V&gt;(tab, baseSize, baseLimit = h,
<a id="L3521" name="L3521"></a>3521                                         f, est &gt;&gt;&gt;= 1);
<a id="L3522" name="L3522"></a>3522         <em class="brace">}</em>
<a id="L3523" name="L3523"></a>3523 
<a id="L3524" name="L3524"></a>3524         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14732.html" title="Multiple referred from 54 places.">forEachRemaining</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3525" name="L3525"></a>3525             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3526" name="L3526"></a>3526             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>;)
<a id="L3527" name="L3527"></a>3527                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L3528" name="L3528"></a>3528         <em class="brace">}</em>
<a id="L3529" name="L3529"></a>3529 
<a id="L3530" name="L3530"></a>3530         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29541.html" title="Multiple referred from 73 places.">tryAdvance</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3531" name="L3531"></a>3531             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3532" name="L3532"></a>3532             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3533" name="L3533"></a>3533             <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>)
<a id="L3534" name="L3534"></a>3534                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3535" name="L3535"></a>3535             <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L3536" name="L3536"></a>3536             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3537" name="L3537"></a>3537         <em class="brace">}</em>
<a id="L3538" name="L3538"></a>3538 
<a id="L3539" name="L3539"></a>3539         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/14042.html" title="Multiple referred from 29 places.">estimateSize</a>() <em class="brace">{</em> <strong class="reserved">return</strong> est; <em class="brace">}</em>
<a id="L3540" name="L3540"></a>3540 
<a id="L3541" name="L3541"></a>3541         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11055.html" title="Multiple referred from 149 places.">characteristics</a>() <em class="brace">{</em>
<a id="L3542" name="L3542"></a>3542             <strong class="reserved">return</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.<a href="../D/2027.html" title="Multiple defined in 2 places.">DISTINCT</a> | <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.CONCURRENT |
<a id="L3543" name="L3543"></a>3543                 <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.NONNULL;
<a id="L3544" name="L3544"></a>3544         <em class="brace">}</em>
<a id="L3545" name="L3545"></a>3545     <em class="brace">}</em>
<a id="L3546" name="L3546"></a>3546 
<a id="L3547" name="L3547"></a>3547     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8633.html" title="Multiple referred from 17 places.">ValueSpliterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;
<a id="L3548" name="L3548"></a>3548         <strong class="reserved">implements</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;V&gt; <em class="brace">{</em>
<a id="L3549" name="L3549"></a>3549         <strong class="reserved">long</strong> est;               <em class="comment">// size estimate</em>
<a id="L3550" name="L3550"></a>3550         ValueSpliterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3551" name="L3551"></a>3551                          <strong class="reserved">long</strong> est) <em class="brace">{</em>
<a id="L3552" name="L3552"></a>3552             <strong class="reserved">super</strong>(tab, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>);
<a id="L3553" name="L3553"></a>3553             <strong class="reserved">this</strong>.est = est;
<a id="L3554" name="L3554"></a>3554         <em class="brace">}</em>
<a id="L3555" name="L3555"></a>3555 
<a id="L3556" name="L3556"></a>3556         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;V&gt; <a href="../R/29563.html" title="Multiple referred from 18 places.">trySplit</a>() <em class="brace">{</em>
<a id="L3557" name="L3557"></a>3557             <strong class="reserved">int</strong> i, f, h;
<a id="L3558" name="L3558"></a>3558             <strong class="reserved">return</strong> (h = ((i = baseIndex) + (f = baseLimit)) &gt;&gt;&gt; 1) &lt;= i ? <strong class="reserved">null</strong> :
<a id="L3559" name="L3559"></a>3559                 <strong class="reserved">new</strong> <a href="../D/9508.html" title="Multiple defined in 6 places.">ValueSpliterator</a>&lt;K,V&gt;(tab, baseSize, baseLimit = h,
<a id="L3560" name="L3560"></a>3560                                           f, est &gt;&gt;&gt;= 1);
<a id="L3561" name="L3561"></a>3561         <em class="brace">}</em>
<a id="L3562" name="L3562"></a>3562 
<a id="L3563" name="L3563"></a>3563         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14732.html" title="Multiple referred from 54 places.">forEachRemaining</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3564" name="L3564"></a>3564             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3565" name="L3565"></a>3565             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>;)
<a id="L3566" name="L3566"></a>3566                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L3567" name="L3567"></a>3567         <em class="brace">}</em>
<a id="L3568" name="L3568"></a>3568 
<a id="L3569" name="L3569"></a>3569         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29541.html" title="Multiple referred from 73 places.">tryAdvance</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3570" name="L3570"></a>3570             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3571" name="L3571"></a>3571             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3572" name="L3572"></a>3572             <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>)
<a id="L3573" name="L3573"></a>3573                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3574" name="L3574"></a>3574             <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L3575" name="L3575"></a>3575             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3576" name="L3576"></a>3576         <em class="brace">}</em>
<a id="L3577" name="L3577"></a>3577 
<a id="L3578" name="L3578"></a>3578         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/14042.html" title="Multiple referred from 29 places.">estimateSize</a>() <em class="brace">{</em> <strong class="reserved">return</strong> est; <em class="brace">}</em>
<a id="L3579" name="L3579"></a>3579 
<a id="L3580" name="L3580"></a>3580         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11055.html" title="Multiple referred from 149 places.">characteristics</a>() <em class="brace">{</em>
<a id="L3581" name="L3581"></a>3581             <strong class="reserved">return</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.CONCURRENT | <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.NONNULL;
<a id="L3582" name="L3582"></a>3582         <em class="brace">}</em>
<a id="L3583" name="L3583"></a>3583     <em class="brace">}</em>
<a id="L3584" name="L3584"></a>3584 
<a id="L3585" name="L3585"></a>3585     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2701.html" title="Multiple referred from 17 places.">EntrySpliterator</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;
<a id="L3586" name="L3586"></a>3586         <strong class="reserved">implements</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <em class="brace">{</em>
<a id="L3587" name="L3587"></a>3587         <strong class="reserved">final</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>; <em class="comment">// To export MapEntry</em>
<a id="L3588" name="L3588"></a>3588         <strong class="reserved">long</strong> est;               <em class="comment">// size estimate</em>
<a id="L3589" name="L3589"></a>3589         EntrySpliterator(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>,
<a id="L3590" name="L3590"></a>3590                          <strong class="reserved">long</strong> est, <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L3591" name="L3591"></a>3591             <strong class="reserved">super</strong>(tab, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>);
<a id="L3592" name="L3592"></a>3592             <strong class="reserved">this</strong>.<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L3593" name="L3593"></a>3593             <strong class="reserved">this</strong>.est = est;
<a id="L3594" name="L3594"></a>3594         <em class="brace">}</em>
<a id="L3595" name="L3595"></a>3595 
<a id="L3596" name="L3596"></a>3596         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../R/29563.html" title="Multiple referred from 18 places.">trySplit</a>() <em class="brace">{</em>
<a id="L3597" name="L3597"></a>3597             <strong class="reserved">int</strong> i, f, h;
<a id="L3598" name="L3598"></a>3598             <strong class="reserved">return</strong> (h = ((i = baseIndex) + (f = baseLimit)) &gt;&gt;&gt; 1) &lt;= i ? <strong class="reserved">null</strong> :
<a id="L3599" name="L3599"></a>3599                 <strong class="reserved">new</strong> <a href="../D/2932.html" title="Multiple defined in 6 places.">EntrySpliterator</a>&lt;K,V&gt;(tab, baseSize, baseLimit = h,
<a id="L3600" name="L3600"></a>3600                                           f, est &gt;&gt;&gt;= 1, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L3601" name="L3601"></a>3601         <em class="brace">}</em>
<a id="L3602" name="L3602"></a>3602 
<a id="L3603" name="L3603"></a>3603         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14732.html" title="Multiple referred from 54 places.">forEachRemaining</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3604" name="L3604"></a>3604             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3605" name="L3605"></a>3605             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L3606" name="L3606"></a>3606                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<strong class="reserved">new</strong> <a href="../D/5400.html" title="Multiple defined in 2 places.">MapEntry</a>&lt;K,V&gt;(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>));
<a id="L3607" name="L3607"></a>3607         <em class="brace">}</em>
<a id="L3608" name="L3608"></a>3608 
<a id="L3609" name="L3609"></a>3609         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29541.html" title="Multiple referred from 73 places.">tryAdvance</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3610" name="L3610"></a>3610             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3611" name="L3611"></a>3611             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L3612" name="L3612"></a>3612             <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>)
<a id="L3613" name="L3613"></a>3613                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3614" name="L3614"></a>3614             <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<strong class="reserved">new</strong> <a href="../D/5400.html" title="Multiple defined in 2 places.">MapEntry</a>&lt;K,V&gt;(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>));
<a id="L3615" name="L3615"></a>3615             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3616" name="L3616"></a>3616         <em class="brace">}</em>
<a id="L3617" name="L3617"></a>3617 
<a id="L3618" name="L3618"></a>3618         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/14042.html" title="Multiple referred from 29 places.">estimateSize</a>() <em class="brace">{</em> <strong class="reserved">return</strong> est; <em class="brace">}</em>
<a id="L3619" name="L3619"></a>3619 
<a id="L3620" name="L3620"></a>3620         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11055.html" title="Multiple referred from 149 places.">characteristics</a>() <em class="brace">{</em>
<a id="L3621" name="L3621"></a>3621             <strong class="reserved">return</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.<a href="../D/2027.html" title="Multiple defined in 2 places.">DISTINCT</a> | <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.CONCURRENT |
<a id="L3622" name="L3622"></a>3622                 <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.NONNULL;
<a id="L3623" name="L3623"></a>3623         <em class="brace">}</em>
<a id="L3624" name="L3624"></a>3624     <em class="brace">}</em>
<a id="L3625" name="L3625"></a>3625 
<a id="L3626" name="L3626"></a>3626     <em class="comment">// Parallel bulk operations</em>
<a id="L3627" name="L3627"></a>3627 
<div class="comment">
      Computes initial batch value for bulk tasks. The returned value
      is approximately exp2 of the number of times (minus one) to
      split task by two before executing leaf action. This value is
      faster to compute and more convenient to use as a guide to
      splitting than is the depth, since it is used while dividing by
      two anyway.</div>
<a id="L3636" name="L3636"></a>3636     <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/10551.html" title="Multiple referred from 31 places.">batchFor</a>(<strong class="reserved">long</strong> b) <em class="brace">{</em>
<a id="L3637" name="L3637"></a>3637         <strong class="reserved">long</strong> n;
<a id="L3638" name="L3638"></a>3638         <strong class="reserved">if</strong> (b == <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE || (n = <a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>()) &lt;= 1L || n &lt; b)
<a id="L3639" name="L3639"></a>3639             <strong class="reserved">return</strong> 0;
<a id="L3640" name="L3640"></a>3640         <strong class="reserved">int</strong> sp = <a href="../S/1063.html#L170" title="Defined at 170 in src/java/util/concurrent/ForkJoinPool.java.">ForkJoinPool</a>.<a href="../S/1063.html#L2770" title="Defined at 2770 in src/java/util/concurrent/ForkJoinPool.java.">getCommonPoolParallelism</a>() &lt;&lt; 2; <em class="comment">// slack of 4</em>
<a id="L3641" name="L3641"></a>3641         <strong class="reserved">return</strong> (b &lt;= 0L || (n /= b) &gt;= sp) ? sp : (<strong class="reserved">int</strong>)n;
<a id="L3642" name="L3642"></a>3642     <em class="brace">}</em>
<a id="L3643" name="L3643"></a>3643 
<div class="comment">
      Performs the given action for each (key, value).
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param action the action
      @since 1.8</div>
<a id="L3652" name="L3652"></a>3652     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14730.html" title="Multiple referred from 50 places.">forEach</a>(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3653" name="L3653"></a>3653                         <a href="../S/971.html#L45" title="Defined at 45 in src/java/util/function/BiConsumer.java.">BiConsumer</a>&lt;? <strong class="reserved">super</strong> K,? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3654" name="L3654"></a>3654         <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3655" name="L3655"></a>3655         <strong class="reserved">new</strong> <a href="../S/1074.html#L4984" title="Defined at 4984 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachMappingTask</a>&lt;K,V&gt;
<a id="L3656" name="L3656"></a>3656             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3657" name="L3657"></a>3657              <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3658" name="L3658"></a>3658     <em class="brace">}</em>
<a id="L3659" name="L3659"></a>3659 
<div class="comment">
      Performs the given action for each non-null transformation
      of each (key, value).
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case the action is not applied)
      @param action the action
      @param <u> the return type of the transformer
      @since 1.8</u></div>
<a id="L3673" name="L3673"></a>3673     <strong class="reserved">public</strong> &lt;U&gt; <strong class="reserved">void</strong> <a href="../R/14730.html" title="Multiple referred from 50 places.">forEach</a>(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3674" name="L3674"></a>3674                             <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L3675" name="L3675"></a>3675                             <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3676" name="L3676"></a>3676         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L3677" name="L3677"></a>3677             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3678" name="L3678"></a>3678         <strong class="reserved">new</strong> <a href="../S/1074.html#L5110" title="Defined at 5110 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedMappingTask</a>&lt;K,V,U&gt;
<a id="L3679" name="L3679"></a>3679             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3680" name="L3680"></a>3680              transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3681" name="L3681"></a>3681     <em class="brace">}</em>
<a id="L3682" name="L3682"></a>3682 
<div class="comment">
      Returns a non-null result from applying the given search
      function on each (key, value), or null if none.  Upon
      success, further element processing is suppressed and the
      results of any other parallel invocations of the search
      function are ignored.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param searchFunction a function returning a non-null
      result on success, else null
      @param <u> the return type of the search function
      @return a non-null result from applying the given search
      function on each (key, value), or null if none
      @since 1.8</u></div>
<a id="L3699" name="L3699"></a>3699     <strong class="reserved">public</strong> &lt;U&gt; U <a href="../R/26696.html" title="Multiple referred from 113 places.">search</a>(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3700" name="L3700"></a>3700                         <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction) <em class="brace">{</em>
<a id="L3701" name="L3701"></a>3701         <strong class="reserved">if</strong> (searchFunction == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3702" name="L3702"></a>3702         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5276" title="Defined at 5276 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchMappingsTask</a>&lt;K,V,U&gt;
<a id="L3703" name="L3703"></a>3703             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3704" name="L3704"></a>3704              searchFunction, <strong class="reserved">new</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt;()).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3705" name="L3705"></a>3705     <em class="brace">}</em>
<a id="L3706" name="L3706"></a>3706 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all (key, value) pairs using the given reducer to
      combine values, or null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case it is not combined)
      @param reducer a commutative associative combining function
      @param <u> the return type of the transformer
      @return the result of accumulating the given transformation
      of all (key, value) pairs
      @since 1.8</u></div>
<a id="L3723" name="L3723"></a>3723     <strong class="reserved">public</strong> &lt;U&gt; U <a href="../R/25697.html" title="Multiple referred from 24 places.">reduce</a>(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3724" name="L3724"></a>3724                         <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L3725" name="L3725"></a>3725                         <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L3726" name="L3726"></a>3726         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3727" name="L3727"></a>3727             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3728" name="L3728"></a>3728         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5624" title="Defined at 5624 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsTask</a>&lt;K,V,U&gt;
<a id="L3729" name="L3729"></a>3729             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3730" name="L3730"></a>3730              <strong class="reserved">null</strong>, transformer, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3731" name="L3731"></a>3731     <em class="brace">}</em>
<a id="L3732" name="L3732"></a>3732 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all (key, value) pairs using the given reducer to
      combine values, and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all (key, value) pairs
      @since 1.8</div>
<a id="L3748" name="L3748"></a>3748     <strong class="reserved">public</strong> <strong class="reserved">double</strong> reduceToDouble(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3749" name="L3749"></a>3749                                  <a href="../S/953.html#L42" title="Defined at 42 in src/java/util/function/ToDoubleBiFunction.java.">ToDoubleBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L3750" name="L3750"></a>3750                                  <strong class="reserved">double</strong> basis,
<a id="L3751" name="L3751"></a>3751                                  <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L3752" name="L3752"></a>3752         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3753" name="L3753"></a>3753             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3754" name="L3754"></a>3754         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5828" title="Defined at 5828 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt;
<a id="L3755" name="L3755"></a>3755             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3756" name="L3756"></a>3756              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3757" name="L3757"></a>3757     <em class="brace">}</em>
<a id="L3758" name="L3758"></a>3758 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all (key, value) pairs using the given reducer to
      combine values, and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all (key, value) pairs
      @since 1.8</div>
<a id="L3774" name="L3774"></a>3774     <strong class="reserved">public</strong> <strong class="reserved">long</strong> reduceToLong(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3775" name="L3775"></a>3775                              <a href="../S/977.html#L42" title="Defined at 42 in src/java/util/function/ToLongBiFunction.java.">ToLongBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L3776" name="L3776"></a>3776                              <strong class="reserved">long</strong> basis,
<a id="L3777" name="L3777"></a>3777                              <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L3778" name="L3778"></a>3778         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3779" name="L3779"></a>3779             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3780" name="L3780"></a>3780         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L6028" title="Defined at 6028 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToLongTask</a>&lt;K,V&gt;
<a id="L3781" name="L3781"></a>3781             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3782" name="L3782"></a>3782              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3783" name="L3783"></a>3783     <em class="brace">}</em>
<a id="L3784" name="L3784"></a>3784 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all (key, value) pairs using the given reducer to
      combine values, and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all (key, value) pairs
      @since 1.8</div>
<a id="L3800" name="L3800"></a>3800     <strong class="reserved">public</strong> <strong class="reserved">int</strong> reduceToInt(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3801" name="L3801"></a>3801                            <a href="../S/983.html#L42" title="Defined at 42 in src/java/util/function/ToIntBiFunction.java.">ToIntBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L3802" name="L3802"></a>3802                            <strong class="reserved">int</strong> basis,
<a id="L3803" name="L3803"></a>3803                            <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L3804" name="L3804"></a>3804         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3805" name="L3805"></a>3805             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3806" name="L3806"></a>3806         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L6228" title="Defined at 6228 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToIntTask</a>&lt;K,V&gt;
<a id="L3807" name="L3807"></a>3807             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3808" name="L3808"></a>3808              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3809" name="L3809"></a>3809     <em class="brace">}</em>
<a id="L3810" name="L3810"></a>3810 
<div class="comment">
      Performs the given action for each key.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param action the action
      @since 1.8</div>
<a id="L3819" name="L3819"></a>3819     <strong class="reserved">public</strong> <strong class="reserved">void</strong> forEachKey(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3820" name="L3820"></a>3820                            <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3821" name="L3821"></a>3821         <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3822" name="L3822"></a>3822         <strong class="reserved">new</strong> <a href="../S/1074.html#L4903" title="Defined at 4903 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachKeyTask</a>&lt;K,V&gt;
<a id="L3823" name="L3823"></a>3823             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3824" name="L3824"></a>3824              <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3825" name="L3825"></a>3825     <em class="brace">}</em>
<a id="L3826" name="L3826"></a>3826 
<div class="comment">
      Performs the given action for each non-null transformation
      of each key.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case the action is not applied)
      @param action the action
      @param <u> the return type of the transformer
      @since 1.8</u></div>
<a id="L3840" name="L3840"></a>3840     <strong class="reserved">public</strong> &lt;U&gt; <strong class="reserved">void</strong> forEachKey(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3841" name="L3841"></a>3841                                <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L3842" name="L3842"></a>3842                                <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L3843" name="L3843"></a>3843         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L3844" name="L3844"></a>3844             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3845" name="L3845"></a>3845         <strong class="reserved">new</strong> <a href="../S/1074.html#L5011" title="Defined at 5011 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedKeyTask</a>&lt;K,V,U&gt;
<a id="L3846" name="L3846"></a>3846             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3847" name="L3847"></a>3847              transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3848" name="L3848"></a>3848     <em class="brace">}</em>
<a id="L3849" name="L3849"></a>3849 
<div class="comment">
      Returns a non-null result from applying the given search
      function on each key, or null if none. Upon success,
      further element processing is suppressed and the results of
      any other parallel invocations of the search function are
      ignored.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param searchFunction a function returning a non-null
      result on success, else null
      @param <u> the return type of the search function
      @return a non-null result from applying the given search
      function on each key, or null if none
      @since 1.8</u></div>
<a id="L3866" name="L3866"></a>3866     <strong class="reserved">public</strong> &lt;U&gt; U searchKeys(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3867" name="L3867"></a>3867                             <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; searchFunction) <em class="brace">{</em>
<a id="L3868" name="L3868"></a>3868         <strong class="reserved">if</strong> (searchFunction == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3869" name="L3869"></a>3869         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5144" title="Defined at 5144 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchKeysTask</a>&lt;K,V,U&gt;
<a id="L3870" name="L3870"></a>3870             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3871" name="L3871"></a>3871              searchFunction, <strong class="reserved">new</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt;()).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3872" name="L3872"></a>3872     <em class="brace">}</em>
<a id="L3873" name="L3873"></a>3873 
<div class="comment">
      Returns the result of accumulating all keys using the given
      reducer to combine values, or null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param reducer a commutative associative combining function
      @return the result of accumulating all keys using the given
      reducer to combine values, or null if none
      @since 1.8</div>
<a id="L3885" name="L3885"></a>3885     <strong class="reserved">public</strong> K reduceKeys(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3886" name="L3886"></a>3886                         <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> K&gt; reducer) <em class="brace">{</em>
<a id="L3887" name="L3887"></a>3887         <strong class="reserved">if</strong> (reducer == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3888" name="L3888"></a>3888         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5320" title="Defined at 5320 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceKeysTask</a>&lt;K,V&gt;
<a id="L3889" name="L3889"></a>3889             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3890" name="L3890"></a>3890              <strong class="reserved">null</strong>, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3891" name="L3891"></a>3891     <em class="brace">}</em>
<a id="L3892" name="L3892"></a>3892 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all keys using the given reducer to combine values, or
      null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case it is not combined)
      @param reducer a commutative associative combining function
      @param <u> the return type of the transformer
      @return the result of accumulating the given transformation
      of all keys
      @since 1.8</u></div>
<a id="L3909" name="L3909"></a>3909     <strong class="reserved">public</strong> &lt;U&gt; U reduceKeys(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3910" name="L3910"></a>3910                             <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L3911" name="L3911"></a>3911          <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L3912" name="L3912"></a>3912         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3913" name="L3913"></a>3913             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3914" name="L3914"></a>3914         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5462" title="Defined at 5462 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysTask</a>&lt;K,V,U&gt;
<a id="L3915" name="L3915"></a>3915             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3916" name="L3916"></a>3916              <strong class="reserved">null</strong>, transformer, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3917" name="L3917"></a>3917     <em class="brace">}</em>
<a id="L3918" name="L3918"></a>3918 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all keys using the given reducer to combine values, and
      the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all keys
      @since 1.8</div>
<a id="L3934" name="L3934"></a>3934     <strong class="reserved">public</strong> <strong class="reserved">double</strong> reduceKeysToDouble(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3935" name="L3935"></a>3935                                      <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer,
<a id="L3936" name="L3936"></a>3936                                      <strong class="reserved">double</strong> basis,
<a id="L3937" name="L3937"></a>3937                                      <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L3938" name="L3938"></a>3938         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3939" name="L3939"></a>3939             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3940" name="L3940"></a>3940         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5678" title="Defined at 5678 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt;
<a id="L3941" name="L3941"></a>3941             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3942" name="L3942"></a>3942              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3943" name="L3943"></a>3943     <em class="brace">}</em>
<a id="L3944" name="L3944"></a>3944 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all keys using the given reducer to combine values, and
      the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all keys
      @since 1.8</div>
<a id="L3960" name="L3960"></a>3960     <strong class="reserved">public</strong> <strong class="reserved">long</strong> reduceKeysToLong(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3961" name="L3961"></a>3961                                  <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer,
<a id="L3962" name="L3962"></a>3962                                  <strong class="reserved">long</strong> basis,
<a id="L3963" name="L3963"></a>3963                                  <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L3964" name="L3964"></a>3964         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3965" name="L3965"></a>3965             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3966" name="L3966"></a>3966         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5878" title="Defined at 5878 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToLongTask</a>&lt;K,V&gt;
<a id="L3967" name="L3967"></a>3967             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3968" name="L3968"></a>3968              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3969" name="L3969"></a>3969     <em class="brace">}</em>
<a id="L3970" name="L3970"></a>3970 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all keys using the given reducer to combine values, and
      the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all keys
      @since 1.8</div>
<a id="L3986" name="L3986"></a>3986     <strong class="reserved">public</strong> <strong class="reserved">int</strong> reduceKeysToInt(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L3987" name="L3987"></a>3987                                <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer,
<a id="L3988" name="L3988"></a>3988                                <strong class="reserved">int</strong> basis,
<a id="L3989" name="L3989"></a>3989                                <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L3990" name="L3990"></a>3990         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L3991" name="L3991"></a>3991             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3992" name="L3992"></a>3992         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L6078" title="Defined at 6078 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToIntTask</a>&lt;K,V&gt;
<a id="L3993" name="L3993"></a>3993             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L3994" name="L3994"></a>3994              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L3995" name="L3995"></a>3995     <em class="brace">}</em>
<a id="L3996" name="L3996"></a>3996 
<div class="comment">
      Performs the given action for each value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param action the action
      @since 1.8</div>
<a id="L4005" name="L4005"></a>4005     <strong class="reserved">public</strong> <strong class="reserved">void</strong> forEachValue(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4006" name="L4006"></a>4006                              <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4007" name="L4007"></a>4007         <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L4008" name="L4008"></a>4008             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4009" name="L4009"></a>4009         <strong class="reserved">new</strong> <a href="../S/1074.html#L4930" title="Defined at 4930 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachValueTask</a>&lt;K,V&gt;
<a id="L4010" name="L4010"></a>4010             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4011" name="L4011"></a>4011              <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4012" name="L4012"></a>4012     <em class="brace">}</em>
<a id="L4013" name="L4013"></a>4013 
<div class="comment">
      Performs the given action for each non-null transformation
      of each value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case the action is not applied)
      @param action the action
      @param <u> the return type of the transformer
      @since 1.8</u></div>
<a id="L4027" name="L4027"></a>4027     <strong class="reserved">public</strong> &lt;U&gt; <strong class="reserved">void</strong> forEachValue(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4028" name="L4028"></a>4028                                  <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L4029" name="L4029"></a>4029                                  <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4030" name="L4030"></a>4030         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L4031" name="L4031"></a>4031             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4032" name="L4032"></a>4032         <strong class="reserved">new</strong> <a href="../S/1074.html#L5044" title="Defined at 5044 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedValueTask</a>&lt;K,V,U&gt;
<a id="L4033" name="L4033"></a>4033             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4034" name="L4034"></a>4034              transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4035" name="L4035"></a>4035     <em class="brace">}</em>
<a id="L4036" name="L4036"></a>4036 
<div class="comment">
      Returns a non-null result from applying the given search
      function on each value, or null if none.  Upon success,
      further element processing is suppressed and the results of
      any other parallel invocations of the search function are
      ignored.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param searchFunction a function returning a non-null
      result on success, else null
      @param <u> the return type of the search function
      @return a non-null result from applying the given search
      function on each value, or null if none
      @since 1.8</u></div>
<a id="L4053" name="L4053"></a>4053     <strong class="reserved">public</strong> &lt;U&gt; U searchValues(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4054" name="L4054"></a>4054                               <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction) <em class="brace">{</em>
<a id="L4055" name="L4055"></a>4055         <strong class="reserved">if</strong> (searchFunction == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4056" name="L4056"></a>4056         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5188" title="Defined at 5188 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchValuesTask</a>&lt;K,V,U&gt;
<a id="L4057" name="L4057"></a>4057             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4058" name="L4058"></a>4058              searchFunction, <strong class="reserved">new</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt;()).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4059" name="L4059"></a>4059     <em class="brace">}</em>
<a id="L4060" name="L4060"></a>4060 
<div class="comment">
      Returns the result of accumulating all values using the
      given reducer to combine values, or null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param reducer a commutative associative combining function
      @return the result of accumulating all values
      @since 1.8</div>
<a id="L4071" name="L4071"></a>4071     <strong class="reserved">public</strong> V reduceValues(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4072" name="L4072"></a>4072                           <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; reducer) <em class="brace">{</em>
<a id="L4073" name="L4073"></a>4073         <strong class="reserved">if</strong> (reducer == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4074" name="L4074"></a>4074         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5368" title="Defined at 5368 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceValuesTask</a>&lt;K,V&gt;
<a id="L4075" name="L4075"></a>4075             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4076" name="L4076"></a>4076              <strong class="reserved">null</strong>, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4077" name="L4077"></a>4077     <em class="brace">}</em>
<a id="L4078" name="L4078"></a>4078 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all values using the given reducer to combine values, or
      null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case it is not combined)
      @param reducer a commutative associative combining function
      @param <u> the return type of the transformer
      @return the result of accumulating the given transformation
      of all values
      @since 1.8</u></div>
<a id="L4095" name="L4095"></a>4095     <strong class="reserved">public</strong> &lt;U&gt; U reduceValues(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4096" name="L4096"></a>4096                               <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L4097" name="L4097"></a>4097                               <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L4098" name="L4098"></a>4098         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4099" name="L4099"></a>4099             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4100" name="L4100"></a>4100         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5516" title="Defined at 5516 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesTask</a>&lt;K,V,U&gt;
<a id="L4101" name="L4101"></a>4101             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4102" name="L4102"></a>4102              <strong class="reserved">null</strong>, transformer, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4103" name="L4103"></a>4103     <em class="brace">}</em>
<a id="L4104" name="L4104"></a>4104 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all values using the given reducer to combine values,
      and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all values
      @since 1.8</div>
<a id="L4120" name="L4120"></a>4120     <strong class="reserved">public</strong> <strong class="reserved">double</strong> reduceValuesToDouble(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4121" name="L4121"></a>4121                                        <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L4122" name="L4122"></a>4122                                        <strong class="reserved">double</strong> basis,
<a id="L4123" name="L4123"></a>4123                                        <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L4124" name="L4124"></a>4124         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4125" name="L4125"></a>4125             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4126" name="L4126"></a>4126         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5728" title="Defined at 5728 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt;
<a id="L4127" name="L4127"></a>4127             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4128" name="L4128"></a>4128              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4129" name="L4129"></a>4129     <em class="brace">}</em>
<a id="L4130" name="L4130"></a>4130 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all values using the given reducer to combine values,
      and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all values
      @since 1.8</div>
<a id="L4146" name="L4146"></a>4146     <strong class="reserved">public</strong> <strong class="reserved">long</strong> reduceValuesToLong(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4147" name="L4147"></a>4147                                    <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L4148" name="L4148"></a>4148                                    <strong class="reserved">long</strong> basis,
<a id="L4149" name="L4149"></a>4149                                    <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L4150" name="L4150"></a>4150         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4151" name="L4151"></a>4151             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4152" name="L4152"></a>4152         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5928" title="Defined at 5928 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToLongTask</a>&lt;K,V&gt;
<a id="L4153" name="L4153"></a>4153             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4154" name="L4154"></a>4154              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4155" name="L4155"></a>4155     <em class="brace">}</em>
<a id="L4156" name="L4156"></a>4156 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all values using the given reducer to combine values,
      and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all values
      @since 1.8</div>
<a id="L4172" name="L4172"></a>4172     <strong class="reserved">public</strong> <strong class="reserved">int</strong> reduceValuesToInt(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4173" name="L4173"></a>4173                                  <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L4174" name="L4174"></a>4174                                  <strong class="reserved">int</strong> basis,
<a id="L4175" name="L4175"></a>4175                                  <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L4176" name="L4176"></a>4176         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4177" name="L4177"></a>4177             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4178" name="L4178"></a>4178         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L6128" title="Defined at 6128 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToIntTask</a>&lt;K,V&gt;
<a id="L4179" name="L4179"></a>4179             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4180" name="L4180"></a>4180              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4181" name="L4181"></a>4181     <em class="brace">}</em>
<a id="L4182" name="L4182"></a>4182 
<div class="comment">
      Performs the given action for each entry.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param action the action
      @since 1.8</div>
<a id="L4191" name="L4191"></a>4191     <strong class="reserved">public</strong> <strong class="reserved">void</strong> forEachEntry(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4192" name="L4192"></a>4192                              <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4193" name="L4193"></a>4193         <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4194" name="L4194"></a>4194         <strong class="reserved">new</strong> <a href="../S/1074.html#L4957" title="Defined at 4957 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachEntryTask</a>&lt;K,V&gt;(<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4195" name="L4195"></a>4195                                   <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4196" name="L4196"></a>4196     <em class="brace">}</em>
<a id="L4197" name="L4197"></a>4197 
<div class="comment">
      Performs the given action for each non-null transformation
      of each entry.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case the action is not applied)
      @param action the action
      @param <u> the return type of the transformer
      @since 1.8</u></div>
<a id="L4211" name="L4211"></a>4211     <strong class="reserved">public</strong> &lt;U&gt; <strong class="reserved">void</strong> forEachEntry(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4212" name="L4212"></a>4212                                  <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L4213" name="L4213"></a>4213                                  <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4214" name="L4214"></a>4214         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>)
<a id="L4215" name="L4215"></a>4215             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4216" name="L4216"></a>4216         <strong class="reserved">new</strong> <a href="../S/1074.html#L5077" title="Defined at 5077 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedEntryTask</a>&lt;K,V,U&gt;
<a id="L4217" name="L4217"></a>4217             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4218" name="L4218"></a>4218              transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4219" name="L4219"></a>4219     <em class="brace">}</em>
<a id="L4220" name="L4220"></a>4220 
<div class="comment">
      Returns a non-null result from applying the given search
      function on each entry, or null if none.  Upon success,
      further element processing is suppressed and the results of
      any other parallel invocations of the search function are
      ignored.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param searchFunction a function returning a non-null
      result on success, else null
      @param <u> the return type of the search function
      @return a non-null result from applying the given search
      function on each entry, or null if none
      @since 1.8</u></div>
<a id="L4237" name="L4237"></a>4237     <strong class="reserved">public</strong> &lt;U&gt; U searchEntries(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4238" name="L4238"></a>4238                                <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; searchFunction) <em class="brace">{</em>
<a id="L4239" name="L4239"></a>4239         <strong class="reserved">if</strong> (searchFunction == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4240" name="L4240"></a>4240         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5232" title="Defined at 5232 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchEntriesTask</a>&lt;K,V,U&gt;
<a id="L4241" name="L4241"></a>4241             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4242" name="L4242"></a>4242              searchFunction, <strong class="reserved">new</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt;()).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4243" name="L4243"></a>4243     <em class="brace">}</em>
<a id="L4244" name="L4244"></a>4244 
<div class="comment">
      Returns the result of accumulating all entries using the
      given reducer to combine values, or null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param reducer a commutative associative combining function
      @return the result of accumulating all entries
      @since 1.8</div>
<a id="L4255" name="L4255"></a>4255     <strong class="reserved">public</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; reduceEntries(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4256" name="L4256"></a>4256                                         <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; reducer) <em class="brace">{</em>
<a id="L4257" name="L4257"></a>4257         <strong class="reserved">if</strong> (reducer == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4258" name="L4258"></a>4258         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5416" title="Defined at 5416 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceEntriesTask</a>&lt;K,V&gt;
<a id="L4259" name="L4259"></a>4259             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4260" name="L4260"></a>4260              <strong class="reserved">null</strong>, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4261" name="L4261"></a>4261     <em class="brace">}</em>
<a id="L4262" name="L4262"></a>4262 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all entries using the given reducer to combine values,
      or null if none.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element, or null if there is no transformation (in
      which case it is not combined)
      @param reducer a commutative associative combining function
      @param <u> the return type of the transformer
      @return the result of accumulating the given transformation
      of all entries
      @since 1.8</u></div>
<a id="L4279" name="L4279"></a>4279     <strong class="reserved">public</strong> &lt;U&gt; U reduceEntries(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4280" name="L4280"></a>4280                                <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L4281" name="L4281"></a>4281                                <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L4282" name="L4282"></a>4282         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4283" name="L4283"></a>4283             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4284" name="L4284"></a>4284         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5570" title="Defined at 5570 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesTask</a>&lt;K,V,U&gt;
<a id="L4285" name="L4285"></a>4285             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4286" name="L4286"></a>4286              <strong class="reserved">null</strong>, transformer, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4287" name="L4287"></a>4287     <em class="brace">}</em>
<a id="L4288" name="L4288"></a>4288 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all entries using the given reducer to combine values,
      and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all entries
      @since 1.8</div>
<a id="L4304" name="L4304"></a>4304     <strong class="reserved">public</strong> <strong class="reserved">double</strong> reduceEntriesToDouble(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4305" name="L4305"></a>4305                                         <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer,
<a id="L4306" name="L4306"></a>4306                                         <strong class="reserved">double</strong> basis,
<a id="L4307" name="L4307"></a>4307                                         <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L4308" name="L4308"></a>4308         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4309" name="L4309"></a>4309             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4310" name="L4310"></a>4310         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5778" title="Defined at 5778 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt;
<a id="L4311" name="L4311"></a>4311             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4312" name="L4312"></a>4312              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4313" name="L4313"></a>4313     <em class="brace">}</em>
<a id="L4314" name="L4314"></a>4314 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all entries using the given reducer to combine values,
      and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all entries
      @since 1.8</div>
<a id="L4330" name="L4330"></a>4330     <strong class="reserved">public</strong> <strong class="reserved">long</strong> reduceEntriesToLong(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4331" name="L4331"></a>4331                                     <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer,
<a id="L4332" name="L4332"></a>4332                                     <strong class="reserved">long</strong> basis,
<a id="L4333" name="L4333"></a>4333                                     <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L4334" name="L4334"></a>4334         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4335" name="L4335"></a>4335             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4336" name="L4336"></a>4336         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L5978" title="Defined at 5978 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToLongTask</a>&lt;K,V&gt;
<a id="L4337" name="L4337"></a>4337             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4338" name="L4338"></a>4338              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4339" name="L4339"></a>4339     <em class="brace">}</em>
<a id="L4340" name="L4340"></a>4340 
<div class="comment">
      Returns the result of accumulating the given transformation
      of all entries using the given reducer to combine values,
      and the given basis as an identity value.
      @param parallelismThreshold the (estimated) number of elements
      needed for this operation to be executed in parallel
      @param transformer a function returning the transformation
      for an element
      @param basis the identity (initial default value) for the reduction
      @param reducer a commutative associative combining function
      @return the result of accumulating the given transformation
      of all entries
      @since 1.8</div>
<a id="L4356" name="L4356"></a>4356     <strong class="reserved">public</strong> <strong class="reserved">int</strong> reduceEntriesToInt(<strong class="reserved">long</strong> parallelismThreshold,
<a id="L4357" name="L4357"></a>4357                                   <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer,
<a id="L4358" name="L4358"></a>4358                                   <strong class="reserved">int</strong> basis,
<a id="L4359" name="L4359"></a>4359                                   <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L4360" name="L4360"></a>4360         <strong class="reserved">if</strong> (transformer == <strong class="reserved">null</strong> || reducer == <strong class="reserved">null</strong>)
<a id="L4361" name="L4361"></a>4361             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4362" name="L4362"></a>4362         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1074.html#L6178" title="Defined at 6178 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToIntTask</a>&lt;K,V&gt;
<a id="L4363" name="L4363"></a>4363             (<strong class="reserved">null</strong>, <a href="../S/1074.html#L3636" title="Defined at 3636 in src/java/util/concurrent/ConcurrentHashMap.java.">batchFor</a>(parallelismThreshold), 0, 0, table,
<a id="L4364" name="L4364"></a>4364              <strong class="reserved">null</strong>, transformer, basis, reducer).<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>();
<a id="L4365" name="L4365"></a>4365     <em class="brace">}</em>
<a id="L4366" name="L4366"></a>4366 
<a id="L4367" name="L4367"></a>4367 
<div class="comment">
     /* ----------------Views -------------- */</div>
<a id="L4369" name="L4369"></a>4369 
<div class="comment">
      Base class for views.</div>
<a id="L4373" name="L4373"></a>4373     <strong class="reserved">abstract</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/1482.html" title="Multiple referred from 3 places.">CollectionView</a>&lt;K,V,E&gt;
<a id="L4374" name="L4374"></a>4374         <strong class="reserved">implements</strong> <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;E&gt;, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L4375" name="L4375"></a>4375         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7249069246763182397L;
<a id="L4376" name="L4376"></a>4376         <strong class="reserved">final</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4377" name="L4377"></a>4377         CollectionView(<a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>)  <em class="brace">{</em> <strong class="reserved">this</strong>.<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>; <em class="brace">}</em>
<a id="L4378" name="L4378"></a>4378 
<div class="comment">
          Returns the map backing this view.
          @return the map backing this view</div>
<a id="L4384" name="L4384"></a>4384         <strong class="reserved">public</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../R/17544.html" title="Multiple referred from 12 places.">getMap</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>; <em class="brace">}</em>
<a id="L4385" name="L4385"></a>4385 
<div class="comment">
          Removes all of the elements from this view, by removing all
          the mappings from the map backing this view.</div>
<a id="L4390" name="L4390"></a>4390         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>()      <em class="brace">{</em> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>(); <em class="brace">}</em>
<a id="L4391" name="L4391"></a>4391         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>()        <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); <em class="brace">}</em>
<a id="L4392" name="L4392"></a>4392         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/21404.html" title="Multiple referred from 435 places.">isEmpty</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>(); <em class="brace">}</em>
<a id="L4393" name="L4393"></a>4393 
<a id="L4394" name="L4394"></a>4394         <em class="comment">// implementations below rely on concrete classes supplying these</em>
<a id="L4395" name="L4395"></a>4395         <em class="comment">// abstract methods</em>
<div class="comment">
          Returns an iterator over the elements in this collection.
          <p>The returned iterator is
          <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
          @return an iterator over the elements in this collection</p></div>
<a id="L4404" name="L4404"></a>4404         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>();
<a id="L4405" name="L4405"></a>4405         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>);
<a id="L4406" name="L4406"></a>4406         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>);
<a id="L4407" name="L4407"></a>4407 
<a id="L4408" name="L4408"></a>4408         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> oomeMsg = "Required array size too large";
<a id="L4409" name="L4409"></a>4409 
<a id="L4410" name="L4410"></a>4410         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>() <em class="brace">{</em>
<a id="L4411" name="L4411"></a>4411             <strong class="reserved">long</strong> sz = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../S/1074.html#L2106" title="Defined at 2106 in src/java/util/concurrent/ConcurrentHashMap.java.">mappingCount</a>();
<a id="L4412" name="L4412"></a>4412             <strong class="reserved">if</strong> (sz &gt; MAX_ARRAY_SIZE)
<a id="L4413" name="L4413"></a>4413                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1597.html#L41" title="Defined at 41 in src/java/lang/OutOfMemoryError.java.">OutOfMemoryError</a>(oomeMsg);
<a id="L4414" name="L4414"></a>4414             <strong class="reserved">int</strong> n = (<strong class="reserved">int</strong>)sz;
<a id="L4415" name="L4415"></a>4415             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] r = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[n];
<a id="L4416" name="L4416"></a>4416             <strong class="reserved">int</strong> i = 0;
<a id="L4417" name="L4417"></a>4417             <strong class="reserved">for</strong> (E e : <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L4418" name="L4418"></a>4418                 <strong class="reserved">if</strong> (i == n) <em class="brace">{</em>
<a id="L4419" name="L4419"></a>4419                     <strong class="reserved">if</strong> (n &gt;= MAX_ARRAY_SIZE)
<a id="L4420" name="L4420"></a>4420                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1597.html#L41" title="Defined at 41 in src/java/lang/OutOfMemoryError.java.">OutOfMemoryError</a>(oomeMsg);
<a id="L4421" name="L4421"></a>4421                     <strong class="reserved">if</strong> (n &gt;= MAX_ARRAY_SIZE - (MAX_ARRAY_SIZE &gt;&gt;&gt; 1) - 1)
<a id="L4422" name="L4422"></a>4422                         n = MAX_ARRAY_SIZE;
<a id="L4423" name="L4423"></a>4423                     <strong class="reserved">else</strong>
<a id="L4424" name="L4424"></a>4424                         n += (n &gt;&gt;&gt; 1) + 1;
<a id="L4425" name="L4425"></a>4425                     r = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(r, n);
<a id="L4426" name="L4426"></a>4426                 <em class="brace">}</em>
<a id="L4427" name="L4427"></a>4427                 r[i++] = e;
<a id="L4428" name="L4428"></a>4428             <em class="brace">}</em>
<a id="L4429" name="L4429"></a>4429             <strong class="reserved">return</strong> (i == n) ? r : <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(r, i);
<a id="L4430" name="L4430"></a>4430         <em class="brace">}</em>
<a id="L4431" name="L4431"></a>4431 
<a id="L4432" name="L4432"></a>4432         @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L4433" name="L4433"></a>4433         <strong class="reserved">public</strong> <strong class="reserved">final</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L4434" name="L4434"></a>4434             <strong class="reserved">long</strong> sz = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../S/1074.html#L2106" title="Defined at 2106 in src/java/util/concurrent/ConcurrentHashMap.java.">mappingCount</a>();
<a id="L4435" name="L4435"></a>4435             <strong class="reserved">if</strong> (sz &gt; MAX_ARRAY_SIZE)
<a id="L4436" name="L4436"></a>4436                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1597.html#L41" title="Defined at 41 in src/java/lang/OutOfMemoryError.java.">OutOfMemoryError</a>(oomeMsg);
<a id="L4437" name="L4437"></a>4437             <strong class="reserved">int</strong> m = (<strong class="reserved">int</strong>)sz;
<a id="L4438" name="L4438"></a>4438             <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] r = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt;= m) ? <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> :
<a id="L4439" name="L4439"></a>4439                 (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[])<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.reflect.<a href="../D/487.html" title="Multiple defined in 2 places.">Array</a>
<a id="L4440" name="L4440"></a>4440                 .<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/17880.html" title="Multiple defined in 2 places.">getComponentType</a>(), m);
<a id="L4441" name="L4441"></a>4441             <strong class="reserved">int</strong> n = r.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4442" name="L4442"></a>4442             <strong class="reserved">int</strong> i = 0;
<a id="L4443" name="L4443"></a>4443             <strong class="reserved">for</strong> (E e : <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L4444" name="L4444"></a>4444                 <strong class="reserved">if</strong> (i == n) <em class="brace">{</em>
<a id="L4445" name="L4445"></a>4445                     <strong class="reserved">if</strong> (n &gt;= MAX_ARRAY_SIZE)
<a id="L4446" name="L4446"></a>4446                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1597.html#L41" title="Defined at 41 in src/java/lang/OutOfMemoryError.java.">OutOfMemoryError</a>(oomeMsg);
<a id="L4447" name="L4447"></a>4447                     <strong class="reserved">if</strong> (n &gt;= MAX_ARRAY_SIZE - (MAX_ARRAY_SIZE &gt;&gt;&gt; 1) - 1)
<a id="L4448" name="L4448"></a>4448                         n = MAX_ARRAY_SIZE;
<a id="L4449" name="L4449"></a>4449                     <strong class="reserved">else</strong>
<a id="L4450" name="L4450"></a>4450                         n += (n &gt;&gt;&gt; 1) + 1;
<a id="L4451" name="L4451"></a>4451                     r = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(r, n);
<a id="L4452" name="L4452"></a>4452                 <em class="brace">}</em>
<a id="L4453" name="L4453"></a>4453                 r[i++] = (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>)e;
<a id="L4454" name="L4454"></a>4454             <em class="brace">}</em>
<a id="L4455" name="L4455"></a>4455             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == r &amp;&amp; i &lt; n) <em class="brace">{</em>
<a id="L4456" name="L4456"></a>4456                 r[i] = <strong class="reserved">null</strong>; <em class="comment">// null-terminate</em>
<a id="L4457" name="L4457"></a>4457                 <strong class="reserved">return</strong> r;
<a id="L4458" name="L4458"></a>4458             <em class="brace">}</em>
<a id="L4459" name="L4459"></a>4459             <strong class="reserved">return</strong> (i == n) ? r : <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(r, i);
<a id="L4460" name="L4460"></a>4460         <em class="brace">}</em>
<a id="L4461" name="L4461"></a>4461 
<div class="comment">
          Returns a string representation of this collection.
          The string representation consists of the string representations
          of the collection's elements in the order they are returned by
          its iterator, enclosed in square brackets (<code>"[]"</code>).
          Adjacent elements are separated by the characters <code>", "</code>
          (comma and space).  Elements are converted to strings as by
          {@link String#valueOf(Object)}.
          @return a string representation of this collection</div>
<a id="L4473" name="L4473"></a>4473         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L4474" name="L4474"></a>4474             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L4475" name="L4475"></a>4475             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('[');
<a id="L4476" name="L4476"></a>4476             <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; it = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L4477" name="L4477"></a>4477             <strong class="reserved">if</strong> (it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L4478" name="L4478"></a>4478                 <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L4479" name="L4479"></a>4479                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e = it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L4480" name="L4480"></a>4480                     sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(e == <strong class="reserved">this</strong> ? "(this Collection)" : e);
<a id="L4481" name="L4481"></a>4481                     <strong class="reserved">if</strong> (!it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>())
<a id="L4482" name="L4482"></a>4482                         <strong class="reserved">break</strong>;
<a id="L4483" name="L4483"></a>4483                     sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(',').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(' ');
<a id="L4484" name="L4484"></a>4484                 <em class="brace">}</em>
<a id="L4485" name="L4485"></a>4485             <em class="brace">}</em>
<a id="L4486" name="L4486"></a>4486             <strong class="reserved">return</strong> sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(']').<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L4487" name="L4487"></a>4487         <em class="brace">}</em>
<a id="L4488" name="L4488"></a>4488 
<a id="L4489" name="L4489"></a>4489         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/11950.html" title="Multiple referred from 20 places.">containsAll</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4490" name="L4490"></a>4490             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L4491" name="L4491"></a>4491                 <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e : <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4492" name="L4492"></a>4492                     <strong class="reserved">if</strong> (e == <strong class="reserved">null</strong> || !<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(e))
<a id="L4493" name="L4493"></a>4493                         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L4494" name="L4494"></a>4494                 <em class="brace">}</em>
<a id="L4495" name="L4495"></a>4495             <em class="brace">}</em>
<a id="L4496" name="L4496"></a>4496             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L4497" name="L4497"></a>4497         <em class="brace">}</em>
<a id="L4498" name="L4498"></a>4498 
<a id="L4499" name="L4499"></a>4499         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/25889.html" title="Multiple referred from 59 places.">removeAll</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4500" name="L4500"></a>4500             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4501" name="L4501"></a>4501             <strong class="reserved">boolean</strong> modified = <strong class="reserved">false</strong>;
<a id="L4502" name="L4502"></a>4502             <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; it = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>();) <em class="brace">{</em>
<a id="L4503" name="L4503"></a>4503                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>())) <em class="brace">{</em>
<a id="L4504" name="L4504"></a>4504                     it.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L4505" name="L4505"></a>4505                     modified = <strong class="reserved">true</strong>;
<a id="L4506" name="L4506"></a>4506                 <em class="brace">}</em>
<a id="L4507" name="L4507"></a>4507             <em class="brace">}</em>
<a id="L4508" name="L4508"></a>4508             <strong class="reserved">return</strong> modified;
<a id="L4509" name="L4509"></a>4509         <em class="brace">}</em>
<a id="L4510" name="L4510"></a>4510 
<a id="L4511" name="L4511"></a>4511         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/26446.html" title="Multiple referred from 10 places.">retainAll</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4512" name="L4512"></a>4512             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4513" name="L4513"></a>4513             <strong class="reserved">boolean</strong> modified = <strong class="reserved">false</strong>;
<a id="L4514" name="L4514"></a>4514             <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; it = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>();) <em class="brace">{</em>
<a id="L4515" name="L4515"></a>4515                 <strong class="reserved">if</strong> (!<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>())) <em class="brace">{</em>
<a id="L4516" name="L4516"></a>4516                     it.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L4517" name="L4517"></a>4517                     modified = <strong class="reserved">true</strong>;
<a id="L4518" name="L4518"></a>4518                 <em class="brace">}</em>
<a id="L4519" name="L4519"></a>4519             <em class="brace">}</em>
<a id="L4520" name="L4520"></a>4520             <strong class="reserved">return</strong> modified;
<a id="L4521" name="L4521"></a>4521         <em class="brace">}</em>
<a id="L4522" name="L4522"></a>4522 
<a id="L4523" name="L4523"></a>4523     <em class="brace">}</em>
<a id="L4524" name="L4524"></a>4524 
<div class="comment">
      A view of a ConcurrentHashMap as a {@link Set} of keys, in
      which additions may optionally be enabled by mapping to a
      common value.  This class cannot be directly instantiated.
      See {@link #keySet() keySet()},
      {@link #keySet(Object) keySet(V)},
      {@link #newKeySet() newKeySet()},
      {@link #newKeySet(int) newKeySet(int)}.
      @since 1.8</div>
<a id="L4536" name="L4536"></a>4536     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/4389.html" title="Multiple referred from 10 places.">KeySetView</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L4373" title="Defined at 4373 in src/java/util/concurrent/ConcurrentHashMap.java.">CollectionView</a>&lt;K,V,K&gt;
<a id="L4537" name="L4537"></a>4537         <strong class="reserved">implements</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;K&gt;, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L4538" name="L4538"></a>4538         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7249069246763182397L;
<a id="L4539" name="L4539"></a>4539         <strong class="reserved">private</strong> <strong class="reserved">final</strong> V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L4540" name="L4540"></a>4540         KeySetView(<a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>, V <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>  <em class="comment">// non-public</em>
<a id="L4541" name="L4541"></a>4541             <strong class="reserved">super</strong>(<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>);
<a id="L4542" name="L4542"></a>4542             <strong class="reserved">this</strong>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L4543" name="L4543"></a>4543         <em class="brace">}</em>
<a id="L4544" name="L4544"></a>4544 
<div class="comment">
          Returns the default mapped value for additions,
          or <code>null</code> if additions are not supported.
          @return the default mapped value for additions, or <code>null</code>
          if not supported</div>
<a id="L4552" name="L4552"></a>4552         <strong class="reserved">public</strong> V getMappedValue() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>; <em class="brace">}</em>
<a id="L4553" name="L4553"></a>4553 
<div class="comment">
          {@inheritDoc}
          @throws NullPointerException if the specified key is null</div>
<a id="L4558" name="L4558"></a>4558         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/13333.html" title="Multiple defined in 42 places.">containsKey</a>(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>); <em class="brace">}</em>
<a id="L4559" name="L4559"></a>4559 
<div class="comment">
          Removes the key from this map view, by removing the key (and its
          corresponding value) from the backing map.  This method does
          nothing if the key is not in the map.
          @param  o the key to be removed from the backing map
          @return <code>true</code> if the backing map contained the specified key
          @throws NullPointerException if the specified key is null</div>
<a id="L4569" name="L4569"></a>4569         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) != <strong class="reserved">null</strong>; <em class="brace">}</em>
<a id="L4570" name="L4570"></a>4570 
<div class="comment">
          @return an iterator over the keys of the backing map</div>
<a id="L4574" name="L4574"></a>4574         <strong class="reserved">public</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;K&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L4575" name="L4575"></a>4575             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4576" name="L4576"></a>4576             <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; m = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4577" name="L4577"></a>4577             <strong class="reserved">int</strong> f = (t = m.table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4578" name="L4578"></a>4578             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4806.html" title="Multiple defined in 7 places.">KeyIterator</a>&lt;K,V&gt;(t, f, 0, f, m);
<a id="L4579" name="L4579"></a>4579         <em class="brace">}</em>
<a id="L4580" name="L4580"></a>4580 
<div class="comment">
          Adds the specified key to this set view by mapping the key to
          the default mapped value in the backing map, if defined.
          @param e key to be added
          @return <code>true</code> if this set changed as a result of the call
          @throws NullPointerException if the specified key is null
          @throws UnsupportedOperationException if no default mapped value
          for additions was provided</div>
<a id="L4591" name="L4591"></a>4591         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(K e) <em class="brace">{</em>
<a id="L4592" name="L4592"></a>4592             V v;
<a id="L4593" name="L4593"></a>4593             <strong class="reserved">if</strong> ((v = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) == <strong class="reserved">null</strong>)
<a id="L4594" name="L4594"></a>4594                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L4595" name="L4595"></a>4595             <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30050.html" title="Multiple defined in 2 places.">putVal</a>(e, v, <strong class="reserved">true</strong>) == <strong class="reserved">null</strong>;
<a id="L4596" name="L4596"></a>4596         <em class="brace">}</em>
<a id="L4597" name="L4597"></a>4597 
<div class="comment">
          Adds all of the elements in the specified collection to this set,
          as if by calling {@link #add} on each one.
          @param c the elements to be inserted into this set
          @return <code>true</code> if this set changed as a result of the call
          @throws NullPointerException if the collection or any of its
          elements are <code>null</code>
          @throws UnsupportedOperationException if no default mapped value
          for additions was provided</div>
<a id="L4609" name="L4609"></a>4609         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9603.html" title="Multiple referred from 145 places.">addAll</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">extends</strong> K&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4610" name="L4610"></a>4610             <strong class="reserved">boolean</strong> added = <strong class="reserved">false</strong>;
<a id="L4611" name="L4611"></a>4611             V v;
<a id="L4612" name="L4612"></a>4612             <strong class="reserved">if</strong> ((v = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) == <strong class="reserved">null</strong>)
<a id="L4613" name="L4613"></a>4613                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L4614" name="L4614"></a>4614             <strong class="reserved">for</strong> (K e : <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4615" name="L4615"></a>4615                 <strong class="reserved">if</strong> (<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30050.html" title="Multiple defined in 2 places.">putVal</a>(e, v, <strong class="reserved">true</strong>) == <strong class="reserved">null</strong>)
<a id="L4616" name="L4616"></a>4616                     added = <strong class="reserved">true</strong>;
<a id="L4617" name="L4617"></a>4617             <em class="brace">}</em>
<a id="L4618" name="L4618"></a>4618             <strong class="reserved">return</strong> added;
<a id="L4619" name="L4619"></a>4619         <em class="brace">}</em>
<a id="L4620" name="L4620"></a>4620 
<a id="L4621" name="L4621"></a>4621         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L4622" name="L4622"></a>4622             <strong class="reserved">int</strong> h = 0;
<a id="L4623" name="L4623"></a>4623             <strong class="reserved">for</strong> (K e : <strong class="reserved">this</strong>)
<a id="L4624" name="L4624"></a>4624                 h += e.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L4625" name="L4625"></a>4625             <strong class="reserved">return</strong> h;
<a id="L4626" name="L4626"></a>4626         <em class="brace">}</em>
<a id="L4627" name="L4627"></a>4627 
<a id="L4628" name="L4628"></a>4628         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L4629" name="L4629"></a>4629             <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L4630" name="L4630"></a>4630             <strong class="reserved">return</strong> ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>) &amp;&amp;
<a id="L4631" name="L4631"></a>4631                     ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;?&gt;)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) == <strong class="reserved">this</strong> ||
<a id="L4632" name="L4632"></a>4632                      (<a href="../D/13315.html" title="Multiple defined in 21 places.">containsAll</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13315.html" title="Multiple defined in 21 places.">containsAll</a>(<strong class="reserved">this</strong>))));
<a id="L4633" name="L4633"></a>4633         <em class="brace">}</em>
<a id="L4634" name="L4634"></a>4634 
<a id="L4635" name="L4635"></a>4635         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;K&gt; <a href="../R/28762.html" title="Multiple referred from 435 places.">spliterator</a>() <em class="brace">{</em>
<a id="L4636" name="L4636"></a>4636             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4637" name="L4637"></a>4637             <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; m = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4638" name="L4638"></a>4638             <strong class="reserved">long</strong> n = m.<a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L4639" name="L4639"></a>4639             <strong class="reserved">int</strong> f = (t = m.table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4640" name="L4640"></a>4640             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4828.html" title="Multiple defined in 6 places.">KeySpliterator</a>&lt;K,V&gt;(t, f, 0, f, n &lt; 0L ? 0L : n);
<a id="L4641" name="L4641"></a>4641         <em class="brace">}</em>
<a id="L4642" name="L4642"></a>4642 
<a id="L4643" name="L4643"></a>4643         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14730.html" title="Multiple referred from 50 places.">forEach</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4644" name="L4644"></a>4644             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4645" name="L4645"></a>4645             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4646" name="L4646"></a>4646             <strong class="reserved">if</strong> ((t = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4647" name="L4647"></a>4647                 <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L4648" name="L4648"></a>4648                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L4649" name="L4649"></a>4649                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L4650" name="L4650"></a>4650             <em class="brace">}</em>
<a id="L4651" name="L4651"></a>4651         <em class="brace">}</em>
<a id="L4652" name="L4652"></a>4652     <em class="brace">}</em>
<a id="L4653" name="L4653"></a>4653 
<div class="comment">
      A view of a ConcurrentHashMap as a {@link Collection} of
      values, in which additions are disabled. This class cannot be
      directly instantiated. See {@link #values()}.</div>
<a id="L4659" name="L4659"></a>4659     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8641.html" title="Multiple referred from 3 places.">ValuesView</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L4373" title="Defined at 4373 in src/java/util/concurrent/ConcurrentHashMap.java.">CollectionView</a>&lt;K,V,V&gt;
<a id="L4660" name="L4660"></a>4660         <strong class="reserved">implements</strong> <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;V&gt;, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L4661" name="L4661"></a>4661         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2249069246763182397L;
<a id="L4662" name="L4662"></a>4662         ValuesView(<a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em> <strong class="reserved">super</strong>(<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>); <em class="brace">}</em>
<a id="L4663" name="L4663"></a>4663         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L4664" name="L4664"></a>4664             <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/13361.html" title="Multiple defined in 32 places.">containsValue</a>(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>);
<a id="L4665" name="L4665"></a>4665         <em class="brace">}</em>
<a id="L4666" name="L4666"></a>4666 
<a id="L4667" name="L4667"></a>4667         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L4668" name="L4668"></a>4668             <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4669" name="L4669"></a>4669                 <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;V&gt; it = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>();) <em class="brace">{</em>
<a id="L4670" name="L4670"></a>4670                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>())) <em class="brace">{</em>
<a id="L4671" name="L4671"></a>4671                         it.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L4672" name="L4672"></a>4672                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L4673" name="L4673"></a>4673                     <em class="brace">}</em>
<a id="L4674" name="L4674"></a>4674                 <em class="brace">}</em>
<a id="L4675" name="L4675"></a>4675             <em class="brace">}</em>
<a id="L4676" name="L4676"></a>4676             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L4677" name="L4677"></a>4677         <em class="brace">}</em>
<a id="L4678" name="L4678"></a>4678 
<a id="L4679" name="L4679"></a>4679         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;V&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L4680" name="L4680"></a>4680             <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; m = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4681" name="L4681"></a>4681             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4682" name="L4682"></a>4682             <strong class="reserved">int</strong> f = (t = m.table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4683" name="L4683"></a>4683             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/9501.html" title="Multiple defined in 7 places.">ValueIterator</a>&lt;K,V&gt;(t, f, 0, f, m);
<a id="L4684" name="L4684"></a>4684         <em class="brace">}</em>
<a id="L4685" name="L4685"></a>4685 
<a id="L4686" name="L4686"></a>4686         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(V e) <em class="brace">{</em>
<a id="L4687" name="L4687"></a>4687             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L4688" name="L4688"></a>4688         <em class="brace">}</em>
<a id="L4689" name="L4689"></a>4689         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/9603.html" title="Multiple referred from 145 places.">addAll</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">extends</strong> V&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4690" name="L4690"></a>4690             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L4691" name="L4691"></a>4691         <em class="brace">}</em>
<a id="L4692" name="L4692"></a>4692 
<a id="L4693" name="L4693"></a>4693         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;V&gt; <a href="../R/28762.html" title="Multiple referred from 435 places.">spliterator</a>() <em class="brace">{</em>
<a id="L4694" name="L4694"></a>4694             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4695" name="L4695"></a>4695             <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; m = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4696" name="L4696"></a>4696             <strong class="reserved">long</strong> n = m.<a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L4697" name="L4697"></a>4697             <strong class="reserved">int</strong> f = (t = m.table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4698" name="L4698"></a>4698             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/9508.html" title="Multiple defined in 6 places.">ValueSpliterator</a>&lt;K,V&gt;(t, f, 0, f, n &lt; 0L ? 0L : n);
<a id="L4699" name="L4699"></a>4699         <em class="brace">}</em>
<a id="L4700" name="L4700"></a>4700 
<a id="L4701" name="L4701"></a>4701         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14730.html" title="Multiple referred from 50 places.">forEach</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4702" name="L4702"></a>4702             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4703" name="L4703"></a>4703             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4704" name="L4704"></a>4704             <strong class="reserved">if</strong> ((t = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4705" name="L4705"></a>4705                 <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L4706" name="L4706"></a>4706                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L4707" name="L4707"></a>4707                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L4708" name="L4708"></a>4708             <em class="brace">}</em>
<a id="L4709" name="L4709"></a>4709         <em class="brace">}</em>
<a id="L4710" name="L4710"></a>4710     <em class="brace">}</em>
<a id="L4711" name="L4711"></a>4711 
<div class="comment">
      A view of a ConcurrentHashMap as a {@link Set} of (key, value)
      entries.  This class cannot be directly instantiated. See
      {@link #entrySet()}.</div>
<a id="L4717" name="L4717"></a>4717     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2700.html" title="Multiple referred from 8 places.">EntrySetView</a>&lt;K,V&gt; <strong class="reserved">extends</strong> <a href="../S/1074.html#L4373" title="Defined at 4373 in src/java/util/concurrent/ConcurrentHashMap.java.">CollectionView</a>&lt;K,V,<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt;
<a id="L4718" name="L4718"></a>4718         <strong class="reserved">implements</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt;, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L4719" name="L4719"></a>4719         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2249069246763182397L;
<a id="L4720" name="L4720"></a>4720         EntrySetView(<a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em> <strong class="reserved">super</strong>(<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>); <em class="brace">}</em>
<a id="L4721" name="L4721"></a>4721 
<a id="L4722" name="L4722"></a>4722         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L4723" name="L4723"></a>4723             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k, v, r; <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt; e;
<a id="L4724" name="L4724"></a>4724             <strong class="reserved">return</strong> ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>) &amp;&amp;
<a id="L4725" name="L4725"></a>4725                     (k = (e = (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt;)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L4726" name="L4726"></a>4726                     (r = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(k)) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L4727" name="L4727"></a>4727                     (v = e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L4728" name="L4728"></a>4728                     (v == r || v.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(r)));
<a id="L4729" name="L4729"></a>4729         <em class="brace">}</em>
<a id="L4730" name="L4730"></a>4730 
<a id="L4731" name="L4731"></a>4731         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L4732" name="L4732"></a>4732             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> k, v; <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt; e;
<a id="L4733" name="L4733"></a>4733             <strong class="reserved">return</strong> ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>) &amp;&amp;
<a id="L4734" name="L4734"></a>4734                     (k = (e = (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;?,?&gt;)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L4735" name="L4735"></a>4735                     (v = e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>()) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L4736" name="L4736"></a>4736                     <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(k, v));
<a id="L4737" name="L4737"></a>4737         <em class="brace">}</em>
<a id="L4738" name="L4738"></a>4738 
<div class="comment">
          @return an iterator over the entries of the backing map</div>
<a id="L4742" name="L4742"></a>4742         <strong class="reserved">public</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L4743" name="L4743"></a>4743             <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; m = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4744" name="L4744"></a>4744             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4745" name="L4745"></a>4745             <strong class="reserved">int</strong> f = (t = m.table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4746" name="L4746"></a>4746             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2928.html" title="Multiple defined in 7 places.">EntryIterator</a>&lt;K,V&gt;(t, f, 0, f, m);
<a id="L4747" name="L4747"></a>4747         <em class="brace">}</em>
<a id="L4748" name="L4748"></a>4748 
<a id="L4749" name="L4749"></a>4749         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; e) <em class="brace">{</em>
<a id="L4750" name="L4750"></a>4750             <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30050.html" title="Multiple defined in 2 places.">putVal</a>(e.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>(), e.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(), <strong class="reserved">false</strong>) == <strong class="reserved">null</strong>;
<a id="L4751" name="L4751"></a>4751         <em class="brace">}</em>
<a id="L4752" name="L4752"></a>4752 
<a id="L4753" name="L4753"></a>4753         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9603.html" title="Multiple referred from 145 places.">addAll</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">extends</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4754" name="L4754"></a>4754             <strong class="reserved">boolean</strong> added = <strong class="reserved">false</strong>;
<a id="L4755" name="L4755"></a>4755             <strong class="reserved">for</strong> (<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; e : <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L4756" name="L4756"></a>4756                 <strong class="reserved">if</strong> (<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(e))
<a id="L4757" name="L4757"></a>4757                     added = <strong class="reserved">true</strong>;
<a id="L4758" name="L4758"></a>4758             <em class="brace">}</em>
<a id="L4759" name="L4759"></a>4759             <strong class="reserved">return</strong> added;
<a id="L4760" name="L4760"></a>4760         <em class="brace">}</em>
<a id="L4761" name="L4761"></a>4761 
<a id="L4762" name="L4762"></a>4762         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L4763" name="L4763"></a>4763             <strong class="reserved">int</strong> h = 0;
<a id="L4764" name="L4764"></a>4764             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4765" name="L4765"></a>4765             <strong class="reserved">if</strong> ((t = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4766" name="L4766"></a>4766                 <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L4767" name="L4767"></a>4767                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L4768" name="L4768"></a>4768                     h += p.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L4769" name="L4769"></a>4769                 <em class="brace">}</em>
<a id="L4770" name="L4770"></a>4770             <em class="brace">}</em>
<a id="L4771" name="L4771"></a>4771             <strong class="reserved">return</strong> h;
<a id="L4772" name="L4772"></a>4772         <em class="brace">}</em>
<a id="L4773" name="L4773"></a>4773 
<a id="L4774" name="L4774"></a>4774         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L4775" name="L4775"></a>4775             <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L4776" name="L4776"></a>4776             <strong class="reserved">return</strong> ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>) &amp;&amp;
<a id="L4777" name="L4777"></a>4777                     ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;?&gt;)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) == <strong class="reserved">this</strong> ||
<a id="L4778" name="L4778"></a>4778                      (<a href="../D/13315.html" title="Multiple defined in 21 places.">containsAll</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13315.html" title="Multiple defined in 21 places.">containsAll</a>(<strong class="reserved">this</strong>))));
<a id="L4779" name="L4779"></a>4779         <em class="brace">}</em>
<a id="L4780" name="L4780"></a>4780 
<a id="L4781" name="L4781"></a>4781         <strong class="reserved">public</strong> <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../R/28762.html" title="Multiple referred from 435 places.">spliterator</a>() <em class="brace">{</em>
<a id="L4782" name="L4782"></a>4782             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4783" name="L4783"></a>4783             <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;K,V&gt; m = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L4784" name="L4784"></a>4784             <strong class="reserved">long</strong> n = m.<a href="../S/1074.html#L2511" title="Defined at 2511 in src/java/util/concurrent/ConcurrentHashMap.java.">sumCount</a>();
<a id="L4785" name="L4785"></a>4785             <strong class="reserved">int</strong> f = (t = m.table) == <strong class="reserved">null</strong> ? 0 : t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4786" name="L4786"></a>4786             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2932.html" title="Multiple defined in 6 places.">EntrySpliterator</a>&lt;K,V&gt;(t, f, 0, f, n &lt; 0L ? 0L : n, m);
<a id="L4787" name="L4787"></a>4787         <em class="brace">}</em>
<a id="L4788" name="L4788"></a>4788 
<a id="L4789" name="L4789"></a>4789         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14730.html" title="Multiple referred from 50 places.">forEach</a>(<a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4790" name="L4790"></a>4790             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L4791" name="L4791"></a>4791             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t;
<a id="L4792" name="L4792"></a>4792             <strong class="reserved">if</strong> ((t = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.table) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4793" name="L4793"></a>4793                 <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt; it = <strong class="reserved">new</strong> <a href="../S/1074.html#L3292" title="Defined at 3292 in src/java/util/concurrent/ConcurrentHashMap.java.">Traverser</a>&lt;K,V&gt;(t, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, 0, t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L4794" name="L4794"></a>4794                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = it.<a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L4795" name="L4795"></a>4795                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<strong class="reserved">new</strong> <a href="../D/5400.html" title="Multiple defined in 2 places.">MapEntry</a>&lt;K,V&gt;(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>));
<a id="L4796" name="L4796"></a>4796             <em class="brace">}</em>
<a id="L4797" name="L4797"></a>4797         <em class="brace">}</em>
<a id="L4798" name="L4798"></a>4798 
<a id="L4799" name="L4799"></a>4799     <em class="brace">}</em>
<a id="L4800" name="L4800"></a>4800 
<a id="L4801" name="L4801"></a>4801     <em class="comment">// -------------------------------------------------------</em>
<a id="L4802" name="L4802"></a>4802 
<div class="comment">
      Base class for bulk tasks. Repeats some fields and code from
      class Traverser, because we need to subclass CountedCompleter.</div>
<a id="L4807" name="L4807"></a>4807     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L4808" name="L4808"></a>4808     <strong class="reserved">abstract</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/935.html" title="Multiple referred from 63 places.">BulkTask</a>&lt;K,V,R&gt; <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;R&gt; <em class="brace">{</em>
<a id="L4809" name="L4809"></a>4809         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] tab;        <em class="comment">// same as Traverser</em>
<a id="L4810" name="L4810"></a>4810         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L4811" name="L4811"></a>4811         <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; stack, spare;
<a id="L4812" name="L4812"></a>4812         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L4813" name="L4813"></a>4813         <strong class="reserved">int</strong> baseIndex;
<a id="L4814" name="L4814"></a>4814         <strong class="reserved">int</strong> baseLimit;
<a id="L4815" name="L4815"></a>4815         <strong class="reserved">final</strong> <strong class="reserved">int</strong> baseSize;
<a id="L4816" name="L4816"></a>4816         <strong class="reserved">int</strong> batch;              <em class="comment">// split control</em>
<a id="L4817" name="L4817"></a>4817 
<a id="L4818" name="L4818"></a>4818         <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>(BulkTask&lt;K,V,?&gt; par, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t) <em class="brace">{</em>
<a id="L4819" name="L4819"></a>4819             <strong class="reserved">super</strong>(par);
<a id="L4820" name="L4820"></a>4820             <strong class="reserved">this</strong>.batch = b;
<a id="L4821" name="L4821"></a>4821             <strong class="reserved">this</strong>.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <strong class="reserved">this</strong>.baseIndex = i;
<a id="L4822" name="L4822"></a>4822             <strong class="reserved">if</strong> ((<strong class="reserved">this</strong>.tab = t) == <strong class="reserved">null</strong>)
<a id="L4823" name="L4823"></a>4823                 <strong class="reserved">this</strong>.baseSize = <strong class="reserved">this</strong>.baseLimit = 0;
<a id="L4824" name="L4824"></a>4824             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (par == <strong class="reserved">null</strong>)
<a id="L4825" name="L4825"></a>4825                 <strong class="reserved">this</strong>.baseSize = <strong class="reserved">this</strong>.baseLimit = t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L4826" name="L4826"></a>4826             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4827" name="L4827"></a>4827                 <strong class="reserved">this</strong>.baseLimit = f;
<a id="L4828" name="L4828"></a>4828                 <strong class="reserved">this</strong>.baseSize = par.baseSize;
<a id="L4829" name="L4829"></a>4829             <em class="brace">}</em>
<a id="L4830" name="L4830"></a>4830         <em class="brace">}</em>
<a id="L4831" name="L4831"></a>4831 
<div class="comment">
          Same as Traverser version</div>
<a id="L4835" name="L4835"></a>4835         <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; <a href="../R/10102.html" title="Multiple referred from 119 places.">advance</a>() <em class="brace">{</em>
<a id="L4836" name="L4836"></a>4836             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; e;
<a id="L4837" name="L4837"></a>4837             <strong class="reserved">if</strong> ((e = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) != <strong class="reserved">null</strong>)
<a id="L4838" name="L4838"></a>4838                 e = e.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L4839" name="L4839"></a>4839             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L4840" name="L4840"></a>4840                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t; <strong class="reserved">int</strong> i, n;
<a id="L4841" name="L4841"></a>4841                 <strong class="reserved">if</strong> (e != <strong class="reserved">null</strong>)
<a id="L4842" name="L4842"></a>4842                     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = e;
<a id="L4843" name="L4843"></a>4843                 <strong class="reserved">if</strong> (baseIndex &gt;= baseLimit || (t = tab) == <strong class="reserved">null</strong> ||
<a id="L4844" name="L4844"></a>4844                     (n = t.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) &lt;= (i = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) || i &lt; 0)
<a id="L4845" name="L4845"></a>4845                     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L4846" name="L4846"></a>4846                 <strong class="reserved">if</strong> ((e = <a href="../S/1074.html#L754" title="Defined at 754 in src/java/util/concurrent/ConcurrentHashMap.java.">tabAt</a>(t, i)) != <strong class="reserved">null</strong> &amp;&amp; e.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &lt; 0) <em class="brace">{</em>
<a id="L4847" name="L4847"></a>4847                     <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>) <em class="brace">{</em>
<a id="L4848" name="L4848"></a>4848                         tab = ((<a href="../S/1074.html#L2163" title="Defined at 2163 in src/java/util/concurrent/ConcurrentHashMap.java.">ForwardingNode</a>&lt;K,V&gt;)e).nextTable;
<a id="L4849" name="L4849"></a>4849                         e = <strong class="reserved">null</strong>;
<a id="L4850" name="L4850"></a>4850                         <a href="../D/29968.html" title="Multiple defined in 2 places.">pushState</a>(t, i, n);
<a id="L4851" name="L4851"></a>4851                         <strong class="reserved">continue</strong>;
<a id="L4852" name="L4852"></a>4852                     <em class="brace">}</em>
<a id="L4853" name="L4853"></a>4853                     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>)
<a id="L4854" name="L4854"></a>4854                         e = ((<a href="../S/1074.html#L2718" title="Defined at 2718 in src/java/util/concurrent/ConcurrentHashMap.java.">TreeBin</a>&lt;K,V&gt;)e).<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L4855" name="L4855"></a>4855                     <strong class="reserved">else</strong>
<a id="L4856" name="L4856"></a>4856                         e = <strong class="reserved">null</strong>;
<a id="L4857" name="L4857"></a>4857                 <em class="brace">}</em>
<a id="L4858" name="L4858"></a>4858                 <strong class="reserved">if</strong> (stack != <strong class="reserved">null</strong>)
<a id="L4859" name="L4859"></a>4859                     <a href="../D/30403.html" title="Multiple defined in 2 places.">recoverState</a>(n);
<a id="L4860" name="L4860"></a>4860                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = i + baseSize) &gt;= n)
<a id="L4861" name="L4861"></a>4861                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = ++baseIndex;
<a id="L4862" name="L4862"></a>4862             <em class="brace">}</em>
<a id="L4863" name="L4863"></a>4863         <em class="brace">}</em>
<a id="L4864" name="L4864"></a>4864 
<a id="L4865" name="L4865"></a>4865         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25283.html" title="Multiple referred from 2 places.">pushState</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L4866" name="L4866"></a>4866             <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; s = spare;
<a id="L4867" name="L4867"></a>4867             <strong class="reserved">if</strong> (s != <strong class="reserved">null</strong>)
<a id="L4868" name="L4868"></a>4868                 spare = s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L4869" name="L4869"></a>4869             <strong class="reserved">else</strong>
<a id="L4870" name="L4870"></a>4870                 s = <strong class="reserved">new</strong> <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt;();
<a id="L4871" name="L4871"></a>4871             s.tab = t;
<a id="L4872" name="L4872"></a>4872             s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = n;
<a id="L4873" name="L4873"></a>4873             s.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = i;
<a id="L4874" name="L4874"></a>4874             s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = stack;
<a id="L4875" name="L4875"></a>4875             stack = s;
<a id="L4876" name="L4876"></a>4876         <em class="brace">}</em>
<a id="L4877" name="L4877"></a>4877 
<a id="L4878" name="L4878"></a>4878         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25666.html" title="Multiple referred from 2 places.">recoverState</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L4879" name="L4879"></a>4879             <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; s; <strong class="reserved">int</strong> len;
<a id="L4880" name="L4880"></a>4880             <strong class="reserved">while</strong> ((s = stack) != <strong class="reserved">null</strong> &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += (len = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)) &gt;= n) <em class="brace">{</em>
<a id="L4881" name="L4881"></a>4881                 n = len;
<a id="L4882" name="L4882"></a>4882                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = s.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L4883" name="L4883"></a>4883                 tab = s.tab;
<a id="L4884" name="L4884"></a>4884                 s.tab = <strong class="reserved">null</strong>;
<a id="L4885" name="L4885"></a>4885                 <a href="../S/1074.html#L3264" title="Defined at 3264 in src/java/util/concurrent/ConcurrentHashMap.java.">TableStack</a>&lt;K,V&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L4886" name="L4886"></a>4886                 s.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = spare; <em class="comment">// save for reuse</em>
<a id="L4887" name="L4887"></a>4887                 stack = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L4888" name="L4888"></a>4888                 spare = s;
<a id="L4889" name="L4889"></a>4889             <em class="brace">}</em>
<a id="L4890" name="L4890"></a>4890             <strong class="reserved">if</strong> (s == <strong class="reserved">null</strong> &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += baseSize) &gt;= n)
<a id="L4891" name="L4891"></a>4891                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = ++baseIndex;
<a id="L4892" name="L4892"></a>4892         <em class="brace">}</em>
<a id="L4893" name="L4893"></a>4893     <em class="brace">}</em>
<a id="L4894" name="L4894"></a>4894 
<div class="comment">
      Task classes. Coded in a regular but ugly format/style to
      simplify checks that each variant differs in the right way from
      others. The null screenings exist because compilers cannot tell
      that we've already null-checked task arguments, so we force
      simplest hoisted bypass to help avoid convoluted traps.</div>
<a id="L4902" name="L4902"></a>4902     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L4903" name="L4903"></a>4903     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3072.html" title="Multiple referred from 2 places.">ForEachKeyTask</a>&lt;K,V&gt;
<a id="L4904" name="L4904"></a>4904         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L4905" name="L4905"></a>4905         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4906" name="L4906"></a>4906         ForEachKeyTask
<a id="L4907" name="L4907"></a>4907             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L4908" name="L4908"></a>4908              <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4909" name="L4909"></a>4909             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L4910" name="L4910"></a>4910             <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4911" name="L4911"></a>4911         <em class="brace">}</em>
<a id="L4912" name="L4912"></a>4912         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L4913" name="L4913"></a>4913             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> K&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4914" name="L4914"></a>4914             <strong class="reserved">if</strong> ((<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4915" name="L4915"></a>4915                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L4916" name="L4916"></a>4916                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L4917" name="L4917"></a>4917                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L4918" name="L4918"></a>4918                     <strong class="reserved">new</strong> <a href="../S/1074.html#L4903" title="Defined at 4903 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachKeyTask</a>&lt;K,V&gt;
<a id="L4919" name="L4919"></a>4919                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L4920" name="L4920"></a>4920                          <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L4921" name="L4921"></a>4921                 <em class="brace">}</em>
<a id="L4922" name="L4922"></a>4922                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>;)
<a id="L4923" name="L4923"></a>4923                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L4924" name="L4924"></a>4924                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L4925" name="L4925"></a>4925             <em class="brace">}</em>
<a id="L4926" name="L4926"></a>4926         <em class="brace">}</em>
<a id="L4927" name="L4927"></a>4927     <em class="brace">}</em>
<a id="L4928" name="L4928"></a>4928 
<a id="L4929" name="L4929"></a>4929     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L4930" name="L4930"></a>4930     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3082.html" title="Multiple referred from 2 places.">ForEachValueTask</a>&lt;K,V&gt;
<a id="L4931" name="L4931"></a>4931         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L4932" name="L4932"></a>4932         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4933" name="L4933"></a>4933         ForEachValueTask
<a id="L4934" name="L4934"></a>4934             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L4935" name="L4935"></a>4935              <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4936" name="L4936"></a>4936             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L4937" name="L4937"></a>4937             <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4938" name="L4938"></a>4938         <em class="brace">}</em>
<a id="L4939" name="L4939"></a>4939         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L4940" name="L4940"></a>4940             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4941" name="L4941"></a>4941             <strong class="reserved">if</strong> ((<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4942" name="L4942"></a>4942                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L4943" name="L4943"></a>4943                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L4944" name="L4944"></a>4944                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L4945" name="L4945"></a>4945                     <strong class="reserved">new</strong> <a href="../S/1074.html#L4930" title="Defined at 4930 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachValueTask</a>&lt;K,V&gt;
<a id="L4946" name="L4946"></a>4946                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L4947" name="L4947"></a>4947                          <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L4948" name="L4948"></a>4948                 <em class="brace">}</em>
<a id="L4949" name="L4949"></a>4949                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>;)
<a id="L4950" name="L4950"></a>4950                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L4951" name="L4951"></a>4951                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L4952" name="L4952"></a>4952             <em class="brace">}</em>
<a id="L4953" name="L4953"></a>4953         <em class="brace">}</em>
<a id="L4954" name="L4954"></a>4954     <em class="brace">}</em>
<a id="L4955" name="L4955"></a>4955 
<a id="L4956" name="L4956"></a>4956     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L4957" name="L4957"></a>4957     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3071.html" title="Multiple referred from 2 places.">ForEachEntryTask</a>&lt;K,V&gt;
<a id="L4958" name="L4958"></a>4958         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L4959" name="L4959"></a>4959         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4960" name="L4960"></a>4960         ForEachEntryTask
<a id="L4961" name="L4961"></a>4961             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L4962" name="L4962"></a>4962              <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4963" name="L4963"></a>4963             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L4964" name="L4964"></a>4964             <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4965" name="L4965"></a>4965         <em class="brace">}</em>
<a id="L4966" name="L4966"></a>4966         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L4967" name="L4967"></a>4967             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4968" name="L4968"></a>4968             <strong class="reserved">if</strong> ((<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4969" name="L4969"></a>4969                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L4970" name="L4970"></a>4970                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L4971" name="L4971"></a>4971                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L4972" name="L4972"></a>4972                     <strong class="reserved">new</strong> <a href="../S/1074.html#L4957" title="Defined at 4957 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachEntryTask</a>&lt;K,V&gt;
<a id="L4973" name="L4973"></a>4973                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L4974" name="L4974"></a>4974                          <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L4975" name="L4975"></a>4975                 <em class="brace">}</em>
<a id="L4976" name="L4976"></a>4976                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L4977" name="L4977"></a>4977                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p);
<a id="L4978" name="L4978"></a>4978                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L4979" name="L4979"></a>4979             <em class="brace">}</em>
<a id="L4980" name="L4980"></a>4980         <em class="brace">}</em>
<a id="L4981" name="L4981"></a>4981     <em class="brace">}</em>
<a id="L4982" name="L4982"></a>4982 
<a id="L4983" name="L4983"></a>4983     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L4984" name="L4984"></a>4984     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3073.html" title="Multiple referred from 2 places.">ForEachMappingTask</a>&lt;K,V&gt;
<a id="L4985" name="L4985"></a>4985         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L4986" name="L4986"></a>4986         <strong class="reserved">final</strong> <a href="../S/971.html#L45" title="Defined at 45 in src/java/util/function/BiConsumer.java.">BiConsumer</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4987" name="L4987"></a>4987         ForEachMappingTask
<a id="L4988" name="L4988"></a>4988             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L4989" name="L4989"></a>4989              <a href="../S/971.html#L45" title="Defined at 45 in src/java/util/function/BiConsumer.java.">BiConsumer</a>&lt;? <strong class="reserved">super</strong> K,? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L4990" name="L4990"></a>4990             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L4991" name="L4991"></a>4991             <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4992" name="L4992"></a>4992         <em class="brace">}</em>
<a id="L4993" name="L4993"></a>4993         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L4994" name="L4994"></a>4994             <strong class="reserved">final</strong> <a href="../S/971.html#L45" title="Defined at 45 in src/java/util/function/BiConsumer.java.">BiConsumer</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L4995" name="L4995"></a>4995             <strong class="reserved">if</strong> ((<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4996" name="L4996"></a>4996                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L4997" name="L4997"></a>4997                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L4998" name="L4998"></a>4998                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L4999" name="L4999"></a>4999                     <strong class="reserved">new</strong> <a href="../S/1074.html#L4984" title="Defined at 4984 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachMappingTask</a>&lt;K,V&gt;
<a id="L5000" name="L5000"></a>5000                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5001" name="L5001"></a>5001                          <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5002" name="L5002"></a>5002                 <em class="brace">}</em>
<a id="L5003" name="L5003"></a>5003                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5004" name="L5004"></a>5004                     <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L5005" name="L5005"></a>5005                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5006" name="L5006"></a>5006             <em class="brace">}</em>
<a id="L5007" name="L5007"></a>5007         <em class="brace">}</em>
<a id="L5008" name="L5008"></a>5008     <em class="brace">}</em>
<a id="L5009" name="L5009"></a>5009 
<a id="L5010" name="L5010"></a>5010     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5011" name="L5011"></a>5011     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3079.html" title="Multiple referred from 2 places.">ForEachTransformedKeyTask</a>&lt;K,V,U&gt;
<a id="L5012" name="L5012"></a>5012         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L5013" name="L5013"></a>5013         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5014" name="L5014"></a>5014         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5015" name="L5015"></a>5015         ForEachTransformedKeyTask
<a id="L5016" name="L5016"></a>5016             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5017" name="L5017"></a>5017              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer, <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L5018" name="L5018"></a>5018             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5019" name="L5019"></a>5019             <strong class="reserved">this</strong>.transformer = transformer; <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5020" name="L5020"></a>5020         <em class="brace">}</em>
<a id="L5021" name="L5021"></a>5021         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5022" name="L5022"></a>5022             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5023" name="L5023"></a>5023             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5024" name="L5024"></a>5024             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5025" name="L5025"></a>5025                 (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5026" name="L5026"></a>5026                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5027" name="L5027"></a>5027                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5028" name="L5028"></a>5028                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5029" name="L5029"></a>5029                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5011" title="Defined at 5011 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedKeyTask</a>&lt;K,V,U&gt;
<a id="L5030" name="L5030"></a>5030                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5031" name="L5031"></a>5031                          transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5032" name="L5032"></a>5032                 <em class="brace">}</em>
<a id="L5033" name="L5033"></a>5033                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5034" name="L5034"></a>5034                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5035" name="L5035"></a>5035                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong>)
<a id="L5036" name="L5036"></a>5036                         <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5037" name="L5037"></a>5037                 <em class="brace">}</em>
<a id="L5038" name="L5038"></a>5038                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5039" name="L5039"></a>5039             <em class="brace">}</em>
<a id="L5040" name="L5040"></a>5040         <em class="brace">}</em>
<a id="L5041" name="L5041"></a>5041     <em class="brace">}</em>
<a id="L5042" name="L5042"></a>5042 
<a id="L5043" name="L5043"></a>5043     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5044" name="L5044"></a>5044     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3081.html" title="Multiple referred from 2 places.">ForEachTransformedValueTask</a>&lt;K,V,U&gt;
<a id="L5045" name="L5045"></a>5045         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L5046" name="L5046"></a>5046         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5047" name="L5047"></a>5047         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5048" name="L5048"></a>5048         ForEachTransformedValueTask
<a id="L5049" name="L5049"></a>5049             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5050" name="L5050"></a>5050              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer, <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L5051" name="L5051"></a>5051             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5052" name="L5052"></a>5052             <strong class="reserved">this</strong>.transformer = transformer; <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5053" name="L5053"></a>5053         <em class="brace">}</em>
<a id="L5054" name="L5054"></a>5054         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5055" name="L5055"></a>5055             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5056" name="L5056"></a>5056             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5057" name="L5057"></a>5057             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5058" name="L5058"></a>5058                 (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5059" name="L5059"></a>5059                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5060" name="L5060"></a>5060                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5061" name="L5061"></a>5061                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5062" name="L5062"></a>5062                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5044" title="Defined at 5044 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedValueTask</a>&lt;K,V,U&gt;
<a id="L5063" name="L5063"></a>5063                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5064" name="L5064"></a>5064                          transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5065" name="L5065"></a>5065                 <em class="brace">}</em>
<a id="L5066" name="L5066"></a>5066                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5067" name="L5067"></a>5067                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5068" name="L5068"></a>5068                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)) != <strong class="reserved">null</strong>)
<a id="L5069" name="L5069"></a>5069                         <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5070" name="L5070"></a>5070                 <em class="brace">}</em>
<a id="L5071" name="L5071"></a>5071                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5072" name="L5072"></a>5072             <em class="brace">}</em>
<a id="L5073" name="L5073"></a>5073         <em class="brace">}</em>
<a id="L5074" name="L5074"></a>5074     <em class="brace">}</em>
<a id="L5075" name="L5075"></a>5075 
<a id="L5076" name="L5076"></a>5076     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5077" name="L5077"></a>5077     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3078.html" title="Multiple referred from 2 places.">ForEachTransformedEntryTask</a>&lt;K,V,U&gt;
<a id="L5078" name="L5078"></a>5078         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L5079" name="L5079"></a>5079         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5080" name="L5080"></a>5080         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5081" name="L5081"></a>5081         ForEachTransformedEntryTask
<a id="L5082" name="L5082"></a>5082             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5083" name="L5083"></a>5083              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer, <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L5084" name="L5084"></a>5084             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5085" name="L5085"></a>5085             <strong class="reserved">this</strong>.transformer = transformer; <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5086" name="L5086"></a>5086         <em class="brace">}</em>
<a id="L5087" name="L5087"></a>5087         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5088" name="L5088"></a>5088             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5089" name="L5089"></a>5089             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5090" name="L5090"></a>5090             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5091" name="L5091"></a>5091                 (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5092" name="L5092"></a>5092                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5093" name="L5093"></a>5093                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5094" name="L5094"></a>5094                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5095" name="L5095"></a>5095                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5077" title="Defined at 5077 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedEntryTask</a>&lt;K,V,U&gt;
<a id="L5096" name="L5096"></a>5096                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5097" name="L5097"></a>5097                          transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5098" name="L5098"></a>5098                 <em class="brace">}</em>
<a id="L5099" name="L5099"></a>5099                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5100" name="L5100"></a>5100                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5101" name="L5101"></a>5101                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p)) != <strong class="reserved">null</strong>)
<a id="L5102" name="L5102"></a>5102                         <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5103" name="L5103"></a>5103                 <em class="brace">}</em>
<a id="L5104" name="L5104"></a>5104                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5105" name="L5105"></a>5105             <em class="brace">}</em>
<a id="L5106" name="L5106"></a>5106         <em class="brace">}</em>
<a id="L5107" name="L5107"></a>5107     <em class="brace">}</em>
<a id="L5108" name="L5108"></a>5108 
<a id="L5109" name="L5109"></a>5109     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5110" name="L5110"></a>5110     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3080.html" title="Multiple referred from 2 places.">ForEachTransformedMappingTask</a>&lt;K,V,U&gt;
<a id="L5111" name="L5111"></a>5111         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L5112" name="L5112"></a>5112         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5113" name="L5113"></a>5113         <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5114" name="L5114"></a>5114         ForEachTransformedMappingTask
<a id="L5115" name="L5115"></a>5115             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5116" name="L5116"></a>5116              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L5117" name="L5117"></a>5117              <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) <em class="brace">{</em>
<a id="L5118" name="L5118"></a>5118             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5119" name="L5119"></a>5119             <strong class="reserved">this</strong>.transformer = transformer; <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5120" name="L5120"></a>5120         <em class="brace">}</em>
<a id="L5121" name="L5121"></a>5121         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5122" name="L5122"></a>5122             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5123" name="L5123"></a>5123             <strong class="reserved">final</strong> <a href="../S/963.html#L42" title="Defined at 42 in src/java/util/function/Consumer.java.">Consumer</a>&lt;? <strong class="reserved">super</strong> U&gt; <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>;
<a id="L5124" name="L5124"></a>5124             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5125" name="L5125"></a>5125                 (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">this</strong>.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5126" name="L5126"></a>5126                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5127" name="L5127"></a>5127                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5128" name="L5128"></a>5128                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5129" name="L5129"></a>5129                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5110" title="Defined at 5110 in src/java/util/concurrent/ConcurrentHashMap.java.">ForEachTransformedMappingTask</a>&lt;K,V,U&gt;
<a id="L5130" name="L5130"></a>5130                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5131" name="L5131"></a>5131                          transformer, <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5132" name="L5132"></a>5132                 <em class="brace">}</em>
<a id="L5133" name="L5133"></a>5133                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5134" name="L5134"></a>5134                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5135" name="L5135"></a>5135                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)) != <strong class="reserved">null</strong>)
<a id="L5136" name="L5136"></a>5136                         <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5137" name="L5137"></a>5137                 <em class="brace">}</em>
<a id="L5138" name="L5138"></a>5138                 <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5139" name="L5139"></a>5139             <em class="brace">}</em>
<a id="L5140" name="L5140"></a>5140         <em class="brace">}</em>
<a id="L5141" name="L5141"></a>5141     <em class="brace">}</em>
<a id="L5142" name="L5142"></a>5142 
<a id="L5143" name="L5143"></a>5143     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5144" name="L5144"></a>5144     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6974.html" title="Multiple referred from 2 places.">SearchKeysTask</a>&lt;K,V,U&gt;
<a id="L5145" name="L5145"></a>5145         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5146" name="L5146"></a>5146         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5147" name="L5147"></a>5147         <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5148" name="L5148"></a>5148         SearchKeysTask
<a id="L5149" name="L5149"></a>5149             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5150" name="L5150"></a>5150              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; searchFunction,
<a id="L5151" name="L5151"></a>5151              <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L5152" name="L5152"></a>5152             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5153" name="L5153"></a>5153             <strong class="reserved">this</strong>.searchFunction = searchFunction; <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5154" name="L5154"></a>5154         <em class="brace">}</em>
<a id="L5155" name="L5155"></a>5155         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(); <em class="brace">}</em>
<a id="L5156" name="L5156"></a>5156         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5157" name="L5157"></a>5157             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5158" name="L5158"></a>5158             <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5159" name="L5159"></a>5159             <strong class="reserved">if</strong> ((searchFunction = <strong class="reserved">this</strong>.searchFunction) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5160" name="L5160"></a>5160                 (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5161" name="L5161"></a>5161                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5162" name="L5162"></a>5162                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5163" name="L5163"></a>5163                     <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() != <strong class="reserved">null</strong>)
<a id="L5164" name="L5164"></a>5164                         <strong class="reserved">return</strong>;
<a id="L5165" name="L5165"></a>5165                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5166" name="L5166"></a>5166                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5144" title="Defined at 5144 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchKeysTask</a>&lt;K,V,U&gt;
<a id="L5167" name="L5167"></a>5167                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5168" name="L5168"></a>5168                          searchFunction, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5169" name="L5169"></a>5169                 <em class="brace">}</em>
<a id="L5170" name="L5170"></a>5170                 <strong class="reserved">while</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5171" name="L5171"></a>5171                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5172" name="L5172"></a>5172                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L5173" name="L5173"></a>5173                     <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5174" name="L5174"></a>5174                         <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5175" name="L5175"></a>5175                         <strong class="reserved">break</strong>;
<a id="L5176" name="L5176"></a>5176                     <em class="brace">}</em>
<a id="L5177" name="L5177"></a>5177                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = searchFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5178" name="L5178"></a>5178                         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/13035.html" title="Multiple defined in 16 places.">compareAndSet</a>(<strong class="reserved">null</strong>, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>))
<a id="L5179" name="L5179"></a>5179                             <a href="../S/1070.html#L686" title="Defined at 686 in src/java/util/concurrent/CountedCompleter.java.">quietlyCompleteRoot</a>();
<a id="L5180" name="L5180"></a>5180                         <strong class="reserved">break</strong>;
<a id="L5181" name="L5181"></a>5181                     <em class="brace">}</em>
<a id="L5182" name="L5182"></a>5182                 <em class="brace">}</em>
<a id="L5183" name="L5183"></a>5183             <em class="brace">}</em>
<a id="L5184" name="L5184"></a>5184         <em class="brace">}</em>
<a id="L5185" name="L5185"></a>5185     <em class="brace">}</em>
<a id="L5186" name="L5186"></a>5186 
<a id="L5187" name="L5187"></a>5187     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5188" name="L5188"></a>5188     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6977.html" title="Multiple referred from 2 places.">SearchValuesTask</a>&lt;K,V,U&gt;
<a id="L5189" name="L5189"></a>5189         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5190" name="L5190"></a>5190         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5191" name="L5191"></a>5191         <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5192" name="L5192"></a>5192         SearchValuesTask
<a id="L5193" name="L5193"></a>5193             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5194" name="L5194"></a>5194              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction,
<a id="L5195" name="L5195"></a>5195              <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L5196" name="L5196"></a>5196             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5197" name="L5197"></a>5197             <strong class="reserved">this</strong>.searchFunction = searchFunction; <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5198" name="L5198"></a>5198         <em class="brace">}</em>
<a id="L5199" name="L5199"></a>5199         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(); <em class="brace">}</em>
<a id="L5200" name="L5200"></a>5200         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5201" name="L5201"></a>5201             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5202" name="L5202"></a>5202             <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5203" name="L5203"></a>5203             <strong class="reserved">if</strong> ((searchFunction = <strong class="reserved">this</strong>.searchFunction) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5204" name="L5204"></a>5204                 (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5205" name="L5205"></a>5205                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5206" name="L5206"></a>5206                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5207" name="L5207"></a>5207                     <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() != <strong class="reserved">null</strong>)
<a id="L5208" name="L5208"></a>5208                         <strong class="reserved">return</strong>;
<a id="L5209" name="L5209"></a>5209                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5210" name="L5210"></a>5210                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5188" title="Defined at 5188 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchValuesTask</a>&lt;K,V,U&gt;
<a id="L5211" name="L5211"></a>5211                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5212" name="L5212"></a>5212                          searchFunction, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5213" name="L5213"></a>5213                 <em class="brace">}</em>
<a id="L5214" name="L5214"></a>5214                 <strong class="reserved">while</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5215" name="L5215"></a>5215                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5216" name="L5216"></a>5216                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L5217" name="L5217"></a>5217                     <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5218" name="L5218"></a>5218                         <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5219" name="L5219"></a>5219                         <strong class="reserved">break</strong>;
<a id="L5220" name="L5220"></a>5220                     <em class="brace">}</em>
<a id="L5221" name="L5221"></a>5221                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = searchFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5222" name="L5222"></a>5222                         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/13035.html" title="Multiple defined in 16 places.">compareAndSet</a>(<strong class="reserved">null</strong>, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>))
<a id="L5223" name="L5223"></a>5223                             <a href="../S/1070.html#L686" title="Defined at 686 in src/java/util/concurrent/CountedCompleter.java.">quietlyCompleteRoot</a>();
<a id="L5224" name="L5224"></a>5224                         <strong class="reserved">break</strong>;
<a id="L5225" name="L5225"></a>5225                     <em class="brace">}</em>
<a id="L5226" name="L5226"></a>5226                 <em class="brace">}</em>
<a id="L5227" name="L5227"></a>5227             <em class="brace">}</em>
<a id="L5228" name="L5228"></a>5228         <em class="brace">}</em>
<a id="L5229" name="L5229"></a>5229     <em class="brace">}</em>
<a id="L5230" name="L5230"></a>5230 
<a id="L5231" name="L5231"></a>5231     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5232" name="L5232"></a>5232     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6972.html" title="Multiple referred from 2 places.">SearchEntriesTask</a>&lt;K,V,U&gt;
<a id="L5233" name="L5233"></a>5233         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5234" name="L5234"></a>5234         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5235" name="L5235"></a>5235         <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5236" name="L5236"></a>5236         SearchEntriesTask
<a id="L5237" name="L5237"></a>5237             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5238" name="L5238"></a>5238              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; searchFunction,
<a id="L5239" name="L5239"></a>5239              <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L5240" name="L5240"></a>5240             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5241" name="L5241"></a>5241             <strong class="reserved">this</strong>.searchFunction = searchFunction; <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5242" name="L5242"></a>5242         <em class="brace">}</em>
<a id="L5243" name="L5243"></a>5243         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(); <em class="brace">}</em>
<a id="L5244" name="L5244"></a>5244         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5245" name="L5245"></a>5245             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5246" name="L5246"></a>5246             <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5247" name="L5247"></a>5247             <strong class="reserved">if</strong> ((searchFunction = <strong class="reserved">this</strong>.searchFunction) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5248" name="L5248"></a>5248                 (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5249" name="L5249"></a>5249                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5250" name="L5250"></a>5250                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5251" name="L5251"></a>5251                     <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() != <strong class="reserved">null</strong>)
<a id="L5252" name="L5252"></a>5252                         <strong class="reserved">return</strong>;
<a id="L5253" name="L5253"></a>5253                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5254" name="L5254"></a>5254                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5232" title="Defined at 5232 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchEntriesTask</a>&lt;K,V,U&gt;
<a id="L5255" name="L5255"></a>5255                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5256" name="L5256"></a>5256                          searchFunction, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5257" name="L5257"></a>5257                 <em class="brace">}</em>
<a id="L5258" name="L5258"></a>5258                 <strong class="reserved">while</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5259" name="L5259"></a>5259                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5260" name="L5260"></a>5260                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L5261" name="L5261"></a>5261                     <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5262" name="L5262"></a>5262                         <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5263" name="L5263"></a>5263                         <strong class="reserved">break</strong>;
<a id="L5264" name="L5264"></a>5264                     <em class="brace">}</em>
<a id="L5265" name="L5265"></a>5265                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = searchFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5266" name="L5266"></a>5266                         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/13035.html" title="Multiple defined in 16 places.">compareAndSet</a>(<strong class="reserved">null</strong>, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>))
<a id="L5267" name="L5267"></a>5267                             <a href="../S/1070.html#L686" title="Defined at 686 in src/java/util/concurrent/CountedCompleter.java.">quietlyCompleteRoot</a>();
<a id="L5268" name="L5268"></a>5268                         <strong class="reserved">return</strong>;
<a id="L5269" name="L5269"></a>5269                     <em class="brace">}</em>
<a id="L5270" name="L5270"></a>5270                 <em class="brace">}</em>
<a id="L5271" name="L5271"></a>5271             <em class="brace">}</em>
<a id="L5272" name="L5272"></a>5272         <em class="brace">}</em>
<a id="L5273" name="L5273"></a>5273     <em class="brace">}</em>
<a id="L5274" name="L5274"></a>5274 
<a id="L5275" name="L5275"></a>5275     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5276" name="L5276"></a>5276     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6975.html" title="Multiple referred from 2 places.">SearchMappingsTask</a>&lt;K,V,U&gt;
<a id="L5277" name="L5277"></a>5277         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5278" name="L5278"></a>5278         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5279" name="L5279"></a>5279         <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5280" name="L5280"></a>5280         SearchMappingsTask
<a id="L5281" name="L5281"></a>5281             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5282" name="L5282"></a>5282              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction,
<a id="L5283" name="L5283"></a>5283              <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L5284" name="L5284"></a>5284             <strong class="reserved">super</strong>(p, b, i, f, t);
<a id="L5285" name="L5285"></a>5285             <strong class="reserved">this</strong>.searchFunction = searchFunction; <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5286" name="L5286"></a>5286         <em class="brace">}</em>
<a id="L5287" name="L5287"></a>5287         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(); <em class="brace">}</em>
<a id="L5288" name="L5288"></a>5288         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5289" name="L5289"></a>5289             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; searchFunction;
<a id="L5290" name="L5290"></a>5290             <strong class="reserved">final</strong> <a href="../S/1090.html#L49" title="Defined at 49 in src/java/util/concurrent/atomic/AtomicReference.java.">AtomicReference</a>&lt;U&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5291" name="L5291"></a>5291             <strong class="reserved">if</strong> ((searchFunction = <strong class="reserved">this</strong>.searchFunction) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5292" name="L5292"></a>5292                 (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">this</strong>.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5293" name="L5293"></a>5293                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5294" name="L5294"></a>5294                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5295" name="L5295"></a>5295                     <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() != <strong class="reserved">null</strong>)
<a id="L5296" name="L5296"></a>5296                         <strong class="reserved">return</strong>;
<a id="L5297" name="L5297"></a>5297                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5298" name="L5298"></a>5298                     <strong class="reserved">new</strong> <a href="../S/1074.html#L5276" title="Defined at 5276 in src/java/util/concurrent/ConcurrentHashMap.java.">SearchMappingsTask</a>&lt;K,V,U&gt;
<a id="L5299" name="L5299"></a>5299                         (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5300" name="L5300"></a>5300                          searchFunction, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5301" name="L5301"></a>5301                 <em class="brace">}</em>
<a id="L5302" name="L5302"></a>5302                 <strong class="reserved">while</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5303" name="L5303"></a>5303                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5304" name="L5304"></a>5304                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p;
<a id="L5305" name="L5305"></a>5305                     <strong class="reserved">if</strong> ((p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5306" name="L5306"></a>5306                         <a href="../S/1070.html#L597" title="Defined at 597 in src/java/util/concurrent/CountedCompleter.java.">propagateCompletion</a>();
<a id="L5307" name="L5307"></a>5307                         <strong class="reserved">break</strong>;
<a id="L5308" name="L5308"></a>5308                     <em class="brace">}</em>
<a id="L5309" name="L5309"></a>5309                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = searchFunction.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5310" name="L5310"></a>5310                         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/13035.html" title="Multiple defined in 16 places.">compareAndSet</a>(<strong class="reserved">null</strong>, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>))
<a id="L5311" name="L5311"></a>5311                             <a href="../S/1070.html#L686" title="Defined at 686 in src/java/util/concurrent/CountedCompleter.java.">quietlyCompleteRoot</a>();
<a id="L5312" name="L5312"></a>5312                         <strong class="reserved">break</strong>;
<a id="L5313" name="L5313"></a>5313                     <em class="brace">}</em>
<a id="L5314" name="L5314"></a>5314                 <em class="brace">}</em>
<a id="L5315" name="L5315"></a>5315             <em class="brace">}</em>
<a id="L5316" name="L5316"></a>5316         <em class="brace">}</em>
<a id="L5317" name="L5317"></a>5317     <em class="brace">}</em>
<a id="L5318" name="L5318"></a>5318 
<a id="L5319" name="L5319"></a>5319     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5320" name="L5320"></a>5320     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6523.html" title="Multiple referred from 6 places.">ReduceKeysTask</a>&lt;K,V&gt;
<a id="L5321" name="L5321"></a>5321         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,K&gt; <em class="brace">{</em>
<a id="L5322" name="L5322"></a>5322         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> K&gt; reducer;
<a id="L5323" name="L5323"></a>5323         K <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5324" name="L5324"></a>5324         <a href="../S/1074.html#L5320" title="Defined at 5320 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceKeysTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5325" name="L5325"></a>5325         ReduceKeysTask
<a id="L5326" name="L5326"></a>5326             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5327" name="L5327"></a>5327              <a href="../S/1074.html#L5320" title="Defined at 5320 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceKeysTask</a>&lt;K,V&gt; nextRight,
<a id="L5328" name="L5328"></a>5328              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> K&gt; reducer) <em class="brace">{</em>
<a id="L5329" name="L5329"></a>5329             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5330" name="L5330"></a>5330             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5331" name="L5331"></a>5331         <em class="brace">}</em>
<a id="L5332" name="L5332"></a>5332         <strong class="reserved">public</strong> <strong class="reserved">final</strong> K <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5333" name="L5333"></a>5333         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5334" name="L5334"></a>5334             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> K&gt; reducer;
<a id="L5335" name="L5335"></a>5335             <strong class="reserved">if</strong> ((reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5336" name="L5336"></a>5336                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5337" name="L5337"></a>5337                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5338" name="L5338"></a>5338                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5339" name="L5339"></a>5339                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5320" title="Defined at 5320 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceKeysTask</a>&lt;K,V&gt;
<a id="L5340" name="L5340"></a>5340                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5341" name="L5341"></a>5341                       rights, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5342" name="L5342"></a>5342                 <em class="brace">}</em>
<a id="L5343" name="L5343"></a>5343                 K r = <strong class="reserved">null</strong>;
<a id="L5344" name="L5344"></a>5344                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5345" name="L5345"></a>5345                     K <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L5346" name="L5346"></a>5346                     r = (r == <strong class="reserved">null</strong>) ? <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> : <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> == <strong class="reserved">null</strong> ? r : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5347" name="L5347"></a>5347                 <em class="brace">}</em>
<a id="L5348" name="L5348"></a>5348                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5349" name="L5349"></a>5349                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5350" name="L5350"></a>5350                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5351" name="L5351"></a>5351                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5352" name="L5352"></a>5352                     <a href="../S/1074.html#L5320" title="Defined at 5320 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceKeysTask</a>&lt;K,V&gt;
<a id="L5353" name="L5353"></a>5353                         t = (<a href="../S/1074.html#L5320" title="Defined at 5320 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceKeysTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5354" name="L5354"></a>5354                         s = t.rights;
<a id="L5355" name="L5355"></a>5355                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5356" name="L5356"></a>5356                         K tr, sr;
<a id="L5357" name="L5357"></a>5357                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5358" name="L5358"></a>5358                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5359" name="L5359"></a>5359                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5360" name="L5360"></a>5360                         s = t.rights = s.nextRight;
<a id="L5361" name="L5361"></a>5361                     <em class="brace">}</em>
<a id="L5362" name="L5362"></a>5362                 <em class="brace">}</em>
<a id="L5363" name="L5363"></a>5363             <em class="brace">}</em>
<a id="L5364" name="L5364"></a>5364         <em class="brace">}</em>
<a id="L5365" name="L5365"></a>5365     <em class="brace">}</em>
<a id="L5366" name="L5366"></a>5366 
<a id="L5367" name="L5367"></a>5367     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5368" name="L5368"></a>5368     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6527.html" title="Multiple referred from 6 places.">ReduceValuesTask</a>&lt;K,V&gt;
<a id="L5369" name="L5369"></a>5369         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,V&gt; <em class="brace">{</em>
<a id="L5370" name="L5370"></a>5370         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; reducer;
<a id="L5371" name="L5371"></a>5371         V <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5372" name="L5372"></a>5372         <a href="../S/1074.html#L5368" title="Defined at 5368 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceValuesTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5373" name="L5373"></a>5373         ReduceValuesTask
<a id="L5374" name="L5374"></a>5374             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5375" name="L5375"></a>5375              <a href="../S/1074.html#L5368" title="Defined at 5368 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceValuesTask</a>&lt;K,V&gt; nextRight,
<a id="L5376" name="L5376"></a>5376              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; reducer) <em class="brace">{</em>
<a id="L5377" name="L5377"></a>5377             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5378" name="L5378"></a>5378             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5379" name="L5379"></a>5379         <em class="brace">}</em>
<a id="L5380" name="L5380"></a>5380         <strong class="reserved">public</strong> <strong class="reserved">final</strong> V <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5381" name="L5381"></a>5381         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5382" name="L5382"></a>5382             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> V&gt; reducer;
<a id="L5383" name="L5383"></a>5383             <strong class="reserved">if</strong> ((reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5384" name="L5384"></a>5384                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5385" name="L5385"></a>5385                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5386" name="L5386"></a>5386                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5387" name="L5387"></a>5387                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5368" title="Defined at 5368 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceValuesTask</a>&lt;K,V&gt;
<a id="L5388" name="L5388"></a>5388                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5389" name="L5389"></a>5389                       rights, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5390" name="L5390"></a>5390                 <em class="brace">}</em>
<a id="L5391" name="L5391"></a>5391                 V r = <strong class="reserved">null</strong>;
<a id="L5392" name="L5392"></a>5392                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5393" name="L5393"></a>5393                     V v = p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L5394" name="L5394"></a>5394                     r = (r == <strong class="reserved">null</strong>) ? v : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, v);
<a id="L5395" name="L5395"></a>5395                 <em class="brace">}</em>
<a id="L5396" name="L5396"></a>5396                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5397" name="L5397"></a>5397                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5398" name="L5398"></a>5398                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5399" name="L5399"></a>5399                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5400" name="L5400"></a>5400                     <a href="../S/1074.html#L5368" title="Defined at 5368 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceValuesTask</a>&lt;K,V&gt;
<a id="L5401" name="L5401"></a>5401                         t = (<a href="../S/1074.html#L5368" title="Defined at 5368 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceValuesTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5402" name="L5402"></a>5402                         s = t.rights;
<a id="L5403" name="L5403"></a>5403                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5404" name="L5404"></a>5404                         V tr, sr;
<a id="L5405" name="L5405"></a>5405                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5406" name="L5406"></a>5406                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5407" name="L5407"></a>5407                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5408" name="L5408"></a>5408                         s = t.rights = s.nextRight;
<a id="L5409" name="L5409"></a>5409                     <em class="brace">}</em>
<a id="L5410" name="L5410"></a>5410                 <em class="brace">}</em>
<a id="L5411" name="L5411"></a>5411             <em class="brace">}</em>
<a id="L5412" name="L5412"></a>5412         <em class="brace">}</em>
<a id="L5413" name="L5413"></a>5413     <em class="brace">}</em>
<a id="L5414" name="L5414"></a>5414 
<a id="L5415" name="L5415"></a>5415     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5416" name="L5416"></a>5416     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6522.html" title="Multiple referred from 6 places.">ReduceEntriesTask</a>&lt;K,V&gt;
<a id="L5417" name="L5417"></a>5417         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; <em class="brace">{</em>
<a id="L5418" name="L5418"></a>5418         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; reducer;
<a id="L5419" name="L5419"></a>5419         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5420" name="L5420"></a>5420         <a href="../S/1074.html#L5416" title="Defined at 5416 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceEntriesTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5421" name="L5421"></a>5421         ReduceEntriesTask
<a id="L5422" name="L5422"></a>5422             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5423" name="L5423"></a>5423              <a href="../S/1074.html#L5416" title="Defined at 5416 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceEntriesTask</a>&lt;K,V&gt; nextRight,
<a id="L5424" name="L5424"></a>5424              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; reducer) <em class="brace">{</em>
<a id="L5425" name="L5425"></a>5425             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5426" name="L5426"></a>5426             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5427" name="L5427"></a>5427         <em class="brace">}</em>
<a id="L5428" name="L5428"></a>5428         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5429" name="L5429"></a>5429         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5430" name="L5430"></a>5430             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; reducer;
<a id="L5431" name="L5431"></a>5431             <strong class="reserved">if</strong> ((reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5432" name="L5432"></a>5432                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5433" name="L5433"></a>5433                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5434" name="L5434"></a>5434                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5435" name="L5435"></a>5435                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5416" title="Defined at 5416 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceEntriesTask</a>&lt;K,V&gt;
<a id="L5436" name="L5436"></a>5436                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5437" name="L5437"></a>5437                       rights, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5438" name="L5438"></a>5438                 <em class="brace">}</em>
<a id="L5439" name="L5439"></a>5439                 <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; r = <strong class="reserved">null</strong>;
<a id="L5440" name="L5440"></a>5440                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5441" name="L5441"></a>5441                     r = (r == <strong class="reserved">null</strong>) ? p : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, p);
<a id="L5442" name="L5442"></a>5442                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5443" name="L5443"></a>5443                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5444" name="L5444"></a>5444                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5445" name="L5445"></a>5445                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5446" name="L5446"></a>5446                     <a href="../S/1074.html#L5416" title="Defined at 5416 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceEntriesTask</a>&lt;K,V&gt;
<a id="L5447" name="L5447"></a>5447                         t = (<a href="../S/1074.html#L5416" title="Defined at 5416 in src/java/util/concurrent/ConcurrentHashMap.java.">ReduceEntriesTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5448" name="L5448"></a>5448                         s = t.rights;
<a id="L5449" name="L5449"></a>5449                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5450" name="L5450"></a>5450                         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt; tr, sr;
<a id="L5451" name="L5451"></a>5451                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5452" name="L5452"></a>5452                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5453" name="L5453"></a>5453                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5454" name="L5454"></a>5454                         s = t.rights = s.nextRight;
<a id="L5455" name="L5455"></a>5455                     <em class="brace">}</em>
<a id="L5456" name="L5456"></a>5456                 <em class="brace">}</em>
<a id="L5457" name="L5457"></a>5457             <em class="brace">}</em>
<a id="L5458" name="L5458"></a>5458         <em class="brace">}</em>
<a id="L5459" name="L5459"></a>5459     <em class="brace">}</em>
<a id="L5460" name="L5460"></a>5460 
<a id="L5461" name="L5461"></a>5461     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5462" name="L5462"></a>5462     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4918.html" title="Multiple referred from 6 places.">MapReduceKeysTask</a>&lt;K,V,U&gt;
<a id="L5463" name="L5463"></a>5463         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5464" name="L5464"></a>5464         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5465" name="L5465"></a>5465         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5466" name="L5466"></a>5466         U <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5467" name="L5467"></a>5467         <a href="../S/1074.html#L5462" title="Defined at 5462 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysTask</a>&lt;K,V,U&gt; rights, nextRight;
<a id="L5468" name="L5468"></a>5468         MapReduceKeysTask
<a id="L5469" name="L5469"></a>5469             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5470" name="L5470"></a>5470              <a href="../S/1074.html#L5462" title="Defined at 5462 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysTask</a>&lt;K,V,U&gt; nextRight,
<a id="L5471" name="L5471"></a>5471              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L5472" name="L5472"></a>5472              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L5473" name="L5473"></a>5473             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5474" name="L5474"></a>5474             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5475" name="L5475"></a>5475             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5476" name="L5476"></a>5476         <em class="brace">}</em>
<a id="L5477" name="L5477"></a>5477         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5478" name="L5478"></a>5478         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5479" name="L5479"></a>5479             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5480" name="L5480"></a>5480             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5481" name="L5481"></a>5481             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5482" name="L5482"></a>5482                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5483" name="L5483"></a>5483                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5484" name="L5484"></a>5484                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5485" name="L5485"></a>5485                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5486" name="L5486"></a>5486                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5462" title="Defined at 5462 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysTask</a>&lt;K,V,U&gt;
<a id="L5487" name="L5487"></a>5487                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5488" name="L5488"></a>5488                       rights, transformer, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5489" name="L5489"></a>5489                 <em class="brace">}</em>
<a id="L5490" name="L5490"></a>5490                 U r = <strong class="reserved">null</strong>;
<a id="L5491" name="L5491"></a>5491                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5492" name="L5492"></a>5492                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5493" name="L5493"></a>5493                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)) != <strong class="reserved">null</strong>)
<a id="L5494" name="L5494"></a>5494                         r = (r == <strong class="reserved">null</strong>) ? <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5495" name="L5495"></a>5495                 <em class="brace">}</em>
<a id="L5496" name="L5496"></a>5496                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5497" name="L5497"></a>5497                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5498" name="L5498"></a>5498                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5499" name="L5499"></a>5499                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5500" name="L5500"></a>5500                     <a href="../S/1074.html#L5462" title="Defined at 5462 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysTask</a>&lt;K,V,U&gt;
<a id="L5501" name="L5501"></a>5501                         t = (<a href="../S/1074.html#L5462" title="Defined at 5462 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysTask</a>&lt;K,V,U&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5502" name="L5502"></a>5502                         s = t.rights;
<a id="L5503" name="L5503"></a>5503                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5504" name="L5504"></a>5504                         U tr, sr;
<a id="L5505" name="L5505"></a>5505                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5506" name="L5506"></a>5506                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5507" name="L5507"></a>5507                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5508" name="L5508"></a>5508                         s = t.rights = s.nextRight;
<a id="L5509" name="L5509"></a>5509                     <em class="brace">}</em>
<a id="L5510" name="L5510"></a>5510                 <em class="brace">}</em>
<a id="L5511" name="L5511"></a>5511             <em class="brace">}</em>
<a id="L5512" name="L5512"></a>5512         <em class="brace">}</em>
<a id="L5513" name="L5513"></a>5513     <em class="brace">}</em>
<a id="L5514" name="L5514"></a>5514 
<a id="L5515" name="L5515"></a>5515     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5516" name="L5516"></a>5516     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4926.html" title="Multiple referred from 6 places.">MapReduceValuesTask</a>&lt;K,V,U&gt;
<a id="L5517" name="L5517"></a>5517         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5518" name="L5518"></a>5518         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5519" name="L5519"></a>5519         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5520" name="L5520"></a>5520         U <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5521" name="L5521"></a>5521         <a href="../S/1074.html#L5516" title="Defined at 5516 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesTask</a>&lt;K,V,U&gt; rights, nextRight;
<a id="L5522" name="L5522"></a>5522         MapReduceValuesTask
<a id="L5523" name="L5523"></a>5523             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5524" name="L5524"></a>5524              <a href="../S/1074.html#L5516" title="Defined at 5516 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesTask</a>&lt;K,V,U&gt; nextRight,
<a id="L5525" name="L5525"></a>5525              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L5526" name="L5526"></a>5526              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L5527" name="L5527"></a>5527             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5528" name="L5528"></a>5528             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5529" name="L5529"></a>5529             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5530" name="L5530"></a>5530         <em class="brace">}</em>
<a id="L5531" name="L5531"></a>5531         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5532" name="L5532"></a>5532         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5533" name="L5533"></a>5533             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5534" name="L5534"></a>5534             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5535" name="L5535"></a>5535             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5536" name="L5536"></a>5536                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5537" name="L5537"></a>5537                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5538" name="L5538"></a>5538                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5539" name="L5539"></a>5539                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5540" name="L5540"></a>5540                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5516" title="Defined at 5516 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesTask</a>&lt;K,V,U&gt;
<a id="L5541" name="L5541"></a>5541                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5542" name="L5542"></a>5542                       rights, transformer, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5543" name="L5543"></a>5543                 <em class="brace">}</em>
<a id="L5544" name="L5544"></a>5544                 U r = <strong class="reserved">null</strong>;
<a id="L5545" name="L5545"></a>5545                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5546" name="L5546"></a>5546                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5547" name="L5547"></a>5547                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)) != <strong class="reserved">null</strong>)
<a id="L5548" name="L5548"></a>5548                         r = (r == <strong class="reserved">null</strong>) ? <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5549" name="L5549"></a>5549                 <em class="brace">}</em>
<a id="L5550" name="L5550"></a>5550                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5551" name="L5551"></a>5551                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5552" name="L5552"></a>5552                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5553" name="L5553"></a>5553                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5554" name="L5554"></a>5554                     <a href="../S/1074.html#L5516" title="Defined at 5516 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesTask</a>&lt;K,V,U&gt;
<a id="L5555" name="L5555"></a>5555                         t = (<a href="../S/1074.html#L5516" title="Defined at 5516 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesTask</a>&lt;K,V,U&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5556" name="L5556"></a>5556                         s = t.rights;
<a id="L5557" name="L5557"></a>5557                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5558" name="L5558"></a>5558                         U tr, sr;
<a id="L5559" name="L5559"></a>5559                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5560" name="L5560"></a>5560                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5561" name="L5561"></a>5561                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5562" name="L5562"></a>5562                         s = t.rights = s.nextRight;
<a id="L5563" name="L5563"></a>5563                     <em class="brace">}</em>
<a id="L5564" name="L5564"></a>5564                 <em class="brace">}</em>
<a id="L5565" name="L5565"></a>5565             <em class="brace">}</em>
<a id="L5566" name="L5566"></a>5566         <em class="brace">}</em>
<a id="L5567" name="L5567"></a>5567     <em class="brace">}</em>
<a id="L5568" name="L5568"></a>5568 
<a id="L5569" name="L5569"></a>5569     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5570" name="L5570"></a>5570     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4914.html" title="Multiple referred from 6 places.">MapReduceEntriesTask</a>&lt;K,V,U&gt;
<a id="L5571" name="L5571"></a>5571         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5572" name="L5572"></a>5572         <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5573" name="L5573"></a>5573         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5574" name="L5574"></a>5574         U <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5575" name="L5575"></a>5575         <a href="../S/1074.html#L5570" title="Defined at 5570 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesTask</a>&lt;K,V,U&gt; rights, nextRight;
<a id="L5576" name="L5576"></a>5576         MapReduceEntriesTask
<a id="L5577" name="L5577"></a>5577             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5578" name="L5578"></a>5578              <a href="../S/1074.html#L5570" title="Defined at 5570 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesTask</a>&lt;K,V,U&gt; nextRight,
<a id="L5579" name="L5579"></a>5579              <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L5580" name="L5580"></a>5580              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L5581" name="L5581"></a>5581             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5582" name="L5582"></a>5582             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5583" name="L5583"></a>5583             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5584" name="L5584"></a>5584         <em class="brace">}</em>
<a id="L5585" name="L5585"></a>5585         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5586" name="L5586"></a>5586         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5587" name="L5587"></a>5587             <strong class="reserved">final</strong> <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5588" name="L5588"></a>5588             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5589" name="L5589"></a>5589             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5590" name="L5590"></a>5590                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5591" name="L5591"></a>5591                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5592" name="L5592"></a>5592                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5593" name="L5593"></a>5593                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5594" name="L5594"></a>5594                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5570" title="Defined at 5570 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesTask</a>&lt;K,V,U&gt;
<a id="L5595" name="L5595"></a>5595                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5596" name="L5596"></a>5596                       rights, transformer, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5597" name="L5597"></a>5597                 <em class="brace">}</em>
<a id="L5598" name="L5598"></a>5598                 U r = <strong class="reserved">null</strong>;
<a id="L5599" name="L5599"></a>5599                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5600" name="L5600"></a>5600                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5601" name="L5601"></a>5601                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p)) != <strong class="reserved">null</strong>)
<a id="L5602" name="L5602"></a>5602                         r = (r == <strong class="reserved">null</strong>) ? <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5603" name="L5603"></a>5603                 <em class="brace">}</em>
<a id="L5604" name="L5604"></a>5604                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5605" name="L5605"></a>5605                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5606" name="L5606"></a>5606                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5607" name="L5607"></a>5607                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5608" name="L5608"></a>5608                     <a href="../S/1074.html#L5570" title="Defined at 5570 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesTask</a>&lt;K,V,U&gt;
<a id="L5609" name="L5609"></a>5609                         t = (<a href="../S/1074.html#L5570" title="Defined at 5570 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesTask</a>&lt;K,V,U&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5610" name="L5610"></a>5610                         s = t.rights;
<a id="L5611" name="L5611"></a>5611                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5612" name="L5612"></a>5612                         U tr, sr;
<a id="L5613" name="L5613"></a>5613                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5614" name="L5614"></a>5614                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5615" name="L5615"></a>5615                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5616" name="L5616"></a>5616                         s = t.rights = s.nextRight;
<a id="L5617" name="L5617"></a>5617                     <em class="brace">}</em>
<a id="L5618" name="L5618"></a>5618                 <em class="brace">}</em>
<a id="L5619" name="L5619"></a>5619             <em class="brace">}</em>
<a id="L5620" name="L5620"></a>5620         <em class="brace">}</em>
<a id="L5621" name="L5621"></a>5621     <em class="brace">}</em>
<a id="L5622" name="L5622"></a>5622 
<a id="L5623" name="L5623"></a>5623     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5624" name="L5624"></a>5624     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4922.html" title="Multiple referred from 6 places.">MapReduceMappingsTask</a>&lt;K,V,U&gt;
<a id="L5625" name="L5625"></a>5625         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,U&gt; <em class="brace">{</em>
<a id="L5626" name="L5626"></a>5626         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5627" name="L5627"></a>5627         <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5628" name="L5628"></a>5628         U <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5629" name="L5629"></a>5629         <a href="../S/1074.html#L5624" title="Defined at 5624 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsTask</a>&lt;K,V,U&gt; rights, nextRight;
<a id="L5630" name="L5630"></a>5630         MapReduceMappingsTask
<a id="L5631" name="L5631"></a>5631             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5632" name="L5632"></a>5632              <a href="../S/1074.html#L5624" title="Defined at 5624 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsTask</a>&lt;K,V,U&gt; nextRight,
<a id="L5633" name="L5633"></a>5633              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer,
<a id="L5634" name="L5634"></a>5634              <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer) <em class="brace">{</em>
<a id="L5635" name="L5635"></a>5635             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5636" name="L5636"></a>5636             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5637" name="L5637"></a>5637             <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5638" name="L5638"></a>5638         <em class="brace">}</em>
<a id="L5639" name="L5639"></a>5639         <strong class="reserved">public</strong> <strong class="reserved">final</strong> U <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5640" name="L5640"></a>5640         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5641" name="L5641"></a>5641             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V, ? <strong class="reserved">extends</strong> U&gt; transformer;
<a id="L5642" name="L5642"></a>5642             <strong class="reserved">final</strong> <a href="../S/975.html#L44" title="Defined at 44 in src/java/util/function/BiFunction.java.">BiFunction</a>&lt;? <strong class="reserved">super</strong> U, ? <strong class="reserved">super</strong> U, ? <strong class="reserved">extends</strong> U&gt; reducer;
<a id="L5643" name="L5643"></a>5643             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5644" name="L5644"></a>5644                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5645" name="L5645"></a>5645                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5646" name="L5646"></a>5646                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5647" name="L5647"></a>5647                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5648" name="L5648"></a>5648                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5624" title="Defined at 5624 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsTask</a>&lt;K,V,U&gt;
<a id="L5649" name="L5649"></a>5649                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5650" name="L5650"></a>5650                       rights, transformer, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5651" name="L5651"></a>5651                 <em class="brace">}</em>
<a id="L5652" name="L5652"></a>5652                 U r = <strong class="reserved">null</strong>;
<a id="L5653" name="L5653"></a>5653                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; ) <em class="brace">{</em>
<a id="L5654" name="L5654"></a>5654                     U <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L5655" name="L5655"></a>5655                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = transformer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)) != <strong class="reserved">null</strong>)
<a id="L5656" name="L5656"></a>5656                         r = (r == <strong class="reserved">null</strong>) ? <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> : reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(r, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>);
<a id="L5657" name="L5657"></a>5657                 <em class="brace">}</em>
<a id="L5658" name="L5658"></a>5658                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5659" name="L5659"></a>5659                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5660" name="L5660"></a>5660                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5661" name="L5661"></a>5661                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5662" name="L5662"></a>5662                     <a href="../S/1074.html#L5624" title="Defined at 5624 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsTask</a>&lt;K,V,U&gt;
<a id="L5663" name="L5663"></a>5663                         t = (<a href="../S/1074.html#L5624" title="Defined at 5624 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsTask</a>&lt;K,V,U&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5664" name="L5664"></a>5664                         s = t.rights;
<a id="L5665" name="L5665"></a>5665                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5666" name="L5666"></a>5666                         U tr, sr;
<a id="L5667" name="L5667"></a>5667                         <strong class="reserved">if</strong> ((sr = s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) != <strong class="reserved">null</strong>)
<a id="L5668" name="L5668"></a>5668                             t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (((tr = t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) == <strong class="reserved">null</strong>) ? sr :
<a id="L5669" name="L5669"></a>5669                                         reducer.<a href="../D/11441.html" title="Multiple defined in 32 places.">apply</a>(tr, sr));
<a id="L5670" name="L5670"></a>5670                         s = t.rights = s.nextRight;
<a id="L5671" name="L5671"></a>5671                     <em class="brace">}</em>
<a id="L5672" name="L5672"></a>5672                 <em class="brace">}</em>
<a id="L5673" name="L5673"></a>5673             <em class="brace">}</em>
<a id="L5674" name="L5674"></a>5674         <em class="brace">}</em>
<a id="L5675" name="L5675"></a>5675     <em class="brace">}</em>
<a id="L5676" name="L5676"></a>5676 
<a id="L5677" name="L5677"></a>5677     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5678" name="L5678"></a>5678     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4919.html" title="Multiple referred from 6 places.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt;
<a id="L5679" name="L5679"></a>5679         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>&gt; <em class="brace">{</em>
<a id="L5680" name="L5680"></a>5680         <strong class="reserved">final</strong> <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer;
<a id="L5681" name="L5681"></a>5681         <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5682" name="L5682"></a>5682         <strong class="reserved">final</strong> <strong class="reserved">double</strong> basis;
<a id="L5683" name="L5683"></a>5683         <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5684" name="L5684"></a>5684         <a href="../S/1074.html#L5678" title="Defined at 5678 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5685" name="L5685"></a>5685         MapReduceKeysToDoubleTask
<a id="L5686" name="L5686"></a>5686             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5687" name="L5687"></a>5687              <a href="../S/1074.html#L5678" title="Defined at 5678 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt; nextRight,
<a id="L5688" name="L5688"></a>5688              <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer,
<a id="L5689" name="L5689"></a>5689              <strong class="reserved">double</strong> basis,
<a id="L5690" name="L5690"></a>5690              <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5691" name="L5691"></a>5691             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5692" name="L5692"></a>5692             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5693" name="L5693"></a>5693             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5694" name="L5694"></a>5694         <em class="brace">}</em>
<a id="L5695" name="L5695"></a>5695         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5696" name="L5696"></a>5696         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5697" name="L5697"></a>5697             <strong class="reserved">final</strong> <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer;
<a id="L5698" name="L5698"></a>5698             <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5699" name="L5699"></a>5699             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5700" name="L5700"></a>5700                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5701" name="L5701"></a>5701                 <strong class="reserved">double</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L5702" name="L5702"></a>5702                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5703" name="L5703"></a>5703                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5704" name="L5704"></a>5704                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5705" name="L5705"></a>5705                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5678" title="Defined at 5678 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt;
<a id="L5706" name="L5706"></a>5706                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5707" name="L5707"></a>5707                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5708" name="L5708"></a>5708                 <em class="brace">}</em>
<a id="L5709" name="L5709"></a>5709                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5710" name="L5710"></a>5710                     r = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(r, transformer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>));
<a id="L5711" name="L5711"></a>5711                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5712" name="L5712"></a>5712                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5713" name="L5713"></a>5713                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5714" name="L5714"></a>5714                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5715" name="L5715"></a>5715                     <a href="../S/1074.html#L5678" title="Defined at 5678 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt;
<a id="L5716" name="L5716"></a>5716                         t = (<a href="../S/1074.html#L5678" title="Defined at 5678 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToDoubleTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5717" name="L5717"></a>5717                         s = t.rights;
<a id="L5718" name="L5718"></a>5718                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5719" name="L5719"></a>5719                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L5720" name="L5720"></a>5720                         s = t.rights = s.nextRight;
<a id="L5721" name="L5721"></a>5721                     <em class="brace">}</em>
<a id="L5722" name="L5722"></a>5722                 <em class="brace">}</em>
<a id="L5723" name="L5723"></a>5723             <em class="brace">}</em>
<a id="L5724" name="L5724"></a>5724         <em class="brace">}</em>
<a id="L5725" name="L5725"></a>5725     <em class="brace">}</em>
<a id="L5726" name="L5726"></a>5726 
<a id="L5727" name="L5727"></a>5727     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5728" name="L5728"></a>5728     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4927.html" title="Multiple referred from 6 places.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt;
<a id="L5729" name="L5729"></a>5729         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>&gt; <em class="brace">{</em>
<a id="L5730" name="L5730"></a>5730         <strong class="reserved">final</strong> <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L5731" name="L5731"></a>5731         <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5732" name="L5732"></a>5732         <strong class="reserved">final</strong> <strong class="reserved">double</strong> basis;
<a id="L5733" name="L5733"></a>5733         <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5734" name="L5734"></a>5734         <a href="../S/1074.html#L5728" title="Defined at 5728 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5735" name="L5735"></a>5735         MapReduceValuesToDoubleTask
<a id="L5736" name="L5736"></a>5736             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5737" name="L5737"></a>5737              <a href="../S/1074.html#L5728" title="Defined at 5728 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt; nextRight,
<a id="L5738" name="L5738"></a>5738              <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L5739" name="L5739"></a>5739              <strong class="reserved">double</strong> basis,
<a id="L5740" name="L5740"></a>5740              <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5741" name="L5741"></a>5741             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5742" name="L5742"></a>5742             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5743" name="L5743"></a>5743             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5744" name="L5744"></a>5744         <em class="brace">}</em>
<a id="L5745" name="L5745"></a>5745         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5746" name="L5746"></a>5746         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5747" name="L5747"></a>5747             <strong class="reserved">final</strong> <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L5748" name="L5748"></a>5748             <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5749" name="L5749"></a>5749             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5750" name="L5750"></a>5750                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5751" name="L5751"></a>5751                 <strong class="reserved">double</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L5752" name="L5752"></a>5752                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5753" name="L5753"></a>5753                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5754" name="L5754"></a>5754                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5755" name="L5755"></a>5755                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5728" title="Defined at 5728 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt;
<a id="L5756" name="L5756"></a>5756                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5757" name="L5757"></a>5757                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5758" name="L5758"></a>5758                 <em class="brace">}</em>
<a id="L5759" name="L5759"></a>5759                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5760" name="L5760"></a>5760                     r = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(r, transformer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L5761" name="L5761"></a>5761                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5762" name="L5762"></a>5762                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5763" name="L5763"></a>5763                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5764" name="L5764"></a>5764                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5765" name="L5765"></a>5765                     <a href="../S/1074.html#L5728" title="Defined at 5728 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt;
<a id="L5766" name="L5766"></a>5766                         t = (<a href="../S/1074.html#L5728" title="Defined at 5728 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToDoubleTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5767" name="L5767"></a>5767                         s = t.rights;
<a id="L5768" name="L5768"></a>5768                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5769" name="L5769"></a>5769                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L5770" name="L5770"></a>5770                         s = t.rights = s.nextRight;
<a id="L5771" name="L5771"></a>5771                     <em class="brace">}</em>
<a id="L5772" name="L5772"></a>5772                 <em class="brace">}</em>
<a id="L5773" name="L5773"></a>5773             <em class="brace">}</em>
<a id="L5774" name="L5774"></a>5774         <em class="brace">}</em>
<a id="L5775" name="L5775"></a>5775     <em class="brace">}</em>
<a id="L5776" name="L5776"></a>5776 
<a id="L5777" name="L5777"></a>5777     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5778" name="L5778"></a>5778     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4915.html" title="Multiple referred from 6 places.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt;
<a id="L5779" name="L5779"></a>5779         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>&gt; <em class="brace">{</em>
<a id="L5780" name="L5780"></a>5780         <strong class="reserved">final</strong> <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer;
<a id="L5781" name="L5781"></a>5781         <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5782" name="L5782"></a>5782         <strong class="reserved">final</strong> <strong class="reserved">double</strong> basis;
<a id="L5783" name="L5783"></a>5783         <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5784" name="L5784"></a>5784         <a href="../S/1074.html#L5778" title="Defined at 5778 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5785" name="L5785"></a>5785         MapReduceEntriesToDoubleTask
<a id="L5786" name="L5786"></a>5786             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5787" name="L5787"></a>5787              <a href="../S/1074.html#L5778" title="Defined at 5778 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt; nextRight,
<a id="L5788" name="L5788"></a>5788              <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer,
<a id="L5789" name="L5789"></a>5789              <strong class="reserved">double</strong> basis,
<a id="L5790" name="L5790"></a>5790              <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5791" name="L5791"></a>5791             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5792" name="L5792"></a>5792             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5793" name="L5793"></a>5793             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5794" name="L5794"></a>5794         <em class="brace">}</em>
<a id="L5795" name="L5795"></a>5795         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5796" name="L5796"></a>5796         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5797" name="L5797"></a>5797             <strong class="reserved">final</strong> <a href="../S/940.html#L40" title="Defined at 40 in src/java/util/function/ToDoubleFunction.java.">ToDoubleFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer;
<a id="L5798" name="L5798"></a>5798             <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5799" name="L5799"></a>5799             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5800" name="L5800"></a>5800                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5801" name="L5801"></a>5801                 <strong class="reserved">double</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L5802" name="L5802"></a>5802                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5803" name="L5803"></a>5803                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5804" name="L5804"></a>5804                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5805" name="L5805"></a>5805                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5778" title="Defined at 5778 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt;
<a id="L5806" name="L5806"></a>5806                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5807" name="L5807"></a>5807                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5808" name="L5808"></a>5808                 <em class="brace">}</em>
<a id="L5809" name="L5809"></a>5809                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5810" name="L5810"></a>5810                     r = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(r, transformer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(p));
<a id="L5811" name="L5811"></a>5811                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5812" name="L5812"></a>5812                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5813" name="L5813"></a>5813                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5814" name="L5814"></a>5814                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5815" name="L5815"></a>5815                     <a href="../S/1074.html#L5778" title="Defined at 5778 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt;
<a id="L5816" name="L5816"></a>5816                         t = (<a href="../S/1074.html#L5778" title="Defined at 5778 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToDoubleTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5817" name="L5817"></a>5817                         s = t.rights;
<a id="L5818" name="L5818"></a>5818                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5819" name="L5819"></a>5819                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L5820" name="L5820"></a>5820                         s = t.rights = s.nextRight;
<a id="L5821" name="L5821"></a>5821                     <em class="brace">}</em>
<a id="L5822" name="L5822"></a>5822                 <em class="brace">}</em>
<a id="L5823" name="L5823"></a>5823             <em class="brace">}</em>
<a id="L5824" name="L5824"></a>5824         <em class="brace">}</em>
<a id="L5825" name="L5825"></a>5825     <em class="brace">}</em>
<a id="L5826" name="L5826"></a>5826 
<a id="L5827" name="L5827"></a>5827     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5828" name="L5828"></a>5828     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4923.html" title="Multiple referred from 6 places.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt;
<a id="L5829" name="L5829"></a>5829         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>&gt; <em class="brace">{</em>
<a id="L5830" name="L5830"></a>5830         <strong class="reserved">final</strong> <a href="../S/953.html#L42" title="Defined at 42 in src/java/util/function/ToDoubleBiFunction.java.">ToDoubleBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L5831" name="L5831"></a>5831         <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5832" name="L5832"></a>5832         <strong class="reserved">final</strong> <strong class="reserved">double</strong> basis;
<a id="L5833" name="L5833"></a>5833         <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5834" name="L5834"></a>5834         <a href="../S/1074.html#L5828" title="Defined at 5828 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5835" name="L5835"></a>5835         MapReduceMappingsToDoubleTask
<a id="L5836" name="L5836"></a>5836             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5837" name="L5837"></a>5837              <a href="../S/1074.html#L5828" title="Defined at 5828 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt; nextRight,
<a id="L5838" name="L5838"></a>5838              <a href="../S/953.html#L42" title="Defined at 42 in src/java/util/function/ToDoubleBiFunction.java.">ToDoubleBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L5839" name="L5839"></a>5839              <strong class="reserved">double</strong> basis,
<a id="L5840" name="L5840"></a>5840              <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5841" name="L5841"></a>5841             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5842" name="L5842"></a>5842             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5843" name="L5843"></a>5843             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5844" name="L5844"></a>5844         <em class="brace">}</em>
<a id="L5845" name="L5845"></a>5845         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5846" name="L5846"></a>5846         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5847" name="L5847"></a>5847             <strong class="reserved">final</strong> <a href="../S/953.html#L42" title="Defined at 42 in src/java/util/function/ToDoubleBiFunction.java.">ToDoubleBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L5848" name="L5848"></a>5848             <strong class="reserved">final</strong> <a href="../S/944.html#L40" title="Defined at 40 in src/java/util/function/DoubleBinaryOperator.java.">DoubleBinaryOperator</a> reducer;
<a id="L5849" name="L5849"></a>5849             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5850" name="L5850"></a>5850                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5851" name="L5851"></a>5851                 <strong class="reserved">double</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L5852" name="L5852"></a>5852                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5853" name="L5853"></a>5853                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5854" name="L5854"></a>5854                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5855" name="L5855"></a>5855                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5828" title="Defined at 5828 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt;
<a id="L5856" name="L5856"></a>5856                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5857" name="L5857"></a>5857                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5858" name="L5858"></a>5858                 <em class="brace">}</em>
<a id="L5859" name="L5859"></a>5859                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5860" name="L5860"></a>5860                     r = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(r, transformer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L5861" name="L5861"></a>5861                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5862" name="L5862"></a>5862                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5863" name="L5863"></a>5863                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5864" name="L5864"></a>5864                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5865" name="L5865"></a>5865                     <a href="../S/1074.html#L5828" title="Defined at 5828 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt;
<a id="L5866" name="L5866"></a>5866                         t = (<a href="../S/1074.html#L5828" title="Defined at 5828 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToDoubleTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5867" name="L5867"></a>5867                         s = t.rights;
<a id="L5868" name="L5868"></a>5868                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5869" name="L5869"></a>5869                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11442.html" title="Multiple defined in 6 places.">applyAsDouble</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L5870" name="L5870"></a>5870                         s = t.rights = s.nextRight;
<a id="L5871" name="L5871"></a>5871                     <em class="brace">}</em>
<a id="L5872" name="L5872"></a>5872                 <em class="brace">}</em>
<a id="L5873" name="L5873"></a>5873             <em class="brace">}</em>
<a id="L5874" name="L5874"></a>5874         <em class="brace">}</em>
<a id="L5875" name="L5875"></a>5875     <em class="brace">}</em>
<a id="L5876" name="L5876"></a>5876 
<a id="L5877" name="L5877"></a>5877     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5878" name="L5878"></a>5878     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4921.html" title="Multiple referred from 6 places.">MapReduceKeysToLongTask</a>&lt;K,V&gt;
<a id="L5879" name="L5879"></a>5879         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>&gt; <em class="brace">{</em>
<a id="L5880" name="L5880"></a>5880         <strong class="reserved">final</strong> <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer;
<a id="L5881" name="L5881"></a>5881         <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L5882" name="L5882"></a>5882         <strong class="reserved">final</strong> <strong class="reserved">long</strong> basis;
<a id="L5883" name="L5883"></a>5883         <strong class="reserved">long</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5884" name="L5884"></a>5884         <a href="../S/1074.html#L5878" title="Defined at 5878 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToLongTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5885" name="L5885"></a>5885         MapReduceKeysToLongTask
<a id="L5886" name="L5886"></a>5886             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5887" name="L5887"></a>5887              <a href="../S/1074.html#L5878" title="Defined at 5878 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToLongTask</a>&lt;K,V&gt; nextRight,
<a id="L5888" name="L5888"></a>5888              <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer,
<a id="L5889" name="L5889"></a>5889              <strong class="reserved">long</strong> basis,
<a id="L5890" name="L5890"></a>5890              <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5891" name="L5891"></a>5891             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5892" name="L5892"></a>5892             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5893" name="L5893"></a>5893             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5894" name="L5894"></a>5894         <em class="brace">}</em>
<a id="L5895" name="L5895"></a>5895         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5896" name="L5896"></a>5896         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5897" name="L5897"></a>5897             <strong class="reserved">final</strong> <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer;
<a id="L5898" name="L5898"></a>5898             <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L5899" name="L5899"></a>5899             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5900" name="L5900"></a>5900                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5901" name="L5901"></a>5901                 <strong class="reserved">long</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L5902" name="L5902"></a>5902                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5903" name="L5903"></a>5903                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5904" name="L5904"></a>5904                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5905" name="L5905"></a>5905                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5878" title="Defined at 5878 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToLongTask</a>&lt;K,V&gt;
<a id="L5906" name="L5906"></a>5906                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5907" name="L5907"></a>5907                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5908" name="L5908"></a>5908                 <em class="brace">}</em>
<a id="L5909" name="L5909"></a>5909                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5910" name="L5910"></a>5910                     r = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(r, transformer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>));
<a id="L5911" name="L5911"></a>5911                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5912" name="L5912"></a>5912                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5913" name="L5913"></a>5913                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5914" name="L5914"></a>5914                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5915" name="L5915"></a>5915                     <a href="../S/1074.html#L5878" title="Defined at 5878 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToLongTask</a>&lt;K,V&gt;
<a id="L5916" name="L5916"></a>5916                         t = (<a href="../S/1074.html#L5878" title="Defined at 5878 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToLongTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5917" name="L5917"></a>5917                         s = t.rights;
<a id="L5918" name="L5918"></a>5918                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5919" name="L5919"></a>5919                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L5920" name="L5920"></a>5920                         s = t.rights = s.nextRight;
<a id="L5921" name="L5921"></a>5921                     <em class="brace">}</em>
<a id="L5922" name="L5922"></a>5922                 <em class="brace">}</em>
<a id="L5923" name="L5923"></a>5923             <em class="brace">}</em>
<a id="L5924" name="L5924"></a>5924         <em class="brace">}</em>
<a id="L5925" name="L5925"></a>5925     <em class="brace">}</em>
<a id="L5926" name="L5926"></a>5926 
<a id="L5927" name="L5927"></a>5927     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5928" name="L5928"></a>5928     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4929.html" title="Multiple referred from 6 places.">MapReduceValuesToLongTask</a>&lt;K,V&gt;
<a id="L5929" name="L5929"></a>5929         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>&gt; <em class="brace">{</em>
<a id="L5930" name="L5930"></a>5930         <strong class="reserved">final</strong> <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L5931" name="L5931"></a>5931         <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L5932" name="L5932"></a>5932         <strong class="reserved">final</strong> <strong class="reserved">long</strong> basis;
<a id="L5933" name="L5933"></a>5933         <strong class="reserved">long</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5934" name="L5934"></a>5934         <a href="../S/1074.html#L5928" title="Defined at 5928 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToLongTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5935" name="L5935"></a>5935         MapReduceValuesToLongTask
<a id="L5936" name="L5936"></a>5936             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5937" name="L5937"></a>5937              <a href="../S/1074.html#L5928" title="Defined at 5928 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToLongTask</a>&lt;K,V&gt; nextRight,
<a id="L5938" name="L5938"></a>5938              <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L5939" name="L5939"></a>5939              <strong class="reserved">long</strong> basis,
<a id="L5940" name="L5940"></a>5940              <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5941" name="L5941"></a>5941             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5942" name="L5942"></a>5942             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5943" name="L5943"></a>5943             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5944" name="L5944"></a>5944         <em class="brace">}</em>
<a id="L5945" name="L5945"></a>5945         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5946" name="L5946"></a>5946         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5947" name="L5947"></a>5947             <strong class="reserved">final</strong> <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L5948" name="L5948"></a>5948             <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L5949" name="L5949"></a>5949             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L5950" name="L5950"></a>5950                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5951" name="L5951"></a>5951                 <strong class="reserved">long</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L5952" name="L5952"></a>5952                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L5953" name="L5953"></a>5953                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L5954" name="L5954"></a>5954                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L5955" name="L5955"></a>5955                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5928" title="Defined at 5928 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToLongTask</a>&lt;K,V&gt;
<a id="L5956" name="L5956"></a>5956                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L5957" name="L5957"></a>5957                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L5958" name="L5958"></a>5958                 <em class="brace">}</em>
<a id="L5959" name="L5959"></a>5959                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L5960" name="L5960"></a>5960                     r = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(r, transformer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L5961" name="L5961"></a>5961                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L5962" name="L5962"></a>5962                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L5963" name="L5963"></a>5963                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L5964" name="L5964"></a>5964                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L5965" name="L5965"></a>5965                     <a href="../S/1074.html#L5928" title="Defined at 5928 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToLongTask</a>&lt;K,V&gt;
<a id="L5966" name="L5966"></a>5966                         t = (<a href="../S/1074.html#L5928" title="Defined at 5928 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToLongTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L5967" name="L5967"></a>5967                         s = t.rights;
<a id="L5968" name="L5968"></a>5968                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5969" name="L5969"></a>5969                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L5970" name="L5970"></a>5970                         s = t.rights = s.nextRight;
<a id="L5971" name="L5971"></a>5971                     <em class="brace">}</em>
<a id="L5972" name="L5972"></a>5972                 <em class="brace">}</em>
<a id="L5973" name="L5973"></a>5973             <em class="brace">}</em>
<a id="L5974" name="L5974"></a>5974         <em class="brace">}</em>
<a id="L5975" name="L5975"></a>5975     <em class="brace">}</em>
<a id="L5976" name="L5976"></a>5976 
<a id="L5977" name="L5977"></a>5977     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L5978" name="L5978"></a>5978     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4917.html" title="Multiple referred from 6 places.">MapReduceEntriesToLongTask</a>&lt;K,V&gt;
<a id="L5979" name="L5979"></a>5979         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>&gt; <em class="brace">{</em>
<a id="L5980" name="L5980"></a>5980         <strong class="reserved">final</strong> <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer;
<a id="L5981" name="L5981"></a>5981         <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L5982" name="L5982"></a>5982         <strong class="reserved">final</strong> <strong class="reserved">long</strong> basis;
<a id="L5983" name="L5983"></a>5983         <strong class="reserved">long</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L5984" name="L5984"></a>5984         <a href="../S/1074.html#L5978" title="Defined at 5978 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToLongTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L5985" name="L5985"></a>5985         MapReduceEntriesToLongTask
<a id="L5986" name="L5986"></a>5986             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L5987" name="L5987"></a>5987              <a href="../S/1074.html#L5978" title="Defined at 5978 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToLongTask</a>&lt;K,V&gt; nextRight,
<a id="L5988" name="L5988"></a>5988              <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer,
<a id="L5989" name="L5989"></a>5989              <strong class="reserved">long</strong> basis,
<a id="L5990" name="L5990"></a>5990              <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L5991" name="L5991"></a>5991             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L5992" name="L5992"></a>5992             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L5993" name="L5993"></a>5993             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L5994" name="L5994"></a>5994         <em class="brace">}</em>
<a id="L5995" name="L5995"></a>5995         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L5996" name="L5996"></a>5996         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L5997" name="L5997"></a>5997             <strong class="reserved">final</strong> <a href="../S/972.html#L40" title="Defined at 40 in src/java/util/function/ToLongFunction.java.">ToLongFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer;
<a id="L5998" name="L5998"></a>5998             <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L5999" name="L5999"></a>5999             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L6000" name="L6000"></a>6000                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6001" name="L6001"></a>6001                 <strong class="reserved">long</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L6002" name="L6002"></a>6002                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L6003" name="L6003"></a>6003                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L6004" name="L6004"></a>6004                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L6005" name="L6005"></a>6005                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L5978" title="Defined at 5978 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToLongTask</a>&lt;K,V&gt;
<a id="L6006" name="L6006"></a>6006                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L6007" name="L6007"></a>6007                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L6008" name="L6008"></a>6008                 <em class="brace">}</em>
<a id="L6009" name="L6009"></a>6009                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L6010" name="L6010"></a>6010                     r = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(r, transformer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(p));
<a id="L6011" name="L6011"></a>6011                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L6012" name="L6012"></a>6012                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L6013" name="L6013"></a>6013                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L6014" name="L6014"></a>6014                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L6015" name="L6015"></a>6015                     <a href="../S/1074.html#L5978" title="Defined at 5978 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToLongTask</a>&lt;K,V&gt;
<a id="L6016" name="L6016"></a>6016                         t = (<a href="../S/1074.html#L5978" title="Defined at 5978 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToLongTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L6017" name="L6017"></a>6017                         s = t.rights;
<a id="L6018" name="L6018"></a>6018                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6019" name="L6019"></a>6019                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L6020" name="L6020"></a>6020                         s = t.rights = s.nextRight;
<a id="L6021" name="L6021"></a>6021                     <em class="brace">}</em>
<a id="L6022" name="L6022"></a>6022                 <em class="brace">}</em>
<a id="L6023" name="L6023"></a>6023             <em class="brace">}</em>
<a id="L6024" name="L6024"></a>6024         <em class="brace">}</em>
<a id="L6025" name="L6025"></a>6025     <em class="brace">}</em>
<a id="L6026" name="L6026"></a>6026 
<a id="L6027" name="L6027"></a>6027     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L6028" name="L6028"></a>6028     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4925.html" title="Multiple referred from 6 places.">MapReduceMappingsToLongTask</a>&lt;K,V&gt;
<a id="L6029" name="L6029"></a>6029         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>&gt; <em class="brace">{</em>
<a id="L6030" name="L6030"></a>6030         <strong class="reserved">final</strong> <a href="../S/977.html#L42" title="Defined at 42 in src/java/util/function/ToLongBiFunction.java.">ToLongBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L6031" name="L6031"></a>6031         <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L6032" name="L6032"></a>6032         <strong class="reserved">final</strong> <strong class="reserved">long</strong> basis;
<a id="L6033" name="L6033"></a>6033         <strong class="reserved">long</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L6034" name="L6034"></a>6034         <a href="../S/1074.html#L6028" title="Defined at 6028 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToLongTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L6035" name="L6035"></a>6035         MapReduceMappingsToLongTask
<a id="L6036" name="L6036"></a>6036             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L6037" name="L6037"></a>6037              <a href="../S/1074.html#L6028" title="Defined at 6028 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToLongTask</a>&lt;K,V&gt; nextRight,
<a id="L6038" name="L6038"></a>6038              <a href="../S/977.html#L42" title="Defined at 42 in src/java/util/function/ToLongBiFunction.java.">ToLongBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L6039" name="L6039"></a>6039              <strong class="reserved">long</strong> basis,
<a id="L6040" name="L6040"></a>6040              <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L6041" name="L6041"></a>6041             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L6042" name="L6042"></a>6042             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L6043" name="L6043"></a>6043             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L6044" name="L6044"></a>6044         <em class="brace">}</em>
<a id="L6045" name="L6045"></a>6045         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L6046" name="L6046"></a>6046         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L6047" name="L6047"></a>6047             <strong class="reserved">final</strong> <a href="../S/977.html#L42" title="Defined at 42 in src/java/util/function/ToLongBiFunction.java.">ToLongBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L6048" name="L6048"></a>6048             <strong class="reserved">final</strong> <a href="../S/959.html#L40" title="Defined at 40 in src/java/util/function/LongBinaryOperator.java.">LongBinaryOperator</a> reducer;
<a id="L6049" name="L6049"></a>6049             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L6050" name="L6050"></a>6050                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6051" name="L6051"></a>6051                 <strong class="reserved">long</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L6052" name="L6052"></a>6052                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L6053" name="L6053"></a>6053                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L6054" name="L6054"></a>6054                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L6055" name="L6055"></a>6055                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L6028" title="Defined at 6028 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToLongTask</a>&lt;K,V&gt;
<a id="L6056" name="L6056"></a>6056                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L6057" name="L6057"></a>6057                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L6058" name="L6058"></a>6058                 <em class="brace">}</em>
<a id="L6059" name="L6059"></a>6059                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L6060" name="L6060"></a>6060                     r = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(r, transformer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L6061" name="L6061"></a>6061                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L6062" name="L6062"></a>6062                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L6063" name="L6063"></a>6063                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L6064" name="L6064"></a>6064                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L6065" name="L6065"></a>6065                     <a href="../S/1074.html#L6028" title="Defined at 6028 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToLongTask</a>&lt;K,V&gt;
<a id="L6066" name="L6066"></a>6066                         t = (<a href="../S/1074.html#L6028" title="Defined at 6028 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToLongTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L6067" name="L6067"></a>6067                         s = t.rights;
<a id="L6068" name="L6068"></a>6068                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6069" name="L6069"></a>6069                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11444.html" title="Multiple defined in 6 places.">applyAsLong</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L6070" name="L6070"></a>6070                         s = t.rights = s.nextRight;
<a id="L6071" name="L6071"></a>6071                     <em class="brace">}</em>
<a id="L6072" name="L6072"></a>6072                 <em class="brace">}</em>
<a id="L6073" name="L6073"></a>6073             <em class="brace">}</em>
<a id="L6074" name="L6074"></a>6074         <em class="brace">}</em>
<a id="L6075" name="L6075"></a>6075     <em class="brace">}</em>
<a id="L6076" name="L6076"></a>6076 
<a id="L6077" name="L6077"></a>6077     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L6078" name="L6078"></a>6078     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4920.html" title="Multiple referred from 6 places.">MapReduceKeysToIntTask</a>&lt;K,V&gt;
<a id="L6079" name="L6079"></a>6079         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <em class="brace">{</em>
<a id="L6080" name="L6080"></a>6080         <strong class="reserved">final</strong> <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer;
<a id="L6081" name="L6081"></a>6081         <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6082" name="L6082"></a>6082         <strong class="reserved">final</strong> <strong class="reserved">int</strong> basis;
<a id="L6083" name="L6083"></a>6083         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L6084" name="L6084"></a>6084         <a href="../S/1074.html#L6078" title="Defined at 6078 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToIntTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L6085" name="L6085"></a>6085         MapReduceKeysToIntTask
<a id="L6086" name="L6086"></a>6086             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L6087" name="L6087"></a>6087              <a href="../S/1074.html#L6078" title="Defined at 6078 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToIntTask</a>&lt;K,V&gt; nextRight,
<a id="L6088" name="L6088"></a>6088              <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer,
<a id="L6089" name="L6089"></a>6089              <strong class="reserved">int</strong> basis,
<a id="L6090" name="L6090"></a>6090              <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L6091" name="L6091"></a>6091             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L6092" name="L6092"></a>6092             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L6093" name="L6093"></a>6093             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L6094" name="L6094"></a>6094         <em class="brace">}</em>
<a id="L6095" name="L6095"></a>6095         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L6096" name="L6096"></a>6096         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L6097" name="L6097"></a>6097             <strong class="reserved">final</strong> <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> K&gt; transformer;
<a id="L6098" name="L6098"></a>6098             <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6099" name="L6099"></a>6099             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L6100" name="L6100"></a>6100                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6101" name="L6101"></a>6101                 <strong class="reserved">int</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L6102" name="L6102"></a>6102                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L6103" name="L6103"></a>6103                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L6104" name="L6104"></a>6104                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L6105" name="L6105"></a>6105                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L6078" title="Defined at 6078 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToIntTask</a>&lt;K,V&gt;
<a id="L6106" name="L6106"></a>6106                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L6107" name="L6107"></a>6107                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L6108" name="L6108"></a>6108                 <em class="brace">}</em>
<a id="L6109" name="L6109"></a>6109                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L6110" name="L6110"></a>6110                     r = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(r, transformer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>));
<a id="L6111" name="L6111"></a>6111                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L6112" name="L6112"></a>6112                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L6113" name="L6113"></a>6113                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L6114" name="L6114"></a>6114                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L6115" name="L6115"></a>6115                     <a href="../S/1074.html#L6078" title="Defined at 6078 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToIntTask</a>&lt;K,V&gt;
<a id="L6116" name="L6116"></a>6116                         t = (<a href="../S/1074.html#L6078" title="Defined at 6078 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceKeysToIntTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L6117" name="L6117"></a>6117                         s = t.rights;
<a id="L6118" name="L6118"></a>6118                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6119" name="L6119"></a>6119                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L6120" name="L6120"></a>6120                         s = t.rights = s.nextRight;
<a id="L6121" name="L6121"></a>6121                     <em class="brace">}</em>
<a id="L6122" name="L6122"></a>6122                 <em class="brace">}</em>
<a id="L6123" name="L6123"></a>6123             <em class="brace">}</em>
<a id="L6124" name="L6124"></a>6124         <em class="brace">}</em>
<a id="L6125" name="L6125"></a>6125     <em class="brace">}</em>
<a id="L6126" name="L6126"></a>6126 
<a id="L6127" name="L6127"></a>6127     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L6128" name="L6128"></a>6128     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4928.html" title="Multiple referred from 6 places.">MapReduceValuesToIntTask</a>&lt;K,V&gt;
<a id="L6129" name="L6129"></a>6129         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <em class="brace">{</em>
<a id="L6130" name="L6130"></a>6130         <strong class="reserved">final</strong> <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L6131" name="L6131"></a>6131         <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6132" name="L6132"></a>6132         <strong class="reserved">final</strong> <strong class="reserved">int</strong> basis;
<a id="L6133" name="L6133"></a>6133         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L6134" name="L6134"></a>6134         <a href="../S/1074.html#L6128" title="Defined at 6128 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToIntTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L6135" name="L6135"></a>6135         MapReduceValuesToIntTask
<a id="L6136" name="L6136"></a>6136             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L6137" name="L6137"></a>6137              <a href="../S/1074.html#L6128" title="Defined at 6128 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToIntTask</a>&lt;K,V&gt; nextRight,
<a id="L6138" name="L6138"></a>6138              <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L6139" name="L6139"></a>6139              <strong class="reserved">int</strong> basis,
<a id="L6140" name="L6140"></a>6140              <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L6141" name="L6141"></a>6141             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L6142" name="L6142"></a>6142             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L6143" name="L6143"></a>6143             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L6144" name="L6144"></a>6144         <em class="brace">}</em>
<a id="L6145" name="L6145"></a>6145         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L6146" name="L6146"></a>6146         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L6147" name="L6147"></a>6147             <strong class="reserved">final</strong> <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L6148" name="L6148"></a>6148             <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6149" name="L6149"></a>6149             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L6150" name="L6150"></a>6150                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6151" name="L6151"></a>6151                 <strong class="reserved">int</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L6152" name="L6152"></a>6152                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L6153" name="L6153"></a>6153                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L6154" name="L6154"></a>6154                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L6155" name="L6155"></a>6155                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L6128" title="Defined at 6128 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToIntTask</a>&lt;K,V&gt;
<a id="L6156" name="L6156"></a>6156                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L6157" name="L6157"></a>6157                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L6158" name="L6158"></a>6158                 <em class="brace">}</em>
<a id="L6159" name="L6159"></a>6159                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L6160" name="L6160"></a>6160                     r = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(r, transformer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L6161" name="L6161"></a>6161                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L6162" name="L6162"></a>6162                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L6163" name="L6163"></a>6163                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L6164" name="L6164"></a>6164                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L6165" name="L6165"></a>6165                     <a href="../S/1074.html#L6128" title="Defined at 6128 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToIntTask</a>&lt;K,V&gt;
<a id="L6166" name="L6166"></a>6166                         t = (<a href="../S/1074.html#L6128" title="Defined at 6128 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceValuesToIntTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L6167" name="L6167"></a>6167                         s = t.rights;
<a id="L6168" name="L6168"></a>6168                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6169" name="L6169"></a>6169                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L6170" name="L6170"></a>6170                         s = t.rights = s.nextRight;
<a id="L6171" name="L6171"></a>6171                     <em class="brace">}</em>
<a id="L6172" name="L6172"></a>6172                 <em class="brace">}</em>
<a id="L6173" name="L6173"></a>6173             <em class="brace">}</em>
<a id="L6174" name="L6174"></a>6174         <em class="brace">}</em>
<a id="L6175" name="L6175"></a>6175     <em class="brace">}</em>
<a id="L6176" name="L6176"></a>6176 
<a id="L6177" name="L6177"></a>6177     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L6178" name="L6178"></a>6178     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4916.html" title="Multiple referred from 6 places.">MapReduceEntriesToIntTask</a>&lt;K,V&gt;
<a id="L6179" name="L6179"></a>6179         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <em class="brace">{</em>
<a id="L6180" name="L6180"></a>6180         <strong class="reserved">final</strong> <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer;
<a id="L6181" name="L6181"></a>6181         <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6182" name="L6182"></a>6182         <strong class="reserved">final</strong> <strong class="reserved">int</strong> basis;
<a id="L6183" name="L6183"></a>6183         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L6184" name="L6184"></a>6184         <a href="../S/1074.html#L6178" title="Defined at 6178 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToIntTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L6185" name="L6185"></a>6185         MapReduceEntriesToIntTask
<a id="L6186" name="L6186"></a>6186             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L6187" name="L6187"></a>6187              <a href="../S/1074.html#L6178" title="Defined at 6178 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToIntTask</a>&lt;K,V&gt; nextRight,
<a id="L6188" name="L6188"></a>6188              <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer,
<a id="L6189" name="L6189"></a>6189              <strong class="reserved">int</strong> basis,
<a id="L6190" name="L6190"></a>6190              <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L6191" name="L6191"></a>6191             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L6192" name="L6192"></a>6192             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L6193" name="L6193"></a>6193             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L6194" name="L6194"></a>6194         <em class="brace">}</em>
<a id="L6195" name="L6195"></a>6195         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L6196" name="L6196"></a>6196         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L6197" name="L6197"></a>6197             <strong class="reserved">final</strong> <a href="../S/960.html#L40" title="Defined at 40 in src/java/util/function/ToIntFunction.java.">ToIntFunction</a>&lt;<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;K,V&gt;&gt; transformer;
<a id="L6198" name="L6198"></a>6198             <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6199" name="L6199"></a>6199             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L6200" name="L6200"></a>6200                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6201" name="L6201"></a>6201                 <strong class="reserved">int</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L6202" name="L6202"></a>6202                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L6203" name="L6203"></a>6203                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L6204" name="L6204"></a>6204                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L6205" name="L6205"></a>6205                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L6178" title="Defined at 6178 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToIntTask</a>&lt;K,V&gt;
<a id="L6206" name="L6206"></a>6206                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L6207" name="L6207"></a>6207                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L6208" name="L6208"></a>6208                 <em class="brace">}</em>
<a id="L6209" name="L6209"></a>6209                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L6210" name="L6210"></a>6210                     r = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(r, transformer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(p));
<a id="L6211" name="L6211"></a>6211                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L6212" name="L6212"></a>6212                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L6213" name="L6213"></a>6213                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L6214" name="L6214"></a>6214                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L6215" name="L6215"></a>6215                     <a href="../S/1074.html#L6178" title="Defined at 6178 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToIntTask</a>&lt;K,V&gt;
<a id="L6216" name="L6216"></a>6216                         t = (<a href="../S/1074.html#L6178" title="Defined at 6178 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceEntriesToIntTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L6217" name="L6217"></a>6217                         s = t.rights;
<a id="L6218" name="L6218"></a>6218                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6219" name="L6219"></a>6219                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L6220" name="L6220"></a>6220                         s = t.rights = s.nextRight;
<a id="L6221" name="L6221"></a>6221                     <em class="brace">}</em>
<a id="L6222" name="L6222"></a>6222                 <em class="brace">}</em>
<a id="L6223" name="L6223"></a>6223             <em class="brace">}</em>
<a id="L6224" name="L6224"></a>6224         <em class="brace">}</em>
<a id="L6225" name="L6225"></a>6225     <em class="brace">}</em>
<a id="L6226" name="L6226"></a>6226 
<a id="L6227" name="L6227"></a>6227     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("serial")
<a id="L6228" name="L6228"></a>6228     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4924.html" title="Multiple referred from 6 places.">MapReduceMappingsToIntTask</a>&lt;K,V&gt;
<a id="L6229" name="L6229"></a>6229         <strong class="reserved">extends</strong> <a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <em class="brace">{</em>
<a id="L6230" name="L6230"></a>6230         <strong class="reserved">final</strong> <a href="../S/983.html#L42" title="Defined at 42 in src/java/util/function/ToIntBiFunction.java.">ToIntBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L6231" name="L6231"></a>6231         <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6232" name="L6232"></a>6232         <strong class="reserved">final</strong> <strong class="reserved">int</strong> basis;
<a id="L6233" name="L6233"></a>6233         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L6234" name="L6234"></a>6234         <a href="../S/1074.html#L6228" title="Defined at 6228 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToIntTask</a>&lt;K,V&gt; rights, nextRight;
<a id="L6235" name="L6235"></a>6235         MapReduceMappingsToIntTask
<a id="L6236" name="L6236"></a>6236             (<a href="../S/1074.html#L4808" title="Defined at 4808 in src/java/util/concurrent/ConcurrentHashMap.java.">BulkTask</a>&lt;K,V,?&gt; p, <strong class="reserved">int</strong> b, <strong class="reserved">int</strong> i, <strong class="reserved">int</strong> f, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt;[] t,
<a id="L6237" name="L6237"></a>6237              <a href="../S/1074.html#L6228" title="Defined at 6228 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToIntTask</a>&lt;K,V&gt; nextRight,
<a id="L6238" name="L6238"></a>6238              <a href="../S/983.html#L42" title="Defined at 42 in src/java/util/function/ToIntBiFunction.java.">ToIntBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer,
<a id="L6239" name="L6239"></a>6239              <strong class="reserved">int</strong> basis,
<a id="L6240" name="L6240"></a>6240              <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer) <em class="brace">{</em>
<a id="L6241" name="L6241"></a>6241             <strong class="reserved">super</strong>(p, b, i, f, t); <strong class="reserved">this</strong>.nextRight = nextRight;
<a id="L6242" name="L6242"></a>6242             <strong class="reserved">this</strong>.transformer = transformer;
<a id="L6243" name="L6243"></a>6243             <strong class="reserved">this</strong>.basis = basis; <strong class="reserved">this</strong>.reducer = reducer;
<a id="L6244" name="L6244"></a>6244         <em class="brace">}</em>
<a id="L6245" name="L6245"></a>6245         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/18601.html" title="Multiple referred from 4 places.">getRawResult</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>; <em class="brace">}</em>
<a id="L6246" name="L6246"></a>6246         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L6247" name="L6247"></a>6247             <strong class="reserved">final</strong> <a href="../S/983.html#L42" title="Defined at 42 in src/java/util/function/ToIntBiFunction.java.">ToIntBiFunction</a>&lt;? <strong class="reserved">super</strong> K, ? <strong class="reserved">super</strong> V&gt; transformer;
<a id="L6248" name="L6248"></a>6248             <strong class="reserved">final</strong> <a href="../S/946.html#L40" title="Defined at 40 in src/java/util/function/IntBinaryOperator.java.">IntBinaryOperator</a> reducer;
<a id="L6249" name="L6249"></a>6249             <strong class="reserved">if</strong> ((transformer = <strong class="reserved">this</strong>.transformer) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L6250" name="L6250"></a>6250                 (reducer = <strong class="reserved">this</strong>.reducer) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6251" name="L6251"></a>6251                 <strong class="reserved">int</strong> r = <strong class="reserved">this</strong>.basis;
<a id="L6252" name="L6252"></a>6252                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = baseIndex, f, h; batch &gt; 0 &amp;&amp;
<a id="L6253" name="L6253"></a>6253                          (h = ((f = baseLimit) + i) &gt;&gt;&gt; 1) &gt; i;) <em class="brace">{</em>
<a id="L6254" name="L6254"></a>6254                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L6255" name="L6255"></a>6255                     (rights = <strong class="reserved">new</strong> <a href="../S/1074.html#L6228" title="Defined at 6228 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToIntTask</a>&lt;K,V&gt;
<a id="L6256" name="L6256"></a>6256                      (<strong class="reserved">this</strong>, batch &gt;&gt;&gt;= 1, baseLimit = h, f, tab,
<a id="L6257" name="L6257"></a>6257                       rights, transformer, r, reducer)).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L6258" name="L6258"></a>6258                 <em class="brace">}</em>
<a id="L6259" name="L6259"></a>6259                 <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&lt;K,V&gt; p; (p = <a href="../D/11249.html" title="Multiple defined in 12 places.">advance</a>()) != <strong class="reserved">null</strong>; )
<a id="L6260" name="L6260"></a>6260                     r = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(r, transformer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(p.<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, p.<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L6261" name="L6261"></a>6261                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = r;
<a id="L6262" name="L6262"></a>6262                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L6263" name="L6263"></a>6263                 <strong class="reserved">for</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1070.html#L647" title="Defined at 647 in src/java/util/concurrent/CountedCompleter.java.">firstComplete</a>(); <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/1070.html#L673" title="Defined at 673 in src/java/util/concurrent/CountedCompleter.java.">nextComplete</a>()) <em class="brace">{</em>
<a id="L6264" name="L6264"></a>6264                     @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L6265" name="L6265"></a>6265                     <a href="../S/1074.html#L6228" title="Defined at 6228 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToIntTask</a>&lt;K,V&gt;
<a id="L6266" name="L6266"></a>6266                         t = (<a href="../S/1074.html#L6228" title="Defined at 6228 in src/java/util/concurrent/ConcurrentHashMap.java.">MapReduceMappingsToIntTask</a>&lt;K,V&gt;)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>,
<a id="L6267" name="L6267"></a>6267                         s = t.rights;
<a id="L6268" name="L6268"></a>6268                     <strong class="reserved">while</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L6269" name="L6269"></a>6269                         t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = reducer.<a href="../D/11443.html" title="Multiple defined in 6 places.">applyAsInt</a>(t.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, s.<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L6270" name="L6270"></a>6270                         s = t.rights = s.nextRight;
<a id="L6271" name="L6271"></a>6271                     <em class="brace">}</em>
<a id="L6272" name="L6272"></a>6272                 <em class="brace">}</em>
<a id="L6273" name="L6273"></a>6273             <em class="brace">}</em>
<a id="L6274" name="L6274"></a>6274         <em class="brace">}</em>
<a id="L6275" name="L6275"></a>6275     <em class="brace">}</em>
<a id="L6276" name="L6276"></a>6276 
<a id="L6277" name="L6277"></a>6277     <em class="comment">// Unsafe mechanics</em>
<a id="L6278" name="L6278"></a>6278     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> sun.misc.Unsafe U;
<a id="L6279" name="L6279"></a>6279     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> SIZECTL;
<a id="L6280" name="L6280"></a>6280     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> TRANSFERINDEX;
<a id="L6281" name="L6281"></a>6281     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> BASECOUNT;
<a id="L6282" name="L6282"></a>6282     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> CELLSBUSY;
<a id="L6283" name="L6283"></a>6283     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> CELLVALUE;
<a id="L6284" name="L6284"></a>6284     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ABASE;
<a id="L6285" name="L6285"></a>6285     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ASHIFT;
<a id="L6286" name="L6286"></a>6286 
<a id="L6287" name="L6287"></a>6287     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L6288" name="L6288"></a>6288         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L6289" name="L6289"></a>6289             U = sun.misc.Unsafe.getUnsafe();
<a id="L6290" name="L6290"></a>6290             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; k = <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>.<strong class="reserved">class</strong>;
<a id="L6291" name="L6291"></a>6291             SIZECTL = U.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L6292" name="L6292"></a>6292                 (k.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("sizeCtl"));
<a id="L6293" name="L6293"></a>6293             TRANSFERINDEX = U.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L6294" name="L6294"></a>6294                 (k.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("transferIndex"));
<a id="L6295" name="L6295"></a>6295             BASECOUNT = U.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L6296" name="L6296"></a>6296                 (k.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("baseCount"));
<a id="L6297" name="L6297"></a>6297             CELLSBUSY = U.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L6298" name="L6298"></a>6298                 (k.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("cellsBusy"));
<a id="L6299" name="L6299"></a>6299             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ck = <a href="../S/1074.html#L2506" title="Defined at 2506 in src/java/util/concurrent/ConcurrentHashMap.java.">CounterCell</a>.<strong class="reserved">class</strong>;
<a id="L6300" name="L6300"></a>6300             CELLVALUE = U.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L6301" name="L6301"></a>6301                 (ck.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("value"));
<a id="L6302" name="L6302"></a>6302             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ak = <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[].<strong class="reserved">class</strong>;
<a id="L6303" name="L6303"></a>6303             ABASE = U.arrayBaseOffset(ak);
<a id="L6304" name="L6304"></a>6304             <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = U.arrayIndexScale(ak);
<a id="L6305" name="L6305"></a>6305             <strong class="reserved">if</strong> ((<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &amp; (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - 1)) != 0)
<a id="L6306" name="L6306"></a>6306                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("data type scale not a power of two");
<a id="L6307" name="L6307"></a>6307             ASHIFT = 31 - <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/28378.html" title="Multiple defined in 2 places.">numberOfLeadingZeros</a>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L6308" name="L6308"></a>6308         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L6309" name="L6309"></a>6309             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>(e);
<a id="L6310" name="L6310"></a>6310         <em class="brace">}</em>
<a id="L6311" name="L6311"></a>6311     <em class="brace">}</em>
<a id="L6312" name="L6312"></a>6312 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L632">[^]</a><a href="#L6246">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
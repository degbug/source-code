<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/image/LookupOp.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L101">[^]</a><a href="#L522">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L101" title="Defined at 101.">getTable</a></li>
<li><a href="#L125" title="Defined at 125.">filter</a></li>
<li><a href="#L253" title="Defined at 253.">filter</a></li>
<li><a href="#L335" title="Defined at 335.">getBounds2D</a></li>
<li><a href="#L346" title="Defined at 346.">getBounds2D</a></li>
<li><a href="#L360" title="Defined at 360.">createCompatibleDestImage</a></li>
<li><a href="#L440" title="Defined at 440.">createCompatibleDestRaster</a></li>
<li><a href="#L457" title="Defined at 457.">getPoint2D</a></li>
<li><a href="#L471" title="Defined at 471.">getRenderingHints</a></li>
<li><a href="#L475" title="Defined at 475.">byteFilter</a></li>
<li><a href="#L522" title="Defined at 522.">shortFilter</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2000, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.image;
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.color.ColorSpace;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.awt.geom.Rectangle2D;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.awt.Rectangle;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.awt.RenderingHints;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.awt.geom.Point2D;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> sun.awt.image.ImagingLib;
<a id="L35" name="L35"></a>  35 
<div class="comment">
  This class implements a lookup operation from the source
  to the destination.  The LookupTable object may contain a single array
  or multiple arrays, subject to the restrictions below.
  <p>
  For Rasters, the lookup operates on bands.  The number of
  lookup arrays may be one, in which case the same array is
  applied to all bands, or it must equal the number of Source
  Raster bands.
  </p><p>
  For BufferedImages, the lookup operates on color and alpha components.
  The number of lookup arrays may be one, in which case the
  same array is applied to all color (but not alpha) components.
  Otherwise, the number of lookup arrays may
  equal the number of Source color components, in which case no
  lookup of the alpha component (if present) is performed.
  If neither of these cases apply, the number of lookup arrays
  must equal the number of Source color components plus alpha components,
  in which case lookup is performed for all color and alpha components.
  This allows non-uniform rescaling of multi-band BufferedImages.
  </p><p>
  BufferedImage sources with premultiplied alpha data are treated in the same
  manner as non-premultiplied images for purposes of the lookup.  That is,
  the lookup is done per band on the raw data of the BufferedImage source
  without regard to whether the data is premultiplied.  If a color conversion
  is required to the destination ColorModel, the premultiplied state of
  both source and destination will be taken into account for this step.
  </p><p>
  Images with an IndexColorModel cannot be used.
  </p><p>
  If a RenderingHints object is specified in the constructor, the
  color rendering hint and the dithering hint may be used when color
  conversion is required.
  </p><p>
  This class allows the Source to be the same as the Destination.
  @see LookupTable
  @see java.awt.RenderingHints#KEY_COLOR_RENDERING
  @see java.awt.RenderingHints#KEY_DITHERING</p></div>
<a id="L76" name="L76"></a>  76 
<a id="L77" name="L77"></a>  77 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/4793.html" title="Multiple referred from 2 places.">LookupOp</a> <strong class="reserved">implements</strong> <a href="../S/2237.html#L61" title="Defined at 61 in src/java/awt/image/BufferedImageOp.java.">BufferedImageOp</a>, <a href="../S/2234.html#L52" title="Defined at 52 in src/java/awt/image/RasterOp.java.">RasterOp</a> <em class="brace">{</em>
<a id="L78" name="L78"></a>  78     <strong class="reserved">private</strong> <a href="../S/2246.html#L46" title="Defined at 46 in src/java/awt/image/LookupTable.java.">LookupTable</a> ltable;
<a id="L79" name="L79"></a>  79     <strong class="reserved">private</strong> <strong class="reserved">int</strong> numComponents;
<a id="L80" name="L80"></a>  80     <a href="../S/2116.html#L82" title="Defined at 82 in src/java/awt/RenderingHints.java.">RenderingHints</a> hints;
<a id="L81" name="L81"></a>  81 
<div class="comment">
      Constructs a <code>LookupOp</code> object given the lookup
      table and a <code>RenderingHints</code> object, which might
      be <code>null</code>.
      @param lookup the specified <code>LookupTable</code>
      @param hints the specified <code>RenderingHints</code>,
             or <code>null</code></div>
<a id="L90" name="L90"></a>  90     <strong class="reserved">public</strong> LookupOp(<a href="../S/2246.html#L46" title="Defined at 46 in src/java/awt/image/LookupTable.java.">LookupTable</a> <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>, <a href="../S/2116.html#L82" title="Defined at 82 in src/java/awt/RenderingHints.java.">RenderingHints</a> hints) <em class="brace">{</em>
<a id="L91" name="L91"></a>  91         <strong class="reserved">this</strong>.ltable = <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>;
<a id="L92" name="L92"></a>  92         <strong class="reserved">this</strong>.hints  = hints;
<a id="L93" name="L93"></a>  93         numComponents = ltable.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>();
<a id="L94" name="L94"></a>  94     <em class="brace">}</em>
<a id="L95" name="L95"></a>  95 
<div class="comment">
      Returns the <code>LookupTable</code>.
      @return the <code>LookupTable</code> of this
              <code>LookupOp</code>.</div>
<a id="L101" name="L101"></a> 101     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2246.html#L46" title="Defined at 46 in src/java/awt/image/LookupTable.java.">LookupTable</a> <a href="../R/19370.html" title="Multiple referred from 35 places.">getTable</a>() <em class="brace">{</em>
<a id="L102" name="L102"></a> 102         <strong class="reserved">return</strong> ltable;
<a id="L103" name="L103"></a> 103     <em class="brace">}</em>
<a id="L104" name="L104"></a> 104 
<div class="comment">
      Performs a lookup operation on a <code>BufferedImage</code>.
      If the color model in the source image is not the same as that
      in the destination image, the pixels will be converted
      in the destination.  If the destination image is <code>null</code>,
      a <code>BufferedImage</code> will be created with an appropriate
      <code>ColorModel</code>.  An <code>IllegalArgumentException</code>
      might be thrown if the number of arrays in the
      <code>LookupTable</code> does not meet the restrictions
      stated in the class comment above, or if the source image
      has an <code>IndexColorModel</code>.
      @param src the <code>BufferedImage</code> to be filtered
      @param dst the <code>BufferedImage</code> in which to
                 store the results of the filter operation
      @return the filtered <code>BufferedImage</code>.
      @throws IllegalArgumentException if the number of arrays in the
              <code>LookupTable</code> does not meet the restrictions
              described in the class comments, or if the source image
              has an <code>IndexColorModel</code>.</div>
<a id="L125" name="L125"></a> 125     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> <a href="../R/14321.html" title="Multiple referred from 472 places.">filter</a>(<a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> src, <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> dst) <em class="brace">{</em>
<a id="L126" name="L126"></a> 126         <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> srcCM = src.<a href="../D/17790.html" title="Multiple defined in 14 places.">getColorModel</a>();
<a id="L127" name="L127"></a> 127         <strong class="reserved">int</strong> numBands = srcCM.<a href="../S/2256.html#L519" title="Defined at 519 in src/java/awt/image/ColorModel.java.">getNumColorComponents</a>();
<a id="L128" name="L128"></a> 128         <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> dstCM;
<a id="L129" name="L129"></a> 129         <strong class="reserved">if</strong> (srcCM <strong class="reserved">instanceof</strong> <a href="../S/2242.html#L125" title="Defined at 125 in src/java/awt/image/IndexColorModel.java.">IndexColorModel</a>) <em class="brace">{</em>
<a id="L130" name="L130"></a> 130             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L131" name="L131"></a> 131                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("LookupOp cannot be "+
<a id="L132" name="L132"></a> 132                                          "performed on an indexed image");
<a id="L133" name="L133"></a> 133         <em class="brace">}</em>
<a id="L134" name="L134"></a> 134         <strong class="reserved">int</strong> numComponents = ltable.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>();
<a id="L135" name="L135"></a> 135         <strong class="reserved">if</strong> (numComponents != 1 &amp;&amp;
<a id="L136" name="L136"></a> 136             numComponents != srcCM.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>() &amp;&amp;
<a id="L137" name="L137"></a> 137             numComponents != srcCM.<a href="../S/2256.html#L519" title="Defined at 519 in src/java/awt/image/ColorModel.java.">getNumColorComponents</a>())
<a id="L138" name="L138"></a> 138         <em class="brace">{</em>
<a id="L139" name="L139"></a> 139             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Number of arrays in the "+
<a id="L140" name="L140"></a> 140                                                " lookup table ("+
<a id="L141" name="L141"></a> 141                                                numComponents+
<a id="L142" name="L142"></a> 142                                                " is not compatible with the "+
<a id="L143" name="L143"></a> 143                                                " src image: "+src);
<a id="L144" name="L144"></a> 144         <em class="brace">}</em>
<a id="L145" name="L145"></a> 145 
<a id="L146" name="L146"></a> 146 
<a id="L147" name="L147"></a> 147         <strong class="reserved">boolean</strong> needToConvert = <strong class="reserved">false</strong>;
<a id="L148" name="L148"></a> 148 
<a id="L149" name="L149"></a> 149         <strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = src.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>();
<a id="L150" name="L150"></a> 150         <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> = src.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L151" name="L151"></a> 151 
<a id="L152" name="L152"></a> 152         <strong class="reserved">if</strong> (dst == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L153" name="L153"></a> 153             dst = <a href="../D/13704.html" title="Multiple defined in 7 places.">createCompatibleDestImage</a>(src, <strong class="reserved">null</strong>);
<a id="L154" name="L154"></a> 154             dstCM = srcCM;
<a id="L155" name="L155"></a> 155         <em class="brace">}</em>
<a id="L156" name="L156"></a> 156         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L157" name="L157"></a> 157             <strong class="reserved">if</strong> (<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> != dst.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>()) <em class="brace">{</em>
<a id="L158" name="L158"></a> 158                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L159" name="L159"></a> 159                     <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Src width ("+<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>+
<a id="L160" name="L160"></a> 160                                              ") not equal to dst width ("+
<a id="L161" name="L161"></a> 161                                              dst.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>()+")");
<a id="L162" name="L162"></a> 162             <em class="brace">}</em>
<a id="L163" name="L163"></a> 163             <strong class="reserved">if</strong> (<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> != dst.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>()) <em class="brace">{</em>
<a id="L164" name="L164"></a> 164                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L165" name="L165"></a> 165                     <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Src height ("+<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>+
<a id="L166" name="L166"></a> 166                                              ") not equal to dst height ("+
<a id="L167" name="L167"></a> 167                                              dst.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>()+")");
<a id="L168" name="L168"></a> 168             <em class="brace">}</em>
<a id="L169" name="L169"></a> 169 
<a id="L170" name="L170"></a> 170             dstCM = dst.<a href="../D/17790.html" title="Multiple defined in 14 places.">getColorModel</a>();
<a id="L171" name="L171"></a> 171             <strong class="reserved">if</strong> (srcCM.<a href="../D/17792.html" title="Multiple defined in 3 places.">getColorSpace</a>().<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() !=
<a id="L172" name="L172"></a> 172                 dstCM.<a href="../D/17792.html" title="Multiple defined in 3 places.">getColorSpace</a>().<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>())
<a id="L173" name="L173"></a> 173             <em class="brace">{</em>
<a id="L174" name="L174"></a> 174                 needToConvert = <strong class="reserved">true</strong>;
<a id="L175" name="L175"></a> 175                 dst = <a href="../D/13704.html" title="Multiple defined in 7 places.">createCompatibleDestImage</a>(src, <strong class="reserved">null</strong>);
<a id="L176" name="L176"></a> 176             <em class="brace">}</em>
<a id="L177" name="L177"></a> 177 
<a id="L178" name="L178"></a> 178         <em class="brace">}</em>
<a id="L179" name="L179"></a> 179 
<a id="L180" name="L180"></a> 180         <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> origDst = dst;
<a id="L181" name="L181"></a> 181 
<a id="L182" name="L182"></a> 182         <strong class="reserved">if</strong> (ImagingLib.<a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a>(<strong class="reserved">this</strong>, src, dst) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L183" name="L183"></a> 183             <em class="comment">// Do it the slow way</em>
<a id="L184" name="L184"></a> 184             <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> srcRaster = src.<a href="../D/21845.html" title="Multiple defined in 8 places.">getRaster</a>();
<a id="L185" name="L185"></a> 185             <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> dstRaster = dst.<a href="../D/21845.html" title="Multiple defined in 8 places.">getRaster</a>();
<a id="L186" name="L186"></a> 186 
<a id="L187" name="L187"></a> 187             <strong class="reserved">if</strong> (srcCM.<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>()) <em class="brace">{</em>
<a id="L188" name="L188"></a> 188                 <strong class="reserved">if</strong> (numBands-1 == numComponents || numComponents == 1) <em class="brace">{</em>
<a id="L189" name="L189"></a> 189                     <strong class="reserved">int</strong> minx = srcRaster.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L190" name="L190"></a> 190                     <strong class="reserved">int</strong> miny = srcRaster.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L191" name="L191"></a> 191                     <strong class="reserved">int</strong>[] bands = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numBands-1];
<a id="L192" name="L192"></a> 192                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numBands-1; i++) <em class="brace">{</em>
<a id="L193" name="L193"></a> 193                         bands[i] = i;
<a id="L194" name="L194"></a> 194                     <em class="brace">}</em>
<a id="L195" name="L195"></a> 195                     srcRaster =
<a id="L196" name="L196"></a> 196                         srcRaster.<a href="../S/2280.html#L217" title="Defined at 217 in src/java/awt/image/WritableRaster.java.">createWritableChild</a>(minx, miny,
<a id="L197" name="L197"></a> 197                                                       srcRaster.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>(),
<a id="L198" name="L198"></a> 198                                                       srcRaster.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(),
<a id="L199" name="L199"></a> 199                                                       minx, miny,
<a id="L200" name="L200"></a> 200                                                       bands);
<a id="L201" name="L201"></a> 201                 <em class="brace">}</em>
<a id="L202" name="L202"></a> 202             <em class="brace">}</em>
<a id="L203" name="L203"></a> 203             <strong class="reserved">if</strong> (dstCM.<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>()) <em class="brace">{</em>
<a id="L204" name="L204"></a> 204                 <strong class="reserved">int</strong> dstNumBands = dstRaster.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>();
<a id="L205" name="L205"></a> 205                 <strong class="reserved">if</strong> (dstNumBands-1 == numComponents || numComponents == 1) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206                     <strong class="reserved">int</strong> minx = dstRaster.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L207" name="L207"></a> 207                     <strong class="reserved">int</strong> miny = dstRaster.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L208" name="L208"></a> 208                     <strong class="reserved">int</strong>[] bands = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numBands-1];
<a id="L209" name="L209"></a> 209                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numBands-1; i++) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                         bands[i] = i;
<a id="L211" name="L211"></a> 211                     <em class="brace">}</em>
<a id="L212" name="L212"></a> 212                     dstRaster =
<a id="L213" name="L213"></a> 213                         dstRaster.<a href="../S/2280.html#L217" title="Defined at 217 in src/java/awt/image/WritableRaster.java.">createWritableChild</a>(minx, miny,
<a id="L214" name="L214"></a> 214                                                       dstRaster.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>(),
<a id="L215" name="L215"></a> 215                                                       dstRaster.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(),
<a id="L216" name="L216"></a> 216                                                       minx, miny,
<a id="L217" name="L217"></a> 217                                                       bands);
<a id="L218" name="L218"></a> 218                 <em class="brace">}</em>
<a id="L219" name="L219"></a> 219             <em class="brace">}</em>
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221             <a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a>(srcRaster, dstRaster);
<a id="L222" name="L222"></a> 222         <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224         <strong class="reserved">if</strong> (needToConvert) <em class="brace">{</em>
<a id="L225" name="L225"></a> 225             <em class="comment">// ColorModels are not the same</em>
<a id="L226" name="L226"></a> 226             <a href="../S/2278.html#L71" title="Defined at 71 in src/java/awt/image/ColorConvertOp.java.">ColorConvertOp</a> ccop = <strong class="reserved">new</strong> <a href="../S/2278.html#L71" title="Defined at 71 in src/java/awt/image/ColorConvertOp.java.">ColorConvertOp</a>(hints);
<a id="L227" name="L227"></a> 227             ccop.<a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a>(dst, origDst);
<a id="L228" name="L228"></a> 228         <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<a id="L230" name="L230"></a> 230         <strong class="reserved">return</strong> origDst;
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
      Performs a lookup operation on a <code>Raster</code>.
      If the destination <code>Raster</code> is <code>null</code>,
      a new <code>Raster</code> will be created.
      The <code>IllegalArgumentException</code> might be thrown
      if the source <code>Raster</code> and the destination
      <code>Raster</code> do not have the same
      number of bands or if the number of arrays in the
      <code>LookupTable</code> does not meet the
      restrictions stated in the class comment above.
      @param src the source <code>Raster</code> to filter
      @param dst the destination <code>WritableRaster</code> for the
                 filtered <code>src</code>
      @return the filtered <code>WritableRaster</code>.
      @throws IllegalArgumentException if the source and destinations
              rasters do not have the same number of bands, or the
              number of arrays in the <code>LookupTable</code> does
              not meet the restrictions described in the class comments.</div>
<a id="L253" name="L253"></a> 253     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> <a href="../R/14321.html" title="Multiple referred from 472 places.">filter</a> (<a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> src, <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> dst) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254         <strong class="reserved">int</strong> numBands  = src.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>();
<a id="L255" name="L255"></a> 255         <strong class="reserved">int</strong> dstLength = dst.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>();
<a id="L256" name="L256"></a> 256         <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>    = src.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L257" name="L257"></a> 257         <strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>     = src.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>();
<a id="L258" name="L258"></a> 258         <strong class="reserved">int</strong> srcPix[]  = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numBands];
<a id="L259" name="L259"></a> 259 
<a id="L260" name="L260"></a> 260         <em class="comment">// Create a new destination Raster, if needed</em>
<a id="L261" name="L261"></a> 261 
<a id="L262" name="L262"></a> 262         <strong class="reserved">if</strong> (dst == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L263" name="L263"></a> 263             dst = <a href="../D/13705.html" title="Multiple defined in 7 places.">createCompatibleDestRaster</a>(src);
<a id="L264" name="L264"></a> 264         <em class="brace">}</em>
<a id="L265" name="L265"></a> 265         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> != dst.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>() || <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> != dst.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>()) <em class="brace">{</em>
<a id="L266" name="L266"></a> 266             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L267" name="L267"></a> 267                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> ("Width or height of Rasters do not "+
<a id="L268" name="L268"></a> 268                                           "match");
<a id="L269" name="L269"></a> 269         <em class="brace">}</em>
<a id="L270" name="L270"></a> 270         dstLength = dst.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>();
<a id="L271" name="L271"></a> 271 
<a id="L272" name="L272"></a> 272         <strong class="reserved">if</strong> (numBands != dstLength) <em class="brace">{</em>
<a id="L273" name="L273"></a> 273             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L274" name="L274"></a> 274                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> ("Number of channels in the src ("
<a id="L275" name="L275"></a> 275                                           + numBands +
<a id="L276" name="L276"></a> 276                                           ") does not match number of channels"
<a id="L277" name="L277"></a> 277                                           + " in the destination ("
<a id="L278" name="L278"></a> 278                                           + dstLength + ")");
<a id="L279" name="L279"></a> 279         <em class="brace">}</em>
<a id="L280" name="L280"></a> 280         <strong class="reserved">int</strong> numComponents = ltable.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>();
<a id="L281" name="L281"></a> 281         <strong class="reserved">if</strong> (numComponents != 1 &amp;&amp; numComponents != src.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>()) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Number of arrays in the "+
<a id="L283" name="L283"></a> 283                                                " lookup table ("+
<a id="L284" name="L284"></a> 284                                                numComponents+
<a id="L285" name="L285"></a> 285                                                " is not compatible with the "+
<a id="L286" name="L286"></a> 286                                                " src Raster: "+src);
<a id="L287" name="L287"></a> 287         <em class="brace">}</em>
<a id="L288" name="L288"></a> 288 
<a id="L289" name="L289"></a> 289 
<a id="L290" name="L290"></a> 290         <strong class="reserved">if</strong> (ImagingLib.<a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a>(<strong class="reserved">this</strong>, src, dst) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L291" name="L291"></a> 291             <strong class="reserved">return</strong> dst;
<a id="L292" name="L292"></a> 292         <em class="brace">}</em>
<a id="L293" name="L293"></a> 293 
<a id="L294" name="L294"></a> 294         <em class="comment">// Optimize for cases we know about</em>
<a id="L295" name="L295"></a> 295         <strong class="reserved">if</strong> (ltable <strong class="reserved">instanceof</strong> <a href="../S/2274.html#L43" title="Defined at 43 in src/java/awt/image/ByteLookupTable.java.">ByteLookupTable</a>) <em class="brace">{</em>
<a id="L296" name="L296"></a> 296             <a href="../S/2233.html#L475" title="Defined at 475 in src/java/awt/image/LookupOp.java.">byteFilter</a> ((<a href="../S/2274.html#L43" title="Defined at 43 in src/java/awt/image/ByteLookupTable.java.">ByteLookupTable</a>) ltable, src, dst,
<a id="L297" name="L297"></a> 297                         <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>, numBands);
<a id="L298" name="L298"></a> 298         <em class="brace">}</em>
<a id="L299" name="L299"></a> 299         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ltable <strong class="reserved">instanceof</strong> <a href="../S/2240.html#L43" title="Defined at 43 in src/java/awt/image/ShortLookupTable.java.">ShortLookupTable</a>) <em class="brace">{</em>
<a id="L300" name="L300"></a> 300             <a href="../S/2233.html#L522" title="Defined at 522 in src/java/awt/image/LookupOp.java.">shortFilter</a> ((<a href="../S/2240.html#L43" title="Defined at 43 in src/java/awt/image/ShortLookupTable.java.">ShortLookupTable</a>) ltable, src, dst, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>,
<a id="L301" name="L301"></a> 301                          <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>, numBands);
<a id="L302" name="L302"></a> 302         <em class="brace">}</em>
<a id="L303" name="L303"></a> 303         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L304" name="L304"></a> 304             <em class="comment">// Not one we recognize so do it slowly</em>
<a id="L305" name="L305"></a> 305             <strong class="reserved">int</strong> sminX = src.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L306" name="L306"></a> 306             <strong class="reserved">int</strong> sY = src.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L307" name="L307"></a> 307             <strong class="reserved">int</strong> dminX = dst.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L308" name="L308"></a> 308             <strong class="reserved">int</strong> dY = dst.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L309" name="L309"></a> 309             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y=0; y &lt; <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>; y++, sY++, dY++) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310                 <strong class="reserved">int</strong> sX = sminX;
<a id="L311" name="L311"></a> 311                 <strong class="reserved">int</strong> dX = dminX;
<a id="L312" name="L312"></a> 312                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>=0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, sX++, dX++) <em class="brace">{</em>
<a id="L313" name="L313"></a> 313                     <em class="comment">// Find data for all bands at this x,y position</em>
<a id="L314" name="L314"></a> 314                     src.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(sX, sY, srcPix);
<a id="L315" name="L315"></a> 315 
<a id="L316" name="L316"></a> 316                     <em class="comment">// Lookup the data for all bands at this x,y position</em>
<a id="L317" name="L317"></a> 317                     ltable.<a href="../D/27145.html" title="Multiple defined in 5 places.">lookupPixel</a>(srcPix, srcPix);
<a id="L318" name="L318"></a> 318 
<a id="L319" name="L319"></a> 319                     <em class="comment">// Put it back for all bands</em>
<a id="L320" name="L320"></a> 320                     dst.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(dX, dY, srcPix);
<a id="L321" name="L321"></a> 321                 <em class="brace">}</em>
<a id="L322" name="L322"></a> 322             <em class="brace">}</em>
<a id="L323" name="L323"></a> 323         <em class="brace">}</em>
<a id="L324" name="L324"></a> 324 
<a id="L325" name="L325"></a> 325         <strong class="reserved">return</strong> dst;
<a id="L326" name="L326"></a> 326     <em class="brace">}</em>
<a id="L327" name="L327"></a> 327 
<div class="comment">
      Returns the bounding box of the filtered destination image.  Since
      this is not a geometric operation, the bounding box does not
      change.
      @param src the <code>BufferedImage</code> to be filtered
      @return the bounds of the filtered definition image.</div>
<a id="L335" name="L335"></a> 335     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a> <a href="../R/15323.html" title="Multiple referred from 370 places.">getBounds2D</a> (<a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> src) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336         <strong class="reserved">return</strong> <a href="../D/17336.html" title="Multiple defined in 36 places.">getBounds2D</a>(src.<a href="../D/21845.html" title="Multiple defined in 8 places.">getRaster</a>());
<a id="L337" name="L337"></a> 337     <em class="brace">}</em>
<a id="L338" name="L338"></a> 338 
<div class="comment">
      Returns the bounding box of the filtered destination Raster.  Since
      this is not a geometric operation, the bounding box does not
      change.
      @param src the <code>Raster</code> to be filtered
      @return the bounds of the filtered definition <code>Raster</code>.</div>
<a id="L346" name="L346"></a> 346     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a> <a href="../R/15323.html" title="Multiple referred from 370 places.">getBounds2D</a> (<a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> src) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347         <strong class="reserved">return</strong> src.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349     <em class="brace">}</em>
<a id="L350" name="L350"></a> 350 
<div class="comment">
      Creates a zeroed destination image with the correct size and number of
      bands.  If destCM is <code>null</code>, an appropriate
      <code>ColorModel</code> will be used.
      @param src       Source image for the filter operation.
      @param destCM    the destination's <code>ColorModel</code>, which
                       can be <code>null</code>.
      @return a filtered destination <code>BufferedImage</code>.</div>
<a id="L360" name="L360"></a> 360     <strong class="reserved">public</strong> <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> <a href="../R/12285.html" title="Multiple referred from 12 places.">createCompatibleDestImage</a> (<a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> src,
<a id="L361" name="L361"></a> 361                                                     <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> destCM) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362         <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a> image;
<a id="L363" name="L363"></a> 363         <strong class="reserved">int</strong> w = src.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>();
<a id="L364" name="L364"></a> 364         <strong class="reserved">int</strong> h = src.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L365" name="L365"></a> 365         <strong class="reserved">int</strong> transferType = <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE;
<a id="L366" name="L366"></a> 366         <strong class="reserved">if</strong> (destCM == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L367" name="L367"></a> 367             <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> cm = src.<a href="../D/17790.html" title="Multiple defined in 14 places.">getColorModel</a>();
<a id="L368" name="L368"></a> 368             <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> raster = src.<a href="../D/21845.html" title="Multiple defined in 8 places.">getRaster</a>();
<a id="L369" name="L369"></a> 369             <strong class="reserved">if</strong> (cm <strong class="reserved">instanceof</strong> <a href="../S/2267.html#L177" title="Defined at 177 in src/java/awt/image/ComponentColorModel.java.">ComponentColorModel</a>) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370                 <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a> db = raster.<a href="../S/2238.html#L1429" title="Defined at 1429 in src/java/awt/image/Raster.java.">getDataBuffer</a>();
<a id="L371" name="L371"></a> 371                 <strong class="reserved">boolean</strong> <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a> = cm.<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>();
<a id="L372" name="L372"></a> 372                 <strong class="reserved">boolean</strong> isPre    = cm.<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>();
<a id="L373" name="L373"></a> 373                 <strong class="reserved">int</strong> trans        = cm.<a href="../D/23273.html" title="Multiple defined in 9 places.">getTransparency</a>();
<a id="L374" name="L374"></a> 374                 <strong class="reserved">int</strong>[] nbits = <strong class="reserved">null</strong>;
<a id="L375" name="L375"></a> 375                 <strong class="reserved">if</strong> (ltable <strong class="reserved">instanceof</strong> <a href="../S/2274.html#L43" title="Defined at 43 in src/java/awt/image/ByteLookupTable.java.">ByteLookupTable</a>) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376                     <strong class="reserved">if</strong> (db.<a href="../D/18205.html" title="Multiple defined in 4 places.">getDataType</a>() == db.TYPE_USHORT) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377                         <em class="comment">// Dst raster should be of type byte</em>
<a id="L378" name="L378"></a> 378                         <strong class="reserved">if</strong> (<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>) <em class="brace">{</em>
<a id="L379" name="L379"></a> 379                             nbits = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[2];
<a id="L380" name="L380"></a> 380                             <strong class="reserved">if</strong> (trans == cm.BITMASK) <em class="brace">{</em>
<a id="L381" name="L381"></a> 381                                 nbits[1] = 1;
<a id="L382" name="L382"></a> 382                             <em class="brace">}</em>
<a id="L383" name="L383"></a> 383                             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L384" name="L384"></a> 384                                 nbits[1] = 8;
<a id="L385" name="L385"></a> 385                             <em class="brace">}</em>
<a id="L386" name="L386"></a> 386                         <em class="brace">}</em>
<a id="L387" name="L387"></a> 387                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L388" name="L388"></a> 388                             nbits = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L389" name="L389"></a> 389                         <em class="brace">}</em>
<a id="L390" name="L390"></a> 390                         nbits[0] = 8;
<a id="L391" name="L391"></a> 391                     <em class="brace">}</em>
<a id="L392" name="L392"></a> 392                     <em class="comment">// For byte, no need to change the cm</em>
<a id="L393" name="L393"></a> 393                 <em class="brace">}</em>
<a id="L394" name="L394"></a> 394                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ltable <strong class="reserved">instanceof</strong> <a href="../S/2240.html#L43" title="Defined at 43 in src/java/awt/image/ShortLookupTable.java.">ShortLookupTable</a>) <em class="brace">{</em>
<a id="L395" name="L395"></a> 395                     transferType = <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT;
<a id="L396" name="L396"></a> 396                     <strong class="reserved">if</strong> (db.<a href="../D/18205.html" title="Multiple defined in 4 places.">getDataType</a>() == db.TYPE_BYTE) <em class="brace">{</em>
<a id="L397" name="L397"></a> 397                         <strong class="reserved">if</strong> (<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>) <em class="brace">{</em>
<a id="L398" name="L398"></a> 398                             nbits = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[2];
<a id="L399" name="L399"></a> 399                             <strong class="reserved">if</strong> (trans == cm.BITMASK) <em class="brace">{</em>
<a id="L400" name="L400"></a> 400                                 nbits[1] = 1;
<a id="L401" name="L401"></a> 401                             <em class="brace">}</em>
<a id="L402" name="L402"></a> 402                             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L403" name="L403"></a> 403                                 nbits[1] = 16;
<a id="L404" name="L404"></a> 404                             <em class="brace">}</em>
<a id="L405" name="L405"></a> 405                         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L407" name="L407"></a> 407                             nbits = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L408" name="L408"></a> 408                         <em class="brace">}</em>
<a id="L409" name="L409"></a> 409                         nbits[0] = 16;
<a id="L410" name="L410"></a> 410                     <em class="brace">}</em>
<a id="L411" name="L411"></a> 411                 <em class="brace">}</em>
<a id="L412" name="L412"></a> 412                 <strong class="reserved">if</strong> (nbits != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                     cm = <strong class="reserved">new</strong> <a href="../S/2267.html#L177" title="Defined at 177 in src/java/awt/image/ComponentColorModel.java.">ComponentColorModel</a>(cm.<a href="../D/17792.html" title="Multiple defined in 3 places.">getColorSpace</a>(),
<a id="L414" name="L414"></a> 414                                                  nbits, <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>, isPre,
<a id="L415" name="L415"></a> 415                                                  trans, transferType);
<a id="L416" name="L416"></a> 416                 <em class="brace">}</em>
<a id="L417" name="L417"></a> 417             <em class="brace">}</em>
<a id="L418" name="L418"></a> 418             image = <strong class="reserved">new</strong> <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a>(cm,
<a id="L419" name="L419"></a> 419                                       cm.<a href="../D/13710.html" title="Multiple defined in 8 places.">createCompatibleWritableRaster</a>(w, h),
<a id="L420" name="L420"></a> 420                                       cm.<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>(),
<a id="L421" name="L421"></a> 421                                       <strong class="reserved">null</strong>);
<a id="L422" name="L422"></a> 422         <em class="brace">}</em>
<a id="L423" name="L423"></a> 423         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L424" name="L424"></a> 424             image = <strong class="reserved">new</strong> <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a>(destCM,
<a id="L425" name="L425"></a> 425                                       destCM.<a href="../D/13710.html" title="Multiple defined in 8 places.">createCompatibleWritableRaster</a>(w,
<a id="L426" name="L426"></a> 426                                                                             h),
<a id="L427" name="L427"></a> 427                                       destCM.<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>(),
<a id="L428" name="L428"></a> 428                                       <strong class="reserved">null</strong>);
<a id="L429" name="L429"></a> 429         <em class="brace">}</em>
<a id="L430" name="L430"></a> 430 
<a id="L431" name="L431"></a> 431         <strong class="reserved">return</strong> image;
<a id="L432" name="L432"></a> 432     <em class="brace">}</em>
<a id="L433" name="L433"></a> 433 
<div class="comment">
      Creates a zeroed-destination <code>Raster</code> with the
      correct size and number of bands, given this source.
      @param src the <code>Raster</code> to be transformed
      @return the zeroed-destination <code>Raster</code>.</div>
<a id="L440" name="L440"></a> 440     <strong class="reserved">public</strong> <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> <a href="../R/12286.html" title="Multiple referred from 7 places.">createCompatibleDestRaster</a> (<a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> src) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441         <strong class="reserved">return</strong> src.<a href="../D/13710.html" title="Multiple defined in 8 places.">createCompatibleWritableRaster</a>();
<a id="L442" name="L442"></a> 442     <em class="brace">}</em>
<a id="L443" name="L443"></a> 443 
<div class="comment">
      Returns the location of the destination point given a
      point in the source.  If <code>dstPt</code> is not
      <code>null</code>, it will be used to hold the return value.
      Since this is not a geometric operation, the <code>srcPt</code>
      will equal the <code>dstPt</code>.
      @param srcPt a <code>Point2D</code> that represents a point
             in the source image
      @param dstPt a <code>Point2D</code>that represents the location
             in the destination
      @return the <code>Point2D</code> in the destination that
              corresponds to the specified point in the source.</div>
<a id="L457" name="L457"></a> 457     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2319.html#L42" title="Defined at 42 in src/java/awt/geom/Point2D.java.">Point2D</a> getPoint2D (<a href="../S/2319.html#L42" title="Defined at 42 in src/java/awt/geom/Point2D.java.">Point2D</a> srcPt, <a href="../S/2319.html#L42" title="Defined at 42 in src/java/awt/geom/Point2D.java.">Point2D</a> dstPt) <em class="brace">{</em>
<a id="L458" name="L458"></a> 458         <strong class="reserved">if</strong> (dstPt == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L459" name="L459"></a> 459             dstPt = <strong class="reserved">new</strong> <a href="../S/2319.html#L42" title="Defined at 42 in src/java/awt/geom/Point2D.java.">Point2D</a>.<a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>();
<a id="L460" name="L460"></a> 460         <em class="brace">}</em>
<a id="L461" name="L461"></a> 461         dstPt.<a href="../D/33134.html" title="Multiple defined in 29 places.">setLocation</a>(srcPt.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>(), srcPt.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>());
<a id="L462" name="L462"></a> 462 
<a id="L463" name="L463"></a> 463         <strong class="reserved">return</strong> dstPt;
<a id="L464" name="L464"></a> 464     <em class="brace">}</em>
<a id="L465" name="L465"></a> 465 
<div class="comment">
      Returns the rendering hints for this op.
      @return the <code>RenderingHints</code> object associated
              with this op.</div>
<a id="L471" name="L471"></a> 471     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2116.html#L82" title="Defined at 82 in src/java/awt/RenderingHints.java.">RenderingHints</a> getRenderingHints() <em class="brace">{</em>
<a id="L472" name="L472"></a> 472         <strong class="reserved">return</strong> hints;
<a id="L473" name="L473"></a> 473     <em class="brace">}</em>
<a id="L474" name="L474"></a> 474 
<a id="L475" name="L475"></a> 475     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/2233.html#L296" title="Referred from 296 in src/java/awt/image/LookupOp.java.">byteFilter</a>(<a href="../S/2274.html#L43" title="Defined at 43 in src/java/awt/image/ByteLookupTable.java.">ByteLookupTable</a> <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>, <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> src,
<a id="L476" name="L476"></a> 476                                   <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> dst,
<a id="L477" name="L477"></a> 477                                   <strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>, <strong class="reserved">int</strong> numBands) <em class="brace">{</em>
<a id="L478" name="L478"></a> 478         <strong class="reserved">int</strong>[] srcPix = <strong class="reserved">null</strong>;
<a id="L479" name="L479"></a> 479 
<a id="L480" name="L480"></a> 480         <em class="comment">// Find the ref to the table and the offset</em>
<a id="L481" name="L481"></a> 481         <strong class="reserved">byte</strong>[][] table = <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>.<a href="../D/22972.html" title="Multiple defined in 9 places.">getTable</a>();
<a id="L482" name="L482"></a> 482         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L483" name="L483"></a> 483         <strong class="reserved">int</strong> tidx;
<a id="L484" name="L484"></a> 484         <strong class="reserved">int</strong> <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>=1;
<a id="L485" name="L485"></a> 485 
<a id="L486" name="L486"></a> 486         <em class="comment">// Check if it is one lookup applied to all bands</em>
<a id="L487" name="L487"></a> 487         <strong class="reserved">if</strong> (table.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 1) <em class="brace">{</em>
<a id="L488" name="L488"></a> 488             <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>=0;
<a id="L489" name="L489"></a> 489         <em class="brace">}</em>
<a id="L490" name="L490"></a> 490 
<a id="L491" name="L491"></a> 491         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L492" name="L492"></a> 492         <strong class="reserved">int</strong> y;
<a id="L493" name="L493"></a> 493         <strong class="reserved">int</strong> band;
<a id="L494" name="L494"></a> 494         <strong class="reserved">int</strong> len = table[0].<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L495" name="L495"></a> 495 
<a id="L496" name="L496"></a> 496         <em class="comment">// Loop through the data</em>
<a id="L497" name="L497"></a> 497         <strong class="reserved">for</strong> ( y=0; y &lt; <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>; y++) <em class="brace">{</em>
<a id="L498" name="L498"></a> 498             tidx = 0;
<a id="L499" name="L499"></a> 499             <strong class="reserved">for</strong> ( band=0; band &lt; numBands; band++, tidx+=<a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500                 <em class="comment">// Find data for this band, scanline</em>
<a id="L501" name="L501"></a> 501                 srcPix = src.<a href="../D/22230.html" title="Multiple defined in 9 places.">getSamples</a>(0, y, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, 1, band, srcPix);
<a id="L502" name="L502"></a> 502 
<a id="L503" name="L503"></a> 503                 <strong class="reserved">for</strong> ( <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>=0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++) <em class="brace">{</em>
<a id="L504" name="L504"></a> 504                     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = srcPix[<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>]-<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L505" name="L505"></a> 505                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; 0 || <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; len) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L507" name="L507"></a> 507                             <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("index ("+<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+
<a id="L508" name="L508"></a> 508                                                      "(out of range: "+
<a id="L509" name="L509"></a> 509                                                      " srcPix["+<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>+
<a id="L510" name="L510"></a> 510                                                      "]="+ srcPix[<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>]+
<a id="L511" name="L511"></a> 511                                                      " offset="+ <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L512" name="L512"></a> 512                     <em class="brace">}</em>
<a id="L513" name="L513"></a> 513                     <em class="comment">// Do the lookup</em>
<a id="L514" name="L514"></a> 514                     srcPix[<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>] = table[tidx][<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>];
<a id="L515" name="L515"></a> 515                 <em class="brace">}</em>
<a id="L516" name="L516"></a> 516                 <em class="comment">// Put it back</em>
<a id="L517" name="L517"></a> 517                 dst.<a href="../D/33798.html" title="Multiple defined in 9 places.">setSamples</a>(0, y, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, 1, band, srcPix);
<a id="L518" name="L518"></a> 518             <em class="brace">}</em>
<a id="L519" name="L519"></a> 519         <em class="brace">}</em>
<a id="L520" name="L520"></a> 520     <em class="brace">}</em>
<a id="L521" name="L521"></a> 521 
<a id="L522" name="L522"></a> 522     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/2233.html#L300" title="Referred from 300 in src/java/awt/image/LookupOp.java.">shortFilter</a>(<a href="../S/2240.html#L43" title="Defined at 43 in src/java/awt/image/ShortLookupTable.java.">ShortLookupTable</a> <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>, <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> src,
<a id="L523" name="L523"></a> 523                                    <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> dst,
<a id="L524" name="L524"></a> 524                                    <strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>, <strong class="reserved">int</strong> numBands) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525         <strong class="reserved">int</strong> band;
<a id="L526" name="L526"></a> 526         <strong class="reserved">int</strong>[] srcPix = <strong class="reserved">null</strong>;
<a id="L527" name="L527"></a> 527 
<a id="L528" name="L528"></a> 528         <em class="comment">// Find the ref to the table and the offset</em>
<a id="L529" name="L529"></a> 529         <strong class="reserved">short</strong>[][] table = <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>.<a href="../D/22972.html" title="Multiple defined in 9 places.">getTable</a>();
<a id="L530" name="L530"></a> 530         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L531" name="L531"></a> 531         <strong class="reserved">int</strong> tidx;
<a id="L532" name="L532"></a> 532         <strong class="reserved">int</strong> <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>=1;
<a id="L533" name="L533"></a> 533 
<a id="L534" name="L534"></a> 534         <em class="comment">// Check if it is one lookup applied to all bands</em>
<a id="L535" name="L535"></a> 535         <strong class="reserved">if</strong> (table.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 1) <em class="brace">{</em>
<a id="L536" name="L536"></a> 536             <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>=0;
<a id="L537" name="L537"></a> 537         <em class="brace">}</em>
<a id="L538" name="L538"></a> 538 
<a id="L539" name="L539"></a> 539         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0;
<a id="L540" name="L540"></a> 540         <strong class="reserved">int</strong> y = 0;
<a id="L541" name="L541"></a> 541         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L542" name="L542"></a> 542         <strong class="reserved">int</strong> maxShort = (1&lt;&lt;16)-1;
<a id="L543" name="L543"></a> 543         <em class="comment">// Loop through the data</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">for</strong> (y=0; y &lt; <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>; y++) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545             tidx = 0;
<a id="L546" name="L546"></a> 546             <strong class="reserved">for</strong> ( band=0; band &lt; numBands; band++, tidx+=<a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>) <em class="brace">{</em>
<a id="L547" name="L547"></a> 547                 <em class="comment">// Find data for this band, scanline</em>
<a id="L548" name="L548"></a> 548                 srcPix = src.<a href="../D/22230.html" title="Multiple defined in 9 places.">getSamples</a>(0, y, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, 1, band, srcPix);
<a id="L549" name="L549"></a> 549 
<a id="L550" name="L550"></a> 550                 <strong class="reserved">for</strong> ( <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>=0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = srcPix[<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>]-<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L552" name="L552"></a> 552                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; 0 || <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; maxShort) <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L554" name="L554"></a> 554                             <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("index out of range "+
<a id="L555" name="L555"></a> 555                                                      <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+" x is "+<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>+
<a id="L556" name="L556"></a> 556                                                      "srcPix[x]="+srcPix[<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>]
<a id="L557" name="L557"></a> 557                                                      +" offset="+ <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L558" name="L558"></a> 558                     <em class="brace">}</em>
<a id="L559" name="L559"></a> 559                     <em class="comment">// Do the lookup</em>
<a id="L560" name="L560"></a> 560                     srcPix[<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>] = table[tidx][<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>];
<a id="L561" name="L561"></a> 561                 <em class="brace">}</em>
<a id="L562" name="L562"></a> 562                 <em class="comment">// Put it back</em>
<a id="L563" name="L563"></a> 563                 dst.<a href="../D/33798.html" title="Multiple defined in 9 places.">setSamples</a>(0, y, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, 1, band, srcPix);
<a id="L564" name="L564"></a> 564             <em class="brace">}</em>
<a id="L565" name="L565"></a> 565         <em class="brace">}</em>
<a id="L566" name="L566"></a> 566     <em class="brace">}</em>
<a id="L567" name="L567"></a> 567 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L101">[^]</a><a href="#L522">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
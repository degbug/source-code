<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/math/BigDecimal.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L606">[^]</a><a href="#L5240">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L606" title="Defined at 606.">adjustScale</a></li>
<li><a href="#L617" title="Defined at 617.">parseExp</a></li>
<li><a href="#L1196" title="Defined at 1196.">valueOf</a></li>
<li><a href="#L1217" title="Defined at 1217.">valueOf</a></li>
<li><a href="#L1225" title="Defined at 1225.">valueOf</a></li>
<li><a href="#L1235" title="Defined at 1235.">valueOf</a></li>
<li><a href="#L1245" title="Defined at 1245.">zeroValueOf</a></li>
<li><a href="#L1269" title="Defined at 1269.">valueOf</a></li>
<li><a href="#L1286" title="Defined at 1286.">add</a></li>
<li><a href="#L1316" title="Defined at 1316.">add</a></li>
<li><a href="#L1383" title="Defined at 1383.">preAlign</a></li>
<li><a href="#L1433" title="Defined at 1433.">subtract</a></li>
<li><a href="#L1466" title="Defined at 1466.">subtract</a></li>
<li><a href="#L1481" title="Defined at 1481.">multiply</a></li>
<li><a href="#L1509" title="Defined at 1509.">multiply</a></li>
<li><a href="#L1556" title="Defined at 1556.">divide</a></li>
<li><a href="#L1590" title="Defined at 1590.">divide</a></li>
<li><a href="#L1621" title="Defined at 1621.">divide</a></li>
<li><a href="#L1640" title="Defined at 1640.">divide</a></li>
<li><a href="#L1658" title="Defined at 1658.">divide</a></li>
<li><a href="#L1720" title="Defined at 1720.">divide</a></li>
<li><a href="#L1774" title="Defined at 1774.">divideToIntegralValue</a></li>
<li><a href="#L1827" title="Defined at 1827.">divideToIntegralValue</a></li>
<li><a href="#L1889" title="Defined at 1889.">remainder</a></li>
<li><a href="#L1919" title="Defined at 1919.">remainder</a></li>
<li><a href="#L1944" title="Defined at 1944.">divideAndRemainder</a></li>
<li><a href="#L1979" title="Defined at 1979.">divideAndRemainder</a></li>
<li><a href="#L2008" title="Defined at 2008.">pow</a></li>
<li><a href="#L2068" title="Defined at 2068.">pow</a></li>
<li><a href="#L2114" title="Defined at 2114.">abs</a></li>
<li><a href="#L2129" title="Defined at 2129.">abs</a></li>
<li><a href="#L2139" title="Defined at 2139.">negate</a></li>
<li><a href="#L2157" title="Defined at 2157.">negate</a></li>
<li><a href="#L2173" title="Defined at 2173.">plus</a></li>
<li><a href="#L2192" title="Defined at 2192.">plus</a></li>
<li><a href="#L2204" title="Defined at 2204.">signum</a></li>
<li><a href="#L2220" title="Defined at 2220.">scale</a></li>
<li><a href="#L2233" title="Defined at 2233.">precision</a></li>
<li><a href="#L2255" title="Defined at 2255.">unscaledValue</a></li>
<li><a href="#L2352" title="Defined at 2352.">round</a></li>
<li><a href="#L2385" title="Defined at 2385.">setScale</a></li>
<li><a href="#L2429" title="Defined at 2429.">setScale</a></li>
<li><a href="#L2511" title="Defined at 2511.">setScale</a></li>
<li><a href="#L2532" title="Defined at 2532.">movePointLeft</a></li>
<li><a href="#L2554" title="Defined at 2554.">movePointRight</a></li>
<li><a href="#L2574" title="Defined at 2574.">scaleByPowerOfTen</a></li>
<li><a href="#L2594" title="Defined at 2594.">stripTrailingZeros</a></li>
<li><a href="#L2623" title="Defined at 2623.">compareTo</a></li>
<li><a href="#L2644" title="Defined at 2644.">compareMagnitude</a></li>
<li><a href="#L2708" title="Defined at 2708.">equals</a></li>
<li><a href="#L2739" title="Defined at 2739.">min</a></li>
<li><a href="#L2753" title="Defined at 2753.">max</a></li>
<li><a href="#L2769" title="Defined at 2769.">hashCode</a></li>
<li><a href="#L2881" title="Defined at 2881.">toString</a></li>
<li><a href="#L2912" title="Defined at 2912.">toEngineeringString</a></li>
<li><a href="#L2949" title="Defined at 2949.">toPlainString</a></li>
<li><a href="#L2985" title="Defined at 2985.">getValueString</a></li>
<li><a href="#L3023" title="Defined at 3023.">toBigInteger</a></li>
<li><a href="#L3038" title="Defined at 3038.">toBigIntegerExact</a></li>
<li><a href="#L3059" title="Defined at 3059.">longValue</a></li>
<li><a href="#L3077" title="Defined at 3077.">longValueExact</a></li>
<li><a href="#L3103" title="Defined at 3103.">check</a></li>
<li><a href="#L3127" title="Defined at 3127.">intValue</a></li>
<li><a href="#L3145" title="Defined at 3145.">intValueExact</a></li>
<li><a href="#L3165" title="Defined at 3165.">shortValueExact</a></li>
<li><a href="#L3185" title="Defined at 3185.">byteValueExact</a></li>
<li><a href="#L3209" title="Defined at 3209.">floatValue</a></li>
<li><a href="#L3252" title="Defined at 3252.">doubleValue</a></li>
<li><a href="#L3313" title="Defined at 3313.">ulp</a></li>
<li><a href="#L3335" title="Defined at 3335.">getStringBuilder</a></li>
<li><a href="#L3340" title="Defined at 3340.">getCompactCharArray</a></li>
<li><a href="#L3353" title="Defined at 3353.">putIntCompact</a></li>
<li><a href="#L3425" title="Defined at 3425.">layoutChars</a></li>
<li><a href="#L3531" title="Defined at 3531.">bigTenToThe</a></li>
<li><a href="#L3554" title="Defined at 3554.">expandBigIntegerTenPowers</a></li>
<li><a href="#L3652" title="Defined at 3652.">longMultiplyPowerTen</a></li>
<li><a href="#L3671" title="Defined at 3671.">bigMultiplyPowerTen</a></li>
<li><a href="#L3685" title="Defined at 3685.">inflated</a></li>
<li><a href="#L3705" title="Defined at 3705.">matchScale</a></li>
<li><a href="#L3730" title="Defined at 3730.">setIntCompactVolatile</a></li>
<li><a href="#L3734" title="Defined at 3734.">setIntValVolatile</a></li>
<li><a href="#L3745" title="Defined at 3745.">readObject</a></li>
<li><a href="#L3763" title="Defined at 3763.">writeObject</a></li>
<li><a href="#L3779" title="Defined at 3779.">longDigitLength</a></li>
<li><a href="#L3811" title="Defined at 3811.">bigDigitLength</a></li>
<li><a href="#L3834" title="Defined at 3834.">checkScale</a></li>
<li><a href="#L3851" title="Defined at 3851.">compactValFor</a></li>
<li><a href="#L3866" title="Defined at 3866.">longCompareMagnitude</a></li>
<li><a href="#L3874" title="Defined at 3874.">saturateLong</a></li>
<li><a href="#L3882" title="Defined at 3882.">print</a></li>
<li><a href="#L3910" title="Defined at 3910.">audit</a></li>
<li><a href="#L3940" title="Defined at 3940.">checkScaleNonZero</a></li>
<li><a href="#L3948" title="Defined at 3948.">checkScale</a></li>
<li><a href="#L3958" title="Defined at 3958.">checkScale</a></li>
<li><a href="#L3981" title="Defined at 3981.">doRound</a></li>
<li><a href="#L4026" title="Defined at 4026.">doRound</a></li>
<li><a href="#L4046" title="Defined at 4046.">doRound</a></li>
<li><a href="#L4085" title="Defined at 4085.">divideAndRoundByTenPow</a></li>
<li><a href="#L4102" title="Defined at 4102.">divideAndRound</a></li>
<li><a href="#L4126" title="Defined at 4126.">divideAndRound</a></li>
<li><a href="#L4144" title="Defined at 4144.">commonNeedIncrement</a></li>
<li><a href="#L4193" title="Defined at 4193.">needIncrement</a></li>
<li><a href="#L4211" title="Defined at 4211.">divideAndRound</a></li>
<li><a href="#L4239" title="Defined at 4239.">divideAndRound</a></li>
<li><a href="#L4273" title="Defined at 4273.">needIncrement</a></li>
<li><a href="#L4291" title="Defined at 4291.">divideAndRound</a></li>
<li><a href="#L4318" title="Defined at 4318.">divideAndRound</a></li>
<li><a href="#L4351" title="Defined at 4351.">needIncrement</a></li>
<li><a href="#L4367" title="Defined at 4367.">createAndStripZerosToMatchScale</a></li>
<li><a href="#L4391" title="Defined at 4391.">createAndStripZerosToMatchScale</a></li>
<li><a href="#L4404" title="Defined at 4404.">stripZerosToMatchScale</a></li>
<li><a href="#L4416" title="Defined at 4416.">add</a></li>
<li><a href="#L4426" title="Defined at 4426.">add</a></li>
<li><a href="#L4433" title="Defined at 4433.">add</a></li>
<li><a href="#L4462" title="Defined at 4462.">add</a></li>
<li><a href="#L4486" title="Defined at 4486.">add</a></li>
<li><a href="#L4505" title="Defined at 4505.">bigMultiplyPowerTen</a></li>
<li><a href="#L4511" title="Defined at 4511.">bigMultiplyPowerTen</a></li>
<li><a href="#L4527" title="Defined at 4527.">divideSmallFastPath</a></li>
<li><a href="#L4610" title="Defined at 4610.">divide</a></li>
<li><a href="#L4658" title="Defined at 4658.">divide</a></li>
<li><a href="#L4699" title="Defined at 4699.">divide</a></li>
<li><a href="#L4730" title="Defined at 4730.">divide</a></li>
<li><a href="#L4761" title="Defined at 4761.">multiplyDivideAndRound</a></li>
<li><a href="#L4799" title="Defined at 4799.">divideAndRound128</a></li>
<li><a href="#L4905" title="Defined at 4905.">roundedTenPower</a></li>
<li><a href="#L4918" title="Defined at 4918.">scaledTenPow</a></li>
<li><a href="#L4939" title="Defined at 4939.">divRemNegativeLong</a></li>
<li><a href="#L4961" title="Defined at 4961.">make64</a></li>
<li><a href="#L4965" title="Defined at 4965.">mulsub</a></li>
<li><a href="#L4970" title="Defined at 4970.">unsignedLongCompare</a></li>
<li><a href="#L4974" title="Defined at 4974.">unsignedLongCompareEq</a></li>
<li><a href="#L4980" title="Defined at 4980.">compareMagnitudeNormalized</a></li>
<li><a href="#L4997" title="Defined at 4997.">compareMagnitudeNormalized</a></li>
<li><a href="#L5011" title="Defined at 5011.">compareMagnitudeNormalized</a></li>
<li><a href="#L5020" title="Defined at 5020.">multiply</a></li>
<li><a href="#L5030" title="Defined at 5030.">multiply</a></li>
<li><a href="#L5038" title="Defined at 5038.">multiply</a></li>
<li><a href="#L5045" title="Defined at 5045.">multiply</a></li>
<li><a href="#L5052" title="Defined at 5052.">multiplyAndRound</a></li>
<li><a href="#L5096" title="Defined at 5096.">multiplyAndRound</a></li>
<li><a href="#L5103" title="Defined at 5103.">multiplyAndRound</a></li>
<li><a href="#L5111" title="Defined at 5111.">doRound128</a></li>
<li><a href="#L5151" title="Defined at 5151.">precision</a></li>
<li><a href="#L5169" title="Defined at 5169.">longLongCompareMagnitude</a></li>
<li><a href="#L5176" title="Defined at 5176.">divide</a></li>
<li><a href="#L5206" title="Defined at 5206.">divide</a></li>
<li><a href="#L5226" title="Defined at 5226.">divide</a></li>
<li><a href="#L5240" title="Defined at 5240.">divide</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1996, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  Portions Copyright IBM Corporation, 2001. All Rights Reserved.</div>
<a id="L29" name="L29"></a>  29 
<a id="L30" name="L30"></a>  30 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.math;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> static java.math.BigInteger.LONG_MASK;
<a id="L34" name="L34"></a>  34 
<div class="comment">
  Immutable, arbitrary-precision signed decimal numbers.  A
  <code>BigDecimal</code> consists of an arbitrary precision integer
  <i>unscaled value</i> and a 32-bit integer <i>scale</i>.  If zero
  or positive, the scale is the number of digits to the right of the
  decimal point.  If negative, the unscaled value of the number is
  multiplied by ten to the power of the negation of the scale.  The
  value of the number represented by the <code>BigDecimal</code> is
  therefore <tt>(unscaledValue × 10<sup>-scale</sup>)</tt>.
  <p>The <code>BigDecimal</code> class provides operations for
  arithmetic, scale manipulation, rounding, comparison, hashing, and
  format conversion.  The {@link #toString} method provides a
  canonical representation of a <code>BigDecimal</code>.
  </p><p>The <code>BigDecimal</code> class gives its user complete control
  over rounding behavior.  If no rounding mode is specified and the
  exact result cannot be represented, an exception is thrown;
  otherwise, calculations can be carried out to a chosen precision
  and rounding mode by supplying an appropriate {@link MathContext}
  object to the operation.  In either case, eight <em>rounding
  modes</em> are provided for the control of rounding.  Using the
  integer fields in this class (such as {@link #ROUND_HALF_UP}) to
  represent rounding mode is largely obsolete; the enumeration values
  of the <code>RoundingMode</code> <code>enum</code>, (such as {@link
  RoundingMode#HALF_UP}) should be used instead.
  </p><p>When a <code>MathContext</code> object is supplied with a precision
  setting of 0 (for example, {@link MathContext#UNLIMITED}),
  arithmetic operations are exact, as are the arithmetic methods
  which take no <code>MathContext</code> object.  (This is the only
  behavior that was supported in releases prior to 5.)  As a
  corollary of computing the exact result, the rounding mode setting
  of a <code>MathContext</code> object with a precision setting of 0 is
  not used and thus irrelevant.  In the case of divide, the exact
  quotient could have an infinitely long decimal expansion; for
  example, 1 divided by 3.  If the quotient has a nonterminating
  decimal expansion and the operation is specified to return an exact
  result, an <code>ArithmeticException</code> is thrown.  Otherwise, the
  exact result of the division is returned, as done for other
  operations.
  </p><p>When the precision setting is not 0, the rules of
  <code>BigDecimal</code> arithmetic are broadly compatible with selected
  modes of operation of the arithmetic defined in ANSI X3.274-1996
  and ANSI X3.274-1996/AM 1-2000 (section 7.4).  Unlike those
  standards, <code>BigDecimal</code> includes many rounding modes, which
  were mandatory for division in <code>BigDecimal</code> releases prior
  to 5.  Any conflicts between these ANSI standards and the
  <code>BigDecimal</code> specification are resolved in favor of
  <code>BigDecimal</code>.
  </p><p>Since the same numerical value can have different
  representations (with different scales), the rules of arithmetic
  and rounding must specify both the numerical result and the scale
  used in the result's representation.
  </p><p>In general the rounding modes and precision setting determine
  how operations return results with a limited number of digits when
  the exact result has more digits (perhaps infinitely many in the
  case of division) than the number of digits returned.
  First, the
  total number of digits to return is specified by the
  <code>MathContext</code>'s <code>precision</code> setting; this determines
  the result's <i>precision</i>.  The digit count starts from the
  leftmost nonzero digit of the exact result.  The rounding mode
  determines how any discarded trailing digits affect the returned
  result.
  </p><p>For all arithmetic operators , the operation is carried out as
  though an exact intermediate result were first calculated and then
  rounded to the number of digits specified by the precision setting
  (if necessary), using the selected rounding mode.  If the exact
  result is not returned, some digit positions of the exact result
  are discarded.  When rounding increases the magnitude of the
  returned result, it is possible for a new digit position to be
  created by a carry propagating to a leading {@literal "9"} digit.
  For example, rounding the value 999.9 to three digits rounding up
  would be numerically equal to one thousand, represented as
  100×10<sup>1</sup>.  In such cases, the new {@literal "1"} is
  the leading digit position of the returned result.
  </p><p>Besides a logical exact result, each arithmetic operation has a
  preferred scale for representing a result.  The preferred
  scale for each operation is listed in the table below.
  </p><table border>
  <caption><b>Preferred Scales for Results of Arithmetic Operations
  </b></caption>
  <tbody><tr><th>Operation</th><th>Preferred Scale of Result</th></tr>
  <tr><td>Add</td><td>max(addend.scale(), augend.scale())</td>
  </tr><tr><td>Subtract</td><td>max(minuend.scale(), subtrahend.scale())</td>
  </tr><tr><td>Multiply</td><td>multiplier.scale() + multiplicand.scale()</td>
  </tr><tr><td>Divide</td><td>dividend.scale() - divisor.scale()</td>
  </tr></tbody></table>
  These scales are the ones used by the methods which return exact
  arithmetic results; except that an exact divide may have to use a
  larger scale since the exact result may have more digits.  For
  example, <code>1/32</code> is <code>0.03125</code>.
  <p>Before rounding, the scale of the logical exact intermediate
  result is the preferred scale for that operation.  If the exact
  numerical result cannot be represented in <code>precision</code>
  digits, rounding selects the set of digits to return and the scale
  of the result is reduced from the scale of the intermediate result
  to the least scale which can represent the <code>precision</code>
  digits actually returned.  If the exact result can be represented
  with at most <code>precision</code> digits, the representation
  of the result with the scale closest to the preferred scale is
  returned.  In particular, an exactly representable quotient may be
  represented in fewer than <code>precision</code> digits by removing
  trailing zeros and decreasing the scale.  For example, rounding to
  three digits using the {@linkplain RoundingMode#FLOOR floor}
  rounding mode, <br>
  <code>19/100 = 0.19   // integer=19,  scale=2</code> <br>
  but<br>
  <code>21/110 = 0.190  // integer=190, scale=3</code> <br>
  </p><p>Note that for add, subtract, and multiply, the reduction in
  scale will equal the number of digit positions of the exact result
  which are discarded. If the rounding causes a carry propagation to
  create a new high-order digit position, an additional digit of the
  result is discarded than when no new digit position is created.
  </p><p>Other methods may have slightly different rounding semantics.
  For example, the result of the <code>pow</code> method using the
  {@linkplain #pow(int, MathContext) specified algorithm} can
  occasionally differ from the rounded mathematical result by more
  than one unit in the last place, one <i>{@linkplain #ulp() ulp}</i>.
  </p><p>Two types of operations are provided for manipulating the scale
  of a <code>BigDecimal</code>: scaling/rounding operations and decimal
  point motion operations.  Scaling/rounding operations ({@link
  #setScale setScale} and {@link #round round}) return a
  <code>BigDecimal</code> whose value is approximately (or exactly) equal
  to that of the operand, but whose scale or precision is the
  specified value; that is, they increase or decrease the precision
  of the stored number with minimal effect on its value.  Decimal
  point motion operations ({@link #movePointLeft movePointLeft} and
  {@link #movePointRight movePointRight}) return a
  <code>BigDecimal</code> created from the operand by moving the decimal
  point a specified distance in the specified direction.
  </p><p>For the sake of brevity and clarity, pseudo-code is used
  throughout the descriptions of <code>BigDecimal</code> methods.  The
  pseudo-code expression <code>(i + j)</code> is shorthand for "a
  <code>BigDecimal</code> whose value is that of the <code>BigDecimal</code>
  <code>i</code> added to that of the <code>BigDecimal</code>
  <code>j</code>." The pseudo-code expression <code>(i == j)</code> is
  shorthand for "<code>true</code> if and only if the
  <code>BigDecimal</code> <code>i</code> represents the same value as the
  <code>BigDecimal</code> <code>j</code>." Other pseudo-code expressions
  are interpreted similarly.  Square brackets are used to represent
  the particular <code>BigInteger</code> and scale pair defining a
  <code>BigDecimal</code> value; for example [19, 2] is the
  <code>BigDecimal</code> numerically equal to 0.19 having a scale of 2.
  </p><p>Note: care should be exercised if <code>BigDecimal</code> objects
  are used as keys in a {@link java.util.SortedMap SortedMap} or
  elements in a {@link java.util.SortedSet SortedSet} since
  <code>BigDecimal</code>'s <i>natural ordering</i> is <i>inconsistent
  with equals</i>.  See {@link Comparable}, {@link
  java.util.SortedMap} or {@link java.util.SortedSet} for more
  information.
  </p><p>All methods and constructors for this class throw
  <code>NullPointerException</code> when passed a <code>null</code> object
  reference for any input parameter.
  @see     BigInteger
  @see     MathContext
  @see     RoundingMode
  @see     java.util.SortedMap
  @see     java.util.SortedSet
  @author  Josh Bloch
  @author  Mike Cowlishaw
  @author  Joseph D. Darcy
  @author  Sergey V. Kuksenko</p></div>
<a id="L220" name="L220"></a> 220 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <strong class="reserved">extends</strong> <a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a> <strong class="reserved">implements</strong> <a href="../S/1704.html#L96" title="Defined at 96 in src/java/lang/Comparable.java.">Comparable</a>&lt;<a href="../R/793.html" title="Multiple referred from 463 places.">BigDecimal</a>&gt; <em class="brace">{</em>
<div class="comment">
      The unscaled value of this BigDecimal, as returned by {@link
      #unscaledValue}.
      @serial
      @see #unscaledValue</div>
<a id="L228" name="L228"></a> 228     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal;
<a id="L229" name="L229"></a> 229 
<div class="comment">
      The scale of this BigDecimal, as returned by {@link #scale}.
      @serial
      @see #scale</div>
<a id="L236" name="L236"></a> 236     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;  <em class="comment">// Note: this may have any value, so</em>
<a id="L237" name="L237"></a> 237                               <em class="comment">// calculations must be done in longs</em>
<a id="L238" name="L238"></a> 238 
<div class="comment">
      The number of decimal digits in this BigDecimal, or 0 if the
      number of digits are not known (lookaside information).  If
      nonzero, the value is guaranteed correct.  Use the precision()
      method to obtain and set the value if it might be 0.  This
      field is mutable until set nonzero.
      @since  1.5</div>
<a id="L248" name="L248"></a> 248     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">int</strong> <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L249" name="L249"></a> 249 
<div class="comment">
      Used to store the canonical string representation, if computed.</div>
<a id="L253" name="L253"></a> 253     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> stringCache;
<a id="L254" name="L254"></a> 254 
<div class="comment">
      Sentinel value for {@link #intCompact} indicating the
      significand information is only available from <code>intVal</code>.</div>
<a id="L259" name="L259"></a> 259     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> INFLATED = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE;
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> INFLATED_BIGINT = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(INFLATED);
<a id="L262" name="L262"></a> 262 
<div class="comment">
      If the absolute value of the significand of this BigDecimal is
      less than or equal to <code>Long.MAX_VALUE</code>, the value can be
      compactly stored in this field and used in computations.</div>
<a id="L268" name="L268"></a> 268     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">transient</strong> <strong class="reserved">long</strong> intCompact;
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270     <em class="comment">// All 18-digit base ten strings fit into a long; not all 19-digit</em>
<a id="L271" name="L271"></a> 271     <em class="comment">// strings will</em>
<a id="L272" name="L272"></a> 272     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_COMPACT_DIGITS = 18;
<a id="L273" name="L273"></a> 273 
<div class="comment">
     /* Appease the serialization gods */</div>
<a id="L275" name="L275"></a> 275     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 6108874887143696463L;
<a id="L276" name="L276"></a> 276 
<a id="L277" name="L277"></a> 277     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1738.html#L74" title="Defined at 74 in src/java/lang/ThreadLocal.java.">ThreadLocal</a>&lt;<a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a>&gt;
<a id="L278" name="L278"></a> 278         threadLocalStringBuilderHelper = <strong class="reserved">new</strong> <a href="../S/1738.html#L74" title="Defined at 74 in src/java/lang/ThreadLocal.java.">ThreadLocal</a>&lt;<a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a>&gt;() <em class="brace">{</em>
<a id="L279" name="L279"></a> 279         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L280" name="L280"></a> 280         <strong class="reserved">protected</strong> <a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a> <a href="../D/24645.html" title="Multiple defined in 4 places.">initialValue</a>() <em class="brace">{</em>
<a id="L281" name="L281"></a> 281             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a>();
<a id="L282" name="L282"></a> 282         <em class="brace">}</em>
<a id="L283" name="L283"></a> 283     <em class="brace">}</em>;
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285     <em class="comment">// Cache of common small BigDecimal values.</em>
<a id="L286" name="L286"></a> 286     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> zeroThroughTen[] = <em class="brace">{</em>
<a id="L287" name="L287"></a> 287         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO,       0,  0, 1),
<a id="L288" name="L288"></a> 288         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ONE,        1,  0, 1),
<a id="L289" name="L289"></a> 289         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(2), 2,  0, 1),
<a id="L290" name="L290"></a> 290         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(3), 3,  0, 1),
<a id="L291" name="L291"></a> 291         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(4), 4,  0, 1),
<a id="L292" name="L292"></a> 292         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(5), 5,  0, 1),
<a id="L293" name="L293"></a> 293         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(6), 6,  0, 1),
<a id="L294" name="L294"></a> 294         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(7), 7,  0, 1),
<a id="L295" name="L295"></a> 295         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(8), 8,  0, 1),
<a id="L296" name="L296"></a> 296         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(9), 9,  0, 1),
<a id="L297" name="L297"></a> 297         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.TEN,        10, 0, 2),
<a id="L298" name="L298"></a> 298     <em class="brace">}</em>;
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300     <em class="comment">// Cache of zero scaled by 0 - 15</em>
<a id="L301" name="L301"></a> 301     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] ZERO_SCALED_BY = <em class="brace">{</em>
<a id="L302" name="L302"></a> 302         zeroThroughTen[0],
<a id="L303" name="L303"></a> 303         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 1, 1),
<a id="L304" name="L304"></a> 304         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 2, 1),
<a id="L305" name="L305"></a> 305         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 3, 1),
<a id="L306" name="L306"></a> 306         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 4, 1),
<a id="L307" name="L307"></a> 307         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 5, 1),
<a id="L308" name="L308"></a> 308         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 6, 1),
<a id="L309" name="L309"></a> 309         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 7, 1),
<a id="L310" name="L310"></a> 310         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 8, 1),
<a id="L311" name="L311"></a> 311         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 9, 1),
<a id="L312" name="L312"></a> 312         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 10, 1),
<a id="L313" name="L313"></a> 313         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 11, 1),
<a id="L314" name="L314"></a> 314         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 12, 1),
<a id="L315" name="L315"></a> 315         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 13, 1),
<a id="L316" name="L316"></a> 316         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 14, 1),
<a id="L317" name="L317"></a> 317         <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, 15, 1),
<a id="L318" name="L318"></a> 318     <em class="brace">}</em>;
<a id="L319" name="L319"></a> 319 
<a id="L320" name="L320"></a> 320     <em class="comment">// Half of Long.MIN_VALUE &amp; Long.MAX_VALUE.</em>
<a id="L321" name="L321"></a> 321     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> HALF_LONG_MAX_VALUE = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE / 2;
<a id="L322" name="L322"></a> 322     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> HALF_LONG_MIN_VALUE = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE / 2;
<a id="L323" name="L323"></a> 323 
<a id="L324" name="L324"></a> 324     <em class="comment">// Constants</em>
<div class="comment">
      The value 0, with a scale of 0.
      @since  1.5</div>
<a id="L330" name="L330"></a> 330     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> ZERO =
<a id="L331" name="L331"></a> 331         zeroThroughTen[0];
<a id="L332" name="L332"></a> 332 
<div class="comment">
      The value 1, with a scale of 0.
      @since  1.5</div>
<a id="L338" name="L338"></a> 338     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> ONE =
<a id="L339" name="L339"></a> 339         zeroThroughTen[1];
<a id="L340" name="L340"></a> 340 
<div class="comment">
      The value 10, with a scale of 0.
      @since  1.5</div>
<a id="L346" name="L346"></a> 346     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> TEN =
<a id="L347" name="L347"></a> 347         zeroThroughTen[10];
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349     <em class="comment">// Constructors</em>
<a id="L350" name="L350"></a> 350 
<div class="comment">
      Trusted package private constructor.
      Trusted simply means if val is INFLATED, intVal could not be null and
      if intVal is null, val could not be INFLATED.</div>
<a id="L356" name="L356"></a> 356     BigDecimal(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> prec) <em class="brace">{</em>
<a id="L357" name="L357"></a> 357         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L358" name="L358"></a> 358         <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = prec;
<a id="L359" name="L359"></a> 359         <strong class="reserved">this</strong>.intCompact = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L360" name="L360"></a> 360         <strong class="reserved">this</strong>.intVal = intVal;
<a id="L361" name="L361"></a> 361     <em class="brace">}</em>
<a id="L362" name="L362"></a> 362 
<div class="comment">
      Translates a character array representation of a
      <code>BigDecimal</code> into a <code>BigDecimal</code>, accepting the
      same sequence of characters as the {@link #BigDecimal(String)}
      constructor, while allowing a sub-array to be specified.
      <p>Note that if the sequence of characters is already available
      within a character array, using this constructor is faster than
      converting the <code>char</code> array to string and using the
      <code>BigDecimal(String)</code> constructor .
      @param  in <code>char</code> array that is the source of characters.
      @param  offset first character in the array to inspect.
      @param  len number of characters to consider.
      @throws NumberFormatException if <code>in</code> is not a valid
              representation of a <code>BigDecimal</code> or the defined subarray
              is not wholly within <code>in</code>.
      @since  1.5</p></div>
<a id="L382" name="L382"></a> 382     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">char</strong>[] <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> len) <em class="brace">{</em>
<a id="L383" name="L383"></a> 383         <strong class="reserved">this</strong>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>,<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>,len,<a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a>.UNLIMITED);
<a id="L384" name="L384"></a> 384     <em class="brace">}</em>
<a id="L385" name="L385"></a> 385 
<div class="comment">
      Translates a character array representation of a
      <code>BigDecimal</code> into a <code>BigDecimal</code>, accepting the
      same sequence of characters as the {@link #BigDecimal(String)}
      constructor, while allowing a sub-array to be specified and
      with rounding according to the context settings.
      <p>Note that if the sequence of characters is already available
      within a character array, using this constructor is faster than
      converting the <code>char</code> array to string and using the
      <code>BigDecimal(String)</code> constructor .
      @param  in <code>char</code> array that is the source of characters.
      @param  offset first character in the array to inspect.
      @param  len number of characters to consider..
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @throws NumberFormatException if <code>in</code> is not a valid
              representation of a <code>BigDecimal</code> or the defined subarray
              is not wholly within <code>in</code>.
      @since  1.5</p></div>
<a id="L409" name="L409"></a> 409     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">char</strong>[] <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> len, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L410" name="L410"></a> 410         <em class="comment">// protect against huge length.</em>
<a id="L411" name="L411"></a> 411         <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + len &gt; <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &lt; 0)
<a id="L412" name="L412"></a> 412             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>("Bad offset or len arguments for char[] input.");
<a id="L413" name="L413"></a> 413         <em class="comment">// This is the primary string to BigDecimal constructor; all</em>
<a id="L414" name="L414"></a> 414         <em class="comment">// incoming strings end up here; it uses explicit (inline)</em>
<a id="L415" name="L415"></a> 415         <em class="comment">// parsing for speed and generates at most one intermediate</em>
<a id="L416" name="L416"></a> 416         <em class="comment">// (temporary) object (a char[] array) for non-compact case.</em>
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418         <em class="comment">// Use locals for all fields values until completion</em>
<a id="L419" name="L419"></a> 419         <strong class="reserved">int</strong> prec = 0;                 <em class="comment">// record precision value</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">int</strong> scl = 0;                  <em class="comment">// record scale value</em>
<a id="L421" name="L421"></a> 421         <strong class="reserved">long</strong> rs = 0;                  <em class="comment">// the compact value in long</em>
<a id="L422" name="L422"></a> 422         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <strong class="reserved">null</strong>;         <em class="comment">// the inflated value in BigInteger</em>
<a id="L423" name="L423"></a> 423         <em class="comment">// use array bounds checking to handle too-long, len == 0,</em>
<a id="L424" name="L424"></a> 424         <em class="comment">// bad offset, etc.</em>
<a id="L425" name="L425"></a> 425         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L426" name="L426"></a> 426             <em class="comment">// handle the sign</em>
<a id="L427" name="L427"></a> 427             <strong class="reserved">boolean</strong> isneg = <strong class="reserved">false</strong>;          <em class="comment">// assume positive</em>
<a id="L428" name="L428"></a> 428             <strong class="reserved">if</strong> (<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>] == '-') <em class="brace">{</em>
<a id="L429" name="L429"></a> 429                 isneg = <strong class="reserved">true</strong>;               <em class="comment">// leading minus means negative</em>
<a id="L430" name="L430"></a> 430                 <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++;
<a id="L431" name="L431"></a> 431                 len--;
<a id="L432" name="L432"></a> 432             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>] == '+') <em class="brace">{</em> <em class="comment">// leading + allowed</em>
<a id="L433" name="L433"></a> 433                 <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++;
<a id="L434" name="L434"></a> 434                 len--;
<a id="L435" name="L435"></a> 435             <em class="brace">}</em>
<a id="L436" name="L436"></a> 436 
<a id="L437" name="L437"></a> 437             <em class="comment">// should now be at numeric part of the significand</em>
<a id="L438" name="L438"></a> 438             <strong class="reserved">boolean</strong> dot = <strong class="reserved">false</strong>;             <em class="comment">// true when there is a '.'</em>
<a id="L439" name="L439"></a> 439             <strong class="reserved">long</strong> <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = 0;                    <em class="comment">// exponent</em>
<a id="L440" name="L440"></a> 440             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;                          <em class="comment">// current character</em>
<a id="L441" name="L441"></a> 441             <strong class="reserved">boolean</strong> isCompact = (len &lt;= MAX_COMPACT_DIGITS);
<a id="L442" name="L442"></a> 442             <em class="comment">// integer significand array &amp; idx is the index to it. The array</em>
<a id="L443" name="L443"></a> 443             <em class="comment">// is ONLY used when we can't use a compact representation.</em>
<a id="L444" name="L444"></a> 444             <strong class="reserved">int</strong> idx = 0;
<a id="L445" name="L445"></a> 445             <strong class="reserved">if</strong> (isCompact) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446                 <em class="comment">// First compact case, we need not to preserve the character</em>
<a id="L447" name="L447"></a> 447                 <em class="comment">// and we can just compute the value in place.</em>
<a id="L448" name="L448"></a> 448                 <strong class="reserved">for</strong> (; len &gt; 0; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++, len--) <em class="brace">{</em>
<a id="L449" name="L449"></a> 449                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L450" name="L450"></a> 450                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '0')) <em class="brace">{</em> <em class="comment">// have zero</em>
<a id="L451" name="L451"></a> 451                         <strong class="reserved">if</strong> (prec == 0)
<a id="L452" name="L452"></a> 452                             prec = 1;
<a id="L453" name="L453"></a> 453                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (rs != 0) <em class="brace">{</em>
<a id="L454" name="L454"></a> 454                             rs *= 10;
<a id="L455" name="L455"></a> 455                             ++prec;
<a id="L456" name="L456"></a> 456                         <em class="brace">}</em> <em class="comment">// else digit is a redundant leading zero</em>
<a id="L457" name="L457"></a> 457                         <strong class="reserved">if</strong> (dot)
<a id="L458" name="L458"></a> 458                             ++scl;
<a id="L459" name="L459"></a> 459                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;= '1' &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= '9')) <em class="brace">{</em> <em class="comment">// have digit</em>
<a id="L460" name="L460"></a> 460                         <strong class="reserved">int</strong> <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> - '0';
<a id="L461" name="L461"></a> 461                         <strong class="reserved">if</strong> (prec != 1 || rs != 0)
<a id="L462" name="L462"></a> 462                             ++prec; <em class="comment">// prec unchanged if preceded by 0s</em>
<a id="L463" name="L463"></a> 463                         rs = rs * 10 + <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>;
<a id="L464" name="L464"></a> 464                         <strong class="reserved">if</strong> (dot)
<a id="L465" name="L465"></a> 465                             ++scl;
<a id="L466" name="L466"></a> 466                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '.') <em class="brace">{</em>   <em class="comment">// have dot</em>
<a id="L467" name="L467"></a> 467                         <em class="comment">// have dot</em>
<a id="L468" name="L468"></a> 468                         <strong class="reserved">if</strong> (dot) <em class="comment">// two dots</em>
<a id="L469" name="L469"></a> 469                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L470" name="L470"></a> 470                         dot = <strong class="reserved">true</strong>;
<a id="L471" name="L471"></a> 471                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>)) <em class="brace">{</em> <em class="comment">// slow path</em>
<a id="L472" name="L472"></a> 472                         <strong class="reserved">int</strong> <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> = <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, 10);
<a id="L473" name="L473"></a> 473                         <strong class="reserved">if</strong> (<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> == 0) <em class="brace">{</em>
<a id="L474" name="L474"></a> 474                             <strong class="reserved">if</strong> (prec == 0)
<a id="L475" name="L475"></a> 475                                 prec = 1;
<a id="L476" name="L476"></a> 476                             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (rs != 0) <em class="brace">{</em>
<a id="L477" name="L477"></a> 477                                 rs *= 10;
<a id="L478" name="L478"></a> 478                                 ++prec;
<a id="L479" name="L479"></a> 479                             <em class="brace">}</em> <em class="comment">// else digit is a redundant leading zero</em>
<a id="L480" name="L480"></a> 480                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L481" name="L481"></a> 481                             <strong class="reserved">if</strong> (prec != 1 || rs != 0)
<a id="L482" name="L482"></a> 482                                 ++prec; <em class="comment">// prec unchanged if preceded by 0s</em>
<a id="L483" name="L483"></a> 483                             rs = rs * 10 + <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>;
<a id="L484" name="L484"></a> 484                         <em class="brace">}</em>
<a id="L485" name="L485"></a> 485                         <strong class="reserved">if</strong> (dot)
<a id="L486" name="L486"></a> 486                             ++scl;
<a id="L487" name="L487"></a> 487                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 'e') || (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 'E')) <em class="brace">{</em>
<a id="L488" name="L488"></a> 488                         <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = <a href="../S/1464.html#L617" title="Defined at 617 in src/java/math/BigDecimal.java.">parseExp</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, len);
<a id="L489" name="L489"></a> 489                         <em class="comment">// Next test is required for backwards compatibility</em>
<a id="L490" name="L490"></a> 490                         <strong class="reserved">if</strong> ((<strong class="reserved">int</strong>) <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> != <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>) <em class="comment">// overflow</em>
<a id="L491" name="L491"></a> 491                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L492" name="L492"></a> 492                         <strong class="reserved">break</strong>; <em class="comment">// [saves a test]</em>
<a id="L493" name="L493"></a> 493                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L494" name="L494"></a> 494                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L495" name="L495"></a> 495                     <em class="brace">}</em>
<a id="L496" name="L496"></a> 496                 <em class="brace">}</em>
<a id="L497" name="L497"></a> 497                 <strong class="reserved">if</strong> (prec == 0) <em class="comment">// no digits found</em>
<a id="L498" name="L498"></a> 498                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L499" name="L499"></a> 499                 <em class="comment">// Adjust scale if exp is not zero.</em>
<a id="L500" name="L500"></a> 500                 <strong class="reserved">if</strong> (<a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> != 0) <em class="brace">{</em> <em class="comment">// had significant exponent</em>
<a id="L501" name="L501"></a> 501                     scl = <a href="../S/1464.html#L606" title="Defined at 606 in src/java/math/BigDecimal.java.">adjustScale</a>(scl, <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>);
<a id="L502" name="L502"></a> 502                 <em class="brace">}</em>
<a id="L503" name="L503"></a> 503                 rs = isneg ? -rs : rs;
<a id="L504" name="L504"></a> 504                 <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L505" name="L505"></a> 505                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp; <em class="comment">// prec has range [1, MAX_INT], mcp has range [0, MAX_INT];</em>
<a id="L506" name="L506"></a> 506                                        <em class="comment">// therefore, this subtract cannot overflow</em>
<a id="L507" name="L507"></a> 507                 <strong class="reserved">if</strong> (mcp &gt; 0 &amp;&amp; <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>  <em class="comment">// do rounding</em>
<a id="L508" name="L508"></a> 508                     <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L509" name="L509"></a> 509                         scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) scl - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L510" name="L510"></a> 510                         rs = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rs, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L511" name="L511"></a> 511                         prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(rs);
<a id="L512" name="L512"></a> 512                         <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L513" name="L513"></a> 513                     <em class="brace">}</em>
<a id="L514" name="L514"></a> 514                 <em class="brace">}</em>
<a id="L515" name="L515"></a> 515             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L516" name="L516"></a> 516                 <strong class="reserved">char</strong> coeff[] = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[len];
<a id="L517" name="L517"></a> 517                 <strong class="reserved">for</strong> (; len &gt; 0; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++, len--) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L519" name="L519"></a> 519                     <em class="comment">// have digit</em>
<a id="L520" name="L520"></a> 520                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;= '0' &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= '9') || <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>)) <em class="brace">{</em>
<a id="L521" name="L521"></a> 521                         <em class="comment">// First compact case, we need not to preserve the character</em>
<a id="L522" name="L522"></a> 522                         <em class="comment">// and we can just compute the value in place.</em>
<a id="L523" name="L523"></a> 523                         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '0' || <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, 10) == 0) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524                             <strong class="reserved">if</strong> (prec == 0) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525                                 coeff[idx] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L526" name="L526"></a> 526                                 prec = 1;
<a id="L527" name="L527"></a> 527                             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (idx != 0) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528                                 coeff[idx++] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L529" name="L529"></a> 529                                 ++prec;
<a id="L530" name="L530"></a> 530                             <em class="brace">}</em> <em class="comment">// else c must be a redundant leading zero</em>
<a id="L531" name="L531"></a> 531                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L532" name="L532"></a> 532                             <strong class="reserved">if</strong> (prec != 1 || idx != 0)
<a id="L533" name="L533"></a> 533                                 ++prec; <em class="comment">// prec unchanged if preceded by 0s</em>
<a id="L534" name="L534"></a> 534                             coeff[idx++] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L535" name="L535"></a> 535                         <em class="brace">}</em>
<a id="L536" name="L536"></a> 536                         <strong class="reserved">if</strong> (dot)
<a id="L537" name="L537"></a> 537                             ++scl;
<a id="L538" name="L538"></a> 538                         <strong class="reserved">continue</strong>;
<a id="L539" name="L539"></a> 539                     <em class="brace">}</em>
<a id="L540" name="L540"></a> 540                     <em class="comment">// have dot</em>
<a id="L541" name="L541"></a> 541                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '.') <em class="brace">{</em>
<a id="L542" name="L542"></a> 542                         <em class="comment">// have dot</em>
<a id="L543" name="L543"></a> 543                         <strong class="reserved">if</strong> (dot) <em class="comment">// two dots</em>
<a id="L544" name="L544"></a> 544                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L545" name="L545"></a> 545                         dot = <strong class="reserved">true</strong>;
<a id="L546" name="L546"></a> 546                         <strong class="reserved">continue</strong>;
<a id="L547" name="L547"></a> 547                     <em class="brace">}</em>
<a id="L548" name="L548"></a> 548                     <em class="comment">// exponent expected</em>
<a id="L549" name="L549"></a> 549                     <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != 'e') &amp;&amp; (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != 'E'))
<a id="L550" name="L550"></a> 550                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L551" name="L551"></a> 551                     <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = <a href="../S/1464.html#L617" title="Defined at 617 in src/java/math/BigDecimal.java.">parseExp</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, len);
<a id="L552" name="L552"></a> 552                     <em class="comment">// Next test is required for backwards compatibility</em>
<a id="L553" name="L553"></a> 553                     <strong class="reserved">if</strong> ((<strong class="reserved">int</strong>) <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> != <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>) <em class="comment">// overflow</em>
<a id="L554" name="L554"></a> 554                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L555" name="L555"></a> 555                     <strong class="reserved">break</strong>; <em class="comment">// [saves a test]</em>
<a id="L556" name="L556"></a> 556                 <em class="brace">}</em>
<a id="L557" name="L557"></a> 557                 <em class="comment">// here when no characters left</em>
<a id="L558" name="L558"></a> 558                 <strong class="reserved">if</strong> (prec == 0) <em class="comment">// no digits found</em>
<a id="L559" name="L559"></a> 559                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L560" name="L560"></a> 560                 <em class="comment">// Adjust scale if exp is not zero.</em>
<a id="L561" name="L561"></a> 561                 <strong class="reserved">if</strong> (<a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> != 0) <em class="brace">{</em> <em class="comment">// had significant exponent</em>
<a id="L562" name="L562"></a> 562                     scl = <a href="../S/1464.html#L606" title="Defined at 606 in src/java/math/BigDecimal.java.">adjustScale</a>(scl, <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>);
<a id="L563" name="L563"></a> 563                 <em class="brace">}</em>
<a id="L564" name="L564"></a> 564                 <em class="comment">// Remove leading zeros from precision (digits count)</em>
<a id="L565" name="L565"></a> 565                 rb = <strong class="reserved">new</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>(coeff, isneg ? -1 : 1, prec);
<a id="L566" name="L566"></a> 566                 rs = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(rb);
<a id="L567" name="L567"></a> 567                 <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L568" name="L568"></a> 568                 <strong class="reserved">if</strong> (mcp &gt; 0 &amp;&amp; (prec &gt; mcp)) <em class="brace">{</em>
<a id="L569" name="L569"></a> 569                     <strong class="reserved">if</strong> (rs == INFLATED) <em class="brace">{</em>
<a id="L570" name="L570"></a> 570                         <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L571" name="L571"></a> 571                         <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L572" name="L572"></a> 572                             scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) scl - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L573" name="L573"></a> 573                             rb = <a href="../S/1464.html#L4085" title="Defined at 4085 in src/java/math/BigDecimal.java.">divideAndRoundByTenPow</a>(rb, <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>, mc.roundingMode.oldMode);
<a id="L574" name="L574"></a> 574                             rs = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(rb);
<a id="L575" name="L575"></a> 575                             <strong class="reserved">if</strong> (rs != INFLATED) <em class="brace">{</em>
<a id="L576" name="L576"></a> 576                                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(rs);
<a id="L577" name="L577"></a> 577                                 <strong class="reserved">break</strong>;
<a id="L578" name="L578"></a> 578                             <em class="brace">}</em>
<a id="L579" name="L579"></a> 579                             prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(rb);
<a id="L580" name="L580"></a> 580                             <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L581" name="L581"></a> 581                         <em class="brace">}</em>
<a id="L582" name="L582"></a> 582                     <em class="brace">}</em>
<a id="L583" name="L583"></a> 583                     <strong class="reserved">if</strong> (rs != INFLATED) <em class="brace">{</em>
<a id="L584" name="L584"></a> 584                         <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L585" name="L585"></a> 585                         <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L586" name="L586"></a> 586                             scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) scl - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L587" name="L587"></a> 587                             rs = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rs, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L588" name="L588"></a> 588                             prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(rs);
<a id="L589" name="L589"></a> 589                             <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L590" name="L590"></a> 590                         <em class="brace">}</em>
<a id="L591" name="L591"></a> 591                         rb = <strong class="reserved">null</strong>;
<a id="L592" name="L592"></a> 592                     <em class="brace">}</em>
<a id="L593" name="L593"></a> 593                 <em class="brace">}</em>
<a id="L594" name="L594"></a> 594             <em class="brace">}</em>
<a id="L595" name="L595"></a> 595         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a> e) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L597" name="L597"></a> 597         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1752.html#L35" title="Defined at 35 in src/java/lang/NegativeArraySizeException.java.">NegativeArraySizeException</a> e) <em class="brace">{</em>
<a id="L598" name="L598"></a> 598             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L599" name="L599"></a> 599         <em class="brace">}</em>
<a id="L600" name="L600"></a> 600         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = scl;
<a id="L601" name="L601"></a> 601         <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = prec;
<a id="L602" name="L602"></a> 602         <strong class="reserved">this</strong>.intCompact = rs;
<a id="L603" name="L603"></a> 603         <strong class="reserved">this</strong>.intVal = rb;
<a id="L604" name="L604"></a> 604     <em class="brace">}</em>
<a id="L605" name="L605"></a> 605 
<a id="L606" name="L606"></a> 606     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/10090.html" title="Multiple referred from 2 places.">adjustScale</a>(<strong class="reserved">int</strong> scl, <strong class="reserved">long</strong> <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>) <em class="brace">{</em>
<a id="L607" name="L607"></a> 607         <strong class="reserved">long</strong> adjustedScale = scl - <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>;
<a id="L608" name="L608"></a> 608         <strong class="reserved">if</strong> (adjustedScale &gt; <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE || adjustedScale &lt; <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MIN_VALUE)
<a id="L609" name="L609"></a> 609             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>("Scale out of range.");
<a id="L610" name="L610"></a> 610         scl = (<strong class="reserved">int</strong>) adjustedScale;
<a id="L611" name="L611"></a> 611         <strong class="reserved">return</strong> scl;
<a id="L612" name="L612"></a> 612     <em class="brace">}</em>
<a id="L613" name="L613"></a> 613 
<div class="comment">
      parse exponent</div>
<a id="L617" name="L617"></a> 617     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/24546.html" title="Multiple referred from 2 places.">parseExp</a>(<strong class="reserved">char</strong>[] <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> len)<em class="brace">{</em>
<a id="L618" name="L618"></a> 618         <strong class="reserved">long</strong> <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = 0;
<a id="L619" name="L619"></a> 619         <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++;
<a id="L620" name="L620"></a> 620         <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L621" name="L621"></a> 621         len--;
<a id="L622" name="L622"></a> 622         <strong class="reserved">boolean</strong> negexp = (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '-');
<a id="L623" name="L623"></a> 623         <em class="comment">// optional sign</em>
<a id="L624" name="L624"></a> 624         <strong class="reserved">if</strong> (negexp || <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '+') <em class="brace">{</em>
<a id="L625" name="L625"></a> 625             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++;
<a id="L626" name="L626"></a> 626             <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L627" name="L627"></a> 627             len--;
<a id="L628" name="L628"></a> 628         <em class="brace">}</em>
<a id="L629" name="L629"></a> 629         <strong class="reserved">if</strong> (len &lt;= 0) <em class="comment">// no exponent digits</em>
<a id="L630" name="L630"></a> 630             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L631" name="L631"></a> 631         <em class="comment">// skip leading zeros in the exponent</em>
<a id="L632" name="L632"></a> 632         <strong class="reserved">while</strong> (len &gt; 10 &amp;&amp; (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=='0' || (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, 10) == 0))) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++;
<a id="L634" name="L634"></a> 634             <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L635" name="L635"></a> 635             len--;
<a id="L636" name="L636"></a> 636         <em class="brace">}</em>
<a id="L637" name="L637"></a> 637         <strong class="reserved">if</strong> (len &gt; 10) <em class="comment">// too many nonzero exponent digits</em>
<a id="L638" name="L638"></a> 638             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L639" name="L639"></a> 639         <em class="comment">// c now holds first digit of exponent</em>
<a id="L640" name="L640"></a> 640         <strong class="reserved">for</strong> (;; len--) <em class="brace">{</em>
<a id="L641" name="L641"></a> 641             <strong class="reserved">int</strong> v;
<a id="L642" name="L642"></a> 642             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;= '0' &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= '9') <em class="brace">{</em>
<a id="L643" name="L643"></a> 643                 v = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> - '0';
<a id="L644" name="L644"></a> 644             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L645" name="L645"></a> 645                 v = <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, 10);
<a id="L646" name="L646"></a> 646                 <strong class="reserved">if</strong> (v &lt; 0) <em class="comment">// not a digit</em>
<a id="L647" name="L647"></a> 647                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>();
<a id="L648" name="L648"></a> 648             <em class="brace">}</em>
<a id="L649" name="L649"></a> 649             <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> * 10 + v;
<a id="L650" name="L650"></a> 650             <strong class="reserved">if</strong> (len == 1)
<a id="L651" name="L651"></a> 651                 <strong class="reserved">break</strong>; <em class="comment">// that was final character</em>
<a id="L652" name="L652"></a> 652             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>++;
<a id="L653" name="L653"></a> 653             <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L654" name="L654"></a> 654         <em class="brace">}</em>
<a id="L655" name="L655"></a> 655         <strong class="reserved">if</strong> (negexp) <em class="comment">// apply sign</em>
<a id="L656" name="L656"></a> 656             <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a> = -<a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>;
<a id="L657" name="L657"></a> 657         <strong class="reserved">return</strong> <a href="../D/15822.html" title="Multiple defined in 3 places.">exp</a>;
<a id="L658" name="L658"></a> 658     <em class="brace">}</em>
<a id="L659" name="L659"></a> 659 
<div class="comment">
      Translates a character array representation of a
      <code>BigDecimal</code> into a <code>BigDecimal</code>, accepting the
      same sequence of characters as the {@link #BigDecimal(String)}
      constructor.
      <p>Note that if the sequence of characters is already available
      as a character array, using this constructor is faster than
      converting the <code>char</code> array to string and using the
      <code>BigDecimal(String)</code> constructor .
      @param in <code>char</code> array that is the source of characters.
      @throws NumberFormatException if <code>in</code> is not a valid
              representation of a <code>BigDecimal</code>.
      @since  1.5</p></div>
<a id="L676" name="L676"></a> 676     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">char</strong>[] <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <em class="brace">{</em>
<a id="L677" name="L677"></a> 677         <strong class="reserved">this</strong>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, 0, <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L678" name="L678"></a> 678     <em class="brace">}</em>
<a id="L679" name="L679"></a> 679 
<div class="comment">
      Translates a character array representation of a
      <code>BigDecimal</code> into a <code>BigDecimal</code>, accepting the
      same sequence of characters as the {@link #BigDecimal(String)}
      constructor and with rounding according to the context
      settings.
      <p>Note that if the sequence of characters is already available
      as a character array, using this constructor is faster than
      converting the <code>char</code> array to string and using the
      <code>BigDecimal(String)</code> constructor .
      @param  in <code>char</code> array that is the source of characters.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @throws NumberFormatException if <code>in</code> is not a valid
              representation of a <code>BigDecimal</code>.
      @since  1.5</p></div>
<a id="L700" name="L700"></a> 700     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">char</strong>[] <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701         <strong class="reserved">this</strong>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, 0, <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, mc);
<a id="L702" name="L702"></a> 702     <em class="brace">}</em>
<a id="L703" name="L703"></a> 703 
<div class="comment">
      Translates the string representation of a <code>BigDecimal</code>
      into a <code>BigDecimal</code>.  The string representation consists
      of an optional sign, <code>'+'</code> (<tt> '\u002B'</tt>) or
      <code>'-'</code> (<tt>'\u002D'</tt>), followed by a sequence of
      zero or more decimal digits ("the integer"), optionally
      followed by a fraction, optionally followed by an exponent.
      <p>The fraction consists of a decimal point followed by zero
      or more decimal digits.  The string must contain at least one
      digit in either the integer or the fraction.  The number formed
      by the sign, the integer and the fraction is referred to as the
      <i>significand</i>.
      </p><p>The exponent consists of the character <code>'e'</code>
      (<tt>'\u0065'</tt>) or <code>'E'</code> (<tt>'\u0045'</tt>)
      followed by one or more decimal digits.  The value of the
      exponent must lie between -{@link Integer#MAX_VALUE} ({@link
      Integer#MIN_VALUE}+1) and {@link Integer#MAX_VALUE}, inclusive.
      </p><p>More formally, the strings this constructor accepts are
      described by the following grammar:
      </p><blockquote>
      <dl>
      <dt><i>BigDecimalString:</i>
      </dt><dd><i>Sign<sub>opt</sub> Significand Exponent<sub>opt</sub></i>
      </dd><dt><i>Sign:</i>
      </dt><dd><code>+</code>
      </dd><dd><code>-</code>
      </dd><dt><i>Significand:</i>
      </dt><dd><i>IntegerPart</i> <code>.</code> <i>FractionPart<sub>opt</sub></i>
      </dd><dd><code>.</code> <i>FractionPart</i>
      </dd><dd><i>IntegerPart</i>
      </dd><dt><i>IntegerPart:</i>
      </dt><dd><i>Digits</i>
      </dd><dt><i>FractionPart:</i>
      </dt><dd><i>Digits</i>
      </dd><dt><i>Exponent:</i>
      </dt><dd><i>ExponentIndicator SignedInteger</i>
      </dd><dt><i>ExponentIndicator:</i>
      </dt><dd><code>e</code>
      </dd><dd><code>E</code>
      </dd><dt><i>SignedInteger:</i>
      </dt><dd><i>Sign<sub>opt</sub> Digits</i>
      </dd><dt><i>Digits:</i>
      </dt><dd><i>Digit</i>
      </dd><dd><i>Digits Digit</i>
      </dd><dt><i>Digit:</i>
      </dt><dd>any character for which {@link Character#isDigit}
      returns <code>true</code>, including 0, 1, 2 ...
      </dd></dl>
      </blockquote>
      <p>The scale of the returned <code>BigDecimal</code> will be the
      number of digits in the fraction, or zero if the string
      contains no decimal point, subject to adjustment for any
      exponent; if the string contains an exponent, the exponent is
      subtracted from the scale.  The value of the resulting scale
      must lie between <code>Integer.MIN_VALUE</code> and
      <code>Integer.MAX_VALUE</code>, inclusive.
      </p><p>The character-to-digit mapping is provided by {@link
      java.lang.Character#digit} set to convert to radix 10.  The
      String may not contain any extraneous characters (whitespace,
      for example).
      </p><p><b>Examples:</b><br>
      The value of the returned <code>BigDecimal</code> is equal to
      <i>significand</i> × 10<sup>&nbsp;<i>exponent</i></sup>.
      For each string on the left, the resulting representation
      [<code>BigInteger</code>, <code>scale</code>] is shown on the right.
      </p><pre>      "0"            [0,0]
      "0.00"         [0,2]
      "123"          [123,0]
      "-123"         [-123,0]
      "1.23E3"       [123,-1]
      "1.23E+3"      [123,-1]
      "12.3E+7"      [123,-6]
      "12.0"         [120,1]
      "12.3"         [123,1]
      "0.00123"      [123,5]
      "-1.23E-12"    [-123,14]
      "1234.5E-4"    [12345,5]
      "0E+7"         [0,-7]
      "-0"           [0,0]
      </pre>
      <p>Note: For values other than <code>float</code> and
      <code>double</code> NaN and ±Infinity, this constructor is
      compatible with the values returned by {@link Float#toString}
      and {@link Double#toString}.  This is generally the preferred
      way to convert a <code>float</code> or <code>double</code> into a
      BigDecimal, as it doesn't suffer from the unpredictability of
      the {@link #BigDecimal(double)} constructor.
      @param val String representation of <code>BigDecimal</code>.
      @throws NumberFormatException if <code>val</code> is not a valid
              representation of a <code>BigDecimal</code>.</p></div>
<a id="L805" name="L805"></a> 805     <strong class="reserved">public</strong> BigDecimal(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L806" name="L806"></a> 806         <strong class="reserved">this</strong>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>(), 0, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L807" name="L807"></a> 807     <em class="brace">}</em>
<a id="L808" name="L808"></a> 808 
<div class="comment">
      Translates the string representation of a <code>BigDecimal</code>
      into a <code>BigDecimal</code>, accepting the same strings as the
      {@link #BigDecimal(String)} constructor, with rounding
      according to the context settings.
      @param  val string representation of a <code>BigDecimal</code>.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @throws NumberFormatException if <code>val</code> is not a valid
              representation of a BigDecimal.
      @since  1.5</div>
<a id="L823" name="L823"></a> 823     <strong class="reserved">public</strong> BigDecimal(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824         <strong class="reserved">this</strong>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>(), 0, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), mc);
<a id="L825" name="L825"></a> 825     <em class="brace">}</em>
<a id="L826" name="L826"></a> 826 
<div class="comment">
      Translates a <code>double</code> into a <code>BigDecimal</code> which
      is the exact decimal representation of the <code>double</code>'s
      binary floating-point value.  The scale of the returned
      <code>BigDecimal</code> is the smallest value such that
      <tt>(10<sup>scale</sup> × val)</tt> is an integer.
      <p>
      <b>Notes:</b>
      </p><ol>
      <li>
      The results of this constructor can be somewhat unpredictable.
      One might assume that writing <code>new BigDecimal(0.1)</code> in
      Java creates a <code>BigDecimal</code> which is exactly equal to
      0.1 (an unscaled value of 1, with a scale of 1), but it is
      actually equal to
      0.1000000000000000055511151231257827021181583404541015625.
      This is because 0.1 cannot be represented exactly as a
      <code>double</code> (or, for that matter, as a binary fraction of
      any finite length).  Thus, the value that is being passed
      <i>in</i> to the constructor is not exactly equal to 0.1,
      appearances notwithstanding.
      </li><li>
      The <code>String</code> constructor, on the other hand, is
      perfectly predictable: writing <code>new BigDecimal("0.1")</code>
      creates a <code>BigDecimal</code> which is <i>exactly</i> equal to
      0.1, as one would expect.  Therefore, it is generally
      recommended that the {@linkplain #BigDecimal(String)
      <tt>String</tt> constructor} be used in preference to this one.
      </li><li>
      When a <code>double</code> must be used as a source for a
      <code>BigDecimal</code>, note that this constructor provides an
      exact conversion; it does not give the same result as
      converting the <code>double</code> to a <code>String</code> using the
      {@link Double#toString(double)} method and then using the
      {@link #BigDecimal(String)} constructor.  To get that result,
      use the <code>static</code> {@link #valueOf(double)} method.
      </li></ol>
      @param val <code>double</code> value to be converted to
             <code>BigDecimal</code>.
      @throws NumberFormatException if <code>val</code> is infinite or NaN.</div>
<a id="L871" name="L871"></a> 871     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L872" name="L872"></a> 872         <strong class="reserved">this</strong>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>,<a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a>.UNLIMITED);
<a id="L873" name="L873"></a> 873     <em class="brace">}</em>
<a id="L874" name="L874"></a> 874 
<div class="comment">
      Translates a <code>double</code> into a <code>BigDecimal</code>, with
      rounding according to the context settings.  The scale of the
      <code>BigDecimal</code> is the smallest value such that
      <tt>(10<sup>scale</sup> × val)</tt> is an integer.
      <p>The results of this constructor can be somewhat unpredictable
      and its use is generally not recommended; see the notes under
      the {@link #BigDecimal(double)} constructor.
      @param  val <code>double</code> value to be converted to
              <code>BigDecimal</code>.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              RoundingMode is UNNECESSARY.
      @throws NumberFormatException if <code>val</code> is infinite or NaN.
      @since  1.5</p></div>
<a id="L893" name="L893"></a> 893     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L894" name="L894"></a> 894         <strong class="reserved">if</strong> (<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25716.html" title="Multiple defined in 4 places.">isInfinite</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) || <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25912.html" title="Multiple defined in 4 places.">isNaN</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>))
<a id="L895" name="L895"></a> 895             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a>("Infinite or NaN");
<a id="L896" name="L896"></a> 896         <em class="comment">// Translate the double into sign, exponent and significand, according</em>
<a id="L897" name="L897"></a> 897         <em class="comment">// to the formulae in JLS, Section 20.10.22.</em>
<a id="L898" name="L898"></a> 898         <strong class="reserved">long</strong> valBits = <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../S/1746.html#L835" title="Defined at 835 in src/java/lang/Double.java.">doubleToLongBits</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L899" name="L899"></a> 899         <strong class="reserved">int</strong> <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a> = ((valBits &gt;&gt; 63) == 0 ? 1 : -1);
<a id="L900" name="L900"></a> 900         <strong class="reserved">int</strong> <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = (<strong class="reserved">int</strong>) ((valBits &gt;&gt; 52) &amp; 0x7ffL);
<a id="L901" name="L901"></a> 901         <strong class="reserved">long</strong> significand = (<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> == 0
<a id="L902" name="L902"></a> 902                 ? (valBits &amp; ((1L &lt;&lt; 52) - 1)) &lt;&lt; 1
<a id="L903" name="L903"></a> 903                 : (valBits &amp; ((1L &lt;&lt; 52) - 1)) | (1L &lt;&lt; 52));
<a id="L904" name="L904"></a> 904         <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> -= 1075;
<a id="L905" name="L905"></a> 905         <em class="comment">// At this point, val == sign * significand * 2**exponent.</em>
<a id="L906" name="L906"></a> 906 
<div class="comment">
          Special case zero to supress nonterminating normalization and bogus
          scale calculation.</div>
<a id="L911" name="L911"></a> 911         <strong class="reserved">if</strong> (significand == 0) <em class="brace">{</em>
<a id="L912" name="L912"></a> 912             <strong class="reserved">this</strong>.intVal = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO;
<a id="L913" name="L913"></a> 913             <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L914" name="L914"></a> 914             <strong class="reserved">this</strong>.intCompact = 0;
<a id="L915" name="L915"></a> 915             <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 1;
<a id="L916" name="L916"></a> 916             <strong class="reserved">return</strong>;
<a id="L917" name="L917"></a> 917         <em class="brace">}</em>
<a id="L918" name="L918"></a> 918         <em class="comment">// Normalize</em>
<a id="L919" name="L919"></a> 919         <strong class="reserved">while</strong> ((significand &amp; 1) == 0) <em class="brace">{</em> <em class="comment">// i.e., significand is even</em>
<a id="L920" name="L920"></a> 920             significand &gt;&gt;= 1;
<a id="L921" name="L921"></a> 921             <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>++;
<a id="L922" name="L922"></a> 922         <em class="brace">}</em>
<a id="L923" name="L923"></a> 923         <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L924" name="L924"></a> 924         <em class="comment">// Calculate intVal and scale</em>
<a id="L925" name="L925"></a> 925         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal;
<a id="L926" name="L926"></a> 926         <strong class="reserved">long</strong> compactVal = <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a> * significand;
<a id="L927" name="L927"></a> 927         <strong class="reserved">if</strong> (<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> == 0) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928             intVal = (compactVal == INFLATED) ? INFLATED_BIGINT : <strong class="reserved">null</strong>;
<a id="L929" name="L929"></a> 929         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L930" name="L930"></a> 930             <strong class="reserved">if</strong> (<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> &lt; 0) <em class="brace">{</em>
<a id="L931" name="L931"></a> 931                 intVal = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(5).<a href="../D/29502.html" title="Multiple defined in 5 places.">pow</a>(-<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>).<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(compactVal);
<a id="L932" name="L932"></a> 932                 <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = -<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>;
<a id="L933" name="L933"></a> 933             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">//  (exponent &gt; 0)</em>
<a id="L934" name="L934"></a> 934                 intVal = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(2).<a href="../D/29502.html" title="Multiple defined in 5 places.">pow</a>(<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>).<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(compactVal);
<a id="L935" name="L935"></a> 935             <em class="brace">}</em>
<a id="L936" name="L936"></a> 936             compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L937" name="L937"></a> 937         <em class="brace">}</em>
<a id="L938" name="L938"></a> 938         <strong class="reserved">int</strong> prec = 0;
<a id="L939" name="L939"></a> 939         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L940" name="L940"></a> 940         <strong class="reserved">if</strong> (mcp &gt; 0) <em class="brace">{</em> <em class="comment">// do rounding</em>
<a id="L941" name="L941"></a> 941             <strong class="reserved">int</strong> mode = mc.roundingMode.oldMode;
<a id="L942" name="L942"></a> 942             <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>;
<a id="L943" name="L943"></a> 943             <strong class="reserved">if</strong> (compactVal == INFLATED) <em class="brace">{</em>
<a id="L944" name="L944"></a> 944                 prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L945" name="L945"></a> 945                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L946" name="L946"></a> 946                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L947" name="L947"></a> 947                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L948" name="L948"></a> 948                     intVal = <a href="../S/1464.html#L4085" title="Defined at 4085 in src/java/math/BigDecimal.java.">divideAndRoundByTenPow</a>(intVal, <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>, mode);
<a id="L949" name="L949"></a> 949                     compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L950" name="L950"></a> 950                     <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L951" name="L951"></a> 951                         <strong class="reserved">break</strong>;
<a id="L952" name="L952"></a> 952                     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953                     prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L954" name="L954"></a> 954                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L955" name="L955"></a> 955                 <em class="brace">}</em>
<a id="L956" name="L956"></a> 956             <em class="brace">}</em>
<a id="L957" name="L957"></a> 957             <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L958" name="L958"></a> 958                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L959" name="L959"></a> 959                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L960" name="L960"></a> 960                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L961" name="L961"></a> 961                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L962" name="L962"></a> 962                     compactVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(compactVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L963" name="L963"></a> 963                     prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L964" name="L964"></a> 964                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L965" name="L965"></a> 965                 <em class="brace">}</em>
<a id="L966" name="L966"></a> 966                 intVal = <strong class="reserved">null</strong>;
<a id="L967" name="L967"></a> 967             <em class="brace">}</em>
<a id="L968" name="L968"></a> 968         <em class="brace">}</em>
<a id="L969" name="L969"></a> 969         <strong class="reserved">this</strong>.intVal = intVal;
<a id="L970" name="L970"></a> 970         <strong class="reserved">this</strong>.intCompact = compactVal;
<a id="L971" name="L971"></a> 971         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L972" name="L972"></a> 972         <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = prec;
<a id="L973" name="L973"></a> 973     <em class="brace">}</em>
<a id="L974" name="L974"></a> 974 
<div class="comment">
      Translates a <code>BigInteger</code> into a <code>BigDecimal</code>.
      The scale of the <code>BigDecimal</code> is zero.
      @param val <code>BigInteger</code> value to be converted to
                 <code>BigDecimal</code>.</div>
<a id="L982" name="L982"></a> 982     <strong class="reserved">public</strong> BigDecimal(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L983" name="L983"></a> 983         <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L984" name="L984"></a> 984         intVal = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L985" name="L985"></a> 985         intCompact = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L986" name="L986"></a> 986     <em class="brace">}</em>
<a id="L987" name="L987"></a> 987 
<div class="comment">
      Translates a <code>BigInteger</code> into a <code>BigDecimal</code>
      rounding according to the context settings.  The scale of the
      <code>BigDecimal</code> is zero.
      @param val <code>BigInteger</code> value to be converted to
                 <code>BigDecimal</code>.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1000" name="L1000"></a>1000     <strong class="reserved">public</strong> BigDecimal(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1001" name="L1001"></a>1001         <strong class="reserved">this</strong>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>,0,mc);
<a id="L1002" name="L1002"></a>1002     <em class="brace">}</em>
<a id="L1003" name="L1003"></a>1003 
<div class="comment">
      Translates a <code>BigInteger</code> unscaled value and an
      <code>int</code> scale into a <code>BigDecimal</code>.  The value of
      the <code>BigDecimal</code> is
      <tt>(unscaledVal × 10<sup>-scale</sup>)</tt>.
      @param unscaledVal unscaled value of the <code>BigDecimal</code>.
      @param scale scale of the <code>BigDecimal</code>.</div>
<a id="L1013" name="L1013"></a>1013     <strong class="reserved">public</strong> BigDecimal(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> unscaledVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L1014" name="L1014"></a>1014         <em class="comment">// Negative scales are now allowed</em>
<a id="L1015" name="L1015"></a>1015         <strong class="reserved">this</strong>.intVal = unscaledVal;
<a id="L1016" name="L1016"></a>1016         <strong class="reserved">this</strong>.intCompact = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(unscaledVal);
<a id="L1017" name="L1017"></a>1017         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L1018" name="L1018"></a>1018     <em class="brace">}</em>
<a id="L1019" name="L1019"></a>1019 
<div class="comment">
      Translates a <code>BigInteger</code> unscaled value and an
      <code>int</code> scale into a <code>BigDecimal</code>, with rounding
      according to the context settings.  The value of the
      <code>BigDecimal</code> is <tt>(unscaledVal ×
      10<sup>-scale</sup>)</tt>, rounded according to the
      <code>precision</code> and rounding mode settings.
      @param  unscaledVal unscaled value of the <code>BigDecimal</code>.
      @param  scale scale of the <code>BigDecimal</code>.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1035" name="L1035"></a>1035     <strong class="reserved">public</strong> BigDecimal(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> unscaledVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036         <strong class="reserved">long</strong> compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(unscaledVal);
<a id="L1037" name="L1037"></a>1037         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L1038" name="L1038"></a>1038         <strong class="reserved">int</strong> prec = 0;
<a id="L1039" name="L1039"></a>1039         <strong class="reserved">if</strong> (mcp &gt; 0) <em class="brace">{</em> <em class="comment">// do rounding</em>
<a id="L1040" name="L1040"></a>1040             <strong class="reserved">int</strong> mode = mc.roundingMode.oldMode;
<a id="L1041" name="L1041"></a>1041             <strong class="reserved">if</strong> (compactVal == INFLATED) <em class="brace">{</em>
<a id="L1042" name="L1042"></a>1042                 prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(unscaledVal);
<a id="L1043" name="L1043"></a>1043                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1044" name="L1044"></a>1044                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L1045" name="L1045"></a>1045                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L1046" name="L1046"></a>1046                     unscaledVal = <a href="../S/1464.html#L4085" title="Defined at 4085 in src/java/math/BigDecimal.java.">divideAndRoundByTenPow</a>(unscaledVal, <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>, mode);
<a id="L1047" name="L1047"></a>1047                     compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(unscaledVal);
<a id="L1048" name="L1048"></a>1048                     <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L1049" name="L1049"></a>1049                         <strong class="reserved">break</strong>;
<a id="L1050" name="L1050"></a>1050                     <em class="brace">}</em>
<a id="L1051" name="L1051"></a>1051                     prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(unscaledVal);
<a id="L1052" name="L1052"></a>1052                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1053" name="L1053"></a>1053                 <em class="brace">}</em>
<a id="L1054" name="L1054"></a>1054             <em class="brace">}</em>
<a id="L1055" name="L1055"></a>1055             <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L1056" name="L1056"></a>1056                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L1057" name="L1057"></a>1057                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;     <em class="comment">// drop can't be more than 18</em>
<a id="L1058" name="L1058"></a>1058                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L1059" name="L1059"></a>1059                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L1060" name="L1060"></a>1060                     compactVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(compactVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mode);
<a id="L1061" name="L1061"></a>1061                     prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L1062" name="L1062"></a>1062                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1063" name="L1063"></a>1063                 <em class="brace">}</em>
<a id="L1064" name="L1064"></a>1064                 unscaledVal = <strong class="reserved">null</strong>;
<a id="L1065" name="L1065"></a>1065             <em class="brace">}</em>
<a id="L1066" name="L1066"></a>1066         <em class="brace">}</em>
<a id="L1067" name="L1067"></a>1067         <strong class="reserved">this</strong>.intVal = unscaledVal;
<a id="L1068" name="L1068"></a>1068         <strong class="reserved">this</strong>.intCompact = compactVal;
<a id="L1069" name="L1069"></a>1069         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L1070" name="L1070"></a>1070         <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = prec;
<a id="L1071" name="L1071"></a>1071     <em class="brace">}</em>
<a id="L1072" name="L1072"></a>1072 
<div class="comment">
      Translates an <code>int</code> into a <code>BigDecimal</code>.  The
      scale of the <code>BigDecimal</code> is zero.
      @param val <code>int</code> value to be converted to
                 <code>BigDecimal</code>.
      @since  1.5</div>
<a id="L1081" name="L1081"></a>1081     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082         <strong class="reserved">this</strong>.intCompact = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1083" name="L1083"></a>1083         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L1084" name="L1084"></a>1084         <strong class="reserved">this</strong>.intVal = <strong class="reserved">null</strong>;
<a id="L1085" name="L1085"></a>1085     <em class="brace">}</em>
<a id="L1086" name="L1086"></a>1086 
<div class="comment">
      Translates an <code>int</code> into a <code>BigDecimal</code>, with
      rounding according to the context settings.  The scale of the
      <code>BigDecimal</code>, before any rounding, is zero.
      @param  val <code>int</code> value to be converted to <code>BigDecimal</code>.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1098" name="L1098"></a>1098     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1099" name="L1099"></a>1099         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L1100" name="L1100"></a>1100         <strong class="reserved">long</strong> compactVal = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1101" name="L1101"></a>1101         <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L1102" name="L1102"></a>1102         <strong class="reserved">int</strong> prec = 0;
<a id="L1103" name="L1103"></a>1103         <strong class="reserved">if</strong> (mcp &gt; 0) <em class="brace">{</em> <em class="comment">// do rounding</em>
<a id="L1104" name="L1104"></a>1104             prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L1105" name="L1105"></a>1105             <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp; <em class="comment">// drop can't be more than 18</em>
<a id="L1106" name="L1106"></a>1106             <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L1107" name="L1107"></a>1107                 <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L1108" name="L1108"></a>1108                 compactVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(compactVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L1109" name="L1109"></a>1109                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L1110" name="L1110"></a>1110                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1111" name="L1111"></a>1111             <em class="brace">}</em>
<a id="L1112" name="L1112"></a>1112         <em class="brace">}</em>
<a id="L1113" name="L1113"></a>1113         <strong class="reserved">this</strong>.intVal = <strong class="reserved">null</strong>;
<a id="L1114" name="L1114"></a>1114         <strong class="reserved">this</strong>.intCompact = compactVal;
<a id="L1115" name="L1115"></a>1115         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L1116" name="L1116"></a>1116         <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = prec;
<a id="L1117" name="L1117"></a>1117     <em class="brace">}</em>
<a id="L1118" name="L1118"></a>1118 
<div class="comment">
      Translates a <code>long</code> into a <code>BigDecimal</code>.  The
      scale of the <code>BigDecimal</code> is zero.
      @param val <code>long</code> value to be converted to <code>BigDecimal</code>.
      @since  1.5</div>
<a id="L1126" name="L1126"></a>1126     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1127" name="L1127"></a>1127         <strong class="reserved">this</strong>.intCompact = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1128" name="L1128"></a>1128         <strong class="reserved">this</strong>.intVal = (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> == INFLATED) ? INFLATED_BIGINT : <strong class="reserved">null</strong>;
<a id="L1129" name="L1129"></a>1129         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L1130" name="L1130"></a>1130     <em class="brace">}</em>
<a id="L1131" name="L1131"></a>1131 
<div class="comment">
      Translates a <code>long</code> into a <code>BigDecimal</code>, with
      rounding according to the context settings.  The scale of the
      <code>BigDecimal</code>, before any rounding, is zero.
      @param  val <code>long</code> value to be converted to <code>BigDecimal</code>.
      @param  mc the context to use.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1143" name="L1143"></a>1143     <strong class="reserved">public</strong> BigDecimal(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1144" name="L1144"></a>1144         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L1145" name="L1145"></a>1145         <strong class="reserved">int</strong> mode = mc.roundingMode.oldMode;
<a id="L1146" name="L1146"></a>1146         <strong class="reserved">int</strong> prec = 0;
<a id="L1147" name="L1147"></a>1147         <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = 0;
<a id="L1148" name="L1148"></a>1148         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal = (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> == INFLATED) ? INFLATED_BIGINT : <strong class="reserved">null</strong>;
<a id="L1149" name="L1149"></a>1149         <strong class="reserved">if</strong> (mcp &gt; 0) <em class="brace">{</em> <em class="comment">// do rounding</em>
<a id="L1150" name="L1150"></a>1150             <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> == INFLATED) <em class="brace">{</em>
<a id="L1151" name="L1151"></a>1151                 prec = 19;
<a id="L1152" name="L1152"></a>1152                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1153" name="L1153"></a>1153                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L1154" name="L1154"></a>1154                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L1155" name="L1155"></a>1155                     intVal = <a href="../S/1464.html#L4085" title="Defined at 4085 in src/java/math/BigDecimal.java.">divideAndRoundByTenPow</a>(intVal, <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>, mode);
<a id="L1156" name="L1156"></a>1156                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L1157" name="L1157"></a>1157                     <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != INFLATED) <em class="brace">{</em>
<a id="L1158" name="L1158"></a>1158                         <strong class="reserved">break</strong>;
<a id="L1159" name="L1159"></a>1159                     <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160                     prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L1161" name="L1161"></a>1161                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1162" name="L1162"></a>1162                 <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163             <em class="brace">}</em>
<a id="L1164" name="L1164"></a>1164             <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != INFLATED) <em class="brace">{</em>
<a id="L1165" name="L1165"></a>1165                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1166" name="L1166"></a>1166                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1167" name="L1167"></a>1167                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L1168" name="L1168"></a>1168                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L1169" name="L1169"></a>1169                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L1170" name="L1170"></a>1170                     prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1171" name="L1171"></a>1171                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L1172" name="L1172"></a>1172                 <em class="brace">}</em>
<a id="L1173" name="L1173"></a>1173                 intVal = <strong class="reserved">null</strong>;
<a id="L1174" name="L1174"></a>1174             <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175         <em class="brace">}</em>
<a id="L1176" name="L1176"></a>1176         <strong class="reserved">this</strong>.intVal = intVal;
<a id="L1177" name="L1177"></a>1177         <strong class="reserved">this</strong>.intCompact = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1178" name="L1178"></a>1178         <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L1179" name="L1179"></a>1179         <strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = prec;
<a id="L1180" name="L1180"></a>1180     <em class="brace">}</em>
<a id="L1181" name="L1181"></a>1181 
<a id="L1182" name="L1182"></a>1182     <em class="comment">// Static Factory Methods</em>
<a id="L1183" name="L1183"></a>1183 
<div class="comment">
      Translates a <code>long</code> unscaled value and an
      <code>int</code> scale into a <code>BigDecimal</code>.  This
      {@literal "static factory method"} is provided in preference to
      a (<code>long</code>, <code>int</code>) constructor because it
      allows for reuse of frequently used <code>BigDecimal</code> values..
      @param unscaledVal unscaled value of the <code>BigDecimal</code>.
      @param scale scale of the <code>BigDecimal</code>.
      @return a <code>BigDecimal</code> whose value is
              <tt>(unscaledVal × 10<sup>-scale</sup>)</tt>.</div>
<a id="L1196" name="L1196"></a>1196     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/30101.html" title="Multiple referred from 940 places.">valueOf</a>(<strong class="reserved">long</strong> unscaledVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L1197" name="L1197"></a>1197         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0)
<a id="L1198" name="L1198"></a>1198             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(unscaledVal);
<a id="L1199" name="L1199"></a>1199         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (unscaledVal == 0) <em class="brace">{</em>
<a id="L1200" name="L1200"></a>1200             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1201" name="L1201"></a>1201         <em class="brace">}</em>
<a id="L1202" name="L1202"></a>1202         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(unscaledVal == INFLATED ?
<a id="L1203" name="L1203"></a>1203                               INFLATED_BIGINT : <strong class="reserved">null</strong>,
<a id="L1204" name="L1204"></a>1204                               unscaledVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, 0);
<a id="L1205" name="L1205"></a>1205     <em class="brace">}</em>
<a id="L1206" name="L1206"></a>1206 
<div class="comment">
      Translates a <code>long</code> value into a <code>BigDecimal</code>
      with a scale of zero.  This {@literal "static factory method"}
      is provided in preference to a (<code>long</code>) constructor
      because it allows for reuse of frequently used
      <code>BigDecimal</code> values.
      @param val value of the <code>BigDecimal</code>.
      @return a <code>BigDecimal</code> whose value is <code>val</code>.</div>
<a id="L1217" name="L1217"></a>1217     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/30101.html" title="Multiple referred from 940 places.">valueOf</a>(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> &gt;= 0 &amp;&amp; <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> &lt; zeroThroughTen.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1219" name="L1219"></a>1219             <strong class="reserved">return</strong> zeroThroughTen[(<strong class="reserved">int</strong>)<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>];
<a id="L1220" name="L1220"></a>1220         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != INFLATED)
<a id="L1221" name="L1221"></a>1221             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<strong class="reserved">null</strong>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, 0, 0);
<a id="L1222" name="L1222"></a>1222         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(INFLATED_BIGINT, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, 0, 0);
<a id="L1223" name="L1223"></a>1223     <em class="brace">}</em>
<a id="L1224" name="L1224"></a>1224 
<a id="L1225" name="L1225"></a>1225     <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/30101.html" title="Multiple referred from 940 places.">valueOf</a>(<strong class="reserved">long</strong> unscaledVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> prec) <em class="brace">{</em>
<a id="L1226" name="L1226"></a>1226         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0 &amp;&amp; unscaledVal &gt;= 0 &amp;&amp; unscaledVal &lt; zeroThroughTen.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227             <strong class="reserved">return</strong> zeroThroughTen[(<strong class="reserved">int</strong>) unscaledVal];
<a id="L1228" name="L1228"></a>1228         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (unscaledVal == 0) <em class="brace">{</em>
<a id="L1229" name="L1229"></a>1229             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1230" name="L1230"></a>1230         <em class="brace">}</em>
<a id="L1231" name="L1231"></a>1231         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(unscaledVal == INFLATED ? INFLATED_BIGINT : <strong class="reserved">null</strong>,
<a id="L1232" name="L1232"></a>1232                 unscaledVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, prec);
<a id="L1233" name="L1233"></a>1233     <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234 
<a id="L1235" name="L1235"></a>1235     <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/30101.html" title="Multiple referred from 940 places.">valueOf</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> prec) <em class="brace">{</em>
<a id="L1236" name="L1236"></a>1236         <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L1237" name="L1237"></a>1237         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> == 0) <em class="brace">{</em>
<a id="L1238" name="L1238"></a>1238             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1239" name="L1239"></a>1239         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0 &amp;&amp; <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> &gt;= 0 &amp;&amp; <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> &lt; zeroThroughTen.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1240" name="L1240"></a>1240             <strong class="reserved">return</strong> zeroThroughTen[(<strong class="reserved">int</strong>) <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>];
<a id="L1241" name="L1241"></a>1241         <em class="brace">}</em>
<a id="L1242" name="L1242"></a>1242         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, prec);
<a id="L1243" name="L1243"></a>1243     <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244 
<a id="L1245" name="L1245"></a>1245     <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/30864.html" title="Multiple referred from 11 places.">zeroValueOf</a>(<strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L1246" name="L1246"></a>1246         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt;= 0 &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; ZERO_SCALED_BY.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1247" name="L1247"></a>1247             <strong class="reserved">return</strong> ZERO_SCALED_BY[<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>];
<a id="L1248" name="L1248"></a>1248         <strong class="reserved">else</strong>
<a id="L1249" name="L1249"></a>1249             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO, 0, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, 1);
<a id="L1250" name="L1250"></a>1250     <em class="brace">}</em>
<a id="L1251" name="L1251"></a>1251 
<div class="comment">
      Translates a <code>double</code> into a <code>BigDecimal</code>, using
      the <code>double</code>'s canonical string representation provided
      by the {@link Double#toString(double)} method.
      <p><b>Note:</b> This is generally the preferred way to convert
      a <code>double</code> (or <code>float</code>) into a
      <code>BigDecimal</code>, as the value returned is equal to that
      resulting from constructing a <code>BigDecimal</code> from the
      result of using {@link Double#toString(double)}.
      @param  val <code>double</code> to convert to a <code>BigDecimal</code>.
      @return a <code>BigDecimal</code> whose value is equal to or approximately
              equal to the value of <code>val</code>.
      @throws NumberFormatException if <code>val</code> is infinite or NaN.
      @since  1.5</p></div>
<a id="L1269" name="L1269"></a>1269     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/30101.html" title="Multiple referred from 940 places.">valueOf</a>(<strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1270" name="L1270"></a>1270         <em class="comment">// Reminder: a zero double returns '0.0', so we cannot fastpath</em>
<a id="L1271" name="L1271"></a>1271         <em class="comment">// to use the constant ZERO.  This might be important enough to</em>
<a id="L1272" name="L1272"></a>1272         <em class="comment">// justify a factory approach, a cache, or a few private</em>
<a id="L1273" name="L1273"></a>1273         <em class="comment">// constants, later.</em>
<a id="L1274" name="L1274"></a>1274         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>));
<a id="L1275" name="L1275"></a>1275     <em class="brace">}</em>
<a id="L1276" name="L1276"></a>1276 
<a id="L1277" name="L1277"></a>1277     <em class="comment">// Arithmetic Operations</em>
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this +
      augend)}, and whose scale is {@code max(this.scale(),
      augend.scale())}.
      @param  augend value to be added to this <code>BigDecimal</code>.
      @return <code>this + augend</code></div>
<a id="L1286" name="L1286"></a>1286     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> augend) <em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.intCompact != INFLATED) <em class="brace">{</em>
<a id="L1288" name="L1288"></a>1288             <strong class="reserved">if</strong> ((augend.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1289" name="L1289"></a>1289                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>.intCompact, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, augend.intCompact, augend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1290" name="L1290"></a>1290             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1291" name="L1291"></a>1291                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>.intCompact, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, augend.intVal, augend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1292" name="L1292"></a>1292             <em class="brace">}</em>
<a id="L1293" name="L1293"></a>1293         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1294" name="L1294"></a>1294             <strong class="reserved">if</strong> ((augend.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1295" name="L1295"></a>1295                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(augend.intCompact, augend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">this</strong>.intVal, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1296" name="L1296"></a>1296             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1297" name="L1297"></a>1297                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>.intVal, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, augend.intVal, augend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1298" name="L1298"></a>1298             <em class="brace">}</em>
<a id="L1299" name="L1299"></a>1299         <em class="brace">}</em>
<a id="L1300" name="L1300"></a>1300     <em class="brace">}</em>
<a id="L1301" name="L1301"></a>1301 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(this + augend)</code>,
      with rounding according to the context settings.
      If either number is zero and the precision setting is nonzero then
      the other number, rounded if necessary, is used as the result.
      @param  augend value to be added to this <code>BigDecimal</code>.
      @param  mc the context to use.
      @return <code>this + augend</code>, rounded as necessary.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1316" name="L1316"></a>1316     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> augend, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1317" name="L1317"></a>1317         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0)
<a id="L1318" name="L1318"></a>1318             <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(augend);
<a id="L1319" name="L1319"></a>1319         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> lhs = <strong class="reserved">this</strong>;
<a id="L1320" name="L1320"></a>1320 
<a id="L1321" name="L1321"></a>1321         <em class="comment">// If either number is zero then the other number, rounded and</em>
<a id="L1322" name="L1322"></a>1322         <em class="comment">// scaled if necessary, is used as the result.</em>
<a id="L1323" name="L1323"></a>1323         <em class="brace">{</em>
<a id="L1324" name="L1324"></a>1324             <strong class="reserved">boolean</strong> lhsIsZero = lhs.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0;
<a id="L1325" name="L1325"></a>1325             <strong class="reserved">boolean</strong> augendIsZero = augend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0;
<a id="L1326" name="L1326"></a>1326 
<a id="L1327" name="L1327"></a>1327             <strong class="reserved">if</strong> (lhsIsZero || augendIsZero) <em class="brace">{</em>
<a id="L1328" name="L1328"></a>1328                 <strong class="reserved">int</strong> preferredScale = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(lhs.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>(), augend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>());
<a id="L1329" name="L1329"></a>1329                 <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1330" name="L1330"></a>1330 
<a id="L1331" name="L1331"></a>1331                 <strong class="reserved">if</strong> (lhsIsZero &amp;&amp; augendIsZero)
<a id="L1332" name="L1332"></a>1332                     <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(preferredScale);
<a id="L1333" name="L1333"></a>1333                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = lhsIsZero ? <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(augend, mc) : <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(lhs, mc);
<a id="L1334" name="L1334"></a>1334 
<a id="L1335" name="L1335"></a>1335                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() == preferredScale)
<a id="L1336" name="L1336"></a>1336                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1337" name="L1337"></a>1337                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() &gt; preferredScale) <em class="brace">{</em>
<a id="L1338" name="L1338"></a>1338                     <strong class="reserved">return</strong> <a href="../S/1464.html#L4404" title="Defined at 4404 in src/java/math/BigDecimal.java.">stripZerosToMatchScale</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.intVal, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.intCompact, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L1339" name="L1339"></a>1339                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// result.scale &lt; preferredScale</em>
<a id="L1340" name="L1340"></a>1340                     <strong class="reserved">int</strong> precisionDiff = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> - <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>();
<a id="L1341" name="L1341"></a>1341                     <strong class="reserved">int</strong> scaleDiff     = preferredScale - <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>();
<a id="L1342" name="L1342"></a>1342 
<a id="L1343" name="L1343"></a>1343                     <strong class="reserved">if</strong> (precisionDiff &gt;= scaleDiff)
<a id="L1344" name="L1344"></a>1344                         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(preferredScale); <em class="comment">// can achieve target scale</em>
<a id="L1345" name="L1345"></a>1345                     <strong class="reserved">else</strong>
<a id="L1346" name="L1346"></a>1346                         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() + precisionDiff);
<a id="L1347" name="L1347"></a>1347                 <em class="brace">}</em>
<a id="L1348" name="L1348"></a>1348             <em class="brace">}</em>
<a id="L1349" name="L1349"></a>1349         <em class="brace">}</em>
<a id="L1350" name="L1350"></a>1350 
<a id="L1351" name="L1351"></a>1351         <strong class="reserved">long</strong> <a href="../D/28651.html" title="Multiple defined in 2 places.">padding</a> = (<strong class="reserved">long</strong>) lhs.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - augend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L1352" name="L1352"></a>1352         <strong class="reserved">if</strong> (<a href="../D/28651.html" title="Multiple defined in 2 places.">padding</a> != 0) <em class="brace">{</em> <em class="comment">// scales differ; alignment needed</em>
<a id="L1353" name="L1353"></a>1353             <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[] = <a href="../S/1464.html#L1383" title="Defined at 1383 in src/java/math/BigDecimal.java.">preAlign</a>(lhs, augend, <a href="../D/28651.html" title="Multiple defined in 2 places.">padding</a>, mc);
<a id="L1354" name="L1354"></a>1354             <a href="../S/1464.html#L3705" title="Defined at 3705 in src/java/math/BigDecimal.java.">matchScale</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>);
<a id="L1355" name="L1355"></a>1355             lhs = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0];
<a id="L1356" name="L1356"></a>1356             augend = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1];
<a id="L1357" name="L1357"></a>1357         <em class="brace">}</em>
<a id="L1358" name="L1358"></a>1358         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(lhs.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>().<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(augend.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>()), lhs.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, mc);
<a id="L1359" name="L1359"></a>1359     <em class="brace">}</em>
<a id="L1360" name="L1360"></a>1360 
<div class="comment">
      Returns an array of length two, the sum of whose entries is
      equal to the rounded sum of the <code>BigDecimal</code> arguments.
      <p>If the digit positions of the arguments have a sufficient
      gap between them, the value smaller in magnitude can be
      condensed into a {@literal "sticky bit"} and the end result will
      round the same way <em>if</em> the precision of the final
      result does not include the high order digit of the small
      magnitude operand.
      </p><p>Note that while strictly speaking this is an optimization,
      it makes a much wider range of additions practical.
      </p><p>This corresponds to a pre-shift operation in a fixed
      precision floating-point adder; this method is complicated by
      variable precision of the result as determined by the
      MathContext.  A more nuanced operation could implement a
      {@literal "right shift"} on the smaller magnitude operand so
      that the number of digits of the smaller operand could be
      reduced even though the significands partially overlapped.</p></div>
<a id="L1383" name="L1383"></a>1383     <strong class="reserved">private</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../S/1464.html#L1353" title="Referred from 1353 in src/java/math/BigDecimal.java.">preAlign</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> lhs, <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> augend, <strong class="reserved">long</strong> <a href="../D/28651.html" title="Multiple defined in 2 places.">padding</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1384" name="L1384"></a>1384         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../D/28651.html" title="Multiple defined in 2 places.">padding</a> != 0;
<a id="L1385" name="L1385"></a>1385         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> big;
<a id="L1386" name="L1386"></a>1386         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> small;
<a id="L1387" name="L1387"></a>1387 
<a id="L1388" name="L1388"></a>1388         <strong class="reserved">if</strong> (<a href="../D/28651.html" title="Multiple defined in 2 places.">padding</a> &lt; 0) <em class="brace">{</em> <em class="comment">// lhs is big; augend is small</em>
<a id="L1389" name="L1389"></a>1389             big = lhs;
<a id="L1390" name="L1390"></a>1390             small = augend;
<a id="L1391" name="L1391"></a>1391         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// lhs is small; augend is big</em>
<a id="L1392" name="L1392"></a>1392             big = augend;
<a id="L1393" name="L1393"></a>1393             small = lhs;
<a id="L1394" name="L1394"></a>1394         <em class="brace">}</em>
<a id="L1395" name="L1395"></a>1395 
<div class="comment">
          This is the estimated scale of an ulp of the result; it assumes that
          the result doesn't have a carry-out on a true add (e.g. 999 + 1 =&gt;
          1000) or any subtractive cancellation on borrowing (e.g. 100 - 1.2 =&gt;
          98.8)</div>
<a id="L1402" name="L1402"></a>1402         <strong class="reserved">long</strong> estResultUlpScale = (<strong class="reserved">long</strong>) big.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - big.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() + mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L1403" name="L1403"></a>1403 
<div class="comment">
          The low-order digit position of big is big.scale().  This
          is true regardless of whether big has a positive or
          negative scale.  The high-order digit position of small is
          small.scale - (small.precision() - 1).  To do the full
          condensation, the digit positions of big and small must be
          disjoint *and* the digit positions of small should not be
          directly visible in the result.</div>
<a id="L1413" name="L1413"></a>1413         <strong class="reserved">long</strong> smallHighDigitPos = (<strong class="reserved">long</strong>) small.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - small.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() + 1;
<a id="L1414" name="L1414"></a>1414         <strong class="reserved">if</strong> (smallHighDigitPos &gt; big.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + 2 &amp;&amp; <em class="comment">// big and small disjoint</em>
<a id="L1415" name="L1415"></a>1415             smallHighDigitPos &gt; estResultUlpScale + 2) <em class="brace">{</em> <em class="comment">// small digits not visible</em>
<a id="L1416" name="L1416"></a>1416             small = <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(small.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(), <strong class="reserved">this</strong>.<a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(big.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, estResultUlpScale) + 3));
<a id="L1417" name="L1417"></a>1417         <em class="brace">}</em>
<a id="L1418" name="L1418"></a>1418 
<a id="L1419" name="L1419"></a>1419         <em class="comment">// Since addition is symmetric, preserving input order in</em>
<a id="L1420" name="L1420"></a>1420         <em class="comment">// returned operands doesn't matter</em>
<a id="L1421" name="L1421"></a>1421         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <em class="brace">{</em>big, small<em class="brace">}</em>;
<a id="L1422" name="L1422"></a>1422         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1423" name="L1423"></a>1423     <em class="brace">}</em>
<a id="L1424" name="L1424"></a>1424 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this -
      subtrahend)}, and whose scale is {@code max(this.scale(),
      subtrahend.scale())}.
      @param  subtrahend value to be subtracted from this <code>BigDecimal</code>.
      @return <code>this - subtrahend</code></div>
<a id="L1433" name="L1433"></a>1433     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/29021.html" title="Multiple referred from 64 places.">subtract</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> subtrahend) <em class="brace">{</em>
<a id="L1434" name="L1434"></a>1434         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.intCompact != INFLATED) <em class="brace">{</em>
<a id="L1435" name="L1435"></a>1435             <strong class="reserved">if</strong> ((subtrahend.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1436" name="L1436"></a>1436                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>.intCompact, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, -subtrahend.intCompact, subtrahend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1437" name="L1437"></a>1437             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1438" name="L1438"></a>1438                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>.intCompact, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, subtrahend.intVal.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>(), subtrahend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1439" name="L1439"></a>1439             <em class="brace">}</em>
<a id="L1440" name="L1440"></a>1440         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1441" name="L1441"></a>1441             <strong class="reserved">if</strong> ((subtrahend.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1442" name="L1442"></a>1442                 <em class="comment">// Pair of subtrahend values given before pair of</em>
<a id="L1443" name="L1443"></a>1443                 <em class="comment">// values from this BigDecimal to avoid need for</em>
<a id="L1444" name="L1444"></a>1444                 <em class="comment">// method overloading on the specialized add method</em>
<a id="L1445" name="L1445"></a>1445                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(-subtrahend.intCompact, subtrahend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">this</strong>.intVal, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1446" name="L1446"></a>1446             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1447" name="L1447"></a>1447                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">this</strong>.intVal, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, subtrahend.intVal.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>(), subtrahend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1448" name="L1448"></a>1448             <em class="brace">}</em>
<a id="L1449" name="L1449"></a>1449         <em class="brace">}</em>
<a id="L1450" name="L1450"></a>1450     <em class="brace">}</em>
<a id="L1451" name="L1451"></a>1451 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(this - subtrahend)</code>,
      with rounding according to the context settings.
      If <code>subtrahend</code> is zero then this, rounded if necessary, is used as the
      result.  If this is zero then the result is <code>subtrahend.negate(mc)</code>.
      @param  subtrahend value to be subtracted from this <code>BigDecimal</code>.
      @param  mc the context to use.
      @return <code>this - subtrahend</code>, rounded as necessary.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1466" name="L1466"></a>1466     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/29021.html" title="Multiple referred from 64 places.">subtract</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> subtrahend, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1467" name="L1467"></a>1467         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0)
<a id="L1468" name="L1468"></a>1468             <strong class="reserved">return</strong> <a href="../D/35018.html" title="Multiple defined in 10 places.">subtract</a>(subtrahend);
<a id="L1469" name="L1469"></a>1469         <em class="comment">// share the special rounding code in add()</em>
<a id="L1470" name="L1470"></a>1470         <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(subtrahend.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>(), mc);
<a id="L1471" name="L1471"></a>1471     <em class="brace">}</em>
<a id="L1472" name="L1472"></a>1472 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <tt>(this ×
      multiplicand)</tt>, and whose scale is {@code (this.scale() +
      multiplicand.scale())}.
      @param  multiplicand value to be multiplied by this <code>BigDecimal</code>.
      @return <code>this * multiplicand</code></div>
<a id="L1481" name="L1481"></a>1481     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23405.html" title="Multiple referred from 61 places.">multiply</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> multiplicand) <em class="brace">{</em>
<a id="L1482" name="L1482"></a>1482         <strong class="reserved">int</strong> productScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + multiplicand.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1483" name="L1483"></a>1483         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.intCompact != INFLATED) <em class="brace">{</em>
<a id="L1484" name="L1484"></a>1484             <strong class="reserved">if</strong> ((multiplicand.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1485" name="L1485"></a>1485                 <strong class="reserved">return</strong> <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<strong class="reserved">this</strong>.intCompact, multiplicand.intCompact, productScale);
<a id="L1486" name="L1486"></a>1486             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1487" name="L1487"></a>1487                 <strong class="reserved">return</strong> <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<strong class="reserved">this</strong>.intCompact, multiplicand.intVal, productScale);
<a id="L1488" name="L1488"></a>1488             <em class="brace">}</em>
<a id="L1489" name="L1489"></a>1489         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1490" name="L1490"></a>1490             <strong class="reserved">if</strong> ((multiplicand.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1491" name="L1491"></a>1491                 <strong class="reserved">return</strong> <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(multiplicand.intCompact, <strong class="reserved">this</strong>.intVal, productScale);
<a id="L1492" name="L1492"></a>1492             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1493" name="L1493"></a>1493                 <strong class="reserved">return</strong> <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<strong class="reserved">this</strong>.intVal, multiplicand.intVal, productScale);
<a id="L1494" name="L1494"></a>1494             <em class="brace">}</em>
<a id="L1495" name="L1495"></a>1495         <em class="brace">}</em>
<a id="L1496" name="L1496"></a>1496     <em class="brace">}</em>
<a id="L1497" name="L1497"></a>1497 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <tt>(this ×
      multiplicand)</tt>, with rounding according to the context settings.
      @param  multiplicand value to be multiplied by this <code>BigDecimal</code>.
      @param  mc the context to use.
      @return <code>this * multiplicand</code>, rounded as necessary.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L1509" name="L1509"></a>1509     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23405.html" title="Multiple referred from 61 places.">multiply</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> multiplicand, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1510" name="L1510"></a>1510         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0)
<a id="L1511" name="L1511"></a>1511             <strong class="reserved">return</strong> <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(multiplicand);
<a id="L1512" name="L1512"></a>1512         <strong class="reserved">int</strong> productScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + multiplicand.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1513" name="L1513"></a>1513         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.intCompact != INFLATED) <em class="brace">{</em>
<a id="L1514" name="L1514"></a>1514             <strong class="reserved">if</strong> ((multiplicand.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1515" name="L1515"></a>1515                 <strong class="reserved">return</strong> <a href="../D/27838.html" title="Multiple defined in 3 places.">multiplyAndRound</a>(<strong class="reserved">this</strong>.intCompact, multiplicand.intCompact, productScale, mc);
<a id="L1516" name="L1516"></a>1516             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1517" name="L1517"></a>1517                 <strong class="reserved">return</strong> <a href="../D/27838.html" title="Multiple defined in 3 places.">multiplyAndRound</a>(<strong class="reserved">this</strong>.intCompact, multiplicand.intVal, productScale, mc);
<a id="L1518" name="L1518"></a>1518             <em class="brace">}</em>
<a id="L1519" name="L1519"></a>1519         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1520" name="L1520"></a>1520             <strong class="reserved">if</strong> ((multiplicand.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1521" name="L1521"></a>1521                 <strong class="reserved">return</strong> <a href="../D/27838.html" title="Multiple defined in 3 places.">multiplyAndRound</a>(multiplicand.intCompact, <strong class="reserved">this</strong>.intVal, productScale, mc);
<a id="L1522" name="L1522"></a>1522             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1523" name="L1523"></a>1523                 <strong class="reserved">return</strong> <a href="../D/27838.html" title="Multiple defined in 3 places.">multiplyAndRound</a>(<strong class="reserved">this</strong>.intVal, multiplicand.intVal, productScale, mc);
<a id="L1524" name="L1524"></a>1524             <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525         <em class="brace">}</em>
<a id="L1526" name="L1526"></a>1526     <em class="brace">}</em>
<a id="L1527" name="L1527"></a>1527 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this /
      divisor)}, and whose scale is as specified.  If rounding must
      be performed to generate a result with the specified scale, the
      specified rounding mode is applied.
      <p>The new {@link #divide(BigDecimal, int, RoundingMode)} method
      should be used in preference to this legacy method.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  scale scale of the <code>BigDecimal</code> quotient to be returned.
      @param  roundingMode rounding mode to apply.
      @return <code>this / divisor</code>
      @throws ArithmeticException if <code>divisor</code> is zero,
              <code>roundingMode==ROUND_UNNECESSARY</code> and
              the specified scale is insufficient to represent the result
              of the division exactly.
      @throws IllegalArgumentException if <code>roundingMode</code> does not
              represent a valid rounding mode.
      @see    #ROUND_UP
      @see    #ROUND_DOWN
      @see    #ROUND_CEILING
      @see    #ROUND_FLOOR
      @see    #ROUND_HALF_UP
      @see    #ROUND_HALF_DOWN
      @see    #ROUND_HALF_EVEN
      @see    #ROUND_UNNECESSARY</p></div>
<a id="L1556" name="L1556"></a>1556     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L1557" name="L1557"></a>1557         <strong class="reserved">if</strong> (roundingMode &lt; ROUND_UP || roundingMode &gt; ROUND_UNNECESSARY)
<a id="L1558" name="L1558"></a>1558             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Invalid rounding mode");
<a id="L1559" name="L1559"></a>1559         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.intCompact != INFLATED) <em class="brace">{</em>
<a id="L1560" name="L1560"></a>1560             <strong class="reserved">if</strong> ((divisor.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1561" name="L1561"></a>1561                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(<strong class="reserved">this</strong>.intCompact, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, divisor.intCompact, divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode);
<a id="L1562" name="L1562"></a>1562             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1563" name="L1563"></a>1563                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(<strong class="reserved">this</strong>.intCompact, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, divisor.intVal, divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode);
<a id="L1564" name="L1564"></a>1564             <em class="brace">}</em>
<a id="L1565" name="L1565"></a>1565         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1566" name="L1566"></a>1566             <strong class="reserved">if</strong> ((divisor.intCompact != INFLATED)) <em class="brace">{</em>
<a id="L1567" name="L1567"></a>1567                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(<strong class="reserved">this</strong>.intVal, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, divisor.intCompact, divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode);
<a id="L1568" name="L1568"></a>1568             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1569" name="L1569"></a>1569                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(<strong class="reserved">this</strong>.intVal, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, divisor.intVal, divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode);
<a id="L1570" name="L1570"></a>1570             <em class="brace">}</em>
<a id="L1571" name="L1571"></a>1571         <em class="brace">}</em>
<a id="L1572" name="L1572"></a>1572     <em class="brace">}</em>
<a id="L1573" name="L1573"></a>1573 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this /
      divisor)}, and whose scale is as specified.  If rounding must
      be performed to generate a result with the specified scale, the
      specified rounding mode is applied.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  scale scale of the <code>BigDecimal</code> quotient to be returned.
      @param  roundingMode rounding mode to apply.
      @return <code>this / divisor</code>
      @throws ArithmeticException if <code>divisor</code> is zero,
              <code>roundingMode==RoundingMode.UNNECESSARY</code> and
              the specified scale is insufficient to represent the result
              of the division exactly.
      @since 1.5</div>
<a id="L1590" name="L1590"></a>1590     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a> roundingMode) <em class="brace">{</em>
<a id="L1591" name="L1591"></a>1591         <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode.oldMode);
<a id="L1592" name="L1592"></a>1592     <em class="brace">}</em>
<a id="L1593" name="L1593"></a>1593 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this /
      divisor)}, and whose scale is <code>this.scale()</code>.  If
      rounding must be performed to generate a result with the given
      scale, the specified rounding mode is applied.
      <p>The new {@link #divide(BigDecimal, RoundingMode)} method
      should be used in preference to this legacy method.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  roundingMode rounding mode to apply.
      @return <code>this / divisor</code>
      @throws ArithmeticException if <code>divisor==0</code>, or
              <code>roundingMode==ROUND_UNNECESSARY</code> and
              <code>this.scale()</code> is insufficient to represent the result
              of the division exactly.
      @throws IllegalArgumentException if <code>roundingMode</code> does not
              represent a valid rounding mode.
      @see    #ROUND_UP
      @see    #ROUND_DOWN
      @see    #ROUND_CEILING
      @see    #ROUND_FLOOR
      @see    #ROUND_HALF_UP
      @see    #ROUND_HALF_DOWN
      @see    #ROUND_HALF_EVEN
      @see    #ROUND_UNNECESSARY</p></div>
<a id="L1621" name="L1621"></a>1621     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L1622" name="L1622"></a>1622         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode);
<a id="L1623" name="L1623"></a>1623     <em class="brace">}</em>
<a id="L1624" name="L1624"></a>1624 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this /
      divisor)}, and whose scale is <code>this.scale()</code>.  If
      rounding must be performed to generate a result with the given
      scale, the specified rounding mode is applied.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  roundingMode rounding mode to apply.
      @return <code>this / divisor</code>
      @throws ArithmeticException if <code>divisor==0</code>, or
              <code>roundingMode==RoundingMode.UNNECESSARY</code> and
              <code>this.scale()</code> is insufficient to represent the result
              of the division exactly.
      @since 1.5</div>
<a id="L1640" name="L1640"></a>1640     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a> roundingMode) <em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode.oldMode);
<a id="L1642" name="L1642"></a>1642     <em class="brace">}</em>
<a id="L1643" name="L1643"></a>1643 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this /
      divisor)}, and whose preferred scale is {@code (this.scale() -
      divisor.scale())}; if the exact quotient cannot be
      represented (because it has a non-terminating decimal
      expansion) an <code>ArithmeticException</code> is thrown.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @throws ArithmeticException if the exact quotient does not have a
              terminating decimal expansion
      @return <code>this / divisor</code>
      @since 1.5
      @author Joseph D. Darcy</div>
<a id="L1658" name="L1658"></a>1658     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor) <em class="brace">{</em>
<div class="comment">
          Handle zero cases first.</div>
<a id="L1662" name="L1662"></a>1662         <strong class="reserved">if</strong> (divisor.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0) <em class="brace">{</em>   <em class="comment">// x/0</em>
<a id="L1663" name="L1663"></a>1663             <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0)    <em class="comment">// 0/0</em>
<a id="L1664" name="L1664"></a>1664                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Division undefined");  <em class="comment">// NaN</em>
<a id="L1665" name="L1665"></a>1665             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Division by zero");
<a id="L1666" name="L1666"></a>1666         <em class="brace">}</em>
<a id="L1667" name="L1667"></a>1667 
<a id="L1668" name="L1668"></a>1668         <em class="comment">// Calculate preferred scale</em>
<a id="L1669" name="L1669"></a>1669         <strong class="reserved">int</strong> preferredScale = <a href="../S/1464.html#L3874" title="Defined at 3874 in src/java/math/BigDecimal.java.">saturateLong</a>((<strong class="reserved">long</strong>) <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1670" name="L1670"></a>1670 
<a id="L1671" name="L1671"></a>1671         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0) <em class="comment">// 0/y</em>
<a id="L1672" name="L1672"></a>1672             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(preferredScale);
<a id="L1673" name="L1673"></a>1673         <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
              If the quotient this/divisor has a terminating decimal
              expansion, the expansion can have no more than
              (a.precision() + ceil(10*b.precision)/3) digits.
              Therefore, create a MathContext object with this
              precision and do a divide with the UNNECESSARY rounding
              mode.</div>
<a id="L1682" name="L1682"></a>1682             <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc = <strong class="reserved">new</strong> <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a>( (<strong class="reserved">int</strong>)<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() +
<a id="L1683" name="L1683"></a>1683                                                             (<strong class="reserved">long</strong>)<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/12285.html" title="Multiple defined in 2 places.">ceil</a>(10.0*divisor.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>()/3.0),
<a id="L1684" name="L1684"></a>1684                                                             <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE),
<a id="L1685" name="L1685"></a>1685                                               <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L302" title="Defined at 302 in src/java/math/RoundingMode.java.">UNNECESSARY</a>);
<a id="L1686" name="L1686"></a>1686             <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient;
<a id="L1687" name="L1687"></a>1687             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1688" name="L1688"></a>1688                 quotient = <strong class="reserved">this</strong>.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor, mc);
<a id="L1689" name="L1689"></a>1689             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a> e) <em class="brace">{</em>
<a id="L1690" name="L1690"></a>1690                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Non-terminating decimal expansion; " +
<a id="L1691" name="L1691"></a>1691                                               "no exact representable decimal result.");
<a id="L1692" name="L1692"></a>1692             <em class="brace">}</em>
<a id="L1693" name="L1693"></a>1693 
<a id="L1694" name="L1694"></a>1694             <strong class="reserved">int</strong> quotientScale = quotient.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>();
<a id="L1695" name="L1695"></a>1695 
<a id="L1696" name="L1696"></a>1696             <em class="comment">// divide(BigDecimal, mc) tries to adjust the quotient to</em>
<a id="L1697" name="L1697"></a>1697             <em class="comment">// the desired one by removing trailing zeros; since the</em>
<a id="L1698" name="L1698"></a>1698             <em class="comment">// exact divide method does not have an explicit digit</em>
<a id="L1699" name="L1699"></a>1699             <em class="comment">// limit, we can add zeros too.</em>
<a id="L1700" name="L1700"></a>1700             <strong class="reserved">if</strong> (preferredScale &gt; quotientScale)
<a id="L1701" name="L1701"></a>1701                 <strong class="reserved">return</strong> quotient.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(preferredScale, ROUND_UNNECESSARY);
<a id="L1702" name="L1702"></a>1702 
<a id="L1703" name="L1703"></a>1703             <strong class="reserved">return</strong> quotient;
<a id="L1704" name="L1704"></a>1704         <em class="brace">}</em>
<a id="L1705" name="L1705"></a>1705     <em class="brace">}</em>
<a id="L1706" name="L1706"></a>1706 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this /
      divisor)}, with rounding according to the context settings.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  mc the context to use.
      @return <code>this / divisor</code>, rounded as necessary.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code> or
              <code>mc.precision == 0</code> and the quotient has a
              non-terminating decimal expansion.
      @since  1.5</div>
<a id="L1720" name="L1720"></a>1720     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1721" name="L1721"></a>1721         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L1722" name="L1722"></a>1722         <strong class="reserved">if</strong> (mcp == 0)
<a id="L1723" name="L1723"></a>1723             <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor);
<a id="L1724" name="L1724"></a>1724 
<a id="L1725" name="L1725"></a>1725         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> dividend = <strong class="reserved">this</strong>;
<a id="L1726" name="L1726"></a>1726         <strong class="reserved">long</strong> preferredScale = (<strong class="reserved">long</strong>)dividend.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L1727" name="L1727"></a>1727         <em class="comment">// Now calculate the answer.  We use the existing</em>
<a id="L1728" name="L1728"></a>1728         <em class="comment">// divide-and-round method, but as this rounds to scale we have</em>
<a id="L1729" name="L1729"></a>1729         <em class="comment">// to normalize the values here to achieve the desired result.</em>
<a id="L1730" name="L1730"></a>1730         <em class="comment">// For x/y we first handle y=0 and x=0, and then normalize x and</em>
<a id="L1731" name="L1731"></a>1731         <em class="comment">// y to give x' and y' with the following constraints:</em>
<a id="L1732" name="L1732"></a>1732         <em class="comment">//   (a) 0.1 &lt;= x' &lt; 1</em>
<a id="L1733" name="L1733"></a>1733         <em class="comment">//   (b)  x' &lt;= y' &lt; 10*x'</em>
<a id="L1734" name="L1734"></a>1734         <em class="comment">// Dividing x'/y' with the required scale set to mc.precision then</em>
<a id="L1735" name="L1735"></a>1735         <em class="comment">// will give a result in the range 0.1 to 1 rounded to exactly</em>
<a id="L1736" name="L1736"></a>1736         <em class="comment">// the right number of digits (except in the case of a result of</em>
<a id="L1737" name="L1737"></a>1737         <em class="comment">// 1.000... which can arise when x=y, or when rounding overflows</em>
<a id="L1738" name="L1738"></a>1738         <em class="comment">// The 1.000... case will reduce properly to 1.</em>
<a id="L1739" name="L1739"></a>1739         <strong class="reserved">if</strong> (divisor.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0) <em class="brace">{</em>      <em class="comment">// x/0</em>
<a id="L1740" name="L1740"></a>1740             <strong class="reserved">if</strong> (dividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0)    <em class="comment">// 0/0</em>
<a id="L1741" name="L1741"></a>1741                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Division undefined");  <em class="comment">// NaN</em>
<a id="L1742" name="L1742"></a>1742             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Division by zero");
<a id="L1743" name="L1743"></a>1743         <em class="brace">}</em>
<a id="L1744" name="L1744"></a>1744         <strong class="reserved">if</strong> (dividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0) <em class="comment">// 0/y</em>
<a id="L1745" name="L1745"></a>1745             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(<a href="../S/1464.html#L3874" title="Defined at 3874 in src/java/math/BigDecimal.java.">saturateLong</a>(preferredScale));
<a id="L1746" name="L1746"></a>1746         <strong class="reserved">int</strong> xscale = dividend.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>();
<a id="L1747" name="L1747"></a>1747         <strong class="reserved">int</strong> yscale = divisor.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>();
<a id="L1748" name="L1748"></a>1748         <strong class="reserved">if</strong>(dividend.intCompact!=INFLATED) <em class="brace">{</em>
<a id="L1749" name="L1749"></a>1749             <strong class="reserved">if</strong>(divisor.intCompact!=INFLATED) <em class="brace">{</em>
<a id="L1750" name="L1750"></a>1750                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(dividend.intCompact, xscale, divisor.intCompact, yscale, preferredScale, mc);
<a id="L1751" name="L1751"></a>1751             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1752" name="L1752"></a>1752                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(dividend.intCompact, xscale, divisor.intVal, yscale, preferredScale, mc);
<a id="L1753" name="L1753"></a>1753             <em class="brace">}</em>
<a id="L1754" name="L1754"></a>1754         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1755" name="L1755"></a>1755             <strong class="reserved">if</strong>(divisor.intCompact!=INFLATED) <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(dividend.intVal, xscale, divisor.intCompact, yscale, preferredScale, mc);
<a id="L1757" name="L1757"></a>1757             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1758" name="L1758"></a>1758                 <strong class="reserved">return</strong> <a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(dividend.intVal, xscale, divisor.intVal, yscale, preferredScale, mc);
<a id="L1759" name="L1759"></a>1759             <em class="brace">}</em>
<a id="L1760" name="L1760"></a>1760         <em class="brace">}</em>
<a id="L1761" name="L1761"></a>1761     <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is the integer part
      of the quotient <code>(this / divisor)</code> rounded down.  The
      preferred scale of the result is {@code (this.scale() -
      divisor.scale())}.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @return The integer part of <code>this / divisor</code>.
      @throws ArithmeticException if <code>divisor==0</code>
      @since  1.5</div>
<a id="L1774" name="L1774"></a>1774     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13366.html" title="Multiple referred from 3 places.">divideToIntegralValue</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor) <em class="brace">{</em>
<a id="L1775" name="L1775"></a>1775         <em class="comment">// Calculate preferred scale</em>
<a id="L1776" name="L1776"></a>1776         <strong class="reserved">int</strong> preferredScale = <a href="../S/1464.html#L3874" title="Defined at 3874 in src/java/math/BigDecimal.java.">saturateLong</a>((<strong class="reserved">long</strong>) <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1777" name="L1777"></a>1777         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(divisor) &lt; 0) <em class="brace">{</em>
<a id="L1778" name="L1778"></a>1778             <em class="comment">// much faster when this &lt;&lt; divisor</em>
<a id="L1779" name="L1779"></a>1779             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(preferredScale);
<a id="L1780" name="L1780"></a>1780         <em class="brace">}</em>
<a id="L1781" name="L1781"></a>1781 
<a id="L1782" name="L1782"></a>1782         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0 &amp;&amp; divisor.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() != 0)
<a id="L1783" name="L1783"></a>1783             <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(preferredScale, ROUND_UNNECESSARY);
<a id="L1784" name="L1784"></a>1784 
<a id="L1785" name="L1785"></a>1785         <em class="comment">// Perform a divide with enough digits to round to a correct</em>
<a id="L1786" name="L1786"></a>1786         <em class="comment">// integer value; then remove any fractional digits</em>
<a id="L1787" name="L1787"></a>1787 
<a id="L1788" name="L1788"></a>1788         <strong class="reserved">int</strong> maxDigits = (<strong class="reserved">int</strong>)<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() +
<a id="L1789" name="L1789"></a>1789                                       (<strong class="reserved">long</strong>)<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/12285.html" title="Multiple defined in 2 places.">ceil</a>(10.0*divisor.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>()/3.0) +
<a id="L1790" name="L1790"></a>1790                                       <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>((<strong class="reserved">long</strong>)<strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() - divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>()) + 2,
<a id="L1791" name="L1791"></a>1791                                       <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE);
<a id="L1792" name="L1792"></a>1792         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient = <strong class="reserved">this</strong>.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor, <strong class="reserved">new</strong> <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a>(maxDigits,
<a id="L1793" name="L1793"></a>1793                                                                    <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L142" title="Defined at 142 in src/java/math/RoundingMode.java.">DOWN</a>));
<a id="L1794" name="L1794"></a>1794         <strong class="reserved">if</strong> (quotient.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; 0) <em class="brace">{</em>
<a id="L1795" name="L1795"></a>1795             quotient = quotient.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L142" title="Defined at 142 in src/java/math/RoundingMode.java.">DOWN</a>);
<a id="L1796" name="L1796"></a>1796             quotient = <a href="../S/1464.html#L4404" title="Defined at 4404 in src/java/math/BigDecimal.java.">stripZerosToMatchScale</a>(quotient.intVal, quotient.intCompact, quotient.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L1797" name="L1797"></a>1797         <em class="brace">}</em>
<a id="L1798" name="L1798"></a>1798 
<a id="L1799" name="L1799"></a>1799         <strong class="reserved">if</strong> (quotient.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; preferredScale) <em class="brace">{</em>
<a id="L1800" name="L1800"></a>1800             <em class="comment">// pad with zeros if necessary</em>
<a id="L1801" name="L1801"></a>1801             quotient = quotient.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(preferredScale, ROUND_UNNECESSARY);
<a id="L1802" name="L1802"></a>1802         <em class="brace">}</em>
<a id="L1803" name="L1803"></a>1803 
<a id="L1804" name="L1804"></a>1804         <strong class="reserved">return</strong> quotient;
<a id="L1805" name="L1805"></a>1805     <em class="brace">}</em>
<a id="L1806" name="L1806"></a>1806 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is the integer part
      of <code>(this / divisor)</code>.  Since the integer part of the
      exact quotient does not depend on the rounding mode, the
      rounding mode does not affect the values returned by this
      method.  The preferred scale of the result is
      <code>(this.scale() - divisor.scale())</code>.  An
      <code>ArithmeticException</code> is thrown if the integer part of
      the exact quotient needs more than <code>mc.precision</code>
      digits.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  mc the context to use.
      @return The integer part of <code>this / divisor</code>.
      @throws ArithmeticException if <code>divisor==0</code>
      @throws ArithmeticException if <code>mc.precision</code> {@literal &gt;} 0 and the result
              requires a precision of more than <code>mc.precision</code> digits.
      @since  1.5
      @author Joseph D. Darcy</div>
<a id="L1827" name="L1827"></a>1827     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13366.html" title="Multiple referred from 3 places.">divideToIntegralValue</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1828" name="L1828"></a>1828         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0 || <em class="comment">// exact result</em>
<a id="L1829" name="L1829"></a>1829             (<strong class="reserved">this</strong>.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(divisor) &lt; 0)) <em class="comment">// zero result</em>
<a id="L1830" name="L1830"></a>1830             <strong class="reserved">return</strong> <a href="../D/15000.html" title="Multiple defined in 2 places.">divideToIntegralValue</a>(divisor);
<a id="L1831" name="L1831"></a>1831 
<a id="L1832" name="L1832"></a>1832         <em class="comment">// Calculate preferred scale</em>
<a id="L1833" name="L1833"></a>1833         <strong class="reserved">int</strong> preferredScale = <a href="../S/1464.html#L3874" title="Defined at 3874 in src/java/math/BigDecimal.java.">saturateLong</a>((<strong class="reserved">long</strong>)<strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - divisor.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L1834" name="L1834"></a>1834 
<div class="comment">
          Perform a normal divide to mc.precision digits.  If the
          remainder has absolute value less than the divisor, the
          integer portion of the quotient fits into mc.precision
          digits.  Next, remove any fractional digits from the
          quotient and adjust the scale to the preferred value.</div>
<a id="L1842" name="L1842"></a>1842         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">this</strong>.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(divisor, <strong class="reserved">new</strong> <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a>(mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>, <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L142" title="Defined at 142 in src/java/math/RoundingMode.java.">DOWN</a>));
<a id="L1843" name="L1843"></a>1843 
<a id="L1844" name="L1844"></a>1844         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() &lt; 0) <em class="brace">{</em>
<div class="comment">
              Result is an integer. See if quotient represents the
              full integer portion of the exact quotient; if it does,
              the computed remainder will be less than the divisor.</div>
<a id="L1850" name="L1850"></a>1850             <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> product = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(divisor);
<a id="L1851" name="L1851"></a>1851             <em class="comment">// If the quotient is the full integer value,</em>
<a id="L1852" name="L1852"></a>1852             <em class="comment">// |dividend-product| &lt; |divisor|.</em>
<a id="L1853" name="L1853"></a>1853             <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/35018.html" title="Multiple defined in 10 places.">subtract</a>(product).<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(divisor) &gt;= 0) <em class="brace">{</em>
<a id="L1854" name="L1854"></a>1854                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Division impossible");
<a id="L1855" name="L1855"></a>1855             <em class="brace">}</em>
<a id="L1856" name="L1856"></a>1856         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() &gt; 0) <em class="brace">{</em>
<div class="comment">
              Integer portion of quotient will fit into precision
              digits; recompute quotient to scale 0 to avoid double
              rounding and then try to adjust, if necessary.</div>
<a id="L1862" name="L1862"></a>1862             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L142" title="Defined at 142 in src/java/math/RoundingMode.java.">DOWN</a>);
<a id="L1863" name="L1863"></a>1863         <em class="brace">}</em>
<a id="L1864" name="L1864"></a>1864         <em class="comment">// else result.scale() == 0;</em>
<a id="L1865" name="L1865"></a>1865 
<a id="L1866" name="L1866"></a>1866         <strong class="reserved">int</strong> precisionDiff;
<a id="L1867" name="L1867"></a>1867         <strong class="reserved">if</strong> ((preferredScale &gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>()) &amp;&amp;
<a id="L1868" name="L1868"></a>1868             (precisionDiff = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> - <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>()) &gt; 0) <em class="brace">{</em>
<a id="L1869" name="L1869"></a>1869             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>() +
<a id="L1870" name="L1870"></a>1870                                    <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(precisionDiff, preferredScale - <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) );
<a id="L1871" name="L1871"></a>1871         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1872" name="L1872"></a>1872             <strong class="reserved">return</strong> <a href="../S/1464.html#L4404" title="Defined at 4404 in src/java/math/BigDecimal.java.">stripZerosToMatchScale</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.intVal,<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.intCompact,<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,preferredScale);
<a id="L1873" name="L1873"></a>1873         <em class="brace">}</em>
<a id="L1874" name="L1874"></a>1874     <em class="brace">}</em>
<a id="L1875" name="L1875"></a>1875 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(this % divisor)</code>.
      <p>The remainder is given by
      <code>this.subtract(this.divideToIntegralValue(divisor).multiply(divisor))</code>.
      Note that this is not the modulo operation (the result can be
      negative).
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @return <code>this % divisor</code>.
      @throws ArithmeticException if <code>divisor==0</code>
      @since  1.5</p></div>
<a id="L1889" name="L1889"></a>1889     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/25873.html" title="Multiple referred from 47 places.">remainder</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor) <em class="brace">{</em>
<a id="L1890" name="L1890"></a>1890         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divrem[] = <strong class="reserved">this</strong>.<a href="../D/14988.html" title="Multiple defined in 3 places.">divideAndRemainder</a>(divisor);
<a id="L1891" name="L1891"></a>1891         <strong class="reserved">return</strong> divrem[1];
<a id="L1892" name="L1892"></a>1892     <em class="brace">}</em>
<a id="L1893" name="L1893"></a>1893 
<a id="L1894" name="L1894"></a>1894 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (this %
      divisor)}, with rounding according to the context settings.
      The <code>MathContext</code> settings affect the implicit divide
      used to compute the remainder.  The remainder computation
      itself is by definition exact.  Therefore, the remainder may
      contain more than <code>mc.getPrecision()</code> digits.
      <p>The remainder is given by
      {@code this.subtract(this.divideToIntegralValue(divisor,
      mc).multiply(divisor))}.  Note that this is not the modulo
      operation (the result can be negative).
      @param  divisor value by which this <code>BigDecimal</code> is to be divided.
      @param  mc the context to use.
      @return <code>this % divisor</code>, rounded as necessary.
      @throws ArithmeticException if <code>divisor==0</code>
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>, or <code>mc.precision</code>
              {@literal &gt;} 0 and the result of <code>this.divideToIntgralValue(divisor)</code> would
              require a precision of more than <code>mc.precision</code> digits.
      @see    #divideToIntegralValue(java.math.BigDecimal, java.math.MathContext)
      @since  1.5</p></div>
<a id="L1919" name="L1919"></a>1919     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/25873.html" title="Multiple referred from 47 places.">remainder</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1920" name="L1920"></a>1920         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divrem[] = <strong class="reserved">this</strong>.<a href="../D/14988.html" title="Multiple defined in 3 places.">divideAndRemainder</a>(divisor, mc);
<a id="L1921" name="L1921"></a>1921         <strong class="reserved">return</strong> divrem[1];
<a id="L1922" name="L1922"></a>1922     <em class="brace">}</em>
<a id="L1923" name="L1923"></a>1923 
<div class="comment">
      Returns a two-element <code>BigDecimal</code> array containing the
      result of <code>divideToIntegralValue</code> followed by the result of
      <code>remainder</code> on the two operands.
      <p>Note that if both the integer quotient and remainder are
      needed, this method is faster than using the
      <code>divideToIntegralValue</code> and <code>remainder</code> methods
      separately because the division need only be carried out once.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided,
              and the remainder computed.
      @return a two element <code>BigDecimal</code> array: the quotient
              (the result of <code>divideToIntegralValue</code>) is the initial element
              and the remainder is the final element.
      @throws ArithmeticException if <code>divisor==0</code>
      @see    #divideToIntegralValue(java.math.BigDecimal, java.math.MathContext)
      @see    #remainder(java.math.BigDecimal, java.math.MathContext)
      @since  1.5</p></div>
<a id="L1944" name="L1944"></a>1944     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../R/13354.html" title="Multiple referred from 6 places.">divideAndRemainder</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor) <em class="brace">{</em>
<a id="L1945" name="L1945"></a>1945         <em class="comment">// we use the identity  x = i * y + r to determine r</em>
<a id="L1946" name="L1946"></a>1946         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[2];
<a id="L1947" name="L1947"></a>1947 
<a id="L1948" name="L1948"></a>1948         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[0] = <strong class="reserved">this</strong>.<a href="../D/15000.html" title="Multiple defined in 2 places.">divideToIntegralValue</a>(divisor);
<a id="L1949" name="L1949"></a>1949         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[1] = <strong class="reserved">this</strong>.<a href="../D/35018.html" title="Multiple defined in 10 places.">subtract</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[0].<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(divisor));
<a id="L1950" name="L1950"></a>1950         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1951" name="L1951"></a>1951     <em class="brace">}</em>
<a id="L1952" name="L1952"></a>1952 
<div class="comment">
      Returns a two-element <code>BigDecimal</code> array containing the
      result of <code>divideToIntegralValue</code> followed by the result of
      <code>remainder</code> on the two operands calculated with rounding
      according to the context settings.
      <p>Note that if both the integer quotient and remainder are
      needed, this method is faster than using the
      <code>divideToIntegralValue</code> and <code>remainder</code> methods
      separately because the division need only be carried out once.
      @param  divisor value by which this <code>BigDecimal</code> is to be divided,
              and the remainder computed.
      @param  mc the context to use.
      @return a two element <code>BigDecimal</code> array: the quotient
              (the result of <code>divideToIntegralValue</code>) is the
              initial element and the remainder is the final element.
      @throws ArithmeticException if <code>divisor==0</code>
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>, or <code>mc.precision</code>
              {@literal &gt;} 0 and the result of <code>this.divideToIntgralValue(divisor)</code> would
              require a precision of more than <code>mc.precision</code> digits.
      @see    #divideToIntegralValue(java.math.BigDecimal, java.math.MathContext)
      @see    #remainder(java.math.BigDecimal, java.math.MathContext)
      @since  1.5</p></div>
<a id="L1979" name="L1979"></a>1979     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../R/13354.html" title="Multiple referred from 6 places.">divideAndRemainder</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> divisor, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L1980" name="L1980"></a>1980         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0)
<a id="L1981" name="L1981"></a>1981             <strong class="reserved">return</strong> <a href="../D/14988.html" title="Multiple defined in 3 places.">divideAndRemainder</a>(divisor);
<a id="L1982" name="L1982"></a>1982 
<a id="L1983" name="L1983"></a>1983         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[2];
<a id="L1984" name="L1984"></a>1984         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> lhs = <strong class="reserved">this</strong>;
<a id="L1985" name="L1985"></a>1985 
<a id="L1986" name="L1986"></a>1986         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[0] = lhs.<a href="../D/15000.html" title="Multiple defined in 2 places.">divideToIntegralValue</a>(divisor, mc);
<a id="L1987" name="L1987"></a>1987         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[1] = lhs.<a href="../D/35018.html" title="Multiple defined in 10 places.">subtract</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[0].<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(divisor));
<a id="L1988" name="L1988"></a>1988         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1989" name="L1989"></a>1989     <em class="brace">}</em>
<a id="L1990" name="L1990"></a>1990 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is
      <tt>(this<sup>n</sup>)</tt>, The power is computed exactly, to
      unlimited precision.
      <p>The parameter <code>n</code> must be in the range 0 through
      999999999, inclusive.  <code>ZERO.pow(0)</code> returns {@link
      #ONE}.
      Note that future releases may expand the allowable exponent
      range of this method.
      @param  n power to raise this <code>BigDecimal</code> to.
      @return <tt>this<sup>n</sup></tt>
      @throws ArithmeticException if <code>n</code> is out of range.
      @since  1.5</p></div>
<a id="L2008" name="L2008"></a>2008     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/24874.html" title="Multiple referred from 19 places.">pow</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L2009" name="L2009"></a>2009         <strong class="reserved">if</strong> (n &lt; 0 || n &gt; 999999999)
<a id="L2010" name="L2010"></a>2010             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Invalid operation");
<a id="L2011" name="L2011"></a>2011         <em class="comment">// No need to calculate pow(n) if result will over/underflow.</em>
<a id="L2012" name="L2012"></a>2012         <em class="comment">// Don't attempt to support "supernormal" numbers.</em>
<a id="L2013" name="L2013"></a>2013         <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> * n);
<a id="L2014" name="L2014"></a>2014         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<strong class="reserved">this</strong>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>().<a href="../D/29502.html" title="Multiple defined in 5 places.">pow</a>(n), newScale);
<a id="L2015" name="L2015"></a>2015     <em class="brace">}</em>
<a id="L2016" name="L2016"></a>2016 
<a id="L2017" name="L2017"></a>2017 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is
      <tt>(this<sup>n</sup>)</tt>.  The current implementation uses
      the core algorithm defined in ANSI standard X3.274-1996 with
      rounding according to the context settings.  In general, the
      returned numerical value is within two ulps of the exact
      numerical value for the chosen precision.  Note that future
      releases may use a different algorithm with a decreased
      allowable error bound and increased allowable exponent range.
      <p>The X3.274-1996 algorithm is:
      </p><ul><li> An <code>ArithmeticException</code> exception is thrown if
       <ul><li><code>abs(n) &gt; 999999999</code>
         </li><li><code>mc.precision == 0</code> and <code>n &lt; 0</code>
         </li><li><code>mc.precision &gt; 0</code> and <code>n</code> has more than
         <code>mc.precision</code> decimal digits
       </li></ul>
      </li><li> if <code>n</code> is zero, {@link #ONE} is returned even if
      <code>this</code> is zero, otherwise
      <ul><li> if <code>n</code> is positive, the result is calculated via
        the repeated squaring technique into a single accumulator.
        The individual multiplications with the accumulator use the
        same math context settings as in <code>mc</code> except for a
        precision increased to <code>mc.precision + elength + 1</code>
        where <code>elength</code> is the number of decimal digits in
        <code>n</code>.
        </li><li> if <code>n</code> is negative, the result is calculated as if
        <code>n</code> were positive; this value is then divided into one
        using the working precision specified above.
        </li><li> The final value from either the positive or negative case
        is then rounded to the destination precision.
        </li></ul>
      </li></ul>
      @param  n power to raise this <code>BigDecimal</code> to.
      @param  mc the context to use.
      @return <tt>this<sup>n</sup></tt> using the ANSI standard X3.274-1996
              algorithm
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>, or <code>n</code> is out
              of range.
      @since  1.5</div>
<a id="L2068" name="L2068"></a>2068     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/24874.html" title="Multiple referred from 19 places.">pow</a>(<strong class="reserved">int</strong> n, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L2069" name="L2069"></a>2069         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0)
<a id="L2070" name="L2070"></a>2070             <strong class="reserved">return</strong> <a href="../D/29502.html" title="Multiple defined in 5 places.">pow</a>(n);
<a id="L2071" name="L2071"></a>2071         <strong class="reserved">if</strong> (n &lt; -999999999 || n &gt; 999999999)
<a id="L2072" name="L2072"></a>2072             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Invalid operation");
<a id="L2073" name="L2073"></a>2073         <strong class="reserved">if</strong> (n == 0)
<a id="L2074" name="L2074"></a>2074             <strong class="reserved">return</strong> ONE;                      <em class="comment">// x**0 == 1 in X3.274</em>
<a id="L2075" name="L2075"></a>2075         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> lhs = <strong class="reserved">this</strong>;
<a id="L2076" name="L2076"></a>2076         <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> workmc = mc;           <em class="comment">// working settings</em>
<a id="L2077" name="L2077"></a>2077         <strong class="reserved">int</strong> mag = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(n);               <em class="comment">// magnitude of n</em>
<a id="L2078" name="L2078"></a>2078         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> &gt; 0) <em class="brace">{</em>
<a id="L2079" name="L2079"></a>2079             <strong class="reserved">int</strong> elength = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(mag); <em class="comment">// length of n in digits</em>
<a id="L2080" name="L2080"></a>2080             <strong class="reserved">if</strong> (elength &gt; mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>)        <em class="comment">// X3.274 rule</em>
<a id="L2081" name="L2081"></a>2081                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Invalid operation");
<a id="L2082" name="L2082"></a>2082             workmc = <strong class="reserved">new</strong> <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a>(mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> + elength + 1,
<a id="L2083" name="L2083"></a>2083                                       mc.roundingMode);
<a id="L2084" name="L2084"></a>2084         <em class="brace">}</em>
<a id="L2085" name="L2085"></a>2085         <em class="comment">// ready to carry out power calculation...</em>
<a id="L2086" name="L2086"></a>2086         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> acc = ONE;           <em class="comment">// accumulator</em>
<a id="L2087" name="L2087"></a>2087         <strong class="reserved">boolean</strong> seenbit = <strong class="reserved">false</strong>;        <em class="comment">// set once we've seen a 1-bit</em>
<a id="L2088" name="L2088"></a>2088         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=1;;i++) <em class="brace">{</em>            <em class="comment">// for each bit [top bit ignored]</em>
<a id="L2089" name="L2089"></a>2089             mag += mag;                 <em class="comment">// shift left 1 bit</em>
<a id="L2090" name="L2090"></a>2090             <strong class="reserved">if</strong> (mag &lt; 0) <em class="brace">{</em>              <em class="comment">// top bit is set</em>
<a id="L2091" name="L2091"></a>2091                 seenbit = <strong class="reserved">true</strong>;         <em class="comment">// OK, we're off</em>
<a id="L2092" name="L2092"></a>2092                 acc = acc.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(lhs, workmc); <em class="comment">// acc=acc*x</em>
<a id="L2093" name="L2093"></a>2093             <em class="brace">}</em>
<a id="L2094" name="L2094"></a>2094             <strong class="reserved">if</strong> (i == 31)
<a id="L2095" name="L2095"></a>2095                 <strong class="reserved">break</strong>;                  <em class="comment">// that was the last bit</em>
<a id="L2096" name="L2096"></a>2096             <strong class="reserved">if</strong> (seenbit)
<a id="L2097" name="L2097"></a>2097                 acc=acc.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(acc, workmc);   <em class="comment">// acc=acc*acc [square]</em>
<a id="L2098" name="L2098"></a>2098                 <em class="comment">// else (!seenbit) no point in squaring ONE</em>
<a id="L2099" name="L2099"></a>2099         <em class="brace">}</em>
<a id="L2100" name="L2100"></a>2100         <em class="comment">// if negative n, calculate the reciprocal using working precision</em>
<a id="L2101" name="L2101"></a>2101         <strong class="reserved">if</strong> (n &lt; 0) <em class="comment">// [hence mc.precision&gt;0]</em>
<a id="L2102" name="L2102"></a>2102             acc=ONE.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(acc, workmc);
<a id="L2103" name="L2103"></a>2103         <em class="comment">// round to final precision and strip zeros</em>
<a id="L2104" name="L2104"></a>2104         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(acc, mc);
<a id="L2105" name="L2105"></a>2105     <em class="brace">}</em>
<a id="L2106" name="L2106"></a>2106 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is the absolute value
      of this <code>BigDecimal</code>, and whose scale is
      <code>this.scale()</code>.
      @return <code>abs(this)</code></div>
<a id="L2114" name="L2114"></a>2114     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9500.html" title="Multiple referred from 183 places.">abs</a>() <em class="brace">{</em>
<a id="L2115" name="L2115"></a>2115         <strong class="reserved">return</strong> (<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() &lt; 0 ? <a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>() : <strong class="reserved">this</strong>);
<a id="L2116" name="L2116"></a>2116     <em class="brace">}</em>
<a id="L2117" name="L2117"></a>2117 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is the absolute value
      of this <code>BigDecimal</code>, with rounding according to the
      context settings.
      @param mc the context to use.
      @return <code>abs(this)</code>, rounded as necessary.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since 1.5</div>
<a id="L2129" name="L2129"></a>2129     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9500.html" title="Multiple referred from 183 places.">abs</a>(<a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L2130" name="L2130"></a>2130         <strong class="reserved">return</strong> (<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() &lt; 0 ? <a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>(mc) : <a href="../D/29361.html" title="Multiple defined in 51 places.">plus</a>(mc));
<a id="L2131" name="L2131"></a>2131     <em class="brace">}</em>
<a id="L2132" name="L2132"></a>2132 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(-this)</code>,
      and whose scale is <code>this.scale()</code>.
      @return <code>-this</code>.</div>
<a id="L2139" name="L2139"></a>2139     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23510.html" title="Multiple referred from 53 places.">negate</a>() <em class="brace">{</em>
<a id="L2140" name="L2140"></a>2140         <strong class="reserved">if</strong> (intCompact == INFLATED) <em class="brace">{</em>
<a id="L2141" name="L2141"></a>2141             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>(), INFLATED, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>);
<a id="L2142" name="L2142"></a>2142         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2143" name="L2143"></a>2143             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(-intCompact, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>);
<a id="L2144" name="L2144"></a>2144         <em class="brace">}</em>
<a id="L2145" name="L2145"></a>2145     <em class="brace">}</em>
<a id="L2146" name="L2146"></a>2146 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(-this)</code>,
      with rounding according to the context settings.
      @param mc the context to use.
      @return <code>-this</code>, rounded as necessary.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @since  1.5</div>
<a id="L2157" name="L2157"></a>2157     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23510.html" title="Multiple referred from 53 places.">negate</a>(<a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L2158" name="L2158"></a>2158         <strong class="reserved">return</strong> <a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>().<a href="../D/29361.html" title="Multiple defined in 51 places.">plus</a>(mc);
<a id="L2159" name="L2159"></a>2159     <em class="brace">}</em>
<a id="L2160" name="L2160"></a>2160 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(+this)</code>, and whose
      scale is <code>this.scale()</code>.
      <p>This method, which simply returns this <code>BigDecimal</code>
      is included for symmetry with the unary minus method {@link
      #negate()}.
      @return <code>this</code>.
      @see #negate()
      @since  1.5</p></div>
<a id="L2173" name="L2173"></a>2173     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/24754.html" title="Multiple referred from 106 places.">plus</a>() <em class="brace">{</em>
<a id="L2174" name="L2174"></a>2174         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L2175" name="L2175"></a>2175     <em class="brace">}</em>
<a id="L2176" name="L2176"></a>2176 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is <code>(+this)</code>,
      with rounding according to the context settings.
      <p>The effect of this method is identical to that of the {@link
      #round(MathContext)} method.
      @param mc the context to use.
      @return <code>this</code>, rounded as necessary.  A zero result will
              have a scale of 0.
      @throws ArithmeticException if the result is inexact but the
              rounding mode is <code>UNNECESSARY</code>.
      @see    #round(MathContext)
      @since  1.5</p></div>
<a id="L2192" name="L2192"></a>2192     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/24754.html" title="Multiple referred from 106 places.">plus</a>(<a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L2193" name="L2193"></a>2193         <strong class="reserved">if</strong> (mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> == 0)                 <em class="comment">// no rounding please</em>
<a id="L2194" name="L2194"></a>2194             <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L2195" name="L2195"></a>2195         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(<strong class="reserved">this</strong>, mc);
<a id="L2196" name="L2196"></a>2196     <em class="brace">}</em>
<a id="L2197" name="L2197"></a>2197 
<div class="comment">
      Returns the signum function of this <code>BigDecimal</code>.
      @return -1, 0, or 1 as the value of this <code>BigDecimal</code>
              is negative, zero, or positive.</div>
<a id="L2204" name="L2204"></a>2204     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28621.html" title="Multiple referred from 227 places.">signum</a>() <em class="brace">{</em>
<a id="L2205" name="L2205"></a>2205         <strong class="reserved">return</strong> (intCompact != INFLATED)?
<a id="L2206" name="L2206"></a>2206             <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(intCompact):
<a id="L2207" name="L2207"></a>2207             intVal.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>();
<a id="L2208" name="L2208"></a>2208     <em class="brace">}</em>
<a id="L2209" name="L2209"></a>2209 
<div class="comment">
      Returns the <i>scale</i> of this <code>BigDecimal</code>.  If zero
      or positive, the scale is the number of digits to the right of
      the decimal point.  If negative, the unscaled value of the
      number is multiplied by ten to the power of the negation of the
      scale.  For example, a scale of <code>-3</code> means the unscaled
      value is multiplied by 1000.
      @return the scale of this <code>BigDecimal</code>.</div>
<a id="L2220" name="L2220"></a>2220     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/26604.html" title="Multiple referred from 475 places.">scale</a>() <em class="brace">{</em>
<a id="L2221" name="L2221"></a>2221         <strong class="reserved">return</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L2222" name="L2222"></a>2222     <em class="brace">}</em>
<a id="L2223" name="L2223"></a>2223 
<div class="comment">
      Returns the <i>precision</i> of this <code>BigDecimal</code>.  (The
      precision is the number of digits in the unscaled value.)
      <p>The precision of a zero value is 1.
      @return the precision of this <code>BigDecimal</code>.
      @since  1.5</p></div>
<a id="L2233" name="L2233"></a>2233     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/24903.html" title="Multiple referred from 166 places.">precision</a>() <em class="brace">{</em>
<a id="L2234" name="L2234"></a>2234         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L2235" name="L2235"></a>2235         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == 0) <em class="brace">{</em>
<a id="L2236" name="L2236"></a>2236             <strong class="reserved">long</strong> s = intCompact;
<a id="L2237" name="L2237"></a>2237             <strong class="reserved">if</strong> (s != INFLATED)
<a id="L2238" name="L2238"></a>2238                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(s);
<a id="L2239" name="L2239"></a>2239             <strong class="reserved">else</strong>
<a id="L2240" name="L2240"></a>2240                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L2241" name="L2241"></a>2241             <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L2242" name="L2242"></a>2242         <em class="brace">}</em>
<a id="L2243" name="L2243"></a>2243         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L2244" name="L2244"></a>2244     <em class="brace">}</em>
<a id="L2245" name="L2245"></a>2245 
<a id="L2246" name="L2246"></a>2246 
<div class="comment">
      Returns a <code>BigInteger</code> whose value is the <i>unscaled
      value</i> of this <code>BigDecimal</code>.  (Computes <tt>(this *
      10<sup>this.scale()</sup>)</tt>.)
      @return the unscaled value of this <code>BigDecimal</code>.
      @since  1.2</div>
<a id="L2255" name="L2255"></a>2255     <strong class="reserved">public</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/29774.html" title="Multiple referred from 9 places.">unscaledValue</a>() <em class="brace">{</em>
<a id="L2256" name="L2256"></a>2256         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>();
<a id="L2257" name="L2257"></a>2257     <em class="brace">}</em>
<a id="L2258" name="L2258"></a>2258 
<a id="L2259" name="L2259"></a>2259     <em class="comment">// Rounding Modes</em>
<a id="L2260" name="L2260"></a>2260 
<div class="comment">
      Rounding mode to round away from zero.  Always increments the
      digit prior to a nonzero discarded fraction.  Note that this rounding
      mode never decreases the magnitude of the calculated value.</div>
<a id="L2266" name="L2266"></a>2266     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_UP =           0;
<a id="L2267" name="L2267"></a>2267 
<div class="comment">
      Rounding mode to round towards zero.  Never increments the digit
      prior to a discarded fraction (i.e., truncates).  Note that this
      rounding mode never increases the magnitude of the calculated value.</div>
<a id="L2273" name="L2273"></a>2273     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_DOWN =         1;
<a id="L2274" name="L2274"></a>2274 
<div class="comment">
      Rounding mode to round towards positive infinity.  If the
      <code>BigDecimal</code> is positive, behaves as for
      <code>ROUND_UP</code>; if negative, behaves as for
      <code>ROUND_DOWN</code>.  Note that this rounding mode never
      decreases the calculated value.</div>
<a id="L2282" name="L2282"></a>2282     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_CEILING =      2;
<a id="L2283" name="L2283"></a>2283 
<div class="comment">
      Rounding mode to round towards negative infinity.  If the
      <code>BigDecimal</code> is positive, behave as for
      <code>ROUND_DOWN</code>; if negative, behave as for
      <code>ROUND_UP</code>.  Note that this rounding mode never
      increases the calculated value.</div>
<a id="L2291" name="L2291"></a>2291     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_FLOOR =        3;
<a id="L2292" name="L2292"></a>2292 
<div class="comment">
      Rounding mode to round towards {@literal "nearest neighbor"}
      unless both neighbors are equidistant, in which case round up.
      Behaves as for <code>ROUND_UP</code> if the discarded fraction is
      ≥ 0.5; otherwise, behaves as for <code>ROUND_DOWN</code>.  Note
      that this is the rounding mode that most of us were taught in
      grade school.</div>
<a id="L2301" name="L2301"></a>2301     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_HALF_UP =      4;
<a id="L2302" name="L2302"></a>2302 
<div class="comment">
      Rounding mode to round towards {@literal "nearest neighbor"}
      unless both neighbors are equidistant, in which case round
      down.  Behaves as for <code>ROUND_UP</code> if the discarded
      fraction is {@literal &gt;} 0.5; otherwise, behaves as for
      <code>ROUND_DOWN</code>.</div>
<a id="L2310" name="L2310"></a>2310     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_HALF_DOWN =    5;
<a id="L2311" name="L2311"></a>2311 
<div class="comment">
      Rounding mode to round towards the {@literal "nearest neighbor"}
      unless both neighbors are equidistant, in which case, round
      towards the even neighbor.  Behaves as for
      <code>ROUND_HALF_UP</code> if the digit to the left of the
      discarded fraction is odd; behaves as for
      <code>ROUND_HALF_DOWN</code> if it's even.  Note that this is the
      rounding mode that minimizes cumulative error when applied
      repeatedly over a sequence of calculations.</div>
<a id="L2322" name="L2322"></a>2322     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_HALF_EVEN =    6;
<a id="L2323" name="L2323"></a>2323 
<div class="comment">
      Rounding mode to assert that the requested operation has an exact
      result, hence no rounding is necessary.  If this rounding mode is
      specified on an operation that yields an inexact result, an
      <code>ArithmeticException</code> is thrown.</div>
<a id="L2330" name="L2330"></a>2330     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> ROUND_UNNECESSARY =  7;
<a id="L2331" name="L2331"></a>2331 
<a id="L2332" name="L2332"></a>2332 
<a id="L2333" name="L2333"></a>2333     <em class="comment">// Scaling/Rounding Operations</em>
<a id="L2334" name="L2334"></a>2334 
<div class="comment">
      Returns a <code>BigDecimal</code> rounded according to the
      <code>MathContext</code> settings.  If the precision setting is 0 then
      no rounding takes place.
      <p>The effect of this method is identical to that of the
      {@link #plus(MathContext)} method.
      @param mc the context to use.
      @return a <code>BigDecimal</code> rounded according to the
              <code>MathContext</code> settings.
      @throws ArithmeticException if the rounding mode is
              <code>UNNECESSARY</code> and the
              <code>BigDecimal</code>  operation would require rounding.
      @see    #plus(MathContext)
      @since  1.5</p></div>
<a id="L2352" name="L2352"></a>2352     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/26523.html" title="Multiple referred from 88 places.">round</a>(<a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L2353" name="L2353"></a>2353         <strong class="reserved">return</strong> <a href="../D/29361.html" title="Multiple defined in 51 places.">plus</a>(mc);
<a id="L2354" name="L2354"></a>2354     <em class="brace">}</em>
<a id="L2355" name="L2355"></a>2355 
<div class="comment">
      Returns a <code>BigDecimal</code> whose scale is the specified
      value, and whose unscaled value is determined by multiplying or
      dividing this <code>BigDecimal</code>'s unscaled value by the
      appropriate power of ten to maintain its overall value.  If the
      scale is reduced by the operation, the unscaled value must be
      divided (rather than multiplied), and the value may be changed;
      in this case, the specified rounding mode is applied to the
      division.
      <p>Note that since BigDecimal objects are immutable, calls of
      this method do <i>not</i> result in the original object being
      modified, contrary to the usual convention of having methods
      named <tt>set<i>X</i></tt> mutate field <i><code>X</code></i>.
      Instead, <code>setScale</code> returns an object with the proper
      scale; the returned object may or may not be newly allocated.
      @param  newScale scale of the <code>BigDecimal</code> value to be returned.
      @param  roundingMode The rounding mode to apply.
      @return a <code>BigDecimal</code> whose scale is the specified value,
              and whose unscaled value is determined by multiplying or
              dividing this <code>BigDecimal</code>'s unscaled value by the
              appropriate power of ten to maintain its overall value.
      @throws ArithmeticException if <code>roundingMode==UNNECESSARY</code>
              and the specified scaling operation would require
              rounding.
      @see    RoundingMode
      @since  1.5</p></div>
<a id="L2385" name="L2385"></a>2385     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/28098.html" title="Multiple referred from 22 places.">setScale</a>(<strong class="reserved">int</strong> newScale, <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a> roundingMode) <em class="brace">{</em>
<a id="L2386" name="L2386"></a>2386         <strong class="reserved">return</strong> <a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(newScale, roundingMode.oldMode);
<a id="L2387" name="L2387"></a>2387     <em class="brace">}</em>
<a id="L2388" name="L2388"></a>2388 
<div class="comment">
      Returns a <code>BigDecimal</code> whose scale is the specified
      value, and whose unscaled value is determined by multiplying or
      dividing this <code>BigDecimal</code>'s unscaled value by the
      appropriate power of ten to maintain its overall value.  If the
      scale is reduced by the operation, the unscaled value must be
      divided (rather than multiplied), and the value may be changed;
      in this case, the specified rounding mode is applied to the
      division.
      <p>Note that since BigDecimal objects are immutable, calls of
      this method do <i>not</i> result in the original object being
      modified, contrary to the usual convention of having methods
      named <tt>set<i>X</i></tt> mutate field <i><code>X</code></i>.
      Instead, <code>setScale</code> returns an object with the proper
      scale; the returned object may or may not be newly allocated.
      </p><p>The new {@link #setScale(int, RoundingMode)} method should
      be used in preference to this legacy method.
      @param  newScale scale of the <code>BigDecimal</code> value to be returned.
      @param  roundingMode The rounding mode to apply.
      @return a <code>BigDecimal</code> whose scale is the specified value,
              and whose unscaled value is determined by multiplying or
              dividing this <code>BigDecimal</code>'s unscaled value by the
              appropriate power of ten to maintain its overall value.
      @throws ArithmeticException if <code>roundingMode==ROUND_UNNECESSARY</code>
              and the specified scaling operation would require
              rounding.
      @throws IllegalArgumentException if <code>roundingMode</code> does not
              represent a valid rounding mode.
      @see    #ROUND_UP
      @see    #ROUND_DOWN
      @see    #ROUND_CEILING
      @see    #ROUND_FLOOR
      @see    #ROUND_HALF_UP
      @see    #ROUND_HALF_DOWN
      @see    #ROUND_HALF_EVEN
      @see    #ROUND_UNNECESSARY</p></div>
<a id="L2429" name="L2429"></a>2429     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/28098.html" title="Multiple referred from 22 places.">setScale</a>(<strong class="reserved">int</strong> newScale, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L2430" name="L2430"></a>2430         <strong class="reserved">if</strong> (roundingMode &lt; ROUND_UP || roundingMode &gt; ROUND_UNNECESSARY)
<a id="L2431" name="L2431"></a>2431             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Invalid rounding mode");
<a id="L2432" name="L2432"></a>2432 
<a id="L2433" name="L2433"></a>2433         <strong class="reserved">int</strong> oldScale = <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L2434" name="L2434"></a>2434         <strong class="reserved">if</strong> (newScale == oldScale)        <em class="comment">// easy case</em>
<a id="L2435" name="L2435"></a>2435             <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L2436" name="L2436"></a>2436         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0)            <em class="comment">// zero can have any scale</em>
<a id="L2437" name="L2437"></a>2437             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(newScale);
<a id="L2438" name="L2438"></a>2438         <strong class="reserved">if</strong>(<strong class="reserved">this</strong>.intCompact!=INFLATED) <em class="brace">{</em>
<a id="L2439" name="L2439"></a>2439             <strong class="reserved">long</strong> rs = <strong class="reserved">this</strong>.intCompact;
<a id="L2440" name="L2440"></a>2440             <strong class="reserved">if</strong> (newScale &gt; oldScale) <em class="brace">{</em>
<a id="L2441" name="L2441"></a>2441                 <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>) newScale - oldScale);
<a id="L2442" name="L2442"></a>2442                 <strong class="reserved">if</strong> ((rs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(rs, raise)) != INFLATED) <em class="brace">{</em>
<a id="L2443" name="L2443"></a>2443                     <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(rs,newScale);
<a id="L2444" name="L2444"></a>2444                 <em class="brace">}</em>
<a id="L2445" name="L2445"></a>2445                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(raise);
<a id="L2446" name="L2446"></a>2446                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(rb, INFLATED, newScale, (<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> &gt; 0) ? <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> + raise : 0);
<a id="L2447" name="L2447"></a>2447             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2448" name="L2448"></a>2448                 <em class="comment">// newScale &lt; oldScale -- drop some digits</em>
<a id="L2449" name="L2449"></a>2449                 <em class="comment">// Can't predict the precision due to the effect of rounding.</em>
<a id="L2450" name="L2450"></a>2450                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>) oldScale - newScale);
<a id="L2451" name="L2451"></a>2451                 <strong class="reserved">if</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &lt; LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L2452" name="L2452"></a>2452                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rs, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], newScale, roundingMode, newScale);
<a id="L2453" name="L2453"></a>2453                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2454" name="L2454"></a>2454                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<strong class="reserved">this</strong>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>(), <a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>), newScale, roundingMode, newScale);
<a id="L2455" name="L2455"></a>2455                 <em class="brace">}</em>
<a id="L2456" name="L2456"></a>2456             <em class="brace">}</em>
<a id="L2457" name="L2457"></a>2457         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2458" name="L2458"></a>2458             <strong class="reserved">if</strong> (newScale &gt; oldScale) <em class="brace">{</em>
<a id="L2459" name="L2459"></a>2459                 <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>) newScale - oldScale);
<a id="L2460" name="L2460"></a>2460                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(<strong class="reserved">this</strong>.intVal,raise);
<a id="L2461" name="L2461"></a>2461                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(rb, INFLATED, newScale, (<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> &gt; 0) ? <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> + raise : 0);
<a id="L2462" name="L2462"></a>2462             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2463" name="L2463"></a>2463                 <em class="comment">// newScale &lt; oldScale -- drop some digits</em>
<a id="L2464" name="L2464"></a>2464                 <em class="comment">// Can't predict the precision due to the effect of rounding.</em>
<a id="L2465" name="L2465"></a>2465                 <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>) oldScale - newScale);
<a id="L2466" name="L2466"></a>2466                 <strong class="reserved">if</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &lt; LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L2467" name="L2467"></a>2467                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<strong class="reserved">this</strong>.intVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], newScale, roundingMode,
<a id="L2468" name="L2468"></a>2468                                           newScale);
<a id="L2469" name="L2469"></a>2469                 <strong class="reserved">else</strong>
<a id="L2470" name="L2470"></a>2470                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<strong class="reserved">this</strong>.intVal,  <a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>), newScale, roundingMode, newScale);
<a id="L2471" name="L2471"></a>2471             <em class="brace">}</em>
<a id="L2472" name="L2472"></a>2472         <em class="brace">}</em>
<a id="L2473" name="L2473"></a>2473     <em class="brace">}</em>
<a id="L2474" name="L2474"></a>2474 
<div class="comment">
      Returns a <code>BigDecimal</code> whose scale is the specified
      value, and whose value is numerically equal to this
      <code>BigDecimal</code>'s.  Throws an <code>ArithmeticException</code>
      if this is not possible.
      <p>This call is typically used to increase the scale, in which
      case it is guaranteed that there exists a <code>BigDecimal</code>
      of the specified scale and the correct value.  The call can
      also be used to reduce the scale if the caller knows that the
      <code>BigDecimal</code> has sufficiently many zeros at the end of
      its fractional part (i.e., factors of ten in its integer value)
      to allow for the rescaling without changing its value.
      </p><p>This method returns the same result as the two-argument
      versions of <code>setScale</code>, but saves the caller the trouble
      of specifying a rounding mode in cases where it is irrelevant.
      </p><p>Note that since <code>BigDecimal</code> objects are immutable,
      calls of this method do <i>not</i> result in the original
      object being modified, contrary to the usual convention of
      having methods named <tt>set<i>X</i></tt> mutate field
      <i><code>X</code></i>.  Instead, <code>setScale</code> returns an
      object with the proper scale; the returned object may or may
      not be newly allocated.
      @param  newScale scale of the <code>BigDecimal</code> value to be returned.
      @return a <code>BigDecimal</code> whose scale is the specified value, and
              whose unscaled value is determined by multiplying or dividing
              this <code>BigDecimal</code>'s unscaled value by the appropriate
              power of ten to maintain its overall value.
      @throws ArithmeticException if the specified scaling operation would
              require rounding.
      @see    #setScale(int, int)
      @see    #setScale(int, RoundingMode)</p></div>
<a id="L2511" name="L2511"></a>2511     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/28098.html" title="Multiple referred from 22 places.">setScale</a>(<strong class="reserved">int</strong> newScale) <em class="brace">{</em>
<a id="L2512" name="L2512"></a>2512         <strong class="reserved">return</strong> <a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(newScale, ROUND_UNNECESSARY);
<a id="L2513" name="L2513"></a>2513     <em class="brace">}</em>
<a id="L2514" name="L2514"></a>2514 
<a id="L2515" name="L2515"></a>2515     <em class="comment">// Decimal Point Motion Operations</em>
<a id="L2516" name="L2516"></a>2516 
<div class="comment">
      Returns a <code>BigDecimal</code> which is equivalent to this one
      with the decimal point moved <code>n</code> places to the left.  If
      <code>n</code> is non-negative, the call merely adds <code>n</code> to
      the scale.  If <code>n</code> is negative, the call is equivalent
      to <code>movePointRight(-n)</code>.  The <code>BigDecimal</code>
      returned by this call has value <tt>(this ×
      10<sup>-n</sup>)</tt> and scale {@code max(this.scale()+n,
      0)}.
      @param  n number of places to move the decimal point to the left.
      @return a <code>BigDecimal</code> which is equivalent to this one with the
              decimal point moved <code>n</code> places to the left.
      @throws ArithmeticException if scale overflows.</div>
<a id="L2532" name="L2532"></a>2532     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23382.html" title="Multiple referred from 5 places.">movePointLeft</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L2533" name="L2533"></a>2533         <em class="comment">// Cannot use movePointRight(-n) in case of n==Integer.MIN_VALUE</em>
<a id="L2534" name="L2534"></a>2534         <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + n);
<a id="L2535" name="L2535"></a>2535         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal, intCompact, newScale, 0);
<a id="L2536" name="L2536"></a>2536         <strong class="reserved">return</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; 0 ? <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, ROUND_UNNECESSARY) : <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L2537" name="L2537"></a>2537     <em class="brace">}</em>
<a id="L2538" name="L2538"></a>2538 
<div class="comment">
      Returns a <code>BigDecimal</code> which is equivalent to this one
      with the decimal point moved <code>n</code> places to the right.
      If <code>n</code> is non-negative, the call merely subtracts
      <code>n</code> from the scale.  If <code>n</code> is negative, the call
      is equivalent to <code>movePointLeft(-n)</code>.  The
      <code>BigDecimal</code> returned by this call has value <tt>(this
      × 10<sup>n</sup>)</tt> and scale {@code max(this.scale()-n,
      0)}.
      @param  n number of places to move the decimal point to the right.
      @return a <code>BigDecimal</code> which is equivalent to this one
              with the decimal point moved <code>n</code> places to the right.
      @throws ArithmeticException if scale overflows.</div>
<a id="L2554" name="L2554"></a>2554     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23383.html" title="Multiple referred from 4 places.">movePointRight</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L2555" name="L2555"></a>2555         <em class="comment">// Cannot use movePointLeft(-n) in case of n==Integer.MIN_VALUE</em>
<a id="L2556" name="L2556"></a>2556         <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - n);
<a id="L2557" name="L2557"></a>2557         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal, intCompact, newScale, 0);
<a id="L2558" name="L2558"></a>2558         <strong class="reserved">return</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; 0 ? <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, ROUND_UNNECESSARY) : <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L2559" name="L2559"></a>2559     <em class="brace">}</em>
<a id="L2560" name="L2560"></a>2560 
<div class="comment">
      Returns a BigDecimal whose numerical value is equal to
      (<code>this</code> * 10<sup>n</sup>).  The scale of
      the result is <code>(this.scale() - n)</code>.
      @param n the exponent power of ten to scale by
      @return a BigDecimal whose numerical value is equal to
      (<code>this</code> * 10<sup>n</sup>)
      @throws ArithmeticException if the scale would be
              outside the range of a 32-bit integer.
      @since 1.5</div>
<a id="L2574" name="L2574"></a>2574     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/2482.html#L210" title="Referred from 210 in src/java/text/DigitList.java.">scaleByPowerOfTen</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L2575" name="L2575"></a>2575         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal, intCompact,
<a id="L2576" name="L2576"></a>2576                               <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>((<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - n), <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>);
<a id="L2577" name="L2577"></a>2577     <em class="brace">}</em>
<a id="L2578" name="L2578"></a>2578 
<div class="comment">
      Returns a <code>BigDecimal</code> which is numerically equal to
      this one but with any trailing zeros removed from the
      representation.  For example, stripping the trailing zeros from
      the <code>BigDecimal</code> value <code>600.0</code>, which has
      [<code>BigInteger</code>, <code>scale</code>] components equals to
      [6000, 1], yields <code>6E2</code> with [<code>BigInteger</code>,
      <code>scale</code>] components equals to [6, -2].  If
      this BigDecimal is numerically equal to zero, then
      <code>BigDecimal.ZERO</code> is returned.
      @return a numerically equal <code>BigDecimal</code> with any
      trailing zeros removed.
      @since 1.5</div>
<a id="L2594" name="L2594"></a>2594     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1537.html#L3028" title="Referred from 3028 in src/java/time/format/DateTimeFormatterBuilder.java.">stripTrailingZeros</a>() <em class="brace">{</em>
<a id="L2595" name="L2595"></a>2595         <strong class="reserved">if</strong> (intCompact == 0 || (intVal != <strong class="reserved">null</strong> &amp;&amp; intVal.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0)) <em class="brace">{</em>
<a id="L2596" name="L2596"></a>2596             <strong class="reserved">return</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.ZERO;
<a id="L2597" name="L2597"></a>2597         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (intCompact != INFLATED) <em class="brace">{</em>
<a id="L2598" name="L2598"></a>2598             <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intCompact, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE);
<a id="L2599" name="L2599"></a>2599         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2600" name="L2600"></a>2600             <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE);
<a id="L2601" name="L2601"></a>2601         <em class="brace">}</em>
<a id="L2602" name="L2602"></a>2602     <em class="brace">}</em>
<a id="L2603" name="L2603"></a>2603 
<a id="L2604" name="L2604"></a>2604     <em class="comment">// Comparison Operations</em>
<a id="L2605" name="L2605"></a>2605 
<div class="comment">
      Compares this <code>BigDecimal</code> with the specified
      <code>BigDecimal</code>.  Two <code>BigDecimal</code> objects that are
      equal in value but have a different scale (like 2.0 and 2.00)
      are considered equal by this method.  This method is provided
      in preference to individual methods for each of the six boolean
      comparison operators ({@literal &lt;}, ==,
      {@literal &gt;}, {@literal &gt;=}, !=, {@literal &lt;=}).  The
      suggested idiom for performing these comparisons is:
      <code>(x.compareTo(y)</code> &lt;<i>op</i>&gt; <code>0)</code>, where
      &lt;<i>op</i>&gt; is one of the six comparison operators.
      @param  val <code>BigDecimal</code> to which this <code>BigDecimal</code> is
              to be compared.
      @return -1, 0, or 1 as this <code>BigDecimal</code> is numerically
               less than, equal to, or greater than <code>val</code>.</div>
<a id="L2623" name="L2623"></a>2623     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11724.html" title="Multiple referred from 291 places.">compareTo</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L2624" name="L2624"></a>2624         <em class="comment">// Quick path for equal scale and non-inflated case.</em>
<a id="L2625" name="L2625"></a>2625         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L2626" name="L2626"></a>2626             <strong class="reserved">long</strong> xs = intCompact;
<a id="L2627" name="L2627"></a>2627             <strong class="reserved">long</strong> ys = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.intCompact;
<a id="L2628" name="L2628"></a>2628             <strong class="reserved">if</strong> (xs != INFLATED &amp;&amp; ys != INFLATED)
<a id="L2629" name="L2629"></a>2629                 <strong class="reserved">return</strong> xs != ys ? ((xs &gt; ys) ? 1 : -1) : 0;
<a id="L2630" name="L2630"></a>2630         <em class="brace">}</em>
<a id="L2631" name="L2631"></a>2631         <strong class="reserved">int</strong> xsign = <strong class="reserved">this</strong>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>();
<a id="L2632" name="L2632"></a>2632         <strong class="reserved">int</strong> ysign = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>();
<a id="L2633" name="L2633"></a>2633         <strong class="reserved">if</strong> (xsign != ysign)
<a id="L2634" name="L2634"></a>2634             <strong class="reserved">return</strong> (xsign &gt; ysign) ? 1 : -1;
<a id="L2635" name="L2635"></a>2635         <strong class="reserved">if</strong> (xsign == 0)
<a id="L2636" name="L2636"></a>2636             <strong class="reserved">return</strong> 0;
<a id="L2637" name="L2637"></a>2637         <strong class="reserved">int</strong> cmp = <a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L2638" name="L2638"></a>2638         <strong class="reserved">return</strong> (xsign &gt; 0) ? cmp : -cmp;
<a id="L2639" name="L2639"></a>2639     <em class="brace">}</em>
<a id="L2640" name="L2640"></a>2640 
<div class="comment">
      Version of compareTo that ignores sign.</div>
<a id="L2644" name="L2644"></a>2644     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/11715.html" title="Multiple referred from 18 places.">compareMagnitude</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L2645" name="L2645"></a>2645         <em class="comment">// Match scales, avoid unnecessary inflation</em>
<a id="L2646" name="L2646"></a>2646         <strong class="reserved">long</strong> ys = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.intCompact;
<a id="L2647" name="L2647"></a>2647         <strong class="reserved">long</strong> xs = <strong class="reserved">this</strong>.intCompact;
<a id="L2648" name="L2648"></a>2648         <strong class="reserved">if</strong> (xs == 0)
<a id="L2649" name="L2649"></a>2649             <strong class="reserved">return</strong> (ys == 0) ? 0 : -1;
<a id="L2650" name="L2650"></a>2650         <strong class="reserved">if</strong> (ys == 0)
<a id="L2651" name="L2651"></a>2651             <strong class="reserved">return</strong> 1;
<a id="L2652" name="L2652"></a>2652 
<a id="L2653" name="L2653"></a>2653         <strong class="reserved">long</strong> sdiff = (<strong class="reserved">long</strong>)<strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L2654" name="L2654"></a>2654         <strong class="reserved">if</strong> (sdiff != 0) <em class="brace">{</em>
<a id="L2655" name="L2655"></a>2655             <em class="comment">// Avoid matching scales if the (adjusted) exponents differ</em>
<a id="L2656" name="L2656"></a>2656             <strong class="reserved">long</strong> xae = (<strong class="reserved">long</strong>)<strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() - <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;   <em class="comment">// [-1]</em>
<a id="L2657" name="L2657"></a>2657             <strong class="reserved">long</strong> yae = (<strong class="reserved">long</strong>)<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() - <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;     <em class="comment">// [-1]</em>
<a id="L2658" name="L2658"></a>2658             <strong class="reserved">if</strong> (xae &lt; yae)
<a id="L2659" name="L2659"></a>2659                 <strong class="reserved">return</strong> -1;
<a id="L2660" name="L2660"></a>2660             <strong class="reserved">if</strong> (xae &gt; yae)
<a id="L2661" name="L2661"></a>2661                 <strong class="reserved">return</strong> 1;
<a id="L2662" name="L2662"></a>2662             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <strong class="reserved">null</strong>;
<a id="L2663" name="L2663"></a>2663             <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L2664" name="L2664"></a>2664                 <em class="comment">// The cases sdiff &lt;= Integer.MIN_VALUE intentionally fall through.</em>
<a id="L2665" name="L2665"></a>2665                 <strong class="reserved">if</strong> ( sdiff &gt; <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MIN_VALUE &amp;&amp;
<a id="L2666" name="L2666"></a>2666                       (xs == INFLATED ||
<a id="L2667" name="L2667"></a>2667                       (xs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, (<strong class="reserved">int</strong>)-sdiff)) == INFLATED) &amp;&amp;
<a id="L2668" name="L2668"></a>2668                      ys == INFLATED) <em class="brace">{</em>
<a id="L2669" name="L2669"></a>2669                     rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>((<strong class="reserved">int</strong>)-sdiff);
<a id="L2670" name="L2670"></a>2670                     <strong class="reserved">return</strong> rb.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.intVal);
<a id="L2671" name="L2671"></a>2671                 <em class="brace">}</em>
<a id="L2672" name="L2672"></a>2672             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// sdiff &gt; 0</em>
<a id="L2673" name="L2673"></a>2673                 <em class="comment">// The cases sdiff &gt; Integer.MAX_VALUE intentionally fall through.</em>
<a id="L2674" name="L2674"></a>2674                 <strong class="reserved">if</strong> ( sdiff &lt;= <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE &amp;&amp;
<a id="L2675" name="L2675"></a>2675                       (ys == INFLATED ||
<a id="L2676" name="L2676"></a>2676                       (ys = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, (<strong class="reserved">int</strong>)sdiff)) == INFLATED) &amp;&amp;
<a id="L2677" name="L2677"></a>2677                      xs == INFLATED) <em class="brace">{</em>
<a id="L2678" name="L2678"></a>2678                     rb = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>((<strong class="reserved">int</strong>)sdiff);
<a id="L2679" name="L2679"></a>2679                     <strong class="reserved">return</strong> <strong class="reserved">this</strong>.intVal.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(rb);
<a id="L2680" name="L2680"></a>2680                 <em class="brace">}</em>
<a id="L2681" name="L2681"></a>2681             <em class="brace">}</em>
<a id="L2682" name="L2682"></a>2682         <em class="brace">}</em>
<a id="L2683" name="L2683"></a>2683         <strong class="reserved">if</strong> (xs != INFLATED)
<a id="L2684" name="L2684"></a>2684             <strong class="reserved">return</strong> (ys != INFLATED) ? <a href="../S/1464.html#L3866" title="Defined at 3866 in src/java/math/BigDecimal.java.">longCompareMagnitude</a>(xs, ys) : -1;
<a id="L2685" name="L2685"></a>2685         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ys != INFLATED)
<a id="L2686" name="L2686"></a>2686             <strong class="reserved">return</strong> 1;
<a id="L2687" name="L2687"></a>2687         <strong class="reserved">else</strong>
<a id="L2688" name="L2688"></a>2688             <strong class="reserved">return</strong> <strong class="reserved">this</strong>.intVal.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.intVal);
<a id="L2689" name="L2689"></a>2689     <em class="brace">}</em>
<a id="L2690" name="L2690"></a>2690 
<div class="comment">
      Compares this <code>BigDecimal</code> with the specified
      <code>Object</code> for equality.  Unlike {@link
      #compareTo(BigDecimal) compareTo}, this method considers two
      <code>BigDecimal</code> objects equal only if they are equal in
      value and scale (thus 2.0 is not equal to 2.00 when compared by
      this method).
      @param  x <code>Object</code> to which this <code>BigDecimal</code> is
              to be compared.
      @return <code>true</code> if and only if the specified <code>Object</code> is a
              <code>BigDecimal</code> whose value and scale are equal to this
              <code>BigDecimal</code>'s.
      @see    #compareTo(java.math.BigDecimal)
      @see    #hashCode</div>
<a id="L2707" name="L2707"></a>2707     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2708" name="L2708"></a>2708     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L2709" name="L2709"></a>2709         <strong class="reserved">if</strong> (!(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> <strong class="reserved">instanceof</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>))
<a id="L2710" name="L2710"></a>2710             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2711" name="L2711"></a>2711         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> xDec = (<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>) <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L2712" name="L2712"></a>2712         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == <strong class="reserved">this</strong>)
<a id="L2713" name="L2713"></a>2713             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2714" name="L2714"></a>2714         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> != xDec.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>)
<a id="L2715" name="L2715"></a>2715             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2716" name="L2716"></a>2716         <strong class="reserved">long</strong> s = <strong class="reserved">this</strong>.intCompact;
<a id="L2717" name="L2717"></a>2717         <strong class="reserved">long</strong> xs = xDec.intCompact;
<a id="L2718" name="L2718"></a>2718         <strong class="reserved">if</strong> (s != INFLATED) <em class="brace">{</em>
<a id="L2719" name="L2719"></a>2719             <strong class="reserved">if</strong> (xs == INFLATED)
<a id="L2720" name="L2720"></a>2720                 xs = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(xDec.intVal);
<a id="L2721" name="L2721"></a>2721             <strong class="reserved">return</strong> xs == s;
<a id="L2722" name="L2722"></a>2722         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (xs != INFLATED)
<a id="L2723" name="L2723"></a>2723             <strong class="reserved">return</strong> xs == <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(<strong class="reserved">this</strong>.intVal);
<a id="L2724" name="L2724"></a>2724 
<a id="L2725" name="L2725"></a>2725         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(xDec.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>());
<a id="L2726" name="L2726"></a>2726     <em class="brace">}</em>
<a id="L2727" name="L2727"></a>2727 
<div class="comment">
      Returns the minimum of this <code>BigDecimal</code> and
      <code>val</code>.
      @param  val value with which the minimum is to be computed.
      @return the <code>BigDecimal</code> whose value is the lesser of this
              <code>BigDecimal</code> and <code>val</code>.  If they are equal,
              as defined by the {@link #compareTo(BigDecimal) compareTo}
              method, <code>this</code> is returned.
      @see    #compareTo(java.math.BigDecimal)</div>
<a id="L2739" name="L2739"></a>2739     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23287.html" title="Multiple referred from 1252 places.">min</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L2740" name="L2740"></a>2740         <strong class="reserved">return</strong> (<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) &lt;= 0 ? <strong class="reserved">this</strong> : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L2741" name="L2741"></a>2741     <em class="brace">}</em>
<a id="L2742" name="L2742"></a>2742 
<div class="comment">
      Returns the maximum of this <code>BigDecimal</code> and <code>val</code>.
      @param  val value with which the maximum is to be computed.
      @return the <code>BigDecimal</code> whose value is the greater of this
              <code>BigDecimal</code> and <code>val</code>.  If they are equal,
              as defined by the {@link #compareTo(BigDecimal) compareTo}
              method, <code>this</code> is returned.
      @see    #compareTo(java.math.BigDecimal)</div>
<a id="L2753" name="L2753"></a>2753     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23166.html" title="Multiple referred from 1608 places.">max</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L2754" name="L2754"></a>2754         <strong class="reserved">return</strong> (<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) &gt;= 0 ? <strong class="reserved">this</strong> : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L2755" name="L2755"></a>2755     <em class="brace">}</em>
<a id="L2756" name="L2756"></a>2756 
<a id="L2757" name="L2757"></a>2757     <em class="comment">// Hash Function</em>
<a id="L2758" name="L2758"></a>2758 
<div class="comment">
      Returns the hash code for this <code>BigDecimal</code>.  Note that
      two <code>BigDecimal</code> objects that are numerically equal but
      differ in scale (like 2.0 and 2.00) will generally <i>not</i>
      have the same hash code.
      @return hash code for this <code>BigDecimal</code>.
      @see #equals(Object)</div>
<a id="L2768" name="L2768"></a>2768     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2769" name="L2769"></a>2769     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L2770" name="L2770"></a>2770         <strong class="reserved">if</strong> (intCompact != INFLATED) <em class="brace">{</em>
<a id="L2771" name="L2771"></a>2771             <strong class="reserved">long</strong> val2 = (intCompact &lt; 0)? -intCompact : intCompact;
<a id="L2772" name="L2772"></a>2772             <strong class="reserved">int</strong> temp = (<strong class="reserved">int</strong>)( ((<strong class="reserved">int</strong>)(val2 &gt;&gt;&gt; 32)) * 31  +
<a id="L2773" name="L2773"></a>2773                               (val2 &amp; LONG_MASK));
<a id="L2774" name="L2774"></a>2774             <strong class="reserved">return</strong> 31*((intCompact &lt; 0) ?-temp:temp) + <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L2775" name="L2775"></a>2775         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L2776" name="L2776"></a>2776             <strong class="reserved">return</strong> 31*intVal.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() + <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L2777" name="L2777"></a>2777     <em class="brace">}</em>
<a id="L2778" name="L2778"></a>2778 
<a id="L2779" name="L2779"></a>2779     <em class="comment">// Format Converters</em>
<a id="L2780" name="L2780"></a>2780 
<div class="comment">
      Returns the string representation of this <code>BigDecimal</code>,
      using scientific notation if an exponent is needed.
      <p>A standard canonical string form of the <code>BigDecimal</code>
      is created as though by the following steps: first, the
      absolute value of the unscaled value of the <code>BigDecimal</code>
      is converted to a string in base ten using the characters
      <code>'0'</code> through <code>'9'</code> with no leading zeros (except
      if its value is zero, in which case a single <code>'0'</code>
      character is used).
      </p><p>Next, an <i>adjusted exponent</i> is calculated; this is the
      negated scale, plus the number of characters in the converted
      unscaled value, less one.  That is,
      <code>-scale+(ulength-1)</code>, where <code>ulength</code> is the
      length of the absolute value of the unscaled value in decimal
      digits (its <i>precision</i>).
      </p><p>If the scale is greater than or equal to zero and the
      adjusted exponent is greater than or equal to <code>-6</code>, the
      number will be converted to a character form without using
      exponential notation.  In this case, if the scale is zero then
      no decimal point is added and if the scale is positive a
      decimal point will be inserted with the scale specifying the
      number of characters to the right of the decimal point.
      <code>'0'</code> characters are added to the left of the converted
      unscaled value as necessary.  If no character precedes the
      decimal point after this insertion then a conventional
      <code>'0'</code> character is prefixed.
      </p><p>Otherwise (that is, if the scale is negative, or the
      adjusted exponent is less than <code>-6</code>), the number will be
      converted to a character form using exponential notation.  In
      this case, if the converted <code>BigInteger</code> has more than
      one digit a decimal point is inserted after the first digit.
      An exponent in character form is then suffixed to the converted
      unscaled value (perhaps with inserted decimal point); this
      comprises the letter <code>'E'</code> followed immediately by the
      adjusted exponent converted to a character form.  The latter is
      in base ten, using the characters <code>'0'</code> through
      <code>'9'</code> with no leading zeros, and is always prefixed by a
      sign character <code>'-'</code> (<tt>'\u002D'</tt>) if the
      adjusted exponent is negative, <code>'+'</code>
      (<tt>'\u002B'</tt>) otherwise).
      </p><p>Finally, the entire string is prefixed by a minus sign
      character <code>'-'</code> (<tt>'\u002D'</tt>) if the unscaled
      value is less than zero.  No sign character is prefixed if the
      unscaled value is zero or positive.
      </p><p><b>Examples:</b>
      </p><p>For each representation [<i>unscaled value</i>, <i>scale</i>]
      on the left, the resulting string is shown on the right.
      </p><pre>      [123,0]      "123"
      [-123,0]     "-123"
      [123,-1]     "1.23E+3"
      [123,-3]     "1.23E+5"
      [123,1]      "12.3"
      [123,5]      "0.00123"
      [123,10]     "1.23E-8"
      [-123,12]    "-1.23E-10"
      </pre>
      <b>Notes:</b>
      <ol>
      <li>There is a one-to-one mapping between the distinguishable
      <code>BigDecimal</code> values and the result of this conversion.
      That is, every distinguishable <code>BigDecimal</code> value
      (unscaled value and scale) has a unique string representation
      as a result of using <code>toString</code>.  If that string
      representation is converted back to a <code>BigDecimal</code> using
      the {@link #BigDecimal(String)} constructor, then the original
      value will be recovered.
      </li><li>The string produced for a given number is always the same;
      it is not affected by locale.  This means that it can be used
      as a canonical string representation for exchanging decimal
      data, or as a key for a Hashtable, etc.  Locale-sensitive
      number formatting and parsing is handled by the {@link
      java.text.NumberFormat} class and its subclasses.
      </li><li>The {@link #toEngineeringString} method may be used for
      presenting numbers with exponents in engineering notation, and the
      {@link #setScale(int,RoundingMode) setScale} method may be used for
      rounding a <code>BigDecimal</code> so it has a known number of digits after
      the decimal point.
      </li><li>The digit-to-character mapping provided by
      <code>Character.forDigit</code> is used.
      </li></ol>
      @return string representation of this <code>BigDecimal</code>.
      @see    Character#forDigit
      @see    #BigDecimal(java.lang.String)</div>
<a id="L2880" name="L2880"></a>2880     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2881" name="L2881"></a>2881     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L2882" name="L2882"></a>2882         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sc = stringCache;
<a id="L2883" name="L2883"></a>2883         <strong class="reserved">if</strong> (sc == <strong class="reserved">null</strong>)
<a id="L2884" name="L2884"></a>2884             stringCache = sc = <a href="../D/26767.html" title="Multiple defined in 2 places.">layoutChars</a>(<strong class="reserved">true</strong>);
<a id="L2885" name="L2885"></a>2885         <strong class="reserved">return</strong> sc;
<a id="L2886" name="L2886"></a>2886     <em class="brace">}</em>
<a id="L2887" name="L2887"></a>2887 
<div class="comment">
      Returns a string representation of this <code>BigDecimal</code>,
      using engineering notation if an exponent is needed.
      <p>Returns a string that represents the <code>BigDecimal</code> as
      described in the {@link #toString()} method, except that if
      exponential notation is used, the power of ten is adjusted to
      be a multiple of three (engineering notation) such that the
      integer part of nonzero values will be in the range 1 through
      999.  If exponential notation is used for zero values, a
      decimal point and one or two fractional zero digits are used so
      that the scale of the zero value is preserved.  Note that
      unlike the output of {@link #toString()}, the output of this
      method is <em>not</em> guaranteed to recover the same [integer,
      scale] pair of this <code>BigDecimal</code> if the output string is
      converting back to a <code>BigDecimal</code> using the {@linkplain
      #BigDecimal(String) string constructor}.  The result of this method meets
      the weaker constraint of always producing a numerically equal
      result from applying the string constructor to the method's output.
      @return string representation of this <code>BigDecimal</code>, using
              engineering notation if an exponent is needed.
      @since  1.5</p></div>
<a id="L2912" name="L2912"></a>2912     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> toEngineeringString() <em class="brace">{</em>
<a id="L2913" name="L2913"></a>2913         <strong class="reserved">return</strong> <a href="../D/26767.html" title="Multiple defined in 2 places.">layoutChars</a>(<strong class="reserved">false</strong>);
<a id="L2914" name="L2914"></a>2914     <em class="brace">}</em>
<a id="L2915" name="L2915"></a>2915 
<div class="comment">
      Returns a string representation of this <code>BigDecimal</code>
      without an exponent field.  For values with a positive scale,
      the number of digits to the right of the decimal point is used
      to indicate scale.  For values with a zero or negative scale,
      the resulting string is generated as if the value were
      converted to a numerically equal value with zero scale and as
      if all the trailing zeros of the zero scale value were present
      in the result.
      The entire string is prefixed by a minus sign character '-'
      (<tt>'\u002D'</tt>) if the unscaled value is less than
      zero. No sign character is prefixed if the unscaled value is
      zero or positive.
      Note that if the result of this method is passed to the
      {@linkplain #BigDecimal(String) string constructor}, only the
      numerical value of this <code>BigDecimal</code> will necessarily be
      recovered; the representation of the new <code>BigDecimal</code>
      may have a different scale.  In particular, if this
      <code>BigDecimal</code> has a negative scale, the string resulting
      from this method will have a scale of zero when processed by
      the string constructor.
      (This method behaves analogously to the <code>toString</code>
      method in 1.4 and earlier releases.)
      @return a string representation of this <code>BigDecimal</code>
      without an exponent field.
      @since 1.5
      @see #toString()
      @see #toEngineeringString()</div>
<a id="L2949" name="L2949"></a>2949     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29312.html" title="Multiple referred from 2 places.">toPlainString</a>() <em class="brace">{</em>
<a id="L2950" name="L2950"></a>2950         <strong class="reserved">if</strong>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>==0) <em class="brace">{</em>
<a id="L2951" name="L2951"></a>2951             <strong class="reserved">if</strong>(intCompact!=INFLATED) <em class="brace">{</em>
<a id="L2952" name="L2952"></a>2952                 <strong class="reserved">return</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(intCompact);
<a id="L2953" name="L2953"></a>2953             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2954" name="L2954"></a>2954                 <strong class="reserved">return</strong> intVal.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2955" name="L2955"></a>2955             <em class="brace">}</em>
<a id="L2956" name="L2956"></a>2956         <em class="brace">}</em>
<a id="L2957" name="L2957"></a>2957         <strong class="reserved">if</strong>(<strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>&lt;0) <em class="brace">{</em> <em class="comment">// No decimal point</em>
<a id="L2958" name="L2958"></a>2958             <strong class="reserved">if</strong>(<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>()==0) <em class="brace">{</em>
<a id="L2959" name="L2959"></a>2959                 <strong class="reserved">return</strong> "0";
<a id="L2960" name="L2960"></a>2960             <em class="brace">}</em>
<a id="L2961" name="L2961"></a>2961             <strong class="reserved">int</strong> tailingZeros = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((-(<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>));
<a id="L2962" name="L2962"></a>2962             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>;
<a id="L2963" name="L2963"></a>2963             <strong class="reserved">if</strong>(intCompact!=INFLATED) <em class="brace">{</em>
<a id="L2964" name="L2964"></a>2964                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(20+tailingZeros);
<a id="L2965" name="L2965"></a>2965                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intCompact);
<a id="L2966" name="L2966"></a>2966             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2967" name="L2967"></a>2967                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = intVal.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2968" name="L2968"></a>2968                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()+tailingZeros);
<a id="L2969" name="L2969"></a>2969                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L2970" name="L2970"></a>2970             <em class="brace">}</em>
<a id="L2971" name="L2971"></a>2971             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; tailingZeros; i++)
<a id="L2972" name="L2972"></a>2972                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0');
<a id="L2973" name="L2973"></a>2973             <strong class="reserved">return</strong> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2974" name="L2974"></a>2974         <em class="brace">}</em>
<a id="L2975" name="L2975"></a>2975         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> ;
<a id="L2976" name="L2976"></a>2976         <strong class="reserved">if</strong>(intCompact!=INFLATED) <em class="brace">{</em>
<a id="L2977" name="L2977"></a>2977             <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(intCompact));
<a id="L2978" name="L2978"></a>2978         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2979" name="L2979"></a>2979             <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = intVal.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>().<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2980" name="L2980"></a>2980         <em class="brace">}</em>
<a id="L2981" name="L2981"></a>2981         <strong class="reserved">return</strong> <a href="../D/23548.html" title="Multiple defined in 2 places.">getValueString</a>(<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(), <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L2982" name="L2982"></a>2982     <em class="brace">}</em>
<a id="L2983" name="L2983"></a>2983 
<div class="comment">
     /* Returns a digit.digit string */</div>
<a id="L2985" name="L2985"></a>2985     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19767.html" title="Multiple referred from 4 places.">getValueString</a>(<strong class="reserved">int</strong> <a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> intString, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<div class="comment">
         /* Insert decimal point */</div>
<a id="L2987" name="L2987"></a>2987         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>;
<a id="L2988" name="L2988"></a>2988         <strong class="reserved">int</strong> insertionPoint = intString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() - <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L2989" name="L2989"></a>2989         <strong class="reserved">if</strong> (insertionPoint == 0) <div class="comment">
/* Point goes right before intVal */</div>
<a id="L2990" name="L2990"></a>2990             <strong class="reserved">return</strong> (<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>&lt;0 ? "-0." : "0.") + intString;
<a id="L2991" name="L2991"></a>2991         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (insertionPoint &gt; 0) <div class="comment">
/* Point goes inside intVal */</div>
<a id="L2992" name="L2992"></a>2992             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(intString);
<a id="L2993" name="L2993"></a>2993             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(insertionPoint, '.');
<a id="L2994" name="L2994"></a>2994             <strong class="reserved">if</strong> (<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> &lt; 0)
<a id="L2995" name="L2995"></a>2995                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(0, '-');
<a id="L2996" name="L2996"></a>2996         <em class="brace">}</em> <strong class="reserved">else</strong> <div class="comment">
/* We must insert zeros between point and intVal */</div>
<a id="L2997" name="L2997"></a>2997             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(3-insertionPoint + intString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2998" name="L2998"></a>2998             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>&lt;0 ? "-0." : "0.");
<a id="L2999" name="L2999"></a>2999             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;-insertionPoint; i++)
<a id="L3000" name="L3000"></a>3000                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0');
<a id="L3001" name="L3001"></a>3001             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(intString);
<a id="L3002" name="L3002"></a>3002         <em class="brace">}</em>
<a id="L3003" name="L3003"></a>3003         <strong class="reserved">return</strong> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3004" name="L3004"></a>3004     <em class="brace">}</em>
<a id="L3005" name="L3005"></a>3005 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>BigInteger</code>.
      This conversion is analogous to the
      <i>narrowing primitive conversion</i> from <code>double</code> to
      <code>long</code> as defined in section 5.1.3 of
      <cite>The Java™ Language Specification</cite>:
      any fractional part of this
      <code>BigDecimal</code> will be discarded.  Note that this
      conversion can lose information about the precision of the
      <code>BigDecimal</code> value.
      <p>
      To have an exception thrown if the conversion is inexact (in
      other words if a nonzero fractional part is discarded), use the
      {@link #toBigIntegerExact()} method.
      @return this <code>BigDecimal</code> converted to a <code>BigInteger</code>.</p></div>
<a id="L3023" name="L3023"></a>3023     <strong class="reserved">public</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/29219.html" title="Multiple referred from 40 places.">toBigInteger</a>() <em class="brace">{</em>
<a id="L3024" name="L3024"></a>3024         <em class="comment">// force to an integer, quietly</em>
<a id="L3025" name="L3025"></a>3025         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, ROUND_DOWN).<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>();
<a id="L3026" name="L3026"></a>3026     <em class="brace">}</em>
<a id="L3027" name="L3027"></a>3027 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>BigInteger</code>,
      checking for lost information.  An exception is thrown if this
      <code>BigDecimal</code> has a nonzero fractional part.
      @return this <code>BigDecimal</code> converted to a <code>BigInteger</code>.
      @throws ArithmeticException if <code>this</code> has a nonzero
              fractional part.
      @since  1.5</div>
<a id="L3038" name="L3038"></a>3038     <strong class="reserved">public</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/1489.html#L1003" title="Referred from 1003 in src/java/time/Duration.java.">toBigIntegerExact</a>() <em class="brace">{</em>
<a id="L3039" name="L3039"></a>3039         <em class="comment">// round to an integer, with Exception if decimal part non-0</em>
<a id="L3040" name="L3040"></a>3040         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, ROUND_UNNECESSARY).<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>();
<a id="L3041" name="L3041"></a>3041     <em class="brace">}</em>
<a id="L3042" name="L3042"></a>3042 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>long</code>.
      This conversion is analogous to the
      <i>narrowing primitive conversion</i> from <code>double</code> to
      <code>short</code> as defined in section 5.1.3 of
      <cite>The Java™ Language Specification</cite>:
      any fractional part of this
      <code>BigDecimal</code> will be discarded, and if the resulting
      "<code>BigInteger</code>" is too big to fit in a
      <code>long</code>, only the low-order 64 bits are returned.
      Note that this conversion can lose information about the
      overall magnitude and precision of this <code>BigDecimal</code> value as well
      as return a result with the opposite sign.
      @return this <code>BigDecimal</code> converted to a <code>long</code>.</div>
<a id="L3059" name="L3059"></a>3059     <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/22716.html" title="Multiple referred from 158 places.">longValue</a>()<em class="brace">{</em>
<a id="L3060" name="L3060"></a>3060         <strong class="reserved">return</strong> (intCompact != INFLATED &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0) ?
<a id="L3061" name="L3061"></a>3061             intCompact:
<a id="L3062" name="L3062"></a>3062             <a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>().<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>();
<a id="L3063" name="L3063"></a>3063     <em class="brace">}</em>
<a id="L3064" name="L3064"></a>3064 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>long</code>, checking
      for lost information.  If this <code>BigDecimal</code> has a
      nonzero fractional part or is out of the possible range for a
      <code>long</code> result then an <code>ArithmeticException</code> is
      thrown.
      @return this <code>BigDecimal</code> converted to a <code>long</code>.
      @throws ArithmeticException if <code>this</code> has a nonzero
              fractional part, or will not fit in a <code>long</code>.
      @since  1.5</div>
<a id="L3077" name="L3077"></a>3077     <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/22717.html" title="Multiple referred from 4 places.">longValueExact</a>() <em class="brace">{</em>
<a id="L3078" name="L3078"></a>3078         <strong class="reserved">if</strong> (intCompact != INFLATED &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0)
<a id="L3079" name="L3079"></a>3079             <strong class="reserved">return</strong> intCompact;
<a id="L3080" name="L3080"></a>3080         <em class="comment">// If more than 19 digits in integer part it cannot possibly fit</em>
<a id="L3081" name="L3081"></a>3081         <strong class="reserved">if</strong> ((<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() - <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) &gt; 19) <em class="comment">// [OK for negative scale too]</em>
<a id="L3082" name="L3082"></a>3082             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Overflow");
<a id="L3083" name="L3083"></a>3083         <em class="comment">// Fastpath zero and &lt; 1.0 numbers (the latter can be very slow</em>
<a id="L3084" name="L3084"></a>3084         <em class="comment">// to round if very small)</em>
<a id="L3085" name="L3085"></a>3085         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0)
<a id="L3086" name="L3086"></a>3086             <strong class="reserved">return</strong> 0;
<a id="L3087" name="L3087"></a>3087         <strong class="reserved">if</strong> ((<strong class="reserved">this</strong>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() - <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) &lt;= 0)
<a id="L3088" name="L3088"></a>3088             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Rounding necessary");
<a id="L3089" name="L3089"></a>3089         <em class="comment">// round to an integer, with Exception if decimal part non-0</em>
<a id="L3090" name="L3090"></a>3090         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = <strong class="reserved">this</strong>.<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(0, ROUND_UNNECESSARY);
<a id="L3091" name="L3091"></a>3091         <strong class="reserved">if</strong> (<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>() &gt;= 19) <em class="comment">// need to check carefully</em>
<a id="L3092" name="L3092"></a>3092             <a href="../S/1464.html#L3096" title="Defined at 3096 in src/java/math/BigDecimal.java.">LongOverflow</a>.<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>);
<a id="L3093" name="L3093"></a>3093         <strong class="reserved">return</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>().<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>();
<a id="L3094" name="L3094"></a>3094     <em class="brace">}</em>
<a id="L3095" name="L3095"></a>3095 
<a id="L3096" name="L3096"></a>3096     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/1464.html#L3092" title="Referred from 3092 in src/java/math/BigDecimal.java.">LongOverflow</a> <em class="brace">{</em>
<div class="comment">
         /** BigInteger equal to Long.MIN_VALUE. */</div>
<a id="L3098" name="L3098"></a>3098         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> LONGMIN = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE);
<a id="L3099" name="L3099"></a>3099 
<div class="comment">
         /** BigInteger equal to Long.MAX_VALUE. */</div>
<a id="L3101" name="L3101"></a>3101         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> LONGMAX = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE);
<a id="L3102" name="L3102"></a>3102 
<a id="L3103" name="L3103"></a>3103         <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11065.html" title="Multiple referred from 127 places.">check</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>) <em class="brace">{</em>
<a id="L3104" name="L3104"></a>3104             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal = <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>();
<a id="L3105" name="L3105"></a>3105             <strong class="reserved">if</strong> (intVal.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(LONGMIN) &lt; 0 ||
<a id="L3106" name="L3106"></a>3106                 intVal.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(LONGMAX) &gt; 0)
<a id="L3107" name="L3107"></a>3107                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Overflow");
<a id="L3108" name="L3108"></a>3108         <em class="brace">}</em>
<a id="L3109" name="L3109"></a>3109     <em class="brace">}</em>
<a id="L3110" name="L3110"></a>3110 
<div class="comment">
      Converts this <code>BigDecimal</code> to an <code>int</code>.
      This conversion is analogous to the
      <i>narrowing primitive conversion</i> from <code>double</code> to
      <code>short</code> as defined in section 5.1.3 of
      <cite>The Java™ Language Specification</cite>:
      any fractional part of this
      <code>BigDecimal</code> will be discarded, and if the resulting
      "<code>BigInteger</code>" is too big to fit in an
      <code>int</code>, only the low-order 32 bits are returned.
      Note that this conversion can lose information about the
      overall magnitude and precision of this <code>BigDecimal</code>
      value as well as return a result with the opposite sign.
      @return this <code>BigDecimal</code> converted to an <code>int</code>.</div>
<a id="L3127" name="L3127"></a>3127     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20909.html" title="Multiple referred from 460 places.">intValue</a>() <em class="brace">{</em>
<a id="L3128" name="L3128"></a>3128         <strong class="reserved">return</strong>  (intCompact != INFLATED &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0) ?
<a id="L3129" name="L3129"></a>3129             (<strong class="reserved">int</strong>)intCompact :
<a id="L3130" name="L3130"></a>3130             <a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>().<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L3131" name="L3131"></a>3131     <em class="brace">}</em>
<a id="L3132" name="L3132"></a>3132 
<div class="comment">
      Converts this <code>BigDecimal</code> to an <code>int</code>, checking
      for lost information.  If this <code>BigDecimal</code> has a
      nonzero fractional part or is out of the possible range for an
      <code>int</code> result then an <code>ArithmeticException</code> is
      thrown.
      @return this <code>BigDecimal</code> converted to an <code>int</code>.
      @throws ArithmeticException if <code>this</code> has a nonzero
              fractional part, or will not fit in an <code>int</code>.
      @since  1.5</div>
<a id="L3145" name="L3145"></a>3145     <strong class="reserved">public</strong> <strong class="reserved">int</strong> intValueExact() <em class="brace">{</em>
<a id="L3146" name="L3146"></a>3146        <strong class="reserved">long</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L3147" name="L3147"></a>3147        <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = <strong class="reserved">this</strong>.<a href="../D/27087.html" title="Multiple defined in 2 places.">longValueExact</a>();     <em class="comment">// will check decimal part</em>
<a id="L3148" name="L3148"></a>3148        <strong class="reserved">if</strong> ((<strong class="reserved">int</strong>)<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> != <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>)
<a id="L3149" name="L3149"></a>3149            <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Overflow");
<a id="L3150" name="L3150"></a>3150        <strong class="reserved">return</strong> (<strong class="reserved">int</strong>)<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L3151" name="L3151"></a>3151     <em class="brace">}</em>
<a id="L3152" name="L3152"></a>3152 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>short</code>, checking
      for lost information.  If this <code>BigDecimal</code> has a
      nonzero fractional part or is out of the possible range for a
      <code>short</code> result then an <code>ArithmeticException</code> is
      thrown.
      @return this <code>BigDecimal</code> converted to a <code>short</code>.
      @throws ArithmeticException if <code>this</code> has a nonzero
              fractional part, or will not fit in a <code>short</code>.
      @since  1.5</div>
<a id="L3165" name="L3165"></a>3165     <strong class="reserved">public</strong> <strong class="reserved">short</strong> shortValueExact() <em class="brace">{</em>
<a id="L3166" name="L3166"></a>3166        <strong class="reserved">long</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L3167" name="L3167"></a>3167        <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = <strong class="reserved">this</strong>.<a href="../D/27087.html" title="Multiple defined in 2 places.">longValueExact</a>();     <em class="comment">// will check decimal part</em>
<a id="L3168" name="L3168"></a>3168        <strong class="reserved">if</strong> ((<strong class="reserved">short</strong>)<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> != <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>)
<a id="L3169" name="L3169"></a>3169            <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Overflow");
<a id="L3170" name="L3170"></a>3170        <strong class="reserved">return</strong> (<strong class="reserved">short</strong>)<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L3171" name="L3171"></a>3171     <em class="brace">}</em>
<a id="L3172" name="L3172"></a>3172 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>byte</code>, checking
      for lost information.  If this <code>BigDecimal</code> has a
      nonzero fractional part or is out of the possible range for a
      <code>byte</code> result then an <code>ArithmeticException</code> is
      thrown.
      @return this <code>BigDecimal</code> converted to a <code>byte</code>.
      @throws ArithmeticException if <code>this</code> has a nonzero
              fractional part, or will not fit in a <code>byte</code>.
      @since  1.5</div>
<a id="L3185" name="L3185"></a>3185     <strong class="reserved">public</strong> <strong class="reserved">byte</strong> byteValueExact() <em class="brace">{</em>
<a id="L3186" name="L3186"></a>3186        <strong class="reserved">long</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L3187" name="L3187"></a>3187        <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = <strong class="reserved">this</strong>.<a href="../D/27087.html" title="Multiple defined in 2 places.">longValueExact</a>();     <em class="comment">// will check decimal part</em>
<a id="L3188" name="L3188"></a>3188        <strong class="reserved">if</strong> ((<strong class="reserved">byte</strong>)<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> != <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>)
<a id="L3189" name="L3189"></a>3189            <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Overflow");
<a id="L3190" name="L3190"></a>3190        <strong class="reserved">return</strong> (<strong class="reserved">byte</strong>)<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L3191" name="L3191"></a>3191     <em class="brace">}</em>
<a id="L3192" name="L3192"></a>3192 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>float</code>.
      This conversion is similar to the
      <i>narrowing primitive conversion</i> from <code>double</code> to
      <code>float</code> as defined in section 5.1.3 of
      <cite>The Java™ Language Specification</cite>:
      if this <code>BigDecimal</code> has too great a
      magnitude to represent as a <code>float</code>, it will be
      converted to {@link Float#NEGATIVE_INFINITY} or {@link
      Float#POSITIVE_INFINITY} as appropriate.  Note that even when
      the return value is finite, this conversion can lose
      information about the precision of the <code>BigDecimal</code>
      value.
      @return this <code>BigDecimal</code> converted to a <code>float</code>.</div>
<a id="L3209" name="L3209"></a>3209     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/14689.html" title="Multiple referred from 58 places.">floatValue</a>()<em class="brace">{</em>
<a id="L3210" name="L3210"></a>3210         <strong class="reserved">if</strong>(intCompact != INFLATED) <em class="brace">{</em>
<a id="L3211" name="L3211"></a>3211             <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0) <em class="brace">{</em>
<a id="L3212" name="L3212"></a>3212                 <strong class="reserved">return</strong> (<strong class="reserved">float</strong>)intCompact;
<a id="L3213" name="L3213"></a>3213             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
                  If both intCompact and the scale can be exactly
                  represented as float values, perform a single float
                  multiply or divide to compute the (properly
                  rounded) result.</div>
<a id="L3220" name="L3220"></a>3220                 <strong class="reserved">if</strong> (<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(intCompact) &lt; 1L&lt;&lt;22 ) <em class="brace">{</em>
<a id="L3221" name="L3221"></a>3221                     <em class="comment">// Don't have too guard against</em>
<a id="L3222" name="L3222"></a>3222                     <em class="comment">// Math.abs(MIN_VALUE) because of outer check</em>
<a id="L3223" name="L3223"></a>3223                     <em class="comment">// against INFLATED.</em>
<a id="L3224" name="L3224"></a>3224                     <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; 0 &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; float10pow.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3225" name="L3225"></a>3225                         <strong class="reserved">return</strong> (<strong class="reserved">float</strong>)intCompact / float10pow[<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>];
<a id="L3226" name="L3226"></a>3226                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; 0 &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; -float10pow.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3227" name="L3227"></a>3227                         <strong class="reserved">return</strong> (<strong class="reserved">float</strong>)intCompact * float10pow[-<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>];
<a id="L3228" name="L3228"></a>3228                     <em class="brace">}</em>
<a id="L3229" name="L3229"></a>3229                 <em class="brace">}</em>
<a id="L3230" name="L3230"></a>3230             <em class="brace">}</em>
<a id="L3231" name="L3231"></a>3231         <em class="brace">}</em>
<a id="L3232" name="L3232"></a>3232         <em class="comment">// Somewhat inefficient, but guaranteed to work.</em>
<a id="L3233" name="L3233"></a>3233         <strong class="reserved">return</strong> <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.<a href="../D/29135.html" title="Multiple defined in 4 places.">parseFloat</a>(<strong class="reserved">this</strong>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L3234" name="L3234"></a>3234     <em class="brace">}</em>
<a id="L3235" name="L3235"></a>3235 
<div class="comment">
      Converts this <code>BigDecimal</code> to a <code>double</code>.
      This conversion is similar to the
      <i>narrowing primitive conversion</i> from <code>double</code> to
      <code>float</code> as defined in section 5.1.3 of
      <cite>The Java™ Language Specification</cite>:
      if this <code>BigDecimal</code> has too great a
      magnitude represent as a <code>double</code>, it will be
      converted to {@link Double#NEGATIVE_INFINITY} or {@link
      Double#POSITIVE_INFINITY} as appropriate.  Note that even when
      the return value is finite, this conversion can lose
      information about the precision of the <code>BigDecimal</code>
      value.
      @return this <code>BigDecimal</code> converted to a <code>double</code>.</div>
<a id="L3252" name="L3252"></a>3252     <strong class="reserved">public</strong> <strong class="reserved">double</strong> <a href="../R/13491.html" title="Multiple referred from 65 places.">doubleValue</a>()<em class="brace">{</em>
<a id="L3253" name="L3253"></a>3253         <strong class="reserved">if</strong>(intCompact != INFLATED) <em class="brace">{</em>
<a id="L3254" name="L3254"></a>3254             <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0) <em class="brace">{</em>
<a id="L3255" name="L3255"></a>3255                 <strong class="reserved">return</strong> (<strong class="reserved">double</strong>)intCompact;
<a id="L3256" name="L3256"></a>3256             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
                  If both intCompact and the scale can be exactly
                  represented as double values, perform a single
                  double multiply or divide to compute the (properly
                  rounded) result.</div>
<a id="L3263" name="L3263"></a>3263                 <strong class="reserved">if</strong> (<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(intCompact) &lt; 1L&lt;&lt;52 ) <em class="brace">{</em>
<a id="L3264" name="L3264"></a>3264                     <em class="comment">// Don't have too guard against</em>
<a id="L3265" name="L3265"></a>3265                     <em class="comment">// Math.abs(MIN_VALUE) because of outer check</em>
<a id="L3266" name="L3266"></a>3266                     <em class="comment">// against INFLATED.</em>
<a id="L3267" name="L3267"></a>3267                     <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; 0 &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; double10pow.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3268" name="L3268"></a>3268                         <strong class="reserved">return</strong> (<strong class="reserved">double</strong>)intCompact / double10pow[<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>];
<a id="L3269" name="L3269"></a>3269                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; 0 &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; -double10pow.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3270" name="L3270"></a>3270                         <strong class="reserved">return</strong> (<strong class="reserved">double</strong>)intCompact * double10pow[-<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>];
<a id="L3271" name="L3271"></a>3271                     <em class="brace">}</em>
<a id="L3272" name="L3272"></a>3272                 <em class="brace">}</em>
<a id="L3273" name="L3273"></a>3273             <em class="brace">}</em>
<a id="L3274" name="L3274"></a>3274         <em class="brace">}</em>
<a id="L3275" name="L3275"></a>3275         <em class="comment">// Somewhat inefficient, but guaranteed to work.</em>
<a id="L3276" name="L3276"></a>3276         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/29129.html" title="Multiple defined in 4 places.">parseDouble</a>(<strong class="reserved">this</strong>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L3277" name="L3277"></a>3277     <em class="brace">}</em>
<a id="L3278" name="L3278"></a>3278 
<div class="comment">
      Powers of 10 which can be represented exactly in {@code
      double}.</div>
<a id="L3283" name="L3283"></a>3283     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">double</strong> double10pow[] = <em class="brace">{</em>
<a id="L3284" name="L3284"></a>3284         1.0e0,  1.0e1,  1.0e2,  1.0e3,  1.0e4,  1.0e5,
<a id="L3285" name="L3285"></a>3285         1.0e6,  1.0e7,  1.0e8,  1.0e9,  1.0e10, 1.0e11,
<a id="L3286" name="L3286"></a>3286         1.0e12, 1.0e13, 1.0e14, 1.0e15, 1.0e16, 1.0e17,
<a id="L3287" name="L3287"></a>3287         1.0e18, 1.0e19, 1.0e20, 1.0e21, 1.0e22
<a id="L3288" name="L3288"></a>3288     <em class="brace">}</em>;
<a id="L3289" name="L3289"></a>3289 
<div class="comment">
      Powers of 10 which can be represented exactly in {@code
      float}.</div>
<a id="L3294" name="L3294"></a>3294     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> float10pow[] = <em class="brace">{</em>
<a id="L3295" name="L3295"></a>3295         1.0e0f, 1.0e1f, 1.0e2f, 1.0e3f, 1.0e4f, 1.0e5f,
<a id="L3296" name="L3296"></a>3296         1.0e6f, 1.0e7f, 1.0e8f, 1.0e9f, 1.0e10f
<a id="L3297" name="L3297"></a>3297     <em class="brace">}</em>;
<a id="L3298" name="L3298"></a>3298 
<div class="comment">
      Returns the size of an ulp, a unit in the last place, of this
      <code>BigDecimal</code>.  An ulp of a nonzero <code>BigDecimal</code>
      value is the positive distance between this value and the
      <code>BigDecimal</code> value next larger in magnitude with the
      same number of digits.  An ulp of a zero value is numerically
      equal to 1 with the scale of <code>this</code>.  The result is
      stored with the same scale as <code>this</code> so the result
      for zero and nonzero values is equal to {@code [1,
      this.scale()]}.
      @return the size of an ulp of <code>this</code>
      @since 1.5</div>
<a id="L3313" name="L3313"></a>3313     <strong class="reserved">public</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/29599.html" title="Multiple referred from 7 places.">ulp</a>() <em class="brace">{</em>
<a id="L3314" name="L3314"></a>3314         <strong class="reserved">return</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1, <strong class="reserved">this</strong>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>(), 1);
<a id="L3315" name="L3315"></a>3315     <em class="brace">}</em>
<a id="L3316" name="L3316"></a>3316 
<a id="L3317" name="L3317"></a>3317     <em class="comment">// Private class to build a string representation for BigDecimal object.</em>
<a id="L3318" name="L3318"></a>3318     <em class="comment">// "StringBuilderHelper" is constructed as a thread local variable so it is</em>
<a id="L3319" name="L3319"></a>3319     <em class="comment">// thread safe. The StringBuilder field acts as a buffer to hold the temporary</em>
<a id="L3320" name="L3320"></a>3320     <em class="comment">// representation of BigDecimal. The cmpCharArray holds all the characters for</em>
<a id="L3321" name="L3321"></a>3321     <em class="comment">// the compact representation of BigDecimal (except for '-' sign' if it is</em>
<a id="L3322" name="L3322"></a>3322     <em class="comment">// negative) if its intCompact field is not INFLATED. It is shared by all</em>
<a id="L3323" name="L3323"></a>3323     <em class="comment">// calls to toString() and its variants in that particular thread.</em>
<a id="L3324" name="L3324"></a>3324     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/7649.html" title="Multiple referred from 7 places.">StringBuilderHelper</a> <em class="brace">{</em>
<a id="L3325" name="L3325"></a>3325         <strong class="reserved">final</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb;    <em class="comment">// Placeholder for BigDecimal string</em>
<a id="L3326" name="L3326"></a>3326         <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] cmpCharArray; <em class="comment">// character array to place the intCompact</em>
<a id="L3327" name="L3327"></a>3327 
<a id="L3328" name="L3328"></a>3328         StringBuilderHelper() <em class="brace">{</em>
<a id="L3329" name="L3329"></a>3329             sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L3330" name="L3330"></a>3330             <em class="comment">// All non negative longs can be made to fit into 19 character array.</em>
<a id="L3331" name="L3331"></a>3331             cmpCharArray = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[19];
<a id="L3332" name="L3332"></a>3332         <em class="brace">}</em>
<a id="L3333" name="L3333"></a>3333 
<a id="L3334" name="L3334"></a>3334         <em class="comment">// Accessors.</em>
<a id="L3335" name="L3335"></a>3335         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../S/1464.html#L3456" title="Referred from 3456 in src/java/math/BigDecimal.java.">getStringBuilder</a>() <em class="brace">{</em>
<a id="L3336" name="L3336"></a>3336             sb.<a href="../D/33077.html" title="Multiple defined in 10 places.">setLength</a>(0);
<a id="L3337" name="L3337"></a>3337             <strong class="reserved">return</strong> sb;
<a id="L3338" name="L3338"></a>3338         <em class="brace">}</em>
<a id="L3339" name="L3339"></a>3339 
<a id="L3340" name="L3340"></a>3340         <strong class="reserved">char</strong>[] <a href="../S/1464.html#L3446" title="Referred from 3446 in src/java/math/BigDecimal.java.">getCompactCharArray</a>() <em class="brace">{</em>
<a id="L3341" name="L3341"></a>3341             <strong class="reserved">return</strong> cmpCharArray;
<a id="L3342" name="L3342"></a>3342         <em class="brace">}</em>
<a id="L3343" name="L3343"></a>3343 
<div class="comment">
          Places characters representing the intCompact in <code>long</code> into
          cmpCharArray and returns the offset to the array where the
          representation starts.
          @param intCompact the number to put into the cmpCharArray.
          @return offset to the array where the representation starts.
          Note: intCompact must be greater or equal to zero.</div>
<a id="L3353" name="L3353"></a>3353         <strong class="reserved">int</strong> <a href="../S/1464.html#L3445" title="Referred from 3445 in src/java/math/BigDecimal.java.">putIntCompact</a>(<strong class="reserved">long</strong> intCompact) <em class="brace">{</em>
<a id="L3354" name="L3354"></a>3354             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> intCompact &gt;= 0;
<a id="L3355" name="L3355"></a>3355 
<a id="L3356" name="L3356"></a>3356             <strong class="reserved">long</strong> q;
<a id="L3357" name="L3357"></a>3357             <strong class="reserved">int</strong> r;
<a id="L3358" name="L3358"></a>3358             <em class="comment">// since we start from the least significant digit, charPos points to</em>
<a id="L3359" name="L3359"></a>3359             <em class="comment">// the last character in cmpCharArray.</em>
<a id="L3360" name="L3360"></a>3360             <strong class="reserved">int</strong> charPos = cmpCharArray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L3361" name="L3361"></a>3361 
<a id="L3362" name="L3362"></a>3362             <em class="comment">// Get 2 digits/iteration using longs until quotient fits into an int</em>
<a id="L3363" name="L3363"></a>3363             <strong class="reserved">while</strong> (intCompact &gt; <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE) <em class="brace">{</em>
<a id="L3364" name="L3364"></a>3364                 q = intCompact / 100;
<a id="L3365" name="L3365"></a>3365                 r = (<strong class="reserved">int</strong>)(intCompact - q * 100);
<a id="L3366" name="L3366"></a>3366                 intCompact = q;
<a id="L3367" name="L3367"></a>3367                 cmpCharArray[--charPos] = DIGIT_ONES[r];
<a id="L3368" name="L3368"></a>3368                 cmpCharArray[--charPos] = DIGIT_TENS[r];
<a id="L3369" name="L3369"></a>3369             <em class="brace">}</em>
<a id="L3370" name="L3370"></a>3370 
<a id="L3371" name="L3371"></a>3371             <em class="comment">// Get 2 digits/iteration using ints when i2 &gt;= 100</em>
<a id="L3372" name="L3372"></a>3372             <strong class="reserved">int</strong> q2;
<a id="L3373" name="L3373"></a>3373             <strong class="reserved">int</strong> i2 = (<strong class="reserved">int</strong>)intCompact;
<a id="L3374" name="L3374"></a>3374             <strong class="reserved">while</strong> (i2 &gt;= 100) <em class="brace">{</em>
<a id="L3375" name="L3375"></a>3375                 q2 = i2 / 100;
<a id="L3376" name="L3376"></a>3376                 r  = i2 - q2 * 100;
<a id="L3377" name="L3377"></a>3377                 i2 = q2;
<a id="L3378" name="L3378"></a>3378                 cmpCharArray[--charPos] = DIGIT_ONES[r];
<a id="L3379" name="L3379"></a>3379                 cmpCharArray[--charPos] = DIGIT_TENS[r];
<a id="L3380" name="L3380"></a>3380             <em class="brace">}</em>
<a id="L3381" name="L3381"></a>3381 
<a id="L3382" name="L3382"></a>3382             cmpCharArray[--charPos] = DIGIT_ONES[i2];
<a id="L3383" name="L3383"></a>3383             <strong class="reserved">if</strong> (i2 &gt;= 10)
<a id="L3384" name="L3384"></a>3384                 cmpCharArray[--charPos] = DIGIT_TENS[i2];
<a id="L3385" name="L3385"></a>3385 
<a id="L3386" name="L3386"></a>3386             <strong class="reserved">return</strong> charPos;
<a id="L3387" name="L3387"></a>3387         <em class="brace">}</em>
<a id="L3388" name="L3388"></a>3388 
<a id="L3389" name="L3389"></a>3389         <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">char</strong>[] DIGIT_TENS = <em class="brace">{</em>
<a id="L3390" name="L3390"></a>3390             '0', '0', '0', '0', '0', '0', '0', '0', '0', '0',
<a id="L3391" name="L3391"></a>3391             '1', '1', '1', '1', '1', '1', '1', '1', '1', '1',
<a id="L3392" name="L3392"></a>3392             '2', '2', '2', '2', '2', '2', '2', '2', '2', '2',
<a id="L3393" name="L3393"></a>3393             '3', '3', '3', '3', '3', '3', '3', '3', '3', '3',
<a id="L3394" name="L3394"></a>3394             '4', '4', '4', '4', '4', '4', '4', '4', '4', '4',
<a id="L3395" name="L3395"></a>3395             '5', '5', '5', '5', '5', '5', '5', '5', '5', '5',
<a id="L3396" name="L3396"></a>3396             '6', '6', '6', '6', '6', '6', '6', '6', '6', '6',
<a id="L3397" name="L3397"></a>3397             '7', '7', '7', '7', '7', '7', '7', '7', '7', '7',
<a id="L3398" name="L3398"></a>3398             '8', '8', '8', '8', '8', '8', '8', '8', '8', '8',
<a id="L3399" name="L3399"></a>3399             '9', '9', '9', '9', '9', '9', '9', '9', '9', '9',
<a id="L3400" name="L3400"></a>3400         <em class="brace">}</em>;
<a id="L3401" name="L3401"></a>3401 
<a id="L3402" name="L3402"></a>3402         <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">char</strong>[] DIGIT_ONES = <em class="brace">{</em>
<a id="L3403" name="L3403"></a>3403             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3404" name="L3404"></a>3404             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3405" name="L3405"></a>3405             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3406" name="L3406"></a>3406             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3407" name="L3407"></a>3407             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3408" name="L3408"></a>3408             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3409" name="L3409"></a>3409             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3410" name="L3410"></a>3410             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3411" name="L3411"></a>3411             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3412" name="L3412"></a>3412             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
<a id="L3413" name="L3413"></a>3413         <em class="brace">}</em>;
<a id="L3414" name="L3414"></a>3414     <em class="brace">}</em>
<a id="L3415" name="L3415"></a>3415 
<div class="comment">
      Lay out this <code>BigDecimal</code> into a <code>char[]</code> array.
      The Java 1.2 equivalent to this was called <code>getValueString</code>.
      @param  sci <code>true</code> for Scientific exponential notation;
               <code>false</code> for Engineering
      @return string with canonical string representation of this
              <code>BigDecimal</code></div>
<a id="L3425" name="L3425"></a>3425     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/22433.html" title="Multiple referred from 2 places.">layoutChars</a>(<strong class="reserved">boolean</strong> sci) <em class="brace">{</em>
<a id="L3426" name="L3426"></a>3426         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 0)                      <em class="comment">// zero scale is trivial</em>
<a id="L3427" name="L3427"></a>3427             <strong class="reserved">return</strong> (intCompact != INFLATED) ?
<a id="L3428" name="L3428"></a>3428                 <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(intCompact):
<a id="L3429" name="L3429"></a>3429                 intVal.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3430" name="L3430"></a>3430         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == 2  &amp;&amp;
<a id="L3431" name="L3431"></a>3431             intCompact &gt;= 0 &amp;&amp; intCompact &lt; <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE) <em class="brace">{</em>
<a id="L3432" name="L3432"></a>3432             <em class="comment">// currency fast path</em>
<a id="L3433" name="L3433"></a>3433             <strong class="reserved">int</strong> lowInt = (<strong class="reserved">int</strong>)intCompact % 100;
<a id="L3434" name="L3434"></a>3434             <strong class="reserved">int</strong> highInt = (<strong class="reserved">int</strong>)intCompact / 100;
<a id="L3435" name="L3435"></a>3435             <strong class="reserved">return</strong> (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(highInt) + '.' +
<a id="L3436" name="L3436"></a>3436                     <a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a>.DIGIT_TENS[lowInt] +
<a id="L3437" name="L3437"></a>3437                     <a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a>.DIGIT_ONES[lowInt]) ;
<a id="L3438" name="L3438"></a>3438         <em class="brace">}</em>
<a id="L3439" name="L3439"></a>3439 
<a id="L3440" name="L3440"></a>3440         <a href="../S/1464.html#L3324" title="Defined at 3324 in src/java/math/BigDecimal.java.">StringBuilderHelper</a> sbHelper = threadLocalStringBuilderHelper.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L3441" name="L3441"></a>3441         <strong class="reserved">char</strong>[] coeff;
<a id="L3442" name="L3442"></a>3442         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;  <em class="comment">// offset is the starting index for coeff array</em>
<a id="L3443" name="L3443"></a>3443         <em class="comment">// Get the significand as an absolute value</em>
<a id="L3444" name="L3444"></a>3444         <strong class="reserved">if</strong> (intCompact != INFLATED) <em class="brace">{</em>
<a id="L3445" name="L3445"></a>3445             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = sbHelper.<a href="../S/1464.html#L3353" title="Defined at 3353 in src/java/math/BigDecimal.java.">putIntCompact</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(intCompact));
<a id="L3446" name="L3446"></a>3446             coeff  = sbHelper.<a href="../S/1464.html#L3340" title="Defined at 3340 in src/java/math/BigDecimal.java.">getCompactCharArray</a>();
<a id="L3447" name="L3447"></a>3447         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3448" name="L3448"></a>3448             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = 0;
<a id="L3449" name="L3449"></a>3449             coeff  = intVal.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>().<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>().<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L3450" name="L3450"></a>3450         <em class="brace">}</em>
<a id="L3451" name="L3451"></a>3451 
<a id="L3452" name="L3452"></a>3452         <em class="comment">// Construct a buffer, with sufficient capacity for all cases.</em>
<a id="L3453" name="L3453"></a>3453         <em class="comment">// If E-notation is needed, length will be: +1 if negative, +1</em>
<a id="L3454" name="L3454"></a>3454         <em class="comment">// if '.' needed, +2 for "E+", + up to 10 for adjusted exponent.</em>
<a id="L3455" name="L3455"></a>3455         <em class="comment">// Otherwise it could have +1 if negative, plus leading "0.00000"</em>
<a id="L3456" name="L3456"></a>3456         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = sbHelper.<a href="../S/1464.html#L3335" title="Defined at 3335 in src/java/math/BigDecimal.java.">getStringBuilder</a>();
<a id="L3457" name="L3457"></a>3457         <strong class="reserved">if</strong> (<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() &lt; 0)             <em class="comment">// prefix '-' if negative</em>
<a id="L3458" name="L3458"></a>3458             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('-');
<a id="L3459" name="L3459"></a>3459         <strong class="reserved">int</strong> coeffLen = coeff.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L3460" name="L3460"></a>3460         <strong class="reserved">long</strong> adjusted = -(<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + (coeffLen -1);
<a id="L3461" name="L3461"></a>3461         <strong class="reserved">if</strong> ((<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt;= 0) &amp;&amp; (adjusted &gt;= -6)) <em class="brace">{</em> <em class="comment">// plain number</em>
<a id="L3462" name="L3462"></a>3462             <strong class="reserved">int</strong> <a href="../S/4204.html#L181" title="Defined at 181 in src/javax/imageio/stream/MemoryCache.java.">pad</a> = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - coeffLen;         <em class="comment">// count of padding zeros</em>
<a id="L3463" name="L3463"></a>3463             <strong class="reserved">if</strong> (<a href="../S/4204.html#L181" title="Defined at 181 in src/javax/imageio/stream/MemoryCache.java.">pad</a> &gt;= 0) <em class="brace">{</em>                     <em class="comment">// 0.xxx form</em>
<a id="L3464" name="L3464"></a>3464                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0');
<a id="L3465" name="L3465"></a>3465                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('.');
<a id="L3466" name="L3466"></a>3466                 <strong class="reserved">for</strong> (; <a href="../S/4204.html#L181" title="Defined at 181 in src/javax/imageio/stream/MemoryCache.java.">pad</a>&gt;0; <a href="../S/4204.html#L181" title="Defined at 181 in src/javax/imageio/stream/MemoryCache.java.">pad</a>--) <em class="brace">{</em>
<a id="L3467" name="L3467"></a>3467                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0');
<a id="L3468" name="L3468"></a>3468                 <em class="brace">}</em>
<a id="L3469" name="L3469"></a>3469                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, coeffLen);
<a id="L3470" name="L3470"></a>3470             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>                         <em class="comment">// xx.xx form</em>
<a id="L3471" name="L3471"></a>3471                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, -<a href="../S/4204.html#L181" title="Defined at 181 in src/javax/imageio/stream/MemoryCache.java.">pad</a>);
<a id="L3472" name="L3472"></a>3472                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('.');
<a id="L3473" name="L3473"></a>3473                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, -<a href="../S/4204.html#L181" title="Defined at 181 in src/javax/imageio/stream/MemoryCache.java.">pad</a> + <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L3474" name="L3474"></a>3474             <em class="brace">}</em>
<a id="L3475" name="L3475"></a>3475         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// E-notation is needed</em>
<a id="L3476" name="L3476"></a>3476             <strong class="reserved">if</strong> (sci) <em class="brace">{</em>                       <em class="comment">// Scientific notation</em>
<a id="L3477" name="L3477"></a>3477                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>]);   <em class="comment">// first character</em>
<a id="L3478" name="L3478"></a>3478                 <strong class="reserved">if</strong> (coeffLen &gt; 1) <em class="brace">{</em>          <em class="comment">// more to come</em>
<a id="L3479" name="L3479"></a>3479                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('.');
<a id="L3480" name="L3480"></a>3480                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + 1, coeffLen - 1);
<a id="L3481" name="L3481"></a>3481                 <em class="brace">}</em>
<a id="L3482" name="L3482"></a>3482             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>                         <em class="comment">// Engineering notation</em>
<a id="L3483" name="L3483"></a>3483                 <strong class="reserved">int</strong> sig = (<strong class="reserved">int</strong>)(adjusted % 3);
<a id="L3484" name="L3484"></a>3484                 <strong class="reserved">if</strong> (sig &lt; 0)
<a id="L3485" name="L3485"></a>3485                     sig += 3;                <em class="comment">// [adjusted was negative]</em>
<a id="L3486" name="L3486"></a>3486                 adjusted -= sig;             <em class="comment">// now a multiple of 3</em>
<a id="L3487" name="L3487"></a>3487                 sig++;
<a id="L3488" name="L3488"></a>3488                 <strong class="reserved">if</strong> (<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == 0) <em class="brace">{</em>
<a id="L3489" name="L3489"></a>3489                     <strong class="reserved">switch</strong> (sig) <em class="brace">{</em>
<a id="L3490" name="L3490"></a>3490                     <strong class="reserved">case</strong> 1:
<a id="L3491" name="L3491"></a>3491                         <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0'); <em class="comment">// exponent is a multiple of three</em>
<a id="L3492" name="L3492"></a>3492                         <strong class="reserved">break</strong>;
<a id="L3493" name="L3493"></a>3493                     <strong class="reserved">case</strong> 2:
<a id="L3494" name="L3494"></a>3494                         <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("0.00");
<a id="L3495" name="L3495"></a>3495                         adjusted += 3;
<a id="L3496" name="L3496"></a>3496                         <strong class="reserved">break</strong>;
<a id="L3497" name="L3497"></a>3497                     <strong class="reserved">case</strong> 3:
<a id="L3498" name="L3498"></a>3498                         <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("0.0");
<a id="L3499" name="L3499"></a>3499                         adjusted += 3;
<a id="L3500" name="L3500"></a>3500                         <strong class="reserved">break</strong>;
<a id="L3501" name="L3501"></a>3501                     <strong class="reserved">default</strong>:
<a id="L3502" name="L3502"></a>3502                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>("Unexpected sig value " + sig);
<a id="L3503" name="L3503"></a>3503                     <em class="brace">}</em>
<a id="L3504" name="L3504"></a>3504                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sig &gt;= coeffLen) <em class="brace">{</em>   <em class="comment">// significand all in integer</em>
<a id="L3505" name="L3505"></a>3505                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, coeffLen);
<a id="L3506" name="L3506"></a>3506                     <em class="comment">// may need some zeros, too</em>
<a id="L3507" name="L3507"></a>3507                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = sig - coeffLen; i &gt; 0; i--)
<a id="L3508" name="L3508"></a>3508                         <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0');
<a id="L3509" name="L3509"></a>3509                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>                     <em class="comment">// xx.xxE form</em>
<a id="L3510" name="L3510"></a>3510                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, sig);
<a id="L3511" name="L3511"></a>3511                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('.');
<a id="L3512" name="L3512"></a>3512                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(coeff, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + sig, coeffLen - sig);
<a id="L3513" name="L3513"></a>3513                 <em class="brace">}</em>
<a id="L3514" name="L3514"></a>3514             <em class="brace">}</em>
<a id="L3515" name="L3515"></a>3515             <strong class="reserved">if</strong> (adjusted != 0) <em class="brace">{</em>             <em class="comment">// [!sci could have made 0]</em>
<a id="L3516" name="L3516"></a>3516                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('E');
<a id="L3517" name="L3517"></a>3517                 <strong class="reserved">if</strong> (adjusted &gt; 0)            <em class="comment">// force sign for positive</em>
<a id="L3518" name="L3518"></a>3518                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('+');
<a id="L3519" name="L3519"></a>3519                 <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(adjusted);
<a id="L3520" name="L3520"></a>3520             <em class="brace">}</em>
<a id="L3521" name="L3521"></a>3521         <em class="brace">}</em>
<a id="L3522" name="L3522"></a>3522         <strong class="reserved">return</strong> <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3523" name="L3523"></a>3523     <em class="brace">}</em>
<a id="L3524" name="L3524"></a>3524 
<div class="comment">
      Return 10 to the power n, as a <code>BigInteger</code>.
      @param  n the power of ten to be returned (&gt;=0)
      @return a <code>BigInteger</code> with the value (10<sup>n</sup>)</div>
<a id="L3531" name="L3531"></a>3531     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/10591.html" title="Multiple referred from 9 places.">bigTenToThe</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L3532" name="L3532"></a>3532         <strong class="reserved">if</strong> (n &lt; 0)
<a id="L3533" name="L3533"></a>3533             <strong class="reserved">return</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ZERO;
<a id="L3534" name="L3534"></a>3534 
<a id="L3535" name="L3535"></a>3535         <strong class="reserved">if</strong> (n &lt; BIG_TEN_POWERS_TABLE_MAX) <em class="brace">{</em>
<a id="L3536" name="L3536"></a>3536             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>[] pows = BIG_TEN_POWERS_TABLE;
<a id="L3537" name="L3537"></a>3537             <strong class="reserved">if</strong> (n &lt; pows.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L3538" name="L3538"></a>3538                 <strong class="reserved">return</strong> pows[n];
<a id="L3539" name="L3539"></a>3539             <strong class="reserved">else</strong>
<a id="L3540" name="L3540"></a>3540                 <strong class="reserved">return</strong> <a href="../S/1464.html#L3554" title="Defined at 3554 in src/java/math/BigDecimal.java.">expandBigIntegerTenPowers</a>(n);
<a id="L3541" name="L3541"></a>3541         <em class="brace">}</em>
<a id="L3542" name="L3542"></a>3542 
<a id="L3543" name="L3543"></a>3543         <strong class="reserved">return</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.TEN.<a href="../D/29502.html" title="Multiple defined in 5 places.">pow</a>(n);
<a id="L3544" name="L3544"></a>3544     <em class="brace">}</em>
<a id="L3545" name="L3545"></a>3545 
<div class="comment">
      Expand the BIG_TEN_POWERS_TABLE array to contain at least 10**n.
      @param n the power of ten to be returned (&gt;=0)
      @return a <code>BigDecimal</code> with the value (10<sup>n</sup>) and
              in the meantime, the BIG_TEN_POWERS_TABLE array gets
              expanded to the size greater than n.</div>
<a id="L3554" name="L3554"></a>3554     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/1464.html#L3540" title="Referred from 3540 in src/java/math/BigDecimal.java.">expandBigIntegerTenPowers</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L3555" name="L3555"></a>3555         <strong class="reserved">synchronized</strong>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L3556" name="L3556"></a>3556             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>[] pows = BIG_TEN_POWERS_TABLE;
<a id="L3557" name="L3557"></a>3557             <strong class="reserved">int</strong> curLen = pows.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L3558" name="L3558"></a>3558             <em class="comment">// The following comparison and the above synchronized statement is</em>
<a id="L3559" name="L3559"></a>3559             <em class="comment">// to prevent multiple threads from expanding the same array.</em>
<a id="L3560" name="L3560"></a>3560             <strong class="reserved">if</strong> (curLen &lt;= n) <em class="brace">{</em>
<a id="L3561" name="L3561"></a>3561                 <strong class="reserved">int</strong> newLen = curLen &lt;&lt; 1;
<a id="L3562" name="L3562"></a>3562                 <strong class="reserved">while</strong> (newLen &lt;= n)
<a id="L3563" name="L3563"></a>3563                     newLen &lt;&lt;= 1;
<a id="L3564" name="L3564"></a>3564                 pows = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(pows, newLen);
<a id="L3565" name="L3565"></a>3565                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = curLen; i &lt; newLen; i++)
<a id="L3566" name="L3566"></a>3566                     pows[i] = pows[i - 1].<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.TEN);
<a id="L3567" name="L3567"></a>3567                 <em class="comment">// Based on the following facts:</em>
<a id="L3568" name="L3568"></a>3568                 <em class="comment">// 1. pows is a private local varible;</em>
<a id="L3569" name="L3569"></a>3569                 <em class="comment">// 2. the following store is a volatile store.</em>
<a id="L3570" name="L3570"></a>3570                 <em class="comment">// the newly created array elements can be safely published.</em>
<a id="L3571" name="L3571"></a>3571                 BIG_TEN_POWERS_TABLE = pows;
<a id="L3572" name="L3572"></a>3572             <em class="brace">}</em>
<a id="L3573" name="L3573"></a>3573             <strong class="reserved">return</strong> pows[n];
<a id="L3574" name="L3574"></a>3574         <em class="brace">}</em>
<a id="L3575" name="L3575"></a>3575     <em class="brace">}</em>
<a id="L3576" name="L3576"></a>3576 
<a id="L3577" name="L3577"></a>3577     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong>[] LONG_TEN_POWERS_TABLE = <em class="brace">{</em>
<a id="L3578" name="L3578"></a>3578         1,                     <em class="comment">// 0 / 10^0</em>
<a id="L3579" name="L3579"></a>3579         10,                    <em class="comment">// 1 / 10^1</em>
<a id="L3580" name="L3580"></a>3580         100,                   <em class="comment">// 2 / 10^2</em>
<a id="L3581" name="L3581"></a>3581         1000,                  <em class="comment">// 3 / 10^3</em>
<a id="L3582" name="L3582"></a>3582         10000,                 <em class="comment">// 4 / 10^4</em>
<a id="L3583" name="L3583"></a>3583         100000,                <em class="comment">// 5 / 10^5</em>
<a id="L3584" name="L3584"></a>3584         1000000,               <em class="comment">// 6 / 10^6</em>
<a id="L3585" name="L3585"></a>3585         10000000,              <em class="comment">// 7 / 10^7</em>
<a id="L3586" name="L3586"></a>3586         100000000,             <em class="comment">// 8 / 10^8</em>
<a id="L3587" name="L3587"></a>3587         1000000000,            <em class="comment">// 9 / 10^9</em>
<a id="L3588" name="L3588"></a>3588         10000000000L,          <em class="comment">// 10 / 10^10</em>
<a id="L3589" name="L3589"></a>3589         100000000000L,         <em class="comment">// 11 / 10^11</em>
<a id="L3590" name="L3590"></a>3590         1000000000000L,        <em class="comment">// 12 / 10^12</em>
<a id="L3591" name="L3591"></a>3591         10000000000000L,       <em class="comment">// 13 / 10^13</em>
<a id="L3592" name="L3592"></a>3592         100000000000000L,      <em class="comment">// 14 / 10^14</em>
<a id="L3593" name="L3593"></a>3593         1000000000000000L,     <em class="comment">// 15 / 10^15</em>
<a id="L3594" name="L3594"></a>3594         10000000000000000L,    <em class="comment">// 16 / 10^16</em>
<a id="L3595" name="L3595"></a>3595         100000000000000000L,   <em class="comment">// 17 / 10^17</em>
<a id="L3596" name="L3596"></a>3596         1000000000000000000L   <em class="comment">// 18 / 10^18</em>
<a id="L3597" name="L3597"></a>3597     <em class="brace">}</em>;
<a id="L3598" name="L3598"></a>3598 
<a id="L3599" name="L3599"></a>3599     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">volatile</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> BIG_TEN_POWERS_TABLE[] = <em class="brace">{</em>
<a id="L3600" name="L3600"></a>3600         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.ONE,
<a id="L3601" name="L3601"></a>3601         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(10),
<a id="L3602" name="L3602"></a>3602         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(100),
<a id="L3603" name="L3603"></a>3603         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1000),
<a id="L3604" name="L3604"></a>3604         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(10000),
<a id="L3605" name="L3605"></a>3605         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(100000),
<a id="L3606" name="L3606"></a>3606         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1000000),
<a id="L3607" name="L3607"></a>3607         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(10000000),
<a id="L3608" name="L3608"></a>3608         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(100000000),
<a id="L3609" name="L3609"></a>3609         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1000000000),
<a id="L3610" name="L3610"></a>3610         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(10000000000L),
<a id="L3611" name="L3611"></a>3611         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(100000000000L),
<a id="L3612" name="L3612"></a>3612         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1000000000000L),
<a id="L3613" name="L3613"></a>3613         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(10000000000000L),
<a id="L3614" name="L3614"></a>3614         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(100000000000000L),
<a id="L3615" name="L3615"></a>3615         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1000000000000000L),
<a id="L3616" name="L3616"></a>3616         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(10000000000000000L),
<a id="L3617" name="L3617"></a>3617         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(100000000000000000L),
<a id="L3618" name="L3618"></a>3618         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(1000000000000000000L)
<a id="L3619" name="L3619"></a>3619     <em class="brace">}</em>;
<a id="L3620" name="L3620"></a>3620 
<a id="L3621" name="L3621"></a>3621     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> BIG_TEN_POWERS_TABLE_INITLEN =
<a id="L3622" name="L3622"></a>3622         BIG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L3623" name="L3623"></a>3623     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> BIG_TEN_POWERS_TABLE_MAX =
<a id="L3624" name="L3624"></a>3624         16 * BIG_TEN_POWERS_TABLE_INITLEN;
<a id="L3625" name="L3625"></a>3625 
<a id="L3626" name="L3626"></a>3626     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> THRESHOLDS_TABLE[] = <em class="brace">{</em>
<a id="L3627" name="L3627"></a>3627         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE,                     <em class="comment">// 0</em>
<a id="L3628" name="L3628"></a>3628         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/10L,                 <em class="comment">// 1</em>
<a id="L3629" name="L3629"></a>3629         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/100L,                <em class="comment">// 2</em>
<a id="L3630" name="L3630"></a>3630         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/1000L,               <em class="comment">// 3</em>
<a id="L3631" name="L3631"></a>3631         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/10000L,              <em class="comment">// 4</em>
<a id="L3632" name="L3632"></a>3632         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/100000L,             <em class="comment">// 5</em>
<a id="L3633" name="L3633"></a>3633         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/1000000L,            <em class="comment">// 6</em>
<a id="L3634" name="L3634"></a>3634         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/10000000L,           <em class="comment">// 7</em>
<a id="L3635" name="L3635"></a>3635         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/100000000L,          <em class="comment">// 8</em>
<a id="L3636" name="L3636"></a>3636         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/1000000000L,         <em class="comment">// 9</em>
<a id="L3637" name="L3637"></a>3637         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/10000000000L,        <em class="comment">// 10</em>
<a id="L3638" name="L3638"></a>3638         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/100000000000L,       <em class="comment">// 11</em>
<a id="L3639" name="L3639"></a>3639         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/1000000000000L,      <em class="comment">// 12</em>
<a id="L3640" name="L3640"></a>3640         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/10000000000000L,     <em class="comment">// 13</em>
<a id="L3641" name="L3641"></a>3641         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/100000000000000L,    <em class="comment">// 14</em>
<a id="L3642" name="L3642"></a>3642         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/1000000000000000L,   <em class="comment">// 15</em>
<a id="L3643" name="L3643"></a>3643         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/10000000000000000L,  <em class="comment">// 16</em>
<a id="L3644" name="L3644"></a>3644         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/100000000000000000L, <em class="comment">// 17</em>
<a id="L3645" name="L3645"></a>3645         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE/1000000000000000000L <em class="comment">// 18</em>
<a id="L3646" name="L3646"></a>3646     <em class="brace">}</em>;
<a id="L3647" name="L3647"></a>3647 
<div class="comment">
      Compute val * 10 ^ n; return this product if it is
      representable as a long, INFLATED otherwise.</div>
<a id="L3652" name="L3652"></a>3652     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/22711.html" title="Multiple referred from 19 places.">longMultiplyPowerTen</a>(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L3653" name="L3653"></a>3653         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> == 0 || n &lt;= 0)
<a id="L3654" name="L3654"></a>3654             <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3655" name="L3655"></a>3655         <strong class="reserved">long</strong>[] tab = LONG_TEN_POWERS_TABLE;
<a id="L3656" name="L3656"></a>3656         <strong class="reserved">long</strong>[] <a href="../D/11902.html" title="Multiple defined in 2 places.">bounds</a> = THRESHOLDS_TABLE;
<a id="L3657" name="L3657"></a>3657         <strong class="reserved">if</strong> (n &lt; tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp; n &lt; <a href="../D/11902.html" title="Multiple defined in 2 places.">bounds</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3658" name="L3658"></a>3658             <strong class="reserved">long</strong> tenpower = tab[n];
<a id="L3659" name="L3659"></a>3659             <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> == 1)
<a id="L3660" name="L3660"></a>3660                 <strong class="reserved">return</strong> tenpower;
<a id="L3661" name="L3661"></a>3661             <strong class="reserved">if</strong> (<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) &lt;= <a href="../D/11902.html" title="Multiple defined in 2 places.">bounds</a>[n])
<a id="L3662" name="L3662"></a>3662                 <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> * tenpower;
<a id="L3663" name="L3663"></a>3663         <em class="brace">}</em>
<a id="L3664" name="L3664"></a>3664         <strong class="reserved">return</strong> INFLATED;
<a id="L3665" name="L3665"></a>3665     <em class="brace">}</em>
<a id="L3666" name="L3666"></a>3666 
<div class="comment">
      Compute this * 10 ^ n.
      Needed mainly to allow special casing to trap zero value</div>
<a id="L3671" name="L3671"></a>3671     <strong class="reserved">private</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/10590.html" title="Multiple referred from 32 places.">bigMultiplyPowerTen</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L3672" name="L3672"></a>3672         <strong class="reserved">if</strong> (n &lt;= 0)
<a id="L3673" name="L3673"></a>3673             <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../S/1464.html#L3685" title="Defined at 3685 in src/java/math/BigDecimal.java.">inflated</a>();
<a id="L3674" name="L3674"></a>3674 
<a id="L3675" name="L3675"></a>3675         <strong class="reserved">if</strong> (intCompact != INFLATED)
<a id="L3676" name="L3676"></a>3676             <strong class="reserved">return</strong> <a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(n).<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(intCompact);
<a id="L3677" name="L3677"></a>3677         <strong class="reserved">else</strong>
<a id="L3678" name="L3678"></a>3678             <strong class="reserved">return</strong> intVal.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(n));
<a id="L3679" name="L3679"></a>3679     <em class="brace">}</em>
<a id="L3680" name="L3680"></a>3680 
<div class="comment">
      Returns appropriate BigInteger from intVal field if intVal is
      null, i.e. the compact representation is in use.</div>
<a id="L3685" name="L3685"></a>3685     <strong class="reserved">private</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/20534.html" title="Multiple referred from 10 places.">inflated</a>() <em class="brace">{</em>
<a id="L3686" name="L3686"></a>3686         <strong class="reserved">if</strong> (intVal == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3687" name="L3687"></a>3687             <strong class="reserved">return</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(intCompact);
<a id="L3688" name="L3688"></a>3688         <em class="brace">}</em>
<a id="L3689" name="L3689"></a>3689         <strong class="reserved">return</strong> intVal;
<a id="L3690" name="L3690"></a>3690     <em class="brace">}</em>
<a id="L3691" name="L3691"></a>3691 
<div class="comment">
      Match the scales of two <code>BigDecimal</code>s to align their
      least significant digits.
      <p>If the scales of val[0] and val[1] differ, rescale
      (non-destructively) the lower-scaled <code>BigDecimal</code> so
      they match.  That is, the lower-scaled reference will be
      replaced by a reference to a new object with the same scale as
      the other <code>BigDecimal</code>.
      @param  val array of two elements referring to the two
              <code>BigDecimal</code>s to be aligned.</p></div>
<a id="L3705" name="L3705"></a>3705     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/1464.html#L1354" title="Referred from 1354 in src/java/math/BigDecimal.java.">matchScale</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>[] <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3706" name="L3706"></a>3706         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[0].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[1].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L3707" name="L3707"></a>3707             <strong class="reserved">return</strong>;
<a id="L3708" name="L3708"></a>3708         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[0].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[1].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L3709" name="L3709"></a>3709             <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[0] = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[0].<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[1].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, ROUND_UNNECESSARY);
<a id="L3710" name="L3710"></a>3710         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[1].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &lt; <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[0].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L3711" name="L3711"></a>3711             <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[1] = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[1].<a href="../D/33804.html" title="Multiple defined in 5 places.">setScale</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>[0].<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, ROUND_UNNECESSARY);
<a id="L3712" name="L3712"></a>3712         <em class="brace">}</em>
<a id="L3713" name="L3713"></a>3713     <em class="brace">}</em>
<a id="L3714" name="L3714"></a>3714 
<a id="L3715" name="L3715"></a>3715     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/8541.html" title="Multiple referred from 4 places.">UnsafeHolder</a> <em class="brace">{</em>
<a id="L3716" name="L3716"></a>3716         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> sun.misc.Unsafe <a href="../S/1996.html#L558" title="Defined at 558 in src/java/nio/Bits.java.">unsafe</a>;
<a id="L3717" name="L3717"></a>3717         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> intCompactOffset;
<a id="L3718" name="L3718"></a>3718         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> intValOffset;
<a id="L3719" name="L3719"></a>3719         <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L3720" name="L3720"></a>3720             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L3721" name="L3721"></a>3721                 <a href="../S/1996.html#L558" title="Defined at 558 in src/java/nio/Bits.java.">unsafe</a> = sun.misc.Unsafe.getUnsafe();
<a id="L3722" name="L3722"></a>3722                 intCompactOffset = <a href="../S/1996.html#L558" title="Defined at 558 in src/java/nio/Bits.java.">unsafe</a>.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L3723" name="L3723"></a>3723                     (<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.<strong class="reserved">class</strong>.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("intCompact"));
<a id="L3724" name="L3724"></a>3724                 intValOffset = <a href="../S/1996.html#L558" title="Defined at 558 in src/java/nio/Bits.java.">unsafe</a>.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L3725" name="L3725"></a>3725                     (<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.<strong class="reserved">class</strong>.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("intVal"));
<a id="L3726" name="L3726"></a>3726             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L3727" name="L3727"></a>3727                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1748.html#L44" title="Defined at 44 in src/java/lang/ExceptionInInitializerError.java.">ExceptionInInitializerError</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L3728" name="L3728"></a>3728             <em class="brace">}</em>
<a id="L3729" name="L3729"></a>3729         <em class="brace">}</em>
<a id="L3730" name="L3730"></a>3730         <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/1464.html#L3755" title="Referred from 3755 in src/java/math/BigDecimal.java.">setIntCompactVolatile</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> bd, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3731" name="L3731"></a>3731             <a href="../S/1996.html#L558" title="Defined at 558 in src/java/nio/Bits.java.">unsafe</a>.putLongVolatile(bd, intCompactOffset, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L3732" name="L3732"></a>3732         <em class="brace">}</em>
<a id="L3733" name="L3733"></a>3733 
<a id="L3734" name="L3734"></a>3734         <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/1464.html#L3767" title="Referred from 3767 in src/java/math/BigDecimal.java.">setIntValVolatile</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> bd, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3735" name="L3735"></a>3735             <a href="../S/1996.html#L558" title="Defined at 558 in src/java/nio/Bits.java.">unsafe</a>.putObjectVolatile(bd, intValOffset, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L3736" name="L3736"></a>3736         <em class="brace">}</em>
<a id="L3737" name="L3737"></a>3737     <em class="brace">}</em>
<a id="L3738" name="L3738"></a>3738 
<div class="comment">
      Reconstitute the <code>BigDecimal</code> instance from a stream (that is,
      deserialize it).
      @param s the stream being read.</div>
<a id="L3745" name="L3745"></a>3745     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L3746" name="L3746"></a>3746         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L3747" name="L3747"></a>3747         <em class="comment">// Read in all fields</em>
<a id="L3748" name="L3748"></a>3748         s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L3749" name="L3749"></a>3749         <em class="comment">// validate possibly bad fields</em>
<a id="L3750" name="L3750"></a>3750         <strong class="reserved">if</strong> (intVal == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3751" name="L3751"></a>3751             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a> = "BigDecimal: null intVal in stream";
<a id="L3752" name="L3752"></a>3752             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>);
<a id="L3753" name="L3753"></a>3753         <em class="comment">// [all values of scale are now allowed]</em>
<a id="L3754" name="L3754"></a>3754         <em class="brace">}</em>
<a id="L3755" name="L3755"></a>3755         <a href="../D/9405.html" title="Multiple defined in 2 places.">UnsafeHolder</a>.<a href="../S/1464.html#L3730" title="Defined at 3730 in src/java/math/BigDecimal.java.">setIntCompactVolatile</a>(<strong class="reserved">this</strong>, <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal));
<a id="L3756" name="L3756"></a>3756     <em class="brace">}</em>
<a id="L3757" name="L3757"></a>3757 
<div class="comment">
     Serialize this <code>BigDecimal</code> to the stream in question
     @param s the stream to serialize to.</div>
<a id="L3763" name="L3763"></a>3763    <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> s)
<a id="L3764" name="L3764"></a>3764        <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L3765" name="L3765"></a>3765        <em class="comment">// Must inflate to maintain compatible serial form.</em>
<a id="L3766" name="L3766"></a>3766        <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.intVal == <strong class="reserved">null</strong>)
<a id="L3767" name="L3767"></a>3767            <a href="../D/9405.html" title="Multiple defined in 2 places.">UnsafeHolder</a>.<a href="../S/1464.html#L3734" title="Defined at 3734 in src/java/math/BigDecimal.java.">setIntValVolatile</a>(<strong class="reserved">this</strong>, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<strong class="reserved">this</strong>.intCompact));
<a id="L3768" name="L3768"></a>3768        <em class="comment">// Could reset intVal back to null if it has to be set.</em>
<a id="L3769" name="L3769"></a>3769        s.<a href="../D/14752.html" title="Multiple defined in 6 places.">defaultWriteObject</a>();
<a id="L3770" name="L3770"></a>3770    <em class="brace">}</em>
<a id="L3771" name="L3771"></a>3771 
<div class="comment">
      Returns the length of the absolute value of a <code>long</code>, in decimal
      digits.
      @param x the <code>long</code>
      @return the length of the unscaled value, in deciaml digits.</div>
<a id="L3779" name="L3779"></a>3779     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/22708.html" title="Multiple referred from 21 places.">longDigitLength</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<div class="comment">
          As described in "Bit Twiddling Hacks" by Sean Anderson,
          (http://graphics.stanford.edu/~seander/bithacks.html)
          integer log 10 of x is within 1 of (1233/4096)* (1 +
          integer log 2 of x). The fraction 1233/4096 approximates
          log10(2). So we first do a version of log2 (a variant of
          Long class with pre-checks and opposite directionality) and
          then scale and check against powers table. This is a little
          simpler in present context than the version in Hacker's
          Delight sec 11-4. Adding one to bit length allows comparing
          downward from the LONG_TEN_POWERS_TABLE that we need
          anyway.</div>
<a id="L3793" name="L3793"></a>3793         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> != <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.INFLATED;
<a id="L3794" name="L3794"></a>3794         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; 0)
<a id="L3795" name="L3795"></a>3795             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = -<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L3796" name="L3796"></a>3796         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; 10) <em class="comment">// must screen for 0, might as well 10</em>
<a id="L3797" name="L3797"></a>3797             <strong class="reserved">return</strong> 1;
<a id="L3798" name="L3798"></a>3798         <strong class="reserved">int</strong> r = ((64 - <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/28378.html" title="Multiple defined in 2 places.">numberOfLeadingZeros</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) + 1) * 1233) &gt;&gt;&gt; 12;
<a id="L3799" name="L3799"></a>3799         <strong class="reserved">long</strong>[] tab = LONG_TEN_POWERS_TABLE;
<a id="L3800" name="L3800"></a>3800         <em class="comment">// if r &gt;= length, must have max possible digits for long</em>
<a id="L3801" name="L3801"></a>3801         <strong class="reserved">return</strong> (r &gt;= tab.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; tab[r]) ? r : r + 1;
<a id="L3802" name="L3802"></a>3802     <em class="brace">}</em>
<a id="L3803" name="L3803"></a>3803 
<div class="comment">
      Returns the length of the absolute value of a BigInteger, in
      decimal digits.
      @param b the BigInteger
      @return the length of the unscaled value, in decimal digits</div>
<a id="L3811" name="L3811"></a>3811     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/10589.html" title="Multiple referred from 11 places.">bigDigitLength</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> b) <em class="brace">{</em>
<div class="comment">
          Same idea as the long version, but we need a better
          approximation of log10(2). Using 646456993/2^31
          is accurate up to max possible reported bitLength.</div>
<a id="L3817" name="L3817"></a>3817         <strong class="reserved">if</strong> (b.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> == 0)
<a id="L3818" name="L3818"></a>3818             <strong class="reserved">return</strong> 1;
<a id="L3819" name="L3819"></a>3819         <strong class="reserved">int</strong> r = (<strong class="reserved">int</strong>)((((<strong class="reserved">long</strong>)b.<a href="../D/11871.html" title="Multiple defined in 3 places.">bitLength</a>() + 1) * 646456993) &gt;&gt;&gt; 31);
<a id="L3820" name="L3820"></a>3820         <strong class="reserved">return</strong> b.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(<a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(r)) &lt; 0? r : r+1;
<a id="L3821" name="L3821"></a>3821     <em class="brace">}</em>
<a id="L3822" name="L3822"></a>3822 
<div class="comment">
      Check a scale for Underflow or Overflow.  If this BigDecimal is
      nonzero, throw an exception if the scale is outof range. If this
      is zero, saturate the scale to the extreme value of the right
      sign if the scale is out of range.
      @param val The new scale.
      @throws ArithmeticException (overflow or underflow) if the new
              scale is out of range.
      @return validated scale as an int.</div>
<a id="L3834" name="L3834"></a>3834     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/11343.html" title="Multiple referred from 27 places.">checkScale</a>(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3835" name="L3835"></a>3835         <strong class="reserved">int</strong> asInt = (<strong class="reserved">int</strong>)<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3836" name="L3836"></a>3836         <strong class="reserved">if</strong> (asInt != <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3837" name="L3837"></a>3837             asInt = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>&gt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE : <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MIN_VALUE;
<a id="L3838" name="L3838"></a>3838             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> b;
<a id="L3839" name="L3839"></a>3839             <strong class="reserved">if</strong> (intCompact != 0 &amp;&amp;
<a id="L3840" name="L3840"></a>3840                 ((b = intVal) == <strong class="reserved">null</strong> || b.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() != 0))
<a id="L3841" name="L3841"></a>3841                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>(asInt&gt;0 ? "Underflow":"Overflow");
<a id="L3842" name="L3842"></a>3842         <em class="brace">}</em>
<a id="L3843" name="L3843"></a>3843         <strong class="reserved">return</strong> asInt;
<a id="L3844" name="L3844"></a>3844     <em class="brace">}</em>
<a id="L3845" name="L3845"></a>3845 
<div class="comment">
      Returns the compact value for given <code>BigInteger</code>, or
      INFLATED if too big. Relies on internal representation of
      <code>BigInteger</code>.</div>
<a id="L3851" name="L3851"></a>3851     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/11687.html" title="Multiple referred from 16 places.">compactValFor</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> b) <em class="brace">{</em>
<a id="L3852" name="L3852"></a>3852         <strong class="reserved">int</strong>[] m = b.mag;
<a id="L3853" name="L3853"></a>3853         <strong class="reserved">int</strong> len = m.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L3854" name="L3854"></a>3854         <strong class="reserved">if</strong> (len == 0)
<a id="L3855" name="L3855"></a>3855             <strong class="reserved">return</strong> 0;
<a id="L3856" name="L3856"></a>3856         <strong class="reserved">int</strong> d = m[0];
<a id="L3857" name="L3857"></a>3857         <strong class="reserved">if</strong> (len &gt; 2 || (len == 2 &amp;&amp; d &lt; 0))
<a id="L3858" name="L3858"></a>3858             <strong class="reserved">return</strong> INFLATED;
<a id="L3859" name="L3859"></a>3859 
<a id="L3860" name="L3860"></a>3860         <strong class="reserved">long</strong> <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = (len == 2)?
<a id="L3861" name="L3861"></a>3861             (((<strong class="reserved">long</strong>) m[1] &amp; LONG_MASK) + (((<strong class="reserved">long</strong>)d) &lt;&lt; 32)) :
<a id="L3862" name="L3862"></a>3862             (((<strong class="reserved">long</strong>)d)   &amp; LONG_MASK);
<a id="L3863" name="L3863"></a>3863         <strong class="reserved">return</strong> (b.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> &lt; 0)? -<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> : <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>;
<a id="L3864" name="L3864"></a>3864     <em class="brace">}</em>
<a id="L3865" name="L3865"></a>3865 
<a id="L3866" name="L3866"></a>3866     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/22707.html" title="Multiple referred from 5 places.">longCompareMagnitude</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">long</strong> y) <em class="brace">{</em>
<a id="L3867" name="L3867"></a>3867         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; 0)
<a id="L3868" name="L3868"></a>3868             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = -<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L3869" name="L3869"></a>3869         <strong class="reserved">if</strong> (y &lt; 0)
<a id="L3870" name="L3870"></a>3870             y = -y;
<a id="L3871" name="L3871"></a>3871         <strong class="reserved">return</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; y) ? -1 : ((<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == y) ? 0 : 1);
<a id="L3872" name="L3872"></a>3872     <em class="brace">}</em>
<a id="L3873" name="L3873"></a>3873 
<a id="L3874" name="L3874"></a>3874     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/26587.html" title="Multiple referred from 4 places.">saturateLong</a>(<strong class="reserved">long</strong> s) <em class="brace">{</em>
<a id="L3875" name="L3875"></a>3875         <strong class="reserved">int</strong> i = (<strong class="reserved">int</strong>)s;
<a id="L3876" name="L3876"></a>3876         <strong class="reserved">return</strong> (s == i) ? i : (s &lt; 0 ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MIN_VALUE : <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE);
<a id="L3877" name="L3877"></a>3877     <em class="brace">}</em>
<a id="L3878" name="L3878"></a>3878 
<div class="comment">
      Internal printing routine</div>
<a id="L3882" name="L3882"></a>3882     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/24978.html" title="Multiple referred from 1157 places.">print</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> bd) <em class="brace">{</em>
<a id="L3883" name="L3883"></a>3883         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("%s:\tintCompact %d\tintVal %d\tscale %d\tprecision %d%n",
<a id="L3884" name="L3884"></a>3884                           <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,
<a id="L3885" name="L3885"></a>3885                           bd.intCompact,
<a id="L3886" name="L3886"></a>3886                           bd.intVal,
<a id="L3887" name="L3887"></a>3887                           bd.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,
<a id="L3888" name="L3888"></a>3888                           bd.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>);
<a id="L3889" name="L3889"></a>3889     <em class="brace">}</em>
<a id="L3890" name="L3890"></a>3890 
<div class="comment">
      Check internal invariants of this BigDecimal.  These invariants
      include:
      <ul><li>The object must be initialized; either intCompact must not be
      INFLATED or intVal is non-null.  Both of these conditions may
      be true.
      </li><li>If both intCompact and intVal and set, their values must be
      consistent.
      </li><li>If precision is nonzero, it must have the right value.
      </li></ul>
      Note: Since this is an audit method, we are not supposed to change the
      state of this BigDecimal object.</div>
<a id="L3910" name="L3910"></a>3910     <strong class="reserved">private</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> audit() <em class="brace">{</em>
<a id="L3911" name="L3911"></a>3911         <strong class="reserved">if</strong> (intCompact == INFLATED) <em class="brace">{</em>
<a id="L3912" name="L3912"></a>3912             <strong class="reserved">if</strong> (intVal == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3913" name="L3913"></a>3913                 <a href="../D/29620.html" title="Multiple defined in 86 places.">print</a>("audit", <strong class="reserved">this</strong>);
<a id="L3914" name="L3914"></a>3914                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>("null intVal");
<a id="L3915" name="L3915"></a>3915             <em class="brace">}</em>
<a id="L3916" name="L3916"></a>3916             <em class="comment">// Check precision</em>
<a id="L3917" name="L3917"></a>3917             <strong class="reserved">if</strong> (<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> &gt; 0 &amp;&amp; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> != <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal)) <em class="brace">{</em>
<a id="L3918" name="L3918"></a>3918                 <a href="../D/29620.html" title="Multiple defined in 86 places.">print</a>("audit", <strong class="reserved">this</strong>);
<a id="L3919" name="L3919"></a>3919                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>("precision mismatch");
<a id="L3920" name="L3920"></a>3920             <em class="brace">}</em>
<a id="L3921" name="L3921"></a>3921         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3922" name="L3922"></a>3922             <strong class="reserved">if</strong> (intVal != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3923" name="L3923"></a>3923                 <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = intVal.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>();
<a id="L3924" name="L3924"></a>3924                 <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> != intCompact) <em class="brace">{</em>
<a id="L3925" name="L3925"></a>3925                     <a href="../D/29620.html" title="Multiple defined in 86 places.">print</a>("audit", <strong class="reserved">this</strong>);
<a id="L3926" name="L3926"></a>3926                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>("Inconsistent state, intCompact=" +
<a id="L3927" name="L3927"></a>3927                                              intCompact + "\t intVal=" + <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L3928" name="L3928"></a>3928                 <em class="brace">}</em>
<a id="L3929" name="L3929"></a>3929             <em class="brace">}</em>
<a id="L3930" name="L3930"></a>3930             <em class="comment">// Check precision</em>
<a id="L3931" name="L3931"></a>3931             <strong class="reserved">if</strong> (<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> &gt; 0 &amp;&amp; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> != <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(intCompact)) <em class="brace">{</em>
<a id="L3932" name="L3932"></a>3932                 <a href="../D/29620.html" title="Multiple defined in 86 places.">print</a>("audit", <strong class="reserved">this</strong>);
<a id="L3933" name="L3933"></a>3933                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>("precision mismatch");
<a id="L3934" name="L3934"></a>3934             <em class="brace">}</em>
<a id="L3935" name="L3935"></a>3935         <em class="brace">}</em>
<a id="L3936" name="L3936"></a>3936         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L3937" name="L3937"></a>3937     <em class="brace">}</em>
<a id="L3938" name="L3938"></a>3938 
<div class="comment">
     /* the same as checkScale where value!=0 */</div>
<a id="L3940" name="L3940"></a>3940     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11344.html" title="Multiple referred from 66 places.">checkScaleNonZero</a>(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3941" name="L3941"></a>3941         <strong class="reserved">int</strong> asInt = (<strong class="reserved">int</strong>)<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3942" name="L3942"></a>3942         <strong class="reserved">if</strong> (asInt != <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3943" name="L3943"></a>3943             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>(asInt&gt;0 ? "Underflow":"Overflow");
<a id="L3944" name="L3944"></a>3944         <em class="brace">}</em>
<a id="L3945" name="L3945"></a>3945         <strong class="reserved">return</strong> asInt;
<a id="L3946" name="L3946"></a>3946     <em class="brace">}</em>
<a id="L3947" name="L3947"></a>3947 
<a id="L3948" name="L3948"></a>3948     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11343.html" title="Multiple referred from 27 places.">checkScale</a>(<strong class="reserved">long</strong> intCompact, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3949" name="L3949"></a>3949         <strong class="reserved">int</strong> asInt = (<strong class="reserved">int</strong>)<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3950" name="L3950"></a>3950         <strong class="reserved">if</strong> (asInt != <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3951" name="L3951"></a>3951             asInt = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>&gt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE : <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MIN_VALUE;
<a id="L3952" name="L3952"></a>3952             <strong class="reserved">if</strong> (intCompact != 0)
<a id="L3953" name="L3953"></a>3953                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>(asInt&gt;0 ? "Underflow":"Overflow");
<a id="L3954" name="L3954"></a>3954         <em class="brace">}</em>
<a id="L3955" name="L3955"></a>3955         <strong class="reserved">return</strong> asInt;
<a id="L3956" name="L3956"></a>3956     <em class="brace">}</em>
<a id="L3957" name="L3957"></a>3957 
<a id="L3958" name="L3958"></a>3958     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11343.html" title="Multiple referred from 27 places.">checkScale</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3959" name="L3959"></a>3959         <strong class="reserved">int</strong> asInt = (<strong class="reserved">int</strong>)<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L3960" name="L3960"></a>3960         <strong class="reserved">if</strong> (asInt != <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L3961" name="L3961"></a>3961             asInt = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>&gt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE : <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MIN_VALUE;
<a id="L3962" name="L3962"></a>3962             <strong class="reserved">if</strong> (intVal.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() != 0)
<a id="L3963" name="L3963"></a>3963                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>(asInt&gt;0 ? "Underflow":"Overflow");
<a id="L3964" name="L3964"></a>3964         <em class="brace">}</em>
<a id="L3965" name="L3965"></a>3965         <strong class="reserved">return</strong> asInt;
<a id="L3966" name="L3966"></a>3966     <em class="brace">}</em>
<a id="L3967" name="L3967"></a>3967 
<div class="comment">
      Returns a <code>BigDecimal</code> rounded according to the MathContext
      settings;
      If rounding is needed a new <code>BigDecimal</code> is created and returned.
      @param val the value to be rounded
      @param mc the context to use.
      @return a <code>BigDecimal</code> rounded according to the MathContext
              settings.  May return <code>value</code>, if no rounding needed.
      @throws ArithmeticException if the rounding mode is
              <code>RoundingMode.UNNECESSARY</code> and the
              result is inexact.</div>
<a id="L3981" name="L3981"></a>3981     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13438.html" title="Multiple referred from 14 places.">doRound</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L3982" name="L3982"></a>3982         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L3983" name="L3983"></a>3983         <strong class="reserved">boolean</strong> wasDivided = <strong class="reserved">false</strong>;
<a id="L3984" name="L3984"></a>3984         <strong class="reserved">if</strong> (mcp &gt; 0) <em class="brace">{</em>
<a id="L3985" name="L3985"></a>3985             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.intVal;
<a id="L3986" name="L3986"></a>3986             <strong class="reserved">long</strong> compactVal = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.intCompact;
<a id="L3987" name="L3987"></a>3987             <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>;
<a id="L3988" name="L3988"></a>3988             <strong class="reserved">int</strong> prec = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>();
<a id="L3989" name="L3989"></a>3989             <strong class="reserved">int</strong> mode = mc.roundingMode.oldMode;
<a id="L3990" name="L3990"></a>3990             <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>;
<a id="L3991" name="L3991"></a>3991             <strong class="reserved">if</strong> (compactVal == INFLATED) <em class="brace">{</em>
<a id="L3992" name="L3992"></a>3992                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L3993" name="L3993"></a>3993                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L3994" name="L3994"></a>3994                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L3995" name="L3995"></a>3995                     intVal = <a href="../S/1464.html#L4085" title="Defined at 4085 in src/java/math/BigDecimal.java.">divideAndRoundByTenPow</a>(intVal, <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>, mode);
<a id="L3996" name="L3996"></a>3996                     wasDivided = <strong class="reserved">true</strong>;
<a id="L3997" name="L3997"></a>3997                     compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L3998" name="L3998"></a>3998                     <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L3999" name="L3999"></a>3999                         prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L4000" name="L4000"></a>4000                         <strong class="reserved">break</strong>;
<a id="L4001" name="L4001"></a>4001                     <em class="brace">}</em>
<a id="L4002" name="L4002"></a>4002                     prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L4003" name="L4003"></a>4003                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L4004" name="L4004"></a>4004                 <em class="brace">}</em>
<a id="L4005" name="L4005"></a>4005             <em class="brace">}</em>
<a id="L4006" name="L4006"></a>4006             <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L4007" name="L4007"></a>4007                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;  <em class="comment">// drop can't be more than 18</em>
<a id="L4008" name="L4008"></a>4008                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L4009" name="L4009"></a>4009                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L4010" name="L4010"></a>4010                     compactVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(compactVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L4011" name="L4011"></a>4011                     wasDivided = <strong class="reserved">true</strong>;
<a id="L4012" name="L4012"></a>4012                     prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L4013" name="L4013"></a>4013                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L4014" name="L4014"></a>4014                     intVal = <strong class="reserved">null</strong>;
<a id="L4015" name="L4015"></a>4015                 <em class="brace">}</em>
<a id="L4016" name="L4016"></a>4016             <em class="brace">}</em>
<a id="L4017" name="L4017"></a>4017             <strong class="reserved">return</strong> wasDivided ? <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal,compactVal,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,prec) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L4018" name="L4018"></a>4018         <em class="brace">}</em>
<a id="L4019" name="L4019"></a>4019         <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L4020" name="L4020"></a>4020     <em class="brace">}</em>
<a id="L4021" name="L4021"></a>4021 
<div class="comment">
      Returns a <code>BigDecimal</code> created from <code>long</code> value with
      given scale rounded according to the MathContext settings</div>
<a id="L4026" name="L4026"></a>4026     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13438.html" title="Multiple referred from 14 places.">doRound</a>(<strong class="reserved">long</strong> compactVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4027" name="L4027"></a>4027         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4028" name="L4028"></a>4028         <strong class="reserved">if</strong> (mcp &gt; 0 &amp;&amp; mcp &lt; 19) <em class="brace">{</em>
<a id="L4029" name="L4029"></a>4029             <strong class="reserved">int</strong> prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L4030" name="L4030"></a>4030             <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;  <em class="comment">// drop can't be more than 18</em>
<a id="L4031" name="L4031"></a>4031             <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L4032" name="L4032"></a>4032                 <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L4033" name="L4033"></a>4033                 compactVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(compactVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L4034" name="L4034"></a>4034                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L4035" name="L4035"></a>4035                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L4036" name="L4036"></a>4036             <em class="brace">}</em>
<a id="L4037" name="L4037"></a>4037             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(compactVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, prec);
<a id="L4038" name="L4038"></a>4038         <em class="brace">}</em>
<a id="L4039" name="L4039"></a>4039         <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(compactVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4040" name="L4040"></a>4040     <em class="brace">}</em>
<a id="L4041" name="L4041"></a>4041 
<div class="comment">
      Returns a <code>BigDecimal</code> created from <code>BigInteger</code> value with
      given scale rounded according to the MathContext settings</div>
<a id="L4046" name="L4046"></a>4046     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13438.html" title="Multiple referred from 14 places.">doRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4047" name="L4047"></a>4047         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4048" name="L4048"></a>4048         <strong class="reserved">int</strong> prec = 0;
<a id="L4049" name="L4049"></a>4049         <strong class="reserved">if</strong> (mcp &gt; 0) <em class="brace">{</em>
<a id="L4050" name="L4050"></a>4050             <strong class="reserved">long</strong> compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L4051" name="L4051"></a>4051             <strong class="reserved">int</strong> mode = mc.roundingMode.oldMode;
<a id="L4052" name="L4052"></a>4052             <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>;
<a id="L4053" name="L4053"></a>4053             <strong class="reserved">if</strong> (compactVal == INFLATED) <em class="brace">{</em>
<a id="L4054" name="L4054"></a>4054                 prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L4055" name="L4055"></a>4055                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L4056" name="L4056"></a>4056                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L4057" name="L4057"></a>4057                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L4058" name="L4058"></a>4058                     intVal = <a href="../S/1464.html#L4085" title="Defined at 4085 in src/java/math/BigDecimal.java.">divideAndRoundByTenPow</a>(intVal, <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>, mode);
<a id="L4059" name="L4059"></a>4059                     compactVal = <a href="../S/1464.html#L3851" title="Defined at 3851 in src/java/math/BigDecimal.java.">compactValFor</a>(intVal);
<a id="L4060" name="L4060"></a>4060                     <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L4061" name="L4061"></a>4061                         <strong class="reserved">break</strong>;
<a id="L4062" name="L4062"></a>4062                     <em class="brace">}</em>
<a id="L4063" name="L4063"></a>4063                     prec = <a href="../S/1464.html#L3811" title="Defined at 3811 in src/java/math/BigDecimal.java.">bigDigitLength</a>(intVal);
<a id="L4064" name="L4064"></a>4064                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L4065" name="L4065"></a>4065                 <em class="brace">}</em>
<a id="L4066" name="L4066"></a>4066             <em class="brace">}</em>
<a id="L4067" name="L4067"></a>4067             <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L4068" name="L4068"></a>4068                 prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L4069" name="L4069"></a>4069                 <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;     <em class="comment">// drop can't be more than 18</em>
<a id="L4070" name="L4070"></a>4070                 <strong class="reserved">while</strong> (<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> &gt; 0) <em class="brace">{</em>
<a id="L4071" name="L4071"></a>4071                     <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L4072" name="L4072"></a>4072                     compactVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(compactVal, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], mc.roundingMode.oldMode);
<a id="L4073" name="L4073"></a>4073                     prec = <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(compactVal);
<a id="L4074" name="L4074"></a>4074                     <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = prec - mcp;
<a id="L4075" name="L4075"></a>4075                 <em class="brace">}</em>
<a id="L4076" name="L4076"></a>4076                 <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(compactVal,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,prec);
<a id="L4077" name="L4077"></a>4077             <em class="brace">}</em>
<a id="L4078" name="L4078"></a>4078         <em class="brace">}</em>
<a id="L4079" name="L4079"></a>4079         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(intVal,INFLATED,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,prec);
<a id="L4080" name="L4080"></a>4080     <em class="brace">}</em>
<a id="L4081" name="L4081"></a>4081 
<div class="comment">
      Divides <code>BigInteger</code> value by ten power.</div>
<a id="L4085" name="L4085"></a>4085     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/13359.html" title="Multiple referred from 6 places.">divideAndRoundByTenPow</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">int</strong> tenPow, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L4086" name="L4086"></a>4086         <strong class="reserved">if</strong> (tenPow &lt; LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L4087" name="L4087"></a>4087             intVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(intVal, LONG_TEN_POWERS_TABLE[tenPow], roundingMode);
<a id="L4088" name="L4088"></a>4088         <strong class="reserved">else</strong>
<a id="L4089" name="L4089"></a>4089             intVal = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(intVal, <a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(tenPow), roundingMode);
<a id="L4090" name="L4090"></a>4090         <strong class="reserved">return</strong> intVal;
<a id="L4091" name="L4091"></a>4091     <em class="brace">}</em>
<a id="L4092" name="L4092"></a>4092 
<div class="comment">
      Internally used for division operation for division <code>long</code> by
      <code>long</code>.
      The returned <code>BigDecimal</code> object is the quotient whose scale is set
      to the passed in scale. If the remainder is not zero, it will be rounded
      based on the passed in roundingMode. Also, if the remainder is zero and
      the last parameter, i.e. preferredScale is NOT equal to scale, the
      trailing zeros of the result is stripped to match the preferredScale.</div>
<a id="L4102" name="L4102"></a>4102     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13357.html" title="Multiple referred from 46 places.">divideAndRound</a>(<strong class="reserved">long</strong> ldividend, <strong class="reserved">long</strong> ldivisor, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode,
<a id="L4103" name="L4103"></a>4103                                              <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4104" name="L4104"></a>4104 
<a id="L4105" name="L4105"></a>4105         <strong class="reserved">int</strong> qsign; <em class="comment">// quotient sign</em>
<a id="L4106" name="L4106"></a>4106         <strong class="reserved">long</strong> q = ldividend / ldivisor; <em class="comment">// store quotient in long</em>
<a id="L4107" name="L4107"></a>4107         <strong class="reserved">if</strong> (roundingMode == ROUND_DOWN &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == preferredScale)
<a id="L4108" name="L4108"></a>4108             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(q, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4109" name="L4109"></a>4109         <strong class="reserved">long</strong> r = ldividend % ldivisor; <em class="comment">// store remainder in long</em>
<a id="L4110" name="L4110"></a>4110         qsign = ((ldividend &lt; 0) == (ldivisor &lt; 0)) ? 1 : -1;
<a id="L4111" name="L4111"></a>4111         <strong class="reserved">if</strong> (r != 0) <em class="brace">{</em>
<a id="L4112" name="L4112"></a>4112             <strong class="reserved">boolean</strong> <a href="../D/24445.html" title="Multiple defined in 3 places.">increment</a> = <a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(ldivisor, roundingMode, qsign, q, r);
<a id="L4113" name="L4113"></a>4113             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>((<a href="../D/24445.html" title="Multiple defined in 3 places.">increment</a> ? q + qsign : q), <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4114" name="L4114"></a>4114         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4115" name="L4115"></a>4115             <strong class="reserved">if</strong> (preferredScale != <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>)
<a id="L4116" name="L4116"></a>4116                 <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(q, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4117" name="L4117"></a>4117             <strong class="reserved">else</strong>
<a id="L4118" name="L4118"></a>4118                 <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(q, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4119" name="L4119"></a>4119         <em class="brace">}</em>
<a id="L4120" name="L4120"></a>4120     <em class="brace">}</em>
<a id="L4121" name="L4121"></a>4121 
<div class="comment">
      Divides <code>long</code> by <code>long</code> and do rounding based on the
      passed in roundingMode.</div>
<a id="L4126" name="L4126"></a>4126     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/13357.html" title="Multiple referred from 46 places.">divideAndRound</a>(<strong class="reserved">long</strong> ldividend, <strong class="reserved">long</strong> ldivisor, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L4127" name="L4127"></a>4127         <strong class="reserved">int</strong> qsign; <em class="comment">// quotient sign</em>
<a id="L4128" name="L4128"></a>4128         <strong class="reserved">long</strong> q = ldividend / ldivisor; <em class="comment">// store quotient in long</em>
<a id="L4129" name="L4129"></a>4129         <strong class="reserved">if</strong> (roundingMode == ROUND_DOWN)
<a id="L4130" name="L4130"></a>4130             <strong class="reserved">return</strong> q;
<a id="L4131" name="L4131"></a>4131         <strong class="reserved">long</strong> r = ldividend % ldivisor; <em class="comment">// store remainder in long</em>
<a id="L4132" name="L4132"></a>4132         qsign = ((ldividend &lt; 0) == (ldivisor &lt; 0)) ? 1 : -1;
<a id="L4133" name="L4133"></a>4133         <strong class="reserved">if</strong> (r != 0) <em class="brace">{</em>
<a id="L4134" name="L4134"></a>4134             <strong class="reserved">boolean</strong> <a href="../D/24445.html" title="Multiple defined in 3 places.">increment</a> = <a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(ldivisor, roundingMode, qsign, q,     r);
<a id="L4135" name="L4135"></a>4135             <strong class="reserved">return</strong> <a href="../D/24445.html" title="Multiple defined in 3 places.">increment</a> ? q + qsign : q;
<a id="L4136" name="L4136"></a>4136         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4137" name="L4137"></a>4137             <strong class="reserved">return</strong> q;
<a id="L4138" name="L4138"></a>4138         <em class="brace">}</em>
<a id="L4139" name="L4139"></a>4139     <em class="brace">}</em>
<a id="L4140" name="L4140"></a>4140 
<div class="comment">
      Shared logic of need increment computation.</div>
<a id="L4144" name="L4144"></a>4144     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/11677.html" title="Multiple referred from 3 places.">commonNeedIncrement</a>(<strong class="reserved">int</strong> roundingMode, <strong class="reserved">int</strong> qsign,
<a id="L4145" name="L4145"></a>4145                                         <strong class="reserved">int</strong> cmpFracHalf, <strong class="reserved">boolean</strong> oddQuot) <em class="brace">{</em>
<a id="L4146" name="L4146"></a>4146         <strong class="reserved">switch</strong>(roundingMode) <em class="brace">{</em>
<a id="L4147" name="L4147"></a>4147         <strong class="reserved">case</strong> ROUND_UNNECESSARY:
<a id="L4148" name="L4148"></a>4148             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a>("Rounding necessary");
<a id="L4149" name="L4149"></a>4149 
<a id="L4150" name="L4150"></a>4150         <strong class="reserved">case</strong> ROUND_UP: <em class="comment">// Away from zero</em>
<a id="L4151" name="L4151"></a>4151             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L4152" name="L4152"></a>4152 
<a id="L4153" name="L4153"></a>4153         <strong class="reserved">case</strong> ROUND_DOWN: <em class="comment">// Towards zero</em>
<a id="L4154" name="L4154"></a>4154             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L4155" name="L4155"></a>4155 
<a id="L4156" name="L4156"></a>4156         <strong class="reserved">case</strong> ROUND_CEILING: <em class="comment">// Towards +infinity</em>
<a id="L4157" name="L4157"></a>4157             <strong class="reserved">return</strong> qsign &gt; 0;
<a id="L4158" name="L4158"></a>4158 
<a id="L4159" name="L4159"></a>4159         <strong class="reserved">case</strong> ROUND_FLOOR: <em class="comment">// Towards -infinity</em>
<a id="L4160" name="L4160"></a>4160             <strong class="reserved">return</strong> qsign &lt; 0;
<a id="L4161" name="L4161"></a>4161 
<a id="L4162" name="L4162"></a>4162         <strong class="reserved">default</strong>: <em class="comment">// Some kind of half-way rounding</em>
<a id="L4163" name="L4163"></a>4163             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> roundingMode &gt;= ROUND_HALF_UP &amp;&amp;
<a id="L4164" name="L4164"></a>4164                 roundingMode &lt;= ROUND_HALF_EVEN: "Unexpected rounding mode" + <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(roundingMode);
<a id="L4165" name="L4165"></a>4165 
<a id="L4166" name="L4166"></a>4166             <strong class="reserved">if</strong> (cmpFracHalf &lt; 0 ) <em class="comment">// We're closer to higher digit</em>
<a id="L4167" name="L4167"></a>4167                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L4168" name="L4168"></a>4168             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (cmpFracHalf &gt; 0 ) <em class="comment">// We're closer to lower digit</em>
<a id="L4169" name="L4169"></a>4169                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L4170" name="L4170"></a>4170             <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// half-way</em>
<a id="L4171" name="L4171"></a>4171                 <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> cmpFracHalf == 0;
<a id="L4172" name="L4172"></a>4172 
<a id="L4173" name="L4173"></a>4173                 <strong class="reserved">switch</strong>(roundingMode) <em class="brace">{</em>
<a id="L4174" name="L4174"></a>4174                 <strong class="reserved">case</strong> ROUND_HALF_DOWN:
<a id="L4175" name="L4175"></a>4175                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L4176" name="L4176"></a>4176 
<a id="L4177" name="L4177"></a>4177                 <strong class="reserved">case</strong> ROUND_HALF_UP:
<a id="L4178" name="L4178"></a>4178                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L4179" name="L4179"></a>4179 
<a id="L4180" name="L4180"></a>4180                 <strong class="reserved">case</strong> ROUND_HALF_EVEN:
<a id="L4181" name="L4181"></a>4181                     <strong class="reserved">return</strong> oddQuot;
<a id="L4182" name="L4182"></a>4182 
<a id="L4183" name="L4183"></a>4183                 <strong class="reserved">default</strong>:
<a id="L4184" name="L4184"></a>4184                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>("Unexpected rounding mode" + roundingMode);
<a id="L4185" name="L4185"></a>4185                 <em class="brace">}</em>
<a id="L4186" name="L4186"></a>4186             <em class="brace">}</em>
<a id="L4187" name="L4187"></a>4187         <em class="brace">}</em>
<a id="L4188" name="L4188"></a>4188     <em class="brace">}</em>
<a id="L4189" name="L4189"></a>4189 
<div class="comment">
      Tests if quotient has to be incremented according the roundingMode</div>
<a id="L4193" name="L4193"></a>4193     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/23491.html" title="Multiple referred from 8 places.">needIncrement</a>(<strong class="reserved">long</strong> ldivisor, <strong class="reserved">int</strong> roundingMode,
<a id="L4194" name="L4194"></a>4194                                          <strong class="reserved">int</strong> qsign, <strong class="reserved">long</strong> q, <strong class="reserved">long</strong> r) <em class="brace">{</em>
<a id="L4195" name="L4195"></a>4195         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> r != 0L;
<a id="L4196" name="L4196"></a>4196 
<a id="L4197" name="L4197"></a>4197         <strong class="reserved">int</strong> cmpFracHalf;
<a id="L4198" name="L4198"></a>4198         <strong class="reserved">if</strong> (r &lt;= HALF_LONG_MIN_VALUE || r &gt; HALF_LONG_MAX_VALUE) <em class="brace">{</em>
<a id="L4199" name="L4199"></a>4199             cmpFracHalf = 1; <em class="comment">// 2 * r can't fit into long</em>
<a id="L4200" name="L4200"></a>4200         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4201" name="L4201"></a>4201             cmpFracHalf = <a href="../S/1464.html#L3866" title="Defined at 3866 in src/java/math/BigDecimal.java.">longCompareMagnitude</a>(2 * r, ldivisor);
<a id="L4202" name="L4202"></a>4202         <em class="brace">}</em>
<a id="L4203" name="L4203"></a>4203 
<a id="L4204" name="L4204"></a>4204         <strong class="reserved">return</strong> <a href="../S/1464.html#L4144" title="Defined at 4144 in src/java/math/BigDecimal.java.">commonNeedIncrement</a>(roundingMode, qsign, cmpFracHalf, (q &amp; 1L) != 0L);
<a id="L4205" name="L4205"></a>4205     <em class="brace">}</em>
<a id="L4206" name="L4206"></a>4206 
<div class="comment">
      Divides <code>BigInteger</code> value by <code>long</code> value and
      do rounding based on the passed in roundingMode.</div>
<a id="L4211" name="L4211"></a>4211     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/13357.html" title="Multiple referred from 46 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bdividend, <strong class="reserved">long</strong> ldivisor, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L4212" name="L4212"></a>4212         <strong class="reserved">boolean</strong> isRemainderZero; <em class="comment">// record remainder is zero or not</em>
<a id="L4213" name="L4213"></a>4213         <strong class="reserved">int</strong> qsign; <em class="comment">// quotient sign</em>
<a id="L4214" name="L4214"></a>4214         <strong class="reserved">long</strong> r = 0; <em class="comment">// store quotient &amp; remainder in long</em>
<a id="L4215" name="L4215"></a>4215         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq = <strong class="reserved">null</strong>; <em class="comment">// store quotient</em>
<a id="L4216" name="L4216"></a>4216         <em class="comment">// Descend into mutables for faster remainder checks</em>
<a id="L4217" name="L4217"></a>4217         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdividend = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(bdividend.mag);
<a id="L4218" name="L4218"></a>4218         mq = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>();
<a id="L4219" name="L4219"></a>4219         r = mdividend.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(ldivisor, mq);
<a id="L4220" name="L4220"></a>4220         isRemainderZero = (r == 0);
<a id="L4221" name="L4221"></a>4221         qsign = (ldivisor &lt; 0) ? -bdividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> : bdividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>;
<a id="L4222" name="L4222"></a>4222         <strong class="reserved">if</strong> (!isRemainderZero) <em class="brace">{</em>
<a id="L4223" name="L4223"></a>4223             <strong class="reserved">if</strong>(<a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(ldivisor, roundingMode, qsign, mq, r)) <em class="brace">{</em>
<a id="L4224" name="L4224"></a>4224                 mq.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>.ONE);
<a id="L4225" name="L4225"></a>4225             <em class="brace">}</em>
<a id="L4226" name="L4226"></a>4226         <em class="brace">}</em>
<a id="L4227" name="L4227"></a>4227         <strong class="reserved">return</strong> mq.<a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>(qsign);
<a id="L4228" name="L4228"></a>4228     <em class="brace">}</em>
<a id="L4229" name="L4229"></a>4229 
<div class="comment">
      Internally used for division operation for division <code>BigInteger</code>
      by <code>long</code>.
      The returned <code>BigDecimal</code> object is the quotient whose scale is set
      to the passed in scale. If the remainder is not zero, it will be rounded
      based on the passed in roundingMode. Also, if the remainder is zero and
      the last parameter, i.e. preferredScale is NOT equal to scale, the
      trailing zeros of the result is stripped to match the preferredScale.</div>
<a id="L4239" name="L4239"></a>4239     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13357.html" title="Multiple referred from 46 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bdividend,
<a id="L4240" name="L4240"></a>4240                                              <strong class="reserved">long</strong> ldivisor, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode, <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4241" name="L4241"></a>4241         <strong class="reserved">boolean</strong> isRemainderZero; <em class="comment">// record remainder is zero or not</em>
<a id="L4242" name="L4242"></a>4242         <strong class="reserved">int</strong> qsign; <em class="comment">// quotient sign</em>
<a id="L4243" name="L4243"></a>4243         <strong class="reserved">long</strong> r = 0; <em class="comment">// store quotient &amp; remainder in long</em>
<a id="L4244" name="L4244"></a>4244         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq = <strong class="reserved">null</strong>; <em class="comment">// store quotient</em>
<a id="L4245" name="L4245"></a>4245         <em class="comment">// Descend into mutables for faster remainder checks</em>
<a id="L4246" name="L4246"></a>4246         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdividend = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(bdividend.mag);
<a id="L4247" name="L4247"></a>4247         mq = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>();
<a id="L4248" name="L4248"></a>4248         r = mdividend.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(ldivisor, mq);
<a id="L4249" name="L4249"></a>4249         isRemainderZero = (r == 0);
<a id="L4250" name="L4250"></a>4250         qsign = (ldivisor &lt; 0) ? -bdividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> : bdividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>;
<a id="L4251" name="L4251"></a>4251         <strong class="reserved">if</strong> (!isRemainderZero) <em class="brace">{</em>
<a id="L4252" name="L4252"></a>4252             <strong class="reserved">if</strong>(<a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(ldivisor, roundingMode, qsign, mq, r)) <em class="brace">{</em>
<a id="L4253" name="L4253"></a>4253                 mq.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>.ONE);
<a id="L4254" name="L4254"></a>4254             <em class="brace">}</em>
<a id="L4255" name="L4255"></a>4255             <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(qsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4256" name="L4256"></a>4256         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4257" name="L4257"></a>4257             <strong class="reserved">if</strong> (preferredScale != <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L4258" name="L4258"></a>4258                 <strong class="reserved">long</strong> compactVal = mq.<a href="../S/1466.html#L222" title="Defined at 222 in src/java/math/MutableBigInteger.java.">toCompactValue</a>(qsign);
<a id="L4259" name="L4259"></a>4259                 <strong class="reserved">if</strong>(compactVal!=INFLATED) <em class="brace">{</em>
<a id="L4260" name="L4260"></a>4260                     <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(compactVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4261" name="L4261"></a>4261                 <em class="brace">}</em>
<a id="L4262" name="L4262"></a>4262                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal =  mq.<a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>(qsign);
<a id="L4263" name="L4263"></a>4263                 <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intVal,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4264" name="L4264"></a>4264             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4265" name="L4265"></a>4265                 <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(qsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4266" name="L4266"></a>4266             <em class="brace">}</em>
<a id="L4267" name="L4267"></a>4267         <em class="brace">}</em>
<a id="L4268" name="L4268"></a>4268     <em class="brace">}</em>
<a id="L4269" name="L4269"></a>4269 
<div class="comment">
      Tests if quotient has to be incremented according the roundingMode</div>
<a id="L4273" name="L4273"></a>4273     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/23491.html" title="Multiple referred from 8 places.">needIncrement</a>(<strong class="reserved">long</strong> ldivisor, <strong class="reserved">int</strong> roundingMode,
<a id="L4274" name="L4274"></a>4274                                          <strong class="reserved">int</strong> qsign, <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq, <strong class="reserved">long</strong> r) <em class="brace">{</em>
<a id="L4275" name="L4275"></a>4275         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> r != 0L;
<a id="L4276" name="L4276"></a>4276 
<a id="L4277" name="L4277"></a>4277         <strong class="reserved">int</strong> cmpFracHalf;
<a id="L4278" name="L4278"></a>4278         <strong class="reserved">if</strong> (r &lt;= HALF_LONG_MIN_VALUE || r &gt; HALF_LONG_MAX_VALUE) <em class="brace">{</em>
<a id="L4279" name="L4279"></a>4279             cmpFracHalf = 1; <em class="comment">// 2 * r can't fit into long</em>
<a id="L4280" name="L4280"></a>4280         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4281" name="L4281"></a>4281             cmpFracHalf = <a href="../S/1464.html#L3866" title="Defined at 3866 in src/java/math/BigDecimal.java.">longCompareMagnitude</a>(2 * r, ldivisor);
<a id="L4282" name="L4282"></a>4282         <em class="brace">}</em>
<a id="L4283" name="L4283"></a>4283 
<a id="L4284" name="L4284"></a>4284         <strong class="reserved">return</strong> <a href="../S/1464.html#L4144" title="Defined at 4144 in src/java/math/BigDecimal.java.">commonNeedIncrement</a>(roundingMode, qsign, cmpFracHalf, mq.<a href="../S/1466.html#L497" title="Defined at 497 in src/java/math/MutableBigInteger.java.">isOdd</a>());
<a id="L4285" name="L4285"></a>4285     <em class="brace">}</em>
<a id="L4286" name="L4286"></a>4286 
<div class="comment">
      Divides <code>BigInteger</code> value by <code>BigInteger</code> value and
      do rounding based on the passed in roundingMode.</div>
<a id="L4291" name="L4291"></a>4291     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/13357.html" title="Multiple referred from 46 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bdividend, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bdivisor, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L4292" name="L4292"></a>4292         <strong class="reserved">boolean</strong> isRemainderZero; <em class="comment">// record remainder is zero or not</em>
<a id="L4293" name="L4293"></a>4293         <strong class="reserved">int</strong> qsign; <em class="comment">// quotient sign</em>
<a id="L4294" name="L4294"></a>4294         <em class="comment">// Descend into mutables for faster remainder checks</em>
<a id="L4295" name="L4295"></a>4295         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdividend = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(bdividend.mag);
<a id="L4296" name="L4296"></a>4296         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>();
<a id="L4297" name="L4297"></a>4297         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdivisor = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(bdivisor.mag);
<a id="L4298" name="L4298"></a>4298         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mr = mdividend.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(mdivisor, mq);
<a id="L4299" name="L4299"></a>4299         isRemainderZero = mr.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>();
<a id="L4300" name="L4300"></a>4300         qsign = (bdividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> != bdivisor.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>) ? -1 : 1;
<a id="L4301" name="L4301"></a>4301         <strong class="reserved">if</strong> (!isRemainderZero) <em class="brace">{</em>
<a id="L4302" name="L4302"></a>4302             <strong class="reserved">if</strong> (<a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(mdivisor, roundingMode, qsign, mq, mr)) <em class="brace">{</em>
<a id="L4303" name="L4303"></a>4303                 mq.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>.ONE);
<a id="L4304" name="L4304"></a>4304             <em class="brace">}</em>
<a id="L4305" name="L4305"></a>4305         <em class="brace">}</em>
<a id="L4306" name="L4306"></a>4306         <strong class="reserved">return</strong> mq.<a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>(qsign);
<a id="L4307" name="L4307"></a>4307     <em class="brace">}</em>
<a id="L4308" name="L4308"></a>4308 
<div class="comment">
      Internally used for division operation for division <code>BigInteger</code>
      by <code>BigInteger</code>.
      The returned <code>BigDecimal</code> object is the quotient whose scale is set
      to the passed in scale. If the remainder is not zero, it will be rounded
      based on the passed in roundingMode. Also, if the remainder is zero and
      the last parameter, i.e. preferredScale is NOT equal to scale, the
      trailing zeros of the result is stripped to match the preferredScale.</div>
<a id="L4318" name="L4318"></a>4318     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13357.html" title="Multiple referred from 46 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bdividend, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bdivisor, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode,
<a id="L4319" name="L4319"></a>4319                                              <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4320" name="L4320"></a>4320         <strong class="reserved">boolean</strong> isRemainderZero; <em class="comment">// record remainder is zero or not</em>
<a id="L4321" name="L4321"></a>4321         <strong class="reserved">int</strong> qsign; <em class="comment">// quotient sign</em>
<a id="L4322" name="L4322"></a>4322         <em class="comment">// Descend into mutables for faster remainder checks</em>
<a id="L4323" name="L4323"></a>4323         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdividend = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(bdividend.mag);
<a id="L4324" name="L4324"></a>4324         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>();
<a id="L4325" name="L4325"></a>4325         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdivisor = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(bdivisor.mag);
<a id="L4326" name="L4326"></a>4326         <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mr = mdividend.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(mdivisor, mq);
<a id="L4327" name="L4327"></a>4327         isRemainderZero = mr.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>();
<a id="L4328" name="L4328"></a>4328         qsign = (bdividend.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> != bdivisor.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>) ? -1 : 1;
<a id="L4329" name="L4329"></a>4329         <strong class="reserved">if</strong> (!isRemainderZero) <em class="brace">{</em>
<a id="L4330" name="L4330"></a>4330             <strong class="reserved">if</strong> (<a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(mdivisor, roundingMode, qsign, mq, mr)) <em class="brace">{</em>
<a id="L4331" name="L4331"></a>4331                 mq.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>.ONE);
<a id="L4332" name="L4332"></a>4332             <em class="brace">}</em>
<a id="L4333" name="L4333"></a>4333             <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(qsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4334" name="L4334"></a>4334         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4335" name="L4335"></a>4335             <strong class="reserved">if</strong> (preferredScale != <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L4336" name="L4336"></a>4336                 <strong class="reserved">long</strong> compactVal = mq.<a href="../S/1466.html#L222" title="Defined at 222 in src/java/math/MutableBigInteger.java.">toCompactValue</a>(qsign);
<a id="L4337" name="L4337"></a>4337                 <strong class="reserved">if</strong> (compactVal != INFLATED) <em class="brace">{</em>
<a id="L4338" name="L4338"></a>4338                     <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(compactVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4339" name="L4339"></a>4339                 <em class="brace">}</em>
<a id="L4340" name="L4340"></a>4340                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal = mq.<a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>(qsign);
<a id="L4341" name="L4341"></a>4341                 <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4342" name="L4342"></a>4342             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4343" name="L4343"></a>4343                 <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(qsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4344" name="L4344"></a>4344             <em class="brace">}</em>
<a id="L4345" name="L4345"></a>4345         <em class="brace">}</em>
<a id="L4346" name="L4346"></a>4346     <em class="brace">}</em>
<a id="L4347" name="L4347"></a>4347 
<div class="comment">
      Tests if quotient has to be incremented according the roundingMode</div>
<a id="L4351" name="L4351"></a>4351     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/23491.html" title="Multiple referred from 8 places.">needIncrement</a>(<a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mdivisor, <strong class="reserved">int</strong> roundingMode,
<a id="L4352" name="L4352"></a>4352                                          <strong class="reserved">int</strong> qsign, <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq, <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mr) <em class="brace">{</em>
<a id="L4353" name="L4353"></a>4353         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> !mr.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>();
<a id="L4354" name="L4354"></a>4354         <strong class="reserved">int</strong> cmpFracHalf = mr.<a href="../S/1466.html#L312" title="Defined at 312 in src/java/math/MutableBigInteger.java.">compareHalf</a>(mdivisor);
<a id="L4355" name="L4355"></a>4355         <strong class="reserved">return</strong> <a href="../S/1464.html#L4144" title="Defined at 4144 in src/java/math/BigDecimal.java.">commonNeedIncrement</a>(roundingMode, qsign, cmpFracHalf, mq.<a href="../S/1466.html#L497" title="Defined at 497 in src/java/math/MutableBigInteger.java.">isOdd</a>());
<a id="L4356" name="L4356"></a>4356     <em class="brace">}</em>
<a id="L4357" name="L4357"></a>4357 
<div class="comment">
      Remove insignificant trailing zeros from this
      <code>BigInteger</code> value until the preferred scale is reached or no
      more zeros can be removed.  If the preferred scale is less than
      Integer.MIN_VALUE, all the trailing zeros will be removed.
      @return new <code>BigDecimal</code> with a scale possibly reduced
      to be closed to the preferred scale.</div>
<a id="L4367" name="L4367"></a>4367     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/12205.html" title="Multiple referred from 11 places.">createAndStripZerosToMatchScale</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">long</strong> preferredScale) <em class="brace">{</em>
<a id="L4368" name="L4368"></a>4368         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> qr[]; <em class="comment">// quotient-remainder pair</em>
<a id="L4369" name="L4369"></a>4369         <strong class="reserved">while</strong> (intVal.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.TEN) &gt;= 0
<a id="L4370" name="L4370"></a>4370                &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; preferredScale) <em class="brace">{</em>
<a id="L4371" name="L4371"></a>4371             <strong class="reserved">if</strong> (intVal.<a href="../S/1462.html#L3156" title="Defined at 3156 in src/java/math/BigInteger.java.">testBit</a>(0))
<a id="L4372" name="L4372"></a>4372                 <strong class="reserved">break</strong>; <em class="comment">// odd number cannot end in 0</em>
<a id="L4373" name="L4373"></a>4373             qr = intVal.<a href="../D/14988.html" title="Multiple defined in 3 places.">divideAndRemainder</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.TEN);
<a id="L4374" name="L4374"></a>4374             <strong class="reserved">if</strong> (qr[1].<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() != 0)
<a id="L4375" name="L4375"></a>4375                 <strong class="reserved">break</strong>; <em class="comment">// non-0 remainder</em>
<a id="L4376" name="L4376"></a>4376             intVal = qr[0];
<a id="L4377" name="L4377"></a>4377             <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(intVal,(<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - 1); <em class="comment">// could Overflow</em>
<a id="L4378" name="L4378"></a>4378         <em class="brace">}</em>
<a id="L4379" name="L4379"></a>4379         <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(intVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, 0);
<a id="L4380" name="L4380"></a>4380     <em class="brace">}</em>
<a id="L4381" name="L4381"></a>4381 
<div class="comment">
      Remove insignificant trailing zeros from this
      <code>long</code> value until the preferred scale is reached or no
      more zeros can be removed.  If the preferred scale is less than
      Integer.MIN_VALUE, all the trailing zeros will be removed.
      @return new <code>BigDecimal</code> with a scale possibly reduced
      to be closed to the preferred scale.</div>
<a id="L4391" name="L4391"></a>4391     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/12205.html" title="Multiple referred from 11 places.">createAndStripZerosToMatchScale</a>(<strong class="reserved">long</strong> compactVal, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">long</strong> preferredScale) <em class="brace">{</em>
<a id="L4392" name="L4392"></a>4392         <strong class="reserved">while</strong> (<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(compactVal) &gt;= 10L &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; preferredScale) <em class="brace">{</em>
<a id="L4393" name="L4393"></a>4393             <strong class="reserved">if</strong> ((compactVal &amp; 1L) != 0L)
<a id="L4394" name="L4394"></a>4394                 <strong class="reserved">break</strong>; <em class="comment">// odd number cannot end in 0</em>
<a id="L4395" name="L4395"></a>4395             <strong class="reserved">long</strong> r = compactVal % 10L;
<a id="L4396" name="L4396"></a>4396             <strong class="reserved">if</strong> (r != 0L)
<a id="L4397" name="L4397"></a>4397                 <strong class="reserved">break</strong>; <em class="comment">// non-0 remainder</em>
<a id="L4398" name="L4398"></a>4398             compactVal /= 10;
<a id="L4399" name="L4399"></a>4399             <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(compactVal, (<strong class="reserved">long</strong>) <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - 1); <em class="comment">// could Overflow</em>
<a id="L4400" name="L4400"></a>4400         <em class="brace">}</em>
<a id="L4401" name="L4401"></a>4401         <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(compactVal, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4402" name="L4402"></a>4402     <em class="brace">}</em>
<a id="L4403" name="L4403"></a>4403 
<a id="L4404" name="L4404"></a>4404     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/28976.html" title="Multiple referred from 3 places.">stripZerosToMatchScale</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal, <strong class="reserved">long</strong> intCompact, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4405" name="L4405"></a>4405         <strong class="reserved">if</strong>(intCompact!=INFLATED) <em class="brace">{</em>
<a id="L4406" name="L4406"></a>4406             <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intCompact, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4407" name="L4407"></a>4407         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4408" name="L4408"></a>4408             <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intVal==<strong class="reserved">null</strong> ? INFLATED_BIGINT : intVal,
<a id="L4409" name="L4409"></a>4409                                                    <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4410" name="L4410"></a>4410         <em class="brace">}</em>
<a id="L4411" name="L4411"></a>4411     <em class="brace">}</em>
<a id="L4412" name="L4412"></a>4412 
<div class="comment">
      returns INFLATED if oveflow</div>
<a id="L4416" name="L4416"></a>4416     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<strong class="reserved">long</strong> xs, <strong class="reserved">long</strong> ys)<em class="brace">{</em>
<a id="L4417" name="L4417"></a>4417         <strong class="reserved">long</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = xs + ys;
<a id="L4418" name="L4418"></a>4418         <em class="comment">// See "Hacker's Delight" section 2-12 for explanation of</em>
<a id="L4419" name="L4419"></a>4419         <em class="comment">// the overflow test.</em>
<a id="L4420" name="L4420"></a>4420         <strong class="reserved">if</strong> ( (((<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> ^ xs) &amp; (<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> ^ ys))) &gt;= 0L) <em class="brace">{</em> <em class="comment">// not overflowed</em>
<a id="L4421" name="L4421"></a>4421             <strong class="reserved">return</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>;
<a id="L4422" name="L4422"></a>4422         <em class="brace">}</em>
<a id="L4423" name="L4423"></a>4423         <strong class="reserved">return</strong> INFLATED;
<a id="L4424" name="L4424"></a>4424     <em class="brace">}</em>
<a id="L4425" name="L4425"></a>4425 
<a id="L4426" name="L4426"></a>4426     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<strong class="reserved">long</strong> xs, <strong class="reserved">long</strong> ys, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>)<em class="brace">{</em>
<a id="L4427" name="L4427"></a>4427         <strong class="reserved">long</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(xs, ys);
<a id="L4428" name="L4428"></a>4428         <strong class="reserved">if</strong> (<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>!=INFLATED)
<a id="L4429" name="L4429"></a>4429             <strong class="reserved">return</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4430" name="L4430"></a>4430         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(xs).<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(ys), <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4431" name="L4431"></a>4431     <em class="brace">}</em>
<a id="L4432" name="L4432"></a>4432 
<a id="L4433" name="L4433"></a>4433     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<strong class="reserved">final</strong> <strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> scale1, <strong class="reserved">final</strong> <strong class="reserved">long</strong> ys, <strong class="reserved">int</strong> scale2) <em class="brace">{</em>
<a id="L4434" name="L4434"></a>4434         <strong class="reserved">long</strong> sdiff = (<strong class="reserved">long</strong>) scale1 - scale2;
<a id="L4435" name="L4435"></a>4435         <strong class="reserved">if</strong> (sdiff == 0) <em class="brace">{</em>
<a id="L4436" name="L4436"></a>4436             <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(xs, ys, scale1);
<a id="L4437" name="L4437"></a>4437         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L4438" name="L4438"></a>4438             <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(xs,-sdiff);
<a id="L4439" name="L4439"></a>4439             <strong class="reserved">long</strong> scaledX = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, raise);
<a id="L4440" name="L4440"></a>4440             <strong class="reserved">if</strong> (scaledX != INFLATED) <em class="brace">{</em>
<a id="L4441" name="L4441"></a>4441                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(scaledX, ys, scale2);
<a id="L4442" name="L4442"></a>4442             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4443" name="L4443"></a>4443                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bigsum = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs,raise).<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(ys);
<a id="L4444" name="L4444"></a>4444                 <strong class="reserved">return</strong> ((xs^ys)&gt;=0) ? <em class="comment">// same sign test</em>
<a id="L4445" name="L4445"></a>4445                     <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(bigsum, INFLATED, scale2, 0)
<a id="L4446" name="L4446"></a>4446                     : <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(bigsum, scale2, 0);
<a id="L4447" name="L4447"></a>4447             <em class="brace">}</em>
<a id="L4448" name="L4448"></a>4448         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4449" name="L4449"></a>4449             <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(ys,sdiff);
<a id="L4450" name="L4450"></a>4450             <strong class="reserved">long</strong> scaledY = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, raise);
<a id="L4451" name="L4451"></a>4451             <strong class="reserved">if</strong> (scaledY != INFLATED) <em class="brace">{</em>
<a id="L4452" name="L4452"></a>4452                 <strong class="reserved">return</strong> <a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(xs, scaledY, scale1);
<a id="L4453" name="L4453"></a>4453             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4454" name="L4454"></a>4454                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bigsum = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys,raise).<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(xs);
<a id="L4455" name="L4455"></a>4455                 <strong class="reserved">return</strong> ((xs^ys)&gt;=0) ?
<a id="L4456" name="L4456"></a>4456                     <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(bigsum, INFLATED, scale1, 0)
<a id="L4457" name="L4457"></a>4457                     : <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(bigsum, scale1, 0);
<a id="L4458" name="L4458"></a>4458             <em class="brace">}</em>
<a id="L4459" name="L4459"></a>4459         <em class="brace">}</em>
<a id="L4460" name="L4460"></a>4460     <em class="brace">}</em>
<a id="L4461" name="L4461"></a>4461 
<a id="L4462" name="L4462"></a>4462     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<strong class="reserved">final</strong> <strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> scale1, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> snd, <strong class="reserved">int</strong> scale2) <em class="brace">{</em>
<a id="L4463" name="L4463"></a>4463         <strong class="reserved">int</strong> rscale = scale1;
<a id="L4464" name="L4464"></a>4464         <strong class="reserved">long</strong> sdiff = (<strong class="reserved">long</strong>)rscale - scale2;
<a id="L4465" name="L4465"></a>4465         <strong class="reserved">boolean</strong> sameSigns =  (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(xs) == snd.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>);
<a id="L4466" name="L4466"></a>4466         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>;
<a id="L4467" name="L4467"></a>4467         <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L4468" name="L4468"></a>4468             <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(xs,-sdiff);
<a id="L4469" name="L4469"></a>4469             rscale = scale2;
<a id="L4470" name="L4470"></a>4470             <strong class="reserved">long</strong> scaledX = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, raise);
<a id="L4471" name="L4471"></a>4471             <strong class="reserved">if</strong> (scaledX == INFLATED) <em class="brace">{</em>
<a id="L4472" name="L4472"></a>4472                 <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = snd.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs,raise));
<a id="L4473" name="L4473"></a>4473             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4474" name="L4474"></a>4474                 <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = snd.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(scaledX);
<a id="L4475" name="L4475"></a>4475             <em class="brace">}</em>
<a id="L4476" name="L4476"></a>4476         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">//if (sdiff &gt; 0) {</em>
<a id="L4477" name="L4477"></a>4477             <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(snd,sdiff);
<a id="L4478" name="L4478"></a>4478             snd = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(snd,raise);
<a id="L4479" name="L4479"></a>4479             <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = snd.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(xs);
<a id="L4480" name="L4480"></a>4480         <em class="brace">}</em>
<a id="L4481" name="L4481"></a>4481         <strong class="reserved">return</strong> (sameSigns) ?
<a id="L4482" name="L4482"></a>4482             <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>, INFLATED, rscale, 0) :
<a id="L4483" name="L4483"></a>4483             <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>, rscale, 0);
<a id="L4484" name="L4484"></a>4484     <em class="brace">}</em>
<a id="L4485" name="L4485"></a>4485 
<a id="L4486" name="L4486"></a>4486     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> fst, <strong class="reserved">int</strong> scale1, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> snd, <strong class="reserved">int</strong> scale2) <em class="brace">{</em>
<a id="L4487" name="L4487"></a>4487         <strong class="reserved">int</strong> rscale = scale1;
<a id="L4488" name="L4488"></a>4488         <strong class="reserved">long</strong> sdiff = (<strong class="reserved">long</strong>)rscale - scale2;
<a id="L4489" name="L4489"></a>4489         <strong class="reserved">if</strong> (sdiff != 0) <em class="brace">{</em>
<a id="L4490" name="L4490"></a>4490             <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L4491" name="L4491"></a>4491                 <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(fst,-sdiff);
<a id="L4492" name="L4492"></a>4492                 rscale = scale2;
<a id="L4493" name="L4493"></a>4493                 fst = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(fst,raise);
<a id="L4494" name="L4494"></a>4494             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4495" name="L4495"></a>4495                 <strong class="reserved">int</strong> raise = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(snd,sdiff);
<a id="L4496" name="L4496"></a>4496                 snd = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(snd,raise);
<a id="L4497" name="L4497"></a>4497             <em class="brace">}</em>
<a id="L4498" name="L4498"></a>4498         <em class="brace">}</em>
<a id="L4499" name="L4499"></a>4499         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = fst.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(snd);
<a id="L4500" name="L4500"></a>4500         <strong class="reserved">return</strong> (fst.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a> == snd.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>) ?
<a id="L4501" name="L4501"></a>4501                 <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>, INFLATED, rscale, 0) :
<a id="L4502" name="L4502"></a>4502                 <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>, rscale, 0);
<a id="L4503" name="L4503"></a>4503     <em class="brace">}</em>
<a id="L4504" name="L4504"></a>4504 
<a id="L4505" name="L4505"></a>4505     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/10590.html" title="Multiple referred from 32 places.">bigMultiplyPowerTen</a>(<strong class="reserved">long</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L4506" name="L4506"></a>4506         <strong class="reserved">if</strong> (n &lt;= 0)
<a id="L4507" name="L4507"></a>4507             <strong class="reserved">return</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L4508" name="L4508"></a>4508         <strong class="reserved">return</strong> <a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(n).<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L4509" name="L4509"></a>4509     <em class="brace">}</em>
<a id="L4510" name="L4510"></a>4510 
<a id="L4511" name="L4511"></a>4511     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../R/10590.html" title="Multiple referred from 32 places.">bigMultiplyPowerTen</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L4512" name="L4512"></a>4512         <strong class="reserved">if</strong> (n &lt;= 0)
<a id="L4513" name="L4513"></a>4513             <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L4514" name="L4514"></a>4514         <strong class="reserved">if</strong>(n&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L4515" name="L4515"></a>4515                 <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(LONG_TEN_POWERS_TABLE[n]);
<a id="L4516" name="L4516"></a>4516         <em class="brace">}</em>
<a id="L4517" name="L4517"></a>4517         <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(n));
<a id="L4518" name="L4518"></a>4518     <em class="brace">}</em>
<a id="L4519" name="L4519"></a>4519 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (xs /
      ys)}, with rounding according to the context settings.
      Fast path - used only when (xscale &lt;= yscale &amp;&amp; yscale &lt; 18
       &amp;&amp; mc.presision&lt;18) {</div>
<a id="L4527" name="L4527"></a>4527     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1464.html#L4613" title="Referred from 4613 in src/java/math/BigDecimal.java.">divideSmallFastPath</a>(<strong class="reserved">final</strong> <strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> xscale,
<a id="L4528" name="L4528"></a>4528                                                   <strong class="reserved">final</strong> <strong class="reserved">long</strong> ys, <strong class="reserved">int</strong> yscale,
<a id="L4529" name="L4529"></a>4529                                                   <strong class="reserved">long</strong> preferredScale, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4530" name="L4530"></a>4530         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4531" name="L4531"></a>4531         <strong class="reserved">int</strong> roundingMode = mc.roundingMode.oldMode;
<a id="L4532" name="L4532"></a>4532 
<a id="L4533" name="L4533"></a>4533         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> (xscale &lt;= yscale) &amp;&amp; (yscale &lt; 18) &amp;&amp; (mcp &lt; 18);
<a id="L4534" name="L4534"></a>4534         <strong class="reserved">int</strong> xraise = yscale - xscale; <em class="comment">// xraise &gt;=0</em>
<a id="L4535" name="L4535"></a>4535         <strong class="reserved">long</strong> scaledX = (xraise==0) ? xs :
<a id="L4536" name="L4536"></a>4536             <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, xraise); <em class="comment">// can't overflow here!</em>
<a id="L4537" name="L4537"></a>4537         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient;
<a id="L4538" name="L4538"></a>4538 
<a id="L4539" name="L4539"></a>4539         <strong class="reserved">int</strong> cmp = <a href="../S/1464.html#L3866" title="Defined at 3866 in src/java/math/BigDecimal.java.">longCompareMagnitude</a>(scaledX, ys);
<a id="L4540" name="L4540"></a>4540         <strong class="reserved">if</strong>(cmp &gt; 0) <em class="brace">{</em> <em class="comment">// satisfy constraint (b)</em>
<a id="L4541" name="L4541"></a>4541             yscale -= 1; <em class="comment">// [that is, divisor *= 10]</em>
<a id="L4542" name="L4542"></a>4542             <strong class="reserved">int</strong> scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale + yscale - xscale + mcp);
<a id="L4543" name="L4543"></a>4543             <strong class="reserved">if</strong> (<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale) &gt; 0) <em class="brace">{</em>
<a id="L4544" name="L4544"></a>4544                 <em class="comment">// assert newScale &gt;= xscale</em>
<a id="L4545" name="L4545"></a>4545                 <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale);
<a id="L4546" name="L4546"></a>4546                 <strong class="reserved">long</strong> scaledXs;
<a id="L4547" name="L4547"></a>4547                 <strong class="reserved">if</strong> ((scaledXs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, raise)) == INFLATED) <em class="brace">{</em>
<a id="L4548" name="L4548"></a>4548                     quotient = <strong class="reserved">null</strong>;
<a id="L4549" name="L4549"></a>4549                     <strong class="reserved">if</strong>((mcp-1) &gt;=0 &amp;&amp; (mcp-1)&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L4550" name="L4550"></a>4550                         quotient = <a href="../S/1464.html#L4761" title="Defined at 4761 in src/java/math/BigDecimal.java.">multiplyDivideAndRound</a>(LONG_TEN_POWERS_TABLE[mcp-1], scaledX, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4551" name="L4551"></a>4551                     <em class="brace">}</em>
<a id="L4552" name="L4552"></a>4552                     <strong class="reserved">if</strong>(quotient==<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4553" name="L4553"></a>4553                         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(scaledX,mcp-1);
<a id="L4554" name="L4554"></a>4554                         quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rb, ys,
<a id="L4555" name="L4555"></a>4555                                                   scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4556" name="L4556"></a>4556                     <em class="brace">}</em>
<a id="L4557" name="L4557"></a>4557                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4558" name="L4558"></a>4558                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledXs, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4559" name="L4559"></a>4559                 <em class="brace">}</em>
<a id="L4560" name="L4560"></a>4560             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4561" name="L4561"></a>4561                 <strong class="reserved">int</strong> newScale = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) xscale - mcp);
<a id="L4562" name="L4562"></a>4562                 <em class="comment">// assert newScale &gt;= yscale</em>
<a id="L4563" name="L4563"></a>4563                 <strong class="reserved">if</strong> (newScale == yscale) <em class="brace">{</em> <em class="comment">// easy case</em>
<a id="L4564" name="L4564"></a>4564                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, ys, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4565" name="L4565"></a>4565                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4566" name="L4566"></a>4566                     <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) newScale - yscale);
<a id="L4567" name="L4567"></a>4567                     <strong class="reserved">long</strong> scaledYs;
<a id="L4568" name="L4568"></a>4568                     <strong class="reserved">if</strong> ((scaledYs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, raise)) == INFLATED) <em class="brace">{</em>
<a id="L4569" name="L4569"></a>4569                         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys,raise);
<a id="L4570" name="L4570"></a>4570                         quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(xs),
<a id="L4571" name="L4571"></a>4571                                                   rb, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4572" name="L4572"></a>4572                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4573" name="L4573"></a>4573                         quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, scaledYs, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4574" name="L4574"></a>4574                     <em class="brace">}</em>
<a id="L4575" name="L4575"></a>4575                 <em class="brace">}</em>
<a id="L4576" name="L4576"></a>4576             <em class="brace">}</em>
<a id="L4577" name="L4577"></a>4577         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4578" name="L4578"></a>4578             <em class="comment">// abs(scaledX) &lt;= abs(ys)</em>
<a id="L4579" name="L4579"></a>4579             <em class="comment">// result is "scaledX * 10^msp / ys"</em>
<a id="L4580" name="L4580"></a>4580             <strong class="reserved">int</strong> scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale + yscale - xscale + mcp);
<a id="L4581" name="L4581"></a>4581             <strong class="reserved">if</strong>(cmp==0) <em class="brace">{</em>
<a id="L4582" name="L4582"></a>4582                 <em class="comment">// abs(scaleX)== abs(ys) =&gt; result will be scaled 10^mcp + correct sign</em>
<a id="L4583" name="L4583"></a>4583                 quotient = <a href="../S/1464.html#L4905" title="Defined at 4905 in src/java/math/BigDecimal.java.">roundedTenPower</a>(((scaledX &lt; 0) == (ys &lt; 0)) ? 1 : -1, mcp, scl, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4584" name="L4584"></a>4584             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4585" name="L4585"></a>4585                 <em class="comment">// abs(scaledX) &lt; abs(ys)</em>
<a id="L4586" name="L4586"></a>4586                 <strong class="reserved">long</strong> scaledXs;
<a id="L4587" name="L4587"></a>4587                 <strong class="reserved">if</strong> ((scaledXs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(scaledX, mcp)) == INFLATED) <em class="brace">{</em>
<a id="L4588" name="L4588"></a>4588                     quotient = <strong class="reserved">null</strong>;
<a id="L4589" name="L4589"></a>4589                     <strong class="reserved">if</strong>(mcp&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L4590" name="L4590"></a>4590                         quotient = <a href="../S/1464.html#L4761" title="Defined at 4761 in src/java/math/BigDecimal.java.">multiplyDivideAndRound</a>(LONG_TEN_POWERS_TABLE[mcp], scaledX, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4591" name="L4591"></a>4591                     <em class="brace">}</em>
<a id="L4592" name="L4592"></a>4592                     <strong class="reserved">if</strong>(quotient==<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L4593" name="L4593"></a>4593                         <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(scaledX,mcp);
<a id="L4594" name="L4594"></a>4594                         quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rb, ys,
<a id="L4595" name="L4595"></a>4595                                                   scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4596" name="L4596"></a>4596                     <em class="brace">}</em>
<a id="L4597" name="L4597"></a>4597                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4598" name="L4598"></a>4598                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledXs, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4599" name="L4599"></a>4599                 <em class="brace">}</em>
<a id="L4600" name="L4600"></a>4600             <em class="brace">}</em>
<a id="L4601" name="L4601"></a>4601         <em class="brace">}</em>
<a id="L4602" name="L4602"></a>4602         <em class="comment">// doRound, here, only affects 1000000000 case.</em>
<a id="L4603" name="L4603"></a>4603         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(quotient,mc);
<a id="L4604" name="L4604"></a>4604     <em class="brace">}</em>
<a id="L4605" name="L4605"></a>4605 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (xs /
      ys)}, with rounding according to the context settings.</div>
<a id="L4610" name="L4610"></a>4610     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<strong class="reserved">final</strong> <strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> xscale, <strong class="reserved">final</strong> <strong class="reserved">long</strong> ys, <strong class="reserved">int</strong> yscale, <strong class="reserved">long</strong> preferredScale, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4611" name="L4611"></a>4611         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4612" name="L4612"></a>4612         <strong class="reserved">if</strong>(xscale &lt;= yscale &amp;&amp; yscale &lt; 18 &amp;&amp; mcp&lt;18) <em class="brace">{</em>
<a id="L4613" name="L4613"></a>4613             <strong class="reserved">return</strong> <a href="../S/1464.html#L4527" title="Defined at 4527 in src/java/math/BigDecimal.java.">divideSmallFastPath</a>(xs, xscale, ys, yscale, preferredScale, mc);
<a id="L4614" name="L4614"></a>4614         <em class="brace">}</em>
<a id="L4615" name="L4615"></a>4615         <strong class="reserved">if</strong> (<a href="../D/13060.html" title="Multiple defined in 3 places.">compareMagnitudeNormalized</a>(xs, xscale, ys, yscale) &gt; 0) <em class="brace">{</em><em class="comment">// satisfy constraint (b)</em>
<a id="L4616" name="L4616"></a>4616             yscale -= 1; <em class="comment">// [that is, divisor *= 10]</em>
<a id="L4617" name="L4617"></a>4617         <em class="brace">}</em>
<a id="L4618" name="L4618"></a>4618         <strong class="reserved">int</strong> roundingMode = mc.roundingMode.oldMode;
<a id="L4619" name="L4619"></a>4619         <em class="comment">// In order to find out whether the divide generates the exact result,</em>
<a id="L4620" name="L4620"></a>4620         <em class="comment">// we avoid calling the above divide method. 'quotient' holds the</em>
<a id="L4621" name="L4621"></a>4621         <em class="comment">// return BigDecimal object whose scale will be set to 'scl'.</em>
<a id="L4622" name="L4622"></a>4622         <strong class="reserved">int</strong> scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale + yscale - xscale + mcp);
<a id="L4623" name="L4623"></a>4623         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient;
<a id="L4624" name="L4624"></a>4624         <strong class="reserved">if</strong> (<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale) &gt; 0) <em class="brace">{</em>
<a id="L4625" name="L4625"></a>4625             <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale);
<a id="L4626" name="L4626"></a>4626             <strong class="reserved">long</strong> scaledXs;
<a id="L4627" name="L4627"></a>4627             <strong class="reserved">if</strong> ((scaledXs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, raise)) == INFLATED) <em class="brace">{</em>
<a id="L4628" name="L4628"></a>4628                 <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs,raise);
<a id="L4629" name="L4629"></a>4629                 quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rb, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4630" name="L4630"></a>4630             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4631" name="L4631"></a>4631                 quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledXs, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4632" name="L4632"></a>4632             <em class="brace">}</em>
<a id="L4633" name="L4633"></a>4633         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4634" name="L4634"></a>4634             <strong class="reserved">int</strong> newScale = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) xscale - mcp);
<a id="L4635" name="L4635"></a>4635             <em class="comment">// assert newScale &gt;= yscale</em>
<a id="L4636" name="L4636"></a>4636             <strong class="reserved">if</strong> (newScale == yscale) <em class="brace">{</em> <em class="comment">// easy case</em>
<a id="L4637" name="L4637"></a>4637                 quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, ys, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4638" name="L4638"></a>4638             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4639" name="L4639"></a>4639                 <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) newScale - yscale);
<a id="L4640" name="L4640"></a>4640                 <strong class="reserved">long</strong> scaledYs;
<a id="L4641" name="L4641"></a>4641                 <strong class="reserved">if</strong> ((scaledYs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, raise)) == INFLATED) <em class="brace">{</em>
<a id="L4642" name="L4642"></a>4642                     <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys,raise);
<a id="L4643" name="L4643"></a>4643                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(xs),
<a id="L4644" name="L4644"></a>4644                                               rb, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4645" name="L4645"></a>4645                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4646" name="L4646"></a>4646                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, scaledYs, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4647" name="L4647"></a>4647                 <em class="brace">}</em>
<a id="L4648" name="L4648"></a>4648             <em class="brace">}</em>
<a id="L4649" name="L4649"></a>4649         <em class="brace">}</em>
<a id="L4650" name="L4650"></a>4650         <em class="comment">// doRound, here, only affects 1000000000 case.</em>
<a id="L4651" name="L4651"></a>4651         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(quotient,mc);
<a id="L4652" name="L4652"></a>4652     <em class="brace">}</em>
<a id="L4653" name="L4653"></a>4653 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (xs /
      ys)}, with rounding according to the context settings.</div>
<a id="L4658" name="L4658"></a>4658     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> xs, <strong class="reserved">int</strong> xscale, <strong class="reserved">long</strong> ys, <strong class="reserved">int</strong> yscale, <strong class="reserved">long</strong> preferredScale, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4659" name="L4659"></a>4659         <em class="comment">// Normalize dividend &amp; divisor so that both fall into [0.1, 0.999...]</em>
<a id="L4660" name="L4660"></a>4660         <strong class="reserved">if</strong> ((-<a href="../D/13060.html" title="Multiple defined in 3 places.">compareMagnitudeNormalized</a>(ys, yscale, xs, xscale)) &gt; 0) <em class="brace">{</em><em class="comment">// satisfy constraint (b)</em>
<a id="L4661" name="L4661"></a>4661             yscale -= 1; <em class="comment">// [that is, divisor *= 10]</em>
<a id="L4662" name="L4662"></a>4662         <em class="brace">}</em>
<a id="L4663" name="L4663"></a>4663         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4664" name="L4664"></a>4664         <strong class="reserved">int</strong> roundingMode = mc.roundingMode.oldMode;
<a id="L4665" name="L4665"></a>4665 
<a id="L4666" name="L4666"></a>4666         <em class="comment">// In order to find out whether the divide generates the exact result,</em>
<a id="L4667" name="L4667"></a>4667         <em class="comment">// we avoid calling the above divide method. 'quotient' holds the</em>
<a id="L4668" name="L4668"></a>4668         <em class="comment">// return BigDecimal object whose scale will be set to 'scl'.</em>
<a id="L4669" name="L4669"></a>4669         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient;
<a id="L4670" name="L4670"></a>4670         <strong class="reserved">int</strong> scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale + yscale - xscale + mcp);
<a id="L4671" name="L4671"></a>4671         <strong class="reserved">if</strong> (<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale) &gt; 0) <em class="brace">{</em>
<a id="L4672" name="L4672"></a>4672             <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale);
<a id="L4673" name="L4673"></a>4673             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs,raise);
<a id="L4674" name="L4674"></a>4674             quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rb, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4675" name="L4675"></a>4675         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4676" name="L4676"></a>4676             <strong class="reserved">int</strong> newScale = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) xscale - mcp);
<a id="L4677" name="L4677"></a>4677             <em class="comment">// assert newScale &gt;= yscale</em>
<a id="L4678" name="L4678"></a>4678             <strong class="reserved">if</strong> (newScale == yscale) <em class="brace">{</em> <em class="comment">// easy case</em>
<a id="L4679" name="L4679"></a>4679                 quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, ys, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4680" name="L4680"></a>4680             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4681" name="L4681"></a>4681                 <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) newScale - yscale);
<a id="L4682" name="L4682"></a>4682                 <strong class="reserved">long</strong> scaledYs;
<a id="L4683" name="L4683"></a>4683                 <strong class="reserved">if</strong> ((scaledYs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, raise)) == INFLATED) <em class="brace">{</em>
<a id="L4684" name="L4684"></a>4684                     <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys,raise);
<a id="L4685" name="L4685"></a>4685                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, rb, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4686" name="L4686"></a>4686                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4687" name="L4687"></a>4687                     quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, scaledYs, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4688" name="L4688"></a>4688                 <em class="brace">}</em>
<a id="L4689" name="L4689"></a>4689             <em class="brace">}</em>
<a id="L4690" name="L4690"></a>4690         <em class="brace">}</em>
<a id="L4691" name="L4691"></a>4691         <em class="comment">// doRound, here, only affects 1000000000 case.</em>
<a id="L4692" name="L4692"></a>4692         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(quotient, mc);
<a id="L4693" name="L4693"></a>4693     <em class="brace">}</em>
<a id="L4694" name="L4694"></a>4694 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (xs /
      ys)}, with rounding according to the context settings.</div>
<a id="L4699" name="L4699"></a>4699     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> xscale, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> ys, <strong class="reserved">int</strong> yscale, <strong class="reserved">long</strong> preferredScale, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4700" name="L4700"></a>4700         <em class="comment">// Normalize dividend &amp; divisor so that both fall into [0.1, 0.999...]</em>
<a id="L4701" name="L4701"></a>4701         <strong class="reserved">if</strong> (<a href="../D/13060.html" title="Multiple defined in 3 places.">compareMagnitudeNormalized</a>(xs, xscale, ys, yscale) &gt; 0) <em class="brace">{</em><em class="comment">// satisfy constraint (b)</em>
<a id="L4702" name="L4702"></a>4702             yscale -= 1; <em class="comment">// [that is, divisor *= 10]</em>
<a id="L4703" name="L4703"></a>4703         <em class="brace">}</em>
<a id="L4704" name="L4704"></a>4704         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4705" name="L4705"></a>4705         <strong class="reserved">int</strong> roundingMode = mc.roundingMode.oldMode;
<a id="L4706" name="L4706"></a>4706 
<a id="L4707" name="L4707"></a>4707         <em class="comment">// In order to find out whether the divide generates the exact result,</em>
<a id="L4708" name="L4708"></a>4708         <em class="comment">// we avoid calling the above divide method. 'quotient' holds the</em>
<a id="L4709" name="L4709"></a>4709         <em class="comment">// return BigDecimal object whose scale will be set to 'scl'.</em>
<a id="L4710" name="L4710"></a>4710         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient;
<a id="L4711" name="L4711"></a>4711         <strong class="reserved">int</strong> scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale + yscale - xscale + mcp);
<a id="L4712" name="L4712"></a>4712         <strong class="reserved">if</strong> (<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale) &gt; 0) <em class="brace">{</em>
<a id="L4713" name="L4713"></a>4713             <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale);
<a id="L4714" name="L4714"></a>4714             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs,raise);
<a id="L4715" name="L4715"></a>4715             quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rb, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4716" name="L4716"></a>4716         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4717" name="L4717"></a>4717             <strong class="reserved">int</strong> newScale = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) xscale - mcp);
<a id="L4718" name="L4718"></a>4718             <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) newScale - yscale);
<a id="L4719" name="L4719"></a>4719             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys,raise);
<a id="L4720" name="L4720"></a>4720             quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(xs), rb, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4721" name="L4721"></a>4721         <em class="brace">}</em>
<a id="L4722" name="L4722"></a>4722         <em class="comment">// doRound, here, only affects 1000000000 case.</em>
<a id="L4723" name="L4723"></a>4723         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(quotient, mc);
<a id="L4724" name="L4724"></a>4724     <em class="brace">}</em>
<a id="L4725" name="L4725"></a>4725 
<div class="comment">
      Returns a <code>BigDecimal</code> whose value is {@code (xs /
      ys)}, with rounding according to the context settings.</div>
<a id="L4730" name="L4730"></a>4730     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> xs, <strong class="reserved">int</strong> xscale, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> ys, <strong class="reserved">int</strong> yscale, <strong class="reserved">long</strong> preferredScale, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L4731" name="L4731"></a>4731         <em class="comment">// Normalize dividend &amp; divisor so that both fall into [0.1, 0.999...]</em>
<a id="L4732" name="L4732"></a>4732         <strong class="reserved">if</strong> (<a href="../D/13060.html" title="Multiple defined in 3 places.">compareMagnitudeNormalized</a>(xs, xscale, ys, yscale) &gt; 0) <em class="brace">{</em><em class="comment">// satisfy constraint (b)</em>
<a id="L4733" name="L4733"></a>4733             yscale -= 1; <em class="comment">// [that is, divisor *= 10]</em>
<a id="L4734" name="L4734"></a>4734         <em class="brace">}</em>
<a id="L4735" name="L4735"></a>4735         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L4736" name="L4736"></a>4736         <strong class="reserved">int</strong> roundingMode = mc.roundingMode.oldMode;
<a id="L4737" name="L4737"></a>4737 
<a id="L4738" name="L4738"></a>4738         <em class="comment">// In order to find out whether the divide generates the exact result,</em>
<a id="L4739" name="L4739"></a>4739         <em class="comment">// we avoid calling the above divide method. 'quotient' holds the</em>
<a id="L4740" name="L4740"></a>4740         <em class="comment">// return BigDecimal object whose scale will be set to 'scl'.</em>
<a id="L4741" name="L4741"></a>4741         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> quotient;
<a id="L4742" name="L4742"></a>4742         <strong class="reserved">int</strong> scl = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale + yscale - xscale + mcp);
<a id="L4743" name="L4743"></a>4743         <strong class="reserved">if</strong> (<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale) &gt; 0) <em class="brace">{</em>
<a id="L4744" name="L4744"></a>4744             <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) mcp + yscale - xscale);
<a id="L4745" name="L4745"></a>4745             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs,raise);
<a id="L4746" name="L4746"></a>4746             quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(rb, ys, scl, roundingMode, <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4747" name="L4747"></a>4747         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4748" name="L4748"></a>4748             <strong class="reserved">int</strong> newScale = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) xscale - mcp);
<a id="L4749" name="L4749"></a>4749             <strong class="reserved">int</strong> raise = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>) newScale - yscale);
<a id="L4750" name="L4750"></a>4750             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> rb = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys,raise);
<a id="L4751" name="L4751"></a>4751             quotient = <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, rb, scl, roundingMode,<a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>(preferredScale));
<a id="L4752" name="L4752"></a>4752         <em class="brace">}</em>
<a id="L4753" name="L4753"></a>4753         <em class="comment">// doRound, here, only affects 1000000000 case.</em>
<a id="L4754" name="L4754"></a>4754         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(quotient, mc);
<a id="L4755" name="L4755"></a>4755     <em class="brace">}</em>
<a id="L4756" name="L4756"></a>4756 
<div class="comment">
      performs divideAndRound for (dividend0*dividend1, divisor)
      returns null if quotient can't fit into long value;</div>
<a id="L4761" name="L4761"></a>4761     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23408.html" title="Multiple referred from 3 places.">multiplyDivideAndRound</a>(<strong class="reserved">long</strong> dividend0, <strong class="reserved">long</strong> dividend1, <strong class="reserved">long</strong> divisor, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode,
<a id="L4762" name="L4762"></a>4762                                                      <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4763" name="L4763"></a>4763         <strong class="reserved">int</strong> qsign = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(dividend0)*<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(dividend1)*<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>(divisor);
<a id="L4764" name="L4764"></a>4764         dividend0 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(dividend0);
<a id="L4765" name="L4765"></a>4765         dividend1 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(dividend1);
<a id="L4766" name="L4766"></a>4766         divisor = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(divisor);
<a id="L4767" name="L4767"></a>4767         <em class="comment">// multiply dividend0 * dividend1</em>
<a id="L4768" name="L4768"></a>4768         <strong class="reserved">long</strong> d0_hi = dividend0 &gt;&gt;&gt; 32;
<a id="L4769" name="L4769"></a>4769         <strong class="reserved">long</strong> d0_lo = dividend0 &amp; LONG_MASK;
<a id="L4770" name="L4770"></a>4770         <strong class="reserved">long</strong> d1_hi = dividend1 &gt;&gt;&gt; 32;
<a id="L4771" name="L4771"></a>4771         <strong class="reserved">long</strong> d1_lo = dividend1 &amp; LONG_MASK;
<a id="L4772" name="L4772"></a>4772         <strong class="reserved">long</strong> product = d0_lo * d1_lo;
<a id="L4773" name="L4773"></a>4773         <strong class="reserved">long</strong> d0 = product &amp; LONG_MASK;
<a id="L4774" name="L4774"></a>4774         <strong class="reserved">long</strong> d1 = product &gt;&gt;&gt; 32;
<a id="L4775" name="L4775"></a>4775         product = d0_hi * d1_lo + d1;
<a id="L4776" name="L4776"></a>4776         d1 = product &amp; LONG_MASK;
<a id="L4777" name="L4777"></a>4777         <strong class="reserved">long</strong> d2 = product &gt;&gt;&gt; 32;
<a id="L4778" name="L4778"></a>4778         product = d0_lo * d1_hi + d1;
<a id="L4779" name="L4779"></a>4779         d1 = product &amp; LONG_MASK;
<a id="L4780" name="L4780"></a>4780         d2 += product &gt;&gt;&gt; 32;
<a id="L4781" name="L4781"></a>4781         <strong class="reserved">long</strong> d3 = d2&gt;&gt;&gt;32;
<a id="L4782" name="L4782"></a>4782         d2 &amp;= LONG_MASK;
<a id="L4783" name="L4783"></a>4783         product = d0_hi*d1_hi + d2;
<a id="L4784" name="L4784"></a>4784         d2 = product &amp; LONG_MASK;
<a id="L4785" name="L4785"></a>4785         d3 = ((product&gt;&gt;&gt;32) + d3) &amp; LONG_MASK;
<a id="L4786" name="L4786"></a>4786         <strong class="reserved">final</strong> <strong class="reserved">long</strong> dividendHi = <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(d3,d2);
<a id="L4787" name="L4787"></a>4787         <strong class="reserved">final</strong> <strong class="reserved">long</strong> dividendLo = <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(d1,d0);
<a id="L4788" name="L4788"></a>4788         <em class="comment">// divide</em>
<a id="L4789" name="L4789"></a>4789         <strong class="reserved">return</strong> <a href="../S/1464.html#L4799" title="Defined at 4799 in src/java/math/BigDecimal.java.">divideAndRound128</a>(dividendHi, dividendLo, divisor, qsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, preferredScale);
<a id="L4790" name="L4790"></a>4790     <em class="brace">}</em>
<a id="L4791" name="L4791"></a>4791 
<a id="L4792" name="L4792"></a>4792     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> DIV_NUM_BASE = (1L&lt;&lt;32); <em class="comment">// Number base (32 bits).</em>
<a id="L4793" name="L4793"></a>4793 
<div class="comment">
      divideAndRound 128-bit value by long divisor.
      returns null if quotient can't fit into long value;
      Specialized version of Knuth's division</div>
<a id="L4799" name="L4799"></a>4799     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13358.html" title="Multiple referred from 2 places.">divideAndRound128</a>(<strong class="reserved">final</strong> <strong class="reserved">long</strong> dividendHi, <strong class="reserved">final</strong> <strong class="reserved">long</strong> dividendLo, <strong class="reserved">long</strong> divisor, <strong class="reserved">int</strong> <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>,
<a id="L4800" name="L4800"></a>4800                                                 <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode, <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4801" name="L4801"></a>4801         <strong class="reserved">if</strong> (dividendHi &gt;= divisor) <em class="brace">{</em>
<a id="L4802" name="L4802"></a>4802             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L4803" name="L4803"></a>4803         <em class="brace">}</em>
<a id="L4804" name="L4804"></a>4804 
<a id="L4805" name="L4805"></a>4805         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a> = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/28378.html" title="Multiple defined in 2 places.">numberOfLeadingZeros</a>(divisor);
<a id="L4806" name="L4806"></a>4806         divisor &lt;&lt;= <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>;
<a id="L4807" name="L4807"></a>4807 
<a id="L4808" name="L4808"></a>4808         <strong class="reserved">final</strong> <strong class="reserved">long</strong> v1 = divisor &gt;&gt;&gt; 32;
<a id="L4809" name="L4809"></a>4809         <strong class="reserved">final</strong> <strong class="reserved">long</strong> v0 = divisor &amp; LONG_MASK;
<a id="L4810" name="L4810"></a>4810 
<a id="L4811" name="L4811"></a>4811         <strong class="reserved">long</strong> tmp = dividendLo &lt;&lt; <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>;
<a id="L4812" name="L4812"></a>4812         <strong class="reserved">long</strong> u1 = tmp &gt;&gt;&gt; 32;
<a id="L4813" name="L4813"></a>4813         <strong class="reserved">long</strong> u0 = tmp &amp; LONG_MASK;
<a id="L4814" name="L4814"></a>4814 
<a id="L4815" name="L4815"></a>4815         tmp = (dividendHi &lt;&lt; <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>) | (dividendLo &gt;&gt;&gt; 64 - <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>);
<a id="L4816" name="L4816"></a>4816         <strong class="reserved">long</strong> u2 = tmp &amp; LONG_MASK;
<a id="L4817" name="L4817"></a>4817         <strong class="reserved">long</strong> q1, r_tmp;
<a id="L4818" name="L4818"></a>4818         <strong class="reserved">if</strong> (v1 == 1) <em class="brace">{</em>
<a id="L4819" name="L4819"></a>4819             q1 = tmp;
<a id="L4820" name="L4820"></a>4820             r_tmp = 0;
<a id="L4821" name="L4821"></a>4821         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (tmp &gt;= 0) <em class="brace">{</em>
<a id="L4822" name="L4822"></a>4822             q1 = tmp / v1;
<a id="L4823" name="L4823"></a>4823             r_tmp = tmp - q1 * v1;
<a id="L4824" name="L4824"></a>4824         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4825" name="L4825"></a>4825             <strong class="reserved">long</strong>[] rq = <a href="../S/1464.html#L4939" title="Defined at 4939 in src/java/math/BigDecimal.java.">divRemNegativeLong</a>(tmp, v1);
<a id="L4826" name="L4826"></a>4826             q1 = rq[1];
<a id="L4827" name="L4827"></a>4827             r_tmp = rq[0];
<a id="L4828" name="L4828"></a>4828         <em class="brace">}</em>
<a id="L4829" name="L4829"></a>4829 
<a id="L4830" name="L4830"></a>4830         <strong class="reserved">while</strong>(q1 &gt;= DIV_NUM_BASE || <a href="../D/36009.html" title="Multiple defined in 2 places.">unsignedLongCompare</a>(q1*v0, <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(r_tmp, u1))) <em class="brace">{</em>
<a id="L4831" name="L4831"></a>4831             q1--;
<a id="L4832" name="L4832"></a>4832             r_tmp += v1;
<a id="L4833" name="L4833"></a>4833             <strong class="reserved">if</strong> (r_tmp &gt;= DIV_NUM_BASE)
<a id="L4834" name="L4834"></a>4834                 <strong class="reserved">break</strong>;
<a id="L4835" name="L4835"></a>4835         <em class="brace">}</em>
<a id="L4836" name="L4836"></a>4836 
<a id="L4837" name="L4837"></a>4837         tmp = <a href="../D/27829.html" title="Multiple defined in 2 places.">mulsub</a>(u2,u1,v1,v0,q1);
<a id="L4838" name="L4838"></a>4838         u1 = tmp &amp; LONG_MASK;
<a id="L4839" name="L4839"></a>4839         <strong class="reserved">long</strong> q0;
<a id="L4840" name="L4840"></a>4840         <strong class="reserved">if</strong> (v1 == 1) <em class="brace">{</em>
<a id="L4841" name="L4841"></a>4841             q0 = tmp;
<a id="L4842" name="L4842"></a>4842             r_tmp = 0;
<a id="L4843" name="L4843"></a>4843         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (tmp &gt;= 0) <em class="brace">{</em>
<a id="L4844" name="L4844"></a>4844             q0 = tmp / v1;
<a id="L4845" name="L4845"></a>4845             r_tmp = tmp - q0 * v1;
<a id="L4846" name="L4846"></a>4846         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4847" name="L4847"></a>4847             <strong class="reserved">long</strong>[] rq = <a href="../S/1464.html#L4939" title="Defined at 4939 in src/java/math/BigDecimal.java.">divRemNegativeLong</a>(tmp, v1);
<a id="L4848" name="L4848"></a>4848             q0 = rq[1];
<a id="L4849" name="L4849"></a>4849             r_tmp = rq[0];
<a id="L4850" name="L4850"></a>4850         <em class="brace">}</em>
<a id="L4851" name="L4851"></a>4851 
<a id="L4852" name="L4852"></a>4852         <strong class="reserved">while</strong>(q0 &gt;= DIV_NUM_BASE || <a href="../D/36009.html" title="Multiple defined in 2 places.">unsignedLongCompare</a>(q0*v0,<a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(r_tmp,u0))) <em class="brace">{</em>
<a id="L4853" name="L4853"></a>4853             q0--;
<a id="L4854" name="L4854"></a>4854             r_tmp += v1;
<a id="L4855" name="L4855"></a>4855             <strong class="reserved">if</strong> (r_tmp &gt;= DIV_NUM_BASE)
<a id="L4856" name="L4856"></a>4856                 <strong class="reserved">break</strong>;
<a id="L4857" name="L4857"></a>4857         <em class="brace">}</em>
<a id="L4858" name="L4858"></a>4858 
<a id="L4859" name="L4859"></a>4859         <strong class="reserved">if</strong>((<strong class="reserved">int</strong>)q1 &lt; 0) <em class="brace">{</em>
<a id="L4860" name="L4860"></a>4860             <em class="comment">// result (which is positive and unsigned here)</em>
<a id="L4861" name="L4861"></a>4861             <em class="comment">// can't fit into long due to sign bit is used for value</em>
<a id="L4862" name="L4862"></a>4862             <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a> mq = <strong class="reserved">new</strong> <a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>(<strong class="reserved">new</strong> <strong class="reserved">int</strong>[]<em class="brace">{</em>(<strong class="reserved">int</strong>)q1, (<strong class="reserved">int</strong>)q0<em class="brace">}</em>);
<a id="L4863" name="L4863"></a>4863             <strong class="reserved">if</strong> (roundingMode == ROUND_DOWN &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == preferredScale) <em class="brace">{</em>
<a id="L4864" name="L4864"></a>4864                 <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4865" name="L4865"></a>4865             <em class="brace">}</em>
<a id="L4866" name="L4866"></a>4866             <strong class="reserved">long</strong> r = <a href="../D/27829.html" title="Multiple defined in 2 places.">mulsub</a>(u1, u0, v1, v0, q0) &gt;&gt;&gt; <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>;
<a id="L4867" name="L4867"></a>4867             <strong class="reserved">if</strong> (r != 0) <em class="brace">{</em>
<a id="L4868" name="L4868"></a>4868                 <strong class="reserved">if</strong>(<a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(divisor &gt;&gt;&gt; <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>, roundingMode, <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, mq, r))<em class="brace">{</em>
<a id="L4869" name="L4869"></a>4869                     mq.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/1466.html#L49" title="Defined at 49 in src/java/math/MutableBigInteger.java.">MutableBigInteger</a>.ONE);
<a id="L4870" name="L4870"></a>4870                 <em class="brace">}</em>
<a id="L4871" name="L4871"></a>4871                 <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4872" name="L4872"></a>4872             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4873" name="L4873"></a>4873                 <strong class="reserved">if</strong> (preferredScale != <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L4874" name="L4874"></a>4874                     <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> intVal =  mq.<a href="../D/35356.html" title="Multiple defined in 4 places.">toBigInteger</a>(<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>);
<a id="L4875" name="L4875"></a>4875                     <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(intVal,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4876" name="L4876"></a>4876                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4877" name="L4877"></a>4877                     <strong class="reserved">return</strong> mq.<a href="../S/1466.html#L201" title="Defined at 201 in src/java/math/MutableBigInteger.java.">toBigDecimal</a>(<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4878" name="L4878"></a>4878                 <em class="brace">}</em>
<a id="L4879" name="L4879"></a>4879             <em class="brace">}</em>
<a id="L4880" name="L4880"></a>4880         <em class="brace">}</em>
<a id="L4881" name="L4881"></a>4881 
<a id="L4882" name="L4882"></a>4882         <strong class="reserved">long</strong> q = <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(q1,q0);
<a id="L4883" name="L4883"></a>4883         q*=<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>;
<a id="L4884" name="L4884"></a>4884 
<a id="L4885" name="L4885"></a>4885         <strong class="reserved">if</strong> (roundingMode == ROUND_DOWN &amp;&amp; <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> == preferredScale)
<a id="L4886" name="L4886"></a>4886             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(q, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4887" name="L4887"></a>4887 
<a id="L4888" name="L4888"></a>4888         <strong class="reserved">long</strong> r = <a href="../D/27829.html" title="Multiple defined in 2 places.">mulsub</a>(u1, u0, v1, v0, q0) &gt;&gt;&gt; <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>;
<a id="L4889" name="L4889"></a>4889         <strong class="reserved">if</strong> (r != 0) <em class="brace">{</em>
<a id="L4890" name="L4890"></a>4890             <strong class="reserved">boolean</strong> <a href="../D/24445.html" title="Multiple defined in 3 places.">increment</a> = <a href="../D/27927.html" title="Multiple defined in 3 places.">needIncrement</a>(divisor &gt;&gt;&gt; <a href="../S/4397.html#L337" title="Defined at 337 in src/javax/sound/sampled/FloatControl.java.">shift</a>, roundingMode, <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, q, r);
<a id="L4891" name="L4891"></a>4891             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>((<a href="../D/24445.html" title="Multiple defined in 3 places.">increment</a> ? q + <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a> : q), <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4892" name="L4892"></a>4892         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4893" name="L4893"></a>4893             <strong class="reserved">if</strong> (preferredScale != <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L4894" name="L4894"></a>4894                 <strong class="reserved">return</strong> <a href="../D/13603.html" title="Multiple defined in 2 places.">createAndStripZerosToMatchScale</a>(q, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, preferredScale);
<a id="L4895" name="L4895"></a>4895             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4896" name="L4896"></a>4896                 <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(q, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4897" name="L4897"></a>4897             <em class="brace">}</em>
<a id="L4898" name="L4898"></a>4898         <em class="brace">}</em>
<a id="L4899" name="L4899"></a>4899     <em class="brace">}</em>
<a id="L4900" name="L4900"></a>4900 
<div class="comment">
      calculate divideAndRound for ldividend*10^raise / divisor
      when abs(dividend)==abs(divisor);</div>
<a id="L4905" name="L4905"></a>4905     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1464.html#L4583" title="Referred from 4583 in src/java/math/BigDecimal.java.">roundedTenPower</a>(<strong class="reserved">int</strong> qsign, <strong class="reserved">int</strong> raise, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> preferredScale) <em class="brace">{</em>
<a id="L4906" name="L4906"></a>4906         <strong class="reserved">if</strong> (<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> &gt; preferredScale) <em class="brace">{</em>
<a id="L4907" name="L4907"></a>4907             <strong class="reserved">int</strong> diff = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - preferredScale;
<a id="L4908" name="L4908"></a>4908             <strong class="reserved">if</strong>(diff &lt; raise) <em class="brace">{</em>
<a id="L4909" name="L4909"></a>4909                 <strong class="reserved">return</strong> <a href="../S/1464.html#L4918" title="Defined at 4918 in src/java/math/BigDecimal.java.">scaledTenPow</a>(raise - diff, qsign, preferredScale);
<a id="L4910" name="L4910"></a>4910             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4911" name="L4911"></a>4911                 <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(qsign,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>-raise);
<a id="L4912" name="L4912"></a>4912             <em class="brace">}</em>
<a id="L4913" name="L4913"></a>4913         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4914" name="L4914"></a>4914             <strong class="reserved">return</strong> <a href="../S/1464.html#L4918" title="Defined at 4918 in src/java/math/BigDecimal.java.">scaledTenPow</a>(raise, qsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4915" name="L4915"></a>4915         <em class="brace">}</em>
<a id="L4916" name="L4916"></a>4916     <em class="brace">}</em>
<a id="L4917" name="L4917"></a>4917 
<a id="L4918" name="L4918"></a>4918     <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/26606.html" title="Multiple referred from 2 places.">scaledTenPow</a>(<strong class="reserved">int</strong> n, <strong class="reserved">int</strong> <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L4919" name="L4919"></a>4919         <strong class="reserved">if</strong> (n &lt; LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L4920" name="L4920"></a>4920             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>*LONG_TEN_POWERS_TABLE[n],<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L4921" name="L4921"></a>4921         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L4922" name="L4922"></a>4922             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> unscaledVal = <a href="../S/1464.html#L3531" title="Defined at 3531 in src/java/math/BigDecimal.java.">bigTenToThe</a>(n);
<a id="L4923" name="L4923"></a>4923             <strong class="reserved">if</strong>(<a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>==-1) <em class="brace">{</em>
<a id="L4924" name="L4924"></a>4924                 unscaledVal = unscaledVal.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>();
<a id="L4925" name="L4925"></a>4925             <em class="brace">}</em>
<a id="L4926" name="L4926"></a>4926             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(unscaledVal, INFLATED, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, n+1);
<a id="L4927" name="L4927"></a>4927         <em class="brace">}</em>
<a id="L4928" name="L4928"></a>4928     <em class="brace">}</em>
<a id="L4929" name="L4929"></a>4929 
<div class="comment">
      Calculate the quotient and remainder of dividing a negative long by
      another long.
      @param n the numerator; must be negative
      @param d the denominator; must not be unity
      @return a two-element {@long} array with the remainder and quotient in
              the initial and final elements, respectively</div>
<a id="L4939" name="L4939"></a>4939     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong>[] <a href="../R/13347.html" title="Multiple referred from 2 places.">divRemNegativeLong</a>(<strong class="reserved">long</strong> n, <strong class="reserved">long</strong> d) <em class="brace">{</em>
<a id="L4940" name="L4940"></a>4940         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> n &lt; 0 : "Non-negative numerator " + n;
<a id="L4941" name="L4941"></a>4941         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> d != 1 : "Unity denominator";
<a id="L4942" name="L4942"></a>4942 
<a id="L4943" name="L4943"></a>4943         <em class="comment">// Approximate the quotient and remainder</em>
<a id="L4944" name="L4944"></a>4944         <strong class="reserved">long</strong> q = (n &gt;&gt;&gt; 1) / (d &gt;&gt;&gt; 1);
<a id="L4945" name="L4945"></a>4945         <strong class="reserved">long</strong> r = n - q * d;
<a id="L4946" name="L4946"></a>4946 
<a id="L4947" name="L4947"></a>4947         <em class="comment">// Correct the approximation</em>
<a id="L4948" name="L4948"></a>4948         <strong class="reserved">while</strong> (r &lt; 0) <em class="brace">{</em>
<a id="L4949" name="L4949"></a>4949             r += d;
<a id="L4950" name="L4950"></a>4950             q--;
<a id="L4951" name="L4951"></a>4951         <em class="brace">}</em>
<a id="L4952" name="L4952"></a>4952         <strong class="reserved">while</strong> (r &gt;= d) <em class="brace">{</em>
<a id="L4953" name="L4953"></a>4953             r -= d;
<a id="L4954" name="L4954"></a>4954             q++;
<a id="L4955" name="L4955"></a>4955         <em class="brace">}</em>
<a id="L4956" name="L4956"></a>4956 
<a id="L4957" name="L4957"></a>4957         <em class="comment">// n - q*d == r &amp;&amp; 0 &lt;= r &lt; d, hence we're done.</em>
<a id="L4958" name="L4958"></a>4958         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <strong class="reserved">long</strong>[] <em class="brace">{</em>r, q<em class="brace">}</em>;
<a id="L4959" name="L4959"></a>4959     <em class="brace">}</em>
<a id="L4960" name="L4960"></a>4960 
<a id="L4961" name="L4961"></a>4961     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/22813.html" title="Multiple referred from 8 places.">make64</a>(<strong class="reserved">long</strong> hi, <strong class="reserved">long</strong> lo) <em class="brace">{</em>
<a id="L4962" name="L4962"></a>4962         <strong class="reserved">return</strong> hi&lt;&lt;32 | lo;
<a id="L4963" name="L4963"></a>4963     <em class="brace">}</em>
<a id="L4964" name="L4964"></a>4964 
<a id="L4965" name="L4965"></a>4965     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/23397.html" title="Multiple referred from 5 places.">mulsub</a>(<strong class="reserved">long</strong> u1, <strong class="reserved">long</strong> u0, <strong class="reserved">final</strong> <strong class="reserved">long</strong> v1, <strong class="reserved">final</strong> <strong class="reserved">long</strong> v0, <strong class="reserved">long</strong> q0) <em class="brace">{</em>
<a id="L4966" name="L4966"></a>4966         <strong class="reserved">long</strong> tmp = u0 - q0*v0;
<a id="L4967" name="L4967"></a>4967         <strong class="reserved">return</strong> <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(u1 + (tmp&gt;&gt;&gt;32) - q0*v1,tmp &amp; LONG_MASK);
<a id="L4968" name="L4968"></a>4968     <em class="brace">}</em>
<a id="L4969" name="L4969"></a>4969 
<a id="L4970" name="L4970"></a>4970     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/29783.html" title="Multiple referred from 8 places.">unsignedLongCompare</a>(<strong class="reserved">long</strong> one, <strong class="reserved">long</strong> two) <em class="brace">{</em>
<a id="L4971" name="L4971"></a>4971         <strong class="reserved">return</strong> (one+<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE) &gt; (two+<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE);
<a id="L4972" name="L4972"></a>4972     <em class="brace">}</em>
<a id="L4973" name="L4973"></a>4973 
<a id="L4974" name="L4974"></a>4974     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/1464.html#L5156" title="Referred from 5156 in src/java/math/BigDecimal.java.">unsignedLongCompareEq</a>(<strong class="reserved">long</strong> one, <strong class="reserved">long</strong> two) <em class="brace">{</em>
<a id="L4975" name="L4975"></a>4975         <strong class="reserved">return</strong> (one+<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE) &gt;= (two+<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE);
<a id="L4976" name="L4976"></a>4976     <em class="brace">}</em>
<a id="L4977" name="L4977"></a>4977 
<a id="L4978" name="L4978"></a>4978 
<a id="L4979" name="L4979"></a>4979     <em class="comment">// Compare Normalize dividend &amp; divisor so that both fall into [0.1, 0.999...]</em>
<a id="L4980" name="L4980"></a>4980     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11716.html" title="Multiple referred from 4 places.">compareMagnitudeNormalized</a>(<strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> xscale, <strong class="reserved">long</strong> ys, <strong class="reserved">int</strong> yscale) <em class="brace">{</em>
<a id="L4981" name="L4981"></a>4981         <em class="comment">// assert xs!=0 &amp;&amp; ys!=0</em>
<a id="L4982" name="L4982"></a>4982         <strong class="reserved">int</strong> sdiff = xscale - yscale;
<a id="L4983" name="L4983"></a>4983         <strong class="reserved">if</strong> (sdiff != 0) <em class="brace">{</em>
<a id="L4984" name="L4984"></a>4984             <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L4985" name="L4985"></a>4985                 xs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, -sdiff);
<a id="L4986" name="L4986"></a>4986             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// sdiff &gt; 0</em>
<a id="L4987" name="L4987"></a>4987                 ys = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, sdiff);
<a id="L4988" name="L4988"></a>4988             <em class="brace">}</em>
<a id="L4989" name="L4989"></a>4989         <em class="brace">}</em>
<a id="L4990" name="L4990"></a>4990         <strong class="reserved">if</strong> (xs != INFLATED)
<a id="L4991" name="L4991"></a>4991             <strong class="reserved">return</strong> (ys != INFLATED) ? <a href="../S/1464.html#L3866" title="Defined at 3866 in src/java/math/BigDecimal.java.">longCompareMagnitude</a>(xs, ys) : -1;
<a id="L4992" name="L4992"></a>4992         <strong class="reserved">else</strong>
<a id="L4993" name="L4993"></a>4993             <strong class="reserved">return</strong> 1;
<a id="L4994" name="L4994"></a>4994     <em class="brace">}</em>
<a id="L4995" name="L4995"></a>4995 
<a id="L4996" name="L4996"></a>4996     <em class="comment">// Compare Normalize dividend &amp; divisor so that both fall into [0.1, 0.999...]</em>
<a id="L4997" name="L4997"></a>4997     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11716.html" title="Multiple referred from 4 places.">compareMagnitudeNormalized</a>(<strong class="reserved">long</strong> xs, <strong class="reserved">int</strong> xscale, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> ys, <strong class="reserved">int</strong> yscale) <em class="brace">{</em>
<a id="L4998" name="L4998"></a>4998         <em class="comment">// assert "ys can't be represented as long"</em>
<a id="L4999" name="L4999"></a>4999         <strong class="reserved">if</strong> (xs == 0)
<a id="L5000" name="L5000"></a>5000             <strong class="reserved">return</strong> -1;
<a id="L5001" name="L5001"></a>5001         <strong class="reserved">int</strong> sdiff = xscale - yscale;
<a id="L5002" name="L5002"></a>5002         <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L5003" name="L5003"></a>5003             <strong class="reserved">if</strong> (<a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, -sdiff) == INFLATED ) <em class="brace">{</em>
<a id="L5004" name="L5004"></a>5004                 <strong class="reserved">return</strong> <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs, -sdiff).<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(ys);
<a id="L5005" name="L5005"></a>5005             <em class="brace">}</em>
<a id="L5006" name="L5006"></a>5006         <em class="brace">}</em>
<a id="L5007" name="L5007"></a>5007         <strong class="reserved">return</strong> -1;
<a id="L5008" name="L5008"></a>5008     <em class="brace">}</em>
<a id="L5009" name="L5009"></a>5009 
<a id="L5010" name="L5010"></a>5010     <em class="comment">// Compare Normalize dividend &amp; divisor so that both fall into [0.1, 0.999...]</em>
<a id="L5011" name="L5011"></a>5011     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11716.html" title="Multiple referred from 4 places.">compareMagnitudeNormalized</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> xs, <strong class="reserved">int</strong> xscale, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> ys, <strong class="reserved">int</strong> yscale) <em class="brace">{</em>
<a id="L5012" name="L5012"></a>5012         <strong class="reserved">int</strong> sdiff = xscale - yscale;
<a id="L5013" name="L5013"></a>5013         <strong class="reserved">if</strong> (sdiff &lt; 0) <em class="brace">{</em>
<a id="L5014" name="L5014"></a>5014             <strong class="reserved">return</strong> <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(xs, -sdiff).<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(ys);
<a id="L5015" name="L5015"></a>5015         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// sdiff &gt;= 0</em>
<a id="L5016" name="L5016"></a>5016             <strong class="reserved">return</strong> xs.<a href="../D/13059.html" title="Multiple defined in 3 places.">compareMagnitude</a>(<a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(ys, sdiff));
<a id="L5017" name="L5017"></a>5017         <em class="brace">}</em>
<a id="L5018" name="L5018"></a>5018     <em class="brace">}</em>
<a id="L5019" name="L5019"></a>5019 
<a id="L5020" name="L5020"></a>5020     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> <a href="../R/23405.html" title="Multiple referred from 61 places.">multiply</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">long</strong> y)<em class="brace">{</em>
<a id="L5021" name="L5021"></a>5021                 <strong class="reserved">long</strong> product = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> * y;
<a id="L5022" name="L5022"></a>5022         <strong class="reserved">long</strong> ax = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L5023" name="L5023"></a>5023         <strong class="reserved">long</strong> ay = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(y);
<a id="L5024" name="L5024"></a>5024         <strong class="reserved">if</strong> (((ax | ay) &gt;&gt;&gt; 31 == 0) || (y == 0) || (product / y == <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>))<em class="brace">{</em>
<a id="L5025" name="L5025"></a>5025                         <strong class="reserved">return</strong> product;
<a id="L5026" name="L5026"></a>5026                 <em class="brace">}</em>
<a id="L5027" name="L5027"></a>5027         <strong class="reserved">return</strong> INFLATED;
<a id="L5028" name="L5028"></a>5028     <em class="brace">}</em>
<a id="L5029" name="L5029"></a>5029 
<a id="L5030" name="L5030"></a>5030     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23405.html" title="Multiple referred from 61 places.">multiply</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">long</strong> y, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L5031" name="L5031"></a>5031         <strong class="reserved">long</strong> product = <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L5032" name="L5032"></a>5032         <strong class="reserved">if</strong>(product!=INFLATED) <em class="brace">{</em>
<a id="L5033" name="L5033"></a>5033             <strong class="reserved">return</strong> <a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(product,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5034" name="L5034"></a>5034         <em class="brace">}</em>
<a id="L5035" name="L5035"></a>5035         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>).<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(y),INFLATED,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,0);
<a id="L5036" name="L5036"></a>5036     <em class="brace">}</em>
<a id="L5037" name="L5037"></a>5037 
<a id="L5038" name="L5038"></a>5038     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23405.html" title="Multiple referred from 61 places.">multiply</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> y, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L5039" name="L5039"></a>5039         <strong class="reserved">if</strong>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>==0) <em class="brace">{</em>
<a id="L5040" name="L5040"></a>5040             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5041" name="L5041"></a>5041         <em class="brace">}</em>
<a id="L5042" name="L5042"></a>5042         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(y.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>),INFLATED,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,0);
<a id="L5043" name="L5043"></a>5043     <em class="brace">}</em>
<a id="L5044" name="L5044"></a>5044 
<a id="L5045" name="L5045"></a>5045     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23405.html" title="Multiple referred from 61 places.">multiply</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> y, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>) <em class="brace">{</em>
<a id="L5046" name="L5046"></a>5046         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(y),INFLATED,<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>,0);
<a id="L5047" name="L5047"></a>5047     <em class="brace">}</em>
<a id="L5048" name="L5048"></a>5048 
<div class="comment">
      Multiplies two long values and rounds according <code>MathContext</code></div>
<a id="L5052" name="L5052"></a>5052     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23406.html" title="Multiple referred from 4 places.">multiplyAndRound</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">long</strong> y, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L5053" name="L5053"></a>5053         <strong class="reserved">long</strong> product = <a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L5054" name="L5054"></a>5054         <strong class="reserved">if</strong>(product!=INFLATED) <em class="brace">{</em>
<a id="L5055" name="L5055"></a>5055             <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(product, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, mc);
<a id="L5056" name="L5056"></a>5056         <em class="brace">}</em>
<a id="L5057" name="L5057"></a>5057         <em class="comment">// attempt to do it in 128 bits</em>
<a id="L5058" name="L5058"></a>5058         <strong class="reserved">int</strong> rsign = 1;
<a id="L5059" name="L5059"></a>5059         <strong class="reserved">if</strong>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; 0) <em class="brace">{</em>
<a id="L5060" name="L5060"></a>5060             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = -<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L5061" name="L5061"></a>5061             rsign = -1;
<a id="L5062" name="L5062"></a>5062         <em class="brace">}</em>
<a id="L5063" name="L5063"></a>5063         <strong class="reserved">if</strong>(y &lt; 0) <em class="brace">{</em>
<a id="L5064" name="L5064"></a>5064             y = -y;
<a id="L5065" name="L5065"></a>5065             rsign *= -1;
<a id="L5066" name="L5066"></a>5066         <em class="brace">}</em>
<a id="L5067" name="L5067"></a>5067         <em class="comment">// multiply dividend0 * dividend1</em>
<a id="L5068" name="L5068"></a>5068         <strong class="reserved">long</strong> m0_hi = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &gt;&gt;&gt; 32;
<a id="L5069" name="L5069"></a>5069         <strong class="reserved">long</strong> m0_lo = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &amp; LONG_MASK;
<a id="L5070" name="L5070"></a>5070         <strong class="reserved">long</strong> m1_hi = y &gt;&gt;&gt; 32;
<a id="L5071" name="L5071"></a>5071         <strong class="reserved">long</strong> m1_lo = y &amp; LONG_MASK;
<a id="L5072" name="L5072"></a>5072         product = m0_lo * m1_lo;
<a id="L5073" name="L5073"></a>5073         <strong class="reserved">long</strong> m0 = product &amp; LONG_MASK;
<a id="L5074" name="L5074"></a>5074         <strong class="reserved">long</strong> m1 = product &gt;&gt;&gt; 32;
<a id="L5075" name="L5075"></a>5075         product = m0_hi * m1_lo + m1;
<a id="L5076" name="L5076"></a>5076         m1 = product &amp; LONG_MASK;
<a id="L5077" name="L5077"></a>5077         <strong class="reserved">long</strong> m2 = product &gt;&gt;&gt; 32;
<a id="L5078" name="L5078"></a>5078         product = m0_lo * m1_hi + m1;
<a id="L5079" name="L5079"></a>5079         m1 = product &amp; LONG_MASK;
<a id="L5080" name="L5080"></a>5080         m2 += product &gt;&gt;&gt; 32;
<a id="L5081" name="L5081"></a>5081         <strong class="reserved">long</strong> m3 = m2&gt;&gt;&gt;32;
<a id="L5082" name="L5082"></a>5082         m2 &amp;= LONG_MASK;
<a id="L5083" name="L5083"></a>5083         product = m0_hi*m1_hi + m2;
<a id="L5084" name="L5084"></a>5084         m2 = product &amp; LONG_MASK;
<a id="L5085" name="L5085"></a>5085         m3 = ((product&gt;&gt;&gt;32) + m3) &amp; LONG_MASK;
<a id="L5086" name="L5086"></a>5086         <strong class="reserved">final</strong> <strong class="reserved">long</strong> mHi = <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(m3,m2);
<a id="L5087" name="L5087"></a>5087         <strong class="reserved">final</strong> <strong class="reserved">long</strong> mLo = <a href="../S/1464.html#L4961" title="Defined at 4961 in src/java/math/BigDecimal.java.">make64</a>(m1,m0);
<a id="L5088" name="L5088"></a>5088         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> res = <a href="../S/1464.html#L5111" title="Defined at 5111 in src/java/math/BigDecimal.java.">doRound128</a>(mHi, mLo, rsign, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, mc);
<a id="L5089" name="L5089"></a>5089         <strong class="reserved">if</strong>(res!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5090" name="L5090"></a>5090             <strong class="reserved">return</strong> res;
<a id="L5091" name="L5091"></a>5091         <em class="brace">}</em>
<a id="L5092" name="L5092"></a>5092         res = <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>).<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(y*rsign), INFLATED, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, 0);
<a id="L5093" name="L5093"></a>5093         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(res,mc);
<a id="L5094" name="L5094"></a>5094     <em class="brace">}</em>
<a id="L5095" name="L5095"></a>5095 
<a id="L5096" name="L5096"></a>5096     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23406.html" title="Multiple referred from 4 places.">multiplyAndRound</a>(<strong class="reserved">long</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> y, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L5097" name="L5097"></a>5097         <strong class="reserved">if</strong>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>==0) <em class="brace">{</em>
<a id="L5098" name="L5098"></a>5098             <strong class="reserved">return</strong> <a href="../S/1464.html#L1245" title="Defined at 1245 in src/java/math/BigDecimal.java.">zeroValueOf</a>(<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5099" name="L5099"></a>5099         <em class="brace">}</em>
<a id="L5100" name="L5100"></a>5100         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(y.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>), <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, mc);
<a id="L5101" name="L5101"></a>5101     <em class="brace">}</em>
<a id="L5102" name="L5102"></a>5102 
<a id="L5103" name="L5103"></a>5103     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/23406.html" title="Multiple referred from 4 places.">multiplyAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> y, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L5104" name="L5104"></a>5104         <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(y), <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, mc);
<a id="L5105" name="L5105"></a>5105     <em class="brace">}</em>
<a id="L5106" name="L5106"></a>5106 
<div class="comment">
      rounds 128-bit value according <code>MathContext</code>
      returns null if result can't be repsented as compact BigDecimal.</div>
<a id="L5111" name="L5111"></a>5111     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/1464.html#L5088" title="Referred from 5088 in src/java/math/BigDecimal.java.">doRound128</a>(<strong class="reserved">long</strong> hi, <strong class="reserved">long</strong> lo, <strong class="reserved">int</strong> <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <a href="../S/1465.html#L56" title="Defined at 56 in src/java/math/MathContext.java.">MathContext</a> mc) <em class="brace">{</em>
<a id="L5112" name="L5112"></a>5112         <strong class="reserved">int</strong> mcp = mc.<a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L5113" name="L5113"></a>5113         <strong class="reserved">int</strong> <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>;
<a id="L5114" name="L5114"></a>5114         <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> res = <strong class="reserved">null</strong>;
<a id="L5115" name="L5115"></a>5115         <strong class="reserved">if</strong>(((<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a> = <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>(hi, lo) - mcp) &gt; 0)&amp;&amp;(<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)) <em class="brace">{</em>
<a id="L5116" name="L5116"></a>5116             <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> = <a href="../S/1464.html#L3940" title="Defined at 3940 in src/java/math/BigDecimal.java.">checkScaleNonZero</a>((<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> - <a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>);
<a id="L5117" name="L5117"></a>5117             res = <a href="../S/1464.html#L4799" title="Defined at 4799 in src/java/math/BigDecimal.java.">divideAndRound128</a>(hi, lo, LONG_TEN_POWERS_TABLE[<a href="../D/15230.html" title="Multiple defined in 5 places.">drop</a>], <a href="../D/34554.html" title="Multiple defined in 7 places.">sign</a>, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, mc.roundingMode.oldMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5118" name="L5118"></a>5118         <em class="brace">}</em>
<a id="L5119" name="L5119"></a>5119         <strong class="reserved">if</strong>(res!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5120" name="L5120"></a>5120             <strong class="reserved">return</strong> <a href="../D/15078.html" title="Multiple defined in 3 places.">doRound</a>(res,mc);
<a id="L5121" name="L5121"></a>5121         <em class="brace">}</em>
<a id="L5122" name="L5122"></a>5122         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L5123" name="L5123"></a>5123     <em class="brace">}</em>
<a id="L5124" name="L5124"></a>5124 
<a id="L5125" name="L5125"></a>5125     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong>[][] LONGLONG_TEN_POWERS_TABLE = <em class="brace">{</em>
<a id="L5126" name="L5126"></a>5126         <em class="brace">{</em>   0L, 0x8AC7230489E80000L <em class="brace">}</em>,  <em class="comment">//10^19</em>
<a id="L5127" name="L5127"></a>5127         <em class="brace">{</em>       0x5L, 0x6bc75e2d63100000L <em class="brace">}</em>,  <em class="comment">//10^20</em>
<a id="L5128" name="L5128"></a>5128         <em class="brace">{</em>       0x36L, 0x35c9adc5dea00000L <em class="brace">}</em>,  <em class="comment">//10^21</em>
<a id="L5129" name="L5129"></a>5129         <em class="brace">{</em>       0x21eL, 0x19e0c9bab2400000L  <em class="brace">}</em>,  <em class="comment">//10^22</em>
<a id="L5130" name="L5130"></a>5130         <em class="brace">{</em>       0x152dL, 0x02c7e14af6800000L  <em class="brace">}</em>,  <em class="comment">//10^23</em>
<a id="L5131" name="L5131"></a>5131         <em class="brace">{</em>       0xd3c2L, 0x1bcecceda1000000L  <em class="brace">}</em>,  <em class="comment">//10^24</em>
<a id="L5132" name="L5132"></a>5132         <em class="brace">{</em>       0x84595L, 0x161401484a000000L  <em class="brace">}</em>,  <em class="comment">//10^25</em>
<a id="L5133" name="L5133"></a>5133         <em class="brace">{</em>       0x52b7d2L, 0xdcc80cd2e4000000L  <em class="brace">}</em>,  <em class="comment">//10^26</em>
<a id="L5134" name="L5134"></a>5134         <em class="brace">{</em>       0x33b2e3cL, 0x9fd0803ce8000000L  <em class="brace">}</em>,  <em class="comment">//10^27</em>
<a id="L5135" name="L5135"></a>5135         <em class="brace">{</em>       0x204fce5eL, 0x3e25026110000000L  <em class="brace">}</em>,  <em class="comment">//10^28</em>
<a id="L5136" name="L5136"></a>5136         <em class="brace">{</em>       0x1431e0faeL, 0x6d7217caa0000000L  <em class="brace">}</em>,  <em class="comment">//10^29</em>
<a id="L5137" name="L5137"></a>5137         <em class="brace">{</em>       0xc9f2c9cd0L, 0x4674edea40000000L  <em class="brace">}</em>,  <em class="comment">//10^30</em>
<a id="L5138" name="L5138"></a>5138         <em class="brace">{</em>       0x7e37be2022L, 0xc0914b2680000000L  <em class="brace">}</em>,  <em class="comment">//10^31</em>
<a id="L5139" name="L5139"></a>5139         <em class="brace">{</em>       0x4ee2d6d415bL, 0x85acef8100000000L  <em class="brace">}</em>,  <em class="comment">//10^32</em>
<a id="L5140" name="L5140"></a>5140         <em class="brace">{</em>       0x314dc6448d93L, 0x38c15b0a00000000L  <em class="brace">}</em>,  <em class="comment">//10^33</em>
<a id="L5141" name="L5141"></a>5141         <em class="brace">{</em>       0x1ed09bead87c0L, 0x378d8e6400000000L  <em class="brace">}</em>,  <em class="comment">//10^34</em>
<a id="L5142" name="L5142"></a>5142         <em class="brace">{</em>       0x13426172c74d82L, 0x2b878fe800000000L  <em class="brace">}</em>,  <em class="comment">//10^35</em>
<a id="L5143" name="L5143"></a>5143         <em class="brace">{</em>       0xc097ce7bc90715L, 0xb34b9f1000000000L  <em class="brace">}</em>,  <em class="comment">//10^36</em>
<a id="L5144" name="L5144"></a>5144         <em class="brace">{</em>       0x785ee10d5da46d9L, 0x00f436a000000000L  <em class="brace">}</em>,  <em class="comment">//10^37</em>
<a id="L5145" name="L5145"></a>5145         <em class="brace">{</em>       0x4b3b4ca85a86c47aL, 0x098a224000000000L  <em class="brace">}</em>,  <em class="comment">//10^38</em>
<a id="L5146" name="L5146"></a>5146     <em class="brace">}</em>;
<a id="L5147" name="L5147"></a>5147 
<div class="comment">
      returns precision of 128-bit value</div>
<a id="L5151" name="L5151"></a>5151     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/24903.html" title="Multiple referred from 166 places.">precision</a>(<strong class="reserved">long</strong> hi, <strong class="reserved">long</strong> lo)<em class="brace">{</em>
<a id="L5152" name="L5152"></a>5152         <strong class="reserved">if</strong>(hi==0) <em class="brace">{</em>
<a id="L5153" name="L5153"></a>5153             <strong class="reserved">if</strong>(lo&gt;=0) <em class="brace">{</em>
<a id="L5154" name="L5154"></a>5154                 <strong class="reserved">return</strong> <a href="../S/1464.html#L3779" title="Defined at 3779 in src/java/math/BigDecimal.java.">longDigitLength</a>(lo);
<a id="L5155" name="L5155"></a>5155             <em class="brace">}</em>
<a id="L5156" name="L5156"></a>5156             <strong class="reserved">return</strong> (<a href="../S/1464.html#L4974" title="Defined at 4974 in src/java/math/BigDecimal.java.">unsignedLongCompareEq</a>(lo, LONGLONG_TEN_POWERS_TABLE[0][1])) ? 20 : 19;
<a id="L5157" name="L5157"></a>5157             <em class="comment">// 0x8AC7230489E80000L  = unsigned 2^19</em>
<a id="L5158" name="L5158"></a>5158         <em class="brace">}</em>
<a id="L5159" name="L5159"></a>5159         <strong class="reserved">int</strong> r = ((128 - <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/28378.html" title="Multiple defined in 2 places.">numberOfLeadingZeros</a>(hi) + 1) * 1233) &gt;&gt;&gt; 12;
<a id="L5160" name="L5160"></a>5160         <strong class="reserved">int</strong> idx = r-19;
<a id="L5161" name="L5161"></a>5161         <strong class="reserved">return</strong> (idx &gt;= LONGLONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || <a href="../S/1464.html#L5169" title="Defined at 5169 in src/java/math/BigDecimal.java.">longLongCompareMagnitude</a>(hi, lo,
<a id="L5162" name="L5162"></a>5162                                                                                     LONGLONG_TEN_POWERS_TABLE[idx][0], LONGLONG_TEN_POWERS_TABLE[idx][1])) ? r : r + 1;
<a id="L5163" name="L5163"></a>5163     <em class="brace">}</em>
<a id="L5164" name="L5164"></a>5164 
<div class="comment">
      returns true if 128 bit number <hi0,lo0> is less then <hi1,lo1>
      hi0 &amp; hi1 should be non-negative</hi1,lo1></hi0,lo0></div>
<a id="L5169" name="L5169"></a>5169     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/1464.html#L5161" title="Referred from 5161 in src/java/math/BigDecimal.java.">longLongCompareMagnitude</a>(<strong class="reserved">long</strong> hi0, <strong class="reserved">long</strong> lo0, <strong class="reserved">long</strong> hi1, <strong class="reserved">long</strong> lo1) <em class="brace">{</em>
<a id="L5170" name="L5170"></a>5170         <strong class="reserved">if</strong>(hi0!=hi1) <em class="brace">{</em>
<a id="L5171" name="L5171"></a>5171             <strong class="reserved">return</strong> hi0&lt;hi1;
<a id="L5172" name="L5172"></a>5172         <em class="brace">}</em>
<a id="L5173" name="L5173"></a>5173         <strong class="reserved">return</strong> (lo0+<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE) &lt;(lo1+<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MIN_VALUE);
<a id="L5174" name="L5174"></a>5174     <em class="brace">}</em>
<a id="L5175" name="L5175"></a>5175 
<a id="L5176" name="L5176"></a>5176     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<strong class="reserved">long</strong> dividend, <strong class="reserved">int</strong> dividendScale, <strong class="reserved">long</strong> divisor, <strong class="reserved">int</strong> divisorScale, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L5177" name="L5177"></a>5177         <strong class="reserved">if</strong> (<a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(dividend,(<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale) &gt; dividendScale) <em class="brace">{</em>
<a id="L5178" name="L5178"></a>5178             <strong class="reserved">int</strong> newScale = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale;
<a id="L5179" name="L5179"></a>5179             <strong class="reserved">int</strong> raise = newScale - dividendScale;
<a id="L5180" name="L5180"></a>5180             <strong class="reserved">if</strong>(raise&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L5181" name="L5181"></a>5181                 <strong class="reserved">long</strong> xs = dividend;
<a id="L5182" name="L5182"></a>5182                 <strong class="reserved">if</strong> ((xs = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(xs, raise)) != INFLATED) <em class="brace">{</em>
<a id="L5183" name="L5183"></a>5183                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(xs, divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5184" name="L5184"></a>5184                 <em class="brace">}</em>
<a id="L5185" name="L5185"></a>5185                 <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> q = <a href="../S/1464.html#L4761" title="Defined at 4761 in src/java/math/BigDecimal.java.">multiplyDivideAndRound</a>(LONG_TEN_POWERS_TABLE[raise], dividend, divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5186" name="L5186"></a>5186                 <strong class="reserved">if</strong>(q!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L5187" name="L5187"></a>5187                     <strong class="reserved">return</strong> q;
<a id="L5188" name="L5188"></a>5188                 <em class="brace">}</em>
<a id="L5189" name="L5189"></a>5189             <em class="brace">}</em>
<a id="L5190" name="L5190"></a>5190             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDividend = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(dividend, raise);
<a id="L5191" name="L5191"></a>5191             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledDividend, divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5192" name="L5192"></a>5192         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L5193" name="L5193"></a>5193             <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(divisor,(<strong class="reserved">long</strong>)dividendScale - <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5194" name="L5194"></a>5194             <strong class="reserved">int</strong> raise = newScale - divisorScale;
<a id="L5195" name="L5195"></a>5195             <strong class="reserved">if</strong>(raise&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L5196" name="L5196"></a>5196                 <strong class="reserved">long</strong> ys = divisor;
<a id="L5197" name="L5197"></a>5197                 <strong class="reserved">if</strong> ((ys = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, raise)) != INFLATED) <em class="brace">{</em>
<a id="L5198" name="L5198"></a>5198                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(dividend, ys, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5199" name="L5199"></a>5199                 <em class="brace">}</em>
<a id="L5200" name="L5200"></a>5200             <em class="brace">}</em>
<a id="L5201" name="L5201"></a>5201             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDivisor = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(divisor, raise);
<a id="L5202" name="L5202"></a>5202             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(dividend), scaledDivisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5203" name="L5203"></a>5203         <em class="brace">}</em>
<a id="L5204" name="L5204"></a>5204     <em class="brace">}</em>
<a id="L5205" name="L5205"></a>5205 
<a id="L5206" name="L5206"></a>5206     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> dividend, <strong class="reserved">int</strong> dividendScale, <strong class="reserved">long</strong> divisor, <strong class="reserved">int</strong> divisorScale, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L5207" name="L5207"></a>5207         <strong class="reserved">if</strong> (<a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(dividend,(<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale) &gt; dividendScale) <em class="brace">{</em>
<a id="L5208" name="L5208"></a>5208             <strong class="reserved">int</strong> newScale = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale;
<a id="L5209" name="L5209"></a>5209             <strong class="reserved">int</strong> raise = newScale - dividendScale;
<a id="L5210" name="L5210"></a>5210             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDividend = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(dividend, raise);
<a id="L5211" name="L5211"></a>5211             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledDividend, divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5212" name="L5212"></a>5212         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L5213" name="L5213"></a>5213             <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(divisor,(<strong class="reserved">long</strong>)dividendScale - <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5214" name="L5214"></a>5214             <strong class="reserved">int</strong> raise = newScale - divisorScale;
<a id="L5215" name="L5215"></a>5215             <strong class="reserved">if</strong>(raise&lt;LONG_TEN_POWERS_TABLE.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L5216" name="L5216"></a>5216                 <strong class="reserved">long</strong> ys = divisor;
<a id="L5217" name="L5217"></a>5217                 <strong class="reserved">if</strong> ((ys = <a href="../S/1464.html#L3652" title="Defined at 3652 in src/java/math/BigDecimal.java.">longMultiplyPowerTen</a>(ys, raise)) != INFLATED) <em class="brace">{</em>
<a id="L5218" name="L5218"></a>5218                     <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(dividend, ys, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5219" name="L5219"></a>5219                 <em class="brace">}</em>
<a id="L5220" name="L5220"></a>5220             <em class="brace">}</em>
<a id="L5221" name="L5221"></a>5221             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDivisor = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(divisor, raise);
<a id="L5222" name="L5222"></a>5222             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(dividend, scaledDivisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5223" name="L5223"></a>5223         <em class="brace">}</em>
<a id="L5224" name="L5224"></a>5224     <em class="brace">}</em>
<a id="L5225" name="L5225"></a>5225 
<a id="L5226" name="L5226"></a>5226     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<strong class="reserved">long</strong> dividend, <strong class="reserved">int</strong> dividendScale, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> divisor, <strong class="reserved">int</strong> divisorScale, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L5227" name="L5227"></a>5227         <strong class="reserved">if</strong> (<a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(dividend,(<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale) &gt; dividendScale) <em class="brace">{</em>
<a id="L5228" name="L5228"></a>5228             <strong class="reserved">int</strong> newScale = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale;
<a id="L5229" name="L5229"></a>5229             <strong class="reserved">int</strong> raise = newScale - dividendScale;
<a id="L5230" name="L5230"></a>5230             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDividend = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(dividend, raise);
<a id="L5231" name="L5231"></a>5231             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledDividend, divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5232" name="L5232"></a>5232         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L5233" name="L5233"></a>5233             <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(divisor,(<strong class="reserved">long</strong>)dividendScale - <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5234" name="L5234"></a>5234             <strong class="reserved">int</strong> raise = newScale - divisorScale;
<a id="L5235" name="L5235"></a>5235             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDivisor = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(divisor, raise);
<a id="L5236" name="L5236"></a>5236             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(dividend), scaledDivisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5237" name="L5237"></a>5237         <em class="brace">}</em>
<a id="L5238" name="L5238"></a>5238     <em class="brace">}</em>
<a id="L5239" name="L5239"></a>5239 
<a id="L5240" name="L5240"></a>5240     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/13351.html" title="Multiple referred from 41 places.">divide</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> dividend, <strong class="reserved">int</strong> dividendScale, <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> divisor, <strong class="reserved">int</strong> divisorScale, <strong class="reserved">int</strong> <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, <strong class="reserved">int</strong> roundingMode) <em class="brace">{</em>
<a id="L5241" name="L5241"></a>5241         <strong class="reserved">if</strong> (<a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(dividend,(<strong class="reserved">long</strong>)<a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale) &gt; dividendScale) <em class="brace">{</em>
<a id="L5242" name="L5242"></a>5242             <strong class="reserved">int</strong> newScale = <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a> + divisorScale;
<a id="L5243" name="L5243"></a>5243             <strong class="reserved">int</strong> raise = newScale - dividendScale;
<a id="L5244" name="L5244"></a>5244             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDividend = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(dividend, raise);
<a id="L5245" name="L5245"></a>5245             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(scaledDividend, divisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5246" name="L5246"></a>5246         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L5247" name="L5247"></a>5247             <strong class="reserved">int</strong> newScale = <a href="../D/12642.html" title="Multiple defined in 3 places.">checkScale</a>(divisor,(<strong class="reserved">long</strong>)dividendScale - <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5248" name="L5248"></a>5248             <strong class="reserved">int</strong> raise = newScale - divisorScale;
<a id="L5249" name="L5249"></a>5249             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> scaledDivisor = <a href="../D/11836.html" title="Multiple defined in 3 places.">bigMultiplyPowerTen</a>(divisor, raise);
<a id="L5250" name="L5250"></a>5250             <strong class="reserved">return</strong> <a href="../D/14991.html" title="Multiple defined in 6 places.">divideAndRound</a>(dividend, scaledDivisor, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>, roundingMode, <a href="../D/31554.html" title="Multiple defined in 10 places.">scale</a>);
<a id="L5251" name="L5251"></a>5251         <em class="brace">}</em>
<a id="L5252" name="L5252"></a>5252     <em class="brace">}</em>
<a id="L5253" name="L5253"></a>5253 
<a id="L5254" name="L5254"></a>5254 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L606">[^]</a><a href="#L5240">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
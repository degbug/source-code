<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L94">[^]</a><a href="#L691">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L94" title="Defined at 94.">inInnerClass</a></li>
<li><a href="#L101" title="Defined at 101.">getParentClosure</a></li>
<li><a href="#L109" title="Defined at 109.">getInnerClassName</a></li>
<li><a href="#L116" title="Defined at 116.">addVariable</a></li>
<li><a href="#L130" title="Defined at 130.">setInnerClassName</a></li>
<li><a href="#L137" title="Defined at 137.">parseContents</a></li>
<li><a href="#L183" title="Defined at 183.">typeCheck</a></li>
<li><a href="#L202" title="Defined at 202.">translateSortType</a></li>
<li><a href="#L207" title="Defined at 207.">translateSortOrder</a></li>
<li><a href="#L212" title="Defined at 212.">translateCaseOrder</a></li>
<li><a href="#L217" title="Defined at 217.">translateLang</a></li>
<li><a href="#L229" title="Defined at 229.">translateSelect</a></li>
<li><a href="#L237" title="Defined at 237.">translate</a></li>
<li><a href="#L246" title="Defined at 246.">translateSortIterator</a></li>
<li><a href="#L315" title="Defined at 315.">compileSortRecordFactory</a></li>
<li><a href="#L458" title="Defined at 458.">compileSortRecordFactory</a></li>
<li><a href="#L603" title="Defined at 603.">compileSortRecord</a></li>
<li><a href="#L663" title="Defined at 663.">compileInit</a></li>
<li><a href="#L691" title="Defined at 691.">compileExtract</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001-2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: Sort.java,v 1.2.4.1 2005/09/12 11:08:12 pvedula Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.xsltc.compiler;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.text.Collator;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.NoSuchElementException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.StringTokenizer;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.Vector;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.classfile.Field;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.classfile.Method;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ALOAD;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ANEWARRAY;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ASTORE;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.CHECKCAST;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ConstantPoolGen;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.GETFIELD;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ICONST;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ILOAD;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKEINTERFACE;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKESPECIAL;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKESTATIC;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKEVIRTUAL;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.InstructionHandle;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.InstructionList;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.LocalVariableGen;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.NEW;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.NOP;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.PUSH;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.PUTFIELD;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.TABLESWITCH;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.ClassGenerator;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.CompareGenerator;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.ErrorMsg;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.IntType;
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.MethodGenerator;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.NodeSortRecordFactGenerator;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.NodeSortRecordGenerator;
<a id="L61" name="L61"></a>  61 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.StringType;
<a id="L62" name="L62"></a>  62 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.Type;
<a id="L63" name="L63"></a>  63 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.TypeCheckError;
<a id="L64" name="L64"></a>  64 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.Util;
<a id="L65" name="L65"></a>  65 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.Axis;
<a id="L66" name="L66"></a>  66 
<a id="L67" name="L67"></a>  67 
<div class="comment">
  @author Jacek Ambroziak
  @author Santiago Pericas-Geertsen
  @author Morten Jorgensen</div>
<a id="L73" name="L73"></a>  73 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7477.html" title="Multiple referred from 15 places.">Sort</a> <strong class="reserved">extends</strong> <a href="../D/4259.html" title="Multiple defined in 2 places.">Instruction</a> <strong class="reserved">implements</strong> <a href="../D/1577.html" title="Multiple defined in 2 places.">Closure</a> <em class="brace">{</em>
<a id="L74" name="L74"></a>  74 
<a id="L75" name="L75"></a>  75     <strong class="reserved">private</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>     _select;
<a id="L76" name="L76"></a>  76     <strong class="reserved">private</strong> <a href="../D/593.html" title="Multiple defined in 2 places.">AttributeValue</a> _order;
<a id="L77" name="L77"></a>  77     <strong class="reserved">private</strong> <a href="../D/593.html" title="Multiple defined in 2 places.">AttributeValue</a> _caseOrder;
<a id="L78" name="L78"></a>  78     <strong class="reserved">private</strong> <a href="../D/593.html" title="Multiple defined in 2 places.">AttributeValue</a> _dataType;
<a id="L79" name="L79"></a>  79     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _lang; <em class="comment">// bug! see 26869</em>
<a id="L80" name="L80"></a>  80 
<a id="L81" name="L81"></a>  81     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>         _data = <strong class="reserved">null</strong>;
<a id="L82" name="L82"></a>  82 
<a id="L83" name="L83"></a>  83 
<a id="L84" name="L84"></a>  84     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _className = <strong class="reserved">null</strong>;
<a id="L85" name="L85"></a>  85     <strong class="reserved">private</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> _closureVars = <strong class="reserved">null</strong>;
<a id="L86" name="L86"></a>  86     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _needsSortRecordFactory = <strong class="reserved">false</strong>;
<a id="L87" name="L87"></a>  87 
<a id="L88" name="L88"></a>  88     <em class="comment">// -- Begin Closure interface --------------------</em>
<a id="L89" name="L89"></a>  89 
<div class="comment">
      Returns true if this closure is compiled in an inner class (i.e.
      if this is a real closure).</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20455.html" title="Multiple referred from 3 places.">inInnerClass</a>() <em class="brace">{</em>
<a id="L95" name="L95"></a>  95         <strong class="reserved">return</strong> (_className != <strong class="reserved">null</strong>);
<a id="L96" name="L96"></a>  96     <em class="brace">}</em>
<a id="L97" name="L97"></a>  97 
<div class="comment">
      Returns a reference to its parent closure or null if outermost.</div>
<a id="L101" name="L101"></a> 101     <strong class="reserved">public</strong> <a href="../D/1577.html" title="Multiple defined in 2 places.">Closure</a> <a href="../R/18272.html" title="Multiple referred from 4 places.">getParentClosure</a>() <em class="brace">{</em>
<a id="L102" name="L102"></a> 102         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L103" name="L103"></a> 103     <em class="brace">}</em>
<a id="L104" name="L104"></a> 104 
<div class="comment">
      Returns the name of the auxiliary class or null if this predicate
      is compiled inside the Translet.</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17084.html" title="Multiple referred from 3 places.">getInnerClassName</a>() <em class="brace">{</em>
<a id="L110" name="L110"></a> 110         <strong class="reserved">return</strong> _className;
<a id="L111" name="L111"></a> 111     <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<div class="comment">
      Add new variable to the closure.</div>
<a id="L116" name="L116"></a> 116     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10033.html" title="Multiple referred from 7 places.">addVariable</a>(<a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a> variableRef) <em class="brace">{</em>
<a id="L117" name="L117"></a> 117         <strong class="reserved">if</strong> (_closureVars == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L118" name="L118"></a> 118             _closureVars = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>();
<a id="L119" name="L119"></a> 119         <em class="brace">}</em>
<a id="L120" name="L120"></a> 120 
<a id="L121" name="L121"></a> 121         <em class="comment">// Only one reference per variable</em>
<a id="L122" name="L122"></a> 122         <strong class="reserved">if</strong> (!_closureVars.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(variableRef)) <em class="brace">{</em>
<a id="L123" name="L123"></a> 123             _closureVars.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(variableRef);
<a id="L124" name="L124"></a> 124             _needsSortRecordFactory = <strong class="reserved">true</strong>;
<a id="L125" name="L125"></a> 125         <em class="brace">}</em>
<a id="L126" name="L126"></a> 126     <em class="brace">}</em>
<a id="L127" name="L127"></a> 127 
<a id="L128" name="L128"></a> 128     <em class="comment">// -- End Closure interface ----------------------</em>
<a id="L129" name="L129"></a> 129 
<a id="L130" name="L130"></a> 130     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6075.html#L628" title="Referred from 628 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">setInnerClassName</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>) <em class="brace">{</em>
<a id="L131" name="L131"></a> 131         _className = <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>;
<a id="L132" name="L132"></a> 132     <em class="brace">}</em>
<a id="L133" name="L133"></a> 133 
<div class="comment">
      Parse the attributes of the xsl:sort element</div>
<a id="L137" name="L137"></a> 137     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24531.html" title="Multiple referred from 12 places.">parseContents</a>(<a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> parser) <em class="brace">{</em>
<a id="L138" name="L138"></a> 138 
<a id="L139" name="L139"></a> 139         <strong class="reserved">final</strong> <a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L140" name="L140"></a> 140         <strong class="reserved">if</strong> (!(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> <strong class="reserved">instanceof</strong> <a href="../S/6082.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/ApplyTemplates.java.">ApplyTemplates</a>) &amp;&amp;
<a id="L141" name="L141"></a> 141             !(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> <strong class="reserved">instanceof</strong> <a href="../S/6238.html#L51" title="Defined at 51 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/ForEach.java.">ForEach</a>)) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142             <a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<strong class="reserved">this</strong>, parser, <a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>.STRAY_SORT_ERR, <strong class="reserved">null</strong>);
<a id="L143" name="L143"></a> 143             <strong class="reserved">return</strong>;
<a id="L144" name="L144"></a> 144         <em class="brace">}</em>
<a id="L145" name="L145"></a> 145 
<a id="L146" name="L146"></a> 146         <em class="comment">// Parse the select expression (node string value if no expression)</em>
<a id="L147" name="L147"></a> 147         _select = parser.<a href="../D/29132.html" title="Multiple defined in 3 places.">parseExpression</a>(<strong class="reserved">this</strong>, "select", "string(.)");
<a id="L148" name="L148"></a> 148 
<a id="L149" name="L149"></a> 149         <em class="comment">// Get the sort order; default is 'ascending'</em>
<a id="L150" name="L150"></a> 150         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("order");
<a id="L151" name="L151"></a> 151         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = "ascending";
<a id="L152" name="L152"></a> 152         _order = <a href="../D/593.html" title="Multiple defined in 2 places.">AttributeValue</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>(<strong class="reserved">this</strong>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, parser);
<a id="L153" name="L153"></a> 153 
<a id="L154" name="L154"></a> 154         <em class="comment">// Get the sort data type; default is text</em>
<a id="L155" name="L155"></a> 155         <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("data-type");
<a id="L156" name="L156"></a> 156         <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L157" name="L157"></a> 157             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L158" name="L158"></a> 158                 <strong class="reserved">final</strong> <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = _select.<a href="../D/35754.html" title="Multiple defined in 91 places.">typeCheck</a>(parser.<a href="../D/22882.html" title="Multiple defined in 5 places.">getSymbolTable</a>());
<a id="L159" name="L159"></a> 159                 <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> <strong class="reserved">instanceof</strong> <a href="../S/6122.html#L56" title="Defined at 56 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/IntType.java.">IntType</a>)
<a id="L160" name="L160"></a> 160                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = "number";
<a id="L161" name="L161"></a> 161                 <strong class="reserved">else</strong>
<a id="L162" name="L162"></a> 162                     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = "text";
<a id="L163" name="L163"></a> 163             <em class="brace">}</em>
<a id="L164" name="L164"></a> 164             <strong class="reserved">catch</strong> (<a href="../S/6136.html#L32" title="Defined at 32 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/TypeCheckError.java.">TypeCheckError</a> e) <em class="brace">{</em>
<a id="L165" name="L165"></a> 165                 <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = "text";
<a id="L166" name="L166"></a> 166             <em class="brace">}</em>
<a id="L167" name="L167"></a> 167         <em class="brace">}</em>
<a id="L168" name="L168"></a> 168         _dataType = <a href="../D/593.html" title="Multiple defined in 2 places.">AttributeValue</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>(<strong class="reserved">this</strong>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, parser);
<a id="L169" name="L169"></a> 169 
<a id="L170" name="L170"></a> 170          _lang =  <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("lang"); <em class="comment">// bug! see 26869</em>
<a id="L171" name="L171"></a> 171   <em class="comment">// val =  getAttribute("lang");</em>
<a id="L172" name="L172"></a> 172   <em class="comment">// _lang = AttributeValue.create(this, val, parser);</em>
<a id="L173" name="L173"></a> 173         <em class="comment">// Get the case order; default is language dependant</em>
<a id="L174" name="L174"></a> 174     <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("case-order");
<a id="L175" name="L175"></a> 175     _caseOrder = <a href="../D/593.html" title="Multiple defined in 2 places.">AttributeValue</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>(<strong class="reserved">this</strong>, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, parser);
<a id="L176" name="L176"></a> 176 
<a id="L177" name="L177"></a> 177     <em class="brace">}</em>
<a id="L178" name="L178"></a> 178 
<div class="comment">
      Run type checks on the attributes; expression must return a string
      which we will use as a sort key</div>
<a id="L183" name="L183"></a> 183     <strong class="reserved">public</strong> <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> <a href="../R/29573.html" title="Multiple referred from 123 places.">typeCheck</a>(<a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> stable) <strong class="reserved">throws</strong> <a href="../S/6136.html#L32" title="Defined at 32 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/TypeCheckError.java.">TypeCheckError</a> <em class="brace">{</em>
<a id="L184" name="L184"></a> 184         <strong class="reserved">final</strong> <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> tselect = _select.<a href="../D/35754.html" title="Multiple defined in 91 places.">typeCheck</a>(stable);
<a id="L185" name="L185"></a> 185 
<a id="L186" name="L186"></a> 186         <em class="comment">// If the sort data-type is not set we use the natural data-type</em>
<a id="L187" name="L187"></a> 187         <em class="comment">// of the data we will sort</em>
<a id="L188" name="L188"></a> 188         <strong class="reserved">if</strong> (!(tselect <strong class="reserved">instanceof</strong> <a href="../S/6108.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/StringType.java.">StringType</a>)) <em class="brace">{</em>
<a id="L189" name="L189"></a> 189             _select = <strong class="reserved">new</strong> <a href="../S/6169.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/CastExpr.java.">CastExpr</a>(_select, <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>);
<a id="L190" name="L190"></a> 190         <em class="brace">}</em>
<a id="L191" name="L191"></a> 191 
<a id="L192" name="L192"></a> 192         _order.<a href="../D/35754.html" title="Multiple defined in 91 places.">typeCheck</a>(stable);
<a id="L193" name="L193"></a> 193         _caseOrder.<a href="../D/35754.html" title="Multiple defined in 91 places.">typeCheck</a>(stable);
<a id="L194" name="L194"></a> 194         _dataType.<a href="../D/35754.html" title="Multiple defined in 91 places.">typeCheck</a>(stable);
<a id="L195" name="L195"></a> 195         <strong class="reserved">return</strong> <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>;
<a id="L196" name="L196"></a> 196     <em class="brace">}</em>
<a id="L197" name="L197"></a> 197 
<div class="comment">
      These two methods are needed in the static methods that compile the
      overloaded NodeSortRecord.compareType() and NodeSortRecord.sortOrder()</div>
<a id="L202" name="L202"></a> 202     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6075.html#L373" title="Referred from 373 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateSortType</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L203" name="L203"></a> 203                                   <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L204" name="L204"></a> 204         _dataType.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, methodGen);
<a id="L205" name="L205"></a> 205     <em class="brace">}</em>
<a id="L206" name="L206"></a> 206 
<a id="L207" name="L207"></a> 207     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6075.html#L358" title="Referred from 358 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateSortOrder</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L208" name="L208"></a> 208                                    <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209         _order.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, methodGen);
<a id="L210" name="L210"></a> 210     <em class="brace">}</em>
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212      <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6075.html#L403" title="Referred from 403 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateCaseOrder</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L213" name="L213"></a> 213                    <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L214" name="L214"></a> 214     _caseOrder.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, methodGen);
<a id="L215" name="L215"></a> 215     <em class="brace">}</em>
<a id="L216" name="L216"></a> 216 
<a id="L217" name="L217"></a> 217     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6075.html#L388" title="Referred from 388 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateLang</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L218" name="L218"></a> 218                    <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L219" name="L219"></a> 219     <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L220" name="L220"></a> 220     <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = methodGen.<a href="../D/19776.html" title="Multiple defined in 7 places.">getInstructionList</a>();
<a id="L221" name="L221"></a> 221     il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, _lang)); <em class="comment">// bug! see 26869</em>
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<div class="comment">
      This method compiles code for the select expression for this
      xsl:sort element. The method is called from the static code-generating
      methods in this class.</div>
<a id="L229" name="L229"></a> 229     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6075.html#L735" title="Referred from 735 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateSelect</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L230" name="L230"></a> 230                                 <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L231" name="L231"></a> 231         _select.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen,methodGen);
<a id="L232" name="L232"></a> 232     <em class="brace">}</em>
<a id="L233" name="L233"></a> 233 
<div class="comment">
      This method should not produce any code</div>
<a id="L237" name="L237"></a> 237     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29432.html" title="Multiple referred from 503 places.">translate</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen, <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L238" name="L238"></a> 238         <em class="comment">// empty</em>
<a id="L239" name="L239"></a> 239     <em class="brace">}</em>
<a id="L240" name="L240"></a> 240 
<div class="comment">
      Compiles code that instantiates a SortingIterator object.
      This object's constructor needs referencdes to the current iterator
      and a node sort record producing objects as its parameters.</div>
<a id="L246" name="L246"></a> 246     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/29460.html" title="Multiple referred from 2 places.">translateSortIterator</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L247" name="L247"></a> 247                                       <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen,
<a id="L248" name="L248"></a> 248                                       <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/6263.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/lib/ExsltCommon.java.">nodeSet</a>,
<a id="L249" name="L249"></a> 249                                       <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> sortObjects)
<a id="L250" name="L250"></a> 250     <em class="brace">{</em>
<a id="L251" name="L251"></a> 251         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L252" name="L252"></a> 252         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = methodGen.<a href="../D/19776.html" title="Multiple defined in 7 places.">getInstructionList</a>();
<a id="L253" name="L253"></a> 253 
<a id="L254" name="L254"></a> 254         <em class="comment">// SortingIterator.SortingIterator(NodeIterator,NodeSortRecordFactory);</em>
<a id="L255" name="L255"></a> 255         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a> = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(SORT_ITERATOR, "&lt;init&gt;",
<a id="L256" name="L256"></a> 256                                           "("
<a id="L257" name="L257"></a> 257                                           + NODE_ITERATOR_SIG
<a id="L258" name="L258"></a> 258                                           + NODE_SORT_FACTORY_SIG
<a id="L259" name="L259"></a> 259                                           + ")V");
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261         <em class="comment">// Backwards branches are prohibited if an uninitialized object is</em>
<a id="L262" name="L262"></a> 262         <em class="comment">// on the stack by section 4.9.4 of the JVM Specification, 2nd Ed.</em>
<a id="L263" name="L263"></a> 263         <em class="comment">// We don't know whether this code might contain backwards branches</em>
<a id="L264" name="L264"></a> 264         <em class="comment">// so we mustn't create the new object until after we've created</em>
<a id="L265" name="L265"></a> 265         <em class="comment">// the suspect arguments to its constructor.  Instead we calculate</em>
<a id="L266" name="L266"></a> 266         <em class="comment">// the values of the arguments to the constructor first, store them</em>
<a id="L267" name="L267"></a> 267         <em class="comment">// in temporary variables, create the object and reload the</em>
<a id="L268" name="L268"></a> 268         <em class="comment">// arguments from the temporaries to avoid the problem.</em>
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270         <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> nodesTemp =
<a id="L271" name="L271"></a> 271             methodGen.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("sort_tmp1",
<a id="L272" name="L272"></a> 272                                        <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(NODE_ITERATOR_SIG),
<a id="L273" name="L273"></a> 273                                        <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L274" name="L274"></a> 274 
<a id="L275" name="L275"></a> 275         <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> sortRecordFactoryTemp =
<a id="L276" name="L276"></a> 276             methodGen.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("sort_tmp2",
<a id="L277" name="L277"></a> 277                                       <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(NODE_SORT_FACTORY_SIG),
<a id="L278" name="L278"></a> 278                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L279" name="L279"></a> 279 
<a id="L280" name="L280"></a> 280         <em class="comment">// Get the current node iterator</em>
<a id="L281" name="L281"></a> 281         <strong class="reserved">if</strong> (<a href="../S/6263.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/lib/ExsltCommon.java.">nodeSet</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>  <em class="comment">// apply-templates default</em>
<a id="L282" name="L282"></a> 282             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = cpg.<a href="../D/10875.html" title="Multiple defined in 2 places.">addInterfaceMethodref</a>(DOM_INTF,
<a id="L283" name="L283"></a> 283                                                            "getAxisIterator",
<a id="L284" name="L284"></a> 284                                                            "(I)"+
<a id="L285" name="L285"></a> 285                                                            NODE_ITERATOR_SIG);
<a id="L286" name="L286"></a> 286             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(methodGen.<a href="../D/26912.html" title="Multiple defined in 4 places.">loadDOM</a>());
<a id="L287" name="L287"></a> 287             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD));
<a id="L288" name="L288"></a> 288             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4624.html#L73" title="Defined at 73 in src/com/sun/org/apache/bcel/internal/generic/INVOKEINTERFACE.java.">INVOKEINTERFACE</a>(<a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>, 2));
<a id="L289" name="L289"></a> 289         <em class="brace">}</em>
<a id="L290" name="L290"></a> 290         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L291" name="L291"></a> 291             <a href="../S/6263.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/lib/ExsltCommon.java.">nodeSet</a>.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, methodGen);
<a id="L292" name="L292"></a> 292         <em class="brace">}</em>
<a id="L293" name="L293"></a> 293 
<a id="L294" name="L294"></a> 294         nodesTemp.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4659.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ASTORE.java.">ASTORE</a>(nodesTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296         <em class="comment">// Compile the code for the NodeSortRecord producing class and pass</em>
<a id="L297" name="L297"></a> 297         <em class="comment">// that as the last argument to the SortingIterator constructor.</em>
<a id="L298" name="L298"></a> 298         <a href="../D/13108.html" title="Multiple defined in 2 places.">compileSortRecordFactory</a>(sortObjects, classGen, methodGen);
<a id="L299" name="L299"></a> 299         sortRecordFactoryTemp.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(
<a id="L300" name="L300"></a> 300                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4659.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ASTORE.java.">ASTORE</a>(sortRecordFactoryTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L301" name="L301"></a> 301 
<a id="L302" name="L302"></a> 302         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4824.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/NEW.java.">NEW</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(SORT_ITERATOR)));
<a id="L303" name="L303"></a> 303         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L304" name="L304"></a> 304         nodesTemp.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(nodesTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L305" name="L305"></a> 305         sortRecordFactoryTemp.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(
<a id="L306" name="L306"></a> 306                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(sortRecordFactoryTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L307" name="L307"></a> 307         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>));
<a id="L308" name="L308"></a> 308     <em class="brace">}</em>
<a id="L309" name="L309"></a> 309 
<a id="L310" name="L310"></a> 310 
<div class="comment">
      Compiles code that instantiates a NodeSortRecordFactory object which
      will produce NodeSortRecord objects of a specific type.</div>
<a id="L315" name="L315"></a> 315     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11760.html" title="Multiple referred from 2 places.">compileSortRecordFactory</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> sortObjects,
<a id="L316" name="L316"></a> 316         <a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen, <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen)
<a id="L317" name="L317"></a> 317     <em class="brace">{</em>
<a id="L318" name="L318"></a> 318         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sortRecordClass =
<a id="L319" name="L319"></a> 319             <a href="../S/6075.html#L603" title="Defined at 603 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">compileSortRecord</a>(sortObjects, classGen, methodGen);
<a id="L320" name="L320"></a> 320 
<a id="L321" name="L321"></a> 321         <strong class="reserved">boolean</strong> needsSortRecordFactory = <strong class="reserved">false</strong>;
<a id="L322" name="L322"></a> 322         <strong class="reserved">final</strong> <strong class="reserved">int</strong> nsorts = sortObjects.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L323" name="L323"></a> 323         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nsorts; i++) <em class="brace">{</em>
<a id="L324" name="L324"></a> 324             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>) sortObjects.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L325" name="L325"></a> 325             needsSortRecordFactory |= <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._needsSortRecordFactory;
<a id="L326" name="L326"></a> 326         <em class="brace">}</em>
<a id="L327" name="L327"></a> 327 
<a id="L328" name="L328"></a> 328         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sortRecordFactoryClass = NODE_SORT_FACTORY;
<a id="L329" name="L329"></a> 329         <strong class="reserved">if</strong> (needsSortRecordFactory) <em class="brace">{</em>
<a id="L330" name="L330"></a> 330             sortRecordFactoryClass =
<a id="L331" name="L331"></a> 331                 <a href="../D/13108.html" title="Multiple defined in 2 places.">compileSortRecordFactory</a>(sortObjects, classGen, methodGen,
<a id="L332" name="L332"></a> 332                     sortRecordClass);
<a id="L333" name="L333"></a> 333         <em class="brace">}</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L336" name="L336"></a> 336         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = methodGen.<a href="../D/19776.html" title="Multiple defined in 7 places.">getInstructionList</a>();
<a id="L337" name="L337"></a> 337 
<a id="L338" name="L338"></a> 338         <em class="comment">// Backwards branches are prohibited if an uninitialized object is</em>
<a id="L339" name="L339"></a> 339         <em class="comment">// on the stack by section 4.9.4 of the JVM Specification, 2nd Ed.</em>
<a id="L340" name="L340"></a> 340         <em class="comment">// We don't know whether this code might contain backwards branches</em>
<a id="L341" name="L341"></a> 341         <em class="comment">// so we mustn't create the new object until after we've created</em>
<a id="L342" name="L342"></a> 342         <em class="comment">// the suspect arguments to its constructor.  Instead we calculate</em>
<a id="L343" name="L343"></a> 343         <em class="comment">// the values of the arguments to the constructor first, store them</em>
<a id="L344" name="L344"></a> 344         <em class="comment">// in temporary variables, create the object and reload the</em>
<a id="L345" name="L345"></a> 345         <em class="comment">// arguments from the temporaries to avoid the problem.</em>
<a id="L346" name="L346"></a> 346 
<a id="L347" name="L347"></a> 347         <em class="comment">// Compile code that initializes the static _sortOrder</em>
<a id="L348" name="L348"></a> 348         <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> sortOrderTemp
<a id="L349" name="L349"></a> 349                  = methodGen.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("sort_order_tmp",
<a id="L350" name="L350"></a> 350                                       <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG),
<a id="L351" name="L351"></a> 351                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L352" name="L352"></a> 352         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, nsorts));
<a id="L353" name="L353"></a> 353         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L354" name="L354"></a> 354         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> level = 0; level &lt; nsorts; level++) <em class="brace">{</em>
<a id="L355" name="L355"></a> 355             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(level);
<a id="L356" name="L356"></a> 356             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L357" name="L357"></a> 357             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, level));
<a id="L358" name="L358"></a> 358             <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>.<a href="../S/6075.html#L207" title="Defined at 207 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateSortOrder</a>(classGen, methodGen);
<a id="L359" name="L359"></a> 359             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L360" name="L360"></a> 360         <em class="brace">}</em>
<a id="L361" name="L361"></a> 361         sortOrderTemp.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4659.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ASTORE.java.">ASTORE</a>(sortOrderTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363         <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> sortTypeTemp
<a id="L364" name="L364"></a> 364                  = methodGen.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("sort_type_tmp",
<a id="L365" name="L365"></a> 365                                       <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG),
<a id="L366" name="L366"></a> 366                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L367" name="L367"></a> 367         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, nsorts));
<a id="L368" name="L368"></a> 368         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L369" name="L369"></a> 369         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> level = 0; level &lt; nsorts; level++) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(level);
<a id="L371" name="L371"></a> 371             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L372" name="L372"></a> 372             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, level));
<a id="L373" name="L373"></a> 373             <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>.<a href="../S/6075.html#L202" title="Defined at 202 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateSortType</a>(classGen, methodGen);
<a id="L374" name="L374"></a> 374             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L375" name="L375"></a> 375         <em class="brace">}</em>
<a id="L376" name="L376"></a> 376         sortTypeTemp.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4659.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ASTORE.java.">ASTORE</a>(sortTypeTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L377" name="L377"></a> 377 
<a id="L378" name="L378"></a> 378         <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> sortLangTemp
<a id="L379" name="L379"></a> 379                  = methodGen.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("sort_lang_tmp",
<a id="L380" name="L380"></a> 380                                       <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG),
<a id="L381" name="L381"></a> 381                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L382" name="L382"></a> 382         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, nsorts));
<a id="L383" name="L383"></a> 383         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L384" name="L384"></a> 384         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> level = 0; level &lt; nsorts; level++) <em class="brace">{</em>
<a id="L385" name="L385"></a> 385               <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(level);
<a id="L386" name="L386"></a> 386               il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L387" name="L387"></a> 387               il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, level));
<a id="L388" name="L388"></a> 388               <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>.<a href="../S/6075.html#L217" title="Defined at 217 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateLang</a>(classGen, methodGen);
<a id="L389" name="L389"></a> 389               il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L390" name="L390"></a> 390         <em class="brace">}</em>
<a id="L391" name="L391"></a> 391         sortLangTemp.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4659.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ASTORE.java.">ASTORE</a>(sortLangTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393         <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> sortCaseOrderTemp
<a id="L394" name="L394"></a> 394                  = methodGen.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("sort_case_order_tmp",
<a id="L395" name="L395"></a> 395                                       <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG),
<a id="L396" name="L396"></a> 396                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L397" name="L397"></a> 397         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, nsorts));
<a id="L398" name="L398"></a> 398         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L399" name="L399"></a> 399         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> level = 0; level &lt; nsorts; level++) <em class="brace">{</em>
<a id="L400" name="L400"></a> 400             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(level);
<a id="L401" name="L401"></a> 401             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L402" name="L402"></a> 402             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, level));
<a id="L403" name="L403"></a> 403             <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>.<a href="../S/6075.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateCaseOrder</a>(classGen, methodGen);
<a id="L404" name="L404"></a> 404             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406         sortCaseOrderTemp.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(
<a id="L407" name="L407"></a> 407                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4659.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ASTORE.java.">ASTORE</a>(sortCaseOrderTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L408" name="L408"></a> 408 
<a id="L409" name="L409"></a> 409         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4824.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/NEW.java.">NEW</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(sortRecordFactoryClass)));
<a id="L410" name="L410"></a> 410         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L411" name="L411"></a> 411         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(methodGen.<a href="../D/26912.html" title="Multiple defined in 4 places.">loadDOM</a>());
<a id="L412" name="L412"></a> 412         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, sortRecordClass));
<a id="L413" name="L413"></a> 413         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L414" name="L414"></a> 414 
<a id="L415" name="L415"></a> 415         sortOrderTemp.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(sortOrderTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L416" name="L416"></a> 416         sortTypeTemp.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(sortTypeTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L417" name="L417"></a> 417         sortLangTemp.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(sortLangTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L418" name="L418"></a> 418         sortCaseOrderTemp.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(
<a id="L419" name="L419"></a> 419                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(sortCaseOrderTemp.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L420" name="L420"></a> 420 
<a id="L421" name="L421"></a> 421         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(
<a id="L422" name="L422"></a> 422             cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(sortRecordFactoryClass, "&lt;init&gt;",
<a id="L423" name="L423"></a> 423                 "(" + DOM_INTF_SIG
<a id="L424" name="L424"></a> 424                     + STRING_SIG
<a id="L425" name="L425"></a> 425                     + TRANSLET_INTF_SIG
<a id="L426" name="L426"></a> 426                     + "[" + STRING_SIG
<a id="L427" name="L427"></a> 427                     + "[" + STRING_SIG
<a id="L428" name="L428"></a> 428                     + "[" + STRING_SIG
<a id="L429" name="L429"></a> 429                     + "[" + STRING_SIG + ")V")));
<a id="L430" name="L430"></a> 430 
<a id="L431" name="L431"></a> 431         <em class="comment">// Initialize closure variables in sortRecordFactory</em>
<a id="L432" name="L432"></a> 432         <strong class="reserved">final</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> dups = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>();
<a id="L433" name="L433"></a> 433 
<a id="L434" name="L434"></a> 434         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; nsorts; j++) <em class="brace">{</em>
<a id="L435" name="L435"></a> 435             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>) sortObjects.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(j);
<a id="L436" name="L436"></a> 436             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = (<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars == <strong class="reserved">null</strong>) ? 0 :
<a id="L437" name="L437"></a> 437                 <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L438" name="L438"></a> 438 
<a id="L439" name="L439"></a> 439             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440                 <a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a> varRef = (<a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a>) <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442                 <em class="comment">// Discard duplicate variable references</em>
<a id="L443" name="L443"></a> 443                 <strong class="reserved">if</strong> (dups.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(varRef)) <strong class="reserved">continue</strong>;
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445                 <strong class="reserved">final</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a> var = varRef.<a href="../D/23563.html" title="Multiple defined in 4 places.">getVariable</a>();
<a id="L446" name="L446"></a> 446 
<a id="L447" name="L447"></a> 447                 <em class="comment">// Store variable in new closure</em>
<a id="L448" name="L448"></a> 448                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L449" name="L449"></a> 449                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(var.<a href="../S/6088.html#L128" title="Defined at 128 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">loadInstruction</a>());
<a id="L450" name="L450"></a> 450                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(
<a id="L451" name="L451"></a> 451                         cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(sortRecordFactoryClass, var.<a href="../D/18865.html" title="Multiple defined in 2 places.">getEscapedName</a>(),
<a id="L452" name="L452"></a> 452                             var.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>().<a href="../D/35488.html" title="Multiple defined in 13 places.">toSignature</a>())));
<a id="L453" name="L453"></a> 453                 dups.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(varRef);
<a id="L454" name="L454"></a> 454             <em class="brace">}</em>
<a id="L455" name="L455"></a> 455         <em class="brace">}</em>
<a id="L456" name="L456"></a> 456     <em class="brace">}</em>
<a id="L457" name="L457"></a> 457 
<a id="L458" name="L458"></a> 458     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/11760.html" title="Multiple referred from 2 places.">compileSortRecordFactory</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> sortObjects,
<a id="L459" name="L459"></a> 459         <a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen, <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen,
<a id="L460" name="L460"></a> 460         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sortRecordClass)
<a id="L461" name="L461"></a> 461     <em class="brace">{</em>
<a id="L462" name="L462"></a> 462         <strong class="reserved">final</strong> <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a>  xsltc = ((<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/16403.html" title="Multiple defined in 2 places.">firstElement</a>()).<a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>();
<a id="L463" name="L463"></a> 463         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a> = xsltc.<a href="../S/6196.html#L874" title="Defined at 874 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getHelperClassName</a>();
<a id="L464" name="L464"></a> 464 
<a id="L465" name="L465"></a> 465         <strong class="reserved">final</strong> <a href="../S/6127.html#L32" title="Defined at 32 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/NodeSortRecordFactGenerator.java.">NodeSortRecordFactGenerator</a> sortRecordFactory =
<a id="L466" name="L466"></a> 466             <strong class="reserved">new</strong> <a href="../S/6127.html#L32" title="Defined at 32 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/NodeSortRecordFactGenerator.java.">NodeSortRecordFactGenerator</a>(<a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>,
<a id="L467" name="L467"></a> 467                                         NODE_SORT_FACTORY,
<a id="L468" name="L468"></a> 468                                         <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a> + ".java",
<a id="L469" name="L469"></a> 469                                         ACC_PUBLIC | ACC_SUPER | ACC_FINAL,
<a id="L470" name="L470"></a> 470                                         <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <em class="brace">{</em><em class="brace">}</em>,
<a id="L471" name="L471"></a> 471                                         classGen.<a href="../D/22812.html" title="Multiple defined in 7 places.">getStylesheet</a>());
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473         <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = sortRecordFactory.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L474" name="L474"></a> 474 
<a id="L475" name="L475"></a> 475         <em class="comment">// Add a new instance variable for each var in closure</em>
<a id="L476" name="L476"></a> 476         <strong class="reserved">final</strong> <strong class="reserved">int</strong> nsorts = sortObjects.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L477" name="L477"></a> 477         <strong class="reserved">final</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> dups = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>();
<a id="L478" name="L478"></a> 478 
<a id="L479" name="L479"></a> 479         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; nsorts; j++) <em class="brace">{</em>
<a id="L480" name="L480"></a> 480             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>) sortObjects.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(j);
<a id="L481" name="L481"></a> 481             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = (<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars == <strong class="reserved">null</strong>) ? 0 :
<a id="L482" name="L482"></a> 482                 <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L483" name="L483"></a> 483 
<a id="L484" name="L484"></a> 484             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L485" name="L485"></a> 485                 <strong class="reserved">final</strong> <a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a> varRef = (<a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a>) <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L486" name="L486"></a> 486 
<a id="L487" name="L487"></a> 487                 <em class="comment">// Discard duplicate variable references</em>
<a id="L488" name="L488"></a> 488                 <strong class="reserved">if</strong> (dups.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(varRef)) <strong class="reserved">continue</strong>;
<a id="L489" name="L489"></a> 489 
<a id="L490" name="L490"></a> 490                 <strong class="reserved">final</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a> var = varRef.<a href="../D/23563.html" title="Multiple defined in 4 places.">getVariable</a>();
<a id="L491" name="L491"></a> 491                 sortRecordFactory.<a href="../D/10803.html" title="Multiple defined in 2 places.">addField</a>(<strong class="reserved">new</strong> <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>(ACC_PUBLIC,
<a id="L492" name="L492"></a> 492                                            cpg.<a href="../S/4764.html#L383" title="Defined at 383 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addUtf8</a>(var.<a href="../D/18865.html" title="Multiple defined in 2 places.">getEscapedName</a>()),
<a id="L493" name="L493"></a> 493                                            cpg.<a href="../S/4764.html#L383" title="Defined at 383 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addUtf8</a>(var.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>().<a href="../D/35488.html" title="Multiple defined in 13 places.">toSignature</a>()),
<a id="L494" name="L494"></a> 494                                            <strong class="reserved">null</strong>, cpg.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>()));
<a id="L495" name="L495"></a> 495                 dups.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(varRef);
<a id="L496" name="L496"></a> 496             <em class="brace">}</em>
<a id="L497" name="L497"></a> 497         <em class="brace">}</em>
<a id="L498" name="L498"></a> 498 
<a id="L499" name="L499"></a> 499         <em class="comment">// Define a constructor for this class</em>
<a id="L500" name="L500"></a> 500         <strong class="reserved">final</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] argTypes =
<a id="L501" name="L501"></a> 501             <strong class="reserved">new</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[7];
<a id="L502" name="L502"></a> 502         argTypes[0] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(DOM_INTF_SIG);
<a id="L503" name="L503"></a> 503         argTypes[1] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(STRING_SIG);
<a id="L504" name="L504"></a> 504         argTypes[2] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(TRANSLET_INTF_SIG);
<a id="L505" name="L505"></a> 505         argTypes[3] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG);
<a id="L506" name="L506"></a> 506         argTypes[4] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG);
<a id="L507" name="L507"></a> 507   argTypes[5] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG);
<a id="L508" name="L508"></a> 508   argTypes[6] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>("[" + STRING_SIG);
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] argNames = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[7];
<a id="L511" name="L511"></a> 511         argNames[0] = DOCUMENT_PNAME;
<a id="L512" name="L512"></a> 512         argNames[1] = "className";
<a id="L513" name="L513"></a> 513         argNames[2] = TRANSLET_PNAME;
<a id="L514" name="L514"></a> 514         argNames[3] = "order";
<a id="L515" name="L515"></a> 515         argNames[4] = "type";
<a id="L516" name="L516"></a> 516   argNames[5] = "lang";
<a id="L517" name="L517"></a> 517   argNames[6] = "case_order";
<a id="L518" name="L518"></a> 518 
<a id="L519" name="L519"></a> 519 
<a id="L520" name="L520"></a> 520         <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L521" name="L521"></a> 521         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a> =
<a id="L522" name="L522"></a> 522             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L523" name="L523"></a> 523                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L524" name="L524"></a> 524                                 argTypes, argNames, "&lt;init&gt;",
<a id="L525" name="L525"></a> 525                                 <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>, il, cpg);
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527         <em class="comment">// Push all parameters onto the stack and called super.&lt;init&gt;()</em>
<a id="L528" name="L528"></a> 528         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ALOAD_0);
<a id="L529" name="L529"></a> 529         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ALOAD_1);
<a id="L530" name="L530"></a> 530         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ALOAD_2);
<a id="L531" name="L531"></a> 531         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(3));
<a id="L532" name="L532"></a> 532         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(4));
<a id="L533" name="L533"></a> 533         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(5));
<a id="L534" name="L534"></a> 534   il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(6));
<a id="L535" name="L535"></a> 535   il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4754.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ALOAD.java.">ALOAD</a>(7));
<a id="L536" name="L536"></a> 536         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(NODE_SORT_FACTORY,
<a id="L537" name="L537"></a> 537             "&lt;init&gt;",
<a id="L538" name="L538"></a> 538             "(" + DOM_INTF_SIG
<a id="L539" name="L539"></a> 539                 + STRING_SIG
<a id="L540" name="L540"></a> 540                 + TRANSLET_INTF_SIG
<a id="L541" name="L541"></a> 541                 + "[" + STRING_SIG
<a id="L542" name="L542"></a> 542     + "[" + STRING_SIG
<a id="L543" name="L543"></a> 543     + "[" + STRING_SIG
<a id="L544" name="L544"></a> 544                 + "[" + STRING_SIG + ")V")));
<a id="L545" name="L545"></a> 545         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547         <em class="comment">// Override the definition of makeNodeSortRecord()</em>
<a id="L548" name="L548"></a> 548         il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L549" name="L549"></a> 549         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../S/6048.html#L145" title="Defined at 145 in src/com/sun/org/apache/xalan/internal/xsltc/dom/NodeSortRecordFactory.java.">makeNodeSortRecord</a> =
<a id="L550" name="L550"></a> 550             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L551" name="L551"></a> 551                 <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(NODE_SORT_RECORD_SIG),
<a id="L552" name="L552"></a> 552                 <strong class="reserved">new</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                     com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT,
<a id="L554" name="L554"></a> 554                     com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT <em class="brace">}</em>,
<a id="L555" name="L555"></a> 555                 <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <em class="brace">{</em> "node", "last" <em class="brace">}</em>, "makeNodeSortRecord",
<a id="L556" name="L556"></a> 556                 <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>, il, cpg);
<a id="L557" name="L557"></a> 557 
<a id="L558" name="L558"></a> 558         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ALOAD_0);
<a id="L559" name="L559"></a> 559         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ILOAD_1);
<a id="L560" name="L560"></a> 560         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ILOAD_2);
<a id="L561" name="L561"></a> 561         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(NODE_SORT_FACTORY,
<a id="L562" name="L562"></a> 562             "makeNodeSortRecord", "(II)" + NODE_SORT_RECORD_SIG)));
<a id="L563" name="L563"></a> 563         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L564" name="L564"></a> 564         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4791.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/CHECKCAST.java.">CHECKCAST</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(sortRecordClass)));
<a id="L565" name="L565"></a> 565 
<a id="L566" name="L566"></a> 566         <em class="comment">// Initialize closure in record class</em>
<a id="L567" name="L567"></a> 567         <strong class="reserved">final</strong> <strong class="reserved">int</strong> ndups = dups.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L568" name="L568"></a> 568         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ndups; i++) <em class="brace">{</em>
<a id="L569" name="L569"></a> 569             <strong class="reserved">final</strong> <a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a> varRef = (<a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a>) dups.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L570" name="L570"></a> 570             <strong class="reserved">final</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a> var = varRef.<a href="../D/23563.html" title="Multiple defined in 4 places.">getVariable</a>();
<a id="L571" name="L571"></a> 571             <strong class="reserved">final</strong> <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> varType = var.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>();
<a id="L572" name="L572"></a> 572 
<a id="L573" name="L573"></a> 573             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L574" name="L574"></a> 574 
<a id="L575" name="L575"></a> 575             <em class="comment">// Get field from factory class</em>
<a id="L576" name="L576"></a> 576             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ALOAD_0);
<a id="L577" name="L577"></a> 577             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4792.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETFIELD.java.">GETFIELD</a>(
<a id="L578" name="L578"></a> 578                 cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(<a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>,
<a id="L579" name="L579"></a> 579                     var.<a href="../D/18865.html" title="Multiple defined in 2 places.">getEscapedName</a>(), varType.<a href="../D/35488.html" title="Multiple defined in 13 places.">toSignature</a>())));
<a id="L580" name="L580"></a> 580 
<a id="L581" name="L581"></a> 581             <em class="comment">// Put field in record class</em>
<a id="L582" name="L582"></a> 582             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(
<a id="L583" name="L583"></a> 583                 cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(sortRecordClass,
<a id="L584" name="L584"></a> 584                     var.<a href="../D/18865.html" title="Multiple defined in 2 places.">getEscapedName</a>(), varType.<a href="../D/35488.html" title="Multiple defined in 13 places.">toSignature</a>())));
<a id="L585" name="L585"></a> 585         <em class="brace">}</em>
<a id="L586" name="L586"></a> 586         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/6521.html" title="Multiple defined in 4 places.">POP</a>);
<a id="L587" name="L587"></a> 587         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4753.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ARETURN.java.">ARETURN</a>);
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../D/33202.html" title="Multiple defined in 4 places.">setMaxLocals</a>();
<a id="L590" name="L590"></a> 590         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../D/33211.html" title="Multiple defined in 3 places.">setMaxStack</a>();
<a id="L591" name="L591"></a> 591         sortRecordFactory.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(<a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>);
<a id="L592" name="L592"></a> 592         <a href="../S/6048.html#L145" title="Defined at 145 in src/com/sun/org/apache/xalan/internal/xsltc/dom/NodeSortRecordFactory.java.">makeNodeSortRecord</a>.<a href="../D/33202.html" title="Multiple defined in 4 places.">setMaxLocals</a>();
<a id="L593" name="L593"></a> 593         <a href="../S/6048.html#L145" title="Defined at 145 in src/com/sun/org/apache/xalan/internal/xsltc/dom/NodeSortRecordFactory.java.">makeNodeSortRecord</a>.<a href="../D/33211.html" title="Multiple defined in 3 places.">setMaxStack</a>();
<a id="L594" name="L594"></a> 594         sortRecordFactory.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(<a href="../S/6048.html#L145" title="Defined at 145 in src/com/sun/org/apache/xalan/internal/xsltc/dom/NodeSortRecordFactory.java.">makeNodeSortRecord</a>);
<a id="L595" name="L595"></a> 595         xsltc.<a href="../D/15247.html" title="Multiple defined in 2 places.">dumpClass</a>(sortRecordFactory.<a href="../D/19889.html" title="Multiple defined in 3 places.">getJavaClass</a>());
<a id="L596" name="L596"></a> 596 
<a id="L597" name="L597"></a> 597         <strong class="reserved">return</strong> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>;
<a id="L598" name="L598"></a> 598     <em class="brace">}</em>
<a id="L599" name="L599"></a> 599 
<div class="comment">
      Create a new auxillary class extending NodeSortRecord.</div>
<a id="L603" name="L603"></a> 603     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6075.html#L319" title="Referred from 319 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">compileSortRecord</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> sortObjects,
<a id="L604" name="L604"></a> 604                                             <a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen,
<a id="L605" name="L605"></a> 605                                             <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L606" name="L606"></a> 606         <strong class="reserved">final</strong> <a href="../S/6196.html#L66" title="Defined at 66 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">XSLTC</a>  xsltc = ((<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/16403.html" title="Multiple defined in 2 places.">firstElement</a>()).<a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>();
<a id="L607" name="L607"></a> 607         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a> = xsltc.<a href="../S/6196.html#L874" title="Defined at 874 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getHelperClassName</a>();
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609         <em class="comment">// This generates a new class for handling this specific sort</em>
<a id="L610" name="L610"></a> 610         <strong class="reserved">final</strong> <a href="../S/6098.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/NodeSortRecordGenerator.java.">NodeSortRecordGenerator</a> sortRecord =
<a id="L611" name="L611"></a> 611             <strong class="reserved">new</strong> <a href="../S/6098.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/NodeSortRecordGenerator.java.">NodeSortRecordGenerator</a>(<a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>,
<a id="L612" name="L612"></a> 612                                         NODE_SORT_RECORD,
<a id="L613" name="L613"></a> 613                                         "sort$0.java",
<a id="L614" name="L614"></a> 614                                         ACC_PUBLIC | ACC_SUPER | ACC_FINAL,
<a id="L615" name="L615"></a> 615                                         <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <em class="brace">{</em><em class="brace">}</em>,
<a id="L616" name="L616"></a> 616                                         classGen.<a href="../D/22812.html" title="Multiple defined in 7 places.">getStylesheet</a>());
<a id="L617" name="L617"></a> 617 
<a id="L618" name="L618"></a> 618         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = sortRecord.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L619" name="L619"></a> 619 
<a id="L620" name="L620"></a> 620         <em class="comment">// Add a new instance variable for each var in closure</em>
<a id="L621" name="L621"></a> 621         <strong class="reserved">final</strong> <strong class="reserved">int</strong> nsorts = sortObjects.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L622" name="L622"></a> 622         <strong class="reserved">final</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> dups = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>();
<a id="L623" name="L623"></a> 623 
<a id="L624" name="L624"></a> 624         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; nsorts; j++) <em class="brace">{</em>
<a id="L625" name="L625"></a> 625             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>) sortObjects.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(j);
<a id="L626" name="L626"></a> 626 
<a id="L627" name="L627"></a> 627             <em class="comment">// Set the name of the inner class in this sort object</em>
<a id="L628" name="L628"></a> 628             <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>.<a href="../S/6075.html#L130" title="Defined at 130 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">setInnerClassName</a>(<a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>);
<a id="L629" name="L629"></a> 629 
<a id="L630" name="L630"></a> 630             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = (<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars == <strong class="reserved">null</strong>) ? 0 :
<a id="L631" name="L631"></a> 631                 <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L632" name="L632"></a> 632             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633                 <strong class="reserved">final</strong> <a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a> varRef = (<a href="../S/6165.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableRefBase.java.">VariableRefBase</a>) <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>._closureVars.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L634" name="L634"></a> 634 
<a id="L635" name="L635"></a> 635                 <em class="comment">// Discard duplicate variable references</em>
<a id="L636" name="L636"></a> 636                 <strong class="reserved">if</strong> (dups.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(varRef)) <strong class="reserved">continue</strong>;
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638                 <strong class="reserved">final</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a> var = varRef.<a href="../D/23563.html" title="Multiple defined in 4 places.">getVariable</a>();
<a id="L639" name="L639"></a> 639                 sortRecord.<a href="../D/10803.html" title="Multiple defined in 2 places.">addField</a>(<strong class="reserved">new</strong> <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>(ACC_PUBLIC,
<a id="L640" name="L640"></a> 640                                     cpg.<a href="../S/4764.html#L383" title="Defined at 383 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addUtf8</a>(var.<a href="../D/18865.html" title="Multiple defined in 2 places.">getEscapedName</a>()),
<a id="L641" name="L641"></a> 641                                     cpg.<a href="../S/4764.html#L383" title="Defined at 383 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addUtf8</a>(var.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>().<a href="../D/35488.html" title="Multiple defined in 13 places.">toSignature</a>()),
<a id="L642" name="L642"></a> 642                                     <strong class="reserved">null</strong>, cpg.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>()));
<a id="L643" name="L643"></a> 643                 dups.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(varRef);
<a id="L644" name="L644"></a> 644             <em class="brace">}</em>
<a id="L645" name="L645"></a> 645         <em class="brace">}</em>
<a id="L646" name="L646"></a> 646 
<a id="L647" name="L647"></a> 647         <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a> = <a href="../S/6075.html#L663" title="Defined at 663 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">compileInit</a>(sortObjects, sortRecord,
<a id="L648" name="L648"></a> 648                                          cpg, <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>);
<a id="L649" name="L649"></a> 649         <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../D/15919.html" title="Multiple defined in 199 places.">extract</a> = <a href="../S/6075.html#L691" title="Defined at 691 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">compileExtract</a>(sortObjects, sortRecord,
<a id="L650" name="L650"></a> 650                                         cpg, <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>);
<a id="L651" name="L651"></a> 651         sortRecord.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>);
<a id="L652" name="L652"></a> 652         sortRecord.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(<a href="../D/15919.html" title="Multiple defined in 199 places.">extract</a>);
<a id="L653" name="L653"></a> 653 
<a id="L654" name="L654"></a> 654         xsltc.<a href="../D/15247.html" title="Multiple defined in 2 places.">dumpClass</a>(sortRecord.<a href="../D/19889.html" title="Multiple defined in 3 places.">getJavaClass</a>());
<a id="L655" name="L655"></a> 655         <strong class="reserved">return</strong> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>;
<a id="L656" name="L656"></a> 656     <em class="brace">}</em>
<a id="L657" name="L657"></a> 657 
<div class="comment">
      Create a constructor for the new class. Updates the reference to the
      collator in the super calls only when the stylesheet specifies a new
      language in xsl:sort.</div>
<a id="L663" name="L663"></a> 663     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../S/6075.html#L647" title="Referred from 647 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">compileInit</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> sortObjects,
<a id="L664" name="L664"></a> 664                                            <a href="../S/6098.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/NodeSortRecordGenerator.java.">NodeSortRecordGenerator</a> sortRecord,
<a id="L665" name="L665"></a> 665                                            <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg,
<a id="L666" name="L666"></a> 666                                            <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>)
<a id="L667" name="L667"></a> 667     <em class="brace">{</em>
<a id="L668" name="L668"></a> 668         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L669" name="L669"></a> 669         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a> =
<a id="L670" name="L670"></a> 670             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L671" name="L671"></a> 671                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L672" name="L672"></a> 672                                 <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, "&lt;init&gt;", <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>,
<a id="L673" name="L673"></a> 673                                 il, cpg);
<a id="L674" name="L674"></a> 674 
<a id="L675" name="L675"></a> 675         <em class="comment">// Call the constructor in the NodeSortRecord superclass</em>
<a id="L676" name="L676"></a> 676         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ALOAD_0);
<a id="L677" name="L677"></a> 677         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(NODE_SORT_RECORD,
<a id="L678" name="L678"></a> 678                                                      "&lt;init&gt;", "()V")));
<a id="L679" name="L679"></a> 679 
<a id="L680" name="L680"></a> 680 
<a id="L681" name="L681"></a> 681 
<a id="L682" name="L682"></a> 682         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L683" name="L683"></a> 683 
<a id="L684" name="L684"></a> 684         <strong class="reserved">return</strong> <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>;
<a id="L685" name="L685"></a> 685     <em class="brace">}</em>
<a id="L686" name="L686"></a> 686 
<a id="L687" name="L687"></a> 687 
<div class="comment">
      Compiles a method that overloads NodeSortRecord.extractValueFromDOM()</div>
<a id="L691" name="L691"></a> 691     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../S/6075.html#L649" title="Referred from 649 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">compileExtract</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> sortObjects,
<a id="L692" name="L692"></a> 692                                          <a href="../S/6098.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/NodeSortRecordGenerator.java.">NodeSortRecordGenerator</a> sortRecord,
<a id="L693" name="L693"></a> 693                                          <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg,
<a id="L694" name="L694"></a> 694                                          <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L696" name="L696"></a> 696 
<a id="L697" name="L697"></a> 697         <em class="comment">// String NodeSortRecord.extractValueFromDOM(dom,node,level);</em>
<a id="L698" name="L698"></a> 698         <strong class="reserved">final</strong> <a href="../S/6112.html#L42" title="Defined at 42 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/CompareGenerator.java.">CompareGenerator</a> extractMethod =
<a id="L699" name="L699"></a> 699             <strong class="reserved">new</strong> <a href="../S/6112.html#L42" title="Defined at 42 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/CompareGenerator.java.">CompareGenerator</a>(ACC_PUBLIC | ACC_FINAL,
<a id="L700" name="L700"></a> 700                                  com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>,
<a id="L701" name="L701"></a> 701                                  <strong class="reserved">new</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] <em class="brace">{</em>
<a id="L702" name="L702"></a> 702                                      <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(DOM_INTF_SIG),
<a id="L703" name="L703"></a> 703                                      com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT,
<a id="L704" name="L704"></a> 704                                      com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT,
<a id="L705" name="L705"></a> 705                                      <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(TRANSLET_SIG),
<a id="L706" name="L706"></a> 706                                      com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT
<a id="L707" name="L707"></a> 707                                  <em class="brace">}</em>,
<a id="L708" name="L708"></a> 708                                  <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <em class="brace">{</em> "dom",
<a id="L709" name="L709"></a> 709                                                 "current",
<a id="L710" name="L710"></a> 710                                                 "level",
<a id="L711" name="L711"></a> 711                                                 "translet",
<a id="L712" name="L712"></a> 712                                                 "last"
<a id="L713" name="L713"></a> 713                                  <em class="brace">}</em>,
<a id="L714" name="L714"></a> 714                                  "extractValueFromDOM", <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>, il, cpg);
<a id="L715" name="L715"></a> 715 
<a id="L716" name="L716"></a> 716         <em class="comment">// Values needed for the switch statement</em>
<a id="L717" name="L717"></a> 717         <strong class="reserved">final</strong> <strong class="reserved">int</strong> levels = sortObjects.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L718" name="L718"></a> 718         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>[] = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[levels];
<a id="L719" name="L719"></a> 719         <strong class="reserved">final</strong> <a href="../S/4625.html#L83" title="Defined at 83 in src/com/sun/org/apache/bcel/internal/generic/InstructionHandle.java.">InstructionHandle</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>[] = <strong class="reserved">new</strong> <a href="../S/4625.html#L83" title="Defined at 83 in src/com/sun/org/apache/bcel/internal/generic/InstructionHandle.java.">InstructionHandle</a>[levels];
<a id="L720" name="L720"></a> 720         <a href="../S/4625.html#L83" title="Defined at 83 in src/com/sun/org/apache/bcel/internal/generic/InstructionHandle.java.">InstructionHandle</a> tblswitch = <strong class="reserved">null</strong>;
<a id="L721" name="L721"></a> 721 
<a id="L722" name="L722"></a> 722         <em class="comment">// Compile switch statement only if the key has multiple levels</em>
<a id="L723" name="L723"></a> 723         <strong class="reserved">if</strong> (levels &gt; 1) <em class="brace">{</em>
<a id="L724" name="L724"></a> 724             <em class="comment">// Put the parameter to the swtich statement on the stack</em>
<a id="L725" name="L725"></a> 725             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4623.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ILOAD.java.">ILOAD</a>(extractMethod.<a href="../D/20200.html" title="Multiple defined in 7 places.">getLocalIndex</a>("level")));
<a id="L726" name="L726"></a> 726             <em class="comment">// Append the switch statement here later on</em>
<a id="L727" name="L727"></a> 727             tblswitch = il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4691.html#L66" title="Defined at 66 in src/com/sun/org/apache/bcel/internal/generic/NOP.java.">NOP</a>());
<a id="L728" name="L728"></a> 728         <em class="brace">}</em>
<a id="L729" name="L729"></a> 729 
<a id="L730" name="L730"></a> 730         <em class="comment">// Append all the cases for the switch statment</em>
<a id="L731" name="L731"></a> 731         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> level = 0; level &lt; levels; level++) <em class="brace">{</em>
<a id="L732" name="L732"></a> 732             <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>[level] = level;
<a id="L733" name="L733"></a> 733             <strong class="reserved">final</strong> <a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a> <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a> = (<a href="../S/6075.html#L73" title="Defined at 73 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">Sort</a>)sortObjects.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(level);
<a id="L734" name="L734"></a> 734             <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>[level] = il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4691.html#L66" title="Defined at 66 in src/com/sun/org/apache/bcel/internal/generic/NOP.java.">NOP</a>);
<a id="L735" name="L735"></a> 735             <a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>.<a href="../S/6075.html#L229" title="Defined at 229 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Sort.java.">translateSelect</a>(sortRecord, extractMethod);
<a id="L736" name="L736"></a> 736             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4753.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ARETURN.java.">ARETURN</a>);
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738 
<a id="L739" name="L739"></a> 739         <em class="comment">// Compile def. target for switch statement if key has multiple levels</em>
<a id="L740" name="L740"></a> 740         <strong class="reserved">if</strong> (levels &gt; 1) <em class="brace">{</em>
<a id="L741" name="L741"></a> 741             <em class="comment">// Append the default target - it will _NEVER_ be reached</em>
<a id="L742" name="L742"></a> 742             <a href="../S/4625.html#L83" title="Defined at 83 in src/com/sun/org/apache/bcel/internal/generic/InstructionHandle.java.">InstructionHandle</a> defaultTarget =
<a id="L743" name="L743"></a> 743                 il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, EMPTYSTRING));
<a id="L744" name="L744"></a> 744             il.<a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(tblswitch,<strong class="reserved">new</strong> <a href="../S/4652.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/TABLESWITCH.java.">TABLESWITCH</a>(<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>, <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, defaultTarget));
<a id="L745" name="L745"></a> 745             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4753.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ARETURN.java.">ARETURN</a>);
<a id="L746" name="L746"></a> 746         <em class="brace">}</em>
<a id="L747" name="L747"></a> 747 
<a id="L748" name="L748"></a> 748         <strong class="reserved">return</strong> extractMethod;
<a id="L749" name="L749"></a> 749     <em class="brace">}</em>
<a id="L750" name="L750"></a> 750 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L94">[^]</a><a href="#L691">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
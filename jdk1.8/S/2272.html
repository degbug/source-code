<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/image/PackedColorModel.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L243">[^]</a><a href="#L469">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L243" title="Defined at 243.">getMask</a></li>
<li><a href="#L254" title="Defined at 254.">getMasks</a></li>
<li><a href="#L263" title="Defined at 263.">DecomposeMask</a></li>
<li><a href="#L309" title="Defined at 309.">createCompatibleSampleModel</a></li>
<li><a href="#L325" title="Defined at 325.">isCompatibleSampleModel</a></li>
<li><a href="#L373" title="Defined at 373.">getAlphaRaster</a></li>
<li><a href="#L396" title="Defined at 396.">equals</a></li>
<li><a href="#L418" title="Defined at 418.">createBitsArray</a></li>
<li><a href="#L441" title="Defined at 441.">createBitsArray</a></li>
<li><a href="#L469" title="Defined at 469.">countBits</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2011, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.image;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.Transparency;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.color.ColorSpace;
<a id="L30" name="L30"></a>  30 
<div class="comment">
  The <code>PackedColorModel</code> class is an abstract
  {@link ColorModel} class that works with pixel values which represent
  color and alpha information as separate samples and which pack all
  samples for a single pixel into a single int, short, or byte quantity.
  This class can be used with an arbitrary {@link ColorSpace}.  The number of
  color samples in the pixel values must be the same as the number of color
  components in the <code>ColorSpace</code>.  There can be a single alpha
  sample.  The array length is always 1 for those methods that use a
  primitive array pixel representation of type <code>transferType</code>.
  The transfer types supported are DataBuffer.TYPE_BYTE,
  DataBuffer.TYPE_USHORT, and DataBuffer.TYPE_INT.
  Color and alpha samples are stored in the single element of the array
  in bits indicated by bit masks.  Each bit mask must be contiguous and
  masks must not overlap.  The same masks apply to the single int
  pixel representation used by other methods.  The correspondence of
  masks and color/alpha samples is as follows:
  <ul><li> Masks are identified by indices running from 0 through
  {@link ColorModel#getNumComponents() getNumComponents}&nbsp;-&nbsp;1.
  </li><li> The first
  {@link ColorModel#getNumColorComponents() getNumColorComponents}
  indices refer to color samples.
  </li><li> If an alpha sample is present, it corresponds the last index.
  </li><li> The order of the color indices is specified
  by the <code>ColorSpace</code>.  Typically, this reflects the name of
  the color space type (for example, TYPE_RGB), index 0
  corresponds to red, index 1 to green, and index 2 to blue.
  </li></ul>
  <p>
  The translation from pixel values to color/alpha components for
  display or processing purposes is a one-to-one correspondence of
  samples to components.
  A <code>PackedColorModel</code> is typically used with image data
  that uses masks to define packed samples.  For example, a
  <code>PackedColorModel</code> can be used in conjunction with a
  {@link SinglePixelPackedSampleModel} to construct a
  {@link BufferedImage}.  Normally the masks used by the
  {@link SampleModel} and the <code>ColorModel</code> would be the same.
  However, if they are different, the color interpretation of pixel data is
  done according to the masks of the <code>ColorModel</code>.
  </p><p>
  A single <code>int</code> pixel representation is valid for all objects
  of this class since it is always possible to represent pixel values
  used with this class in a single <code>int</code>.  Therefore, methods
  that use this representation do not throw an
  <code>IllegalArgumentException</code> due to an invalid pixel value.
  </p><p>
  A subclass of <code>PackedColorModel</code> is {@link DirectColorModel},
  which is similar to an X11 TrueColor visual.
  @see DirectColorModel
  @see SinglePixelPackedSampleModel
  @see BufferedImage</p></div>
<a id="L86" name="L86"></a>  86 
<a id="L87" name="L87"></a>  87 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/5968.html" title="Multiple referred from 5 places.">PackedColorModel</a> <strong class="reserved">extends</strong> <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> <em class="brace">{</em>
<a id="L88" name="L88"></a>  88     <strong class="reserved">int</strong>[] maskArray;
<a id="L89" name="L89"></a>  89     <strong class="reserved">int</strong>[] maskOffsets;
<a id="L90" name="L90"></a>  90     <strong class="reserved">float</strong>[] scaleFactors;
<a id="L91" name="L91"></a>  91 
<div class="comment">
      Constructs a <code>PackedColorModel</code> from a color mask array,
      which specifies which bits in an <code>int</code> pixel representation
      contain each of the color samples, and an alpha mask.  Color
      components are in the specified <code>ColorSpace</code>.  The length of
      <code>colorMaskArray</code> should be the number of components in
      the <code>ColorSpace</code>.  All of the bits in each mask
      must be contiguous and fit in the specified number of least significant
      bits of an <code>int</code> pixel representation.  If the
      <code>alphaMask</code> is 0, there is no alpha.  If there is alpha,
      the <code>boolean</code> <code>isAlphaPremultiplied</code> specifies
      how to interpret color and alpha samples in pixel values.  If the
      <code>boolean</code> is <code>true</code>, color samples are assumed
      to have been multiplied by the alpha sample.  The transparency,
      <code>trans</code>, specifies what alpha values can be represented
      by this color model.  The transfer type is the type of primitive
      array used to represent pixel values.
      @param space the specified <code>ColorSpace</code>
      @param bits the number of bits in the pixel values
      @param colorMaskArray array that specifies the masks representing
              the bits of the pixel values that represent the color
              components
      @param alphaMask specifies the mask representing
              the bits of the pixel values that represent the alpha
              component
      @param isAlphaPremultiplied <code>true</code> if color samples are
             premultiplied by the alpha sample; <code>false</code> otherwise
      @param trans specifies the alpha value that can be represented by
             this color model
      @param transferType the type of array used to represent pixel values
      @throws IllegalArgumentException if <code>bits</code> is less than
              1 or greater than 32</div>
<a id="L125" name="L125"></a> 125     <strong class="reserved">public</strong> PackedColorModel (<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> space, <strong class="reserved">int</strong> bits,
<a id="L126" name="L126"></a> 126                              <strong class="reserved">int</strong>[] colorMaskArray, <strong class="reserved">int</strong> alphaMask,
<a id="L127" name="L127"></a> 127                              <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L128" name="L128"></a> 128                              <strong class="reserved">int</strong> trans, <strong class="reserved">int</strong> transferType) <em class="brace">{</em>
<a id="L129" name="L129"></a> 129         <strong class="reserved">super</strong>(bits, <a href="../S/2272.html#L87" title="Defined at 87 in src/java/awt/image/PackedColorModel.java.">PackedColorModel</a>.<a href="../D/13639.html" title="Multiple defined in 2 places.">createBitsArray</a>(colorMaskArray,
<a id="L130" name="L130"></a> 130                                                      alphaMask),
<a id="L131" name="L131"></a> 131               space, (alphaMask == 0 ? <strong class="reserved">false</strong> : <strong class="reserved">true</strong>),
<a id="L132" name="L132"></a> 132               <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>, trans, transferType);
<a id="L133" name="L133"></a> 133         <strong class="reserved">if</strong> (bits &lt; 1 || bits &gt; 32) <em class="brace">{</em>
<a id="L134" name="L134"></a> 134             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Number of bits must be between"
<a id="L135" name="L135"></a> 135                                                +" 1 and 32.");
<a id="L136" name="L136"></a> 136         <em class="brace">}</em>
<a id="L137" name="L137"></a> 137         maskArray   = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L138" name="L138"></a> 138         maskOffsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L139" name="L139"></a> 139         scaleFactors = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents];
<a id="L140" name="L140"></a> 140 
<a id="L141" name="L141"></a> 141         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142             <em class="comment">// Get the mask offset and #bits</em>
<a id="L143" name="L143"></a> 143             <a href="../S/2272.html#L263" title="Defined at 263 in src/java/awt/image/PackedColorModel.java.">DecomposeMask</a>(colorMaskArray[i], i, space.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(i));
<a id="L144" name="L144"></a> 144         <em class="brace">}</em>
<a id="L145" name="L145"></a> 145         <strong class="reserved">if</strong> (alphaMask != 0) <em class="brace">{</em>
<a id="L146" name="L146"></a> 146             <a href="../S/2272.html#L263" title="Defined at 263 in src/java/awt/image/PackedColorModel.java.">DecomposeMask</a>(alphaMask, numColorComponents, "alpha");
<a id="L147" name="L147"></a> 147             <strong class="reserved">if</strong> (nBits[numComponents-1] == 1) <em class="brace">{</em>
<a id="L148" name="L148"></a> 148                 transparency = <a href="../S/2170.html#L34" title="Defined at 34 in src/java/awt/Transparency.java.">Transparency</a>.BITMASK;
<a id="L149" name="L149"></a> 149             <em class="brace">}</em>
<a id="L150" name="L150"></a> 150         <em class="brace">}</em>
<a id="L151" name="L151"></a> 151     <em class="brace">}</em>
<a id="L152" name="L152"></a> 152 
<div class="comment">
      Constructs a <code>PackedColorModel</code> from the specified
      masks which indicate which bits in an <code>int</code> pixel
      representation contain the alpha, red, green and blue color samples.
      Color components are in the specified <code>ColorSpace</code>, which
      must be of type ColorSpace.TYPE_RGB.  All of the bits in each
      mask must be contiguous and fit in the specified number of
      least significant bits of an <code>int</code> pixel representation.  If
      <code>amask</code> is 0, there is no alpha.  If there is alpha,
      the <code>boolean</code> <code>isAlphaPremultiplied</code>
      specifies how to interpret color and alpha samples
      in pixel values.  If the <code>boolean</code> is <code>true</code>,
      color samples are assumed to have been multiplied by the alpha sample.
      The transparency, <code>trans</code>, specifies what alpha values
      can be represented by this color model.
      The transfer type is the type of primitive array used to represent
      pixel values.
      @param space the specified <code>ColorSpace</code>
      @param bits the number of bits in the pixel values
      @param rmask specifies the mask representing
              the bits of the pixel values that represent the red
              color component
      @param gmask specifies the mask representing
              the bits of the pixel values that represent the green
              color component
      @param bmask specifies the mask representing
              the bits of the pixel values that represent
              the blue color component
      @param amask specifies the mask representing
              the bits of the pixel values that represent
              the alpha component
      @param isAlphaPremultiplied <code>true</code> if color samples are
             premultiplied by the alpha sample; <code>false</code> otherwise
      @param trans specifies the alpha value that can be represented by
             this color model
      @param transferType the type of array used to represent pixel values
      @throws IllegalArgumentException if <code>space</code> is not a
              TYPE_RGB space
      @see ColorSpace</div>
<a id="L193" name="L193"></a> 193     <strong class="reserved">public</strong> PackedColorModel(<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> space, <strong class="reserved">int</strong> bits, <strong class="reserved">int</strong> rmask, <strong class="reserved">int</strong> gmask,
<a id="L194" name="L194"></a> 194                             <strong class="reserved">int</strong> bmask, <strong class="reserved">int</strong> amask,
<a id="L195" name="L195"></a> 195                             <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L196" name="L196"></a> 196                             <strong class="reserved">int</strong> trans, <strong class="reserved">int</strong> transferType) <em class="brace">{</em>
<a id="L197" name="L197"></a> 197         <strong class="reserved">super</strong> (bits, <a href="../S/2272.html#L87" title="Defined at 87 in src/java/awt/image/PackedColorModel.java.">PackedColorModel</a>.<a href="../D/13639.html" title="Multiple defined in 2 places.">createBitsArray</a>(rmask, gmask, bmask,
<a id="L198" name="L198"></a> 198                                                       amask),
<a id="L199" name="L199"></a> 199                space, (amask == 0 ? <strong class="reserved">false</strong> : <strong class="reserved">true</strong>),
<a id="L200" name="L200"></a> 200                <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>, trans, transferType);
<a id="L201" name="L201"></a> 201 
<a id="L202" name="L202"></a> 202         <strong class="reserved">if</strong> (space.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() != <a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a>.TYPE_RGB) <em class="brace">{</em>
<a id="L203" name="L203"></a> 203             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("ColorSpace must be TYPE_RGB.");
<a id="L204" name="L204"></a> 204         <em class="brace">}</em>
<a id="L205" name="L205"></a> 205         maskArray = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L206" name="L206"></a> 206         maskOffsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L207" name="L207"></a> 207         scaleFactors = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents];
<a id="L208" name="L208"></a> 208 
<a id="L209" name="L209"></a> 209         <a href="../S/2272.html#L263" title="Defined at 263 in src/java/awt/image/PackedColorModel.java.">DecomposeMask</a>(rmask, 0, "red");
<a id="L210" name="L210"></a> 210 
<a id="L211" name="L211"></a> 211         <a href="../S/2272.html#L263" title="Defined at 263 in src/java/awt/image/PackedColorModel.java.">DecomposeMask</a>(gmask, 1, "green");
<a id="L212" name="L212"></a> 212 
<a id="L213" name="L213"></a> 213         <a href="../S/2272.html#L263" title="Defined at 263 in src/java/awt/image/PackedColorModel.java.">DecomposeMask</a>(bmask, 2, "blue");
<a id="L214" name="L214"></a> 214 
<a id="L215" name="L215"></a> 215         <strong class="reserved">if</strong> (amask != 0) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216             <a href="../S/2272.html#L263" title="Defined at 263 in src/java/awt/image/PackedColorModel.java.">DecomposeMask</a>(amask, 3, "alpha");
<a id="L217" name="L217"></a> 217             <strong class="reserved">if</strong> (nBits[3] == 1) <em class="brace">{</em>
<a id="L218" name="L218"></a> 218                 transparency = <a href="../S/2170.html#L34" title="Defined at 34 in src/java/awt/Transparency.java.">Transparency</a>.BITMASK;
<a id="L219" name="L219"></a> 219             <em class="brace">}</em>
<a id="L220" name="L220"></a> 220         <em class="brace">}</em>
<a id="L221" name="L221"></a> 221     <em class="brace">}</em>
<a id="L222" name="L222"></a> 222 
<div class="comment">
      Returns the mask indicating which bits in a pixel
      contain the specified color/alpha sample.  For color
      samples, <code>index</code> corresponds to the placement of color
      sample names in the color space.  Thus, an <code>index</code>
      equal to 0 for a CMYK ColorSpace would correspond to
      Cyan and an <code>index</code> equal to 1 would correspond to
      Magenta.  If there is alpha, the alpha <code>index</code> would be:
      <pre>           alphaIndex = numComponents() - 1;
      </pre>
      @param index the specified color or alpha sample
      @return the mask, which indicates which bits of the <code>int</code>
              pixel representation contain the color or alpha sample specified
              by <code>index</code>.
      @throws ArrayIndexOutOfBoundsException if <code>index</code> is
              greater than the number of components minus 1 in this
              <code>PackedColorModel</code> or if <code>index</code> is
              less than zero</div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17558.html" title="Multiple referred from 32 places.">getMask</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L244" name="L244"></a> 244         <strong class="reserved">return</strong> maskArray[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>];
<a id="L245" name="L245"></a> 245     <em class="brace">}</em>
<a id="L246" name="L246"></a> 246 
<div class="comment">
      Returns a mask array indicating which bits in a pixel
      contain the color and alpha samples.
      @return the mask array , which indicates which bits of the
              <code>int</code> pixel
              representation contain the color or alpha samples.</div>
<a id="L254" name="L254"></a> 254     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] getMasks() <em class="brace">{</em>
<a id="L255" name="L255"></a> 255         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>[]) maskArray.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L256" name="L256"></a> 256     <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<div class="comment">
      A utility function to compute the mask offset and scalefactor,
      store these and the mask in instance arrays, and verify that
      the mask fits in the specified pixel size.</div>
<a id="L263" name="L263"></a> 263     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/2068.html" title="Multiple referred from 6 places.">DecomposeMask</a>(<strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>,  <strong class="reserved">int</strong> idx, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> componentName) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264         <strong class="reserved">int</strong> off = 0;
<a id="L265" name="L265"></a> 265         <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = nBits[idx];
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267         <em class="comment">// Store the mask</em>
<a id="L268" name="L268"></a> 268         maskArray[idx]   = <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270         <em class="comment">// Now find the shift</em>
<a id="L271" name="L271"></a> 271         <strong class="reserved">if</strong> (<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> != 0) <em class="brace">{</em>
<a id="L272" name="L272"></a> 272             <strong class="reserved">while</strong> ((<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; 1) == 0) <em class="brace">{</em>
<a id="L273" name="L273"></a> 273                 <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &gt;&gt;&gt;= 1;
<a id="L274" name="L274"></a> 274                 off++;
<a id="L275" name="L275"></a> 275             <em class="brace">}</em>
<a id="L276" name="L276"></a> 276         <em class="brace">}</em>
<a id="L277" name="L277"></a> 277 
<a id="L278" name="L278"></a> 278         <strong class="reserved">if</strong> (off + <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; pixel_bits) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(componentName + " mask "+
<a id="L280" name="L280"></a> 280                                         <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(maskArray[idx])+
<a id="L281" name="L281"></a> 281                                                " overflows pixel (expecting "+
<a id="L282" name="L282"></a> 282                                                pixel_bits+" bits");
<a id="L283" name="L283"></a> 283         <em class="brace">}</em>
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285         maskOffsets[idx] = off;
<a id="L286" name="L286"></a> 286         <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0) <em class="brace">{</em>
<a id="L287" name="L287"></a> 287             <em class="comment">// High enough to scale any 0-ff value down to 0.0, but not</em>
<a id="L288" name="L288"></a> 288             <em class="comment">// high enough to get Infinity when scaling back to pixel bits</em>
<a id="L289" name="L289"></a> 289             scaleFactors[idx] = 256.0f;
<a id="L290" name="L290"></a> 290         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L291" name="L291"></a> 291             scaleFactors[idx] = 255.0f / ((1 &lt;&lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) - 1);
<a id="L292" name="L292"></a> 292         <em class="brace">}</em>
<a id="L293" name="L293"></a> 293 
<a id="L294" name="L294"></a> 294     <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<div class="comment">
      Creates a <code>SampleModel</code> with the specified width and
      height that has a data layout compatible with this
      <code>ColorModel</code>.
      @param w the width (in pixels) of the region of the image data
               described
      @param h the height (in pixels) of the region of the image data
               described
      @return the newly created <code>SampleModel</code>.
      @throws IllegalArgumentException if <code>w</code> or
              <code>h</code> is not greater than 0
      @see SampleModel</div>
<a id="L309" name="L309"></a> 309     <strong class="reserved">public</strong> <a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> <a href="../R/12288.html" title="Multiple referred from 9 places.">createCompatibleSampleModel</a>(<strong class="reserved">int</strong> w, <strong class="reserved">int</strong> h) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a>(transferType, w, h,
<a id="L311" name="L311"></a> 311                                                 maskArray);
<a id="L312" name="L312"></a> 312     <em class="brace">}</em>
<a id="L313" name="L313"></a> 313 
<div class="comment">
      Checks if the specified <code>SampleModel</code> is compatible
      with this <code>ColorModel</code>.  If <code>sm</code> is
      <code>null</code>, this method returns <code>false</code>.
      @param sm the specified <code>SampleModel</code>,
      or <code>null</code>
      @return <code>true</code> if the specified <code>SampleModel</code>
              is compatible with this <code>ColorModel</code>;
              <code>false</code> otherwise.
      @see SampleModel</div>
<a id="L325" name="L325"></a> 325     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4243.html#L105" title="Referred from 105 in src/javax/imageio/ImageTypeSpecifier.java.">isCompatibleSampleModel</a>(<a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> sm) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326         <strong class="reserved">if</strong> (! (sm <strong class="reserved">instanceof</strong> <a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a>)) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L328" name="L328"></a> 328         <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330         <em class="comment">// Must have the same number of components</em>
<a id="L331" name="L331"></a> 331         <strong class="reserved">if</strong> (numComponents != sm.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>()) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L333" name="L333"></a> 333         <em class="brace">}</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335         <em class="comment">// Transfer type must be the same</em>
<a id="L336" name="L336"></a> 336         <strong class="reserved">if</strong> (sm.<a href="../D/23246.html" title="Multiple defined in 4 places.">getTransferType</a>() != transferType) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L338" name="L338"></a> 338         <em class="brace">}</em>
<a id="L339" name="L339"></a> 339 
<a id="L340" name="L340"></a> 340         <a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a> sppsm = (<a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a>) sm;
<a id="L341" name="L341"></a> 341         <em class="comment">// Now compare the specific masks</em>
<a id="L342" name="L342"></a> 342         <strong class="reserved">int</strong>[] bitMasks = sppsm.<a href="../S/2273.html#L285" title="Defined at 285 in src/java/awt/image/SinglePixelPackedSampleModel.java.">getBitMasks</a>();
<a id="L343" name="L343"></a> 343         <strong class="reserved">if</strong> (bitMasks.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> != maskArray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L344" name="L344"></a> 344             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L345" name="L345"></a> 345         <em class="brace">}</em>
<a id="L346" name="L346"></a> 346 
<div class="comment">
 compare 'effective' masks only, i.e. only part of the mask
          which fits the capacity of the transfer type.</div>
<a id="L350" name="L350"></a> 350         <strong class="reserved">int</strong> maxMask = (<strong class="reserved">int</strong>)((1L &lt;&lt; <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.<a href="../S/2284.html#L120" title="Defined at 120 in src/java/awt/image/DataBuffer.java.">getDataTypeSize</a>(transferType)) - 1);
<a id="L351" name="L351"></a> 351         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; bitMasks.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L352" name="L352"></a> 352             <strong class="reserved">if</strong> ((maxMask &amp; bitMasks[i]) != (maxMask &amp; maskArray[i])) <em class="brace">{</em>
<a id="L353" name="L353"></a> 353                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L354" name="L354"></a> 354             <em class="brace">}</em>
<a id="L355" name="L355"></a> 355         <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<a id="L357" name="L357"></a> 357         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L358" name="L358"></a> 358     <em class="brace">}</em>
<a id="L359" name="L359"></a> 359 
<div class="comment">
      Returns a {@link WritableRaster} representing the alpha channel of
      an image, extracted from the input <code>WritableRaster</code>.
      This method assumes that <code>WritableRaster</code> objects
      associated with this <code>ColorModel</code> store the alpha band,
      if present, as the last band of image data.  Returns <code>null</code>
      if there is no separate spatial alpha channel associated with this
      <code>ColorModel</code>.  This method creates a new
      <code>WritableRaster</code>, but shares the data array.
      @param raster a <code>WritableRaster</code> containing an image
      @return a <code>WritableRaster</code> that represents the alpha
              channel of the image contained in <code>raster</code>.</div>
<a id="L373" name="L373"></a> 373     <strong class="reserved">public</strong> <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> <a href="../S/2258.html#L888" title="Referred from 888 in src/java/awt/image/BufferedImage.java.">getAlphaRaster</a>(<a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> raster) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374         <strong class="reserved">if</strong> (<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>() == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L375" name="L375"></a> 375             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L376" name="L376"></a> 376         <em class="brace">}</em>
<a id="L377" name="L377"></a> 377 
<a id="L378" name="L378"></a> 378         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = raster.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L379" name="L379"></a> 379         <strong class="reserved">int</strong> y = raster.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L380" name="L380"></a> 380         <strong class="reserved">int</strong>[] band = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L381" name="L381"></a> 381         band[0] = raster.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>() - 1;
<a id="L382" name="L382"></a> 382         <strong class="reserved">return</strong> raster.<a href="../S/2280.html#L217" title="Defined at 217 in src/java/awt/image/WritableRaster.java.">createWritableChild</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, raster.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>(),
<a id="L383" name="L383"></a> 383                                           raster.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(), <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y,
<a id="L384" name="L384"></a> 384                                           band);
<a id="L385" name="L385"></a> 385     <em class="brace">}</em>
<a id="L386" name="L386"></a> 386 
<div class="comment">
      Tests if the specified <code>Object</code> is an instance
      of <code>PackedColorModel</code> and equals this
      <code>PackedColorModel</code>.
      @param obj the <code>Object</code> to test for equality
      @return <code>true</code> if the specified <code>Object</code>
      is an instance of <code>PackedColorModel</code> and equals this
      <code>PackedColorModel</code>; <code>false</code> otherwise.</div>
<a id="L396" name="L396"></a> 396     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L397" name="L397"></a> 397         <strong class="reserved">if</strong> (!(obj <strong class="reserved">instanceof</strong> <a href="../S/2272.html#L87" title="Defined at 87 in src/java/awt/image/PackedColorModel.java.">PackedColorModel</a>)) <em class="brace">{</em>
<a id="L398" name="L398"></a> 398             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L399" name="L399"></a> 399         <em class="brace">}</em>
<a id="L400" name="L400"></a> 400 
<a id="L401" name="L401"></a> 401         <strong class="reserved">if</strong> (!<strong class="reserved">super</strong>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(obj)) <em class="brace">{</em>
<a id="L402" name="L402"></a> 402             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L403" name="L403"></a> 403         <em class="brace">}</em>
<a id="L404" name="L404"></a> 404 
<a id="L405" name="L405"></a> 405         <a href="../S/2272.html#L87" title="Defined at 87 in src/java/awt/image/PackedColorModel.java.">PackedColorModel</a> cm = (<a href="../S/2272.html#L87" title="Defined at 87 in src/java/awt/image/PackedColorModel.java.">PackedColorModel</a>) obj;
<a id="L406" name="L406"></a> 406         <strong class="reserved">int</strong> numC = cm.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>();
<a id="L407" name="L407"></a> 407         <strong class="reserved">if</strong> (numC != numComponents) <em class="brace">{</em>
<a id="L408" name="L408"></a> 408             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L409" name="L409"></a> 409         <em class="brace">}</em>
<a id="L410" name="L410"></a> 410         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i=0; i &lt; numC; i++) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411             <strong class="reserved">if</strong> (maskArray[i] != cm.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>(i)) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L413" name="L413"></a> 413             <em class="brace">}</em>
<a id="L414" name="L414"></a> 414         <em class="brace">}</em>
<a id="L415" name="L415"></a> 415         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L416" name="L416"></a> 416     <em class="brace">}</em>
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong>[] <a href="../R/12233.html" title="Multiple referred from 2 places.">createBitsArray</a>(<strong class="reserved">int</strong>[]colorMaskArray,
<a id="L419" name="L419"></a> 419                                                <strong class="reserved">int</strong> alphaMask) <em class="brace">{</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">int</strong> numColors = colorMaskArray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L421" name="L421"></a> 421         <strong class="reserved">int</strong> numAlpha = (alphaMask == 0 ? 0 : 1);
<a id="L422" name="L422"></a> 422         <strong class="reserved">int</strong>[] arr = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numColors+numAlpha];
<a id="L423" name="L423"></a> 423         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numColors; i++) <em class="brace">{</em>
<a id="L424" name="L424"></a> 424             arr[i] = <a href="../D/13560.html" title="Multiple defined in 2 places.">countBits</a>(colorMaskArray[i]);
<a id="L425" name="L425"></a> 425             <strong class="reserved">if</strong> (arr[i] &lt; 0) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Noncontiguous color mask ("
<a id="L427" name="L427"></a> 427                                      + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(colorMaskArray[i])+
<a id="L428" name="L428"></a> 428                                      "at index "+i);
<a id="L429" name="L429"></a> 429             <em class="brace">}</em>
<a id="L430" name="L430"></a> 430         <em class="brace">}</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">if</strong> (alphaMask != 0) <em class="brace">{</em>
<a id="L432" name="L432"></a> 432             arr[numColors] = <a href="../D/13560.html" title="Multiple defined in 2 places.">countBits</a>(alphaMask);
<a id="L433" name="L433"></a> 433             <strong class="reserved">if</strong> (arr[numColors] &lt; 0) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Noncontiguous alpha mask ("
<a id="L435" name="L435"></a> 435                                      + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(alphaMask));
<a id="L436" name="L436"></a> 436             <em class="brace">}</em>
<a id="L437" name="L437"></a> 437         <em class="brace">}</em>
<a id="L438" name="L438"></a> 438         <strong class="reserved">return</strong> arr;
<a id="L439" name="L439"></a> 439     <em class="brace">}</em>
<a id="L440" name="L440"></a> 440 
<a id="L441" name="L441"></a> 441     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong>[] <a href="../R/12233.html" title="Multiple referred from 2 places.">createBitsArray</a>(<strong class="reserved">int</strong> rmask, <strong class="reserved">int</strong> gmask, <strong class="reserved">int</strong> bmask,
<a id="L442" name="L442"></a> 442                                          <strong class="reserved">int</strong> amask) <em class="brace">{</em>
<a id="L443" name="L443"></a> 443         <strong class="reserved">int</strong>[] arr = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[3 + (amask == 0 ? 0 : 1)];
<a id="L444" name="L444"></a> 444         arr[0] = <a href="../D/13560.html" title="Multiple defined in 2 places.">countBits</a>(rmask);
<a id="L445" name="L445"></a> 445         arr[1] = <a href="../D/13560.html" title="Multiple defined in 2 places.">countBits</a>(gmask);
<a id="L446" name="L446"></a> 446         arr[2] = <a href="../D/13560.html" title="Multiple defined in 2 places.">countBits</a>(bmask);
<a id="L447" name="L447"></a> 447         <strong class="reserved">if</strong> (arr[0] &lt; 0) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Noncontiguous red mask ("
<a id="L449" name="L449"></a> 449                                      + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(rmask));
<a id="L450" name="L450"></a> 450         <em class="brace">}</em>
<a id="L451" name="L451"></a> 451         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (arr[1] &lt; 0) <em class="brace">{</em>
<a id="L452" name="L452"></a> 452             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Noncontiguous green mask ("
<a id="L453" name="L453"></a> 453                                      + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(gmask));
<a id="L454" name="L454"></a> 454         <em class="brace">}</em>
<a id="L455" name="L455"></a> 455         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (arr[2] &lt; 0) <em class="brace">{</em>
<a id="L456" name="L456"></a> 456             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Noncontiguous blue mask ("
<a id="L457" name="L457"></a> 457                                      + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(bmask));
<a id="L458" name="L458"></a> 458         <em class="brace">}</em>
<a id="L459" name="L459"></a> 459         <strong class="reserved">if</strong> (amask != 0) <em class="brace">{</em>
<a id="L460" name="L460"></a> 460             arr[3] = <a href="../D/13560.html" title="Multiple defined in 2 places.">countBits</a>(amask);
<a id="L461" name="L461"></a> 461             <strong class="reserved">if</strong> (arr[3] &lt; 0) <em class="brace">{</em>
<a id="L462" name="L462"></a> 462                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Noncontiguous alpha mask ("
<a id="L463" name="L463"></a> 463                                      + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(amask));
<a id="L464" name="L464"></a> 464             <em class="brace">}</em>
<a id="L465" name="L465"></a> 465         <em class="brace">}</em>
<a id="L466" name="L466"></a> 466         <strong class="reserved">return</strong> arr;
<a id="L467" name="L467"></a> 467     <em class="brace">}</em>
<a id="L468" name="L468"></a> 468 
<a id="L469" name="L469"></a> 469     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/12168.html" title="Multiple referred from 8 places.">countBits</a>(<strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>) <em class="brace">{</em>
<a id="L470" name="L470"></a> 470         <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0;
<a id="L471" name="L471"></a> 471         <strong class="reserved">if</strong> (<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> != 0) <em class="brace">{</em>
<a id="L472" name="L472"></a> 472             <strong class="reserved">while</strong> ((<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; 1) == 0) <em class="brace">{</em>
<a id="L473" name="L473"></a> 473                 <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &gt;&gt;&gt;= 1;
<a id="L474" name="L474"></a> 474             <em class="brace">}</em>
<a id="L475" name="L475"></a> 475             <strong class="reserved">while</strong> ((<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; 1) == 1) <em class="brace">{</em>
<a id="L476" name="L476"></a> 476                 <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &gt;&gt;&gt;= 1;
<a id="L477" name="L477"></a> 477                 <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++;
<a id="L478" name="L478"></a> 478             <em class="brace">}</em>
<a id="L479" name="L479"></a> 479         <em class="brace">}</em>
<a id="L480" name="L480"></a> 480         <strong class="reserved">if</strong> (<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> != 0) <em class="brace">{</em>
<a id="L481" name="L481"></a> 481             <strong class="reserved">return</strong> -1;
<a id="L482" name="L482"></a> 482         <em class="brace">}</em>
<a id="L483" name="L483"></a> 483         <strong class="reserved">return</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L484" name="L484"></a> 484     <em class="brace">}</em>
<a id="L485" name="L485"></a> 485 
<a id="L486" name="L486"></a> 486 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L243">[^]</a><a href="#L469">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
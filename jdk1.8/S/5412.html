<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/jaxp/validation/SoftReferenceGrammarPool.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L99">[^]</a><a href="#L409">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L99" title="Defined at 99.">retrieveInitialGrammarSet</a></li>
<li><a href="#L121" title="Defined at 121.">cacheGrammars</a></li>
<li><a href="#L143" title="Defined at 143.">retrieveGrammar</a></li>
<li><a href="#L157" title="Defined at 157.">putGrammar</a></li>
<li><a href="#L187" title="Defined at 187.">getGrammar</a></li>
<li><a href="#L215" title="Defined at 215.">removeGrammar</a></li>
<li><a href="#L237" title="Defined at 237.">containsGrammar</a></li>
<li><a href="#L259" title="Defined at 259.">lockPool</a></li>
<li><a href="#L267" title="Defined at 267.">unlockPool</a></li>
<li><a href="#L275" title="Defined at 275.">clear</a></li>
<li><a href="#L294" title="Defined at 294.">equals</a></li>
<li><a href="#L335" title="Defined at 335.">hashCode</a></li>
<li><a href="#L353" title="Defined at 353.">removeEntry</a></li>
<li><a href="#L371" title="Defined at 371.">clean</a></li>
<li><a href="#L409" title="Defined at 409.">clear</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.jaxp.validation;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> java.lang.ref.Reference;
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> java.lang.ref.ReferenceQueue;
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.lang.ref.SoftReference;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.Grammar;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarDescription;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLSchemaDescription;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarPool;
<a id="L31" name="L31"></a>  31 
<div class="comment">
  <p>This grammar pool is a memory sensitive cache. The grammars
  stored in the pool are softly reachable and may be cleared by
  the garbage collector in response to memory demand. Equality
  of <code>XMLSchemaDescription</code>s is determined using both
  the target namespace for the schema and schema location.</p>
  @author Michael Glavassevich, IBM</div>
<a id="L41" name="L41"></a>  41 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../S/5416.html#L52" title="Referred from 52 in src/com/sun/org/apache/xerces/internal/jaxp/validation/WeakReferenceXMLSchema.java.">SoftReferenceGrammarPool</a> <strong class="reserved">implements</strong> <a href="../S/5516.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarPool.java.">XMLGrammarPool</a> <em class="brace">{</em>
<a id="L42" name="L42"></a>  42 
<a id="L43" name="L43"></a>  43     <em class="comment">//</em>
<a id="L44" name="L44"></a>  44     <em class="comment">// Constants</em>
<a id="L45" name="L45"></a>  45     <em class="comment">//</em>
<a id="L46" name="L46"></a>  46 
<div class="comment">
     /** Default size. */</div>
<a id="L48" name="L48"></a>  48     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TABLE_SIZE = 11;
<a id="L49" name="L49"></a>  49 
<div class="comment">
     /** Zero length grammar array. */</div>
<a id="L51" name="L51"></a>  51     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> [] ZERO_LENGTH_GRAMMAR_ARRAY = <strong class="reserved">new</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> [0];
<a id="L52" name="L52"></a>  52 
<a id="L53" name="L53"></a>  53     <em class="comment">//</em>
<a id="L54" name="L54"></a>  54     <em class="comment">// Data</em>
<a id="L55" name="L55"></a>  55     <em class="comment">//</em>
<a id="L56" name="L56"></a>  56 
<div class="comment">
     /** Grammars. */</div>
<a id="L58" name="L58"></a>  58     <strong class="reserved">protected</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> [] fGrammars = <strong class="reserved">null</strong>;
<a id="L59" name="L59"></a>  59 
<div class="comment">
     /** Flag indicating whether this pool is locked */</div>
<a id="L61" name="L61"></a>  61     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fPoolIsLocked;
<a id="L62" name="L62"></a>  62 
<div class="comment">
     /** The number of grammars in the pool */</div>
<a id="L64" name="L64"></a>  64     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> fGrammarCount = 0;
<a id="L65" name="L65"></a>  65 
<div class="comment">
     /** Reference queue for cleared grammar references */</div>
<a id="L67" name="L67"></a>  67     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a> fReferenceQueue = <strong class="reserved">new</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>();
<a id="L68" name="L68"></a>  68 
<a id="L69" name="L69"></a>  69     <em class="comment">//</em>
<a id="L70" name="L70"></a>  70     <em class="comment">// Constructors</em>
<a id="L71" name="L71"></a>  71     <em class="comment">//</em>
<a id="L72" name="L72"></a>  72 
<div class="comment">
     /** Constructs a grammar pool with a default number of buckets. */</div>
<a id="L74" name="L74"></a>  74     <strong class="reserved">public</strong> SoftReferenceGrammarPool() <em class="brace">{</em>
<a id="L75" name="L75"></a>  75         fGrammars = <strong class="reserved">new</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>[TABLE_SIZE];
<a id="L76" name="L76"></a>  76         fPoolIsLocked = <strong class="reserved">false</strong>;
<a id="L77" name="L77"></a>  77     <em class="brace">}</em> <em class="comment">// &lt;init&gt;()</em>
<a id="L78" name="L78"></a>  78 
<div class="comment">
     /** Constructs a grammar pool with a specified number of buckets. */</div>
<a id="L80" name="L80"></a>  80     <strong class="reserved">public</strong> SoftReferenceGrammarPool(<strong class="reserved">int</strong> initialCapacity) <em class="brace">{</em>
<a id="L81" name="L81"></a>  81         fGrammars = <strong class="reserved">new</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>[initialCapacity];
<a id="L82" name="L82"></a>  82         fPoolIsLocked = <strong class="reserved">false</strong>;
<a id="L83" name="L83"></a>  83     <em class="brace">}</em>
<a id="L84" name="L84"></a>  84 
<a id="L85" name="L85"></a>  85     <em class="comment">//</em>
<a id="L86" name="L86"></a>  86     <em class="comment">// XMLGrammarPool methods</em>
<a id="L87" name="L87"></a>  87     <em class="comment">//</em>
<a id="L88" name="L88"></a>  88 
<div class="comment">
 <p> Retrieve the initial known set of grammars. This method is
      called by a validator before the validation starts. The application
      can provide an initial set of grammars available to the current
      validation attempt. </p>
      @param grammarType The type of the grammar, from the
                         <code>com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarDescription</code>
                         interface.
      @return            The set of grammars the validator may put in its "bucket"</div>
<a id="L99" name="L99"></a>  99     <strong class="reserved">public</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> [] <a href="../R/26463.html" title="Multiple referred from 8 places.">retrieveInitialGrammarSet</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> grammarType) <em class="brace">{</em>
<a id="L100" name="L100"></a> 100         <strong class="reserved">synchronized</strong> (fGrammars) <em class="brace">{</em>
<a id="L101" name="L101"></a> 101             <a href="../D/12796.html" title="Multiple defined in 4 places.">clean</a>();
<a id="L102" name="L102"></a> 102             <em class="comment">// Return no grammars. This allows the garbage collector to sift</em>
<a id="L103" name="L103"></a> 103             <em class="comment">// out grammars which are not in use when memory demand is high.</em>
<a id="L104" name="L104"></a> 104             <em class="comment">// It also allows the pool to return the "right" schema grammar</em>
<a id="L105" name="L105"></a> 105             <em class="comment">// based on schema locations.</em>
<a id="L106" name="L106"></a> 106             <strong class="reserved">return</strong> ZERO_LENGTH_GRAMMAR_ARRAY;
<a id="L107" name="L107"></a> 107         <em class="brace">}</em>
<a id="L108" name="L108"></a> 108     <em class="brace">}</em> <em class="comment">// retrieveInitialGrammarSet (String): Grammar[]</em>
<a id="L109" name="L109"></a> 109 
<div class="comment">
 <p> Return the final set of grammars that the validator ended up
      with. This method is called after the validation finishes. The
      application may then choose to cache some of the returned grammars.</p>
      <p>In this implementation, we make our choice based on whether this object
      is "locked"--that is, whether the application has instructed
      us not to accept any new grammars.</p>
      @param grammarType The type of the grammars being returned;
      @param grammars    An array containing the set of grammars being
                         returned; order is not significant.</div>
<a id="L121" name="L121"></a> 121     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10755.html" title="Multiple referred from 10 places.">cacheGrammars</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> grammarType, <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a>[] grammars) <em class="brace">{</em>
<a id="L122" name="L122"></a> 122         <strong class="reserved">if</strong> (!fPoolIsLocked) <em class="brace">{</em>
<a id="L123" name="L123"></a> 123             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; grammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; ++i) <em class="brace">{</em>
<a id="L124" name="L124"></a> 124                 <a href="../D/30001.html" title="Multiple defined in 7 places.">putGrammar</a>(grammars[i]);
<a id="L125" name="L125"></a> 125             <em class="brace">}</em>
<a id="L126" name="L126"></a> 126         <em class="brace">}</em>
<a id="L127" name="L127"></a> 127     <em class="brace">}</em> <em class="comment">// cacheGrammars(String, Grammar[]);</em>
<a id="L128" name="L128"></a> 128 
<div class="comment">
 <p> This method requests that the application retrieve a grammar
      corresponding to the given GrammarIdentifier from its cache.
      If it cannot do so it must return null; the parser will then
      call the EntityResolver. </p>
      <strong>An application must not call its EntityResolver itself
      from this method; this may result in infinite recursions.</strong>
      This implementation chooses to use the root element name to identify a DTD grammar
      and the target namespace to identify a Schema grammar.
      @param desc The description of the Grammar being requested.
      @return     The Grammar corresponding to this description or null if
                  no such Grammar is known.</div>
<a id="L143" name="L143"></a> 143     <strong class="reserved">public</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> <a href="../R/26461.html" title="Multiple referred from 8 places.">retrieveGrammar</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc) <em class="brace">{</em>
<a id="L144" name="L144"></a> 144         <strong class="reserved">return</strong> <a href="../D/19350.html" title="Multiple defined in 8 places.">getGrammar</a>(desc);
<a id="L145" name="L145"></a> 145     <em class="brace">}</em> <em class="comment">// retrieveGrammar(XMLGrammarDescription):  Grammar</em>
<a id="L146" name="L146"></a> 146 
<a id="L147" name="L147"></a> 147     <em class="comment">//</em>
<a id="L148" name="L148"></a> 148     <em class="comment">// Public methods</em>
<a id="L149" name="L149"></a> 149     <em class="comment">//</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
      Puts the specified grammar into the grammar pool and associates it to
      its root element name or its target namespace.
      @param grammar The Grammar.</div>
<a id="L157" name="L157"></a> 157     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25312.html" title="Multiple referred from 23 places.">putGrammar</a>(<a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> grammar) <em class="brace">{</em>
<a id="L158" name="L158"></a> 158         <strong class="reserved">if</strong> (!fPoolIsLocked) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159             <strong class="reserved">synchronized</strong> (fGrammars) <em class="brace">{</em>
<a id="L160" name="L160"></a> 160                 <a href="../D/12796.html" title="Multiple defined in 4 places.">clean</a>();
<a id="L161" name="L161"></a> 161                 <a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc = grammar.<a href="../D/19353.html" title="Multiple defined in 5 places.">getGrammarDescription</a>();
<a id="L162" name="L162"></a> 162                 <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(desc);
<a id="L163" name="L163"></a> 163                 <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp; 0x7FFFFFFF) % fGrammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L164" name="L164"></a> 164                 <strong class="reserved">for</strong> (<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry = fGrammars[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]; entry != <strong class="reserved">null</strong>; entry = entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L165" name="L165"></a> 165                     <strong class="reserved">if</strong> (entry.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp;&amp; <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(entry.desc, desc)) <em class="brace">{</em>
<a id="L166" name="L166"></a> 166                         <strong class="reserved">if</strong> (entry.grammar.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>() != grammar) <em class="brace">{</em>
<a id="L167" name="L167"></a> 167                             entry.grammar = <strong class="reserved">new</strong> <a href="../S/5412.html#L424" title="Defined at 424 in src/com/sun/org/apache/xerces/internal/jaxp/validation/SoftReferenceGrammarPool.java.">SoftGrammarReference</a>(entry, grammar, fReferenceQueue);
<a id="L168" name="L168"></a> 168                         <em class="brace">}</em>
<a id="L169" name="L169"></a> 169                         <strong class="reserved">return</strong>;
<a id="L170" name="L170"></a> 170                     <em class="brace">}</em>
<a id="L171" name="L171"></a> 171                 <em class="brace">}</em>
<a id="L172" name="L172"></a> 172                 <em class="comment">// create a new entry</em>
<a id="L173" name="L173"></a> 173                 <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry = <strong class="reserved">new</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>(<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, desc, grammar, fGrammars[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>], fReferenceQueue);
<a id="L174" name="L174"></a> 174                 fGrammars[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = entry;
<a id="L175" name="L175"></a> 175                 fGrammarCount++;
<a id="L176" name="L176"></a> 176             <em class="brace">}</em>
<a id="L177" name="L177"></a> 177         <em class="brace">}</em>
<a id="L178" name="L178"></a> 178     <em class="brace">}</em> <em class="comment">// putGrammar(Grammar)</em>
<a id="L179" name="L179"></a> 179 
<div class="comment">
      Returns the grammar associated to the specified grammar description.
      Currently, the root element name is used as the key for DTD grammars
      and the target namespace  is used as the key for Schema grammars.
      @param desc The Grammar Description.</div>
<a id="L187" name="L187"></a> 187     <strong class="reserved">public</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> <a href="../R/16800.html" title="Multiple referred from 37 places.">getGrammar</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc) <em class="brace">{</em>
<a id="L188" name="L188"></a> 188         <strong class="reserved">synchronized</strong> (fGrammars) <em class="brace">{</em>
<a id="L189" name="L189"></a> 189             <a href="../D/12796.html" title="Multiple defined in 4 places.">clean</a>();
<a id="L190" name="L190"></a> 190             <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(desc);
<a id="L191" name="L191"></a> 191             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp; 0x7FFFFFFF) % fGrammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L192" name="L192"></a> 192             <strong class="reserved">for</strong> (<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry = fGrammars[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]; entry != <strong class="reserved">null</strong>; entry = entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L193" name="L193"></a> 193                 <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> tempGrammar = (<a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a>) entry.grammar.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<div class="comment">
                 /** If the soft reference has been cleared, remove this entry from the pool. */</div>
<a id="L195" name="L195"></a> 195                 <strong class="reserved">if</strong> (tempGrammar == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L196" name="L196"></a> 196                     <a href="../D/30784.html" title="Multiple defined in 11 places.">removeEntry</a>(entry);
<a id="L197" name="L197"></a> 197                 <em class="brace">}</em>
<a id="L198" name="L198"></a> 198                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((entry.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) &amp;&amp; <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(entry.desc, desc)) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199                     <strong class="reserved">return</strong> tempGrammar;
<a id="L200" name="L200"></a> 200                 <em class="brace">}</em>
<a id="L201" name="L201"></a> 201             <em class="brace">}</em>
<a id="L202" name="L202"></a> 202             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L203" name="L203"></a> 203         <em class="brace">}</em>
<a id="L204" name="L204"></a> 204     <em class="brace">}</em> <em class="comment">// getGrammar(XMLGrammarDescription):Grammar</em>
<a id="L205" name="L205"></a> 205 
<div class="comment">
      Removes the grammar associated to the specified grammar description from the
      grammar pool and returns the removed grammar. Currently, the root element name
      is used as the key for DTD grammars and the target namespace  is used
      as the key for Schema grammars.
      @param desc The Grammar Description.
      @return     The removed grammar.</div>
<a id="L215" name="L215"></a> 215     <strong class="reserved">public</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> removeGrammar(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216         <strong class="reserved">synchronized</strong> (fGrammars) <em class="brace">{</em>
<a id="L217" name="L217"></a> 217             <a href="../D/12796.html" title="Multiple defined in 4 places.">clean</a>();
<a id="L218" name="L218"></a> 218             <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(desc);
<a id="L219" name="L219"></a> 219             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp; 0x7FFFFFFF) % fGrammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L220" name="L220"></a> 220             <strong class="reserved">for</strong> (<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry = fGrammars[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]; entry != <strong class="reserved">null</strong>; entry = entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L221" name="L221"></a> 221                 <strong class="reserved">if</strong> ((entry.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) &amp;&amp; <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(entry.desc, desc)) <em class="brace">{</em>
<a id="L222" name="L222"></a> 222                     <strong class="reserved">return</strong> <a href="../D/30784.html" title="Multiple defined in 11 places.">removeEntry</a>(entry);
<a id="L223" name="L223"></a> 223                 <em class="brace">}</em>
<a id="L224" name="L224"></a> 224             <em class="brace">}</em>
<a id="L225" name="L225"></a> 225             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L226" name="L226"></a> 226         <em class="brace">}</em>
<a id="L227" name="L227"></a> 227     <em class="brace">}</em> <em class="comment">// removeGrammar(XMLGrammarDescription):Grammar</em>
<a id="L228" name="L228"></a> 228 
<div class="comment">
      Returns true if the grammar pool contains a grammar associated
      to the specified grammar description. Currently, the root element name
      is used as the key for DTD grammars and the target namespace  is used
      as the key for Schema grammars.
      @param desc The Grammar Description.</div>
<a id="L237" name="L237"></a> 237     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11961.html" title="Multiple referred from 2 places.">containsGrammar</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc) <em class="brace">{</em>
<a id="L238" name="L238"></a> 238         <strong class="reserved">synchronized</strong> (fGrammars) <em class="brace">{</em>
<a id="L239" name="L239"></a> 239             <a href="../D/12796.html" title="Multiple defined in 4 places.">clean</a>();
<a id="L240" name="L240"></a> 240             <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(desc);
<a id="L241" name="L241"></a> 241             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> &amp; 0x7FFFFFFF) % fGrammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L242" name="L242"></a> 242             <strong class="reserved">for</strong> (<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry = fGrammars[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]; entry != <strong class="reserved">null</strong> ; entry = entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243                 <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> tempGrammar = (<a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a>) entry.grammar.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<div class="comment">
                 /** If the soft reference has been cleared, remove this entry from the pool. */</div>
<a id="L245" name="L245"></a> 245                 <strong class="reserved">if</strong> (tempGrammar == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L246" name="L246"></a> 246                     <a href="../D/30784.html" title="Multiple defined in 11 places.">removeEntry</a>(entry);
<a id="L247" name="L247"></a> 247                 <em class="brace">}</em>
<a id="L248" name="L248"></a> 248                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((entry.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> == <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>) &amp;&amp; <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(entry.desc, desc)) <em class="brace">{</em>
<a id="L249" name="L249"></a> 249                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L250" name="L250"></a> 250                 <em class="brace">}</em>
<a id="L251" name="L251"></a> 251             <em class="brace">}</em>
<a id="L252" name="L252"></a> 252             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L253" name="L253"></a> 253         <em class="brace">}</em>
<a id="L254" name="L254"></a> 254     <em class="brace">}</em> <em class="comment">// containsGrammar(XMLGrammarDescription):boolean</em>
<a id="L255" name="L255"></a> 255 
<div class="comment">
 <p> Sets this grammar pool to a "locked" state--i.e.,
      no new grammars will be added until it is "unlocked".</p></div>
<a id="L259" name="L259"></a> 259     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/22671.html" title="Multiple referred from 3 places.">lockPool</a>() <em class="brace">{</em>
<a id="L260" name="L260"></a> 260         fPoolIsLocked = <strong class="reserved">true</strong>;
<a id="L261" name="L261"></a> 261     <em class="brace">}</em> <em class="comment">// lockPool()</em>
<a id="L262" name="L262"></a> 262 
<div class="comment">
 <p> Sets this grammar pool to an "unlocked" state--i.e.,
      new grammars will be added when putGrammar or cacheGrammars
      are called.</p></div>
<a id="L267" name="L267"></a> 267     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29714.html" title="Multiple referred from 3 places.">unlockPool</a>() <em class="brace">{</em>
<a id="L268" name="L268"></a> 268         fPoolIsLocked = <strong class="reserved">false</strong>;
<a id="L269" name="L269"></a> 269     <em class="brace">}</em> <em class="comment">// unlockPool()</em>
<a id="L270" name="L270"></a> 270 
<div class="comment">
      <p>This method clears the pool-i.e., removes references
      to all the grammars in it.</p></div>
<a id="L275" name="L275"></a> 275     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L276" name="L276"></a> 276         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;fGrammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L277" name="L277"></a> 277             <strong class="reserved">if</strong>(fGrammars[i] != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L278" name="L278"></a> 278                 fGrammars[i].<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L279" name="L279"></a> 279                 fGrammars[i] = <strong class="reserved">null</strong>;
<a id="L280" name="L280"></a> 280             <em class="brace">}</em>
<a id="L281" name="L281"></a> 281         <em class="brace">}</em>
<a id="L282" name="L282"></a> 282         fGrammarCount = 0;
<a id="L283" name="L283"></a> 283     <em class="brace">}</em> <em class="comment">// clear()</em>
<a id="L284" name="L284"></a> 284 
<div class="comment">
      This method checks whether two grammars are the same. Currently, we compare
      the root element names for DTD grammars and the target namespaces for Schema grammars.
      The application can override this behaviour and add its own logic.
      @param desc1 The grammar description
      @param desc2 The grammar description of the grammar to be compared to
      @return      True if the grammars are equal, otherwise false</div>
<a id="L294" name="L294"></a> 294     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc1, <a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc2) <em class="brace">{</em>
<a id="L295" name="L295"></a> 295         <strong class="reserved">if</strong> (desc1 <strong class="reserved">instanceof</strong> <a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a>) <em class="brace">{</em>
<a id="L296" name="L296"></a> 296             <strong class="reserved">if</strong> (!(desc2 <strong class="reserved">instanceof</strong> <a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a>)) <em class="brace">{</em>
<a id="L297" name="L297"></a> 297                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L298" name="L298"></a> 298             <em class="brace">}</em>
<a id="L299" name="L299"></a> 299             <strong class="reserved">final</strong> <a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a> sd1 = (<a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a>) desc1;
<a id="L300" name="L300"></a> 300             <strong class="reserved">final</strong> <a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a> sd2 = (<a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a>) desc2;
<a id="L301" name="L301"></a> 301             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35219.html" title="Multiple defined in 5 places.">targetNamespace</a> = sd1.<a href="../D/23016.html" title="Multiple defined in 4 places.">getTargetNamespace</a>();
<a id="L302" name="L302"></a> 302             <strong class="reserved">if</strong> (<a href="../D/35219.html" title="Multiple defined in 5 places.">targetNamespace</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L303" name="L303"></a> 303                 <strong class="reserved">if</strong> (!<a href="../D/35219.html" title="Multiple defined in 5 places.">targetNamespace</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(sd2.<a href="../D/23016.html" title="Multiple defined in 4 places.">getTargetNamespace</a>())) <em class="brace">{</em>
<a id="L304" name="L304"></a> 304                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L305" name="L305"></a> 305                 <em class="brace">}</em>
<a id="L306" name="L306"></a> 306             <em class="brace">}</em>
<a id="L307" name="L307"></a> 307             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sd2.<a href="../D/23016.html" title="Multiple defined in 4 places.">getTargetNamespace</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L308" name="L308"></a> 308                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L309" name="L309"></a> 309             <em class="brace">}</em>
<a id="L310" name="L310"></a> 310             <em class="comment">// The JAXP 1.3 spec says that the implementation can assume that</em>
<a id="L311" name="L311"></a> 311             <em class="comment">// if two schema location hints are the same they always resolve</em>
<a id="L312" name="L312"></a> 312             <em class="comment">// to the same document. In the default grammar pool implementation</em>
<a id="L313" name="L313"></a> 313             <em class="comment">// we only look at the target namespaces. Here we also compare</em>
<a id="L314" name="L314"></a> 314             <em class="comment">// location hints.</em>
<a id="L315" name="L315"></a> 315             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> expandedSystemId = sd1.<a href="../D/18928.html" title="Multiple defined in 10 places.">getExpandedSystemId</a>();
<a id="L316" name="L316"></a> 316             <strong class="reserved">if</strong> (expandedSystemId != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L317" name="L317"></a> 317                 <strong class="reserved">if</strong> (!expandedSystemId.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(sd2.<a href="../D/18928.html" title="Multiple defined in 10 places.">getExpandedSystemId</a>())) <em class="brace">{</em>
<a id="L318" name="L318"></a> 318                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L319" name="L319"></a> 319                 <em class="brace">}</em>
<a id="L320" name="L320"></a> 320             <em class="brace">}</em>
<a id="L321" name="L321"></a> 321             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sd2.<a href="../D/18928.html" title="Multiple defined in 10 places.">getExpandedSystemId</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L322" name="L322"></a> 322                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L323" name="L323"></a> 323             <em class="brace">}</em>
<a id="L324" name="L324"></a> 324             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L325" name="L325"></a> 325         <em class="brace">}</em>
<a id="L326" name="L326"></a> 326         <strong class="reserved">return</strong> desc1.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(desc2);
<a id="L327" name="L327"></a> 327     <em class="brace">}</em>
<a id="L328" name="L328"></a> 328 
<div class="comment">
      Returns the hash code value for the given grammar description.
      @param desc The grammar description
      @return     The hash code value</div>
<a id="L335" name="L335"></a> 335     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336         <strong class="reserved">if</strong> (desc <strong class="reserved">instanceof</strong> <a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a>) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337             <strong class="reserved">final</strong> <a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a> sd = (<a href="../S/5513.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLSchemaDescription.java.">XMLSchemaDescription</a>) desc;
<a id="L338" name="L338"></a> 338             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35219.html" title="Multiple defined in 5 places.">targetNamespace</a> = sd.<a href="../D/23016.html" title="Multiple defined in 4 places.">getTargetNamespace</a>();
<a id="L339" name="L339"></a> 339             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> expandedSystemId = sd.<a href="../D/18928.html" title="Multiple defined in 10 places.">getExpandedSystemId</a>();
<a id="L340" name="L340"></a> 340             <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = (<a href="../D/35219.html" title="Multiple defined in 5 places.">targetNamespace</a> != <strong class="reserved">null</strong>) ? <a href="../D/35219.html" title="Multiple defined in 5 places.">targetNamespace</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() : 0;
<a id="L341" name="L341"></a> 341             <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> ^= (expandedSystemId != <strong class="reserved">null</strong>) ? expandedSystemId.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() : 0;
<a id="L342" name="L342"></a> 342             <strong class="reserved">return</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L343" name="L343"></a> 343         <em class="brace">}</em>
<a id="L344" name="L344"></a> 344         <strong class="reserved">return</strong> desc.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L345" name="L345"></a> 345     <em class="brace">}</em>
<a id="L346" name="L346"></a> 346 
<div class="comment">
      Removes the given entry from the pool
      @param entry the entry to remove
      @return The grammar attached to this entry</div>
<a id="L353" name="L353"></a> 353     <strong class="reserved">private</strong> <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> <a href="../R/25957.html" title="Multiple referred from 10 places.">removeEntry</a>(<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry) <em class="brace">{</em>
<a id="L354" name="L354"></a> 354         <strong class="reserved">if</strong> (entry.prev != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L355" name="L355"></a> 355             entry.prev.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L356" name="L356"></a> 356         <em class="brace">}</em>
<a id="L357" name="L357"></a> 357         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L358" name="L358"></a> 358             fGrammars[entry.bucket] = entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L359" name="L359"></a> 359         <em class="brace">}</em>
<a id="L360" name="L360"></a> 360         <strong class="reserved">if</strong> (entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L361" name="L361"></a> 361             entry.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.prev = entry.prev;
<a id="L362" name="L362"></a> 362         <em class="brace">}</em>
<a id="L363" name="L363"></a> 363         --fGrammarCount;
<a id="L364" name="L364"></a> 364         entry.grammar.entry = <strong class="reserved">null</strong>;
<a id="L365" name="L365"></a> 365         <strong class="reserved">return</strong> (<a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a>) entry.grammar.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<div class="comment">
      Removes stale entries from the pool.</div>
<a id="L371" name="L371"></a> 371     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11476.html" title="Multiple referred from 8 places.">clean</a>() <em class="brace">{</em>
<a id="L372" name="L372"></a> 372         <a href="../D/7176.html" title="Multiple defined in 5 places.">Reference</a> <a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a> = fReferenceQueue.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L373" name="L373"></a> 373         <strong class="reserved">while</strong> (<a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374             <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry = ((<a href="../S/5412.html#L424" title="Defined at 424 in src/com/sun/org/apache/xerces/internal/jaxp/validation/SoftReferenceGrammarPool.java.">SoftGrammarReference</a>) <a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>).entry;
<a id="L375" name="L375"></a> 375             <strong class="reserved">if</strong> (entry != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376                 <a href="../D/30784.html" title="Multiple defined in 11 places.">removeEntry</a>(entry);
<a id="L377" name="L377"></a> 377             <em class="brace">}</em>
<a id="L378" name="L378"></a> 378             <a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a> = fReferenceQueue.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L379" name="L379"></a> 379         <em class="brace">}</em>
<a id="L380" name="L380"></a> 380     <em class="brace">}</em>
<a id="L381" name="L381"></a> 381 
<div class="comment">
      This class is a grammar pool entry. Each entry acts as a node
      in a doubly linked list.</div>
<a id="L386" name="L386"></a> 386     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2694.html" title="Multiple referred from 1260 places.">Entry</a> <em class="brace">{</em>
<a id="L387" name="L387"></a> 387 
<a id="L388" name="L388"></a> 388         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L389" name="L389"></a> 389         <strong class="reserved">public</strong> <strong class="reserved">int</strong> bucket;
<a id="L390" name="L390"></a> 390         <strong class="reserved">public</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> prev;
<a id="L391" name="L391"></a> 391         <strong class="reserved">public</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L392" name="L392"></a> 392         <strong class="reserved">public</strong> <a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc;
<a id="L393" name="L393"></a> 393         <strong class="reserved">public</strong> <a href="../S/5412.html#L424" title="Defined at 424 in src/com/sun/org/apache/xerces/internal/jaxp/validation/SoftReferenceGrammarPool.java.">SoftGrammarReference</a> grammar;
<a id="L394" name="L394"></a> 394 
<a id="L395" name="L395"></a> 395         <strong class="reserved">protected</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>(<strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>, <strong class="reserved">int</strong> bucket, <a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a> desc, <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> grammar, Entry <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a> queue) <em class="brace">{</em>
<a id="L396" name="L396"></a> 396             <strong class="reserved">this</strong>.<a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L397" name="L397"></a> 397             <strong class="reserved">this</strong>.bucket = bucket;
<a id="L398" name="L398"></a> 398             <strong class="reserved">this</strong>.prev = <strong class="reserved">null</strong>;
<a id="L399" name="L399"></a> 399             <strong class="reserved">this</strong>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L400" name="L400"></a> 400             <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L401" name="L401"></a> 401                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.prev = <strong class="reserved">this</strong>;
<a id="L402" name="L402"></a> 402             <em class="brace">}</em>
<a id="L403" name="L403"></a> 403             <strong class="reserved">this</strong>.desc = desc;
<a id="L404" name="L404"></a> 404             <strong class="reserved">this</strong>.grammar = <strong class="reserved">new</strong> <a href="../S/5412.html#L424" title="Defined at 424 in src/com/sun/org/apache/xerces/internal/jaxp/validation/SoftReferenceGrammarPool.java.">SoftGrammarReference</a>(<strong class="reserved">this</strong>, grammar, queue);
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<a id="L407" name="L407"></a> 407         <em class="comment">// clear this entry; useful to promote garbage collection</em>
<a id="L408" name="L408"></a> 408         <em class="comment">// since reduces reference count of objects to be destroyed</em>
<a id="L409" name="L409"></a> 409         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a> () <em class="brace">{</em>
<a id="L410" name="L410"></a> 410             desc = <strong class="reserved">null</strong>;
<a id="L411" name="L411"></a> 411             grammar = <strong class="reserved">null</strong>;
<a id="L412" name="L412"></a> 412             <strong class="reserved">if</strong>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L414" name="L414"></a> 414                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">null</strong>;
<a id="L415" name="L415"></a> 415             <em class="brace">}</em>
<a id="L416" name="L416"></a> 416         <em class="brace">}</em> <em class="comment">// clear()</em>
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418     <em class="brace">}</em> <em class="comment">// class Entry</em>
<a id="L419" name="L419"></a> 419 
<div class="comment">
      This class stores a soft reference to a grammar object. It keeps a reference
      to its associated entry, so that it can be easily removed from the pool.</div>
<a id="L424" name="L424"></a> 424     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7469.html" title="Multiple referred from 4 places.">SoftGrammarReference</a> <strong class="reserved">extends</strong> <a href="../S/1564.html#L64" title="Defined at 64 in src/java/lang/ref/SoftReference.java.">SoftReference</a> <em class="brace">{</em>
<a id="L425" name="L425"></a> 425 
<a id="L426" name="L426"></a> 426         <strong class="reserved">public</strong> <a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry;
<a id="L427" name="L427"></a> 427 
<a id="L428" name="L428"></a> 428         <strong class="reserved">protected</strong> SoftGrammarReference(<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a> entry, <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> grammar, <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a> queue) <em class="brace">{</em>
<a id="L429" name="L429"></a> 429             <strong class="reserved">super</strong>(grammar, queue);
<a id="L430" name="L430"></a> 430             <strong class="reserved">this</strong>.entry = entry;
<a id="L431" name="L431"></a> 431         <em class="brace">}</em>
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433     <em class="brace">}</em> <em class="comment">// class SoftGrammarReference</em>
<a id="L434" name="L434"></a> 434 
<a id="L435" name="L435"></a> 435 <em class="brace">}</em> <em class="comment">// class SoftReferenceGrammarPool</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L99">[^]</a><a href="#L409">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
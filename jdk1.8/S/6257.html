<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/lib/ExsltDynamic.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L101">[^]</a><a href="#L532">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L101" title="Defined at 101.">max</a></li>
<li><a href="#L182" title="Defined at 182.">min</a></li>
<li><a href="#L263" title="Defined at 263.">sum</a></li>
<li><a href="#L365" title="Defined at 365.">map</a></li>
<li><a href="#L464" title="Defined at 464.">evaluate</a></li>
<li><a href="#L532" title="Defined at 532.">closure</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: ExsltDynamic.java,v 1.1.2.1 2005/08/01 02:08:51 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.lib;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilder;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilderFactory;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> javax.xml.transform.TransformerException;
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.extensions.ExpressionContext;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.res.XSLMessages;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.res.XSLTErrorResources;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.NodeSet;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.NodeSetDTM;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPath;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPathContext;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XBoolean;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XNodeSet;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XNumber;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XObject;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> org.w3c.dom.Element;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> org.w3c.dom.Text;
<a id="L46" name="L46"></a>  46 
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> org.xml.sax.SAXNotSupportedException;
<a id="L48" name="L48"></a>  48 
<div class="comment">
  This class contains EXSLT dynamic extension functions.
  It is accessed by specifying a namespace URI as follows:
  <pre>     xmlns:dyn="http://exslt.org/dynamic"
  </pre>
  The documentation for each function has been copied from the relevant
  EXSLT Implementer page.
  @see <a href="http://www.exslt.org/">EXSLT</a>
  @xsl.usage general</div>
<a id="L63" name="L63"></a>  63 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../S/6259.html#L225" title="Referred from 225 in src/com/sun/org/apache/xalan/internal/lib/Extensions.java.">ExsltDynamic</a> <strong class="reserved">extends</strong> <a href="../S/6261.html#L34" title="Defined at 34 in src/com/sun/org/apache/xalan/internal/lib/ExsltBase.java.">ExsltBase</a>
<a id="L64" name="L64"></a>  64 <em class="brace">{</em>
<a id="L65" name="L65"></a>  65 
<a id="L66" name="L66"></a>  66    <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> EXSL_URI = "http://exslt.org/common";
<a id="L67" name="L67"></a>  67 
<div class="comment">
    The dyn:max function calculates the maximum value for the nodes passed as
    the first argument, where the value of each node is calculated dynamically
    using an XPath expression passed as a string as the second argument.
    <p>
    The expressions are evaluated relative to the nodes passed as the first argument.
    In other words, the value for each node is calculated by evaluating the XPath
    expression with all context information being the same as that for the call to
    the dyn:max function itself, except for the following:
    </p><p>
    </p><ul><li>the context node is the node whose value is being calculated.</li><li>the context position is the position of the node within the node set passed as
      the first argument to the dyn:max function, arranged in document order.</li><li>the context size is the number of nodes passed as the first argument to the
      dyn:max function.</li>
    </ul>
    <p>
    The dyn:max function returns the maximum of these values, calculated in exactly
    the same way as for math:max.
    </p><p>
    If the expression string passed as the second argument is an invalid XPath
    expression (including an empty string), this function returns NaN.
    </p><p>
    This function must take a second argument. To calculate the maximum of a set of
    nodes based on their string values, you should use the math:max function.
    @param myContext The ExpressionContext passed by the extension processor
    @param nl The node set
    @param expr The expression string
    @return The maximum evaluation value</p></div>
<a id="L101" name="L101"></a> 101   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/23166.html" title="Multiple referred from 1608 places.">max</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L102" name="L102"></a> 102     <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L103" name="L103"></a> 103   <em class="brace">{</em>
<a id="L104" name="L104"></a> 104 
<a id="L105" name="L105"></a> 105     <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = <strong class="reserved">null</strong>;
<a id="L106" name="L106"></a> 106     <strong class="reserved">if</strong> (myContext <strong class="reserved">instanceof</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>)
<a id="L107" name="L107"></a> 107       xctxt = ((<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>) myContext).<a href="../D/23775.html" title="Multiple defined in 5 places.">getXPathContext</a>();
<a id="L108" name="L108"></a> 108     <strong class="reserved">else</strong>
<a id="L109" name="L109"></a> 109       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(<a href="../S/5962.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/res/XSLTErrorResources.java.">XSLTErrorResources</a>.ER_INVALID_CONTEXT_PASSED, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>myContext <em class="brace">}</em>));
<a id="L110" name="L110"></a> 110 
<a id="L111" name="L111"></a> 111     <strong class="reserved">if</strong> (<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> == <strong class="reserved">null</strong> || <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L112" name="L112"></a> 112       <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L113" name="L113"></a> 113 
<a id="L114" name="L114"></a> 114     <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> contextNodes = <strong class="reserved">new</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>(nl, xctxt);
<a id="L115" name="L115"></a> 115     xctxt.<a href="../S/4946.html#L654" title="Defined at 654 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushContextNodeList</a>(contextNodes);
<a id="L116" name="L116"></a> 116 
<a id="L117" name="L117"></a> 117     <strong class="reserved">double</strong> maxValue = - <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.MAX_VALUE;
<a id="L118" name="L118"></a> 118     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; contextNodes.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L119" name="L119"></a> 119     <em class="brace">{</em>
<a id="L120" name="L120"></a> 120       <strong class="reserved">int</strong> contextNode = contextNodes.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L121" name="L121"></a> 121       xctxt.<a href="../S/4946.html#L750" title="Defined at 750 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushCurrentNode</a>(contextNode);
<a id="L122" name="L122"></a> 122 
<a id="L123" name="L123"></a> 123       <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = 0;
<a id="L124" name="L124"></a> 124       <strong class="reserved">try</strong>
<a id="L125" name="L125"></a> 125       <em class="brace">{</em>
<a id="L126" name="L126"></a> 126         <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> dynamicXPath = <strong class="reserved">new</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>, xctxt.<a href="../S/4946.html#L427" title="Defined at 427 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSAXLocator</a>(),
<a id="L127" name="L127"></a> 127                                        xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>(),
<a id="L128" name="L128"></a> 128                                        <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.SELECT);
<a id="L129" name="L129"></a> 129         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = dynamicXPath.<a href="../D/15800.html" title="Multiple defined in 82 places.">execute</a>(xctxt, contextNode, xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>()).<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>();
<a id="L130" name="L130"></a> 130       <em class="brace">}</em>
<a id="L131" name="L131"></a> 131       <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e)
<a id="L132" name="L132"></a> 132       <em class="brace">{</em>
<a id="L133" name="L133"></a> 133         xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L134" name="L134"></a> 134         xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L135" name="L135"></a> 135         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L136" name="L136"></a> 136       <em class="brace">}</em>
<a id="L137" name="L137"></a> 137 
<a id="L138" name="L138"></a> 138       xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L139" name="L139"></a> 139 
<a id="L140" name="L140"></a> 140       <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> &gt; maxValue)
<a id="L141" name="L141"></a> 141           maxValue = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L142" name="L142"></a> 142     <em class="brace">}</em>
<a id="L143" name="L143"></a> 143 
<a id="L144" name="L144"></a> 144     xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L145" name="L145"></a> 145     <strong class="reserved">return</strong> maxValue;
<a id="L146" name="L146"></a> 146 
<a id="L147" name="L147"></a> 147   <em class="brace">}</em>
<a id="L148" name="L148"></a> 148 
<div class="comment">
    The dyn:min function calculates the minimum value for the nodes passed as the
    first argument, where the value of each node is calculated dynamically using
    an XPath expression passed as a string as the second argument.
    <p>
    The expressions are evaluated relative to the nodes passed as the first argument.
    In other words, the value for each node is calculated by evaluating the XPath
    expression with all context information being the same as that for the call to
    the dyn:min function itself, except for the following:
    </p><p>
    </p><ul><li>the context node is the node whose value is being calculated.</li><li>the context position is the position of the node within the node set passed
       as the first argument to the dyn:min function, arranged in document order.</li><li>the context size is the number of nodes passed as the first argument to the
       dyn:min function.</li>
    </ul>
    <p>
    The dyn:min function returns the minimum of these values, calculated in exactly
    the same way as for math:min.
    </p><p>
    If the expression string passed as the second argument is an invalid XPath expression
    (including an empty string), this function returns NaN.
    </p><p>
    This function must take a second argument. To calculate the minimum of a set of
    nodes based on their string values, you should use the math:min function.
    @param myContext The ExpressionContext passed by the extension processor
    @param nl The node set
    @param expr The expression string
    @return The minimum evaluation value</p></div>
<a id="L182" name="L182"></a> 182   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/23287.html" title="Multiple referred from 1252 places.">min</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L183" name="L183"></a> 183     <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L184" name="L184"></a> 184   <em class="brace">{</em>
<a id="L185" name="L185"></a> 185 
<a id="L186" name="L186"></a> 186     <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = <strong class="reserved">null</strong>;
<a id="L187" name="L187"></a> 187     <strong class="reserved">if</strong> (myContext <strong class="reserved">instanceof</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>)
<a id="L188" name="L188"></a> 188       xctxt = ((<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>) myContext).<a href="../D/23775.html" title="Multiple defined in 5 places.">getXPathContext</a>();
<a id="L189" name="L189"></a> 189     <strong class="reserved">else</strong>
<a id="L190" name="L190"></a> 190       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(<a href="../S/5962.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/res/XSLTErrorResources.java.">XSLTErrorResources</a>.ER_INVALID_CONTEXT_PASSED, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>myContext <em class="brace">}</em>));
<a id="L191" name="L191"></a> 191 
<a id="L192" name="L192"></a> 192     <strong class="reserved">if</strong> (<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> == <strong class="reserved">null</strong> || <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L193" name="L193"></a> 193       <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195     <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> contextNodes = <strong class="reserved">new</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>(nl, xctxt);
<a id="L196" name="L196"></a> 196     xctxt.<a href="../S/4946.html#L654" title="Defined at 654 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushContextNodeList</a>(contextNodes);
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198     <strong class="reserved">double</strong> minValue = <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.MAX_VALUE;
<a id="L199" name="L199"></a> 199     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nl.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L200" name="L200"></a> 200     <em class="brace">{</em>
<a id="L201" name="L201"></a> 201       <strong class="reserved">int</strong> contextNode = contextNodes.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L202" name="L202"></a> 202       xctxt.<a href="../S/4946.html#L750" title="Defined at 750 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushCurrentNode</a>(contextNode);
<a id="L203" name="L203"></a> 203 
<a id="L204" name="L204"></a> 204       <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = 0;
<a id="L205" name="L205"></a> 205       <strong class="reserved">try</strong>
<a id="L206" name="L206"></a> 206       <em class="brace">{</em>
<a id="L207" name="L207"></a> 207         <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> dynamicXPath = <strong class="reserved">new</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>, xctxt.<a href="../S/4946.html#L427" title="Defined at 427 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSAXLocator</a>(),
<a id="L208" name="L208"></a> 208                                        xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>(),
<a id="L209" name="L209"></a> 209                                        <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.SELECT);
<a id="L210" name="L210"></a> 210         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = dynamicXPath.<a href="../D/15800.html" title="Multiple defined in 82 places.">execute</a>(xctxt, contextNode, xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>()).<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>();
<a id="L211" name="L211"></a> 211       <em class="brace">}</em>
<a id="L212" name="L212"></a> 212       <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e)
<a id="L213" name="L213"></a> 213       <em class="brace">{</em>
<a id="L214" name="L214"></a> 214         xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L215" name="L215"></a> 215         xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L216" name="L216"></a> 216         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L217" name="L217"></a> 217       <em class="brace">}</em>
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219       xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221       <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> &lt; minValue)
<a id="L222" name="L222"></a> 222           minValue = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L223" name="L223"></a> 223     <em class="brace">}</em>
<a id="L224" name="L224"></a> 224 
<a id="L225" name="L225"></a> 225     xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L226" name="L226"></a> 226     <strong class="reserved">return</strong> minValue;
<a id="L227" name="L227"></a> 227 
<a id="L228" name="L228"></a> 228   <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<div class="comment">
    The dyn:sum function calculates the sum for the nodes passed as the first argument,
    where the value of each node is calculated dynamically using an XPath expression
    passed as a string as the second argument.
    <p>
    The expressions are evaluated relative to the nodes passed as the first argument.
    In other words, the value for each node is calculated by evaluating the XPath
    expression with all context information being the same as that for the call to
    the dyn:sum function itself, except for the following:
    </p><p>
    </p><ul><li>the context node is the node whose value is being calculated.</li><li>the context position is the position of the node within the node set passed as
       the first argument to the dyn:sum function, arranged in document order.</li><li>the context size is the number of nodes passed as the first argument to the
       dyn:sum function.</li>
    </ul>
    <p>
    The dyn:sum function returns the sumimum of these values, calculated in exactly
    the same way as for sum.
    </p><p>
    If the expression string passed as the second argument is an invalid XPath
    expression (including an empty string), this function returns NaN.
    </p><p>
    This function must take a second argument. To calculate the sumimum of a set of
    nodes based on their string values, you should use the sum function.
    @param myContext The ExpressionContext passed by the extension processor
    @param nl The node set
    @param expr The expression string
    @return The sum of the evaluation value on each node</p></div>
<a id="L263" name="L263"></a> 263   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/29032.html" title="Multiple referred from 204 places.">sum</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L264" name="L264"></a> 264     <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L265" name="L265"></a> 265   <em class="brace">{</em>
<a id="L266" name="L266"></a> 266     <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = <strong class="reserved">null</strong>;
<a id="L267" name="L267"></a> 267     <strong class="reserved">if</strong> (myContext <strong class="reserved">instanceof</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>)
<a id="L268" name="L268"></a> 268       xctxt = ((<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>) myContext).<a href="../D/23775.html" title="Multiple defined in 5 places.">getXPathContext</a>();
<a id="L269" name="L269"></a> 269     <strong class="reserved">else</strong>
<a id="L270" name="L270"></a> 270       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(<a href="../S/5962.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/res/XSLTErrorResources.java.">XSLTErrorResources</a>.ER_INVALID_CONTEXT_PASSED, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>myContext <em class="brace">}</em>));
<a id="L271" name="L271"></a> 271 
<a id="L272" name="L272"></a> 272     <strong class="reserved">if</strong> (<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> == <strong class="reserved">null</strong> || <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L273" name="L273"></a> 273       <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L274" name="L274"></a> 274 
<a id="L275" name="L275"></a> 275     <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> contextNodes = <strong class="reserved">new</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>(nl, xctxt);
<a id="L276" name="L276"></a> 276     xctxt.<a href="../S/4946.html#L654" title="Defined at 654 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushContextNodeList</a>(contextNodes);
<a id="L277" name="L277"></a> 277 
<a id="L278" name="L278"></a> 278     <strong class="reserved">double</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = 0;
<a id="L279" name="L279"></a> 279     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nl.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L280" name="L280"></a> 280     <em class="brace">{</em>
<a id="L281" name="L281"></a> 281       <strong class="reserved">int</strong> contextNode = contextNodes.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L282" name="L282"></a> 282       xctxt.<a href="../S/4946.html#L750" title="Defined at 750 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushCurrentNode</a>(contextNode);
<a id="L283" name="L283"></a> 283 
<a id="L284" name="L284"></a> 284       <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = 0;
<a id="L285" name="L285"></a> 285       <strong class="reserved">try</strong>
<a id="L286" name="L286"></a> 286       <em class="brace">{</em>
<a id="L287" name="L287"></a> 287         <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> dynamicXPath = <strong class="reserved">new</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>, xctxt.<a href="../S/4946.html#L427" title="Defined at 427 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSAXLocator</a>(),
<a id="L288" name="L288"></a> 288                                        xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>(),
<a id="L289" name="L289"></a> 289                                        <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.SELECT);
<a id="L290" name="L290"></a> 290         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = dynamicXPath.<a href="../D/15800.html" title="Multiple defined in 82 places.">execute</a>(xctxt, contextNode, xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>()).<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>();
<a id="L291" name="L291"></a> 291       <em class="brace">}</em>
<a id="L292" name="L292"></a> 292       <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e)
<a id="L293" name="L293"></a> 293       <em class="brace">{</em>
<a id="L294" name="L294"></a> 294         xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L295" name="L295"></a> 295         xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L296" name="L296"></a> 296         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L297" name="L297"></a> 297       <em class="brace">}</em>
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299       xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L300" name="L300"></a> 300 
<a id="L301" name="L301"></a> 301       <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> = <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a> + <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L302" name="L302"></a> 302 
<a id="L303" name="L303"></a> 303     <em class="brace">}</em>
<a id="L304" name="L304"></a> 304 
<a id="L305" name="L305"></a> 305     xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L306" name="L306"></a> 306     <strong class="reserved">return</strong> <a href="../D/35029.html" title="Multiple defined in 15 places.">sum</a>;
<a id="L307" name="L307"></a> 307   <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<div class="comment">
    The dyn:map function evaluates the expression passed as the second argument for
    each of the nodes passed as the first argument, and returns a node set of those values.
    <p>
    The expressions are evaluated relative to the nodes passed as the first argument.
    In other words, the value for each node is calculated by evaluating the XPath
    expression with all context information being the same as that for the call to
    the dyn:map function itself, except for the following:
    </p><p>
    </p><ul><li>The context node is the node whose value is being calculated.</li><li>the context position is the position of the node within the node set passed
       as the first argument to the dyn:map function, arranged in document order.</li><li>the context size is the number of nodes passed as the first argument to the
       dyn:map function.</li>
    </ul>
    <p>
    If the expression string passed as the second argument is an invalid XPath
    expression (including an empty string), this function returns an empty node set.
    </p><p>
    If the XPath expression evaluates as a node set, the dyn:map function returns
    the union of the node sets returned by evaluating the expression for each of the
    nodes in the first argument. Note that this may mean that the node set resulting
    from the call to the dyn:map function contains a different number of nodes from
    the number in the node set passed as the first argument to the function.
    </p><p>
    If the XPath expression evaluates as a number, the dyn:map function returns a
    node set containing one exsl:number element (namespace http://exslt.org/common)
    for each node in the node set passed as the first argument to the dyn:map function,
    in document order. The string value of each exsl:number element is the same as
    the result of converting the number resulting from evaluating the expression to
    a string as with the number function, with the exception that Infinity results
    in an exsl:number holding the highest number the implementation can store, and
    -Infinity results in an exsl:number holding the lowest number the implementation
    can store.
    </p><p>
    If the XPath expression evaluates as a boolean, the dyn:map function returns a
    node set containing one exsl:boolean element (namespace http://exslt.org/common)
    for each node in the node set passed as the first argument to the dyn:map function,
    in document order. The string value of each exsl:boolean element is 'true' if the
    expression evaluates as true for the node, and '' if the expression evaluates as
    false.
    </p><p>
    Otherwise, the dyn:map function returns a node set containing one exsl:string
    element (namespace http://exslt.org/common) for each node in the node set passed
    as the first argument to the dyn:map function, in document order. The string
    value of each exsl:string element is the same as the result of converting the
    result of evaluating the expression for the relevant node to a string as with
    the string function.
    @param myContext The ExpressionContext passed by the extension processor
    @param nl The node set
    @param expr The expression string
    @return The node set after evaluation</p></div>
<a id="L365" name="L365"></a> 365   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/23042.html" title="Multiple referred from 1471 places.">map</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L366" name="L366"></a> 366     <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L367" name="L367"></a> 367   <em class="brace">{</em>
<a id="L368" name="L368"></a> 368     <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = <strong class="reserved">null</strong>;
<a id="L369" name="L369"></a> 369     <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> lDoc = <strong class="reserved">null</strong>;
<a id="L370" name="L370"></a> 370 
<a id="L371" name="L371"></a> 371     <strong class="reserved">if</strong> (myContext <strong class="reserved">instanceof</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>)
<a id="L372" name="L372"></a> 372       xctxt = ((<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>) myContext).<a href="../D/23775.html" title="Multiple defined in 5 places.">getXPathContext</a>();
<a id="L373" name="L373"></a> 373     <strong class="reserved">else</strong>
<a id="L374" name="L374"></a> 374       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(<a href="../S/5962.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/res/XSLTErrorResources.java.">XSLTErrorResources</a>.ER_INVALID_CONTEXT_PASSED, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>myContext <em class="brace">}</em>));
<a id="L375" name="L375"></a> 375 
<a id="L376" name="L376"></a> 376     <strong class="reserved">if</strong> (<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> == <strong class="reserved">null</strong> || <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L377" name="L377"></a> 377       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L378" name="L378"></a> 378 
<a id="L379" name="L379"></a> 379     <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> contextNodes = <strong class="reserved">new</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>(nl, xctxt);
<a id="L380" name="L380"></a> 380     xctxt.<a href="../S/4946.html#L654" title="Defined at 654 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushContextNodeList</a>(contextNodes);
<a id="L381" name="L381"></a> 381 
<a id="L382" name="L382"></a> 382     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> resultSet = <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L383" name="L383"></a> 383     resultSet.<a href="../D/33906.html" title="Multiple defined in 6 places.">setShouldCacheNodes</a>(<strong class="reserved">true</strong>);
<a id="L384" name="L384"></a> 384 
<a id="L385" name="L385"></a> 385     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nl.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L386" name="L386"></a> 386     <em class="brace">{</em>
<a id="L387" name="L387"></a> 387       <strong class="reserved">int</strong> contextNode = contextNodes.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L388" name="L388"></a> 388       xctxt.<a href="../S/4946.html#L750" title="Defined at 750 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushCurrentNode</a>(contextNode);
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390       <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> = <strong class="reserved">null</strong>;
<a id="L391" name="L391"></a> 391       <strong class="reserved">try</strong>
<a id="L392" name="L392"></a> 392       <em class="brace">{</em>
<a id="L393" name="L393"></a> 393         <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> dynamicXPath = <strong class="reserved">new</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>, xctxt.<a href="../S/4946.html#L427" title="Defined at 427 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSAXLocator</a>(),
<a id="L394" name="L394"></a> 394                                        xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>(),
<a id="L395" name="L395"></a> 395                                        <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.SELECT);
<a id="L396" name="L396"></a> 396         <a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> = dynamicXPath.<a href="../D/15800.html" title="Multiple defined in 82 places.">execute</a>(xctxt, contextNode, xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>());
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398         <strong class="reserved">if</strong> (<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> <strong class="reserved">instanceof</strong> <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>)
<a id="L399" name="L399"></a> 399         <em class="brace">{</em>
<a id="L400" name="L400"></a> 400           <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a> = <strong class="reserved">null</strong>;
<a id="L401" name="L401"></a> 401           <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a> = ((<a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>)<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a>).<a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>();
<a id="L402" name="L402"></a> 402 
<a id="L403" name="L403"></a> 403           <strong class="reserved">for</strong> (<strong class="reserved">int</strong> k = 0; k &lt; <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); k++)
<a id="L404" name="L404"></a> 404           <em class="brace">{</em>
<a id="L405" name="L405"></a> 405             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(k);
<a id="L406" name="L406"></a> 406             <strong class="reserved">if</strong> (!resultSet.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(n))
<a id="L407" name="L407"></a> 407               resultSet.<a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(n);
<a id="L408" name="L408"></a> 408           <em class="brace">}</em>
<a id="L409" name="L409"></a> 409         <em class="brace">}</em>
<a id="L410" name="L410"></a> 410         <strong class="reserved">else</strong>
<a id="L411" name="L411"></a> 411         <em class="brace">{</em>
<a id="L412" name="L412"></a> 412           <strong class="reserved">if</strong> (lDoc == <strong class="reserved">null</strong>)
<a id="L413" name="L413"></a> 413           <em class="brace">{</em>
<a id="L414" name="L414"></a> 414             <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a> dbf = <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L415" name="L415"></a> 415             dbf.<a href="../D/33323.html" title="Multiple defined in 3 places.">setNamespaceAware</a>(<strong class="reserved">true</strong>);
<a id="L416" name="L416"></a> 416             <a href="../S/3846.html#L62" title="Defined at 62 in src/javax/xml/parsers/DocumentBuilder.java.">DocumentBuilder</a> db = dbf.<a href="../D/27987.html" title="Multiple defined in 2 places.">newDocumentBuilder</a>();
<a id="L417" name="L417"></a> 417             lDoc = db.<a href="../D/27986.html" title="Multiple defined in 3 places.">newDocument</a>();
<a id="L418" name="L418"></a> 418           <em class="brace">}</em>
<a id="L419" name="L419"></a> 419 
<a id="L420" name="L420"></a> 420           <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <strong class="reserved">null</strong>;
<a id="L421" name="L421"></a> 421           <strong class="reserved">if</strong> (<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> <strong class="reserved">instanceof</strong> <a href="../S/4902.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/objects/XNumber.java.">XNumber</a>)
<a id="L422" name="L422"></a> 422             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = lDoc.<a href="../D/13841.html" title="Multiple defined in 8 places.">createElementNS</a>(EXSL_URI, "exsl:number");
<a id="L423" name="L423"></a> 423           <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> <strong class="reserved">instanceof</strong> <a href="../S/4908.html#L30" title="Defined at 30 in src/com/sun/org/apache/xpath/internal/objects/XBoolean.java.">XBoolean</a>)
<a id="L424" name="L424"></a> 424             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = lDoc.<a href="../D/13841.html" title="Multiple defined in 8 places.">createElementNS</a>(EXSL_URI, "exsl:boolean");
<a id="L425" name="L425"></a> 425           <strong class="reserved">else</strong>
<a id="L426" name="L426"></a> 426             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = lDoc.<a href="../D/13841.html" title="Multiple defined in 8 places.">createElementNS</a>(EXSL_URI, "exsl:string");
<a id="L427" name="L427"></a> 427 
<a id="L428" name="L428"></a> 428           <a href="../D/8891.html" title="Multiple defined in 3 places.">Text</a> textNode = lDoc.<a href="../D/14246.html" title="Multiple defined in 5 places.">createTextNode</a>(<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a>.<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>());
<a id="L429" name="L429"></a> 429           <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(textNode);
<a id="L430" name="L430"></a> 430           resultSet.<a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L431" name="L431"></a> 431         <em class="brace">}</em>
<a id="L432" name="L432"></a> 432       <em class="brace">}</em>
<a id="L433" name="L433"></a> 433       <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e)
<a id="L434" name="L434"></a> 434       <em class="brace">{</em>
<a id="L435" name="L435"></a> 435         xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L436" name="L436"></a> 436         xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L437" name="L437"></a> 437         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L438" name="L438"></a> 438       <em class="brace">}</em>
<a id="L439" name="L439"></a> 439 
<a id="L440" name="L440"></a> 440       xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442     <em class="brace">}</em>
<a id="L443" name="L443"></a> 443 
<a id="L444" name="L444"></a> 444     xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L445" name="L445"></a> 445     <strong class="reserved">return</strong> resultSet;
<a id="L446" name="L446"></a> 446   <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<div class="comment">
    The dyn:evaluate function evaluates a string as an XPath expression and returns
    the resulting value, which might be a boolean, number, string, node set, result
    tree fragment or external object. The sole argument is the string to be evaluated.
    <p>
    If the expression string passed as the second argument is an invalid XPath
    expression (including an empty string), this function returns an empty node set.
    </p><p>
    You should only use this function if the expression must be constructed dynamically,
    otherwise it is much more efficient to use the expression literally.
    @param myContext The ExpressionContext passed by the extension processor
    @param xpathExpr The XPath expression string
    @return The evaluation result</p></div>
<a id="L464" name="L464"></a> 464   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../R/14049.html" title="Multiple referred from 144 places.">evaluate</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> xpathExpr)
<a id="L465" name="L465"></a> 465     <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L466" name="L466"></a> 466   <em class="brace">{</em>
<a id="L467" name="L467"></a> 467     <strong class="reserved">if</strong> (myContext <strong class="reserved">instanceof</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>)
<a id="L468" name="L468"></a> 468     <em class="brace">{</em>
<a id="L469" name="L469"></a> 469       <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = <strong class="reserved">null</strong>;
<a id="L470" name="L470"></a> 470       <strong class="reserved">try</strong>
<a id="L471" name="L471"></a> 471       <em class="brace">{</em>
<a id="L472" name="L472"></a> 472         xctxt = ((<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>) myContext).<a href="../D/23775.html" title="Multiple defined in 5 places.">getXPathContext</a>();
<a id="L473" name="L473"></a> 473         <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> dynamicXPath = <strong class="reserved">new</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>(xpathExpr, xctxt.<a href="../S/4946.html#L427" title="Defined at 427 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSAXLocator</a>(),
<a id="L474" name="L474"></a> 474                                        xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>(),
<a id="L475" name="L475"></a> 475                                        <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.SELECT);
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477         <strong class="reserved">return</strong> dynamicXPath.<a href="../D/15800.html" title="Multiple defined in 82 places.">execute</a>(xctxt, myContext.<a href="../D/17981.html" title="Multiple defined in 3 places.">getContextNode</a>(),
<a id="L478" name="L478"></a> 478                                     xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>());
<a id="L479" name="L479"></a> 479       <em class="brace">}</em>
<a id="L480" name="L480"></a> 480       <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e)
<a id="L481" name="L481"></a> 481       <em class="brace">{</em>
<a id="L482" name="L482"></a> 482         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>(xctxt.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>());
<a id="L483" name="L483"></a> 483       <em class="brace">}</em>
<a id="L484" name="L484"></a> 484     <em class="brace">}</em>
<a id="L485" name="L485"></a> 485     <strong class="reserved">else</strong>
<a id="L486" name="L486"></a> 486       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(<a href="../S/5962.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/res/XSLTErrorResources.java.">XSLTErrorResources</a>.ER_INVALID_CONTEXT_PASSED, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>myContext <em class="brace">}</em>)); <em class="comment">//"Invalid context passed to evaluate "</em>
<a id="L487" name="L487"></a> 487   <em class="brace">}</em>
<a id="L488" name="L488"></a> 488 
<div class="comment">
    The dyn:closure function creates a node set resulting from transitive closure of
    evaluating the expression passed as the second argument on each of the nodes passed
    as the first argument, then on the node set resulting from that and so on until no
    more nodes are found. For example:
    <pre>     dyn:closure(., '*')
    </pre>
    returns all the descendant elements of the node (its element children, their
    children, their children's children and so on).
    <p>
    The expression is thus evaluated several times, each with a different node set
    acting as the context of the expression. The first time the expression is
    evaluated, the context node set is the first argument passed to the dyn:closure
    function. In other words, the node set for each node is calculated by evaluating
    the XPath expression with all context information being the same as that for
    the call to the dyn:closure function itself, except for the following:
    </p><p>
    </p><ul><li>the context node is the node whose value is being calculated.</li><li>the context position is the position of the node within the node set passed
       as the first argument to the dyn:closure function, arranged in document order.</li><li>the context size is the number of nodes passed as the first argument to the
       dyn:closure function.</li><li>the current node is the node whose value is being calculated.</li>
    </ul>
    <p>
    The result for a particular iteration is the union of the node sets resulting
    from evaluting the expression for each of the nodes in the source node set for
    that iteration. This result is then used as the source node set for the next
    iteration, and so on. The result of the function as a whole is the union of
    the node sets generated by each iteration.
    </p><p>
    If the expression string passed as the second argument is an invalid XPath
    expression (including an empty string) or an expression that does not return a
    node set, this function returns an empty node set.
    @param myContext The ExpressionContext passed by the extension processor
    @param nl The node set
    @param expr The expression string
    @return The node set after evaluation</p></div>
<a id="L532" name="L532"></a> 532   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/11608.html" title="Multiple referred from 45 places.">closure</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>)
<a id="L533" name="L533"></a> 533     <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L534" name="L534"></a> 534   <em class="brace">{</em>
<a id="L535" name="L535"></a> 535     <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = <strong class="reserved">null</strong>;
<a id="L536" name="L536"></a> 536     <strong class="reserved">if</strong> (myContext <strong class="reserved">instanceof</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>)
<a id="L537" name="L537"></a> 537       xctxt = ((<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>.<a href="../S/4946.html#L1028" title="Defined at 1028 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathExpressionContext</a>) myContext).<a href="../D/23775.html" title="Multiple defined in 5 places.">getXPathContext</a>();
<a id="L538" name="L538"></a> 538     <strong class="reserved">else</strong>
<a id="L539" name="L539"></a> 539       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(<a href="../S/5962.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/res/XSLTErrorResources.java.">XSLTErrorResources</a>.ER_INVALID_CONTEXT_PASSED, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>myContext <em class="brace">}</em>));
<a id="L540" name="L540"></a> 540 
<a id="L541" name="L541"></a> 541     <strong class="reserved">if</strong> (<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> == <strong class="reserved">null</strong> || <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L542" name="L542"></a> 542       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L543" name="L543"></a> 543 
<a id="L544" name="L544"></a> 544     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> closureSet = <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L545" name="L545"></a> 545     closureSet.<a href="../D/33906.html" title="Multiple defined in 6 places.">setShouldCacheNodes</a>(<strong class="reserved">true</strong>);
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547     <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> iterationList = nl;
<a id="L548" name="L548"></a> 548     <strong class="reserved">do</strong>
<a id="L549" name="L549"></a> 549     <em class="brace">{</em>
<a id="L550" name="L550"></a> 550 
<a id="L551" name="L551"></a> 551       <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> iterationSet = <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L552" name="L552"></a> 552 
<a id="L553" name="L553"></a> 553       <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a> contextNodes = <strong class="reserved">new</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>(iterationList, xctxt);
<a id="L554" name="L554"></a> 554       xctxt.<a href="../S/4946.html#L654" title="Defined at 654 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushContextNodeList</a>(contextNodes);
<a id="L555" name="L555"></a> 555 
<a id="L556" name="L556"></a> 556       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; iterationList.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L557" name="L557"></a> 557       <em class="brace">{</em>
<a id="L558" name="L558"></a> 558         <strong class="reserved">int</strong> contextNode = contextNodes.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L559" name="L559"></a> 559         xctxt.<a href="../S/4946.html#L750" title="Defined at 750 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">pushCurrentNode</a>(contextNode);
<a id="L560" name="L560"></a> 560 
<a id="L561" name="L561"></a> 561         <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> = <strong class="reserved">null</strong>;
<a id="L562" name="L562"></a> 562         <strong class="reserved">try</strong>
<a id="L563" name="L563"></a> 563         <em class="brace">{</em>
<a id="L564" name="L564"></a> 564           <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> dynamicXPath = <strong class="reserved">new</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>(<a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>, xctxt.<a href="../S/4946.html#L427" title="Defined at 427 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSAXLocator</a>(),
<a id="L565" name="L565"></a> 565                                          xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>(),
<a id="L566" name="L566"></a> 566                                          <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.SELECT);
<a id="L567" name="L567"></a> 567           <a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> = dynamicXPath.<a href="../D/15800.html" title="Multiple defined in 82 places.">execute</a>(xctxt, contextNode, xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>());
<a id="L568" name="L568"></a> 568 
<a id="L569" name="L569"></a> 569           <strong class="reserved">if</strong> (<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a> <strong class="reserved">instanceof</strong> <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>)
<a id="L570" name="L570"></a> 570           <em class="brace">{</em>
<a id="L571" name="L571"></a> 571             <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a> = <strong class="reserved">null</strong>;
<a id="L572" name="L572"></a> 572             <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a> = ((<a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>)<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a>).<a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>();
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> k = 0; k &lt; <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); k++)
<a id="L575" name="L575"></a> 575             <em class="brace">{</em>
<a id="L576" name="L576"></a> 576               <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(k);
<a id="L577" name="L577"></a> 577               <strong class="reserved">if</strong> (!iterationSet.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(n))
<a id="L578" name="L578"></a> 578                 iterationSet.<a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(n);
<a id="L579" name="L579"></a> 579             <em class="brace">}</em>
<a id="L580" name="L580"></a> 580           <em class="brace">}</em>
<a id="L581" name="L581"></a> 581           <strong class="reserved">else</strong>
<a id="L582" name="L582"></a> 582           <em class="brace">{</em>
<a id="L583" name="L583"></a> 583             xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L584" name="L584"></a> 584             xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L585" name="L585"></a> 585             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L586" name="L586"></a> 586           <em class="brace">}</em>
<a id="L587" name="L587"></a> 587         <em class="brace">}</em>
<a id="L588" name="L588"></a> 588         <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e)
<a id="L589" name="L589"></a> 589         <em class="brace">{</em>
<a id="L590" name="L590"></a> 590           xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L591" name="L591"></a> 591           xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L592" name="L592"></a> 592           <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L593" name="L593"></a> 593         <em class="brace">}</em>
<a id="L594" name="L594"></a> 594 
<a id="L595" name="L595"></a> 595         xctxt.<a href="../S/4946.html#L758" title="Defined at 758 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popCurrentNode</a>();
<a id="L596" name="L596"></a> 596 
<a id="L597" name="L597"></a> 597       <em class="brace">}</em>
<a id="L598" name="L598"></a> 598 
<a id="L599" name="L599"></a> 599       xctxt.<a href="../S/4946.html#L663" title="Defined at 663 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">popContextNodeList</a>();
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601       iterationList = iterationSet;
<a id="L602" name="L602"></a> 602 
<a id="L603" name="L603"></a> 603       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; iterationList.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L604" name="L604"></a> 604       <em class="brace">{</em>
<a id="L605" name="L605"></a> 605         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = iterationList.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L606" name="L606"></a> 606         <strong class="reserved">if</strong> (!closureSet.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(n))
<a id="L607" name="L607"></a> 607           closureSet.<a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(n);
<a id="L608" name="L608"></a> 608       <em class="brace">}</em>
<a id="L609" name="L609"></a> 609 
<a id="L610" name="L610"></a> 610     <em class="brace">}</em> <strong class="reserved">while</strong>(iterationList.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() &gt; 0);
<a id="L611" name="L611"></a> 611 
<a id="L612" name="L612"></a> 612     <strong class="reserved">return</strong> closureSet;
<a id="L613" name="L613"></a> 613 
<a id="L614" name="L614"></a> 614   <em class="brace">}</em>
<a id="L615" name="L615"></a> 615 
<a id="L616" name="L616"></a> 616 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L101">[^]</a><a href="#L532">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
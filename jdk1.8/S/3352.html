<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/StringContent.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L83">[^]</a><a href="#L473">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L83" title="Defined at 83.">length</a></li>
<li><a href="#L96" title="Defined at 96.">insertString</a></li>
<li><a href="#L117" title="Defined at 117.">remove</a></li>
<li><a href="#L140" title="Defined at 140.">getString</a></li>
<li><a href="#L156" title="Defined at 156.">getChars</a></li>
<li><a href="#L173" title="Defined at 173.">createPosition</a></li>
<li><a href="#L193" title="Defined at 193.">replace</a></li>
<li><a href="#L215" title="Defined at 215.">resize</a></li>
<li><a href="#L221" title="Defined at 221.">updateMarksForInsert</a></li>
<li><a href="#L241" title="Defined at 241.">updateMarksForRemove</a></li>
<li><a href="#L273" title="Defined at 273.">getPositionsInRange</a></li>
<li><a href="#L300" title="Defined at 300.">updateUndoPositions</a></li>
<li><a href="#L347" title="Defined at 347.">getOffset</a></li>
<li><a href="#L351" title="Defined at 351.">finalize</a></li>
<li><a href="#L357" title="Defined at 357.">toString</a></li>
<li><a href="#L378" title="Defined at 378.">resetLocation</a></li>
<li><a href="#L398" title="Defined at 398.">undo</a></li>
<li><a href="#L413" title="Defined at 413.">redo</a></li>
<li><a href="#L456" title="Defined at 456.">undo</a></li>
<li><a href="#L473" title="Defined at 473.">redo</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.Vector;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> javax.swing.undo.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> javax.swing.SwingUtilities;
<a id="L31" name="L31"></a>  31 
<div class="comment">
  An implementation of the AbstractDocument.Content interface that is
  a brute force implementation that is useful for relatively small
  documents and/or debugging.  It manages the character content
  as a simple character array.  It is also quite inefficient.
  <p>
  It is generally recommended that the gap buffer or piece table
  implementations be used instead.  This buffer does not scale up
  to large sizes.
  </p><p>
  <strong>Warning:</strong>
  Serialized objects of this class will not be compatible with
  future Swing releases. The current serialization support is
  appropriate for short term storage or RMI between applications running
  the same version of Swing.  As of 1.4, support for long term storage
  of all JavaBeansâ„¢
  has been added to the <code>java.beans</code> package.
  Please see {@link java.beans.XMLEncoder}.
  @author  Timothy Prinzing</p></div>
<a id="L53" name="L53"></a>  53 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7656.html" title="Multiple referred from 4 places.">StringContent</a> <strong class="reserved">implements</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../S/3268.html#L1586" title="Defined at 1586 in src/javax/swing/text/AbstractDocument.java.">Content</a>, <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L54" name="L54"></a>  54 
<div class="comment">
      Creates a new StringContent object.  Initial size defaults to 10.</div>
<a id="L58" name="L58"></a>  58     <strong class="reserved">public</strong> StringContent() <em class="brace">{</em>
<a id="L59" name="L59"></a>  59         <strong class="reserved">this</strong>(10);
<a id="L60" name="L60"></a>  60     <em class="brace">}</em>
<a id="L61" name="L61"></a>  61 
<div class="comment">
      Creates a new StringContent object, with the initial
      size specified.  If the length is &lt; 1, a size of 1 is used.
      @param initialLength the initial size</div>
<a id="L68" name="L68"></a>  68     <strong class="reserved">public</strong> StringContent(<strong class="reserved">int</strong> initialLength) <em class="brace">{</em>
<a id="L69" name="L69"></a>  69         <strong class="reserved">if</strong> (initialLength &lt; 1) <em class="brace">{</em>
<a id="L70" name="L70"></a>  70             initialLength = 1;
<a id="L71" name="L71"></a>  71         <em class="brace">}</em>
<a id="L72" name="L72"></a>  72         <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[initialLength];
<a id="L73" name="L73"></a>  73         <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>[0] = '\n';
<a id="L74" name="L74"></a>  74         <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 1;
<a id="L75" name="L75"></a>  75     <em class="brace">}</em>
<a id="L76" name="L76"></a>  76 
<div class="comment">
      Returns the length of the content.
      @return the length &gt;= 1
      @see AbstractDocument.Content#length</div>
<a id="L83" name="L83"></a>  83     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/22477.html" title="Multiple referred from 12963 places.">length</a>() <em class="brace">{</em>
<a id="L84" name="L84"></a>  84         <strong class="reserved">return</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L85" name="L85"></a>  85     <em class="brace">}</em>
<a id="L86" name="L86"></a>  86 
<div class="comment">
      Inserts a string into the content.
      @param where the starting position &gt;= 0 &amp;&amp; &lt; length()
      @param str the non-null string to insert
      @return an UndoableEdit object for undoing
      @exception BadLocationException if the specified position is invalid
      @see AbstractDocument.Content#insertString</div>
<a id="L96" name="L96"></a>  96     <strong class="reserved">public</strong> <a href="../S/3139.html#L68" title="Defined at 68 in src/javax/swing/undo/UndoableEdit.java.">UndoableEdit</a> <a href="../R/20792.html" title="Multiple referred from 41 places.">insertString</a>(<strong class="reserved">int</strong> where, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L97" name="L97"></a>  97         <strong class="reserved">if</strong> (where &gt;= <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> || where &lt; 0) <em class="brace">{</em>
<a id="L98" name="L98"></a>  98             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>("Invalid location", <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L99" name="L99"></a>  99         <em class="brace">}</em>
<a id="L100" name="L100"></a> 100         <strong class="reserved">char</strong>[] <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a> = <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L101" name="L101"></a> 101         <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(where, 0, <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>, 0, <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L102" name="L102"></a> 102         <strong class="reserved">if</strong> (marks != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L103" name="L103"></a> 103             <a href="../S/3352.html#L221" title="Defined at 221 in src/javax/swing/text/StringContent.java.">updateMarksForInsert</a>(where, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L104" name="L104"></a> 104         <em class="brace">}</em>
<a id="L105" name="L105"></a> 105         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4247.html" title="Multiple defined in 2 places.">InsertUndo</a>(where, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L106" name="L106"></a> 106     <em class="brace">}</em>
<a id="L107" name="L107"></a> 107 
<div class="comment">
      Removes part of the content.  where + nitems must be &lt; length().
      @param where the starting position &gt;= 0
      @param nitems the number of characters to remove &gt;= 0
      @return an UndoableEdit object for undoing
      @exception BadLocationException if the specified position is invalid
      @see AbstractDocument.Content#remove</div>
<a id="L117" name="L117"></a> 117     <strong class="reserved">public</strong> <a href="../S/3139.html#L68" title="Defined at 68 in src/javax/swing/undo/UndoableEdit.java.">UndoableEdit</a> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<strong class="reserved">int</strong> where, <strong class="reserved">int</strong> nitems) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L118" name="L118"></a> 118         <strong class="reserved">if</strong> (where + nitems &gt;= <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L119" name="L119"></a> 119             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>("Invalid range", <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L120" name="L120"></a> 120         <em class="brace">}</em>
<a id="L121" name="L121"></a> 121         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> removedString = <a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(where, nitems);
<a id="L122" name="L122"></a> 122         <a href="../S/3139.html#L68" title="Defined at 68 in src/javax/swing/undo/UndoableEdit.java.">UndoableEdit</a> <a href="../D/15277.html" title="Multiple defined in 2 places.">edit</a> = <strong class="reserved">new</strong> <a href="../D/7250.html" title="Multiple defined in 2 places.">RemoveUndo</a>(where, removedString);
<a id="L123" name="L123"></a> 123         <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(where, nitems, <a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a>, 0, 0);
<a id="L124" name="L124"></a> 124         <strong class="reserved">if</strong> (marks != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L125" name="L125"></a> 125             <a href="../S/3352.html#L241" title="Defined at 241 in src/javax/swing/text/StringContent.java.">updateMarksForRemove</a>(where, nitems);
<a id="L126" name="L126"></a> 126         <em class="brace">}</em>
<a id="L127" name="L127"></a> 127         <strong class="reserved">return</strong> <a href="../D/15277.html" title="Multiple defined in 2 places.">edit</a>;
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129     <em class="brace">}</em>
<a id="L130" name="L130"></a> 130 
<div class="comment">
      Retrieves a portion of the content.  where + len must be &lt;= length().
      @param where the starting position &gt;= 0
      @param len the length to retrieve &gt;= 0
      @return a string representing the content; may be empty
      @exception BadLocationException if the specified position is invalid
      @see AbstractDocument.Content#getString</div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19208.html" title="Multiple referred from 527 places.">getString</a>(<strong class="reserved">int</strong> where, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L141" name="L141"></a> 141         <strong class="reserved">if</strong> (where + len &gt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>("Invalid range", <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L143" name="L143"></a> 143         <em class="brace">}</em>
<a id="L144" name="L144"></a> 144         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, where, len);
<a id="L145" name="L145"></a> 145     <em class="brace">}</em>
<a id="L146" name="L146"></a> 146 
<div class="comment">
      Retrieves a portion of the content.  where + len must be &lt;= length()
      @param where the starting position &gt;= 0
      @param len the number of characters to retrieve &gt;= 0
      @param chars the Segment object to return the characters in
      @exception BadLocationException if the specified position is invalid
      @see AbstractDocument.Content#getChars</div>
<a id="L156" name="L156"></a> 156     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/15533.html" title="Multiple referred from 94 places.">getChars</a>(<strong class="reserved">int</strong> where, <strong class="reserved">int</strong> len, <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L157" name="L157"></a> 157         <strong class="reserved">if</strong> (where + len &gt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L158" name="L158"></a> 158             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>("Invalid location", <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L159" name="L159"></a> 159         <em class="brace">}</em>
<a id="L160" name="L160"></a> 160         <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>;
<a id="L161" name="L161"></a> 161         <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = where;
<a id="L162" name="L162"></a> 162         <a href="../D/12342.html" title="Multiple defined in 2 places.">chars</a>.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = len;
<a id="L163" name="L163"></a> 163     <em class="brace">}</em>
<a id="L164" name="L164"></a> 164 
<div class="comment">
      Creates a position within the content that will
      track change as the content is mutated.
      @param offset the offset to create a position for &gt;= 0
      @return the position
      @exception BadLocationException if the specified position is invalid</div>
<a id="L173" name="L173"></a> 173     <strong class="reserved">public</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a> <a href="../R/12631.html" title="Multiple referred from 26 places.">createPosition</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L174" name="L174"></a> 174         <em class="comment">// some small documents won't have any sticky positions</em>
<a id="L175" name="L175"></a> 175         <em class="comment">// at all, so the buffer is created lazily.</em>
<a id="L176" name="L176"></a> 176         <strong class="reserved">if</strong> (marks == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L177" name="L177"></a> 177             marks = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a>&gt;();
<a id="L178" name="L178"></a> 178         <em class="brace">}</em>
<a id="L179" name="L179"></a> 179         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8386.html" title="Multiple defined in 2 places.">StickyPosition</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L180" name="L180"></a> 180     <em class="brace">}</em>
<a id="L181" name="L181"></a> 181 
<a id="L182" name="L182"></a> 182     <em class="comment">// --- local methods ---------------------------------------</em>
<a id="L183" name="L183"></a> 183 
<div class="comment">
      Replaces some of the characters in the array
      @param offset  offset into the array to start the replace
      @param length  number of characters to remove
      @param replArray replacement array
      @param replOffset offset into the replacement array
      @param replLength number of character to use from the
        replacement array.</div>
<a id="L193" name="L193"></a> 193     <strong class="reserved">void</strong> <a href="../R/26140.html" title="Multiple referred from 310 places.">replace</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>,
<a id="L194" name="L194"></a> 194                  <strong class="reserved">char</strong>[] replArray, <strong class="reserved">int</strong> replOffset, <strong class="reserved">int</strong> replLength) <em class="brace">{</em>
<a id="L195" name="L195"></a> 195         <strong class="reserved">int</strong> delta = replLength - <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L196" name="L196"></a> 196         <strong class="reserved">int</strong> src = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L197" name="L197"></a> 197         <strong class="reserved">int</strong> nmove = <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> - src;
<a id="L198" name="L198"></a> 198         <strong class="reserved">int</strong> dest = src + delta;
<a id="L199" name="L199"></a> 199         <strong class="reserved">if</strong> ((<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> + delta) &gt;= <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200             <em class="comment">// need to grow the array</em>
<a id="L201" name="L201"></a> 201             <strong class="reserved">int</strong> newLength = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(2*<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> + delta);
<a id="L202" name="L202"></a> 202             <strong class="reserved">char</strong>[] newData = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[newLength];
<a id="L203" name="L203"></a> 203             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, 0, newData, 0, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L204" name="L204"></a> 204             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(replArray, replOffset, newData, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, replLength);
<a id="L205" name="L205"></a> 205             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, src, newData, dest, nmove);
<a id="L206" name="L206"></a> 206             <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = newData;
<a id="L207" name="L207"></a> 207         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L208" name="L208"></a> 208             <em class="comment">// patch the existing array</em>
<a id="L209" name="L209"></a> 209             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, src, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, dest, nmove);
<a id="L210" name="L210"></a> 210             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(replArray, replOffset, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, replLength);
<a id="L211" name="L211"></a> 211         <em class="brace">}</em>
<a id="L212" name="L212"></a> 212         <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> + delta;
<a id="L213" name="L213"></a> 213     <em class="brace">}</em>
<a id="L214" name="L214"></a> 214 
<a id="L215" name="L215"></a> 215     <strong class="reserved">void</strong> <a href="../R/26311.html" title="Multiple referred from 88 places.">resize</a>(<strong class="reserved">int</strong> ncount) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216         <strong class="reserved">char</strong>[] ndata = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[ncount];
<a id="L217" name="L217"></a> 217         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, 0, ndata, 0, <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(ncount, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>));
<a id="L218" name="L218"></a> 218         <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = ndata;
<a id="L219" name="L219"></a> 219     <em class="brace">}</em>
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221     <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/3352.html#L103" title="Referred from 103 in src/javax/swing/text/StringContent.java.">updateMarksForInsert</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L222" name="L222"></a> 222         <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> == 0) <em class="brace">{</em>
<a id="L223" name="L223"></a> 223             <em class="comment">// zero is a special case where we update only</em>
<a id="L224" name="L224"></a> 224             <em class="comment">// marks after it.</em>
<a id="L225" name="L225"></a> 225             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = 1;
<a id="L226" name="L226"></a> 226         <em class="brace">}</em>
<a id="L227" name="L227"></a> 227         <strong class="reserved">int</strong> n = marks.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L228" name="L228"></a> 228         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L229" name="L229"></a> 229             <a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a> <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> = marks.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L230" name="L230"></a> 230             <strong class="reserved">if</strong> (<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.unused) <em class="brace">{</em>
<a id="L231" name="L231"></a> 231                 <em class="comment">// this record is no longer used, get rid of it</em>
<a id="L232" name="L232"></a> 232                 marks.<a href="../D/30775.html" title="Multiple defined in 12 places.">removeElementAt</a>(i);
<a id="L233" name="L233"></a> 233                 i -= 1;
<a id="L234" name="L234"></a> 234                 n -= 1;
<a id="L235" name="L235"></a> 235             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt;= <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L236" name="L236"></a> 236                 <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> += <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L237" name="L237"></a> 237             <em class="brace">}</em>
<a id="L238" name="L238"></a> 238         <em class="brace">}</em>
<a id="L239" name="L239"></a> 239     <em class="brace">}</em>
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241     <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/3352.html#L125" title="Referred from 125 in src/javax/swing/text/StringContent.java.">updateMarksForRemove</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L242" name="L242"></a> 242         <strong class="reserved">int</strong> n = marks.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L243" name="L243"></a> 243         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L244" name="L244"></a> 244             <a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a> <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> = marks.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L245" name="L245"></a> 245             <strong class="reserved">if</strong> (<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.unused) <em class="brace">{</em>
<a id="L246" name="L246"></a> 246                 <em class="comment">// this record is no longer used, get rid of it</em>
<a id="L247" name="L247"></a> 247                 marks.<a href="../D/30775.html" title="Multiple defined in 12 places.">removeElementAt</a>(i);
<a id="L248" name="L248"></a> 248                 i -= 1;
<a id="L249" name="L249"></a> 249                 n -= 1;
<a id="L250" name="L250"></a> 250             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt;= (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)) <em class="brace">{</em>
<a id="L251" name="L251"></a> 251                 <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> -= <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L252" name="L252"></a> 252             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt;= <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253                 <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L254" name="L254"></a> 254             <em class="brace">}</em>
<a id="L255" name="L255"></a> 255         <em class="brace">}</em>
<a id="L256" name="L256"></a> 256     <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<div class="comment">
      Returns a Vector containing instances of UndoPosRef for the
      Positions in the range
      <code>offset</code> to <code>offset</code> + <code>length</code>.
      If <code>v</code> is not null the matching Positions are placed in
      there. The vector with the resulting Positions are returned.
      <p>
      This is meant for internal usage, and is generally not of interest
      to subclasses.
      @param v the Vector to use, with a new one created on null
      @param offset the starting offset &gt;= 0
      @param length the length &gt;= 0
      @return the set of instances</p></div>
<a id="L273" name="L273"></a> 273     <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../R/18384.html" title="Multiple referred from 6 places.">getPositionsInRange</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> v, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>,
<a id="L274" name="L274"></a> 274                                                       <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L275" name="L275"></a> 275         <strong class="reserved">int</strong> n = marks.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L276" name="L276"></a> 276         <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L277" name="L277"></a> 277         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> placeIn = (v == <strong class="reserved">null</strong>) ? <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>() : v;
<a id="L278" name="L278"></a> 278         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279             <a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a> <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> = marks.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L280" name="L280"></a> 280             <strong class="reserved">if</strong> (<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.unused) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281                 <em class="comment">// this record is no longer used, get rid of it</em>
<a id="L282" name="L282"></a> 282                 marks.<a href="../D/30775.html" title="Multiple defined in 12 places.">removeElementAt</a>(i);
<a id="L283" name="L283"></a> 283                 i -= 1;
<a id="L284" name="L284"></a> 284                 n -= 1;
<a id="L285" name="L285"></a> 285             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt;= <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &amp;&amp; <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>)
<a id="L286" name="L286"></a> 286                 placeIn.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<strong class="reserved">new</strong> <a href="../D/9292.html" title="Multiple defined in 2 places.">UndoPosRef</a>(<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>));
<a id="L287" name="L287"></a> 287         <em class="brace">}</em>
<a id="L288" name="L288"></a> 288         <strong class="reserved">return</strong> placeIn;
<a id="L289" name="L289"></a> 289     <em class="brace">}</em>
<a id="L290" name="L290"></a> 290 
<div class="comment">
      Resets the location for all the UndoPosRef instances
      in <code>positions</code>.
      <p>
      This is meant for internal usage, and is generally not of interest
      to subclasses.
      @param positions the positions of the instances</p></div>
<a id="L300" name="L300"></a> 300     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/29981.html" title="Multiple referred from 4 places.">updateUndoPositions</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> positions) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> counter = positions.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1; counter &gt;= 0; counter--) <em class="brace">{</em>
<a id="L302" name="L302"></a> 302             <a href="../D/9292.html" title="Multiple defined in 2 places.">UndoPosRef</a> <a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a> = (<a href="../D/9292.html" title="Multiple defined in 2 places.">UndoPosRef</a>)positions.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(counter);
<a id="L303" name="L303"></a> 303             <em class="comment">// Check if the Position is still valid.</em>
<a id="L304" name="L304"></a> 304             <strong class="reserved">if</strong>(<a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>.rec.unused) <em class="brace">{</em>
<a id="L305" name="L305"></a> 305                 positions.<a href="../D/30775.html" title="Multiple defined in 12 places.">removeElementAt</a>(counter);
<a id="L306" name="L306"></a> 306             <em class="brace">}</em>
<a id="L307" name="L307"></a> 307             <strong class="reserved">else</strong>
<a id="L308" name="L308"></a> 308                 <a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>.<a href="../D/31182.html" title="Multiple defined in 2 places.">resetLocation</a>();
<a id="L309" name="L309"></a> 309         <em class="brace">}</em>
<a id="L310" name="L310"></a> 310     <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<a id="L312" name="L312"></a> 312     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] <a href="../D/15347.html" title="Multiple defined in 24 places.">empty</a> = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[0];
<a id="L313" name="L313"></a> 313     <strong class="reserved">private</strong> <strong class="reserved">char</strong>[] <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>;
<a id="L314" name="L314"></a> 314     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L315" name="L315"></a> 315     <strong class="reserved">transient</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a>&gt; marks;
<a id="L316" name="L316"></a> 316 
<div class="comment">
      holds the data for a mark... separately from
      the real mark so that the real mark can be
      collected if there are no more references to
      it.... the update table holds only a reference
      to this grungy thing.</div>
<a id="L324" name="L324"></a> 324     <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6166.html" title="Multiple referred from 9 places.">PosRec</a> <em class="brace">{</em>
<a id="L325" name="L325"></a> 325 
<a id="L326" name="L326"></a> 326         PosRec(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327             <strong class="reserved">this</strong>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L328" name="L328"></a> 328         <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L331" name="L331"></a> 331         <strong class="reserved">boolean</strong> unused;
<a id="L332" name="L332"></a> 332     <em class="brace">}</em>
<a id="L333" name="L333"></a> 333 
<div class="comment">
      This really wants to be a weak reference but
      in 1.1 we don't have a 100% pure solution for
      this... so this class trys to hack a solution
      to causing the marks to be collected.</div>
<a id="L340" name="L340"></a> 340     <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7610.html" title="Multiple referred from 9 places.">StickyPosition</a> <strong class="reserved">implements</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a> <em class="brace">{</em>
<a id="L341" name="L341"></a> 341 
<a id="L342" name="L342"></a> 342         StickyPosition(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L343" name="L343"></a> 343             rec = <strong class="reserved">new</strong> <a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L344" name="L344"></a> 344             marks.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(rec);
<a id="L345" name="L345"></a> 345         <em class="brace">}</em>
<a id="L346" name="L346"></a> 346 
<a id="L347" name="L347"></a> 347         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18115.html" title="Multiple referred from 163 places.">getOffset</a>() <em class="brace">{</em>
<a id="L348" name="L348"></a> 348             <strong class="reserved">return</strong> rec.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L349" name="L349"></a> 349         <em class="brace">}</em>
<a id="L350" name="L350"></a> 350 
<a id="L351" name="L351"></a> 351         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14337.html" title="Multiple referred from 5 places.">finalize</a>() <strong class="reserved">throws</strong> <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <em class="brace">{</em>
<a id="L352" name="L352"></a> 352             <em class="comment">// schedule the record to be removed later</em>
<a id="L353" name="L353"></a> 353             <em class="comment">// on another thread.</em>
<a id="L354" name="L354"></a> 354             rec.unused = <strong class="reserved">true</strong>;
<a id="L355" name="L355"></a> 355         <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<a id="L357" name="L357"></a> 357         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L358" name="L358"></a> 358             <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>());
<a id="L359" name="L359"></a> 359         <em class="brace">}</em>
<a id="L360" name="L360"></a> 360 
<a id="L361" name="L361"></a> 361         <a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a> rec;
<a id="L362" name="L362"></a> 362     <em class="brace">}</em>
<a id="L363" name="L363"></a> 363 
<div class="comment">
      Used to hold a reference to a Position that is being reset as the
      result of removing from the content.</div>
<a id="L368" name="L368"></a> 368     <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/8441.html" title="Multiple referred from 4 places.">UndoPosRef</a> <em class="brace">{</em>
<a id="L369" name="L369"></a> 369         UndoPosRef(<a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a> rec) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370             <strong class="reserved">this</strong>.rec = rec;
<a id="L371" name="L371"></a> 371             <strong class="reserved">this</strong>.undoLocation = rec.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L372" name="L372"></a> 372         <em class="brace">}</em>
<a id="L373" name="L373"></a> 373 
<div class="comment">
          Resets the location of the Position to the offset when the
          receiver was instantiated.</div>
<a id="L378" name="L378"></a> 378         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/26267.html" title="Multiple referred from 2 places.">resetLocation</a>() <em class="brace">{</em>
<a id="L379" name="L379"></a> 379             rec.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = undoLocation;
<a id="L380" name="L380"></a> 380         <em class="brace">}</em>
<a id="L381" name="L381"></a> 381 
<div class="comment">
         /** Location to reset to when resetLocatino is invoked. */</div>
<a id="L383" name="L383"></a> 383         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> undoLocation;
<div class="comment">
         /** Position to reset offset. */</div>
<a id="L385" name="L385"></a> 385         <strong class="reserved">protected</strong> <a href="../S/3352.html#L324" title="Defined at 324 in src/javax/swing/text/StringContent.java.">PosRec</a> rec;
<a id="L386" name="L386"></a> 386     <em class="brace">}</em>
<a id="L387" name="L387"></a> 387 
<div class="comment">
      UnoableEdit created for inserts.</div>
<a id="L391" name="L391"></a> 391     <strong class="reserved">class</strong> <a href="../R/3863.html" title="Multiple referred from 2 places.">InsertUndo</a> <strong class="reserved">extends</strong> <a href="../S/3141.html#L38" title="Defined at 38 in src/javax/swing/undo/AbstractUndoableEdit.java.">AbstractUndoableEdit</a> <em class="brace">{</em>
<a id="L392" name="L392"></a> 392         <strong class="reserved">protected</strong> InsertUndo(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L393" name="L393"></a> 393             <strong class="reserved">super</strong>();
<a id="L394" name="L394"></a> 394             <strong class="reserved">this</strong>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L395" name="L395"></a> 395             <strong class="reserved">this</strong>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L396" name="L396"></a> 396         <em class="brace">}</em>
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29628.html" title="Multiple referred from 38 places.">undo</a>() <strong class="reserved">throws</strong> <a href="../S/3140.html#L42" title="Defined at 42 in src/javax/swing/undo/CannotUndoException.java.">CannotUndoException</a> <em class="brace">{</em>
<a id="L399" name="L399"></a> 399             <strong class="reserved">super</strong>.<a href="../D/35822.html" title="Multiple defined in 13 places.">undo</a>();
<a id="L400" name="L400"></a> 400             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L401" name="L401"></a> 401                 <strong class="reserved">synchronized</strong>(<a href="../S/3352.html#L53" title="Defined at 53 in src/javax/swing/text/StringContent.java.">StringContent</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L402" name="L402"></a> 402                     <em class="comment">// Get the Positions in the range being removed.</em>
<a id="L403" name="L403"></a> 403                     <strong class="reserved">if</strong>(marks != <strong class="reserved">null</strong>)
<a id="L404" name="L404"></a> 404                         posRefs = <a href="../D/21552.html" title="Multiple defined in 2 places.">getPositionsInRange</a>(<strong class="reserved">null</strong>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L405" name="L405"></a> 405                     <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = <a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L406" name="L406"></a> 406                     <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L407" name="L407"></a> 407                 <em class="brace">}</em>
<a id="L408" name="L408"></a> 408             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L409" name="L409"></a> 409               <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3140.html#L42" title="Defined at 42 in src/javax/swing/undo/CannotUndoException.java.">CannotUndoException</a>();
<a id="L410" name="L410"></a> 410             <em class="brace">}</em>
<a id="L411" name="L411"></a> 411         <em class="brace">}</em>
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25693.html" title="Multiple referred from 14 places.">redo</a>() <strong class="reserved">throws</strong> <a href="../S/3138.html#L41" title="Defined at 41 in src/javax/swing/undo/CannotRedoException.java.">CannotRedoException</a> <em class="brace">{</em>
<a id="L414" name="L414"></a> 414             <strong class="reserved">super</strong>.<a href="../D/30435.html" title="Multiple defined in 13 places.">redo</a>();
<a id="L415" name="L415"></a> 415             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L416" name="L416"></a> 416                 <strong class="reserved">synchronized</strong>(<a href="../S/3352.html#L53" title="Defined at 53 in src/javax/swing/text/StringContent.java.">StringContent</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417                     <a href="../D/24774.html" title="Multiple defined in 12 places.">insertString</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>);
<a id="L418" name="L418"></a> 418                     <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = <strong class="reserved">null</strong>;
<a id="L419" name="L419"></a> 419                     <em class="comment">// Update the Positions that were in the range removed.</em>
<a id="L420" name="L420"></a> 420                     <strong class="reserved">if</strong>(posRefs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L421" name="L421"></a> 421                         <a href="../D/36238.html" title="Multiple defined in 2 places.">updateUndoPositions</a>(posRefs);
<a id="L422" name="L422"></a> 422                         posRefs = <strong class="reserved">null</strong>;
<a id="L423" name="L423"></a> 423                     <em class="brace">}</em>
<a id="L424" name="L424"></a> 424               <em class="brace">}</em>
<a id="L425" name="L425"></a> 425             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426               <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3138.html#L41" title="Defined at 41 in src/javax/swing/undo/CannotRedoException.java.">CannotRedoException</a>();
<a id="L427" name="L427"></a> 427             <em class="brace">}</em>
<a id="L428" name="L428"></a> 428         <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<a id="L430" name="L430"></a> 430         <em class="comment">// Where the string goes.</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L432" name="L432"></a> 432         <em class="comment">// Length of the string.</em>
<a id="L433" name="L433"></a> 433         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L434" name="L434"></a> 434         <em class="comment">// The string that was inserted. To cut down on space needed this</em>
<a id="L435" name="L435"></a> 435         <em class="comment">// will only be valid after an undo.</em>
<a id="L436" name="L436"></a> 436         <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>;
<a id="L437" name="L437"></a> 437         <em class="comment">// An array of instances of UndoPosRef for the Positions in the</em>
<a id="L438" name="L438"></a> 438         <em class="comment">// range that was removed, valid after undo.</em>
<a id="L439" name="L439"></a> 439         <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> posRefs;
<a id="L440" name="L440"></a> 440     <em class="brace">}</em>
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442 
<div class="comment">
      UndoableEdit created for removes.</div>
<a id="L446" name="L446"></a> 446     <strong class="reserved">class</strong> <a href="../R/6610.html" title="Multiple referred from 2 places.">RemoveUndo</a> <strong class="reserved">extends</strong> <a href="../S/3141.html#L38" title="Defined at 38 in src/javax/swing/undo/AbstractUndoableEdit.java.">AbstractUndoableEdit</a> <em class="brace">{</em>
<a id="L447" name="L447"></a> 447         <strong class="reserved">protected</strong> RemoveUndo(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448             <strong class="reserved">super</strong>();
<a id="L449" name="L449"></a> 449             <strong class="reserved">this</strong>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L450" name="L450"></a> 450             <strong class="reserved">this</strong>.<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>;
<a id="L451" name="L451"></a> 451             <strong class="reserved">this</strong>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L452" name="L452"></a> 452             <strong class="reserved">if</strong>(marks != <strong class="reserved">null</strong>)
<a id="L453" name="L453"></a> 453                 posRefs = <a href="../D/21552.html" title="Multiple defined in 2 places.">getPositionsInRange</a>(<strong class="reserved">null</strong>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L454" name="L454"></a> 454         <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<a id="L456" name="L456"></a> 456         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29628.html" title="Multiple referred from 38 places.">undo</a>() <strong class="reserved">throws</strong> <a href="../S/3140.html#L42" title="Defined at 42 in src/javax/swing/undo/CannotUndoException.java.">CannotUndoException</a> <em class="brace">{</em>
<a id="L457" name="L457"></a> 457             <strong class="reserved">super</strong>.<a href="../D/35822.html" title="Multiple defined in 13 places.">undo</a>();
<a id="L458" name="L458"></a> 458             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L459" name="L459"></a> 459                 <strong class="reserved">synchronized</strong>(<a href="../S/3352.html#L53" title="Defined at 53 in src/javax/swing/text/StringContent.java.">StringContent</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L460" name="L460"></a> 460                     <a href="../D/24774.html" title="Multiple defined in 12 places.">insertString</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>);
<a id="L461" name="L461"></a> 461                     <em class="comment">// Update the Positions that were in the range removed.</em>
<a id="L462" name="L462"></a> 462                     <strong class="reserved">if</strong>(posRefs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463                         <a href="../D/36238.html" title="Multiple defined in 2 places.">updateUndoPositions</a>(posRefs);
<a id="L464" name="L464"></a> 464                         posRefs = <strong class="reserved">null</strong>;
<a id="L465" name="L465"></a> 465                     <em class="brace">}</em>
<a id="L466" name="L466"></a> 466                     <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = <strong class="reserved">null</strong>;
<a id="L467" name="L467"></a> 467                 <em class="brace">}</em>
<a id="L468" name="L468"></a> 468             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L469" name="L469"></a> 469               <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3140.html#L42" title="Defined at 42 in src/javax/swing/undo/CannotUndoException.java.">CannotUndoException</a>();
<a id="L470" name="L470"></a> 470             <em class="brace">}</em>
<a id="L471" name="L471"></a> 471         <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25693.html" title="Multiple referred from 14 places.">redo</a>() <strong class="reserved">throws</strong> <a href="../S/3138.html#L41" title="Defined at 41 in src/javax/swing/undo/CannotRedoException.java.">CannotRedoException</a> <em class="brace">{</em>
<a id="L474" name="L474"></a> 474             <strong class="reserved">super</strong>.<a href="../D/30435.html" title="Multiple defined in 13 places.">redo</a>();
<a id="L475" name="L475"></a> 475             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L476" name="L476"></a> 476                 <strong class="reserved">synchronized</strong>(<a href="../S/3352.html#L53" title="Defined at 53 in src/javax/swing/text/StringContent.java.">StringContent</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L477" name="L477"></a> 477                     <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = <a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L478" name="L478"></a> 478                     <em class="comment">// Get the Positions in the range being removed.</em>
<a id="L479" name="L479"></a> 479                     <strong class="reserved">if</strong>(marks != <strong class="reserved">null</strong>)
<a id="L480" name="L480"></a> 480                         posRefs = <a href="../D/21552.html" title="Multiple defined in 2 places.">getPositionsInRange</a>(<strong class="reserved">null</strong>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L481" name="L481"></a> 481                     <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L482" name="L482"></a> 482                 <em class="brace">}</em>
<a id="L483" name="L483"></a> 483             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L484" name="L484"></a> 484               <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3138.html#L41" title="Defined at 41 in src/javax/swing/undo/CannotRedoException.java.">CannotRedoException</a>();
<a id="L485" name="L485"></a> 485             <em class="brace">}</em>
<a id="L486" name="L486"></a> 486         <em class="brace">}</em>
<a id="L487" name="L487"></a> 487 
<a id="L488" name="L488"></a> 488         <em class="comment">// Where the string goes.</em>
<a id="L489" name="L489"></a> 489         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L490" name="L490"></a> 490         <em class="comment">// Length of the string.</em>
<a id="L491" name="L491"></a> 491         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L492" name="L492"></a> 492         <em class="comment">// The string that was inserted. This will be null after an undo.</em>
<a id="L493" name="L493"></a> 493         <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>;
<a id="L494" name="L494"></a> 494         <em class="comment">// An array of instances of UndoPosRef for the Positions in the</em>
<a id="L495" name="L495"></a> 495         <em class="comment">// range that was removed, valid before undo.</em>
<a id="L496" name="L496"></a> 496         <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> posRefs;
<a id="L497" name="L497"></a> 497     <em class="brace">}</em>
<a id="L498" name="L498"></a> 498 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L83">[^]</a><a href="#L473">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
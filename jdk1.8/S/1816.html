<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/beans/DefaultPersistenceDelegate.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L99">[^]</a><a href="#L410">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L99" title="Defined at 99.">definesEquals</a></li>
<li><a href="#L108" title="Defined at 108.">definesEquals</a></li>
<li><a href="#L133" title="Defined at 133.">mutatesTo</a></li>
<li><a href="#L156" title="Defined at 156.">instantiate</a></li>
<li><a href="#L172" title="Defined at 172.">findMethod</a></li>
<li><a href="#L187" title="Defined at 187.">doProperty</a></li>
<li><a href="#L218" title="Defined at 218.">invokeStatement</a></li>
<li><a href="#L223" title="Defined at 223.">initBean</a></li>
<li><a href="#L399" title="Defined at 399.">initialize</a></li>
<li><a href="#L410" title="Defined at 410.">getPropertyDescriptor</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.beans;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.*;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.lang.reflect.*;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Objects;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> sun.reflect.misc.*;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 
<div class="comment">
  The <code>DefaultPersistenceDelegate</code> is a concrete implementation of
  the abstract <code>PersistenceDelegate</code> class and
  is the delegate used by default for classes about
  which no information is available. The <code>DefaultPersistenceDelegate</code>
  provides, version resilient, public API-based persistence for
  classes that follow the JavaBeansâ„¢ conventions without any class specific
  configuration.
  <p>
  The key assumptions are that the class has a nullary constructor
  and that its state is accurately represented by matching pairs
  of "setter" and "getter" methods in the order they are returned
  by the Introspector.
  In addition to providing code-free persistence for JavaBeans,
  the <code>DefaultPersistenceDelegate</code> provides a convenient means
  to effect persistent storage for classes that have a constructor
  that, while not nullary, simply requires some property values
  as arguments.
  @see #DefaultPersistenceDelegate(String[])
  @see java.beans.Introspector
  @since 1.4
  @author Philip Milne</p></div>
<a id="L59" name="L59"></a>  59 
<a id="L60" name="L60"></a>  60 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2121.html" title="Multiple referred from 22 places.">DefaultPersistenceDelegate</a> <strong class="reserved">extends</strong> <a href="../S/1847.html#L88" title="Defined at 88 in src/java/beans/PersistenceDelegate.java.">PersistenceDelegate</a> <em class="brace">{</em>
<a id="L61" name="L61"></a>  61     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] EMPTY = <em class="brace">{</em><em class="brace">}</em>;
<a id="L62" name="L62"></a>  62     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>;
<a id="L63" name="L63"></a>  63     <strong class="reserved">private</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/14777.html" title="Multiple defined in 2 places.">definesEquals</a>;
<a id="L64" name="L64"></a>  64 
<div class="comment">
      Creates a persistence delegate for a class with a nullary constructor.
      @see #DefaultPersistenceDelegate(java.lang.String[])</div>
<a id="L70" name="L70"></a>  70     <strong class="reserved">public</strong> DefaultPersistenceDelegate() <em class="brace">{</em>
<a id="L71" name="L71"></a>  71         <strong class="reserved">this</strong>.<a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a> = EMPTY;
<a id="L72" name="L72"></a>  72     <em class="brace">}</em>
<a id="L73" name="L73"></a>  73 
<div class="comment">
      Creates a default persistence delegate for a class with a
      constructor whose arguments are the values of the property
      names as specified by <code>constructorPropertyNames</code>.
      The constructor arguments are created by
      evaluating the property names in the order they are supplied.
      To use this class to specify a single preferred constructor for use
      in the serialization of a particular type, we state the
      names of the properties that make up the constructor's
      arguments. For example, the <code>Font</code> class which
      does not define a nullary constructor can be handled
      with the following persistence delegate:
      <pre>          new DefaultPersistenceDelegate(new String[]{"name", "style", "size"});
      </pre>
      @param  constructorPropertyNames The property names for the arguments of this constructor.
      @see #instantiate</div>
<a id="L95" name="L95"></a>  95     <strong class="reserved">public</strong> DefaultPersistenceDelegate(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] constructorPropertyNames) <em class="brace">{</em>
<a id="L96" name="L96"></a>  96         <strong class="reserved">this</strong>.<a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a> = (constructorPropertyNames == <strong class="reserved">null</strong>) ? EMPTY : constructorPropertyNames.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L97" name="L97"></a>  97     <em class="brace">}</em>
<a id="L98" name="L98"></a>  98 
<a id="L99" name="L99"></a>  99     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/13189.html" title="Multiple referred from 6 places.">definesEquals</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L100" name="L100"></a> 100         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L101" name="L101"></a> 101             <strong class="reserved">return</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("equals", <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>).<a href="../D/18264.html" title="Multiple defined in 10 places.">getDeclaringClass</a>();
<a id="L102" name="L102"></a> 102         <em class="brace">}</em>
<a id="L103" name="L103"></a> 103         <strong class="reserved">catch</strong>(<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> e) <em class="brace">{</em>
<a id="L104" name="L104"></a> 104             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L105" name="L105"></a> 105         <em class="brace">}</em>
<a id="L106" name="L106"></a> 106     <em class="brace">}</em>
<a id="L107" name="L107"></a> 107 
<a id="L108" name="L108"></a> 108     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/13189.html" title="Multiple referred from 6 places.">definesEquals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/24872.html" title="Multiple defined in 6 places.">instance</a>) <em class="brace">{</em>
<a id="L109" name="L109"></a> 109         <strong class="reserved">if</strong> (<a href="../D/14777.html" title="Multiple defined in 2 places.">definesEquals</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L110" name="L110"></a> 110             <strong class="reserved">return</strong> (<a href="../D/14777.html" title="Multiple defined in 2 places.">definesEquals</a> == <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L111" name="L111"></a> 111         <em class="brace">}</em>
<a id="L112" name="L112"></a> 112         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L113" name="L113"></a> 113             <strong class="reserved">boolean</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/14777.html" title="Multiple defined in 2 places.">definesEquals</a>(<a href="../D/24872.html" title="Multiple defined in 6 places.">instance</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>());
<a id="L114" name="L114"></a> 114             <a href="../D/14777.html" title="Multiple defined in 2 places.">definesEquals</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> ? <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE : <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L115" name="L115"></a> 115             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L116" name="L116"></a> 116         <em class="brace">}</em>
<a id="L117" name="L117"></a> 117     <em class="brace">}</em>
<a id="L118" name="L118"></a> 118 
<div class="comment">
      If the number of arguments in the specified constructor is non-zero and
      the class of <code>oldInstance</code> explicitly declares an "equals" method
      this method returns the value of <code>oldInstance.equals(newInstance)</code>.
      Otherwise, this method uses the superclass's definition which returns true if the
      classes of the two instances are equal.
      @param oldInstance The instance to be copied.
      @param newInstance The instance that is to be modified.
      @return True if an equivalent copy of <code>newInstance</code> may be
              created by applying a series of mutations to <code>oldInstance</code>.
      @see #DefaultPersistenceDelegate(String[])</div>
<a id="L133" name="L133"></a> 133     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/23419.html" title="Multiple referred from 9 places.">mutatesTo</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldInstance, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>) <em class="brace">{</em>
<a id="L134" name="L134"></a> 134         <em class="comment">// Assume the instance is either mutable or a singleton</em>
<a id="L135" name="L135"></a> 135         <em class="comment">// if it has a nullary constructor.</em>
<a id="L136" name="L136"></a> 136         <strong class="reserved">return</strong> (<a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) || !<a href="../D/14777.html" title="Multiple defined in 2 places.">definesEquals</a>(oldInstance) ?
<a id="L137" name="L137"></a> 137             <strong class="reserved">super</strong>.<a href="../D/27851.html" title="Multiple defined in 20 places.">mutatesTo</a>(oldInstance, <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>) :
<a id="L138" name="L138"></a> 138             oldInstance.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>);
<a id="L139" name="L139"></a> 139     <em class="brace">}</em>
<a id="L140" name="L140"></a> 140 
<div class="comment">
      This default implementation of the <code>instantiate</code> method returns
      an expression containing the predefined method name "new" which denotes a
      call to a constructor with the arguments as specified in
      the <code>DefaultPersistenceDelegate</code>'s constructor.
      @param  oldInstance The instance to be instantiated.
      @param  out The code output stream.
      @return An expression whose value is <code>oldInstance</code>.
      @throws NullPointerException if <code>out</code> is <code>null</code>
                                   and this value is used in the method
      @see #DefaultPersistenceDelegate(String[])</div>
<a id="L156" name="L156"></a> 156     <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/20890.html" title="Multiple referred from 21 places.">instantiate</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldInstance, <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L157" name="L157"></a> 157         <strong class="reserved">int</strong> nArgs = <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L158" name="L158"></a> 158         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = oldInstance.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L159" name="L159"></a> 159         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] constructorArgs = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[nArgs];
<a id="L160" name="L160"></a> 160         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; nArgs; i++) <em class="brace">{</em>
<a id="L161" name="L161"></a> 161             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L162" name="L162"></a> 162                 <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> method = <a href="../D/16174.html" title="Multiple defined in 3 places.">findMethod</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">this</strong>.<a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>[i]);
<a id="L163" name="L163"></a> 163                 constructorArgs[i] = MethodUtil.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(method, oldInstance, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[0]);
<a id="L164" name="L164"></a> 164             <em class="brace">}</em>
<a id="L165" name="L165"></a> 165             <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L166" name="L166"></a> 166                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/18900.html" title="Multiple defined in 2 places.">getExceptionListener</a>().<a href="../S/1818.html#L42" title="Defined at 42 in src/java/beans/ExceptionListener.java.">exceptionThrown</a>(e);
<a id="L167" name="L167"></a> 167             <em class="brace">}</em>
<a id="L168" name="L168"></a> 168         <em class="brace">}</em>
<a id="L169" name="L169"></a> 169         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>(oldInstance, oldInstance.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>(), "new", constructorArgs);
<a id="L170" name="L170"></a> 170     <em class="brace">}</em>
<a id="L171" name="L171"></a> 171 
<a id="L172" name="L172"></a> 172     <strong class="reserved">private</strong> <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> <a href="../R/14424.html" title="Multiple referred from 16 places.">findMethod</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> property) <em class="brace">{</em>
<a id="L173" name="L173"></a> 173         <strong class="reserved">if</strong> (property == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L174" name="L174"></a> 174             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Property name is null");
<a id="L175" name="L175"></a> 175         <em class="brace">}</em>
<a id="L176" name="L176"></a> 176         <a href="../S/1815.html#L36" title="Defined at 36 in src/java/beans/PropertyDescriptor.java.">PropertyDescriptor</a> pd = <a href="../D/21728.html" title="Multiple defined in 2 places.">getPropertyDescriptor</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, property);
<a id="L177" name="L177"></a> 177         <strong class="reserved">if</strong> (pd == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L178" name="L178"></a> 178             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Could not find property by the name " + property);
<a id="L179" name="L179"></a> 179         <em class="brace">}</em>
<a id="L180" name="L180"></a> 180         <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> method = pd.<a href="../D/21871.html" title="Multiple defined in 3 places.">getReadMethod</a>();
<a id="L181" name="L181"></a> 181         <strong class="reserved">if</strong> (method == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Could not find getter for the property " + property);
<a id="L183" name="L183"></a> 183         <em class="brace">}</em>
<a id="L184" name="L184"></a> 184         <strong class="reserved">return</strong> method;
<a id="L185" name="L185"></a> 185     <em class="brace">}</em>
<a id="L186" name="L186"></a> 186 
<a id="L187" name="L187"></a> 187     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1816.html#L258" title="Referred from 258 in src/java/beans/DefaultPersistenceDelegate.java.">doProperty</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../S/1815.html#L36" title="Defined at 36 in src/java/beans/PropertyDescriptor.java.">PropertyDescriptor</a> pd, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldInstance, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <em class="brace">{</em>
<a id="L188" name="L188"></a> 188         <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> getter = pd.<a href="../D/21871.html" title="Multiple defined in 3 places.">getReadMethod</a>();
<a id="L189" name="L189"></a> 189         <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> setter = pd.<a href="../S/1815.html#L269" title="Defined at 269 in src/java/beans/PropertyDescriptor.java.">getWriteMethod</a>();
<a id="L190" name="L190"></a> 190 
<a id="L191" name="L191"></a> 191         <strong class="reserved">if</strong> (getter != <strong class="reserved">null</strong> &amp;&amp; setter != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L192" name="L192"></a> 192             <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> oldGetExp = <strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>(oldInstance, getter.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><em class="brace">}</em>);
<a id="L193" name="L193"></a> 193             <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> newGetExp = <strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>(<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, getter.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><em class="brace">}</em>);
<a id="L194" name="L194"></a> 194             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue = oldGetExp.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L195" name="L195"></a> 195             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue = newGetExp.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L196" name="L196"></a> 196             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37059.html" title="Multiple defined in 2 places.">writeExpression</a>(oldGetExp);
<a id="L197" name="L197"></a> 197             <strong class="reserved">if</strong> (!<a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(newValue, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(oldValue))) <em class="brace">{</em>
<a id="L198" name="L198"></a> 198                 <em class="comment">// Search for a static constant with this value;</em>
<a id="L199" name="L199"></a> 199                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[])pd.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>("enumerationValues");
<a id="L200" name="L200"></a> 200                 <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] &amp;&amp; <a href="../D/487.html" title="Multiple defined in 2 places.">Array</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(e) % 3 == 0) <em class="brace">{</em>
<a id="L201" name="L201"></a> 201                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[])e;
<a id="L202" name="L202"></a> 202                     <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i = i + 3) <em class="brace">{</em>
<a id="L203" name="L203"></a> 203                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L204" name="L204"></a> 204                            <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> f = <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>.<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>((<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i]);
<a id="L205" name="L205"></a> 205                            <strong class="reserved">if</strong> (f.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<strong class="reserved">null</strong>).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(oldValue)) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206                                <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(oldValue);
<a id="L207" name="L207"></a> 207                                <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37059.html" title="Multiple defined in 2 places.">writeExpression</a>(<strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>(oldValue, f, "get", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><strong class="reserved">null</strong><em class="brace">}</em>));
<a id="L208" name="L208"></a> 208                            <em class="brace">}</em>
<a id="L209" name="L209"></a> 209                         <em class="brace">}</em>
<a id="L210" name="L210"></a> 210                         <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em><em class="brace">}</em>
<a id="L211" name="L211"></a> 211                     <em class="brace">}</em>
<a id="L212" name="L212"></a> 212                 <em class="brace">}</em>
<a id="L213" name="L213"></a> 213                 <a href="../S/1816.html#L218" title="Defined at 218 in src/java/beans/DefaultPersistenceDelegate.java.">invokeStatement</a>(oldInstance, setter.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>oldValue<em class="brace">}</em>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L214" name="L214"></a> 214             <em class="brace">}</em>
<a id="L215" name="L215"></a> 215         <em class="brace">}</em>
<a id="L216" name="L216"></a> 216     <em class="brace">}</em>
<a id="L217" name="L217"></a> 217 
<a id="L218" name="L218"></a> 218     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/21093.html" title="Multiple referred from 32 places.">invokeStatement</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/24872.html" title="Multiple defined in 6 places.">instance</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6276.html#L204" title="Defined at 204 in src/com/sun/jmx/mbeanserver/ConvertingMethod.java.">methodName</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args, <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L219" name="L219"></a> 219         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37168.html" title="Multiple defined in 2 places.">writeStatement</a>(<strong class="reserved">new</strong> <a href="../D/8370.html" title="Multiple defined in 2 places.">Statement</a>(<a href="../D/24872.html" title="Multiple defined in 6 places.">instance</a>, <a href="../S/6276.html#L204" title="Defined at 204 in src/com/sun/jmx/mbeanserver/ConvertingMethod.java.">methodName</a>, args));
<a id="L220" name="L220"></a> 220     <em class="brace">}</em>
<a id="L221" name="L221"></a> 221 
<a id="L222" name="L222"></a> 222     <em class="comment">// Write out the properties of this instance.</em>
<a id="L223" name="L223"></a> 223     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1816.html#L406" title="Referred from 406 in src/java/beans/DefaultPersistenceDelegate.java.">initBean</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldInstance, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L224" name="L224"></a> 224         <strong class="reserved">for</strong> (<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> field : <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>.<a href="../D/19038.html" title="Multiple defined in 15 places.">getFields</a>()) <em class="brace">{</em>
<a id="L225" name="L225"></a> 225             <strong class="reserved">if</strong> (!ReflectUtil.isPackageAccessible(field.<a href="../D/18264.html" title="Multiple defined in 10 places.">getDeclaringClass</a>())) <em class="brace">{</em>
<a id="L226" name="L226"></a> 226                 <strong class="reserved">continue</strong>;
<a id="L227" name="L227"></a> 227             <em class="brace">}</em>
<a id="L228" name="L228"></a> 228             <strong class="reserved">int</strong> <a href="../D/27733.html" title="Multiple defined in 4 places.">mod</a> = field.<a href="../D/20712.html" title="Multiple defined in 18 places.">getModifiers</a>();
<a id="L229" name="L229"></a> 229             <strong class="reserved">if</strong> (<a href="../D/5688.html" title="Multiple defined in 3 places.">Modifier</a>.<a href="../D/25556.html" title="Multiple defined in 9 places.">isFinal</a>(<a href="../D/27733.html" title="Multiple defined in 4 places.">mod</a>) || <a href="../D/5688.html" title="Multiple defined in 3 places.">Modifier</a>.<a href="../D/26281.html" title="Multiple defined in 7 places.">isStatic</a>(<a href="../D/27733.html" title="Multiple defined in 4 places.">mod</a>) || <a href="../D/5688.html" title="Multiple defined in 3 places.">Modifier</a>.<a href="../D/26376.html" title="Multiple defined in 7 places.">isTransient</a>(<a href="../D/27733.html" title="Multiple defined in 4 places.">mod</a>)) <em class="brace">{</em>
<a id="L230" name="L230"></a> 230                 <strong class="reserved">continue</strong>;
<a id="L231" name="L231"></a> 231             <em class="brace">}</em>
<a id="L232" name="L232"></a> 232             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L233" name="L233"></a> 233                 <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> oldGetExp = <strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>(field, "get", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> oldInstance <em class="brace">}</em>);
<a id="L234" name="L234"></a> 234                 <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> newGetExp = <strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>(field, "get", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a> <em class="brace">}</em>);
<a id="L235" name="L235"></a> 235                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue = oldGetExp.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L236" name="L236"></a> 236                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue = newGetExp.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L237" name="L237"></a> 237                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37059.html" title="Multiple defined in 2 places.">writeExpression</a>(oldGetExp);
<a id="L238" name="L238"></a> 238                 <strong class="reserved">if</strong> (!<a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(newValue, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(oldValue))) <em class="brace">{</em>
<a id="L239" name="L239"></a> 239                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37168.html" title="Multiple defined in 2 places.">writeStatement</a>(<strong class="reserved">new</strong> <a href="../D/8370.html" title="Multiple defined in 2 places.">Statement</a>(field, "set", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> oldInstance, oldValue <em class="brace">}</em>));
<a id="L240" name="L240"></a> 240                 <em class="brace">}</em>
<a id="L241" name="L241"></a> 241             <em class="brace">}</em>
<a id="L242" name="L242"></a> 242             <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a>) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/18900.html" title="Multiple defined in 2 places.">getExceptionListener</a>().<a href="../S/1818.html#L42" title="Defined at 42 in src/java/beans/ExceptionListener.java.">exceptionThrown</a>(<a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a>);
<a id="L244" name="L244"></a> 244             <em class="brace">}</em>
<a id="L245" name="L245"></a> 245         <em class="brace">}</em>
<a id="L246" name="L246"></a> 246         <a href="../S/1797.html#L52" title="Defined at 52 in src/java/beans/BeanInfo.java.">BeanInfo</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>;
<a id="L247" name="L247"></a> 247         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L248" name="L248"></a> 248             <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = <a href="../D/4368.html" title="Multiple defined in 2 places.">Introspector</a>.<a href="../D/17228.html" title="Multiple defined in 7 places.">getBeanInfo</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L249" name="L249"></a> 249         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/4367.html" title="Multiple defined in 2 places.">IntrospectionException</a> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a>) <em class="brace">{</em>
<a id="L250" name="L250"></a> 250             <strong class="reserved">return</strong>;
<a id="L251" name="L251"></a> 251         <em class="brace">}</em>
<a id="L252" name="L252"></a> 252         <em class="comment">// Properties</em>
<a id="L253" name="L253"></a> 253         <strong class="reserved">for</strong> (<a href="../S/1815.html#L36" title="Defined at 36 in src/java/beans/PropertyDescriptor.java.">PropertyDescriptor</a> d : <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.<a href="../D/21729.html" title="Multiple defined in 5 places.">getPropertyDescriptors</a>()) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254             <strong class="reserved">if</strong> (d.<a href="../D/26376.html" title="Multiple defined in 7 places.">isTransient</a>()) <em class="brace">{</em>
<a id="L255" name="L255"></a> 255                 <strong class="reserved">continue</strong>;
<a id="L256" name="L256"></a> 256             <em class="brace">}</em>
<a id="L257" name="L257"></a> 257             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L258" name="L258"></a> 258                 <a href="../S/1816.html#L187" title="Defined at 187 in src/java/beans/DefaultPersistenceDelegate.java.">doProperty</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, d, oldInstance, <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L259" name="L259"></a> 259             <em class="brace">}</em>
<a id="L260" name="L260"></a> 260             <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/18900.html" title="Multiple defined in 2 places.">getExceptionListener</a>().<a href="../S/1818.html#L42" title="Defined at 42 in src/java/beans/ExceptionListener.java.">exceptionThrown</a>(e);
<a id="L262" name="L262"></a> 262             <em class="brace">}</em>
<a id="L263" name="L263"></a> 263         <em class="brace">}</em>
<a id="L264" name="L264"></a> 264 
<a id="L265" name="L265"></a> 265         <em class="comment">// Listeners</em>
<div class="comment">
        Pending(milne). There is a general problem with the archival of
        listeners which is unresolved as of 1.4. Many of the methods
        which install one object inside another (typically "add" methods
        or setters) automatically install a listener on the "child" object
        so that its "parent" may respond to changes that are made to it.
        For example the JTable:setModel() method automatically adds a
        TableModelListener (the JTable itself in this case) to the supplied
        table model.
        We do not need to explicitly add these listeners to the model in an
        archive as they will be added automatically by, in the above case,
        the JTable's "setModel" method. In some cases, we must specifically
        avoid trying to do this since the listener may be an inner class
        that cannot be instantiated using public API.
        No general mechanism currently
        exists for differentiating between these kind of listeners and
        those which were added explicitly by the user. A mechanism must
        be created to provide a general means to differentiate these
        special cases so as to provide reliable persistence of listeners
        for the general case.</div>
<a id="L289" name="L289"></a> 289         <strong class="reserved">if</strong> (!<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>.<strong class="reserved">class</strong>.<a href="../D/25213.html" title="Multiple defined in 7 places.">isAssignableFrom</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)) <em class="brace">{</em>
<a id="L290" name="L290"></a> 290             <strong class="reserved">return</strong>; <em class="comment">// Just handle the listeners of Components for now.</em>
<a id="L291" name="L291"></a> 291         <em class="brace">}</em>
<a id="L292" name="L292"></a> 292         <strong class="reserved">for</strong> (<a href="../S/1798.html#L40" title="Defined at 40 in src/java/beans/EventSetDescriptor.java.">EventSetDescriptor</a> d : <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.<a href="../D/18888.html" title="Multiple defined in 3 places.">getEventSetDescriptors</a>()) <em class="brace">{</em>
<a id="L293" name="L293"></a> 293             <strong class="reserved">if</strong> (d.<a href="../D/26376.html" title="Multiple defined in 7 places.">isTransient</a>()) <em class="brace">{</em>
<a id="L294" name="L294"></a> 294                 <strong class="reserved">continue</strong>;
<a id="L295" name="L295"></a> 295             <em class="brace">}</em>
<a id="L296" name="L296"></a> 296             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; listenerType = d.<a href="../S/1798.html#L294" title="Defined at 294 in src/java/beans/EventSetDescriptor.java.">getListenerType</a>();
<a id="L297" name="L297"></a> 297 
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299             <em class="comment">// The ComponentListener is added automatically, when</em>
<a id="L300" name="L300"></a> 300             <em class="comment">// Contatiner:add is called on the parent.</em>
<a id="L301" name="L301"></a> 301             <strong class="reserved">if</strong> (listenerType == <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.event.<a href="../S/2422.html#L54" title="Defined at 54 in src/java/awt/event/ComponentListener.java.">ComponentListener</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L302" name="L302"></a> 302                 <strong class="reserved">continue</strong>;
<a id="L303" name="L303"></a> 303             <em class="brace">}</em>
<a id="L304" name="L304"></a> 304 
<a id="L305" name="L305"></a> 305             <em class="comment">// JMenuItems have a change listener added to them in</em>
<a id="L306" name="L306"></a> 306             <em class="comment">// their "add" methods to enable accessibility support -</em>
<a id="L307" name="L307"></a> 307             <em class="comment">// see the add method in JMenuItem for details. We cannot</em>
<a id="L308" name="L308"></a> 308             <em class="comment">// instantiate this instance as it is a private inner class</em>
<a id="L309" name="L309"></a> 309             <em class="comment">// and do not need to do this anyway since it will be created</em>
<a id="L310" name="L310"></a> 310             <em class="comment">// and installed by the "add" method. Special case this for now,</em>
<a id="L311" name="L311"></a> 311             <em class="comment">// ignoring all change listeners on JMenuItems.</em>
<a id="L312" name="L312"></a> 312             <strong class="reserved">if</strong> (listenerType == <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.event.<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>.<strong class="reserved">class</strong> &amp;&amp;
<a id="L313" name="L313"></a> 313                 <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../S/2713.html#L91" title="Defined at 91 in src/javax/swing/JMenuItem.java.">JMenuItem</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314                 <strong class="reserved">continue</strong>;
<a id="L315" name="L315"></a> 315             <em class="brace">}</em>
<a id="L316" name="L316"></a> 316 
<a id="L317" name="L317"></a> 317             <a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[] oldL = <strong class="reserved">new</strong> <a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[0];
<a id="L318" name="L318"></a> 318             <a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[] newL = <strong class="reserved">new</strong> <a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[0];
<a id="L319" name="L319"></a> 319             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L320" name="L320"></a> 320                 <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> m = d.<a href="../S/1798.html#L404" title="Defined at 404 in src/java/beans/EventSetDescriptor.java.">getGetListenerMethod</a>();
<a id="L321" name="L321"></a> 321                 oldL = (<a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[])MethodUtil.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(m, oldInstance, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><em class="brace">}</em>);
<a id="L322" name="L322"></a> 322                 newL = (<a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[])MethodUtil.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(m, <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><em class="brace">}</em>);
<a id="L323" name="L323"></a> 323             <em class="brace">}</em>
<a id="L324" name="L324"></a> 324             <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e2) <em class="brace">{</em>
<a id="L325" name="L325"></a> 325                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L326" name="L326"></a> 326                     <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> m = <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("getListeners", <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[]<em class="brace">{</em><a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<strong class="reserved">class</strong><em class="brace">}</em>);
<a id="L327" name="L327"></a> 327                     oldL = (<a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[])MethodUtil.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(m, oldInstance, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>listenerType<em class="brace">}</em>);
<a id="L328" name="L328"></a> 328                     newL = (<a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>[])MethodUtil.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(m, <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>listenerType<em class="brace">}</em>);
<a id="L329" name="L329"></a> 329                 <em class="brace">}</em>
<a id="L330" name="L330"></a> 330                 <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e3) <em class="brace">{</em>
<a id="L331" name="L331"></a> 331                     <strong class="reserved">return</strong>;
<a id="L332" name="L332"></a> 332                 <em class="brace">}</em>
<a id="L333" name="L333"></a> 333             <em class="brace">}</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335             <em class="comment">// Asssume the listeners are in the same order and that there are no gaps.</em>
<a id="L336" name="L336"></a> 336             <em class="comment">// Eventually, this may need to do true differencing.</em>
<a id="L337" name="L337"></a> 337             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> addListenerMethodName = d.<a href="../S/1798.html#L362" title="Defined at 362 in src/java/beans/EventSetDescriptor.java.">getAddListenerMethod</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L338" name="L338"></a> 338             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = newL.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i &lt; oldL.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L339" name="L339"></a> 339                 <em class="comment">// System.out.println("Adding listener: " + addListenerMethodName + oldL[i]);</em>
<a id="L340" name="L340"></a> 340                 <a href="../S/1816.html#L218" title="Defined at 218 in src/java/beans/DefaultPersistenceDelegate.java.">invokeStatement</a>(oldInstance, addListenerMethodName, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>oldL[i]<em class="brace">}</em>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L341" name="L341"></a> 341             <em class="brace">}</em>
<a id="L342" name="L342"></a> 342 
<a id="L343" name="L343"></a> 343             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> removeListenerMethodName = d.<a href="../S/1798.html#L382" title="Defined at 382 in src/java/beans/EventSetDescriptor.java.">getRemoveListenerMethod</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L344" name="L344"></a> 344             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = oldL.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i &lt; newL.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L345" name="L345"></a> 345                 <a href="../S/1816.html#L218" title="Defined at 218 in src/java/beans/DefaultPersistenceDelegate.java.">invokeStatement</a>(oldInstance, removeListenerMethodName, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>newL[i]<em class="brace">}</em>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L346" name="L346"></a> 346             <em class="brace">}</em>
<a id="L347" name="L347"></a> 347         <em class="brace">}</em>
<a id="L348" name="L348"></a> 348     <em class="brace">}</em>
<a id="L349" name="L349"></a> 349 
<div class="comment">
      This default implementation of the <code>initialize</code> method assumes
      all state held in objects of this type is exposed via the
      matching pairs of "setter" and "getter" methods in the order
      they are returned by the Introspector. If a property descriptor
      defines a "transient" attribute with a value equal to
      <code>Boolean.TRUE</code> the property is ignored by this
      default implementation. Note that this use of the word
      "transient" is quite independent of the field modifier
      that is used by the <code>ObjectOutputStream</code>.
      <p>
      For each non-transient property, an expression is created
      in which the nullary "getter" method is applied
      to the <code>oldInstance</code>. The value of this
      expression is the value of the property in the instance that is
      being serialized. If the value of this expression
      in the cloned environment <code>mutatesTo</code> the
      target value, the new value is initialized to make it
      equivalent to the old value. In this case, because
      the property value has not changed there is no need to
      call the corresponding "setter" method and no statement
      is emitted. If not however, the expression for this value
      is replaced with another expression (normally a constructor)
      and the corresponding "setter" method is called to install
      the new property value in the object. This scheme removes
      default information from the output produced by streams
      using this delegate.
      </p><p>
      In passing these statements to the output stream, where they
      will be executed, side effects are made to the <code>newInstance</code>.
      In most cases this allows the problem of properties
      whose values depend on each other to actually help the
      serialization process by making the number of statements
      that need to be written to the output smaller. In general,
      the problem of handling interdependent properties is reduced to
      that of finding an order for the properties in
      a class such that no property value depends on the value of
      a subsequent property.
      @param type the type of the instances
      @param oldInstance The instance to be copied.
      @param newInstance The instance that is to be modified.
      @param out The stream to which any initialization statements should be written.
      @throws NullPointerException if <code>out</code> is <code>null</code>
      @see java.beans.Introspector#getBeanInfo
      @see java.beans.PropertyDescriptor</p></div>
<a id="L399" name="L399"></a> 399     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20681.html" title="Multiple referred from 99 places.">initialize</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L400" name="L400"></a> 400                               <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldInstance, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>,
<a id="L401" name="L401"></a> 401                               <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>)
<a id="L402" name="L402"></a> 402     <em class="brace">{</em>
<a id="L403" name="L403"></a> 403         <em class="comment">// System.out.println("DefulatPD:initialize" + type);</em>
<a id="L404" name="L404"></a> 404         <strong class="reserved">super</strong>.<a href="../D/24646.html" title="Multiple defined in 91 places.">initialize</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, oldInstance, <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L405" name="L405"></a> 405         <strong class="reserved">if</strong> (oldInstance.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>() == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em> <em class="comment">// !type.isInterface()) {</em>
<a id="L406" name="L406"></a> 406             <a href="../S/1816.html#L223" title="Defined at 223 in src/java/beans/DefaultPersistenceDelegate.java.">initBean</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, oldInstance, <a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L407" name="L407"></a> 407         <em class="brace">}</em>
<a id="L408" name="L408"></a> 408     <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1815.html#L36" title="Defined at 36 in src/java/beans/PropertyDescriptor.java.">PropertyDescriptor</a> <a href="../R/18515.html" title="Multiple referred from 5 places.">getPropertyDescriptor</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> property) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L412" name="L412"></a> 412             <strong class="reserved">for</strong> (<a href="../S/1815.html#L36" title="Defined at 36 in src/java/beans/PropertyDescriptor.java.">PropertyDescriptor</a> pd : <a href="../D/4368.html" title="Multiple defined in 2 places.">Introspector</a>.<a href="../D/17228.html" title="Multiple defined in 7 places.">getBeanInfo</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>).<a href="../D/21729.html" title="Multiple defined in 5 places.">getPropertyDescriptors</a>()) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                 <strong class="reserved">if</strong> (property.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(pd.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>()))
<a id="L414" name="L414"></a> 414                     <strong class="reserved">return</strong> pd;
<a id="L415" name="L415"></a> 415             <em class="brace">}</em>
<a id="L416" name="L416"></a> 416         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/4367.html" title="Multiple defined in 2 places.">IntrospectionException</a> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a>) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417         <em class="brace">}</em>
<a id="L418" name="L418"></a> 418         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L419" name="L419"></a> 419     <em class="brace">}</em>
<a id="L420" name="L420"></a> 420 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L99">[^]</a><a href="#L410">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
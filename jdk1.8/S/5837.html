<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L96">[^]</a><a href="#L730">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L96" title="Defined at 96.">reset</a></li>
<li><a href="#L120" title="Defined at 120.">pushContext</a></li>
<li><a href="#L153" title="Defined at 153.">popContext</a></li>
<li><a href="#L197" title="Defined at 197.">declarePrefix</a></li>
<li><a href="#L246" title="Defined at 246.">processName</a></li>
<li><a href="#L272" title="Defined at 272.">getURI</a></li>
<li><a href="#L291" title="Defined at 291.">getPrefixes</a></li>
<li><a href="#L315" title="Defined at 315.">getPrefix</a></li>
<li><a href="#L341" title="Defined at 341.">getPrefixes</a></li>
<li><a href="#L369" title="Defined at 369.">getDeclaredPrefixes</a></li>
<li><a href="#L406" title="Defined at 406.">hasMoreElements</a></li>
<li><a href="#L423" title="Defined at 423.">nextElement</a></li>
<li><a href="#L495" title="Defined at 495.">getChild</a></li>
<li><a href="#L504" title="Defined at 504.">getParent</a></li>
<li><a href="#L516" title="Defined at 516.">setParent</a></li>
<li><a href="#L537" title="Defined at 537.">declarePrefix</a></li>
<li><a href="#L574" title="Defined at 574.">processName</a></li>
<li><a href="#L648" title="Defined at 648.">getURI</a></li>
<li><a href="#L670" title="Defined at 670.">getPrefix</a></li>
<li><a href="#L686" title="Defined at 686.">getDeclaredPrefixes</a></li>
<li><a href="#L705" title="Defined at 705.">getPrefixes</a></li>
<li><a href="#L730" title="Defined at 730.">copyTables</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: NamespaceSupport2.java,v 1.3 2005/09/28 13:49:20 pvedula Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.utils;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.util.EmptyStackException;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Vector;
<a id="L29" name="L29"></a>  29 
<div class="comment">
  Encapsulate Namespace tracking logic for use by SAX drivers.
  <p>This class is an attempt to rewrite the SAX NamespaceSupport
  "helper" class for improved efficiency. It can be used to track the
  namespace declarations currently in scope, providing lookup
  routines to map prefixes to URIs and vice versa.</p>
  <p>ISSUE: For testing purposes, I've extended NamespaceSupport even
  though I'm completely reasserting all behaviors and fields.
  Wasteful.... But SAX did not put an interface under that object and
  we seem to have written that SAX class into our APIs... and I don't
  want to argue with it right now. </p>
  @see org.xml.sax.helpers.NamespaceSupport
 * </div>
<a id="L46" name="L46"></a>  46 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/5454.html" title="Multiple referred from 2 places.">NamespaceSupport2</a>
<a id="L47" name="L47"></a>  47     <strong class="reserved">extends</strong> org.xml.sax.helpers.<a href="../D/5978.html" title="Multiple defined in 2 places.">NamespaceSupport</a>
<a id="L48" name="L48"></a>  48 <em class="brace">{</em>
<a id="L49" name="L49"></a>  49     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L50" name="L50"></a>  50     <em class="comment">// Internal state.</em>
<a id="L51" name="L51"></a>  51     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L52" name="L52"></a>  52 
<a id="L53" name="L53"></a>  53     <strong class="reserved">private</strong> <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> currentContext; <em class="comment">// Current point on the double-linked stack</em>
<a id="L54" name="L54"></a>  54 
<a id="L55" name="L55"></a>  55 
<a id="L56" name="L56"></a>  56     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L57" name="L57"></a>  57     <em class="comment">// Constants.</em>
<a id="L58" name="L58"></a>  58     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L59" name="L59"></a>  59 
<a id="L60" name="L60"></a>  60 
<div class="comment">
      The XML Namespace as a constant.
      <p>This is the Namespace URI that is automatically mapped
      to the "xml" prefix.</p></div>
<a id="L67" name="L67"></a>  67     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> XMLNS =
<a id="L68" name="L68"></a>  68         "http://www.w3.org/XML/1998/namespace";
<a id="L69" name="L69"></a>  69 
<a id="L70" name="L70"></a>  70 
<a id="L71" name="L71"></a>  71     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L72" name="L72"></a>  72     <em class="comment">// Constructor.</em>
<a id="L73" name="L73"></a>  73     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L74" name="L74"></a>  74 
<a id="L75" name="L75"></a>  75 
<div class="comment">
      Create a new Namespace support object.</div>
<a id="L79" name="L79"></a>  79     <strong class="reserved">public</strong> NamespaceSupport2 ()
<a id="L80" name="L80"></a>  80     <em class="brace">{</em>
<a id="L81" name="L81"></a>  81         <a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L82" name="L82"></a>  82     <em class="brace">}</em>
<a id="L83" name="L83"></a>  83 
<a id="L84" name="L84"></a>  84 
<a id="L85" name="L85"></a>  85     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L86" name="L86"></a>  86     <em class="comment">// Context management.</em>
<a id="L87" name="L87"></a>  87     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L88" name="L88"></a>  88 
<a id="L89" name="L89"></a>  89 
<div class="comment">
      Reset this Namespace support object for reuse.
      <p>It is necessary to invoke this method before reusing the
      Namespace support object for a new session.</p></div>
<a id="L96" name="L96"></a>  96     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a> ()
<a id="L97" name="L97"></a>  97     <em class="brace">{</em>
<a id="L98" name="L98"></a>  98         <em class="comment">// Discarding the whole stack doesn't save us a lot versus</em>
<a id="L99" name="L99"></a>  99         <em class="comment">// creating a new NamespaceSupport. Do we care, or should we</em>
<a id="L100" name="L100"></a> 100         <em class="comment">// change this to just reset the root context?</em>
<a id="L101" name="L101"></a> 101         currentContext = <strong class="reserved">new</strong> <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a>(<strong class="reserved">null</strong>);
<a id="L102" name="L102"></a> 102         currentContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>("xml", XMLNS);
<a id="L103" name="L103"></a> 103     <em class="brace">}</em>
<a id="L104" name="L104"></a> 104 
<a id="L105" name="L105"></a> 105 
<div class="comment">
      Start a new Namespace context.
      <p>Normally, you should push a new context at the beginning
      of each XML element: the new context will automatically inherit
      the declarations of its parent context, but it will also keep
      track of which declarations were made within this context.</p>
      <p>The Namespace support object always starts with a base context
      already in force: in this context, only the "xml" prefix is
      declared.</p>
      @see #popContext</div>
<a id="L120" name="L120"></a> 120     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25262.html" title="Multiple referred from 29 places.">pushContext</a> ()
<a id="L121" name="L121"></a> 121     <em class="brace">{</em>
<a id="L122" name="L122"></a> 122         <em class="comment">// JJK: Context has a parent pointer.</em>
<a id="L123" name="L123"></a> 123         <em class="comment">// That means we don't need a stack to pop.</em>
<a id="L124" name="L124"></a> 124         <em class="comment">// We may want to retain for reuse, but that can be done via</em>
<a id="L125" name="L125"></a> 125         <em class="comment">// a child pointer.</em>
<a id="L126" name="L126"></a> 126 
<a id="L127" name="L127"></a> 127         <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> parentContext=currentContext;
<a id="L128" name="L128"></a> 128         currentContext = parentContext.<a href="../D/17626.html" title="Multiple defined in 28 places.">getChild</a>();
<a id="L129" name="L129"></a> 129         <strong class="reserved">if</strong> (currentContext == <strong class="reserved">null</strong>)<em class="brace">{</em>
<a id="L130" name="L130"></a> 130                 currentContext = <strong class="reserved">new</strong> <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a>(parentContext);
<a id="L131" name="L131"></a> 131             <em class="brace">}</em>
<a id="L132" name="L132"></a> 132         <strong class="reserved">else</strong><em class="brace">{</em>
<a id="L133" name="L133"></a> 133             <em class="comment">// JJK: This will wipe out any leftover data</em>
<a id="L134" name="L134"></a> 134             <em class="comment">// if we're reusing a previously allocated Context.</em>
<a id="L135" name="L135"></a> 135             currentContext.<a href="../D/33509.html" title="Multiple defined in 44 places.">setParent</a>(parentContext);
<a id="L136" name="L136"></a> 136         <em class="brace">}</em>
<a id="L137" name="L137"></a> 137     <em class="brace">}</em>
<a id="L138" name="L138"></a> 138 
<a id="L139" name="L139"></a> 139 
<div class="comment">
      Revert to the previous Namespace context.
      <p>Normally, you should pop the context at the end of each
      XML element.  After popping the context, all Namespace prefix
      mappings that were previously in force are restored.</p>
      <p>You must not attempt to declare additional Namespace
      prefixes after popping a context, unless you push another
      context first.</p>
      @see #pushContext</div>
<a id="L153" name="L153"></a> 153     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24809.html" title="Multiple referred from 23 places.">popContext</a> ()
<a id="L154" name="L154"></a> 154     <em class="brace">{</em>
<a id="L155" name="L155"></a> 155         <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> parentContext=currentContext.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L156" name="L156"></a> 156         <strong class="reserved">if</strong>(parentContext==<strong class="reserved">null</strong>)
<a id="L157" name="L157"></a> 157             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1158.html#L37" title="Defined at 37 in src/java/util/EmptyStackException.java.">EmptyStackException</a>();
<a id="L158" name="L158"></a> 158         <strong class="reserved">else</strong>
<a id="L159" name="L159"></a> 159             currentContext = parentContext;
<a id="L160" name="L160"></a> 160     <em class="brace">}</em>
<a id="L161" name="L161"></a> 161 
<a id="L162" name="L162"></a> 162 
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L165" name="L165"></a> 165     <em class="comment">// Operations within a context.</em>
<a id="L166" name="L166"></a> 166     <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L167" name="L167"></a> 167 
<a id="L168" name="L168"></a> 168 
<div class="comment">
      Declare a Namespace prefix.
      <p>This method declares a prefix in the current Namespace
      context; the prefix will remain in force until this context
      is popped, unless it is shadowed in a descendant context.</p>
      <p>To declare a default Namespace, use the empty string.  The
      prefix must not be "xml" or "xmlns".</p>
      <p>Note that you must <em>not</em> declare a prefix after
      you've pushed and popped another Namespace.</p>
      <p>Note that there is an asymmetry in this library: while {@link
      #getPrefix getPrefix} will not return the default "" prefix,
      even if you have declared one; to check for a default prefix,
      you have to look it up explicitly using <a href="#L272" title="Defined at 272.">getURI</a>.
      This asymmetry exists to make it easier to look up prefixes
      for attribute names, where the default prefix is not allowed.</p>
      @param prefix The prefix to declare, or null for the empty
             string.
      @param uri The Namespace URI to associate with the prefix.
      @return true if the prefix was legal, false otherwise
      @see #processName
      @see #getURI
      @see #getPrefix</div>
<a id="L197" name="L197"></a> 197     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/12937.html" title="Multiple referred from 42 places.">declarePrefix</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L198" name="L198"></a> 198     <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xml") || <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xmlns")) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L201" name="L201"></a> 201         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L202" name="L202"></a> 202             currentContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L203" name="L203"></a> 203             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L204" name="L204"></a> 204         <em class="brace">}</em>
<a id="L205" name="L205"></a> 205     <em class="brace">}</em>
<a id="L206" name="L206"></a> 206 
<a id="L207" name="L207"></a> 207 
<div class="comment">
      Process a raw XML 1.0 name.
      <p>This method processes a raw XML 1.0 name in the current
      context by removing the prefix and looking it up among the
      prefixes currently declared.  The return value will be the
      array supplied by the caller, filled in as follows:</p>
      <dl>
      <dt>parts[0]</dt>
      <dd>The Namespace URI, or an empty string if none is
       in use.</dd>
      <dt>parts[1]</dt>
      <dd>The local name (without prefix).</dd>
      <dt>parts[2]</dt>
      <dd>The original raw name.</dd>
      </dl>
      <p>All of the strings in the array will be internalized.  If
      the raw name has a prefix that has not been declared, then
      the return value will be null.</p>
      <p>Note that attribute names are processed differently than
      element names: an unprefixed element name will received the
      default Namespace (if any), while an unprefixed element name
      will not.</p>
      @param qName The raw XML 1.0 name to be processed.
      @param parts A string array supplied by the caller, capable of
             holding at least three members.
      @param isAttribute A flag indicating whether this is an
             attribute name (true) or an element name (false).
      @return The supplied array holding three internalized strings
             representing the Namespace URI (or empty string), the
             local name, and the raw XML 1.0 name; or null if there
             is an undeclared prefix.
      @see #declarePrefix
     * @see java.lang.String#intern </div>
<a id="L246" name="L246"></a> 246     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> [] <a href="../R/25166.html" title="Multiple referred from 6 places.">processName</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] parts,
<a id="L247" name="L247"></a> 247                                   <strong class="reserved">boolean</strong> <a href="../D/25219.html" title="Multiple defined in 7 places.">isAttribute</a>)
<a id="L248" name="L248"></a> 248     <em class="brace">{</em>
<a id="L249" name="L249"></a> 249         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>=currentContext.<a href="../D/29835.html" title="Multiple defined in 5 places.">processName</a>(qName, <a href="../D/25219.html" title="Multiple defined in 7 places.">isAttribute</a>);
<a id="L250" name="L250"></a> 250         <strong class="reserved">if</strong>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>==<strong class="reserved">null</strong>)
<a id="L251" name="L251"></a> 251             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L252" name="L252"></a> 252 
<a id="L253" name="L253"></a> 253         <em class="comment">// JJK: This recopying is required because processName may return</em>
<a id="L254" name="L254"></a> 254         <em class="comment">// a cached result. I Don't Like It. *****</em>
<a id="L255" name="L255"></a> 255         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,0,parts,0,3);
<a id="L256" name="L256"></a> 256         <strong class="reserved">return</strong> parts;
<a id="L257" name="L257"></a> 257     <em class="brace">}</em>
<a id="L258" name="L258"></a> 258 
<a id="L259" name="L259"></a> 259 
<div class="comment">
      Look up a prefix and get the currently-mapped Namespace URI.
      <p>This method looks up the prefix in the current context.
      Use the empty string ("") for the default Namespace.</p>
      @param prefix The prefix to look up.
      @return The associated Namespace URI, or null if the prefix
              is undeclared in this context.
      @see #getPrefix
      @see #getPrefixes</div>
<a id="L272" name="L272"></a> 272     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19651.html" title="Multiple referred from 112 places.">getURI</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L273" name="L273"></a> 273     <em class="brace">{</em>
<a id="L274" name="L274"></a> 274         <strong class="reserved">return</strong> currentContext.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L275" name="L275"></a> 275     <em class="brace">}</em>
<a id="L276" name="L276"></a> 276 
<a id="L277" name="L277"></a> 277 
<div class="comment">
      Return an enumeration of all prefixes currently declared.
      <p><strong>Note:</strong> if there is a default prefix, it will not be
      returned in this enumeration; check for the default prefix
      using the <a href="#L272" title="Defined at 272.">getURI</a> with an argument of "".</p>
      @return An enumeration of all prefixes declared in the
              current context except for the empty (default)
              prefix.
      @see #getDeclaredPrefixes
      @see #getURI</div>
<a id="L291" name="L291"></a> 291     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../R/18424.html" title="Multiple referred from 5 places.">getPrefixes</a> ()
<a id="L292" name="L292"></a> 292     <em class="brace">{</em>
<a id="L293" name="L293"></a> 293         <strong class="reserved">return</strong> currentContext.<a href="../D/21601.html" title="Multiple defined in 11 places.">getPrefixes</a>();
<a id="L294" name="L294"></a> 294     <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296 
<div class="comment">
      Return one of the prefixes mapped to a Namespace URI.
      <p>If more than one prefix is currently mapped to the same
      URI, this method will make an arbitrary selection; if you
      want all of the prefixes, use the <a href="#L291" title="Defined at 291.">getPrefixes</a>
      method instead.</p>
      <p><strong>Note:</strong> this will never return the empty
      (default) prefix; to check for a default prefix, use the {@link
      #getURI getURI} method with an argument of "".</p>
      @param uri The Namespace URI.
      @return One of the prefixes currently mapped to the URI supplied,
              or null if none is mapped or if the URI is assigned to
              the default Namespace.
      @see #getPrefixes(java.lang.String)
     * @see #getURI </div>
<a id="L315" name="L315"></a> 315     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18418.html" title="Multiple referred from 112 places.">getPrefix</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L316" name="L316"></a> 316     <em class="brace">{</em>
<a id="L317" name="L317"></a> 317         <strong class="reserved">return</strong> currentContext.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(uri);
<a id="L318" name="L318"></a> 318     <em class="brace">}</em>
<a id="L319" name="L319"></a> 319 
<a id="L320" name="L320"></a> 320 
<div class="comment">
      Return an enumeration of all prefixes currently declared for a URI.
      <p>This method returns prefixes mapped to a specific Namespace
      URI.  The xml: prefix will be included.  If you want only one
      prefix that's mapped to the Namespace URI, and you don't care
      which one you get, use the <a href="#L315" title="Defined at 315.">getPrefix</a>
       method instead.</p>
      <p><strong>Note:</strong> the empty (default) prefix is
      <em>never</em> included in this enumeration; to check for the
      presence of a default Namespace, use the <a href="#L272" title="Defined at 272.">getURI</a>
      method with an argument of "".</p>
      @param uri The Namespace URI.
      @return An enumeration of all prefixes declared in the
              current context.
      @see #getPrefix
      @see #getDeclaredPrefixes
     * @see #getURI </div>
<a id="L341" name="L341"></a> 341     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../R/18424.html" title="Multiple referred from 5 places.">getPrefixes</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L342" name="L342"></a> 342     <em class="brace">{</em>
<a id="L343" name="L343"></a> 343         <em class="comment">// JJK: The old code involved creating a vector, filling it</em>
<a id="L344" name="L344"></a> 344         <em class="comment">// with all the matching prefixes, and then getting its</em>
<a id="L345" name="L345"></a> 345         <em class="comment">// elements enumerator. Wastes storage, wastes cycles if we</em>
<a id="L346" name="L346"></a> 346         <em class="comment">// don't actually need them all. Better to either implement</em>
<a id="L347" name="L347"></a> 347         <em class="comment">// a specific enumerator for these prefixes... or a filter</em>
<a id="L348" name="L348"></a> 348         <em class="comment">// around the all-prefixes enumerator, which comes out to</em>
<a id="L349" name="L349"></a> 349         <em class="comment">// roughly the same thing.</em>
<a id="L350" name="L350"></a> 350         <em class="comment">//</em>
<a id="L351" name="L351"></a> 351         <em class="comment">// **** Currently a filter. That may not be most efficient</em>
<a id="L352" name="L352"></a> 352         <em class="comment">// when I'm done restructuring storage!</em>
<a id="L353" name="L353"></a> 353         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5837.html#L390" title="Defined at 390 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">PrefixForUriEnumerator</a>(<strong class="reserved">this</strong>,uri,<a href="../D/21601.html" title="Multiple defined in 11 places.">getPrefixes</a>());
<a id="L354" name="L354"></a> 354     <em class="brace">}</em>
<a id="L355" name="L355"></a> 355 
<a id="L356" name="L356"></a> 356 
<div class="comment">
      Return an enumeration of all prefixes declared in this context.
      <p>The empty (default) prefix will be included in this
      enumeration; note that this behaviour differs from that of
      <a href="#L315" title="Defined at 315.">getPrefix</a> and <a href="#L291" title="Defined at 291.">getPrefixes</a>.</p>
      @return An enumeration of all prefixes declared in this
              context.
      @see #getPrefixes
      @see #getURI</div>
<a id="L369" name="L369"></a> 369     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../R/15992.html" title="Multiple referred from 3 places.">getDeclaredPrefixes</a> ()
<a id="L370" name="L370"></a> 370     <em class="brace">{</em>
<a id="L371" name="L371"></a> 371         <strong class="reserved">return</strong> currentContext.<a href="../D/18260.html" title="Multiple defined in 5 places.">getDeclaredPrefixes</a>();
<a id="L372" name="L372"></a> 372     <em class="brace">}</em>
<a id="L373" name="L373"></a> 373 
<a id="L374" name="L374"></a> 374 
<a id="L375" name="L375"></a> 375 
<a id="L376" name="L376"></a> 376 <em class="brace">}</em>
<a id="L377" name="L377"></a> 377 
<a id="L378" name="L378"></a> 378 <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L379" name="L379"></a> 379 <em class="comment">// Local classes.</em>
<a id="L380" name="L380"></a> 380 <em class="comment">// These were _internal_ classes... but in fact they don't have to be,</em>
<a id="L381" name="L381"></a> 381 <em class="comment">// and may be more efficient if they aren't.</em>
<a id="L382" name="L382"></a> 382 <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L383" name="L383"></a> 383 
<div class="comment">
  Implementation of Enumeration filter, wrapped
  aroung the get-all-prefixes version of the operation. This is NOT
  necessarily the most efficient approach; finding the URI and then asking
  what prefixes apply to it might make much more sense.</div>
<a id="L390" name="L390"></a> 390 <strong class="reserved">class</strong> <a href="../S/5837.html#L353" title="Referred from 353 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">PrefixForUriEnumerator</a> <strong class="reserved">implements</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>
<a id="L391" name="L391"></a> 391 <em class="brace">{</em>
<a id="L392" name="L392"></a> 392     <strong class="reserved">private</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> allPrefixes;
<a id="L393" name="L393"></a> 393     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri;
<a id="L394" name="L394"></a> 394     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27091.html" title="Multiple defined in 2 places.">lookahead</a>=<strong class="reserved">null</strong>;
<a id="L395" name="L395"></a> 395     <strong class="reserved">private</strong> <a href="../S/5837.html#L46" title="Defined at 46 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">NamespaceSupport2</a> nsup;
<a id="L396" name="L396"></a> 396 
<a id="L397" name="L397"></a> 397     <em class="comment">// Kluge: Since one can't do a constructor on an</em>
<a id="L398" name="L398"></a> 398     <em class="comment">// anonymous class (as far as I know)...</em>
<a id="L399" name="L399"></a> 399     PrefixForUriEnumerator(<a href="../S/5837.html#L46" title="Defined at 46 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">NamespaceSupport2</a> nsup,<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> allPrefixes)
<a id="L400" name="L400"></a> 400     <em class="brace">{</em>
<a id="L401" name="L401"></a> 401         <strong class="reserved">this</strong>.nsup=nsup;
<a id="L402" name="L402"></a> 402         <strong class="reserved">this</strong>.uri=uri;
<a id="L403" name="L403"></a> 403         <strong class="reserved">this</strong>.allPrefixes=allPrefixes;
<a id="L404" name="L404"></a> 404     <em class="brace">}</em>
<a id="L405" name="L405"></a> 405 
<a id="L406" name="L406"></a> 406     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20227.html" title="Multiple referred from 465 places.">hasMoreElements</a>()
<a id="L407" name="L407"></a> 407     <em class="brace">{</em>
<a id="L408" name="L408"></a> 408         <strong class="reserved">if</strong>(<a href="../D/27091.html" title="Multiple defined in 2 places.">lookahead</a>!=<strong class="reserved">null</strong>)
<a id="L409" name="L409"></a> 409             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L410" name="L410"></a> 410 
<a id="L411" name="L411"></a> 411         <strong class="reserved">while</strong>(allPrefixes.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>())
<a id="L412" name="L412"></a> 412             <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>=(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)allPrefixes.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L414" name="L414"></a> 414                 <strong class="reserved">if</strong>(uri.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(nsup.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)))
<a id="L415" name="L415"></a> 415                     <em class="brace">{</em>
<a id="L416" name="L416"></a> 416                         <a href="../D/27091.html" title="Multiple defined in 2 places.">lookahead</a>=<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L417" name="L417"></a> 417                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L418" name="L418"></a> 418                     <em class="brace">}</em>
<a id="L419" name="L419"></a> 419             <em class="brace">}</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L421" name="L421"></a> 421     <em class="brace">}</em>
<a id="L422" name="L422"></a> 422 
<a id="L423" name="L423"></a> 423     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/23661.html" title="Multiple referred from 479 places.">nextElement</a>()
<a id="L424" name="L424"></a> 424     <em class="brace">{</em>
<a id="L425" name="L425"></a> 425         <strong class="reserved">if</strong>(<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>())
<a id="L426" name="L426"></a> 426             <em class="brace">{</em>
<a id="L427" name="L427"></a> 427                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> tmp=<a href="../D/27091.html" title="Multiple defined in 2 places.">lookahead</a>;
<a id="L428" name="L428"></a> 428                 <a href="../D/27091.html" title="Multiple defined in 2 places.">lookahead</a>=<strong class="reserved">null</strong>;
<a id="L429" name="L429"></a> 429                 <strong class="reserved">return</strong> tmp;
<a id="L430" name="L430"></a> 430             <em class="brace">}</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">else</strong>
<a id="L432" name="L432"></a> 432             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L433" name="L433"></a> 433     <em class="brace">}</em>
<a id="L434" name="L434"></a> 434 <em class="brace">}</em>
<a id="L435" name="L435"></a> 435 
<div class="comment">
  Internal class for a single Namespace context.
  <p>This module caches and reuses Namespace contexts, so the number allocated
  will be equal to the element depth of the document, not to the total
  number of elements (i.e. 5-10 rather than tens of thousands).</p></div>
<a id="L443" name="L443"></a> 443 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/1709.html" title="Multiple referred from 11 places.">Context2</a> <em class="brace">{</em>
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L446" name="L446"></a> 446     <em class="comment">// Manefest Constants</em>
<a id="L447" name="L447"></a> 447     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L448" name="L448"></a> 448 
<div class="comment">
      An empty enumeration.</div>
<a id="L452" name="L452"></a> 452     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> EMPTY_ENUMERATION =
<a id="L453" name="L453"></a> 453         <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>().<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L454" name="L454"></a> 454 
<a id="L455" name="L455"></a> 455     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L456" name="L456"></a> 456     <em class="comment">// Protected state.</em>
<a id="L457" name="L457"></a> 457     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L458" name="L458"></a> 458 
<a id="L459" name="L459"></a> 459     <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> prefixTable;
<a id="L460" name="L460"></a> 460     <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> uriTable;
<a id="L461" name="L461"></a> 461     <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> elementNameTable;
<a id="L462" name="L462"></a> 462     <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> attributeNameTable;
<a id="L463" name="L463"></a> 463     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> defaultNS = <strong class="reserved">null</strong>;
<a id="L464" name="L464"></a> 464 
<a id="L465" name="L465"></a> 465     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L466" name="L466"></a> 466     <em class="comment">// Internal state.</em>
<a id="L467" name="L467"></a> 467     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L468" name="L468"></a> 468 
<a id="L469" name="L469"></a> 469     <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> declarations = <strong class="reserved">null</strong>;
<a id="L470" name="L470"></a> 470     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> tablesDirty = <strong class="reserved">false</strong>;
<a id="L471" name="L471"></a> 471     <strong class="reserved">private</strong> <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <strong class="reserved">null</strong>;
<a id="L472" name="L472"></a> 472     <strong class="reserved">private</strong> <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> child = <strong class="reserved">null</strong>;
<a id="L473" name="L473"></a> 473 
<div class="comment">
      Create a new Namespace context.</div>
<a id="L477" name="L477"></a> 477     <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> (Context2 <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>)
<a id="L478" name="L478"></a> 478     <em class="brace">{</em>
<a id="L479" name="L479"></a> 479         <strong class="reserved">if</strong>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>==<strong class="reserved">null</strong>)
<a id="L480" name="L480"></a> 480             <em class="brace">{</em>
<a id="L481" name="L481"></a> 481                 prefixTable = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L482" name="L482"></a> 482                 uriTable = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L483" name="L483"></a> 483                 elementNameTable=<strong class="reserved">null</strong>;
<a id="L484" name="L484"></a> 484                 attributeNameTable=<strong class="reserved">null</strong>;
<a id="L485" name="L485"></a> 485             <em class="brace">}</em>
<a id="L486" name="L486"></a> 486         <strong class="reserved">else</strong>
<a id="L487" name="L487"></a> 487             <a href="../D/33509.html" title="Multiple defined in 44 places.">setParent</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L488" name="L488"></a> 488     <em class="brace">}</em>
<a id="L489" name="L489"></a> 489 
<a id="L490" name="L490"></a> 490 
<div class="comment">
      @returns The child Namespace context object, or null if this
      is the last currently on the chain.</div>
<a id="L495" name="L495"></a> 495     <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> <a href="../R/15535.html" title="Multiple referred from 151 places.">getChild</a>()
<a id="L496" name="L496"></a> 496     <em class="brace">{</em>
<a id="L497" name="L497"></a> 497         <strong class="reserved">return</strong> child;
<a id="L498" name="L498"></a> 498     <em class="brace">}</em>
<a id="L499" name="L499"></a> 499 
<div class="comment">
      @returns The parent Namespace context object, or null if this
      is the root.</div>
<a id="L504" name="L504"></a> 504     <a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> <a href="../R/18269.html" title="Multiple referred from 606 places.">getParent</a>()
<a id="L505" name="L505"></a> 505     <em class="brace">{</em>
<a id="L506" name="L506"></a> 506         <strong class="reserved">return</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L507" name="L507"></a> 507     <em class="brace">}</em>
<a id="L508" name="L508"></a> 508 
<div class="comment">
      (Re)set the parent of this Namespace context.
      This is separate from the c'tor because it's re-applied
      when a Context2 is reused by push-after-pop.
      @param parent The parent Namespace context object.</div>
<a id="L516" name="L516"></a> 516     <strong class="reserved">void</strong> <a href="../R/27912.html" title="Multiple referred from 145 places.">setParent</a> (<a href="../S/5837.html#L443" title="Defined at 443 in src/com/sun/org/apache/xml/internal/utils/NamespaceSupport2.java.">Context2</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>)
<a id="L517" name="L517"></a> 517     <em class="brace">{</em>
<a id="L518" name="L518"></a> 518         <strong class="reserved">this</strong>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L519" name="L519"></a> 519         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.child = <strong class="reserved">this</strong>;        <em class="comment">// JJK: Doubly-linked</em>
<a id="L520" name="L520"></a> 520         declarations = <strong class="reserved">null</strong>;
<a id="L521" name="L521"></a> 521         prefixTable = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.prefixTable;
<a id="L522" name="L522"></a> 522         uriTable = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.uriTable;
<a id="L523" name="L523"></a> 523         elementNameTable = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.elementNameTable;
<a id="L524" name="L524"></a> 524         attributeNameTable = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.attributeNameTable;
<a id="L525" name="L525"></a> 525         defaultNS = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.defaultNS;
<a id="L526" name="L526"></a> 526         tablesDirty = <strong class="reserved">false</strong>;
<a id="L527" name="L527"></a> 527     <em class="brace">}</em>
<a id="L528" name="L528"></a> 528 
<a id="L529" name="L529"></a> 529 
<div class="comment">
      Declare a Namespace prefix for this context.
      @param prefix The prefix to declare.
      @param uri The associated Namespace URI.
      @see org.xml.sax.helpers.NamespaceSupport2#declarePrefix</div>
<a id="L537" name="L537"></a> 537     <strong class="reserved">void</strong> <a href="../R/12937.html" title="Multiple referred from 42 places.">declarePrefix</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L538" name="L538"></a> 538     <em class="brace">{</em>
<a id="L539" name="L539"></a> 539                                 <em class="comment">// Lazy processing...</em>
<a id="L540" name="L540"></a> 540         <strong class="reserved">if</strong> (!tablesDirty) <em class="brace">{</em>
<a id="L541" name="L541"></a> 541             <a href="../D/13521.html" title="Multiple defined in 2 places.">copyTables</a>();
<a id="L542" name="L542"></a> 542         <em class="brace">}</em>
<a id="L543" name="L543"></a> 543         <strong class="reserved">if</strong> (declarations == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544             declarations = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L545" name="L545"></a> 545         <em class="brace">}</em>
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547         <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../S/1729.html#L3167" title="Defined at 3167 in src/java/lang/String.java.">intern</a>();
<a id="L548" name="L548"></a> 548         uri = uri.<a href="../S/1729.html#L3167" title="Defined at 3167 in src/java/lang/String.java.">intern</a>();
<a id="L549" name="L549"></a> 549         <strong class="reserved">if</strong> ("".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)) <em class="brace">{</em>
<a id="L550" name="L550"></a> 550             <strong class="reserved">if</strong> ("".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(uri)) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551                 defaultNS = <strong class="reserved">null</strong>;
<a id="L552" name="L552"></a> 552             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                 defaultNS = uri;
<a id="L554" name="L554"></a> 554             <em class="brace">}</em>
<a id="L555" name="L555"></a> 555         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L556" name="L556"></a> 556             prefixTable.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L557" name="L557"></a> 557             uriTable.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(uri, <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>); <em class="comment">// may wipe out another prefix</em>
<a id="L558" name="L558"></a> 558         <em class="brace">}</em>
<a id="L559" name="L559"></a> 559         declarations.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L560" name="L560"></a> 560     <em class="brace">}</em>
<a id="L561" name="L561"></a> 561 
<a id="L562" name="L562"></a> 562 
<div class="comment">
      Process a raw XML 1.0 name in this context.
      @param qName The raw XML 1.0 name.
      @param isAttribute true if this is an attribute name.
      @return An array of three strings containing the
              URI part (or empty string), the local part,
              and the raw name, all internalized, or null
              if there is an undeclared prefix.
      @see org.xml.sax.helpers.NamespaceSupport2#processName</div>
<a id="L574" name="L574"></a> 574     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> [] <a href="../R/25166.html" title="Multiple referred from 6 places.">processName</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName, <strong class="reserved">boolean</strong> <a href="../D/25219.html" title="Multiple defined in 7 places.">isAttribute</a>)
<a id="L575" name="L575"></a> 575     <em class="brace">{</em>
<a id="L576" name="L576"></a> 576         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[];
<a id="L577" name="L577"></a> 577         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> table;
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579                                 <em class="comment">// Select the appropriate table.</em>
<a id="L580" name="L580"></a> 580         <strong class="reserved">if</strong> (<a href="../D/25219.html" title="Multiple defined in 7 places.">isAttribute</a>) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581             <strong class="reserved">if</strong>(elementNameTable==<strong class="reserved">null</strong>)
<a id="L582" name="L582"></a> 582                 elementNameTable=<strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L583" name="L583"></a> 583             table = elementNameTable;
<a id="L584" name="L584"></a> 584         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L585" name="L585"></a> 585             <strong class="reserved">if</strong>(attributeNameTable==<strong class="reserved">null</strong>)
<a id="L586" name="L586"></a> 586                 attributeNameTable=<strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L587" name="L587"></a> 587             table = attributeNameTable;
<a id="L588" name="L588"></a> 588         <em class="brace">}</em>
<a id="L589" name="L589"></a> 589 
<a id="L590" name="L590"></a> 590                                 <em class="comment">// Start by looking in the cache, and</em>
<a id="L591" name="L591"></a> 591                                 <em class="comment">// return immediately if the name</em>
<a id="L592" name="L592"></a> 592                                 <em class="comment">// is already known in this content</em>
<a id="L593" name="L593"></a> 593         <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[])table.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(qName);
<a id="L594" name="L594"></a> 594         <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L595" name="L595"></a> 595             <strong class="reserved">return</strong> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L596" name="L596"></a> 596         <em class="brace">}</em>
<a id="L597" name="L597"></a> 597 
<a id="L598" name="L598"></a> 598                                 <em class="comment">// We haven't seen this name in this</em>
<a id="L599" name="L599"></a> 599                                 <em class="comment">// context before.</em>
<a id="L600" name="L600"></a> 600         <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[3];
<a id="L601" name="L601"></a> 601         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = qName.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':');
<a id="L602" name="L602"></a> 602 
<a id="L603" name="L603"></a> 603 
<a id="L604" name="L604"></a> 604                                 <em class="comment">// No prefix.</em>
<a id="L605" name="L605"></a> 605         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == -1) <em class="brace">{</em>
<a id="L606" name="L606"></a> 606             <strong class="reserved">if</strong> (<a href="../D/25219.html" title="Multiple defined in 7 places.">isAttribute</a> || defaultNS == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L607" name="L607"></a> 607                 <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[0] = "";
<a id="L608" name="L608"></a> 608             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L609" name="L609"></a> 609                 <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[0] = defaultNS;
<a id="L610" name="L610"></a> 610             <em class="brace">}</em>
<a id="L611" name="L611"></a> 611             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[1] = qName.<a href="../S/1729.html#L3167" title="Defined at 3167 in src/java/lang/String.java.">intern</a>();
<a id="L612" name="L612"></a> 612             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[2] = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[1];
<a id="L613" name="L613"></a> 613         <em class="brace">}</em>
<a id="L614" name="L614"></a> 614 
<a id="L615" name="L615"></a> 615                                 <em class="comment">// Prefix</em>
<a id="L616" name="L616"></a> 616         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L617" name="L617"></a> 617             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = qName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L618" name="L618"></a> 618             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> local = qName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1);
<a id="L619" name="L619"></a> 619             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri;
<a id="L620" name="L620"></a> 620             <strong class="reserved">if</strong> ("".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)) <em class="brace">{</em>
<a id="L621" name="L621"></a> 621                 uri = defaultNS;
<a id="L622" name="L622"></a> 622             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L623" name="L623"></a> 623                 uri = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)prefixTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L624" name="L624"></a> 624             <em class="brace">}</em>
<a id="L625" name="L625"></a> 625             <strong class="reserved">if</strong> (uri == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L626" name="L626"></a> 626                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L627" name="L627"></a> 627             <em class="brace">}</em>
<a id="L628" name="L628"></a> 628             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[0] = uri;
<a id="L629" name="L629"></a> 629             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[1] = local.<a href="../S/1729.html#L3167" title="Defined at 3167 in src/java/lang/String.java.">intern</a>();
<a id="L630" name="L630"></a> 630             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[2] = qName.<a href="../S/1729.html#L3167" title="Defined at 3167 in src/java/lang/String.java.">intern</a>();
<a id="L631" name="L631"></a> 631         <em class="brace">}</em>
<a id="L632" name="L632"></a> 632 
<a id="L633" name="L633"></a> 633                                 <em class="comment">// Save in the cache for future use.</em>
<a id="L634" name="L634"></a> 634         table.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>[2], <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L635" name="L635"></a> 635         tablesDirty = <strong class="reserved">true</strong>;
<a id="L636" name="L636"></a> 636         <strong class="reserved">return</strong> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L637" name="L637"></a> 637     <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<a id="L639" name="L639"></a> 639 
<div class="comment">
      Look up the URI associated with a prefix in this context.
      @param prefix The prefix to look up.
      @return The associated Namespace URI, or null if none is
              declared.
      @see org.xml.sax.helpers.NamespaceSupport2#getURI</div>
<a id="L648" name="L648"></a> 648     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19651.html" title="Multiple referred from 112 places.">getURI</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L649" name="L649"></a> 649     <em class="brace">{</em>
<a id="L650" name="L650"></a> 650         <strong class="reserved">if</strong> ("".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)) <em class="brace">{</em>
<a id="L651" name="L651"></a> 651             <strong class="reserved">return</strong> defaultNS;
<a id="L652" name="L652"></a> 652         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (prefixTable == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L653" name="L653"></a> 653             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L654" name="L654"></a> 654         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L655" name="L655"></a> 655             <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)prefixTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L656" name="L656"></a> 656         <em class="brace">}</em>
<a id="L657" name="L657"></a> 657     <em class="brace">}</em>
<a id="L658" name="L658"></a> 658 
<a id="L659" name="L659"></a> 659 
<div class="comment">
      Look up one of the prefixes associated with a URI in this context.
      <p>Since many prefixes may be mapped to the same URI,
      the return value may be unreliable.</p>
      @param uri The URI to look up.
      @return The associated prefix, or null if none is declared.
      @see org.xml.sax.helpers.NamespaceSupport2#getPrefix</div>
<a id="L670" name="L670"></a> 670     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18418.html" title="Multiple referred from 112 places.">getPrefix</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L671" name="L671"></a> 671     <em class="brace">{</em>
<a id="L672" name="L672"></a> 672         <strong class="reserved">if</strong> (uriTable == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L673" name="L673"></a> 673             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L674" name="L674"></a> 674         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L675" name="L675"></a> 675             <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)uriTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(uri);
<a id="L676" name="L676"></a> 676         <em class="brace">}</em>
<a id="L677" name="L677"></a> 677     <em class="brace">}</em>
<a id="L678" name="L678"></a> 678 
<a id="L679" name="L679"></a> 679 
<div class="comment">
      Return an enumeration of prefixes declared in this context.
      @return An enumeration of prefixes (possibly empty).
      @see org.xml.sax.helpers.NamespaceSupport2#getDeclaredPrefixes</div>
<a id="L686" name="L686"></a> 686     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../R/15992.html" title="Multiple referred from 3 places.">getDeclaredPrefixes</a> ()
<a id="L687" name="L687"></a> 687     <em class="brace">{</em>
<a id="L688" name="L688"></a> 688         <strong class="reserved">if</strong> (declarations == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L689" name="L689"></a> 689             <strong class="reserved">return</strong> EMPTY_ENUMERATION;
<a id="L690" name="L690"></a> 690         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L691" name="L691"></a> 691             <strong class="reserved">return</strong> declarations.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L692" name="L692"></a> 692         <em class="brace">}</em>
<a id="L693" name="L693"></a> 693     <em class="brace">}</em>
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695 
<div class="comment">
      Return an enumeration of all prefixes currently in force.
      <p>The default prefix, if in force, is <em>not</em>
      returned, and will have to be checked for separately.</p>
      @return An enumeration of prefixes (never empty).
      @see org.xml.sax.helpers.NamespaceSupport2#getPrefixes</div>
<a id="L705" name="L705"></a> 705     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../R/18424.html" title="Multiple referred from 5 places.">getPrefixes</a> ()
<a id="L706" name="L706"></a> 706     <em class="brace">{</em>
<a id="L707" name="L707"></a> 707         <strong class="reserved">if</strong> (prefixTable == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L708" name="L708"></a> 708             <strong class="reserved">return</strong> EMPTY_ENUMERATION;
<a id="L709" name="L709"></a> 709         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L710" name="L710"></a> 710             <strong class="reserved">return</strong> prefixTable.<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>();
<a id="L711" name="L711"></a> 711         <em class="brace">}</em>
<a id="L712" name="L712"></a> 712     <em class="brace">}</em>
<a id="L713" name="L713"></a> 713 
<a id="L714" name="L714"></a> 714     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L715" name="L715"></a> 715     <em class="comment">// Internal methods.</em>
<a id="L716" name="L716"></a> 716     <em class="comment">////////////////////////////////////////////////////////////////</em>
<a id="L717" name="L717"></a> 717 
<div class="comment">
      Copy on write for the internal tables in this context.
      <p>This class is optimized for the normal case where most
      elements do not contain Namespace declarations. In that case,
      the Context2 will share data structures with its parent.
      New tables are obtained only when new declarations are issued,
      so they can be popped off the stack.</p>
      <p> JJK: **** Alternative: each Context2 might declare
       _only_ its local bindings, and delegate upward if not found.</p></div>
<a id="L730" name="L730"></a> 730     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/12132.html" title="Multiple referred from 3 places.">copyTables</a> ()
<a id="L731" name="L731"></a> 731     <em class="brace">{</em>
<a id="L732" name="L732"></a> 732         <em class="comment">// Start by copying our parent's bindings</em>
<a id="L733" name="L733"></a> 733         prefixTable = (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>)prefixTable.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L734" name="L734"></a> 734         uriTable = (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>)uriTable.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L735" name="L735"></a> 735 
<a id="L736" name="L736"></a> 736         <em class="comment">// Replace the caches with empty ones, rather than</em>
<a id="L737" name="L737"></a> 737         <em class="comment">// trying to determine which bindings should be flushed.</em>
<a id="L738" name="L738"></a> 738         <em class="comment">// As far as I can tell, these caches are never actually</em>
<a id="L739" name="L739"></a> 739         <em class="comment">// used in Xalan... More efficient to remove the whole</em>
<a id="L740" name="L740"></a> 740         <em class="comment">// cache system? ****</em>
<a id="L741" name="L741"></a> 741         <strong class="reserved">if</strong>(elementNameTable!=<strong class="reserved">null</strong>)
<a id="L742" name="L742"></a> 742             elementNameTable=<strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L743" name="L743"></a> 743         <strong class="reserved">if</strong>(attributeNameTable!=<strong class="reserved">null</strong>)
<a id="L744" name="L744"></a> 744             attributeNameTable=<strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L745" name="L745"></a> 745         tablesDirty = <strong class="reserved">true</strong>;
<a id="L746" name="L746"></a> 746     <em class="brace">}</em>
<a id="L747" name="L747"></a> 747 
<a id="L748" name="L748"></a> 748 <em class="brace">}</em>
<a id="L749" name="L749"></a> 749 
<a id="L750" name="L750"></a> 750 
<a id="L751" name="L751"></a> 751 <em class="comment">// end of NamespaceSupport2.java</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L96">[^]</a><a href="#L730">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
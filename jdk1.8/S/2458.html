<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/text/DecimalFormat.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L490">[^]</a><a href="#L3716">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L490" title="Defined at 490.">format</a></li>
<li><a href="#L523" title="Defined at 523.">format</a></li>
<li><a href="#L556" title="Defined at 556.">format</a></li>
<li><a href="#L641" title="Defined at 641.">format</a></li>
<li><a href="#L659" title="Defined at 659.">format</a></li>
<li><a href="#L728" title="Defined at 728.">format</a></li>
<li><a href="#L744" title="Defined at 744.">format</a></li>
<li><a href="#L781" title="Defined at 781.">format</a></li>
<li><a href="#L799" title="Defined at 799.">format</a></li>
<li><a href="#L856" title="Defined at 856.">formatToCharacterIterator</a></li>
<li><a href="#L971" title="Defined at 971.">checkAndSetFastPathStatus</a></li>
<li><a href="#L1104" title="Defined at 1104.">exactRoundUp</a></li>
<li><a href="#L1237" title="Defined at 1237.">collectIntegralDigits</a></li>
<li><a href="#L1279" title="Defined at 1279.">collectFractionalDigits</a></li>
<li><a href="#L1321" title="Defined at 1321.">addAffixes</a></li>
<li><a href="#L1340" title="Defined at 1340.">prependPrefix</a></li>
<li><a href="#L1377" title="Defined at 1377.">appendSuffix</a></li>
<li><a href="#L1417" title="Defined at 1417.">localizeDigits</a></li>
<li><a href="#L1455" title="Defined at 1455.">fastDoubleFormat</a></li>
<li><a href="#L1556" title="Defined at 1556.">fastFormat</a></li>
<li><a href="#L1599" title="Defined at 1599.">subformat</a></li>
<li><a href="#L1915" title="Defined at 1915.">append</a></li>
<li><a href="#L1995" title="Defined at 1995.">parse</a></li>
<li><a href="#L2104" title="Defined at 2104.">getBigIntegerMultiplier</a></li>
<li><a href="#L2115" title="Defined at 2115.">getBigDecimalMultiplier</a></li>
<li><a href="#L2139" title="Defined at 2139.">subparse</a></li>
<li><a href="#L2356" title="Defined at 2356.">getDecimalFormatSymbols</a></li>
<li><a href="#L2372" title="Defined at 2372.">setDecimalFormatSymbols</a></li>
<li><a href="#L2389" title="Defined at 2389.">getPositivePrefix</a></li>
<li><a href="#L2399" title="Defined at 2399.">setPositivePrefix</a></li>
<li><a href="#L2414" title="Defined at 2414.">getPositivePrefixFieldPositions</a></li>
<li><a href="#L2431" title="Defined at 2431.">getNegativePrefix</a></li>
<li><a href="#L2441" title="Defined at 2441.">setNegativePrefix</a></li>
<li><a href="#L2455" title="Defined at 2455.">getNegativePrefixFieldPositions</a></li>
<li><a href="#L2472" title="Defined at 2472.">getPositiveSuffix</a></li>
<li><a href="#L2482" title="Defined at 2482.">setPositiveSuffix</a></li>
<li><a href="#L2496" title="Defined at 2496.">getPositiveSuffixFieldPositions</a></li>
<li><a href="#L2513" title="Defined at 2513.">getNegativeSuffix</a></li>
<li><a href="#L2523" title="Defined at 2523.">setNegativeSuffix</a></li>
<li><a href="#L2537" title="Defined at 2537.">getNegativeSuffixFieldPositions</a></li>
<li><a href="#L2555" title="Defined at 2555.">getMultiplier</a></li>
<li><a href="#L2573" title="Defined at 2573.">setMultiplier</a></li>
<li><a href="#L2584" title="Defined at 2584.">setGroupingUsed</a></li>
<li><a href="#L2599" title="Defined at 2599.">getGroupingSize</a></li>
<li><a href="#L2615" title="Defined at 2615.">setGroupingSize</a></li>
<li><a href="#L2628" title="Defined at 2628.">isDecimalSeparatorAlwaysShown</a></li>
<li><a href="#L2640" title="Defined at 2640.">setDecimalSeparatorAlwaysShown</a></li>
<li><a href="#L2654" title="Defined at 2654.">isParseBigDecimal</a></li>
<li><a href="#L2667" title="Defined at 2667.">setParseBigDecimal</a></li>
<li><a href="#L2675" title="Defined at 2675.">clone</a></li>
<li><a href="#L2700" title="Defined at 2700.">equals</a></li>
<li><a href="#L2742" title="Defined at 2742.">hashCode</a></li>
<li><a href="#L2754" title="Defined at 2754.">toPattern</a></li>
<li><a href="#L2765" title="Defined at 2765.">toLocalizedPattern</a></li>
<li><a href="#L2775" title="Defined at 2775.">expandAffixes</a></li>
<li><a href="#L2810" title="Defined at 2810.">expandAffix</a></li>
<li><a href="#L2857" title="Defined at 2857.">expandAffix</a></li>
<li><a href="#L2936" title="Defined at 2936.">appendAffix</a></li>
<li><a href="#L2985" title="Defined at 2985.">appendAffix</a></li>
<li><a href="#L3022" title="Defined at 3022.">toPattern</a></li>
<li><a href="#L3103" title="Defined at 3103.">applyPattern</a></li>
<li><a href="#L3130" title="Defined at 3130.">applyLocalizedPattern</a></li>
<li><a href="#L3137" title="Defined at 3137.">applyPattern</a></li>
<li><a href="#L3477" title="Defined at 3477.">setMaximumIntegerDigits</a></li>
<li><a href="#L3498" title="Defined at 3498.">setMinimumIntegerDigits</a></li>
<li><a href="#L3519" title="Defined at 3519.">setMaximumFractionDigits</a></li>
<li><a href="#L3540" title="Defined at 3540.">setMinimumFractionDigits</a></li>
<li><a href="#L3561" title="Defined at 3561.">getMaximumIntegerDigits</a></li>
<li><a href="#L3574" title="Defined at 3574.">getMinimumIntegerDigits</a></li>
<li><a href="#L3587" title="Defined at 3587.">getMaximumFractionDigits</a></li>
<li><a href="#L3600" title="Defined at 3600.">getMinimumFractionDigits</a></li>
<li><a href="#L3615" title="Defined at 3615.">getCurrency</a></li>
<li><a href="#L3632" title="Defined at 3632.">setCurrency</a></li>
<li><a href="#L3650" title="Defined at 3650.">getRoundingMode</a></li>
<li><a href="#L3663" title="Defined at 3663.">setRoundingMode</a></li>
<li><a href="#L3716" title="Defined at 3716.">readObject</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1996, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  (C) Copyright Taligent, Inc. 1996, 1997 - All Rights Reserved
  (C) Copyright IBM Corp. 1996 - 1998 - All Rights Reserved
    The original version of this source code and documentation is copyrighted
  and owned by Taligent, Inc., a wholly-owned subsidiary of IBM. These
  materials are provided under terms of a License Agreement between Taligent
  and Sun. This technology is protected by multiple US and International
  patents. This notice and attribution to Taligent may not be removed.
    Taligent is a registered trademark of Taligent, Inc.</div>
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.io.IOException;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.io.InvalidObjectException;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.math.BigDecimal;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.math.BigInteger;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> java.math.RoundingMode;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> java.text.spi.NumberFormatProvider;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> java.util.Currency;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> java.util.Locale;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> java.util.ResourceBundle;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentHashMap;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentMap;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> java.util.concurrent.atomic.AtomicInteger;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> java.util.concurrent.atomic.AtomicLong;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> sun.util.locale.provider.LocaleProviderAdapter;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> sun.util.locale.provider.ResourceBundleBasedAdapter;
<a id="L58" name="L58"></a>  58 
<div class="comment">
  <code>DecimalFormat</code> is a concrete subclass of
  <code>NumberFormat</code> that formats decimal numbers. It has a variety of
  features designed to make it possible to parse and format numbers in any
  locale, including support for Western, Arabic, and Indic digits.  It also
  supports different kinds of numbers, including integers (123), fixed-point
  numbers (123.4), scientific notation (1.23E4), percentages (12%), and
  currency amounts ($123).  All of these can be localized.
  <p>To obtain a <code>NumberFormat</code> for a specific locale, including the
  default locale, call one of <code>NumberFormat</code>'s factory methods, such
  as <code>getInstance()</code>.  In general, do not call the
  <code>DecimalFormat</code> constructors directly, since the
  <code>NumberFormat</code> factory methods may return subclasses other than
  <code>DecimalFormat</code>. If you need to customize the format object, do
  something like this:
  </p><blockquote><pre>  NumberFormat f = NumberFormat.getInstance(loc);
  if (f instanceof DecimalFormat) {
      ((DecimalFormat) f).setDecimalSeparatorAlwaysShown(true);
  }
  </pre></blockquote>
  <p>A <code>DecimalFormat</code> comprises a <em>pattern</em> and a set of
  <em>symbols</em>.  The pattern may be set directly using
  <code>applyPattern()</code>, or indirectly using the API methods.  The
  symbols are stored in a <code>DecimalFormatSymbols</code> object.  When using
  the <code>NumberFormat</code> factory methods, the pattern and symbols are
  read from localized <code>ResourceBundle</code>s.
  </p><h3>Patterns</h3>
  <code>DecimalFormat</code> patterns have the following syntax:
  <blockquote><pre>  <i>Pattern:</i>
          <i>PositivePattern</i>
          <i>PositivePattern</i> ; <i>NegativePattern</i>
  <i>PositivePattern:</i>
          <i>Prefix<sub>opt</sub></i> <i>Number</i> <i>Suffix<sub>opt</sub></i>
  <i>NegativePattern:</i>
          <i>Prefix<sub>opt</sub></i> <i>Number</i> <i>Suffix<sub>opt</sub></i>
  <i>Prefix:</i>
          any Unicode characters except \uFFFE, \uFFFF, and special characters
  <i>Suffix:</i>
          any Unicode characters except \uFFFE, \uFFFF, and special characters
  <i>Number:</i>
          <i>Integer</i> <i>Exponent<sub>opt</sub></i>
          <i>Integer</i> . <i>Fraction</i> <i>Exponent<sub>opt</sub></i>
  <i>Integer:</i>
          <i>MinimumInteger</i>
          #
          # <i>Integer</i>
          # , <i>Integer</i>
  <i>MinimumInteger:</i>
          0
          0 <i>MinimumInteger</i>
          0 , <i>MinimumInteger</i>
  <i>Fraction:</i>
          <i>MinimumFraction<sub>opt</sub></i> <i>OptionalFraction<sub>opt</sub></i>
  <i>MinimumFraction:</i>
          0 <i>MinimumFraction<sub>opt</sub></i>
  <i>OptionalFraction:</i>
          # <i>OptionalFraction<sub>opt</sub></i>
  <i>Exponent:</i>
          E <i>MinimumExponent</i>
  <i>MinimumExponent:</i>
          0 <i>MinimumExponent<sub>opt</sub></i>
  </pre></blockquote>
  <p>A <code>DecimalFormat</code> pattern contains a positive and negative
  subpattern, for example, <code>"#,##0.00;(#,##0.00)"</code>.  Each
  subpattern has a prefix, numeric part, and suffix. The negative subpattern
  is optional; if absent, then the positive subpattern prefixed with the
  localized minus sign (<code>'-'</code> in most locales) is used as the
  negative subpattern. That is, <code>"0.00"</code> alone is equivalent to
  <code>"0.00;-0.00"</code>.  If there is an explicit negative subpattern, it
  serves only to specify the negative prefix and suffix; the number of digits,
  minimal digits, and other characteristics are all the same as the positive
  pattern. That means that <code>"#,##0.0#;(#)"</code> produces precisely
  the same behavior as <code>"#,##0.0#;(#,##0.0#)"</code>.
  </p><p>The prefixes, suffixes, and various symbols used for infinity, digits,
  thousands separators, decimal separators, etc. may be set to arbitrary
  values, and they will appear properly during formatting.  However, care must
  be taken that the symbols and strings do not conflict, or parsing will be
  unreliable.  For example, either the positive and negative prefixes or the
  suffixes must be distinct for <code>DecimalFormat.parse()</code> to be able
  to distinguish positive from negative values.  (If they are identical, then
  <code>DecimalFormat</code> will behave as if no negative subpattern was
  specified.)  Another example is that the decimal separator and thousands
  separator should be distinct characters, or parsing will be impossible.
  </p><p>The grouping separator is commonly used for thousands, but in some
  countries it separates ten-thousands. The grouping size is a constant number
  of digits between the grouping characters, such as 3 for 100,000,000 or 4 for
  1,0000,0000.  If you supply a pattern with multiple grouping characters, the
  interval between the last one and the end of the integer is the one that is
  used. So <code>"#,##,###,####"</code> == <code>"######,####"</code> ==
  <code>"##,####,####"</code>.
  </p><h4>Special Pattern Characters</h4>
  <p>Many characters in a pattern are taken literally; they are matched during
  parsing and output unchanged during formatting.  Special characters, on the
  other hand, stand for other characters, strings, or classes of characters.
  They must be quoted, unless noted otherwise, if they are to appear in the
  prefix or suffix as literals.
  </p><p>The characters listed here are used in non-localized patterns.  Localized
  patterns use the corresponding characters taken from this formatter's
  <code>DecimalFormatSymbols</code> object instead, and these characters lose
  their special status.  Two exceptions are the currency sign and quote, which
  are not localized.
  </p><blockquote>
  <table border="0" cellspacing="3" cellpadding="0" summary="Chart showing symbol,
   location, localized, and meaning.">
      <tbody><tr style="background-color: rgb(204, 204, 255);">
           <th align="left">Symbol
           </th><th align="left">Location
           </th><th align="left">Localized?
           </th><th align="left">Meaning
      </th></tr><tr valign="top">
           <td><code>0</code>
           </td><td>Number
           </td><td>Yes
           </td><td>Digit
      </td></tr><tr style="vertical-align: top; background-color: rgb(238, 238, 255);">
           <td><code>#</code>
           </td><td>Number
           </td><td>Yes
           </td><td>Digit, zero shows as absent
      </td></tr><tr valign="top">
           <td><code>.</code>
           </td><td>Number
           </td><td>Yes
           </td><td>Decimal separator or monetary decimal separator
      </td></tr><tr style="vertical-align: top; background-color: rgb(238, 238, 255);">
           <td><code>-</code>
           </td><td>Number
           </td><td>Yes
           </td><td>Minus sign
      </td></tr><tr valign="top">
           <td><code>,</code>
           </td><td>Number
           </td><td>Yes
           </td><td>Grouping separator
      </td></tr><tr style="vertical-align: top; background-color: rgb(238, 238, 255);">
           <td><code>E</code>
           </td><td>Number
           </td><td>Yes
           </td><td>Separates mantissa and exponent in scientific notation.
               <em>Need not be quoted in prefix or suffix.</em>
      </td></tr><tr valign="top">
           <td><code>;</code>
           </td><td>Subpattern boundary
           </td><td>Yes
           </td><td>Separates positive and negative subpatterns
      </td></tr><tr style="vertical-align: top; background-color: rgb(238, 238, 255);">
           <td><code>%</code>
           </td><td>Prefix or suffix
           </td><td>Yes
           </td><td>Multiply by 100 and show as percentage
      </td></tr><tr valign="top">
           <td><code>\u2030</code>
           </td><td>Prefix or suffix
           </td><td>Yes
           </td><td>Multiply by 1000 and show as per mille value
      </td></tr><tr style="vertical-align: top; background-color: rgb(238, 238, 255);">
           <td><code>¤</code> (<code>\u00A4</code>)
           </td><td>Prefix or suffix
           </td><td>No
           </td><td>Currency sign, replaced by currency symbol.  If
               doubled, replaced by international currency symbol.
               If present in a pattern, the monetary decimal separator
               is used instead of the decimal separator.
      </td></tr><tr valign="top">
           <td><code>'</code>
           </td><td>Prefix or suffix
           </td><td>No
           </td><td>Used to quote special characters in a prefix or suffix,
               for example, <code>"'#'#"</code> formats 123 to
               <code>"#123"</code>.  To create a single quote
               itself, use two in a row: <code>"# o''clock"</code>.
  </td></tr></tbody></table>
  </blockquote>
  <h4>Scientific Notation</h4>
  <p>Numbers in scientific notation are expressed as the product of a mantissa
  and a power of ten, for example, 1234 can be expressed as 1.234 x 10^3.  The
  mantissa is often in the range 1.0 ≤ x {@literal &lt;} 10.0, but it need not
  be.
  <code>DecimalFormat</code> can be instructed to format and parse scientific
  notation <em>only via a pattern</em>; there is currently no factory method
  that creates a scientific notation format.  In a pattern, the exponent
  character immediately followed by one or more digit characters indicates
  scientific notation.  Example: <code>"0.###E0"</code> formats the number
  1234 as <code>"1.234E3"</code>.
  </p><ul><li>The number of digit characters after the exponent character gives the
  minimum exponent digit count.  There is no maximum.  Negative exponents are
  formatted using the localized minus sign, <em>not</em> the prefix and suffix
  from the pattern.  This allows patterns such as <code>"0.###E0 m/s"</code>.
  </li><li>The minimum and maximum number of integer digits are interpreted
  together:
  <ul><li>If the maximum number of integer digits is greater than their minimum number
  and greater than 1, it forces the exponent to be a multiple of the maximum
  number of integer digits, and the minimum number of integer digits to be
  interpreted as 1.  The most common use of this is to generate
  <em>engineering notation</em>, in which the exponent is a multiple of three,
  e.g., <code>"##0.#####E0"</code>. Using this pattern, the number 12345
  formats to <code>"12.345E3"</code>, and 123456 formats to
  <code>"123.456E3"</code>.
  </li><li>Otherwise, the minimum number of integer digits is achieved by adjusting the
  exponent.  Example: 0.00123 formatted with <code>"00.###E0"</code> yields
  <code>"12.3E-4"</code>.
  </li></ul>
  </li><li>The number of significant digits in the mantissa is the sum of the
  <em>minimum integer</em> and <em>maximum fraction</em> digits, and is
  unaffected by the maximum integer digits.  For example, 12345 formatted with
  <code>"##0.##E0"</code> is <code>"12.3E3"</code>. To show all digits, set
  the significant digits count to zero.  The number of significant digits
  does not affect parsing.
  </li><li>Exponential patterns may not contain grouping separators.
  </li></ul>
  <h4>Rounding</h4>
  <code>DecimalFormat</code> provides rounding modes defined in
  {@link java.math.RoundingMode} for formatting.  By default, it uses
  {@link java.math.RoundingMode#HALF_EVEN RoundingMode.HALF_EVEN}.
  <h4>Digits</h4>
  For formatting, <code>DecimalFormat</code> uses the ten consecutive
  characters starting with the localized zero digit defined in the
  <code>DecimalFormatSymbols</code> object as digits. For parsing, these
  digits as well as all Unicode decimal digits, as defined by
  {@link Character#digit Character.digit}, are recognized.
  <h4>Special Values</h4>
  <p><code>NaN</code> is formatted as a string, which typically has a single character
  <code>\uFFFD</code>.  This string is determined by the
  <code>DecimalFormatSymbols</code> object.  This is the only value for which
  the prefixes and suffixes are not used.
  </p><p>Infinity is formatted as a string, which typically has a single character
  <code>\u221E</code>, with the positive or negative prefixes and suffixes
  applied.  The infinity string is determined by the
  <code>DecimalFormatSymbols</code> object.
  </p><p>Negative zero (<code>"-0"</code>) parses to
  </p><ul><li><code>BigDecimal(0)</code> if <code>isParseBigDecimal()</code> is
  true,
  </li><li><code>Long(0)</code> if <code>isParseBigDecimal()</code> is false
      and <code>isParseIntegerOnly()</code> is true,
  </li><li><code>Double(-0.0)</code> if both <code>isParseBigDecimal()</code>
  and <code>isParseIntegerOnly()</code> are false.
  </li></ul>
  <h4><a name="synchronization">Synchronization</a></h4>
  <p>
  Decimal formats are generally not synchronized.
  It is recommended to create separate format instances for each thread.
  If multiple threads access a format concurrently, it must be synchronized
  externally.
  </p><h4>Example</h4>
  <blockquote><pre>{@code
  <strong>// Print out a number using the localized number, integer, currency,
  // and percent format for each locale</strong>
  Locale[] locales = NumberFormat.getAvailableLocales();
  double myNumber = -1234.56;
  NumberFormat form;
  for (int j = 0; j &lt; 4; ++j) {
      System.out.println("FORMAT");
      for (int i = 0; i &lt; locales.length; ++i) {
          if (locales[i].getCountry().length() == 0) {
             continue; // Skip language-only locales
          }
          System.out.print(locales[i].getDisplayName());
          switch (j) {
          case 0:
              form = NumberFormat.getInstance(locales[i]); break;
          case 1:
              form = NumberFormat.getIntegerInstance(locales[i]); break;
          case 2:
              form = NumberFormat.getCurrencyInstance(locales[i]); break;
          default:
              form = NumberFormat.getPercentInstance(locales[i]); break;
          }
          if (form instanceof DecimalFormat) {
              System.out.print(": " + ((DecimalFormat) form).toPattern());
          }
          System.out.print(" -&gt; " + form.format(myNumber));
          try {
              System.out.println(" -&gt; " + form.parse(form.format(myNumber)));
          } catch (ParseException e) {}
      }
  }
  }</pre></blockquote>
  @see          <a href="https://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html">Java Tutorial</a>
  @see          NumberFormat
  @see          DecimalFormatSymbols
  @see          ParsePosition
  @author       Mark Davis
  @author       Alan Liu</div>
<a id="L381" name="L381"></a> 381 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2060.html" title="Multiple referred from 32 places.">DecimalFormat</a> <strong class="reserved">extends</strong> <a href="../S/2488.html#L182" title="Defined at 182 in src/java/text/NumberFormat.java.">NumberFormat</a> <em class="brace">{</em>
<a id="L382" name="L382"></a> 382 
<div class="comment">
      Creates a DecimalFormat using the default pattern and symbols
      for the default {@link java.util.Locale.Category#FORMAT FORMAT} locale.
      This is a convenient way to obtain a
      DecimalFormat when internationalization is not the main concern.
      <p>
      To obtain standard formats for a given locale, use the factory methods
      on NumberFormat such as getNumberInstance. These factories will
      return the most appropriate sub-class of NumberFormat for a given
      locale.
      @see java.text.NumberFormat#getInstance
      @see java.text.NumberFormat#getNumberInstance
      @see java.text.NumberFormat#getCurrencyInstance
      @see java.text.NumberFormat#getPercentInstance</p></div>
<a id="L399" name="L399"></a> 399     <strong class="reserved">public</strong> DecimalFormat() <em class="brace">{</em>
<a id="L400" name="L400"></a> 400         <em class="comment">// Get the pattern for the default locale.</em>
<a id="L401" name="L401"></a> 401         <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> def = <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/1318.html" title="Multiple defined in 2 places.">Category</a>.<a href="../S/1034.html#L2313" title="Defined at 2313 in src/java/util/Locale.java.">FORMAT</a>);
<a id="L402" name="L402"></a> 402         LocaleProviderAdapter adapter = LocaleProviderAdapter.<a href="../D/16817.html" title="Multiple defined in 4 places.">getAdapter</a>(<a href="../S/2479.html#L39" title="Defined at 39 in src/java/text/spi/NumberFormatProvider.java.">NumberFormatProvider</a>.<strong class="reserved">class</strong>, def);
<a id="L403" name="L403"></a> 403         <strong class="reserved">if</strong> (!(adapter <strong class="reserved">instanceof</strong> ResourceBundleBasedAdapter)) <em class="brace">{</em>
<a id="L404" name="L404"></a> 404             adapter = LocaleProviderAdapter.getResourceBundleBased();
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] all = adapter.getLocaleResources(def).getNumberPatterns();
<a id="L407" name="L407"></a> 407 
<a id="L408" name="L408"></a> 408         <em class="comment">// Always applyPattern after the symbols are set</em>
<a id="L409" name="L409"></a> 409         <strong class="reserved">this</strong>.symbols = <a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>(def);
<a id="L410" name="L410"></a> 410         <a href="../D/11458.html" title="Multiple defined in 5 places.">applyPattern</a>(all[0], <strong class="reserved">false</strong>);
<a id="L411" name="L411"></a> 411     <em class="brace">}</em>
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413 
<div class="comment">
      Creates a DecimalFormat using the given pattern and the symbols
      for the default {@link java.util.Locale.Category#FORMAT FORMAT} locale.
      This is a convenient way to obtain a
      DecimalFormat when internationalization is not the main concern.
      <p>
      To obtain standard formats for a given locale, use the factory methods
      on NumberFormat such as getNumberInstance. These factories will
      return the most appropriate sub-class of NumberFormat for a given
      locale.
      @param pattern a non-localized pattern string.
      @exception NullPointerException if <code>pattern</code> is null
      @exception IllegalArgumentException if the given pattern is invalid.
      @see java.text.NumberFormat#getInstance
      @see java.text.NumberFormat#getNumberInstance
      @see java.text.NumberFormat#getCurrencyInstance
      @see java.text.NumberFormat#getPercentInstance</p></div>
<a id="L433" name="L433"></a> 433     <strong class="reserved">public</strong> DecimalFormat(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434         <em class="comment">// Always applyPattern after the symbols are set</em>
<a id="L435" name="L435"></a> 435         <strong class="reserved">this</strong>.symbols = <a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/1318.html" title="Multiple defined in 2 places.">Category</a>.<a href="../S/1034.html#L2313" title="Defined at 2313 in src/java/util/Locale.java.">FORMAT</a>));
<a id="L436" name="L436"></a> 436         <a href="../D/11458.html" title="Multiple defined in 5 places.">applyPattern</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <strong class="reserved">false</strong>);
<a id="L437" name="L437"></a> 437     <em class="brace">}</em>
<a id="L438" name="L438"></a> 438 
<a id="L439" name="L439"></a> 439 
<div class="comment">
      Creates a DecimalFormat using the given pattern and symbols.
      Use this constructor when you need to completely customize the
      behavior of the format.
      <p>
      To obtain standard formats for a given
      locale, use the factory methods on NumberFormat such as
      getInstance or getCurrencyInstance. If you need only minor adjustments
      to a standard format, you can modify the format returned by
      a NumberFormat factory method.
      @param pattern a non-localized pattern string
      @param symbols the set of symbols to be used
      @exception NullPointerException if any of the given arguments is null
      @exception IllegalArgumentException if the given pattern is invalid
      @see java.text.NumberFormat#getInstance
      @see java.text.NumberFormat#getNumberInstance
      @see java.text.NumberFormat#getCurrencyInstance
      @see java.text.NumberFormat#getPercentInstance
      @see java.text.DecimalFormatSymbols</p></div>
<a id="L461" name="L461"></a> 461     <strong class="reserved">public</strong> DecimalFormat (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a> symbols) <em class="brace">{</em>
<a id="L462" name="L462"></a> 462         <em class="comment">// Always applyPattern after the symbols are set</em>
<a id="L463" name="L463"></a> 463         <strong class="reserved">this</strong>.symbols = (<a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a>)symbols.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L464" name="L464"></a> 464         <a href="../D/11458.html" title="Multiple defined in 5 places.">applyPattern</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <strong class="reserved">false</strong>);
<a id="L465" name="L465"></a> 465     <em class="brace">}</em>
<a id="L466" name="L466"></a> 466 
<a id="L467" name="L467"></a> 467 
<a id="L468" name="L468"></a> 468     <em class="comment">// Overrides</em>
<div class="comment">
      Formats a number and appends the resulting text to the given string
      buffer.
      The number can be of any subclass of {@link java.lang.Number}.
      <p>
      This implementation uses the maximum precision permitted.
      @param number     the number to format
      @param toAppendTo the <code>StringBuffer</code> to which the formatted
                        text is to be appended
      @param pos        On input: an alignment field, if desired.
                        On output: the offsets of the alignment field.
      @return           the value passed in as <code>toAppendTo</code>
      @exception        IllegalArgumentException if <code>number</code> is
                        null or not an instance of <code>Number</code>.
      @exception        NullPointerException if <code>toAppendTo</code> or
                        <code>pos</code> is null
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @see              java.text.FieldPosition</p></div>
<a id="L489" name="L489"></a> 489     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L490" name="L490"></a> 490     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>,
<a id="L491" name="L491"></a> 491                                      <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> toAppendTo,
<a id="L492" name="L492"></a> 492                                      <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> pos) <em class="brace">{</em>
<a id="L493" name="L493"></a> 493         <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> || <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> ||
<a id="L494" name="L494"></a> 494                    <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a> || <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../D/1038.html" title="Multiple defined in 2 places.">Byte</a> ||
<a id="L495" name="L495"></a> 495                    <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1089.html#L54" title="Defined at 54 in src/java/util/concurrent/atomic/AtomicInteger.java.">AtomicInteger</a> ||
<a id="L496" name="L496"></a> 496                    <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1088.html#L54" title="Defined at 54 in src/java/util/concurrent/atomic/AtomicLong.java.">AtomicLong</a> ||
<a id="L497" name="L497"></a> 497                    (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> &amp;&amp;
<a id="L498" name="L498"></a> 498                     ((<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>)<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>).<a href="../D/11871.html" title="Multiple defined in 3 places.">bitLength</a> () &lt; 64)) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499             <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(((<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>)<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>).<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>(), toAppendTo, pos);
<a id="L500" name="L500"></a> 500         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501             <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>((<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>)<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, toAppendTo, pos);
<a id="L502" name="L502"></a> 502         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>) <em class="brace">{</em>
<a id="L503" name="L503"></a> 503             <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>((<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>)<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, toAppendTo, pos);
<a id="L504" name="L504"></a> 504         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> <strong class="reserved">instanceof</strong> <a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>) <em class="brace">{</em>
<a id="L505" name="L505"></a> 505             <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(((<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>)<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>).<a href="../D/15134.html" title="Multiple defined in 16 places.">doubleValue</a>(), toAppendTo, pos);
<a id="L506" name="L506"></a> 506         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L507" name="L507"></a> 507             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Cannot format given Object as a Number");
<a id="L508" name="L508"></a> 508         <em class="brace">}</em>
<a id="L509" name="L509"></a> 509     <em class="brace">}</em>
<a id="L510" name="L510"></a> 510 
<div class="comment">
      Formats a double to produce a string.
      @param number    The double to format
      @param result    where the text is to be appended
      @param fieldPosition    On input: an alignment field, if desired.
      On output: the offsets of the alignment field.
      @exception ArithmeticException if rounding is needed with rounding
                 mode being set to RoundingMode.UNNECESSARY
      @return The formatted number string
      @see java.text.FieldPosition</div>
<a id="L522" name="L522"></a> 522     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L523" name="L523"></a> 523     <strong class="reserved">public</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<strong class="reserved">double</strong> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L524" name="L524"></a> 524                                <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fieldPosition) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525         <em class="comment">// If fieldPosition is a DontCareFieldPosition instance we can</em>
<a id="L526" name="L526"></a> 526         <em class="comment">// try to go to fast-path code.</em>
<a id="L527" name="L527"></a> 527         <strong class="reserved">boolean</strong> tryFastPath = <strong class="reserved">false</strong>;
<a id="L528" name="L528"></a> 528         <strong class="reserved">if</strong> (fieldPosition == <a href="../S/2474.html#L33" title="Defined at 33 in src/java/text/DontCareFieldPosition.java.">DontCareFieldPosition</a>.INSTANCE)
<a id="L529" name="L529"></a> 529             tryFastPath = <strong class="reserved">true</strong>;
<a id="L530" name="L530"></a> 530         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L531" name="L531"></a> 531             fieldPosition.<a href="../S/2490.html#L193" title="Defined at 193 in src/java/text/FieldPosition.java.">setBeginIndex</a>(0);
<a id="L532" name="L532"></a> 532             fieldPosition.<a href="../S/2490.html#L203" title="Defined at 203 in src/java/text/FieldPosition.java.">setEndIndex</a>(0);
<a id="L533" name="L533"></a> 533         <em class="brace">}</em>
<a id="L534" name="L534"></a> 534 
<a id="L535" name="L535"></a> 535         <strong class="reserved">if</strong> (tryFastPath) <em class="brace">{</em>
<a id="L536" name="L536"></a> 536             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> tempResult = <a href="../D/15976.html" title="Multiple defined in 2 places.">fastFormat</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>);
<a id="L537" name="L537"></a> 537             <strong class="reserved">if</strong> (tempResult != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L538" name="L538"></a> 538                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(tempResult);
<a id="L539" name="L539"></a> 539                 <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L540" name="L540"></a> 540             <em class="brace">}</em>
<a id="L541" name="L541"></a> 541         <em class="brace">}</em>
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543         <em class="comment">// if fast-path could not work, we fallback to standard code.</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, fieldPosition.<a href="../D/19025.html" title="Multiple defined in 2 places.">getFieldDelegate</a>());
<a id="L545" name="L545"></a> 545     <em class="brace">}</em>
<a id="L546" name="L546"></a> 546 
<div class="comment">
      Formats a double to produce a string.
      @param number    The double to format
      @param result    where the text is to be appended
      @param delegate notified of locations of sub fields
      @exception       ArithmeticException if rounding is needed with rounding
                       mode being set to RoundingMode.UNNECESSARY
      @return The formatted number string</div>
<a id="L556" name="L556"></a> 556     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<strong class="reserved">double</strong> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L557" name="L557"></a> 557                                 <a href="../S/2459.html#L376" title="Defined at 376 in src/java/text/Format.java.">FieldDelegate</a> delegate) <em class="brace">{</em>
<a id="L558" name="L558"></a> 558         <strong class="reserved">if</strong> (<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25912.html" title="Multiple defined in 4 places.">isNaN</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>) ||
<a id="L559" name="L559"></a> 559            (<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25716.html" title="Multiple defined in 4 places.">isInfinite</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>) &amp;&amp; multiplier == 0)) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560             <strong class="reserved">int</strong> iFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L561" name="L561"></a> 561             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(symbols.<a href="../S/2462.html#L342" title="Defined at 342 in src/java/text/DecimalFormatSymbols.java.">getNaN</a>());
<a id="L562" name="L562"></a> 562             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(INTEGER_FIELD, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>,
<a id="L563" name="L563"></a> 563                                iFieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L564" name="L564"></a> 564             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L565" name="L565"></a> 565         <em class="brace">}</em>
<a id="L566" name="L566"></a> 566 
<div class="comment">
 Detecting whether a double is negative is easy with the exception of
          the value -0.0.  This is a double which has a zero mantissa (and
          exponent), but a negative sign bit.  It is semantically distinct from
          a zero with a positive sign bit, and this distinction is important
          to certain kinds of computations.  However, it's a little tricky to
          detect, since (-0.0 == 0.0) and !(-0.0 &lt; 0.0).  How then, you may
          ask, does it behave distinctly from +0.0?  Well, 1/(-0.0) ==
          -Infinity.  Proper detection of -0.0 is needed to deal with the
          issues raised by bugs 4106658, 4106667, and 4147706.  Liu 7/6/98.</div>
<a id="L577" name="L577"></a> 577         <strong class="reserved">boolean</strong> <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a> = ((<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &lt; 0.0) || (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> == 0.0 &amp;&amp; 1/<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &lt; 0.0)) ^ (multiplier &lt; 0);
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579         <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L580" name="L580"></a> 580             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> *= multiplier;
<a id="L581" name="L581"></a> 581         <em class="brace">}</em>
<a id="L582" name="L582"></a> 582 
<a id="L583" name="L583"></a> 583         <strong class="reserved">if</strong> (<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25716.html" title="Multiple defined in 4 places.">isInfinite</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>)) <em class="brace">{</em>
<a id="L584" name="L584"></a> 584             <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L585" name="L585"></a> 585                 <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, negativePrefix, delegate,
<a id="L586" name="L586"></a> 586                        <a href="../S/2458.html#L2455" title="Defined at 2455 in src/java/text/DecimalFormat.java.">getNegativePrefixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L587" name="L587"></a> 587             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L588" name="L588"></a> 588                 <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, positivePrefix, delegate,
<a id="L589" name="L589"></a> 589                        <a href="../S/2458.html#L2414" title="Defined at 2414 in src/java/text/DecimalFormat.java.">getPositivePrefixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L590" name="L590"></a> 590             <em class="brace">}</em>
<a id="L591" name="L591"></a> 591 
<a id="L592" name="L592"></a> 592             <strong class="reserved">int</strong> iFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L593" name="L593"></a> 593             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(symbols.<a href="../S/2462.html#L322" title="Defined at 322 in src/java/text/DecimalFormatSymbols.java.">getInfinity</a>());
<a id="L594" name="L594"></a> 594             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(INTEGER_FIELD, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>,
<a id="L595" name="L595"></a> 595                                iFieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L596" name="L596"></a> 596 
<a id="L597" name="L597"></a> 597             <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L598" name="L598"></a> 598                 <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, negativeSuffix, delegate,
<a id="L599" name="L599"></a> 599                        <a href="../S/2458.html#L2537" title="Defined at 2537 in src/java/text/DecimalFormat.java.">getNegativeSuffixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L600" name="L600"></a> 600             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L601" name="L601"></a> 601                 <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, positiveSuffix, delegate,
<a id="L602" name="L602"></a> 602                        <a href="../S/2458.html#L2496" title="Defined at 2496 in src/java/text/DecimalFormat.java.">getPositiveSuffixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L603" name="L603"></a> 603             <em class="brace">}</em>
<a id="L604" name="L604"></a> 604 
<a id="L605" name="L605"></a> 605             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L606" name="L606"></a> 606         <em class="brace">}</em>
<a id="L607" name="L607"></a> 607 
<a id="L608" name="L608"></a> 608         <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L609" name="L609"></a> 609             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = -<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>;
<a id="L610" name="L610"></a> 610         <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<a id="L612" name="L612"></a> 612         <em class="comment">// at this point we are guaranteed a nonnegative finite number.</em>
<a id="L613" name="L613"></a> 613         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &gt;= 0 &amp;&amp; !<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25716.html" title="Multiple defined in 4 places.">isInfinite</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>));
<a id="L614" name="L614"></a> 614 
<a id="L615" name="L615"></a> 615         <strong class="reserved">synchronized</strong>(digitList) <em class="brace">{</em>
<a id="L616" name="L616"></a> 616             <strong class="reserved">int</strong> maxIntDigits = <strong class="reserved">super</strong>.<a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>();
<a id="L617" name="L617"></a> 617             <strong class="reserved">int</strong> minIntDigits = <strong class="reserved">super</strong>.<a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>();
<a id="L618" name="L618"></a> 618             <strong class="reserved">int</strong> maxFraDigits = <strong class="reserved">super</strong>.<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>();
<a id="L619" name="L619"></a> 619             <strong class="reserved">int</strong> minFraDigits = <strong class="reserved">super</strong>.<a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>();
<a id="L620" name="L620"></a> 620 
<a id="L621" name="L621"></a> 621             digitList.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, useExponentialNotation ?
<a id="L622" name="L622"></a> 622                           maxIntDigits + maxFraDigits : maxFraDigits,
<a id="L623" name="L623"></a> 623                           !useExponentialNotation);
<a id="L624" name="L624"></a> 624             <strong class="reserved">return</strong> <a href="../D/35000.html" title="Multiple defined in 2 places.">subformat</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, delegate, <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <strong class="reserved">false</strong>,
<a id="L625" name="L625"></a> 625                        maxIntDigits, minIntDigits, maxFraDigits, minFraDigits);
<a id="L626" name="L626"></a> 626         <em class="brace">}</em>
<a id="L627" name="L627"></a> 627     <em class="brace">}</em>
<a id="L628" name="L628"></a> 628 
<div class="comment">
      Format a long to produce a string.
      @param number    The long to format
      @param result    where the text is to be appended
      @param fieldPosition    On input: an alignment field, if desired.
      On output: the offsets of the alignment field.
      @exception       ArithmeticException if rounding is needed with rounding
                       mode being set to RoundingMode.UNNECESSARY
      @return The formatted number string
      @see java.text.FieldPosition</div>
<a id="L640" name="L640"></a> 640     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L641" name="L641"></a> 641     <strong class="reserved">public</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<strong class="reserved">long</strong> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L642" name="L642"></a> 642                                <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fieldPosition) <em class="brace">{</em>
<a id="L643" name="L643"></a> 643         fieldPosition.<a href="../S/2490.html#L193" title="Defined at 193 in src/java/text/FieldPosition.java.">setBeginIndex</a>(0);
<a id="L644" name="L644"></a> 644         fieldPosition.<a href="../S/2490.html#L203" title="Defined at 203 in src/java/text/FieldPosition.java.">setEndIndex</a>(0);
<a id="L645" name="L645"></a> 645 
<a id="L646" name="L646"></a> 646         <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, fieldPosition.<a href="../D/19025.html" title="Multiple defined in 2 places.">getFieldDelegate</a>());
<a id="L647" name="L647"></a> 647     <em class="brace">}</em>
<a id="L648" name="L648"></a> 648 
<div class="comment">
      Format a long to produce a string.
      @param number    The long to format
      @param result    where the text is to be appended
      @param delegate notified of locations of sub fields
      @return The formatted number string
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @see java.text.FieldPosition</div>
<a id="L659" name="L659"></a> 659     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<strong class="reserved">long</strong> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L660" name="L660"></a> 660                                <a href="../S/2459.html#L376" title="Defined at 376 in src/java/text/Format.java.">FieldDelegate</a> delegate) <em class="brace">{</em>
<a id="L661" name="L661"></a> 661         <strong class="reserved">boolean</strong> <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a> = (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &lt; 0);
<a id="L662" name="L662"></a> 662         <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L663" name="L663"></a> 663             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = -<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>;
<a id="L664" name="L664"></a> 664         <em class="brace">}</em>
<a id="L665" name="L665"></a> 665 
<a id="L666" name="L666"></a> 666         <em class="comment">// In general, long values always represent real finite numbers, so</em>
<a id="L667" name="L667"></a> 667         <em class="comment">// we don't have to check for +/- Infinity or NaN.  However, there</em>
<a id="L668" name="L668"></a> 668         <em class="comment">// is one case we have to be careful of:  The multiplier can push</em>
<a id="L669" name="L669"></a> 669         <em class="comment">// a number near MIN_VALUE or MAX_VALUE outside the legal range.  We</em>
<a id="L670" name="L670"></a> 670         <em class="comment">// check for this before multiplying, and if it happens we use</em>
<a id="L671" name="L671"></a> 671         <em class="comment">// BigInteger instead.</em>
<a id="L672" name="L672"></a> 672         <strong class="reserved">boolean</strong> useBigInteger = <strong class="reserved">false</strong>;
<a id="L673" name="L673"></a> 673         <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &lt; 0) <em class="brace">{</em> <em class="comment">// This can only happen if number == Long.MIN_VALUE.</em>
<a id="L674" name="L674"></a> 674             <strong class="reserved">if</strong> (multiplier != 0) <em class="brace">{</em>
<a id="L675" name="L675"></a> 675                 useBigInteger = <strong class="reserved">true</strong>;
<a id="L676" name="L676"></a> 676             <em class="brace">}</em>
<a id="L677" name="L677"></a> 677         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (multiplier != 1 &amp;&amp; multiplier != 0) <em class="brace">{</em>
<a id="L678" name="L678"></a> 678             <strong class="reserved">long</strong> cutoff = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE / multiplier;
<a id="L679" name="L679"></a> 679             <strong class="reserved">if</strong> (cutoff &lt; 0) <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                 cutoff = -cutoff;
<a id="L681" name="L681"></a> 681             <em class="brace">}</em>
<a id="L682" name="L682"></a> 682             useBigInteger = (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &gt; cutoff);
<a id="L683" name="L683"></a> 683         <em class="brace">}</em>
<a id="L684" name="L684"></a> 684 
<a id="L685" name="L685"></a> 685         <strong class="reserved">if</strong> (useBigInteger) <em class="brace">{</em>
<a id="L686" name="L686"></a> 686             <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L687" name="L687"></a> 687                 <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = -<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>;
<a id="L688" name="L688"></a> 688             <em class="brace">}</em>
<a id="L689" name="L689"></a> 689             <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bigIntegerValue = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>);
<a id="L690" name="L690"></a> 690             <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(bigIntegerValue, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, delegate, <strong class="reserved">true</strong>);
<a id="L691" name="L691"></a> 691         <em class="brace">}</em>
<a id="L692" name="L692"></a> 692 
<a id="L693" name="L693"></a> 693         <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> *= multiplier;
<a id="L694" name="L694"></a> 694         <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> == 0) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695             <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a> = <strong class="reserved">false</strong>;
<a id="L696" name="L696"></a> 696         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L697" name="L697"></a> 697             <strong class="reserved">if</strong> (multiplier &lt; 0) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698                 <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = -<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>;
<a id="L699" name="L699"></a> 699                 <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a> = !<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>;
<a id="L700" name="L700"></a> 700             <em class="brace">}</em>
<a id="L701" name="L701"></a> 701         <em class="brace">}</em>
<a id="L702" name="L702"></a> 702 
<a id="L703" name="L703"></a> 703         <strong class="reserved">synchronized</strong>(digitList) <em class="brace">{</em>
<a id="L704" name="L704"></a> 704             <strong class="reserved">int</strong> maxIntDigits = <strong class="reserved">super</strong>.<a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>();
<a id="L705" name="L705"></a> 705             <strong class="reserved">int</strong> minIntDigits = <strong class="reserved">super</strong>.<a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>();
<a id="L706" name="L706"></a> 706             <strong class="reserved">int</strong> maxFraDigits = <strong class="reserved">super</strong>.<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>();
<a id="L707" name="L707"></a> 707             <strong class="reserved">int</strong> minFraDigits = <strong class="reserved">super</strong>.<a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>();
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709             digitList.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>,
<a id="L710" name="L710"></a> 710                      useExponentialNotation ? maxIntDigits + maxFraDigits : 0);
<a id="L711" name="L711"></a> 711 
<a id="L712" name="L712"></a> 712             <strong class="reserved">return</strong> <a href="../D/35000.html" title="Multiple defined in 2 places.">subformat</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, delegate, <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <strong class="reserved">true</strong>,
<a id="L713" name="L713"></a> 713                        maxIntDigits, minIntDigits, maxFraDigits, minFraDigits);
<a id="L714" name="L714"></a> 714         <em class="brace">}</em>
<a id="L715" name="L715"></a> 715     <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<div class="comment">
      Formats a BigDecimal to produce a string.
      @param number    The BigDecimal to format
      @param result    where the text is to be appended
      @param fieldPosition    On input: an alignment field, if desired.
      On output: the offsets of the alignment field.
      @return The formatted number string
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @see java.text.FieldPosition</div>
<a id="L728" name="L728"></a> 728     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L729" name="L729"></a> 729                                 <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fieldPosition) <em class="brace">{</em>
<a id="L730" name="L730"></a> 730         fieldPosition.<a href="../S/2490.html#L193" title="Defined at 193 in src/java/text/FieldPosition.java.">setBeginIndex</a>(0);
<a id="L731" name="L731"></a> 731         fieldPosition.<a href="../S/2490.html#L203" title="Defined at 203 in src/java/text/FieldPosition.java.">setEndIndex</a>(0);
<a id="L732" name="L732"></a> 732         <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, fieldPosition.<a href="../D/19025.html" title="Multiple defined in 2 places.">getFieldDelegate</a>());
<a id="L733" name="L733"></a> 733     <em class="brace">}</em>
<a id="L734" name="L734"></a> 734 
<div class="comment">
      Formats a BigDecimal to produce a string.
      @param number    The BigDecimal to format
      @param result    where the text is to be appended
      @param delegate notified of locations of sub fields
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @return The formatted number string</div>
<a id="L744" name="L744"></a> 744     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L745" name="L745"></a> 745                                 <a href="../S/2459.html#L376" title="Defined at 376 in src/java/text/Format.java.">FieldDelegate</a> delegate) <em class="brace">{</em>
<a id="L746" name="L746"></a> 746         <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L747" name="L747"></a> 747             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../S/2458.html#L2115" title="Defined at 2115 in src/java/text/DecimalFormat.java.">getBigDecimalMultiplier</a>());
<a id="L748" name="L748"></a> 748         <em class="brace">}</em>
<a id="L749" name="L749"></a> 749         <strong class="reserved">boolean</strong> <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == -1;
<a id="L750" name="L750"></a> 750         <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>();
<a id="L752" name="L752"></a> 752         <em class="brace">}</em>
<a id="L753" name="L753"></a> 753 
<a id="L754" name="L754"></a> 754         <strong class="reserved">synchronized</strong>(digitList) <em class="brace">{</em>
<a id="L755" name="L755"></a> 755             <strong class="reserved">int</strong> maxIntDigits = <a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>();
<a id="L756" name="L756"></a> 756             <strong class="reserved">int</strong> minIntDigits = <a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>();
<a id="L757" name="L757"></a> 757             <strong class="reserved">int</strong> maxFraDigits = <a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>();
<a id="L758" name="L758"></a> 758             <strong class="reserved">int</strong> minFraDigits = <a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>();
<a id="L759" name="L759"></a> 759             <strong class="reserved">int</strong> maximumDigits = maxIntDigits + maxFraDigits;
<a id="L760" name="L760"></a> 760 
<a id="L761" name="L761"></a> 761             digitList.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, useExponentialNotation ?
<a id="L762" name="L762"></a> 762                 ((maximumDigits &lt; 0) ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE : maximumDigits) :
<a id="L763" name="L763"></a> 763                 maxFraDigits, !useExponentialNotation);
<a id="L764" name="L764"></a> 764 
<a id="L765" name="L765"></a> 765             <strong class="reserved">return</strong> <a href="../D/35000.html" title="Multiple defined in 2 places.">subformat</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, delegate, <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <strong class="reserved">false</strong>,
<a id="L766" name="L766"></a> 766                 maxIntDigits, minIntDigits, maxFraDigits, minFraDigits);
<a id="L767" name="L767"></a> 767         <em class="brace">}</em>
<a id="L768" name="L768"></a> 768     <em class="brace">}</em>
<a id="L769" name="L769"></a> 769 
<div class="comment">
      Format a BigInteger to produce a string.
      @param number    The BigInteger to format
      @param result    where the text is to be appended
      @param fieldPosition    On input: an alignment field, if desired.
      On output: the offsets of the alignment field.
      @return The formatted number string
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @see java.text.FieldPosition</div>
<a id="L781" name="L781"></a> 781     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L782" name="L782"></a> 782                                <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fieldPosition) <em class="brace">{</em>
<a id="L783" name="L783"></a> 783         fieldPosition.<a href="../S/2490.html#L193" title="Defined at 193 in src/java/text/FieldPosition.java.">setBeginIndex</a>(0);
<a id="L784" name="L784"></a> 784         fieldPosition.<a href="../S/2490.html#L203" title="Defined at 203 in src/java/text/FieldPosition.java.">setEndIndex</a>(0);
<a id="L785" name="L785"></a> 785 
<a id="L786" name="L786"></a> 786         <strong class="reserved">return</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, fieldPosition.<a href="../D/19025.html" title="Multiple defined in 2 places.">getFieldDelegate</a>(), <strong class="reserved">false</strong>);
<a id="L787" name="L787"></a> 787     <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
      Format a BigInteger to produce a string.
      @param number    The BigInteger to format
      @param result    where the text is to be appended
      @param delegate notified of locations of sub fields
      @return The formatted number string
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @see java.text.FieldPosition</div>
<a id="L799" name="L799"></a> 799     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/14747.html" title="Multiple referred from 768 places.">format</a>(<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>,
<a id="L800" name="L800"></a> 800                                <a href="../S/2459.html#L376" title="Defined at 376 in src/java/text/Format.java.">FieldDelegate</a> delegate, <strong class="reserved">boolean</strong> formatLong) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801         <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L802" name="L802"></a> 802             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>.<a href="../D/27837.html" title="Multiple defined in 13 places.">multiply</a>(<a href="../S/2458.html#L2104" title="Defined at 2104 in src/java/text/DecimalFormat.java.">getBigIntegerMultiplier</a>());
<a id="L803" name="L803"></a> 803         <em class="brace">}</em>
<a id="L804" name="L804"></a> 804         <strong class="reserved">boolean</strong> <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>.<a href="../D/34574.html" title="Multiple defined in 9 places.">signum</a>() == -1;
<a id="L805" name="L805"></a> 805         <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L806" name="L806"></a> 806             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>();
<a id="L807" name="L807"></a> 807         <em class="brace">}</em>
<a id="L808" name="L808"></a> 808 
<a id="L809" name="L809"></a> 809         <strong class="reserved">synchronized</strong>(digitList) <em class="brace">{</em>
<a id="L810" name="L810"></a> 810             <strong class="reserved">int</strong> maxIntDigits, minIntDigits, maxFraDigits, minFraDigits, maximumDigits;
<a id="L811" name="L811"></a> 811             <strong class="reserved">if</strong> (formatLong) <em class="brace">{</em>
<a id="L812" name="L812"></a> 812                 maxIntDigits = <strong class="reserved">super</strong>.<a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>();
<a id="L813" name="L813"></a> 813                 minIntDigits = <strong class="reserved">super</strong>.<a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>();
<a id="L814" name="L814"></a> 814                 maxFraDigits = <strong class="reserved">super</strong>.<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>();
<a id="L815" name="L815"></a> 815                 minFraDigits = <strong class="reserved">super</strong>.<a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>();
<a id="L816" name="L816"></a> 816                 maximumDigits = maxIntDigits + maxFraDigits;
<a id="L817" name="L817"></a> 817             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L818" name="L818"></a> 818                 maxIntDigits = <a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>();
<a id="L819" name="L819"></a> 819                 minIntDigits = <a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>();
<a id="L820" name="L820"></a> 820                 maxFraDigits = <a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>();
<a id="L821" name="L821"></a> 821                 minFraDigits = <a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>();
<a id="L822" name="L822"></a> 822                 maximumDigits = maxIntDigits + maxFraDigits;
<a id="L823" name="L823"></a> 823                 <strong class="reserved">if</strong> (maximumDigits &lt; 0) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824                     maximumDigits = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L825" name="L825"></a> 825                 <em class="brace">}</em>
<a id="L826" name="L826"></a> 826             <em class="brace">}</em>
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828             digitList.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>,
<a id="L829" name="L829"></a> 829                           useExponentialNotation ? maximumDigits : 0);
<a id="L830" name="L830"></a> 830 
<a id="L831" name="L831"></a> 831             <strong class="reserved">return</strong> <a href="../D/35000.html" title="Multiple defined in 2 places.">subformat</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, delegate, <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <strong class="reserved">true</strong>,
<a id="L832" name="L832"></a> 832                 maxIntDigits, minIntDigits, maxFraDigits, minFraDigits);
<a id="L833" name="L833"></a> 833         <em class="brace">}</em>
<a id="L834" name="L834"></a> 834     <em class="brace">}</em>
<a id="L835" name="L835"></a> 835 
<div class="comment">
      Formats an Object producing an <code>AttributedCharacterIterator</code>.
      You can use the returned <code>AttributedCharacterIterator</code>
      to build the resulting String, as well as to determine information
      about the resulting String.
      <p>
      Each attribute key of the AttributedCharacterIterator will be of type
      <code>NumberFormat.Field</code>, with the attribute value being the
      same as the attribute key.
      @exception NullPointerException if obj is null.
      @exception IllegalArgumentException when the Format cannot format the
                 given object.
      @exception        ArithmeticException if rounding is needed with rounding
                        mode being set to RoundingMode.UNNECESSARY
      @param obj The object to format
      @return AttributedCharacterIterator describing the formatted value.
      @since 1.4</p></div>
<a id="L855" name="L855"></a> 855     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L856" name="L856"></a> 856     <strong class="reserved">public</strong> <a href="../S/2454.html#L79" title="Defined at 79 in src/java/text/AttributedCharacterIterator.java.">AttributedCharacterIterator</a> <a href="../R/14766.html" title="Multiple referred from 3 places.">formatToCharacterIterator</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L857" name="L857"></a> 857         <a href="../S/2481.html#L36" title="Defined at 36 in src/java/text/CharacterIteratorFieldDelegate.java.">CharacterIteratorFieldDelegate</a> delegate =
<a id="L858" name="L858"></a> 858                          <strong class="reserved">new</strong> <a href="../S/2481.html#L36" title="Defined at 36 in src/java/text/CharacterIteratorFieldDelegate.java.">CharacterIteratorFieldDelegate</a>();
<a id="L859" name="L859"></a> 859         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> sb = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L860" name="L860"></a> 860 
<a id="L861" name="L861"></a> 861         <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a> || obj <strong class="reserved">instanceof</strong> <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>) <em class="brace">{</em>
<a id="L862" name="L862"></a> 862             <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(((<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>)obj).<a href="../D/15134.html" title="Multiple defined in 16 places.">doubleValue</a>(), sb, delegate);
<a id="L863" name="L863"></a> 863         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> || obj <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> ||
<a id="L864" name="L864"></a> 864                    obj <strong class="reserved">instanceof</strong> <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a> || obj <strong class="reserved">instanceof</strong> <a href="../D/1038.html" title="Multiple defined in 2 places.">Byte</a> ||
<a id="L865" name="L865"></a> 865                    obj <strong class="reserved">instanceof</strong> <a href="../S/1089.html#L54" title="Defined at 54 in src/java/util/concurrent/atomic/AtomicInteger.java.">AtomicInteger</a> || obj <strong class="reserved">instanceof</strong> <a href="../S/1088.html#L54" title="Defined at 54 in src/java/util/concurrent/atomic/AtomicLong.java.">AtomicLong</a>) <em class="brace">{</em>
<a id="L866" name="L866"></a> 866             <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(((<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>)obj).<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>(), sb, delegate);
<a id="L867" name="L867"></a> 867         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>) <em class="brace">{</em>
<a id="L868" name="L868"></a> 868             <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>((<a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>)obj, sb, delegate);
<a id="L869" name="L869"></a> 869         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>) <em class="brace">{</em>
<a id="L870" name="L870"></a> 870             <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>((<a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>)obj, sb, delegate, <strong class="reserved">false</strong>);
<a id="L871" name="L871"></a> 871         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L872" name="L872"></a> 872             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>(
<a id="L873" name="L873"></a> 873                 "formatToCharacterIterator must be passed non-null object");
<a id="L874" name="L874"></a> 874         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L875" name="L875"></a> 875             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L876" name="L876"></a> 876                 "Cannot format given Object as a Number");
<a id="L877" name="L877"></a> 877         <em class="brace">}</em>
<a id="L878" name="L878"></a> 878         <strong class="reserved">return</strong> delegate.<a href="../D/19862.html" title="Multiple defined in 18 places.">getIterator</a>(sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L879" name="L879"></a> 879     <em class="brace">}</em>
<a id="L880" name="L880"></a> 880 
<a id="L881" name="L881"></a> 881     <em class="comment">// ==== Begin fast-path formating logic for double =========================</em>
<a id="L882" name="L882"></a> 882 
<div class="comment">
 Fast-path formatting will be used for format(double ...) methods iff a
      number of conditions are met (see checkAndSetFastPathStatus()):
      - Only if instance properties meet the right predefined conditions.
      - The abs value of the double to format is &lt;= Integer.MAX_VALUE.
      The basic approach is to split the binary to decimal conversion of a
      double value into two phases:
      * The conversion of the integer portion of the double.
      * The conversion of the fractional portion of the double
        (limited to two or three digits).
      The isolation and conversion of the integer portion of the double is
      straightforward. The conversion of the fraction is more subtle and relies
      on some rounding properties of double to the decimal precisions in
      question.  Using the terminology of BigDecimal, this fast-path algorithm
      is applied when a double value has a magnitude less than Integer.MAX_VALUE
      and rounding is to nearest even and the destination format has two or
      three digits of *scale* (digits after the decimal point).
      Under a rounding to nearest even policy, the returned result is a digit
      string of a number in the (in this case decimal) destination format
      closest to the exact numerical value of the (in this case binary) input
      value.  If two destination format numbers are equally distant, the one
      with the last digit even is returned.  To compute such a correctly rounded
      value, some information about digits beyond the smallest returned digit
      position needs to be consulted.
      In general, a guard digit, a round digit, and a sticky *bit* are needed
      beyond the returned digit position.  If the discarded portion of the input
      is sufficiently large, the returned digit string is incremented.  In round
      to nearest even, this threshold to increment occurs near the half-way
      point between digits.  The sticky bit records if there are any remaining
      trailing digits of the exact input value in the new format; the sticky bit
      is consulted only in close to half-way rounding cases.
      Given the computation of the digit and bit values, rounding is then
      reduced to a table lookup problem.  For decimal, the even/odd cases look
      like this:
      Last   Round   Sticky
      6      5       0      =&gt; 6   // exactly halfway, return even digit.
      6      5       1      =&gt; 7   // a little bit more than halfway, round up.
      7      5       0      =&gt; 8   // exactly halfway, round up to even.
      7      5       1      =&gt; 8   // a little bit more than halfway, round up.
      With analogous entries for other even and odd last-returned digits.
      However, decimal negative powers of 5 smaller than 0.5 are *not* exactly
      representable as binary fraction.  In particular, 0.005 (the round limit
      for a two-digit scale) and 0.0005 (the round limit for a three-digit
      scale) are not representable. Therefore, for input values near these cases
      the sticky bit is known to be set which reduces the rounding logic to:
      Last   Round   Sticky
      6      5       1      =&gt; 7   // a little bit more than halfway, round up.
      7      5       1      =&gt; 8   // a little bit more than halfway, round up.
      In other words, if the round digit is 5, the sticky bit is known to be
      set.  If the round digit is something other than 5, the sticky bit is not
      relevant.  Therefore, some of the logic about whether or not to increment
      the destination *decimal* value can occur based on tests of *binary*
      computations of the binary input number.</div>
<a id="L945" name="L945"></a> 945 
<div class="comment">
      Check validity of using fast-path for this instance. If fast-path is valid
      for this instance, sets fast-path state as true and initializes fast-path
      utility fields as needed.
      This method is supposed to be called rarely, otherwise that will break the
      fast-path performance. That means avoiding frequent changes of the
      properties of the instance, since for most properties, each time a change
      happens, a call to this method is needed at the next format call.
      FAST-PATH RULES:
       Similar to the default DecimalFormat instantiation case.
       More precisely:
       - HALF_EVEN rounding mode,
       - isGroupingUsed() is true,
       - groupingSize of 3,
       - multiplier is 1,
       - Decimal separator not mandatory,
       - No use of exponential notation,
       - minimumIntegerDigits is exactly 1 and maximumIntegerDigits at least 10
       - For number of fractional digits, the exact values found in the default case:
          Currency : min = max = 2.
          Decimal  : min = 0. max = 3.</div>
<a id="L971" name="L971"></a> 971     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1559" title="Referred from 1559 in src/java/text/DecimalFormat.java.">checkAndSetFastPathStatus</a>() <em class="brace">{</em>
<a id="L972" name="L972"></a> 972 
<a id="L973" name="L973"></a> 973         <strong class="reserved">boolean</strong> fastPathWasOn = isFastPath;
<a id="L974" name="L974"></a> 974 
<a id="L975" name="L975"></a> 975         <strong class="reserved">if</strong> ((roundingMode == <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L278" title="Defined at 278 in src/java/math/RoundingMode.java.">HALF_EVEN</a>) &amp;&amp;
<a id="L976" name="L976"></a> 976             (<a href="../S/2488.html#L647" title="Defined at 647 in src/java/text/NumberFormat.java.">isGroupingUsed</a>()) &amp;&amp;
<a id="L977" name="L977"></a> 977             (groupingSize == 3) &amp;&amp;
<a id="L978" name="L978"></a> 978             (multiplier == 1) &amp;&amp;
<a id="L979" name="L979"></a> 979             (!decimalSeparatorAlwaysShown) &amp;&amp;
<a id="L980" name="L980"></a> 980             (!useExponentialNotation)) <em class="brace">{</em>
<a id="L981" name="L981"></a> 981 
<a id="L982" name="L982"></a> 982             <em class="comment">// The fast-path algorithm is semi-hardcoded against</em>
<a id="L983" name="L983"></a> 983             <em class="comment">//  minimumIntegerDigits and maximumIntegerDigits.</em>
<a id="L984" name="L984"></a> 984             isFastPath = ((minimumIntegerDigits == 1) &amp;&amp;
<a id="L985" name="L985"></a> 985                           (maximumIntegerDigits &gt;= 10));
<a id="L986" name="L986"></a> 986 
<a id="L987" name="L987"></a> 987             <em class="comment">// The fast-path algorithm is hardcoded against</em>
<a id="L988" name="L988"></a> 988             <em class="comment">//  minimumFractionDigits and maximumFractionDigits.</em>
<a id="L989" name="L989"></a> 989             <strong class="reserved">if</strong> (isFastPath) <em class="brace">{</em>
<a id="L990" name="L990"></a> 990                 <strong class="reserved">if</strong> (isCurrencyFormat) <em class="brace">{</em>
<a id="L991" name="L991"></a> 991                     <strong class="reserved">if</strong> ((minimumFractionDigits != 2) ||
<a id="L992" name="L992"></a> 992                         (maximumFractionDigits != 2))
<a id="L993" name="L993"></a> 993                         isFastPath = <strong class="reserved">false</strong>;
<a id="L994" name="L994"></a> 994                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((minimumFractionDigits != 0) ||
<a id="L995" name="L995"></a> 995                            (maximumFractionDigits != 3))
<a id="L996" name="L996"></a> 996                     isFastPath = <strong class="reserved">false</strong>;
<a id="L997" name="L997"></a> 997             <em class="brace">}</em>
<a id="L998" name="L998"></a> 998         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L999" name="L999"></a> 999             isFastPath = <strong class="reserved">false</strong>;
<a id="L1000" name="L1000"></a>1000 
<a id="L1001" name="L1001"></a>1001         <em class="comment">// Since some instance properties may have changed while still falling</em>
<a id="L1002" name="L1002"></a>1002         <em class="comment">// in the fast-path case, we need to reinitialize fastPathData anyway.</em>
<a id="L1003" name="L1003"></a>1003         <strong class="reserved">if</strong> (isFastPath) <em class="brace">{</em>
<a id="L1004" name="L1004"></a>1004             <em class="comment">// We need to instantiate fastPathData if not already done.</em>
<a id="L1005" name="L1005"></a>1005             <strong class="reserved">if</strong> (fastPathData == <strong class="reserved">null</strong>)
<a id="L1006" name="L1006"></a>1006                 fastPathData = <strong class="reserved">new</strong> <a href="../S/2458.html#L4022" title="Defined at 4022 in src/java/text/DecimalFormat.java.">FastPathData</a>();
<a id="L1007" name="L1007"></a>1007 
<a id="L1008" name="L1008"></a>1008             <em class="comment">// Sets up the locale specific constants used when formatting.</em>
<a id="L1009" name="L1009"></a>1009             <em class="comment">// '0' is our default representation of zero.</em>
<a id="L1010" name="L1010"></a>1010             fastPathData.zeroDelta = symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>() - '0';
<a id="L1011" name="L1011"></a>1011             fastPathData.groupingChar = symbols.<a href="../S/2462.html#L211" title="Defined at 211 in src/java/text/DecimalFormatSymbols.java.">getGroupingSeparator</a>();
<a id="L1012" name="L1012"></a>1012 
<a id="L1013" name="L1013"></a>1013             <em class="comment">// Sets up fractional constants related to currency/decimal pattern.</em>
<a id="L1014" name="L1014"></a>1014             fastPathData.fractionalMaxIntBound = (isCurrencyFormat) ? 99 : 999;
<a id="L1015" name="L1015"></a>1015             fastPathData.fractionalScaleFactor = (isCurrencyFormat) ? 100.0d : 1000.0d;
<a id="L1016" name="L1016"></a>1016 
<a id="L1017" name="L1017"></a>1017             <em class="comment">// Records the need for adding prefix or suffix</em>
<a id="L1018" name="L1018"></a>1018             fastPathData.positiveAffixesRequired =
<a id="L1019" name="L1019"></a>1019                 (positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0) || (positiveSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0);
<a id="L1020" name="L1020"></a>1020             fastPathData.negativeAffixesRequired =
<a id="L1021" name="L1021"></a>1021                 (negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0) || (negativeSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0);
<a id="L1022" name="L1022"></a>1022 
<a id="L1023" name="L1023"></a>1023             <em class="comment">// Creates a cached char container for result, with max possible size.</em>
<a id="L1024" name="L1024"></a>1024             <strong class="reserved">int</strong> maxNbIntegralDigits = 10;
<a id="L1025" name="L1025"></a>1025             <strong class="reserved">int</strong> maxNbGroups = 3;
<a id="L1026" name="L1026"></a>1026             <strong class="reserved">int</strong> containerSize =
<a id="L1027" name="L1027"></a>1027                 <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) +
<a id="L1028" name="L1028"></a>1028                 maxNbIntegralDigits + maxNbGroups + 1 + maximumFractionDigits +
<a id="L1029" name="L1029"></a>1029                 <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(positiveSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), negativeSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L1030" name="L1030"></a>1030 
<a id="L1031" name="L1031"></a>1031             fastPathData.fastPathContainer = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[containerSize];
<a id="L1032" name="L1032"></a>1032 
<a id="L1033" name="L1033"></a>1033             <em class="comment">// Sets up prefix and suffix char arrays constants.</em>
<a id="L1034" name="L1034"></a>1034             fastPathData.charsPositiveSuffix = positiveSuffix.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1035" name="L1035"></a>1035             fastPathData.charsNegativeSuffix = negativeSuffix.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1036" name="L1036"></a>1036             fastPathData.charsPositivePrefix = positivePrefix.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1037" name="L1037"></a>1037             fastPathData.charsNegativePrefix = negativePrefix.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1038" name="L1038"></a>1038 
<a id="L1039" name="L1039"></a>1039             <em class="comment">// Sets up fixed index positions for integral and fractional digits.</em>
<a id="L1040" name="L1040"></a>1040             <em class="comment">// Sets up decimal point in cached result container.</em>
<a id="L1041" name="L1041"></a>1041             <strong class="reserved">int</strong> longestPrefixLength =
<a id="L1042" name="L1042"></a>1042                 <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L1043" name="L1043"></a>1043             <strong class="reserved">int</strong> decimalPointIndex =
<a id="L1044" name="L1044"></a>1044                 maxNbIntegralDigits + maxNbGroups + longestPrefixLength;
<a id="L1045" name="L1045"></a>1045 
<a id="L1046" name="L1046"></a>1046             fastPathData.integralLastIndex    = decimalPointIndex - 1;
<a id="L1047" name="L1047"></a>1047             fastPathData.fractionalFirstIndex = decimalPointIndex + 1;
<a id="L1048" name="L1048"></a>1048             fastPathData.fastPathContainer[decimalPointIndex] =
<a id="L1049" name="L1049"></a>1049                 isCurrencyFormat ?
<a id="L1050" name="L1050"></a>1050                 symbols.<a href="../S/2462.html#L483" title="Defined at 483 in src/java/text/DecimalFormatSymbols.java.">getMonetaryDecimalSeparator</a>() :
<a id="L1051" name="L1051"></a>1051                 symbols.<a href="../D/18238.html" title="Multiple defined in 3 places.">getDecimalSeparator</a>();
<a id="L1052" name="L1052"></a>1052 
<a id="L1053" name="L1053"></a>1053         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (fastPathWasOn) <em class="brace">{</em>
<a id="L1054" name="L1054"></a>1054             <em class="comment">// Previous state was fast-path and is no more.</em>
<a id="L1055" name="L1055"></a>1055             <em class="comment">// Resets cached array constants.</em>
<a id="L1056" name="L1056"></a>1056             fastPathData.fastPathContainer = <strong class="reserved">null</strong>;
<a id="L1057" name="L1057"></a>1057             fastPathData.charsPositiveSuffix = <strong class="reserved">null</strong>;
<a id="L1058" name="L1058"></a>1058             fastPathData.charsNegativeSuffix = <strong class="reserved">null</strong>;
<a id="L1059" name="L1059"></a>1059             fastPathData.charsPositivePrefix = <strong class="reserved">null</strong>;
<a id="L1060" name="L1060"></a>1060             fastPathData.charsNegativePrefix = <strong class="reserved">null</strong>;
<a id="L1061" name="L1061"></a>1061         <em class="brace">}</em>
<a id="L1062" name="L1062"></a>1062 
<a id="L1063" name="L1063"></a>1063         fastPathCheckNeeded = <strong class="reserved">false</strong>;
<a id="L1064" name="L1064"></a>1064     <em class="brace">}</em>
<a id="L1065" name="L1065"></a>1065 
<div class="comment">
      Returns true if rounding-up must be done on <code>scaledFractionalPartAsInt</code>,
      false otherwise.
      This is a utility method that takes correct half-even rounding decision on
      passed fractional value at the scaled decimal point (2 digits for currency
      case and 3 for decimal case), when the approximated fractional part after
      scaled decimal point is exactly 0.5d.  This is done by means of exact
      calculations on the <code>fractionalPart</code> floating-point value.
      This method is supposed to be called by private <code>fastDoubleFormat</code>
      method only.
      The algorithms used for the exact calculations are :
      The <b><i>FastTwoSum</i></b> algorithm, from T.J.Dekker, described in the
      papers  "<i>A  Floating-Point   Technique  for  Extending  the  Available
      Precision</i>"  by Dekker, and  in "<i>Adaptive  Precision Floating-Point
      Arithmetic and Fast Robust Geometric Predicates</i>" from J.Shewchuk.
      A modified version of <b><i>Sum2S</i></b> cascaded summation described in
      "<i>Accurate Sum and Dot Product</i>" from Takeshi Ogita and All.  As
      Ogita says in this paper this is an equivalent of the Kahan-Babuska's
      summation algorithm because we order the terms by magnitude before summing
      them. For this reason we can use the <i>FastTwoSum</i> algorithm rather
      than the more expensive Knuth's <i>TwoSum</i>.
      We do this to avoid a more expensive exact "<i>TwoProduct</i>" algorithm,
      like those described in Shewchuk's paper above. See comments in the code
      below.
      @param  fractionalPart The  fractional value  on which  we  take rounding
      decision.
      @param scaledFractionalPartAsInt The integral part of the scaled
      fractional value.
      @return the decision that must be taken regarding half-even rounding.</div>
<a id="L1104" name="L1104"></a>1104     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/2458.html#L1504" title="Referred from 1504 in src/java/text/DecimalFormat.java.">exactRoundUp</a>(<strong class="reserved">double</strong> fractionalPart,
<a id="L1105" name="L1105"></a>1105                                  <strong class="reserved">int</strong> scaledFractionalPartAsInt) <em class="brace">{</em>
<a id="L1106" name="L1106"></a>1106 
<div class="comment">
 exactRoundUp() method is called by fastDoubleFormat() only.
          The precondition expected to be verified by the passed parameters is :
          scaledFractionalPartAsInt ==
              (int) (fractionalPart * fastPathData.fractionalScaleFactor).
          This is ensured by fastDoubleFormat() code.</div>
<a id="L1113" name="L1113"></a>1113 
<div class="comment">
 We first calculate roundoff error made by fastDoubleFormat() on
          the scaled fractional part. We do this with exact calculation on the
          passed fractionalPart. Rounding decision will then be taken from roundoff.</div>
<a id="L1118" name="L1118"></a>1118 
<div class="comment">
 ---- TwoProduct(fractionalPart, scale factor (i.e. 1000.0d or 100.0d)).
          The below is an optimized exact "TwoProduct" calculation of passed
          fractional part with scale factor, using Ogita's Sum2S cascaded
          summation adapted as Kahan-Babuska equivalent by using FastTwoSum
          (much faster) rather than Knuth's TwoSum.
          We can do this because we order the summation from smallest to
          greatest, so that FastTwoSum can be used without any additional error.
          The "TwoProduct" exact calculation needs 17 flops. We replace this by
          a cascaded summation of FastTwoSum calculations, each involving an
          exact multiply by a power of 2.
          Doing so saves overall 4 multiplications and 1 addition compared to
          using traditional "TwoProduct".
          The scale factor is either 100 (currency case) or 1000 (decimal case).
          - when 1000, we replace it by (1024 - 16 - 8) = 1000.
          - when 100,  we replace it by (128  - 32 + 4) =  100.
          Every multiplication by a power of 2 (1024, 128, 32, 16, 8, 4) is exact.</div>
<a id="L1142" name="L1142"></a>1142         <strong class="reserved">double</strong> approxMax;    <em class="comment">// Will always be positive.</em>
<a id="L1143" name="L1143"></a>1143         <strong class="reserved">double</strong> approxMedium; <em class="comment">// Will always be negative.</em>
<a id="L1144" name="L1144"></a>1144         <strong class="reserved">double</strong> approxMin;
<a id="L1145" name="L1145"></a>1145 
<a id="L1146" name="L1146"></a>1146         <strong class="reserved">double</strong> fastTwoSumApproximation = 0.0d;
<a id="L1147" name="L1147"></a>1147         <strong class="reserved">double</strong> fastTwoSumRoundOff = 0.0d;
<a id="L1148" name="L1148"></a>1148         <strong class="reserved">double</strong> bVirtual = 0.0d;
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150         <strong class="reserved">if</strong> (isCurrencyFormat) <em class="brace">{</em>
<a id="L1151" name="L1151"></a>1151             <em class="comment">// Scale is 100 = 128 - 32 + 4.</em>
<a id="L1152" name="L1152"></a>1152             <em class="comment">// Multiply by 2**n is a shift. No roundoff. No error.</em>
<a id="L1153" name="L1153"></a>1153             approxMax    = fractionalPart * 128.00d;
<a id="L1154" name="L1154"></a>1154             approxMedium = - (fractionalPart * 32.00d);
<a id="L1155" name="L1155"></a>1155             approxMin    = fractionalPart * 4.00d;
<a id="L1156" name="L1156"></a>1156         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1157" name="L1157"></a>1157             <em class="comment">// Scale is 1000 = 1024 - 16 - 8.</em>
<a id="L1158" name="L1158"></a>1158             <em class="comment">// Multiply by 2**n is a shift. No roundoff. No error.</em>
<a id="L1159" name="L1159"></a>1159             approxMax    = fractionalPart * 1024.00d;
<a id="L1160" name="L1160"></a>1160             approxMedium = - (fractionalPart * 16.00d);
<a id="L1161" name="L1161"></a>1161             approxMin    = - (fractionalPart * 8.00d);
<a id="L1162" name="L1162"></a>1162         <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163 
<a id="L1164" name="L1164"></a>1164         <em class="comment">// Shewchuk/Dekker's FastTwoSum(approxMedium, approxMin).</em>
<a id="L1165" name="L1165"></a>1165         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(-approxMedium &gt;= <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(approxMin));
<a id="L1166" name="L1166"></a>1166         fastTwoSumApproximation = approxMedium + approxMin;
<a id="L1167" name="L1167"></a>1167         bVirtual = fastTwoSumApproximation - approxMedium;
<a id="L1168" name="L1168"></a>1168         fastTwoSumRoundOff = approxMin - bVirtual;
<a id="L1169" name="L1169"></a>1169         <strong class="reserved">double</strong> approxS1 = fastTwoSumApproximation;
<a id="L1170" name="L1170"></a>1170         <strong class="reserved">double</strong> roundoffS1 = fastTwoSumRoundOff;
<a id="L1171" name="L1171"></a>1171 
<a id="L1172" name="L1172"></a>1172         <em class="comment">// Shewchuk/Dekker's FastTwoSum(approxMax, approxS1);</em>
<a id="L1173" name="L1173"></a>1173         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(approxMax &gt;= <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(approxS1));
<a id="L1174" name="L1174"></a>1174         fastTwoSumApproximation = approxMax + approxS1;
<a id="L1175" name="L1175"></a>1175         bVirtual = fastTwoSumApproximation - approxMax;
<a id="L1176" name="L1176"></a>1176         fastTwoSumRoundOff = approxS1 - bVirtual;
<a id="L1177" name="L1177"></a>1177         <strong class="reserved">double</strong> roundoff1000 = fastTwoSumRoundOff;
<a id="L1178" name="L1178"></a>1178         <strong class="reserved">double</strong> approx1000 = fastTwoSumApproximation;
<a id="L1179" name="L1179"></a>1179         <strong class="reserved">double</strong> roundoffTotal = roundoffS1 + roundoff1000;
<a id="L1180" name="L1180"></a>1180 
<a id="L1181" name="L1181"></a>1181         <em class="comment">// Shewchuk/Dekker's FastTwoSum(approx1000, roundoffTotal);</em>
<a id="L1182" name="L1182"></a>1182         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(approx1000 &gt;= <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(roundoffTotal));
<a id="L1183" name="L1183"></a>1183         fastTwoSumApproximation = approx1000 + roundoffTotal;
<a id="L1184" name="L1184"></a>1184         bVirtual = fastTwoSumApproximation - approx1000;
<a id="L1185" name="L1185"></a>1185 
<a id="L1186" name="L1186"></a>1186         <em class="comment">// Now we have got the roundoff for the scaled fractional</em>
<a id="L1187" name="L1187"></a>1187         <strong class="reserved">double</strong> scaledFractionalRoundoff = roundoffTotal - bVirtual;
<a id="L1188" name="L1188"></a>1188 
<a id="L1189" name="L1189"></a>1189         <em class="comment">// ---- TwoProduct(fractionalPart, scale (i.e. 1000.0d or 100.0d)) end.</em>
<a id="L1190" name="L1190"></a>1190 
<div class="comment">
 ---- Taking the rounding decision
          We take rounding decision based on roundoff and half-even rounding
          rule.
          The above TwoProduct gives us the exact roundoff on the approximated
          scaled fractional, and we know that this approximation is exactly
          0.5d, since that has already been tested by the caller
          (fastDoubleFormat).
          Decision comes first from the sign of the calculated exact roundoff.
          - Since being exact roundoff, it cannot be positive with a scaled
            fractional less than 0.5d, as well as negative with a scaled
            fractional greater than 0.5d. That leaves us with following 3 cases.
          - positive, thus scaled fractional == 0.500....0fff ==&gt; round-up.
          - negative, thus scaled fractional == 0.499....9fff ==&gt; don't round-up.
          - is zero,  thus scaled fractioanl == 0.5 ==&gt; half-even rounding applies :
             we round-up only if the integral part of the scaled fractional is odd.</div>
<a id="L1211" name="L1211"></a>1211         <strong class="reserved">if</strong> (scaledFractionalRoundoff &gt; 0.0) <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1213" name="L1213"></a>1213         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (scaledFractionalRoundoff &lt; 0.0) <em class="brace">{</em>
<a id="L1214" name="L1214"></a>1214             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1215" name="L1215"></a>1215         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((scaledFractionalPartAsInt &amp; 1) != 0) <em class="brace">{</em>
<a id="L1216" name="L1216"></a>1216             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1217" name="L1217"></a>1217         <em class="brace">}</em>
<a id="L1218" name="L1218"></a>1218 
<a id="L1219" name="L1219"></a>1219         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1220" name="L1220"></a>1220 
<a id="L1221" name="L1221"></a>1221         <em class="comment">// ---- Taking the rounding decision end</em>
<a id="L1222" name="L1222"></a>1222     <em class="brace">}</em>
<a id="L1223" name="L1223"></a>1223 
<div class="comment">
      Collects integral digits from passed <code>number</code>, while setting
      grouping chars as needed. Updates <code>firstUsedIndex</code> accordingly.
      Loops downward starting from <code>backwardIndex</code> position (inclusive).
      @param number  The int value from which we collect digits.
      @param digitsBuffer The char array container where digits and grouping chars
       are stored.
      @param backwardIndex the position from which we start storing digits in
       digitsBuffer.</div>
<a id="L1237" name="L1237"></a>1237     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1523" title="Referred from 1523 in src/java/text/DecimalFormat.java.">collectIntegralDigits</a>(<strong class="reserved">int</strong> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>,
<a id="L1238" name="L1238"></a>1238                                        <strong class="reserved">char</strong>[] digitsBuffer,
<a id="L1239" name="L1239"></a>1239                                        <strong class="reserved">int</strong> backwardIndex) <em class="brace">{</em>
<a id="L1240" name="L1240"></a>1240         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = backwardIndex;
<a id="L1241" name="L1241"></a>1241         <strong class="reserved">int</strong> q;
<a id="L1242" name="L1242"></a>1242         <strong class="reserved">int</strong> r;
<a id="L1243" name="L1243"></a>1243         <strong class="reserved">while</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &gt; 999) <em class="brace">{</em>
<a id="L1244" name="L1244"></a>1244             <em class="comment">// Generates 3 digits per iteration.</em>
<a id="L1245" name="L1245"></a>1245             q = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> / 1000;
<a id="L1246" name="L1246"></a>1246             r = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> - (q &lt;&lt; 10) + (q &lt;&lt; 4) + (q &lt;&lt; 3); <em class="comment">// -1024 +16 +8 = 1000.</em>
<a id="L1247" name="L1247"></a>1247             <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> = q;
<a id="L1248" name="L1248"></a>1248 
<a id="L1249" name="L1249"></a>1249             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>--] = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitOnes1000[r];
<a id="L1250" name="L1250"></a>1250             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>--] = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitTens1000[r];
<a id="L1251" name="L1251"></a>1251             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>--] = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitHundreds1000[r];
<a id="L1252" name="L1252"></a>1252             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>--] = fastPathData.groupingChar;
<a id="L1253" name="L1253"></a>1253         <em class="brace">}</em>
<a id="L1254" name="L1254"></a>1254 
<a id="L1255" name="L1255"></a>1255         <em class="comment">// Collects last 3 or less digits.</em>
<a id="L1256" name="L1256"></a>1256         digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitOnes1000[<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>];
<a id="L1257" name="L1257"></a>1257         <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &gt; 9) <em class="brace">{</em>
<a id="L1258" name="L1258"></a>1258             digitsBuffer[--<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]  = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitTens1000[<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>];
<a id="L1259" name="L1259"></a>1259             <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> &gt; 99)
<a id="L1260" name="L1260"></a>1260                 digitsBuffer[--<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]   = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitHundreds1000[<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>];
<a id="L1261" name="L1261"></a>1261         <em class="brace">}</em>
<a id="L1262" name="L1262"></a>1262 
<a id="L1263" name="L1263"></a>1263         fastPathData.firstUsedIndex = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1264" name="L1264"></a>1264     <em class="brace">}</em>
<a id="L1265" name="L1265"></a>1265 
<div class="comment">
      Collects the 2 (currency) or 3 (decimal) fractional digits from passed
      <code>number</code>, starting at <code>startIndex</code> position
      inclusive.  There is no punctuation to set here (no grouping chars).
      Updates <code>fastPathData.lastFreeIndex</code> accordingly.
      @param number  The int value from which we collect digits.
      @param digitsBuffer The char array container where digits are stored.
      @param startIndex the position from which we start storing digits in
       digitsBuffer.</div>
<a id="L1279" name="L1279"></a>1279     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1521" title="Referred from 1521 in src/java/text/DecimalFormat.java.">collectFractionalDigits</a>(<strong class="reserved">int</strong> <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>,
<a id="L1280" name="L1280"></a>1280                                          <strong class="reserved">char</strong>[] digitsBuffer,
<a id="L1281" name="L1281"></a>1281                                          <strong class="reserved">int</strong> startIndex) <em class="brace">{</em>
<a id="L1282" name="L1282"></a>1282         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = startIndex;
<a id="L1283" name="L1283"></a>1283 
<a id="L1284" name="L1284"></a>1284         <strong class="reserved">char</strong> digitOnes = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitOnes1000[<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>];
<a id="L1285" name="L1285"></a>1285         <strong class="reserved">char</strong> digitTens = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitTens1000[<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>];
<a id="L1286" name="L1286"></a>1286 
<a id="L1287" name="L1287"></a>1287         <strong class="reserved">if</strong> (isCurrencyFormat) <em class="brace">{</em>
<a id="L1288" name="L1288"></a>1288             <em class="comment">// Currency case. Always collects fractional digits.</em>
<a id="L1289" name="L1289"></a>1289             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = digitTens;
<a id="L1290" name="L1290"></a>1290             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = digitOnes;
<a id="L1291" name="L1291"></a>1291         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a> != 0) <em class="brace">{</em>
<a id="L1292" name="L1292"></a>1292             <em class="comment">// Decimal case. Hundreds will always be collected</em>
<a id="L1293" name="L1293"></a>1293             digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = <a href="../S/2458.html#L4115" title="Defined at 4115 in src/java/text/DecimalFormat.java.">DigitArrays</a>.DigitHundreds1000[<a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>];
<a id="L1294" name="L1294"></a>1294 
<a id="L1295" name="L1295"></a>1295             <em class="comment">// Ending zeros won't be collected.</em>
<a id="L1296" name="L1296"></a>1296             <strong class="reserved">if</strong> (digitOnes != '0') <em class="brace">{</em>
<a id="L1297" name="L1297"></a>1297                 digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = digitTens;
<a id="L1298" name="L1298"></a>1298                 digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = digitOnes;
<a id="L1299" name="L1299"></a>1299             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (digitTens != '0')
<a id="L1300" name="L1300"></a>1300                 digitsBuffer[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++] = digitTens;
<a id="L1301" name="L1301"></a>1301 
<a id="L1302" name="L1302"></a>1302         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L1303" name="L1303"></a>1303             <em class="comment">// This is decimal pattern and fractional part is zero.</em>
<a id="L1304" name="L1304"></a>1304             <em class="comment">// We must remove decimal point from result.</em>
<a id="L1305" name="L1305"></a>1305             <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>--;
<a id="L1306" name="L1306"></a>1306 
<a id="L1307" name="L1307"></a>1307         fastPathData.lastFreeIndex = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1308" name="L1308"></a>1308     <em class="brace">}</em>
<a id="L1309" name="L1309"></a>1309 
<div class="comment">
      Internal utility.
      Adds the passed <code>prefix</code> and <code>suffix</code> to <code>container</code>.
      @param container  Char array container which to prepend/append the
       prefix/suffix.
      @param prefix     Char sequence to prepend as a prefix.
      @param suffix     Char sequence to append as a suffix.</div>
<a id="L1320" name="L1320"></a>1320     <em class="comment">//    private void addAffixes(boolean isNegative, char[] container) {</em>
<a id="L1321" name="L1321"></a>1321     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/9601.html" title="Multiple referred from 2 places.">addAffixes</a>(<strong class="reserved">char</strong>[] container, <strong class="reserved">char</strong>[] <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <strong class="reserved">char</strong>[] suffix) <em class="brace">{</em>
<a id="L1322" name="L1322"></a>1322 
<a id="L1323" name="L1323"></a>1323         <em class="comment">// We add affixes only if needed (affix length &gt; 0).</em>
<a id="L1324" name="L1324"></a>1324         <strong class="reserved">int</strong> pl = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1325" name="L1325"></a>1325         <strong class="reserved">int</strong> sl = suffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1326" name="L1326"></a>1326         <strong class="reserved">if</strong> (pl != 0) <a href="../S/2458.html#L1340" title="Defined at 1340 in src/java/text/DecimalFormat.java.">prependPrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, pl, container);
<a id="L1327" name="L1327"></a>1327         <strong class="reserved">if</strong> (sl != 0) <a href="../S/2458.html#L1377" title="Defined at 1377 in src/java/text/DecimalFormat.java.">appendSuffix</a>(suffix, sl, container);
<a id="L1328" name="L1328"></a>1328 
<a id="L1329" name="L1329"></a>1329     <em class="brace">}</em>
<a id="L1330" name="L1330"></a>1330 
<div class="comment">
      Prepends the passed <code>prefix</code> chars to given result
      <code>container</code>.  Updates <code>fastPathData.firstUsedIndex</code>
      accordingly.
      @param prefix The prefix characters to prepend to result.
      @param len The number of chars to prepend.
      @param container Char array container which to prepend the prefix</div>
<a id="L1340" name="L1340"></a>1340     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1326" title="Referred from 1326 in src/java/text/DecimalFormat.java.">prependPrefix</a>(<strong class="reserved">char</strong>[] <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>,
<a id="L1341" name="L1341"></a>1341                                <strong class="reserved">int</strong> len,
<a id="L1342" name="L1342"></a>1342                                <strong class="reserved">char</strong>[] container) <em class="brace">{</em>
<a id="L1343" name="L1343"></a>1343 
<a id="L1344" name="L1344"></a>1344         fastPathData.firstUsedIndex -= len;
<a id="L1345" name="L1345"></a>1345         <strong class="reserved">int</strong> startIndex = fastPathData.firstUsedIndex;
<a id="L1346" name="L1346"></a>1346 
<a id="L1347" name="L1347"></a>1347         <em class="comment">// If prefix to prepend is only 1 char long, just assigns this char.</em>
<a id="L1348" name="L1348"></a>1348         <em class="comment">// If prefix is less or equal 4, we use a dedicated algorithm that</em>
<a id="L1349" name="L1349"></a>1349         <em class="comment">//  has shown to run faster than System.arraycopy.</em>
<a id="L1350" name="L1350"></a>1350         <em class="comment">// If more than 4, we use System.arraycopy.</em>
<a id="L1351" name="L1351"></a>1351         <strong class="reserved">if</strong> (len == 1)
<a id="L1352" name="L1352"></a>1352             container[startIndex] = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>[0];
<a id="L1353" name="L1353"></a>1353         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (len &lt;= 4) <em class="brace">{</em>
<a id="L1354" name="L1354"></a>1354             <strong class="reserved">int</strong> dstLower = startIndex;
<a id="L1355" name="L1355"></a>1355             <strong class="reserved">int</strong> dstUpper = dstLower + len - 1;
<a id="L1356" name="L1356"></a>1356             <strong class="reserved">int</strong> srcUpper = len - 1;
<a id="L1357" name="L1357"></a>1357             container[dstLower] = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>[0];
<a id="L1358" name="L1358"></a>1358             container[dstUpper] = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>[srcUpper];
<a id="L1359" name="L1359"></a>1359 
<a id="L1360" name="L1360"></a>1360             <strong class="reserved">if</strong> (len &gt; 2)
<a id="L1361" name="L1361"></a>1361                 container[++dstLower] = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>[1];
<a id="L1362" name="L1362"></a>1362             <strong class="reserved">if</strong> (len == 4)
<a id="L1363" name="L1363"></a>1363                 container[--dstUpper] = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>[2];
<a id="L1364" name="L1364"></a>1364         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L1365" name="L1365"></a>1365             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, 0, container, startIndex, len);
<a id="L1366" name="L1366"></a>1366     <em class="brace">}</em>
<a id="L1367" name="L1367"></a>1367 
<div class="comment">
      Appends the passed <code>suffix</code> chars to given result
      <code>container</code>.  Updates <code>fastPathData.lastFreeIndex</code>
      accordingly.
      @param suffix The suffix characters to append to result.
      @param len The number of chars to append.
      @param container Char array container which to append the suffix</div>
<a id="L1377" name="L1377"></a>1377     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1327" title="Referred from 1327 in src/java/text/DecimalFormat.java.">appendSuffix</a>(<strong class="reserved">char</strong>[] suffix,
<a id="L1378" name="L1378"></a>1378                               <strong class="reserved">int</strong> len,
<a id="L1379" name="L1379"></a>1379                               <strong class="reserved">char</strong>[] container) <em class="brace">{</em>
<a id="L1380" name="L1380"></a>1380 
<a id="L1381" name="L1381"></a>1381         <strong class="reserved">int</strong> startIndex = fastPathData.lastFreeIndex;
<a id="L1382" name="L1382"></a>1382 
<a id="L1383" name="L1383"></a>1383         <em class="comment">// If suffix to append is only 1 char long, just assigns this char.</em>
<a id="L1384" name="L1384"></a>1384         <em class="comment">// If suffix is less or equal 4, we use a dedicated algorithm that</em>
<a id="L1385" name="L1385"></a>1385         <em class="comment">//  has shown to run faster than System.arraycopy.</em>
<a id="L1386" name="L1386"></a>1386         <em class="comment">// If more than 4, we use System.arraycopy.</em>
<a id="L1387" name="L1387"></a>1387         <strong class="reserved">if</strong> (len == 1)
<a id="L1388" name="L1388"></a>1388             container[startIndex] = suffix[0];
<a id="L1389" name="L1389"></a>1389         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (len &lt;= 4) <em class="brace">{</em>
<a id="L1390" name="L1390"></a>1390             <strong class="reserved">int</strong> dstLower = startIndex;
<a id="L1391" name="L1391"></a>1391             <strong class="reserved">int</strong> dstUpper = dstLower + len - 1;
<a id="L1392" name="L1392"></a>1392             <strong class="reserved">int</strong> srcUpper = len - 1;
<a id="L1393" name="L1393"></a>1393             container[dstLower] = suffix[0];
<a id="L1394" name="L1394"></a>1394             container[dstUpper] = suffix[srcUpper];
<a id="L1395" name="L1395"></a>1395 
<a id="L1396" name="L1396"></a>1396             <strong class="reserved">if</strong> (len &gt; 2)
<a id="L1397" name="L1397"></a>1397                 container[++dstLower] = suffix[1];
<a id="L1398" name="L1398"></a>1398             <strong class="reserved">if</strong> (len == 4)
<a id="L1399" name="L1399"></a>1399                 container[--dstUpper] = suffix[2];
<a id="L1400" name="L1400"></a>1400         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L1401" name="L1401"></a>1401             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(suffix, 0, container, startIndex, len);
<a id="L1402" name="L1402"></a>1402 
<a id="L1403" name="L1403"></a>1403         fastPathData.lastFreeIndex += len;
<a id="L1404" name="L1404"></a>1404     <em class="brace">}</em>
<a id="L1405" name="L1405"></a>1405 
<div class="comment">
      Converts digit chars from <code>digitsBuffer</code> to current locale.
      Must be called before adding affixes since we refer to
      <code>fastPathData.firstUsedIndex</code> and <code>fastPathData.lastFreeIndex</code>,
      and do not support affixes (for speed reason).
      We loop backward starting from last used index in <code>fastPathData</code>.
      @param digitsBuffer The char array container where the digits are stored.</div>
<a id="L1417" name="L1417"></a>1417     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1528" title="Referred from 1528 in src/java/text/DecimalFormat.java.">localizeDigits</a>(<strong class="reserved">char</strong>[] digitsBuffer) <em class="brace">{</em>
<a id="L1418" name="L1418"></a>1418 
<a id="L1419" name="L1419"></a>1419         <em class="comment">// We will localize only the digits, using the groupingSize,</em>
<a id="L1420" name="L1420"></a>1420         <em class="comment">// and taking into account fractional part.</em>
<a id="L1421" name="L1421"></a>1421 
<a id="L1422" name="L1422"></a>1422         <em class="comment">// First take into account fractional part.</em>
<a id="L1423" name="L1423"></a>1423         <strong class="reserved">int</strong> digitsCounter =
<a id="L1424" name="L1424"></a>1424             fastPathData.lastFreeIndex - fastPathData.fractionalFirstIndex;
<a id="L1425" name="L1425"></a>1425 
<a id="L1426" name="L1426"></a>1426         <em class="comment">// The case when there is no fractional digits.</em>
<a id="L1427" name="L1427"></a>1427         <strong class="reserved">if</strong> (digitsCounter &lt; 0)
<a id="L1428" name="L1428"></a>1428             digitsCounter = groupingSize;
<a id="L1429" name="L1429"></a>1429 
<a id="L1430" name="L1430"></a>1430         <em class="comment">// Only the digits remains to localize.</em>
<a id="L1431" name="L1431"></a>1431         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = fastPathData.lastFreeIndex - 1;
<a id="L1432" name="L1432"></a>1432              <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &gt;= fastPathData.firstUsedIndex;
<a id="L1433" name="L1433"></a>1433              <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>--) <em class="brace">{</em>
<a id="L1434" name="L1434"></a>1434             <strong class="reserved">if</strong> (digitsCounter != 0) <em class="brace">{</em>
<a id="L1435" name="L1435"></a>1435                 <em class="comment">// This is a digit char, we must localize it.</em>
<a id="L1436" name="L1436"></a>1436                 digitsBuffer[<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>] += fastPathData.zeroDelta;
<a id="L1437" name="L1437"></a>1437                 digitsCounter--;
<a id="L1438" name="L1438"></a>1438             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1439" name="L1439"></a>1439                 <em class="comment">// Decimal separator or grouping char. Reinit counter only.</em>
<a id="L1440" name="L1440"></a>1440                 digitsCounter = groupingSize;
<a id="L1441" name="L1441"></a>1441             <em class="brace">}</em>
<a id="L1442" name="L1442"></a>1442         <em class="brace">}</em>
<a id="L1443" name="L1443"></a>1443     <em class="brace">}</em>
<a id="L1444" name="L1444"></a>1444 
<div class="comment">
      This is the main entry point for the fast-path format algorithm.
      At this point we are sure to be in the expected conditions to run it.
      This algorithm builds the formatted result and puts it in the dedicated
      <code>fastPathData.fastPathContainer</code>.
      @param d the double value to be formatted.
      @param negative Flag precising if <code>d</code> is negative.</div>
<a id="L1455" name="L1455"></a>1455     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L1584" title="Referred from 1584 in src/java/text/DecimalFormat.java.">fastDoubleFormat</a>(<strong class="reserved">double</strong> d,
<a id="L1456" name="L1456"></a>1456                                   <strong class="reserved">boolean</strong> negative) <em class="brace">{</em>
<a id="L1457" name="L1457"></a>1457 
<a id="L1458" name="L1458"></a>1458         <strong class="reserved">char</strong>[] container = fastPathData.fastPathContainer;
<a id="L1459" name="L1459"></a>1459 
<div class="comment">
          The principle of the algorithm is to :
          - Break the passed double into its integral and fractional parts
             converted into integers.
          - Then decide if rounding up must be applied or not by following
             the half-even rounding rule, first using approximated scaled
             fractional part.
          - For the difficult cases (approximated scaled fractional part
             being exactly 0.5d), we refine the rounding decision by calling
             exactRoundUp utility method that both calculates the exact roundoff
             on the approximation and takes correct rounding decision.
          - We round-up the fractional part if needed, possibly propagating the
             rounding to integral part if we meet a "all-nine" case for the
             scaled fractional part.
          - We then collect digits from the resulting integral and fractional
            parts, also setting the required grouping chars on the fly.
          - Then we localize the collected digits if needed, and
          - Finally prepend/append prefix/suffix if any is needed.</div>
<a id="L1479" name="L1479"></a>1479 
<a id="L1480" name="L1480"></a>1480         <em class="comment">// Exact integral part of d.</em>
<a id="L1481" name="L1481"></a>1481         <strong class="reserved">int</strong> integralPartAsInt = (<strong class="reserved">int</strong>) d;
<a id="L1482" name="L1482"></a>1482 
<a id="L1483" name="L1483"></a>1483         <em class="comment">// Exact fractional part of d (since we subtract it's integral part).</em>
<a id="L1484" name="L1484"></a>1484         <strong class="reserved">double</strong> exactFractionalPart = d - (<strong class="reserved">double</strong>) integralPartAsInt;
<a id="L1485" name="L1485"></a>1485 
<a id="L1486" name="L1486"></a>1486         <em class="comment">// Approximated scaled fractional part of d (due to multiplication).</em>
<a id="L1487" name="L1487"></a>1487         <strong class="reserved">double</strong> scaledFractional =
<a id="L1488" name="L1488"></a>1488             exactFractionalPart * fastPathData.fractionalScaleFactor;
<a id="L1489" name="L1489"></a>1489 
<a id="L1490" name="L1490"></a>1490         <em class="comment">// Exact integral part of scaled fractional above.</em>
<a id="L1491" name="L1491"></a>1491         <strong class="reserved">int</strong> fractionalPartAsInt = (<strong class="reserved">int</strong>) scaledFractional;
<a id="L1492" name="L1492"></a>1492 
<a id="L1493" name="L1493"></a>1493         <em class="comment">// Exact fractional part of scaled fractional above.</em>
<a id="L1494" name="L1494"></a>1494         scaledFractional = scaledFractional - (<strong class="reserved">double</strong>) fractionalPartAsInt;
<a id="L1495" name="L1495"></a>1495 
<a id="L1496" name="L1496"></a>1496         <em class="comment">// Only when scaledFractional is exactly 0.5d do we have to do exact</em>
<a id="L1497" name="L1497"></a>1497         <em class="comment">// calculations and take fine-grained rounding decision, since</em>
<a id="L1498" name="L1498"></a>1498         <em class="comment">// approximated results above may lead to incorrect decision.</em>
<a id="L1499" name="L1499"></a>1499         <em class="comment">// Otherwise comparing against 0.5d (strictly greater or less) is ok.</em>
<a id="L1500" name="L1500"></a>1500         <strong class="reserved">boolean</strong> roundItUp = <strong class="reserved">false</strong>;
<a id="L1501" name="L1501"></a>1501         <strong class="reserved">if</strong> (scaledFractional &gt;= 0.5d) <em class="brace">{</em>
<a id="L1502" name="L1502"></a>1502             <strong class="reserved">if</strong> (scaledFractional == 0.5d)
<a id="L1503" name="L1503"></a>1503                 <em class="comment">// Rounding need fine-grained decision.</em>
<a id="L1504" name="L1504"></a>1504                 roundItUp = <a href="../S/2458.html#L1104" title="Defined at 1104 in src/java/text/DecimalFormat.java.">exactRoundUp</a>(exactFractionalPart, fractionalPartAsInt);
<a id="L1505" name="L1505"></a>1505             <strong class="reserved">else</strong>
<a id="L1506" name="L1506"></a>1506                 roundItUp = <strong class="reserved">true</strong>;
<a id="L1507" name="L1507"></a>1507 
<a id="L1508" name="L1508"></a>1508             <strong class="reserved">if</strong> (roundItUp) <em class="brace">{</em>
<a id="L1509" name="L1509"></a>1509                 <em class="comment">// Rounds up both fractional part (and also integral if needed).</em>
<a id="L1510" name="L1510"></a>1510                 <strong class="reserved">if</strong> (fractionalPartAsInt &lt; fastPathData.fractionalMaxIntBound) <em class="brace">{</em>
<a id="L1511" name="L1511"></a>1511                     fractionalPartAsInt++;
<a id="L1512" name="L1512"></a>1512                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1513" name="L1513"></a>1513                     <em class="comment">// Propagates rounding to integral part since "all nines" case.</em>
<a id="L1514" name="L1514"></a>1514                     fractionalPartAsInt = 0;
<a id="L1515" name="L1515"></a>1515                     integralPartAsInt++;
<a id="L1516" name="L1516"></a>1516                 <em class="brace">}</em>
<a id="L1517" name="L1517"></a>1517             <em class="brace">}</em>
<a id="L1518" name="L1518"></a>1518         <em class="brace">}</em>
<a id="L1519" name="L1519"></a>1519 
<a id="L1520" name="L1520"></a>1520         <em class="comment">// Collecting digits.</em>
<a id="L1521" name="L1521"></a>1521         <a href="../S/2458.html#L1279" title="Defined at 1279 in src/java/text/DecimalFormat.java.">collectFractionalDigits</a>(fractionalPartAsInt, container,
<a id="L1522" name="L1522"></a>1522                                 fastPathData.fractionalFirstIndex);
<a id="L1523" name="L1523"></a>1523         <a href="../S/2458.html#L1237" title="Defined at 1237 in src/java/text/DecimalFormat.java.">collectIntegralDigits</a>(integralPartAsInt, container,
<a id="L1524" name="L1524"></a>1524                               fastPathData.integralLastIndex);
<a id="L1525" name="L1525"></a>1525 
<a id="L1526" name="L1526"></a>1526         <em class="comment">// Localizing digits.</em>
<a id="L1527" name="L1527"></a>1527         <strong class="reserved">if</strong> (fastPathData.zeroDelta != 0)
<a id="L1528" name="L1528"></a>1528             <a href="../S/2458.html#L1417" title="Defined at 1417 in src/java/text/DecimalFormat.java.">localizeDigits</a>(container);
<a id="L1529" name="L1529"></a>1529 
<a id="L1530" name="L1530"></a>1530         <em class="comment">// Adding prefix and suffix.</em>
<a id="L1531" name="L1531"></a>1531         <strong class="reserved">if</strong> (negative) <em class="brace">{</em>
<a id="L1532" name="L1532"></a>1532             <strong class="reserved">if</strong> (fastPathData.negativeAffixesRequired)
<a id="L1533" name="L1533"></a>1533                 <a href="../S/2458.html#L1321" title="Defined at 1321 in src/java/text/DecimalFormat.java.">addAffixes</a>(container,
<a id="L1534" name="L1534"></a>1534                            fastPathData.charsNegativePrefix,
<a id="L1535" name="L1535"></a>1535                            fastPathData.charsNegativeSuffix);
<a id="L1536" name="L1536"></a>1536         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (fastPathData.positiveAffixesRequired)
<a id="L1537" name="L1537"></a>1537             <a href="../S/2458.html#L1321" title="Defined at 1321 in src/java/text/DecimalFormat.java.">addAffixes</a>(container,
<a id="L1538" name="L1538"></a>1538                        fastPathData.charsPositivePrefix,
<a id="L1539" name="L1539"></a>1539                        fastPathData.charsPositiveSuffix);
<a id="L1540" name="L1540"></a>1540     <em class="brace">}</em>
<a id="L1541" name="L1541"></a>1541 
<div class="comment">
      A fast-path shortcut of format(double) to be called by NumberFormat, or by
      format(double, ...) public methods.
      If instance can be applied fast-path and passed double is not NaN or
      Infinity, is in the integer range, we call <code>fastDoubleFormat</code>
      after changing <code>d</code> to its positive value if necessary.
      Otherwise returns null by convention since fast-path can't be exercized.
      @param d The double value to be formatted
      @return the formatted result for <code>d</code> as a string.</div>
<a id="L1556" name="L1556"></a>1556     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14245.html" title="Multiple referred from 2 places.">fastFormat</a>(<strong class="reserved">double</strong> d) <em class="brace">{</em>
<a id="L1557" name="L1557"></a>1557         <em class="comment">// (Re-)Evaluates fast-path status if needed.</em>
<a id="L1558" name="L1558"></a>1558         <strong class="reserved">if</strong> (fastPathCheckNeeded)
<a id="L1559" name="L1559"></a>1559             <a href="../S/2458.html#L971" title="Defined at 971 in src/java/text/DecimalFormat.java.">checkAndSetFastPathStatus</a>();
<a id="L1560" name="L1560"></a>1560 
<a id="L1561" name="L1561"></a>1561         <strong class="reserved">if</strong> (!isFastPath )
<a id="L1562" name="L1562"></a>1562             <em class="comment">// DecimalFormat instance is not in a fast-path state.</em>
<a id="L1563" name="L1563"></a>1563             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1564" name="L1564"></a>1564 
<a id="L1565" name="L1565"></a>1565         <strong class="reserved">if</strong> (!<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/25559.html" title="Multiple defined in 2 places.">isFinite</a>(d))
<a id="L1566" name="L1566"></a>1566             <em class="comment">// Should not use fast-path for Infinity and NaN.</em>
<a id="L1567" name="L1567"></a>1567             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1568" name="L1568"></a>1568 
<a id="L1569" name="L1569"></a>1569         <em class="comment">// Extracts and records sign of double value, possibly changing it</em>
<a id="L1570" name="L1570"></a>1570         <em class="comment">// to a positive one, before calling fastDoubleFormat().</em>
<a id="L1571" name="L1571"></a>1571         <strong class="reserved">boolean</strong> negative = <strong class="reserved">false</strong>;
<a id="L1572" name="L1572"></a>1572         <strong class="reserved">if</strong> (d &lt; 0.0d) <em class="brace">{</em>
<a id="L1573" name="L1573"></a>1573             negative = <strong class="reserved">true</strong>;
<a id="L1574" name="L1574"></a>1574             d = -d;
<a id="L1575" name="L1575"></a>1575         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (d == 0.0d) <em class="brace">{</em>
<a id="L1576" name="L1576"></a>1576             negative = (<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/13520.html" title="Multiple defined in 4 places.">copySign</a>(1.0d, d) == -1.0d);
<a id="L1577" name="L1577"></a>1577             d = +0.0d;
<a id="L1578" name="L1578"></a>1578         <em class="brace">}</em>
<a id="L1579" name="L1579"></a>1579 
<a id="L1580" name="L1580"></a>1580         <strong class="reserved">if</strong> (d &gt; MAX_INT_AS_DOUBLE)
<a id="L1581" name="L1581"></a>1581             <em class="comment">// Filters out values that are outside expected fast-path range</em>
<a id="L1582" name="L1582"></a>1582             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1583" name="L1583"></a>1583         <strong class="reserved">else</strong>
<a id="L1584" name="L1584"></a>1584             <a href="../S/2458.html#L1455" title="Defined at 1455 in src/java/text/DecimalFormat.java.">fastDoubleFormat</a>(d, negative);
<a id="L1585" name="L1585"></a>1585 
<a id="L1586" name="L1586"></a>1586         <em class="comment">// Returns a new string from updated fastPathContainer.</em>
<a id="L1587" name="L1587"></a>1587         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>(fastPathData.fastPathContainer,
<a id="L1588" name="L1588"></a>1588                           fastPathData.firstUsedIndex,
<a id="L1589" name="L1589"></a>1589                           fastPathData.lastFreeIndex - fastPathData.firstUsedIndex);
<a id="L1590" name="L1590"></a>1590 
<a id="L1591" name="L1591"></a>1591     <em class="brace">}</em>
<a id="L1592" name="L1592"></a>1592 
<a id="L1593" name="L1593"></a>1593     <em class="comment">// ======== End fast-path formating logic for double =========================</em>
<a id="L1594" name="L1594"></a>1594 
<div class="comment">
      Complete the formatting of a finite number.  On entry, the digitList must
      be filled in with the correct digits.</div>
<a id="L1599" name="L1599"></a>1599     <strong class="reserved">private</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../R/29010.html" title="Multiple referred from 7 places.">subformat</a>(<a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, <a href="../S/2459.html#L376" title="Defined at 376 in src/java/text/Format.java.">FieldDelegate</a> delegate,
<a id="L1600" name="L1600"></a>1600                                    <strong class="reserved">boolean</strong> <a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>, <strong class="reserved">boolean</strong> <a href="../S/1038.html#L4559" title="Defined at 4559 in src/java/util/Formatter.java.">isInteger</a>,
<a id="L1601" name="L1601"></a>1601                                    <strong class="reserved">int</strong> maxIntDigits, <strong class="reserved">int</strong> minIntDigits,
<a id="L1602" name="L1602"></a>1602                                    <strong class="reserved">int</strong> maxFraDigits, <strong class="reserved">int</strong> minFraDigits) <em class="brace">{</em>
<a id="L1603" name="L1603"></a>1603         <em class="comment">// NOTE: This isn't required anymore because DigitList takes care of this.</em>
<a id="L1604" name="L1604"></a>1604         <em class="comment">//</em>
<a id="L1605" name="L1605"></a>1605         <em class="comment">//  // The negative of the exponent represents the number of leading</em>
<a id="L1606" name="L1606"></a>1606         <em class="comment">//  // zeros between the decimal and the first non-zero digit, for</em>
<a id="L1607" name="L1607"></a>1607         <em class="comment">//  // a value &lt; 0.1 (e.g., for 0.00123, -fExponent == 2).  If this</em>
<a id="L1608" name="L1608"></a>1608         <em class="comment">//  // is more than the maximum fraction digits, then we have an underflow</em>
<a id="L1609" name="L1609"></a>1609         <em class="comment">//  // for the printed representation.  We recognize this here and set</em>
<a id="L1610" name="L1610"></a>1610         <em class="comment">//  // the DigitList representation to zero in this situation.</em>
<a id="L1611" name="L1611"></a>1611         <em class="comment">//</em>
<a id="L1612" name="L1612"></a>1612         <em class="comment">//  if (-digitList.decimalAt &gt;= getMaximumFractionDigits())</em>
<a id="L1613" name="L1613"></a>1613         <em class="comment">//  {</em>
<a id="L1614" name="L1614"></a>1614         <em class="comment">//      digitList.count = 0;</em>
<a id="L1615" name="L1615"></a>1615         <em class="comment">//  }</em>
<a id="L1616" name="L1616"></a>1616 
<a id="L1617" name="L1617"></a>1617         <strong class="reserved">char</strong> <a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a> = symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>();
<a id="L1618" name="L1618"></a>1618         <strong class="reserved">int</strong> zeroDelta = <a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a> - '0'; <em class="comment">// '0' is the DigitList representation of zero</em>
<a id="L1619" name="L1619"></a>1619         <strong class="reserved">char</strong> grouping = symbols.<a href="../S/2462.html#L211" title="Defined at 211 in src/java/text/DecimalFormatSymbols.java.">getGroupingSeparator</a>();
<a id="L1620" name="L1620"></a>1620         <strong class="reserved">char</strong> decimal = isCurrencyFormat ?
<a id="L1621" name="L1621"></a>1621             symbols.<a href="../S/2462.html#L483" title="Defined at 483 in src/java/text/DecimalFormatSymbols.java.">getMonetaryDecimalSeparator</a>() :
<a id="L1622" name="L1622"></a>1622             symbols.<a href="../D/18238.html" title="Multiple defined in 3 places.">getDecimalSeparator</a>();
<a id="L1623" name="L1623"></a>1623 
<div class="comment">
 Per bug 4147706, DecimalFormat must respect the sign of numbers which
          format as zero.  This allows sensible computations and preserves
          relations such as signum(1/x) = signum(x), where x is +Infinity or
          -Infinity.  Prior to this fix, we always formatted zero values as if
          they were positive.  Liu 7/6/98.</div>
<a id="L1630" name="L1630"></a>1630         <strong class="reserved">if</strong> (digitList.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>()) <em class="brace">{</em>
<a id="L1631" name="L1631"></a>1631             digitList.decimalAt = 0; <em class="comment">// Normalize</em>
<a id="L1632" name="L1632"></a>1632         <em class="brace">}</em>
<a id="L1633" name="L1633"></a>1633 
<a id="L1634" name="L1634"></a>1634         <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L1635" name="L1635"></a>1635             <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, negativePrefix, delegate,
<a id="L1636" name="L1636"></a>1636                    <a href="../S/2458.html#L2455" title="Defined at 2455 in src/java/text/DecimalFormat.java.">getNegativePrefixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L1637" name="L1637"></a>1637         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1638" name="L1638"></a>1638             <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, positivePrefix, delegate,
<a id="L1639" name="L1639"></a>1639                    <a href="../S/2458.html#L2414" title="Defined at 2414 in src/java/text/DecimalFormat.java.">getPositivePrefixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L1640" name="L1640"></a>1640         <em class="brace">}</em>
<a id="L1641" name="L1641"></a>1641 
<a id="L1642" name="L1642"></a>1642         <strong class="reserved">if</strong> (useExponentialNotation) <em class="brace">{</em>
<a id="L1643" name="L1643"></a>1643             <strong class="reserved">int</strong> iFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1644" name="L1644"></a>1644             <strong class="reserved">int</strong> iFieldEnd = -1;
<a id="L1645" name="L1645"></a>1645             <strong class="reserved">int</strong> fFieldStart = -1;
<a id="L1646" name="L1646"></a>1646 
<a id="L1647" name="L1647"></a>1647             <em class="comment">// Minimum integer digits are handled in exponential format by</em>
<a id="L1648" name="L1648"></a>1648             <em class="comment">// adjusting the exponent.  For example, 0.01234 with 3 minimum</em>
<a id="L1649" name="L1649"></a>1649             <em class="comment">// integer digits is "123.4E-4".</em>
<a id="L1650" name="L1650"></a>1650 
<a id="L1651" name="L1651"></a>1651             <em class="comment">// Maximum integer digits are interpreted as indicating the</em>
<a id="L1652" name="L1652"></a>1652             <em class="comment">// repeating range.  This is useful for engineering notation, in</em>
<a id="L1653" name="L1653"></a>1653             <em class="comment">// which the exponent is restricted to a multiple of 3.  For</em>
<a id="L1654" name="L1654"></a>1654             <em class="comment">// example, 0.01234 with 3 maximum integer digits is "12.34e-3".</em>
<a id="L1655" name="L1655"></a>1655             <em class="comment">// If maximum integer digits are &gt; 1 and are larger than</em>
<a id="L1656" name="L1656"></a>1656             <em class="comment">// minimum integer digits, then minimum integer digits are</em>
<a id="L1657" name="L1657"></a>1657             <em class="comment">// ignored.</em>
<a id="L1658" name="L1658"></a>1658             <strong class="reserved">int</strong> <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = digitList.decimalAt;
<a id="L1659" name="L1659"></a>1659             <strong class="reserved">int</strong> <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a> = maxIntDigits;
<a id="L1660" name="L1660"></a>1660             <strong class="reserved">int</strong> minimumIntegerDigits = minIntDigits;
<a id="L1661" name="L1661"></a>1661             <strong class="reserved">if</strong> (<a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a> &gt; 1 &amp;&amp; <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a> &gt; minIntDigits) <em class="brace">{</em>
<a id="L1662" name="L1662"></a>1662                 <em class="comment">// A repeating range is defined; adjust to it as follows.</em>
<a id="L1663" name="L1663"></a>1663                 <em class="comment">// If repeat == 3, we have 6,5,4=&gt;3; 3,2,1=&gt;0; 0,-1,-2=&gt;-3;</em>
<a id="L1664" name="L1664"></a>1664                 <em class="comment">// -3,-4,-5=&gt;-6, etc. This takes into account that the</em>
<a id="L1665" name="L1665"></a>1665                 <em class="comment">// exponent we have here is off by one from what we expect;</em>
<a id="L1666" name="L1666"></a>1666                 <em class="comment">// it is for the format 0.MMMMMx10^n.</em>
<a id="L1667" name="L1667"></a>1667                 <strong class="reserved">if</strong> (<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> &gt;= 1) <em class="brace">{</em>
<a id="L1668" name="L1668"></a>1668                     <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = ((<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> - 1) / <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a>) * <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a>;
<a id="L1669" name="L1669"></a>1669                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1670" name="L1670"></a>1670                     <em class="comment">// integer division rounds towards 0</em>
<a id="L1671" name="L1671"></a>1671                     <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = ((<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> - <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a>) / <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a>) * <a href="../S/6777.html#L899" title="Defined at 899 in src/com/sun/imageio/plugins/png/PNGMetadata.java.">repeat</a>;
<a id="L1672" name="L1672"></a>1672                 <em class="brace">}</em>
<a id="L1673" name="L1673"></a>1673                 minimumIntegerDigits = 1;
<a id="L1674" name="L1674"></a>1674             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1675" name="L1675"></a>1675                 <em class="comment">// No repeating range is defined; use minimum integer digits.</em>
<a id="L1676" name="L1676"></a>1676                 <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> -= minimumIntegerDigits;
<a id="L1677" name="L1677"></a>1677             <em class="brace">}</em>
<a id="L1678" name="L1678"></a>1678 
<a id="L1679" name="L1679"></a>1679             <em class="comment">// We now output a minimum number of digits, and more if there</em>
<a id="L1680" name="L1680"></a>1680             <em class="comment">// are more digits, up to the maximum number of digits.  We</em>
<a id="L1681" name="L1681"></a>1681             <em class="comment">// place the decimal point after the "integer" digits, which</em>
<a id="L1682" name="L1682"></a>1682             <em class="comment">// are the first (decimalAt - exponent) digits.</em>
<a id="L1683" name="L1683"></a>1683             <strong class="reserved">int</strong> minimumDigits = minIntDigits + minFraDigits;
<a id="L1684" name="L1684"></a>1684             <strong class="reserved">if</strong> (minimumDigits &lt; 0) <em class="brace">{</em>    <em class="comment">// overflow?</em>
<a id="L1685" name="L1685"></a>1685                 minimumDigits = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L1686" name="L1686"></a>1686             <em class="brace">}</em>
<a id="L1687" name="L1687"></a>1687 
<a id="L1688" name="L1688"></a>1688             <em class="comment">// The number of integer digits is handled specially if the number</em>
<a id="L1689" name="L1689"></a>1689             <em class="comment">// is zero, since then there may be no digits.</em>
<a id="L1690" name="L1690"></a>1690             <strong class="reserved">int</strong> integerDigits = digitList.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>() ? minimumIntegerDigits :
<a id="L1691" name="L1691"></a>1691                     digitList.decimalAt - <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>;
<a id="L1692" name="L1692"></a>1692             <strong class="reserved">if</strong> (minimumDigits &lt; integerDigits) <em class="brace">{</em>
<a id="L1693" name="L1693"></a>1693                 minimumDigits = integerDigits;
<a id="L1694" name="L1694"></a>1694             <em class="brace">}</em>
<a id="L1695" name="L1695"></a>1695             <strong class="reserved">int</strong> totalDigits = digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L1696" name="L1696"></a>1696             <strong class="reserved">if</strong> (minimumDigits &gt; totalDigits) <em class="brace">{</em>
<a id="L1697" name="L1697"></a>1697                 totalDigits = minimumDigits;
<a id="L1698" name="L1698"></a>1698             <em class="brace">}</em>
<a id="L1699" name="L1699"></a>1699             <strong class="reserved">boolean</strong> addedDecimalSeparator = <strong class="reserved">false</strong>;
<a id="L1700" name="L1700"></a>1700 
<a id="L1701" name="L1701"></a>1701             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;totalDigits; ++i) <em class="brace">{</em>
<a id="L1702" name="L1702"></a>1702                 <strong class="reserved">if</strong> (i == integerDigits) <em class="brace">{</em>
<a id="L1703" name="L1703"></a>1703                     <em class="comment">// Record field information for caller.</em>
<a id="L1704" name="L1704"></a>1704                     iFieldEnd = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1705" name="L1705"></a>1705 
<a id="L1706" name="L1706"></a>1706                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(decimal);
<a id="L1707" name="L1707"></a>1707                     addedDecimalSeparator = <strong class="reserved">true</strong>;
<a id="L1708" name="L1708"></a>1708 
<a id="L1709" name="L1709"></a>1709                     <em class="comment">// Record field information for caller.</em>
<a id="L1710" name="L1710"></a>1710                     fFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1711" name="L1711"></a>1711                 <em class="brace">}</em>
<a id="L1712" name="L1712"></a>1712                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((i &lt; digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) ?
<a id="L1713" name="L1713"></a>1713                               (<strong class="reserved">char</strong>)(digitList.<a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>[i] + zeroDelta) :
<a id="L1714" name="L1714"></a>1714                               <a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1715" name="L1715"></a>1715             <em class="brace">}</em>
<a id="L1716" name="L1716"></a>1716 
<a id="L1717" name="L1717"></a>1717             <strong class="reserved">if</strong> (decimalSeparatorAlwaysShown &amp;&amp; totalDigits == integerDigits) <em class="brace">{</em>
<a id="L1718" name="L1718"></a>1718                 <em class="comment">// Record field information for caller.</em>
<a id="L1719" name="L1719"></a>1719                 iFieldEnd = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1720" name="L1720"></a>1720 
<a id="L1721" name="L1721"></a>1721                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(decimal);
<a id="L1722" name="L1722"></a>1722                 addedDecimalSeparator = <strong class="reserved">true</strong>;
<a id="L1723" name="L1723"></a>1723 
<a id="L1724" name="L1724"></a>1724                 <em class="comment">// Record field information for caller.</em>
<a id="L1725" name="L1725"></a>1725                 fFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1726" name="L1726"></a>1726             <em class="brace">}</em>
<a id="L1727" name="L1727"></a>1727 
<a id="L1728" name="L1728"></a>1728             <em class="comment">// Record field information</em>
<a id="L1729" name="L1729"></a>1729             <strong class="reserved">if</strong> (iFieldEnd == -1) <em class="brace">{</em>
<a id="L1730" name="L1730"></a>1730                 iFieldEnd = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1731" name="L1731"></a>1731             <em class="brace">}</em>
<a id="L1732" name="L1732"></a>1732             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(INTEGER_FIELD, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>,
<a id="L1733" name="L1733"></a>1733                                iFieldStart, iFieldEnd, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1734" name="L1734"></a>1734             <strong class="reserved">if</strong> (addedDecimalSeparator) <em class="brace">{</em>
<a id="L1735" name="L1735"></a>1735                 delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.DECIMAL_SEPARATOR,
<a id="L1736" name="L1736"></a>1736                                    <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.DECIMAL_SEPARATOR,
<a id="L1737" name="L1737"></a>1737                                    iFieldEnd, fFieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1738" name="L1738"></a>1738             <em class="brace">}</em>
<a id="L1739" name="L1739"></a>1739             <strong class="reserved">if</strong> (fFieldStart == -1) <em class="brace">{</em>
<a id="L1740" name="L1740"></a>1740                 fFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1741" name="L1741"></a>1741             <em class="brace">}</em>
<a id="L1742" name="L1742"></a>1742             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(FRACTION_FIELD, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.FRACTION, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.FRACTION,
<a id="L1743" name="L1743"></a>1743                                fFieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1744" name="L1744"></a>1744 
<a id="L1745" name="L1745"></a>1745             <em class="comment">// The exponent is output using the pattern-specified minimum</em>
<a id="L1746" name="L1746"></a>1746             <em class="comment">// exponent digits.  There is no maximum limit to the exponent</em>
<a id="L1747" name="L1747"></a>1747             <em class="comment">// digits, since truncating the exponent would result in an</em>
<a id="L1748" name="L1748"></a>1748             <em class="comment">// unacceptable inaccuracy.</em>
<a id="L1749" name="L1749"></a>1749             <strong class="reserved">int</strong> fieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1750" name="L1750"></a>1750 
<a id="L1751" name="L1751"></a>1751             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(symbols.<a href="../S/2462.html#L518" title="Defined at 518 in src/java/text/DecimalFormatSymbols.java.">getExponentSeparator</a>());
<a id="L1752" name="L1752"></a>1752 
<a id="L1753" name="L1753"></a>1753             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.EXPONENT_SYMBOL, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.EXPONENT_SYMBOL,
<a id="L1754" name="L1754"></a>1754                                fieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1755" name="L1755"></a>1755 
<a id="L1756" name="L1756"></a>1756             <em class="comment">// For zero values, we force the exponent to zero.  We</em>
<a id="L1757" name="L1757"></a>1757             <em class="comment">// must do this here, and not earlier, because the value</em>
<a id="L1758" name="L1758"></a>1758             <em class="comment">// is used to determine integer digit count above.</em>
<a id="L1759" name="L1759"></a>1759             <strong class="reserved">if</strong> (digitList.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>()) <em class="brace">{</em>
<a id="L1760" name="L1760"></a>1760                 <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = 0;
<a id="L1761" name="L1761"></a>1761             <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762 
<a id="L1763" name="L1763"></a>1763             <strong class="reserved">boolean</strong> negativeExponent = <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> &lt; 0;
<a id="L1764" name="L1764"></a>1764             <strong class="reserved">if</strong> (negativeExponent) <em class="brace">{</em>
<a id="L1765" name="L1765"></a>1765                 <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = -<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>;
<a id="L1766" name="L1766"></a>1766                 fieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1767" name="L1767"></a>1767                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>());
<a id="L1768" name="L1768"></a>1768                 delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.EXPONENT_SIGN, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.EXPONENT_SIGN,
<a id="L1769" name="L1769"></a>1769                                    fieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1770" name="L1770"></a>1770             <em class="brace">}</em>
<a id="L1771" name="L1771"></a>1771             digitList.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(negativeExponent, <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>);
<a id="L1772" name="L1772"></a>1772 
<a id="L1773" name="L1773"></a>1773             <strong class="reserved">int</strong> eFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1774" name="L1774"></a>1774 
<a id="L1775" name="L1775"></a>1775             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=digitList.decimalAt; i&lt;minExponentDigits; ++i) <em class="brace">{</em>
<a id="L1776" name="L1776"></a>1776                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1777" name="L1777"></a>1777             <em class="brace">}</em>
<a id="L1778" name="L1778"></a>1778             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;digitList.decimalAt; ++i) <em class="brace">{</em>
<a id="L1779" name="L1779"></a>1779                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((i &lt; digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) ?
<a id="L1780" name="L1780"></a>1780                           (<strong class="reserved">char</strong>)(digitList.<a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>[i] + zeroDelta) : <a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1781" name="L1781"></a>1781             <em class="brace">}</em>
<a id="L1782" name="L1782"></a>1782             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.EXPONENT, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.EXPONENT, eFieldStart,
<a id="L1783" name="L1783"></a>1783                                <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1784" name="L1784"></a>1784         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1785" name="L1785"></a>1785             <strong class="reserved">int</strong> iFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1786" name="L1786"></a>1786 
<a id="L1787" name="L1787"></a>1787             <em class="comment">// Output the integer portion.  Here 'count' is the total</em>
<a id="L1788" name="L1788"></a>1788             <em class="comment">// number of integer digits we will display, including both</em>
<a id="L1789" name="L1789"></a>1789             <em class="comment">// leading zeros required to satisfy getMinimumIntegerDigits,</em>
<a id="L1790" name="L1790"></a>1790             <em class="comment">// and actual digits present in the number.</em>
<a id="L1791" name="L1791"></a>1791             <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = minIntDigits;
<a id="L1792" name="L1792"></a>1792             <strong class="reserved">int</strong> digitIndex = 0; <em class="comment">// Index into digitList.fDigits[]</em>
<a id="L1793" name="L1793"></a>1793             <strong class="reserved">if</strong> (digitList.decimalAt &gt; 0 &amp;&amp; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; digitList.decimalAt) <em class="brace">{</em>
<a id="L1794" name="L1794"></a>1794                 <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = digitList.decimalAt;
<a id="L1795" name="L1795"></a>1795             <em class="brace">}</em>
<a id="L1796" name="L1796"></a>1796 
<a id="L1797" name="L1797"></a>1797             <em class="comment">// Handle the case where getMaximumIntegerDigits() is smaller</em>
<a id="L1798" name="L1798"></a>1798             <em class="comment">// than the real number of integer digits.  If this is so, we</em>
<a id="L1799" name="L1799"></a>1799             <em class="comment">// output the least significant max integer digits.  For example,</em>
<a id="L1800" name="L1800"></a>1800             <em class="comment">// the value 1997 printed with 2 max integer digits is just "97".</em>
<a id="L1801" name="L1801"></a>1801             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; maxIntDigits) <em class="brace">{</em>
<a id="L1802" name="L1802"></a>1802                 <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = maxIntDigits;
<a id="L1803" name="L1803"></a>1803                 digitIndex = digitList.decimalAt - <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L1804" name="L1804"></a>1804             <em class="brace">}</em>
<a id="L1805" name="L1805"></a>1805 
<a id="L1806" name="L1806"></a>1806             <strong class="reserved">int</strong> sizeBeforeIntegerPart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1807" name="L1807"></a>1807             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>-1; i&gt;=0; --i) <em class="brace">{</em>
<a id="L1808" name="L1808"></a>1808                 <strong class="reserved">if</strong> (i &lt; digitList.decimalAt &amp;&amp; digitIndex &lt; digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L1809" name="L1809"></a>1809                     <em class="comment">// Output a real digit</em>
<a id="L1810" name="L1810"></a>1810                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>)(digitList.<a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>[digitIndex++] + zeroDelta));
<a id="L1811" name="L1811"></a>1811                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1812" name="L1812"></a>1812                     <em class="comment">// Output a leading zero</em>
<a id="L1813" name="L1813"></a>1813                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1814" name="L1814"></a>1814                 <em class="brace">}</em>
<a id="L1815" name="L1815"></a>1815 
<a id="L1816" name="L1816"></a>1816                 <em class="comment">// Output grouping separator if necessary.  Don't output a</em>
<a id="L1817" name="L1817"></a>1817                 <em class="comment">// grouping separator if i==0 though; that's at the end of</em>
<a id="L1818" name="L1818"></a>1818                 <em class="comment">// the integer part.</em>
<a id="L1819" name="L1819"></a>1819                 <strong class="reserved">if</strong> (<a href="../S/2488.html#L647" title="Defined at 647 in src/java/text/NumberFormat.java.">isGroupingUsed</a>() &amp;&amp; i&gt;0 &amp;&amp; (groupingSize != 0) &amp;&amp;
<a id="L1820" name="L1820"></a>1820                     (i % groupingSize == 0)) <em class="brace">{</em>
<a id="L1821" name="L1821"></a>1821                     <strong class="reserved">int</strong> gStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1822" name="L1822"></a>1822                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(grouping);
<a id="L1823" name="L1823"></a>1823                     delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.GROUPING_SEPARATOR,
<a id="L1824" name="L1824"></a>1824                                        <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.GROUPING_SEPARATOR, gStart,
<a id="L1825" name="L1825"></a>1825                                        <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1826" name="L1826"></a>1826                 <em class="brace">}</em>
<a id="L1827" name="L1827"></a>1827             <em class="brace">}</em>
<a id="L1828" name="L1828"></a>1828 
<a id="L1829" name="L1829"></a>1829             <em class="comment">// Determine whether or not there are any printable fractional</em>
<a id="L1830" name="L1830"></a>1830             <em class="comment">// digits.  If we've used up the digits we know there aren't.</em>
<a id="L1831" name="L1831"></a>1831             <strong class="reserved">boolean</strong> fractionPresent = (minFraDigits &gt; 0) ||
<a id="L1832" name="L1832"></a>1832                 (!<a href="../S/1038.html#L4559" title="Defined at 4559 in src/java/util/Formatter.java.">isInteger</a> &amp;&amp; digitIndex &lt; digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L1833" name="L1833"></a>1833 
<a id="L1834" name="L1834"></a>1834             <em class="comment">// If there is no fraction present, and we haven't printed any</em>
<a id="L1835" name="L1835"></a>1835             <em class="comment">// integer digits, then print a zero.  Otherwise we won't print</em>
<a id="L1836" name="L1836"></a>1836             <em class="comment">// _any_ digits, and we won't be able to parse this string.</em>
<a id="L1837" name="L1837"></a>1837             <strong class="reserved">if</strong> (!fractionPresent &amp;&amp; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == sizeBeforeIntegerPart) <em class="brace">{</em>
<a id="L1838" name="L1838"></a>1838                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1839" name="L1839"></a>1839             <em class="brace">}</em>
<a id="L1840" name="L1840"></a>1840 
<a id="L1841" name="L1841"></a>1841             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(INTEGER_FIELD, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.<a href="../S/2603.html#L51" title="Defined at 51 in src/java/sql/JDBCType.java.">INTEGER</a>,
<a id="L1842" name="L1842"></a>1842                                iFieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1843" name="L1843"></a>1843 
<a id="L1844" name="L1844"></a>1844             <em class="comment">// Output the decimal separator if we always do so.</em>
<a id="L1845" name="L1845"></a>1845             <strong class="reserved">int</strong> sStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1846" name="L1846"></a>1846             <strong class="reserved">if</strong> (decimalSeparatorAlwaysShown || fractionPresent) <em class="brace">{</em>
<a id="L1847" name="L1847"></a>1847                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(decimal);
<a id="L1848" name="L1848"></a>1848             <em class="brace">}</em>
<a id="L1849" name="L1849"></a>1849 
<a id="L1850" name="L1850"></a>1850             <strong class="reserved">if</strong> (sStart != <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L1851" name="L1851"></a>1851                 delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.DECIMAL_SEPARATOR,
<a id="L1852" name="L1852"></a>1852                                    <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.DECIMAL_SEPARATOR,
<a id="L1853" name="L1853"></a>1853                                    sStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1854" name="L1854"></a>1854             <em class="brace">}</em>
<a id="L1855" name="L1855"></a>1855             <strong class="reserved">int</strong> fFieldStart = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1856" name="L1856"></a>1856 
<a id="L1857" name="L1857"></a>1857             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; maxFraDigits; ++i) <em class="brace">{</em>
<a id="L1858" name="L1858"></a>1858                 <em class="comment">// Here is where we escape from the loop.  We escape if we've</em>
<a id="L1859" name="L1859"></a>1859                 <em class="comment">// output the maximum fraction digits (specified in the for</em>
<a id="L1860" name="L1860"></a>1860                 <em class="comment">// expression above).</em>
<a id="L1861" name="L1861"></a>1861                 <em class="comment">// We also stop when we've output the minimum digits and either:</em>
<a id="L1862" name="L1862"></a>1862                 <em class="comment">// we have an integer, so there is no fractional stuff to</em>
<a id="L1863" name="L1863"></a>1863                 <em class="comment">// display, or we're out of significant digits.</em>
<a id="L1864" name="L1864"></a>1864                 <strong class="reserved">if</strong> (i &gt;= minFraDigits &amp;&amp;
<a id="L1865" name="L1865"></a>1865                     (<a href="../S/1038.html#L4559" title="Defined at 4559 in src/java/util/Formatter.java.">isInteger</a> || digitIndex &gt;= digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>)) <em class="brace">{</em>
<a id="L1866" name="L1866"></a>1866                     <strong class="reserved">break</strong>;
<a id="L1867" name="L1867"></a>1867                 <em class="brace">}</em>
<a id="L1868" name="L1868"></a>1868 
<a id="L1869" name="L1869"></a>1869                 <em class="comment">// Output leading fractional zeros. These are zeros that come</em>
<a id="L1870" name="L1870"></a>1870                 <em class="comment">// after the decimal but before any significant digits. These</em>
<a id="L1871" name="L1871"></a>1871                 <em class="comment">// are only output if abs(number being formatted) &lt; 1.0.</em>
<a id="L1872" name="L1872"></a>1872                 <strong class="reserved">if</strong> (-1-i &gt; (digitList.decimalAt-1)) <em class="brace">{</em>
<a id="L1873" name="L1873"></a>1873                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1874" name="L1874"></a>1874                     <strong class="reserved">continue</strong>;
<a id="L1875" name="L1875"></a>1875                 <em class="brace">}</em>
<a id="L1876" name="L1876"></a>1876 
<a id="L1877" name="L1877"></a>1877                 <em class="comment">// Output a digit, if we have any precision left, or a</em>
<a id="L1878" name="L1878"></a>1878                 <em class="comment">// zero if we don't.  We don't want to output noise digits.</em>
<a id="L1879" name="L1879"></a>1879                 <strong class="reserved">if</strong> (!<a href="../S/1038.html#L4559" title="Defined at 4559 in src/java/util/Formatter.java.">isInteger</a> &amp;&amp; digitIndex &lt; digitList.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L1880" name="L1880"></a>1880                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>)(digitList.<a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>[digitIndex++] + zeroDelta));
<a id="L1881" name="L1881"></a>1881                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1882" name="L1882"></a>1882                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>);
<a id="L1883" name="L1883"></a>1883                 <em class="brace">}</em>
<a id="L1884" name="L1884"></a>1884             <em class="brace">}</em>
<a id="L1885" name="L1885"></a>1885 
<a id="L1886" name="L1886"></a>1886             <em class="comment">// Record field information for caller.</em>
<a id="L1887" name="L1887"></a>1887             delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(FRACTION_FIELD, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.FRACTION, <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.FRACTION,
<a id="L1888" name="L1888"></a>1888                                fFieldStart, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1889" name="L1889"></a>1889         <em class="brace">}</em>
<a id="L1890" name="L1890"></a>1890 
<a id="L1891" name="L1891"></a>1891         <strong class="reserved">if</strong> (<a href="../D/25934.html" title="Multiple defined in 6 places.">isNegative</a>) <em class="brace">{</em>
<a id="L1892" name="L1892"></a>1892             <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, negativeSuffix, delegate,
<a id="L1893" name="L1893"></a>1893                    <a href="../S/2458.html#L2537" title="Defined at 2537 in src/java/text/DecimalFormat.java.">getNegativeSuffixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L1894" name="L1894"></a>1894         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1895" name="L1895"></a>1895             <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, positiveSuffix, delegate,
<a id="L1896" name="L1896"></a>1896                    <a href="../S/2458.html#L2496" title="Defined at 2496 in src/java/text/DecimalFormat.java.">getPositiveSuffixFieldPositions</a>(), <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN);
<a id="L1897" name="L1897"></a>1897         <em class="brace">}</em>
<a id="L1898" name="L1898"></a>1898 
<a id="L1899" name="L1899"></a>1899         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1900" name="L1900"></a>1900     <em class="brace">}</em>
<a id="L1901" name="L1901"></a>1901 
<div class="comment">
      Appends the String <code>string</code> to <code>result</code>.
      <code>delegate</code> is notified of all  the
      <code>FieldPosition</code>s in <code>positions</code>.
      <p>
      If one of the <code>FieldPosition</code>s in <code>positions</code>
      identifies a <code>SIGN</code> attribute, it is mapped to
      <code>signAttribute</code>. This is used
      to map the <code>SIGN</code> attribute to the <code>EXPONENT</code>
      attribute as necessary.
      </p><p>
      This is used by <code>subformat</code> to add the prefix/suffix.</p></div>
<a id="L1915" name="L1915"></a>1915     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10189.html" title="Multiple referred from 5855 places.">append</a>(<a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>,
<a id="L1916" name="L1916"></a>1916                         <a href="../S/2459.html#L376" title="Defined at 376 in src/java/text/Format.java.">FieldDelegate</a> delegate,
<a id="L1917" name="L1917"></a>1917                         <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] positions,
<a id="L1918" name="L1918"></a>1918                         <a href="../S/2459.html#L133" title="Defined at 133 in src/java/text/Format.java.">Format</a>.<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> signAttribute) <em class="brace">{</em>
<a id="L1919" name="L1919"></a>1919         <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1920" name="L1920"></a>1920 
<a id="L1921" name="L1921"></a>1921         <strong class="reserved">if</strong> (<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L1922" name="L1922"></a>1922             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>);
<a id="L1923" name="L1923"></a>1923             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> counter = 0, <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = positions.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; counter &lt; <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>;
<a id="L1924" name="L1924"></a>1924                  counter++) <em class="brace">{</em>
<a id="L1925" name="L1925"></a>1925                 <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fp = positions[counter];
<a id="L1926" name="L1926"></a>1926                 <a href="../S/2459.html#L133" title="Defined at 133 in src/java/text/Format.java.">Format</a>.<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a> = fp.<a href="../S/2490.html#L155" title="Defined at 155 in src/java/text/FieldPosition.java.">getFieldAttribute</a>();
<a id="L1927" name="L1927"></a>1927 
<a id="L1928" name="L1928"></a>1928                 <strong class="reserved">if</strong> (<a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a> == <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN) <em class="brace">{</em>
<a id="L1929" name="L1929"></a>1929                     <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a> = signAttribute;
<a id="L1930" name="L1930"></a>1930                 <em class="brace">}</em>
<a id="L1931" name="L1931"></a>1931                 delegate.<a href="../D/16557.html" title="Multiple defined in 6 places.">formatted</a>(<a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>, <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>,
<a id="L1932" name="L1932"></a>1932                                    <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> + fp.<a href="../D/17233.html" title="Multiple defined in 6 places.">getBeginIndex</a>(),
<a id="L1933" name="L1933"></a>1933                                    <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> + fp.<a href="../D/18768.html" title="Multiple defined in 8 places.">getEndIndex</a>(), <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1934" name="L1934"></a>1934             <em class="brace">}</em>
<a id="L1935" name="L1935"></a>1935         <em class="brace">}</em>
<a id="L1936" name="L1936"></a>1936     <em class="brace">}</em>
<a id="L1937" name="L1937"></a>1937 
<div class="comment">
      Parses text from a string to produce a <code>Number</code>.
      <p>
      The method attempts to parse text starting at the index given by
      <code>pos</code>.
      If parsing succeeds, then the index of <code>pos</code> is updated
      to the index after the last character used (parsing does not necessarily
      use all characters up to the end of the string), and the parsed
      number is returned. The updated <code>pos</code> can be used to
      indicate the starting point for the next call to this method.
      If an error occurs, then the index of <code>pos</code> is not
      changed, the error index of <code>pos</code> is set to the index of
      the character where the error occurred, and null is returned.
      </p><p>
      The subclass returned depends on the value of <a href="#L2654" title="Defined at 2654.">isParseBigDecimal</a>
      as well as on the string being parsed.
      </p><ul><li>If <code>isParseBigDecimal()</code> is false (the default),
            most integer values are returned as <code>Long</code>
            objects, no matter how they are written: <code>"17"</code> and
            <code>"17.000"</code> both parse to <code>Long(17)</code>.
            Values that cannot fit into a <code>Long</code> are returned as
            <code>Double</code>s. This includes values with a fractional part,
            infinite values, <code>NaN</code>, and the value -0.0.
            <code>DecimalFormat</code> does <em>not</em> decide whether to
            return a <code>Double</code> or a <code>Long</code> based on the
            presence of a decimal separator in the source string. Doing so
            would prevent integers that overflow the mantissa of a double,
            such as <code>"-9,223,372,036,854,775,808.00"</code>, from being
            parsed accurately.
            <p>
            Callers may use the <code>Number</code> methods
            <code>doubleValue</code>, <code>longValue</code>, etc., to obtain
            the type they want.
        </p></li><li>If <code>isParseBigDecimal()</code> is true, values are returned
            as <code>BigDecimal</code> objects. The values are the ones
            constructed by {@link java.math.BigDecimal#BigDecimal(String)}
            for corresponding strings in locale-independent format. The
            special cases negative and positive infinity and NaN are returned
            as <code>Double</code> instances holding the values of the
            corresponding <code>Double</code> constants.
      </li></ul>
      <p>
      <code>DecimalFormat</code> parses all Unicode characters that represent
      decimal digits, as defined by <code>Character.digit()</code>. In
      addition, <code>DecimalFormat</code> also recognizes as digits the ten
      consecutive characters starting with the localized zero digit defined in
      the <code>DecimalFormatSymbols</code> object.
      @param text the string to be parsed
      @param pos  A <code>ParsePosition</code> object with index and error
                  index information as described above.
      @return     the parsed value, or <code>null</code> if the parse fails
      @exception  NullPointerException if <code>text</code> or
                  <code>pos</code> is null.</p></div>
<a id="L1994" name="L1994"></a>1994     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L1995" name="L1995"></a>1995     <strong class="reserved">public</strong> <a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a> <a href="../R/24493.html" title="Multiple referred from 256 places.">parse</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/2483.html#L57" title="Defined at 57 in src/java/text/ParsePosition.java.">ParsePosition</a> pos) <em class="brace">{</em>
<a id="L1996" name="L1996"></a>1996         <em class="comment">// special case NaN</em>
<a id="L1997" name="L1997"></a>1997         <strong class="reserved">if</strong> (<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(pos.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, symbols.<a href="../S/2462.html#L342" title="Defined at 342 in src/java/text/DecimalFormatSymbols.java.">getNaN</a>(), 0, symbols.<a href="../S/2462.html#L342" title="Defined at 342 in src/java/text/DecimalFormatSymbols.java.">getNaN</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>())) <em class="brace">{</em>
<a id="L1998" name="L1998"></a>1998             pos.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = pos.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + symbols.<a href="../S/2462.html#L342" title="Defined at 342 in src/java/text/DecimalFormatSymbols.java.">getNaN</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1999" name="L1999"></a>1999             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN);
<a id="L2000" name="L2000"></a>2000         <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001 
<a id="L2002" name="L2002"></a>2002         <strong class="reserved">boolean</strong>[] <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a> = <strong class="reserved">new</strong> <strong class="reserved">boolean</strong>[STATUS_LENGTH];
<a id="L2003" name="L2003"></a>2003         <strong class="reserved">if</strong> (!<a href="../S/2458.html#L2139" title="Defined at 2139 in src/java/text/DecimalFormat.java.">subparse</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, pos, positivePrefix, negativePrefix, digitList, <strong class="reserved">false</strong>, <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>)) <em class="brace">{</em>
<a id="L2004" name="L2004"></a>2004             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2005" name="L2005"></a>2005         <em class="brace">}</em>
<a id="L2006" name="L2006"></a>2006 
<a id="L2007" name="L2007"></a>2007         <em class="comment">// special case INFINITY</em>
<a id="L2008" name="L2008"></a>2008         <strong class="reserved">if</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_INFINITE]) <em class="brace">{</em>
<a id="L2009" name="L2009"></a>2009             <strong class="reserved">if</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_POSITIVE] == (multiplier &gt;= 0)) <em class="brace">{</em>
<a id="L2010" name="L2010"></a>2010                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.POSITIVE_INFINITY);
<a id="L2011" name="L2011"></a>2011             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2012" name="L2012"></a>2012                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NEGATIVE_INFINITY);
<a id="L2013" name="L2013"></a>2013             <em class="brace">}</em>
<a id="L2014" name="L2014"></a>2014         <em class="brace">}</em>
<a id="L2015" name="L2015"></a>2015 
<a id="L2016" name="L2016"></a>2016         <strong class="reserved">if</strong> (multiplier == 0) <em class="brace">{</em>
<a id="L2017" name="L2017"></a>2017             <strong class="reserved">if</strong> (digitList.<a href="../D/26552.html" title="Multiple defined in 6 places.">isZero</a>()) <em class="brace">{</em>
<a id="L2018" name="L2018"></a>2018                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN);
<a id="L2019" name="L2019"></a>2019             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_POSITIVE]) <em class="brace">{</em>
<a id="L2020" name="L2020"></a>2020                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.POSITIVE_INFINITY);
<a id="L2021" name="L2021"></a>2021             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2022" name="L2022"></a>2022                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NEGATIVE_INFINITY);
<a id="L2023" name="L2023"></a>2023             <em class="brace">}</em>
<a id="L2024" name="L2024"></a>2024         <em class="brace">}</em>
<a id="L2025" name="L2025"></a>2025 
<a id="L2026" name="L2026"></a>2026         <strong class="reserved">if</strong> (<a href="../S/2458.html#L2654" title="Defined at 2654 in src/java/text/DecimalFormat.java.">isParseBigDecimal</a>()) <em class="brace">{</em>
<a id="L2027" name="L2027"></a>2027             <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> bigDecimalResult = digitList.<a href="../D/17246.html" title="Multiple defined in 10 places.">getBigDecimal</a>();
<a id="L2028" name="L2028"></a>2028 
<a id="L2029" name="L2029"></a>2029             <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L2030" name="L2030"></a>2030                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2031" name="L2031"></a>2031                     bigDecimalResult = bigDecimalResult.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(<a href="../S/2458.html#L2115" title="Defined at 2115 in src/java/text/DecimalFormat.java.">getBigDecimalMultiplier</a>());
<a id="L2032" name="L2032"></a>2032                 <em class="brace">}</em>
<a id="L2033" name="L2033"></a>2033                 <strong class="reserved">catch</strong> (<a href="../S/1775.html#L41" title="Defined at 41 in src/java/lang/ArithmeticException.java.">ArithmeticException</a> e) <em class="brace">{</em>  <em class="comment">// non-terminating decimal expansion</em>
<a id="L2034" name="L2034"></a>2034                     bigDecimalResult = bigDecimalResult.<a href="../D/14985.html" title="Multiple defined in 18 places.">divide</a>(<a href="../S/2458.html#L2115" title="Defined at 2115 in src/java/text/DecimalFormat.java.">getBigDecimalMultiplier</a>(), roundingMode);
<a id="L2035" name="L2035"></a>2035                 <em class="brace">}</em>
<a id="L2036" name="L2036"></a>2036             <em class="brace">}</em>
<a id="L2037" name="L2037"></a>2037 
<a id="L2038" name="L2038"></a>2038             <strong class="reserved">if</strong> (!<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_POSITIVE]) <em class="brace">{</em>
<a id="L2039" name="L2039"></a>2039                 bigDecimalResult = bigDecimalResult.<a href="../D/27947.html" title="Multiple defined in 27 places.">negate</a>();
<a id="L2040" name="L2040"></a>2040             <em class="brace">}</em>
<a id="L2041" name="L2041"></a>2041             <strong class="reserved">return</strong> bigDecimalResult;
<a id="L2042" name="L2042"></a>2042         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2043" name="L2043"></a>2043             <strong class="reserved">boolean</strong> gotDouble = <strong class="reserved">true</strong>;
<a id="L2044" name="L2044"></a>2044             <strong class="reserved">boolean</strong> gotLongMinimum = <strong class="reserved">false</strong>;
<a id="L2045" name="L2045"></a>2045             <strong class="reserved">double</strong>  doubleResult = 0.0;
<a id="L2046" name="L2046"></a>2046             <strong class="reserved">long</strong>    longResult = 0;
<a id="L2047" name="L2047"></a>2047 
<a id="L2048" name="L2048"></a>2048             <em class="comment">// Finally, have DigitList parse the digits into a value.</em>
<a id="L2049" name="L2049"></a>2049             <strong class="reserved">if</strong> (digitList.<a href="../S/2482.html#L222" title="Defined at 222 in src/java/text/DigitList.java.">fitsIntoLong</a>(<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_POSITIVE], <a href="../S/2488.html#L402" title="Defined at 402 in src/java/text/NumberFormat.java.">isParseIntegerOnly</a>())) <em class="brace">{</em>
<a id="L2050" name="L2050"></a>2050                 gotDouble = <strong class="reserved">false</strong>;
<a id="L2051" name="L2051"></a>2051                 longResult = digitList.<a href="../D/20280.html" title="Multiple defined in 48 places.">getLong</a>();
<a id="L2052" name="L2052"></a>2052                 <strong class="reserved">if</strong> (longResult &lt; 0) <em class="brace">{</em>  <em class="comment">// got Long.MIN_VALUE</em>
<a id="L2053" name="L2053"></a>2053                     gotLongMinimum = <strong class="reserved">true</strong>;
<a id="L2054" name="L2054"></a>2054                 <em class="brace">}</em>
<a id="L2055" name="L2055"></a>2055             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2056" name="L2056"></a>2056                 doubleResult = digitList.<a href="../D/18583.html" title="Multiple defined in 19 places.">getDouble</a>();
<a id="L2057" name="L2057"></a>2057             <em class="brace">}</em>
<a id="L2058" name="L2058"></a>2058 
<a id="L2059" name="L2059"></a>2059             <em class="comment">// Divide by multiplier. We have to be careful here not to do</em>
<a id="L2060" name="L2060"></a>2060             <em class="comment">// unneeded conversions between double and long.</em>
<a id="L2061" name="L2061"></a>2061             <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L2062" name="L2062"></a>2062                 <strong class="reserved">if</strong> (gotDouble) <em class="brace">{</em>
<a id="L2063" name="L2063"></a>2063                     doubleResult /= multiplier;
<a id="L2064" name="L2064"></a>2064                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2065" name="L2065"></a>2065                     <em class="comment">// Avoid converting to double if we can</em>
<a id="L2066" name="L2066"></a>2066                     <strong class="reserved">if</strong> (longResult % multiplier == 0) <em class="brace">{</em>
<a id="L2067" name="L2067"></a>2067                         longResult /= multiplier;
<a id="L2068" name="L2068"></a>2068                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2069" name="L2069"></a>2069                         doubleResult = ((<strong class="reserved">double</strong>)longResult) / multiplier;
<a id="L2070" name="L2070"></a>2070                         gotDouble = <strong class="reserved">true</strong>;
<a id="L2071" name="L2071"></a>2071                     <em class="brace">}</em>
<a id="L2072" name="L2072"></a>2072                 <em class="brace">}</em>
<a id="L2073" name="L2073"></a>2073             <em class="brace">}</em>
<a id="L2074" name="L2074"></a>2074 
<a id="L2075" name="L2075"></a>2075             <strong class="reserved">if</strong> (!<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_POSITIVE] &amp;&amp; !gotLongMinimum) <em class="brace">{</em>
<a id="L2076" name="L2076"></a>2076                 doubleResult = -doubleResult;
<a id="L2077" name="L2077"></a>2077                 longResult = -longResult;
<a id="L2078" name="L2078"></a>2078             <em class="brace">}</em>
<a id="L2079" name="L2079"></a>2079 
<a id="L2080" name="L2080"></a>2080             <em class="comment">// At this point, if we divided the result by the multiplier, the</em>
<a id="L2081" name="L2081"></a>2081             <em class="comment">// result may fit into a long.  We check for this case and return</em>
<a id="L2082" name="L2082"></a>2082             <em class="comment">// a long if possible.</em>
<a id="L2083" name="L2083"></a>2083             <em class="comment">// We must do this AFTER applying the negative (if appropriate)</em>
<a id="L2084" name="L2084"></a>2084             <em class="comment">// in order to handle the case of LONG_MIN; otherwise, if we do</em>
<a id="L2085" name="L2085"></a>2085             <em class="comment">// this with a positive value -LONG_MIN, the double is &gt; 0, but</em>
<a id="L2086" name="L2086"></a>2086             <em class="comment">// the long is &lt; 0. We also must retain a double in the case of</em>
<a id="L2087" name="L2087"></a>2087             <em class="comment">// -0.0, which will compare as == to a long 0 cast to a double</em>
<a id="L2088" name="L2088"></a>2088             <em class="comment">// (bug 4162852).</em>
<a id="L2089" name="L2089"></a>2089             <strong class="reserved">if</strong> (multiplier != 1 &amp;&amp; gotDouble) <em class="brace">{</em>
<a id="L2090" name="L2090"></a>2090                 longResult = (<strong class="reserved">long</strong>)doubleResult;
<a id="L2091" name="L2091"></a>2091                 gotDouble = ((doubleResult != (<strong class="reserved">double</strong>)longResult) ||
<a id="L2092" name="L2092"></a>2092                             (doubleResult == 0.0 &amp;&amp; 1/doubleResult &lt; 0.0)) &amp;&amp;
<a id="L2093" name="L2093"></a>2093                             !<a href="../S/2488.html#L402" title="Defined at 402 in src/java/text/NumberFormat.java.">isParseIntegerOnly</a>();
<a id="L2094" name="L2094"></a>2094             <em class="brace">}</em>
<a id="L2095" name="L2095"></a>2095 
<a id="L2096" name="L2096"></a>2096             <strong class="reserved">return</strong> gotDouble ?
<a id="L2097" name="L2097"></a>2097                 (<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>)<strong class="reserved">new</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>(doubleResult) : (<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>)<strong class="reserved">new</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>(longResult);
<a id="L2098" name="L2098"></a>2098         <em class="brace">}</em>
<a id="L2099" name="L2099"></a>2099     <em class="brace">}</em>
<a id="L2100" name="L2100"></a>2100 
<div class="comment">
      Return a BigInteger multiplier.</div>
<a id="L2104" name="L2104"></a>2104     <strong class="reserved">private</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> <a href="../S/2458.html#L802" title="Referred from 802 in src/java/text/DecimalFormat.java.">getBigIntegerMultiplier</a>() <em class="brace">{</em>
<a id="L2105" name="L2105"></a>2105         <strong class="reserved">if</strong> (bigIntegerMultiplier == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2106" name="L2106"></a>2106             bigIntegerMultiplier = <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(multiplier);
<a id="L2107" name="L2107"></a>2107         <em class="brace">}</em>
<a id="L2108" name="L2108"></a>2108         <strong class="reserved">return</strong> bigIntegerMultiplier;
<a id="L2109" name="L2109"></a>2109     <em class="brace">}</em>
<a id="L2110" name="L2110"></a>2110     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/1462.html#L123" title="Defined at 123 in src/java/math/BigInteger.java.">BigInteger</a> bigIntegerMultiplier;
<a id="L2111" name="L2111"></a>2111 
<div class="comment">
      Return a BigDecimal multiplier.</div>
<a id="L2115" name="L2115"></a>2115     <strong class="reserved">private</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> <a href="../R/15271.html" title="Multiple referred from 3 places.">getBigDecimalMultiplier</a>() <em class="brace">{</em>
<a id="L2116" name="L2116"></a>2116         <strong class="reserved">if</strong> (bigDecimalMultiplier == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2117" name="L2117"></a>2117             bigDecimalMultiplier = <strong class="reserved">new</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a>(multiplier);
<a id="L2118" name="L2118"></a>2118         <em class="brace">}</em>
<a id="L2119" name="L2119"></a>2119         <strong class="reserved">return</strong> bigDecimalMultiplier;
<a id="L2120" name="L2120"></a>2120     <em class="brace">}</em>
<a id="L2121" name="L2121"></a>2121     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/1464.html#L220" title="Defined at 220 in src/java/math/BigDecimal.java.">BigDecimal</a> bigDecimalMultiplier;
<a id="L2122" name="L2122"></a>2122 
<a id="L2123" name="L2123"></a>2123     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STATUS_INFINITE = 0;
<a id="L2124" name="L2124"></a>2124     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STATUS_POSITIVE = 1;
<a id="L2125" name="L2125"></a>2125     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STATUS_LENGTH   = 2;
<a id="L2126" name="L2126"></a>2126 
<div class="comment">
      Parse the given text into a number.  The text is parsed beginning at
      parsePosition, until an unparseable character is seen.
      @param text The string to parse.
      @param parsePosition The position at which to being parsing.  Upon
      return, the first unparseable character.
      @param digits The DigitList to set to the parsed value.
      @param isExponent If true, parse an exponent.  This means no
      infinite values and integer only.
      @param status Upon return contains boolean status flags indicating
      whether the value was infinite and whether it was positive.</div>
<a id="L2139" name="L2139"></a>2139     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/29014.html" title="Multiple referred from 2 places.">subparse</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/2483.html#L57" title="Defined at 57 in src/java/text/ParsePosition.java.">ParsePosition</a> parsePosition,
<a id="L2140" name="L2140"></a>2140                    <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> positivePrefix, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> negativePrefix,
<a id="L2141" name="L2141"></a>2141                    <a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a> <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>, <strong class="reserved">boolean</strong> isExponent,
<a id="L2142" name="L2142"></a>2142                    <strong class="reserved">boolean</strong> <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[]) <em class="brace">{</em>
<a id="L2143" name="L2143"></a>2143         <strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> = parsePosition.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2144" name="L2144"></a>2144         <strong class="reserved">int</strong> oldStart = parsePosition.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2145" name="L2145"></a>2145         <strong class="reserved">int</strong> <a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a>;
<a id="L2146" name="L2146"></a>2146         <strong class="reserved">boolean</strong> gotPositive, gotNegative;
<a id="L2147" name="L2147"></a>2147 
<a id="L2148" name="L2148"></a>2148         <em class="comment">// check for positivePrefix; take longest</em>
<a id="L2149" name="L2149"></a>2149         gotPositive = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, positivePrefix, 0,
<a id="L2150" name="L2150"></a>2150                                          positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2151" name="L2151"></a>2151         gotNegative = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, negativePrefix, 0,
<a id="L2152" name="L2152"></a>2152                                          negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2153" name="L2153"></a>2153 
<a id="L2154" name="L2154"></a>2154         <strong class="reserved">if</strong> (gotPositive &amp;&amp; gotNegative) <em class="brace">{</em>
<a id="L2155" name="L2155"></a>2155             <strong class="reserved">if</strong> (positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2156" name="L2156"></a>2156                 gotNegative = <strong class="reserved">false</strong>;
<a id="L2157" name="L2157"></a>2157             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt; negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2158" name="L2158"></a>2158                 gotPositive = <strong class="reserved">false</strong>;
<a id="L2159" name="L2159"></a>2159             <em class="brace">}</em>
<a id="L2160" name="L2160"></a>2160         <em class="brace">}</em>
<a id="L2161" name="L2161"></a>2161 
<a id="L2162" name="L2162"></a>2162         <strong class="reserved">if</strong> (gotPositive) <em class="brace">{</em>
<a id="L2163" name="L2163"></a>2163             <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> += positivePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2164" name="L2164"></a>2164         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (gotNegative) <em class="brace">{</em>
<a id="L2165" name="L2165"></a>2165             <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> += negativePrefix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2166" name="L2166"></a>2166         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2167" name="L2167"></a>2167             parsePosition.errorIndex = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L2168" name="L2168"></a>2168             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2169" name="L2169"></a>2169         <em class="brace">}</em>
<a id="L2170" name="L2170"></a>2170 
<a id="L2171" name="L2171"></a>2171         <em class="comment">// process digits or Inf, find decimal position</em>
<a id="L2172" name="L2172"></a>2172         <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_INFINITE] = <strong class="reserved">false</strong>;
<a id="L2173" name="L2173"></a>2173         <strong class="reserved">if</strong> (!isExponent &amp;&amp; <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>,symbols.<a href="../S/2462.html#L322" title="Defined at 322 in src/java/text/DecimalFormatSymbols.java.">getInfinity</a>(),0,
<a id="L2174" name="L2174"></a>2174                           symbols.<a href="../S/2462.html#L322" title="Defined at 322 in src/java/text/DecimalFormatSymbols.java.">getInfinity</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>())) <em class="brace">{</em>
<a id="L2175" name="L2175"></a>2175             <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> += symbols.<a href="../S/2462.html#L322" title="Defined at 322 in src/java/text/DecimalFormatSymbols.java.">getInfinity</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2176" name="L2176"></a>2176             <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_INFINITE] = <strong class="reserved">true</strong>;
<a id="L2177" name="L2177"></a>2177         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2178" name="L2178"></a>2178             <em class="comment">// We now have a string of digits, possibly with grouping symbols,</em>
<a id="L2179" name="L2179"></a>2179             <em class="comment">// and decimal points.  We want to process these into a DigitList.</em>
<a id="L2180" name="L2180"></a>2180             <em class="comment">// We don't want to put a bunch of leading zeros into the DigitList</em>
<a id="L2181" name="L2181"></a>2181             <em class="comment">// though, so we keep track of the location of the decimal point,</em>
<a id="L2182" name="L2182"></a>2182             <em class="comment">// put only significant digits into the DigitList, and adjust the</em>
<a id="L2183" name="L2183"></a>2183             <em class="comment">// exponent as needed.</em>
<a id="L2184" name="L2184"></a>2184 
<a id="L2185" name="L2185"></a>2185             <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.decimalAt = <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0;
<a id="L2186" name="L2186"></a>2186             <strong class="reserved">char</strong> <a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a> = symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>();
<a id="L2187" name="L2187"></a>2187             <strong class="reserved">char</strong> decimal = isCurrencyFormat ?
<a id="L2188" name="L2188"></a>2188                 symbols.<a href="../S/2462.html#L483" title="Defined at 483 in src/java/text/DecimalFormatSymbols.java.">getMonetaryDecimalSeparator</a>() :
<a id="L2189" name="L2189"></a>2189                 symbols.<a href="../D/18238.html" title="Multiple defined in 3 places.">getDecimalSeparator</a>();
<a id="L2190" name="L2190"></a>2190             <strong class="reserved">char</strong> grouping = symbols.<a href="../S/2462.html#L211" title="Defined at 211 in src/java/text/DecimalFormatSymbols.java.">getGroupingSeparator</a>();
<a id="L2191" name="L2191"></a>2191             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> exponentString = symbols.<a href="../S/2462.html#L518" title="Defined at 518 in src/java/text/DecimalFormatSymbols.java.">getExponentSeparator</a>();
<a id="L2192" name="L2192"></a>2192             <strong class="reserved">boolean</strong> sawDecimal = <strong class="reserved">false</strong>;
<a id="L2193" name="L2193"></a>2193             <strong class="reserved">boolean</strong> sawExponent = <strong class="reserved">false</strong>;
<a id="L2194" name="L2194"></a>2194             <strong class="reserved">boolean</strong> sawDigit = <strong class="reserved">false</strong>;
<a id="L2195" name="L2195"></a>2195             <strong class="reserved">int</strong> <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = 0; <em class="comment">// Set to the exponent value, if any</em>
<a id="L2196" name="L2196"></a>2196 
<a id="L2197" name="L2197"></a>2197             <em class="comment">// We have to track digitCount ourselves, because digits.count will</em>
<a id="L2198" name="L2198"></a>2198             <em class="comment">// pin when the maximum allowable digits is reached.</em>
<a id="L2199" name="L2199"></a>2199             <strong class="reserved">int</strong> digitCount = 0;
<a id="L2200" name="L2200"></a>2200 
<a id="L2201" name="L2201"></a>2201             <a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a> = -1;
<a id="L2202" name="L2202"></a>2202             <strong class="reserved">for</strong> (; <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> &lt; <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); ++<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>) <em class="brace">{</em>
<a id="L2203" name="L2203"></a>2203                 <strong class="reserved">char</strong> ch = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>);
<a id="L2204" name="L2204"></a>2204 
<div class="comment">
 We recognize all digit ranges, not only the Latin digit range
                  '0'..'9'.  We do so by using the Character.digit() method,
                  which converts a valid Unicode digit to the range 0..9.
                  The character 'ch' may be a digit.  If so, place its value
                  from 0 to 9 in 'digit'.  First try using the locale digit,
                  which may or MAY NOT be a standard Unicode digit range.  If
                  this fails, try using the standard Unicode digit ranges by
                  calling Character.digit().  If this also fails, digit will
                  have a value outside the range 0..9.</div>
<a id="L2216" name="L2216"></a>2216                 <strong class="reserved">int</strong> <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> = ch - <a href="../S/1619.html#L2307" title="Defined at 2307 in src/java/lang/invoke/MethodHandles.java.">zero</a>;
<a id="L2217" name="L2217"></a>2217                 <strong class="reserved">if</strong> (<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> &lt; 0 || <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> &gt; 9) <em class="brace">{</em>
<a id="L2218" name="L2218"></a>2218                     <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> = <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>(ch, 10);
<a id="L2219" name="L2219"></a>2219                 <em class="brace">}</em>
<a id="L2220" name="L2220"></a>2220 
<a id="L2221" name="L2221"></a>2221                 <strong class="reserved">if</strong> (<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> == 0) <em class="brace">{</em>
<a id="L2222" name="L2222"></a>2222                     <em class="comment">// Cancel out backup setting (see grouping handler below)</em>
<a id="L2223" name="L2223"></a>2223                     <a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a> = -1; <em class="comment">// Do this BEFORE continue statement below!!!</em>
<a id="L2224" name="L2224"></a>2224                     sawDigit = <strong class="reserved">true</strong>;
<a id="L2225" name="L2225"></a>2225 
<a id="L2226" name="L2226"></a>2226                     <em class="comment">// Handle leading zeros</em>
<a id="L2227" name="L2227"></a>2227                     <strong class="reserved">if</strong> (<a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> == 0) <em class="brace">{</em>
<a id="L2228" name="L2228"></a>2228                         <em class="comment">// Ignore leading zeros in integer part of number.</em>
<a id="L2229" name="L2229"></a>2229                         <strong class="reserved">if</strong> (!sawDecimal) <em class="brace">{</em>
<a id="L2230" name="L2230"></a>2230                             <strong class="reserved">continue</strong>;
<a id="L2231" name="L2231"></a>2231                         <em class="brace">}</em>
<a id="L2232" name="L2232"></a>2232 
<a id="L2233" name="L2233"></a>2233                         <em class="comment">// If we have seen the decimal, but no significant</em>
<a id="L2234" name="L2234"></a>2234                         <em class="comment">// digits yet, then we account for leading zeros by</em>
<a id="L2235" name="L2235"></a>2235                         <em class="comment">// decrementing the digits.decimalAt into negative</em>
<a id="L2236" name="L2236"></a>2236                         <em class="comment">// values.</em>
<a id="L2237" name="L2237"></a>2237                         --<a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.decimalAt;
<a id="L2238" name="L2238"></a>2238                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2239" name="L2239"></a>2239                         ++digitCount;
<a id="L2240" name="L2240"></a>2240                         <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>)(<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> + '0'));
<a id="L2241" name="L2241"></a>2241                     <em class="brace">}</em>
<a id="L2242" name="L2242"></a>2242                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> &gt; 0 &amp;&amp; <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> &lt;= 9) <em class="brace">{</em> <em class="comment">// [sic] digit==0 handled above</em>
<a id="L2243" name="L2243"></a>2243                     sawDigit = <strong class="reserved">true</strong>;
<a id="L2244" name="L2244"></a>2244                     ++digitCount;
<a id="L2245" name="L2245"></a>2245                     <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>)(<a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> + '0'));
<a id="L2246" name="L2246"></a>2246 
<a id="L2247" name="L2247"></a>2247                     <em class="comment">// Cancel out backup setting (see grouping handler below)</em>
<a id="L2248" name="L2248"></a>2248                     <a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a> = -1;
<a id="L2249" name="L2249"></a>2249                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!isExponent &amp;&amp; ch == decimal) <em class="brace">{</em>
<a id="L2250" name="L2250"></a>2250                     <em class="comment">// If we're only parsing integers, or if we ALREADY saw the</em>
<a id="L2251" name="L2251"></a>2251                     <em class="comment">// decimal, then don't parse this one.</em>
<a id="L2252" name="L2252"></a>2252                     <strong class="reserved">if</strong> (<a href="../S/2488.html#L402" title="Defined at 402 in src/java/text/NumberFormat.java.">isParseIntegerOnly</a>() || sawDecimal) <em class="brace">{</em>
<a id="L2253" name="L2253"></a>2253                         <strong class="reserved">break</strong>;
<a id="L2254" name="L2254"></a>2254                     <em class="brace">}</em>
<a id="L2255" name="L2255"></a>2255                     <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.decimalAt = digitCount; <em class="comment">// Not digits.count!</em>
<a id="L2256" name="L2256"></a>2256                     sawDecimal = <strong class="reserved">true</strong>;
<a id="L2257" name="L2257"></a>2257                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!isExponent &amp;&amp; ch == grouping &amp;&amp; <a href="../S/2488.html#L647" title="Defined at 647 in src/java/text/NumberFormat.java.">isGroupingUsed</a>()) <em class="brace">{</em>
<a id="L2258" name="L2258"></a>2258                     <strong class="reserved">if</strong> (sawDecimal) <em class="brace">{</em>
<a id="L2259" name="L2259"></a>2259                         <strong class="reserved">break</strong>;
<a id="L2260" name="L2260"></a>2260                     <em class="brace">}</em>
<a id="L2261" name="L2261"></a>2261                     <em class="comment">// Ignore grouping characters, if we are using them, but</em>
<a id="L2262" name="L2262"></a>2262                     <em class="comment">// require that they be followed by a digit.  Otherwise</em>
<a id="L2263" name="L2263"></a>2263                     <em class="comment">// we backup and reprocess them.</em>
<a id="L2264" name="L2264"></a>2264                     <a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a> = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L2265" name="L2265"></a>2265                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!isExponent &amp;&amp; <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, exponentString, 0, exponentString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>())
<a id="L2266" name="L2266"></a>2266                              &amp;&amp; !sawExponent) <em class="brace">{</em>
<a id="L2267" name="L2267"></a>2267                     <em class="comment">// Process the exponent by recursively calling this method.</em>
<a id="L2268" name="L2268"></a>2268                      <a href="../S/2483.html#L57" title="Defined at 57 in src/java/text/ParsePosition.java.">ParsePosition</a> pos = <strong class="reserved">new</strong> <a href="../S/2483.html#L57" title="Defined at 57 in src/java/text/ParsePosition.java.">ParsePosition</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> + exponentString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2269" name="L2269"></a>2269                     <strong class="reserved">boolean</strong>[] stat = <strong class="reserved">new</strong> <strong class="reserved">boolean</strong>[STATUS_LENGTH];
<a id="L2270" name="L2270"></a>2270                     <a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a> exponentDigits = <strong class="reserved">new</strong> <a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a>();
<a id="L2271" name="L2271"></a>2271 
<a id="L2272" name="L2272"></a>2272                     <strong class="reserved">if</strong> (<a href="../S/2458.html#L2139" title="Defined at 2139 in src/java/text/DecimalFormat.java.">subparse</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, pos, "", <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>()), exponentDigits, <strong class="reserved">true</strong>, stat) &amp;&amp;
<a id="L2273" name="L2273"></a>2273                         exponentDigits.<a href="../S/2482.html#L222" title="Defined at 222 in src/java/text/DigitList.java.">fitsIntoLong</a>(stat[STATUS_POSITIVE], <strong class="reserved">true</strong>)) <em class="brace">{</em>
<a id="L2274" name="L2274"></a>2274                         <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> = pos.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>; <em class="comment">// Advance past the exponent</em>
<a id="L2275" name="L2275"></a>2275                         <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = (<strong class="reserved">int</strong>)exponentDigits.<a href="../D/20280.html" title="Multiple defined in 48 places.">getLong</a>();
<a id="L2276" name="L2276"></a>2276                         <strong class="reserved">if</strong> (!stat[STATUS_POSITIVE]) <em class="brace">{</em>
<a id="L2277" name="L2277"></a>2277                             <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a> = -<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>;
<a id="L2278" name="L2278"></a>2278                         <em class="brace">}</em>
<a id="L2279" name="L2279"></a>2279                         sawExponent = <strong class="reserved">true</strong>;
<a id="L2280" name="L2280"></a>2280                     <em class="brace">}</em>
<a id="L2281" name="L2281"></a>2281                     <strong class="reserved">break</strong>; <em class="comment">// Whether we fail or succeed, we exit this loop</em>
<a id="L2282" name="L2282"></a>2282                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2283" name="L2283"></a>2283                     <strong class="reserved">break</strong>;
<a id="L2284" name="L2284"></a>2284                 <em class="brace">}</em>
<a id="L2285" name="L2285"></a>2285             <em class="brace">}</em>
<a id="L2286" name="L2286"></a>2286 
<a id="L2287" name="L2287"></a>2287             <strong class="reserved">if</strong> (<a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a> != -1) <em class="brace">{</em>
<a id="L2288" name="L2288"></a>2288                 <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> = <a href="../S/6349.html#L251" title="Defined at 251 in src/com/sun/jmx/snmp/IPAcl/ASCII_CharStream.java.">backup</a>;
<a id="L2289" name="L2289"></a>2289             <em class="brace">}</em>
<a id="L2290" name="L2290"></a>2290 
<a id="L2291" name="L2291"></a>2291             <em class="comment">// If there was no decimal point we have an integer</em>
<a id="L2292" name="L2292"></a>2292             <strong class="reserved">if</strong> (!sawDecimal) <em class="brace">{</em>
<a id="L2293" name="L2293"></a>2293                 <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.decimalAt = digitCount; <em class="comment">// Not digits.count!</em>
<a id="L2294" name="L2294"></a>2294             <em class="brace">}</em>
<a id="L2295" name="L2295"></a>2295 
<a id="L2296" name="L2296"></a>2296             <em class="comment">// Adjust for exponent, if any</em>
<a id="L2297" name="L2297"></a>2297             <a href="../D/14903.html" title="Multiple defined in 2 places.">digits</a>.decimalAt += <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>;
<a id="L2298" name="L2298"></a>2298 
<a id="L2299" name="L2299"></a>2299             <em class="comment">// If none of the text string was recognized.  For example, parse</em>
<a id="L2300" name="L2300"></a>2300             <em class="comment">// "x" with pattern "#0.00" (return index and error index both 0)</em>
<a id="L2301" name="L2301"></a>2301             <em class="comment">// parse "$" with pattern "$#0.00". (return index 0 and error</em>
<a id="L2302" name="L2302"></a>2302             <em class="comment">// index 1).</em>
<a id="L2303" name="L2303"></a>2303             <strong class="reserved">if</strong> (!sawDigit &amp;&amp; digitCount == 0) <em class="brace">{</em>
<a id="L2304" name="L2304"></a>2304                 parsePosition.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = oldStart;
<a id="L2305" name="L2305"></a>2305                 parsePosition.errorIndex = oldStart;
<a id="L2306" name="L2306"></a>2306                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2307" name="L2307"></a>2307             <em class="brace">}</em>
<a id="L2308" name="L2308"></a>2308         <em class="brace">}</em>
<a id="L2309" name="L2309"></a>2309 
<a id="L2310" name="L2310"></a>2310         <em class="comment">// check for suffix</em>
<a id="L2311" name="L2311"></a>2311         <strong class="reserved">if</strong> (!isExponent) <em class="brace">{</em>
<a id="L2312" name="L2312"></a>2312             <strong class="reserved">if</strong> (gotPositive) <em class="brace">{</em>
<a id="L2313" name="L2313"></a>2313                 gotPositive = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>,positiveSuffix,0,
<a id="L2314" name="L2314"></a>2314                                                  positiveSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2315" name="L2315"></a>2315             <em class="brace">}</em>
<a id="L2316" name="L2316"></a>2316             <strong class="reserved">if</strong> (gotNegative) <em class="brace">{</em>
<a id="L2317" name="L2317"></a>2317                 gotNegative = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>,negativeSuffix,0,
<a id="L2318" name="L2318"></a>2318                                                  negativeSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2319" name="L2319"></a>2319             <em class="brace">}</em>
<a id="L2320" name="L2320"></a>2320 
<a id="L2321" name="L2321"></a>2321         <em class="comment">// if both match, take longest</em>
<a id="L2322" name="L2322"></a>2322         <strong class="reserved">if</strong> (gotPositive &amp;&amp; gotNegative) <em class="brace">{</em>
<a id="L2323" name="L2323"></a>2323             <strong class="reserved">if</strong> (positiveSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; negativeSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2324" name="L2324"></a>2324                 gotNegative = <strong class="reserved">false</strong>;
<a id="L2325" name="L2325"></a>2325             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (positiveSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt; negativeSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2326" name="L2326"></a>2326                 gotPositive = <strong class="reserved">false</strong>;
<a id="L2327" name="L2327"></a>2327             <em class="brace">}</em>
<a id="L2328" name="L2328"></a>2328         <em class="brace">}</em>
<a id="L2329" name="L2329"></a>2329 
<a id="L2330" name="L2330"></a>2330         <em class="comment">// fail if neither or both</em>
<a id="L2331" name="L2331"></a>2331         <strong class="reserved">if</strong> (gotPositive == gotNegative) <em class="brace">{</em>
<a id="L2332" name="L2332"></a>2332             parsePosition.errorIndex = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L2333" name="L2333"></a>2333             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2334" name="L2334"></a>2334         <em class="brace">}</em>
<a id="L2335" name="L2335"></a>2335 
<a id="L2336" name="L2336"></a>2336         parsePosition.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> +
<a id="L2337" name="L2337"></a>2337             (gotPositive ? positiveSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() : negativeSuffix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()); <em class="comment">// mark success!</em>
<a id="L2338" name="L2338"></a>2338         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2339" name="L2339"></a>2339             parsePosition.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L2340" name="L2340"></a>2340         <em class="brace">}</em>
<a id="L2341" name="L2341"></a>2341 
<a id="L2342" name="L2342"></a>2342         <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[STATUS_POSITIVE] = gotPositive;
<a id="L2343" name="L2343"></a>2343         <strong class="reserved">if</strong> (parsePosition.<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == oldStart) <em class="brace">{</em>
<a id="L2344" name="L2344"></a>2344             parsePosition.errorIndex = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L2345" name="L2345"></a>2345             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2346" name="L2346"></a>2346         <em class="brace">}</em>
<a id="L2347" name="L2347"></a>2347         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2348" name="L2348"></a>2348     <em class="brace">}</em>
<a id="L2349" name="L2349"></a>2349 
<div class="comment">
      Returns a copy of the decimal format symbols, which is generally not
      changed by the programmer or user.
      @return a copy of the desired DecimalFormatSymbols
      @see java.text.DecimalFormatSymbols</div>
<a id="L2356" name="L2356"></a>2356     <strong class="reserved">public</strong> <a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a> <a href="../R/15969.html" title="Multiple referred from 6 places.">getDecimalFormatSymbols</a>() <em class="brace">{</em>
<a id="L2357" name="L2357"></a>2357         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2358" name="L2358"></a>2358             <em class="comment">// don't allow multiple references</em>
<a id="L2359" name="L2359"></a>2359             <strong class="reserved">return</strong> (<a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a>) symbols.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L2360" name="L2360"></a>2360         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> foo) <em class="brace">{</em>
<a id="L2361" name="L2361"></a>2361             <strong class="reserved">return</strong> <strong class="reserved">null</strong>; <em class="comment">// should never happen</em>
<a id="L2362" name="L2362"></a>2362         <em class="brace">}</em>
<a id="L2363" name="L2363"></a>2363     <em class="brace">}</em>
<a id="L2364" name="L2364"></a>2364 
<a id="L2365" name="L2365"></a>2365 
<div class="comment">
      Sets the decimal format symbols, which is generally not changed
      by the programmer or user.
      @param newSymbols desired DecimalFormatSymbols
      @see java.text.DecimalFormatSymbols</div>
<a id="L2372" name="L2372"></a>2372     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5995.html#L290" title="Referred from 290 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setDecimalFormatSymbols</a>(<a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a> newSymbols) <em class="brace">{</em>
<a id="L2373" name="L2373"></a>2373         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2374" name="L2374"></a>2374             <em class="comment">// don't allow multiple references</em>
<a id="L2375" name="L2375"></a>2375             symbols = (<a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a>) newSymbols.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L2376" name="L2376"></a>2376             <a href="../S/2458.html#L2775" title="Defined at 2775 in src/java/text/DecimalFormat.java.">expandAffixes</a>();
<a id="L2377" name="L2377"></a>2377             fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2378" name="L2378"></a>2378         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> foo) <em class="brace">{</em>
<a id="L2379" name="L2379"></a>2379             <em class="comment">// should never happen</em>
<a id="L2380" name="L2380"></a>2380         <em class="brace">}</em>
<a id="L2381" name="L2381"></a>2381     <em class="brace">}</em>
<a id="L2382" name="L2382"></a>2382 
<div class="comment">
      Get the positive prefix.
      <p>Examples: +123, $123, sFr123
      @return the positive prefix</p></div>
<a id="L2389" name="L2389"></a>2389     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/872.html#L1198" title="Referred from 1198 in src/java/util/Scanner.java.">getPositivePrefix</a> () <em class="brace">{</em>
<a id="L2390" name="L2390"></a>2390         <strong class="reserved">return</strong> positivePrefix;
<a id="L2391" name="L2391"></a>2391     <em class="brace">}</em>
<a id="L2392" name="L2392"></a>2392 
<div class="comment">
      Set the positive prefix.
      <p>Examples: +123, $123, sFr123
      @param newValue the new positive prefix</p></div>
<a id="L2399" name="L2399"></a>2399     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setPositivePrefix (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newValue) <em class="brace">{</em>
<a id="L2400" name="L2400"></a>2400         positivePrefix = newValue;
<a id="L2401" name="L2401"></a>2401         posPrefixPattern = <strong class="reserved">null</strong>;
<a id="L2402" name="L2402"></a>2402         positivePrefixFieldPositions = <strong class="reserved">null</strong>;
<a id="L2403" name="L2403"></a>2403         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2404" name="L2404"></a>2404     <em class="brace">}</em>
<a id="L2405" name="L2405"></a>2405 
<div class="comment">
      Returns the FieldPositions of the fields in the prefix used for
      positive numbers. This is not used if the user has explicitly set
      a positive prefix via <code>setPositivePrefix</code>. This is
      lazily created.
      @return FieldPositions in positive prefix</div>
<a id="L2414" name="L2414"></a>2414     <strong class="reserved">private</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] <a href="../R/18386.html" title="Multiple referred from 2 places.">getPositivePrefixFieldPositions</a>() <em class="brace">{</em>
<a id="L2415" name="L2415"></a>2415         <strong class="reserved">if</strong> (positivePrefixFieldPositions == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2416" name="L2416"></a>2416             <strong class="reserved">if</strong> (posPrefixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2417" name="L2417"></a>2417                 positivePrefixFieldPositions = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(posPrefixPattern);
<a id="L2418" name="L2418"></a>2418             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2419" name="L2419"></a>2419                 positivePrefixFieldPositions = EmptyFieldPositionArray;
<a id="L2420" name="L2420"></a>2420             <em class="brace">}</em>
<a id="L2421" name="L2421"></a>2421         <em class="brace">}</em>
<a id="L2422" name="L2422"></a>2422         <strong class="reserved">return</strong> positivePrefixFieldPositions;
<a id="L2423" name="L2423"></a>2423     <em class="brace">}</em>
<a id="L2424" name="L2424"></a>2424 
<div class="comment">
      Get the negative prefix.
      <p>Examples: -123, ($123) (with negative suffix), sFr-123
      @return the negative prefix</p></div>
<a id="L2431" name="L2431"></a>2431     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/872.html#L1201" title="Referred from 1201 in src/java/util/Scanner.java.">getNegativePrefix</a> () <em class="brace">{</em>
<a id="L2432" name="L2432"></a>2432         <strong class="reserved">return</strong> negativePrefix;
<a id="L2433" name="L2433"></a>2433     <em class="brace">}</em>
<a id="L2434" name="L2434"></a>2434 
<div class="comment">
      Set the negative prefix.
      <p>Examples: -123, ($123) (with negative suffix), sFr-123
      @param newValue the new negative prefix</p></div>
<a id="L2441" name="L2441"></a>2441     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setNegativePrefix (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newValue) <em class="brace">{</em>
<a id="L2442" name="L2442"></a>2442         negativePrefix = newValue;
<a id="L2443" name="L2443"></a>2443         negPrefixPattern = <strong class="reserved">null</strong>;
<a id="L2444" name="L2444"></a>2444         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2445" name="L2445"></a>2445     <em class="brace">}</em>
<a id="L2446" name="L2446"></a>2446 
<div class="comment">
      Returns the FieldPositions of the fields in the prefix used for
      negative numbers. This is not used if the user has explicitly set
      a negative prefix via <code>setNegativePrefix</code>. This is
      lazily created.
      @return FieldPositions in positive prefix</div>
<a id="L2455" name="L2455"></a>2455     <strong class="reserved">private</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] <a href="../R/17886.html" title="Multiple referred from 2 places.">getNegativePrefixFieldPositions</a>() <em class="brace">{</em>
<a id="L2456" name="L2456"></a>2456         <strong class="reserved">if</strong> (negativePrefixFieldPositions == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2457" name="L2457"></a>2457             <strong class="reserved">if</strong> (negPrefixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2458" name="L2458"></a>2458                 negativePrefixFieldPositions = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(negPrefixPattern);
<a id="L2459" name="L2459"></a>2459             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2460" name="L2460"></a>2460                 negativePrefixFieldPositions = EmptyFieldPositionArray;
<a id="L2461" name="L2461"></a>2461             <em class="brace">}</em>
<a id="L2462" name="L2462"></a>2462         <em class="brace">}</em>
<a id="L2463" name="L2463"></a>2463         <strong class="reserved">return</strong> negativePrefixFieldPositions;
<a id="L2464" name="L2464"></a>2464     <em class="brace">}</em>
<a id="L2465" name="L2465"></a>2465 
<div class="comment">
      Get the positive suffix.
      <p>Example: 123%
      @return the positive suffix</p></div>
<a id="L2472" name="L2472"></a>2472     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/872.html#L1204" title="Referred from 1204 in src/java/util/Scanner.java.">getPositiveSuffix</a> () <em class="brace">{</em>
<a id="L2473" name="L2473"></a>2473         <strong class="reserved">return</strong> positiveSuffix;
<a id="L2474" name="L2474"></a>2474     <em class="brace">}</em>
<a id="L2475" name="L2475"></a>2475 
<div class="comment">
      Set the positive suffix.
      <p>Example: 123%
      @param newValue the new positive suffix</p></div>
<a id="L2482" name="L2482"></a>2482     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setPositiveSuffix (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newValue) <em class="brace">{</em>
<a id="L2483" name="L2483"></a>2483         positiveSuffix = newValue;
<a id="L2484" name="L2484"></a>2484         posSuffixPattern = <strong class="reserved">null</strong>;
<a id="L2485" name="L2485"></a>2485         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2486" name="L2486"></a>2486     <em class="brace">}</em>
<a id="L2487" name="L2487"></a>2487 
<div class="comment">
      Returns the FieldPositions of the fields in the suffix used for
      positive numbers. This is not used if the user has explicitly set
      a positive suffix via <code>setPositiveSuffix</code>. This is
      lazily created.
      @return FieldPositions in positive prefix</div>
<a id="L2496" name="L2496"></a>2496     <strong class="reserved">private</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] <a href="../R/18389.html" title="Multiple referred from 2 places.">getPositiveSuffixFieldPositions</a>() <em class="brace">{</em>
<a id="L2497" name="L2497"></a>2497         <strong class="reserved">if</strong> (positiveSuffixFieldPositions == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2498" name="L2498"></a>2498             <strong class="reserved">if</strong> (posSuffixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2499" name="L2499"></a>2499                 positiveSuffixFieldPositions = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(posSuffixPattern);
<a id="L2500" name="L2500"></a>2500             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2501" name="L2501"></a>2501                 positiveSuffixFieldPositions = EmptyFieldPositionArray;
<a id="L2502" name="L2502"></a>2502             <em class="brace">}</em>
<a id="L2503" name="L2503"></a>2503         <em class="brace">}</em>
<a id="L2504" name="L2504"></a>2504         <strong class="reserved">return</strong> positiveSuffixFieldPositions;
<a id="L2505" name="L2505"></a>2505     <em class="brace">}</em>
<a id="L2506" name="L2506"></a>2506 
<div class="comment">
      Get the negative suffix.
      <p>Examples: -123%, ($123) (with positive suffixes)
      @return the negative suffix</p></div>
<a id="L2513" name="L2513"></a>2513     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/872.html#L1207" title="Referred from 1207 in src/java/util/Scanner.java.">getNegativeSuffix</a> () <em class="brace">{</em>
<a id="L2514" name="L2514"></a>2514         <strong class="reserved">return</strong> negativeSuffix;
<a id="L2515" name="L2515"></a>2515     <em class="brace">}</em>
<a id="L2516" name="L2516"></a>2516 
<div class="comment">
      Set the negative suffix.
      <p>Examples: 123%
      @param newValue the new negative suffix</p></div>
<a id="L2523" name="L2523"></a>2523     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setNegativeSuffix (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newValue) <em class="brace">{</em>
<a id="L2524" name="L2524"></a>2524         negativeSuffix = newValue;
<a id="L2525" name="L2525"></a>2525         negSuffixPattern = <strong class="reserved">null</strong>;
<a id="L2526" name="L2526"></a>2526         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2527" name="L2527"></a>2527     <em class="brace">}</em>
<a id="L2528" name="L2528"></a>2528 
<div class="comment">
      Returns the FieldPositions of the fields in the suffix used for
      negative numbers. This is not used if the user has explicitly set
      a negative suffix via <code>setNegativeSuffix</code>. This is
      lazily created.
      @return FieldPositions in positive prefix</div>
<a id="L2537" name="L2537"></a>2537     <strong class="reserved">private</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] <a href="../R/17889.html" title="Multiple referred from 2 places.">getNegativeSuffixFieldPositions</a>() <em class="brace">{</em>
<a id="L2538" name="L2538"></a>2538         <strong class="reserved">if</strong> (negativeSuffixFieldPositions == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2539" name="L2539"></a>2539             <strong class="reserved">if</strong> (negSuffixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2540" name="L2540"></a>2540                 negativeSuffixFieldPositions = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(negSuffixPattern);
<a id="L2541" name="L2541"></a>2541             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2542" name="L2542"></a>2542                 negativeSuffixFieldPositions = EmptyFieldPositionArray;
<a id="L2543" name="L2543"></a>2543             <em class="brace">}</em>
<a id="L2544" name="L2544"></a>2544         <em class="brace">}</em>
<a id="L2545" name="L2545"></a>2545         <strong class="reserved">return</strong> negativeSuffixFieldPositions;
<a id="L2546" name="L2546"></a>2546     <em class="brace">}</em>
<a id="L2547" name="L2547"></a>2547 
<div class="comment">
      Gets the multiplier for use in percent, per mille, and similar
      formats.
      @return the multiplier
      @see #setMultiplier(int)</div>
<a id="L2555" name="L2555"></a>2555     <strong class="reserved">public</strong> <strong class="reserved">int</strong> getMultiplier () <em class="brace">{</em>
<a id="L2556" name="L2556"></a>2556         <strong class="reserved">return</strong> multiplier;
<a id="L2557" name="L2557"></a>2557     <em class="brace">}</em>
<a id="L2558" name="L2558"></a>2558 
<div class="comment">
      Sets the multiplier for use in percent, per mille, and similar
      formats.
      For a percent format, set the multiplier to 100 and the suffixes to
      have '%' (for Arabic, use the Arabic percent sign).
      For a per mille format, set the multiplier to 1000 and the suffixes to
      have '\u2030'.
      <p>Example: with multiplier 100, 1.23 is formatted as "123", and
      "123" is parsed into 1.23.
      @param newValue the new multiplier
      @see #getMultiplier</p></div>
<a id="L2573" name="L2573"></a>2573     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setMultiplier (<strong class="reserved">int</strong> newValue) <em class="brace">{</em>
<a id="L2574" name="L2574"></a>2574         multiplier = newValue;
<a id="L2575" name="L2575"></a>2575         bigDecimalMultiplier = <strong class="reserved">null</strong>;
<a id="L2576" name="L2576"></a>2576         bigIntegerMultiplier = <strong class="reserved">null</strong>;
<a id="L2577" name="L2577"></a>2577         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2578" name="L2578"></a>2578     <em class="brace">}</em>
<a id="L2579" name="L2579"></a>2579 
<div class="comment">
      {@inheritDoc}</div>
<a id="L2583" name="L2583"></a>2583     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2584" name="L2584"></a>2584     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27484.html" title="Multiple referred from 5 places.">setGroupingUsed</a>(<strong class="reserved">boolean</strong> newValue) <em class="brace">{</em>
<a id="L2585" name="L2585"></a>2585         <strong class="reserved">super</strong>.<a href="../D/32824.html" title="Multiple defined in 2 places.">setGroupingUsed</a>(newValue);
<a id="L2586" name="L2586"></a>2586         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2587" name="L2587"></a>2587     <em class="brace">}</em>
<a id="L2588" name="L2588"></a>2588 
<div class="comment">
      Return the grouping size. Grouping size is the number of digits between
      grouping separators in the integer portion of a number.  For example,
      in the number "123,456.78", the grouping size is 3.
      @return the grouping size
      @see #setGroupingSize
      @see java.text.NumberFormat#isGroupingUsed
      @see java.text.DecimalFormatSymbols#getGroupingSeparator</div>
<a id="L2599" name="L2599"></a>2599     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/1038.html#L4362" title="Referred from 4362 in src/java/util/Formatter.java.">getGroupingSize</a> () <em class="brace">{</em>
<a id="L2600" name="L2600"></a>2600         <strong class="reserved">return</strong> groupingSize;
<a id="L2601" name="L2601"></a>2601     <em class="brace">}</em>
<a id="L2602" name="L2602"></a>2602 
<div class="comment">
      Set the grouping size. Grouping size is the number of digits between
      grouping separators in the integer portion of a number.  For example,
      in the number "123,456.78", the grouping size is 3.
      <br>
      The value passed in is converted to a byte, which may lose information.
      @param newValue the new grouping size
      @see #getGroupingSize
      @see java.text.NumberFormat#setGroupingUsed
      @see java.text.DecimalFormatSymbols#setGroupingSeparator</div>
<a id="L2615" name="L2615"></a>2615     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setGroupingSize (<strong class="reserved">int</strong> newValue) <em class="brace">{</em>
<a id="L2616" name="L2616"></a>2616         groupingSize = (<strong class="reserved">byte</strong>)newValue;
<a id="L2617" name="L2617"></a>2617         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2618" name="L2618"></a>2618     <em class="brace">}</em>
<a id="L2619" name="L2619"></a>2619 
<div class="comment">
      Allows you to get the behavior of the decimal separator with integers.
      (The decimal separator will always appear with decimals.)
      <p>Example: Decimal ON: 12345 → 12345.; OFF: 12345 → 12345
      @return <code>true</code> if the decimal separator is always shown;
              <code>false</code> otherwise</p></div>
<a id="L2628" name="L2628"></a>2628     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isDecimalSeparatorAlwaysShown() <em class="brace">{</em>
<a id="L2629" name="L2629"></a>2629         <strong class="reserved">return</strong> decimalSeparatorAlwaysShown;
<a id="L2630" name="L2630"></a>2630     <em class="brace">}</em>
<a id="L2631" name="L2631"></a>2631 
<div class="comment">
      Allows you to set the behavior of the decimal separator with integers.
      (The decimal separator will always appear with decimals.)
      <p>Example: Decimal ON: 12345 → 12345.; OFF: 12345 → 12345
      @param newValue <code>true</code> if the decimal separator is always shown;
                      <code>false</code> otherwise</p></div>
<a id="L2640" name="L2640"></a>2640     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L3438" title="Referred from 3438 in src/java/text/DecimalFormat.java.">setDecimalSeparatorAlwaysShown</a>(<strong class="reserved">boolean</strong> newValue) <em class="brace">{</em>
<a id="L2641" name="L2641"></a>2641         decimalSeparatorAlwaysShown = newValue;
<a id="L2642" name="L2642"></a>2642         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2643" name="L2643"></a>2643     <em class="brace">}</em>
<a id="L2644" name="L2644"></a>2644 
<div class="comment">
      Returns whether the {@link #parse(java.lang.String, java.text.ParsePosition)}
      method returns <code>BigDecimal</code>. The default value is false.
      @return <code>true</code> if the parse method returns BigDecimal;
              <code>false</code> otherwise
      @see #setParseBigDecimal
      @since 1.5</div>
<a id="L2654" name="L2654"></a>2654     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/2458.html#L2026" title="Referred from 2026 in src/java/text/DecimalFormat.java.">isParseBigDecimal</a>() <em class="brace">{</em>
<a id="L2655" name="L2655"></a>2655         <strong class="reserved">return</strong> <a href="../D/29095.html" title="Multiple defined in 2 places.">parseBigDecimal</a>;
<a id="L2656" name="L2656"></a>2656     <em class="brace">}</em>
<a id="L2657" name="L2657"></a>2657 
<div class="comment">
      Sets whether the {@link #parse(java.lang.String, java.text.ParsePosition)}
      method returns <code>BigDecimal</code>.
      @param newValue <code>true</code> if the parse method returns BigDecimal;
                      <code>false</code> otherwise
      @see #isParseBigDecimal
      @since 1.5</div>
<a id="L2667" name="L2667"></a>2667     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setParseBigDecimal(<strong class="reserved">boolean</strong> newValue) <em class="brace">{</em>
<a id="L2668" name="L2668"></a>2668         <a href="../D/29095.html" title="Multiple defined in 2 places.">parseBigDecimal</a> = newValue;
<a id="L2669" name="L2669"></a>2669     <em class="brace">}</em>
<a id="L2670" name="L2670"></a>2670 
<div class="comment">
      Standard override; no change in semantics.</div>
<a id="L2674" name="L2674"></a>2674     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2675" name="L2675"></a>2675     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <em class="brace">{</em>
<a id="L2676" name="L2676"></a>2676         <a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a> other = (<a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a>) <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L2677" name="L2677"></a>2677         other.symbols = (<a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a>) symbols.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L2678" name="L2678"></a>2678         other.digitList = (<a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a>) digitList.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L2679" name="L2679"></a>2679 
<a id="L2680" name="L2680"></a>2680         <em class="comment">// Fast-path is almost stateless algorithm. The only logical state is the</em>
<a id="L2681" name="L2681"></a>2681         <em class="comment">// isFastPath flag. In addition fastPathCheckNeeded is a sentinel flag</em>
<a id="L2682" name="L2682"></a>2682         <em class="comment">// that forces recalculation of all fast-path fields when set to true.</em>
<a id="L2683" name="L2683"></a>2683         <em class="comment">//</em>
<a id="L2684" name="L2684"></a>2684         <em class="comment">// There is thus no need to clone all the fast-path fields.</em>
<a id="L2685" name="L2685"></a>2685         <em class="comment">// We just only need to set fastPathCheckNeeded to true when cloning,</em>
<a id="L2686" name="L2686"></a>2686         <em class="comment">// and init fastPathData to null as if it were a truly new instance.</em>
<a id="L2687" name="L2687"></a>2687         <em class="comment">// Every fast-path field will be recalculated (only once) at next usage of</em>
<a id="L2688" name="L2688"></a>2688         <em class="comment">// fast-path algorithm.</em>
<a id="L2689" name="L2689"></a>2689         other.fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L2690" name="L2690"></a>2690         other.isFastPath = <strong class="reserved">false</strong>;
<a id="L2691" name="L2691"></a>2691         other.fastPathData = <strong class="reserved">null</strong>;
<a id="L2692" name="L2692"></a>2692 
<a id="L2693" name="L2693"></a>2693         <strong class="reserved">return</strong> other;
<a id="L2694" name="L2694"></a>2694     <em class="brace">}</em>
<a id="L2695" name="L2695"></a>2695 
<div class="comment">
      Overrides equals</div>
<a id="L2699" name="L2699"></a>2699     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2700" name="L2700"></a>2700     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj)
<a id="L2701" name="L2701"></a>2701     <em class="brace">{</em>
<a id="L2702" name="L2702"></a>2702         <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>)
<a id="L2703" name="L2703"></a>2703             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2704" name="L2704"></a>2704         <strong class="reserved">if</strong> (!<strong class="reserved">super</strong>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(obj))
<a id="L2705" name="L2705"></a>2705             <strong class="reserved">return</strong> <strong class="reserved">false</strong>; <em class="comment">// super does class check</em>
<a id="L2706" name="L2706"></a>2706         <a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a> other = (<a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a>) obj;
<a id="L2707" name="L2707"></a>2707         <strong class="reserved">return</strong> ((posPrefixPattern == other.posPrefixPattern &amp;&amp;
<a id="L2708" name="L2708"></a>2708                  positivePrefix.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.positivePrefix))
<a id="L2709" name="L2709"></a>2709                 || (posPrefixPattern != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2710" name="L2710"></a>2710                     posPrefixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.posPrefixPattern)))
<a id="L2711" name="L2711"></a>2711             &amp;&amp; ((posSuffixPattern == other.posSuffixPattern &amp;&amp;
<a id="L2712" name="L2712"></a>2712                  positiveSuffix.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.positiveSuffix))
<a id="L2713" name="L2713"></a>2713                 || (posSuffixPattern != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2714" name="L2714"></a>2714                     posSuffixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.posSuffixPattern)))
<a id="L2715" name="L2715"></a>2715             &amp;&amp; ((negPrefixPattern == other.negPrefixPattern &amp;&amp;
<a id="L2716" name="L2716"></a>2716                  negativePrefix.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.negativePrefix))
<a id="L2717" name="L2717"></a>2717                 || (negPrefixPattern != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2718" name="L2718"></a>2718                     negPrefixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.negPrefixPattern)))
<a id="L2719" name="L2719"></a>2719             &amp;&amp; ((negSuffixPattern == other.negSuffixPattern &amp;&amp;
<a id="L2720" name="L2720"></a>2720                  negativeSuffix.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.negativeSuffix))
<a id="L2721" name="L2721"></a>2721                 || (negSuffixPattern != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2722" name="L2722"></a>2722                     negSuffixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.negSuffixPattern)))
<a id="L2723" name="L2723"></a>2723             &amp;&amp; multiplier == other.multiplier
<a id="L2724" name="L2724"></a>2724             &amp;&amp; groupingSize == other.groupingSize
<a id="L2725" name="L2725"></a>2725             &amp;&amp; decimalSeparatorAlwaysShown == other.decimalSeparatorAlwaysShown
<a id="L2726" name="L2726"></a>2726             &amp;&amp; <a href="../D/29095.html" title="Multiple defined in 2 places.">parseBigDecimal</a> == other.<a href="../D/29095.html" title="Multiple defined in 2 places.">parseBigDecimal</a>
<a id="L2727" name="L2727"></a>2727             &amp;&amp; useExponentialNotation == other.useExponentialNotation
<a id="L2728" name="L2728"></a>2728             &amp;&amp; (!useExponentialNotation ||
<a id="L2729" name="L2729"></a>2729                 minExponentDigits == other.minExponentDigits)
<a id="L2730" name="L2730"></a>2730             &amp;&amp; maximumIntegerDigits == other.maximumIntegerDigits
<a id="L2731" name="L2731"></a>2731             &amp;&amp; minimumIntegerDigits == other.minimumIntegerDigits
<a id="L2732" name="L2732"></a>2732             &amp;&amp; maximumFractionDigits == other.maximumFractionDigits
<a id="L2733" name="L2733"></a>2733             &amp;&amp; minimumFractionDigits == other.minimumFractionDigits
<a id="L2734" name="L2734"></a>2734             &amp;&amp; roundingMode == other.roundingMode
<a id="L2735" name="L2735"></a>2735             &amp;&amp; symbols.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(other.symbols);
<a id="L2736" name="L2736"></a>2736     <em class="brace">}</em>
<a id="L2737" name="L2737"></a>2737 
<div class="comment">
      Overrides hashCode</div>
<a id="L2741" name="L2741"></a>2741     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L2742" name="L2742"></a>2742     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L2743" name="L2743"></a>2743         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>() * 37 + positivePrefix.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L2744" name="L2744"></a>2744         <em class="comment">// just enough fields for a reasonable distribution</em>
<a id="L2745" name="L2745"></a>2745     <em class="brace">}</em>
<a id="L2746" name="L2746"></a>2746 
<div class="comment">
      Synthesizes a pattern string that represents the current state
      of this Format object.
      @return a pattern string
      @see #applyPattern</div>
<a id="L2754" name="L2754"></a>2754     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29311.html" title="Multiple referred from 6 places.">toPattern</a>() <em class="brace">{</em>
<a id="L2755" name="L2755"></a>2755         <strong class="reserved">return</strong> <a href="../D/35465.html" title="Multiple defined in 5 places.">toPattern</a>( <strong class="reserved">false</strong> );
<a id="L2756" name="L2756"></a>2756     <em class="brace">}</em>
<a id="L2757" name="L2757"></a>2757 
<div class="comment">
      Synthesizes a localized pattern string that represents the current
      state of this Format object.
      @return a localized pattern string
      @see #applyPattern</div>
<a id="L2765" name="L2765"></a>2765     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> toLocalizedPattern() <em class="brace">{</em>
<a id="L2766" name="L2766"></a>2766         <strong class="reserved">return</strong> <a href="../D/35465.html" title="Multiple defined in 5 places.">toPattern</a>( <strong class="reserved">true</strong> );
<a id="L2767" name="L2767"></a>2767     <em class="brace">}</em>
<a id="L2768" name="L2768"></a>2768 
<div class="comment">
      Expand the affix pattern strings into the expanded affix strings.  If any
      affix pattern string is null, do not expand it.  This method should be
      called any time the symbols or the affix patterns change in order to keep
      the expanded affix strings up to date.</div>
<a id="L2775" name="L2775"></a>2775     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/14111.html" title="Multiple referred from 3 places.">expandAffixes</a>() <em class="brace">{</em>
<a id="L2776" name="L2776"></a>2776         <em class="comment">// Reuse one StringBuffer for better performance</em>
<a id="L2777" name="L2777"></a>2777         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L2778" name="L2778"></a>2778         <strong class="reserved">if</strong> (posPrefixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2779" name="L2779"></a>2779             positivePrefix = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(posPrefixPattern, <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>);
<a id="L2780" name="L2780"></a>2780             positivePrefixFieldPositions = <strong class="reserved">null</strong>;
<a id="L2781" name="L2781"></a>2781         <em class="brace">}</em>
<a id="L2782" name="L2782"></a>2782         <strong class="reserved">if</strong> (posSuffixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2783" name="L2783"></a>2783             positiveSuffix = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(posSuffixPattern, <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>);
<a id="L2784" name="L2784"></a>2784             positiveSuffixFieldPositions = <strong class="reserved">null</strong>;
<a id="L2785" name="L2785"></a>2785         <em class="brace">}</em>
<a id="L2786" name="L2786"></a>2786         <strong class="reserved">if</strong> (negPrefixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2787" name="L2787"></a>2787             negativePrefix = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(negPrefixPattern, <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>);
<a id="L2788" name="L2788"></a>2788             negativePrefixFieldPositions = <strong class="reserved">null</strong>;
<a id="L2789" name="L2789"></a>2789         <em class="brace">}</em>
<a id="L2790" name="L2790"></a>2790         <strong class="reserved">if</strong> (negSuffixPattern != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2791" name="L2791"></a>2791             negativeSuffix = <a href="../D/15824.html" title="Multiple defined in 2 places.">expandAffix</a>(negSuffixPattern, <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>);
<a id="L2792" name="L2792"></a>2792             negativeSuffixFieldPositions = <strong class="reserved">null</strong>;
<a id="L2793" name="L2793"></a>2793         <em class="brace">}</em>
<a id="L2794" name="L2794"></a>2794     <em class="brace">}</em>
<a id="L2795" name="L2795"></a>2795 
<div class="comment">
      Expand an affix pattern into an affix string.  All characters in the
      pattern are literal unless prefixed by QUOTE.  The following characters
      after QUOTE are recognized: PATTERN_PERCENT, PATTERN_PER_MILLE,
      PATTERN_MINUS, and CURRENCY_SIGN.  If CURRENCY_SIGN is doubled (QUOTE +
      CURRENCY_SIGN + CURRENCY_SIGN), it is interpreted as an ISO 4217
      currency code.  Any other character after a QUOTE represents itself.
      QUOTE must be followed by another character; QUOTE may not occur by
      itself at the end of the pattern.
      @param pattern the non-null, possibly empty pattern
      @param buffer a scratch StringBuffer; its contents will be lost
      @return the expanded equivalent of pattern</div>
<a id="L2810" name="L2810"></a>2810     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14110.html" title="Multiple referred from 8 places.">expandAffix</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>) <em class="brace">{</em>
<a id="L2811" name="L2811"></a>2811         <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/33077.html" title="Multiple defined in 10 places.">setLength</a>(0);
<a id="L2812" name="L2812"></a>2812         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); ) <em class="brace">{</em>
<a id="L2813" name="L2813"></a>2813             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i++);
<a id="L2814" name="L2814"></a>2814             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == QUOTE) <em class="brace">{</em>
<a id="L2815" name="L2815"></a>2815                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i++);
<a id="L2816" name="L2816"></a>2816                 <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L2817" name="L2817"></a>2817                 <strong class="reserved">case</strong> CURRENCY_SIGN:
<a id="L2818" name="L2818"></a>2818                     <strong class="reserved">if</strong> (i&lt;<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L2819" name="L2819"></a>2819                         <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i) == CURRENCY_SIGN) <em class="brace">{</em>
<a id="L2820" name="L2820"></a>2820                         ++i;
<a id="L2821" name="L2821"></a>2821                         <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(symbols.<a href="../S/2462.html#L409" title="Defined at 409 in src/java/text/DecimalFormatSymbols.java.">getInternationalCurrencySymbol</a>());
<a id="L2822" name="L2822"></a>2822                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2823" name="L2823"></a>2823                         <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(symbols.<a href="../S/2462.html#L385" title="Defined at 385 in src/java/text/DecimalFormatSymbols.java.">getCurrencySymbol</a>());
<a id="L2824" name="L2824"></a>2824                     <em class="brace">}</em>
<a id="L2825" name="L2825"></a>2825                     <strong class="reserved">continue</strong>;
<a id="L2826" name="L2826"></a>2826                 <strong class="reserved">case</strong> PATTERN_PERCENT:
<a id="L2827" name="L2827"></a>2827                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../S/2462.html#L265" title="Defined at 265 in src/java/text/DecimalFormatSymbols.java.">getPercent</a>();
<a id="L2828" name="L2828"></a>2828                     <strong class="reserved">break</strong>;
<a id="L2829" name="L2829"></a>2829                 <strong class="reserved">case</strong> PATTERN_PER_MILLE:
<a id="L2830" name="L2830"></a>2830                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../S/2462.html#L247" title="Defined at 247 in src/java/text/DecimalFormatSymbols.java.">getPerMill</a>();
<a id="L2831" name="L2831"></a>2831                     <strong class="reserved">break</strong>;
<a id="L2832" name="L2832"></a>2832                 <strong class="reserved">case</strong> PATTERN_MINUS:
<a id="L2833" name="L2833"></a>2833                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>();
<a id="L2834" name="L2834"></a>2834                     <strong class="reserved">break</strong>;
<a id="L2835" name="L2835"></a>2835                 <em class="brace">}</em>
<a id="L2836" name="L2836"></a>2836             <em class="brace">}</em>
<a id="L2837" name="L2837"></a>2837             <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2838" name="L2838"></a>2838         <em class="brace">}</em>
<a id="L2839" name="L2839"></a>2839         <strong class="reserved">return</strong> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2840" name="L2840"></a>2840     <em class="brace">}</em>
<a id="L2841" name="L2841"></a>2841 
<div class="comment">
      Expand an affix pattern into an array of FieldPositions describing
      how the pattern would be expanded.
      All characters in the
      pattern are literal unless prefixed by QUOTE.  The following characters
      after QUOTE are recognized: PATTERN_PERCENT, PATTERN_PER_MILLE,
      PATTERN_MINUS, and CURRENCY_SIGN.  If CURRENCY_SIGN is doubled (QUOTE +
      CURRENCY_SIGN + CURRENCY_SIGN), it is interpreted as an ISO 4217
      currency code.  Any other character after a QUOTE represents itself.
      QUOTE must be followed by another character; QUOTE may not occur by
      itself at the end of the pattern.
      @param pattern the non-null, possibly empty pattern
      @return FieldPosition array of the resulting fields.</div>
<a id="L2857" name="L2857"></a>2857     <strong class="reserved">private</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] <a href="../R/14110.html" title="Multiple referred from 8 places.">expandAffix</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>) <em class="brace">{</em>
<a id="L2858" name="L2858"></a>2858         <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>&gt; positions = <strong class="reserved">null</strong>;
<a id="L2859" name="L2859"></a>2859         <strong class="reserved">int</strong> stringIndex = 0;
<a id="L2860" name="L2860"></a>2860         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); ) <em class="brace">{</em>
<a id="L2861" name="L2861"></a>2861             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i++);
<a id="L2862" name="L2862"></a>2862             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == QUOTE) <em class="brace">{</em>
<a id="L2863" name="L2863"></a>2863                 <strong class="reserved">int</strong> field = -1;
<a id="L2864" name="L2864"></a>2864                 <a href="../S/2459.html#L133" title="Defined at 133 in src/java/text/Format.java.">Format</a>.<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> fieldID = <strong class="reserved">null</strong>;
<a id="L2865" name="L2865"></a>2865                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i++);
<a id="L2866" name="L2866"></a>2866                 <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L2867" name="L2867"></a>2867                 <strong class="reserved">case</strong> CURRENCY_SIGN:
<a id="L2868" name="L2868"></a>2868                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>;
<a id="L2869" name="L2869"></a>2869                     <strong class="reserved">if</strong> (i&lt;<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L2870" name="L2870"></a>2870                         <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i) == CURRENCY_SIGN) <em class="brace">{</em>
<a id="L2871" name="L2871"></a>2871                         ++i;
<a id="L2872" name="L2872"></a>2872                         <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = symbols.<a href="../S/2462.html#L409" title="Defined at 409 in src/java/text/DecimalFormatSymbols.java.">getInternationalCurrencySymbol</a>();
<a id="L2873" name="L2873"></a>2873                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2874" name="L2874"></a>2874                         <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = symbols.<a href="../S/2462.html#L385" title="Defined at 385 in src/java/text/DecimalFormatSymbols.java.">getCurrencySymbol</a>();
<a id="L2875" name="L2875"></a>2875                     <em class="brace">}</em>
<a id="L2876" name="L2876"></a>2876                     <strong class="reserved">if</strong> (<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L2877" name="L2877"></a>2877                         <strong class="reserved">if</strong> (positions == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2878" name="L2878"></a>2878                             positions = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;&gt;(2);
<a id="L2879" name="L2879"></a>2879                         <em class="brace">}</em>
<a id="L2880" name="L2880"></a>2880                         <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fp = <strong class="reserved">new</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>(<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.CURRENCY);
<a id="L2881" name="L2881"></a>2881                         fp.<a href="../S/2490.html#L193" title="Defined at 193 in src/java/text/FieldPosition.java.">setBeginIndex</a>(stringIndex);
<a id="L2882" name="L2882"></a>2882                         fp.<a href="../S/2490.html#L203" title="Defined at 203 in src/java/text/FieldPosition.java.">setEndIndex</a>(stringIndex + <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L2883" name="L2883"></a>2883                         positions.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(fp);
<a id="L2884" name="L2884"></a>2884                         stringIndex += <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2885" name="L2885"></a>2885                     <em class="brace">}</em>
<a id="L2886" name="L2886"></a>2886                     <strong class="reserved">continue</strong>;
<a id="L2887" name="L2887"></a>2887                 <strong class="reserved">case</strong> PATTERN_PERCENT:
<a id="L2888" name="L2888"></a>2888                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../S/2462.html#L265" title="Defined at 265 in src/java/text/DecimalFormatSymbols.java.">getPercent</a>();
<a id="L2889" name="L2889"></a>2889                     field = -1;
<a id="L2890" name="L2890"></a>2890                     fieldID = <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.PERCENT;
<a id="L2891" name="L2891"></a>2891                     <strong class="reserved">break</strong>;
<a id="L2892" name="L2892"></a>2892                 <strong class="reserved">case</strong> PATTERN_PER_MILLE:
<a id="L2893" name="L2893"></a>2893                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../S/2462.html#L247" title="Defined at 247 in src/java/text/DecimalFormatSymbols.java.">getPerMill</a>();
<a id="L2894" name="L2894"></a>2894                     field = -1;
<a id="L2895" name="L2895"></a>2895                     fieldID = <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.PERMILLE;
<a id="L2896" name="L2896"></a>2896                     <strong class="reserved">break</strong>;
<a id="L2897" name="L2897"></a>2897                 <strong class="reserved">case</strong> PATTERN_MINUS:
<a id="L2898" name="L2898"></a>2898                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>();
<a id="L2899" name="L2899"></a>2899                     field = -1;
<a id="L2900" name="L2900"></a>2900                     fieldID = <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>.SIGN;
<a id="L2901" name="L2901"></a>2901                     <strong class="reserved">break</strong>;
<a id="L2902" name="L2902"></a>2902                 <em class="brace">}</em>
<a id="L2903" name="L2903"></a>2903                 <strong class="reserved">if</strong> (fieldID != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2904" name="L2904"></a>2904                     <strong class="reserved">if</strong> (positions == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2905" name="L2905"></a>2905                         positions = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;&gt;(2);
<a id="L2906" name="L2906"></a>2906                     <em class="brace">}</em>
<a id="L2907" name="L2907"></a>2907                     <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a> fp = <strong class="reserved">new</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>(fieldID, field);
<a id="L2908" name="L2908"></a>2908                     fp.<a href="../S/2490.html#L193" title="Defined at 193 in src/java/text/FieldPosition.java.">setBeginIndex</a>(stringIndex);
<a id="L2909" name="L2909"></a>2909                     fp.<a href="../S/2490.html#L203" title="Defined at 203 in src/java/text/FieldPosition.java.">setEndIndex</a>(stringIndex + 1);
<a id="L2910" name="L2910"></a>2910                     positions.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(fp);
<a id="L2911" name="L2911"></a>2911                 <em class="brace">}</em>
<a id="L2912" name="L2912"></a>2912             <em class="brace">}</em>
<a id="L2913" name="L2913"></a>2913             stringIndex++;
<a id="L2914" name="L2914"></a>2914         <em class="brace">}</em>
<a id="L2915" name="L2915"></a>2915         <strong class="reserved">if</strong> (positions != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2916" name="L2916"></a>2916             <strong class="reserved">return</strong> positions.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(EmptyFieldPositionArray);
<a id="L2917" name="L2917"></a>2917         <em class="brace">}</em>
<a id="L2918" name="L2918"></a>2918         <strong class="reserved">return</strong> EmptyFieldPositionArray;
<a id="L2919" name="L2919"></a>2919     <em class="brace">}</em>
<a id="L2920" name="L2920"></a>2920 
<div class="comment">
      Appends an affix pattern to the given StringBuffer, quoting special
      characters as needed.  Uses the internal affix pattern, if that exists,
      or the literal affix, if the internal affix pattern is null.  The
      appended string will generate the same affix pattern (or literal affix)
      when passed to toPattern().
      @param buffer the affix string is appended to this
      @param affixPattern a pattern such as posPrefixPattern; may be null
      @param expAffix a corresponding expanded affix, such as positivePrefix.
      Ignored unless affixPattern is null.  If affixPattern is null, then
      expAffix is appended as a literal affix.
      @param localized true if the appended pattern should contain localized
      pattern characters; otherwise, non-localized pattern chars are appended</div>
<a id="L2936" name="L2936"></a>2936     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10192.html" title="Multiple referred from 7 places.">appendAffix</a>(<a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> affixPattern,
<a id="L2937" name="L2937"></a>2937                              <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> expAffix, <strong class="reserved">boolean</strong> localized) <em class="brace">{</em>
<a id="L2938" name="L2938"></a>2938         <strong class="reserved">if</strong> (affixPattern == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2939" name="L2939"></a>2939             <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>, expAffix, localized);
<a id="L2940" name="L2940"></a>2940         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2941" name="L2941"></a>2941             <strong class="reserved">int</strong> i;
<a id="L2942" name="L2942"></a>2942             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> pos=0; pos&lt;affixPattern.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); pos=i) <em class="brace">{</em>
<a id="L2943" name="L2943"></a>2943                 i = affixPattern.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(QUOTE, pos);
<a id="L2944" name="L2944"></a>2944                 <strong class="reserved">if</strong> (i &lt; 0) <em class="brace">{</em>
<a id="L2945" name="L2945"></a>2945                     <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>, affixPattern.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos), localized);
<a id="L2946" name="L2946"></a>2946                     <strong class="reserved">break</strong>;
<a id="L2947" name="L2947"></a>2947                 <em class="brace">}</em>
<a id="L2948" name="L2948"></a>2948                 <strong class="reserved">if</strong> (i &gt; pos) <em class="brace">{</em>
<a id="L2949" name="L2949"></a>2949                     <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>, affixPattern.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(pos, i), localized);
<a id="L2950" name="L2950"></a>2950                 <em class="brace">}</em>
<a id="L2951" name="L2951"></a>2951                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = affixPattern.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(++i);
<a id="L2952" name="L2952"></a>2952                 ++i;
<a id="L2953" name="L2953"></a>2953                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == QUOTE) <em class="brace">{</em>
<a id="L2954" name="L2954"></a>2954                     <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2955" name="L2955"></a>2955                     <em class="comment">// Fall through and append another QUOTE below</em>
<a id="L2956" name="L2956"></a>2956                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == CURRENCY_SIGN &amp;&amp;
<a id="L2957" name="L2957"></a>2957                            i&lt;affixPattern.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L2958" name="L2958"></a>2958                            affixPattern.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i) == CURRENCY_SIGN) <em class="brace">{</em>
<a id="L2959" name="L2959"></a>2959                     ++i;
<a id="L2960" name="L2960"></a>2960                     <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2961" name="L2961"></a>2961                     <em class="comment">// Fall through and append another CURRENCY_SIGN below</em>
<a id="L2962" name="L2962"></a>2962                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (localized) <em class="brace">{</em>
<a id="L2963" name="L2963"></a>2963                     <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L2964" name="L2964"></a>2964                     <strong class="reserved">case</strong> PATTERN_PERCENT:
<a id="L2965" name="L2965"></a>2965                         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../S/2462.html#L265" title="Defined at 265 in src/java/text/DecimalFormatSymbols.java.">getPercent</a>();
<a id="L2966" name="L2966"></a>2966                         <strong class="reserved">break</strong>;
<a id="L2967" name="L2967"></a>2967                     <strong class="reserved">case</strong> PATTERN_PER_MILLE:
<a id="L2968" name="L2968"></a>2968                         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../S/2462.html#L247" title="Defined at 247 in src/java/text/DecimalFormatSymbols.java.">getPerMill</a>();
<a id="L2969" name="L2969"></a>2969                         <strong class="reserved">break</strong>;
<a id="L2970" name="L2970"></a>2970                     <strong class="reserved">case</strong> PATTERN_MINUS:
<a id="L2971" name="L2971"></a>2971                         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>();
<a id="L2972" name="L2972"></a>2972                         <strong class="reserved">break</strong>;
<a id="L2973" name="L2973"></a>2973                     <em class="brace">}</em>
<a id="L2974" name="L2974"></a>2974                 <em class="brace">}</em>
<a id="L2975" name="L2975"></a>2975                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2976" name="L2976"></a>2976             <em class="brace">}</em>
<a id="L2977" name="L2977"></a>2977         <em class="brace">}</em>
<a id="L2978" name="L2978"></a>2978     <em class="brace">}</em>
<a id="L2979" name="L2979"></a>2979 
<div class="comment">
      Append an affix to the given StringBuffer, using quotes if
      there are special characters.  Single quotes themselves must be
      escaped in either case.</div>
<a id="L2985" name="L2985"></a>2985     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10192.html" title="Multiple referred from 7 places.">appendAffix</a>(<a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> affix, <strong class="reserved">boolean</strong> localized) <em class="brace">{</em>
<a id="L2986" name="L2986"></a>2986         <strong class="reserved">boolean</strong> needQuote;
<a id="L2987" name="L2987"></a>2987         <strong class="reserved">if</strong> (localized) <em class="brace">{</em>
<a id="L2988" name="L2988"></a>2988             needQuote = affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>()) &gt;= 0
<a id="L2989" name="L2989"></a>2989                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../S/2462.html#L211" title="Defined at 211 in src/java/text/DecimalFormatSymbols.java.">getGroupingSeparator</a>()) &gt;= 0
<a id="L2990" name="L2990"></a>2990                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../D/18238.html" title="Multiple defined in 3 places.">getDecimalSeparator</a>()) &gt;= 0
<a id="L2991" name="L2991"></a>2991                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../S/2462.html#L265" title="Defined at 265 in src/java/text/DecimalFormatSymbols.java.">getPercent</a>()) &gt;= 0
<a id="L2992" name="L2992"></a>2992                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../S/2462.html#L247" title="Defined at 247 in src/java/text/DecimalFormatSymbols.java.">getPerMill</a>()) &gt;= 0
<a id="L2993" name="L2993"></a>2993                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../D/18477.html" title="Multiple defined in 3 places.">getDigit</a>()) &gt;= 0
<a id="L2994" name="L2994"></a>2994                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../S/2462.html#L302" title="Defined at 302 in src/java/text/DecimalFormatSymbols.java.">getPatternSeparator</a>()) &gt;= 0
<a id="L2995" name="L2995"></a>2995                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>()) &gt;= 0
<a id="L2996" name="L2996"></a>2996                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(CURRENCY_SIGN) &gt;= 0;
<a id="L2997" name="L2997"></a>2997         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2998" name="L2998"></a>2998             needQuote = affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_ZERO_DIGIT) &gt;= 0
<a id="L2999" name="L2999"></a>2999                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_GROUPING_SEPARATOR) &gt;= 0
<a id="L3000" name="L3000"></a>3000                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_DECIMAL_SEPARATOR) &gt;= 0
<a id="L3001" name="L3001"></a>3001                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_PERCENT) &gt;= 0
<a id="L3002" name="L3002"></a>3002                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_PER_MILLE) &gt;= 0
<a id="L3003" name="L3003"></a>3003                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_DIGIT) &gt;= 0
<a id="L3004" name="L3004"></a>3004                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_SEPARATOR) &gt;= 0
<a id="L3005" name="L3005"></a>3005                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(PATTERN_MINUS) &gt;= 0
<a id="L3006" name="L3006"></a>3006                 || affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(CURRENCY_SIGN) &gt;= 0;
<a id="L3007" name="L3007"></a>3007         <em class="brace">}</em>
<a id="L3008" name="L3008"></a>3008         <strong class="reserved">if</strong> (needQuote) <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('\'');
<a id="L3009" name="L3009"></a>3009         <strong class="reserved">if</strong> (affix.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('\'') &lt; 0) <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(affix);
<a id="L3010" name="L3010"></a>3010         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3011" name="L3011"></a>3011             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j=0; j&lt;affix.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); ++j) <em class="brace">{</em>
<a id="L3012" name="L3012"></a>3012                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = affix.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(j);
<a id="L3013" name="L3013"></a>3013                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L3014" name="L3014"></a>3014                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\'') <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L3015" name="L3015"></a>3015             <em class="brace">}</em>
<a id="L3016" name="L3016"></a>3016         <em class="brace">}</em>
<a id="L3017" name="L3017"></a>3017         <strong class="reserved">if</strong> (needQuote) <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('\'');
<a id="L3018" name="L3018"></a>3018     <em class="brace">}</em>
<a id="L3019" name="L3019"></a>3019 
<div class="comment">
     * Does the real work of generating a pattern.  </div>
<a id="L3022" name="L3022"></a>3022     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29311.html" title="Multiple referred from 6 places.">toPattern</a>(<strong class="reserved">boolean</strong> localized) <em class="brace">{</em>
<a id="L3023" name="L3023"></a>3023         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L3024" name="L3024"></a>3024         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 1; j &gt;= 0; --j) <em class="brace">{</em>
<a id="L3025" name="L3025"></a>3025             <strong class="reserved">if</strong> (j == 1)
<a id="L3026" name="L3026"></a>3026                 <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, posPrefixPattern, positivePrefix, localized);
<a id="L3027" name="L3027"></a>3027             <strong class="reserved">else</strong> <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, negPrefixPattern, negativePrefix, localized);
<a id="L3028" name="L3028"></a>3028             <strong class="reserved">int</strong> i;
<a id="L3029" name="L3029"></a>3029             <strong class="reserved">int</strong> digitCount = useExponentialNotation
<a id="L3030" name="L3030"></a>3030                         ? <a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>()
<a id="L3031" name="L3031"></a>3031                         : <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(groupingSize, <a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>())+1;
<a id="L3032" name="L3032"></a>3032             <strong class="reserved">for</strong> (i = digitCount; i &gt; 0; --i) <em class="brace">{</em>
<a id="L3033" name="L3033"></a>3033                 <strong class="reserved">if</strong> (i != digitCount &amp;&amp; <a href="../S/2488.html#L647" title="Defined at 647 in src/java/text/NumberFormat.java.">isGroupingUsed</a>() &amp;&amp; groupingSize != 0 &amp;&amp;
<a id="L3034" name="L3034"></a>3034                     i % groupingSize == 0) <em class="brace">{</em>
<a id="L3035" name="L3035"></a>3035                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../S/2462.html#L211" title="Defined at 211 in src/java/text/DecimalFormatSymbols.java.">getGroupingSeparator</a>() :
<a id="L3036" name="L3036"></a>3036                                   PATTERN_GROUPING_SEPARATOR);
<a id="L3037" name="L3037"></a>3037                 <em class="brace">}</em>
<a id="L3038" name="L3038"></a>3038                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(i &lt;= <a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>()
<a id="L3039" name="L3039"></a>3039                     ? (localized ? symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>() : PATTERN_ZERO_DIGIT)
<a id="L3040" name="L3040"></a>3040                     : (localized ? symbols.<a href="../D/18477.html" title="Multiple defined in 3 places.">getDigit</a>() : PATTERN_DIGIT));
<a id="L3041" name="L3041"></a>3041             <em class="brace">}</em>
<a id="L3042" name="L3042"></a>3042             <strong class="reserved">if</strong> (<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>() &gt; 0 || decimalSeparatorAlwaysShown)
<a id="L3043" name="L3043"></a>3043                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../D/18238.html" title="Multiple defined in 3 places.">getDecimalSeparator</a>() :
<a id="L3044" name="L3044"></a>3044                               PATTERN_DECIMAL_SEPARATOR);
<a id="L3045" name="L3045"></a>3045             <strong class="reserved">for</strong> (i = 0; i &lt; <a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>(); ++i) <em class="brace">{</em>
<a id="L3046" name="L3046"></a>3046                 <strong class="reserved">if</strong> (i &lt; <a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>()) <em class="brace">{</em>
<a id="L3047" name="L3047"></a>3047                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>() :
<a id="L3048" name="L3048"></a>3048                                   PATTERN_ZERO_DIGIT);
<a id="L3049" name="L3049"></a>3049                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3050" name="L3050"></a>3050                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../D/18477.html" title="Multiple defined in 3 places.">getDigit</a>() :
<a id="L3051" name="L3051"></a>3051                                   PATTERN_DIGIT);
<a id="L3052" name="L3052"></a>3052                 <em class="brace">}</em>
<a id="L3053" name="L3053"></a>3053             <em class="brace">}</em>
<a id="L3054" name="L3054"></a>3054         <strong class="reserved">if</strong> (useExponentialNotation)
<a id="L3055" name="L3055"></a>3055         <em class="brace">{</em>
<a id="L3056" name="L3056"></a>3056             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../S/2462.html#L518" title="Defined at 518 in src/java/text/DecimalFormatSymbols.java.">getExponentSeparator</a>() :
<a id="L3057" name="L3057"></a>3057                   PATTERN_EXPONENT);
<a id="L3058" name="L3058"></a>3058         <strong class="reserved">for</strong> (i=0; i&lt;minExponentDigits; ++i)
<a id="L3059" name="L3059"></a>3059                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>() :
<a id="L3060" name="L3060"></a>3060                                   PATTERN_ZERO_DIGIT);
<a id="L3061" name="L3061"></a>3061         <em class="brace">}</em>
<a id="L3062" name="L3062"></a>3062             <strong class="reserved">if</strong> (j == 1) <em class="brace">{</em>
<a id="L3063" name="L3063"></a>3063                 <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, posSuffixPattern, positiveSuffix, localized);
<a id="L3064" name="L3064"></a>3064                 <strong class="reserved">if</strong> ((negSuffixPattern == posSuffixPattern &amp;&amp; <em class="comment">// n == p == null</em>
<a id="L3065" name="L3065"></a>3065                      negativeSuffix.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(positiveSuffix))
<a id="L3066" name="L3066"></a>3066                     || (negSuffixPattern != <strong class="reserved">null</strong> &amp;&amp;
<a id="L3067" name="L3067"></a>3067                         negSuffixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(posSuffixPattern))) <em class="brace">{</em>
<a id="L3068" name="L3068"></a>3068                     <strong class="reserved">if</strong> ((negPrefixPattern != <strong class="reserved">null</strong> &amp;&amp; posPrefixPattern != <strong class="reserved">null</strong> &amp;&amp;
<a id="L3069" name="L3069"></a>3069                          negPrefixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("'-" + posPrefixPattern)) ||
<a id="L3070" name="L3070"></a>3070                         (negPrefixPattern == posPrefixPattern &amp;&amp; <em class="comment">// n == p == null</em>
<a id="L3071" name="L3071"></a>3071                          negativePrefix.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>() + positivePrefix)))
<a id="L3072" name="L3072"></a>3072                         <strong class="reserved">break</strong>;
<a id="L3073" name="L3073"></a>3073                 <em class="brace">}</em>
<a id="L3074" name="L3074"></a>3074                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(localized ? symbols.<a href="../S/2462.html#L302" title="Defined at 302 in src/java/text/DecimalFormatSymbols.java.">getPatternSeparator</a>() :
<a id="L3075" name="L3075"></a>3075                               PATTERN_SEPARATOR);
<a id="L3076" name="L3076"></a>3076             <em class="brace">}</em> <strong class="reserved">else</strong> <a href="../D/11360.html" title="Multiple defined in 2 places.">appendAffix</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, negSuffixPattern, negativeSuffix, localized);
<a id="L3077" name="L3077"></a>3077         <em class="brace">}</em>
<a id="L3078" name="L3078"></a>3078         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3079" name="L3079"></a>3079     <em class="brace">}</em>
<a id="L3080" name="L3080"></a>3080 
<div class="comment">
      Apply the given pattern to this Format object.  A pattern is a
      short-hand specification for the various formatting properties.
      These properties can also be changed individually through the
      various setter methods.
      <p>
      There is no limit to integer digits set
      by this routine, since that is the typical end-user desire;
      use setMaximumInteger if you want to set a real value.
      For negative numbers, use a second pattern, separated by a semicolon
      </p><p>Example <code>"#,#00.0#"</code> → 1,234.56
      </p><p>This means a minimum of 2 integer digits, 1 fraction digit, and
      a maximum of 2 fraction digits.
      </p><p>Example: <code>"#,#00.0#;(#,#00.0#)"</code> for negatives in
      parentheses.
      </p><p>In negative patterns, the minimum and maximum counts are ignored;
      these are presumed to be set in the positive pattern.
      @param pattern a new pattern
      @exception NullPointerException if <code>pattern</code> is null
      @exception IllegalArgumentException if the given pattern is invalid.</p></div>
<a id="L3103" name="L3103"></a>3103     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10279.html" title="Multiple referred from 9 places.">applyPattern</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>) <em class="brace">{</em>
<a id="L3104" name="L3104"></a>3104         <a href="../D/11458.html" title="Multiple defined in 5 places.">applyPattern</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <strong class="reserved">false</strong>);
<a id="L3105" name="L3105"></a>3105     <em class="brace">}</em>
<a id="L3106" name="L3106"></a>3106 
<div class="comment">
      Apply the given pattern to this Format object.  The pattern
      is assumed to be in a localized notation. A pattern is a
      short-hand specification for the various formatting properties.
      These properties can also be changed individually through the
      various setter methods.
      <p>
      There is no limit to integer digits set
      by this routine, since that is the typical end-user desire;
      use setMaximumInteger if you want to set a real value.
      For negative numbers, use a second pattern, separated by a semicolon
      </p><p>Example <code>"#,#00.0#"</code> → 1,234.56
      </p><p>This means a minimum of 2 integer digits, 1 fraction digit, and
      a maximum of 2 fraction digits.
      </p><p>Example: <code>"#,#00.0#;(#,#00.0#)"</code> for negatives in
      parentheses.
      </p><p>In negative patterns, the minimum and maximum counts are ignored;
      these are presumed to be set in the positive pattern.
      @param pattern a new pattern
      @exception NullPointerException if <code>pattern</code> is null
      @exception IllegalArgumentException if the given pattern is invalid.</p></div>
<a id="L3130" name="L3130"></a>3130     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5978.html#L1001" title="Referred from 1001 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">applyLocalizedPattern</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>) <em class="brace">{</em>
<a id="L3131" name="L3131"></a>3131         <a href="../D/11458.html" title="Multiple defined in 5 places.">applyPattern</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <strong class="reserved">true</strong>);
<a id="L3132" name="L3132"></a>3132     <em class="brace">}</em>
<a id="L3133" name="L3133"></a>3133 
<div class="comment">
      Does the real work of applying a pattern.</div>
<a id="L3137" name="L3137"></a>3137     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10279.html" title="Multiple referred from 9 places.">applyPattern</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>, <strong class="reserved">boolean</strong> localized) <em class="brace">{</em>
<a id="L3138" name="L3138"></a>3138         <strong class="reserved">char</strong> zeroDigit         = PATTERN_ZERO_DIGIT;
<a id="L3139" name="L3139"></a>3139         <strong class="reserved">char</strong> groupingSeparator = PATTERN_GROUPING_SEPARATOR;
<a id="L3140" name="L3140"></a>3140         <strong class="reserved">char</strong> decimalSeparator  = PATTERN_DECIMAL_SEPARATOR;
<a id="L3141" name="L3141"></a>3141         <strong class="reserved">char</strong> percent           = PATTERN_PERCENT;
<a id="L3142" name="L3142"></a>3142         <strong class="reserved">char</strong> perMill           = PATTERN_PER_MILLE;
<a id="L3143" name="L3143"></a>3143         <strong class="reserved">char</strong> <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>             = PATTERN_DIGIT;
<a id="L3144" name="L3144"></a>3144         <strong class="reserved">char</strong> <a href="../D/31774.html" title="Multiple defined in 7 places.">separator</a>         = PATTERN_SEPARATOR;
<a id="L3145" name="L3145"></a>3145         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>          = PATTERN_EXPONENT;
<a id="L3146" name="L3146"></a>3146         <strong class="reserved">char</strong> <a href="../D/27709.html" title="Multiple defined in 46 places.">minus</a>             = PATTERN_MINUS;
<a id="L3147" name="L3147"></a>3147         <strong class="reserved">if</strong> (localized) <em class="brace">{</em>
<a id="L3148" name="L3148"></a>3148             zeroDigit         = symbols.<a href="../D/23813.html" title="Multiple defined in 2 places.">getZeroDigit</a>();
<a id="L3149" name="L3149"></a>3149             groupingSeparator = symbols.<a href="../S/2462.html#L211" title="Defined at 211 in src/java/text/DecimalFormatSymbols.java.">getGroupingSeparator</a>();
<a id="L3150" name="L3150"></a>3150             decimalSeparator  = symbols.<a href="../D/18238.html" title="Multiple defined in 3 places.">getDecimalSeparator</a>();
<a id="L3151" name="L3151"></a>3151             percent           = symbols.<a href="../S/2462.html#L265" title="Defined at 265 in src/java/text/DecimalFormatSymbols.java.">getPercent</a>();
<a id="L3152" name="L3152"></a>3152             perMill           = symbols.<a href="../S/2462.html#L247" title="Defined at 247 in src/java/text/DecimalFormatSymbols.java.">getPerMill</a>();
<a id="L3153" name="L3153"></a>3153             <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>             = symbols.<a href="../D/18477.html" title="Multiple defined in 3 places.">getDigit</a>();
<a id="L3154" name="L3154"></a>3154             <a href="../D/31774.html" title="Multiple defined in 7 places.">separator</a>         = symbols.<a href="../S/2462.html#L302" title="Defined at 302 in src/java/text/DecimalFormatSymbols.java.">getPatternSeparator</a>();
<a id="L3155" name="L3155"></a>3155             <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>          = symbols.<a href="../S/2462.html#L518" title="Defined at 518 in src/java/text/DecimalFormatSymbols.java.">getExponentSeparator</a>();
<a id="L3156" name="L3156"></a>3156             <a href="../D/27709.html" title="Multiple defined in 46 places.">minus</a>             = symbols.<a href="../D/20680.html" title="Multiple defined in 2 places.">getMinusSign</a>();
<a id="L3157" name="L3157"></a>3157         <em class="brace">}</em>
<a id="L3158" name="L3158"></a>3158         <strong class="reserved">boolean</strong> gotNegative = <strong class="reserved">false</strong>;
<a id="L3159" name="L3159"></a>3159         decimalSeparatorAlwaysShown = <strong class="reserved">false</strong>;
<a id="L3160" name="L3160"></a>3160         isCurrencyFormat = <strong class="reserved">false</strong>;
<a id="L3161" name="L3161"></a>3161         useExponentialNotation = <strong class="reserved">false</strong>;
<a id="L3162" name="L3162"></a>3162 
<a id="L3163" name="L3163"></a>3163         <em class="comment">// Two variables are used to record the subrange of the pattern</em>
<a id="L3164" name="L3164"></a>3164         <em class="comment">// occupied by phase 1.  This is used during the processing of the</em>
<a id="L3165" name="L3165"></a>3165         <em class="comment">// second pattern (the one representing negative numbers) to ensure</em>
<a id="L3166" name="L3166"></a>3166         <em class="comment">// that no deviation exists in phase 1 between the two patterns.</em>
<a id="L3167" name="L3167"></a>3167         <strong class="reserved">int</strong> phaseOneStart = 0;
<a id="L3168" name="L3168"></a>3168         <strong class="reserved">int</strong> phaseOneLength = 0;
<a id="L3169" name="L3169"></a>3169 
<a id="L3170" name="L3170"></a>3170         <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = 0;
<a id="L3171" name="L3171"></a>3171         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 1; j &gt;= 0 &amp;&amp; <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); --j) <em class="brace">{</em>
<a id="L3172" name="L3172"></a>3172             <strong class="reserved">boolean</strong> inQuote = <strong class="reserved">false</strong>;
<a id="L3173" name="L3173"></a>3173             <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L3174" name="L3174"></a>3174             <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> suffix = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L3175" name="L3175"></a>3175             <strong class="reserved">int</strong> decimalPos = -1;
<a id="L3176" name="L3176"></a>3176             <strong class="reserved">int</strong> multiplier = 1;
<a id="L3177" name="L3177"></a>3177             <strong class="reserved">int</strong> digitLeftCount = 0, zeroDigitCount = 0, digitRightCount = 0;
<a id="L3178" name="L3178"></a>3178             <strong class="reserved">byte</strong> groupingCount = -1;
<a id="L3179" name="L3179"></a>3179 
<a id="L3180" name="L3180"></a>3180             <em class="comment">// The phase ranges from 0 to 2.  Phase 0 is the prefix.  Phase 1 is</em>
<a id="L3181" name="L3181"></a>3181             <em class="comment">// the section of the pattern with digits, decimal separator,</em>
<a id="L3182" name="L3182"></a>3182             <em class="comment">// grouping characters.  Phase 2 is the suffix.  In phases 0 and 2,</em>
<a id="L3183" name="L3183"></a>3183             <em class="comment">// percent, per mille, and currency symbols are recognized and</em>
<a id="L3184" name="L3184"></a>3184             <em class="comment">// translated.  The separation of the characters into phases is</em>
<a id="L3185" name="L3185"></a>3185             <em class="comment">// strictly enforced; if phase 1 characters are to appear in the</em>
<a id="L3186" name="L3186"></a>3186             <em class="comment">// suffix, for example, they must be quoted.</em>
<a id="L3187" name="L3187"></a>3187             <strong class="reserved">int</strong> phase = 0;
<a id="L3188" name="L3188"></a>3188 
<a id="L3189" name="L3189"></a>3189             <em class="comment">// The affix is either the prefix or the suffix.</em>
<a id="L3190" name="L3190"></a>3190             <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> affix = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L3191" name="L3191"></a>3191 
<a id="L3192" name="L3192"></a>3192             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> pos = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>; pos &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); ++pos) <em class="brace">{</em>
<a id="L3193" name="L3193"></a>3193                 <strong class="reserved">char</strong> ch = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(pos);
<a id="L3194" name="L3194"></a>3194                 <strong class="reserved">switch</strong> (phase) <em class="brace">{</em>
<a id="L3195" name="L3195"></a>3195                 <strong class="reserved">case</strong> 0:
<a id="L3196" name="L3196"></a>3196                 <strong class="reserved">case</strong> 2:
<a id="L3197" name="L3197"></a>3197                     <em class="comment">// Process the prefix / suffix characters</em>
<a id="L3198" name="L3198"></a>3198                     <strong class="reserved">if</strong> (inQuote) <em class="brace">{</em>
<a id="L3199" name="L3199"></a>3199                         <em class="comment">// A quote within quotes indicates either the closing</em>
<a id="L3200" name="L3200"></a>3200                         <em class="comment">// quote or two quotes, which is a quote literal. That</em>
<a id="L3201" name="L3201"></a>3201                         <em class="comment">// is, we have the second quote in 'do' or 'don''t'.</em>
<a id="L3202" name="L3202"></a>3202                         <strong class="reserved">if</strong> (ch == QUOTE) <em class="brace">{</em>
<a id="L3203" name="L3203"></a>3203                             <strong class="reserved">if</strong> ((pos+1) &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L3204" name="L3204"></a>3204                                 <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(pos+1) == QUOTE) <em class="brace">{</em>
<a id="L3205" name="L3205"></a>3205                                 ++pos;
<a id="L3206" name="L3206"></a>3206                                 affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("''"); <em class="comment">// 'don''t'</em>
<a id="L3207" name="L3207"></a>3207                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3208" name="L3208"></a>3208                                 inQuote = <strong class="reserved">false</strong>; <em class="comment">// 'do'</em>
<a id="L3209" name="L3209"></a>3209                             <em class="brace">}</em>
<a id="L3210" name="L3210"></a>3210                             <strong class="reserved">continue</strong>;
<a id="L3211" name="L3211"></a>3211                         <em class="brace">}</em>
<a id="L3212" name="L3212"></a>3212                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3213" name="L3213"></a>3213                         <em class="comment">// Process unquoted characters seen in prefix or suffix</em>
<a id="L3214" name="L3214"></a>3214                         <em class="comment">// phase.</em>
<a id="L3215" name="L3215"></a>3215                         <strong class="reserved">if</strong> (ch == <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a> ||
<a id="L3216" name="L3216"></a>3216                             ch == zeroDigit ||
<a id="L3217" name="L3217"></a>3217                             ch == groupingSeparator ||
<a id="L3218" name="L3218"></a>3218                             ch == decimalSeparator) <em class="brace">{</em>
<a id="L3219" name="L3219"></a>3219                             phase = 1;
<a id="L3220" name="L3220"></a>3220                             <strong class="reserved">if</strong> (j == 1) <em class="brace">{</em>
<a id="L3221" name="L3221"></a>3221                                 phaseOneStart = pos;
<a id="L3222" name="L3222"></a>3222                             <em class="brace">}</em>
<a id="L3223" name="L3223"></a>3223                             --pos; <em class="comment">// Reprocess this character</em>
<a id="L3224" name="L3224"></a>3224                             <strong class="reserved">continue</strong>;
<a id="L3225" name="L3225"></a>3225                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == CURRENCY_SIGN) <em class="brace">{</em>
<a id="L3226" name="L3226"></a>3226                             <em class="comment">// Use lookahead to determine if the currency sign</em>
<a id="L3227" name="L3227"></a>3227                             <em class="comment">// is doubled or not.</em>
<a id="L3228" name="L3228"></a>3228                             <strong class="reserved">boolean</strong> doubled = (pos + 1) &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L3229" name="L3229"></a>3229                                 <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(pos + 1) == CURRENCY_SIGN;
<a id="L3230" name="L3230"></a>3230                             <strong class="reserved">if</strong> (doubled) <em class="brace">{</em> <em class="comment">// Skip over the doubled character</em>
<a id="L3231" name="L3231"></a>3231                              ++pos;
<a id="L3232" name="L3232"></a>3232                             <em class="brace">}</em>
<a id="L3233" name="L3233"></a>3233                             isCurrencyFormat = <strong class="reserved">true</strong>;
<a id="L3234" name="L3234"></a>3234                             affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(doubled ? "'\u00A4\u00A4" : "'\u00A4");
<a id="L3235" name="L3235"></a>3235                             <strong class="reserved">continue</strong>;
<a id="L3236" name="L3236"></a>3236                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == QUOTE) <em class="brace">{</em>
<a id="L3237" name="L3237"></a>3237                             <em class="comment">// A quote outside quotes indicates either the</em>
<a id="L3238" name="L3238"></a>3238                             <em class="comment">// opening quote or two quotes, which is a quote</em>
<a id="L3239" name="L3239"></a>3239                             <em class="comment">// literal. That is, we have the first quote in 'do'</em>
<a id="L3240" name="L3240"></a>3240                             <em class="comment">// or o''clock.</em>
<a id="L3241" name="L3241"></a>3241                             <strong class="reserved">if</strong> (ch == QUOTE) <em class="brace">{</em>
<a id="L3242" name="L3242"></a>3242                                 <strong class="reserved">if</strong> ((pos+1) &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L3243" name="L3243"></a>3243                                     <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(pos+1) == QUOTE) <em class="brace">{</em>
<a id="L3244" name="L3244"></a>3244                                     ++pos;
<a id="L3245" name="L3245"></a>3245                                     affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("''"); <em class="comment">// o''clock</em>
<a id="L3246" name="L3246"></a>3246                                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3247" name="L3247"></a>3247                                     inQuote = <strong class="reserved">true</strong>; <em class="comment">// 'do'</em>
<a id="L3248" name="L3248"></a>3248                                 <em class="brace">}</em>
<a id="L3249" name="L3249"></a>3249                                 <strong class="reserved">continue</strong>;
<a id="L3250" name="L3250"></a>3250                             <em class="brace">}</em>
<a id="L3251" name="L3251"></a>3251                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == <a href="../D/31774.html" title="Multiple defined in 7 places.">separator</a>) <em class="brace">{</em>
<a id="L3252" name="L3252"></a>3252                             <em class="comment">// Don't allow separators before we see digit</em>
<a id="L3253" name="L3253"></a>3253                             <em class="comment">// characters of phase 1, and don't allow separators</em>
<a id="L3254" name="L3254"></a>3254                             <em class="comment">// in the second pattern (j == 0).</em>
<a id="L3255" name="L3255"></a>3255                             <strong class="reserved">if</strong> (phase == 0 || j == 0) <em class="brace">{</em>
<a id="L3256" name="L3256"></a>3256                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unquoted special character '" +
<a id="L3257" name="L3257"></a>3257                                     ch + "' in pattern \"" + <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3258" name="L3258"></a>3258                             <em class="brace">}</em>
<a id="L3259" name="L3259"></a>3259                             <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = pos + 1;
<a id="L3260" name="L3260"></a>3260                             pos = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L3261" name="L3261"></a>3261                             <strong class="reserved">continue</strong>;
<a id="L3262" name="L3262"></a>3262                         <em class="brace">}</em>
<a id="L3263" name="L3263"></a>3263 
<a id="L3264" name="L3264"></a>3264                         <em class="comment">// Next handle characters which are appended directly.</em>
<a id="L3265" name="L3265"></a>3265                         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == percent) <em class="brace">{</em>
<a id="L3266" name="L3266"></a>3266                             <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L3267" name="L3267"></a>3267                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Too many percent/per mille characters in pattern \"" +
<a id="L3268" name="L3268"></a>3268                                     <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3269" name="L3269"></a>3269                             <em class="brace">}</em>
<a id="L3270" name="L3270"></a>3270                             multiplier = 100;
<a id="L3271" name="L3271"></a>3271                             affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("'%");
<a id="L3272" name="L3272"></a>3272                             <strong class="reserved">continue</strong>;
<a id="L3273" name="L3273"></a>3273                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == perMill) <em class="brace">{</em>
<a id="L3274" name="L3274"></a>3274                             <strong class="reserved">if</strong> (multiplier != 1) <em class="brace">{</em>
<a id="L3275" name="L3275"></a>3275                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Too many percent/per mille characters in pattern \"" +
<a id="L3276" name="L3276"></a>3276                                     <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3277" name="L3277"></a>3277                             <em class="brace">}</em>
<a id="L3278" name="L3278"></a>3278                             multiplier = 1000;
<a id="L3279" name="L3279"></a>3279                             affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("'\u2030");
<a id="L3280" name="L3280"></a>3280                             <strong class="reserved">continue</strong>;
<a id="L3281" name="L3281"></a>3281                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == <a href="../D/27709.html" title="Multiple defined in 46 places.">minus</a>) <em class="brace">{</em>
<a id="L3282" name="L3282"></a>3282                             affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("'-");
<a id="L3283" name="L3283"></a>3283                             <strong class="reserved">continue</strong>;
<a id="L3284" name="L3284"></a>3284                         <em class="brace">}</em>
<a id="L3285" name="L3285"></a>3285                     <em class="brace">}</em>
<a id="L3286" name="L3286"></a>3286                     <em class="comment">// Note that if we are within quotes, or if this is an</em>
<a id="L3287" name="L3287"></a>3287                     <em class="comment">// unquoted, non-special character, then we usually fall</em>
<a id="L3288" name="L3288"></a>3288                     <em class="comment">// through to here.</em>
<a id="L3289" name="L3289"></a>3289                     affix.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L3290" name="L3290"></a>3290                     <strong class="reserved">break</strong>;
<a id="L3291" name="L3291"></a>3291 
<a id="L3292" name="L3292"></a>3292                 <strong class="reserved">case</strong> 1:
<a id="L3293" name="L3293"></a>3293                     <em class="comment">// Phase one must be identical in the two sub-patterns. We</em>
<a id="L3294" name="L3294"></a>3294                     <em class="comment">// enforce this by doing a direct comparison. While</em>
<a id="L3295" name="L3295"></a>3295                     <em class="comment">// processing the first sub-pattern, we just record its</em>
<a id="L3296" name="L3296"></a>3296                     <em class="comment">// length. While processing the second, we compare</em>
<a id="L3297" name="L3297"></a>3297                     <em class="comment">// characters.</em>
<a id="L3298" name="L3298"></a>3298                     <strong class="reserved">if</strong> (j == 1) <em class="brace">{</em>
<a id="L3299" name="L3299"></a>3299                         ++phaseOneLength;
<a id="L3300" name="L3300"></a>3300                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3301" name="L3301"></a>3301                         <strong class="reserved">if</strong> (--phaseOneLength == 0) <em class="brace">{</em>
<a id="L3302" name="L3302"></a>3302                             phase = 2;
<a id="L3303" name="L3303"></a>3303                             affix = suffix;
<a id="L3304" name="L3304"></a>3304                         <em class="brace">}</em>
<a id="L3305" name="L3305"></a>3305                         <strong class="reserved">continue</strong>;
<a id="L3306" name="L3306"></a>3306                     <em class="brace">}</em>
<a id="L3307" name="L3307"></a>3307 
<a id="L3308" name="L3308"></a>3308                     <em class="comment">// Process the digits, decimal, and grouping characters. We</em>
<a id="L3309" name="L3309"></a>3309                     <em class="comment">// record five pieces of information. We expect the digits</em>
<a id="L3310" name="L3310"></a>3310                     <em class="comment">// to occur in the pattern ####0000.####, and we record the</em>
<a id="L3311" name="L3311"></a>3311                     <em class="comment">// number of left digits, zero (central) digits, and right</em>
<a id="L3312" name="L3312"></a>3312                     <em class="comment">// digits. The position of the last grouping character is</em>
<a id="L3313" name="L3313"></a>3313                     <em class="comment">// recorded (should be somewhere within the first two blocks</em>
<a id="L3314" name="L3314"></a>3314                     <em class="comment">// of characters), as is the position of the decimal point,</em>
<a id="L3315" name="L3315"></a>3315                     <em class="comment">// if any (should be in the zero digits). If there is no</em>
<a id="L3316" name="L3316"></a>3316                     <em class="comment">// decimal point, then there should be no right digits.</em>
<a id="L3317" name="L3317"></a>3317                     <strong class="reserved">if</strong> (ch == <a href="../D/14902.html" title="Multiple defined in 10 places.">digit</a>) <em class="brace">{</em>
<a id="L3318" name="L3318"></a>3318                         <strong class="reserved">if</strong> (zeroDigitCount &gt; 0) <em class="brace">{</em>
<a id="L3319" name="L3319"></a>3319                             ++digitRightCount;
<a id="L3320" name="L3320"></a>3320                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3321" name="L3321"></a>3321                             ++digitLeftCount;
<a id="L3322" name="L3322"></a>3322                         <em class="brace">}</em>
<a id="L3323" name="L3323"></a>3323                         <strong class="reserved">if</strong> (groupingCount &gt;= 0 &amp;&amp; decimalPos &lt; 0) <em class="brace">{</em>
<a id="L3324" name="L3324"></a>3324                             ++groupingCount;
<a id="L3325" name="L3325"></a>3325                         <em class="brace">}</em>
<a id="L3326" name="L3326"></a>3326                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == zeroDigit) <em class="brace">{</em>
<a id="L3327" name="L3327"></a>3327                         <strong class="reserved">if</strong> (digitRightCount &gt; 0) <em class="brace">{</em>
<a id="L3328" name="L3328"></a>3328                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unexpected '0' in pattern \"" +
<a id="L3329" name="L3329"></a>3329                                 <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3330" name="L3330"></a>3330                         <em class="brace">}</em>
<a id="L3331" name="L3331"></a>3331                         ++zeroDigitCount;
<a id="L3332" name="L3332"></a>3332                         <strong class="reserved">if</strong> (groupingCount &gt;= 0 &amp;&amp; decimalPos &lt; 0) <em class="brace">{</em>
<a id="L3333" name="L3333"></a>3333                             ++groupingCount;
<a id="L3334" name="L3334"></a>3334                         <em class="brace">}</em>
<a id="L3335" name="L3335"></a>3335                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == groupingSeparator) <em class="brace">{</em>
<a id="L3336" name="L3336"></a>3336                         groupingCount = 0;
<a id="L3337" name="L3337"></a>3337                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == decimalSeparator) <em class="brace">{</em>
<a id="L3338" name="L3338"></a>3338                         <strong class="reserved">if</strong> (decimalPos &gt;= 0) <em class="brace">{</em>
<a id="L3339" name="L3339"></a>3339                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Multiple decimal separators in pattern \"" +
<a id="L3340" name="L3340"></a>3340                                 <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3341" name="L3341"></a>3341                         <em class="brace">}</em>
<a id="L3342" name="L3342"></a>3342                         decimalPos = digitLeftCount + zeroDigitCount + digitRightCount;
<a id="L3343" name="L3343"></a>3343                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/30514.html" title="Multiple defined in 14 places.">regionMatches</a>(pos, <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>, 0, <a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()))<em class="brace">{</em>
<a id="L3344" name="L3344"></a>3344                         <strong class="reserved">if</strong> (useExponentialNotation) <em class="brace">{</em>
<a id="L3345" name="L3345"></a>3345                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Multiple exponential " +
<a id="L3346" name="L3346"></a>3346                                 "symbols in pattern \"" + <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3347" name="L3347"></a>3347                         <em class="brace">}</em>
<a id="L3348" name="L3348"></a>3348                         useExponentialNotation = <strong class="reserved">true</strong>;
<a id="L3349" name="L3349"></a>3349                         minExponentDigits = 0;
<a id="L3350" name="L3350"></a>3350 
<a id="L3351" name="L3351"></a>3351                         <em class="comment">// Use lookahead to parse out the exponential part</em>
<a id="L3352" name="L3352"></a>3352                         <em class="comment">// of the pattern, then jump into phase 2.</em>
<a id="L3353" name="L3353"></a>3353                         pos = pos+<a href="../S/1038.html#L3713" title="Defined at 3713 in src/java/util/Formatter.java.">exponent</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L3354" name="L3354"></a>3354                          <strong class="reserved">while</strong> (pos &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &amp;&amp;
<a id="L3355" name="L3355"></a>3355                                <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(pos) == zeroDigit) <em class="brace">{</em>
<a id="L3356" name="L3356"></a>3356                             ++minExponentDigits;
<a id="L3357" name="L3357"></a>3357                             ++phaseOneLength;
<a id="L3358" name="L3358"></a>3358                             ++pos;
<a id="L3359" name="L3359"></a>3359                         <em class="brace">}</em>
<a id="L3360" name="L3360"></a>3360 
<a id="L3361" name="L3361"></a>3361                         <strong class="reserved">if</strong> ((digitLeftCount + zeroDigitCount) &lt; 1 ||
<a id="L3362" name="L3362"></a>3362                             minExponentDigits &lt; 1) <em class="brace">{</em>
<a id="L3363" name="L3363"></a>3363                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Malformed exponential " +
<a id="L3364" name="L3364"></a>3364                                 "pattern \"" + <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3365" name="L3365"></a>3365                         <em class="brace">}</em>
<a id="L3366" name="L3366"></a>3366 
<a id="L3367" name="L3367"></a>3367                         <em class="comment">// Transition to phase 2</em>
<a id="L3368" name="L3368"></a>3368                         phase = 2;
<a id="L3369" name="L3369"></a>3369                         affix = suffix;
<a id="L3370" name="L3370"></a>3370                         --pos;
<a id="L3371" name="L3371"></a>3371                         <strong class="reserved">continue</strong>;
<a id="L3372" name="L3372"></a>3372                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3373" name="L3373"></a>3373                         phase = 2;
<a id="L3374" name="L3374"></a>3374                         affix = suffix;
<a id="L3375" name="L3375"></a>3375                         --pos;
<a id="L3376" name="L3376"></a>3376                         --phaseOneLength;
<a id="L3377" name="L3377"></a>3377                         <strong class="reserved">continue</strong>;
<a id="L3378" name="L3378"></a>3378                     <em class="brace">}</em>
<a id="L3379" name="L3379"></a>3379                     <strong class="reserved">break</strong>;
<a id="L3380" name="L3380"></a>3380                 <em class="brace">}</em>
<a id="L3381" name="L3381"></a>3381             <em class="brace">}</em>
<a id="L3382" name="L3382"></a>3382 
<a id="L3383" name="L3383"></a>3383             <em class="comment">// Handle patterns with no '0' pattern character. These patterns</em>
<a id="L3384" name="L3384"></a>3384             <em class="comment">// are legal, but must be interpreted.  "##.###" -&gt; "#0.###".</em>
<a id="L3385" name="L3385"></a>3385             <em class="comment">// ".###" -&gt; ".0##".</em>
<div class="comment">
 We allow patterns of the form "####" to produce a zeroDigitCount
              of zero (got that?); although this seems like it might make it
              possible for format() to produce empty strings, format() checks
              for this condition and outputs a zero digit in this situation.
              Having a zeroDigitCount of zero yields a minimum integer digits
              of zero, which allows proper round-trip patterns.  That is, we
              don't want "#" to become "#0" when toPattern() is called (even
              though that's what it really is, semantically).</div>
<a id="L3395" name="L3395"></a>3395             <strong class="reserved">if</strong> (zeroDigitCount == 0 &amp;&amp; digitLeftCount &gt; 0 &amp;&amp; decimalPos &gt;= 0) <em class="brace">{</em>
<a id="L3396" name="L3396"></a>3396                 <em class="comment">// Handle "###.###" and "###." and ".###"</em>
<a id="L3397" name="L3397"></a>3397                 <strong class="reserved">int</strong> n = decimalPos;
<a id="L3398" name="L3398"></a>3398                 <strong class="reserved">if</strong> (n == 0) <em class="brace">{</em> <em class="comment">// Handle ".###"</em>
<a id="L3399" name="L3399"></a>3399                     ++n;
<a id="L3400" name="L3400"></a>3400                 <em class="brace">}</em>
<a id="L3401" name="L3401"></a>3401                 digitRightCount = digitLeftCount - n;
<a id="L3402" name="L3402"></a>3402                 digitLeftCount = n - 1;
<a id="L3403" name="L3403"></a>3403                 zeroDigitCount = 1;
<a id="L3404" name="L3404"></a>3404             <em class="brace">}</em>
<a id="L3405" name="L3405"></a>3405 
<a id="L3406" name="L3406"></a>3406             <em class="comment">// Do syntax checking on the digits.</em>
<a id="L3407" name="L3407"></a>3407             <strong class="reserved">if</strong> ((decimalPos &lt; 0 &amp;&amp; digitRightCount &gt; 0) ||
<a id="L3408" name="L3408"></a>3408                 (decimalPos &gt;= 0 &amp;&amp; (decimalPos &lt; digitLeftCount ||
<a id="L3409" name="L3409"></a>3409                  decimalPos &gt; (digitLeftCount + zeroDigitCount))) ||
<a id="L3410" name="L3410"></a>3410                  groupingCount == 0 || inQuote) <em class="brace">{</em>
<a id="L3411" name="L3411"></a>3411                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Malformed pattern \"" +
<a id="L3412" name="L3412"></a>3412                     <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> + '"');
<a id="L3413" name="L3413"></a>3413             <em class="brace">}</em>
<a id="L3414" name="L3414"></a>3414 
<a id="L3415" name="L3415"></a>3415             <strong class="reserved">if</strong> (j == 1) <em class="brace">{</em>
<a id="L3416" name="L3416"></a>3416                 posPrefixPattern = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3417" name="L3417"></a>3417                 posSuffixPattern = suffix.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3418" name="L3418"></a>3418                 negPrefixPattern = posPrefixPattern;   <em class="comment">// assume these for now</em>
<a id="L3419" name="L3419"></a>3419                 negSuffixPattern = posSuffixPattern;
<a id="L3420" name="L3420"></a>3420                 <strong class="reserved">int</strong> digitTotalCount = digitLeftCount + zeroDigitCount + digitRightCount;
<div class="comment">
 The effectiveDecimalPos is the position the decimal is at or
                  would be at if there is no decimal. Note that if decimalPos&lt;0,
                  then digitTotalCount == digitLeftCount + zeroDigitCount.</div>
<a id="L3425" name="L3425"></a>3425                 <strong class="reserved">int</strong> effectiveDecimalPos = decimalPos &gt;= 0 ?
<a id="L3426" name="L3426"></a>3426                     decimalPos : digitTotalCount;
<a id="L3427" name="L3427"></a>3427                 <a href="../D/33261.html" title="Multiple defined in 2 places.">setMinimumIntegerDigits</a>(effectiveDecimalPos - digitLeftCount);
<a id="L3428" name="L3428"></a>3428                 <a href="../D/33220.html" title="Multiple defined in 2 places.">setMaximumIntegerDigits</a>(useExponentialNotation ?
<a id="L3429" name="L3429"></a>3429                     digitLeftCount + <a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>() :
<a id="L3430" name="L3430"></a>3430                     MAXIMUM_INTEGER_DIGITS);
<a id="L3431" name="L3431"></a>3431                 <a href="../D/33219.html" title="Multiple defined in 2 places.">setMaximumFractionDigits</a>(decimalPos &gt;= 0 ?
<a id="L3432" name="L3432"></a>3432                     (digitTotalCount - decimalPos) : 0);
<a id="L3433" name="L3433"></a>3433                 <a href="../D/33260.html" title="Multiple defined in 2 places.">setMinimumFractionDigits</a>(decimalPos &gt;= 0 ?
<a id="L3434" name="L3434"></a>3434                     (digitLeftCount + zeroDigitCount - decimalPos) : 0);
<a id="L3435" name="L3435"></a>3435                 <a href="../D/32824.html" title="Multiple defined in 2 places.">setGroupingUsed</a>(groupingCount &gt; 0);
<a id="L3436" name="L3436"></a>3436                 <strong class="reserved">this</strong>.groupingSize = (groupingCount &gt; 0) ? groupingCount : 0;
<a id="L3437" name="L3437"></a>3437                 <strong class="reserved">this</strong>.multiplier = multiplier;
<a id="L3438" name="L3438"></a>3438                 <a href="../S/2458.html#L2640" title="Defined at 2640 in src/java/text/DecimalFormat.java.">setDecimalSeparatorAlwaysShown</a>(decimalPos == 0 ||
<a id="L3439" name="L3439"></a>3439                     decimalPos == digitTotalCount);
<a id="L3440" name="L3440"></a>3440             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3441" name="L3441"></a>3441                 negPrefixPattern = <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3442" name="L3442"></a>3442                 negSuffixPattern = suffix.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3443" name="L3443"></a>3443                 gotNegative = <strong class="reserved">true</strong>;
<a id="L3444" name="L3444"></a>3444             <em class="brace">}</em>
<a id="L3445" name="L3445"></a>3445         <em class="brace">}</em>
<a id="L3446" name="L3446"></a>3446 
<a id="L3447" name="L3447"></a>3447         <strong class="reserved">if</strong> (<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L3448" name="L3448"></a>3448             posPrefixPattern = posSuffixPattern = "";
<a id="L3449" name="L3449"></a>3449             <a href="../D/33261.html" title="Multiple defined in 2 places.">setMinimumIntegerDigits</a>(0);
<a id="L3450" name="L3450"></a>3450             <a href="../D/33220.html" title="Multiple defined in 2 places.">setMaximumIntegerDigits</a>(MAXIMUM_INTEGER_DIGITS);
<a id="L3451" name="L3451"></a>3451             <a href="../D/33260.html" title="Multiple defined in 2 places.">setMinimumFractionDigits</a>(0);
<a id="L3452" name="L3452"></a>3452             <a href="../D/33219.html" title="Multiple defined in 2 places.">setMaximumFractionDigits</a>(MAXIMUM_FRACTION_DIGITS);
<a id="L3453" name="L3453"></a>3453         <em class="brace">}</em>
<a id="L3454" name="L3454"></a>3454 
<a id="L3455" name="L3455"></a>3455         <em class="comment">// If there was no negative pattern, or if the negative pattern is</em>
<a id="L3456" name="L3456"></a>3456         <em class="comment">// identical to the positive pattern, then prepend the minus sign to</em>
<a id="L3457" name="L3457"></a>3457         <em class="comment">// the positive pattern to form the negative pattern.</em>
<a id="L3458" name="L3458"></a>3458         <strong class="reserved">if</strong> (!gotNegative ||
<a id="L3459" name="L3459"></a>3459             (negPrefixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(posPrefixPattern)
<a id="L3460" name="L3460"></a>3460              &amp;&amp; negSuffixPattern.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(posSuffixPattern))) <em class="brace">{</em>
<a id="L3461" name="L3461"></a>3461             negSuffixPattern = posSuffixPattern;
<a id="L3462" name="L3462"></a>3462             negPrefixPattern = "'-" + posPrefixPattern;
<a id="L3463" name="L3463"></a>3463         <em class="brace">}</em>
<a id="L3464" name="L3464"></a>3464 
<a id="L3465" name="L3465"></a>3465         <a href="../S/2458.html#L2775" title="Defined at 2775 in src/java/text/DecimalFormat.java.">expandAffixes</a>();
<a id="L3466" name="L3466"></a>3466     <em class="brace">}</em>
<a id="L3467" name="L3467"></a>3467 
<div class="comment">
      Sets the maximum number of digits allowed in the integer portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of <code>newValue</code> and
      309 is used. Negative input values are replaced with 0.
      @see NumberFormat#setMaximumIntegerDigits</div>
<a id="L3476" name="L3476"></a>3476     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3477" name="L3477"></a>3477     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27733.html" title="Multiple referred from 6 places.">setMaximumIntegerDigits</a>(<strong class="reserved">int</strong> newValue) <em class="brace">{</em>
<a id="L3478" name="L3478"></a>3478         maximumIntegerDigits = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, newValue), MAXIMUM_INTEGER_DIGITS);
<a id="L3479" name="L3479"></a>3479         <strong class="reserved">super</strong>.<a href="../D/33220.html" title="Multiple defined in 2 places.">setMaximumIntegerDigits</a>((maximumIntegerDigits &gt; DOUBLE_INTEGER_DIGITS) ?
<a id="L3480" name="L3480"></a>3480             DOUBLE_INTEGER_DIGITS : maximumIntegerDigits);
<a id="L3481" name="L3481"></a>3481         <strong class="reserved">if</strong> (minimumIntegerDigits &gt; maximumIntegerDigits) <em class="brace">{</em>
<a id="L3482" name="L3482"></a>3482             minimumIntegerDigits = maximumIntegerDigits;
<a id="L3483" name="L3483"></a>3483             <strong class="reserved">super</strong>.<a href="../D/33261.html" title="Multiple defined in 2 places.">setMinimumIntegerDigits</a>((minimumIntegerDigits &gt; DOUBLE_INTEGER_DIGITS) ?
<a id="L3484" name="L3484"></a>3484                 DOUBLE_INTEGER_DIGITS : minimumIntegerDigits);
<a id="L3485" name="L3485"></a>3485         <em class="brace">}</em>
<a id="L3486" name="L3486"></a>3486         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3487" name="L3487"></a>3487     <em class="brace">}</em>
<a id="L3488" name="L3488"></a>3488 
<div class="comment">
      Sets the minimum number of digits allowed in the integer portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of <code>newValue</code> and
      309 is used. Negative input values are replaced with 0.
      @see NumberFormat#setMinimumIntegerDigits</div>
<a id="L3497" name="L3497"></a>3497     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3498" name="L3498"></a>3498     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27760.html" title="Multiple referred from 8 places.">setMinimumIntegerDigits</a>(<strong class="reserved">int</strong> newValue) <em class="brace">{</em>
<a id="L3499" name="L3499"></a>3499         minimumIntegerDigits = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, newValue), MAXIMUM_INTEGER_DIGITS);
<a id="L3500" name="L3500"></a>3500         <strong class="reserved">super</strong>.<a href="../D/33261.html" title="Multiple defined in 2 places.">setMinimumIntegerDigits</a>((minimumIntegerDigits &gt; DOUBLE_INTEGER_DIGITS) ?
<a id="L3501" name="L3501"></a>3501             DOUBLE_INTEGER_DIGITS : minimumIntegerDigits);
<a id="L3502" name="L3502"></a>3502         <strong class="reserved">if</strong> (minimumIntegerDigits &gt; maximumIntegerDigits) <em class="brace">{</em>
<a id="L3503" name="L3503"></a>3503             maximumIntegerDigits = minimumIntegerDigits;
<a id="L3504" name="L3504"></a>3504             <strong class="reserved">super</strong>.<a href="../D/33220.html" title="Multiple defined in 2 places.">setMaximumIntegerDigits</a>((maximumIntegerDigits &gt; DOUBLE_INTEGER_DIGITS) ?
<a id="L3505" name="L3505"></a>3505                 DOUBLE_INTEGER_DIGITS : maximumIntegerDigits);
<a id="L3506" name="L3506"></a>3506         <em class="brace">}</em>
<a id="L3507" name="L3507"></a>3507         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3508" name="L3508"></a>3508     <em class="brace">}</em>
<a id="L3509" name="L3509"></a>3509 
<div class="comment">
      Sets the maximum number of digits allowed in the fraction portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of <code>newValue</code> and
      340 is used. Negative input values are replaced with 0.
      @see NumberFormat#setMaximumFractionDigits</div>
<a id="L3518" name="L3518"></a>3518     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3519" name="L3519"></a>3519     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27732.html" title="Multiple referred from 7 places.">setMaximumFractionDigits</a>(<strong class="reserved">int</strong> newValue) <em class="brace">{</em>
<a id="L3520" name="L3520"></a>3520         maximumFractionDigits = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, newValue), MAXIMUM_FRACTION_DIGITS);
<a id="L3521" name="L3521"></a>3521         <strong class="reserved">super</strong>.<a href="../D/33219.html" title="Multiple defined in 2 places.">setMaximumFractionDigits</a>((maximumFractionDigits &gt; DOUBLE_FRACTION_DIGITS) ?
<a id="L3522" name="L3522"></a>3522             DOUBLE_FRACTION_DIGITS : maximumFractionDigits);
<a id="L3523" name="L3523"></a>3523         <strong class="reserved">if</strong> (minimumFractionDigits &gt; maximumFractionDigits) <em class="brace">{</em>
<a id="L3524" name="L3524"></a>3524             minimumFractionDigits = maximumFractionDigits;
<a id="L3525" name="L3525"></a>3525             <strong class="reserved">super</strong>.<a href="../D/33260.html" title="Multiple defined in 2 places.">setMinimumFractionDigits</a>((minimumFractionDigits &gt; DOUBLE_FRACTION_DIGITS) ?
<a id="L3526" name="L3526"></a>3526                 DOUBLE_FRACTION_DIGITS : minimumFractionDigits);
<a id="L3527" name="L3527"></a>3527         <em class="brace">}</em>
<a id="L3528" name="L3528"></a>3528         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3529" name="L3529"></a>3529     <em class="brace">}</em>
<a id="L3530" name="L3530"></a>3530 
<div class="comment">
      Sets the minimum number of digits allowed in the fraction portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of <code>newValue</code> and
      340 is used. Negative input values are replaced with 0.
      @see NumberFormat#setMinimumFractionDigits</div>
<a id="L3539" name="L3539"></a>3539     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3540" name="L3540"></a>3540     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27759.html" title="Multiple referred from 7 places.">setMinimumFractionDigits</a>(<strong class="reserved">int</strong> newValue) <em class="brace">{</em>
<a id="L3541" name="L3541"></a>3541         minimumFractionDigits = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, newValue), MAXIMUM_FRACTION_DIGITS);
<a id="L3542" name="L3542"></a>3542         <strong class="reserved">super</strong>.<a href="../D/33260.html" title="Multiple defined in 2 places.">setMinimumFractionDigits</a>((minimumFractionDigits &gt; DOUBLE_FRACTION_DIGITS) ?
<a id="L3543" name="L3543"></a>3543             DOUBLE_FRACTION_DIGITS : minimumFractionDigits);
<a id="L3544" name="L3544"></a>3544         <strong class="reserved">if</strong> (minimumFractionDigits &gt; maximumFractionDigits) <em class="brace">{</em>
<a id="L3545" name="L3545"></a>3545             maximumFractionDigits = minimumFractionDigits;
<a id="L3546" name="L3546"></a>3546             <strong class="reserved">super</strong>.<a href="../D/33219.html" title="Multiple defined in 2 places.">setMaximumFractionDigits</a>((maximumFractionDigits &gt; DOUBLE_FRACTION_DIGITS) ?
<a id="L3547" name="L3547"></a>3547                 DOUBLE_FRACTION_DIGITS : maximumFractionDigits);
<a id="L3548" name="L3548"></a>3548         <em class="brace">}</em>
<a id="L3549" name="L3549"></a>3549         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3550" name="L3550"></a>3550     <em class="brace">}</em>
<a id="L3551" name="L3551"></a>3551 
<div class="comment">
      Gets the maximum number of digits allowed in the integer portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of the return value and
      309 is used.
      @see #setMaximumIntegerDigits</div>
<a id="L3560" name="L3560"></a>3560     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3561" name="L3561"></a>3561     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17618.html" title="Multiple referred from 9 places.">getMaximumIntegerDigits</a>() <em class="brace">{</em>
<a id="L3562" name="L3562"></a>3562         <strong class="reserved">return</strong> maximumIntegerDigits;
<a id="L3563" name="L3563"></a>3563     <em class="brace">}</em>
<a id="L3564" name="L3564"></a>3564 
<div class="comment">
      Gets the minimum number of digits allowed in the integer portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of the return value and
      309 is used.
      @see #setMinimumIntegerDigits</div>
<a id="L3573" name="L3573"></a>3573     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3574" name="L3574"></a>3574     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17735.html" title="Multiple referred from 10 places.">getMinimumIntegerDigits</a>() <em class="brace">{</em>
<a id="L3575" name="L3575"></a>3575         <strong class="reserved">return</strong> minimumIntegerDigits;
<a id="L3576" name="L3576"></a>3576     <em class="brace">}</em>
<a id="L3577" name="L3577"></a>3577 
<div class="comment">
      Gets the maximum number of digits allowed in the fraction portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of the return value and
      340 is used.
      @see #setMaximumFractionDigits</div>
<a id="L3586" name="L3586"></a>3586     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3587" name="L3587"></a>3587     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17617.html" title="Multiple referred from 10 places.">getMaximumFractionDigits</a>() <em class="brace">{</em>
<a id="L3588" name="L3588"></a>3588         <strong class="reserved">return</strong> maximumFractionDigits;
<a id="L3589" name="L3589"></a>3589     <em class="brace">}</em>
<a id="L3590" name="L3590"></a>3590 
<div class="comment">
      Gets the minimum number of digits allowed in the fraction portion of a
      number.
      For formatting numbers other than <code>BigInteger</code> and
      <code>BigDecimal</code> objects, the lower of the return value and
      340 is used.
      @see #setMinimumFractionDigits</div>
<a id="L3599" name="L3599"></a>3599     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3600" name="L3600"></a>3600     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17733.html" title="Multiple referred from 8 places.">getMinimumFractionDigits</a>() <em class="brace">{</em>
<a id="L3601" name="L3601"></a>3601         <strong class="reserved">return</strong> minimumFractionDigits;
<a id="L3602" name="L3602"></a>3602     <em class="brace">}</em>
<a id="L3603" name="L3603"></a>3603 
<div class="comment">
      Gets the currency used by this decimal format when formatting
      currency values.
      The currency is obtained by calling
      {@link DecimalFormatSymbols#getCurrency DecimalFormatSymbols.getCurrency}
      on this number format's symbols.
      @return the currency used by this decimal format, or <code>null</code>
      @since 1.4</div>
<a id="L3614" name="L3614"></a>3614     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3615" name="L3615"></a>3615     <strong class="reserved">public</strong> <a href="../S/1129.html#L97" title="Defined at 97 in src/java/util/Currency.java.">Currency</a> <a href="../R/15865.html" title="Multiple referred from 2 places.">getCurrency</a>() <em class="brace">{</em>
<a id="L3616" name="L3616"></a>3616         <strong class="reserved">return</strong> symbols.<a href="../D/18079.html" title="Multiple defined in 3 places.">getCurrency</a>();
<a id="L3617" name="L3617"></a>3617     <em class="brace">}</em>
<a id="L3618" name="L3618"></a>3618 
<div class="comment">
      Sets the currency used by this number format when formatting
      currency values. This does not update the minimum or maximum
      number of fraction digits used by the number format.
      The currency is set by calling
      {@link DecimalFormatSymbols#setCurrency DecimalFormatSymbols.setCurrency}
      on this number format's symbols.
      @param currency the new currency to be used by this decimal format
      @exception NullPointerException if <code>currency</code> is null
      @since 1.4</div>
<a id="L3631" name="L3631"></a>3631     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3632" name="L3632"></a>3632     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2458.html#L3634" title="Referred from 3634 in src/java/text/DecimalFormat.java.">setCurrency</a>(<a href="../S/1129.html#L97" title="Defined at 97 in src/java/util/Currency.java.">Currency</a> currency) <em class="brace">{</em>
<a id="L3633" name="L3633"></a>3633         <strong class="reserved">if</strong> (currency != symbols.<a href="../D/18079.html" title="Multiple defined in 3 places.">getCurrency</a>()) <em class="brace">{</em>
<a id="L3634" name="L3634"></a>3634             symbols.<a href="../D/32296.html" title="Multiple defined in 5 places.">setCurrency</a>(currency);
<a id="L3635" name="L3635"></a>3635             <strong class="reserved">if</strong> (isCurrencyFormat) <em class="brace">{</em>
<a id="L3636" name="L3636"></a>3636                 <a href="../S/2458.html#L2775" title="Defined at 2775 in src/java/text/DecimalFormat.java.">expandAffixes</a>();
<a id="L3637" name="L3637"></a>3637             <em class="brace">}</em>
<a id="L3638" name="L3638"></a>3638         <em class="brace">}</em>
<a id="L3639" name="L3639"></a>3639         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3640" name="L3640"></a>3640     <em class="brace">}</em>
<a id="L3641" name="L3641"></a>3641 
<div class="comment">
      Gets the {@link java.math.RoundingMode} used in this DecimalFormat.
      @return The <code>RoundingMode</code> used for this DecimalFormat.
      @see #setRoundingMode(RoundingMode)
      @since 1.6</div>
<a id="L3649" name="L3649"></a>3649     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3650" name="L3650"></a>3650     <strong class="reserved">public</strong> <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a> <a href="../S/2458.html#L3731" title="Referred from 3731 in src/java/text/DecimalFormat.java.">getRoundingMode</a>() <em class="brace">{</em>
<a id="L3651" name="L3651"></a>3651         <strong class="reserved">return</strong> roundingMode;
<a id="L3652" name="L3652"></a>3652     <em class="brace">}</em>
<a id="L3653" name="L3653"></a>3653 
<div class="comment">
      Sets the {@link java.math.RoundingMode} used in this DecimalFormat.
      @param roundingMode The <code>RoundingMode</code> to be used
      @see #getRoundingMode()
      @exception NullPointerException if <code>roundingMode</code> is null.
      @since 1.6</div>
<a id="L3662" name="L3662"></a>3662     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L3663" name="L3663"></a>3663     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28078.html" title="Multiple referred from 6 places.">setRoundingMode</a>(<a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a> roundingMode) <em class="brace">{</em>
<a id="L3664" name="L3664"></a>3664         <strong class="reserved">if</strong> (roundingMode == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3665" name="L3665"></a>3665             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L3666" name="L3666"></a>3666         <em class="brace">}</em>
<a id="L3667" name="L3667"></a>3667 
<a id="L3668" name="L3668"></a>3668         <strong class="reserved">this</strong>.roundingMode = roundingMode;
<a id="L3669" name="L3669"></a>3669         digitList.<a href="../D/33775.html" title="Multiple defined in 3 places.">setRoundingMode</a>(roundingMode);
<a id="L3670" name="L3670"></a>3670         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3671" name="L3671"></a>3671     <em class="brace">}</em>
<a id="L3672" name="L3672"></a>3672 
<div class="comment">
      Reads the default serializable fields from the stream and performs
      validations and adjustments for older serialized versions. The
      validations and adjustments are:
      <ol>
      <li>
      Verify that the superclass's digit count fields correctly reflect
      the limits imposed on formatting numbers other than
      <code>BigInteger</code> and <code>BigDecimal</code> objects. These
      limits are stored in the superclass for serialization compatibility
      with older versions, while the limits for <code>BigInteger</code> and
      <code>BigDecimal</code> objects are kept in this class.
      If, in the superclass, the minimum or maximum integer digit count is
      larger than <code>DOUBLE_INTEGER_DIGITS</code> or if the minimum or
      maximum fraction digit count is larger than
      <code>DOUBLE_FRACTION_DIGITS</code>, then the stream data is invalid
      and this method throws an <code>InvalidObjectException</code>.
      </li><li>
      If <code>serialVersionOnStream</code> is less than 4, initialize
      <code>roundingMode</code> to {@link java.math.RoundingMode#HALF_EVEN
      RoundingMode.HALF_EVEN}.  This field is new with version 4.
      </li><li>
      If <code>serialVersionOnStream</code> is less than 3, then call
      the setters for the minimum and maximum integer and fraction digits with
      the values of the corresponding superclass getters to initialize the
      fields in this class. The fields in this class are new with version 3.
      </li><li>
      If <code>serialVersionOnStream</code> is less than 1, indicating that
      the stream was written by JDK 1.1, initialize
      <code>useExponentialNotation</code>
      to false, since it was not present in JDK 1.1.
      </li><li>
      Set <code>serialVersionOnStream</code> to the maximum allowed value so
      that default serialization will work properly if this object is streamed
      out again.
      </li></ol>
      <p>Stream versions older than 2 will not have the affix pattern variables
      <code>posPrefixPattern</code> etc.  As a result, they will be initialized
      to <code>null</code>, which means the affix strings will be taken as
      literal values.  This is exactly what we want, since that corresponds to
      the pre-version-2 behavior.</p></div>
<a id="L3716" name="L3716"></a>3716     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>)
<a id="L3717" name="L3717"></a>3717          <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L3718" name="L3718"></a>3718     <em class="brace">{</em>
<a id="L3719" name="L3719"></a>3719         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L3720" name="L3720"></a>3720         digitList = <strong class="reserved">new</strong> <a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a>();
<a id="L3721" name="L3721"></a>3721 
<a id="L3722" name="L3722"></a>3722         <em class="comment">// We force complete fast-path reinitialization when the instance is</em>
<a id="L3723" name="L3723"></a>3723         <em class="comment">// deserialized. See clone() comment on fastPathCheckNeeded.</em>
<a id="L3724" name="L3724"></a>3724         fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L3725" name="L3725"></a>3725         isFastPath = <strong class="reserved">false</strong>;
<a id="L3726" name="L3726"></a>3726         fastPathData = <strong class="reserved">null</strong>;
<a id="L3727" name="L3727"></a>3727 
<a id="L3728" name="L3728"></a>3728         <strong class="reserved">if</strong> (serialVersionOnStream &lt; 4) <em class="brace">{</em>
<a id="L3729" name="L3729"></a>3729             <a href="../D/33775.html" title="Multiple defined in 3 places.">setRoundingMode</a>(<a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L278" title="Defined at 278 in src/java/math/RoundingMode.java.">HALF_EVEN</a>);
<a id="L3730" name="L3730"></a>3730         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3731" name="L3731"></a>3731             <a href="../D/33775.html" title="Multiple defined in 3 places.">setRoundingMode</a>(<a href="../D/22151.html" title="Multiple defined in 3 places.">getRoundingMode</a>());
<a id="L3732" name="L3732"></a>3732         <em class="brace">}</em>
<a id="L3733" name="L3733"></a>3733 
<a id="L3734" name="L3734"></a>3734         <em class="comment">// We only need to check the maximum counts because NumberFormat</em>
<a id="L3735" name="L3735"></a>3735         <em class="comment">// .readObject has already ensured that the maximum is greater than the</em>
<a id="L3736" name="L3736"></a>3736         <em class="comment">// minimum count.</em>
<a id="L3737" name="L3737"></a>3737         <strong class="reserved">if</strong> (<strong class="reserved">super</strong>.<a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>() &gt; DOUBLE_INTEGER_DIGITS ||
<a id="L3738" name="L3738"></a>3738             <strong class="reserved">super</strong>.<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>() &gt; DOUBLE_FRACTION_DIGITS) <em class="brace">{</em>
<a id="L3739" name="L3739"></a>3739             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>("Digit count out of range");
<a id="L3740" name="L3740"></a>3740         <em class="brace">}</em>
<a id="L3741" name="L3741"></a>3741         <strong class="reserved">if</strong> (serialVersionOnStream &lt; 3) <em class="brace">{</em>
<a id="L3742" name="L3742"></a>3742             <a href="../D/33220.html" title="Multiple defined in 2 places.">setMaximumIntegerDigits</a>(<strong class="reserved">super</strong>.<a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>());
<a id="L3743" name="L3743"></a>3743             <a href="../D/33261.html" title="Multiple defined in 2 places.">setMinimumIntegerDigits</a>(<strong class="reserved">super</strong>.<a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>());
<a id="L3744" name="L3744"></a>3744             <a href="../D/33219.html" title="Multiple defined in 2 places.">setMaximumFractionDigits</a>(<strong class="reserved">super</strong>.<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>());
<a id="L3745" name="L3745"></a>3745             <a href="../D/33260.html" title="Multiple defined in 2 places.">setMinimumFractionDigits</a>(<strong class="reserved">super</strong>.<a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>());
<a id="L3746" name="L3746"></a>3746         <em class="brace">}</em>
<a id="L3747" name="L3747"></a>3747         <strong class="reserved">if</strong> (serialVersionOnStream &lt; 1) <em class="brace">{</em>
<a id="L3748" name="L3748"></a>3748             <em class="comment">// Didn't have exponential fields</em>
<a id="L3749" name="L3749"></a>3749             useExponentialNotation = <strong class="reserved">false</strong>;
<a id="L3750" name="L3750"></a>3750         <em class="brace">}</em>
<a id="L3751" name="L3751"></a>3751         serialVersionOnStream = currentSerialVersion;
<a id="L3752" name="L3752"></a>3752     <em class="brace">}</em>
<a id="L3753" name="L3753"></a>3753 
<a id="L3754" name="L3754"></a>3754     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L3755" name="L3755"></a>3755     <em class="comment">// INSTANCE VARIABLES</em>
<a id="L3756" name="L3756"></a>3756     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L3757" name="L3757"></a>3757 
<a id="L3758" name="L3758"></a>3758     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a> digitList = <strong class="reserved">new</strong> <a href="../S/2482.html#L74" title="Defined at 74 in src/java/text/DigitList.java.">DigitList</a>();
<a id="L3759" name="L3759"></a>3759 
<div class="comment">
      The symbol used as a prefix when formatting positive numbers, e.g. "+".
      @serial
      @see #getPositivePrefix</div>
<a id="L3766" name="L3766"></a>3766     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  positivePrefix = "";
<a id="L3767" name="L3767"></a>3767 
<div class="comment">
      The symbol used as a suffix when formatting positive numbers.
      This is often an empty string.
      @serial
      @see #getPositiveSuffix</div>
<a id="L3775" name="L3775"></a>3775     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  positiveSuffix = "";
<a id="L3776" name="L3776"></a>3776 
<div class="comment">
      The symbol used as a prefix when formatting negative numbers, e.g. "-".
      @serial
      @see #getNegativePrefix</div>
<a id="L3783" name="L3783"></a>3783     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  negativePrefix = "-";
<a id="L3784" name="L3784"></a>3784 
<div class="comment">
      The symbol used as a suffix when formatting negative numbers.
      This is often an empty string.
      @serial
      @see #getNegativeSuffix</div>
<a id="L3792" name="L3792"></a>3792     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  negativeSuffix = "";
<a id="L3793" name="L3793"></a>3793 
<div class="comment">
      The prefix pattern for non-negative numbers.  This variable corresponds
      to <code>positivePrefix</code>.
      <p>This pattern is expanded by the method <code>expandAffix()</code> to
      <code>positivePrefix</code> to update the latter to reflect changes in
      <code>symbols</code>.  If this variable is <code>null</code> then
      <code>positivePrefix</code> is taken as a literal value that does not
      change when <code>symbols</code> changes.  This variable is always
      <code>null</code> for <code>DecimalFormat</code> objects older than
      stream version 2 restored from stream.
      @serial
      @since 1.3</p></div>
<a id="L3809" name="L3809"></a>3809     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> posPrefixPattern;
<a id="L3810" name="L3810"></a>3810 
<div class="comment">
      The suffix pattern for non-negative numbers.  This variable corresponds
      to <code>positiveSuffix</code>.  This variable is analogous to
      <code>posPrefixPattern</code>; see that variable for further
      documentation.
      @serial
      @since 1.3</div>
<a id="L3820" name="L3820"></a>3820     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> posSuffixPattern;
<a id="L3821" name="L3821"></a>3821 
<div class="comment">
      The prefix pattern for negative numbers.  This variable corresponds
      to <code>negativePrefix</code>.  This variable is analogous to
      <code>posPrefixPattern</code>; see that variable for further
      documentation.
      @serial
      @since 1.3</div>
<a id="L3831" name="L3831"></a>3831     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> negPrefixPattern;
<a id="L3832" name="L3832"></a>3832 
<div class="comment">
      The suffix pattern for negative numbers.  This variable corresponds
      to <code>negativeSuffix</code>.  This variable is analogous to
      <code>posPrefixPattern</code>; see that variable for further
      documentation.
      @serial
      @since 1.3</div>
<a id="L3842" name="L3842"></a>3842     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> negSuffixPattern;
<a id="L3843" name="L3843"></a>3843 
<div class="comment">
      The multiplier for use in percent, per mille, etc.
      @serial
      @see #getMultiplier</div>
<a id="L3850" name="L3850"></a>3850     <strong class="reserved">private</strong> <strong class="reserved">int</strong>     multiplier = 1;
<a id="L3851" name="L3851"></a>3851 
<div class="comment">
      The number of digits between grouping separators in the integer
      portion of a number.  Must be greater than 0 if
      <code>NumberFormat.groupingUsed</code> is true.
      @serial
      @see #getGroupingSize
      @see java.text.NumberFormat#isGroupingUsed</div>
<a id="L3861" name="L3861"></a>3861     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>    groupingSize = 3;  <em class="comment">// invariant, &gt; 0 if useThousands</em>
<a id="L3862" name="L3862"></a>3862 
<div class="comment">
      If true, forces the decimal separator to always appear in a formatted
      number, even if the fractional part of the number is zero.
      @serial
      @see #isDecimalSeparatorAlwaysShown</div>
<a id="L3870" name="L3870"></a>3870     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> decimalSeparatorAlwaysShown = <strong class="reserved">false</strong>;
<a id="L3871" name="L3871"></a>3871 
<div class="comment">
      If true, parse returns BigDecimal wherever possible.
      @serial
      @see #isParseBigDecimal
      @since 1.5</div>
<a id="L3879" name="L3879"></a>3879     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../D/29095.html" title="Multiple defined in 2 places.">parseBigDecimal</a> = <strong class="reserved">false</strong>;
<a id="L3880" name="L3880"></a>3880 
<a id="L3881" name="L3881"></a>3881 
<div class="comment">
      True if this object represents a currency format.  This determines
      whether the monetary decimal separator is used instead of the normal one.</div>
<a id="L3886" name="L3886"></a>3886     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> isCurrencyFormat = <strong class="reserved">false</strong>;
<a id="L3887" name="L3887"></a>3887 
<div class="comment">
      The <code>DecimalFormatSymbols</code> object used by this format.
      It contains the symbols used to format numbers, e.g. the grouping separator,
      decimal separator, and so on.
      @serial
      @see #setDecimalFormatSymbols
      @see java.text.DecimalFormatSymbols</div>
<a id="L3897" name="L3897"></a>3897     <strong class="reserved">private</strong> <a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a> symbols = <strong class="reserved">null</strong>; <em class="comment">// LIU new DecimalFormatSymbols();</em>
<a id="L3898" name="L3898"></a>3898 
<div class="comment">
      True to force the use of exponential (i.e. scientific) notation when formatting
      numbers.
      @serial
      @since 1.2</div>
<a id="L3906" name="L3906"></a>3906     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> useExponentialNotation;  <em class="comment">// Newly persistent in the Java 2 platform v.1.2</em>
<a id="L3907" name="L3907"></a>3907 
<div class="comment">
      FieldPositions describing the positive prefix String. This is
      lazily created. Use <code>getPositivePrefixFieldPositions</code>
      when needed.</div>
<a id="L3913" name="L3913"></a>3913     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] positivePrefixFieldPositions;
<a id="L3914" name="L3914"></a>3914 
<div class="comment">
      FieldPositions describing the positive suffix String. This is
      lazily created. Use <code>getPositiveSuffixFieldPositions</code>
      when needed.</div>
<a id="L3920" name="L3920"></a>3920     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] positiveSuffixFieldPositions;
<a id="L3921" name="L3921"></a>3921 
<div class="comment">
      FieldPositions describing the negative prefix String. This is
      lazily created. Use <code>getNegativePrefixFieldPositions</code>
      when needed.</div>
<a id="L3927" name="L3927"></a>3927     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] negativePrefixFieldPositions;
<a id="L3928" name="L3928"></a>3928 
<div class="comment">
      FieldPositions describing the negative suffix String. This is
      lazily created. Use <code>getNegativeSuffixFieldPositions</code>
      when needed.</div>
<a id="L3934" name="L3934"></a>3934     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] negativeSuffixFieldPositions;
<a id="L3935" name="L3935"></a>3935 
<div class="comment">
      The minimum number of digits used to display the exponent when a number is
      formatted in exponential notation.  This field is ignored if
      <code>useExponentialNotation</code> is not true.
      @serial
      @since 1.2</div>
<a id="L3944" name="L3944"></a>3944     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>    minExponentDigits;       <em class="comment">// Newly persistent in the Java 2 platform v.1.2</em>
<a id="L3945" name="L3945"></a>3945 
<div class="comment">
      The maximum number of digits allowed in the integer portion of a
      <code>BigInteger</code> or <code>BigDecimal</code> number.
      <code>maximumIntegerDigits</code> must be greater than or equal to
      <code>minimumIntegerDigits</code>.
      @serial
      @see #getMaximumIntegerDigits
      @since 1.5</div>
<a id="L3956" name="L3956"></a>3956     <strong class="reserved">private</strong> <strong class="reserved">int</strong>    maximumIntegerDigits = <strong class="reserved">super</strong>.<a href="../D/20499.html" title="Multiple defined in 2 places.">getMaximumIntegerDigits</a>();
<a id="L3957" name="L3957"></a>3957 
<div class="comment">
      The minimum number of digits allowed in the integer portion of a
      <code>BigInteger</code> or <code>BigDecimal</code> number.
      <code>minimumIntegerDigits</code> must be less than or equal to
      <code>maximumIntegerDigits</code>.
      @serial
      @see #getMinimumIntegerDigits
      @since 1.5</div>
<a id="L3968" name="L3968"></a>3968     <strong class="reserved">private</strong> <strong class="reserved">int</strong>    minimumIntegerDigits = <strong class="reserved">super</strong>.<a href="../D/20661.html" title="Multiple defined in 2 places.">getMinimumIntegerDigits</a>();
<a id="L3969" name="L3969"></a>3969 
<div class="comment">
      The maximum number of digits allowed in the fractional portion of a
      <code>BigInteger</code> or <code>BigDecimal</code> number.
      <code>maximumFractionDigits</code> must be greater than or equal to
      <code>minimumFractionDigits</code>.
      @serial
      @see #getMaximumFractionDigits
      @since 1.5</div>
<a id="L3980" name="L3980"></a>3980     <strong class="reserved">private</strong> <strong class="reserved">int</strong>    maximumFractionDigits = <strong class="reserved">super</strong>.<a href="../D/20498.html" title="Multiple defined in 2 places.">getMaximumFractionDigits</a>();
<a id="L3981" name="L3981"></a>3981 
<div class="comment">
      The minimum number of digits allowed in the fractional portion of a
      <code>BigInteger</code> or <code>BigDecimal</code> number.
      <code>minimumFractionDigits</code> must be less than or equal to
      <code>maximumFractionDigits</code>.
      @serial
      @see #getMinimumFractionDigits
      @since 1.5</div>
<a id="L3992" name="L3992"></a>3992     <strong class="reserved">private</strong> <strong class="reserved">int</strong>    minimumFractionDigits = <strong class="reserved">super</strong>.<a href="../D/20659.html" title="Multiple defined in 2 places.">getMinimumFractionDigits</a>();
<a id="L3993" name="L3993"></a>3993 
<div class="comment">
      The {@link java.math.RoundingMode} used in this DecimalFormat.
      @serial
      @since 1.6</div>
<a id="L4000" name="L4000"></a>4000     <strong class="reserved">private</strong> <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a> roundingMode = <a href="../S/1461.html#L93" title="Defined at 93 in src/java/math/RoundingMode.java.">RoundingMode</a>.<a href="../S/1461.html#L278" title="Defined at 278 in src/java/math/RoundingMode.java.">HALF_EVEN</a>;
<a id="L4001" name="L4001"></a>4001 
<a id="L4002" name="L4002"></a>4002     <em class="comment">// ------ DecimalFormat fields for fast-path for double algorithm  ------</em>
<a id="L4003" name="L4003"></a>4003 
<div class="comment">
      Helper inner utility class for storing the data used in the fast-path
      algorithm. Almost all fields related to fast-path are encapsulated in
      this class.
      Any <code>DecimalFormat</code> instance has a <code>fastPathData</code>
      reference field that is null unless both the properties of the instance
      are such that the instance is in the "fast-path" state, and a format call
      has been done at least once while in this state.
      Almost all fields are related to the "fast-path" state only and don't
      change until one of the instance properties is changed.
      <code>firstUsedIndex</code> and <code>lastFreeIndex</code> are the only
      two fields that are used and modified while inside a call to
      <code>fastDoubleFormat</code>.</div>
<a id="L4022" name="L4022"></a>4022     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2870.html" title="Multiple referred from 2 places.">FastPathData</a> <em class="brace">{</em>
<a id="L4023" name="L4023"></a>4023         <em class="comment">// --- Temporary fields used in fast-path, shared by several methods.</em>
<a id="L4024" name="L4024"></a>4024 
<div class="comment">
         /** The first unused index at the end of the formatted result. */</div>
<a id="L4026" name="L4026"></a>4026         <strong class="reserved">int</strong> lastFreeIndex;
<a id="L4027" name="L4027"></a>4027 
<div class="comment">
         /** The first used index at the beginning of the formatted result */</div>
<a id="L4029" name="L4029"></a>4029         <strong class="reserved">int</strong> firstUsedIndex;
<a id="L4030" name="L4030"></a>4030 
<a id="L4031" name="L4031"></a>4031         <em class="comment">// --- State fields related to fast-path status. Changes due to a</em>
<a id="L4032" name="L4032"></a>4032         <em class="comment">//     property change only. Set by checkAndSetFastPathStatus() only.</em>
<a id="L4033" name="L4033"></a>4033 
<div class="comment">
         /** Difference between locale zero and default zero representation. */</div>
<a id="L4035" name="L4035"></a>4035         <strong class="reserved">int</strong>  zeroDelta;
<a id="L4036" name="L4036"></a>4036 
<div class="comment">
         /** Locale char for grouping separator. */</div>
<a id="L4038" name="L4038"></a>4038         <strong class="reserved">char</strong> groupingChar;
<a id="L4039" name="L4039"></a>4039 
<div class="comment">
         /**  Fixed index position of last integral digit of formatted result */</div>
<a id="L4041" name="L4041"></a>4041         <strong class="reserved">int</strong> integralLastIndex;
<a id="L4042" name="L4042"></a>4042 
<div class="comment">
         /**  Fixed index position of first fractional digit of formatted result */</div>
<a id="L4044" name="L4044"></a>4044         <strong class="reserved">int</strong> fractionalFirstIndex;
<a id="L4045" name="L4045"></a>4045 
<div class="comment">
         /** Fractional constants depending on decimal|currency state */</div>
<a id="L4047" name="L4047"></a>4047         <strong class="reserved">double</strong> fractionalScaleFactor;
<a id="L4048" name="L4048"></a>4048         <strong class="reserved">int</strong> fractionalMaxIntBound;
<a id="L4049" name="L4049"></a>4049 
<a id="L4050" name="L4050"></a>4050 
<div class="comment">
         /** The char array buffer that will contain the formatted result */</div>
<a id="L4052" name="L4052"></a>4052         <strong class="reserved">char</strong>[] fastPathContainer;
<a id="L4053" name="L4053"></a>4053 
<div class="comment">
         /** Suffixes recorded as char array for efficiency. */</div>
<a id="L4055" name="L4055"></a>4055         <strong class="reserved">char</strong>[] charsPositivePrefix;
<a id="L4056" name="L4056"></a>4056         <strong class="reserved">char</strong>[] charsNegativePrefix;
<a id="L4057" name="L4057"></a>4057         <strong class="reserved">char</strong>[] charsPositiveSuffix;
<a id="L4058" name="L4058"></a>4058         <strong class="reserved">char</strong>[] charsNegativeSuffix;
<a id="L4059" name="L4059"></a>4059         <strong class="reserved">boolean</strong> positiveAffixesRequired = <strong class="reserved">true</strong>;
<a id="L4060" name="L4060"></a>4060         <strong class="reserved">boolean</strong> negativeAffixesRequired = <strong class="reserved">true</strong>;
<a id="L4061" name="L4061"></a>4061     <em class="brace">}</em>
<a id="L4062" name="L4062"></a>4062 
<div class="comment">
     /** The format fast-path status of the instance. Logical state. */</div>
<a id="L4064" name="L4064"></a>4064     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> isFastPath = <strong class="reserved">false</strong>;
<a id="L4065" name="L4065"></a>4065 
<div class="comment">
     /** Flag stating need of check and reinit fast-path status on next format call. */</div>
<a id="L4067" name="L4067"></a>4067     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> fastPathCheckNeeded = <strong class="reserved">true</strong>;
<a id="L4068" name="L4068"></a>4068 
<div class="comment">
     /** DecimalFormat reference to its FastPathData */</div>
<a id="L4070" name="L4070"></a>4070     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/2458.html#L4022" title="Defined at 4022 in src/java/text/DecimalFormat.java.">FastPathData</a> fastPathData;
<a id="L4071" name="L4071"></a>4071 
<a id="L4072" name="L4072"></a>4072 
<a id="L4073" name="L4073"></a>4073     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L4074" name="L4074"></a>4074 
<a id="L4075" name="L4075"></a>4075     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> currentSerialVersion = 4;
<a id="L4076" name="L4076"></a>4076 
<div class="comment">
      The internal serial version which says which version was written.
      Possible values are:
      <ul><li><b>0</b> (default): versions before the Java 2 platform v1.2
      </li><li><b>1</b>: version for 1.2, which includes the two new fields
           <code>useExponentialNotation</code> and
           <code>minExponentDigits</code>.
      </li><li><b>2</b>: version for 1.3 and later, which adds four new fields:
           <code>posPrefixPattern</code>, <code>posSuffixPattern</code>,
           <code>negPrefixPattern</code>, and <code>negSuffixPattern</code>.
      </li><li><b>3</b>: version for 1.5 and later, which adds five new fields:
           <code>maximumIntegerDigits</code>,
           <code>minimumIntegerDigits</code>,
           <code>maximumFractionDigits</code>,
           <code>minimumFractionDigits</code>, and
           <code>parseBigDecimal</code>.
      </li><li><b>4</b>: version for 1.6 and later, which adds one new field:
           <code>roundingMode</code>.
      </li></ul>
      @since 1.2
      @serial</div>
<a id="L4100" name="L4100"></a>4100     <strong class="reserved">private</strong> <strong class="reserved">int</strong> serialVersionOnStream = currentSerialVersion;
<a id="L4101" name="L4101"></a>4101 
<a id="L4102" name="L4102"></a>4102     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L4103" name="L4103"></a>4103     <em class="comment">// CONSTANTS</em>
<a id="L4104" name="L4104"></a>4104     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L4105" name="L4105"></a>4105 
<a id="L4106" name="L4106"></a>4106     <em class="comment">// ------ Fast-Path for double Constants ------</em>
<a id="L4107" name="L4107"></a>4107 
<div class="comment">
     /** Maximum valid integer value for applying fast-path algorithm */</div>
<a id="L4109" name="L4109"></a>4109     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">double</strong> MAX_INT_AS_DOUBLE = (<strong class="reserved">double</strong>) <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L4110" name="L4110"></a>4110 
<div class="comment">
      The digit arrays used in the fast-path methods for collecting digits.
      Using 3 constants arrays of chars ensures a very fast collection of digits</div>
<a id="L4115" name="L4115"></a>4115     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2252.html" title="Multiple referred from 9 places.">DigitArrays</a> <em class="brace">{</em>
<a id="L4116" name="L4116"></a>4116         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] DigitOnes1000 = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[1000];
<a id="L4117" name="L4117"></a>4117         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] DigitTens1000 = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[1000];
<a id="L4118" name="L4118"></a>4118         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] DigitHundreds1000 = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[1000];
<a id="L4119" name="L4119"></a>4119 
<a id="L4120" name="L4120"></a>4120         <em class="comment">// initialize on demand holder class idiom for arrays of digits</em>
<a id="L4121" name="L4121"></a>4121         <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L4122" name="L4122"></a>4122             <strong class="reserved">int</strong> tenIndex = 0;
<a id="L4123" name="L4123"></a>4123             <strong class="reserved">int</strong> hundredIndex = 0;
<a id="L4124" name="L4124"></a>4124             <strong class="reserved">char</strong> digitOne = '0';
<a id="L4125" name="L4125"></a>4125             <strong class="reserved">char</strong> digitTen = '0';
<a id="L4126" name="L4126"></a>4126             <strong class="reserved">char</strong> digitHundred = '0';
<a id="L4127" name="L4127"></a>4127             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0;  i &lt; 1000; i++ ) <em class="brace">{</em>
<a id="L4128" name="L4128"></a>4128 
<a id="L4129" name="L4129"></a>4129                 DigitOnes1000[i] = digitOne;
<a id="L4130" name="L4130"></a>4130                 <strong class="reserved">if</strong> (digitOne == '9')
<a id="L4131" name="L4131"></a>4131                     digitOne = '0';
<a id="L4132" name="L4132"></a>4132                 <strong class="reserved">else</strong>
<a id="L4133" name="L4133"></a>4133                     digitOne++;
<a id="L4134" name="L4134"></a>4134 
<a id="L4135" name="L4135"></a>4135                 DigitTens1000[i] = digitTen;
<a id="L4136" name="L4136"></a>4136                 <strong class="reserved">if</strong> (i == (tenIndex + 9)) <em class="brace">{</em>
<a id="L4137" name="L4137"></a>4137                     tenIndex += 10;
<a id="L4138" name="L4138"></a>4138                     <strong class="reserved">if</strong> (digitTen == '9')
<a id="L4139" name="L4139"></a>4139                         digitTen = '0';
<a id="L4140" name="L4140"></a>4140                     <strong class="reserved">else</strong>
<a id="L4141" name="L4141"></a>4141                         digitTen++;
<a id="L4142" name="L4142"></a>4142                 <em class="brace">}</em>
<a id="L4143" name="L4143"></a>4143 
<a id="L4144" name="L4144"></a>4144                 DigitHundreds1000[i] = digitHundred;
<a id="L4145" name="L4145"></a>4145                 <strong class="reserved">if</strong> (i == (hundredIndex + 99)) <em class="brace">{</em>
<a id="L4146" name="L4146"></a>4146                     digitHundred++;
<a id="L4147" name="L4147"></a>4147                     hundredIndex += 100;
<a id="L4148" name="L4148"></a>4148                 <em class="brace">}</em>
<a id="L4149" name="L4149"></a>4149             <em class="brace">}</em>
<a id="L4150" name="L4150"></a>4150         <em class="brace">}</em>
<a id="L4151" name="L4151"></a>4151     <em class="brace">}</em>
<a id="L4152" name="L4152"></a>4152     <em class="comment">// ------ Fast-Path for double Constants end ------</em>
<a id="L4153" name="L4153"></a>4153 
<a id="L4154" name="L4154"></a>4154     <em class="comment">// Constants for characters used in programmatic (unlocalized) patterns.</em>
<a id="L4155" name="L4155"></a>4155     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_ZERO_DIGIT         = '0';
<a id="L4156" name="L4156"></a>4156     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_GROUPING_SEPARATOR = ',';
<a id="L4157" name="L4157"></a>4157     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_DECIMAL_SEPARATOR  = '.';
<a id="L4158" name="L4158"></a>4158     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_PER_MILLE          = '\u2030';
<a id="L4159" name="L4159"></a>4159     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_PERCENT            = '%';
<a id="L4160" name="L4160"></a>4160     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_DIGIT              = '#';
<a id="L4161" name="L4161"></a>4161     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_SEPARATOR          = ';';
<a id="L4162" name="L4162"></a>4162     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>     PATTERN_EXPONENT           = "E";
<a id="L4163" name="L4163"></a>4163     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       PATTERN_MINUS              = '-';
<a id="L4164" name="L4164"></a>4164 
<div class="comment">
      The CURRENCY_SIGN is the standard Unicode symbol for currency.  It
      is used in patterns and substituted with either the currency symbol,
      or if it is doubled, with the international currency symbol.  If the
      CURRENCY_SIGN is seen in a pattern, then the decimal separator is
      replaced with the monetary decimal separator.
      The CURRENCY_SIGN is not localized.</div>
<a id="L4174" name="L4174"></a>4174     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       CURRENCY_SIGN = '\u00A4';
<a id="L4175" name="L4175"></a>4175 
<a id="L4176" name="L4176"></a>4176     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>       QUOTE = '\'';
<a id="L4177" name="L4177"></a>4177 
<a id="L4178" name="L4178"></a>4178     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[] EmptyFieldPositionArray = <strong class="reserved">new</strong> <a href="../S/2490.html#L73" title="Defined at 73 in src/java/text/FieldPosition.java.">FieldPosition</a>[0];
<a id="L4179" name="L4179"></a>4179 
<a id="L4180" name="L4180"></a>4180     <em class="comment">// Upper limit on integer and fraction digits for a Java double</em>
<a id="L4181" name="L4181"></a>4181     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOUBLE_INTEGER_DIGITS  = 309;
<a id="L4182" name="L4182"></a>4182     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOUBLE_FRACTION_DIGITS = 340;
<a id="L4183" name="L4183"></a>4183 
<a id="L4184" name="L4184"></a>4184     <em class="comment">// Upper limit on integer and fraction digits for BigDecimal and BigInteger</em>
<a id="L4185" name="L4185"></a>4185     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAXIMUM_INTEGER_DIGITS  = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L4186" name="L4186"></a>4186     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAXIMUM_FRACTION_DIGITS = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L4187" name="L4187"></a>4187 
<a id="L4188" name="L4188"></a>4188     <em class="comment">// Proclaim JDK 1.1 serial compatibility.</em>
<a id="L4189" name="L4189"></a>4189     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 864413376551465018L;
<a id="L4190" name="L4190"></a>4190 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L490">[^]</a><a href="#L3716">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
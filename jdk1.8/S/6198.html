<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L232">[^]</a><a href="#L1443">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L232" title="Defined at 232.">getOutputMethod</a></li>
<li><a href="#L239" title="Defined at 239.">checkOutputMethod</a></li>
<li><a href="#L253" title="Defined at 253.">getTemplateInlining</a></li>
<li><a href="#L257" title="Defined at 257.">setTemplateInlining</a></li>
<li><a href="#L261" title="Defined at 261.">isSimplified</a></li>
<li><a href="#L265" title="Defined at 265.">setSimplified</a></li>
<li><a href="#L269" title="Defined at 269.">setHasIdCall</a></li>
<li><a href="#L273" title="Defined at 273.">setOutputProperty</a></li>
<li><a href="#L280" title="Defined at 280.">setOutputProperties</a></li>
<li><a href="#L284" title="Defined at 284.">getOutputProperties</a></li>
<li><a href="#L288" title="Defined at 288.">getLastOutputElement</a></li>
<li><a href="#L292" title="Defined at 292.">setMultiDocument</a></li>
<li><a href="#L296" title="Defined at 296.">isMultiDocument</a></li>
<li><a href="#L300" title="Defined at 300.">setCallsNodeset</a></li>
<li><a href="#L305" title="Defined at 305.">callsNodeset</a></li>
<li><a href="#L309" title="Defined at 309.">numberFormattingUsed</a></li>
<li><a href="#L321" title="Defined at 321.">setImportPrecedence</a></li>
<li><a href="#L352" title="Defined at 352.">getImportPrecedence</a></li>
<li><a href="#L361" title="Defined at 361.">getMinimumDescendantPrecedence</a></li>
<li><a href="#L385" title="Defined at 385.">checkForLoop</a></li>
<li><a href="#L397" title="Defined at 397.">setParser</a></li>
<li><a href="#L402" title="Defined at 402.">setParentStylesheet</a></li>
<li><a href="#L406" title="Defined at 406.">getParentStylesheet</a></li>
<li><a href="#L410" title="Defined at 410.">setImportingStylesheet</a></li>
<li><a href="#L415" title="Defined at 415.">setIncludingStylesheet</a></li>
<li><a href="#L420" title="Defined at 420.">addIncludedStylesheet</a></li>
<li><a href="#L427" title="Defined at 427.">setSystemId</a></li>
<li><a href="#L433" title="Defined at 433.">getSystemId</a></li>
<li><a href="#L437" title="Defined at 437.">setSourceLoader</a></li>
<li><a href="#L441" title="Defined at 441.">getSourceLoader</a></li>
<li><a href="#L445" title="Defined at 445.">makeStylesheetName</a></li>
<li><a href="#L452" title="Defined at 452.">hasGlobals</a></li>
<li><a href="#L461" title="Defined at 461.">hasLocalParams</a></li>
<li><a href="#L485" title="Defined at 485.">addPrefixMapping</a></li>
<li><a href="#L493" title="Defined at 493.">extensionURI</a></li>
<li><a href="#L506" title="Defined at 506.">isExtension</a></li>
<li><a href="#L510" title="Defined at 510.">declareExtensionPrefixes</a></li>
<li><a href="#L521" title="Defined at 521.">parseContents</a></li>
<li><a href="#L565" title="Defined at 565.">parseOwnChildren</a></li>
<li><a href="#L611" title="Defined at 611.">processModes</a></li>
<li><a href="#L622" title="Defined at 622.">compileModes</a></li>
<li><a href="#L631" title="Defined at 631.">getMode</a></li>
<li><a href="#L651" title="Defined at 651.">typeCheck</a></li>
<li><a href="#L663" title="Defined at 663.">translate</a></li>
<li><a href="#L667" title="Defined at 667.">addDOMField</a></li>
<li><a href="#L678" title="Defined at 678.">addStaticField</a></li>
<li><a href="#L692" title="Defined at 692.">translate</a></li>
<li><a href="#L753" title="Defined at 753.">compileStaticInitializer</a></li>
<li><a href="#L907" title="Defined at 907.">compileConstructor</a></li>
<li><a href="#L1012" title="Defined at 1012.">compileTopLevel</a></li>
<li><a href="#L1121" title="Defined at 1121.">resolveDependencies</a></li>
<li><a href="#L1176" title="Defined at 1176.">compileBuildKeys</a></li>
<li><a href="#L1230" title="Defined at 1230.">compileTransform</a></li>
<li><a href="#L1372" title="Defined at 1372.">peepHoleOptimization</a></li>
<li><a href="#L1387" title="Defined at 1387.">addParam</a></li>
<li><a href="#L1392" title="Defined at 1392.">addVariable</a></li>
<li><a href="#L1397" title="Defined at 1397.">display</a></li>
<li><a href="#L1404" title="Defined at 1404.">getNamespace</a></li>
<li><a href="#L1408" title="Defined at 1408.">getClassName</a></li>
<li><a href="#L1412" title="Defined at 1412.">getTemplates</a></li>
<li><a href="#L1416" title="Defined at 1416.">getAllValidTemplates</a></li>
<li><a href="#L1443" title="Defined at 1443.">addTemplate</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: Stylesheet.java,v 1.5 2005/09/28 13:48:16 pvedula Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.xsltc.compiler;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.util.Vector;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.Properties;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.StringTokenizer;
<a id="L32" name="L32"></a>  32 
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.SystemIDResolver;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ANEWARRAY;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.BasicType;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ConstantPoolGen;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.FieldGen;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.GETFIELD;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.GETSTATIC;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKEINTERFACE;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKESPECIAL;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.INVOKEVIRTUAL;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.ISTORE;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.InstructionHandle;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.InstructionList;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.LocalVariableGen;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.NEW;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.NEWARRAY;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.PUSH;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.PUTFIELD;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.PUTSTATIC;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.generic.TargetLostException;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.bcel.internal.util.InstructionFinder;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.ClassGenerator;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.ErrorMsg;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.MethodGenerator;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.Type;
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.TypeCheckError;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.compiler.util.Util;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet;
<a id="L61" name="L61"></a>  61 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L62" name="L62"></a>  62 
<div class="comment">
  @author Jacek Ambroziak
  @author Santiago Pericas-Geertsen
  @author Morten Jorgensen</div>
<a id="L68" name="L68"></a>  68 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7734.html" title="Multiple referred from 87 places.">Stylesheet</a> <strong class="reserved">extends</strong> <a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a> <em class="brace">{</em>
<a id="L69" name="L69"></a>  69 
<div class="comment">
      XSLT version defined in the stylesheet.</div>
<a id="L73" name="L73"></a>  73     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _version;
<a id="L74" name="L74"></a>  74 
<div class="comment">
      Internal name of this stylesheet used as a key into the symbol table.</div>
<a id="L78" name="L78"></a>  78     <strong class="reserved">private</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> _name;
<a id="L79" name="L79"></a>  79 
<div class="comment">
      A URI that represents the system ID for this stylesheet.</div>
<a id="L83" name="L83"></a>  83     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _systemId;
<a id="L84" name="L84"></a>  84 
<div class="comment">
      A reference to the parent stylesheet or null if topmost.</div>
<a id="L88" name="L88"></a>  88     <strong class="reserved">private</strong> <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> _parentStylesheet;
<a id="L89" name="L89"></a>  89 
<div class="comment">
      Contains global variables and parameters defined in the stylesheet.</div>
<a id="L93" name="L93"></a>  93     <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> _globals = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L94" name="L94"></a>  94 
<div class="comment">
      Used to cache the result returned by <code>hasLocalParams()</code>.</div>
<a id="L98" name="L98"></a>  98     <strong class="reserved">private</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> _hasLocalParams = <strong class="reserved">null</strong>;
<a id="L99" name="L99"></a>  99 
<div class="comment">
      The name of the class being generated.</div>
<a id="L103" name="L103"></a> 103     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _className;
<a id="L104" name="L104"></a> 104 
<div class="comment">
       Contains all templates defined in this stylesheet</div>
<a id="L108" name="L108"></a> 108     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> _templates = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L109" name="L109"></a> 109 
<div class="comment">
      Used to cache result of <code>getAllValidTemplates()</code>. Only
      set in top-level stylesheets that include/import other stylesheets.</div>
<a id="L114" name="L114"></a> 114     <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> _allValidTemplates = <strong class="reserved">null</strong>;
<a id="L115" name="L115"></a> 115 
<div class="comment">
      Counter to generate unique mode suffixes.</div>
<a id="L119" name="L119"></a> 119     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _nextModeSerial = 1;
<a id="L120" name="L120"></a> 120 
<div class="comment">
      Mapping between mode names and Mode instances.</div>
<a id="L124" name="L124"></a> 124     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _modes = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L125" name="L125"></a> 125 
<div class="comment">
      A reference to the default Mode object.</div>
<a id="L129" name="L129"></a> 129     <strong class="reserved">private</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a> _defaultMode;
<a id="L130" name="L130"></a> 130 
<div class="comment">
      Mapping between extension URIs and their prefixes.</div>
<a id="L134" name="L134"></a> 134     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _extensions = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L135" name="L135"></a> 135 
<div class="comment">
      Reference to the stylesheet from which this stylesheet was
      imported (if any).</div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">public</strong> <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> _importedFrom = <strong class="reserved">null</strong>;
<a id="L141" name="L141"></a> 141 
<div class="comment">
      Reference to the stylesheet from which this stylesheet was
      included (if any).</div>
<a id="L146" name="L146"></a> 146     <strong class="reserved">public</strong> <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> _includedFrom = <strong class="reserved">null</strong>;
<a id="L147" name="L147"></a> 147 
<div class="comment">
      Array of all the stylesheets imported or included from this one.</div>
<a id="L151" name="L151"></a> 151     <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> _includedStylesheets = <strong class="reserved">null</strong>;
<a id="L152" name="L152"></a> 152 
<div class="comment">
      Import precendence for this stylesheet.</div>
<a id="L156" name="L156"></a> 156     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _importPrecedence = 1;
<a id="L157" name="L157"></a> 157 
<div class="comment">
      Minimum precendence of any descendant stylesheet by inclusion or
      importation.</div>
<a id="L162" name="L162"></a> 162     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _minimumDescendantPrecedence = -1;
<a id="L163" name="L163"></a> 163 
<div class="comment">
      Mapping between key names and Key objects (needed by Key/IdPattern).</div>
<a id="L167" name="L167"></a> 167     <strong class="reserved">private</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _keys = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L168" name="L168"></a> 168 
<div class="comment">
      A reference to the SourceLoader set by the user (a URIResolver
      if the JAXP API is being used).</div>
<a id="L173" name="L173"></a> 173     <strong class="reserved">private</strong> <a href="../S/6170.html#L31" title="Defined at 31 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SourceLoader.java.">SourceLoader</a> _loader = <strong class="reserved">null</strong>;
<a id="L174" name="L174"></a> 174 
<div class="comment">
      Flag indicating if format-number() is called.</div>
<a id="L178" name="L178"></a> 178     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _numberFormattingUsed = <strong class="reserved">false</strong>;
<a id="L179" name="L179"></a> 179 
<div class="comment">
      Flag indicating if this is a simplified stylesheets. A template
      matching on "/" must be added in this case.</div>
<a id="L184" name="L184"></a> 184     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _simplified = <strong class="reserved">false</strong>;
<a id="L185" name="L185"></a> 185 
<div class="comment">
      Flag indicating if multi-document support is needed.</div>
<a id="L189" name="L189"></a> 189     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _multiDocument = <strong class="reserved">false</strong>;
<a id="L190" name="L190"></a> 190 
<div class="comment">
      Flag indicating if nodset() is called.</div>
<a id="L194" name="L194"></a> 194     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _callsNodeset = <strong class="reserved">false</strong>;
<a id="L195" name="L195"></a> 195 
<div class="comment">
      Flag indicating if id() is called.</div>
<a id="L199" name="L199"></a> 199     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _hasIdCall = <strong class="reserved">false</strong>;
<a id="L200" name="L200"></a> 200 
<div class="comment">
      Set to true to enable template inlining optimization.
      @see XSLTC#_templateInlining</div>
<a id="L205" name="L205"></a> 205     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _templateInlining = <strong class="reserved">false</strong>;
<a id="L206" name="L206"></a> 206 
<div class="comment">
      A reference to the last xsl:output object found in the styleshet.</div>
<a id="L210" name="L210"></a> 210     <strong class="reserved">private</strong> <a href="../S/6200.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">Output</a>  _lastOutputElement = <strong class="reserved">null</strong>;
<a id="L211" name="L211"></a> 211 
<div class="comment">
      Output properties for this stylesheet.</div>
<a id="L215" name="L215"></a> 215     <strong class="reserved">private</strong> <a href="../S/1039.html#L122" title="Defined at 122 in src/java/util/Properties.java.">Properties</a> _outputProperties = <strong class="reserved">null</strong>;
<a id="L216" name="L216"></a> 216 
<div class="comment">
      Output method for this stylesheet (must be set to one of
      the constants defined below).</div>
<a id="L221" name="L221"></a> 221     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _outputMethod = UNKNOWN_OUTPUT;
<a id="L222" name="L222"></a> 222 
<a id="L223" name="L223"></a> 223     <em class="comment">// Output method constants</em>
<a id="L224" name="L224"></a> 224     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> UNKNOWN_OUTPUT = 0;
<a id="L225" name="L225"></a> 225     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> XML_OUTPUT     = 1;
<a id="L226" name="L226"></a> 226     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> HTML_OUTPUT    = 2;
<a id="L227" name="L227"></a> 227     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TEXT_OUTPUT    = 3;
<a id="L228" name="L228"></a> 228 
<div class="comment">
      Return the output method</div>
<a id="L232" name="L232"></a> 232     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18188.html" title="Multiple referred from 2 places.">getOutputMethod</a>() <em class="brace">{</em>
<a id="L233" name="L233"></a> 233         <strong class="reserved">return</strong> _outputMethod;
<a id="L234" name="L234"></a> 234     <em class="brace">}</em>
<a id="L235" name="L235"></a> 235 
<div class="comment">
      Check and set the output method</div>
<a id="L239" name="L239"></a> 239     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L736" title="Referred from 736 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">checkOutputMethod</a>() <em class="brace">{</em>
<a id="L240" name="L240"></a> 240         <strong class="reserved">if</strong> (_lastOutputElement != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> method = _lastOutputElement.<a href="../D/21275.html" title="Multiple defined in 2 places.">getOutputMethod</a>();
<a id="L242" name="L242"></a> 242             <strong class="reserved">if</strong> (method != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243                 <strong class="reserved">if</strong> (method.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xml"))
<a id="L244" name="L244"></a> 244                     _outputMethod = XML_OUTPUT;
<a id="L245" name="L245"></a> 245                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (method.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("html"))
<a id="L246" name="L246"></a> 246                     _outputMethod = HTML_OUTPUT;
<a id="L247" name="L247"></a> 247                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (method.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("text"))
<a id="L248" name="L248"></a> 248                     _outputMethod = TEXT_OUTPUT;
<a id="L249" name="L249"></a> 249             <em class="brace">}</em>
<a id="L250" name="L250"></a> 250         <em class="brace">}</em>
<a id="L251" name="L251"></a> 251     <em class="brace">}</em>
<a id="L252" name="L252"></a> 252 
<a id="L253" name="L253"></a> 253     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/19415.html" title="Multiple referred from 3 places.">getTemplateInlining</a>() <em class="brace">{</em>
<a id="L254" name="L254"></a> 254         <strong class="reserved">return</strong> _templateInlining;
<a id="L255" name="L255"></a> 255     <em class="brace">}</em>
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28270.html" title="Multiple referred from 11 places.">setTemplateInlining</a>(<strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258         _templateInlining = flag;
<a id="L259" name="L259"></a> 259     <em class="brace">}</em>
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isSimplified() <em class="brace">{</em>
<a id="L262" name="L262"></a> 262         <strong class="reserved">return</strong>(_simplified);
<a id="L263" name="L263"></a> 263     <em class="brace">}</em>
<a id="L264" name="L264"></a> 264 
<a id="L265" name="L265"></a> 265     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6089.html#L374" title="Referred from 374 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">setSimplified</a>() <em class="brace">{</em>
<a id="L266" name="L266"></a> 266         _simplified = <strong class="reserved">true</strong>;
<a id="L267" name="L267"></a> 267     <em class="brace">}</em>
<a id="L268" name="L268"></a> 268 
<a id="L269" name="L269"></a> 269     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27491.html" title="Multiple referred from 5 places.">setHasIdCall</a>(<strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L270" name="L270"></a> 270         _hasIdCall = flag;
<a id="L271" name="L271"></a> 271     <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27881.html" title="Multiple referred from 4 places.">setOutputProperty</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L274" name="L274"></a> 274         <strong class="reserved">if</strong> (_outputProperties == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L275" name="L275"></a> 275             _outputProperties = <strong class="reserved">new</strong> <a href="../S/1039.html#L122" title="Defined at 122 in src/java/util/Properties.java.">Properties</a>();
<a id="L276" name="L276"></a> 276         <em class="brace">}</em>
<a id="L277" name="L277"></a> 277         _outputProperties.<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L278" name="L278"></a> 278     <em class="brace">}</em>
<a id="L279" name="L279"></a> 279 
<a id="L280" name="L280"></a> 280     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27880.html" title="Multiple referred from 3 places.">setOutputProperties</a>(<a href="../S/1039.html#L122" title="Defined at 122 in src/java/util/Properties.java.">Properties</a> props) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281         _outputProperties = props;
<a id="L282" name="L282"></a> 282     <em class="brace">}</em>
<a id="L283" name="L283"></a> 283 
<a id="L284" name="L284"></a> 284     <strong class="reserved">public</strong> <a href="../S/1039.html#L122" title="Defined at 122 in src/java/util/Properties.java.">Properties</a> <a href="../R/18190.html" title="Multiple referred from 6 places.">getOutputProperties</a>() <em class="brace">{</em>
<a id="L285" name="L285"></a> 285         <strong class="reserved">return</strong> _outputProperties;
<a id="L286" name="L286"></a> 286     <em class="brace">}</em>
<a id="L287" name="L287"></a> 287 
<a id="L288" name="L288"></a> 288     <strong class="reserved">public</strong> <a href="../S/6200.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">Output</a> getLastOutputElement() <em class="brace">{</em>
<a id="L289" name="L289"></a> 289         <strong class="reserved">return</strong> _lastOutputElement;
<a id="L290" name="L290"></a> 290     <em class="brace">}</em>
<a id="L291" name="L291"></a> 291 
<a id="L292" name="L292"></a> 292     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27786.html" title="Multiple referred from 7 places.">setMultiDocument</a>(<strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L293" name="L293"></a> 293         _multiDocument = flag;
<a id="L294" name="L294"></a> 294     <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21749.html" title="Multiple referred from 4 places.">isMultiDocument</a>() <em class="brace">{</em>
<a id="L297" name="L297"></a> 297         <strong class="reserved">return</strong> _multiDocument;
<a id="L298" name="L298"></a> 298     <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27000.html" title="Multiple referred from 3 places.">setCallsNodeset</a>(<strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301         <strong class="reserved">if</strong> (flag) <a href="../D/33298.html" title="Multiple defined in 3 places.">setMultiDocument</a>(flag);
<a id="L302" name="L302"></a> 302         _callsNodeset = flag;
<a id="L303" name="L303"></a> 303     <em class="brace">}</em>
<a id="L304" name="L304"></a> 304 
<a id="L305" name="L305"></a> 305     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/10863.html" title="Multiple referred from 3 places.">callsNodeset</a>() <em class="brace">{</em>
<a id="L306" name="L306"></a> 306         <strong class="reserved">return</strong> _callsNodeset;
<a id="L307" name="L307"></a> 307     <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<a id="L309" name="L309"></a> 309     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23854.html" title="Multiple referred from 2 places.">numberFormattingUsed</a>() <em class="brace">{</em>
<a id="L310" name="L310"></a> 310         _numberFormattingUsed = <strong class="reserved">true</strong>;
<div class="comment">
          Fix for bug 23046, if the stylesheet is included, set the
          numberFormattingUsed flag to the parent stylesheet too.
          AbstractTranslet.addDecimalFormat() will be inlined once for the
          outer most stylesheet.</div>
<a id="L317" name="L317"></a> 317         <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../S/6198.html#L406" title="Defined at 406 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">getParentStylesheet</a>();
<a id="L318" name="L318"></a> 318         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../S/6198.html#L309" title="Defined at 309 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">numberFormattingUsed</a>();
<a id="L319" name="L319"></a> 319     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320 
<a id="L321" name="L321"></a> 321     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27541.html" title="Multiple referred from 6 places.">setImportPrecedence</a>(<strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/3509.html#L229" title="Defined at 229 in src/javax/management/BinaryOpValueExp.java.">precedence</a>) <em class="brace">{</em>
<a id="L322" name="L322"></a> 322         <em class="comment">// Set import precedence for this stylesheet</em>
<a id="L323" name="L323"></a> 323         _importPrecedence = <a href="../S/3509.html#L229" title="Defined at 229 in src/javax/management/BinaryOpValueExp.java.">precedence</a>;
<a id="L324" name="L324"></a> 324 
<a id="L325" name="L325"></a> 325         <em class="comment">// Set import precedence for all included stylesheets</em>
<a id="L326" name="L326"></a> 326         <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L327" name="L327"></a> 327         <strong class="reserved">while</strong> (<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328             <a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a> child = (<a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a>)<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L329" name="L329"></a> 329             <strong class="reserved">if</strong> (child <strong class="reserved">instanceof</strong> <a href="../S/6154.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Include.java.">Include</a>) <em class="brace">{</em>
<a id="L330" name="L330"></a> 330                 <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> included = ((<a href="../S/6154.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Include.java.">Include</a>)child).<a href="../S/6154.html#L53" title="Defined at 53 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Include.java.">getIncludedStylesheet</a>();
<a id="L331" name="L331"></a> 331                 <strong class="reserved">if</strong> (included != <strong class="reserved">null</strong> &amp;&amp; included._includedFrom == <strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332                     included.<a href="../S/6198.html#L321" title="Defined at 321 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">setImportPrecedence</a>(<a href="../S/3509.html#L229" title="Defined at 229 in src/javax/management/BinaryOpValueExp.java.">precedence</a>);
<a id="L333" name="L333"></a> 333                 <em class="brace">}</em>
<a id="L334" name="L334"></a> 334             <em class="brace">}</em>
<a id="L335" name="L335"></a> 335         <em class="brace">}</em>
<a id="L336" name="L336"></a> 336 
<a id="L337" name="L337"></a> 337         <em class="comment">// Set import precedence for the stylesheet that imported this one</em>
<a id="L338" name="L338"></a> 338         <strong class="reserved">if</strong> (_importedFrom != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L339" name="L339"></a> 339             <strong class="reserved">if</strong> (_importedFrom.<a href="../D/19631.html" title="Multiple defined in 2 places.">getImportPrecedence</a>() &lt; <a href="../S/3509.html#L229" title="Defined at 229 in src/javax/management/BinaryOpValueExp.java.">precedence</a>) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340                 <strong class="reserved">final</strong> <a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> parser = <a href="../D/21413.html" title="Multiple defined in 8 places.">getParser</a>();
<a id="L341" name="L341"></a> 341                 <strong class="reserved">final</strong> <strong class="reserved">int</strong> nextPrecedence = parser.<a href="../S/6089.html#L224" title="Defined at 224 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">getNextImportPrecedence</a>();
<a id="L342" name="L342"></a> 342                 _importedFrom.<a href="../S/6198.html#L321" title="Defined at 321 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">setImportPrecedence</a>(nextPrecedence);
<a id="L343" name="L343"></a> 343             <em class="brace">}</em>
<a id="L344" name="L344"></a> 344         <em class="brace">}</em>
<a id="L345" name="L345"></a> 345         <em class="comment">// Set import precedence for the stylesheet that included this one</em>
<a id="L346" name="L346"></a> 346         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (_includedFrom != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347             <strong class="reserved">if</strong> (_includedFrom.<a href="../D/19631.html" title="Multiple defined in 2 places.">getImportPrecedence</a>() != <a href="../S/3509.html#L229" title="Defined at 229 in src/javax/management/BinaryOpValueExp.java.">precedence</a>)
<a id="L348" name="L348"></a> 348                 _includedFrom.<a href="../S/6198.html#L321" title="Defined at 321 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">setImportPrecedence</a>(<a href="../S/3509.html#L229" title="Defined at 229 in src/javax/management/BinaryOpValueExp.java.">precedence</a>);
<a id="L349" name="L349"></a> 349         <em class="brace">}</em>
<a id="L350" name="L350"></a> 350     <em class="brace">}</em>
<a id="L351" name="L351"></a> 351 
<a id="L352" name="L352"></a> 352     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17012.html" title="Multiple referred from 17 places.">getImportPrecedence</a>() <em class="brace">{</em>
<a id="L353" name="L353"></a> 353         <strong class="reserved">return</strong> _importPrecedence;
<a id="L354" name="L354"></a> 354     <em class="brace">}</em>
<a id="L355" name="L355"></a> 355 
<div class="comment">
      Get the minimum of the precedence of this stylesheet, any stylesheet
      imported by this stylesheet and any include/import descendant of this
      stylesheet.</div>
<a id="L361" name="L361"></a> 361     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17731.html" title="Multiple referred from 2 places.">getMinimumDescendantPrecedence</a>() <em class="brace">{</em>
<a id="L362" name="L362"></a> 362         <strong class="reserved">if</strong> (_minimumDescendantPrecedence == -1) <em class="brace">{</em>
<a id="L363" name="L363"></a> 363             <em class="comment">// Start with precedence of current stylesheet as a basis.</em>
<a id="L364" name="L364"></a> 364             <strong class="reserved">int</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <a href="../D/19631.html" title="Multiple defined in 2 places.">getImportPrecedence</a>();
<a id="L365" name="L365"></a> 365 
<a id="L366" name="L366"></a> 366             <em class="comment">// Recursively examine all imported/included stylesheets.</em>
<a id="L367" name="L367"></a> 367             <strong class="reserved">final</strong> <strong class="reserved">int</strong> inclImpCount = (_includedStylesheets != <strong class="reserved">null</strong>)
<a id="L368" name="L368"></a> 368                                           ? _includedStylesheets.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()
<a id="L369" name="L369"></a> 369                                           : 0;
<a id="L370" name="L370"></a> 370 
<a id="L371" name="L371"></a> 371             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; inclImpCount; i++) <em class="brace">{</em>
<a id="L372" name="L372"></a> 372                 <strong class="reserved">int</strong> prec = ((<a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a>)_includedStylesheets.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i))
<a id="L373" name="L373"></a> 373                                               .<a href="../S/6198.html#L361" title="Defined at 361 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">getMinimumDescendantPrecedence</a>();
<a id="L374" name="L374"></a> 374 
<a id="L375" name="L375"></a> 375                 <strong class="reserved">if</strong> (prec &lt; <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376                     <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = prec;
<a id="L377" name="L377"></a> 377                 <em class="brace">}</em>
<a id="L378" name="L378"></a> 378             <em class="brace">}</em>
<a id="L379" name="L379"></a> 379 
<a id="L380" name="L380"></a> 380             _minimumDescendantPrecedence = <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>;
<a id="L381" name="L381"></a> 381         <em class="brace">}</em>
<a id="L382" name="L382"></a> 382         <strong class="reserved">return</strong> _minimumDescendantPrecedence;
<a id="L383" name="L383"></a> 383     <em class="brace">}</em>
<a id="L384" name="L384"></a> 384 
<a id="L385" name="L385"></a> 385     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11173.html" title="Multiple referred from 3 places.">checkForLoop</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>) <em class="brace">{</em>
<a id="L386" name="L386"></a> 386         <em class="comment">// Return true if this stylesheet includes/imports itself</em>
<a id="L387" name="L387"></a> 387         <strong class="reserved">if</strong> (_systemId != <strong class="reserved">null</strong> &amp;&amp; _systemId.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L389" name="L389"></a> 389         <em class="brace">}</em>
<a id="L390" name="L390"></a> 390         <em class="comment">// Then check with any stylesheets that included/imported this one</em>
<a id="L391" name="L391"></a> 391         <strong class="reserved">if</strong> (_parentStylesheet != <strong class="reserved">null</strong>)
<a id="L392" name="L392"></a> 392             <strong class="reserved">return</strong> _parentStylesheet.<a href="../S/6198.html#L385" title="Defined at 385 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">checkForLoop</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L393" name="L393"></a> 393         <em class="comment">// Otherwise OK</em>
<a id="L394" name="L394"></a> 394         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L395" name="L395"></a> 395     <em class="brace">}</em>
<a id="L396" name="L396"></a> 396 
<a id="L397" name="L397"></a> 397     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27918.html" title="Multiple referred from 62 places.">setParser</a>(<a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> parser) <em class="brace">{</em>
<a id="L398" name="L398"></a> 398         <strong class="reserved">super</strong>.<a href="../D/33518.html" title="Multiple defined in 24 places.">setParser</a>(parser);
<a id="L399" name="L399"></a> 399         _name = <a href="../S/6198.html#L445" title="Defined at 445 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">makeStylesheetName</a>("__stylesheet_");
<a id="L400" name="L400"></a> 400     <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27914.html" title="Multiple referred from 4 places.">setParentStylesheet</a>(<a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L403" name="L403"></a> 403         _parentStylesheet = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L404" name="L404"></a> 404     <em class="brace">}</em>
<a id="L405" name="L405"></a> 405 
<a id="L406" name="L406"></a> 406     <strong class="reserved">public</strong> <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> <a href="../S/6198.html#L317" title="Referred from 317 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">getParentStylesheet</a>() <em class="brace">{</em>
<a id="L407" name="L407"></a> 407         <strong class="reserved">return</strong> _parentStylesheet;
<a id="L408" name="L408"></a> 408     <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6199.html#L125" title="Referred from 125 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Import.java.">setImportingStylesheet</a>(<a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411         _importedFrom = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L412" name="L412"></a> 412         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../S/6198.html#L420" title="Defined at 420 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addIncludedStylesheet</a>(<strong class="reserved">this</strong>);
<a id="L413" name="L413"></a> 413     <em class="brace">}</em>
<a id="L414" name="L414"></a> 414 
<a id="L415" name="L415"></a> 415     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6154.html#L126" title="Referred from 126 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Include.java.">setIncludingStylesheet</a>(<a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416         _includedFrom = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L417" name="L417"></a> 417         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../S/6198.html#L420" title="Defined at 420 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addIncludedStylesheet</a>(<strong class="reserved">this</strong>);
<a id="L418" name="L418"></a> 418     <em class="brace">}</em>
<a id="L419" name="L419"></a> 419 
<a id="L420" name="L420"></a> 420     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9790.html" title="Multiple referred from 2 places.">addIncludedStylesheet</a>(<a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> child) <em class="brace">{</em>
<a id="L421" name="L421"></a> 421         <strong class="reserved">if</strong> (_includedStylesheets == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L422" name="L422"></a> 422             _includedStylesheets = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L423" name="L423"></a> 423         <em class="brace">}</em>
<a id="L424" name="L424"></a> 424         _includedStylesheets.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(child);
<a id="L425" name="L425"></a> 425     <em class="brace">}</em>
<a id="L426" name="L426"></a> 426 
<a id="L427" name="L427"></a> 427     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28252.html" title="Multiple referred from 67 places.">setSystemId</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>) <em class="brace">{</em>
<a id="L428" name="L428"></a> 428         <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L429" name="L429"></a> 429             _systemId = <a href="../D/8695.html" title="Multiple defined in 2 places.">SystemIDResolver</a>.<a href="../D/16701.html" title="Multiple defined in 4 places.">getAbsoluteURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L430" name="L430"></a> 430         <em class="brace">}</em>
<a id="L431" name="L431"></a> 431     <em class="brace">}</em>
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19319.html" title="Multiple referred from 162 places.">getSystemId</a>() <em class="brace">{</em>
<a id="L434" name="L434"></a> 434         <strong class="reserved">return</strong> _systemId;
<a id="L435" name="L435"></a> 435     <em class="brace">}</em>
<a id="L436" name="L436"></a> 436 
<a id="L437" name="L437"></a> 437     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28200.html" title="Multiple referred from 5 places.">setSourceLoader</a>(<a href="../S/6170.html#L31" title="Defined at 31 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SourceLoader.java.">SourceLoader</a> loader) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438         _loader = loader;
<a id="L439" name="L439"></a> 439     <em class="brace">}</em>
<a id="L440" name="L440"></a> 440 
<a id="L441" name="L441"></a> 441     <strong class="reserved">public</strong> <a href="../S/6170.html#L31" title="Defined at 31 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SourceLoader.java.">SourceLoader</a> <a href="../R/19099.html" title="Multiple referred from 2 places.">getSourceLoader</a>() <em class="brace">{</em>
<a id="L442" name="L442"></a> 442         <strong class="reserved">return</strong> _loader;
<a id="L443" name="L443"></a> 443     <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445     <strong class="reserved">private</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../S/6198.html#L399" title="Referred from 399 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">makeStylesheetName</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446         <strong class="reserved">return</strong> <a href="../D/21413.html" title="Multiple defined in 8 places.">getParser</a>().<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>+<a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../S/6196.html#L842" title="Defined at 842 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">nextStylesheetSerial</a>());
<a id="L447" name="L447"></a> 447     <em class="brace">}</em>
<a id="L448" name="L448"></a> 448 
<div class="comment">
      Returns true if this stylesheet has global vars or params.</div>
<a id="L452" name="L452"></a> 452     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> hasGlobals() <em class="brace">{</em>
<a id="L453" name="L453"></a> 453         <strong class="reserved">return</strong> _globals.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0;
<a id="L454" name="L454"></a> 454     <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Returns true if at least one template in the stylesheet has params
      defined. Uses the variable <code>_hasLocalParams</code> to cache the
      result.</div>
<a id="L461" name="L461"></a> 461     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20217.html" title="Multiple referred from 6 places.">hasLocalParams</a>() <em class="brace">{</em>
<a id="L462" name="L462"></a> 462         <strong class="reserved">if</strong> (_hasLocalParams == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> templates = <a href="../S/6198.html#L1416" title="Defined at 1416 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">getAllValidTemplates</a>();
<a id="L464" name="L464"></a> 464             <strong class="reserved">final</strong> <strong class="reserved">int</strong> n = templates.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L465" name="L465"></a> 465             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L466" name="L466"></a> 466                 <strong class="reserved">final</strong> <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a> template = (<a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a>)templates.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L467" name="L467"></a> 467                 <strong class="reserved">if</strong> (template.<a href="../S/6217.html#L67" title="Defined at 67 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">hasParams</a>()) <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                     _hasLocalParams = <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE;
<a id="L469" name="L469"></a> 469                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L470" name="L470"></a> 470                 <em class="brace">}</em>
<a id="L471" name="L471"></a> 471             <em class="brace">}</em>
<a id="L472" name="L472"></a> 472             _hasLocalParams = <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L473" name="L473"></a> 473             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L474" name="L474"></a> 474         <em class="brace">}</em>
<a id="L475" name="L475"></a> 475         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L476" name="L476"></a> 476             <strong class="reserved">return</strong> _hasLocalParams.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L477" name="L477"></a> 477         <em class="brace">}</em>
<a id="L478" name="L478"></a> 478     <em class="brace">}</em>
<a id="L479" name="L479"></a> 479 
<div class="comment">
      Adds a single prefix mapping to this syntax tree node.
      @param prefix Namespace prefix.
      @param uri Namespace URI.</div>
<a id="L485" name="L485"></a> 485     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/9910.html" title="Multiple referred from 3 places.">addPrefixMapping</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri) <em class="brace">{</em>
<a id="L486" name="L486"></a> 486         <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(EMPTYSTRING) &amp;&amp; uri.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(XHTML_URI)) <strong class="reserved">return</strong>;
<a id="L487" name="L487"></a> 487         <strong class="reserved">super</strong>.<a href="../D/11008.html" title="Multiple defined in 2 places.">addPrefixMapping</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L488" name="L488"></a> 488     <em class="brace">}</em>
<a id="L489" name="L489"></a> 489 
<div class="comment">
      Store extension URIs</div>
<a id="L493" name="L493"></a> 493     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L513" title="Referred from 513 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">extensionURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> prefixes, <a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> stable) <em class="brace">{</em>
<a id="L494" name="L494"></a> 494         <strong class="reserved">if</strong> (prefixes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L495" name="L495"></a> 495             <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> tokens = <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(prefixes);
<a id="L496" name="L496"></a> 496             <strong class="reserved">while</strong> (tokens.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>()) <em class="brace">{</em>
<a id="L497" name="L497"></a> 497                 <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = tokens.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>();
<a id="L498" name="L498"></a> 498                 <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri = <a href="../D/27133.html" title="Multiple defined in 9 places.">lookupNamespace</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L499" name="L499"></a> 499                 <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500                     _extensions.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(uri, <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L501" name="L501"></a> 501                 <em class="brace">}</em>
<a id="L502" name="L502"></a> 502             <em class="brace">}</em>
<a id="L503" name="L503"></a> 503         <em class="brace">}</em>
<a id="L504" name="L504"></a> 504     <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<a id="L506" name="L506"></a> 506     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21434.html" title="Multiple referred from 7 places.">isExtension</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri) <em class="brace">{</em>
<a id="L507" name="L507"></a> 507         <strong class="reserved">return</strong> (_extensions.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(uri) != <strong class="reserved">null</strong>);
<a id="L508" name="L508"></a> 508     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6089.html#L1330" title="Referred from 1330 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">declareExtensionPrefixes</a>(<a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> parser) <em class="brace">{</em>
<a id="L511" name="L511"></a> 511         <strong class="reserved">final</strong> <a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> stable = parser.<a href="../D/22882.html" title="Multiple defined in 5 places.">getSymbolTable</a>();
<a id="L512" name="L512"></a> 512         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> extensionPrefixes = <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("extension-element-prefixes");
<a id="L513" name="L513"></a> 513         <a href="../S/6198.html#L493" title="Defined at 493 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">extensionURI</a>(extensionPrefixes, stable);
<a id="L514" name="L514"></a> 514     <em class="brace">}</em>
<a id="L515" name="L515"></a> 515 
<div class="comment">
      Parse the version and uri fields of the stylesheet and add an
      entry to the symbol table mapping the name <tt>__stylesheet_</tt>
      to an instance of this class.</div>
<a id="L521" name="L521"></a> 521     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24531.html" title="Multiple referred from 12 places.">parseContents</a>(<a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> parser) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522         <strong class="reserved">final</strong> <a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> stable = parser.<a href="../D/22882.html" title="Multiple defined in 5 places.">getSymbolTable</a>();
<a id="L523" name="L523"></a> 523 
<div class="comment">
        // Make sure the XSL version set in this stylesheet
        if ((_version == null) || (_version.equals(EMPTYSTRING))) {
            reportError(this, parser, ErrorMsg.REQUIRED_ATTR_ERR,"version");
        }
        // Verify that the version is 1.0 and nothing else
        else if (!_version.equals("1.0")) {
            reportError(this, parser, ErrorMsg.XSL_VERSION_ERR, _version);
        }</div>
<a id="L534" name="L534"></a> 534 
<a id="L535" name="L535"></a> 535         <em class="comment">// Add the implicit mapping of 'xml' to the XML namespace URI</em>
<a id="L536" name="L536"></a> 536         <a href="../D/11008.html" title="Multiple defined in 2 places.">addPrefixMapping</a>("xml", "http://www.w3.org/XML/1998/namespace");
<a id="L537" name="L537"></a> 537 
<a id="L538" name="L538"></a> 538         <em class="comment">// Report and error if more than one stylesheet defined</em>
<a id="L539" name="L539"></a> 539         <strong class="reserved">final</strong> <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> sheet = stable.<a href="../S/6093.html#L74" title="Defined at 74 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">addStylesheet</a>(_name, <strong class="reserved">this</strong>);
<a id="L540" name="L540"></a> 540         <strong class="reserved">if</strong> (sheet != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L541" name="L541"></a> 541             <em class="comment">// Error: more that one stylesheet defined</em>
<a id="L542" name="L542"></a> 542             <a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a> err = <strong class="reserved">new</strong> <a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>(<a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>.MULTIPLE_STYLESHEET_ERR,<strong class="reserved">this</strong>);
<a id="L543" name="L543"></a> 543             parser.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ERROR, err);
<a id="L544" name="L544"></a> 544         <em class="brace">}</em>
<a id="L545" name="L545"></a> 545 
<a id="L546" name="L546"></a> 546         <em class="comment">// If this is a simplified stylesheet we must create a template that</em>
<a id="L547" name="L547"></a> 547         <em class="comment">// grabs the root node of the input doc ( &lt;xsl:template match="/"/&gt; ).</em>
<a id="L548" name="L548"></a> 548         <em class="comment">// This template needs the current element (the one passed to this</em>
<a id="L549" name="L549"></a> 549         <em class="comment">// method) as its only child, so the Template class has a special</em>
<a id="L550" name="L550"></a> 550         <em class="comment">// method that handles this (parseSimplified()).</em>
<a id="L551" name="L551"></a> 551         <strong class="reserved">if</strong> (_simplified) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552             stable.<a href="../S/6093.html#L200" title="Defined at 200 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">excludeURI</a>(XSLT_URI);
<a id="L553" name="L553"></a> 553             <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a> template = <strong class="reserved">new</strong> <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a>();
<a id="L554" name="L554"></a> 554             template.<a href="../S/6217.html#L267" title="Defined at 267 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">parseSimplified</a>(<strong class="reserved">this</strong>, parser);
<a id="L555" name="L555"></a> 555         <em class="brace">}</em>
<a id="L556" name="L556"></a> 556         <em class="comment">// Parse the children of this node</em>
<a id="L557" name="L557"></a> 557         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L558" name="L558"></a> 558             <a href="../S/6198.html#L565" title="Defined at 565 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">parseOwnChildren</a>(parser);
<a id="L559" name="L559"></a> 559         <em class="brace">}</em>
<a id="L560" name="L560"></a> 560     <em class="brace">}</em>
<a id="L561" name="L561"></a> 561 
<div class="comment">
      Parse all direct children of the <xsl:stylesheet /> element.</div>
<a id="L565" name="L565"></a> 565     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L558" title="Referred from 558 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">parseOwnChildren</a>(<a href="../D/6629.html" title="Multiple defined in 9 places.">Parser</a> parser) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566         <strong class="reserved">final</strong> <a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> stable = parser.<a href="../D/22882.html" title="Multiple defined in 5 places.">getSymbolTable</a>();
<a id="L567" name="L567"></a> 567         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> excludePrefixes = <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("exclude-result-prefixes");
<a id="L568" name="L568"></a> 568         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> extensionPrefixes = <a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>("extension-element-prefixes");
<a id="L569" name="L569"></a> 569 
<a id="L570" name="L570"></a> 570         <em class="comment">// Exclude XSLT uri</em>
<a id="L571" name="L571"></a> 571         stable.<a href="../S/6093.html#L273" title="Defined at 273 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">pushExcludedNamespacesContext</a>();
<a id="L572" name="L572"></a> 572         stable.<a href="../S/6093.html#L200" title="Defined at 200 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">excludeURI</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XSLT_URI);
<a id="L573" name="L573"></a> 573         stable.<a href="../S/6093.html#L220" title="Defined at 220 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">excludeNamespaces</a>(excludePrefixes);
<a id="L574" name="L574"></a> 574         stable.<a href="../S/6093.html#L220" title="Defined at 220 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">excludeNamespaces</a>(extensionPrefixes);
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576         <strong class="reserved">final</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> contents = <a href="../D/17972.html" title="Multiple defined in 129 places.">getContents</a>();
<a id="L577" name="L577"></a> 577         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = contents.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579         <em class="comment">// We have to scan the stylesheet element's top-level elements for</em>
<a id="L580" name="L580"></a> 580         <em class="comment">// variables and/or parameters before we parse the other elements</em>
<a id="L581" name="L581"></a> 581         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>; i++) <em class="brace">{</em>
<a id="L582" name="L582"></a> 582             <a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a> child = (<a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a>)contents.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L583" name="L583"></a> 583             <strong class="reserved">if</strong> ((child <strong class="reserved">instanceof</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a>) ||
<a id="L584" name="L584"></a> 584                 (child <strong class="reserved">instanceof</strong> <a href="../S/6160.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/NamespaceAlias.java.">NamespaceAlias</a>)) <em class="brace">{</em>
<a id="L585" name="L585"></a> 585                 parser.<a href="../D/22882.html" title="Multiple defined in 5 places.">getSymbolTable</a>().<a href="../D/32313.html" title="Multiple defined in 4 places.">setCurrentNode</a>(child);
<a id="L586" name="L586"></a> 586                 child.<a href="../D/29115.html" title="Multiple defined in 37 places.">parseContents</a>(parser);
<a id="L587" name="L587"></a> 587             <em class="brace">}</em>
<a id="L588" name="L588"></a> 588         <em class="brace">}</em>
<a id="L589" name="L589"></a> 589 
<a id="L590" name="L590"></a> 590         <em class="comment">// Now go through all the other top-level elements...</em>
<a id="L591" name="L591"></a> 591         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>; i++) <em class="brace">{</em>
<a id="L592" name="L592"></a> 592             <a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a> child = (<a href="../S/6076.html#L64" title="Defined at 64 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">SyntaxTreeNode</a>)contents.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L593" name="L593"></a> 593             <strong class="reserved">if</strong> (!(child <strong class="reserved">instanceof</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a>) &amp;&amp;
<a id="L594" name="L594"></a> 594                 !(child <strong class="reserved">instanceof</strong> <a href="../S/6160.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/NamespaceAlias.java.">NamespaceAlias</a>)) <em class="brace">{</em>
<a id="L595" name="L595"></a> 595                 parser.<a href="../D/22882.html" title="Multiple defined in 5 places.">getSymbolTable</a>().<a href="../D/32313.html" title="Multiple defined in 4 places.">setCurrentNode</a>(child);
<a id="L596" name="L596"></a> 596                 child.<a href="../D/29115.html" title="Multiple defined in 37 places.">parseContents</a>(parser);
<a id="L597" name="L597"></a> 597             <em class="brace">}</em>
<a id="L598" name="L598"></a> 598 
<a id="L599" name="L599"></a> 599             <em class="comment">// All template code should be compiled as methods if the</em>
<a id="L600" name="L600"></a> 600             <em class="comment">// &lt;xsl:apply-imports/&gt; element was ever used in this stylesheet</em>
<a id="L601" name="L601"></a> 601             <strong class="reserved">if</strong> (!_templateInlining &amp;&amp; (child <strong class="reserved">instanceof</strong> <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a>)) <em class="brace">{</em>
<a id="L602" name="L602"></a> 602                 <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a> template = (<a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a>)child;
<a id="L603" name="L603"></a> 603                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = "template$dot$" + template.<a href="../D/21546.html" title="Multiple defined in 41 places.">getPosition</a>();
<a id="L604" name="L604"></a> 604                 template.<a href="../D/33314.html" title="Multiple defined in 37 places.">setName</a>(parser.<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>));
<a id="L605" name="L605"></a> 605             <em class="brace">}</em>
<a id="L606" name="L606"></a> 606         <em class="brace">}</em>
<a id="L607" name="L607"></a> 607 
<a id="L608" name="L608"></a> 608         stable.<a href="../S/6093.html#L288" title="Defined at 288 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SymbolTable.java.">popExcludedNamespacesContext</a>();
<a id="L609" name="L609"></a> 609     <em class="brace">}</em>
<a id="L610" name="L610"></a> 610 
<a id="L611" name="L611"></a> 611     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L737" title="Referred from 737 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">processModes</a>() <em class="brace">{</em>
<a id="L612" name="L612"></a> 612         <strong class="reserved">if</strong> (_defaultMode == <strong class="reserved">null</strong>)
<a id="L613" name="L613"></a> 613             _defaultMode = <strong class="reserved">new</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a>(<strong class="reserved">null</strong>, <strong class="reserved">this</strong>, <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.EMPTYSTRING);
<a id="L614" name="L614"></a> 614         _defaultMode.<a href="../S/6149.html#L247" title="Defined at 247 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Mode.java.">processPatterns</a>(_keys);
<a id="L615" name="L615"></a> 615         <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> modes = _modes.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L616" name="L616"></a> 616         <strong class="reserved">while</strong> (modes.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617             <strong class="reserved">final</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a> mode = (<a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a>)modes.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L618" name="L618"></a> 618             mode.<a href="../S/6149.html#L247" title="Defined at 247 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Mode.java.">processPatterns</a>(_keys);
<a id="L619" name="L619"></a> 619         <em class="brace">}</em>
<a id="L620" name="L620"></a> 620     <em class="brace">}</em>
<a id="L621" name="L621"></a> 621 
<a id="L622" name="L622"></a> 622     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L738" title="Referred from 738 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileModes</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen) <em class="brace">{</em>
<a id="L623" name="L623"></a> 623         _defaultMode.<a href="../S/6149.html#L739" title="Defined at 739 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Mode.java.">compileApplyTemplates</a>(classGen);
<a id="L624" name="L624"></a> 624         <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> modes = _modes.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L625" name="L625"></a> 625         <strong class="reserved">while</strong> (modes.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L626" name="L626"></a> 626             <strong class="reserved">final</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a> mode = (<a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a>)modes.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L627" name="L627"></a> 627             mode.<a href="../S/6149.html#L739" title="Defined at 739 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Mode.java.">compileApplyTemplates</a>(classGen);
<a id="L628" name="L628"></a> 628         <em class="brace">}</em>
<a id="L629" name="L629"></a> 629     <em class="brace">}</em>
<a id="L630" name="L630"></a> 630 
<a id="L631" name="L631"></a> 631     <strong class="reserved">public</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a> <a href="../R/17767.html" title="Multiple referred from 5 places.">getMode</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> modeName) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632         <strong class="reserved">if</strong> (modeName == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633             <strong class="reserved">if</strong> (_defaultMode == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L634" name="L634"></a> 634                 _defaultMode = <strong class="reserved">new</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a>(<strong class="reserved">null</strong>, <strong class="reserved">this</strong>, <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.EMPTYSTRING);
<a id="L635" name="L635"></a> 635             <em class="brace">}</em>
<a id="L636" name="L636"></a> 636             <strong class="reserved">return</strong> _defaultMode;
<a id="L637" name="L637"></a> 637         <em class="brace">}</em>
<a id="L638" name="L638"></a> 638         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L639" name="L639"></a> 639             <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a> mode = (<a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a>)_modes.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(modeName);
<a id="L640" name="L640"></a> 640             <strong class="reserved">if</strong> (mode == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L641" name="L641"></a> 641                 <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> suffix = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(_nextModeSerial++);
<a id="L642" name="L642"></a> 642                 _modes.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(modeName, mode = <strong class="reserved">new</strong> <a href="../D/5674.html" title="Multiple defined in 2 places.">Mode</a>(modeName, <strong class="reserved">this</strong>, suffix));
<a id="L643" name="L643"></a> 643             <em class="brace">}</em>
<a id="L644" name="L644"></a> 644             <strong class="reserved">return</strong> mode;
<a id="L645" name="L645"></a> 645         <em class="brace">}</em>
<a id="L646" name="L646"></a> 646     <em class="brace">}</em>
<a id="L647" name="L647"></a> 647 
<div class="comment">
      Type check all the children of this node.</div>
<a id="L651" name="L651"></a> 651     <strong class="reserved">public</strong> <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> <a href="../R/29573.html" title="Multiple referred from 123 places.">typeCheck</a>(<a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> stable) <strong class="reserved">throws</strong> <a href="../S/6136.html#L32" title="Defined at 32 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/TypeCheckError.java.">TypeCheckError</a> <em class="brace">{</em>
<a id="L652" name="L652"></a> 652         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = _globals.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L653" name="L653"></a> 653         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>; i++) <em class="brace">{</em>
<a id="L654" name="L654"></a> 654             <strong class="reserved">final</strong> <a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a> var = (<a href="../S/6088.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/VariableBase.java.">VariableBase</a>)_globals.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L655" name="L655"></a> 655             var.<a href="../D/35754.html" title="Multiple defined in 91 places.">typeCheck</a>(stable);
<a id="L656" name="L656"></a> 656         <em class="brace">}</em>
<a id="L657" name="L657"></a> 657         <strong class="reserved">return</strong> <a href="../S/6076.html#L489" title="Defined at 489 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">typeCheckContents</a>(stable);
<a id="L658" name="L658"></a> 658     <em class="brace">}</em>
<a id="L659" name="L659"></a> 659 
<div class="comment">
      Translate the stylesheet into JVM bytecodes.</div>
<a id="L663" name="L663"></a> 663     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29432.html" title="Multiple referred from 503 places.">translate</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen, <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L664" name="L664"></a> 664         <a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>();
<a id="L665" name="L665"></a> 665     <em class="brace">}</em>
<a id="L666" name="L666"></a> 666 
<a id="L667" name="L667"></a> 667     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L703" title="Referred from 703 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addDOMField</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen) <em class="brace">{</em>
<a id="L668" name="L668"></a> 668         <strong class="reserved">final</strong> <a href="../S/4672.html#L74" title="Defined at 74 in src/com/sun/org/apache/bcel/internal/generic/FieldGen.java.">FieldGen</a> fgen = <strong class="reserved">new</strong> <a href="../S/4672.html#L74" title="Defined at 74 in src/com/sun/org/apache/bcel/internal/generic/FieldGen.java.">FieldGen</a>(ACC_PUBLIC,
<a id="L669" name="L669"></a> 669                                            <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(DOM_INTF_SIG),
<a id="L670" name="L670"></a> 670                                            DOM_FIELD,
<a id="L671" name="L671"></a> 671                                            classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>());
<a id="L672" name="L672"></a> 672         classGen.<a href="../D/10803.html" title="Multiple defined in 2 places.">addField</a>(fgen.<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>());
<a id="L673" name="L673"></a> 673     <em class="brace">}</em>
<a id="L674" name="L674"></a> 674 
<div class="comment">
      Add a static field</div>
<a id="L678" name="L678"></a> 678     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/9966.html" title="Multiple referred from 5 places.">addStaticField</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L679" name="L679"></a> 679                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)
<a id="L680" name="L680"></a> 680     <em class="brace">{</em>
<a id="L681" name="L681"></a> 681         <strong class="reserved">final</strong> <a href="../S/4672.html#L74" title="Defined at 74 in src/com/sun/org/apache/bcel/internal/generic/FieldGen.java.">FieldGen</a> fgen = <strong class="reserved">new</strong> <a href="../S/4672.html#L74" title="Defined at 74 in src/com/sun/org/apache/bcel/internal/generic/FieldGen.java.">FieldGen</a>(ACC_PROTECTED|ACC_STATIC,
<a id="L682" name="L682"></a> 682                                            <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>),
<a id="L683" name="L683"></a> 683                                            <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,
<a id="L684" name="L684"></a> 684                                            classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>());
<a id="L685" name="L685"></a> 685         classGen.<a href="../D/10803.html" title="Multiple defined in 2 places.">addField</a>(fgen.<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>());
<a id="L686" name="L686"></a> 686 
<a id="L687" name="L687"></a> 687     <em class="brace">}</em>
<a id="L688" name="L688"></a> 688 
<div class="comment">
      Translate the stylesheet into JVM bytecodes.</div>
<a id="L692" name="L692"></a> 692     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29432.html" title="Multiple referred from 503 places.">translate</a>() <em class="brace">{</em>
<a id="L693" name="L693"></a> 693         _className = <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../D/17698.html" title="Multiple defined in 41 places.">getClassName</a>();
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695         <em class="comment">// Define a new class by extending TRANSLET_CLASS</em>
<a id="L696" name="L696"></a> 696         <strong class="reserved">final</strong> <a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen =
<a id="L697" name="L697"></a> 697             <strong class="reserved">new</strong> <a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a>(_className,
<a id="L698" name="L698"></a> 698                                TRANSLET_CLASS,
<a id="L699" name="L699"></a> 699                                <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.EMPTYSTRING,
<a id="L700" name="L700"></a> 700                                ACC_PUBLIC | ACC_SUPER,
<a id="L701" name="L701"></a> 701                                <strong class="reserved">null</strong>, <strong class="reserved">this</strong>);
<a id="L702" name="L702"></a> 702 
<a id="L703" name="L703"></a> 703         <a href="../S/6198.html#L667" title="Defined at 667 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addDOMField</a>(classGen);
<a id="L704" name="L704"></a> 704 
<a id="L705" name="L705"></a> 705         <em class="comment">// Compile transform() to initialize parameters, globals &amp; output</em>
<a id="L706" name="L706"></a> 706         <em class="comment">// and run the transformation</em>
<a id="L707" name="L707"></a> 707         <a href="../S/6198.html#L1230" title="Defined at 1230 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileTransform</a>(classGen);
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709         <em class="comment">// Translate all non-template elements and filter out all templates</em>
<a id="L710" name="L710"></a> 710         <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L711" name="L711"></a> 711         <strong class="reserved">while</strong> (<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L712" name="L712"></a> 712             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L713" name="L713"></a> 713             <em class="comment">// xsl:template</em>
<a id="L714" name="L714"></a> 714             <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a>) <em class="brace">{</em>
<a id="L715" name="L715"></a> 715                 <em class="comment">// Separate templates by modes</em>
<a id="L716" name="L716"></a> 716                 <strong class="reserved">final</strong> <a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a> template = (<a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<a id="L717" name="L717"></a> 717                 <em class="comment">//_templates.addElement(template);</em>
<a id="L718" name="L718"></a> 718                 <a href="../D/20697.html" title="Multiple defined in 3 places.">getMode</a>(template.<a href="../S/6217.html#L123" title="Defined at 123 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">getModeName</a>()).<a href="../D/11109.html" title="Multiple defined in 3 places.">addTemplate</a>(template);
<a id="L719" name="L719"></a> 719             <em class="brace">}</em>
<a id="L720" name="L720"></a> 720             <em class="comment">// xsl:attribute-set</em>
<a id="L721" name="L721"></a> 721             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a>) <em class="brace">{</em>
<a id="L722" name="L722"></a> 722                 ((<a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>).<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, <strong class="reserved">null</strong>);
<a id="L723" name="L723"></a> 723             <em class="brace">}</em>
<a id="L724" name="L724"></a> 724             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../S/6200.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">Output</a>) <em class="brace">{</em>
<a id="L725" name="L725"></a> 725                 <em class="comment">// save the element for later to pass to compileConstructor</em>
<a id="L726" name="L726"></a> 726                 <a href="../S/6200.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">Output</a> <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a> = (<a href="../S/6200.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">Output</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<a id="L727" name="L727"></a> 727                 <strong class="reserved">if</strong> (<a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>.<a href="../S/6200.html#L92" title="Defined at 92 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">enabled</a>()) _lastOutputElement = <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>;
<a id="L728" name="L728"></a> 728             <em class="brace">}</em>
<a id="L729" name="L729"></a> 729             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L730" name="L730"></a> 730                 <em class="comment">// Global variables and parameters are handled elsewhere.</em>
<a id="L731" name="L731"></a> 731                 <em class="comment">// Other top-level non-template elements are ignored. Literal</em>
<a id="L732" name="L732"></a> 732                 <em class="comment">// elements outside of templates will never be output.</em>
<a id="L733" name="L733"></a> 733             <em class="brace">}</em>
<a id="L734" name="L734"></a> 734         <em class="brace">}</em>
<a id="L735" name="L735"></a> 735 
<a id="L736" name="L736"></a> 736         <a href="../S/6198.html#L239" title="Defined at 239 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">checkOutputMethod</a>();
<a id="L737" name="L737"></a> 737         <a href="../S/6198.html#L611" title="Defined at 611 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">processModes</a>();
<a id="L738" name="L738"></a> 738         <a href="../S/6198.html#L622" title="Defined at 622 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileModes</a>(classGen);
<a id="L739" name="L739"></a> 739         <a href="../S/6198.html#L753" title="Defined at 753 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileStaticInitializer</a>(classGen);
<a id="L740" name="L740"></a> 740         <a href="../D/13086.html" title="Multiple defined in 2 places.">compileConstructor</a>(classGen, _lastOutputElement);
<a id="L741" name="L741"></a> 741 
<a id="L742" name="L742"></a> 742         <strong class="reserved">if</strong> (!<a href="../D/21413.html" title="Multiple defined in 8 places.">getParser</a>().<a href="../S/6089.html#L1179" title="Defined at 1179 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Parser.java.">errorsFound</a>()) <em class="brace">{</em>
<a id="L743" name="L743"></a> 743             <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../D/15247.html" title="Multiple defined in 2 places.">dumpClass</a>(classGen.<a href="../D/19889.html" title="Multiple defined in 3 places.">getJavaClass</a>());
<a id="L744" name="L744"></a> 744         <em class="brace">}</em>
<a id="L745" name="L745"></a> 745     <em class="brace">}</em>
<a id="L746" name="L746"></a> 746 
<div class="comment">
      Compile the namesArray, urisArray and typesArray into
      the static initializer. They are read-only from the
      translet. All translet instances can share a single
      copy of this informtion.</div>
<a id="L753" name="L753"></a> 753     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L739" title="Referred from 739 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileStaticInitializer</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen) <em class="brace">{</em>
<a id="L754" name="L754"></a> 754         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L755" name="L755"></a> 755         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L756" name="L756"></a> 756 
<a id="L757" name="L757"></a> 757         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> staticConst =
<a id="L758" name="L758"></a> 758             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC|ACC_STATIC,
<a id="L759" name="L759"></a> 759                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L760" name="L760"></a> 760                                 <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, "&lt;clinit&gt;",
<a id="L761" name="L761"></a> 761                                 _className, il, cpg);
<a id="L762" name="L762"></a> 762 
<a id="L763" name="L763"></a> 763         <a href="../S/6198.html#L678" title="Defined at 678 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addStaticField</a>(classGen, "[" + STRING_SIG, STATIC_NAMES_ARRAY_FIELD);
<a id="L764" name="L764"></a> 764         <a href="../S/6198.html#L678" title="Defined at 678 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addStaticField</a>(classGen, "[" + STRING_SIG, STATIC_URIS_ARRAY_FIELD);
<a id="L765" name="L765"></a> 765         <a href="../S/6198.html#L678" title="Defined at 678 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addStaticField</a>(classGen, "[I", STATIC_TYPES_ARRAY_FIELD);
<a id="L766" name="L766"></a> 766         <a href="../S/6198.html#L678" title="Defined at 678 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addStaticField</a>(classGen, "[" + STRING_SIG, STATIC_NAMESPACE_ARRAY_FIELD);
<a id="L767" name="L767"></a> 767         <em class="comment">// Create fields of type char[] that will contain literal text from</em>
<a id="L768" name="L768"></a> 768         <em class="comment">// the stylesheet.</em>
<a id="L769" name="L769"></a> 769         <strong class="reserved">final</strong> <strong class="reserved">int</strong> charDataFieldCount = <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../S/6196.html#L1001" title="Defined at 1001 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getCharacterDataCount</a>();
<a id="L770" name="L770"></a> 770         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; charDataFieldCount; i++) <em class="brace">{</em>
<a id="L771" name="L771"></a> 771             <a href="../S/6198.html#L678" title="Defined at 678 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">addStaticField</a>(classGen, STATIC_CHAR_DATA_FIELD_SIG,
<a id="L772" name="L772"></a> 772                            STATIC_CHAR_DATA_FIELD+i);
<a id="L773" name="L773"></a> 773         <em class="brace">}</em>
<a id="L774" name="L774"></a> 774 
<a id="L775" name="L775"></a> 775         <em class="comment">// Put the names array into the translet - used for dom/translet mapping</em>
<a id="L776" name="L776"></a> 776         <strong class="reserved">final</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> namesIndex = <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../S/6196.html#L862" title="Defined at 862 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getNamesIndex</a>();
<a id="L777" name="L777"></a> 777         <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = namesIndex.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L778" name="L778"></a> 778         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] namesArray = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>];
<a id="L779" name="L779"></a> 779         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] urisArray = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>];
<a id="L780" name="L780"></a> 780         <strong class="reserved">int</strong>[] typesArray = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>];
<a id="L781" name="L781"></a> 781 
<a id="L782" name="L782"></a> 782         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L783" name="L783"></a> 783         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L784" name="L784"></a> 784             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> encodedName = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)namesIndex.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L785" name="L785"></a> 785             <strong class="reserved">if</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = encodedName.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>(':')) &gt; -1) <em class="brace">{</em>
<a id="L786" name="L786"></a> 786                 urisArray[i] = encodedName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L787" name="L787"></a> 787             <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<a id="L789" name="L789"></a> 789             <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1;
<a id="L790" name="L790"></a> 790             <strong class="reserved">if</strong> (encodedName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) == '@') <em class="brace">{</em>
<a id="L791" name="L791"></a> 791                 typesArray[i] = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE;
<a id="L792" name="L792"></a> 792                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L793" name="L793"></a> 793             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (encodedName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) == '?') <em class="brace">{</em>
<a id="L794" name="L794"></a> 794                 typesArray[i] = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE;
<a id="L795" name="L795"></a> 795                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L796" name="L796"></a> 796             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L797" name="L797"></a> 797                 typesArray[i] = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE;
<a id="L798" name="L798"></a> 798             <em class="brace">}</em>
<a id="L799" name="L799"></a> 799 
<a id="L800" name="L800"></a> 800             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == 0) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801                 namesArray[i] = encodedName;
<a id="L802" name="L802"></a> 802             <em class="brace">}</em>
<a id="L803" name="L803"></a> 803             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L804" name="L804"></a> 804                 namesArray[i] = encodedName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L805" name="L805"></a> 805             <em class="brace">}</em>
<a id="L806" name="L806"></a> 806         <em class="brace">}</em>
<a id="L807" name="L807"></a> 807 
<a id="L808" name="L808"></a> 808         staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L809" name="L809"></a> 809         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L810" name="L810"></a> 810         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L811" name="L811"></a> 811         <strong class="reserved">int</strong> namesArrayRef = cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L812" name="L812"></a> 812                                             STATIC_NAMES_ARRAY_FIELD,
<a id="L813" name="L813"></a> 813                                             NAMES_INDEX_SIG);
<a id="L814" name="L814"></a> 814         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4759.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTSTATIC.java.">PUTSTATIC</a>(namesArrayRef));
<a id="L815" name="L815"></a> 815         staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L816" name="L816"></a> 816 
<a id="L817" name="L817"></a> 817         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L818" name="L818"></a> 818             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = namesArray[i];
<a id="L819" name="L819"></a> 819             staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L820" name="L820"></a> 820             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(namesArrayRef));
<a id="L821" name="L821"></a> 821             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, i));
<a id="L822" name="L822"></a> 822             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>));
<a id="L823" name="L823"></a> 823             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L824" name="L824"></a> 824             staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L825" name="L825"></a> 825         <em class="brace">}</em>
<a id="L826" name="L826"></a> 826 
<a id="L827" name="L827"></a> 827         staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L828" name="L828"></a> 828         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L829" name="L829"></a> 829         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L830" name="L830"></a> 830         <strong class="reserved">int</strong> urisArrayRef = cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L831" name="L831"></a> 831                                            STATIC_URIS_ARRAY_FIELD,
<a id="L832" name="L832"></a> 832                                            URIS_INDEX_SIG);
<a id="L833" name="L833"></a> 833         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4759.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTSTATIC.java.">PUTSTATIC</a>(urisArrayRef));
<a id="L834" name="L834"></a> 834         staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L835" name="L835"></a> 835 
<a id="L836" name="L836"></a> 836         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri = urisArray[i];
<a id="L838" name="L838"></a> 838             staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L839" name="L839"></a> 839             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(urisArrayRef));
<a id="L840" name="L840"></a> 840             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, i));
<a id="L841" name="L841"></a> 841             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, uri));
<a id="L842" name="L842"></a> 842             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L843" name="L843"></a> 843             staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L844" name="L844"></a> 844         <em class="brace">}</em>
<a id="L845" name="L845"></a> 845 
<a id="L846" name="L846"></a> 846         staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L847" name="L847"></a> 847         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L848" name="L848"></a> 848         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4709.html#L70" title="Defined at 70 in src/com/sun/org/apache/bcel/internal/generic/NEWARRAY.java.">NEWARRAY</a>(<a href="../D/813.html" title="Multiple defined in 2 places.">BasicType</a>.INT));
<a id="L849" name="L849"></a> 849         <strong class="reserved">int</strong> typesArrayRef = cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L850" name="L850"></a> 850                                             STATIC_TYPES_ARRAY_FIELD,
<a id="L851" name="L851"></a> 851                                             TYPES_INDEX_SIG);
<a id="L852" name="L852"></a> 852         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4759.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTSTATIC.java.">PUTSTATIC</a>(typesArrayRef));
<a id="L853" name="L853"></a> 853         staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L854" name="L854"></a> 854 
<a id="L855" name="L855"></a> 855         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L856" name="L856"></a> 856             <strong class="reserved">final</strong> <strong class="reserved">int</strong> nodeType = typesArray[i];
<a id="L857" name="L857"></a> 857             staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L858" name="L858"></a> 858             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(typesArrayRef));
<a id="L859" name="L859"></a> 859             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, i));
<a id="L860" name="L860"></a> 860             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, nodeType));
<a id="L861" name="L861"></a> 861             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4713.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/IASTORE.java.">IASTORE</a>);
<a id="L862" name="L862"></a> 862         <em class="brace">}</em>
<a id="L863" name="L863"></a> 863 
<a id="L864" name="L864"></a> 864         <em class="comment">// Put the namespace names array into the translet</em>
<a id="L865" name="L865"></a> 865         <strong class="reserved">final</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> namespaces = <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../S/6196.html#L866" title="Defined at 866 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getNamespaceIndex</a>();
<a id="L866" name="L866"></a> 866         staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L867" name="L867"></a> 867         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, namespaces.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()));
<a id="L868" name="L868"></a> 868         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4730.html#L68" title="Defined at 68 in src/com/sun/org/apache/bcel/internal/generic/ANEWARRAY.java.">ANEWARRAY</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>)));
<a id="L869" name="L869"></a> 869         <strong class="reserved">int</strong> namespaceArrayRef = cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L870" name="L870"></a> 870                                                 STATIC_NAMESPACE_ARRAY_FIELD,
<a id="L871" name="L871"></a> 871                                                 NAMESPACE_INDEX_SIG);
<a id="L872" name="L872"></a> 872         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4759.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTSTATIC.java.">PUTSTATIC</a>(namespaceArrayRef));
<a id="L873" name="L873"></a> 873         staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L874" name="L874"></a> 874 
<a id="L875" name="L875"></a> 875         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; namespaces.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); i++) <em class="brace">{</em>
<a id="L876" name="L876"></a> 876             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ns = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)namespaces.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L877" name="L877"></a> 877             staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L878" name="L878"></a> 878             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(namespaceArrayRef));
<a id="L879" name="L879"></a> 879             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, i));
<a id="L880" name="L880"></a> 880             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, ns));
<a id="L881" name="L881"></a> 881             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/4685.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/AASTORE.java.">AASTORE</a>);
<a id="L882" name="L882"></a> 882             staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L883" name="L883"></a> 883         <em class="brace">}</em>
<a id="L884" name="L884"></a> 884 
<a id="L885" name="L885"></a> 885         <em class="comment">// Grab all the literal text in the stylesheet and put it in a char[]</em>
<a id="L886" name="L886"></a> 886         <strong class="reserved">final</strong> <strong class="reserved">int</strong> charDataCount = <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../S/6196.html#L1001" title="Defined at 1001 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/XSLTC.java.">getCharacterDataCount</a>();
<a id="L887" name="L887"></a> 887         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a> = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(<a href="../S/3764.html#L1289" title="Defined at 1289 in src/javax/print/DocFlavor.java.">STRING</a>, "toCharArray", "()[C");
<a id="L888" name="L888"></a> 888         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; charDataCount; i++) <em class="brace">{</em>
<a id="L889" name="L889"></a> 889             staticConst.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L890" name="L890"></a> 890             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../D/23784.html" title="Multiple defined in 2 places.">getXSLTC</a>().<a href="../D/17606.html" title="Multiple defined in 2 places.">getCharacterData</a>(i)));
<a id="L891" name="L891"></a> 891             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4737.html#L70" title="Defined at 70 in src/com/sun/org/apache/bcel/internal/generic/INVOKEVIRTUAL.java.">INVOKEVIRTUAL</a>(<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>));
<a id="L892" name="L892"></a> 892             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4759.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTSTATIC.java.">PUTSTATIC</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L893" name="L893"></a> 893                                                STATIC_CHAR_DATA_FIELD+i,
<a id="L894" name="L894"></a> 894                                                STATIC_CHAR_DATA_FIELD_SIG)));
<a id="L895" name="L895"></a> 895             staticConst.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L896" name="L896"></a> 896         <em class="brace">}</em>
<a id="L897" name="L897"></a> 897 
<a id="L898" name="L898"></a> 898         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900         classGen.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(staticConst);
<a id="L901" name="L901"></a> 901 
<a id="L902" name="L902"></a> 902     <em class="brace">}</em>
<a id="L903" name="L903"></a> 903 
<div class="comment">
      Compile the translet's constructor</div>
<a id="L907" name="L907"></a> 907     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11738.html" title="Multiple referred from 2 places.">compileConstructor</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen, <a href="../S/6200.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">Output</a> <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>) <em class="brace">{</em>
<a id="L908" name="L908"></a> 908 
<a id="L909" name="L909"></a> 909         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L910" name="L910"></a> 910         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L911" name="L911"></a> 911 
<a id="L912" name="L912"></a> 912         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a> =
<a id="L913" name="L913"></a> 913             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L914" name="L914"></a> 914                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L915" name="L915"></a> 915                                 <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, "&lt;init&gt;",
<a id="L916" name="L916"></a> 916                                 _className, il, cpg);
<a id="L917" name="L917"></a> 917 
<a id="L918" name="L918"></a> 918         <em class="comment">// Call the constructor in the AbstractTranslet superclass</em>
<a id="L919" name="L919"></a> 919         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L920" name="L920"></a> 920         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(TRANSLET_CLASS,
<a id="L921" name="L921"></a> 921                                                      "&lt;init&gt;", "()V")));
<a id="L922" name="L922"></a> 922 
<a id="L923" name="L923"></a> 923         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L924" name="L924"></a> 924         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L925" name="L925"></a> 925         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L926" name="L926"></a> 926                                                 STATIC_NAMES_ARRAY_FIELD,
<a id="L927" name="L927"></a> 927                                                 NAMES_INDEX_SIG)));
<a id="L928" name="L928"></a> 928         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(TRANSLET_CLASS,
<a id="L929" name="L929"></a> 929                                                NAMES_INDEX,
<a id="L930" name="L930"></a> 930                                                NAMES_INDEX_SIG)));
<a id="L931" name="L931"></a> 931 
<a id="L932" name="L932"></a> 932         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L933" name="L933"></a> 933         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L934" name="L934"></a> 934                                                 STATIC_URIS_ARRAY_FIELD,
<a id="L935" name="L935"></a> 935                                                 URIS_INDEX_SIG)));
<a id="L936" name="L936"></a> 936         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(TRANSLET_CLASS,
<a id="L937" name="L937"></a> 937                                                URIS_INDEX,
<a id="L938" name="L938"></a> 938                                                URIS_INDEX_SIG)));
<a id="L939" name="L939"></a> 939         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L940" name="L940"></a> 940 
<a id="L941" name="L941"></a> 941         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L942" name="L942"></a> 942         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L943" name="L943"></a> 943         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L944" name="L944"></a> 944                                                 STATIC_TYPES_ARRAY_FIELD,
<a id="L945" name="L945"></a> 945                                                 TYPES_INDEX_SIG)));
<a id="L946" name="L946"></a> 946         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(TRANSLET_CLASS,
<a id="L947" name="L947"></a> 947                                                TYPES_INDEX,
<a id="L948" name="L948"></a> 948                                                TYPES_INDEX_SIG)));
<a id="L949" name="L949"></a> 949         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L950" name="L950"></a> 950 
<a id="L951" name="L951"></a> 951         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L952" name="L952"></a> 952         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L953" name="L953"></a> 953         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4705.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETSTATIC.java.">GETSTATIC</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(_className,
<a id="L954" name="L954"></a> 954                                                 STATIC_NAMESPACE_ARRAY_FIELD,
<a id="L955" name="L955"></a> 955                                                 NAMESPACE_INDEX_SIG)));
<a id="L956" name="L956"></a> 956         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(TRANSLET_CLASS,
<a id="L957" name="L957"></a> 957                                                NAMESPACE_INDEX,
<a id="L958" name="L958"></a> 958                                                NAMESPACE_INDEX_SIG)));
<a id="L959" name="L959"></a> 959         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L960" name="L960"></a> 960 
<a id="L961" name="L961"></a> 961         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L962" name="L962"></a> 962         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L963" name="L963"></a> 963         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../S/5995.html#L62" title="Defined at 62 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">AbstractTranslet</a>.CURRENT_TRANSLET_VERSION));
<a id="L964" name="L964"></a> 964         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(TRANSLET_CLASS,
<a id="L965" name="L965"></a> 965                                                TRANSLET_VERSION_INDEX,
<a id="L966" name="L966"></a> 966                                                TRANSLET_VERSION_INDEX_SIG)));
<a id="L967" name="L967"></a> 967         <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L968" name="L968"></a> 968 
<a id="L969" name="L969"></a> 969         <strong class="reserved">if</strong> (_hasIdCall) <em class="brace">{</em>
<a id="L970" name="L970"></a> 970             <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L971" name="L971"></a> 971             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L972" name="L972"></a> 972             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4719.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/PUSH.java.">PUSH</a>(cpg, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE));
<a id="L973" name="L973"></a> 973             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(TRANSLET_CLASS,
<a id="L974" name="L974"></a> 974                                                    HASIDCALL_INDEX,
<a id="L975" name="L975"></a> 975                                                    HASIDCALL_INDEX_SIG)));
<a id="L976" name="L976"></a> 976             <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L977" name="L977"></a> 977         <em class="brace">}</em>
<a id="L978" name="L978"></a> 978 
<a id="L979" name="L979"></a> 979         <em class="comment">// Compile in code to set the output configuration from &lt;xsl:output&gt;</em>
<a id="L980" name="L980"></a> 980         <strong class="reserved">if</strong> (<a href="../D/28597.html" title="Multiple defined in 4 places.">output</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L981" name="L981"></a> 981             <em class="comment">// Set all the output settings files in the translet</em>
<a id="L982" name="L982"></a> 982             <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L983" name="L983"></a> 983             <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>);
<a id="L984" name="L984"></a> 984             <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L985" name="L985"></a> 985         <em class="brace">}</em>
<a id="L986" name="L986"></a> 986 
<a id="L987" name="L987"></a> 987         <em class="comment">// Compile default decimal formatting symbols.</em>
<a id="L988" name="L988"></a> 988         <em class="comment">// This is an implicit, nameless xsl:decimal-format top-level element.</em>
<a id="L989" name="L989"></a> 989         <strong class="reserved">if</strong> (_numberFormattingUsed) <em class="brace">{</em>
<a id="L990" name="L990"></a> 990             <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1841" title="Defined at 1841 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkStart</a>();
<a id="L991" name="L991"></a> 991             <a href="../S/6090.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/DecimalFormatting.java.">DecimalFormatting</a>.<a href="../S/6090.html#L216" title="Defined at 216 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/DecimalFormatting.java.">translateDefaultDFS</a>(classGen, <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>);
<a id="L992" name="L992"></a> 992             <a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>.<a href="../S/6132.html#L1853" title="Defined at 1853 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">markChunkEnd</a>();
<a id="L993" name="L993"></a> 993         <em class="brace">}</em>
<a id="L994" name="L994"></a> 994 
<a id="L995" name="L995"></a> 995         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L996" name="L996"></a> 996 
<a id="L997" name="L997"></a> 997         classGen.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(<a href="../S/1606.html#L332" title="Defined at 332 in src/java/lang/invoke/BoundMethodHandle.java.">constructor</a>);
<a id="L998" name="L998"></a> 998     <em class="brace">}</em>
<a id="L999" name="L999"></a> 999 
<div class="comment">
      Compile a topLevel() method into the output class. This method is
      called from transform() to handle all non-template top-level elements.
      Returns the signature of the topLevel() method.
      Global variables/params and keys are first sorted to resolve
      dependencies between them. The XSLT 1.0 spec does not allow a key
      to depend on a variable. However, for compatibility with Xalan
      interpretive, that type of dependency is allowed. Note also that
      the buildKeys() method is still generated as it is used by the
      LoadDocument class, but it no longer called from transform().</div>
<a id="L1012" name="L1012"></a>1012     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6198.html#L1331" title="Referred from 1331 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileTopLevel</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen) <em class="brace">{</em>
<a id="L1013" name="L1013"></a>1013 
<a id="L1014" name="L1014"></a>1014         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L1015" name="L1015"></a>1015 
<a id="L1016" name="L1016"></a>1016         <strong class="reserved">final</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] argTypes = <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017             <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(DOM_INTF_SIG),
<a id="L1018" name="L1018"></a>1018             <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(NODE_ITERATOR_SIG),
<a id="L1019" name="L1019"></a>1019             <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(TRANSLET_OUTPUT_SIG)
<a id="L1020" name="L1020"></a>1020         <em class="brace">}</em>;
<a id="L1021" name="L1021"></a>1021 
<a id="L1022" name="L1022"></a>1022         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] argNames = <em class="brace">{</em>
<a id="L1023" name="L1023"></a>1023             DOCUMENT_PNAME, ITERATOR_PNAME, TRANSLET_OUTPUT_PNAME
<a id="L1024" name="L1024"></a>1024         <em class="brace">}</em>;
<a id="L1025" name="L1025"></a>1025 
<a id="L1026" name="L1026"></a>1026         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L1027" name="L1027"></a>1027 
<a id="L1028" name="L1028"></a>1028         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> toplevel =
<a id="L1029" name="L1029"></a>1029             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L1030" name="L1030"></a>1030                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L1031" name="L1031"></a>1031                                 argTypes, argNames,
<a id="L1032" name="L1032"></a>1032                                 "topLevel", _className, il,
<a id="L1033" name="L1033"></a>1033                                 classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>());
<a id="L1034" name="L1034"></a>1034 
<a id="L1035" name="L1035"></a>1035         toplevel.<a href="../S/4802.html#L633" title="Defined at 633 in src/com/sun/org/apache/bcel/internal/generic/MethodGen.java.">addException</a>("com.sun.org.apache.xalan.internal.xsltc.TransletException");
<a id="L1036" name="L1036"></a>1036 
<a id="L1037" name="L1037"></a>1037         <em class="comment">// Define and initialize 'current' variable with the root node</em>
<a id="L1038" name="L1038"></a>1038         <strong class="reserved">final</strong> <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> =
<a id="L1039" name="L1039"></a>1039             toplevel.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("current",
<a id="L1040" name="L1040"></a>1040                                       com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT,
<a id="L1041" name="L1041"></a>1041                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L1042" name="L1042"></a>1042 
<a id="L1043" name="L1043"></a>1043         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/32707.html" title="Multiple defined in 14 places.">setFilter</a> = cpg.<a href="../D/10875.html" title="Multiple defined in 2 places.">addInterfaceMethodref</a>(DOM_INTF,
<a id="L1044" name="L1044"></a>1044                                "setFilter",
<a id="L1045" name="L1045"></a>1045                                "(Lcom/sun/org/apache/xalan/internal/xsltc/StripFilter;)V");
<a id="L1046" name="L1046"></a>1046 
<a id="L1047" name="L1047"></a>1047         <strong class="reserved">final</strong> <strong class="reserved">int</strong> gitr = cpg.<a href="../D/10875.html" title="Multiple defined in 2 places.">addInterfaceMethodref</a>(DOM_INTF,
<a id="L1048" name="L1048"></a>1048                                                         "getIterator",
<a id="L1049" name="L1049"></a>1049                                                         "()"+NODE_ITERATOR_SIG);
<a id="L1050" name="L1050"></a>1050         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(toplevel.<a href="../D/26912.html" title="Multiple defined in 4 places.">loadDOM</a>());
<a id="L1051" name="L1051"></a>1051         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4624.html#L73" title="Defined at 73 in src/com/sun/org/apache/bcel/internal/generic/INVOKEINTERFACE.java.">INVOKEINTERFACE</a>(gitr, 1));
<a id="L1052" name="L1052"></a>1052         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(toplevel.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>());
<a id="L1053" name="L1053"></a>1053         <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4787.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ISTORE.java.">ISTORE</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L1054" name="L1054"></a>1054 
<a id="L1055" name="L1055"></a>1055         <em class="comment">// Create a new list containing variables/params + keys</em>
<a id="L1056" name="L1056"></a>1056         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> varDepElements = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>(_globals);
<a id="L1057" name="L1057"></a>1057         <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1058" name="L1058"></a>1058         <strong class="reserved">while</strong> (<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1059" name="L1059"></a>1059             <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1060" name="L1060"></a>1060             <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a>) <em class="brace">{</em>
<a id="L1061" name="L1061"></a>1061                 varDepElements.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1062" name="L1062"></a>1062             <em class="brace">}</em>
<a id="L1063" name="L1063"></a>1063         <em class="brace">}</em>
<a id="L1064" name="L1064"></a>1064 
<a id="L1065" name="L1065"></a>1065         <em class="comment">// Determine a partial order for the variables/params and keys</em>
<a id="L1066" name="L1066"></a>1066         varDepElements = <a href="../S/6198.html#L1121" title="Defined at 1121 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">resolveDependencies</a>(varDepElements);
<a id="L1067" name="L1067"></a>1067 
<a id="L1068" name="L1068"></a>1068         <em class="comment">// Translate vars/params and keys in the right order</em>
<a id="L1069" name="L1069"></a>1069         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = varDepElements.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1070" name="L1070"></a>1070         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>; i++) <em class="brace">{</em>
<a id="L1071" name="L1071"></a>1071             <strong class="reserved">final</strong> <a href="../S/6188.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/TopLevelElement.java.">TopLevelElement</a> tle = (<a href="../S/6188.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/TopLevelElement.java.">TopLevelElement</a>) varDepElements.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1072" name="L1072"></a>1072             tle.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, toplevel);
<a id="L1073" name="L1073"></a>1073             <strong class="reserved">if</strong> (tle <strong class="reserved">instanceof</strong> <a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a>) <em class="brace">{</em>
<a id="L1074" name="L1074"></a>1074                 <strong class="reserved">final</strong> <a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = (<a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a>) tle;
<a id="L1075" name="L1075"></a>1075                 _keys.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1076" name="L1076"></a>1076             <em class="brace">}</em>
<a id="L1077" name="L1077"></a>1077         <em class="brace">}</em>
<a id="L1078" name="L1078"></a>1078 
<a id="L1079" name="L1079"></a>1079         <em class="comment">// Compile code for other top-level elements</em>
<a id="L1080" name="L1080"></a>1080         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> whitespaceRules = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1081" name="L1081"></a>1081         <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1082" name="L1082"></a>1082         <strong class="reserved">while</strong> (<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1083" name="L1083"></a>1083             <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1084" name="L1084"></a>1084             <em class="comment">// xsl:decimal-format</em>
<a id="L1085" name="L1085"></a>1085             <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../S/6090.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/DecimalFormatting.java.">DecimalFormatting</a>) <em class="brace">{</em>
<a id="L1086" name="L1086"></a>1086                 ((<a href="../S/6090.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/DecimalFormatting.java.">DecimalFormatting</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>).<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen,toplevel);
<a id="L1087" name="L1087"></a>1087             <em class="brace">}</em>
<a id="L1088" name="L1088"></a>1088             <em class="comment">// xsl:strip/preserve-space</em>
<a id="L1089" name="L1089"></a>1089             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../S/6239.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Whitespace.java.">Whitespace</a>) <em class="brace">{</em>
<a id="L1090" name="L1090"></a>1090                 whitespaceRules.<a href="../D/10646.html" title="Multiple defined in 78 places.">addAll</a>(((<a href="../S/6239.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Whitespace.java.">Whitespace</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>).<a href="../D/22187.html" title="Multiple defined in 8 places.">getRules</a>());
<a id="L1091" name="L1091"></a>1091             <em class="brace">}</em>
<a id="L1092" name="L1092"></a>1092         <em class="brace">}</em>
<a id="L1093" name="L1093"></a>1093 
<a id="L1094" name="L1094"></a>1094         <em class="comment">// Translate all whitespace strip/preserve rules</em>
<a id="L1095" name="L1095"></a>1095         <strong class="reserved">if</strong> (whitespaceRules.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L1096" name="L1096"></a>1096             <a href="../S/6239.html#L49" title="Defined at 49 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Whitespace.java.">Whitespace</a>.<a href="../S/6239.html#L472" title="Defined at 472 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Whitespace.java.">translateRules</a>(whitespaceRules,classGen);
<a id="L1097" name="L1097"></a>1097         <em class="brace">}</em>
<a id="L1098" name="L1098"></a>1098 
<a id="L1099" name="L1099"></a>1099         <strong class="reserved">if</strong> (classGen.<a href="../S/4785.html#L275" title="Defined at 275 in src/com/sun/org/apache/bcel/internal/generic/ClassGen.java.">containsMethod</a>(STRIP_SPACE, STRIP_SPACE_PARAMS) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1100" name="L1100"></a>1100             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(toplevel.<a href="../D/26912.html" title="Multiple defined in 4 places.">loadDOM</a>());
<a id="L1101" name="L1101"></a>1101             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1102" name="L1102"></a>1102             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4624.html#L73" title="Defined at 73 in src/com/sun/org/apache/bcel/internal/generic/INVOKEINTERFACE.java.">INVOKEINTERFACE</a>(<a href="../D/32707.html" title="Multiple defined in 14 places.">setFilter</a>, 2));
<a id="L1103" name="L1103"></a>1103         <em class="brace">}</em>
<a id="L1104" name="L1104"></a>1104 
<a id="L1105" name="L1105"></a>1105         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L1106" name="L1106"></a>1106 
<a id="L1107" name="L1107"></a>1107         <em class="comment">// Compute max locals + stack and add method to class</em>
<a id="L1108" name="L1108"></a>1108         classGen.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(toplevel);
<a id="L1109" name="L1109"></a>1109 
<a id="L1110" name="L1110"></a>1110         <strong class="reserved">return</strong>("("+DOM_INTF_SIG+NODE_ITERATOR_SIG+TRANSLET_OUTPUT_SIG+")V");
<a id="L1111" name="L1111"></a>1111     <em class="brace">}</em>
<a id="L1112" name="L1112"></a>1112 
<div class="comment">
      This method returns a vector with variables/params and keys in the
      order in which they are to be compiled for initialization. The order
      is determined by analyzing the dependencies between them. The XSLT 1.0
      spec does not allow a key to depend on a variable. However, for
      compatibility with Xalan interpretive, that type of dependency is
      allowed and, therefore, consider to determine the partial order.</div>
<a id="L1121" name="L1121"></a>1121     <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../S/6198.html#L1066" title="Referred from 1066 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">resolveDependencies</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>) <em class="brace">{</em>
<div class="comment">
 DEBUG CODE - INGORE
        for (int i = 0; i &lt; input.size(); i++) {
            final TopLevelElement e = (TopLevelElement) input.elementAt(i);
            System.out.println("e = " + e + " depends on:");
            Vector dep = e.getDependencies();
            for (int j = 0; j &lt; (dep != null ? dep.size() : 0); j++) {
                System.out.println("\t" + dep.elementAt(j));
            }
        }
        System.out.println("=================================");</div>
<a id="L1133" name="L1133"></a>1133 
<a id="L1134" name="L1134"></a>1134         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1135" name="L1135"></a>1135         <strong class="reserved">while</strong> (<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L1136" name="L1136"></a>1136             <strong class="reserved">boolean</strong> <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a> = <strong class="reserved">false</strong>;
<a id="L1137" name="L1137"></a>1137             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); ) <em class="brace">{</em>
<a id="L1138" name="L1138"></a>1138                 <strong class="reserved">final</strong> <a href="../S/6188.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/TopLevelElement.java.">TopLevelElement</a> vde = (<a href="../S/6188.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/TopLevelElement.java.">TopLevelElement</a>) <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1139" name="L1139"></a>1139                 <strong class="reserved">final</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> dep = vde.<a href="../S/6188.html#L96" title="Defined at 96 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/TopLevelElement.java.">getDependencies</a>();
<a id="L1140" name="L1140"></a>1140                 <strong class="reserved">if</strong> (dep == <strong class="reserved">null</strong> || <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/13315.html" title="Multiple defined in 21 places.">containsAll</a>(dep)) <em class="brace">{</em>
<a id="L1141" name="L1141"></a>1141                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(vde);
<a id="L1142" name="L1142"></a>1142                     <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(i);
<a id="L1143" name="L1143"></a>1143                     <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a> = <strong class="reserved">true</strong>;
<a id="L1144" name="L1144"></a>1144                 <em class="brace">}</em>
<a id="L1145" name="L1145"></a>1145                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1146" name="L1146"></a>1146                     i++;
<a id="L1147" name="L1147"></a>1147                 <em class="brace">}</em>
<a id="L1148" name="L1148"></a>1148             <em class="brace">}</em>
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150             <em class="comment">// If nothing was changed in this pass then we have a circular ref</em>
<a id="L1151" name="L1151"></a>1151             <strong class="reserved">if</strong> (!<a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a>) <em class="brace">{</em>
<a id="L1152" name="L1152"></a>1152                 <a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a> err = <strong class="reserved">new</strong> <a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>(<a href="../S/6100.html#L41" title="Defined at 41 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ErrorMsg.java.">ErrorMsg</a>.CIRCULAR_VARIABLE_ERR,
<a id="L1153" name="L1153"></a>1153                                             <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(), <strong class="reserved">this</strong>);
<a id="L1154" name="L1154"></a>1154                 <a href="../D/21413.html" title="Multiple defined in 8 places.">getParser</a>().<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ERROR, err);
<a id="L1155" name="L1155"></a>1155                 <strong class="reserved">return</strong>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1156" name="L1156"></a>1156             <em class="brace">}</em>
<a id="L1157" name="L1157"></a>1157         <em class="brace">}</em>
<a id="L1158" name="L1158"></a>1158 
<div class="comment">
 DEBUG CODE - INGORE
        System.out.println("=================================");
        for (int i = 0; i &lt; result.size(); i++) {
            final TopLevelElement e = (TopLevelElement) result.elementAt(i);
            System.out.println("e = " + e);
        }</div>
<a id="L1166" name="L1166"></a>1166 
<a id="L1167" name="L1167"></a>1167         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1168" name="L1168"></a>1168     <em class="brace">}</em>
<a id="L1169" name="L1169"></a>1169 
<div class="comment">
      Compile a buildKeys() method into the output class. Note that keys
      for the input document are created in topLevel(), not in this method.
      However, we still need this method to create keys for documents loaded
      via the XPath document() function.</div>
<a id="L1176" name="L1176"></a>1176     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6198.html#L1323" title="Referred from 1323 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileBuildKeys</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen) <em class="brace">{</em>
<a id="L1177" name="L1177"></a>1177         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L1178" name="L1178"></a>1178 
<a id="L1179" name="L1179"></a>1179         <strong class="reserved">final</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] argTypes = <em class="brace">{</em>
<a id="L1180" name="L1180"></a>1180             <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(DOM_INTF_SIG),
<a id="L1181" name="L1181"></a>1181             <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(NODE_ITERATOR_SIG),
<a id="L1182" name="L1182"></a>1182             <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(TRANSLET_OUTPUT_SIG),
<a id="L1183" name="L1183"></a>1183             com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT
<a id="L1184" name="L1184"></a>1184         <em class="brace">}</em>;
<a id="L1185" name="L1185"></a>1185 
<a id="L1186" name="L1186"></a>1186         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] argNames = <em class="brace">{</em>
<a id="L1187" name="L1187"></a>1187             DOCUMENT_PNAME, ITERATOR_PNAME, TRANSLET_OUTPUT_PNAME, "current"
<a id="L1188" name="L1188"></a>1188         <em class="brace">}</em>;
<a id="L1189" name="L1189"></a>1189 
<a id="L1190" name="L1190"></a>1190         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L1191" name="L1191"></a>1191 
<a id="L1192" name="L1192"></a>1192         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a> =
<a id="L1193" name="L1193"></a>1193             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L1194" name="L1194"></a>1194                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L1195" name="L1195"></a>1195                                 argTypes, argNames,
<a id="L1196" name="L1196"></a>1196                                 "buildKeys", _className, il,
<a id="L1197" name="L1197"></a>1197                                 classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>());
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199         <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>.<a href="../S/4802.html#L633" title="Defined at 633 in src/com/sun/org/apache/bcel/internal/generic/MethodGen.java.">addException</a>("com.sun.org.apache.xalan.internal.xsltc.TransletException");
<a id="L1200" name="L1200"></a>1200 
<a id="L1201" name="L1201"></a>1201         <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1202" name="L1202"></a>1202         <strong class="reserved">while</strong> (<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1203" name="L1203"></a>1203             <em class="comment">// xsl:key</em>
<a id="L1204" name="L1204"></a>1204             <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1205" name="L1205"></a>1205             <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> <strong class="reserved">instanceof</strong> <a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a>) <em class="brace">{</em>
<a id="L1206" name="L1206"></a>1206                 <strong class="reserved">final</strong> <a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = (<a href="../D/4780.html" title="Multiple defined in 5 places.">Key</a>)<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>;
<a id="L1207" name="L1207"></a>1207                 <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/35598.html" title="Multiple defined in 116 places.">translate</a>(classGen, <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>);
<a id="L1208" name="L1208"></a>1208                 _keys.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1209" name="L1209"></a>1209             <em class="brace">}</em>
<a id="L1210" name="L1210"></a>1210         <em class="brace">}</em>
<a id="L1211" name="L1211"></a>1211 
<a id="L1212" name="L1212"></a>1212         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L1213" name="L1213"></a>1213 
<a id="L1214" name="L1214"></a>1214         <em class="comment">// Compute max locals + stack and add method to class</em>
<a id="L1215" name="L1215"></a>1215         <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>.<a href="../S/4802.html#L906" title="Defined at 906 in src/com/sun/org/apache/bcel/internal/generic/MethodGen.java.">stripAttributes</a>(<strong class="reserved">true</strong>);
<a id="L1216" name="L1216"></a>1216         <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>.<a href="../D/33202.html" title="Multiple defined in 4 places.">setMaxLocals</a>();
<a id="L1217" name="L1217"></a>1217         <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>.<a href="../D/33211.html" title="Multiple defined in 3 places.">setMaxStack</a>();
<a id="L1218" name="L1218"></a>1218         <a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>.<a href="../S/4802.html#L800" title="Defined at 800 in src/com/sun/org/apache/bcel/internal/generic/MethodGen.java.">removeNOPs</a>();
<a id="L1219" name="L1219"></a>1219 
<a id="L1220" name="L1220"></a>1220         classGen.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(<a href="../D/11959.html" title="Multiple defined in 2 places.">buildKeys</a>.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>());
<a id="L1221" name="L1221"></a>1221 
<a id="L1222" name="L1222"></a>1222         <strong class="reserved">return</strong>("("+DOM_INTF_SIG+NODE_ITERATOR_SIG+TRANSLET_OUTPUT_SIG+"I)V");
<a id="L1223" name="L1223"></a>1223     <em class="brace">}</em>
<a id="L1224" name="L1224"></a>1224 
<div class="comment">
      Compile transform() into the output class. This method is used to
      initialize global variables and global parameters. The current node
      is set to be the document's root node.</div>
<a id="L1230" name="L1230"></a>1230     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/6198.html#L707" title="Referred from 707 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileTransform</a>(<a href="../S/6130.html#L50" title="Defined at 50 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">ClassGenerator</a> classGen) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231         <strong class="reserved">final</strong> <a href="../S/4764.html#L78" title="Defined at 78 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">ConstantPoolGen</a> cpg = classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>();
<a id="L1232" name="L1232"></a>1232 
<div class="comment">
          Define the the method transform with the following signature:
          void transform(DOM, NodeIterator, HandlerBase)</div>
<a id="L1237" name="L1237"></a>1237         <strong class="reserved">final</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[] argTypes =
<a id="L1238" name="L1238"></a>1238             <strong class="reserved">new</strong> com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>[3];
<a id="L1239" name="L1239"></a>1239         argTypes[0] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(DOM_INTF_SIG);
<a id="L1240" name="L1240"></a>1240         argTypes[1] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(NODE_ITERATOR_SIG);
<a id="L1241" name="L1241"></a>1241         argTypes[2] = <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../S/6101.html#L103" title="Defined at 103 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/Util.java.">getJCRefType</a>(TRANSLET_OUTPUT_SIG);
<a id="L1242" name="L1242"></a>1242 
<a id="L1243" name="L1243"></a>1243         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] argNames = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[3];
<a id="L1244" name="L1244"></a>1244         argNames[0] = DOCUMENT_PNAME;
<a id="L1245" name="L1245"></a>1245         argNames[1] = ITERATOR_PNAME;
<a id="L1246" name="L1246"></a>1246         argNames[2] = TRANSLET_OUTPUT_PNAME;
<a id="L1247" name="L1247"></a>1247 
<a id="L1248" name="L1248"></a>1248         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = <strong class="reserved">new</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a>();
<a id="L1249" name="L1249"></a>1249         <strong class="reserved">final</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> transf =
<a id="L1250" name="L1250"></a>1250             <strong class="reserved">new</strong> <a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a>(ACC_PUBLIC,
<a id="L1251" name="L1251"></a>1251                                 com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.VOID,
<a id="L1252" name="L1252"></a>1252                                 argTypes, argNames,
<a id="L1253" name="L1253"></a>1253                                 "transform",
<a id="L1254" name="L1254"></a>1254                                 _className,
<a id="L1255" name="L1255"></a>1255                                 il,
<a id="L1256" name="L1256"></a>1256                                 classGen.<a href="../D/17923.html" title="Multiple defined in 12 places.">getConstantPool</a>());
<a id="L1257" name="L1257"></a>1257         transf.<a href="../S/4802.html#L633" title="Defined at 633 in src/com/sun/org/apache/bcel/internal/generic/MethodGen.java.">addException</a>("com.sun.org.apache.xalan.internal.xsltc.TransletException");
<a id="L1258" name="L1258"></a>1258 
<a id="L1259" name="L1259"></a>1259         <em class="comment">// Define and initialize current with the root node</em>
<a id="L1260" name="L1260"></a>1260         <strong class="reserved">final</strong> <a href="../S/4694.html#L75" title="Defined at 75 in src/com/sun/org/apache/bcel/internal/generic/LocalVariableGen.java.">LocalVariableGen</a> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> =
<a id="L1261" name="L1261"></a>1261             transf.<a href="../D/10913.html" title="Multiple defined in 3 places.">addLocalVariable</a>("current",
<a id="L1262" name="L1262"></a>1262                                     com.sun.org.apache.bcel.internal.<a href="../S/1616.html#L641" title="Defined at 641 in src/java/lang/invoke/MethodType.java.">generic</a>.<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.INT,
<a id="L1263" name="L1263"></a>1263                                     <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L1264" name="L1264"></a>1264         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> applyTemplatesSig = classGen.<a href="../S/6130.html#L123" title="Defined at 123 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/ClassGenerator.java.">getApplyTemplatesSig</a>();
<a id="L1265" name="L1265"></a>1265         <strong class="reserved">final</strong> <strong class="reserved">int</strong> applyTemplates = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(<a href="../D/17698.html" title="Multiple defined in 41 places.">getClassName</a>(),
<a id="L1266" name="L1266"></a>1266                                                     "applyTemplates",
<a id="L1267" name="L1267"></a>1267                                                     applyTemplatesSig);
<a id="L1268" name="L1268"></a>1268         <strong class="reserved">final</strong> <strong class="reserved">int</strong> domField = cpg.<a href="../S/4764.html#L643" title="Defined at 643 in src/com/sun/org/apache/bcel/internal/generic/ConstantPoolGen.java.">addFieldref</a>(<a href="../D/17698.html" title="Multiple defined in 41 places.">getClassName</a>(),
<a id="L1269" name="L1269"></a>1269                                              DOM_FIELD,
<a id="L1270" name="L1270"></a>1270                                              DOM_INTF_SIG);
<a id="L1271" name="L1271"></a>1271 
<a id="L1272" name="L1272"></a>1272         <em class="comment">// push translet for PUTFIELD</em>
<a id="L1273" name="L1273"></a>1273         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1274" name="L1274"></a>1274         <em class="comment">// prepare appropriate DOM implementation</em>
<a id="L1275" name="L1275"></a>1275 
<a id="L1276" name="L1276"></a>1276         <strong class="reserved">if</strong> (<a href="../D/25902.html" title="Multiple defined in 2 places.">isMultiDocument</a>()) <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4824.html#L69" title="Defined at 69 in src/com/sun/org/apache/bcel/internal/generic/NEW.java.">NEW</a>(cpg.<a href="../D/10706.html" title="Multiple defined in 4 places.">addClass</a>(MULTI_DOM_CLASS)));
<a id="L1278" name="L1278"></a>1278             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/2160.html" title="Multiple defined in 3 places.">DUP</a>);
<a id="L1279" name="L1279"></a>1279         <em class="brace">}</em>
<a id="L1280" name="L1280"></a>1280 
<a id="L1281" name="L1281"></a>1281         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1282" name="L1282"></a>1282         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26912.html" title="Multiple defined in 4 places.">loadDOM</a>());
<a id="L1283" name="L1283"></a>1283         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4737.html#L70" title="Defined at 70 in src/com/sun/org/apache/bcel/internal/generic/INVOKEVIRTUAL.java.">INVOKEVIRTUAL</a>(cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(TRANSLET_CLASS,
<a id="L1284" name="L1284"></a>1284                                                      "makeDOMAdapter",
<a id="L1285" name="L1285"></a>1285                                                      "("+DOM_INTF_SIG+")"+
<a id="L1286" name="L1286"></a>1286                                                      DOM_ADAPTER_SIG)));
<a id="L1287" name="L1287"></a>1287         <em class="comment">// DOMAdapter is on the stack</em>
<a id="L1288" name="L1288"></a>1288 
<a id="L1289" name="L1289"></a>1289         <strong class="reserved">if</strong> (<a href="../D/25902.html" title="Multiple defined in 2 places.">isMultiDocument</a>()) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a> = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(MULTI_DOM_CLASS,
<a id="L1291" name="L1291"></a>1291                                               "&lt;init&gt;",
<a id="L1292" name="L1292"></a>1292                                               "("+DOM_INTF_SIG+")V");
<a id="L1293" name="L1293"></a>1293             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4695.html#L71" title="Defined at 71 in src/com/sun/org/apache/bcel/internal/generic/INVOKESPECIAL.java.">INVOKESPECIAL</a>(<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>));
<a id="L1294" name="L1294"></a>1294             <em class="comment">// MultiDOM is on the stack</em>
<a id="L1295" name="L1295"></a>1295         <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296 
<a id="L1297" name="L1297"></a>1297         <em class="comment">//store to _dom variable</em>
<a id="L1298" name="L1298"></a>1298         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4747.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/PUTFIELD.java.">PUTFIELD</a>(domField));
<a id="L1299" name="L1299"></a>1299 
<a id="L1300" name="L1300"></a>1300         <em class="comment">// continue with globals initialization</em>
<a id="L1301" name="L1301"></a>1301         <strong class="reserved">final</strong> <strong class="reserved">int</strong> gitr = cpg.<a href="../D/10875.html" title="Multiple defined in 2 places.">addInterfaceMethodref</a>(DOM_INTF,
<a id="L1302" name="L1302"></a>1302                                                         "getIterator",
<a id="L1303" name="L1303"></a>1303                                                         "()"+NODE_ITERATOR_SIG);
<a id="L1304" name="L1304"></a>1304         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26912.html" title="Multiple defined in 4 places.">loadDOM</a>());
<a id="L1305" name="L1305"></a>1305         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4624.html#L73" title="Defined at 73 in src/com/sun/org/apache/bcel/internal/generic/INVOKEINTERFACE.java.">INVOKEINTERFACE</a>(gitr, 1));
<a id="L1306" name="L1306"></a>1306         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>());
<a id="L1307" name="L1307"></a>1307         <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4787.html#L67" title="Defined at 67 in src/com/sun/org/apache/bcel/internal/generic/ISTORE.java.">ISTORE</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>())));
<a id="L1308" name="L1308"></a>1308 
<a id="L1309" name="L1309"></a>1309         <em class="comment">// Transfer the output settings to the output post-processor</em>
<a id="L1310" name="L1310"></a>1310         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1311" name="L1311"></a>1311         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26931.html" title="Multiple defined in 2 places.">loadHandler</a>());
<a id="L1312" name="L1312"></a>1312         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(TRANSLET_CLASS,
<a id="L1313" name="L1313"></a>1313                                            "transferOutputSettings",
<a id="L1314" name="L1314"></a>1314                                            "("+OUTPUT_HANDLER_SIG+")V");
<a id="L1315" name="L1315"></a>1315         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4737.html#L70" title="Defined at 70 in src/com/sun/org/apache/bcel/internal/generic/INVOKEVIRTUAL.java.">INVOKEVIRTUAL</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>));
<a id="L1316" name="L1316"></a>1316 
<div class="comment">
          Compile buildKeys() method. Note that this method is not
          invoked here as keys for the input document are now created
          in topLevel(). However, this method is still needed by the
          LoadDocument class.</div>
<a id="L1323" name="L1323"></a>1323         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keySig = <a href="../S/6198.html#L1176" title="Defined at 1176 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileBuildKeys</a>(classGen);
<a id="L1324" name="L1324"></a>1324         <strong class="reserved">final</strong> <strong class="reserved">int</strong> keyIdx = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(<a href="../D/17698.html" title="Multiple defined in 41 places.">getClassName</a>(),
<a id="L1325" name="L1325"></a>1325                                                "buildKeys", keySig);
<a id="L1326" name="L1326"></a>1326 
<a id="L1327" name="L1327"></a>1327         <em class="comment">// Look for top-level elements that need handling</em>
<a id="L1328" name="L1328"></a>1328         <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> toplevel = <a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1329" name="L1329"></a>1329         <strong class="reserved">if</strong> (_globals.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0 || toplevel.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1330" name="L1330"></a>1330             <em class="comment">// Compile method for handling top-level elements</em>
<a id="L1331" name="L1331"></a>1331             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> topLevelSig = <a href="../S/6198.html#L1012" title="Defined at 1012 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">compileTopLevel</a>(classGen);
<a id="L1332" name="L1332"></a>1332             <em class="comment">// Get a reference to that method</em>
<a id="L1333" name="L1333"></a>1333             <strong class="reserved">final</strong> <strong class="reserved">int</strong> topLevelIdx = cpg.<a href="../D/10937.html" title="Multiple defined in 2 places.">addMethodref</a>(<a href="../D/17698.html" title="Multiple defined in 41 places.">getClassName</a>(),
<a id="L1334" name="L1334"></a>1334                                                      "topLevel",
<a id="L1335" name="L1335"></a>1335                                                      topLevelSig);
<a id="L1336" name="L1336"></a>1336             <em class="comment">// Push all parameters on the stack and call topLevel()</em>
<a id="L1337" name="L1337"></a>1337             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>()); <em class="comment">// The 'this' pointer</em>
<a id="L1338" name="L1338"></a>1338             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1339" name="L1339"></a>1339             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4792.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETFIELD.java.">GETFIELD</a>(domField));  <em class="comment">// The DOM reference</em>
<a id="L1340" name="L1340"></a>1340             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26944.html" title="Multiple defined in 3 places.">loadIterator</a>());
<a id="L1341" name="L1341"></a>1341             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26931.html" title="Multiple defined in 2 places.">loadHandler</a>());    <em class="comment">// The output handler</em>
<a id="L1342" name="L1342"></a>1342             il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4737.html#L70" title="Defined at 70 in src/com/sun/org/apache/bcel/internal/generic/INVOKEVIRTUAL.java.">INVOKEVIRTUAL</a>(topLevelIdx));
<a id="L1343" name="L1343"></a>1343         <em class="brace">}</em>
<a id="L1344" name="L1344"></a>1344 
<a id="L1345" name="L1345"></a>1345         <em class="comment">// start document</em>
<a id="L1346" name="L1346"></a>1346         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26931.html" title="Multiple defined in 2 places.">loadHandler</a>());
<a id="L1347" name="L1347"></a>1347         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>());
<a id="L1348" name="L1348"></a>1348 
<a id="L1349" name="L1349"></a>1349         <em class="comment">// push first arg for applyTemplates</em>
<a id="L1350" name="L1350"></a>1350         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1351" name="L1351"></a>1351         <em class="comment">// push translet for GETFIELD to get DOM arg</em>
<a id="L1352" name="L1352"></a>1352         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(classGen.<a href="../D/26993.html" title="Multiple defined in 4 places.">loadTranslet</a>());
<a id="L1353" name="L1353"></a>1353         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4792.html#L72" title="Defined at 72 in src/com/sun/org/apache/bcel/internal/generic/GETFIELD.java.">GETFIELD</a>(domField));
<a id="L1354" name="L1354"></a>1354         <em class="comment">// push remaining 2 args</em>
<a id="L1355" name="L1355"></a>1355         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26944.html" title="Multiple defined in 3 places.">loadIterator</a>());
<a id="L1356" name="L1356"></a>1356         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26931.html" title="Multiple defined in 2 places.">loadHandler</a>());
<a id="L1357" name="L1357"></a>1357         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<strong class="reserved">new</strong> <a href="../S/4737.html#L70" title="Defined at 70 in src/com/sun/org/apache/bcel/internal/generic/INVOKEVIRTUAL.java.">INVOKEVIRTUAL</a>(applyTemplates));
<a id="L1358" name="L1358"></a>1358         <em class="comment">// endDocument</em>
<a id="L1359" name="L1359"></a>1359         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/26931.html" title="Multiple defined in 2 places.">loadHandler</a>());
<a id="L1360" name="L1360"></a>1360         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(transf.<a href="../D/15443.html" title="Multiple defined in 65 places.">endDocument</a>());
<a id="L1361" name="L1361"></a>1361 
<a id="L1362" name="L1362"></a>1362         il.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/7024.html" title="Multiple defined in 4 places.">RETURN</a>);
<a id="L1363" name="L1363"></a>1363 
<a id="L1364" name="L1364"></a>1364         <em class="comment">// Compute max locals + stack and add method to class</em>
<a id="L1365" name="L1365"></a>1365         classGen.<a href="../D/10936.html" title="Multiple defined in 3 places.">addMethod</a>(transf);
<a id="L1366" name="L1366"></a>1366 
<a id="L1367" name="L1367"></a>1367     <em class="brace">}</em>
<a id="L1368" name="L1368"></a>1368 
<div class="comment">
      Peephole optimization: Remove sequences of [ALOAD, POP].</div>
<a id="L1372" name="L1372"></a>1372     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/24710.html" title="Multiple referred from 2 places.">peepHoleOptimization</a>(<a href="../S/6132.html#L82" title="Defined at 82 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/util/MethodGenerator.java.">MethodGenerator</a> methodGen) <em class="brace">{</em>
<a id="L1373" name="L1373"></a>1373         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> = "`aload'`pop'`instruction'";
<a id="L1374" name="L1374"></a>1374         <strong class="reserved">final</strong> <a href="../S/4621.html#L87" title="Defined at 87 in src/com/sun/org/apache/bcel/internal/generic/InstructionList.java.">InstructionList</a> il = methodGen.<a href="../D/19776.html" title="Multiple defined in 7 places.">getInstructionList</a>();
<a id="L1375" name="L1375"></a>1375         <strong class="reserved">final</strong> <a href="../S/4549.html#L92" title="Defined at 92 in src/com/sun/org/apache/bcel/internal/util/InstructionFinder.java.">InstructionFinder</a> <a href="../D/16082.html" title="Multiple defined in 26 places.">find</a> = <strong class="reserved">new</strong> <a href="../S/4549.html#L92" title="Defined at 92 in src/com/sun/org/apache/bcel/internal/util/InstructionFinder.java.">InstructionFinder</a>(il);
<a id="L1376" name="L1376"></a>1376         <strong class="reserved">for</strong>(<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>=<a href="../D/16082.html" title="Multiple defined in 26 places.">find</a>.<a href="../D/31650.html" title="Multiple defined in 35 places.">search</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>); <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); ) <em class="brace">{</em>
<a id="L1377" name="L1377"></a>1377             <a href="../S/4625.html#L83" title="Defined at 83 in src/com/sun/org/apache/bcel/internal/generic/InstructionHandle.java.">InstructionHandle</a>[] <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> = (<a href="../S/4625.html#L83" title="Defined at 83 in src/com/sun/org/apache/bcel/internal/generic/InstructionHandle.java.">InstructionHandle</a>[])<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L1378" name="L1378"></a>1378             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1379" name="L1379"></a>1379                 il.<a href="../D/14793.html" title="Multiple defined in 25 places.">delete</a>(<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>[0], <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>[1]);
<a id="L1380" name="L1380"></a>1380             <em class="brace">}</em>
<a id="L1381" name="L1381"></a>1381             <strong class="reserved">catch</strong> (<a href="../S/4746.html#L91" title="Defined at 91 in src/com/sun/org/apache/bcel/internal/generic/TargetLostException.java.">TargetLostException</a> e) <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382                 <em class="comment">// TODO: move target down into the list</em>
<a id="L1383" name="L1383"></a>1383             <em class="brace">}</em>
<a id="L1384" name="L1384"></a>1384         <em class="brace">}</em>
<a id="L1385" name="L1385"></a>1385     <em class="brace">}</em>
<a id="L1386" name="L1386"></a>1386 
<a id="L1387" name="L1387"></a>1387     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/9893.html" title="Multiple referred from 4 places.">addParam</a>(<a href="../S/6223.html#L52" title="Defined at 52 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Param.java.">Param</a> param) <em class="brace">{</em>
<a id="L1388" name="L1388"></a>1388         _globals.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(param);
<a id="L1389" name="L1389"></a>1389         <strong class="reserved">return</strong> _globals.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1;
<a id="L1390" name="L1390"></a>1390     <em class="brace">}</em>
<a id="L1391" name="L1391"></a>1391 
<a id="L1392" name="L1392"></a>1392     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/10033.html" title="Multiple referred from 7 places.">addVariable</a>(<a href="../D/9517.html" title="Multiple defined in 2 places.">Variable</a> global) <em class="brace">{</em>
<a id="L1393" name="L1393"></a>1393         _globals.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(global);
<a id="L1394" name="L1394"></a>1394         <strong class="reserved">return</strong> _globals.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1;
<a id="L1395" name="L1395"></a>1395     <em class="brace">}</em>
<a id="L1396" name="L1396"></a>1396 
<a id="L1397" name="L1397"></a>1397     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13332.html" title="Multiple referred from 4 places.">display</a>(<strong class="reserved">int</strong> <a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a>) <em class="brace">{</em>
<a id="L1398" name="L1398"></a>1398         <a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a>(<a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a>);
<a id="L1399" name="L1399"></a>1399         <a href="../D/9440.html" title="Multiple defined in 6 places.">Util</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Stylesheet");
<a id="L1400" name="L1400"></a>1400         <a href="../S/6076.html#L875" title="Defined at 875 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/SyntaxTreeNode.java.">displayContents</a>(<a href="../D/24457.html" title="Multiple defined in 13 places.">indent</a> + IndentIncrement);
<a id="L1401" name="L1401"></a>1401     <em class="brace">}</em>
<a id="L1402" name="L1402"></a>1402 
<a id="L1403" name="L1403"></a>1403     <em class="comment">// do we need this wrapper ?????</em>
<a id="L1404" name="L1404"></a>1404     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17847.html" title="Multiple referred from 90 places.">getNamespace</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>) <em class="brace">{</em>
<a id="L1405" name="L1405"></a>1405         <strong class="reserved">return</strong> <a href="../D/27133.html" title="Multiple defined in 9 places.">lookupNamespace</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L1406" name="L1406"></a>1406     <em class="brace">}</em>
<a id="L1407" name="L1407"></a>1407 
<a id="L1408" name="L1408"></a>1408     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/15596.html" title="Multiple referred from 186 places.">getClassName</a>() <em class="brace">{</em>
<a id="L1409" name="L1409"></a>1409         <strong class="reserved">return</strong> _className;
<a id="L1410" name="L1410"></a>1410     <em class="brace">}</em>
<a id="L1411" name="L1411"></a>1411 
<a id="L1412" name="L1412"></a>1412     <strong class="reserved">public</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../R/19417.html" title="Multiple referred from 2 places.">getTemplates</a>() <em class="brace">{</em>
<a id="L1413" name="L1413"></a>1413         <strong class="reserved">return</strong> _templates;
<a id="L1414" name="L1414"></a>1414     <em class="brace">}</em>
<a id="L1415" name="L1415"></a>1415 
<a id="L1416" name="L1416"></a>1416     <strong class="reserved">public</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../R/15028.html" title="Multiple referred from 2 places.">getAllValidTemplates</a>() <em class="brace">{</em>
<a id="L1417" name="L1417"></a>1417         <em class="comment">// Return templates if no imported/included stylesheets</em>
<a id="L1418" name="L1418"></a>1418         <strong class="reserved">if</strong> (_includedStylesheets == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1419" name="L1419"></a>1419             <strong class="reserved">return</strong> _templates;
<a id="L1420" name="L1420"></a>1420         <em class="brace">}</em>
<a id="L1421" name="L1421"></a>1421 
<a id="L1422" name="L1422"></a>1422         <em class="comment">// Is returned value cached?</em>
<a id="L1423" name="L1423"></a>1423         <strong class="reserved">if</strong> (_allValidTemplates == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1424" name="L1424"></a>1424            <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> templates = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1425" name="L1425"></a>1425            templates.<a href="../D/10646.html" title="Multiple defined in 78 places.">addAll</a>(_templates);
<a id="L1426" name="L1426"></a>1426             <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = _includedStylesheets.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1427" name="L1427"></a>1427             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L1428" name="L1428"></a>1428                 <a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a> included =(<a href="../S/6198.html#L68" title="Defined at 68 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">Stylesheet</a>)_includedStylesheets.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1429" name="L1429"></a>1429                 templates.<a href="../D/10646.html" title="Multiple defined in 78 places.">addAll</a>(included.<a href="../S/6198.html#L1416" title="Defined at 1416 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Stylesheet.java.">getAllValidTemplates</a>());
<a id="L1430" name="L1430"></a>1430             <em class="brace">}</em>
<a id="L1431" name="L1431"></a>1431             <em class="comment">//templates.addAll(_templates);</em>
<a id="L1432" name="L1432"></a>1432 
<a id="L1433" name="L1433"></a>1433             <em class="comment">// Cache results in top-level stylesheet only</em>
<a id="L1434" name="L1434"></a>1434             <strong class="reserved">if</strong> (_parentStylesheet != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1435" name="L1435"></a>1435                 <strong class="reserved">return</strong> templates;
<a id="L1436" name="L1436"></a>1436             <em class="brace">}</em>
<a id="L1437" name="L1437"></a>1437             _allValidTemplates = templates;
<a id="L1438" name="L1438"></a>1438          <em class="brace">}</em>
<a id="L1439" name="L1439"></a>1439 
<a id="L1440" name="L1440"></a>1440         <strong class="reserved">return</strong> _allValidTemplates;
<a id="L1441" name="L1441"></a>1441     <em class="brace">}</em>
<a id="L1442" name="L1442"></a>1442 
<a id="L1443" name="L1443"></a>1443     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/9988.html" title="Multiple referred from 5 places.">addTemplate</a>(<a href="../S/6217.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Template.java.">Template</a> template) <em class="brace">{</em>
<a id="L1444" name="L1444"></a>1444         _templates.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(template);
<a id="L1445" name="L1445"></a>1445     <em class="brace">}</em>
<a id="L1446" name="L1446"></a>1446 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L232">[^]</a><a href="#L1443">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
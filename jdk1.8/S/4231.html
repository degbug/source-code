<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/imageio/ImageWriter.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L156">[^]</a><a href="#L2035">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L156" title="Defined at 156.">getOriginatingProvider</a></li>
<li><a href="#L206" title="Defined at 206.">setOutput</a></li>
<li><a href="#L241" title="Defined at 241.">getOutput</a></li>
<li><a href="#L260" title="Defined at 260.">getAvailableLocales</a></li>
<li><a href="#L287" title="Defined at 287.">setLocale</a></li>
<li><a href="#L317" title="Defined at 317.">getLocale</a></li>
<li><a href="#L346" title="Defined at 346.">getDefaultWriteParam</a></li>
<li><a href="#L381" title="Defined at 381.">getDefaultStreamMetadata</a></li>
<li><a href="#L410" title="Defined at 410.">getDefaultImageMetadata</a></li>
<li><a href="#L414" title="Defined at 414.">convertStreamMetadata</a></li>
<li><a href="#L419" title="Defined at 419.">convertImageMetadata</a></li>
<li><a href="#L455" title="Defined at 455.">getNumThumbnailsSupported</a></li>
<li><a href="#L499" title="Defined at 499.">getPreferredThumbnailSizes</a></li>
<li><a href="#L520" title="Defined at 520.">canWriteRasters</a></li>
<li><a href="#L575" title="Defined at 575.">write</a></li>
<li><a href="#L596" title="Defined at 596.">write</a></li>
<li><a href="#L614" title="Defined at 614.">write</a></li>
<li><a href="#L620" title="Defined at 620.">unsupported</a></li>
<li><a href="#L642" title="Defined at 642.">canWriteSequence</a></li>
<li><a href="#L683" title="Defined at 683.">prepareWriteSequence</a></li>
<li><a href="#L748" title="Defined at 748.">writeToSequence</a></li>
<li><a href="#L778" title="Defined at 778.">endWriteSequence</a></li>
<li><a href="#L799" title="Defined at 799.">canReplaceStreamMetadata</a></li>
<li><a href="#L833" title="Defined at 833.">replaceStreamMetadata</a></li>
<li><a href="#L869" title="Defined at 869.">canReplaceImageMetadata</a></li>
<li><a href="#L903" title="Defined at 903.">replaceImageMetadata</a></li>
<li><a href="#L941" title="Defined at 941.">canInsertImage</a></li>
<li><a href="#L996" title="Defined at 996.">writeInsert</a></li>
<li><a href="#L1032" title="Defined at 1032.">canRemoveImage</a></li>
<li><a href="#L1064" title="Defined at 1064.">removeImage</a></li>
<li><a href="#L1092" title="Defined at 1092.">canWriteEmpty</a></li>
<li><a href="#L1167" title="Defined at 1167.">prepareWriteEmpty</a></li>
<li><a href="#L1204" title="Defined at 1204.">endWriteEmpty</a></li>
<li><a href="#L1244" title="Defined at 1244.">canInsertEmpty</a></li>
<li><a href="#L1327" title="Defined at 1327.">prepareInsertEmpty</a></li>
<li><a href="#L1361" title="Defined at 1361.">endInsertEmpty</a></li>
<li><a href="#L1394" title="Defined at 1394.">canReplacePixels</a></li>
<li><a href="#L1436" title="Defined at 1436.">prepareReplacePixels</a></li>
<li><a href="#L1494" title="Defined at 1494.">replacePixels</a></li>
<li><a href="#L1555" title="Defined at 1555.">replacePixels</a></li>
<li><a href="#L1582" title="Defined at 1582.">endReplacePixels</a></li>
<li><a href="#L1596" title="Defined at 1596.">abort</a></li>
<li><a href="#L1611" title="Defined at 1611.">abortRequested</a></li>
<li><a href="#L1623" title="Defined at 1623.">clearAbortRequest</a></li>
<li><a href="#L1643" title="Defined at 1643.">addIIOWriteWarningListener</a></li>
<li><a href="#L1664" title="Defined at 1664.">removeIIOWriteWarningListener</a></li>
<li><a href="#L1687" title="Defined at 1687.">removeAllIIOWriteWarningListeners</a></li>
<li><a href="#L1704" title="Defined at 1704.">addIIOWriteProgressListener</a></li>
<li><a href="#L1724" title="Defined at 1724.">removeIIOWriteProgressListener</a></li>
<li><a href="#L1740" title="Defined at 1740.">removeAllIIOWriteProgressListeners</a></li>
<li><a href="#L1752" title="Defined at 1752.">processImageStarted</a></li>
<li><a href="#L1773" title="Defined at 1773.">processImageProgress</a></li>
<li><a href="#L1791" title="Defined at 1791.">processImageComplete</a></li>
<li><a href="#L1813" title="Defined at 1813.">processThumbnailStarted</a></li>
<li><a href="#L1835" title="Defined at 1835.">processThumbnailProgress</a></li>
<li><a href="#L1853" title="Defined at 1853.">processThumbnailComplete</a></li>
<li><a href="#L1871" title="Defined at 1871.">processWriteAborted</a></li>
<li><a href="#L1896" title="Defined at 1896.">processWarningOccurred</a></li>
<li><a href="#L1940" title="Defined at 1940.">processWarningOccurred</a></li>
<li><a href="#L2012" title="Defined at 2012.">reset</a></li>
<li><a href="#L2035" title="Defined at 2035.">dispose</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1999, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.imageio;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.Dimension;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.Rectangle;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.awt.image.BufferedImage;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.awt.image.RenderedImage;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.awt.image.Raster;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.io.IOException;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.List;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.Locale;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.MissingResourceException;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.ResourceBundle;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> javax.imageio.event.IIOWriteWarningListener;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> javax.imageio.event.IIOWriteProgressListener;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> javax.imageio.metadata.IIOMetadata;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> javax.imageio.stream.ImageOutputStream;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> javax.imageio.spi.ImageWriterSpi;
<a id="L44" name="L44"></a>  44 
<div class="comment">
  An abstract superclass for encoding and writing images.  This class
  must be subclassed by classes that write out images in the context
  of the Java Image I/O framework.
  <p> <code>ImageWriter</code> objects are normally instantiated by
  the service provider class for the specific format.  Service
  provider classes are registered with the <code>IIORegistry</code>,
  which uses them for format recognition and presentation of
  available format readers and writers.
  </p><p>
  @see ImageReader
  @see ImageWriteParam
  @see javax.imageio.spi.IIORegistry
  @see javax.imageio.spi.ImageWriterSpi</p></div>
<a id="L64" name="L64"></a>  64 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/3738.html" title="Multiple referred from 61 places.">ImageWriter</a> <strong class="reserved">implements</strong> <a href="../S/4212.html#L86" title="Defined at 86 in src/javax/imageio/ImageTranscoder.java.">ImageTranscoder</a> <em class="brace">{</em>
<a id="L65" name="L65"></a>  65 
<div class="comment">
      The <code>ImageWriterSpi</code> that instantiated this object,
      or <code>null</code> if its identity is not known or none
      exists.  By default it is initialized to <code>null</code>.</div>
<a id="L71" name="L71"></a>  71     <strong class="reserved">protected</strong> <a href="../S/4219.html#L76" title="Defined at 76 in src/javax/imageio/spi/ImageWriterSpi.java.">ImageWriterSpi</a> originatingProvider = <strong class="reserved">null</strong>;
<a id="L72" name="L72"></a>  72 
<div class="comment">
      The <code>ImageOutputStream</code> or other <code>Object</code>
      set by <code>setOutput</code> and retrieved by
      <code>getOutput</code>.  By default it is initialized to
      <code>null</code>.</div>
<a id="L79" name="L79"></a>  79     <strong class="reserved">protected</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a> = <strong class="reserved">null</strong>;
<a id="L80" name="L80"></a>  80 
<div class="comment">
      An array of <code>Locale</code>s that may be used to localize
      warning messages and compression setting values, or
      <code>null</code> if localization is not supported.  By default
      it is initialized to <code>null</code>.</div>
<a id="L87" name="L87"></a>  87     <strong class="reserved">protected</strong> <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>[] availableLocales = <strong class="reserved">null</strong>;
<a id="L88" name="L88"></a>  88 
<div class="comment">
      The current <code>Locale</code> to be used for localization, or
      <code>null</code> if none has been set.  By default it is
      initialized to <code>null</code>.</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">protected</strong> <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> = <strong class="reserved">null</strong>;
<a id="L95" name="L95"></a>  95 
<div class="comment">
      A <code>List</code> of currently registered
      <code>IIOWriteWarningListener</code>s, initialized by default to
      <code>null</code>, which is synonymous with an empty
      <code>List</code>.</div>
<a id="L102" name="L102"></a> 102     <strong class="reserved">protected</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a>&gt; warningListeners = <strong class="reserved">null</strong>;
<a id="L103" name="L103"></a> 103 
<div class="comment">
      A <code>List</code> of <code>Locale</code>s, one for each
      element of <code>warningListeners</code>, initialized by default
      <code>null</code>, which is synonymous with an empty
      <code>List</code>.</div>
<a id="L110" name="L110"></a> 110     <strong class="reserved">protected</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>&gt; warningLocales = <strong class="reserved">null</strong>;
<a id="L111" name="L111"></a> 111 
<div class="comment">
      A <code>List</code> of currently registered
      <code>IIOWriteProgressListener</code>s, initialized by default
      <code>null</code>, which is synonymous with an empty
      <code>List</code>.</div>
<a id="L118" name="L118"></a> 118     <strong class="reserved">protected</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>&gt; progressListeners = <strong class="reserved">null</strong>;
<a id="L119" name="L119"></a> 119 
<div class="comment">
      If <code>true</code>, the current write operation should be
      aborted.</div>
<a id="L124" name="L124"></a> 124     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> abortFlag = <strong class="reserved">false</strong>;
<a id="L125" name="L125"></a> 125 
<div class="comment">
      Constructs an <code>ImageWriter</code> and sets its
      <code>originatingProvider</code> instance variable to the
      supplied value.
      <p> Subclasses that make use of extensions should provide a
      constructor with signature <code>(ImageWriterSpi,
      Object)</code> in order to retrieve the extension object.  If
      the extension object is unsuitable, an
      <code>IllegalArgumentException</code> should be thrown.
      @param originatingProvider the <code>ImageWriterSpi</code> that
      is constructing this object, or <code>null</code>.</p></div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">protected</strong> ImageWriter(<a href="../S/4219.html#L76" title="Defined at 76 in src/javax/imageio/spi/ImageWriterSpi.java.">ImageWriterSpi</a> originatingProvider) <em class="brace">{</em>
<a id="L141" name="L141"></a> 141         <strong class="reserved">this</strong>.originatingProvider = originatingProvider;
<a id="L142" name="L142"></a> 142     <em class="brace">}</em>
<a id="L143" name="L143"></a> 143 
<div class="comment">
      Returns the <code>ImageWriterSpi</code> object that created
      this <code>ImageWriter</code>, or <code>null</code> if this
      object was not created through the <code>IIORegistry</code>.
      <p> The default implementation returns the value of the
      <code>originatingProvider</code> instance variable.
      @return an <code>ImageWriterSpi</code>, or <code>null</code>.
      @see ImageWriterSpi</p></div>
<a id="L156" name="L156"></a> 156     <strong class="reserved">public</strong> <a href="../S/4219.html#L76" title="Defined at 76 in src/javax/imageio/spi/ImageWriterSpi.java.">ImageWriterSpi</a> <a href="../R/18174.html" title="Multiple referred from 7 places.">getOriginatingProvider</a>() <em class="brace">{</em>
<a id="L157" name="L157"></a> 157         <strong class="reserved">return</strong> originatingProvider;
<a id="L158" name="L158"></a> 158     <em class="brace">}</em>
<a id="L159" name="L159"></a> 159 
<div class="comment">
      Sets the destination to the given
      <code>ImageOutputStream</code> or other <code>Object</code>.
      The destination is assumed to be ready to accept data, and will
      not be closed at the end of each write. This allows distributed
      imaging applications to transmit a series of images over a
      single network connection.  If <code>output</code> is
      <code>null</code>, any currently set output will be removed.
      <p> If <code>output</code> is an
      <code>ImageOutputStream</code>, calls to the
      <code>write</code>, <code>writeToSequence</code>, and
      <code>prepareWriteEmpty</code>/<code>endWriteEmpty</code>
      methods will preserve the existing contents of the stream.
      Other write methods, such as <code>writeInsert</code>,
      <code>replaceStreamMetadata</code>,
      <code>replaceImageMetadata</code>, <code>replacePixels</code>,
      <code>prepareInsertEmpty</code>/<code>endInsertEmpty</code>,
      and <code>endWriteSequence</code>, require the full contents
      of the stream to be readable and writable, and may alter any
      portion of the stream.
      </p><p> Use of a general <code>Object</code> other than an
      <code>ImageOutputStream</code> is intended for writers that
      interact directly with an output device or imaging protocol.
      The set of legal classes is advertised by the writer's service
      provider's <code>getOutputTypes</code> method; most writers
      will return a single-element array containing only
      <code>ImageOutputStream.class</code> to indicate that they
      accept only an <code>ImageOutputStream</code>.
      </p><p> The default implementation sets the <code>output</code>
      instance variable to the value of <code>output</code> after
      checking <code>output</code> against the set of classes
      advertised by the originating provider, if there is one.
      @param output the <code>ImageOutputStream</code> or other
      <code>Object</code> to use for future writing.
      @exception IllegalArgumentException if <code>output</code> is
      not an instance of one of the classes returned by the
      originating service provider's <code>getOutputTypes</code>
      method.
      @see #getOutput</p></div>
<a id="L206" name="L206"></a> 206     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27874.html" title="Multiple referred from 10 places.">setOutput</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>) <em class="brace">{</em>
<a id="L207" name="L207"></a> 207         <strong class="reserved">if</strong> (<a href="../D/28597.html" title="Multiple defined in 4 places.">output</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L208" name="L208"></a> 208             <a href="../S/4219.html#L76" title="Defined at 76 in src/javax/imageio/spi/ImageWriterSpi.java.">ImageWriterSpi</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a> = <a href="../D/21251.html" title="Multiple defined in 2 places.">getOriginatingProvider</a>();
<a id="L209" name="L209"></a> 209             <strong class="reserved">if</strong> (<a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                 <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] <a href="../S/7709.html#L86" title="Defined at 86 in src/com/sun/javadoc/RootDoc.java.">classes</a> = <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../S/4219.html#L270" title="Defined at 270 in src/javax/imageio/spi/ImageWriterSpi.java.">getOutputTypes</a>();
<a id="L211" name="L211"></a> 211                 <strong class="reserved">boolean</strong> found = <strong class="reserved">false</strong>;
<a id="L212" name="L212"></a> 212                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../S/7709.html#L86" title="Defined at 86 in src/com/sun/javadoc/RootDoc.java.">classes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L213" name="L213"></a> 213                     <strong class="reserved">if</strong> (<a href="../S/7709.html#L86" title="Defined at 86 in src/com/sun/javadoc/RootDoc.java.">classes</a>[i].<a href="../S/1722.html#L483" title="Defined at 483 in src/java/lang/Class.java.">isInstance</a>(<a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>)) <em class="brace">{</em>
<a id="L214" name="L214"></a> 214                         found = <strong class="reserved">true</strong>;
<a id="L215" name="L215"></a> 215                         <strong class="reserved">break</strong>;
<a id="L216" name="L216"></a> 216                     <em class="brace">}</em>
<a id="L217" name="L217"></a> 217                 <em class="brace">}</em>
<a id="L218" name="L218"></a> 218                 <strong class="reserved">if</strong> (!found) <em class="brace">{</em>
<a id="L219" name="L219"></a> 219                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Illegal output type!");
<a id="L220" name="L220"></a> 220                 <em class="brace">}</em>
<a id="L221" name="L221"></a> 221             <em class="brace">}</em>
<a id="L222" name="L222"></a> 222         <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224         <strong class="reserved">this</strong>.<a href="../D/28597.html" title="Multiple defined in 4 places.">output</a> = <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>;
<a id="L225" name="L225"></a> 225     <em class="brace">}</em>
<a id="L226" name="L226"></a> 226 
<div class="comment">
      Returns the <code>ImageOutputStream</code> or other
      <code>Object</code> set by the most recent call to the
      <code>setOutput</code> method.  If no destination has been
      set, <code>null</code> is returned.
      <p> The default implementation returns the value of the
      <code>output</code> instance variable.
      @return the <code>Object</code> that was specified using
      <code>setOutput</code>, or <code>null</code>.
      @see #setOutput</p></div>
<a id="L241" name="L241"></a> 241     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/18182.html" title="Multiple referred from 9 places.">getOutput</a>() <em class="brace">{</em>
<a id="L242" name="L242"></a> 242         <strong class="reserved">return</strong> <a href="../D/28597.html" title="Multiple defined in 4 places.">output</a>;
<a id="L243" name="L243"></a> 243     <em class="brace">}</em>
<a id="L244" name="L244"></a> 244 
<a id="L245" name="L245"></a> 245     <em class="comment">// Localization</em>
<a id="L246" name="L246"></a> 246 
<div class="comment">
      Returns an array of <code>Locale</code>s that may be used to
      localize warning listeners and compression settings.  A return
      value of <code>null</code> indicates that localization is not
      supported.
      <p> The default implementation returns a clone of the
      <code>availableLocales</code> instance variable if it is
      non-<code>null</code>, or else returns <code>null</code>.
      @return an array of <code>Locale</code>s that may be used as
      arguments to <code>setLocale</code>, or <code>null</code>.</p></div>
<a id="L260" name="L260"></a> 260     <strong class="reserved">public</strong> <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>[] <a href="../R/15199.html" title="Multiple referred from 12 places.">getAvailableLocales</a>() <em class="brace">{</em>
<a id="L261" name="L261"></a> 261         <strong class="reserved">return</strong> (availableLocales == <strong class="reserved">null</strong>) ?
<a id="L262" name="L262"></a> 262             <strong class="reserved">null</strong> : (<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>[])availableLocales.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L263" name="L263"></a> 263     <em class="brace">}</em>
<a id="L264" name="L264"></a> 264 
<div class="comment">
      Sets the current <code>Locale</code> of this
      <code>ImageWriter</code> to the given value.  A value of
      <code>null</code> removes any previous setting, and indicates
      that the writer should localize as it sees fit.
      <p> The default implementation checks <code>locale</code>
      against the values returned by
      <code>getAvailableLocales</code>, and sets the
      <code>locale</code> instance variable if it is found.  If
      <code>locale</code> is <code>null</code>, the instance variable
      is set to <code>null</code> without any checking.
      @param locale the desired <code>Locale</code>, or
      <code>null</code>.
      @exception IllegalArgumentException if <code>locale</code> is
      non-<code>null</code> but is not one of the values returned by
      <code>getAvailableLocales</code>.
      @see #getLocale</p></div>
<a id="L287" name="L287"></a> 287     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27688.html" title="Multiple referred from 47 places.">setLocale</a>(<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>) <em class="brace">{</em>
<a id="L288" name="L288"></a> 288         <strong class="reserved">if</strong> (<a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289             <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>[] locales = <a href="../D/17155.html" title="Multiple defined in 13 places.">getAvailableLocales</a>();
<a id="L290" name="L290"></a> 290             <strong class="reserved">boolean</strong> found = <strong class="reserved">false</strong>;
<a id="L291" name="L291"></a> 291             <strong class="reserved">if</strong> (locales != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; locales.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L293" name="L293"></a> 293                     <strong class="reserved">if</strong> (<a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(locales[i])) <em class="brace">{</em>
<a id="L294" name="L294"></a> 294                         found = <strong class="reserved">true</strong>;
<a id="L295" name="L295"></a> 295                         <strong class="reserved">break</strong>;
<a id="L296" name="L296"></a> 296                     <em class="brace">}</em>
<a id="L297" name="L297"></a> 297                 <em class="brace">}</em>
<a id="L298" name="L298"></a> 298             <em class="brace">}</em>
<a id="L299" name="L299"></a> 299             <strong class="reserved">if</strong> (!found) <em class="brace">{</em>
<a id="L300" name="L300"></a> 300                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Invalid locale!");
<a id="L301" name="L301"></a> 301             <em class="brace">}</em>
<a id="L302" name="L302"></a> 302         <em class="brace">}</em>
<a id="L303" name="L303"></a> 303         <strong class="reserved">this</strong>.<a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> = <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>;
<a id="L304" name="L304"></a> 304     <em class="brace">}</em>
<a id="L305" name="L305"></a> 305 
<div class="comment">
      Returns the currently set <code>Locale</code>, or
      <code>null</code> if none has been set.
      <p> The default implementation returns the value of the
      <code>locale</code> instance variable.
      @return the current <code>Locale</code>, or <code>null</code>.
      @see #setLocale</p></div>
<a id="L317" name="L317"></a> 317     <strong class="reserved">public</strong> <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../R/17438.html" title="Multiple referred from 191 places.">getLocale</a>() <em class="brace">{</em>
<a id="L318" name="L318"></a> 318         <strong class="reserved">return</strong> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>;
<a id="L319" name="L319"></a> 319     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320 
<a id="L321" name="L321"></a> 321     <em class="comment">// Write params</em>
<a id="L322" name="L322"></a> 322 
<div class="comment">
      Returns a new <code>ImageWriteParam</code> object of the
      appropriate type for this file format containing default
      values, that is, those values that would be used
      if no <code>ImageWriteParam</code> object were specified.  This
      is useful as a starting point for tweaking just a few parameters
      and otherwise leaving the default settings alone.
      <p> The default implementation constructs and returns a new
      <code>ImageWriteParam</code> object that does not allow tiling,
      progressive encoding, or compression, and that will be
      localized for the current <code>Locale</code> (<i>i.e.</i>,
      what you would get by calling <code>new
      ImageWriteParam(getLocale())</code>.
      </p><p> Individual plug-ins may return an instance of
      <code>ImageWriteParam</code> with additional optional features
      enabled, or they may return an instance of a plug-in specific
      subclass of <code>ImageWriteParam</code>.
      @return a new <code>ImageWriteParam</code> object containing
      default values.</p></div>
<a id="L346" name="L346"></a> 346     <strong class="reserved">public</strong> <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> <a href="../R/16091.html" title="Multiple referred from 3 places.">getDefaultWriteParam</a>() <em class="brace">{</em>
<a id="L347" name="L347"></a> 347         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a>(<a href="../D/20224.html" title="Multiple defined in 51 places.">getLocale</a>());
<a id="L348" name="L348"></a> 348     <em class="brace">}</em>
<a id="L349" name="L349"></a> 349 
<a id="L350" name="L350"></a> 350     <em class="comment">// Metadata</em>
<a id="L351" name="L351"></a> 351 
<div class="comment">
      Returns an <code>IIOMetadata</code> object containing default
      values for encoding a stream of images.  The contents of the
      object may be manipulated using either the XML tree structure
      returned by the <code>IIOMetadata.getAsTree</code> method, an
      <code>IIOMetadataController</code> object, or via plug-in
      specific interfaces, and the resulting data supplied to one of
      the <code>write</code> methods that take a stream metadata
      parameter.
      <p> An optional <code>ImageWriteParam</code> may be supplied
      for cases where it may affect the structure of the stream
      metadata.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> Writers that do not make use of stream metadata
      (<i>e.g.</i>, writers for single-image formats) should return
      <code>null</code>.
      @param param an <code>ImageWriteParam</code> that will be used to
      encode the image, or <code>null</code>.
      @return an <code>IIOMetadata</code> object.</p></div>
<a id="L380" name="L380"></a> 380     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a>
<a id="L381" name="L381"></a> 381         <a href="../R/16081.html" title="Multiple referred from 3 places.">getDefaultStreamMetadata</a>(<a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param);
<a id="L382" name="L382"></a> 382 
<div class="comment">
      Returns an <code>IIOMetadata</code> object containing default
      values for encoding an image of the given type.  The contents
      of the object may be manipulated using either the XML tree
      structure returned by the <code>IIOMetadata.getAsTree</code>
      method, an <code>IIOMetadataController</code> object, or via
      plug-in specific interfaces, and the resulting data supplied to
      one of the <code>write</code> methods that take a stream
      metadata parameter.
      <p> An optional <code>ImageWriteParam</code> may be supplied
      for cases where it may affect the structure of the image
      metadata.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      @param imageType an <code>ImageTypeSpecifier</code> indicating the
      format of the image to be written later.
      @param param an <code>ImageWriteParam</code> that will be used to
      encode the image, or <code>null</code>.
      @return an <code>IIOMetadata</code> object.</p></div>
<a id="L409" name="L409"></a> 409     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a>
<a id="L410" name="L410"></a> 410         <a href="../R/16038.html" title="Multiple referred from 4 places.">getDefaultImageMetadata</a>(<a href="../S/4243.html#L53" title="Defined at 53 in src/javax/imageio/ImageTypeSpecifier.java.">ImageTypeSpecifier</a> imageType,
<a id="L411" name="L411"></a> 411                                 <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param);
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413     <em class="comment">// comment inherited</em>
<a id="L414" name="L414"></a> 414     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> <a href="../S/6838.html#L508" title="Referred from 508 in src/com/sun/imageio/plugins/gif/GIFImageWriter.java.">convertStreamMetadata</a>(<a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> inData,
<a id="L415" name="L415"></a> 415                                                       <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param);
<a id="L416" name="L416"></a> 416 
<a id="L417" name="L417"></a> 417     <em class="comment">// comment inherited</em>
<a id="L418" name="L418"></a> 418     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a>
<a id="L419" name="L419"></a> 419         <a href="../R/12024.html" title="Multiple referred from 3 places.">convertImageMetadata</a>(<a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> inData,
<a id="L420" name="L420"></a> 420                              <a href="../S/4243.html#L53" title="Defined at 53 in src/javax/imageio/ImageTypeSpecifier.java.">ImageTypeSpecifier</a> imageType,
<a id="L421" name="L421"></a> 421                              <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param);
<a id="L422" name="L422"></a> 422 
<a id="L423" name="L423"></a> 423     <em class="comment">// Thumbnails</em>
<a id="L424" name="L424"></a> 424 
<div class="comment">
      Returns the number of thumbnails supported by the format being
      written, given the image type and any additional write
      parameters and metadata objects that will be used during
      encoding.  A return value of <code>-1</code> indicates that
      insufficient information is available.
      <p> An <code>ImageWriteParam</code> may optionally be supplied
      for cases where it may affect thumbnail handling.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> The default implementation returns 0.
      @param imageType an <code>ImageTypeSpecifier</code> indicating
      the type of image to be written, or <code>null</code>.
      @param param the <code>ImageWriteParam</code> that will be used for
      writing, or <code>null</code>.
      @param streamMetadata an <code>IIOMetadata</code> object that will
      be used for writing, or <code>null</code>.
      @param imageMetadata an <code>IIOMetadata</code> object that will
      be used for writing, or <code>null</code>.
      @return the number of thumbnails that may be written given the
      supplied parameters, or <code>-1</code> if insufficient
      information is available.</p></div>
<a id="L455" name="L455"></a> 455     <strong class="reserved">public</strong> <strong class="reserved">int</strong> getNumThumbnailsSupported(<a href="../S/4243.html#L53" title="Defined at 53 in src/javax/imageio/ImageTypeSpecifier.java.">ImageTypeSpecifier</a> imageType,
<a id="L456" name="L456"></a> 456                                          <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param,
<a id="L457" name="L457"></a> 457                                          <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> streamMetadata,
<a id="L458" name="L458"></a> 458                                          <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> imageMetadata) <em class="brace">{</em>
<a id="L459" name="L459"></a> 459         <strong class="reserved">return</strong> 0;
<a id="L460" name="L460"></a> 460     <em class="brace">}</em>
<a id="L461" name="L461"></a> 461 
<div class="comment">
      Returns an array of <code>Dimension</code>s indicating the
      legal size ranges for thumbnail images as they will be encoded
      in the output file or stream.  This information is merely
      advisory; the writer will resize any supplied thumbnails as
      necessary.
      <p> The information is returned as a set of pairs; the first
      element of a pair contains an (inclusive) minimum width and
      height, and the second element contains an (inclusive) maximum
      width and height.  Together, each pair defines a valid range of
      sizes.  To specify a fixed size, the same width and height will
      appear for both elements.  A return value of <code>null</code>
      indicates that the size is arbitrary or unknown.
      </p><p> An <code>ImageWriteParam</code> may optionally be supplied
      for cases where it may affect thumbnail handling.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> The default implementation returns <code>null</code>.
      @param imageType an <code>ImageTypeSpecifier</code> indicating the
      type of image to be written, or <code>null</code>.
      @param param the <code>ImageWriteParam</code> that will be used for
      writing, or <code>null</code>.
      @param streamMetadata an <code>IIOMetadata</code> object that will
      be used for writing, or <code>null</code>.
      @param imageMetadata an <code>IIOMetadata</code> object that will
      be used for writing, or <code>null</code>.
      @return an array of <code>Dimension</code>s with an even length
      of at least two, or <code>null</code>.</p></div>
<a id="L499" name="L499"></a> 499     <strong class="reserved">public</strong> <a href="../S/2344.html#L54" title="Defined at 54 in src/java/awt/Dimension.java.">Dimension</a>[] getPreferredThumbnailSizes(<a href="../S/4243.html#L53" title="Defined at 53 in src/javax/imageio/ImageTypeSpecifier.java.">ImageTypeSpecifier</a> imageType,
<a id="L500" name="L500"></a> 500                                                   <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param,
<a id="L501" name="L501"></a> 501                                                   <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> streamMetadata,
<a id="L502" name="L502"></a> 502                                                   <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> imageMetadata) <em class="brace">{</em>
<a id="L503" name="L503"></a> 503         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L504" name="L504"></a> 504     <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<div class="comment">
      Returns <code>true</code> if the methods that take an
      <code>IIOImage</code> parameter are capable of dealing with a
      <code>Raster</code> (as opposed to <code>RenderedImage</code>)
      source image.  If this method returns <code>false</code>, then
      those methods will throw an
      <code>UnsupportedOperationException</code> if supplied with an
      <code>IIOImage</code> containing a <code>Raster</code>.
      <p> The default implementation returns <code>false</code>.
      @return <code>true</code> if <code>Raster</code> sources are
      supported.</p></div>
<a id="L520" name="L520"></a> 520     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canWriteRasters() <em class="brace">{</em>
<a id="L521" name="L521"></a> 521         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L522" name="L522"></a> 522     <em class="brace">}</em>
<a id="L523" name="L523"></a> 523 
<div class="comment">
      Appends a complete image stream containing a single image and
      associated stream and image metadata and thumbnails to the
      output.  Any necessary header information is included.  If the
      output is an <code>ImageOutputStream</code>, its existing
      contents prior to the current seek position are not affected,
      and need not be readable or writable.
      <p> The output must have been set beforehand using the
      <code>setOutput</code> method.
      </p><p> Stream metadata may optionally be supplied; if it is
      <code>null</code>, default stream metadata will be used.
      </p><p> If <code>canWriteRasters</code> returns <code>true</code>,
      the <code>IIOImage</code> may contain a <code>Raster</code>
      source.  Otherwise, it must contain a
      <code>RenderedImage</code> source.
      </p><p> The supplied thumbnails will be resized if needed, and any
      thumbnails in excess of the supported number will be ignored.
      If the format requires additional thumbnails that are not
      provided, the writer should generate them internally.
      </p><p>  An <code>ImageWriteParam</code> may
      optionally be supplied to control the writing process.  If
      <code>param</code> is <code>null</code>, a default write param
      will be used.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      @param streamMetadata an <code>IIOMetadata</code> object representing
      stream metadata, or <code>null</code> to use default values.
      @param image an <code>IIOImage</code> object containing an
      image, thumbnails, and metadata to be written.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if <code>image</code>
      contains a <code>Raster</code> and <code>canWriteRasters</code>
      returns <code>false</code>.
      @exception IllegalArgumentException if <code>image</code> is
      <code>null</code>.
      @exception IOException if an error occurs during writing.</p></div>
<a id="L575" name="L575"></a> 575     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> streamMetadata,
<a id="L576" name="L576"></a> 576                                <a href="../S/4226.html#L60" title="Defined at 60 in src/javax/imageio/IIOImage.java.">IIOImage</a> image,
<a id="L577" name="L577"></a> 577                                <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L578" name="L578"></a> 578 
<div class="comment">
      Appends a complete image stream containing a single image with
      default metadata and thumbnails to the output.  This method is
      a shorthand for <code>write(null, image, null)</code>.
      @param image an <code>IIOImage</code> object containing an
      image, thumbnails, and metadata to be written.
      @exception IllegalStateException if the output has not
      been set.
      @exception IllegalArgumentException if <code>image</code> is
      <code>null</code>.
      @exception UnsupportedOperationException if <code>image</code>
      contains a <code>Raster</code> and <code>canWriteRasters</code>
      returns <code>false</code>.
      @exception IOException if an error occurs during writing.</div>
<a id="L596" name="L596"></a> 596     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<a href="../S/4226.html#L60" title="Defined at 60 in src/javax/imageio/IIOImage.java.">IIOImage</a> image) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L597" name="L597"></a> 597         <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<strong class="reserved">null</strong>, image, <strong class="reserved">null</strong>);
<a id="L598" name="L598"></a> 598     <em class="brace">}</em>
<a id="L599" name="L599"></a> 599 
<div class="comment">
      Appends a complete image stream consisting of a single image
      with default metadata and thumbnails to the output.  This
      method is a shorthand for <code>write(null, new IIOImage(image,
      null, null), null)</code>.
      @param image a <code>RenderedImage</code> to be written.
      @exception IllegalStateException if the output has not
      been set.
      @exception IllegalArgumentException if <code>image</code> is
      <code>null</code>.
      @exception IOException if an error occurs during writing.</div>
<a id="L614" name="L614"></a> 614     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<a href="../S/2255.html#L48" title="Defined at 48 in src/java/awt/image/RenderedImage.java.">RenderedImage</a> image) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L615" name="L615"></a> 615         <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<strong class="reserved">null</strong>, <strong class="reserved">new</strong> <a href="../S/4226.html#L60" title="Defined at 60 in src/javax/imageio/IIOImage.java.">IIOImage</a>(image, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>), <strong class="reserved">null</strong>);
<a id="L616" name="L616"></a> 616     <em class="brace">}</em>
<a id="L617" name="L617"></a> 617 
<a id="L618" name="L618"></a> 618     <em class="comment">// Check that the output has been set, then throw an</em>
<a id="L619" name="L619"></a> 619     <em class="comment">// UnsupportedOperationException.</em>
<a id="L620" name="L620"></a> 620     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/29788.html" title="Multiple referred from 17 places.">unsupported</a>() <em class="brace">{</em>
<a id="L621" name="L621"></a> 621         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L622" name="L622"></a> 622             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L623" name="L623"></a> 623         <em class="brace">}</em>
<a id="L624" name="L624"></a> 624         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("Unsupported write variant!");
<a id="L625" name="L625"></a> 625     <em class="brace">}</em>
<a id="L626" name="L626"></a> 626 
<a id="L627" name="L627"></a> 627     <em class="comment">// Sequence writes</em>
<a id="L628" name="L628"></a> 628 
<div class="comment">
      Returns <code>true</code> if the writer is able to append an
      image to an image stream that already contains header
      information and possibly prior images.
      <p> If <code>canWriteSequence</code> returns <code>false</code>,
      <code>writeToSequence</code> and <code>endWriteSequence</code>
      will throw an <code>UnsupportedOperationException</code>.
      </p><p> The default implementation returns <code>false</code>.
      @return <code>true</code> if images may be appended sequentially.</p></div>
<a id="L642" name="L642"></a> 642     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canWriteSequence() <em class="brace">{</em>
<a id="L643" name="L643"></a> 643         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L644" name="L644"></a> 644     <em class="brace">}</em>
<a id="L645" name="L645"></a> 645 
<div class="comment">
      Prepares a stream to accept a series of subsequent
      <code>writeToSequence</code> calls, using the provided stream
      metadata object.  The metadata will be written to the stream if
      it should precede the image data.  If the argument is <code>null</code>,
      default stream metadata is used.
      <p> If the output is an <code>ImageOutputStream</code>, the existing
      contents of the output prior to the current seek position are
      flushed, and need not be readable or writable.  If the format
      requires that <code>endWriteSequence</code> be able to rewind to
      patch up the header information, such as for a sequence of images
      in a single TIFF file, then the metadata written by this method
      must remain in a writable portion of the stream.  Other formats
      may flush the stream after this method and after each image.
      </p><p> If <code>canWriteSequence</code> returns <code>false</code>,
      this method will throw an
      <code>UnsupportedOperationException</code>.
      </p><p> The output must have been set beforehand using either
      the <code>setOutput</code> method.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param streamMetadata A stream metadata object, or <code>null</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canWriteSequence</code> returns <code>false</code>.
      @exception IOException if an error occurs writing the stream
      metadata.</p></div>
<a id="L683" name="L683"></a> 683     <strong class="reserved">public</strong> <strong class="reserved">void</strong> prepareWriteSequence(<a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> streamMetadata)
<a id="L684" name="L684"></a> 684         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L685" name="L685"></a> 685         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L686" name="L686"></a> 686     <em class="brace">}</em>
<a id="L687" name="L687"></a> 687 
<div class="comment">
      Appends a single image and possibly associated metadata and
      thumbnails, to the output.  If the output is an
      <code>ImageOutputStream</code>, the existing contents of the
      output prior to the current seek position may be flushed, and
      need not be readable or writable, unless the plug-in needs to
      be able to patch up the header information when
      <code>endWriteSequence</code> is called (<i>e.g.</i> TIFF).
      <p> If <code>canWriteSequence</code> returns <code>false</code>,
      this method will throw an
      <code>UnsupportedOperationException</code>.
      </p><p> The output must have been set beforehand using
      the <code>setOutput</code> method.
      </p><p> <code>prepareWriteSequence</code> must have been called
      beforehand, or an <code>IllegalStateException</code> is thrown.
      </p><p> If <code>canWriteRasters</code> returns <code>true</code>,
      the <code>IIOImage</code> may contain a <code>Raster</code>
      source.  Otherwise, it must contain a
      <code>RenderedImage</code> source.
      </p><p> The supplied thumbnails will be resized if needed, and any
      thumbnails in excess of the supported number will be ignored.
      If the format requires additional thumbnails that are not
      provided, the writer will generate them internally.
      </p><p> An <code>ImageWriteParam</code> may optionally be supplied
      to control the writing process.  If <code>param</code> is
      <code>null</code>, a default write param will be used.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param image an <code>IIOImage</code> object containing an
      image, thumbnails, and metadata to be written.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set, or <code>prepareWriteSequence</code> has not been called.
      @exception UnsupportedOperationException if
      <code>canWriteSequence</code> returns <code>false</code>.
      @exception IllegalArgumentException if <code>image</code> is
      <code>null</code>.
      @exception UnsupportedOperationException if <code>image</code>
      contains a <code>Raster</code> and <code>canWriteRasters</code>
      returns <code>false</code>.
      @exception IOException if an error occurs during writing.</p></div>
<a id="L748" name="L748"></a> 748     <strong class="reserved">public</strong> <strong class="reserved">void</strong> writeToSequence(<a href="../S/4226.html#L60" title="Defined at 60 in src/javax/imageio/IIOImage.java.">IIOImage</a> image, <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param)
<a id="L749" name="L749"></a> 749         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L750" name="L750"></a> 750         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L751" name="L751"></a> 751     <em class="brace">}</em>
<a id="L752" name="L752"></a> 752 
<div class="comment">
      Completes the writing of a sequence of images begun with
      <code>prepareWriteSequence</code>.  Any stream metadata that
      should come at the end of the sequence of images is written out,
      and any header information at the beginning of the sequence is
      patched up if necessary.  If the output is an
      <code>ImageOutputStream</code>, data through the stream metadata
      at the end of the sequence are flushed and need not be readable
      or writable.
      <p> If <code>canWriteSequence</code> returns <code>false</code>,
      this method will throw an
      <code>UnsupportedOperationException</code>.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @exception IllegalStateException if the output has not
      been set, or <code>prepareWriteSequence</code> has not been called.
      @exception UnsupportedOperationException if
      <code>canWriteSequence</code> returns <code>false</code>.
      @exception IOException if an error occurs during writing.</p></div>
<a id="L778" name="L778"></a> 778     <strong class="reserved">public</strong> <strong class="reserved">void</strong> endWriteSequence() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L779" name="L779"></a> 779         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L780" name="L780"></a> 780     <em class="brace">}</em>
<a id="L781" name="L781"></a> 781 
<a id="L782" name="L782"></a> 782     <em class="comment">// Metadata replacement</em>
<a id="L783" name="L783"></a> 783 
<div class="comment">
      Returns <code>true</code> if it is possible to replace the
      stream metadata already present in the output.
      <p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>.
      @return <code>true</code> if replacement of stream metadata is
      allowed.
      @exception IllegalStateException if the output has not
      been set.
      @exception IOException if an I/O error occurs during the query.</p></div>
<a id="L799" name="L799"></a> 799     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canReplaceStreamMetadata() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L800" name="L800"></a> 800         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L802" name="L802"></a> 802         <em class="brace">}</em>
<a id="L803" name="L803"></a> 803         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L804" name="L804"></a> 804     <em class="brace">}</em>
<a id="L805" name="L805"></a> 805 
<div class="comment">
      Replaces the stream metadata in the output with new
      information.  If the output is an
      <code>ImageOutputStream</code>, the prior contents of the
      stream are examined and possibly edited to make room for the
      new data.  All of the prior contents of the output must be
      available for reading and writing.
      <p> If <code>canReplaceStreamMetadata</code> returns
      <code>false</code>, an
      <code>UnsupportedOperationException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param streamMetadata an <code>IIOMetadata</code> object representing
      stream metadata, or <code>null</code> to use default values.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if the
      <code>canReplaceStreamMetadata</code> returns
      <code>false</code>.  modes do not include
      @exception IOException if an error occurs during writing.</p></div>
<a id="L833" name="L833"></a> 833     <strong class="reserved">public</strong> <strong class="reserved">void</strong> replaceStreamMetadata(<a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> streamMetadata)
<a id="L834" name="L834"></a> 834         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L835" name="L835"></a> 835         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L836" name="L836"></a> 836     <em class="brace">}</em>
<a id="L837" name="L837"></a> 837 
<div class="comment">
      Returns <code>true</code> if it is possible to replace the
      image metadata associated with an existing image with index
      <code>imageIndex</code>.  If this method returns
      <code>false</code>, a call to
      <code>replaceImageMetadata(imageIndex)</code> will throw an
      <code>UnsupportedOperationException</code>.
      <p> A writer that does not support any image metadata
      replacement may return <code>false</code> without performing
      bounds checking on the index.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>
      without checking the value of <code>imageIndex</code>.
      @param imageIndex the index of the image whose metadata is to
      be replaced.
      @return <code>true</code> if the image metadata of the given
      image can be replaced.
      @exception IllegalStateException if the output has not
      been set.
      @exception IndexOutOfBoundsException if the writer supports
      image metadata replacement in general, but
      <code>imageIndex</code> is less than 0 or greater than the
      largest available index.
      @exception IOException if an I/O error occurs during the query.</p></div>
<a id="L869" name="L869"></a> 869     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canReplaceImageMetadata(<strong class="reserved">int</strong> imageIndex)
<a id="L870" name="L870"></a> 870         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L871" name="L871"></a> 871         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L872" name="L872"></a> 872             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L873" name="L873"></a> 873         <em class="brace">}</em>
<a id="L874" name="L874"></a> 874         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L875" name="L875"></a> 875     <em class="brace">}</em>
<a id="L876" name="L876"></a> 876 
<div class="comment">
      Replaces the image metadata associated with an existing image.
      <p> If <code>canReplaceImageMetadata(imageIndex)</code> returns
      <code>false</code>, an
      <code>UnsupportedOperationException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param imageIndex the index of the image whose metadata is to
      be replaced.
      @param imageMetadata an <code>IIOMetadata</code> object
      representing image metadata, or <code>null</code>.
      @exception IllegalStateException if the output has not been
      set.
      @exception UnsupportedOperationException if
      <code>canReplaceImageMetadata</code> returns
      <code>false</code>.
      @exception IndexOutOfBoundsException if <code>imageIndex</code>
      is less than 0 or greater than the largest available index.
      @exception IOException if an error occurs during writing.</p></div>
<a id="L903" name="L903"></a> 903     <strong class="reserved">public</strong> <strong class="reserved">void</strong> replaceImageMetadata(<strong class="reserved">int</strong> imageIndex,
<a id="L904" name="L904"></a> 904                                      <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> imageMetadata)
<a id="L905" name="L905"></a> 905         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L906" name="L906"></a> 906         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L907" name="L907"></a> 907     <em class="brace">}</em>
<a id="L908" name="L908"></a> 908 
<a id="L909" name="L909"></a> 909     <em class="comment">// Image insertion</em>
<a id="L910" name="L910"></a> 910 
<div class="comment">
      Returns <code>true</code> if the writer supports the insertion
      of a new image at the given index.  Existing images with
      indices greater than or equal to the insertion index will have
      their indices increased by 1.  A value for
      <code>imageIndex</code> of <code>-1</code> may be used to
      signify an index one larger than the current largest index.
      <p> A writer that does not support any image insertion may
      return <code>false</code> without performing bounds checking on
      the index.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>
      without checking the value of <code>imageIndex</code>.
      @param imageIndex the index at which the image is to be
      inserted.
      @return <code>true</code> if an image may be inserted at the
      given index.
      @exception IllegalStateException if the output has not
      been set.
      @exception IndexOutOfBoundsException if the writer supports
      image insertion in general, but <code>imageIndex</code> is less
      than -1 or greater than the largest available index.
      @exception IOException if an I/O error occurs during the query.</p></div>
<a id="L941" name="L941"></a> 941     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canInsertImage(<strong class="reserved">int</strong> imageIndex) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L942" name="L942"></a> 942         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L943" name="L943"></a> 943             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L944" name="L944"></a> 944         <em class="brace">}</em>
<a id="L945" name="L945"></a> 945         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L946" name="L946"></a> 946     <em class="brace">}</em>
<a id="L947" name="L947"></a> 947 
<div class="comment">
      Inserts a new image into an existing image stream.  Existing
      images with an index greater than <code>imageIndex</code> are
      preserved, and their indices are each increased by 1.  A value
      for <code>imageIndex</code> of -1 may be used to signify an
      index one larger than the previous largest index; that is, it
      will cause the image to be logically appended to the end of the
      sequence.  If the output is an <code>ImageOutputStream</code>,
      the entirety of the stream must be both readable and writeable.
      <p> If <code>canInsertImage(imageIndex)</code> returns
      <code>false</code>, an
      <code>UnsupportedOperationException</code> will be thrown.
      </p><p> An <code>ImageWriteParam</code> may optionally be supplied
      to control the writing process.  If <code>param</code> is
      <code>null</code>, a default write param will be used.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param imageIndex the index at which to write the image.
      @param image an <code>IIOImage</code> object containing an
      image, thumbnails, and metadata to be written.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canInsertImage(imageIndex)</code> returns <code>false</code>.
      @exception IllegalArgumentException if <code>image</code> is
      <code>null</code>.
      @exception IndexOutOfBoundsException if <code>imageIndex</code>
      is less than -1 or greater than the largest available index.
      @exception UnsupportedOperationException if <code>image</code>
      contains a <code>Raster</code> and <code>canWriteRasters</code>
      returns <code>false</code>.
      @exception IOException if an error occurs during writing.</p></div>
<a id="L996" name="L996"></a> 996     <strong class="reserved">public</strong> <strong class="reserved">void</strong> writeInsert(<strong class="reserved">int</strong> imageIndex,
<a id="L997" name="L997"></a> 997                             <a href="../S/4226.html#L60" title="Defined at 60 in src/javax/imageio/IIOImage.java.">IIOImage</a> image,
<a id="L998" name="L998"></a> 998                             <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L999" name="L999"></a> 999         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1000" name="L1000"></a>1000     <em class="brace">}</em>
<a id="L1001" name="L1001"></a>1001 
<a id="L1002" name="L1002"></a>1002     <em class="comment">// Image removal</em>
<a id="L1003" name="L1003"></a>1003 
<div class="comment">
      Returns <code>true</code> if the writer supports the removal
      of an existing image at the given index.  Existing images with
      indices greater than the insertion index will have
      their indices decreased by 1.
      <p> A writer that does not support any image removal may
      return <code>false</code> without performing bounds checking on
      the index.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>
      without checking the value of <code>imageIndex</code>.
      @param imageIndex the index of the image to be removed.
      @return <code>true</code> if it is possible to remove the given
      image.
      @exception IllegalStateException if the output has not
      been set.
      @exception IndexOutOfBoundsException if the writer supports
      image removal in general, but <code>imageIndex</code> is less
      than 0 or greater than the largest available index.
      @exception IOException if an I/O error occurs during the
      query.</p></div>
<a id="L1032" name="L1032"></a>1032     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canRemoveImage(<strong class="reserved">int</strong> imageIndex) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1033" name="L1033"></a>1033         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1034" name="L1034"></a>1034             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L1035" name="L1035"></a>1035         <em class="brace">}</em>
<a id="L1036" name="L1036"></a>1036         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1037" name="L1037"></a>1037     <em class="brace">}</em>
<a id="L1038" name="L1038"></a>1038 
<div class="comment">
      Removes an image from the stream.
      <p> If <code>canRemoveImage(imageIndex)</code> returns false,
      an <code>UnsupportedOperationException</code>will be thrown.
      </p><p> The removal may or may not cause a reduction in the actual
      file size.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param imageIndex the index of the image to be removed.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canRemoveImage(imageIndex)</code> returns <code>false</code>.
      @exception IndexOutOfBoundsException if <code>imageIndex</code>
      is less than 0 or greater than the largest available index.
      @exception IOException if an I/O error occurs during the
      removal.</p></div>
<a id="L1064" name="L1064"></a>1064     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/3169.html#L319" title="Referred from 319 in src/javax/swing/ImageIcon.java.">removeImage</a>(<strong class="reserved">int</strong> imageIndex) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1065" name="L1065"></a>1065         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1066" name="L1066"></a>1066     <em class="brace">}</em>
<a id="L1067" name="L1067"></a>1067 
<a id="L1068" name="L1068"></a>1068     <em class="comment">// Empty images</em>
<a id="L1069" name="L1069"></a>1069 
<div class="comment">
      Returns <code>true</code> if the writer supports the writing of
      a complete image stream consisting of a single image with
      undefined pixel values and associated metadata and thumbnails
      to the output.  The pixel values may be defined by future
      calls to the <code>replacePixels</code> methods.  If the output
      is an <code>ImageOutputStream</code>, its existing contents
      prior to the current seek position are not affected, and need
      not be readable or writable.
      <p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>.
      @return <code>true</code> if the writing of complete image
      stream with contents to be defined later is supported.
      @exception IllegalStateException if the output has not been
      set.
      @exception IOException if an I/O error occurs during the
      query.</p></div>
<a id="L1092" name="L1092"></a>1092     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canWriteEmpty() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1093" name="L1093"></a>1093         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1094" name="L1094"></a>1094             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L1095" name="L1095"></a>1095         <em class="brace">}</em>
<a id="L1096" name="L1096"></a>1096         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1097" name="L1097"></a>1097     <em class="brace">}</em>
<a id="L1098" name="L1098"></a>1098 
<div class="comment">
      Begins the writing of a complete image stream, consisting of a
      single image with undefined pixel values and associated
      metadata and thumbnails, to the output.  The pixel values will
      be defined by future calls to the <code>replacePixels</code>
      methods.  If the output is an <code>ImageOutputStream</code>,
      its existing contents prior to the current seek position are
      not affected, and need not be readable or writable.
      <p> The writing is not complete until a call to
      <code>endWriteEmpty</code> occurs.  Calls to
      <code>prepareReplacePixels</code>, <code>replacePixels</code>,
      and <code>endReplacePixels</code> may occur between calls to
      <code>prepareWriteEmpty</code> and <code>endWriteEmpty</code>.
      However, calls to <code>prepareWriteEmpty</code> cannot be
      nested, and calls to <code>prepareWriteEmpty</code> and
      <code>prepareInsertEmpty</code> may not be interspersed.
      </p><p> If <code>canWriteEmpty</code> returns <code>false</code>,
      an <code>UnsupportedOperationException</code> will be thrown.
      </p><p> An <code>ImageWriteParam</code> may optionally be supplied
      to control the writing process.  If <code>param</code> is
      <code>null</code>, a default write param will be used.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param streamMetadata an <code>IIOMetadata</code> object representing
      stream metadata, or <code>null</code> to use default values.
      @param imageType an <code>ImageTypeSpecifier</code> describing
      the layout of the image.
      @param width the width of the image.
      @param height the height of the image.
      @param imageMetadata an <code>IIOMetadata</code> object
      representing image metadata, or <code>null</code>.
      @param thumbnails a <code>List</code> of
      <code>BufferedImage</code> thumbnails for this image, or
      <code>null</code>.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canWriteEmpty</code> returns <code>false</code>.
      @exception IllegalStateException if a previous call to
      <code>prepareWriteEmpty</code> has been made without a
      corresponding call to <code>endWriteEmpty</code>.
      @exception IllegalStateException if a previous call to
      <code>prepareInsertEmpty</code> has been made without a
      corresponding call to <code>endInsertEmpty</code>.
      @exception IllegalArgumentException if <code>imageType</code>
      is <code>null</code> or <code>thumbnails</code> contains
      <code>null</code> references or objects other than
      <code>BufferedImage</code>s.
      @exception IllegalArgumentException if width or height are less
      than 1.
      @exception IOException if an I/O error occurs during writing.</p></div>
<a id="L1167" name="L1167"></a>1167     <strong class="reserved">public</strong> <strong class="reserved">void</strong> prepareWriteEmpty(<a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> streamMetadata,
<a id="L1168" name="L1168"></a>1168                                   <a href="../S/4243.html#L53" title="Defined at 53 in src/javax/imageio/ImageTypeSpecifier.java.">ImageTypeSpecifier</a> imageType,
<a id="L1169" name="L1169"></a>1169                                   <strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>,
<a id="L1170" name="L1170"></a>1170                                   <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> imageMetadata,
<a id="L1171" name="L1171"></a>1171                                   <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a>&gt; thumbnails,
<a id="L1172" name="L1172"></a>1172                                   <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1173" name="L1173"></a>1173         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1174" name="L1174"></a>1174     <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175 
<div class="comment">
      Completes the writing of a new image that was begun with a
      prior call to <code>prepareWriteEmpty</code>.
      <p> If <code>canWriteEmpty()</code> returns <code>false</code>,
      an <code>UnsupportedOperationException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canWriteEmpty(imageIndex)</code> returns
      <code>false</code>.
      @exception IllegalStateException if a previous call to
      <code>prepareWriteEmpty</code> without a corresponding call to
      <code>endWriteEmpty</code> has not been made.
      @exception IllegalStateException if a previous call to
      <code>prepareInsertEmpty</code> without a corresponding call to
      <code>endInsertEmpty</code> has been made.
      @exception IllegalStateException if a call to
      <code>prepareReiplacePixels</code> has been made without a
      matching call to <code>endReplacePixels</code>.
      @exception IOException if an I/O error occurs during writing.</p></div>
<a id="L1204" name="L1204"></a>1204     <strong class="reserved">public</strong> <strong class="reserved">void</strong> endWriteEmpty() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1205" name="L1205"></a>1205         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1206" name="L1206"></a>1206             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L1207" name="L1207"></a>1207         <em class="brace">}</em>
<a id="L1208" name="L1208"></a>1208         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("No call to prepareWriteEmpty!");
<a id="L1209" name="L1209"></a>1209     <em class="brace">}</em>
<a id="L1210" name="L1210"></a>1210 
<div class="comment">
      Returns <code>true</code> if the writer supports the insertion
      of a new, empty image at the given index.  The pixel values of
      the image are undefined, and may be specified in pieces using
      the <code>replacePixels</code> methods.  Existing images with
      indices greater than or equal to the insertion index will have
      their indices increased by 1.  A value for
      <code>imageIndex</code> of <code>-1</code> may be used to
      signify an index one larger than the current largest index.
      <p> A writer that does not support insertion of empty images
      may return <code>false</code> without performing bounds
      checking on the index.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>
      without checking the value of <code>imageIndex</code>.
      @param imageIndex the index at which the image is to be
      inserted.
      @return <code>true</code> if an empty image may be inserted at
      the given index.
      @exception IllegalStateException if the output has not been
      set.
      @exception IndexOutOfBoundsException if the writer supports
      empty image insertion in general, but <code>imageIndex</code>
      is less than -1 or greater than the largest available index.
      @exception IOException if an I/O error occurs during the
      query.</p></div>
<a id="L1244" name="L1244"></a>1244     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canInsertEmpty(<strong class="reserved">int</strong> imageIndex) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1245" name="L1245"></a>1245         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1246" name="L1246"></a>1246             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L1247" name="L1247"></a>1247         <em class="brace">}</em>
<a id="L1248" name="L1248"></a>1248         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1249" name="L1249"></a>1249     <em class="brace">}</em>
<a id="L1250" name="L1250"></a>1250 
<div class="comment">
      Begins the insertion of a new image with undefined pixel values
      into an existing image stream.  Existing images with an index
      greater than <code>imageIndex</code> are preserved, and their
      indices are each increased by 1.  A value for
      <code>imageIndex</code> of -1 may be used to signify an index
      one larger than the previous largest index; that is, it will
      cause the image to be logically appended to the end of the
      sequence.  If the output is an <code>ImageOutputStream</code>,
      the entirety of the stream must be both readable and writeable.
      <p> The image contents may be
      supplied later using the <code>replacePixels</code> method.
      The insertion is not complete until a call to
      <code>endInsertEmpty</code> occurs.  Calls to
      <code>prepareReplacePixels</code>, <code>replacePixels</code>,
      and <code>endReplacePixels</code> may occur between calls to
      <code>prepareInsertEmpty</code> and
      <code>endInsertEmpty</code>.  However, calls to
      <code>prepareInsertEmpty</code> cannot be nested, and calls to
      <code>prepareWriteEmpty</code> and
      <code>prepareInsertEmpty</code> may not be interspersed.
      </p><p> If <code>canInsertEmpty(imageIndex)</code> returns
      <code>false</code>, an
      <code>UnsupportedOperationException</code> will be thrown.
      </p><p> An <code>ImageWriteParam</code> may optionally be supplied
      to control the writing process.  If <code>param</code> is
      <code>null</code>, a default write param will be used.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param imageIndex the index at which to write the image.
      @param imageType an <code>ImageTypeSpecifier</code> describing
      the layout of the image.
      @param width the width of the image.
      @param height the height of the image.
      @param imageMetadata an <code>IIOMetadata</code> object
      representing image metadata, or <code>null</code>.
      @param thumbnails a <code>List</code> of
      <code>BufferedImage</code> thumbnails for this image, or
      <code>null</code>.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canInsertEmpty(imageIndex)</code> returns
      <code>false</code>.
      @exception IndexOutOfBoundsException if <code>imageIndex</code>
      is less than -1 or greater than the largest available index.
      @exception IllegalStateException if a previous call to
      <code>prepareInsertEmpty</code> has been made without a
      corresponding call to <code>endInsertEmpty</code>.
      @exception IllegalStateException if a previous call to
      <code>prepareWriteEmpty</code> has been made without a
      corresponding call to <code>endWriteEmpty</code>.
      @exception IllegalArgumentException if <code>imageType</code>
      is <code>null</code> or <code>thumbnails</code> contains
      <code>null</code> references or objects other than
      <code>BufferedImage</code>s.
      @exception IllegalArgumentException if width or height are less
      than 1.
      @exception IOException if an I/O error occurs during writing.</p></div>
<a id="L1327" name="L1327"></a>1327     <strong class="reserved">public</strong> <strong class="reserved">void</strong> prepareInsertEmpty(<strong class="reserved">int</strong> imageIndex,
<a id="L1328" name="L1328"></a>1328                                    <a href="../S/4243.html#L53" title="Defined at 53 in src/javax/imageio/ImageTypeSpecifier.java.">ImageTypeSpecifier</a> imageType,
<a id="L1329" name="L1329"></a>1329                                    <strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>,
<a id="L1330" name="L1330"></a>1330                                    <a href="../S/4238.html#L66" title="Defined at 66 in src/javax/imageio/metadata/IIOMetadata.java.">IIOMetadata</a> imageMetadata,
<a id="L1331" name="L1331"></a>1331                                    <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/2258.html#L68" title="Defined at 68 in src/java/awt/image/BufferedImage.java.">BufferedImage</a>&gt; thumbnails,
<a id="L1332" name="L1332"></a>1332                                    <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1333" name="L1333"></a>1333         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1334" name="L1334"></a>1334     <em class="brace">}</em>
<a id="L1335" name="L1335"></a>1335 
<div class="comment">
      Completes the insertion of a new image that was begun with a
      prior call to <code>prepareInsertEmpty</code>.
      <p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canInsertEmpty(imageIndex)</code> returns
      <code>false</code>.
      @exception IllegalStateException if a previous call to
      <code>prepareInsertEmpty</code> without a corresponding call to
      <code>endInsertEmpty</code> has not been made.
      @exception IllegalStateException if a previous call to
      <code>prepareWriteEmpty</code> without a corresponding call to
      <code>endWriteEmpty</code> has been made.
      @exception IllegalStateException if a call to
      <code>prepareReplacePixels</code> has been made without a
      matching call to <code>endReplacePixels</code>.
      @exception IOException if an I/O error occurs during writing.</p></div>
<a id="L1361" name="L1361"></a>1361     <strong class="reserved">public</strong> <strong class="reserved">void</strong> endInsertEmpty() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1362" name="L1362"></a>1362         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1363" name="L1363"></a>1363     <em class="brace">}</em>
<a id="L1364" name="L1364"></a>1364 
<a id="L1365" name="L1365"></a>1365     <em class="comment">// Pixel replacement</em>
<a id="L1366" name="L1366"></a>1366 
<div class="comment">
      Returns <code>true</code> if the writer allows pixels of the
      given image to be replaced using the <code>replacePixels</code>
      methods.
      <p> A writer that does not support any pixel replacement may
      return <code>false</code> without performing bounds checking on
      the index.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise returns <code>false</code>
      without checking the value of <code>imageIndex</code>.
      @param imageIndex the index of the image whose pixels are to be
      replaced.
      @return <code>true</code> if the pixels of the given
      image can be replaced.
      @exception IllegalStateException if the output has not been
      set.
      @exception IndexOutOfBoundsException if the writer supports
      pixel replacement in general, but <code>imageIndex</code> is
      less than 0 or greater than the largest available index.
      @exception IOException if an I/O error occurs during the query.</p></div>
<a id="L1394" name="L1394"></a>1394     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> canReplacePixels(<strong class="reserved">int</strong> imageIndex) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1395" name="L1395"></a>1395         <strong class="reserved">if</strong> (<a href="../D/21268.html" title="Multiple defined in 2 places.">getOutput</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1396" name="L1396"></a>1396             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("getOutput() == null!");
<a id="L1397" name="L1397"></a>1397         <em class="brace">}</em>
<a id="L1398" name="L1398"></a>1398         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1399" name="L1399"></a>1399     <em class="brace">}</em>
<a id="L1400" name="L1400"></a>1400 
<div class="comment">
      Prepares the writer to handle a series of calls to the
      <code>replacePixels</code> methods.  The affected pixel area
      will be clipped against the supplied
      <p> If <code>canReplacePixels</code> returns
      <code>false</code>, and
      <code>UnsupportedOperationException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param imageIndex the index of the image whose pixels are to be
      replaced.
      @param region a <code>Rectangle</code> that will be used to clip
      future pixel regions.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canReplacePixels(imageIndex)</code> returns
      <code>false</code>.
      @exception IndexOutOfBoundsException if <code>imageIndex</code>
      is less than 0 or greater than the largest available index.
      @exception IllegalStateException if there is a previous call to
      <code>prepareReplacePixels</code> without a matching call to
      <code>endReplacePixels</code> (<i>i.e.</i>, nesting is not
      allowed).
      @exception IllegalArgumentException if <code>region</code> is
      <code>null</code> or has a width or height less than 1.
      @exception IOException if an I/O error occurs during the
      preparation.</p></div>
<a id="L1436" name="L1436"></a>1436     <strong class="reserved">public</strong> <strong class="reserved">void</strong> prepareReplacePixels(<strong class="reserved">int</strong> imageIndex,
<a id="L1437" name="L1437"></a>1437                                      <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../S/985.html#L1034" title="Defined at 1034 in src/java/util/regex/Matcher.java.">region</a>)  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1438" name="L1438"></a>1438         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1439" name="L1439"></a>1439     <em class="brace">}</em>
<a id="L1440" name="L1440"></a>1440 
<div class="comment">
      Replaces a portion of an image already present in the output
      with a portion of the given image.  The image data must match,
      or be convertible to, the image layout of the existing image.
      <p> The destination region is specified in the
      <code>param</code> argument, and will be clipped to the image
      boundaries and the region supplied to
      <code>prepareReplacePixels</code>.  At least one pixel of the
      source must not be clipped, or an exception is thrown.
      </p><p> An <code>ImageWriteParam</code> may optionally be supplied
      to control the writing process.  If <code>param</code> is
      <code>null</code>, a default write param will be used.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> This method may only be called after a call to
      <code>prepareReplacePixels</code>, or else an
      <code>IllegalStateException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param image a <code>RenderedImage</code> containing source
      pixels.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canReplacePixels(imageIndex)</code> returns
      <code>false</code>.
      @exception IllegalStateException if there is no previous call to
      <code>prepareReplacePixels</code> without a matching call to
      <code>endReplacePixels</code>.
      @exception IllegalArgumentException if any of the following are true:
      </p><ul><li> <code>image</code> is <code>null</code>.
      </li><li> <code>param</code> is <code>null</code>.
      </li><li> the intersected region does not contain at least one pixel.
      </li><li> the layout of <code>image</code> does not match, or this
      writer cannot convert it to, the existing image layout.
      </li></ul>
      @exception IOException if an I/O error occurs during writing.</div>
<a id="L1494" name="L1494"></a>1494     <strong class="reserved">public</strong> <strong class="reserved">void</strong> replacePixels(<a href="../S/2255.html#L48" title="Defined at 48 in src/java/awt/image/RenderedImage.java.">RenderedImage</a> image, <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param)
<a id="L1495" name="L1495"></a>1495         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1496" name="L1496"></a>1496         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1497" name="L1497"></a>1497     <em class="brace">}</em>
<a id="L1498" name="L1498"></a>1498 
<div class="comment">
      Replaces a portion of an image already present in the output
      with a portion of the given <code>Raster</code>.  The image
      data must match, or be convertible to, the image layout of the
      existing image.
      <p> An <code>ImageWriteParam</code> may optionally be supplied
      to control the writing process.  If <code>param</code> is
      <code>null</code>, a default write param will be used.
      </p><p> The destination region is specified in the
      <code>param</code> argument, and will be clipped to the image
      boundaries and the region supplied to
      <code>prepareReplacePixels</code>.  At least one pixel of the
      source must not be clipped, or an exception is thrown.
      </p><p> If the supplied <code>ImageWriteParam</code> contains
      optional setting values not supported by this writer (<i>e.g.</i>
      progressive encoding or any format-specific settings), they
      will be ignored.
      </p><p> This method may only be called after a call to
      <code>prepareReplacePixels</code>, or else an
      <code>IllegalStateException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @param raster a <code>Raster</code> containing source
      pixels.
      @param param an <code>ImageWriteParam</code>, or
      <code>null</code> to use a default
      <code>ImageWriteParam</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canReplacePixels(imageIndex)</code> returns
      <code>false</code>.
      @exception IllegalStateException if there is no previous call to
      <code>prepareReplacePixels</code> without a matching call to
      <code>endReplacePixels</code>.
      @exception UnsupportedOperationException if
      <code>canWriteRasters</code> returns <code>false</code>.
      @exception IllegalArgumentException if any of the following are true:
      </p><ul><li> <code>raster</code> is <code>null</code>.
      </li><li> <code>param</code> is <code>null</code>.
      </li><li> the intersected region does not contain at least one pixel.
      </li><li> the layout of <code>raster</code> does not match, or this
      writer cannot convert it to, the existing image layout.
      </li></ul>
      @exception IOException if an I/O error occurs during writing.</div>
<a id="L1555" name="L1555"></a>1555     <strong class="reserved">public</strong> <strong class="reserved">void</strong> replacePixels(<a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> raster, <a href="../S/4227.html#L86" title="Defined at 86 in src/javax/imageio/ImageWriteParam.java.">ImageWriteParam</a> param)
<a id="L1556" name="L1556"></a>1556         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1557" name="L1557"></a>1557         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1558" name="L1558"></a>1558     <em class="brace">}</em>
<a id="L1559" name="L1559"></a>1559 
<div class="comment">
      Terminates a sequence of calls to <code>replacePixels</code>.
      <p> If <code>canReplacePixels</code> returns
      <code>false</code>, and
      <code>UnsupportedOperationException</code> will be thrown.
      </p><p> The default implementation throws an
      <code>IllegalStateException</code> if the output is
      <code>null</code>, and otherwise throws an
      <code>UnsupportedOperationException</code>.
      @exception IllegalStateException if the output has not
      been set.
      @exception UnsupportedOperationException if
      <code>canReplacePixels(imageIndex)</code> returns
      <code>false</code>.
      @exception IllegalStateException if there is no previous call
      to <code>prepareReplacePixels</code> without a matching call to
      <code>endReplacePixels</code>.
      @exception IOException if an I/O error occurs during writing.</p></div>
<a id="L1582" name="L1582"></a>1582     <strong class="reserved">public</strong> <strong class="reserved">void</strong> endReplacePixels() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1583" name="L1583"></a>1583         <a href="../D/36014.html" title="Multiple defined in 2 places.">unsupported</a>();
<a id="L1584" name="L1584"></a>1584     <em class="brace">}</em>
<a id="L1585" name="L1585"></a>1585 
<a id="L1586" name="L1586"></a>1586     <em class="comment">// Abort</em>
<a id="L1587" name="L1587"></a>1587 
<div class="comment">
      Requests that any current write operation be aborted.  The
      contents of the output following the abort will be undefined.
      <p> Writers should call <code>clearAbortRequest</code> at the
      beginning of each write operation, and poll the value of
      <code>abortRequested</code> regularly during the write.</p></div>
<a id="L1596" name="L1596"></a>1596     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/9495.html" title="Multiple referred from 10 places.">abort</a>() <em class="brace">{</em>
<a id="L1597" name="L1597"></a>1597         <strong class="reserved">this</strong>.abortFlag = <strong class="reserved">true</strong>;
<a id="L1598" name="L1598"></a>1598     <em class="brace">}</em>
<a id="L1599" name="L1599"></a>1599 
<div class="comment">
      Returns <code>true</code> if a request to abort the current
      write operation has been made since the writer was instantiated or
      <code>clearAbortRequest</code> was called.
      @return <code>true</code> if the current write operation should
      be aborted.
      @see #abort
      @see #clearAbortRequest</div>
<a id="L1611" name="L1611"></a>1611     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">boolean</strong> <a href="../R/9497.html" title="Multiple referred from 42 places.">abortRequested</a>() <em class="brace">{</em>
<a id="L1612" name="L1612"></a>1612         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.abortFlag;
<a id="L1613" name="L1613"></a>1613     <em class="brace">}</em>
<a id="L1614" name="L1614"></a>1614 
<div class="comment">
      Clears any previous abort request.  After this method has been
      called, <code>abortRequested</code> will return
      <code>false</code>.
      @see #abort
      @see #abortRequested</div>
<a id="L1623" name="L1623"></a>1623     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/11499.html" title="Multiple referred from 12 places.">clearAbortRequest</a>() <em class="brace">{</em>
<a id="L1624" name="L1624"></a>1624         <strong class="reserved">this</strong>.abortFlag = <strong class="reserved">false</strong>;
<a id="L1625" name="L1625"></a>1625     <em class="brace">}</em>
<a id="L1626" name="L1626"></a>1626 
<a id="L1627" name="L1627"></a>1627     <em class="comment">// Listeners</em>
<a id="L1628" name="L1628"></a>1628 
<div class="comment">
      Adds an <code>IIOWriteWarningListener</code> to the list of
      registered warning listeners.  If <code>listener</code> is
      <code>null</code>, no exception will be thrown and no action
      will be taken.  Messages sent to the given listener will be
      localized, if possible, to match the current
      <code>Locale</code>.  If no <code>Locale</code> has been set,
      warning messages may be localized as the writer sees fit.
      @param listener an <code>IIOWriteWarningListener</code> to be
      registered.
      @see #removeIIOWriteWarningListener</div>
<a id="L1643" name="L1643"></a>1643     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6836.html#L1343" title="Referred from 1343 in src/com/sun/imageio/plugins/bmp/BMPImageWriter.java.">addIIOWriteWarningListener</a>(<a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a> listener) <em class="brace">{</em>
<a id="L1644" name="L1644"></a>1644         <strong class="reserved">if</strong> (listener == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1645" name="L1645"></a>1645             <strong class="reserved">return</strong>;
<a id="L1646" name="L1646"></a>1646         <em class="brace">}</em>
<a id="L1647" name="L1647"></a>1647         warningListeners = <a href="../S/4230.html#L73" title="Defined at 73 in src/javax/imageio/ImageReader.java.">ImageReader</a>.<a href="../S/4230.html#L1800" title="Defined at 1800 in src/javax/imageio/ImageReader.java.">addToList</a>(warningListeners, listener);
<a id="L1648" name="L1648"></a>1648         warningLocales = <a href="../S/4230.html#L73" title="Defined at 73 in src/javax/imageio/ImageReader.java.">ImageReader</a>.<a href="../S/4230.html#L1800" title="Defined at 1800 in src/javax/imageio/ImageReader.java.">addToList</a>(warningLocales, <a href="../D/20224.html" title="Multiple defined in 51 places.">getLocale</a>());
<a id="L1649" name="L1649"></a>1649     <em class="brace">}</em>
<a id="L1650" name="L1650"></a>1650 
<div class="comment">
      Removes an <code>IIOWriteWarningListener</code> from the list
      of registered warning listeners.  If the listener was not
      previously registered, or if <code>listener</code> is
      <code>null</code>, no exception will be thrown and no action
      will be taken.
      @param listener an <code>IIOWriteWarningListener</code> to be
      deregistered.
      @see #addIIOWriteWarningListener</div>
<a id="L1663" name="L1663"></a>1663     <strong class="reserved">public</strong>
<a id="L1664" name="L1664"></a>1664         <strong class="reserved">void</strong> removeIIOWriteWarningListener(<a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a> listener) <em class="brace">{</em>
<a id="L1665" name="L1665"></a>1665         <strong class="reserved">if</strong> (listener == <strong class="reserved">null</strong> || warningListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1666" name="L1666"></a>1666             <strong class="reserved">return</strong>;
<a id="L1667" name="L1667"></a>1667         <em class="brace">}</em>
<a id="L1668" name="L1668"></a>1668         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = warningListeners.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(listener);
<a id="L1669" name="L1669"></a>1669         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != -1) <em class="brace">{</em>
<a id="L1670" name="L1670"></a>1670             warningListeners.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1671" name="L1671"></a>1671             warningLocales.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1672" name="L1672"></a>1672             <strong class="reserved">if</strong> (warningListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0) <em class="brace">{</em>
<a id="L1673" name="L1673"></a>1673                 warningListeners = <strong class="reserved">null</strong>;
<a id="L1674" name="L1674"></a>1674                 warningLocales = <strong class="reserved">null</strong>;
<a id="L1675" name="L1675"></a>1675             <em class="brace">}</em>
<a id="L1676" name="L1676"></a>1676         <em class="brace">}</em>
<a id="L1677" name="L1677"></a>1677     <em class="brace">}</em>
<a id="L1678" name="L1678"></a>1678 
<div class="comment">
      Removes all currently registered
      <code>IIOWriteWarningListener</code> objects.
      <p> The default implementation sets the
      <code>warningListeners</code> and <code>warningLocales</code>
      instance variables to <code>null</code>.</p></div>
<a id="L1687" name="L1687"></a>1687     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/4231.html#L2015" title="Referred from 2015 in src/javax/imageio/ImageWriter.java.">removeAllIIOWriteWarningListeners</a>() <em class="brace">{</em>
<a id="L1688" name="L1688"></a>1688         <strong class="reserved">this</strong>.warningListeners = <strong class="reserved">null</strong>;
<a id="L1689" name="L1689"></a>1689         <strong class="reserved">this</strong>.warningLocales = <strong class="reserved">null</strong>;
<a id="L1690" name="L1690"></a>1690     <em class="brace">}</em>
<a id="L1691" name="L1691"></a>1691 
<div class="comment">
      Adds an <code>IIOWriteProgressListener</code> to the list of
      registered progress listeners.  If <code>listener</code> is
      <code>null</code>, no exception will be thrown and no action
      will be taken.
      @param listener an <code>IIOWriteProgressListener</code> to be
      registered.
      @see #removeIIOWriteProgressListener</div>
<a id="L1703" name="L1703"></a>1703     <strong class="reserved">public</strong> <strong class="reserved">void</strong>
<a id="L1704" name="L1704"></a>1704         <a href="../S/6836.html#L1337" title="Referred from 1337 in src/com/sun/imageio/plugins/bmp/BMPImageWriter.java.">addIIOWriteProgressListener</a>(<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener) <em class="brace">{</em>
<a id="L1705" name="L1705"></a>1705         <strong class="reserved">if</strong> (listener == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1706" name="L1706"></a>1706             <strong class="reserved">return</strong>;
<a id="L1707" name="L1707"></a>1707         <em class="brace">}</em>
<a id="L1708" name="L1708"></a>1708         progressListeners = <a href="../S/4230.html#L73" title="Defined at 73 in src/javax/imageio/ImageReader.java.">ImageReader</a>.<a href="../S/4230.html#L1800" title="Defined at 1800 in src/javax/imageio/ImageReader.java.">addToList</a>(progressListeners, listener);
<a id="L1709" name="L1709"></a>1709     <em class="brace">}</em>
<a id="L1710" name="L1710"></a>1710 
<div class="comment">
      Removes an <code>IIOWriteProgressListener</code> from the list
      of registered progress listeners.  If the listener was not
      previously registered, or if <code>listener</code> is
      <code>null</code>, no exception will be thrown and no action
      will be taken.
      @param listener an <code>IIOWriteProgressListener</code> to be
      deregistered.
      @see #addIIOWriteProgressListener</div>
<a id="L1723" name="L1723"></a>1723     <strong class="reserved">public</strong> <strong class="reserved">void</strong>
<a id="L1724" name="L1724"></a>1724         removeIIOWriteProgressListener(<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener) <em class="brace">{</em>
<a id="L1725" name="L1725"></a>1725         <strong class="reserved">if</strong> (listener == <strong class="reserved">null</strong> || progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1726" name="L1726"></a>1726             <strong class="reserved">return</strong>;
<a id="L1727" name="L1727"></a>1727         <em class="brace">}</em>
<a id="L1728" name="L1728"></a>1728         progressListeners =
<a id="L1729" name="L1729"></a>1729             <a href="../S/4230.html#L73" title="Defined at 73 in src/javax/imageio/ImageReader.java.">ImageReader</a>.<a href="../S/4230.html#L1811" title="Defined at 1811 in src/javax/imageio/ImageReader.java.">removeFromList</a>(progressListeners, listener);
<a id="L1730" name="L1730"></a>1730     <em class="brace">}</em>
<a id="L1731" name="L1731"></a>1731 
<div class="comment">
      Removes all currently registered
      <code>IIOWriteProgressListener</code> objects.
      <p> The default implementation sets the
      <code>progressListeners</code> instance variable to
      <code>null</code>.</p></div>
<a id="L1740" name="L1740"></a>1740     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/4231.html#L2016" title="Referred from 2016 in src/javax/imageio/ImageWriter.java.">removeAllIIOWriteProgressListeners</a>() <em class="brace">{</em>
<a id="L1741" name="L1741"></a>1741         <strong class="reserved">this</strong>.progressListeners = <strong class="reserved">null</strong>;
<a id="L1742" name="L1742"></a>1742     <em class="brace">}</em>
<a id="L1743" name="L1743"></a>1743 
<div class="comment">
      Broadcasts the start of an image write to all registered
      <code>IIOWriteProgressListener</code>s by calling their
      <code>imageStarted</code> method.  Subclasses may use this
      method as a convenience.
      @param imageIndex the index of the image about to be written.</div>
<a id="L1752" name="L1752"></a>1752     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25145.html" title="Multiple referred from 10 places.">processImageStarted</a>(<strong class="reserved">int</strong> imageIndex) <em class="brace">{</em>
<a id="L1753" name="L1753"></a>1753         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1754" name="L1754"></a>1754             <strong class="reserved">return</strong>;
<a id="L1755" name="L1755"></a>1755         <em class="brace">}</em>
<a id="L1756" name="L1756"></a>1756         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1757" name="L1757"></a>1757         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1758" name="L1758"></a>1758             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1759" name="L1759"></a>1759                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1760" name="L1760"></a>1760             listener.<a href="../D/24343.html" title="Multiple defined in 5 places.">imageStarted</a>(<strong class="reserved">this</strong>, imageIndex);
<a id="L1761" name="L1761"></a>1761         <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762     <em class="brace">}</em>
<a id="L1763" name="L1763"></a>1763 
<div class="comment">
      Broadcasts the current percentage of image completion to all
      registered <code>IIOWriteProgressListener</code>s by calling
      their <code>imageProgress</code> method.  Subclasses may use
      this method as a convenience.
      @param percentageDone the current percentage of completion,
      as a <code>float</code>.</div>
<a id="L1773" name="L1773"></a>1773     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25144.html" title="Multiple referred from 33 places.">processImageProgress</a>(<strong class="reserved">float</strong> percentageDone) <em class="brace">{</em>
<a id="L1774" name="L1774"></a>1774         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1775" name="L1775"></a>1775             <strong class="reserved">return</strong>;
<a id="L1776" name="L1776"></a>1776         <em class="brace">}</em>
<a id="L1777" name="L1777"></a>1777         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1778" name="L1778"></a>1778         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1779" name="L1779"></a>1779             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1780" name="L1780"></a>1780                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1781" name="L1781"></a>1781             listener.<a href="../D/24342.html" title="Multiple defined in 5 places.">imageProgress</a>(<strong class="reserved">this</strong>, percentageDone);
<a id="L1782" name="L1782"></a>1782         <em class="brace">}</em>
<a id="L1783" name="L1783"></a>1783     <em class="brace">}</em>
<a id="L1784" name="L1784"></a>1784 
<div class="comment">
      Broadcasts the completion of an image write to all registered
      <code>IIOWriteProgressListener</code>s by calling their
      <code>imageComplete</code> method.  Subclasses may use this
      method as a convenience.</div>
<a id="L1791" name="L1791"></a>1791     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25143.html" title="Multiple referred from 12 places.">processImageComplete</a>() <em class="brace">{</em>
<a id="L1792" name="L1792"></a>1792         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1793" name="L1793"></a>1793             <strong class="reserved">return</strong>;
<a id="L1794" name="L1794"></a>1794         <em class="brace">}</em>
<a id="L1795" name="L1795"></a>1795         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1796" name="L1796"></a>1796         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1797" name="L1797"></a>1797             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1798" name="L1798"></a>1798                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1799" name="L1799"></a>1799             listener.<a href="../D/24339.html" title="Multiple defined in 9 places.">imageComplete</a>(<strong class="reserved">this</strong>);
<a id="L1800" name="L1800"></a>1800         <em class="brace">}</em>
<a id="L1801" name="L1801"></a>1801     <em class="brace">}</em>
<a id="L1802" name="L1802"></a>1802 
<div class="comment">
      Broadcasts the start of a thumbnail write to all registered
      <code>IIOWriteProgressListener</code>s by calling their
      <code>thumbnailStarted</code> method.  Subclasses may use this
      method as a convenience.
      @param imageIndex the index of the image associated with the
      thumbnail.
      @param thumbnailIndex the index of the thumbnail.</div>
<a id="L1813" name="L1813"></a>1813     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25193.html" title="Multiple referred from 2 places.">processThumbnailStarted</a>(<strong class="reserved">int</strong> imageIndex,
<a id="L1814" name="L1814"></a>1814                                            <strong class="reserved">int</strong> thumbnailIndex) <em class="brace">{</em>
<a id="L1815" name="L1815"></a>1815         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1816" name="L1816"></a>1816             <strong class="reserved">return</strong>;
<a id="L1817" name="L1817"></a>1817         <em class="brace">}</em>
<a id="L1818" name="L1818"></a>1818         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1819" name="L1819"></a>1819         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1820" name="L1820"></a>1820             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1821" name="L1821"></a>1821                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1822" name="L1822"></a>1822             listener.<a href="../D/35319.html" title="Multiple defined in 7 places.">thumbnailStarted</a>(<strong class="reserved">this</strong>, imageIndex, thumbnailIndex);
<a id="L1823" name="L1823"></a>1823         <em class="brace">}</em>
<a id="L1824" name="L1824"></a>1824     <em class="brace">}</em>
<a id="L1825" name="L1825"></a>1825 
<div class="comment">
      Broadcasts the current percentage of thumbnail completion to
      all registered <code>IIOWriteProgressListener</code>s by calling
      their <code>thumbnailProgress</code> method.  Subclasses may
      use this method as a convenience.
      @param percentageDone the current percentage of completion,
      as a <code>float</code>.</div>
<a id="L1835" name="L1835"></a>1835     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25192.html" title="Multiple referred from 2 places.">processThumbnailProgress</a>(<strong class="reserved">float</strong> percentageDone) <em class="brace">{</em>
<a id="L1836" name="L1836"></a>1836         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1837" name="L1837"></a>1837             <strong class="reserved">return</strong>;
<a id="L1838" name="L1838"></a>1838         <em class="brace">}</em>
<a id="L1839" name="L1839"></a>1839         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1840" name="L1840"></a>1840         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1841" name="L1841"></a>1841             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1842" name="L1842"></a>1842                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1843" name="L1843"></a>1843             listener.<a href="../D/35318.html" title="Multiple defined in 7 places.">thumbnailProgress</a>(<strong class="reserved">this</strong>, percentageDone);
<a id="L1844" name="L1844"></a>1844         <em class="brace">}</em>
<a id="L1845" name="L1845"></a>1845     <em class="brace">}</em>
<a id="L1846" name="L1846"></a>1846 
<div class="comment">
      Broadcasts the completion of a thumbnail write to all registered
      <code>IIOWriteProgressListener</code>s by calling their
      <code>thumbnailComplete</code> method.  Subclasses may use this
      method as a convenience.</div>
<a id="L1853" name="L1853"></a>1853     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25191.html" title="Multiple referred from 2 places.">processThumbnailComplete</a>() <em class="brace">{</em>
<a id="L1854" name="L1854"></a>1854         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1855" name="L1855"></a>1855             <strong class="reserved">return</strong>;
<a id="L1856" name="L1856"></a>1856         <em class="brace">}</em>
<a id="L1857" name="L1857"></a>1857         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1858" name="L1858"></a>1858         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1859" name="L1859"></a>1859             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1860" name="L1860"></a>1860                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1861" name="L1861"></a>1861             listener.<a href="../D/35315.html" title="Multiple defined in 7 places.">thumbnailComplete</a>(<strong class="reserved">this</strong>);
<a id="L1862" name="L1862"></a>1862         <em class="brace">}</em>
<a id="L1863" name="L1863"></a>1863     <em class="brace">}</em>
<a id="L1864" name="L1864"></a>1864 
<div class="comment">
      Broadcasts that the write has been aborted to all registered
      <code>IIOWriteProgressListener</code>s by calling their
      <code>writeAborted</code> method.  Subclasses may use this
      method as a convenience.</div>
<a id="L1871" name="L1871"></a>1871     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25201.html" title="Multiple referred from 7 places.">processWriteAborted</a>() <em class="brace">{</em>
<a id="L1872" name="L1872"></a>1872         <strong class="reserved">if</strong> (progressListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1873" name="L1873"></a>1873             <strong class="reserved">return</strong>;
<a id="L1874" name="L1874"></a>1874         <em class="brace">}</em>
<a id="L1875" name="L1875"></a>1875         <strong class="reserved">int</strong> numListeners = progressListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1876" name="L1876"></a>1876         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1877" name="L1877"></a>1877             <a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a> listener =
<a id="L1878" name="L1878"></a>1878                 (<a href="../S/4232.html#L38" title="Defined at 38 in src/javax/imageio/event/IIOWriteProgressListener.java.">IIOWriteProgressListener</a>)progressListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1879" name="L1879"></a>1879             listener.<a href="../D/36971.html" title="Multiple defined in 2 places.">writeAborted</a>(<strong class="reserved">this</strong>);
<a id="L1880" name="L1880"></a>1880         <em class="brace">}</em>
<a id="L1881" name="L1881"></a>1881     <em class="brace">}</em>
<a id="L1882" name="L1882"></a>1882 
<div class="comment">
      Broadcasts a warning message to all registered
      <code>IIOWriteWarningListener</code>s by calling their
      <code>warningOccurred</code> method.  Subclasses may use this
      method as a convenience.
      @param imageIndex the index of the image on which the warning
      occurred.
      @param warning the warning message.
      @exception IllegalArgumentException if <code>warning</code>
      is <code>null</code>.</div>
<a id="L1896" name="L1896"></a>1896     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25196.html" title="Multiple referred from 21 places.">processWarningOccurred</a>(<strong class="reserved">int</strong> imageIndex,
<a id="L1897" name="L1897"></a>1897                                           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>) <em class="brace">{</em>
<a id="L1898" name="L1898"></a>1898         <strong class="reserved">if</strong> (warningListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1899" name="L1899"></a>1899             <strong class="reserved">return</strong>;
<a id="L1900" name="L1900"></a>1900         <em class="brace">}</em>
<a id="L1901" name="L1901"></a>1901         <strong class="reserved">if</strong> (<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1902" name="L1902"></a>1902             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("warning == null!");
<a id="L1903" name="L1903"></a>1903         <em class="brace">}</em>
<a id="L1904" name="L1904"></a>1904         <strong class="reserved">int</strong> numListeners = warningListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1905" name="L1905"></a>1905         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1906" name="L1906"></a>1906             <a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a> listener =
<a id="L1907" name="L1907"></a>1907                 (<a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a>)warningListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1908" name="L1908"></a>1908 
<a id="L1909" name="L1909"></a>1909             listener.<a href="../D/36832.html" title="Multiple defined in 4 places.">warningOccurred</a>(<strong class="reserved">this</strong>, imageIndex, <a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>);
<a id="L1910" name="L1910"></a>1910         <em class="brace">}</em>
<a id="L1911" name="L1911"></a>1911     <em class="brace">}</em>
<a id="L1912" name="L1912"></a>1912 
<div class="comment">
      Broadcasts a localized warning message to all registered
      <code>IIOWriteWarningListener</code>s by calling their
      <code>warningOccurred</code> method with a string taken
      from a <code>ResourceBundle</code>.  Subclasses may use this
      method as a convenience.
      @param imageIndex the index of the image on which the warning
      occurred.
      @param baseName the base name of a set of
      <code>ResourceBundle</code>s containing localized warning
      messages.
      @param keyword the keyword used to index the warning message
      within the set of <code>ResourceBundle</code>s.
      @exception IllegalArgumentException if <code>baseName</code>
      is <code>null</code>.
      @exception IllegalArgumentException if <code>keyword</code>
      is <code>null</code>.
      @exception IllegalArgumentException if no appropriate
      <code>ResourceBundle</code> may be located.
      @exception IllegalArgumentException if the named resource is
      not found in the located <code>ResourceBundle</code>.
      @exception IllegalArgumentException if the object retrieved
      from the <code>ResourceBundle</code> is not a
      <code>String</code>.</div>
<a id="L1940" name="L1940"></a>1940     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25196.html" title="Multiple referred from 21 places.">processWarningOccurred</a>(<strong class="reserved">int</strong> imageIndex,
<a id="L1941" name="L1941"></a>1941                                           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/11780.html" title="Multiple defined in 2 places.">baseName</a>,
<a id="L1942" name="L1942"></a>1942                                           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keyword) <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943         <strong class="reserved">if</strong> (warningListeners == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1944" name="L1944"></a>1944             <strong class="reserved">return</strong>;
<a id="L1945" name="L1945"></a>1945         <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946         <strong class="reserved">if</strong> (<a href="../D/11780.html" title="Multiple defined in 2 places.">baseName</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1947" name="L1947"></a>1947             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("baseName == null!");
<a id="L1948" name="L1948"></a>1948         <em class="brace">}</em>
<a id="L1949" name="L1949"></a>1949         <strong class="reserved">if</strong> (keyword == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1950" name="L1950"></a>1950             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("keyword == null!");
<a id="L1951" name="L1951"></a>1951         <em class="brace">}</em>
<a id="L1952" name="L1952"></a>1952         <strong class="reserved">int</strong> numListeners = warningListeners.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1953" name="L1953"></a>1953         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numListeners; i++) <em class="brace">{</em>
<a id="L1954" name="L1954"></a>1954             <a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a> listener =
<a id="L1955" name="L1955"></a>1955                 (<a href="../S/4236.html#L46" title="Defined at 46 in src/javax/imageio/event/IIOWriteWarningListener.java.">IIOWriteWarningListener</a>)warningListeners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1956" name="L1956"></a>1956             <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> = (<a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>)warningLocales.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L1957" name="L1957"></a>1957             <strong class="reserved">if</strong> (<a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1958" name="L1958"></a>1958                 <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> = <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>();
<a id="L1959" name="L1959"></a>1959             <em class="brace">}</em>
<a id="L1960" name="L1960"></a>1960 
<div class="comment">
              If an applet supplies an implementation of ImageWriter and
              resource bundles, then the resource bundle will need to be
              accessed via the applet class loader. So first try the context
              class loader to locate the resource bundle.
              If that throws MissingResourceException, then try the
              system class loader.</div>
<a id="L1969" name="L1969"></a>1969             <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> loader = (<a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a>)
<a id="L1970" name="L1970"></a>1970                 <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.<a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L1971" name="L1971"></a>1971                    <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.<a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>() <em class="brace">{</em>
<a id="L1972" name="L1972"></a>1972                       <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L1973" name="L1973"></a>1973                         <strong class="reserved">return</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>().<a href="../D/17977.html" title="Multiple defined in 21 places.">getContextClassLoader</a>();
<a id="L1974" name="L1974"></a>1974                       <em class="brace">}</em>
<a id="L1975" name="L1975"></a>1975                 <em class="brace">}</em>);
<a id="L1976" name="L1976"></a>1976 
<a id="L1977" name="L1977"></a>1977             <a href="../S/853.html#L287" title="Defined at 287 in src/java/util/ResourceBundle.java.">ResourceBundle</a> bundle = <strong class="reserved">null</strong>;
<a id="L1978" name="L1978"></a>1978             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1979" name="L1979"></a>1979                 bundle = <a href="../S/853.html#L287" title="Defined at 287 in src/java/util/ResourceBundle.java.">ResourceBundle</a>.<a href="../D/17375.html" title="Multiple defined in 6 places.">getBundle</a>(<a href="../D/11780.html" title="Multiple defined in 2 places.">baseName</a>, <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>, loader);
<a id="L1980" name="L1980"></a>1980             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/845.html#L51" title="Defined at 51 in src/java/util/MissingResourceException.java.">MissingResourceException</a> mre) <em class="brace">{</em>
<a id="L1981" name="L1981"></a>1981                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1982" name="L1982"></a>1982                     bundle = <a href="../S/853.html#L287" title="Defined at 287 in src/java/util/ResourceBundle.java.">ResourceBundle</a>.<a href="../D/17375.html" title="Multiple defined in 6 places.">getBundle</a>(<a href="../D/11780.html" title="Multiple defined in 2 places.">baseName</a>, <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>);
<a id="L1983" name="L1983"></a>1983                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/845.html#L51" title="Defined at 51 in src/java/util/MissingResourceException.java.">MissingResourceException</a> mre1) <em class="brace">{</em>
<a id="L1984" name="L1984"></a>1984                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Bundle not found!");
<a id="L1985" name="L1985"></a>1985                 <em class="brace">}</em>
<a id="L1986" name="L1986"></a>1986             <em class="brace">}</em>
<a id="L1987" name="L1987"></a>1987 
<a id="L1988" name="L1988"></a>1988             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a> = <strong class="reserved">null</strong>;
<a id="L1989" name="L1989"></a>1989             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1990" name="L1990"></a>1990                 <a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a> = bundle.<a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(keyword);
<a id="L1991" name="L1991"></a>1991             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a> cce) <em class="brace">{</em>
<a id="L1992" name="L1992"></a>1992                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Resource is not a String!");
<a id="L1993" name="L1993"></a>1993             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/845.html#L51" title="Defined at 51 in src/java/util/MissingResourceException.java.">MissingResourceException</a> mre) <em class="brace">{</em>
<a id="L1994" name="L1994"></a>1994                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Resource is missing!");
<a id="L1995" name="L1995"></a>1995             <em class="brace">}</em>
<a id="L1996" name="L1996"></a>1996 
<a id="L1997" name="L1997"></a>1997             listener.<a href="../D/36832.html" title="Multiple defined in 4 places.">warningOccurred</a>(<strong class="reserved">this</strong>, imageIndex, <a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>);
<a id="L1998" name="L1998"></a>1998         <em class="brace">}</em>
<a id="L1999" name="L1999"></a>1999     <em class="brace">}</em>
<a id="L2000" name="L2000"></a>2000 
<a id="L2001" name="L2001"></a>2001     <em class="comment">// State management</em>
<a id="L2002" name="L2002"></a>2002 
<div class="comment">
      Restores the <code>ImageWriter</code> to its initial state.
      <p> The default implementation calls
      <code>setOutput(null)</code>, <code>setLocale(null)</code>,
      <code>removeAllIIOWriteWarningListeners()</code>,
      <code>removeAllIIOWriteProgressListeners()</code>, and
      <code>clearAbortRequest</code>.</p></div>
<a id="L2012" name="L2012"></a>2012     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <em class="brace">{</em>
<a id="L2013" name="L2013"></a>2013         <a href="../D/33452.html" title="Multiple defined in 7 places.">setOutput</a>(<strong class="reserved">null</strong>);
<a id="L2014" name="L2014"></a>2014         <a href="../D/33132.html" title="Multiple defined in 36 places.">setLocale</a>(<strong class="reserved">null</strong>);
<a id="L2015" name="L2015"></a>2015         <a href="../S/4231.html#L1687" title="Defined at 1687 in src/javax/imageio/ImageWriter.java.">removeAllIIOWriteWarningListeners</a>();
<a id="L2016" name="L2016"></a>2016         <a href="../S/4231.html#L1740" title="Defined at 1740 in src/javax/imageio/ImageWriter.java.">removeAllIIOWriteProgressListeners</a>();
<a id="L2017" name="L2017"></a>2017         <a href="../D/12819.html" title="Multiple defined in 3 places.">clearAbortRequest</a>();
<a id="L2018" name="L2018"></a>2018     <em class="brace">}</em>
<a id="L2019" name="L2019"></a>2019 
<div class="comment">
      Allows any resources held by this object to be released.  The
      result of calling any other method (other than
      <code>finalize</code>) subsequent to a call to this method
      is undefined.
      <p>It is important for applications to call this method when they
      know they will no longer be using this <code>ImageWriter</code>.
      Otherwise, the writer may continue to hold on to resources
      indefinitely.
      </p><p>The default implementation of this method in the superclass does
      nothing.  Subclass implementations should ensure that all resources,
      especially native resources, are released.</p></div>
<a id="L2035" name="L2035"></a>2035     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13337.html" title="Multiple referred from 363 places.">dispose</a>() <em class="brace">{</em>
<a id="L2036" name="L2036"></a>2036     <em class="brace">}</em>
<a id="L2037" name="L2037"></a>2037 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L156">[^]</a><a href="#L2035">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
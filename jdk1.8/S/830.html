<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/PropertyPermission.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L132">[^]</a><a href="#L639">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L132" title="Defined at 132.">init</a></li>
<li><a href="#L181" title="Defined at 181.">implies</a></li>
<li><a href="#L201" title="Defined at 201.">equals</a></li>
<li><a href="#L222" title="Defined at 222.">hashCode</a></li>
<li><a href="#L232" title="Defined at 232.">getMask</a></li>
<li><a href="#L326" title="Defined at 326.">getActions</a></li>
<li><a href="#L352" title="Defined at 352.">getActions</a></li>
<li><a href="#L365" title="Defined at 365.">getMask</a></li>
<li><a href="#L377" title="Defined at 377.">newPermissionCollection</a></li>
<li><a href="#L389" title="Defined at 389.">writeObject</a></li>
<li><a href="#L403" title="Defined at 403.">readObject</a></li>
<li><a href="#L463" title="Defined at 463.">add</a></li>
<li><a href="#L505" title="Defined at 505.">implies</a></li>
<li><a href="#L577" title="Defined at 577.">SuppressWarnings</a></li>
<li><a href="#L578" title="Defined at 578.">elements</a></li>
<li><a href="#L618" title="Defined at 618.">writeObject</a></li>
<li><a href="#L639" title="Defined at 639.">readObject</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.IOException;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.security.*;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.Map;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Collections;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.io.ObjectStreamField;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.io.ObjectOutputStream;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.io.IOException;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> sun.security.util.SecurityConstants;
<a id="L41" name="L41"></a>  41 
<div class="comment">
  This class is for property permissions.
  <p>
  The name is the name of the property ("java.home",
  "os.name", etc). The naming
  convention follows the  hierarchical property naming convention.
  Also, an asterisk
  may appear at the end of the name, following a ".", or by itself, to
  signify a wildcard match. For example: "java.*" and "*" signify a wildcard
  match, while "*java" and "a*b" do not.
  </p><p>
  The actions to be granted are passed to the constructor in a string containing
  a list of one or more comma-separated keywords. The possible keywords are
  "read" and "write". Their meaning is defined as follows:
  </p><dl>
     <dt> read
     </dt><dd> read permission. Allows <code>System.getProperty</code> to
          be called.
     </dd><dt> write
     </dt><dd> write permission. Allows <code>System.setProperty</code> to
          be called.
  </dd></dl>
  <p>
  The actions string is converted to lowercase before processing.
  </p><p>
  Care should be taken before granting code permission to access
  certain system properties.  For example, granting permission to
  access the "java.home" system property gives potentially malevolent
  code sensitive information about the system environment (the Java
  installation directory).  Also, granting permission to access
  the "user.name" and "user.home" system properties gives potentially
  malevolent code sensitive information about the user environment
  (the user's account name and home directory).
  @see java.security.BasicPermission
  @see java.security.Permission
  @see java.security.Permissions
  @see java.security.PermissionCollection
  @see java.lang.SecurityManager
  @author Roland Schemers
  @since 1.2
  @serial exclude</p></div>
<a id="L90" name="L90"></a>  90 
<a id="L91" name="L91"></a>  91 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6324.html" title="Multiple referred from 30 places.">PropertyPermission</a> <strong class="reserved">extends</strong> <a href="../S/1204.html#L69" title="Defined at 69 in src/java/security/BasicPermission.java.">BasicPermission</a> <em class="brace">{</em>
<a id="L92" name="L92"></a>  92 
<div class="comment">
      Read action.</div>
<a id="L96" name="L96"></a>  96     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> READ    = 0x1;
<a id="L97" name="L97"></a>  97 
<div class="comment">
      Write action.</div>
<a id="L101" name="L101"></a> 101     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> WRITE   = 0x2;
<div class="comment">
      All actions (read,write);</div>
<a id="L105" name="L105"></a> 105     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../S/887.html#L55" title="Defined at 55 in src/java/util/stream/MatchOps.java.">ALL</a>     = READ|WRITE;
<div class="comment">
      No actions.</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>    = 0x0;
<a id="L110" name="L110"></a> 110 
<div class="comment">
      The actions mask.</div>
<a id="L115" name="L115"></a> 115     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L116" name="L116"></a> 116 
<div class="comment">
      The actions string.
      @serial</div>
<a id="L122" name="L122"></a> 122     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>; <em class="comment">// Left null as long as possible, then</em>
<a id="L123" name="L123"></a> 123                             <em class="comment">// created and re-used in the getAction function.</em>
<a id="L124" name="L124"></a> 124 
<div class="comment">
      initialize a PropertyPermission object. Common to all constructors.
      Also called during de-serialization.
      @param mask the actions mask to use.</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20537.html" title="Multiple referred from 888 places.">init</a>(<strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>) <em class="brace">{</em>
<a id="L133" name="L133"></a> 133         <strong class="reserved">if</strong> ((<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; <a href="../S/887.html#L55" title="Defined at 55 in src/java/util/stream/MatchOps.java.">ALL</a>) != <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>)
<a id="L134" name="L134"></a> 134             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("invalid actions mask");
<a id="L135" name="L135"></a> 135 
<a id="L136" name="L136"></a> 136         <strong class="reserved">if</strong> (<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> == <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>)
<a id="L137" name="L137"></a> 137             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("invalid actions mask");
<a id="L138" name="L138"></a> 138 
<a id="L139" name="L139"></a> 139         <strong class="reserved">if</strong> (<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() == <strong class="reserved">null</strong>)
<a id="L140" name="L140"></a> 140             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>("name can't be null");
<a id="L141" name="L141"></a> 141 
<a id="L142" name="L142"></a> 142         <strong class="reserved">this</strong>.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L143" name="L143"></a> 143     <em class="brace">}</em>
<a id="L144" name="L144"></a> 144 
<div class="comment">
      Creates a new PropertyPermission object with the specified name.
      The name is the name of the system property, and
      <i>actions</i> contains a comma-separated list of the
      desired actions granted on the property. Possible actions are
      "read" and "write".
      @param name the name of the PropertyPermission.
      @param actions the actions string.
      @throws NullPointerException if <code>name</code> is <code>null</code>.
      @throws IllegalArgumentException if <code>name</code> is empty or if
      <code>actions</code> is invalid.</div>
<a id="L159" name="L159"></a> 159     <strong class="reserved">public</strong> PropertyPermission(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>) <em class="brace">{</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">super</strong>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>);
<a id="L161" name="L161"></a> 161         <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>(<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>(<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>));
<a id="L162" name="L162"></a> 162     <em class="brace">}</em>
<a id="L163" name="L163"></a> 163 
<div class="comment">
      Checks if this PropertyPermission object "implies" the specified
      permission.
      <p>
      More specifically, this method returns true if:
      </p><ul><li> <i>p</i> is an instanceof PropertyPermission,
      </li><li> <i>p</i>'s actions are a subset of this
      object's actions, and
      </li><li> <i>p</i>'s name is implied by this object's
           name. For example, "java.*" implies "java.home".
      </li></ul>
      @param p the permission to check against.
      @return true if the specified permission is implied by this object,
      false if not.</div>
<a id="L181" name="L181"></a> 181     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20435.html" title="Multiple referred from 23 places.">implies</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> p) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182         <strong class="reserved">if</strong> (!(p <strong class="reserved">instanceof</strong> <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>))
<a id="L183" name="L183"></a> 183             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L184" name="L184"></a> 184 
<a id="L185" name="L185"></a> 185         <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a> that = (<a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>) p;
<a id="L186" name="L186"></a> 186 
<a id="L187" name="L187"></a> 187         <em class="comment">// we get the effective mask. i.e., the "and" of this and that.</em>
<a id="L188" name="L188"></a> 188         <em class="comment">// They must be equal to that.mask for implies to return true.</em>
<a id="L189" name="L189"></a> 189 
<a id="L190" name="L190"></a> 190         <strong class="reserved">return</strong> ((<strong class="reserved">this</strong>.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; that.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>) == that.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>) &amp;&amp; <strong class="reserved">super</strong>.<a href="../D/24381.html" title="Multiple defined in 34 places.">implies</a>(that);
<a id="L191" name="L191"></a> 191     <em class="brace">}</em>
<a id="L192" name="L192"></a> 192 
<div class="comment">
      Checks two PropertyPermission objects for equality. Checks that <i>obj</i> is
      a PropertyPermission, and has the same name and actions as this object.
      <p>
      @param obj the object we are testing for equality with this object.
      @return true if obj is a PropertyPermission, and has the same name and
      actions as this PropertyPermission object.</p></div>
<a id="L201" name="L201"></a> 201     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L202" name="L202"></a> 202         <strong class="reserved">if</strong> (obj == <strong class="reserved">this</strong>)
<a id="L203" name="L203"></a> 203             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L204" name="L204"></a> 204 
<a id="L205" name="L205"></a> 205         <strong class="reserved">if</strong> (! (obj <strong class="reserved">instanceof</strong> <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>))
<a id="L206" name="L206"></a> 206             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L207" name="L207"></a> 207 
<a id="L208" name="L208"></a> 208         <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a> that = (<a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>) obj;
<a id="L209" name="L209"></a> 209 
<a id="L210" name="L210"></a> 210         <strong class="reserved">return</strong> (<strong class="reserved">this</strong>.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> == that.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>) &amp;&amp;
<a id="L211" name="L211"></a> 211             (<strong class="reserved">this</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(that.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>()));
<a id="L212" name="L212"></a> 212     <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 
<div class="comment">
      Returns the hash code value for this object.
      The hash code used is the hash code of this permissions name, that is,
      <code>getName().hashCode()</code>, where <code>getName</code> is
      from the Permission superclass.
      @return a hash code value for this object.</div>
<a id="L222" name="L222"></a> 222     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L223" name="L223"></a> 223         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L224" name="L224"></a> 224     <em class="brace">}</em>
<a id="L225" name="L225"></a> 225 
<div class="comment">
      Converts an actions String to an actions mask.
      @param actions the action string.
      @return the actions mask.</div>
<a id="L232" name="L232"></a> 232     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/17558.html" title="Multiple referred from 32 places.">getMask</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>) <em class="brace">{</em>
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = <a href="../D/5884.html" title="Multiple defined in 2 places.">NONE</a>;
<a id="L235" name="L235"></a> 235 
<a id="L236" name="L236"></a> 236         <strong class="reserved">if</strong> (<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L237" name="L237"></a> 237             <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L238" name="L238"></a> 238         <em class="brace">}</em>
<a id="L239" name="L239"></a> 239 
<a id="L240" name="L240"></a> 240         <em class="comment">// Use object identity comparison against known-interned strings for</em>
<a id="L241" name="L241"></a> 241         <em class="comment">// performance benefit (these values are used heavily within the JDK).</em>
<a id="L242" name="L242"></a> 242         <strong class="reserved">if</strong> (<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> == SecurityConstants.PROPERTY_READ_ACTION) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243             <strong class="reserved">return</strong> READ;
<a id="L244" name="L244"></a> 244         <em class="brace">}</em> <strong class="reserved">if</strong> (<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> == SecurityConstants.PROPERTY_WRITE_ACTION) <em class="brace">{</em>
<a id="L245" name="L245"></a> 245             <strong class="reserved">return</strong> WRITE;
<a id="L246" name="L246"></a> 246         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> == SecurityConstants.PROPERTY_RW_ACTION) <em class="brace">{</em>
<a id="L247" name="L247"></a> 247             <strong class="reserved">return</strong> READ|WRITE;
<a id="L248" name="L248"></a> 248         <em class="brace">}</em>
<a id="L249" name="L249"></a> 249 
<a id="L250" name="L250"></a> 250         <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L251" name="L251"></a> 251 
<a id="L252" name="L252"></a> 252         <strong class="reserved">int</strong> i = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1;
<a id="L253" name="L253"></a> 253         <strong class="reserved">if</strong> (i &lt; 0)
<a id="L254" name="L254"></a> 254             <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L255" name="L255"></a> 255 
<a id="L256" name="L256"></a> 256         <strong class="reserved">while</strong> (i != -1) <em class="brace">{</em>
<a id="L257" name="L257"></a> 257             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L258" name="L258"></a> 258 
<a id="L259" name="L259"></a> 259             <em class="comment">// skip whitespace</em>
<a id="L260" name="L260"></a> 260             <strong class="reserved">while</strong> ((i!=-1) &amp;&amp; ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i]) == ' ' ||
<a id="L261" name="L261"></a> 261                                <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\r' ||
<a id="L262" name="L262"></a> 262                                <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\n' ||
<a id="L263" name="L263"></a> 263                                <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\f' ||
<a id="L264" name="L264"></a> 264                                <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\t'))
<a id="L265" name="L265"></a> 265                 i--;
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267             <em class="comment">// check for the known strings</em>
<a id="L268" name="L268"></a> 268             <strong class="reserved">int</strong> matchlen;
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270             <strong class="reserved">if</strong> (i &gt;= 3 &amp;&amp; (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-3] == 'r' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-3] == 'R') &amp;&amp;
<a id="L271" name="L271"></a> 271                           (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-2] == 'e' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-2] == 'E') &amp;&amp;
<a id="L272" name="L272"></a> 272                           (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-1] == 'a' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-1] == 'A') &amp;&amp;
<a id="L273" name="L273"></a> 273                           (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i] == 'd' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i] == 'D'))
<a id="L274" name="L274"></a> 274             <em class="brace">{</em>
<a id="L275" name="L275"></a> 275                 matchlen = 4;
<a id="L276" name="L276"></a> 276                 <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= READ;
<a id="L277" name="L277"></a> 277 
<a id="L278" name="L278"></a> 278             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (i &gt;= 4 &amp;&amp; (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-4] == 'w' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-4] == 'W') &amp;&amp;
<a id="L279" name="L279"></a> 279                                  (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-3] == 'r' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-3] == 'R') &amp;&amp;
<a id="L280" name="L280"></a> 280                                  (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-2] == 'i' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-2] == 'I') &amp;&amp;
<a id="L281" name="L281"></a> 281                                  (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-1] == 't' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-1] == 'T') &amp;&amp;
<a id="L282" name="L282"></a> 282                                  (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i] == 'e' || <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i] == 'E'))
<a id="L283" name="L283"></a> 283             <em class="brace">{</em>
<a id="L284" name="L284"></a> 284                 matchlen = 5;
<a id="L285" name="L285"></a> 285                 <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= WRITE;
<a id="L286" name="L286"></a> 286 
<a id="L287" name="L287"></a> 287             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L288" name="L288"></a> 288                 <em class="comment">// parse error</em>
<a id="L289" name="L289"></a> 289                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L290" name="L290"></a> 290                         "invalid permission: " + <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>);
<a id="L291" name="L291"></a> 291             <em class="brace">}</em>
<a id="L292" name="L292"></a> 292 
<a id="L293" name="L293"></a> 293             <em class="comment">// make sure we didn't just match the tail of a word</em>
<a id="L294" name="L294"></a> 294             <em class="comment">// like "ackbarfaccept".  Also, skip to the comma.</em>
<a id="L295" name="L295"></a> 295             <strong class="reserved">boolean</strong> seencomma = <strong class="reserved">false</strong>;
<a id="L296" name="L296"></a> 296             <strong class="reserved">while</strong> (i &gt;= matchlen &amp;&amp; !seencomma) <em class="brace">{</em>
<a id="L297" name="L297"></a> 297                 <strong class="reserved">switch</strong>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[i-matchlen]) <em class="brace">{</em>
<a id="L298" name="L298"></a> 298                 <strong class="reserved">case</strong> ',':
<a id="L299" name="L299"></a> 299                     seencomma = <strong class="reserved">true</strong>;
<a id="L300" name="L300"></a> 300                     <strong class="reserved">break</strong>;
<a id="L301" name="L301"></a> 301                 <strong class="reserved">case</strong> ' ': <strong class="reserved">case</strong> '\r': <strong class="reserved">case</strong> '\n':
<a id="L302" name="L302"></a> 302                 <strong class="reserved">case</strong> '\f': <strong class="reserved">case</strong> '\t':
<a id="L303" name="L303"></a> 303                     <strong class="reserved">break</strong>;
<a id="L304" name="L304"></a> 304                 <strong class="reserved">default</strong>:
<a id="L305" name="L305"></a> 305                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L306" name="L306"></a> 306                             "invalid permission: " + <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>);
<a id="L307" name="L307"></a> 307                 <em class="brace">}</em>
<a id="L308" name="L308"></a> 308                 i--;
<a id="L309" name="L309"></a> 309             <em class="brace">}</em>
<a id="L310" name="L310"></a> 310 
<a id="L311" name="L311"></a> 311             <em class="comment">// point i at the location of the comma minus one (or -1).</em>
<a id="L312" name="L312"></a> 312             i -= matchlen;
<a id="L313" name="L313"></a> 313         <em class="brace">}</em>
<a id="L314" name="L314"></a> 314 
<a id="L315" name="L315"></a> 315         <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L316" name="L316"></a> 316     <em class="brace">}</em>
<a id="L317" name="L317"></a> 317 
<a id="L318" name="L318"></a> 318 
<div class="comment">
      Return the canonical string representation of the actions.
      Always returns present actions in the following order:
      read, write.
      @return the canonical string representation of the actions.</div>
<a id="L326" name="L326"></a> 326     <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14955.html" title="Multiple referred from 33 places.">getActions</a>(<strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L328" name="L328"></a> 328         <strong class="reserved">boolean</strong> comma = <strong class="reserved">false</strong>;
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330         <strong class="reserved">if</strong> ((<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; READ) == READ) <em class="brace">{</em>
<a id="L331" name="L331"></a> 331             comma = <strong class="reserved">true</strong>;
<a id="L332" name="L332"></a> 332             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("read");
<a id="L333" name="L333"></a> 333         <em class="brace">}</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335         <strong class="reserved">if</strong> ((<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> &amp; WRITE) == WRITE) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336             <strong class="reserved">if</strong> (comma) sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(',');
<a id="L337" name="L337"></a> 337             <strong class="reserved">else</strong> comma = <strong class="reserved">true</strong>;
<a id="L338" name="L338"></a> 338             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("write");
<a id="L339" name="L339"></a> 339         <em class="brace">}</em>
<a id="L340" name="L340"></a> 340         <strong class="reserved">return</strong> sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L341" name="L341"></a> 341     <em class="brace">}</em>
<a id="L342" name="L342"></a> 342 
<div class="comment">
      Returns the "canonical string representation" of the actions.
      That is, this method always returns present actions in the following order:
      read, write. For example, if this PropertyPermission object
      allows both write and read actions, a call to <code>getActions</code>
      will return the string "read,write".
      @return the canonical string representation of the actions.</div>
<a id="L352" name="L352"></a> 352     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14955.html" title="Multiple referred from 33 places.">getActions</a>() <em class="brace">{</em>
<a id="L353" name="L353"></a> 353         <strong class="reserved">if</strong> (<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> == <strong class="reserved">null</strong>)
<a id="L354" name="L354"></a> 354             <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> = <a href="../D/16788.html" title="Multiple defined in 25 places.">getActions</a>(<strong class="reserved">this</strong>.<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>);
<a id="L355" name="L355"></a> 355 
<a id="L356" name="L356"></a> 356         <strong class="reserved">return</strong> <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>;
<a id="L357" name="L357"></a> 357     <em class="brace">}</em>
<a id="L358" name="L358"></a> 358 
<div class="comment">
      Return the current action mask.
      Used by the PropertyPermissionCollection
      @return the actions mask.</div>
<a id="L365" name="L365"></a> 365     <strong class="reserved">int</strong> <a href="../R/17558.html" title="Multiple referred from 32 places.">getMask</a>() <em class="brace">{</em>
<a id="L366" name="L366"></a> 366         <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L367" name="L367"></a> 367     <em class="brace">}</em>
<a id="L368" name="L368"></a> 368 
<div class="comment">
      Returns a new PermissionCollection object for storing
      PropertyPermission objects.
      <p>
      @return a new PermissionCollection object suitable for storing
      PropertyPermissions.</p></div>
<a id="L377" name="L377"></a> 377     <strong class="reserved">public</strong> <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> <a href="../R/23594.html" title="Multiple referred from 3 places.">newPermissionCollection</a>() <em class="brace">{</em>
<a id="L378" name="L378"></a> 378         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/830.html#L425" title="Defined at 425 in src/java/util/PropertyPermission.java.">PropertyPermissionCollection</a>();
<a id="L379" name="L379"></a> 379     <em class="brace">}</em>
<a id="L380" name="L380"></a> 380 
<a id="L381" name="L381"></a> 381 
<a id="L382" name="L382"></a> 382     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 885438825399942851L;
<a id="L383" name="L383"></a> 383 
<div class="comment">
      WriteObject is called to save the state of the PropertyPermission
      to a stream. The actions are serialized, and the superclass
      takes care of the name.</div>
<a id="L389" name="L389"></a> 389     <strong class="reserved">private</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> s)
<a id="L390" name="L390"></a> 390         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L391" name="L391"></a> 391     <em class="brace">{</em>
<a id="L392" name="L392"></a> 392         <em class="comment">// Write out the actions. The superclass takes care of the name</em>
<a id="L393" name="L393"></a> 393         <em class="comment">// call getActions to make sure actions field is initialized</em>
<a id="L394" name="L394"></a> 394         <strong class="reserved">if</strong> (<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> == <strong class="reserved">null</strong>)
<a id="L395" name="L395"></a> 395             <a href="../D/16788.html" title="Multiple defined in 25 places.">getActions</a>();
<a id="L396" name="L396"></a> 396         s.<a href="../D/14752.html" title="Multiple defined in 6 places.">defaultWriteObject</a>();
<a id="L397" name="L397"></a> 397     <em class="brace">}</em>
<a id="L398" name="L398"></a> 398 
<div class="comment">
      readObject is called to restore the state of the PropertyPermission from
      a stream.</div>
<a id="L403" name="L403"></a> 403     <strong class="reserved">private</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L404" name="L404"></a> 404          <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L405" name="L405"></a> 405     <em class="brace">{</em>
<a id="L406" name="L406"></a> 406         <em class="comment">// Read in the action, then initialize the rest</em>
<a id="L407" name="L407"></a> 407         s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L408" name="L408"></a> 408         <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>(<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>(<a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>));
<a id="L409" name="L409"></a> 409     <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 <em class="brace">}</em>
<a id="L411" name="L411"></a> 411 
<div class="comment">
  A PropertyPermissionCollection stores a set of PropertyPermission
  permissions.
  @see java.security.Permission
  @see java.security.Permissions
  @see java.security.PermissionCollection
  @author Roland Schemers
  @serial include</div>
<a id="L425" name="L425"></a> 425 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../S/830.html#L378" title="Referred from 378 in src/java/util/PropertyPermission.java.">PropertyPermissionCollection</a> <strong class="reserved">extends</strong> <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>
<a id="L426" name="L426"></a> 426     <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>
<a id="L427" name="L427"></a> 427 <em class="brace">{</em>
<a id="L428" name="L428"></a> 428 
<div class="comment">
      Key is property name; value is PropertyPermission.
      Not serialized; see serialization section at end of class.</div>
<a id="L433" name="L433"></a> 433     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>&gt; perms;
<a id="L434" name="L434"></a> 434 
<div class="comment">
      Boolean saying if "*" is in the collection.
      @see #serialPersistentFields</div>
<a id="L440" name="L440"></a> 440     <em class="comment">// No sync access; OK for this to be stale.</em>
<a id="L441" name="L441"></a> 441     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> all_allowed;
<a id="L442" name="L442"></a> 442 
<div class="comment">
      Create an empty PropertyPermissionCollection object.</div>
<a id="L446" name="L446"></a> 446     <strong class="reserved">public</strong> PropertyPermissionCollection() <em class="brace">{</em>
<a id="L447" name="L447"></a> 447         perms = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;&gt;(32);     <em class="comment">// Capacity for default policy</em>
<a id="L448" name="L448"></a> 448         all_allowed = <strong class="reserved">false</strong>;
<a id="L449" name="L449"></a> 449     <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<div class="comment">
      Adds a permission to the PropertyPermissions. The key for the hash is
      the name.
      @param permission the Permission object to add.
      @exception IllegalArgumentException - if the permission is not a
                                            PropertyPermission
      @exception SecurityException - if this PropertyPermissionCollection
                                     object has been marked readonly</div>
<a id="L463" name="L463"></a> 463     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> permission) <em class="brace">{</em>
<a id="L464" name="L464"></a> 464         <strong class="reserved">if</strong> (! (permission <strong class="reserved">instanceof</strong> <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>))
<a id="L465" name="L465"></a> 465             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("invalid permission: "+
<a id="L466" name="L466"></a> 466                                                permission);
<a id="L467" name="L467"></a> 467         <strong class="reserved">if</strong> (<a href="../D/26131.html" title="Multiple defined in 90 places.">isReadOnly</a>())
<a id="L468" name="L468"></a> 468             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>(
<a id="L469" name="L469"></a> 469                 "attempt to add a Permission to a readonly PermissionCollection");
<a id="L470" name="L470"></a> 470 
<a id="L471" name="L471"></a> 471         <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a> pp = (<a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>) permission;
<a id="L472" name="L472"></a> 472         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> propName = pp.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L473" name="L473"></a> 473 
<a id="L474" name="L474"></a> 474         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L475" name="L475"></a> 475             <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a> existing = perms.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(propName);
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477             <strong class="reserved">if</strong> (existing != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L478" name="L478"></a> 478                 <strong class="reserved">int</strong> oldMask = existing.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>();
<a id="L479" name="L479"></a> 479                 <strong class="reserved">int</strong> newMask = pp.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>();
<a id="L480" name="L480"></a> 480                 <strong class="reserved">if</strong> (oldMask != newMask) <em class="brace">{</em>
<a id="L481" name="L481"></a> 481                     <strong class="reserved">int</strong> effective = oldMask | newMask;
<a id="L482" name="L482"></a> 482                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a> = <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>.<a href="../D/16788.html" title="Multiple defined in 25 places.">getActions</a>(effective);
<a id="L483" name="L483"></a> 483                     perms.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(propName, <strong class="reserved">new</strong> <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>(propName, <a href="../D/10596.html" title="Multiple defined in 2 places.">actions</a>));
<a id="L484" name="L484"></a> 484                 <em class="brace">}</em>
<a id="L485" name="L485"></a> 485             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L486" name="L486"></a> 486                 perms.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(propName, pp);
<a id="L487" name="L487"></a> 487             <em class="brace">}</em>
<a id="L488" name="L488"></a> 488         <em class="brace">}</em>
<a id="L489" name="L489"></a> 489 
<a id="L490" name="L490"></a> 490         <strong class="reserved">if</strong> (!all_allowed) <em class="brace">{</em>
<a id="L491" name="L491"></a> 491             <strong class="reserved">if</strong> (propName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("*"))
<a id="L492" name="L492"></a> 492                 all_allowed = <strong class="reserved">true</strong>;
<a id="L493" name="L493"></a> 493         <em class="brace">}</em>
<a id="L494" name="L494"></a> 494     <em class="brace">}</em>
<a id="L495" name="L495"></a> 495 
<div class="comment">
      Check and see if this set of permissions implies the permissions
      expressed in "permission".
      @param permission the Permission object to compare
      @return true if "permission" is a proper subset of a permission in
      the set, false if not.</div>
<a id="L505" name="L505"></a> 505     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20435.html" title="Multiple referred from 23 places.">implies</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> permission) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506         <strong class="reserved">if</strong> (! (permission <strong class="reserved">instanceof</strong> <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>))
<a id="L507" name="L507"></a> 507                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L508" name="L508"></a> 508 
<a id="L509" name="L509"></a> 509         <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a> pp = (<a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>) permission;
<a id="L510" name="L510"></a> 510         <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L511" name="L511"></a> 511 
<a id="L512" name="L512"></a> 512         <strong class="reserved">int</strong> desired = pp.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>();
<a id="L513" name="L513"></a> 513         <strong class="reserved">int</strong> effective = 0;
<a id="L514" name="L514"></a> 514 
<a id="L515" name="L515"></a> 515         <em class="comment">// short circuit if the "*" Permission was added</em>
<a id="L516" name="L516"></a> 516         <strong class="reserved">if</strong> (all_allowed) <em class="brace">{</em>
<a id="L517" name="L517"></a> 517             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = perms.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("*");
<a id="L519" name="L519"></a> 519             <em class="brace">}</em>
<a id="L520" name="L520"></a> 520             <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L521" name="L521"></a> 521                 effective |= <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>();
<a id="L522" name="L522"></a> 522                 <strong class="reserved">if</strong> ((effective &amp; desired) == desired)
<a id="L523" name="L523"></a> 523                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L524" name="L524"></a> 524             <em class="brace">}</em>
<a id="L525" name="L525"></a> 525         <em class="brace">}</em>
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527         <em class="comment">// strategy:</em>
<a id="L528" name="L528"></a> 528         <em class="comment">// Check for full match first. Then work our way up the</em>
<a id="L529" name="L529"></a> 529         <em class="comment">// name looking for matches on a.b.*</em>
<a id="L530" name="L530"></a> 530 
<a id="L531" name="L531"></a> 531         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = pp.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L532" name="L532"></a> 532         <em class="comment">//System.out.println("check "+name);</em>
<a id="L533" name="L533"></a> 533 
<a id="L534" name="L534"></a> 534         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L535" name="L535"></a> 535             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = perms.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L536" name="L536"></a> 536         <em class="brace">}</em>
<a id="L537" name="L537"></a> 537 
<a id="L538" name="L538"></a> 538         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L539" name="L539"></a> 539             <em class="comment">// we have a direct hit!</em>
<a id="L540" name="L540"></a> 540             effective |= <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>();
<a id="L541" name="L541"></a> 541             <strong class="reserved">if</strong> ((effective &amp; desired) == desired)
<a id="L542" name="L542"></a> 542                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L543" name="L543"></a> 543         <em class="brace">}</em>
<a id="L544" name="L544"></a> 544 
<a id="L545" name="L545"></a> 545         <em class="comment">// work our way up the tree...</em>
<a id="L546" name="L546"></a> 546         <strong class="reserved">int</strong> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L547" name="L547"></a> 547 
<a id="L548" name="L548"></a> 548         <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-1;
<a id="L549" name="L549"></a> 549 
<a id="L550" name="L550"></a> 550         <strong class="reserved">while</strong> ((<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a> = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>(".", <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>)) != -1) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551 
<a id="L552" name="L552"></a> 552             <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>+1) + "*";
<a id="L553" name="L553"></a> 553             <em class="comment">//System.out.println("check "+name);</em>
<a id="L554" name="L554"></a> 554             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L555" name="L555"></a> 555                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = perms.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L556" name="L556"></a> 556             <em class="brace">}</em>
<a id="L557" name="L557"></a> 557 
<a id="L558" name="L558"></a> 558             <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L559" name="L559"></a> 559                 effective |= <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>();
<a id="L560" name="L560"></a> 560                 <strong class="reserved">if</strong> ((effective &amp; desired) == desired)
<a id="L561" name="L561"></a> 561                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L562" name="L562"></a> 562             <em class="brace">}</em>
<a id="L563" name="L563"></a> 563             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a> -1;
<a id="L564" name="L564"></a> 564         <em class="brace">}</em>
<a id="L565" name="L565"></a> 565 
<a id="L566" name="L566"></a> 566         <em class="comment">// we don't have to check for "*" as it was already checked</em>
<a id="L567" name="L567"></a> 567         <em class="comment">// at the top (all_allowed), so we just return false</em>
<a id="L568" name="L568"></a> 568         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L569" name="L569"></a> 569     <em class="brace">}</em>
<a id="L570" name="L570"></a> 570 
<div class="comment">
      Returns an enumeration of all the PropertyPermission objects in the
      container.
      @return an enumeration of all the PropertyPermission objects.</div>
<a id="L577" name="L577"></a> 577     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L578" name="L578"></a> 578     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <a href="../R/13650.html" title="Multiple referred from 679 places.">elements</a>() <em class="brace">{</em>
<a id="L579" name="L579"></a> 579         <em class="comment">// Convert Iterator of Map values into an Enumeration</em>
<a id="L580" name="L580"></a> 580         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<div class="comment">
              Casting to rawtype since Enumeration<propertypermission>
              cannot be directly cast to Enumeration<permission></permission></propertypermission></div>
<a id="L585" name="L585"></a> 585             <strong class="reserved">return</strong> (<a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>)<a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L5207" title="Defined at 5207 in src/java/util/Collections.java.">enumeration</a>(perms.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>());
<a id="L586" name="L586"></a> 586         <em class="brace">}</em>
<a id="L587" name="L587"></a> 587     <em class="brace">}</em>
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7015263904581634791L;
<a id="L590" name="L590"></a> 590 
<a id="L591" name="L591"></a> 591     <em class="comment">// Need to maintain serialization interoperability with earlier releases,</em>
<a id="L592" name="L592"></a> 592     <em class="comment">// which had the serializable field:</em>
<a id="L593" name="L593"></a> 593     <em class="comment">//</em>
<a id="L594" name="L594"></a> 594     <em class="comment">// Table of permissions.</em>
<a id="L595" name="L595"></a> 595     <em class="comment">//</em>
<a id="L596" name="L596"></a> 596     <em class="comment">// @serial</em>
<a id="L597" name="L597"></a> 597     <em class="comment">//</em>
<a id="L598" name="L598"></a> 598     <em class="comment">// private Hashtable permissions;</em>
<div class="comment">
      @serialField permissions java.util.Hashtable
          A table of the PropertyPermissions.
      @serialField all_allowed boolean
          boolean saying if "*" is in the collection.</div>
<a id="L605" name="L605"></a> 605     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] serialPersistentFields = <em class="brace">{</em>
<a id="L606" name="L606"></a> 606         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("permissions", <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>.<strong class="reserved">class</strong>),
<a id="L607" name="L607"></a> 607         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("all_allowed", <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TYPE),
<a id="L608" name="L608"></a> 608     <em class="brace">}</em>;
<a id="L609" name="L609"></a> 609 
<div class="comment">
      @serialData Default fields.</div>
<div class="comment">
      Writes the contents of the perms field out as a Hashtable for
      serialization compatibility with earlier releases. all_allowed
      unchanged.</div>
<a id="L618" name="L618"></a> 618     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L619" name="L619"></a> 619         <em class="comment">// Don't call out.defaultWriteObject()</em>
<a id="L620" name="L620"></a> 620 
<a id="L621" name="L621"></a> 621         <em class="comment">// Copy perms into a Hashtable</em>
<a id="L622" name="L622"></a> 622         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <a href="../D/29330.html" title="Multiple defined in 4 places.">permissions</a> =
<a id="L623" name="L623"></a> 623             <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;&gt;(perms.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()*2);
<a id="L624" name="L624"></a> 624         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L625" name="L625"></a> 625             <a href="../D/29330.html" title="Multiple defined in 4 places.">permissions</a>.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(perms);
<a id="L626" name="L626"></a> 626         <em class="brace">}</em>
<a id="L627" name="L627"></a> 627 
<a id="L628" name="L628"></a> 628         <em class="comment">// Write out serializable fields</em>
<a id="L629" name="L629"></a> 629         <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<a href="../S/1381.html#L878" title="Defined at 878 in src/java/io/ObjectOutputStream.java.">PutField</a> pfields = <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29995.html" title="Multiple defined in 2 places.">putFields</a>();
<a id="L630" name="L630"></a> 630         pfields.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("all_allowed", all_allowed);
<a id="L631" name="L631"></a> 631         pfields.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("permissions", <a href="../D/29330.html" title="Multiple defined in 4 places.">permissions</a>);
<a id="L632" name="L632"></a> 632         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37065.html" title="Multiple defined in 3 places.">writeFields</a>();
<a id="L633" name="L633"></a> 633     <em class="brace">}</em>
<a id="L634" name="L634"></a> 634 
<div class="comment">
      Reads in a Hashtable of PropertyPermissions and saves them in the
      perms field. Reads in all_allowed.</div>
<a id="L639" name="L639"></a> 639     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>)
<a id="L640" name="L640"></a> 640         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L641" name="L641"></a> 641     <em class="brace">{</em>
<a id="L642" name="L642"></a> 642         <em class="comment">// Don't call defaultReadObject()</em>
<a id="L643" name="L643"></a> 643 
<a id="L644" name="L644"></a> 644         <em class="comment">// Read in serialized fields</em>
<a id="L645" name="L645"></a> 645         <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<a href="../S/1378.html#L1079" title="Defined at 1079 in src/java/io/ObjectInputStream.java.">GetField</a> gfields = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30181.html" title="Multiple defined in 6 places.">readFields</a>();
<a id="L646" name="L646"></a> 646 
<a id="L647" name="L647"></a> 647         <em class="comment">// Get all_allowed</em>
<a id="L648" name="L648"></a> 648         all_allowed = gfields.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("all_allowed", <strong class="reserved">false</strong>);
<a id="L649" name="L649"></a> 649 
<a id="L650" name="L650"></a> 650         <em class="comment">// Get permissions</em>
<a id="L651" name="L651"></a> 651         @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L652" name="L652"></a> 652         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>&gt; <a href="../D/29330.html" title="Multiple defined in 4 places.">permissions</a> =
<a id="L653" name="L653"></a> 653             (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/830.html#L91" title="Defined at 91 in src/java/util/PropertyPermission.java.">PropertyPermission</a>&gt;)gfields.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("permissions", <strong class="reserved">null</strong>);
<a id="L654" name="L654"></a> 654         perms = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;&gt;(<a href="../D/29330.html" title="Multiple defined in 4 places.">permissions</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()*2);
<a id="L655" name="L655"></a> 655         perms.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(<a href="../D/29330.html" title="Multiple defined in 4 places.">permissions</a>);
<a id="L656" name="L656"></a> 656     <em class="brace">}</em>
<a id="L657" name="L657"></a> 657 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L132">[^]</a><a href="#L639">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
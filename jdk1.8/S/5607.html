<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L135">[^]</a><a href="#L398">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L135" title="Defined at 135.">getInstance</a></li>
<li><a href="#L149" title="Defined at 149.">SuppressWarnings</a></li>
<li><a href="#L150" title="Defined at 150.">register</a></li>
<li><a href="#L176" title="Defined at 176.">register</a></li>
<li><a href="#L193" title="Defined at 193.">registerDefaultAlgorithms</a></li>
<li><a href="#L229" title="Defined at 229.">getURI</a></li>
<li><a href="#L238" title="Defined at 238.">getIncludeComments</a></li>
<li><a href="#L254" title="Defined at 254.">canonicalize</a></li>
<li><a href="#L304" title="Defined at 304.">canonicalizeSubtree</a></li>
<li><a href="#L316" title="Defined at 316.">canonicalizeSubtree</a></li>
<li><a href="#L329" title="Defined at 329.">canonicalizeXPathNodeSet</a></li>
<li><a href="#L343" title="Defined at 343.">canonicalizeXPathNodeSet</a></li>
<li><a href="#L357" title="Defined at 357.">canonicalizeXPathNodeSet</a></li>
<li><a href="#L370" title="Defined at 370.">canonicalizeXPathNodeSet</a></li>
<li><a href="#L382" title="Defined at 382.">setWriter</a></li>
<li><a href="#L391" title="Defined at 391.">getImplementingCanonicalizerClass</a></li>
<li><a href="#L398" title="Defined at 398.">notReset</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements. See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership. The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License. You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied. See the License for the
  specific language governing permissions and limitations
  under the License.</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.security.c14n;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.io.ByteArrayInputStream;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.io.InputStream;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.io.OutputStream;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Map;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Set;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentHashMap;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> javax.xml.XMLConstants;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilder;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilderFactory;
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer11_OmitComments;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer11_WithComments;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315ExclOmitComments;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315ExclWithComments;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315OmitComments;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315WithComments;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.implementations.CanonicalizerPhysical;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.exceptions.AlgorithmAlreadyRegisteredException;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.JavaUtils;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> org.xml.sax.InputSource;
<a id="L49" name="L49"></a>  49 
<div class="comment">
  @author Christian Geuer-Pollmann</div>
<a id="L54" name="L54"></a>  54 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1168.html" title="Multiple referred from 69 places.">Canonicalizer</a> <em class="brace">{</em>
<a id="L55" name="L55"></a>  55 
<div class="comment">
     /** The output encoding of canonicalized data */</div>
<a id="L57" name="L57"></a>  57     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ENCODING = "UTF8";
<a id="L58" name="L58"></a>  58 
<div class="comment">
      XPath Expression for selecting every node and continuous comments joined
      in only one node</div>
<a id="L63" name="L63"></a>  63     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> XPATH_C14N_WITH_COMMENTS_SINGLE_NODE =
<a id="L64" name="L64"></a>  64         "(.//. | .//@* | .//namespace::*)";
<a id="L65" name="L65"></a>  65 
<div class="comment">
      The URL defined in XML-SEC Rec for inclusive c14n <b>without</b> comments.</div>
<a id="L69" name="L69"></a>  69     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N_OMIT_COMMENTS =
<a id="L70" name="L70"></a>  70         "http://www.w3.org/TR/2001/REC-xml-c14n-20010315";
<div class="comment">
      The URL defined in XML-SEC Rec for inclusive c14n <b>with</b> comments.</div>
<a id="L74" name="L74"></a>  74     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N_WITH_COMMENTS =
<a id="L75" name="L75"></a>  75         ALGO_ID_C14N_OMIT_COMMENTS + "#WithComments";
<div class="comment">
      The URL defined in XML-SEC Rec for exclusive c14n <b>without</b> comments.</div>
<a id="L79" name="L79"></a>  79     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N_EXCL_OMIT_COMMENTS =
<a id="L80" name="L80"></a>  80         "http://www.w3.org/2001/10/xml-exc-c14n#";
<div class="comment">
      The URL defined in XML-SEC Rec for exclusive c14n <b>with</b> comments.</div>
<a id="L84" name="L84"></a>  84     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N_EXCL_WITH_COMMENTS =
<a id="L85" name="L85"></a>  85         ALGO_ID_C14N_EXCL_OMIT_COMMENTS + "WithComments";
<div class="comment">
      The URI for inclusive c14n 1.1 <b>without</b> comments.</div>
<a id="L89" name="L89"></a>  89     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N11_OMIT_COMMENTS =
<a id="L90" name="L90"></a>  90         "http://www.w3.org/2006/12/xml-c14n11";
<div class="comment">
      The URI for inclusive c14n 1.1 <b>with</b> comments.</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N11_WITH_COMMENTS =
<a id="L95" name="L95"></a>  95         ALGO_ID_C14N11_OMIT_COMMENTS + "#WithComments";
<div class="comment">
      Non-standard algorithm to serialize the physical representation for XML Encryption</div>
<a id="L99" name="L99"></a>  99     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ALGO_ID_C14N_PHYSICAL =
<a id="L100" name="L100"></a> 100         "http://santuario.apache.org/c14n/physical";
<a id="L101" name="L101"></a> 101 
<a id="L102" name="L102"></a> 102     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt;&gt; canonicalizerHash =
<a id="L103" name="L103"></a> 103         <strong class="reserved">new</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt;&gt;();
<a id="L104" name="L104"></a> 104 
<a id="L105" name="L105"></a> 105     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a> canonicalizerSpi;
<a id="L106" name="L106"></a> 106 
<div class="comment">
      Constructor Canonicalizer
      @param algorithmURI
      @throws InvalidCanonicalizerException</div>
<a id="L113" name="L113"></a> 113     <strong class="reserved">private</strong> Canonicalizer(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> algorithmURI) <strong class="reserved">throws</strong> <a href="../S/5622.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/c14n/InvalidCanonicalizerException.java.">InvalidCanonicalizerException</a> <em class="brace">{</em>
<a id="L114" name="L114"></a> 114         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L115" name="L115"></a> 115             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt; implementingClass =
<a id="L116" name="L116"></a> 116                 canonicalizerHash.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(algorithmURI);
<a id="L117" name="L117"></a> 117 
<a id="L118" name="L118"></a> 118             canonicalizerSpi = implementingClass.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L119" name="L119"></a> 119             canonicalizerSpi.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a> = <strong class="reserved">true</strong>;
<a id="L120" name="L120"></a> 120         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L121" name="L121"></a> 121             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> exArgs[] = <em class="brace">{</em> algorithmURI <em class="brace">}</em>;
<a id="L122" name="L122"></a> 122             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5622.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/c14n/InvalidCanonicalizerException.java.">InvalidCanonicalizerException</a>(
<a id="L123" name="L123"></a> 123                 "signature.Canonicalizer.UnknownCanonicalizer", exArgs, e
<a id="L124" name="L124"></a> 124             );
<a id="L125" name="L125"></a> 125         <em class="brace">}</em>
<a id="L126" name="L126"></a> 126     <em class="brace">}</em>
<a id="L127" name="L127"></a> 127 
<div class="comment">
      Method getInstance
      @param algorithmURI
      @return a Canonicalizer instance ready for the job
      @throws InvalidCanonicalizerException</div>
<a id="L135" name="L135"></a> 135     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a> <a href="../R/17115.html" title="Multiple referred from 459 places.">getInstance</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> algorithmURI)
<a id="L136" name="L136"></a> 136         <strong class="reserved">throws</strong> <a href="../S/5622.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/c14n/InvalidCanonicalizerException.java.">InvalidCanonicalizerException</a> <em class="brace">{</em>
<a id="L137" name="L137"></a> 137         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>(algorithmURI);
<a id="L138" name="L138"></a> 138     <em class="brace">}</em>
<a id="L139" name="L139"></a> 139 
<div class="comment">
      Method register
      @param algorithmURI
      @param implementingClass
      @throws AlgorithmAlreadyRegisteredException
      @throws SecurityException if a security manager is installed and the
         caller does not have permission to register the canonicalizer</div>
<a id="L149" name="L149"></a> 149     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L150" name="L150"></a> 150     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/25749.html" title="Multiple referred from 136 places.">register</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> algorithmURI, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> implementingClass)
<a id="L151" name="L151"></a> 151         <strong class="reserved">throws</strong> <a href="../S/5713.html#L25" title="Defined at 25 in src/com/sun/org/apache/xml/internal/security/exceptions/AlgorithmAlreadyRegisteredException.java.">AlgorithmAlreadyRegisteredException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L152" name="L152"></a> 152         <a href="../S/5690.html#L37" title="Defined at 37 in src/com/sun/org/apache/xml/internal/security/utils/JavaUtils.java.">JavaUtils</a>.<a href="../S/5690.html#L164" title="Defined at 164 in src/com/sun/org/apache/xml/internal/security/utils/JavaUtils.java.">checkRegisterPermission</a>();
<a id="L153" name="L153"></a> 153         <em class="comment">// check whether URI is already registered</em>
<a id="L154" name="L154"></a> 154         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt; registeredClass =
<a id="L155" name="L155"></a> 155             canonicalizerHash.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(algorithmURI);
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157         <strong class="reserved">if</strong> (registeredClass != <strong class="reserved">null</strong>)  <em class="brace">{</em>
<a id="L158" name="L158"></a> 158             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> exArgs[] = <em class="brace">{</em> algorithmURI, registeredClass <em class="brace">}</em>;
<a id="L159" name="L159"></a> 159             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5713.html#L25" title="Defined at 25 in src/com/sun/org/apache/xml/internal/security/exceptions/AlgorithmAlreadyRegisteredException.java.">AlgorithmAlreadyRegisteredException</a>("algorithm.alreadyRegistered", exArgs);
<a id="L160" name="L160"></a> 160         <em class="brace">}</em>
<a id="L161" name="L161"></a> 161 
<a id="L162" name="L162"></a> 162         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L163" name="L163"></a> 163             algorithmURI, (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt;)<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(implementingClass)
<a id="L164" name="L164"></a> 164         );
<a id="L165" name="L165"></a> 165     <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<div class="comment">
      Method register
      @param algorithmURI
      @param implementingClass
      @throws AlgorithmAlreadyRegisteredException
      @throws SecurityException if a security manager is installed and the
         caller does not have permission to register the canonicalizer</div>
<a id="L176" name="L176"></a> 176     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/25749.html" title="Multiple referred from 136 places.">register</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> algorithmURI, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt; implementingClass)
<a id="L177" name="L177"></a> 177         <strong class="reserved">throws</strong> <a href="../S/5713.html#L25" title="Defined at 25 in src/com/sun/org/apache/xml/internal/security/exceptions/AlgorithmAlreadyRegisteredException.java.">AlgorithmAlreadyRegisteredException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L178" name="L178"></a> 178         <a href="../S/5690.html#L37" title="Defined at 37 in src/com/sun/org/apache/xml/internal/security/utils/JavaUtils.java.">JavaUtils</a>.<a href="../S/5690.html#L164" title="Defined at 164 in src/com/sun/org/apache/xml/internal/security/utils/JavaUtils.java.">checkRegisterPermission</a>();
<a id="L179" name="L179"></a> 179         <em class="comment">// check whether URI is already registered</em>
<a id="L180" name="L180"></a> 180         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a>&gt; registeredClass = canonicalizerHash.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(algorithmURI);
<a id="L181" name="L181"></a> 181 
<a id="L182" name="L182"></a> 182         <strong class="reserved">if</strong> (registeredClass != <strong class="reserved">null</strong>)  <em class="brace">{</em>
<a id="L183" name="L183"></a> 183             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> exArgs[] = <em class="brace">{</em> algorithmURI, registeredClass <em class="brace">}</em>;
<a id="L184" name="L184"></a> 184             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5713.html#L25" title="Defined at 25 in src/com/sun/org/apache/xml/internal/security/exceptions/AlgorithmAlreadyRegisteredException.java.">AlgorithmAlreadyRegisteredException</a>("algorithm.alreadyRegistered", exArgs);
<a id="L185" name="L185"></a> 185         <em class="brace">}</em>
<a id="L186" name="L186"></a> 186 
<a id="L187" name="L187"></a> 187         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(algorithmURI, implementingClass);
<a id="L188" name="L188"></a> 188     <em class="brace">}</em>
<a id="L189" name="L189"></a> 189 
<div class="comment">
      This method registers the default algorithms.</div>
<a id="L193" name="L193"></a> 193     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/25762.html" title="Multiple referred from 4 places.">registerDefaultAlgorithms</a>() <em class="brace">{</em>
<a id="L194" name="L194"></a> 194         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L195" name="L195"></a> 195             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N_OMIT_COMMENTS,
<a id="L196" name="L196"></a> 196             <a href="../S/5614.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/Canonicalizer20010315OmitComments.java.">Canonicalizer20010315OmitComments</a>.<strong class="reserved">class</strong>
<a id="L197" name="L197"></a> 197         );
<a id="L198" name="L198"></a> 198         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L199" name="L199"></a> 199             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N_WITH_COMMENTS,
<a id="L200" name="L200"></a> 200             <a href="../S/5612.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/Canonicalizer20010315WithComments.java.">Canonicalizer20010315WithComments</a>.<strong class="reserved">class</strong>
<a id="L201" name="L201"></a> 201         );
<a id="L202" name="L202"></a> 202         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L203" name="L203"></a> 203             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N_EXCL_OMIT_COMMENTS,
<a id="L204" name="L204"></a> 204             <a href="../S/5611.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/Canonicalizer20010315ExclOmitComments.java.">Canonicalizer20010315ExclOmitComments</a>.<strong class="reserved">class</strong>
<a id="L205" name="L205"></a> 205         );
<a id="L206" name="L206"></a> 206         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L207" name="L207"></a> 207             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N_EXCL_WITH_COMMENTS,
<a id="L208" name="L208"></a> 208             <a href="../S/5616.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/Canonicalizer20010315ExclWithComments.java.">Canonicalizer20010315ExclWithComments</a>.<strong class="reserved">class</strong>
<a id="L209" name="L209"></a> 209         );
<a id="L210" name="L210"></a> 210         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L211" name="L211"></a> 211             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N11_OMIT_COMMENTS,
<a id="L212" name="L212"></a> 212             <a href="../S/5610.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/Canonicalizer11_OmitComments.java.">Canonicalizer11_OmitComments</a>.<strong class="reserved">class</strong>
<a id="L213" name="L213"></a> 213         );
<a id="L214" name="L214"></a> 214         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L215" name="L215"></a> 215             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N11_WITH_COMMENTS,
<a id="L216" name="L216"></a> 216             <a href="../S/5618.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/Canonicalizer11_WithComments.java.">Canonicalizer11_WithComments</a>.<strong class="reserved">class</strong>
<a id="L217" name="L217"></a> 217         );
<a id="L218" name="L218"></a> 218         canonicalizerHash.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(
<a id="L219" name="L219"></a> 219             <a href="../S/5607.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java.">Canonicalizer</a>.ALGO_ID_C14N_PHYSICAL,
<a id="L220" name="L220"></a> 220             <a href="../S/5617.html#L55" title="Defined at 55 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerPhysical.java.">CanonicalizerPhysical</a>.<strong class="reserved">class</strong>
<a id="L221" name="L221"></a> 221         );
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<div class="comment">
      Method getURI
      @return the URI defined for this c14n instance.</div>
<a id="L229" name="L229"></a> 229     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19651.html" title="Multiple referred from 112 places.">getURI</a>() <em class="brace">{</em>
<a id="L230" name="L230"></a> 230         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/15543.html" title="Multiple defined in 42 places.">engineGetURI</a>();
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
      Method getIncludeComments
      @return true if the c14n respect the comments.</div>
<a id="L238" name="L238"></a> 238     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getIncludeComments() <em class="brace">{</em>
<a id="L239" name="L239"></a> 239         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/15531.html" title="Multiple defined in 8 places.">engineGetIncludeComments</a>();
<a id="L240" name="L240"></a> 240     <em class="brace">}</em>
<a id="L241" name="L241"></a> 241 
<div class="comment">
      This method tries to canonicalize the given bytes. It's possible to even
      canonicalize non-wellformed sequences if they are well-formed after being
      wrapped with a <code>&gt;a&lt;...&gt;/a&lt;</code>.
      @param inputBytes
      @return the result of the canonicalization.
      @throws CanonicalizationException
      @throws java.io.IOException
      @throws javax.xml.parsers.ParserConfigurationException
      @throws org.xml.sax.SAXException</div>
<a id="L254" name="L254"></a> 254     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10955.html" title="Multiple referred from 6 places.">canonicalize</a>(<strong class="reserved">byte</strong>[] inputBytes)
<a id="L255" name="L255"></a> 255         <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.parsers.<a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a>,
<a id="L256" name="L256"></a> 256         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, org.xml.sax.<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>, <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L257" name="L257"></a> 257         <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> bais = <strong class="reserved">new</strong> <a href="../S/1443.html#L44" title="Defined at 44 in src/java/io/ByteArrayInputStream.java.">ByteArrayInputStream</a>(inputBytes);
<a id="L258" name="L258"></a> 258         <a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <strong class="reserved">new</strong> <a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a>(bais);
<a id="L259" name="L259"></a> 259         <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a> dfactory = <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L260" name="L260"></a> 260         dfactory.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.FEATURE_SECURE_PROCESSING, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L261" name="L261"></a> 261 
<a id="L262" name="L262"></a> 262         dfactory.<a href="../D/33323.html" title="Multiple defined in 3 places.">setNamespaceAware</a>(<strong class="reserved">true</strong>);
<a id="L263" name="L263"></a> 263 
<a id="L264" name="L264"></a> 264         <em class="comment">// needs to validate for ID attribute normalization</em>
<a id="L265" name="L265"></a> 265         dfactory.<a href="../D/34262.html" title="Multiple defined in 5 places.">setValidating</a>(<strong class="reserved">true</strong>);
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267         <a href="../S/3846.html#L62" title="Defined at 62 in src/javax/xml/parsers/DocumentBuilder.java.">DocumentBuilder</a> db = dfactory.<a href="../D/27987.html" title="Multiple defined in 2 places.">newDocumentBuilder</a>();
<a id="L268" name="L268"></a> 268 
<div class="comment">
          for some of the test vectors from the specification,
          there has to be a validating parser for ID attributes, default
          attribute values, NMTOKENS, etc.
          Unfortunately, the test vectors do use different DTDs or
          even no DTD. So Xerces 1.3.1 fires many warnings about using
          ErrorHandlers.
          Text from the spec:
          The input octet stream MUST contain a well-formed XML document,
          but the input need not be validated. However, the attribute
          value normalization and entity reference resolution MUST be
          performed in accordance with the behaviors of a validating
          XML processor. As well, nodes for default attributes (declared
          in the ATTLIST with an AttValue but not specified) are created
          in each element. Thus, the declarations in the document type
          declaration are used to help create the canonical form, even
          though the document type declaration is not retained in the
          canonical form.</div>
<a id="L290" name="L290"></a> 290         db.<a href="../D/32615.html" title="Multiple defined in 34 places.">setErrorHandler</a>(<strong class="reserved">new</strong> com.sun.org.apache.xml.internal.security.utils.<a href="../S/5686.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/security/utils/IgnoreAllErrorHandler.java.">IgnoreAllErrorHandler</a>());
<a id="L291" name="L291"></a> 291 
<a id="L292" name="L292"></a> 292         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a> = db.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>);
<a id="L293" name="L293"></a> 293         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/12236.html" title="Multiple defined in 2 places.">canonicalizeSubtree</a>(<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>);
<a id="L294" name="L294"></a> 294     <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<div class="comment">
      Canonicalizes the subtree rooted by <code>node</code>.
      @param node The node to canonicalize
      @return the result of the c14n.
      @throws CanonicalizationException</div>
<a id="L304" name="L304"></a> 304     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10959.html" title="Multiple referred from 11 places.">canonicalizeSubtree</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L305" name="L305"></a> 305         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/15503.html" title="Multiple defined in 10 places.">engineCanonicalizeSubTree</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L306" name="L306"></a> 306     <em class="brace">}</em>
<a id="L307" name="L307"></a> 307 
<div class="comment">
      Canonicalizes the subtree rooted by <code>node</code>.
      @param node
      @param inclusiveNamespaces
      @return the result of the c14n.
      @throws CanonicalizationException</div>
<a id="L316" name="L316"></a> 316     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10959.html" title="Multiple referred from 11 places.">canonicalizeSubtree</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> inclusiveNamespaces)
<a id="L317" name="L317"></a> 317         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L318" name="L318"></a> 318         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/15503.html" title="Multiple defined in 10 places.">engineCanonicalizeSubTree</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, inclusiveNamespaces);
<a id="L319" name="L319"></a> 319     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320 
<div class="comment">
      Canonicalizes an XPath node set. The <code>xpathNodeSet</code> is treated
      as a list of XPath nodes, not as a list of subtrees.
      @param xpathNodeSet
      @return the result of the c14n.
      @throws CanonicalizationException</div>
<a id="L329" name="L329"></a> 329     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10962.html" title="Multiple referred from 4 places.">canonicalizeXPathNodeSet</a>(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> xpathNodeSet)
<a id="L330" name="L330"></a> 330         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L331" name="L331"></a> 331         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/15504.html" title="Multiple defined in 9 places.">engineCanonicalizeXPathNodeSet</a>(xpathNodeSet);
<a id="L332" name="L332"></a> 332     <em class="brace">}</em>
<a id="L333" name="L333"></a> 333 
<div class="comment">
      Canonicalizes an XPath node set. The <code>xpathNodeSet</code> is treated
      as a list of XPath nodes, not as a list of subtrees.
      @param xpathNodeSet
      @param inclusiveNamespaces
      @return the result of the c14n.
      @throws CanonicalizationException</div>
<a id="L343" name="L343"></a> 343     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10962.html" title="Multiple referred from 4 places.">canonicalizeXPathNodeSet</a>(
<a id="L344" name="L344"></a> 344         <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> xpathNodeSet, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> inclusiveNamespaces
<a id="L345" name="L345"></a> 345     ) <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L346" name="L346"></a> 346         <strong class="reserved">return</strong>
<a id="L347" name="L347"></a> 347             canonicalizerSpi.<a href="../D/15504.html" title="Multiple defined in 9 places.">engineCanonicalizeXPathNodeSet</a>(xpathNodeSet, inclusiveNamespaces);
<a id="L348" name="L348"></a> 348     <em class="brace">}</em>
<a id="L349" name="L349"></a> 349 
<div class="comment">
      Canonicalizes an XPath node set.
      @param xpathNodeSet
      @return the result of the c14n.
      @throws CanonicalizationException</div>
<a id="L357" name="L357"></a> 357     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10962.html" title="Multiple referred from 4 places.">canonicalizeXPathNodeSet</a>(<a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; xpathNodeSet)
<a id="L358" name="L358"></a> 358         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L359" name="L359"></a> 359         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/15504.html" title="Multiple defined in 9 places.">engineCanonicalizeXPathNodeSet</a>(xpathNodeSet);
<a id="L360" name="L360"></a> 360     <em class="brace">}</em>
<a id="L361" name="L361"></a> 361 
<div class="comment">
      Canonicalizes an XPath node set.
      @param xpathNodeSet
      @param inclusiveNamespaces
      @return the result of the c14n.
      @throws CanonicalizationException</div>
<a id="L370" name="L370"></a> 370     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/10962.html" title="Multiple referred from 4 places.">canonicalizeXPathNodeSet</a>(
<a id="L371" name="L371"></a> 371         <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; xpathNodeSet, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> inclusiveNamespaces
<a id="L372" name="L372"></a> 372     ) <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L373" name="L373"></a> 373         <strong class="reserved">return</strong>
<a id="L374" name="L374"></a> 374             canonicalizerSpi.<a href="../D/15504.html" title="Multiple defined in 9 places.">engineCanonicalizeXPathNodeSet</a>(xpathNodeSet, inclusiveNamespaces);
<a id="L375" name="L375"></a> 375     <em class="brace">}</em>
<a id="L376" name="L376"></a> 376 
<div class="comment">
      Sets the writer where the canonicalization ends.  ByteArrayOutputStream
      if none is set.
      @param os</div>
<a id="L382" name="L382"></a> 382     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28427.html" title="Multiple referred from 20 places.">setWriter</a>(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> os) <em class="brace">{</em>
<a id="L383" name="L383"></a> 383         canonicalizerSpi.<a href="../D/34341.html" title="Multiple defined in 14 places.">setWriter</a>(os);
<a id="L384" name="L384"></a> 384     <em class="brace">}</em>
<a id="L385" name="L385"></a> 385 
<div class="comment">
      Returns the name of the implementing <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a> class
      @return the name of the implementing <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a> class</div>
<a id="L391" name="L391"></a> 391     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> getImplementingCanonicalizerClass() <em class="brace">{</em>
<a id="L392" name="L392"></a> 392         <strong class="reserved">return</strong> canonicalizerSpi.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L393" name="L393"></a> 393     <em class="brace">}</em>
<a id="L394" name="L394"></a> 394 
<div class="comment">
      Set the canonicalizer behaviour to not reset.</div>
<a id="L398" name="L398"></a> 398     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23806.html" title="Multiple referred from 4 places.">notReset</a>() <em class="brace">{</em>
<a id="L399" name="L399"></a> 399         canonicalizerSpi.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a> = <strong class="reserved">false</strong>;
<a id="L400" name="L400"></a> 400     <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L135">[^]</a><a href="#L398">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
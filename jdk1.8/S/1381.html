<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/io/ObjectOutputStream.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L304">[^]</a><a href="#L2463">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L304" title="Defined at 304.">useProtocolVersion</a></li>
<li><a href="#L342" title="Defined at 342.">writeObject</a></li>
<li><a href="#L371" title="Defined at 371.">writeObjectOverride</a></li>
<li><a href="#L413" title="Defined at 413.">writeUnshared</a></li>
<li><a href="#L433" title="Defined at 433.">defaultWriteObject</a></li>
<li><a href="#L455" title="Defined at 455.">putFields</a></li>
<li><a href="#L477" title="Defined at 477.">writeFields</a></li>
<li><a href="#L496" title="Defined at 496.">reset</a></li>
<li><a href="#L522" title="Defined at 522.">annotateClass</a></li>
<li><a href="#L546" title="Defined at 546.">annotateProxyClass</a></li>
<li><a href="#L587" title="Defined at 587.">replaceObject</a></li>
<li><a href="#L611" title="Defined at 611.">enableReplaceObject</a></li>
<li><a href="#L635" title="Defined at 635.">writeStreamHeader</a></li>
<li><a href="#L665" title="Defined at 665.">writeClassDescriptor</a></li>
<li><a href="#L678" title="Defined at 678.">write</a></li>
<li><a href="#L689" title="Defined at 689.">write</a></li>
<li><a href="#L701" title="Defined at 701.">write</a></li>
<li><a href="#L718" title="Defined at 718.">flush</a></li>
<li><a href="#L729" title="Defined at 729.">drain</a></li>
<li><a href="#L739" title="Defined at 739.">close</a></li>
<li><a href="#L752" title="Defined at 752.">writeBoolean</a></li>
<li><a href="#L763" title="Defined at 763.">writeByte</a></li>
<li><a href="#L774" title="Defined at 774.">writeShort</a></li>
<li><a href="#L785" title="Defined at 785.">writeChar</a></li>
<li><a href="#L796" title="Defined at 796.">writeInt</a></li>
<li><a href="#L807" title="Defined at 807.">writeLong</a></li>
<li><a href="#L818" title="Defined at 818.">writeFloat</a></li>
<li><a href="#L829" title="Defined at 829.">writeDouble</a></li>
<li><a href="#L840" title="Defined at 840.">writeBytes</a></li>
<li><a href="#L851" title="Defined at 851.">writeChars</a></li>
<li><a href="#L868" title="Defined at 868.">writeUTF</a></li>
<li><a href="#L890" title="Defined at 890.">put</a></li>
<li><a href="#L902" title="Defined at 902.">put</a></li>
<li><a href="#L914" title="Defined at 914.">put</a></li>
<li><a href="#L926" title="Defined at 926.">put</a></li>
<li><a href="#L938" title="Defined at 938.">put</a></li>
<li><a href="#L950" title="Defined at 950.">put</a></li>
<li><a href="#L962" title="Defined at 962.">put</a></li>
<li><a href="#L974" title="Defined at 974.">put</a></li>
<li><a href="#L987" title="Defined at 987.">put</a></li>
<li><a href="#L1008" title="Defined at 1008.">write</a></li>
<li><a href="#L1015" title="Defined at 1015.">getProtocolVersion</a></li>
<li><a href="#L1023" title="Defined at 1023.">writeTypeString</a></li>
<li><a href="#L1040" title="Defined at 1040.">verifySubclass</a></li>
<li><a href="#L1067" title="Defined at 1067.">auditSubclass</a></li>
<li><a href="#L1097" title="Defined at 1097.">clear</a></li>
<li><a href="#L1105" title="Defined at 1105.">writeObject0</a></li>
<li><a href="#L1196" title="Defined at 1196.">writeNull</a></li>
<li><a href="#L1203" title="Defined at 1203.">writeHandle</a></li>
<li><a href="#L1211" title="Defined at 1211.">writeClass</a></li>
<li><a href="#L1220" title="Defined at 1220.">writeClassDesc</a></li>
<li><a href="#L1235" title="Defined at 1235.">isCustomSubclass</a></li>
<li><a href="#L1244" title="Defined at 1244.">writeProxyDesc</a></li>
<li><a href="#L1272" title="Defined at 1272.">writeNonProxyDesc</a></li>
<li><a href="#L1301" title="Defined at 1301.">writeString</a></li>
<li><a href="#L1316" title="Defined at 1316.">writeArray</a></li>
<li><a href="#L1396" title="Defined at 1396.">writeEnum</a></li>
<li><a href="#L1413" title="Defined at 1413.">writeOrdinaryObject</a></li>
<li><a href="#L1445" title="Defined at 1445.">writeExternalData</a></li>
<li><a href="#L1477" title="Defined at 1477.">writeSerialData</a></li>
<li><a href="#L1519" title="Defined at 1519.">defaultWriteFields</a></li>
<li><a href="#L1562" title="Defined at 1562.">writeFatalException</a></li>
<li><a href="#L1588" title="Defined at 1588.">floatsToBytes</a></li>
<li><a href="#L1596" title="Defined at 1596.">doublesToBytes</a></li>
<li><a href="#L1622" title="Defined at 1622.">put</a></li>
<li><a href="#L1626" title="Defined at 1626.">put</a></li>
<li><a href="#L1630" title="Defined at 1630.">put</a></li>
<li><a href="#L1634" title="Defined at 1634.">put</a></li>
<li><a href="#L1638" title="Defined at 1638.">put</a></li>
<li><a href="#L1642" title="Defined at 1642.">put</a></li>
<li><a href="#L1646" title="Defined at 1646.">put</a></li>
<li><a href="#L1650" title="Defined at 1650.">put</a></li>
<li><a href="#L1654" title="Defined at 1654.">put</a></li>
<li><a href="#L1659" title="Defined at 1659.">write</a></li>
<li><a href="#L1694" title="Defined at 1694.">writeFields</a></li>
<li><a href="#L1723" title="Defined at 1723.">getFieldOffset</a></li>
<li><a href="#L1782" title="Defined at 1782.">setBlockDataMode</a></li>
<li><a href="#L1795" title="Defined at 1795.">getBlockDataMode</a></li>
<li><a href="#L1806" title="Defined at 1806.">write</a></li>
<li><a href="#L1813" title="Defined at 1813.">write</a></li>
<li><a href="#L1817" title="Defined at 1817.">write</a></li>
<li><a href="#L1821" title="Defined at 1821.">flush</a></li>
<li><a href="#L1826" title="Defined at 1826.">close</a></li>
<li><a href="#L1837" title="Defined at 1837.">write</a></li>
<li><a href="#L1870" title="Defined at 1870.">drain</a></li>
<li><a href="#L1886" title="Defined at 1886.">writeBlockHeader</a></li>
<li><a href="#L1906" title="Defined at 1906.">writeBoolean</a></li>
<li><a href="#L1913" title="Defined at 1913.">writeByte</a></li>
<li><a href="#L1920" title="Defined at 1920.">writeChar</a></li>
<li><a href="#L1929" title="Defined at 1929.">writeShort</a></li>
<li><a href="#L1938" title="Defined at 1938.">writeInt</a></li>
<li><a href="#L1947" title="Defined at 1947.">writeFloat</a></li>
<li><a href="#L1956" title="Defined at 1956.">writeLong</a></li>
<li><a href="#L1965" title="Defined at 1965.">writeDouble</a></li>
<li><a href="#L1974" title="Defined at 1974.">writeBytes</a></li>
<li><a href="#L1996" title="Defined at 1996.">writeChars</a></li>
<li><a href="#L2006" title="Defined at 2006.">writeUTF</a></li>
<li><a href="#L2019" title="Defined at 2019.">writeBooleans</a></li>
<li><a href="#L2032" title="Defined at 2032.">writeChars</a></li>
<li><a href="#L2049" title="Defined at 2049.">writeShorts</a></li>
<li><a href="#L2066" title="Defined at 2066.">writeInts</a></li>
<li><a href="#L2083" title="Defined at 2083.">writeFloats</a></li>
<li><a href="#L2099" title="Defined at 2099.">writeLongs</a></li>
<li><a href="#L2116" title="Defined at 2116.">writeDoubles</a></li>
<li><a href="#L2135" title="Defined at 2135.">getUTFLength</a></li>
<li><a href="#L2162" title="Defined at 2162.">writeUTF</a></li>
<li><a href="#L2179" title="Defined at 2179.">writeLongUTF</a></li>
<li><a href="#L2187" title="Defined at 2187.">writeLongUTF</a></li>
<li><a href="#L2200" title="Defined at 2200.">writeUTFBody</a></li>
<li><a href="#L2274" title="Defined at 2274.">assign</a></li>
<li><a href="#L2289" title="Defined at 2289.">lookup</a></li>
<li><a href="#L2305" title="Defined at 2305.">clear</a></li>
<li><a href="#L2314" title="Defined at 2314.">size</a></li>
<li><a href="#L2322" title="Defined at 2322.">insert</a></li>
<li><a href="#L2333" title="Defined at 2333.">growSpine</a></li>
<li><a href="#L2345" title="Defined at 2345.">growEntries</a></li>
<li><a href="#L2359" title="Defined at 2359.">hash</a></li>
<li><a href="#L2386" title="Defined at 2386.">assign</a></li>
<li><a href="#L2398" title="Defined at 2398.">lookup</a></li>
<li><a href="#L2406" title="Defined at 2406.">clear</a></li>
<li><a href="#L2414" title="Defined at 2414.">size</a></li>
<li><a href="#L2421" title="Defined at 2421.">grow</a></li>
<li><a href="#L2442" title="Defined at 2442.">clear</a></li>
<li><a href="#L2449" title="Defined at 2449.">pop</a></li>
<li><a href="#L2456" title="Defined at 2456.">push</a></li>
<li><a href="#L2463" title="Defined at 2463.">toString</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1996, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.ObjectStreamClass.WeakClassKey;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.lang.ref.ReferenceQueue;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.security.PrivilegedAction;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.List;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentHashMap;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentMap;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> static java.io.ObjectStreamClass.processQueue;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.io.SerialCallbackContext;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> sun.reflect.misc.ReflectUtil;
<a id="L40" name="L40"></a>  40 
<div class="comment">
  An ObjectOutputStream writes primitive data types and graphs of Java objects
  to an OutputStream.  The objects can be read (reconstituted) using an
  ObjectInputStream.  Persistent storage of objects can be accomplished by
  using a file for the stream.  If the stream is a network socket stream, the
  objects can be reconstituted on another host or in another process.
  <p>Only objects that support the java.io.Serializable interface can be
  written to streams.  The class of each serializable object is encoded
  including the class name and signature of the class, the values of the
  object's fields and arrays, and the closure of any other objects referenced
  from the initial objects.
  </p><p>The method writeObject is used to write an object to the stream.  Any
  object, including Strings and arrays, is written with writeObject. Multiple
  objects or primitives can be written to the stream.  The objects must be
  read back from the corresponding ObjectInputstream with the same types and
  in the same order as they were written.
  </p><p>Primitive data types can also be written to the stream using the
  appropriate methods from DataOutput. Strings can also be written using the
  writeUTF method.
  </p><p>The default serialization mechanism for an object writes the class of the
  object, the class signature, and the values of all non-transient and
  non-static fields.  References to other objects (except in transient or
  static fields) cause those objects to be written also. Multiple references
  to a single object are encoded using a reference sharing mechanism so that
  graphs of objects can be restored to the same shape as when the original was
  written.
  </p><p>For example to write an object that can be read by the example in
  ObjectInputStream:
  <br>
  </p><pre>       FileOutputStream fos = new FileOutputStream("t.tmp");
       ObjectOutputStream oos = new ObjectOutputStream(fos);
       oos.writeInt(12345);
       oos.writeObject("Today");
       oos.writeObject(new Date());
       oos.close();
  </pre>
  <p>Classes that require special handling during the serialization and
  deserialization process must implement special methods with these exact
  signatures:
  <br>
  </p><pre>  private void readObject(java.io.ObjectInputStream stream)
      throws IOException, ClassNotFoundException;
  private void writeObject(java.io.ObjectOutputStream stream)
      throws IOException
  private void readObjectNoData()
      throws ObjectStreamException;
  </pre>
  <p>The writeObject method is responsible for writing the state of the object
  for its particular class so that the corresponding readObject method can
  restore it.  The method does not need to concern itself with the state
  belonging to the object's superclasses or subclasses.  State is saved by
  writing the individual fields to the ObjectOutputStream using the
  writeObject method or by using the methods for primitive data types
  supported by DataOutput.
  </p><p>Serialization does not write out the fields of any object that does not
  implement the java.io.Serializable interface.  Subclasses of Objects that
  are not serializable can be serializable. In this case the non-serializable
  class must have a no-arg constructor to allow its fields to be initialized.
  In this case it is the responsibility of the subclass to save and restore
  the state of the non-serializable class. It is frequently the case that the
  fields of that class are accessible (public, package, or protected) or that
  there are get and set methods that can be used to restore the state.
  </p><p>Serialization of an object can be prevented by implementing writeObject
  and readObject methods that throw the NotSerializableException.  The
  exception will be caught by the ObjectOutputStream and abort the
  serialization process.
  </p><p>Implementing the Externalizable interface allows the object to assume
  complete control over the contents and format of the object's serialized
  form.  The methods of the Externalizable interface, writeExternal and
  readExternal, are called to save and restore the objects state.  When
  implemented by a class they can write and read their own state using all of
  the methods of ObjectOutput and ObjectInput.  It is the responsibility of
  the objects to handle any versioning that occurs.
  </p><p>Enum constants are serialized differently than ordinary serializable or
  externalizable objects.  The serialized form of an enum constant consists
  solely of its name; field values of the constant are not transmitted.  To
  serialize an enum constant, ObjectOutputStream writes the string returned by
  the constant's name method.  Like other serializable or externalizable
  objects, enum constants can function as the targets of back references
  appearing subsequently in the serialization stream.  The process by which
  enum constants are serialized cannot be customized; any class-specific
  writeObject and writeReplace methods defined by enum types are ignored
  during serialization.  Similarly, any serialPersistentFields or
  serialVersionUID field declarations are also ignored--all enum types have a
  fixed serialVersionUID of 0L.
  </p><p>Primitive data, excluding serializable fields and externalizable data, is
  written to the ObjectOutputStream in block-data records. A block data record
  is composed of a header and data. The block data header consists of a marker
  and the number of bytes to follow the header.  Consecutive primitive data
  writes are merged into one block-data record.  The blocking factor used for
  a block-data record will be 1024 bytes.  Each block-data record will be
  filled up to 1024 bytes, or be written whenever there is a termination of
  block-data mode.  Calls to the ObjectOutputStream methods writeObject,
  defaultWriteObject and writeFields initially terminate any existing
  block-data record.
  @author      Mike Warres
  @author      Roger Riggs
  @see java.io.DataOutput
  @see java.io.ObjectInputStream
  @see java.io.Serializable
  @see java.io.Externalizable
  @see <a href="../../../platform/serialization/spec/output.html">Object Serialization Specification, Section 2, Object Output Classes</a>
  @since       JDK1.1</p></div>
<a id="L162" name="L162"></a> 162 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/5752.html" title="Multiple referred from 488 places.">ObjectOutputStream</a>
<a id="L163" name="L163"></a> 163     <strong class="reserved">extends</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <strong class="reserved">implements</strong> <a href="../S/1380.html#L39" title="Defined at 39 in src/java/io/ObjectOutput.java.">ObjectOutput</a>, <a href="../S/1455.html#L34" title="Defined at 34 in src/java/io/ObjectStreamConstants.java.">ObjectStreamConstants</a>
<a id="L164" name="L164"></a> 164 <em class="brace">{</em>
<a id="L165" name="L165"></a> 165 
<a id="L166" name="L166"></a> 166     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/1138.html" title="Multiple referred from 24 places.">Caches</a> <em class="brace">{</em>
<div class="comment">
         /** cache of subclass security audit results */</div>
<a id="L168" name="L168"></a> 168         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1110.html#L63" title="Defined at 63 in src/java/util/concurrent/ConcurrentMap.java.">ConcurrentMap</a>&lt;<a href="../D/9617.html" title="Multiple defined in 2 places.">WeakClassKey</a>,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt; subclassAudits =
<a id="L169" name="L169"></a> 169             <strong class="reserved">new</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;&gt;();
<a id="L170" name="L170"></a> 170 
<div class="comment">
         /** queue for WeakReferences to audited subclasses */</div>
<a id="L172" name="L172"></a> 172         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; subclassAuditsQueue =
<a id="L173" name="L173"></a> 173             <strong class="reserved">new</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;&gt;();
<a id="L174" name="L174"></a> 174     <em class="brace">}</em>
<a id="L175" name="L175"></a> 175 
<div class="comment">
     /** filter stream for handling block data conversion */</div>
<a id="L177" name="L177"></a> 177     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1381.html#L1739" title="Defined at 1739 in src/java/io/ObjectOutputStream.java.">BlockDataOutputStream</a> bout;
<div class="comment">
     /** obj -&gt; wire handle map */</div>
<a id="L179" name="L179"></a> 179     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/3726.html" title="Multiple defined in 2 places.">HandleTable</a> handles;
<div class="comment">
     /** obj -&gt; replacement obj map */</div>
<a id="L181" name="L181"></a> 181     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1381.html#L2368" title="Defined at 2368 in src/java/io/ObjectOutputStream.java.">ReplaceTable</a> subs;
<div class="comment">
     /** stream protocol version */</div>
<a id="L183" name="L183"></a> 183     <strong class="reserved">private</strong> <strong class="reserved">int</strong> protocol = PROTOCOL_VERSION_2;
<div class="comment">
     /** recursion depth */</div>
<a id="L185" name="L185"></a> 185     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>;
<a id="L186" name="L186"></a> 186 
<div class="comment">
     /** buffer for writing primitive field values */</div>
<a id="L188" name="L188"></a> 188     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] primVals;
<a id="L189" name="L189"></a> 189 
<div class="comment">
     /** if true, invoke writeObjectOverride() instead of writeObject() */</div>
<a id="L191" name="L191"></a> 191     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> enableOverride;
<div class="comment">
     /** if true, invoke replaceObject() */</div>
<a id="L193" name="L193"></a> 193     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> enableReplace;
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195     <em class="comment">// values below valid only during upcalls to writeObject()/writeExternal()</em>
<div class="comment">
      Context during upcalls to class-defined writeObject methods; holds
      object currently being serialized and descriptor for current class.
      Null when not during writeObject upcall.</div>
<a id="L201" name="L201"></a> 201     <strong class="reserved">private</strong> <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> curContext;
<div class="comment">
     /** current PutField object */</div>
<a id="L203" name="L203"></a> 203     <strong class="reserved">private</strong> <a href="../S/1381.html#L1603" title="Defined at 1603 in src/java/io/ObjectOutputStream.java.">PutFieldImpl</a> curPut;
<a id="L204" name="L204"></a> 204 
<div class="comment">
     /** custom storage for debug trace info */</div>
<a id="L206" name="L206"></a> 206     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1381.html#L2432" title="Defined at 2432 in src/java/io/ObjectOutputStream.java.">DebugTraceInfoStack</a> debugInfoStack;
<a id="L207" name="L207"></a> 207 
<div class="comment">
      value of "sun.io.serialization.extendedDebugInfo" property,
      as true or false for extended information about exception's place</div>
<a id="L212" name="L212"></a> 212     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> extendedDebugInfo =
<a id="L213" name="L213"></a> 213         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.<a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L214" name="L214"></a> 214             <strong class="reserved">new</strong> sun.security.<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a>.GetBooleanAction(
<a id="L215" name="L215"></a> 215                 "sun.io.serialization.extendedDebugInfo")).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L216" name="L216"></a> 216 
<div class="comment">
      Creates an ObjectOutputStream that writes to the specified OutputStream.
      This constructor writes the serialization stream header to the
      underlying stream; callers may wish to flush the stream immediately to
      ensure that constructors for receiving ObjectInputStreams will not block
      when reading the header.
      <p>If a security manager is installed, this constructor will check for
      the "enableSubclassImplementation" SerializablePermission when invoked
      directly or indirectly by the constructor of a subclass which overrides
      the ObjectOutputStream.putFields or ObjectOutputStream.writeUnshared
      methods.
      @param   out output stream to write to
      @throws  IOException if an I/O error occurs while writing stream header
      @throws  SecurityException if untrusted subclass illegally overrides
               security-sensitive methods
      @throws  NullPointerException if <code>out</code> is <code>null</code>
      @since   1.4
      @see     ObjectOutputStream#ObjectOutputStream()
      @see     ObjectOutputStream#putFields()
      @see     ObjectInputStream#ObjectInputStream(InputStream)</p></div>
<a id="L240" name="L240"></a> 240     <strong class="reserved">public</strong> ObjectOutputStream(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L241" name="L241"></a> 241         <a href="../D/36405.html" title="Multiple defined in 2 places.">verifySubclass</a>();
<a id="L242" name="L242"></a> 242         bout = <strong class="reserved">new</strong> <a href="../S/1381.html#L1739" title="Defined at 1739 in src/java/io/ObjectOutputStream.java.">BlockDataOutputStream</a>(<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L243" name="L243"></a> 243         handles = <strong class="reserved">new</strong> <a href="../D/3726.html" title="Multiple defined in 2 places.">HandleTable</a>(10, (<strong class="reserved">float</strong>) 3.00);
<a id="L244" name="L244"></a> 244         subs = <strong class="reserved">new</strong> <a href="../S/1381.html#L2368" title="Defined at 2368 in src/java/io/ObjectOutputStream.java.">ReplaceTable</a>(10, (<strong class="reserved">float</strong>) 3.00);
<a id="L245" name="L245"></a> 245         enableOverride = <strong class="reserved">false</strong>;
<a id="L246" name="L246"></a> 246         <a href="../D/37169.html" title="Multiple defined in 2 places.">writeStreamHeader</a>();
<a id="L247" name="L247"></a> 247         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L248" name="L248"></a> 248         <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L249" name="L249"></a> 249             debugInfoStack = <strong class="reserved">new</strong> <a href="../S/1381.html#L2432" title="Defined at 2432 in src/java/io/ObjectOutputStream.java.">DebugTraceInfoStack</a>();
<a id="L250" name="L250"></a> 250         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L251" name="L251"></a> 251             debugInfoStack = <strong class="reserved">null</strong>;
<a id="L252" name="L252"></a> 252         <em class="brace">}</em>
<a id="L253" name="L253"></a> 253     <em class="brace">}</em>
<a id="L254" name="L254"></a> 254 
<div class="comment">
      Provide a way for subclasses that are completely reimplementing
      ObjectOutputStream to not have to allocate private data just used by
      this implementation of ObjectOutputStream.
      <p>If there is a security manager installed, this method first calls the
      security manager's <code>checkPermission</code> method with a
      <code>SerializablePermission("enableSubclassImplementation")</code>
      permission to ensure it's ok to enable subclassing.
      @throws  SecurityException if a security manager exists and its
               <code>checkPermission</code> method denies enabling
               subclassing.
      @throws  IOException if an I/O error occurs while creating this stream
      @see SecurityManager#checkPermission
      @see java.io.SerializablePermission</p></div>
<a id="L272" name="L272"></a> 272     <strong class="reserved">protected</strong> ObjectOutputStream() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> <em class="brace">{</em>
<a id="L273" name="L273"></a> 273         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L274" name="L274"></a> 274         <strong class="reserved">if</strong> (sm != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L275" name="L275"></a> 275             sm.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SUBCLASS_IMPLEMENTATION_PERMISSION);
<a id="L276" name="L276"></a> 276         <em class="brace">}</em>
<a id="L277" name="L277"></a> 277         bout = <strong class="reserved">null</strong>;
<a id="L278" name="L278"></a> 278         handles = <strong class="reserved">null</strong>;
<a id="L279" name="L279"></a> 279         subs = <strong class="reserved">null</strong>;
<a id="L280" name="L280"></a> 280         enableOverride = <strong class="reserved">true</strong>;
<a id="L281" name="L281"></a> 281         debugInfoStack = <strong class="reserved">null</strong>;
<a id="L282" name="L282"></a> 282     <em class="brace">}</em>
<a id="L283" name="L283"></a> 283 
<div class="comment">
      Specify stream protocol version to use when writing the stream.
      <p>This routine provides a hook to enable the current version of
      Serialization to write in a format that is backwards compatible to a
      previous version of the stream format.
      </p><p>Every effort will be made to avoid introducing additional
      backwards incompatibilities; however, sometimes there is no
      other alternative.
      @param   version use ProtocolVersion from java.io.ObjectStreamConstants.
      @throws  IllegalStateException if called after any objects
               have been serialized.
      @throws  IllegalArgumentException if invalid version is passed in.
      @throws  IOException if I/O errors occur
      @see java.io.ObjectStreamConstants#PROTOCOL_VERSION_1
      @see java.io.ObjectStreamConstants#PROTOCOL_VERSION_2
      @since   1.2</p></div>
<a id="L304" name="L304"></a> 304     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2546.html#L248" title="Referred from 248 in src/java/rmi/MarshalledObject.java.">useProtocolVersion</a>(<strong class="reserved">int</strong> <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L305" name="L305"></a> 305         <strong class="reserved">if</strong> (handles.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L306" name="L306"></a> 306             <em class="comment">// REMIND: implement better check for pristine stream?</em>
<a id="L307" name="L307"></a> 307             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("stream non-empty");
<a id="L308" name="L308"></a> 308         <em class="brace">}</em>
<a id="L309" name="L309"></a> 309         <strong class="reserved">switch</strong> (<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310             <strong class="reserved">case</strong> PROTOCOL_VERSION_1:
<a id="L311" name="L311"></a> 311             <strong class="reserved">case</strong> PROTOCOL_VERSION_2:
<a id="L312" name="L312"></a> 312                 protocol = <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>;
<a id="L313" name="L313"></a> 313                 <strong class="reserved">break</strong>;
<a id="L314" name="L314"></a> 314 
<a id="L315" name="L315"></a> 315             <strong class="reserved">default</strong>:
<a id="L316" name="L316"></a> 316                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L317" name="L317"></a> 317                     "unknown version: " + <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>);
<a id="L318" name="L318"></a> 318         <em class="brace">}</em>
<a id="L319" name="L319"></a> 319     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320 
<div class="comment">
      Write the specified object to the ObjectOutputStream.  The class of the
      object, the signature of the class, and the values of the non-transient
      and non-static fields of the class and all of its supertypes are
      written.  Default serialization for a class can be overridden using the
      writeObject and the readObject methods.  Objects referenced by this
      object are written transitively so that a complete equivalent graph of
      objects can be reconstructed by an ObjectInputStream.
      <p>Exceptions are thrown for problems with the OutputStream and for
      classes that should not be serialized.  All exceptions are fatal to the
      OutputStream, which is left in an indeterminate state, and it is up to
      the caller to ignore or recover the stream state.
      @throws  InvalidClassException Something is wrong with a class used by
               serialization.
      @throws  NotSerializableException Some object to be serialized does not
               implement the java.io.Serializable interface.
      @throws  IOException Any exception thrown by the underlying
               OutputStream.</p></div>
<a id="L342" name="L342"></a> 342     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L343" name="L343"></a> 343         <strong class="reserved">if</strong> (enableOverride) <em class="brace">{</em>
<a id="L344" name="L344"></a> 344             <a href="../D/37128.html" title="Multiple defined in 2 places.">writeObjectOverride</a>(obj);
<a id="L345" name="L345"></a> 345             <strong class="reserved">return</strong>;
<a id="L346" name="L346"></a> 346         <em class="brace">}</em>
<a id="L347" name="L347"></a> 347         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L348" name="L348"></a> 348             <a href="../S/1381.html#L1105" title="Defined at 1105 in src/java/io/ObjectOutputStream.java.">writeObject0</a>(obj, <strong class="reserved">false</strong>);
<a id="L349" name="L349"></a> 349         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L350" name="L350"></a> 350             <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L351" name="L351"></a> 351                 <a href="../S/1381.html#L1562" title="Defined at 1562 in src/java/io/ObjectOutputStream.java.">writeFatalException</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L352" name="L352"></a> 352             <em class="brace">}</em>
<a id="L353" name="L353"></a> 353             <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L354" name="L354"></a> 354         <em class="brace">}</em>
<a id="L355" name="L355"></a> 355     <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<div class="comment">
      Method used by subclasses to override the default writeObject method.
      This method is called by trusted subclasses of ObjectInputStream that
      constructed ObjectInputStream using the protected no-arg constructor.
      The subclass is expected to provide an override method with the modifier
      "final".
      @param   obj object to be written to the underlying stream
      @throws  IOException if there are I/O errors while writing to the
               underlying stream
      @see #ObjectOutputStream()
      @see #writeObject(Object)
      @since 1.2</div>
<a id="L371" name="L371"></a> 371     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L344" title="Referred from 344 in src/java/io/ObjectOutputStream.java.">writeObjectOverride</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L372" name="L372"></a> 372     <em class="brace">}</em>
<a id="L373" name="L373"></a> 373 
<div class="comment">
      Writes an "unshared" object to the ObjectOutputStream.  This method is
      identical to writeObject, except that it always writes the given object
      as a new, unique object in the stream (as opposed to a back-reference
      pointing to a previously serialized instance).  Specifically:
      <ul><li>An object written via writeUnshared is always serialized in the
            same manner as a newly appearing object (an object that has not
            been written to the stream yet), regardless of whether or not the
            object has been written previously.
        </li><li>If writeObject is used to write an object that has been previously
            written with writeUnshared, the previous writeUnshared operation
            is treated as if it were a write of a separate object.  In other
            words, ObjectOutputStream will never generate back-references to
            object data written by calls to writeUnshared.
      </li></ul>
      While writing an object via writeUnshared does not in itself guarantee a
      unique reference to the object when it is deserialized, it allows a
      single object to be defined multiple times in a stream, so that multiple
      calls to readUnshared by the receiver will not conflict.  Note that the
      rules described above only apply to the base-level object written with
      writeUnshared, and not to any transitively referenced sub-objects in the
      object graph to be serialized.
      <p>ObjectOutputStream subclasses which override this method can only be
      constructed in security contexts possessing the
      "enableSubclassImplementation" SerializablePermission; any attempt to
      instantiate such a subclass without this permission will cause a
      SecurityException to be thrown.
      @param   obj object to write to stream
      @throws  NotSerializableException if an object in the graph to be
               serialized does not implement the Serializable interface
      @throws  InvalidClassException if a problem exists with the class of an
               object to be serialized
      @throws  IOException if an I/O error occurs during serialization
      @since 1.4</p></div>
<a id="L413" name="L413"></a> 413     <strong class="reserved">public</strong> <strong class="reserved">void</strong> writeUnshared(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L414" name="L414"></a> 414         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <a href="../S/1381.html#L1105" title="Defined at 1105 in src/java/io/ObjectOutputStream.java.">writeObject0</a>(obj, <strong class="reserved">true</strong>);
<a id="L416" name="L416"></a> 416         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417             <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L418" name="L418"></a> 418                 <a href="../S/1381.html#L1562" title="Defined at 1562 in src/java/io/ObjectOutputStream.java.">writeFatalException</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L419" name="L419"></a> 419             <em class="brace">}</em>
<a id="L420" name="L420"></a> 420             <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L421" name="L421"></a> 421         <em class="brace">}</em>
<a id="L422" name="L422"></a> 422     <em class="brace">}</em>
<a id="L423" name="L423"></a> 423 
<div class="comment">
      Write the non-static and non-transient fields of the current class to
      this stream.  This may only be called from the writeObject method of the
      class being serialized. It will throw the NotActiveException if it is
      called otherwise.
      @throws  IOException if I/O errors occur while writing to the underlying
               <code>OutputStream</code></div>
<a id="L433" name="L433"></a> 433     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13165.html" title="Multiple referred from 172 places.">defaultWriteObject</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L434" name="L434"></a> 434         <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> = curContext;
<a id="L435" name="L435"></a> 435         <strong class="reserved">if</strong> (<a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L436" name="L436"></a> 436             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>("not in call to writeObject");
<a id="L437" name="L437"></a> 437         <em class="brace">}</em>
<a id="L438" name="L438"></a> 438         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> curObj = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L54" title="Defined at 54 in src/java/io/SerialCallbackContext.java.">getObj</a>();
<a id="L439" name="L439"></a> 439         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> curDesc = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L59" title="Defined at 59 in src/java/io/SerialCallbackContext.java.">getDesc</a>();
<a id="L440" name="L440"></a> 440         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L441" name="L441"></a> 441         <a href="../S/1381.html#L1519" title="Defined at 1519 in src/java/io/ObjectOutputStream.java.">defaultWriteFields</a>(curObj, curDesc);
<a id="L442" name="L442"></a> 442         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L443" name="L443"></a> 443     <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<div class="comment">
      Retrieve the object used to buffer persistent fields to be written to
      the stream.  The fields will be written to the stream when writeFields
      method is called.
      @return  an instance of the class Putfield that holds the serializable
               fields
      @throws  IOException if I/O errors occur
      @since 1.2</div>
<a id="L455" name="L455"></a> 455     <strong class="reserved">public</strong> <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<a href="../S/1381.html#L878" title="Defined at 878 in src/java/io/ObjectOutputStream.java.">PutField</a> <a href="../R/25307.html" title="Multiple referred from 59 places.">putFields</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L456" name="L456"></a> 456         <strong class="reserved">if</strong> (curPut == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L457" name="L457"></a> 457             <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> = curContext;
<a id="L458" name="L458"></a> 458             <strong class="reserved">if</strong> (<a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L459" name="L459"></a> 459                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>("not in call to writeObject");
<a id="L460" name="L460"></a> 460             <em class="brace">}</em>
<a id="L461" name="L461"></a> 461             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> curObj = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L54" title="Defined at 54 in src/java/io/SerialCallbackContext.java.">getObj</a>();
<a id="L462" name="L462"></a> 462             <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> curDesc = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L59" title="Defined at 59 in src/java/io/SerialCallbackContext.java.">getDesc</a>();
<a id="L463" name="L463"></a> 463             curPut = <strong class="reserved">new</strong> <a href="../S/1381.html#L1603" title="Defined at 1603 in src/java/io/ObjectOutputStream.java.">PutFieldImpl</a>(curDesc);
<a id="L464" name="L464"></a> 464         <em class="brace">}</em>
<a id="L465" name="L465"></a> 465         <strong class="reserved">return</strong> curPut;
<a id="L466" name="L466"></a> 466     <em class="brace">}</em>
<a id="L467" name="L467"></a> 467 
<div class="comment">
      Write the buffered fields to the stream.
      @throws  IOException if I/O errors occur while writing to the underlying
               stream
      @throws  NotActiveException Called when a classes writeObject method was
               not called to write the state of the object.
      @since 1.2</div>
<a id="L477" name="L477"></a> 477     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30626.html" title="Multiple referred from 52 places.">writeFields</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L478" name="L478"></a> 478         <strong class="reserved">if</strong> (curPut == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L479" name="L479"></a> 479             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>("no current PutField object");
<a id="L480" name="L480"></a> 480         <em class="brace">}</em>
<a id="L481" name="L481"></a> 481         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L482" name="L482"></a> 482         curPut.<a href="../D/37065.html" title="Multiple defined in 3 places.">writeFields</a>();
<a id="L483" name="L483"></a> 483         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L484" name="L484"></a> 484     <em class="brace">}</em>
<a id="L485" name="L485"></a> 485 
<div class="comment">
      Reset will disregard the state of any objects already written to the
      stream.  The state is reset to be the same as a new ObjectOutputStream.
      The current point in the stream is marked as reset so the corresponding
      ObjectInputStream will be reset at the same point.  Objects previously
      written to the stream will not be referred to as already being in the
      stream.  They will be written to the stream again.
      @throws  IOException if reset() is invoked while serializing an object.</div>
<a id="L496" name="L496"></a> 496     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L497" name="L497"></a> 497         <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> != 0) <em class="brace">{</em>
<a id="L498" name="L498"></a> 498             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("stream active");
<a id="L499" name="L499"></a> 499         <em class="brace">}</em>
<a id="L500" name="L500"></a> 500         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L501" name="L501"></a> 501         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_RESET);
<a id="L502" name="L502"></a> 502         <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L503" name="L503"></a> 503         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L504" name="L504"></a> 504     <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<div class="comment">
      Subclasses may implement this method to allow class data to be stored in
      the stream. By default this method does nothing.  The corresponding
      method in ObjectInputStream is resolveClass.  This method is called
      exactly once for each unique class in the stream.  The class name and
      signature will have already been written to the stream.  This method may
      make free use of the ObjectOutputStream to save any representation of
      the class it deems suitable (for example, the bytes of the class file).
      The resolveClass method in the corresponding subclass of
      ObjectInputStream must read and use any data or objects written by
      annotateClass.
      @param   cl the class to annotate custom data for
      @throws  IOException Any exception thrown by the underlying
               OutputStream.</div>
<a id="L522" name="L522"></a> 522     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1290" title="Referred from 1290 in src/java/io/ObjectOutputStream.java.">annotateClass</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L523" name="L523"></a> 523     <em class="brace">}</em>
<a id="L524" name="L524"></a> 524 
<div class="comment">
      Subclasses may implement this method to store custom data in the stream
      along with descriptors for dynamic proxy classes.
      <p>This method is called exactly once for each unique proxy class
      descriptor in the stream.  The default implementation of this method in
      <code>ObjectOutputStream</code> does nothing.
      </p><p>The corresponding method in <code>ObjectInputStream</code> is
      <code>resolveProxyClass</code>.  For a given subclass of
      <code>ObjectOutputStream</code> that overrides this method, the
      <code>resolveProxyClass</code> method in the corresponding subclass of
      <code>ObjectInputStream</code> must read any data or objects written by
      <code>annotateProxyClass</code>.
      @param   cl the proxy class to annotate custom data for
      @throws  IOException any exception thrown by the underlying
               <code>OutputStream</code>
      @see ObjectInputStream#resolveProxyClass(String[])
      @since   1.3</p></div>
<a id="L546" name="L546"></a> 546     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1261" title="Referred from 1261 in src/java/io/ObjectOutputStream.java.">annotateProxyClass</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L547" name="L547"></a> 547     <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<div class="comment">
      This method will allow trusted subclasses of ObjectOutputStream to
      substitute one object for another during serialization. Replacing
      objects is disabled until enableReplaceObject is called. The
      enableReplaceObject method checks that the stream requesting to do
      replacement can be trusted.  The first occurrence of each object written
      into the serialization stream is passed to replaceObject.  Subsequent
      references to the object are replaced by the object returned by the
      original call to replaceObject.  To ensure that the private state of
      objects is not unintentionally exposed, only trusted streams may use
      replaceObject.
      <p>The ObjectOutputStream.writeObject method takes a parameter of type
      Object (as opposed to type Serializable) to allow for cases where
      non-serializable objects are replaced by serializable ones.
      </p><p>When a subclass is replacing objects it must insure that either a
      complementary substitution must be made during deserialization or that
      the substituted object is compatible with every field where the
      reference will be stored.  Objects whose type is not a subclass of the
      type of the field or array element abort the serialization by raising an
      exception and the object is not be stored.
      </p><p>This method is called only once when each object is first
      encountered.  All subsequent references to the object will be redirected
      to the new object. This method should return the object to be
      substituted or the original object.
      </p><p>Null can be returned as the object to be substituted, but may cause
      NullReferenceException in classes that contain references to the
      original object since they may be expecting an object instead of
      null.
      @param   obj the object to be replaced
      @return  the alternate object that replaced the specified one
      @throws  IOException Any exception thrown by the underlying
               OutputStream.</p></div>
<a id="L587" name="L587"></a> 587     <strong class="reserved">protected</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1381.html#L1144" title="Referred from 1144 in src/java/io/ObjectOutputStream.java.">replaceObject</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L588" name="L588"></a> 588         <strong class="reserved">return</strong> obj;
<a id="L589" name="L589"></a> 589     <em class="brace">}</em>
<a id="L590" name="L590"></a> 590 
<div class="comment">
      Enable the stream to do replacement of objects in the stream.  When
      enabled, the replaceObject method is called for every object being
      serialized.
      <p>If <code>enable</code> is true, and there is a security manager
      installed, this method first calls the security manager's
      <code>checkPermission</code> method with a
      <code>SerializablePermission("enableSubstitution")</code> permission to
      ensure it's ok to enable the stream to do replacement of objects in the
      stream.
      @param   enable boolean parameter to enable replacement of objects
      @return  the previous setting before this method was invoked
      @throws  SecurityException if a security manager exists and its
               <code>checkPermission</code> method denies enabling the stream
               to do replacement of objects in the stream.
      @see SecurityManager#checkPermission
      @see java.io.SerializablePermission</p></div>
<a id="L611" name="L611"></a> 611     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../S/6987.html#L106" title="Referred from 106 in src/com/sun/corba/se/impl/encoding/IDLJavaSerializationOutputStream.java.">enableReplaceObject</a>(<strong class="reserved">boolean</strong> <a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>)
<a id="L612" name="L612"></a> 612         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L613" name="L613"></a> 613     <em class="brace">{</em>
<a id="L614" name="L614"></a> 614         <strong class="reserved">if</strong> (<a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a> == enableReplace) <em class="brace">{</em>
<a id="L615" name="L615"></a> 615             <strong class="reserved">return</strong> <a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>;
<a id="L616" name="L616"></a> 616         <em class="brace">}</em>
<a id="L617" name="L617"></a> 617         <strong class="reserved">if</strong> (<a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>) <em class="brace">{</em>
<a id="L618" name="L618"></a> 618             <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L619" name="L619"></a> 619             <strong class="reserved">if</strong> (sm != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L620" name="L620"></a> 620                 sm.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SUBSTITUTION_PERMISSION);
<a id="L621" name="L621"></a> 621             <em class="brace">}</em>
<a id="L622" name="L622"></a> 622         <em class="brace">}</em>
<a id="L623" name="L623"></a> 623         enableReplace = <a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>;
<a id="L624" name="L624"></a> 624         <strong class="reserved">return</strong> !enableReplace;
<a id="L625" name="L625"></a> 625     <em class="brace">}</em>
<a id="L626" name="L626"></a> 626 
<div class="comment">
      The writeStreamHeader method is provided so subclasses can append or
      prepend their own header to the stream.  It writes the magic number and
      version to the stream.
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L635" name="L635"></a> 635     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L246" title="Referred from 246 in src/java/io/ObjectOutputStream.java.">writeStreamHeader</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L636" name="L636"></a> 636         bout.<a href="../D/37158.html" title="Multiple defined in 12 places.">writeShort</a>(STREAM_MAGIC);
<a id="L637" name="L637"></a> 637         bout.<a href="../D/37158.html" title="Multiple defined in 12 places.">writeShort</a>(STREAM_VERSION);
<a id="L638" name="L638"></a> 638     <em class="brace">}</em>
<a id="L639" name="L639"></a> 639 
<div class="comment">
      Write the specified class descriptor to the ObjectOutputStream.  Class
      descriptors are used to identify the classes of objects written to the
      stream.  Subclasses of ObjectOutputStream may override this method to
      customize the way in which class descriptors are written to the
      serialization stream.  The corresponding method in ObjectInputStream,
      <code>readClassDescriptor</code>, should then be overridden to
      reconstitute the class descriptor from its custom stream representation.
      By default, this method writes class descriptors according to the format
      defined in the Object Serialization specification.
      <p>Note that this method will only be called if the ObjectOutputStream
      is not using the old serialization stream format (set by calling
      ObjectOutputStream's <code>useProtocolVersion</code> method).  If this
      serialization stream is using the old format
      (<code>PROTOCOL_VERSION_1</code>), the class descriptor will be written
      internally in a manner that cannot be overridden or customized.
      @param   desc class descriptor to write to the stream
      @throws  IOException If an I/O error has occurred.
      @see java.io.ObjectInputStream#readClassDescriptor()
      @see #useProtocolVersion(int)
      @see java.io.ObjectStreamConstants#PROTOCOL_VERSION_1
      @since 1.3</p></div>
<a id="L665" name="L665"></a> 665     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1282" title="Referred from 1282 in src/java/io/ObjectOutputStream.java.">writeClassDescriptor</a>(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L666" name="L666"></a> 666         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L667" name="L667"></a> 667     <em class="brace">{</em>
<a id="L668" name="L668"></a> 668         desc.<a href="../S/1402.html#L720" title="Defined at 720 in src/java/io/ObjectStreamClass.java.">writeNonProxy</a>(<strong class="reserved">this</strong>);
<a id="L669" name="L669"></a> 669     <em class="brace">}</em>
<a id="L670" name="L670"></a> 670 
<div class="comment">
      Writes a byte. This method will block until the byte is actually
      written.
      @param   val the byte to be written to the stream
      @throws  IOException If an I/O error has occurred.</div>
<a id="L678" name="L678"></a> 678     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L679" name="L679"></a> 679         bout.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L680" name="L680"></a> 680     <em class="brace">}</em>
<a id="L681" name="L681"></a> 681 
<div class="comment">
      Writes an array of bytes. This method will block until the bytes are
      actually written.
      @param   buf the data to be written
      @throws  IOException If an I/O error has occurred.</div>
<a id="L689" name="L689"></a> 689     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L690" name="L690"></a> 690         bout.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">false</strong>);
<a id="L691" name="L691"></a> 691     <em class="brace">}</em>
<a id="L692" name="L692"></a> 692 
<div class="comment">
      Writes a sub array of bytes.
      @param   buf the data to be written
      @param   off the start offset in the data
      @param   len the number of bytes that are written
      @throws  IOException If an I/O error has occurred.</div>
<a id="L701" name="L701"></a> 701     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L702" name="L702"></a> 702         <strong class="reserved">if</strong> (<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L704" name="L704"></a> 704         <em class="brace">}</em>
<a id="L705" name="L705"></a> 705         <strong class="reserved">int</strong> endoff = off + len;
<a id="L706" name="L706"></a> 706         <strong class="reserved">if</strong> (off &lt; 0 || len &lt; 0 || endoff &gt; <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || endoff &lt; 0) <em class="brace">{</em>
<a id="L707" name="L707"></a> 707             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a>();
<a id="L708" name="L708"></a> 708         <em class="brace">}</em>
<a id="L709" name="L709"></a> 709         bout.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, off, len, <strong class="reserved">false</strong>);
<a id="L710" name="L710"></a> 710     <em class="brace">}</em>
<a id="L711" name="L711"></a> 711 
<div class="comment">
      Flushes the stream. This will write any buffered output bytes and flush
      through to the underlying stream.
      @throws  IOException If an I/O error has occurred.</div>
<a id="L718" name="L718"></a> 718     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14697.html" title="Multiple referred from 199 places.">flush</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L719" name="L719"></a> 719         bout.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L720" name="L720"></a> 720     <em class="brace">}</em>
<a id="L721" name="L721"></a> 721 
<div class="comment">
      Drain any buffered data in ObjectOutputStream.  Similar to flush but
      does not propagate the flush to the underlying stream.
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L729" name="L729"></a> 729     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/13512.html" title="Multiple referred from 10 places.">drain</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L730" name="L730"></a> 730         bout.<a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L731" name="L731"></a> 731     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732 
<div class="comment">
      Closes the stream. This method must be called to release any resources
      associated with the stream.
      @throws  IOException If an I/O error has occurred.</div>
<a id="L739" name="L739"></a> 739     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L740" name="L740"></a> 740         <a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L741" name="L741"></a> 741         <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L742" name="L742"></a> 742         bout.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L743" name="L743"></a> 743     <em class="brace">}</em>
<a id="L744" name="L744"></a> 744 
<div class="comment">
      Writes a boolean.
      @param   val the boolean to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L752" name="L752"></a> 752     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30570.html" title="Multiple referred from 11 places.">writeBoolean</a>(<strong class="reserved">boolean</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L753" name="L753"></a> 753         bout.<a href="../D/37001.html" title="Multiple defined in 10 places.">writeBoolean</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L754" name="L754"></a> 754     <em class="brace">}</em>
<a id="L755" name="L755"></a> 755 
<div class="comment">
      Writes an 8 bit byte.
      @param   val the byte value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L763" name="L763"></a> 763     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30572.html" title="Multiple referred from 221 places.">writeByte</a>(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>  <em class="brace">{</em>
<a id="L764" name="L764"></a> 764         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L765" name="L765"></a> 765     <em class="brace">}</em>
<a id="L766" name="L766"></a> 766 
<div class="comment">
      Writes a 16 bit short.
      @param   val the short value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L774" name="L774"></a> 774     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30710.html" title="Multiple referred from 146 places.">writeShort</a>(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L775" name="L775"></a> 775         bout.<a href="../D/37158.html" title="Multiple defined in 12 places.">writeShort</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L776" name="L776"></a> 776     <em class="brace">}</em>
<a id="L777" name="L777"></a> 777 
<div class="comment">
      Writes a 16 bit char.
      @param   val the char value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L785" name="L785"></a> 785     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30576.html" title="Multiple referred from 5 places.">writeChar</a>(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L786" name="L786"></a> 786         bout.<a href="../D/37008.html" title="Multiple defined in 8 places.">writeChar</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L787" name="L787"></a> 787     <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
      Writes a 32 bit int.
      @param   val the integer value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L796" name="L796"></a> 796     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30645.html" title="Multiple referred from 202 places.">writeInt</a>(<strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L797" name="L797"></a> 797         bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L798" name="L798"></a> 798     <em class="brace">}</em>
<a id="L799" name="L799"></a> 799 
<div class="comment">
      Writes a 64 bit long.
      @param   val the long value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L807" name="L807"></a> 807     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30662.html" title="Multiple referred from 32 places.">writeLong</a>(<strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L808" name="L808"></a> 808         bout.<a href="../D/37103.html" title="Multiple defined in 11 places.">writeLong</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L809" name="L809"></a> 809     <em class="brace">}</em>
<a id="L810" name="L810"></a> 810 
<div class="comment">
      Writes a 32 bit float.
      @param   val the float value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L818" name="L818"></a> 818     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30628.html" title="Multiple referred from 8 places.">writeFloat</a>(<strong class="reserved">float</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L819" name="L819"></a> 819         bout.<a href="../D/37067.html" title="Multiple defined in 10 places.">writeFloat</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L820" name="L820"></a> 820     <em class="brace">}</em>
<a id="L821" name="L821"></a> 821 
<div class="comment">
      Writes a 64 bit double.
      @param   val the double value to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L829" name="L829"></a> 829     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30601.html" title="Multiple referred from 7 places.">writeDouble</a>(<strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L830" name="L830"></a> 830         bout.<a href="../D/37038.html" title="Multiple defined in 10 places.">writeDouble</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L831" name="L831"></a> 831     <em class="brace">}</em>
<a id="L832" name="L832"></a> 832 
<div class="comment">
      Writes a String as a sequence of bytes.
      @param   str the String of bytes to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L840" name="L840"></a> 840     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30573.html" title="Multiple referred from 31 places.">writeBytes</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L841" name="L841"></a> 841         bout.<a href="../D/37004.html" title="Multiple defined in 13 places.">writeBytes</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L842" name="L842"></a> 842     <em class="brace">}</em>
<a id="L843" name="L843"></a> 843 
<div class="comment">
      Writes a String as a sequence of chars.
      @param   str the String of chars to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L851" name="L851"></a> 851     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30581.html" title="Multiple referred from 4 places.">writeChars</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L852" name="L852"></a> 852         bout.<a href="../D/37014.html" title="Multiple defined in 11 places.">writeChars</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L853" name="L853"></a> 853     <em class="brace">}</em>
<a id="L854" name="L854"></a> 854 
<div class="comment">
      Primitive data write of this String in
      <a href="DataInput.html#modified-utf-8">modified UTF-8</a>
      format.  Note that there is a
      significant difference between writing a String into the stream as
      primitive data or as an Object. A String instance written by writeObject
      is written into the stream as a String initially. Future writeObject()
      calls write references to the string into the stream.
      @param   str the String to be written
      @throws  IOException if I/O errors occur while writing to the underlying
               stream</div>
<a id="L868" name="L868"></a> 868     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30744.html" title="Multiple referred from 84 places.">writeUTF</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L869" name="L869"></a> 869         bout.<a href="../D/37198.html" title="Multiple defined in 10 places.">writeUTF</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L870" name="L870"></a> 870     <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<div class="comment">
      Provide programmatic access to the persistent fields to be written
      to ObjectOutput.
      @since 1.2</div>
<a id="L878" name="L878"></a> 878     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/6354.html" title="Multiple referred from 56 places.">PutField</a> <em class="brace">{</em>
<a id="L879" name="L879"></a> 879 
<div class="comment">
          Put the value of the named boolean field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>boolean</code></div>
<a id="L890" name="L890"></a> 890         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">boolean</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L891" name="L891"></a> 891 
<div class="comment">
          Put the value of the named byte field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>byte</code></div>
<a id="L902" name="L902"></a> 902         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">byte</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L903" name="L903"></a> 903 
<div class="comment">
          Put the value of the named char field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>char</code></div>
<a id="L914" name="L914"></a> 914         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">char</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L915" name="L915"></a> 915 
<div class="comment">
          Put the value of the named short field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>short</code></div>
<a id="L926" name="L926"></a> 926         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">short</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L927" name="L927"></a> 927 
<div class="comment">
          Put the value of the named int field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>int</code></div>
<a id="L938" name="L938"></a> 938         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L939" name="L939"></a> 939 
<div class="comment">
          Put the value of the named long field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>long</code></div>
<a id="L950" name="L950"></a> 950         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L951" name="L951"></a> 951 
<div class="comment">
          Put the value of the named float field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>float</code></div>
<a id="L962" name="L962"></a> 962         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">float</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L963" name="L963"></a> 963 
<div class="comment">
          Put the value of the named double field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not
          <code>double</code></div>
<a id="L974" name="L974"></a> 974         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L975" name="L975"></a> 975 
<div class="comment">
          Put the value of the named Object field into the persistent field.
          @param  name the name of the serializable field
          @param  val the value to assign to the field
                  (which may be <code>null</code>)
          @throws IllegalArgumentException if <code>name</code> does not
          match the name of a serializable field for the class whose fields
          are being written, or if the type of the named field is not a
          reference type</div>
<a id="L987" name="L987"></a> 987         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L988" name="L988"></a> 988 
<div class="comment">
          Write the data and fields to the specified ObjectOutput stream,
          which must be the same stream that produced this
          <code>PutField</code> object.
          @param  out the stream to write the data and fields to
          @throws IOException if I/O errors occur while writing to the
                  underlying stream
          @throws IllegalArgumentException if the specified stream is not
                  the same stream that produced this <code>PutField</code>
                  object
          @deprecated This method does not write the values contained by this
                  <code>PutField</code> object in a proper format, and may
                  result in corruption of the serialization stream.  The
                  correct way to write <code>PutField</code> data is by
                  calling the {@link java.io.ObjectOutputStream#writeFields()}
                  method.</div>
<a id="L1007" name="L1007"></a>1007         @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L1008" name="L1008"></a>1008         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<a href="../S/1380.html#L39" title="Defined at 39 in src/java/io/ObjectOutput.java.">ObjectOutput</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1009" name="L1009"></a>1009     <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010 
<a id="L1011" name="L1011"></a>1011 
<div class="comment">
      Returns protocol version in use.</div>
<a id="L1015" name="L1015"></a>1015     <strong class="reserved">int</strong> <a href="../S/1402.html#L727" title="Referred from 727 in src/java/io/ObjectStreamClass.java.">getProtocolVersion</a>() <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016         <strong class="reserved">return</strong> protocol;
<a id="L1017" name="L1017"></a>1017     <em class="brace">}</em>
<a id="L1018" name="L1018"></a>1018 
<div class="comment">
      Writes string without allowing it to be replaced in stream.  Used by
      ObjectStreamClass to write class descriptor type strings.</div>
<a id="L1023" name="L1023"></a>1023     <strong class="reserved">void</strong> <a href="../S/1402.html#L748" title="Referred from 748 in src/java/io/ObjectStreamClass.java.">writeTypeString</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1024" name="L1024"></a>1024         <strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>;
<a id="L1025" name="L1025"></a>1025         <strong class="reserved">if</strong> (<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1026" name="L1026"></a>1026             <a href="../S/1381.html#L1196" title="Defined at 1196 in src/java/io/ObjectOutputStream.java.">writeNull</a>();
<a id="L1027" name="L1027"></a>1027         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = handles.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>)) != -1) <em class="brace">{</em>
<a id="L1028" name="L1028"></a>1028             <a href="../S/1381.html#L1203" title="Defined at 1203 in src/java/io/ObjectOutputStream.java.">writeHandle</a>(<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>);
<a id="L1029" name="L1029"></a>1029         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1030" name="L1030"></a>1030             <a href="../D/37170.html" title="Multiple defined in 4 places.">writeString</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, <strong class="reserved">false</strong>);
<a id="L1031" name="L1031"></a>1031         <em class="brace">}</em>
<a id="L1032" name="L1032"></a>1032     <em class="brace">}</em>
<a id="L1033" name="L1033"></a>1033 
<div class="comment">
      Verifies that this (possibly subclass) instance can be constructed
      without violating security constraints: the subclass must not override
      security-sensitive non-final methods, or else the
      "enableSubclassImplementation" SerializablePermission is checked.</div>
<a id="L1040" name="L1040"></a>1040     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30127.html" title="Multiple referred from 2 places.">verifySubclass</a>() <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L1042" name="L1042"></a>1042         <strong class="reserved">if</strong> (cl == <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1043" name="L1043"></a>1043             <strong class="reserved">return</strong>;
<a id="L1044" name="L1044"></a>1044         <em class="brace">}</em>
<a id="L1045" name="L1045"></a>1045         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L1046" name="L1046"></a>1046         <strong class="reserved">if</strong> (sm == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1047" name="L1047"></a>1047             <strong class="reserved">return</strong>;
<a id="L1048" name="L1048"></a>1048         <em class="brace">}</em>
<a id="L1049" name="L1049"></a>1049         <a href="../D/29849.html" title="Multiple defined in 2 places.">processQueue</a>(<a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAuditsQueue, <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAudits);
<a id="L1050" name="L1050"></a>1050         <a href="../D/9617.html" title="Multiple defined in 2 places.">WeakClassKey</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = <strong class="reserved">new</strong> <a href="../D/9617.html" title="Multiple defined in 2 places.">WeakClassKey</a>(cl, <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAuditsQueue);
<a id="L1051" name="L1051"></a>1051         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAudits.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1052" name="L1052"></a>1052         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1053" name="L1053"></a>1053             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/11639.html" title="Multiple defined in 3 places.">auditSubclass</a>(cl));
<a id="L1054" name="L1054"></a>1054             <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAudits.<a href="../D/30006.html" title="Multiple defined in 13 places.">putIfAbsent</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1055" name="L1055"></a>1055         <em class="brace">}</em>
<a id="L1056" name="L1056"></a>1056         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>()) <em class="brace">{</em>
<a id="L1057" name="L1057"></a>1057             <strong class="reserved">return</strong>;
<a id="L1058" name="L1058"></a>1058         <em class="brace">}</em>
<a id="L1059" name="L1059"></a>1059         sm.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SUBCLASS_IMPLEMENTATION_PERMISSION);
<a id="L1060" name="L1060"></a>1060     <em class="brace">}</em>
<a id="L1061" name="L1061"></a>1061 
<div class="comment">
      Performs reflective checks on given subclass to verify that it doesn't
      override security-sensitive non-final methods.  Returns true if subclass
      is "safe", false otherwise.</div>
<a id="L1067" name="L1067"></a>1067     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/10410.html" title="Multiple referred from 3 places.">auditSubclass</a>(<strong class="reserved">final</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; subcl) <em class="brace">{</em>
<a id="L1068" name="L1068"></a>1068         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L1069" name="L1069"></a>1069             <strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;() <em class="brace">{</em>
<a id="L1070" name="L1070"></a>1070                 <strong class="reserved">public</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L1071" name="L1071"></a>1071                     <strong class="reserved">for</strong> (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = subcl;
<a id="L1072" name="L1072"></a>1072                          cl != <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<strong class="reserved">class</strong>;
<a id="L1073" name="L1073"></a>1073                          cl = cl.<a href="../D/22863.html" title="Multiple defined in 4 places.">getSuperclass</a>())
<a id="L1074" name="L1074"></a>1074                     <em class="brace">{</em>
<a id="L1075" name="L1075"></a>1075                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1076" name="L1076"></a>1076                             cl.<a href="../D/18255.html" title="Multiple defined in 2 places.">getDeclaredMethod</a>(
<a id="L1077" name="L1077"></a>1077                                 "writeUnshared", <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <em class="brace">{</em> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong> <em class="brace">}</em>);
<a id="L1078" name="L1078"></a>1078                             <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L1079" name="L1079"></a>1079                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080                         <em class="brace">}</em>
<a id="L1081" name="L1081"></a>1081                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082                             cl.<a href="../D/18255.html" title="Multiple defined in 2 places.">getDeclaredMethod</a>("putFields", (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[]) <strong class="reserved">null</strong>);
<a id="L1083" name="L1083"></a>1083                             <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L1084" name="L1084"></a>1084                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1085" name="L1085"></a>1085                         <em class="brace">}</em>
<a id="L1086" name="L1086"></a>1086                     <em class="brace">}</em>
<a id="L1087" name="L1087"></a>1087                     <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE;
<a id="L1088" name="L1088"></a>1088                 <em class="brace">}</em>
<a id="L1089" name="L1089"></a>1089             <em class="brace">}</em>
<a id="L1090" name="L1090"></a>1090         );
<a id="L1091" name="L1091"></a>1091         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L1092" name="L1092"></a>1092     <em class="brace">}</em>
<a id="L1093" name="L1093"></a>1093 
<div class="comment">
      Clears internal data structures.</div>
<a id="L1097" name="L1097"></a>1097     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L1098" name="L1098"></a>1098         subs.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1099" name="L1099"></a>1099         handles.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1100" name="L1100"></a>1100     <em class="brace">}</em>
<a id="L1101" name="L1101"></a>1101 
<div class="comment">
      Underlying writeObject/writeUnshared implementation.</div>
<a id="L1105" name="L1105"></a>1105     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30681.html" title="Multiple referred from 6 places.">writeObject0</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <strong class="reserved">boolean</strong> unshared)
<a id="L1106" name="L1106"></a>1106         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1107" name="L1107"></a>1107     <em class="brace">{</em>
<a id="L1108" name="L1108"></a>1108         <strong class="reserved">boolean</strong> oldMode = bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1109" name="L1109"></a>1109         <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>++;
<a id="L1110" name="L1110"></a>1110         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1111" name="L1111"></a>1111             <em class="comment">// handle previously written and non-replaceable objects</em>
<a id="L1112" name="L1112"></a>1112             <strong class="reserved">int</strong> h;
<a id="L1113" name="L1113"></a>1113             <strong class="reserved">if</strong> ((obj = subs.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(obj)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114                 <a href="../S/1381.html#L1196" title="Defined at 1196 in src/java/io/ObjectOutputStream.java.">writeNull</a>();
<a id="L1115" name="L1115"></a>1115                 <strong class="reserved">return</strong>;
<a id="L1116" name="L1116"></a>1116             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!unshared &amp;&amp; (h = handles.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(obj)) != -1) <em class="brace">{</em>
<a id="L1117" name="L1117"></a>1117                 <a href="../S/1381.html#L1203" title="Defined at 1203 in src/java/io/ObjectOutputStream.java.">writeHandle</a>(h);
<a id="L1118" name="L1118"></a>1118                 <strong class="reserved">return</strong>;
<a id="L1119" name="L1119"></a>1119             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>) <em class="brace">{</em>
<a id="L1120" name="L1120"></a>1120                 <a href="../D/37016.html" title="Multiple defined in 2 places.">writeClass</a>((<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>) obj, unshared);
<a id="L1121" name="L1121"></a>1121                 <strong class="reserved">return</strong>;
<a id="L1122" name="L1122"></a>1122             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>) <em class="brace">{</em>
<a id="L1123" name="L1123"></a>1123                 <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>((<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>) obj, unshared);
<a id="L1124" name="L1124"></a>1124                 <strong class="reserved">return</strong>;
<a id="L1125" name="L1125"></a>1125             <em class="brace">}</em>
<a id="L1126" name="L1126"></a>1126 
<a id="L1127" name="L1127"></a>1127             <em class="comment">// check for replacement object</em>
<a id="L1128" name="L1128"></a>1128             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> orig = obj;
<a id="L1129" name="L1129"></a>1129             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = obj.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L1130" name="L1130"></a>1130             <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc;
<a id="L1131" name="L1131"></a>1131             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L1132" name="L1132"></a>1132                 <em class="comment">// REMIND: skip this check for strings/arrays?</em>
<a id="L1133" name="L1133"></a>1133                 <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; repCl;
<a id="L1134" name="L1134"></a>1134                 desc = <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(cl, <strong class="reserved">true</strong>);
<a id="L1135" name="L1135"></a>1135                 <strong class="reserved">if</strong> (!desc.<a href="../S/1402.html#L940" title="Defined at 940 in src/java/io/ObjectStreamClass.java.">hasWriteReplaceMethod</a>() ||
<a id="L1136" name="L1136"></a>1136                     (obj = desc.<a href="../S/1402.html#L1070" title="Defined at 1070 in src/java/io/ObjectStreamClass.java.">invokeWriteReplace</a>(obj)) == <strong class="reserved">null</strong> ||
<a id="L1137" name="L1137"></a>1137                     (repCl = obj.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>()) == cl)
<a id="L1138" name="L1138"></a>1138                 <em class="brace">{</em>
<a id="L1139" name="L1139"></a>1139                     <strong class="reserved">break</strong>;
<a id="L1140" name="L1140"></a>1140                 <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141                 cl = repCl;
<a id="L1142" name="L1142"></a>1142             <em class="brace">}</em>
<a id="L1143" name="L1143"></a>1143             <strong class="reserved">if</strong> (enableReplace) <em class="brace">{</em>
<a id="L1144" name="L1144"></a>1144                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> rep = <a href="../D/31057.html" title="Multiple defined in 3 places.">replaceObject</a>(obj);
<a id="L1145" name="L1145"></a>1145                 <strong class="reserved">if</strong> (rep != obj &amp;&amp; rep != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1146" name="L1146"></a>1146                     cl = rep.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L1147" name="L1147"></a>1147                     desc = <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(cl, <strong class="reserved">true</strong>);
<a id="L1148" name="L1148"></a>1148                 <em class="brace">}</em>
<a id="L1149" name="L1149"></a>1149                 obj = rep;
<a id="L1150" name="L1150"></a>1150             <em class="brace">}</em>
<a id="L1151" name="L1151"></a>1151 
<a id="L1152" name="L1152"></a>1152             <em class="comment">// if object replaced, run through original checks a second time</em>
<a id="L1153" name="L1153"></a>1153             <strong class="reserved">if</strong> (obj != orig) <em class="brace">{</em>
<a id="L1154" name="L1154"></a>1154                 subs.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(orig, obj);
<a id="L1155" name="L1155"></a>1155                 <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1156" name="L1156"></a>1156                     <a href="../S/1381.html#L1196" title="Defined at 1196 in src/java/io/ObjectOutputStream.java.">writeNull</a>();
<a id="L1157" name="L1157"></a>1157                     <strong class="reserved">return</strong>;
<a id="L1158" name="L1158"></a>1158                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!unshared &amp;&amp; (h = handles.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(obj)) != -1) <em class="brace">{</em>
<a id="L1159" name="L1159"></a>1159                     <a href="../S/1381.html#L1203" title="Defined at 1203 in src/java/io/ObjectOutputStream.java.">writeHandle</a>(h);
<a id="L1160" name="L1160"></a>1160                     <strong class="reserved">return</strong>;
<a id="L1161" name="L1161"></a>1161                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>) <em class="brace">{</em>
<a id="L1162" name="L1162"></a>1162                     <a href="../D/37016.html" title="Multiple defined in 2 places.">writeClass</a>((<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>) obj, unshared);
<a id="L1163" name="L1163"></a>1163                     <strong class="reserved">return</strong>;
<a id="L1164" name="L1164"></a>1164                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>) <em class="brace">{</em>
<a id="L1165" name="L1165"></a>1165                     <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>((<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>) obj, unshared);
<a id="L1166" name="L1166"></a>1166                     <strong class="reserved">return</strong>;
<a id="L1167" name="L1167"></a>1167                 <em class="brace">}</em>
<a id="L1168" name="L1168"></a>1168             <em class="brace">}</em>
<a id="L1169" name="L1169"></a>1169 
<a id="L1170" name="L1170"></a>1170             <em class="comment">// remaining cases</em>
<a id="L1171" name="L1171"></a>1171             <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <em class="brace">{</em>
<a id="L1172" name="L1172"></a>1172                 <a href="../D/37170.html" title="Multiple defined in 4 places.">writeString</a>((<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) obj, unshared);
<a id="L1173" name="L1173"></a>1173             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (cl.<a href="../D/25208.html" title="Multiple defined in 5 places.">isArray</a>()) <em class="brace">{</em>
<a id="L1174" name="L1174"></a>1174                 <a href="../D/36979.html" title="Multiple defined in 4 places.">writeArray</a>(obj, desc, unshared);
<a id="L1175" name="L1175"></a>1175             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>) <em class="brace">{</em>
<a id="L1176" name="L1176"></a>1176                 <a href="../S/1381.html#L1396" title="Defined at 1396 in src/java/io/ObjectOutputStream.java.">writeEnum</a>((<a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>&lt;?&gt;) obj, desc, unshared);
<a id="L1177" name="L1177"></a>1177             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>) <em class="brace">{</em>
<a id="L1178" name="L1178"></a>1178                 <a href="../S/1381.html#L1413" title="Defined at 1413 in src/java/io/ObjectOutputStream.java.">writeOrdinaryObject</a>(obj, desc, unshared);
<a id="L1179" name="L1179"></a>1179             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1180" name="L1180"></a>1180                 <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1181" name="L1181"></a>1181                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1454.html#L36" title="Defined at 36 in src/java/io/NotSerializableException.java.">NotSerializableException</a>(
<a id="L1182" name="L1182"></a>1182                         cl.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\n" + debugInfoStack.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1183" name="L1183"></a>1183                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1184" name="L1184"></a>1184                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1454.html#L36" title="Defined at 36 in src/java/io/NotSerializableException.java.">NotSerializableException</a>(cl.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>());
<a id="L1185" name="L1185"></a>1185                 <em class="brace">}</em>
<a id="L1186" name="L1186"></a>1186             <em class="brace">}</em>
<a id="L1187" name="L1187"></a>1187         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1188" name="L1188"></a>1188             <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>--;
<a id="L1189" name="L1189"></a>1189             bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(oldMode);
<a id="L1190" name="L1190"></a>1190         <em class="brace">}</em>
<a id="L1191" name="L1191"></a>1191     <em class="brace">}</em>
<a id="L1192" name="L1192"></a>1192 
<div class="comment">
      Writes null code to stream.</div>
<a id="L1196" name="L1196"></a>1196     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30678.html" title="Multiple referred from 4 places.">writeNull</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1197" name="L1197"></a>1197         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_NULL);
<a id="L1198" name="L1198"></a>1198     <em class="brace">}</em>
<a id="L1199" name="L1199"></a>1199 
<div class="comment">
      Writes given object handle to stream.</div>
<a id="L1203" name="L1203"></a>1203     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30634.html" title="Multiple referred from 4 places.">writeHandle</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1204" name="L1204"></a>1204         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_REFERENCE);
<a id="L1205" name="L1205"></a>1205         bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(baseWireHandle + <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>);
<a id="L1206" name="L1206"></a>1206     <em class="brace">}</em>
<a id="L1207" name="L1207"></a>1207 
<div class="comment">
      Writes representation of given class to stream.</div>
<a id="L1211" name="L1211"></a>1211     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30583.html" title="Multiple referred from 3 places.">writeClass</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl, <strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_CLASS);
<a id="L1213" name="L1213"></a>1213         <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(cl, <strong class="reserved">true</strong>), <strong class="reserved">false</strong>);
<a id="L1214" name="L1214"></a>1214         handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : cl);
<a id="L1215" name="L1215"></a>1215     <em class="brace">}</em>
<a id="L1216" name="L1216"></a>1216 
<div class="comment">
      Writes representation of given class descriptor to stream.</div>
<a id="L1220" name="L1220"></a>1220     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30585.html" title="Multiple referred from 8 places.">writeClassDesc</a>(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc, <strong class="reserved">boolean</strong> unshared)
<a id="L1221" name="L1221"></a>1221         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1222" name="L1222"></a>1222     <em class="brace">{</em>
<a id="L1223" name="L1223"></a>1223         <strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>;
<a id="L1224" name="L1224"></a>1224         <strong class="reserved">if</strong> (desc == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1225" name="L1225"></a>1225             <a href="../S/1381.html#L1196" title="Defined at 1196 in src/java/io/ObjectOutputStream.java.">writeNull</a>();
<a id="L1226" name="L1226"></a>1226         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!unshared &amp;&amp; (<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = handles.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(desc)) != -1) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227             <a href="../S/1381.html#L1203" title="Defined at 1203 in src/java/io/ObjectOutputStream.java.">writeHandle</a>(<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>);
<a id="L1228" name="L1228"></a>1228         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (desc.<a href="../D/26110.html" title="Multiple defined in 2 places.">isProxy</a>()) <em class="brace">{</em>
<a id="L1229" name="L1229"></a>1229             <a href="../S/1381.html#L1244" title="Defined at 1244 in src/java/io/ObjectOutputStream.java.">writeProxyDesc</a>(desc, unshared);
<a id="L1230" name="L1230"></a>1230         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231             <a href="../S/1381.html#L1272" title="Defined at 1272 in src/java/io/ObjectOutputStream.java.">writeNonProxyDesc</a>(desc, unshared);
<a id="L1232" name="L1232"></a>1232         <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233     <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234 
<a id="L1235" name="L1235"></a>1235     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21314.html" title="Multiple referred from 3 places.">isCustomSubclass</a>() <em class="brace">{</em>
<a id="L1236" name="L1236"></a>1236         <em class="comment">// Return true if this class is a custom subclass of ObjectOutputStream</em>
<a id="L1237" name="L1237"></a>1237         <strong class="reserved">return</strong> <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>()
<a id="L1238" name="L1238"></a>1238                    != <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<strong class="reserved">class</strong>.<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>();
<a id="L1239" name="L1239"></a>1239     <em class="brace">}</em>
<a id="L1240" name="L1240"></a>1240 
<div class="comment">
      Writes class descriptor representing a dynamic proxy class to stream.</div>
<a id="L1244" name="L1244"></a>1244     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1229" title="Referred from 1229 in src/java/io/ObjectOutputStream.java.">writeProxyDesc</a>(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc, <strong class="reserved">boolean</strong> unshared)
<a id="L1245" name="L1245"></a>1245         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1246" name="L1246"></a>1246     <em class="brace">{</em>
<a id="L1247" name="L1247"></a>1247         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_PROXYCLASSDESC);
<a id="L1248" name="L1248"></a>1248         handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : desc);
<a id="L1249" name="L1249"></a>1249 
<a id="L1250" name="L1250"></a>1250         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1251" name="L1251"></a>1251         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] ifaces = cl.<a href="../D/19802.html" title="Multiple defined in 13 places.">getInterfaces</a>();
<a id="L1252" name="L1252"></a>1252         bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(ifaces.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1253" name="L1253"></a>1253         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ifaces.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1254" name="L1254"></a>1254             bout.<a href="../D/37198.html" title="Multiple defined in 10 places.">writeUTF</a>(ifaces[i].<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>());
<a id="L1255" name="L1255"></a>1255         <em class="brace">}</em>
<a id="L1256" name="L1256"></a>1256 
<a id="L1257" name="L1257"></a>1257         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1258" name="L1258"></a>1258         <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/25389.html" title="Multiple defined in 2 places.">isCustomSubclass</a>()) <em class="brace">{</em>
<a id="L1259" name="L1259"></a>1259             ReflectUtil.<a href="../D/12578.html" title="Multiple defined in 3 places.">checkPackageAccess</a>(cl);
<a id="L1260" name="L1260"></a>1260         <em class="brace">}</em>
<a id="L1261" name="L1261"></a>1261         <a href="../S/1381.html#L546" title="Defined at 546 in src/java/io/ObjectOutputStream.java.">annotateProxyClass</a>(cl);
<a id="L1262" name="L1262"></a>1262         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1263" name="L1263"></a>1263         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_ENDBLOCKDATA);
<a id="L1264" name="L1264"></a>1264 
<a id="L1265" name="L1265"></a>1265         <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>(desc.<a href="../S/1402.html#L801" title="Defined at 801 in src/java/io/ObjectStreamClass.java.">getSuperDesc</a>(), <strong class="reserved">false</strong>);
<a id="L1266" name="L1266"></a>1266     <em class="brace">}</em>
<a id="L1267" name="L1267"></a>1267 
<div class="comment">
      Writes class descriptor representing a standard (i.e., not a dynamic
      proxy) class to stream.</div>
<a id="L1272" name="L1272"></a>1272     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1231" title="Referred from 1231 in src/java/io/ObjectOutputStream.java.">writeNonProxyDesc</a>(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc, <strong class="reserved">boolean</strong> unshared)
<a id="L1273" name="L1273"></a>1273         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1274" name="L1274"></a>1274     <em class="brace">{</em>
<a id="L1275" name="L1275"></a>1275         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_CLASSDESC);
<a id="L1276" name="L1276"></a>1276         handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : desc);
<a id="L1277" name="L1277"></a>1277 
<a id="L1278" name="L1278"></a>1278         <strong class="reserved">if</strong> (protocol == PROTOCOL_VERSION_1) <em class="brace">{</em>
<a id="L1279" name="L1279"></a>1279             <em class="comment">// do not invoke class descriptor write hook with old protocol</em>
<a id="L1280" name="L1280"></a>1280             desc.<a href="../S/1402.html#L720" title="Defined at 720 in src/java/io/ObjectStreamClass.java.">writeNonProxy</a>(<strong class="reserved">this</strong>);
<a id="L1281" name="L1281"></a>1281         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1282" name="L1282"></a>1282             <a href="../S/1381.html#L665" title="Defined at 665 in src/java/io/ObjectOutputStream.java.">writeClassDescriptor</a>(desc);
<a id="L1283" name="L1283"></a>1283         <em class="brace">}</em>
<a id="L1284" name="L1284"></a>1284 
<a id="L1285" name="L1285"></a>1285         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1286" name="L1286"></a>1286         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1287" name="L1287"></a>1287         <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/25389.html" title="Multiple defined in 2 places.">isCustomSubclass</a>()) <em class="brace">{</em>
<a id="L1288" name="L1288"></a>1288             ReflectUtil.<a href="../D/12578.html" title="Multiple defined in 3 places.">checkPackageAccess</a>(cl);
<a id="L1289" name="L1289"></a>1289         <em class="brace">}</em>
<a id="L1290" name="L1290"></a>1290         <a href="../D/11339.html" title="Multiple defined in 2 places.">annotateClass</a>(cl);
<a id="L1291" name="L1291"></a>1291         bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1292" name="L1292"></a>1292         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_ENDBLOCKDATA);
<a id="L1293" name="L1293"></a>1293 
<a id="L1294" name="L1294"></a>1294         <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>(desc.<a href="../S/1402.html#L801" title="Defined at 801 in src/java/io/ObjectStreamClass.java.">getSuperDesc</a>(), <strong class="reserved">false</strong>);
<a id="L1295" name="L1295"></a>1295     <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296 
<div class="comment">
      Writes given string to stream, using standard or long UTF format
      depending on string length.</div>
<a id="L1301" name="L1301"></a>1301     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30722.html" title="Multiple referred from 8 places.">writeString</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, <strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1302" name="L1302"></a>1302         handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L1303" name="L1303"></a>1303         <strong class="reserved">long</strong> utflen = bout.<a href="../S/1381.html#L2135" title="Defined at 2135 in src/java/io/ObjectOutputStream.java.">getUTFLength</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L1304" name="L1304"></a>1304         <strong class="reserved">if</strong> (utflen &lt;= 0xFFFF) <em class="brace">{</em>
<a id="L1305" name="L1305"></a>1305             bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_STRING);
<a id="L1306" name="L1306"></a>1306             bout.<a href="../D/37198.html" title="Multiple defined in 10 places.">writeUTF</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, utflen);
<a id="L1307" name="L1307"></a>1307         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1308" name="L1308"></a>1308             bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_LONGSTRING);
<a id="L1309" name="L1309"></a>1309             bout.<a href="../D/37104.html" title="Multiple defined in 2 places.">writeLongUTF</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, utflen);
<a id="L1310" name="L1310"></a>1310         <em class="brace">}</em>
<a id="L1311" name="L1311"></a>1311     <em class="brace">}</em>
<a id="L1312" name="L1312"></a>1312 
<div class="comment">
      Writes given array object to stream.</div>
<a id="L1316" name="L1316"></a>1316     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30554.html" title="Multiple referred from 2 places.">writeArray</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>,
<a id="L1317" name="L1317"></a>1317                             <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc,
<a id="L1318" name="L1318"></a>1318                             <strong class="reserved">boolean</strong> unshared)
<a id="L1319" name="L1319"></a>1319         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1320" name="L1320"></a>1320     <em class="brace">{</em>
<a id="L1321" name="L1321"></a>1321         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_ARRAY);
<a id="L1322" name="L1322"></a>1322         <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>(desc, <strong class="reserved">false</strong>);
<a id="L1323" name="L1323"></a>1323         handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>);
<a id="L1324" name="L1324"></a>1324 
<a id="L1325" name="L1325"></a>1325         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ccl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>().<a href="../D/17880.html" title="Multiple defined in 2 places.">getComponentType</a>();
<a id="L1326" name="L1326"></a>1326         <strong class="reserved">if</strong> (ccl.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327             <strong class="reserved">if</strong> (ccl == <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.TYPE) <em class="brace">{</em>
<a id="L1328" name="L1328"></a>1328                 <strong class="reserved">int</strong>[] ia = (<strong class="reserved">int</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1329" name="L1329"></a>1329                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(ia.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1330" name="L1330"></a>1330                 bout.<a href="../D/37087.html" title="Multiple defined in 3 places.">writeInts</a>(ia, 0, ia.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1331" name="L1331"></a>1331             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../D/1038.html" title="Multiple defined in 2 places.">Byte</a>.TYPE) <em class="brace">{</em>
<a id="L1332" name="L1332"></a>1332                 <strong class="reserved">byte</strong>[] ba = (<strong class="reserved">byte</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1333" name="L1333"></a>1333                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(ba.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1334" name="L1334"></a>1334                 bout.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(ba, 0, ba.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">true</strong>);
<a id="L1335" name="L1335"></a>1335             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.TYPE) <em class="brace">{</em>
<a id="L1336" name="L1336"></a>1336                 <strong class="reserved">long</strong>[] ja = (<strong class="reserved">long</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1337" name="L1337"></a>1337                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(ja.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1338" name="L1338"></a>1338                 bout.<a href="../D/37106.html" title="Multiple defined in 3 places.">writeLongs</a>(ja, 0, ja.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1339" name="L1339"></a>1339             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.TYPE) <em class="brace">{</em>
<a id="L1340" name="L1340"></a>1340                 <strong class="reserved">float</strong>[] fa = (<strong class="reserved">float</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1341" name="L1341"></a>1341                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(fa.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1342" name="L1342"></a>1342                 bout.<a href="../D/37068.html" title="Multiple defined in 3 places.">writeFloats</a>(fa, 0, fa.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1343" name="L1343"></a>1343             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.TYPE) <em class="brace">{</em>
<a id="L1344" name="L1344"></a>1344                 <strong class="reserved">double</strong>[] da = (<strong class="reserved">double</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1345" name="L1345"></a>1345                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(da.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1346" name="L1346"></a>1346                 bout.<a href="../D/37039.html" title="Multiple defined in 3 places.">writeDoubles</a>(da, 0, da.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1347" name="L1347"></a>1347             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a>.TYPE) <em class="brace">{</em>
<a id="L1348" name="L1348"></a>1348                 <strong class="reserved">short</strong>[] sa = (<strong class="reserved">short</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1349" name="L1349"></a>1349                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(sa.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1350" name="L1350"></a>1350                 bout.<a href="../D/37159.html" title="Multiple defined in 3 places.">writeShorts</a>(sa, 0, sa.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1351" name="L1351"></a>1351             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.TYPE) <em class="brace">{</em>
<a id="L1352" name="L1352"></a>1352                 <strong class="reserved">char</strong>[] ca = (<strong class="reserved">char</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1353" name="L1353"></a>1353                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(ca.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1354" name="L1354"></a>1354                 bout.<a href="../D/37014.html" title="Multiple defined in 11 places.">writeChars</a>(ca, 0, ca.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1355" name="L1355"></a>1355             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TYPE) <em class="brace">{</em>
<a id="L1356" name="L1356"></a>1356                 <strong class="reserved">boolean</strong>[] za = (<strong class="reserved">boolean</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1357" name="L1357"></a>1357                 bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(za.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1358" name="L1358"></a>1358                 bout.<a href="../S/1381.html#L2019" title="Defined at 2019 in src/java/io/ObjectOutputStream.java.">writeBooleans</a>(za, 0, za.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1359" name="L1359"></a>1359             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1360" name="L1360"></a>1360                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1361" name="L1361"></a>1361             <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1363" name="L1363"></a>1363             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] objs = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1364" name="L1364"></a>1364             <strong class="reserved">int</strong> len = objs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1365" name="L1365"></a>1365             bout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(len);
<a id="L1366" name="L1366"></a>1366             <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1367" name="L1367"></a>1367                 debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(
<a id="L1368" name="L1368"></a>1368                     "array (class \"" + <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() +
<a id="L1369" name="L1369"></a>1369                     "\", size: " + len  + ")");
<a id="L1370" name="L1370"></a>1370             <em class="brace">}</em>
<a id="L1371" name="L1371"></a>1371             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1372" name="L1372"></a>1372                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; len; i++) <em class="brace">{</em>
<a id="L1373" name="L1373"></a>1373                     <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1374" name="L1374"></a>1374                         debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(
<a id="L1375" name="L1375"></a>1375                             "element of array (index: " + i + ")");
<a id="L1376" name="L1376"></a>1376                     <em class="brace">}</em>
<a id="L1377" name="L1377"></a>1377                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1378" name="L1378"></a>1378                         <a href="../S/1381.html#L1105" title="Defined at 1105 in src/java/io/ObjectOutputStream.java.">writeObject0</a>(objs[i], <strong class="reserved">false</strong>);
<a id="L1379" name="L1379"></a>1379                     <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1380" name="L1380"></a>1380                         <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1381" name="L1381"></a>1381                             debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1382" name="L1382"></a>1382                         <em class="brace">}</em>
<a id="L1383" name="L1383"></a>1383                     <em class="brace">}</em>
<a id="L1384" name="L1384"></a>1384                 <em class="brace">}</em>
<a id="L1385" name="L1385"></a>1385             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1386" name="L1386"></a>1386                 <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1387" name="L1387"></a>1387                     debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1388" name="L1388"></a>1388                 <em class="brace">}</em>
<a id="L1389" name="L1389"></a>1389             <em class="brace">}</em>
<a id="L1390" name="L1390"></a>1390         <em class="brace">}</em>
<a id="L1391" name="L1391"></a>1391     <em class="brace">}</em>
<a id="L1392" name="L1392"></a>1392 
<div class="comment">
      Writes given enum constant to stream.</div>
<a id="L1396" name="L1396"></a>1396     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1176" title="Referred from 1176 in src/java/io/ObjectOutputStream.java.">writeEnum</a>(<a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>&lt;?&gt; en,
<a id="L1397" name="L1397"></a>1397                            <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc,
<a id="L1398" name="L1398"></a>1398                            <strong class="reserved">boolean</strong> unshared)
<a id="L1399" name="L1399"></a>1399         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1400" name="L1400"></a>1400     <em class="brace">{</em>
<a id="L1401" name="L1401"></a>1401         bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_ENUM);
<a id="L1402" name="L1402"></a>1402         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> sdesc = desc.<a href="../S/1402.html#L801" title="Defined at 801 in src/java/io/ObjectStreamClass.java.">getSuperDesc</a>();
<a id="L1403" name="L1403"></a>1403         <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>((sdesc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>() == <a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>.<strong class="reserved">class</strong>) ? desc : sdesc, <strong class="reserved">false</strong>);
<a id="L1404" name="L1404"></a>1404         handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : en);
<a id="L1405" name="L1405"></a>1405         <a href="../D/37170.html" title="Multiple defined in 4 places.">writeString</a>(en.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>(), <strong class="reserved">false</strong>);
<a id="L1406" name="L1406"></a>1406     <em class="brace">}</em>
<a id="L1407" name="L1407"></a>1407 
<div class="comment">
      Writes representation of a "ordinary" (i.e., not a String, Class,
      ObjectStreamClass, array, or enum constant) serializable object to the
      stream.</div>
<a id="L1413" name="L1413"></a>1413     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1178" title="Referred from 1178 in src/java/io/ObjectOutputStream.java.">writeOrdinaryObject</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj,
<a id="L1414" name="L1414"></a>1414                                      <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc,
<a id="L1415" name="L1415"></a>1415                                      <strong class="reserved">boolean</strong> unshared)
<a id="L1416" name="L1416"></a>1416         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1417" name="L1417"></a>1417     <em class="brace">{</em>
<a id="L1418" name="L1418"></a>1418         <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1419" name="L1419"></a>1419             debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(
<a id="L1420" name="L1420"></a>1420                 (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 1 ? "root " : "") + "object (class \"" +
<a id="L1421" name="L1421"></a>1421                 obj.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\", " + obj.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>() + ")");
<a id="L1422" name="L1422"></a>1422         <em class="brace">}</em>
<a id="L1423" name="L1423"></a>1423         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1424" name="L1424"></a>1424             desc.<a href="../S/1402.html#L777" title="Defined at 777 in src/java/io/ObjectStreamClass.java.">checkSerialize</a>();
<a id="L1425" name="L1425"></a>1425 
<a id="L1426" name="L1426"></a>1426             bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_OBJECT);
<a id="L1427" name="L1427"></a>1427             <a href="../S/1381.html#L1220" title="Defined at 1220 in src/java/io/ObjectOutputStream.java.">writeClassDesc</a>(desc, <strong class="reserved">false</strong>);
<a id="L1428" name="L1428"></a>1428             handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? <strong class="reserved">null</strong> : obj);
<a id="L1429" name="L1429"></a>1429             <strong class="reserved">if</strong> (desc.<a href="../D/25538.html" title="Multiple defined in 4 places.">isExternalizable</a>() &amp;&amp; !desc.<a href="../D/26110.html" title="Multiple defined in 2 places.">isProxy</a>()) <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430                 <a href="../S/1381.html#L1445" title="Defined at 1445 in src/java/io/ObjectOutputStream.java.">writeExternalData</a>((<a href="../S/1425.html#L66" title="Defined at 66 in src/java/io/Externalizable.java.">Externalizable</a>) obj);
<a id="L1431" name="L1431"></a>1431             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1432" name="L1432"></a>1432                 <a href="../S/1381.html#L1477" title="Defined at 1477 in src/java/io/ObjectOutputStream.java.">writeSerialData</a>(obj, desc);
<a id="L1433" name="L1433"></a>1433             <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1435" name="L1435"></a>1435             <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1436" name="L1436"></a>1436                 debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1437" name="L1437"></a>1437             <em class="brace">}</em>
<a id="L1438" name="L1438"></a>1438         <em class="brace">}</em>
<a id="L1439" name="L1439"></a>1439     <em class="brace">}</em>
<a id="L1440" name="L1440"></a>1440 
<div class="comment">
      Writes externalizable data of given object by invoking its
      writeExternal() method.</div>
<a id="L1445" name="L1445"></a>1445     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1430" title="Referred from 1430 in src/java/io/ObjectOutputStream.java.">writeExternalData</a>(<a href="../S/1425.html#L66" title="Defined at 66 in src/java/io/Externalizable.java.">Externalizable</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1446" name="L1446"></a>1446         <a href="../S/1381.html#L1603" title="Defined at 1603 in src/java/io/ObjectOutputStream.java.">PutFieldImpl</a> oldPut = curPut;
<a id="L1447" name="L1447"></a>1447         curPut = <strong class="reserved">null</strong>;
<a id="L1448" name="L1448"></a>1448 
<a id="L1449" name="L1449"></a>1449         <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1450" name="L1450"></a>1450             debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>("writeExternal data");
<a id="L1451" name="L1451"></a>1451         <em class="brace">}</em>
<a id="L1452" name="L1452"></a>1452         <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> oldContext = curContext;
<a id="L1453" name="L1453"></a>1453         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1454" name="L1454"></a>1454             curContext = <strong class="reserved">null</strong>;
<a id="L1455" name="L1455"></a>1455             <strong class="reserved">if</strong> (protocol == PROTOCOL_VERSION_1) <em class="brace">{</em>
<a id="L1456" name="L1456"></a>1456                 obj.<a href="../D/37060.html" title="Multiple defined in 35 places.">writeExternal</a>(<strong class="reserved">this</strong>);
<a id="L1457" name="L1457"></a>1457             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1458" name="L1458"></a>1458                 bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1459" name="L1459"></a>1459                 obj.<a href="../D/37060.html" title="Multiple defined in 35 places.">writeExternal</a>(<strong class="reserved">this</strong>);
<a id="L1460" name="L1460"></a>1460                 bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1461" name="L1461"></a>1461                 bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_ENDBLOCKDATA);
<a id="L1462" name="L1462"></a>1462             <em class="brace">}</em>
<a id="L1463" name="L1463"></a>1463         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1464" name="L1464"></a>1464             curContext = oldContext;
<a id="L1465" name="L1465"></a>1465             <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1466" name="L1466"></a>1466                 debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1467" name="L1467"></a>1467             <em class="brace">}</em>
<a id="L1468" name="L1468"></a>1468         <em class="brace">}</em>
<a id="L1469" name="L1469"></a>1469 
<a id="L1470" name="L1470"></a>1470         curPut = oldPut;
<a id="L1471" name="L1471"></a>1471     <em class="brace">}</em>
<a id="L1472" name="L1472"></a>1472 
<div class="comment">
      Writes instance data for each serializable class of given object, from
      superclass to subclass.</div>
<a id="L1477" name="L1477"></a>1477     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L1432" title="Referred from 1432 in src/java/io/ObjectOutputStream.java.">writeSerialData</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L1478" name="L1478"></a>1478         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1479" name="L1479"></a>1479     <em class="brace">{</em>
<a id="L1480" name="L1480"></a>1480         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>.<a href="../S/1402.html#L1128" title="Defined at 1128 in src/java/io/ObjectStreamClass.java.">ClassDataSlot</a>[] slots = desc.<a href="../S/1402.html#L1148" title="Defined at 1148 in src/java/io/ObjectStreamClass.java.">getClassDataLayout</a>();
<a id="L1481" name="L1481"></a>1481         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; slots.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1482" name="L1482"></a>1482             <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> slotDesc = slots[i].desc;
<a id="L1483" name="L1483"></a>1483             <strong class="reserved">if</strong> (slotDesc.<a href="../S/1402.html#L914" title="Defined at 914 in src/java/io/ObjectStreamClass.java.">hasWriteObjectMethod</a>()) <em class="brace">{</em>
<a id="L1484" name="L1484"></a>1484                 <a href="../S/1381.html#L1603" title="Defined at 1603 in src/java/io/ObjectOutputStream.java.">PutFieldImpl</a> oldPut = curPut;
<a id="L1485" name="L1485"></a>1485                 curPut = <strong class="reserved">null</strong>;
<a id="L1486" name="L1486"></a>1486                 <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> oldContext = curContext;
<a id="L1487" name="L1487"></a>1487 
<a id="L1488" name="L1488"></a>1488                 <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1489" name="L1489"></a>1489                     debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(
<a id="L1490" name="L1490"></a>1490                         "custom writeObject data (class \"" +
<a id="L1491" name="L1491"></a>1491                         slotDesc.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\")");
<a id="L1492" name="L1492"></a>1492                 <em class="brace">}</em>
<a id="L1493" name="L1493"></a>1493                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1494" name="L1494"></a>1494                     curContext = <strong class="reserved">new</strong> <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a>(obj, slotDesc);
<a id="L1495" name="L1495"></a>1495                     bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1496" name="L1496"></a>1496                     slotDesc.<a href="../S/1402.html#L983" title="Defined at 983 in src/java/io/ObjectStreamClass.java.">invokeWriteObject</a>(obj, <strong class="reserved">this</strong>);
<a id="L1497" name="L1497"></a>1497                     bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1498" name="L1498"></a>1498                     bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_ENDBLOCKDATA);
<a id="L1499" name="L1499"></a>1499                 <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1500" name="L1500"></a>1500                     curContext.<a href="../S/1441.html#L78" title="Defined at 78 in src/java/io/SerialCallbackContext.java.">setUsed</a>();
<a id="L1501" name="L1501"></a>1501                     curContext = oldContext;
<a id="L1502" name="L1502"></a>1502                     <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1503" name="L1503"></a>1503                         debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1504" name="L1504"></a>1504                     <em class="brace">}</em>
<a id="L1505" name="L1505"></a>1505                 <em class="brace">}</em>
<a id="L1506" name="L1506"></a>1506 
<a id="L1507" name="L1507"></a>1507                 curPut = oldPut;
<a id="L1508" name="L1508"></a>1508             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1509" name="L1509"></a>1509                 <a href="../S/1381.html#L1519" title="Defined at 1519 in src/java/io/ObjectOutputStream.java.">defaultWriteFields</a>(obj, slotDesc);
<a id="L1510" name="L1510"></a>1510             <em class="brace">}</em>
<a id="L1511" name="L1511"></a>1511         <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512     <em class="brace">}</em>
<a id="L1513" name="L1513"></a>1513 
<div class="comment">
      Fetches and writes values of serializable fields of given object to
      stream.  The given class descriptor specifies which field values to
      write, and in which order they should be written.</div>
<a id="L1519" name="L1519"></a>1519     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13164.html" title="Multiple referred from 2 places.">defaultWriteFields</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L1520" name="L1520"></a>1520         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1521" name="L1521"></a>1521     <em class="brace">{</em>
<a id="L1522" name="L1522"></a>1522         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1523" name="L1523"></a>1523         <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong> &amp;&amp; obj != <strong class="reserved">null</strong> &amp;&amp; !cl.<a href="../S/1722.html#L483" title="Defined at 483 in src/java/lang/Class.java.">isInstance</a>(obj)) <em class="brace">{</em>
<a id="L1524" name="L1524"></a>1524             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a>();
<a id="L1525" name="L1525"></a>1525         <em class="brace">}</em>
<a id="L1526" name="L1526"></a>1526 
<a id="L1527" name="L1527"></a>1527         desc.<a href="../S/1402.html#L790" title="Defined at 790 in src/java/io/ObjectStreamClass.java.">checkDefaultSerialize</a>();
<a id="L1528" name="L1528"></a>1528 
<a id="L1529" name="L1529"></a>1529         <strong class="reserved">int</strong> primDataSize = desc.<a href="../S/1402.html#L1214" title="Defined at 1214 in src/java/io/ObjectStreamClass.java.">getPrimDataSize</a>();
<a id="L1530" name="L1530"></a>1530         <strong class="reserved">if</strong> (primVals == <strong class="reserved">null</strong> || primVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; primDataSize) <em class="brace">{</em>
<a id="L1531" name="L1531"></a>1531             primVals = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[primDataSize];
<a id="L1532" name="L1532"></a>1532         <em class="brace">}</em>
<a id="L1533" name="L1533"></a>1533         desc.<a href="../D/21630.html" title="Multiple defined in 2 places.">getPrimFieldValues</a>(obj, primVals);
<a id="L1534" name="L1534"></a>1534         bout.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(primVals, 0, primDataSize, <strong class="reserved">false</strong>);
<a id="L1535" name="L1535"></a>1535 
<a id="L1536" name="L1536"></a>1536         <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a> = desc.<a href="../D/19038.html" title="Multiple defined in 15 places.">getFields</a>(<strong class="reserved">false</strong>);
<a id="L1537" name="L1537"></a>1537         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] objVals = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[desc.<a href="../S/1402.html#L1222" title="Defined at 1222 in src/java/io/ObjectStreamClass.java.">getNumObjFields</a>()];
<a id="L1538" name="L1538"></a>1538         <strong class="reserved">int</strong> numPrimFields = <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1539" name="L1539"></a>1539         desc.<a href="../D/21123.html" title="Multiple defined in 2 places.">getObjFieldValues</a>(obj, objVals);
<a id="L1540" name="L1540"></a>1540         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1541" name="L1541"></a>1541             <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1542" name="L1542"></a>1542                 debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(
<a id="L1543" name="L1543"></a>1543                     "field (class \"" + desc.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\", name: \"" +
<a id="L1544" name="L1544"></a>1544                     <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\", type: \"" +
<a id="L1545" name="L1545"></a>1545                     <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() + "\")");
<a id="L1546" name="L1546"></a>1546             <em class="brace">}</em>
<a id="L1547" name="L1547"></a>1547             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1548" name="L1548"></a>1548                 <a href="../S/1381.html#L1105" title="Defined at 1105 in src/java/io/ObjectOutputStream.java.">writeObject0</a>(objVals[i],
<a id="L1549" name="L1549"></a>1549                              <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../S/1446.html#L247" title="Defined at 247 in src/java/io/ObjectStreamField.java.">isUnshared</a>());
<a id="L1550" name="L1550"></a>1550             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1551" name="L1551"></a>1551                 <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1552" name="L1552"></a>1552                     debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1553" name="L1553"></a>1553                 <em class="brace">}</em>
<a id="L1554" name="L1554"></a>1554             <em class="brace">}</em>
<a id="L1555" name="L1555"></a>1555         <em class="brace">}</em>
<a id="L1556" name="L1556"></a>1556     <em class="brace">}</em>
<a id="L1557" name="L1557"></a>1557 
<div class="comment">
      Attempts to write to stream fatal IOException that has caused
      serialization to abort.</div>
<a id="L1562" name="L1562"></a>1562     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30624.html" title="Multiple referred from 2 places.">writeFatalException</a>(<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<div class="comment">
          Note: the serialization specification states that if a second
          IOException occurs while attempting to serialize the original fatal
          exception to the stream, then a StreamCorruptedException should be
          thrown (section 2.1).  However, due to a bug in previous
          implementations of serialization, StreamCorruptedExceptions were
          rarely (if ever) actually thrown--the "root" exceptions from
          underlying streams were thrown instead.  This historical behavior is
          followed here for consistency.</div>
<a id="L1573" name="L1573"></a>1573         <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1574" name="L1574"></a>1574         <strong class="reserved">boolean</strong> oldMode = bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1575" name="L1575"></a>1575         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1576" name="L1576"></a>1576             bout.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(TC_EXCEPTION);
<a id="L1577" name="L1577"></a>1577             <a href="../S/1381.html#L1105" title="Defined at 1105 in src/java/io/ObjectOutputStream.java.">writeObject0</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>, <strong class="reserved">false</strong>);
<a id="L1578" name="L1578"></a>1578             <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1579" name="L1579"></a>1579         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1580" name="L1580"></a>1580             bout.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(oldMode);
<a id="L1581" name="L1581"></a>1581         <em class="brace">}</em>
<a id="L1582" name="L1582"></a>1582     <em class="brace">}</em>
<a id="L1583" name="L1583"></a>1583 
<div class="comment">
      Converts specified span of float values into byte values.</div>
<a id="L1587" name="L1587"></a>1587     <em class="comment">// REMIND: remove once hotspot inlines Float.floatToIntBits</em>
<a id="L1588" name="L1588"></a>1588     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L2090" title="Referred from 2090 in src/java/io/ObjectOutputStream.java.">floatsToBytes</a>(<strong class="reserved">float</strong>[] src, <strong class="reserved">int</strong> srcpos,
<a id="L1589" name="L1589"></a>1589                                              <strong class="reserved">byte</strong>[] dst, <strong class="reserved">int</strong> dstpos,
<a id="L1590" name="L1590"></a>1590                                              <strong class="reserved">int</strong> nfloats);
<a id="L1591" name="L1591"></a>1591 
<div class="comment">
      Converts specified span of double values into byte values.</div>
<a id="L1595" name="L1595"></a>1595     <em class="comment">// REMIND: remove once hotspot inlines Double.doubleToLongBits</em>
<a id="L1596" name="L1596"></a>1596     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L2123" title="Referred from 2123 in src/java/io/ObjectOutputStream.java.">doublesToBytes</a>(<strong class="reserved">double</strong>[] src, <strong class="reserved">int</strong> srcpos,
<a id="L1597" name="L1597"></a>1597                                               <strong class="reserved">byte</strong>[] dst, <strong class="reserved">int</strong> dstpos,
<a id="L1598" name="L1598"></a>1598                                               <strong class="reserved">int</strong> ndoubles);
<a id="L1599" name="L1599"></a>1599 
<div class="comment">
      Default PutField implementation.</div>
<a id="L1603" name="L1603"></a>1603     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/6355.html" title="Multiple referred from 4 places.">PutFieldImpl</a> <strong class="reserved">extends</strong> <a href="../S/1381.html#L878" title="Defined at 878 in src/java/io/ObjectOutputStream.java.">PutField</a> <em class="brace">{</em>
<a id="L1604" name="L1604"></a>1604 
<div class="comment">
         /** class descriptor describing serializable fields */</div>
<a id="L1606" name="L1606"></a>1606         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc;
<div class="comment">
         /** primitive field values */</div>
<a id="L1608" name="L1608"></a>1608         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] primVals;
<div class="comment">
         /** object field values */</div>
<a id="L1610" name="L1610"></a>1610         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] objVals;
<a id="L1611" name="L1611"></a>1611 
<div class="comment">
          Creates PutFieldImpl object for writing fields defined in given
          class descriptor.</div>
<a id="L1616" name="L1616"></a>1616         PutFieldImpl(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc) <em class="brace">{</em>
<a id="L1617" name="L1617"></a>1617             <strong class="reserved">this</strong>.desc = desc;
<a id="L1618" name="L1618"></a>1618             primVals = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[desc.<a href="../S/1402.html#L1214" title="Defined at 1214 in src/java/io/ObjectStreamClass.java.">getPrimDataSize</a>()];
<a id="L1619" name="L1619"></a>1619             objVals = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[desc.<a href="../S/1402.html#L1222" title="Defined at 1222 in src/java/io/ObjectStreamClass.java.">getNumObjFields</a>()];
<a id="L1620" name="L1620"></a>1620         <em class="brace">}</em>
<a id="L1621" name="L1621"></a>1621 
<a id="L1622" name="L1622"></a>1622         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">boolean</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1623" name="L1623"></a>1623             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29975.html" title="Multiple defined in 3 places.">putBoolean</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1624" name="L1624"></a>1624         <em class="brace">}</em>
<a id="L1625" name="L1625"></a>1625 
<a id="L1626" name="L1626"></a>1626         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">byte</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1627" name="L1627"></a>1627             primVals[<a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/1038.html" title="Multiple defined in 2 places.">Byte</a>.TYPE)] = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1628" name="L1628"></a>1628         <em class="brace">}</em>
<a id="L1629" name="L1629"></a>1629 
<a id="L1630" name="L1630"></a>1630         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">char</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1631" name="L1631"></a>1631             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29979.html" title="Multiple defined in 15 places.">putChar</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1632" name="L1632"></a>1632         <em class="brace">}</em>
<a id="L1633" name="L1633"></a>1633 
<a id="L1634" name="L1634"></a>1634         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">short</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1635" name="L1635"></a>1635             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30040.html" title="Multiple defined in 15 places.">putShort</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1636" name="L1636"></a>1636         <em class="brace">}</em>
<a id="L1637" name="L1637"></a>1637 
<a id="L1638" name="L1638"></a>1638         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1639" name="L1639"></a>1639             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30009.html" title="Multiple defined in 17 places.">putInt</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1640" name="L1640"></a>1640         <em class="brace">}</em>
<a id="L1641" name="L1641"></a>1641 
<a id="L1642" name="L1642"></a>1642         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">float</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1643" name="L1643"></a>1643             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29997.html" title="Multiple defined in 17 places.">putFloat</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1644" name="L1644"></a>1644         <em class="brace">}</em>
<a id="L1645" name="L1645"></a>1645 
<a id="L1646" name="L1646"></a>1646         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1647" name="L1647"></a>1647             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30020.html" title="Multiple defined in 17 places.">putLong</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1648" name="L1648"></a>1648         <em class="brace">}</em>
<a id="L1649" name="L1649"></a>1649 
<a id="L1650" name="L1650"></a>1650         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1651" name="L1651"></a>1651             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29988.html" title="Multiple defined in 17 places.">putDouble</a>(primVals, <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.TYPE), <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1652" name="L1652"></a>1652         <em class="brace">}</em>
<a id="L1653" name="L1653"></a>1653 
<a id="L1654" name="L1654"></a>1654         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <em class="brace">{</em>
<a id="L1655" name="L1655"></a>1655             objVals[<a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>)] = <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L1656" name="L1656"></a>1656         <em class="brace">}</em>
<a id="L1657" name="L1657"></a>1657 
<a id="L1658" name="L1658"></a>1658         <em class="comment">// deprecated in ObjectOutputStream.PutField</em>
<a id="L1659" name="L1659"></a>1659         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<a href="../S/1380.html#L39" title="Defined at 39 in src/java/io/ObjectOutput.java.">ObjectOutput</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<div class="comment">
              Applications should *not* use this method to write PutField
              data, as it will lead to stream corruption if the PutField
              object writes any primitive data (since block data mode is not
              unset/set properly, as is done in OOS.writeFields()).  This
              broken implementation is being retained solely for behavioral
              compatibility, in order to support applications which use
              OOS.PutField.write() for writing only non-primitive data.
              Serialization of unshared objects is not implemented here since
              it is not necessary for backwards compatibility; also, unshared
              semantics may not be supported by the given ObjectOutput
              instance.  Applications which write unshared objects using the
              PutField API must use OOS.writeFields().</div>
<a id="L1675" name="L1675"></a>1675             <strong class="reserved">if</strong> (<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<strong class="reserved">this</strong> != <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L1676" name="L1676"></a>1676                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("wrong stream");
<a id="L1677" name="L1677"></a>1677             <em class="brace">}</em>
<a id="L1678" name="L1678"></a>1678             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(primVals, 0, primVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1679" name="L1679"></a>1679 
<a id="L1680" name="L1680"></a>1680             <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a> = desc.<a href="../D/19038.html" title="Multiple defined in 15 places.">getFields</a>(<strong class="reserved">false</strong>);
<a id="L1681" name="L1681"></a>1681             <strong class="reserved">int</strong> numPrimFields = <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1682" name="L1682"></a>1682             <em class="comment">// REMIND: warn if numPrimFields &gt; 0?</em>
<a id="L1683" name="L1683"></a>1683             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1684" name="L1684"></a>1684                 <strong class="reserved">if</strong> (<a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../S/1446.html#L247" title="Defined at 247 in src/java/io/ObjectStreamField.java.">isUnshared</a>()) <em class="brace">{</em>
<a id="L1685" name="L1685"></a>1685                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("cannot write unshared object");
<a id="L1686" name="L1686"></a>1686                 <em class="brace">}</em>
<a id="L1687" name="L1687"></a>1687                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(objVals[i]);
<a id="L1688" name="L1688"></a>1688             <em class="brace">}</em>
<a id="L1689" name="L1689"></a>1689         <em class="brace">}</em>
<a id="L1690" name="L1690"></a>1690 
<div class="comment">
          Writes buffered primitive data and object fields to stream.</div>
<a id="L1694" name="L1694"></a>1694         <strong class="reserved">void</strong> <a href="../R/30626.html" title="Multiple referred from 52 places.">writeFields</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1695" name="L1695"></a>1695             bout.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(primVals, 0, primVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">false</strong>);
<a id="L1696" name="L1696"></a>1696 
<a id="L1697" name="L1697"></a>1697             <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a> = desc.<a href="../D/19038.html" title="Multiple defined in 15 places.">getFields</a>(<strong class="reserved">false</strong>);
<a id="L1698" name="L1698"></a>1698             <strong class="reserved">int</strong> numPrimFields = <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1699" name="L1699"></a>1699             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1700" name="L1700"></a>1700                 <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1701" name="L1701"></a>1701                     debugInfoStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(
<a id="L1702" name="L1702"></a>1702                         "field (class \"" + desc.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\", name: \"" +
<a id="L1703" name="L1703"></a>1703                         <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "\", type: \"" +
<a id="L1704" name="L1704"></a>1704                         <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() + "\")");
<a id="L1705" name="L1705"></a>1705                 <em class="brace">}</em>
<a id="L1706" name="L1706"></a>1706                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1707" name="L1707"></a>1707                     <a href="../S/1381.html#L1105" title="Defined at 1105 in src/java/io/ObjectOutputStream.java.">writeObject0</a>(objVals[i],
<a id="L1708" name="L1708"></a>1708                                  <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../S/1446.html#L247" title="Defined at 247 in src/java/io/ObjectStreamField.java.">isUnshared</a>());
<a id="L1709" name="L1709"></a>1709                 <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1710" name="L1710"></a>1710                     <strong class="reserved">if</strong> (extendedDebugInfo) <em class="brace">{</em>
<a id="L1711" name="L1711"></a>1711                         debugInfoStack.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L1712" name="L1712"></a>1712                     <em class="brace">}</em>
<a id="L1713" name="L1713"></a>1713                 <em class="brace">}</em>
<a id="L1714" name="L1714"></a>1714             <em class="brace">}</em>
<a id="L1715" name="L1715"></a>1715         <em class="brace">}</em>
<a id="L1716" name="L1716"></a>1716 
<div class="comment">
          Returns offset of field with given name and type.  A specified type
          of null matches all types, Object.class matches all non-primitive
          types, and any other non-null type matches assignable types only.
          Throws IllegalArgumentException if no matching field found.</div>
<a id="L1723" name="L1723"></a>1723         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/16559.html" title="Multiple referred from 19 places.">getFieldOffset</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1724" name="L1724"></a>1724             <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a> field = desc.<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L1725" name="L1725"></a>1725             <strong class="reserved">if</strong> (field == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1726" name="L1726"></a>1726                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("no such field " + <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> +
<a id="L1727" name="L1727"></a>1727                                                    " with type " + <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L1728" name="L1728"></a>1728             <em class="brace">}</em>
<a id="L1729" name="L1729"></a>1729             <strong class="reserved">return</strong> field.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L1730" name="L1730"></a>1730         <em class="brace">}</em>
<a id="L1731" name="L1731"></a>1731     <em class="brace">}</em>
<a id="L1732" name="L1732"></a>1732 
<div class="comment">
      Buffered output stream with two modes: in default mode, outputs data in
      same format as DataOutputStream; in "block data" mode, outputs data
      bracketed by block data markers (see object serialization specification
      for details).</div>
<a id="L1739" name="L1739"></a>1739     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/833.html" title="Multiple referred from 2 places.">BlockDataOutputStream</a>
<a id="L1740" name="L1740"></a>1740         <strong class="reserved">extends</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <strong class="reserved">implements</strong> <a href="../S/1422.html#L50" title="Defined at 50 in src/java/io/DataOutput.java.">DataOutput</a>
<a id="L1741" name="L1741"></a>1741     <em class="brace">{</em>
<div class="comment">
         /** maximum data block length */</div>
<a id="L1743" name="L1743"></a>1743         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_BLOCK_SIZE = 1024;
<div class="comment">
         /** maximum data block header length */</div>
<a id="L1745" name="L1745"></a>1745         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_HEADER_SIZE = 5;
<div class="comment">
         /** (tunable) length of char buffer (for writing strings) */</div>
<a id="L1747" name="L1747"></a>1747         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CHAR_BUF_SIZE = 256;
<a id="L1748" name="L1748"></a>1748 
<div class="comment">
         /** buffer for writing general/block data */</div>
<a id="L1750" name="L1750"></a>1750         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[MAX_BLOCK_SIZE];
<div class="comment">
         /** buffer for writing block data headers */</div>
<a id="L1752" name="L1752"></a>1752         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] hbuf = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[MAX_HEADER_SIZE];
<div class="comment">
         /** char buffer for fast string writes */</div>
<a id="L1754" name="L1754"></a>1754         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] cbuf = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[CHAR_BUF_SIZE];
<a id="L1755" name="L1755"></a>1755 
<div class="comment">
         /** block data mode */</div>
<a id="L1757" name="L1757"></a>1757         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> blkmode = <strong class="reserved">false</strong>;
<div class="comment">
         /** current offset into buf */</div>
<a id="L1759" name="L1759"></a>1759         <strong class="reserved">private</strong> <strong class="reserved">int</strong> pos = 0;
<a id="L1760" name="L1760"></a>1760 
<div class="comment">
         /** underlying output stream */</div>
<a id="L1762" name="L1762"></a>1762         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>;
<div class="comment">
         /** loopback stream (for data writes that span data blocks) */</div>
<a id="L1764" name="L1764"></a>1764         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/2188.html" title="Multiple defined in 2 places.">DataOutputStream</a> dout;
<a id="L1765" name="L1765"></a>1765 
<div class="comment">
          Creates new BlockDataOutputStream on top of given underlying stream.
          Block data mode is turned off by default.</div>
<a id="L1770" name="L1770"></a>1770         BlockDataOutputStream(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L1771" name="L1771"></a>1771             <strong class="reserved">this</strong>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a> = <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>;
<a id="L1772" name="L1772"></a>1772             dout = <strong class="reserved">new</strong> <a href="../D/2188.html" title="Multiple defined in 2 places.">DataOutputStream</a>(<strong class="reserved">this</strong>);
<a id="L1773" name="L1773"></a>1773         <em class="brace">}</em>
<a id="L1774" name="L1774"></a>1774 
<div class="comment">
          Sets block data mode to the given mode (true == on, false == off)
          and returns the previous mode value.  If the new mode is the same as
          the old mode, no action is taken.  If the new mode differs from the
          old mode, any buffered data is flushed before switching to the new
          mode.</div>
<a id="L1782" name="L1782"></a>1782         <strong class="reserved">boolean</strong> <a href="../R/26952.html" title="Multiple referred from 34 places.">setBlockDataMode</a>(<strong class="reserved">boolean</strong> mode) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1783" name="L1783"></a>1783             <strong class="reserved">if</strong> (blkmode == mode) <em class="brace">{</em>
<a id="L1784" name="L1784"></a>1784                 <strong class="reserved">return</strong> blkmode;
<a id="L1785" name="L1785"></a>1785             <em class="brace">}</em>
<a id="L1786" name="L1786"></a>1786             <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1787" name="L1787"></a>1787             blkmode = mode;
<a id="L1788" name="L1788"></a>1788             <strong class="reserved">return</strong> !blkmode;
<a id="L1789" name="L1789"></a>1789         <em class="brace">}</em>
<a id="L1790" name="L1790"></a>1790 
<div class="comment">
          Returns true if the stream is currently in block data mode, false
          otherwise.</div>
<a id="L1795" name="L1795"></a>1795         <strong class="reserved">boolean</strong> <a href="../R/15286.html" title="Multiple referred from 2 places.">getBlockDataMode</a>() <em class="brace">{</em>
<a id="L1796" name="L1796"></a>1796             <strong class="reserved">return</strong> blkmode;
<a id="L1797" name="L1797"></a>1797         <em class="brace">}</em>
<a id="L1798" name="L1798"></a>1798 
<div class="comment">
         /* ----------------- generic output stream methods ----------------- */</div>
<div class="comment">
          The following methods are equivalent to their counterparts in
          OutputStream, except that they partition written data into data
          blocks when in block data mode.</div>
<a id="L1805" name="L1805"></a>1805 
<a id="L1806" name="L1806"></a>1806         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">int</strong> b) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1807" name="L1807"></a>1807             <strong class="reserved">if</strong> (pos &gt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1808" name="L1808"></a>1808                 <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1809" name="L1809"></a>1809             <em class="brace">}</em>
<a id="L1810" name="L1810"></a>1810             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++] = (<strong class="reserved">byte</strong>) b;
<a id="L1811" name="L1811"></a>1811         <em class="brace">}</em>
<a id="L1812" name="L1812"></a>1812 
<a id="L1813" name="L1813"></a>1813         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">byte</strong>[] b) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1814" name="L1814"></a>1814             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(b, 0, b.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">false</strong>);
<a id="L1815" name="L1815"></a>1815         <em class="brace">}</em>
<a id="L1816" name="L1816"></a>1816 
<a id="L1817" name="L1817"></a>1817         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1818" name="L1818"></a>1818             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(b, off, len, <strong class="reserved">false</strong>);
<a id="L1819" name="L1819"></a>1819         <em class="brace">}</em>
<a id="L1820" name="L1820"></a>1820 
<a id="L1821" name="L1821"></a>1821         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14697.html" title="Multiple referred from 199 places.">flush</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1822" name="L1822"></a>1822             <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1823" name="L1823"></a>1823             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L1824" name="L1824"></a>1824         <em class="brace">}</em>
<a id="L1825" name="L1825"></a>1825 
<a id="L1826" name="L1826"></a>1826         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1827" name="L1827"></a>1827             <a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L1828" name="L1828"></a>1828             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L1829" name="L1829"></a>1829         <em class="brace">}</em>
<a id="L1830" name="L1830"></a>1830 
<div class="comment">
          Writes specified span of byte values from given array.  If copy is
          true, copies the values to an intermediate buffer before writing
          them to underlying stream (to avoid exposing a reference to the
          original byte array).</div>
<a id="L1837" name="L1837"></a>1837         <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len, <strong class="reserved">boolean</strong> <a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>)
<a id="L1838" name="L1838"></a>1838             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1839" name="L1839"></a>1839         <em class="brace">{</em>
<a id="L1840" name="L1840"></a>1840             <strong class="reserved">if</strong> (!(<a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a> || blkmode)) <em class="brace">{</em>           <em class="comment">// write directly</em>
<a id="L1841" name="L1841"></a>1841                 <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1842" name="L1842"></a>1842                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(b, off, len);
<a id="L1843" name="L1843"></a>1843                 <strong class="reserved">return</strong>;
<a id="L1844" name="L1844"></a>1844             <em class="brace">}</em>
<a id="L1845" name="L1845"></a>1845 
<a id="L1846" name="L1846"></a>1846             <strong class="reserved">while</strong> (len &gt; 0) <em class="brace">{</em>
<a id="L1847" name="L1847"></a>1847                 <strong class="reserved">if</strong> (pos &gt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1848" name="L1848"></a>1848                     <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1849" name="L1849"></a>1849                 <em class="brace">}</em>
<a id="L1850" name="L1850"></a>1850                 <strong class="reserved">if</strong> (len &gt;= MAX_BLOCK_SIZE &amp;&amp; !<a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a> &amp;&amp; pos == 0) <em class="brace">{</em>
<a id="L1851" name="L1851"></a>1851                     <em class="comment">// avoid unnecessary copy</em>
<a id="L1852" name="L1852"></a>1852                     <a href="../S/1381.html#L1886" title="Defined at 1886 in src/java/io/ObjectOutputStream.java.">writeBlockHeader</a>(MAX_BLOCK_SIZE);
<a id="L1853" name="L1853"></a>1853                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(b, off, MAX_BLOCK_SIZE);
<a id="L1854" name="L1854"></a>1854                     off += MAX_BLOCK_SIZE;
<a id="L1855" name="L1855"></a>1855                     len -= MAX_BLOCK_SIZE;
<a id="L1856" name="L1856"></a>1856                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1857" name="L1857"></a>1857                     <strong class="reserved">int</strong> wlen = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(len, MAX_BLOCK_SIZE - pos);
<a id="L1858" name="L1858"></a>1858                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(b, off, <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, wlen);
<a id="L1859" name="L1859"></a>1859                     pos += wlen;
<a id="L1860" name="L1860"></a>1860                     off += wlen;
<a id="L1861" name="L1861"></a>1861                     len -= wlen;
<a id="L1862" name="L1862"></a>1862                 <em class="brace">}</em>
<a id="L1863" name="L1863"></a>1863             <em class="brace">}</em>
<a id="L1864" name="L1864"></a>1864         <em class="brace">}</em>
<a id="L1865" name="L1865"></a>1865 
<div class="comment">
          Writes all buffered data from this stream to the underlying stream,
          but does not flush underlying stream.</div>
<a id="L1870" name="L1870"></a>1870         <strong class="reserved">void</strong> <a href="../R/13512.html" title="Multiple referred from 10 places.">drain</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1871" name="L1871"></a>1871             <strong class="reserved">if</strong> (pos == 0) <em class="brace">{</em>
<a id="L1872" name="L1872"></a>1872                 <strong class="reserved">return</strong>;
<a id="L1873" name="L1873"></a>1873             <em class="brace">}</em>
<a id="L1874" name="L1874"></a>1874             <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L1875" name="L1875"></a>1875                 <a href="../S/1381.html#L1886" title="Defined at 1886 in src/java/io/ObjectOutputStream.java.">writeBlockHeader</a>(pos);
<a id="L1876" name="L1876"></a>1876             <em class="brace">}</em>
<a id="L1877" name="L1877"></a>1877             <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, pos);
<a id="L1878" name="L1878"></a>1878             pos = 0;
<a id="L1879" name="L1879"></a>1879         <em class="brace">}</em>
<a id="L1880" name="L1880"></a>1880 
<div class="comment">
          Writes block data header.  Data blocks shorter than 256 bytes are
          prefixed with a 2-byte header; all others start with a 5-byte
          header.</div>
<a id="L1886" name="L1886"></a>1886         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30567.html" title="Multiple referred from 2 places.">writeBlockHeader</a>(<strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1887" name="L1887"></a>1887             <strong class="reserved">if</strong> (len &lt;= 0xFF) <em class="brace">{</em>
<a id="L1888" name="L1888"></a>1888                 hbuf[0] = TC_BLOCKDATA;
<a id="L1889" name="L1889"></a>1889                 hbuf[1] = (<strong class="reserved">byte</strong>) len;
<a id="L1890" name="L1890"></a>1890                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(hbuf, 0, 2);
<a id="L1891" name="L1891"></a>1891             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1892" name="L1892"></a>1892                 hbuf[0] = TC_BLOCKDATALONG;
<a id="L1893" name="L1893"></a>1893                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30009.html" title="Multiple defined in 17 places.">putInt</a>(hbuf, 1, len);
<a id="L1894" name="L1894"></a>1894                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(hbuf, 0, 5);
<a id="L1895" name="L1895"></a>1895             <em class="brace">}</em>
<a id="L1896" name="L1896"></a>1896         <em class="brace">}</em>
<a id="L1897" name="L1897"></a>1897 
<a id="L1898" name="L1898"></a>1898 
<div class="comment">
         /* ----------------- primitive data output methods ----------------- */</div>
<div class="comment">
          The following methods are equivalent to their counterparts in
          DataOutputStream, except that they partition written data into data
          blocks when in block data mode.</div>
<a id="L1905" name="L1905"></a>1905 
<a id="L1906" name="L1906"></a>1906         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30570.html" title="Multiple referred from 11 places.">writeBoolean</a>(<strong class="reserved">boolean</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1907" name="L1907"></a>1907             <strong class="reserved">if</strong> (pos &gt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1908" name="L1908"></a>1908                 <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1909" name="L1909"></a>1909             <em class="brace">}</em>
<a id="L1910" name="L1910"></a>1910             <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29975.html" title="Multiple defined in 3 places.">putBoolean</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos++, v);
<a id="L1911" name="L1911"></a>1911         <em class="brace">}</em>
<a id="L1912" name="L1912"></a>1912 
<a id="L1913" name="L1913"></a>1913         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30572.html" title="Multiple referred from 221 places.">writeByte</a>(<strong class="reserved">int</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1914" name="L1914"></a>1914             <strong class="reserved">if</strong> (pos &gt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1915" name="L1915"></a>1915                 <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1916" name="L1916"></a>1916             <em class="brace">}</em>
<a id="L1917" name="L1917"></a>1917             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++] = (<strong class="reserved">byte</strong>) v;
<a id="L1918" name="L1918"></a>1918         <em class="brace">}</em>
<a id="L1919" name="L1919"></a>1919 
<a id="L1920" name="L1920"></a>1920         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30576.html" title="Multiple referred from 5 places.">writeChar</a>(<strong class="reserved">int</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1921" name="L1921"></a>1921             <strong class="reserved">if</strong> (pos + 2 &lt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1922" name="L1922"></a>1922                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29979.html" title="Multiple defined in 15 places.">putChar</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, (<strong class="reserved">char</strong>) v);
<a id="L1923" name="L1923"></a>1923                 pos += 2;
<a id="L1924" name="L1924"></a>1924             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1925" name="L1925"></a>1925                 dout.<a href="../D/37008.html" title="Multiple defined in 8 places.">writeChar</a>(v);
<a id="L1926" name="L1926"></a>1926             <em class="brace">}</em>
<a id="L1927" name="L1927"></a>1927         <em class="brace">}</em>
<a id="L1928" name="L1928"></a>1928 
<a id="L1929" name="L1929"></a>1929         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30710.html" title="Multiple referred from 146 places.">writeShort</a>(<strong class="reserved">int</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1930" name="L1930"></a>1930             <strong class="reserved">if</strong> (pos + 2 &lt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1931" name="L1931"></a>1931                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30040.html" title="Multiple defined in 15 places.">putShort</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, (<strong class="reserved">short</strong>) v);
<a id="L1932" name="L1932"></a>1932                 pos += 2;
<a id="L1933" name="L1933"></a>1933             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1934" name="L1934"></a>1934                 dout.<a href="../D/37158.html" title="Multiple defined in 12 places.">writeShort</a>(v);
<a id="L1935" name="L1935"></a>1935             <em class="brace">}</em>
<a id="L1936" name="L1936"></a>1936         <em class="brace">}</em>
<a id="L1937" name="L1937"></a>1937 
<a id="L1938" name="L1938"></a>1938         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30645.html" title="Multiple referred from 202 places.">writeInt</a>(<strong class="reserved">int</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1939" name="L1939"></a>1939             <strong class="reserved">if</strong> (pos + 4 &lt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1940" name="L1940"></a>1940                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30009.html" title="Multiple defined in 17 places.">putInt</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v);
<a id="L1941" name="L1941"></a>1941                 pos += 4;
<a id="L1942" name="L1942"></a>1942             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943                 dout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(v);
<a id="L1944" name="L1944"></a>1944             <em class="brace">}</em>
<a id="L1945" name="L1945"></a>1945         <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946 
<a id="L1947" name="L1947"></a>1947         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30628.html" title="Multiple referred from 8 places.">writeFloat</a>(<strong class="reserved">float</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1948" name="L1948"></a>1948             <strong class="reserved">if</strong> (pos + 4 &lt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1949" name="L1949"></a>1949                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29997.html" title="Multiple defined in 17 places.">putFloat</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v);
<a id="L1950" name="L1950"></a>1950                 pos += 4;
<a id="L1951" name="L1951"></a>1951             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1952" name="L1952"></a>1952                 dout.<a href="../D/37067.html" title="Multiple defined in 10 places.">writeFloat</a>(v);
<a id="L1953" name="L1953"></a>1953             <em class="brace">}</em>
<a id="L1954" name="L1954"></a>1954         <em class="brace">}</em>
<a id="L1955" name="L1955"></a>1955 
<a id="L1956" name="L1956"></a>1956         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30662.html" title="Multiple referred from 32 places.">writeLong</a>(<strong class="reserved">long</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1957" name="L1957"></a>1957             <strong class="reserved">if</strong> (pos + 8 &lt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1958" name="L1958"></a>1958                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30020.html" title="Multiple defined in 17 places.">putLong</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v);
<a id="L1959" name="L1959"></a>1959                 pos += 8;
<a id="L1960" name="L1960"></a>1960             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1961" name="L1961"></a>1961                 dout.<a href="../D/37103.html" title="Multiple defined in 11 places.">writeLong</a>(v);
<a id="L1962" name="L1962"></a>1962             <em class="brace">}</em>
<a id="L1963" name="L1963"></a>1963         <em class="brace">}</em>
<a id="L1964" name="L1964"></a>1964 
<a id="L1965" name="L1965"></a>1965         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30601.html" title="Multiple referred from 7 places.">writeDouble</a>(<strong class="reserved">double</strong> v) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1966" name="L1966"></a>1966             <strong class="reserved">if</strong> (pos + 8 &lt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1967" name="L1967"></a>1967                 <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29988.html" title="Multiple defined in 17 places.">putDouble</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v);
<a id="L1968" name="L1968"></a>1968                 pos += 8;
<a id="L1969" name="L1969"></a>1969             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1970" name="L1970"></a>1970                 dout.<a href="../D/37038.html" title="Multiple defined in 10 places.">writeDouble</a>(v);
<a id="L1971" name="L1971"></a>1971             <em class="brace">}</em>
<a id="L1972" name="L1972"></a>1972         <em class="brace">}</em>
<a id="L1973" name="L1973"></a>1973 
<a id="L1974" name="L1974"></a>1974         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30573.html" title="Multiple referred from 31 places.">writeBytes</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1975" name="L1975"></a>1975             <strong class="reserved">int</strong> endoff = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1976" name="L1976"></a>1976             <strong class="reserved">int</strong> cpos = 0;
<a id="L1977" name="L1977"></a>1977             <strong class="reserved">int</strong> csize = 0;
<a id="L1978" name="L1978"></a>1978             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> off = 0; off &lt; endoff; ) <em class="brace">{</em>
<a id="L1979" name="L1979"></a>1979                 <strong class="reserved">if</strong> (cpos &gt;= csize) <em class="brace">{</em>
<a id="L1980" name="L1980"></a>1980                     cpos = 0;
<a id="L1981" name="L1981"></a>1981                     csize = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, CHAR_BUF_SIZE);
<a id="L1982" name="L1982"></a>1982                     s.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(off, off + csize, cbuf, 0);
<a id="L1983" name="L1983"></a>1983                 <em class="brace">}</em>
<a id="L1984" name="L1984"></a>1984                 <strong class="reserved">if</strong> (pos &gt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L1985" name="L1985"></a>1985                     <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L1986" name="L1986"></a>1986                 <em class="brace">}</em>
<a id="L1987" name="L1987"></a>1987                 <strong class="reserved">int</strong> n = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(csize - cpos, MAX_BLOCK_SIZE - pos);
<a id="L1988" name="L1988"></a>1988                 <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = pos + n;
<a id="L1989" name="L1989"></a>1989                 <strong class="reserved">while</strong> (pos &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L1990" name="L1990"></a>1990                     <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++] = (<strong class="reserved">byte</strong>) cbuf[cpos++];
<a id="L1991" name="L1991"></a>1991                 <em class="brace">}</em>
<a id="L1992" name="L1992"></a>1992                 off += n;
<a id="L1993" name="L1993"></a>1993             <em class="brace">}</em>
<a id="L1994" name="L1994"></a>1994         <em class="brace">}</em>
<a id="L1995" name="L1995"></a>1995 
<a id="L1996" name="L1996"></a>1996         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30581.html" title="Multiple referred from 4 places.">writeChars</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1997" name="L1997"></a>1997             <strong class="reserved">int</strong> endoff = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1998" name="L1998"></a>1998             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> off = 0; off &lt; endoff; ) <em class="brace">{</em>
<a id="L1999" name="L1999"></a>1999                 <strong class="reserved">int</strong> csize = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, CHAR_BUF_SIZE);
<a id="L2000" name="L2000"></a>2000                 s.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(off, off + csize, cbuf, 0);
<a id="L2001" name="L2001"></a>2001                 <a href="../D/37014.html" title="Multiple defined in 11 places.">writeChars</a>(cbuf, 0, csize);
<a id="L2002" name="L2002"></a>2002                 off += csize;
<a id="L2003" name="L2003"></a>2003             <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004         <em class="brace">}</em>
<a id="L2005" name="L2005"></a>2005 
<a id="L2006" name="L2006"></a>2006         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30744.html" title="Multiple referred from 84 places.">writeUTF</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2007" name="L2007"></a>2007             <a href="../D/37198.html" title="Multiple defined in 10 places.">writeUTF</a>(s, <a href="../S/1381.html#L2135" title="Defined at 2135 in src/java/io/ObjectOutputStream.java.">getUTFLength</a>(s));
<a id="L2008" name="L2008"></a>2008         <em class="brace">}</em>
<a id="L2009" name="L2009"></a>2009 
<a id="L2010" name="L2010"></a>2010 
<div class="comment">
         /* -------------- primitive data array output methods -------------- */</div>
<div class="comment">
          The following methods write out spans of primitive data values.
          Though equivalent to calling the corresponding primitive write
          methods repeatedly, these methods are optimized for writing groups
          of primitive data values more efficiently.</div>
<a id="L2018" name="L2018"></a>2018 
<a id="L2019" name="L2019"></a>2019         <strong class="reserved">void</strong> <a href="../S/1381.html#L1358" title="Referred from 1358 in src/java/io/ObjectOutputStream.java.">writeBooleans</a>(<strong class="reserved">boolean</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2020" name="L2020"></a>2020             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2021" name="L2021"></a>2021             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2022" name="L2022"></a>2022                 <strong class="reserved">if</strong> (pos &gt;= MAX_BLOCK_SIZE) <em class="brace">{</em>
<a id="L2023" name="L2023"></a>2023                     <a href="../D/15155.html" title="Multiple defined in 4 places.">drain</a>();
<a id="L2024" name="L2024"></a>2024                 <em class="brace">}</em>
<a id="L2025" name="L2025"></a>2025                 <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + (MAX_BLOCK_SIZE - pos));
<a id="L2026" name="L2026"></a>2026                 <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2027" name="L2027"></a>2027                     <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29975.html" title="Multiple defined in 3 places.">putBoolean</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos++, v[off++]);
<a id="L2028" name="L2028"></a>2028                 <em class="brace">}</em>
<a id="L2029" name="L2029"></a>2029             <em class="brace">}</em>
<a id="L2030" name="L2030"></a>2030         <em class="brace">}</em>
<a id="L2031" name="L2031"></a>2031 
<a id="L2032" name="L2032"></a>2032         <strong class="reserved">void</strong> <a href="../R/30581.html" title="Multiple referred from 4 places.">writeChars</a>(<strong class="reserved">char</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2033" name="L2033"></a>2033             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 2;
<a id="L2034" name="L2034"></a>2034             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2035" name="L2035"></a>2035             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2036" name="L2036"></a>2036                 <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2037" name="L2037"></a>2037                     <strong class="reserved">int</strong> avail = (MAX_BLOCK_SIZE - pos) &gt;&gt; 1;
<a id="L2038" name="L2038"></a>2038                     <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + avail);
<a id="L2039" name="L2039"></a>2039                     <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2040" name="L2040"></a>2040                         <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/29979.html" title="Multiple defined in 15 places.">putChar</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v[off++]);
<a id="L2041" name="L2041"></a>2041                         pos += 2;
<a id="L2042" name="L2042"></a>2042                     <em class="brace">}</em>
<a id="L2043" name="L2043"></a>2043                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2044" name="L2044"></a>2044                     dout.<a href="../D/37008.html" title="Multiple defined in 8 places.">writeChar</a>(v[off++]);
<a id="L2045" name="L2045"></a>2045                 <em class="brace">}</em>
<a id="L2046" name="L2046"></a>2046             <em class="brace">}</em>
<a id="L2047" name="L2047"></a>2047         <em class="brace">}</em>
<a id="L2048" name="L2048"></a>2048 
<a id="L2049" name="L2049"></a>2049         <strong class="reserved">void</strong> <a href="../R/30711.html" title="Multiple referred from 4 places.">writeShorts</a>(<strong class="reserved">short</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2050" name="L2050"></a>2050             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 2;
<a id="L2051" name="L2051"></a>2051             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2052" name="L2052"></a>2052             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2053" name="L2053"></a>2053                 <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2054" name="L2054"></a>2054                     <strong class="reserved">int</strong> avail = (MAX_BLOCK_SIZE - pos) &gt;&gt; 1;
<a id="L2055" name="L2055"></a>2055                     <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + avail);
<a id="L2056" name="L2056"></a>2056                     <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2057" name="L2057"></a>2057                         <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30040.html" title="Multiple defined in 15 places.">putShort</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v[off++]);
<a id="L2058" name="L2058"></a>2058                         pos += 2;
<a id="L2059" name="L2059"></a>2059                     <em class="brace">}</em>
<a id="L2060" name="L2060"></a>2060                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2061" name="L2061"></a>2061                     dout.<a href="../D/37158.html" title="Multiple defined in 12 places.">writeShort</a>(v[off++]);
<a id="L2062" name="L2062"></a>2062                 <em class="brace">}</em>
<a id="L2063" name="L2063"></a>2063             <em class="brace">}</em>
<a id="L2064" name="L2064"></a>2064         <em class="brace">}</em>
<a id="L2065" name="L2065"></a>2065 
<a id="L2066" name="L2066"></a>2066         <strong class="reserved">void</strong> <a href="../R/30647.html" title="Multiple referred from 3 places.">writeInts</a>(<strong class="reserved">int</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2067" name="L2067"></a>2067             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 4;
<a id="L2068" name="L2068"></a>2068             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2069" name="L2069"></a>2069             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2070" name="L2070"></a>2070                 <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2071" name="L2071"></a>2071                     <strong class="reserved">int</strong> avail = (MAX_BLOCK_SIZE - pos) &gt;&gt; 2;
<a id="L2072" name="L2072"></a>2072                     <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + avail);
<a id="L2073" name="L2073"></a>2073                     <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2074" name="L2074"></a>2074                         <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30009.html" title="Multiple defined in 17 places.">putInt</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v[off++]);
<a id="L2075" name="L2075"></a>2075                         pos += 4;
<a id="L2076" name="L2076"></a>2076                     <em class="brace">}</em>
<a id="L2077" name="L2077"></a>2077                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2078" name="L2078"></a>2078                     dout.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(v[off++]);
<a id="L2079" name="L2079"></a>2079                 <em class="brace">}</em>
<a id="L2080" name="L2080"></a>2080             <em class="brace">}</em>
<a id="L2081" name="L2081"></a>2081         <em class="brace">}</em>
<a id="L2082" name="L2082"></a>2082 
<a id="L2083" name="L2083"></a>2083         <strong class="reserved">void</strong> <a href="../S/1381.html#L1342" title="Referred from 1342 in src/java/io/ObjectOutputStream.java.">writeFloats</a>(<strong class="reserved">float</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2084" name="L2084"></a>2084             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 4;
<a id="L2085" name="L2085"></a>2085             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2086" name="L2086"></a>2086             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2087" name="L2087"></a>2087                 <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2088" name="L2088"></a>2088                     <strong class="reserved">int</strong> avail = (MAX_BLOCK_SIZE - pos) &gt;&gt; 2;
<a id="L2089" name="L2089"></a>2089                     <strong class="reserved">int</strong> chunklen = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, avail);
<a id="L2090" name="L2090"></a>2090                     <a href="../S/1381.html#L1588" title="Defined at 1588 in src/java/io/ObjectOutputStream.java.">floatsToBytes</a>(v, off, <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, chunklen);
<a id="L2091" name="L2091"></a>2091                     off += chunklen;
<a id="L2092" name="L2092"></a>2092                     pos += chunklen &lt;&lt; 2;
<a id="L2093" name="L2093"></a>2093                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2094" name="L2094"></a>2094                     dout.<a href="../D/37067.html" title="Multiple defined in 10 places.">writeFloat</a>(v[off++]);
<a id="L2095" name="L2095"></a>2095                 <em class="brace">}</em>
<a id="L2096" name="L2096"></a>2096             <em class="brace">}</em>
<a id="L2097" name="L2097"></a>2097         <em class="brace">}</em>
<a id="L2098" name="L2098"></a>2098 
<a id="L2099" name="L2099"></a>2099         <strong class="reserved">void</strong> <a href="../S/1381.html#L1338" title="Referred from 1338 in src/java/io/ObjectOutputStream.java.">writeLongs</a>(<strong class="reserved">long</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2100" name="L2100"></a>2100             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 8;
<a id="L2101" name="L2101"></a>2101             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2102" name="L2102"></a>2102             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2103" name="L2103"></a>2103                 <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2104" name="L2104"></a>2104                     <strong class="reserved">int</strong> avail = (MAX_BLOCK_SIZE - pos) &gt;&gt; 3;
<a id="L2105" name="L2105"></a>2105                     <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + avail);
<a id="L2106" name="L2106"></a>2106                     <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2107" name="L2107"></a>2107                         <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/30020.html" title="Multiple defined in 17 places.">putLong</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v[off++]);
<a id="L2108" name="L2108"></a>2108                         pos += 8;
<a id="L2109" name="L2109"></a>2109                     <em class="brace">}</em>
<a id="L2110" name="L2110"></a>2110                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2111" name="L2111"></a>2111                     dout.<a href="../D/37103.html" title="Multiple defined in 11 places.">writeLong</a>(v[off++]);
<a id="L2112" name="L2112"></a>2112                 <em class="brace">}</em>
<a id="L2113" name="L2113"></a>2113             <em class="brace">}</em>
<a id="L2114" name="L2114"></a>2114         <em class="brace">}</em>
<a id="L2115" name="L2115"></a>2115 
<a id="L2116" name="L2116"></a>2116         <strong class="reserved">void</strong> <a href="../S/1381.html#L1346" title="Referred from 1346 in src/java/io/ObjectOutputStream.java.">writeDoubles</a>(<strong class="reserved">double</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2117" name="L2117"></a>2117             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 8;
<a id="L2118" name="L2118"></a>2118             <strong class="reserved">int</strong> endoff = off + len;
<a id="L2119" name="L2119"></a>2119             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2120" name="L2120"></a>2120                 <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2121" name="L2121"></a>2121                     <strong class="reserved">int</strong> avail = (MAX_BLOCK_SIZE - pos) &gt;&gt; 3;
<a id="L2122" name="L2122"></a>2122                     <strong class="reserved">int</strong> chunklen = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, avail);
<a id="L2123" name="L2123"></a>2123                     <a href="../S/1381.html#L1596" title="Defined at 1596 in src/java/io/ObjectOutputStream.java.">doublesToBytes</a>(v, off, <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, chunklen);
<a id="L2124" name="L2124"></a>2124                     off += chunklen;
<a id="L2125" name="L2125"></a>2125                     pos += chunklen &lt;&lt; 3;
<a id="L2126" name="L2126"></a>2126                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2127" name="L2127"></a>2127                     dout.<a href="../D/37038.html" title="Multiple defined in 10 places.">writeDouble</a>(v[off++]);
<a id="L2128" name="L2128"></a>2128                 <em class="brace">}</em>
<a id="L2129" name="L2129"></a>2129             <em class="brace">}</em>
<a id="L2130" name="L2130"></a>2130         <em class="brace">}</em>
<a id="L2131" name="L2131"></a>2131 
<div class="comment">
          Returns the length in bytes of the UTF encoding of the given string.</div>
<a id="L2135" name="L2135"></a>2135         <strong class="reserved">long</strong> <a href="../R/19665.html" title="Multiple referred from 3 places.">getUTFLength</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <em class="brace">{</em>
<a id="L2136" name="L2136"></a>2136             <strong class="reserved">int</strong> len = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2137" name="L2137"></a>2137             <strong class="reserved">long</strong> utflen = 0;
<a id="L2138" name="L2138"></a>2138             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> off = 0; off &lt; len; ) <em class="brace">{</em>
<a id="L2139" name="L2139"></a>2139                 <strong class="reserved">int</strong> csize = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(len - off, CHAR_BUF_SIZE);
<a id="L2140" name="L2140"></a>2140                 s.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(off, off + csize, cbuf, 0);
<a id="L2141" name="L2141"></a>2141                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cpos = 0; cpos &lt; csize; cpos++) <em class="brace">{</em>
<a id="L2142" name="L2142"></a>2142                     <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = cbuf[cpos];
<a id="L2143" name="L2143"></a>2143                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;= 0x0001 &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= 0x007F) <em class="brace">{</em>
<a id="L2144" name="L2144"></a>2144                         utflen++;
<a id="L2145" name="L2145"></a>2145                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt; 0x07FF) <em class="brace">{</em>
<a id="L2146" name="L2146"></a>2146                         utflen += 3;
<a id="L2147" name="L2147"></a>2147                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2148" name="L2148"></a>2148                         utflen += 2;
<a id="L2149" name="L2149"></a>2149                     <em class="brace">}</em>
<a id="L2150" name="L2150"></a>2150                 <em class="brace">}</em>
<a id="L2151" name="L2151"></a>2151                 off += csize;
<a id="L2152" name="L2152"></a>2152             <em class="brace">}</em>
<a id="L2153" name="L2153"></a>2153             <strong class="reserved">return</strong> utflen;
<a id="L2154" name="L2154"></a>2154         <em class="brace">}</em>
<a id="L2155" name="L2155"></a>2155 
<div class="comment">
          Writes the given string in UTF format.  This method is used in
          situations where the UTF encoding length of the string is already
          known; specifying it explicitly avoids a prescan of the string to
          determine its UTF length.</div>
<a id="L2162" name="L2162"></a>2162         <strong class="reserved">void</strong> <a href="../R/30744.html" title="Multiple referred from 84 places.">writeUTF</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s, <strong class="reserved">long</strong> utflen) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2163" name="L2163"></a>2163             <strong class="reserved">if</strong> (utflen &gt; 0xFFFFL) <em class="brace">{</em>
<a id="L2164" name="L2164"></a>2164                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L2165" name="L2165"></a>2165             <em class="brace">}</em>
<a id="L2166" name="L2166"></a>2166             <a href="../D/37158.html" title="Multiple defined in 12 places.">writeShort</a>((<strong class="reserved">int</strong>) utflen);
<a id="L2167" name="L2167"></a>2167             <strong class="reserved">if</strong> (utflen == (<strong class="reserved">long</strong>) s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2168" name="L2168"></a>2168                 <a href="../D/37004.html" title="Multiple defined in 13 places.">writeBytes</a>(s);
<a id="L2169" name="L2169"></a>2169             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2170" name="L2170"></a>2170                 <a href="../S/1381.html#L2200" title="Defined at 2200 in src/java/io/ObjectOutputStream.java.">writeUTFBody</a>(s);
<a id="L2171" name="L2171"></a>2171             <em class="brace">}</em>
<a id="L2172" name="L2172"></a>2172         <em class="brace">}</em>
<a id="L2173" name="L2173"></a>2173 
<div class="comment">
          Writes given string in "long" UTF format.  "Long" UTF format is
          identical to standard UTF, except that it uses an 8 byte header
          (instead of the standard 2 bytes) to convey the UTF encoding length.</div>
<a id="L2179" name="L2179"></a>2179         <strong class="reserved">void</strong> <a href="../R/30663.html" title="Multiple referred from 2 places.">writeLongUTF</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2180" name="L2180"></a>2180             <a href="../D/37104.html" title="Multiple defined in 2 places.">writeLongUTF</a>(s, <a href="../S/1381.html#L2135" title="Defined at 2135 in src/java/io/ObjectOutputStream.java.">getUTFLength</a>(s));
<a id="L2181" name="L2181"></a>2181         <em class="brace">}</em>
<a id="L2182" name="L2182"></a>2182 
<div class="comment">
          Writes given string in "long" UTF format, where the UTF encoding
          length of the string is already known.</div>
<a id="L2187" name="L2187"></a>2187         <strong class="reserved">void</strong> <a href="../R/30663.html" title="Multiple referred from 2 places.">writeLongUTF</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s, <strong class="reserved">long</strong> utflen) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2188" name="L2188"></a>2188             <a href="../D/37103.html" title="Multiple defined in 11 places.">writeLong</a>(utflen);
<a id="L2189" name="L2189"></a>2189             <strong class="reserved">if</strong> (utflen == (<strong class="reserved">long</strong>) s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2190" name="L2190"></a>2190                 <a href="../D/37004.html" title="Multiple defined in 13 places.">writeBytes</a>(s);
<a id="L2191" name="L2191"></a>2191             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2192" name="L2192"></a>2192                 <a href="../S/1381.html#L2200" title="Defined at 2200 in src/java/io/ObjectOutputStream.java.">writeUTFBody</a>(s);
<a id="L2193" name="L2193"></a>2193             <em class="brace">}</em>
<a id="L2194" name="L2194"></a>2194         <em class="brace">}</em>
<a id="L2195" name="L2195"></a>2195 
<div class="comment">
          Writes the "body" (i.e., the UTF representation minus the 2-byte or
          8-byte length header) of the UTF encoding for the given string.</div>
<a id="L2200" name="L2200"></a>2200         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30746.html" title="Multiple referred from 2 places.">writeUTFBody</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2201" name="L2201"></a>2201             <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = MAX_BLOCK_SIZE - 3;
<a id="L2202" name="L2202"></a>2202             <strong class="reserved">int</strong> len = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2203" name="L2203"></a>2203             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> off = 0; off &lt; len; ) <em class="brace">{</em>
<a id="L2204" name="L2204"></a>2204                 <strong class="reserved">int</strong> csize = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(len - off, CHAR_BUF_SIZE);
<a id="L2205" name="L2205"></a>2205                 s.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(off, off + csize, cbuf, 0);
<a id="L2206" name="L2206"></a>2206                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cpos = 0; cpos &lt; csize; cpos++) <em class="brace">{</em>
<a id="L2207" name="L2207"></a>2207                     <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = cbuf[cpos];
<a id="L2208" name="L2208"></a>2208                     <strong class="reserved">if</strong> (pos &lt;= <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L2209" name="L2209"></a>2209                         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= 0x007F &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != 0) <em class="brace">{</em>
<a id="L2210" name="L2210"></a>2210                             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++] = (<strong class="reserved">byte</strong>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L2211" name="L2211"></a>2211                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt; 0x07FF) <em class="brace">{</em>
<a id="L2212" name="L2212"></a>2212                             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 2] = (<strong class="reserved">byte</strong>) (0x80 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 0) &amp; 0x3F));
<a id="L2213" name="L2213"></a>2213                             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 1] = (<strong class="reserved">byte</strong>) (0x80 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 6) &amp; 0x3F));
<a id="L2214" name="L2214"></a>2214                             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 0] = (<strong class="reserved">byte</strong>) (0xE0 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 12) &amp; 0x0F));
<a id="L2215" name="L2215"></a>2215                             pos += 3;
<a id="L2216" name="L2216"></a>2216                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2217" name="L2217"></a>2217                             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 1] = (<strong class="reserved">byte</strong>) (0x80 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 0) &amp; 0x3F));
<a id="L2218" name="L2218"></a>2218                             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 0] = (<strong class="reserved">byte</strong>) (0xC0 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 6) &amp; 0x1F));
<a id="L2219" name="L2219"></a>2219                             pos += 2;
<a id="L2220" name="L2220"></a>2220                         <em class="brace">}</em>
<a id="L2221" name="L2221"></a>2221                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>    <em class="comment">// write one byte at a time to normalize block</em>
<a id="L2222" name="L2222"></a>2222                         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt;= 0x007F &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != 0) <em class="brace">{</em>
<a id="L2223" name="L2223"></a>2223                             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2224" name="L2224"></a>2224                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt; 0x07FF) <em class="brace">{</em>
<a id="L2225" name="L2225"></a>2225                             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(0xE0 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 12) &amp; 0x0F));
<a id="L2226" name="L2226"></a>2226                             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(0x80 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 6) &amp; 0x3F));
<a id="L2227" name="L2227"></a>2227                             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(0x80 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 0) &amp; 0x3F));
<a id="L2228" name="L2228"></a>2228                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2229" name="L2229"></a>2229                             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(0xC0 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 6) &amp; 0x1F));
<a id="L2230" name="L2230"></a>2230                             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(0x80 | ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt;&gt; 0) &amp; 0x3F));
<a id="L2231" name="L2231"></a>2231                         <em class="brace">}</em>
<a id="L2232" name="L2232"></a>2232                     <em class="brace">}</em>
<a id="L2233" name="L2233"></a>2233                 <em class="brace">}</em>
<a id="L2234" name="L2234"></a>2234                 off += csize;
<a id="L2235" name="L2235"></a>2235             <em class="brace">}</em>
<a id="L2236" name="L2236"></a>2236         <em class="brace">}</em>
<a id="L2237" name="L2237"></a>2237     <em class="brace">}</em>
<a id="L2238" name="L2238"></a>2238 
<div class="comment">
      Lightweight identity hash table which maps objects to integer handles,
      assigned in ascending order.</div>
<a id="L2243" name="L2243"></a>2243     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/3375.html" title="Multiple referred from 6 places.">HandleTable</a> <em class="brace">{</em>
<a id="L2244" name="L2244"></a>2244 
<div class="comment">
         /* number of mappings in table/next available handle */</div>
<a id="L2246" name="L2246"></a>2246         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<div class="comment">
         /* size threshold determining when to expand hash spine */</div>
<a id="L2248" name="L2248"></a>2248         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../S/4096.html#L74" title="Defined at 74 in src/javax/xml/ws/soap/MTOM.java.">threshold</a>;
<div class="comment">
         /* factor for computing size threshold */</div>
<a id="L2250" name="L2250"></a>2250         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>;
<div class="comment">
         /* maps hash value -&gt; candidate handle value */</div>
<a id="L2252" name="L2252"></a>2252         <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] spine;
<div class="comment">
         /* maps handle value -&gt; next candidate handle value */</div>
<a id="L2254" name="L2254"></a>2254         <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<div class="comment">
         /* maps handle value -&gt; associated object */</div>
<a id="L2256" name="L2256"></a>2256         <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] objs;
<a id="L2257" name="L2257"></a>2257 
<div class="comment">
          Creates new HandleTable with given capacity and load factor.</div>
<a id="L2261" name="L2261"></a>2261         HandleTable(<strong class="reserved">int</strong> initialCapacity, <strong class="reserved">float</strong> <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>) <em class="brace">{</em>
<a id="L2262" name="L2262"></a>2262             <strong class="reserved">this</strong>.<a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a> = <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>;
<a id="L2263" name="L2263"></a>2263             spine = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[initialCapacity];
<a id="L2264" name="L2264"></a>2264             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[initialCapacity];
<a id="L2265" name="L2265"></a>2265             objs = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[initialCapacity];
<a id="L2266" name="L2266"></a>2266             <a href="../S/4096.html#L74" title="Defined at 74 in src/javax/xml/ws/soap/MTOM.java.">threshold</a> = (<strong class="reserved">int</strong>) (initialCapacity * <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>);
<a id="L2267" name="L2267"></a>2267             <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L2268" name="L2268"></a>2268         <em class="brace">}</em>
<a id="L2269" name="L2269"></a>2269 
<div class="comment">
          Assigns next available handle to given object, and returns handle
          value.  Handles are assigned in ascending order starting at 0.</div>
<a id="L2274" name="L2274"></a>2274         <strong class="reserved">int</strong> <a href="../R/10378.html" title="Multiple referred from 38 places.">assign</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L2275" name="L2275"></a>2275             <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L2276" name="L2276"></a>2276                 <a href="../S/1381.html#L2345" title="Defined at 2345 in src/java/io/ObjectOutputStream.java.">growEntries</a>();
<a id="L2277" name="L2277"></a>2277             <em class="brace">}</em>
<a id="L2278" name="L2278"></a>2278             <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= <a href="../S/4096.html#L74" title="Defined at 74 in src/javax/xml/ws/soap/MTOM.java.">threshold</a>) <em class="brace">{</em>
<a id="L2279" name="L2279"></a>2279                 <a href="../S/1381.html#L2333" title="Defined at 2333 in src/java/io/ObjectOutputStream.java.">growSpine</a>();
<a id="L2280" name="L2280"></a>2280             <em class="brace">}</em>
<a id="L2281" name="L2281"></a>2281             <a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(obj, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L2282" name="L2282"></a>2282             <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>++;
<a id="L2283" name="L2283"></a>2283         <em class="brace">}</em>
<a id="L2284" name="L2284"></a>2284 
<div class="comment">
          Looks up and returns handle associated with given object, or -1 if
          no mapping found.</div>
<a id="L2289" name="L2289"></a>2289         <strong class="reserved">int</strong> <a href="../R/22724.html" title="Multiple referred from 149 places.">lookup</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L2290" name="L2290"></a>2290             <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> == 0) <em class="brace">{</em>
<a id="L2291" name="L2291"></a>2291                 <strong class="reserved">return</strong> -1;
<a id="L2292" name="L2292"></a>2292             <em class="brace">}</em>
<a id="L2293" name="L2293"></a>2293             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>(obj) % spine.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2294" name="L2294"></a>2294             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = spine[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>]; i &gt;= 0; i = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>[i]) <em class="brace">{</em>
<a id="L2295" name="L2295"></a>2295                 <strong class="reserved">if</strong> (objs[i] == obj) <em class="brace">{</em>
<a id="L2296" name="L2296"></a>2296                     <strong class="reserved">return</strong> i;
<a id="L2297" name="L2297"></a>2297                 <em class="brace">}</em>
<a id="L2298" name="L2298"></a>2298             <em class="brace">}</em>
<a id="L2299" name="L2299"></a>2299             <strong class="reserved">return</strong> -1;
<a id="L2300" name="L2300"></a>2300         <em class="brace">}</em>
<a id="L2301" name="L2301"></a>2301 
<div class="comment">
          Resets table to its initial (empty) state.</div>
<a id="L2305" name="L2305"></a>2305         <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L2306" name="L2306"></a>2306             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(spine, -1);
<a id="L2307" name="L2307"></a>2307             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(objs, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">null</strong>);
<a id="L2308" name="L2308"></a>2308             <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L2309" name="L2309"></a>2309         <em class="brace">}</em>
<a id="L2310" name="L2310"></a>2310 
<div class="comment">
          Returns the number of mappings currently in table.</div>
<a id="L2314" name="L2314"></a>2314         <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L2315" name="L2315"></a>2315             <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L2316" name="L2316"></a>2316         <em class="brace">}</em>
<a id="L2317" name="L2317"></a>2317 
<div class="comment">
          Inserts mapping object -&gt; handle mapping into table.  Assumes table
          is large enough to accommodate new mapping.</div>
<a id="L2322" name="L2322"></a>2322         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20751.html" title="Multiple referred from 148 places.">insert</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <em class="brace">{</em>
<a id="L2323" name="L2323"></a>2323             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>(obj) % spine.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2324" name="L2324"></a>2324             objs[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] = obj;
<a id="L2325" name="L2325"></a>2325             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] = spine[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>];
<a id="L2326" name="L2326"></a>2326             spine[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>;
<a id="L2327" name="L2327"></a>2327         <em class="brace">}</em>
<a id="L2328" name="L2328"></a>2328 
<div class="comment">
          Expands the hash "spine" -- equivalent to increasing the number of
          buckets in a conventional hash table.</div>
<a id="L2333" name="L2333"></a>2333         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L2279" title="Referred from 2279 in src/java/io/ObjectOutputStream.java.">growSpine</a>() <em class="brace">{</em>
<a id="L2334" name="L2334"></a>2334             spine = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[(spine.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;&lt; 1) + 1];
<a id="L2335" name="L2335"></a>2335             <a href="../S/4096.html#L74" title="Defined at 74 in src/javax/xml/ws/soap/MTOM.java.">threshold</a> = (<strong class="reserved">int</strong>) (spine.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> * <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>);
<a id="L2336" name="L2336"></a>2336             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(spine, -1);
<a id="L2337" name="L2337"></a>2337             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L2338" name="L2338"></a>2338                 <a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>(objs[i], i);
<a id="L2339" name="L2339"></a>2339             <em class="brace">}</em>
<a id="L2340" name="L2340"></a>2340         <em class="brace">}</em>
<a id="L2341" name="L2341"></a>2341 
<div class="comment">
          Increases hash table capacity by lengthening entry arrays.</div>
<a id="L2345" name="L2345"></a>2345         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1381.html#L2276" title="Referred from 2276 in src/java/io/ObjectOutputStream.java.">growEntries</a>() <em class="brace">{</em>
<a id="L2346" name="L2346"></a>2346             <strong class="reserved">int</strong> newLength = (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;&lt; 1) + 1;
<a id="L2347" name="L2347"></a>2347             <strong class="reserved">int</strong>[] newNext = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[newLength];
<a id="L2348" name="L2348"></a>2348             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, 0, newNext, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L2349" name="L2349"></a>2349             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = newNext;
<a id="L2350" name="L2350"></a>2350 
<a id="L2351" name="L2351"></a>2351             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] newObjs = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[newLength];
<a id="L2352" name="L2352"></a>2352             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(objs, 0, newObjs, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L2353" name="L2353"></a>2353             objs = newObjs;
<a id="L2354" name="L2354"></a>2354         <em class="brace">}</em>
<a id="L2355" name="L2355"></a>2355 
<div class="comment">
          Returns hash value for given object.</div>
<a id="L2359" name="L2359"></a>2359         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20297.html" title="Multiple referred from 694 places.">hash</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L2360" name="L2360"></a>2360             <strong class="reserved">return</strong> <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L508" title="Defined at 508 in src/java/lang/System.java.">identityHashCode</a>(obj) &amp; 0x7FFFFFFF;
<a id="L2361" name="L2361"></a>2361         <em class="brace">}</em>
<a id="L2362" name="L2362"></a>2362     <em class="brace">}</em>
<a id="L2363" name="L2363"></a>2363 
<div class="comment">
      Lightweight identity hash table which maps objects to replacement
      objects.</div>
<a id="L2368" name="L2368"></a>2368     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/6622.html" title="Multiple referred from 2 places.">ReplaceTable</a> <em class="brace">{</em>
<a id="L2369" name="L2369"></a>2369 
<div class="comment">
         /* maps object -&gt; index */</div>
<a id="L2371" name="L2371"></a>2371         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/3726.html" title="Multiple defined in 2 places.">HandleTable</a> htab;
<div class="comment">
         /* maps index -&gt; replacement object */</div>
<a id="L2373" name="L2373"></a>2373         <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] reps;
<a id="L2374" name="L2374"></a>2374 
<div class="comment">
          Creates new ReplaceTable with given capacity and load factor.</div>
<a id="L2378" name="L2378"></a>2378         ReplaceTable(<strong class="reserved">int</strong> initialCapacity, <strong class="reserved">float</strong> <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>) <em class="brace">{</em>
<a id="L2379" name="L2379"></a>2379             htab = <strong class="reserved">new</strong> <a href="../D/3726.html" title="Multiple defined in 2 places.">HandleTable</a>(initialCapacity, <a href="../S/867.html#L1329" title="Defined at 1329 in src/java/util/HashMap.java.">loadFactor</a>);
<a id="L2380" name="L2380"></a>2380             reps = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[initialCapacity];
<a id="L2381" name="L2381"></a>2381         <em class="brace">}</em>
<a id="L2382" name="L2382"></a>2382 
<div class="comment">
          Enters mapping from object to replacement object.</div>
<a id="L2386" name="L2386"></a>2386         <strong class="reserved">void</strong> <a href="../R/10378.html" title="Multiple referred from 38 places.">assign</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> rep) <em class="brace">{</em>
<a id="L2387" name="L2387"></a>2387             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = htab.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(obj);
<a id="L2388" name="L2388"></a>2388             <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= reps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L2389" name="L2389"></a>2389                 <a href="../D/23921.html" title="Multiple defined in 19 places.">grow</a>();
<a id="L2390" name="L2390"></a>2390             <em class="brace">}</em>
<a id="L2391" name="L2391"></a>2391             reps[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = rep;
<a id="L2392" name="L2392"></a>2392         <em class="brace">}</em>
<a id="L2393" name="L2393"></a>2393 
<div class="comment">
          Looks up and returns replacement for given object.  If no
          replacement is found, returns the lookup object itself.</div>
<a id="L2398" name="L2398"></a>2398         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/22724.html" title="Multiple referred from 149 places.">lookup</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L2399" name="L2399"></a>2399             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = htab.<a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>(obj);
<a id="L2400" name="L2400"></a>2400             <strong class="reserved">return</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) ? reps[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] : obj;
<a id="L2401" name="L2401"></a>2401         <em class="brace">}</em>
<a id="L2402" name="L2402"></a>2402 
<div class="comment">
          Resets table to its initial (empty) state.</div>
<a id="L2406" name="L2406"></a>2406         <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L2407" name="L2407"></a>2407             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(reps, 0, htab.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(), <strong class="reserved">null</strong>);
<a id="L2408" name="L2408"></a>2408             htab.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L2409" name="L2409"></a>2409         <em class="brace">}</em>
<a id="L2410" name="L2410"></a>2410 
<div class="comment">
          Returns the number of mappings currently in table.</div>
<a id="L2414" name="L2414"></a>2414         <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L2415" name="L2415"></a>2415             <strong class="reserved">return</strong> htab.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L2416" name="L2416"></a>2416         <em class="brace">}</em>
<a id="L2417" name="L2417"></a>2417 
<div class="comment">
          Increases table capacity.</div>
<a id="L2421" name="L2421"></a>2421         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20041.html" title="Multiple referred from 53 places.">grow</a>() <em class="brace">{</em>
<a id="L2422" name="L2422"></a>2422             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] newReps = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[(reps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;&lt; 1) + 1];
<a id="L2423" name="L2423"></a>2423             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(reps, 0, newReps, 0, reps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L2424" name="L2424"></a>2424             reps = newReps;
<a id="L2425" name="L2425"></a>2425         <em class="brace">}</em>
<a id="L2426" name="L2426"></a>2426     <em class="brace">}</em>
<a id="L2427" name="L2427"></a>2427 
<div class="comment">
      Stack to keep debug information about the state of the
      serialization process, for embedding in exception messages.</div>
<a id="L2432" name="L2432"></a>2432     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2057.html" title="Multiple referred from 2 places.">DebugTraceInfoStack</a> <em class="brace">{</em>
<a id="L2433" name="L2433"></a>2433         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>&gt; stack;
<a id="L2434" name="L2434"></a>2434 
<a id="L2435" name="L2435"></a>2435         DebugTraceInfoStack() <em class="brace">{</em>
<a id="L2436" name="L2436"></a>2436             stack = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;&gt;();
<a id="L2437" name="L2437"></a>2437         <em class="brace">}</em>
<a id="L2438" name="L2438"></a>2438 
<div class="comment">
          Removes all of the elements from enclosed list.</div>
<a id="L2442" name="L2442"></a>2442         <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L2443" name="L2443"></a>2443             stack.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L2444" name="L2444"></a>2444         <em class="brace">}</em>
<a id="L2445" name="L2445"></a>2445 
<div class="comment">
          Removes the object at the top of enclosed list.</div>
<a id="L2449" name="L2449"></a>2449         <strong class="reserved">void</strong> <a href="../R/24804.html" title="Multiple referred from 176 places.">pop</a>() <em class="brace">{</em>
<a id="L2450" name="L2450"></a>2450             stack.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(stack.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1);
<a id="L2451" name="L2451"></a>2451         <em class="brace">}</em>
<a id="L2452" name="L2452"></a>2452 
<div class="comment">
          Pushes a String onto the top of enclosed list.</div>
<a id="L2456" name="L2456"></a>2456         <strong class="reserved">void</strong> <a href="../R/25256.html" title="Multiple referred from 281 places.">push</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entry) <em class="brace">{</em>
<a id="L2457" name="L2457"></a>2457             stack.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>("\t- " + entry);
<a id="L2458" name="L2458"></a>2458         <em class="brace">}</em>
<a id="L2459" name="L2459"></a>2459 
<div class="comment">
          Returns a string representation of this object</div>
<a id="L2463" name="L2463"></a>2463         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L2464" name="L2464"></a>2464             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L2465" name="L2465"></a>2465             <strong class="reserved">if</strong> (!stack.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L2466" name="L2466"></a>2466                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = stack.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); i &gt; 0; i-- ) <em class="brace">{</em>
<a id="L2467" name="L2467"></a>2467                     <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(stack.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i-1) + ((i != 1) ? "\n" : ""));
<a id="L2468" name="L2468"></a>2468                 <em class="brace">}</em>
<a id="L2469" name="L2469"></a>2469             <em class="brace">}</em>
<a id="L2470" name="L2470"></a>2470             <strong class="reserved">return</strong> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2471" name="L2471"></a>2471         <em class="brace">}</em>
<a id="L2472" name="L2472"></a>2472     <em class="brace">}</em>
<a id="L2473" name="L2473"></a>2473 
<a id="L2474" name="L2474"></a>2474 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L304">[^]</a><a href="#L2463">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
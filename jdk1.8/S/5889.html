<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L258">[^]</a><a href="#L2366">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L258" title="Defined at 258.">ensureSizeOfIndex</a></li>
<li><a href="#L319" title="Defined at 319.">indexNode</a></li>
<li><a href="#L353" title="Defined at 353.">findGTE</a></li>
<li><a href="#L387" title="Defined at 387.">findElementFromIndex</a></li>
<li><a href="#L422" title="Defined at 422.">getNextNodeIdentity</a></li>
<li><a href="#L430" title="Defined at 430.">nextNode</a></li>
<li><a href="#L437" title="Defined at 437.">getNumberOfNodes</a></li>
<li><a href="#L461" title="Defined at 461.">_type</a></li>
<li><a href="#L479" title="Defined at 479.">_exptype</a></li>
<li><a href="#L502" title="Defined at 502.">_level</a></li>
<li><a href="#L524" title="Defined at 524.">_firstch</a></li>
<li><a href="#L557" title="Defined at 557.">_nextsib</a></li>
<li><a href="#L589" title="Defined at 589.">_prevsib</a></li>
<li><a href="#L616" title="Defined at 616.">_parent</a></li>
<li><a href="#L639" title="Defined at 639.">dumpDTM</a></li>
<li><a href="#L792" title="Defined at 792.">dumpNode</a></li>
<li><a href="#L863" title="Defined at 863.">setFeature</a></li>
<li><a href="#L879" title="Defined at 879.">hasChildNodes</a></li>
<li><a href="#L902" title="Defined at 902.">makeNodeHandle</a></li>
<li><a href="#L929" title="Defined at 929.">makeNodeIdentity</a></li>
<li><a href="#L969" title="Defined at 969.">getFirstChild</a></li>
<li><a href="#L986" title="Defined at 986.">getTypedFirstChild</a></li>
<li><a href="#L1022" title="Defined at 1022.">getLastChild</a></li>
<li><a href="#L1050" title="Defined at 1050.">getAttributeNode</a></li>
<li><a href="#L1059" title="Defined at 1059.">getFirstAttribute</a></li>
<li><a href="#L1072" title="Defined at 1072.">getFirstAttributeIdentity</a></li>
<li><a href="#L1107" title="Defined at 1107.">getTypedAttribute</a></li>
<li><a href="#L1138" title="Defined at 1138.">getNextSibling</a></li>
<li><a href="#L1153" title="Defined at 1153.">getTypedNextSibling</a></li>
<li><a href="#L1176" title="Defined at 1176.">getPreviousSibling</a></li>
<li><a href="#L1210" title="Defined at 1210.">getNextAttribute</a></li>
<li><a href="#L1230" title="Defined at 1230.">getNextAttributeIdentity</a></li>
<li><a href="#L1262" title="Defined at 1262.">declareNamespaceInContext</a></li>
<li><a href="#L1339" title="Defined at 1339.">findNamespaceContext</a></li>
<li><a href="#L1415" title="Defined at 1415.">findInSortedSuballocatedIntVector</a></li>
<li><a href="#L1459" title="Defined at 1459.">getFirstNamespaceNode</a></li>
<li><a href="#L1511" title="Defined at 1511.">getNextNamespaceNode</a></li>
<li><a href="#L1558" title="Defined at 1558.">getParent</a></li>
<li><a href="#L1577" title="Defined at 1577.">getDocument</a></li>
<li><a href="#L1594" title="Defined at 1594.">getOwnerDocument</a></li>
<li><a href="#L1611" title="Defined at 1611.">getDocumentRoot</a></li>
<li><a href="#L1625" title="Defined at 1625.">getStringValue</a></li>
<li><a href="#L1639" title="Defined at 1639.">getStringValueChunkCount</a></li>
<li><a href="#L1661" title="Defined at 1661.">getStringValueChunk</a></li>
<li><a href="#L1678" title="Defined at 1678.">getExpandedTypeID</a></li>
<li><a href="#L1704" title="Defined at 1704.">getExpandedTypeID</a></li>
<li><a href="#L1718" title="Defined at 1718.">getLocalNameFromExpandedNameID</a></li>
<li><a href="#L1730" title="Defined at 1730.">getNamespaceFromExpandedNameID</a></li>
<li><a href="#L1740" title="Defined at 1740.">getNamespaceType</a></li>
<li><a href="#L1758" title="Defined at 1758.">getNodeName</a></li>
<li><a href="#L1768" title="Defined at 1768.">getNodeNameX</a></li>
<li><a href="#L1785" title="Defined at 1785.">getLocalName</a></li>
<li><a href="#L1799" title="Defined at 1799.">getPrefix</a></li>
<li><a href="#L1812" title="Defined at 1812.">getNamespaceURI</a></li>
<li><a href="#L1823" title="Defined at 1823.">getNodeValue</a></li>
<li><a href="#L1834" title="Defined at 1834.">getNodeType</a></li>
<li><a href="#L1849" title="Defined at 1849.">getLevel</a></li>
<li><a href="#L1863" title="Defined at 1863.">getNodeIdent</a></li>
<li><a href="#L1880" title="Defined at 1880.">getNodeHandle</a></li>
<li><a href="#L1904" title="Defined at 1904.">isSupported</a></li>
<li><a href="#L1918" title="Defined at 1918.">getDocumentBaseURI</a></li>
<li><a href="#L1928" title="Defined at 1928.">setDocumentBaseURI</a></li>
<li><a href="#L1940" title="Defined at 1940.">getDocumentSystemIdentifier</a></li>
<li><a href="#L1955" title="Defined at 1955.">getDocumentEncoding</a></li>
<li><a href="#L1972" title="Defined at 1972.">getDocumentStandalone</a></li>
<li><a href="#L1987" title="Defined at 1987.">getDocumentVersion</a></li>
<li><a href="#L2002" title="Defined at 2002.">getDocumentAllDeclarationsProcessed</a></li>
<li><a href="#L2017" title="Defined at 2017.">getDocumentTypeDeclarationSystemIdentifier</a></li>
<li><a href="#L2027" title="Defined at 2027.">getDocumentTypeDeclarationPublicIdentifier</a></li>
<li><a href="#L2046" title="Defined at 2046.">getElementById</a></li>
<li><a href="#L2082" title="Defined at 2082.">getUnparsedEntityURI</a></li>
<li><a href="#L2092" title="Defined at 2092.">supportsPreStripping</a></li>
<li><a href="#L2113" title="Defined at 2113.">isNodeAfter</a></li>
<li><a href="#L2138" title="Defined at 2138.">isCharacterElementContentWhitespace</a></li>
<li><a href="#L2157" title="Defined at 2157.">isDocumentAllDeclarationsProcessed</a></li>
<li><a href="#L2172" title="Defined at 2172.">isAttributeSpecified</a></li>
<li><a href="#L2193" title="Defined at 2193.">dispatchCharactersEvents</a></li>
<li><a href="#L2205" title="Defined at 2205.">dispatchToEvents</a></li>
<li><a href="#L2216" title="Defined at 2216.">getNode</a></li>
<li><a href="#L2235" title="Defined at 2235.">appendChild</a></li>
<li><a href="#L2249" title="Defined at 2249.">appendTextChild</a></li>
<li><a href="#L2259" title="Defined at 2259.">error</a></li>
<li><a href="#L2270" title="Defined at 2270.">getShouldStripWhitespace</a></li>
<li><a href="#L2281" title="Defined at 2281.">pushShouldStripWhitespace</a></li>
<li><a href="#L2295" title="Defined at 2295.">popShouldStripWhitespace</a></li>
<li><a href="#L2308" title="Defined at 2308.">setShouldStripWhitespace</a></li>
<li><a href="#L2322" title="Defined at 2322.">documentRegistration</a></li>
<li><a href="#L2331" title="Defined at 2331.">documentRelease</a></li>
<li><a href="#L2342" title="Defined at 2342.">migrateTo</a></li>
<li><a href="#L2355" title="Defined at 2355.">getManager</a></li>
<li><a href="#L2366" title="Defined at 2366.">getDTMIDs</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: DTMDefaultBase.java,v 1.3 2005/09/28 13:48:52 pvedula Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.dtm.<a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.*;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.SuballocatedIntVector;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.BoolStack;
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Vector;
<a id="L30" name="L30"></a>  30 
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> javax.xml.transform.Source;
<a id="L32" name="L32"></a>  32 
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.XMLString;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.XMLStringFactory;
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.res.XMLMessages;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.res.XMLErrorResources;
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.io.*; <em class="comment">// for dumpDTM</em>
<a id="L40" name="L40"></a>  40 
<div class="comment">
  The <code>DTMDefaultBase</code> class serves as a helper base for DTMs.
  It sets up structures for navigation and type, while leaving data
  management and construction to the derived classes.</div>
<a id="L46" name="L46"></a>  46 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/1957.html" title="Multiple referred from 55 places.">DTMDefaultBase</a> <strong class="reserved">implements</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>
<a id="L47" name="L47"></a>  47 <em class="brace">{</em>
<a id="L48" name="L48"></a>  48     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> JJK_DEBUG=<strong class="reserved">false</strong>;
<a id="L49" name="L49"></a>  49 
<a id="L50" name="L50"></a>  50   <em class="comment">// This constant is likely to be removed in the future. Use the</em>
<a id="L51" name="L51"></a>  51   <em class="comment">// getDocument() method instead of ROOTNODE to get at the root</em>
<a id="L52" name="L52"></a>  52   <em class="comment">// node of a DTM.</em>
<div class="comment">
   /** The identity of the root node. */</div>
<a id="L54" name="L54"></a>  54   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ROOTNODE = 0;
<a id="L55" name="L55"></a>  55 
<div class="comment">
    The number of nodes, which is also used to determine the next
     node index.</div>
<a id="L60" name="L60"></a>  60   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_size = 0;
<a id="L61" name="L61"></a>  61 
<div class="comment">
   /** The expanded names, one array element for each node. */</div>
<a id="L63" name="L63"></a>  63   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_exptype;
<a id="L64" name="L64"></a>  64 
<div class="comment">
   /** First child values, one array element for each node. */</div>
<a id="L66" name="L66"></a>  66   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_firstch;
<a id="L67" name="L67"></a>  67 
<div class="comment">
   /** Next sibling values, one array element for each node. */</div>
<a id="L69" name="L69"></a>  69   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_nextsib;
<a id="L70" name="L70"></a>  70 
<div class="comment">
   /** Previous sibling values, one array element for each node. */</div>
<a id="L72" name="L72"></a>  72   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_prevsib;
<a id="L73" name="L73"></a>  73 
<div class="comment">
   /** Previous sibling values, one array element for each node. */</div>
<a id="L75" name="L75"></a>  75   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_parent;
<a id="L76" name="L76"></a>  76 
<div class="comment">
   /** Vector of SuballocatedIntVectors of NS decl sets */</div>
<a id="L78" name="L78"></a>  78   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> m_namespaceDeclSets = <strong class="reserved">null</strong>;
<a id="L79" name="L79"></a>  79 
<div class="comment">
 SuballocatedIntVector  of elements at which corresponding
   * namespaceDeclSets were defined </div>
<a id="L82" name="L82"></a>  82   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_namespaceDeclSetElements = <strong class="reserved">null</strong>;
<a id="L83" name="L83"></a>  83 
<div class="comment">
    These hold indexes to elements based on namespace and local name.
    The base lookup is the the namespace.  The second lookup is the local
    name, and the last array contains the the first free element
    at the start, and the list of element handles following.</div>
<a id="L90" name="L90"></a>  90   <strong class="reserved">protected</strong> <strong class="reserved">int</strong>[][][] m_elemIndexes;
<a id="L91" name="L91"></a>  91 
<div class="comment">
   /** The default block size of the node arrays */</div>
<a id="L93" name="L93"></a>  93   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DEFAULT_BLOCKSIZE = 512;  <em class="comment">// favor small docs.</em>
<a id="L94" name="L94"></a>  94 
<div class="comment">
   /** The number of blocks for the node arrays */</div>
<a id="L96" name="L96"></a>  96   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DEFAULT_NUMBLOCKS = 32;
<a id="L97" name="L97"></a>  97 
<div class="comment">
   /** The number of blocks used for small documents &amp; RTFs */</div>
<a id="L99" name="L99"></a>  99   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DEFAULT_NUMBLOCKS_SMALL = 4;
<a id="L100" name="L100"></a> 100 
<div class="comment">
   /** The block size of the node arrays */</div>
<a id="L102" name="L102"></a> 102   <em class="comment">//protected final int m_blocksize;</em>
<a id="L103" name="L103"></a> 103 
<div class="comment">
    The value to use when the information has not been built yet.</div>
<a id="L107" name="L107"></a> 107   <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NOTPROCESSED = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> - 1;
<a id="L108" name="L108"></a> 108 
<div class="comment">
    The DTM manager who "owns" this DTM.</div>
<a id="L112" name="L112"></a> 112 
<a id="L113" name="L113"></a> 113   <strong class="reserved">public</strong> <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> m_mgr;
<a id="L114" name="L114"></a> 114 
<div class="comment">
    m_mgr cast to DTMManagerDefault, or null if it isn't an instance
    (Efficiency hook)</div>
<a id="L119" name="L119"></a> 119   <strong class="reserved">protected</strong> <a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a> m_mgrDefault=<strong class="reserved">null</strong>;
<a id="L120" name="L120"></a> 120 
<a id="L121" name="L121"></a> 121 
<div class="comment">
 The document identity number(s). If we have overflowed the addressing
   * range of the first that was assigned to us, we may add others. </div>
<a id="L124" name="L124"></a> 124   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_dtmIdent;
<a id="L125" name="L125"></a> 125 
<div class="comment">
 The mask for the identity.
      %REVIEW% Should this really be set to the _DEFAULT? What if
      a particular DTM wanted to use another value? </div>
<a id="L129" name="L129"></a> 129   <em class="comment">//protected final static int m_mask = DTMManager.IDENT_NODE_DEFAULT;</em>
<a id="L130" name="L130"></a> 130 
<div class="comment">
   /** The base URI for this document. */</div>
<a id="L132" name="L132"></a> 132   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_documentBaseURI;
<a id="L133" name="L133"></a> 133 
<div class="comment">
    The whitespace filter that enables elements to strip whitespace or not.</div>
<a id="L137" name="L137"></a> 137   <strong class="reserved">protected</strong> <a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a> m_wsfilter;
<a id="L138" name="L138"></a> 138 
<div class="comment">
   /** Flag indicating whether to strip whitespace nodes */</div>
<a id="L140" name="L140"></a> 140   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_shouldStripWS = <strong class="reserved">false</strong>;
<a id="L141" name="L141"></a> 141 
<div class="comment">
   /** Stack of flags indicating whether to strip whitespace nodes */</div>
<a id="L143" name="L143"></a> 143   <strong class="reserved">protected</strong> <a href="../D/932.html" title="Multiple defined in 3 places.">BoolStack</a> m_shouldStripWhitespaceStack;
<a id="L144" name="L144"></a> 144 
<div class="comment">
   /** The XMLString factory for creating XMLStrings. */</div>
<a id="L146" name="L146"></a> 146   <strong class="reserved">protected</strong> <a href="../S/5839.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/utils/XMLStringFactory.java.">XMLStringFactory</a> m_xstrf;
<a id="L147" name="L147"></a> 147 
<div class="comment">
    The table for exandedNameID lookups.  This may or may not be the same
    table as is contained in the DTMManagerDefault.</div>
<a id="L152" name="L152"></a> 152   <strong class="reserved">protected</strong> <a href="../S/5887.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">ExpandedNameTable</a> m_expandedNameTable;
<a id="L153" name="L153"></a> 153 
<div class="comment">
   /** true if indexing is turned on. */</div>
<a id="L155" name="L155"></a> 155   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_indexing;
<a id="L156" name="L156"></a> 156 
<div class="comment">
    Construct a DTMDefaultBase object using the default block size.
    @param mgr The DTMManager who owns this DTM.
    @param source The object that is used to specify the construction source.
    @param dtmIdentity The DTM identity ID for this DTM.
    @param whiteSpaceFilter The white space filter for this DTM, which may
                            be null.
    @param xstringfactory The factory to use for creating XMLStrings.
    @param doIndexing true if the caller considers it worth it to use
                      indexing schemes.</div>
<a id="L169" name="L169"></a> 169   <strong class="reserved">public</strong> DTMDefaultBase(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> mgr, <a href="../S/4049.html#L32" title="Defined at 32 in src/javax/xml/transform/Source.java.">Source</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, <strong class="reserved">int</strong> dtmIdentity,
<a id="L170" name="L170"></a> 170                         <a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a> whiteSpaceFilter,
<a id="L171" name="L171"></a> 171                         <a href="../S/5839.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/utils/XMLStringFactory.java.">XMLStringFactory</a> xstringfactory, <strong class="reserved">boolean</strong> doIndexing)
<a id="L172" name="L172"></a> 172   <em class="brace">{</em>
<a id="L173" name="L173"></a> 173     <strong class="reserved">this</strong>(mgr, <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, dtmIdentity, whiteSpaceFilter, xstringfactory,
<a id="L174" name="L174"></a> 174          doIndexing, DEFAULT_BLOCKSIZE, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L175" name="L175"></a> 175   <em class="brace">}</em>
<a id="L176" name="L176"></a> 176 
<div class="comment">
    Construct a DTMDefaultBase object from a DOM node.
    @param mgr The DTMManager who owns this DTM.
    @param source The object that is used to specify the construction source.
    @param dtmIdentity The DTM identity ID for this DTM.
    @param whiteSpaceFilter The white space filter for this DTM, which may
                            be null.
    @param xstringfactory The factory to use for creating XMLStrings.
    @param doIndexing true if the caller considers it worth it to use
                      indexing schemes.
    @param blocksize The block size of the DTM.
    @param usePrevsib true if we want to build the previous sibling node array.
    @param newNameTable true if we want to use a new ExpandedNameTable for this DTM.</div>
<a id="L192" name="L192"></a> 192   <strong class="reserved">public</strong> DTMDefaultBase(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> mgr, <a href="../S/4049.html#L32" title="Defined at 32 in src/javax/xml/transform/Source.java.">Source</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, <strong class="reserved">int</strong> dtmIdentity,
<a id="L193" name="L193"></a> 193                         <a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a> whiteSpaceFilter,
<a id="L194" name="L194"></a> 194                         <a href="../S/5839.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/utils/XMLStringFactory.java.">XMLStringFactory</a> xstringfactory, <strong class="reserved">boolean</strong> doIndexing,
<a id="L195" name="L195"></a> 195                         <strong class="reserved">int</strong> blocksize, <strong class="reserved">boolean</strong> usePrevsib,
<a id="L196" name="L196"></a> 196                         <strong class="reserved">boolean</strong> newNameTable)
<a id="L197" name="L197"></a> 197   <em class="brace">{</em>
<a id="L198" name="L198"></a> 198     <em class="comment">// Use smaller sizes for the internal node arrays if the block size</em>
<a id="L199" name="L199"></a> 199     <em class="comment">// is small.</em>
<a id="L200" name="L200"></a> 200     <strong class="reserved">int</strong> numblocks;
<a id="L201" name="L201"></a> 201     <strong class="reserved">if</strong> (blocksize &lt;= 64)
<a id="L202" name="L202"></a> 202     <em class="brace">{</em>
<a id="L203" name="L203"></a> 203       numblocks = DEFAULT_NUMBLOCKS_SMALL;
<a id="L204" name="L204"></a> 204       m_dtmIdent= <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(4, 1);
<a id="L205" name="L205"></a> 205     <em class="brace">}</em>
<a id="L206" name="L206"></a> 206     <strong class="reserved">else</strong>
<a id="L207" name="L207"></a> 207     <em class="brace">{</em>
<a id="L208" name="L208"></a> 208       numblocks = DEFAULT_NUMBLOCKS;
<a id="L209" name="L209"></a> 209       m_dtmIdent= <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(32);
<a id="L210" name="L210"></a> 210     <em class="brace">}</em>
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212     m_exptype = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, numblocks);
<a id="L213" name="L213"></a> 213     m_firstch = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, numblocks);
<a id="L214" name="L214"></a> 214     m_nextsib = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, numblocks);
<a id="L215" name="L215"></a> 215     m_parent  = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, numblocks);
<a id="L216" name="L216"></a> 216 
<a id="L217" name="L217"></a> 217     <em class="comment">// Only create the m_prevsib array if the usePrevsib flag is true.</em>
<a id="L218" name="L218"></a> 218     <em class="comment">// Some DTM implementations (e.g. SAXImpl) do not need this array.</em>
<a id="L219" name="L219"></a> 219     <em class="comment">// We can save the time to build it in those cases.</em>
<a id="L220" name="L220"></a> 220     <strong class="reserved">if</strong> (usePrevsib)
<a id="L221" name="L221"></a> 221       m_prevsib = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, numblocks);
<a id="L222" name="L222"></a> 222 
<a id="L223" name="L223"></a> 223     m_mgr = mgr;
<a id="L224" name="L224"></a> 224     <strong class="reserved">if</strong>(mgr <strong class="reserved">instanceof</strong> <a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a>)
<a id="L225" name="L225"></a> 225       m_mgrDefault=(<a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a>)mgr;
<a id="L226" name="L226"></a> 226 
<a id="L227" name="L227"></a> 227     m_documentBaseURI = (<strong class="reserved">null</strong> != <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>) ? <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>() : <strong class="reserved">null</strong>;
<a id="L228" name="L228"></a> 228     m_dtmIdent.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(dtmIdentity,0);
<a id="L229" name="L229"></a> 229     m_wsfilter = whiteSpaceFilter;
<a id="L230" name="L230"></a> 230     m_xstrf = xstringfactory;
<a id="L231" name="L231"></a> 231     m_indexing = doIndexing;
<a id="L232" name="L232"></a> 232 
<a id="L233" name="L233"></a> 233     <strong class="reserved">if</strong> (doIndexing)
<a id="L234" name="L234"></a> 234     <em class="brace">{</em>
<a id="L235" name="L235"></a> 235       m_expandedNameTable = <strong class="reserved">new</strong> <a href="../S/5887.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">ExpandedNameTable</a>();
<a id="L236" name="L236"></a> 236     <em class="brace">}</em>
<a id="L237" name="L237"></a> 237     <strong class="reserved">else</strong>
<a id="L238" name="L238"></a> 238     <em class="brace">{</em>
<a id="L239" name="L239"></a> 239       <em class="comment">// Note that this fails if we aren't talking to an instance of</em>
<a id="L240" name="L240"></a> 240       <em class="comment">// DTMManagerDefault</em>
<a id="L241" name="L241"></a> 241       m_expandedNameTable = m_mgrDefault.<a href="../S/5906.html#L857" title="Defined at 857 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">getExpandedNameTable</a>(<strong class="reserved">this</strong>);
<a id="L242" name="L242"></a> 242     <em class="brace">}</em>
<a id="L243" name="L243"></a> 243 
<a id="L244" name="L244"></a> 244     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != whiteSpaceFilter)
<a id="L245" name="L245"></a> 245     <em class="brace">{</em>
<a id="L246" name="L246"></a> 246       m_shouldStripWhitespaceStack = <strong class="reserved">new</strong> <a href="../D/932.html" title="Multiple defined in 3 places.">BoolStack</a>();
<a id="L247" name="L247"></a> 247 
<a id="L248" name="L248"></a> 248       <a href="../S/5889.html#L2281" title="Defined at 2281 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">pushShouldStripWhitespace</a>(<strong class="reserved">false</strong>);
<a id="L249" name="L249"></a> 249     <em class="brace">}</em>
<a id="L250" name="L250"></a> 250   <em class="brace">}</em>
<a id="L251" name="L251"></a> 251 
<div class="comment">
    Ensure that the size of the element indexes can hold the information.
    @param namespaceID Namespace ID index.
    @param LocalNameID Local name ID.</div>
<a id="L258" name="L258"></a> 258   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5889.html#L330" title="Referred from 330 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">ensureSizeOfIndex</a>(<strong class="reserved">int</strong> namespaceID, <strong class="reserved">int</strong> LocalNameID)
<a id="L259" name="L259"></a> 259   <em class="brace">{</em>
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_elemIndexes)
<a id="L262" name="L262"></a> 262     <em class="brace">{</em>
<a id="L263" name="L263"></a> 263       m_elemIndexes = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[namespaceID + 20][][];
<a id="L264" name="L264"></a> 264     <em class="brace">}</em>
<a id="L265" name="L265"></a> 265     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (m_elemIndexes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= namespaceID)
<a id="L266" name="L266"></a> 266     <em class="brace">{</em>
<a id="L267" name="L267"></a> 267       <strong class="reserved">int</strong>[][][] indexes = m_elemIndexes;
<a id="L268" name="L268"></a> 268 
<a id="L269" name="L269"></a> 269       m_elemIndexes = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[namespaceID + 20][][];
<a id="L270" name="L270"></a> 270 
<a id="L271" name="L271"></a> 271       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(indexes, 0, m_elemIndexes, 0, indexes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L272" name="L272"></a> 272     <em class="brace">}</em>
<a id="L273" name="L273"></a> 273 
<a id="L274" name="L274"></a> 274     <strong class="reserved">int</strong>[][] localNameIndex = m_elemIndexes[namespaceID];
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == localNameIndex)
<a id="L277" name="L277"></a> 277     <em class="brace">{</em>
<a id="L278" name="L278"></a> 278       localNameIndex = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[LocalNameID + 100][];
<a id="L279" name="L279"></a> 279       m_elemIndexes[namespaceID] = localNameIndex;
<a id="L280" name="L280"></a> 280     <em class="brace">}</em>
<a id="L281" name="L281"></a> 281     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (localNameIndex.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= LocalNameID)
<a id="L282" name="L282"></a> 282     <em class="brace">{</em>
<a id="L283" name="L283"></a> 283       <strong class="reserved">int</strong>[][] indexes = localNameIndex;
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285       localNameIndex = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[LocalNameID + 100][];
<a id="L286" name="L286"></a> 286 
<a id="L287" name="L287"></a> 287       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(indexes, 0, localNameIndex, 0, indexes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L288" name="L288"></a> 288 
<a id="L289" name="L289"></a> 289       m_elemIndexes[namespaceID] = localNameIndex;
<a id="L290" name="L290"></a> 290     <em class="brace">}</em>
<a id="L291" name="L291"></a> 291 
<a id="L292" name="L292"></a> 292     <strong class="reserved">int</strong>[] elemHandles = localNameIndex[LocalNameID];
<a id="L293" name="L293"></a> 293 
<a id="L294" name="L294"></a> 294     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == elemHandles)
<a id="L295" name="L295"></a> 295     <em class="brace">{</em>
<a id="L296" name="L296"></a> 296       elemHandles = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[128];
<a id="L297" name="L297"></a> 297       localNameIndex[LocalNameID] = elemHandles;
<a id="L298" name="L298"></a> 298       elemHandles[0] = 1;
<a id="L299" name="L299"></a> 299     <em class="brace">}</em>
<a id="L300" name="L300"></a> 300     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (elemHandles.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= elemHandles[0] + 1)
<a id="L301" name="L301"></a> 301     <em class="brace">{</em>
<a id="L302" name="L302"></a> 302       <strong class="reserved">int</strong>[] indexes = elemHandles;
<a id="L303" name="L303"></a> 303 
<a id="L304" name="L304"></a> 304       elemHandles = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[elemHandles[0] + 1024];
<a id="L305" name="L305"></a> 305 
<a id="L306" name="L306"></a> 306       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(indexes, 0, elemHandles, 0, indexes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L307" name="L307"></a> 307 
<a id="L308" name="L308"></a> 308       localNameIndex[LocalNameID] = elemHandles;
<a id="L309" name="L309"></a> 309     <em class="brace">}</em>
<a id="L310" name="L310"></a> 310   <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<div class="comment">
    Add a node to the element indexes. The node will not be added unless
    it's an element.
    @param expandedTypeID The expanded type ID of the node.
    @param identity The node identity index.</div>
<a id="L319" name="L319"></a> 319   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20510.html" title="Multiple referred from 3 places.">indexNode</a>(<strong class="reserved">int</strong> expandedTypeID, <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L320" name="L320"></a> 320   <em class="brace">{</em>
<a id="L321" name="L321"></a> 321 
<a id="L322" name="L322"></a> 322     <a href="../S/5887.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">ExpandedNameTable</a> ent = m_expandedNameTable;
<a id="L323" name="L323"></a> 323     <strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = ent.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(expandedTypeID);
<a id="L324" name="L324"></a> 324 
<a id="L325" name="L325"></a> 325     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L326" name="L326"></a> 326     <em class="brace">{</em>
<a id="L327" name="L327"></a> 327       <strong class="reserved">int</strong> namespaceID = ent.<a href="../S/5887.html#L331" title="Defined at 331 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">getNamespaceID</a>(expandedTypeID);
<a id="L328" name="L328"></a> 328       <strong class="reserved">int</strong> localNameID = ent.<a href="../S/5887.html#L302" title="Defined at 302 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">getLocalNameID</a>(expandedTypeID);
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330       <a href="../S/5889.html#L258" title="Defined at 258 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">ensureSizeOfIndex</a>(namespaceID, localNameID);
<a id="L331" name="L331"></a> 331 
<a id="L332" name="L332"></a> 332       <strong class="reserved">int</strong>[] <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = m_elemIndexes[namespaceID][localNameID];
<a id="L333" name="L333"></a> 333 
<a id="L334" name="L334"></a> 334       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>[0]] = <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L335" name="L335"></a> 335 
<a id="L336" name="L336"></a> 336       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>[0]++;
<a id="L337" name="L337"></a> 337     <em class="brace">}</em>
<a id="L338" name="L338"></a> 338   <em class="brace">}</em>
<a id="L339" name="L339"></a> 339 
<div class="comment">
    Find the first index that occurs in the list that is greater than or
    equal to the given value.
    @param list A list of integers.
    @param start The start index to begin the search.
    @param len The number of items to search.
    @param value Find the slot that has a value that is greater than or
    identical to this argument.
    @return The index in the list of the slot that is higher or identical
    to the identity argument, or -1 if no node is higher or equal.</div>
<a id="L353" name="L353"></a> 353   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../S/5889.html#L402" title="Referred from 402 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findGTE</a>(<strong class="reserved">int</strong>[] <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>, <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> len, <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L354" name="L354"></a> 354   <em class="brace">{</em>
<a id="L355" name="L355"></a> 355 
<a id="L356" name="L356"></a> 356     <strong class="reserved">int</strong> low = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L357" name="L357"></a> 357     <strong class="reserved">int</strong> high = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> + (len - 1);
<a id="L358" name="L358"></a> 358     <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = high;
<a id="L359" name="L359"></a> 359 
<a id="L360" name="L360"></a> 360     <strong class="reserved">while</strong> (low &lt;= high)
<a id="L361" name="L361"></a> 361     <em class="brace">{</em>
<a id="L362" name="L362"></a> 362       <strong class="reserved">int</strong> mid = (low + high) / 2;
<a id="L363" name="L363"></a> 363       <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>[mid];
<a id="L364" name="L364"></a> 364 
<a id="L365" name="L365"></a> 365       <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &gt; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L366" name="L366"></a> 366         high = mid - 1;
<a id="L367" name="L367"></a> 367       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L368" name="L368"></a> 368         low = mid + 1;
<a id="L369" name="L369"></a> 369       <strong class="reserved">else</strong>
<a id="L370" name="L370"></a> 370         <strong class="reserved">return</strong> mid;
<a id="L371" name="L371"></a> 371     <em class="brace">}</em>
<a id="L372" name="L372"></a> 372 
<a id="L373" name="L373"></a> 373     <strong class="reserved">return</strong> (low &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &amp;&amp; <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>[low] &gt; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) ? low : -1;
<a id="L374" name="L374"></a> 374   <em class="brace">}</em>
<a id="L375" name="L375"></a> 375 
<div class="comment">
    Find the first matching element from the index at or after the
    given node.
    @param nsIndex The namespace index lookup.
    @param lnIndex The local name index lookup.
    @param firstPotential The first potential match that is worth looking at.
    @return The first node that is greater than or equal to the
            firstPotential argument, or DTM.NOTPROCESSED if not found.</div>
<a id="L387" name="L387"></a> 387   <strong class="reserved">int</strong> <a href="../R/14377.html" title="Multiple referred from 2 places.">findElementFromIndex</a>(<strong class="reserved">int</strong> nsIndex, <strong class="reserved">int</strong> lnIndex, <strong class="reserved">int</strong> firstPotential)
<a id="L388" name="L388"></a> 388   <em class="brace">{</em>
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390     <strong class="reserved">int</strong>[][][] indexes = m_elemIndexes;
<a id="L391" name="L391"></a> 391 
<a id="L392" name="L392"></a> 392     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != indexes &amp;&amp; nsIndex &lt; indexes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L393" name="L393"></a> 393     <em class="brace">{</em>
<a id="L394" name="L394"></a> 394       <strong class="reserved">int</strong>[][] lnIndexs = indexes[nsIndex];
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != lnIndexs &amp;&amp; lnIndex &lt; lnIndexs.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L397" name="L397"></a> 397       <em class="brace">{</em>
<a id="L398" name="L398"></a> 398         <strong class="reserved">int</strong>[] elems = lnIndexs[lnIndex];
<a id="L399" name="L399"></a> 399 
<a id="L400" name="L400"></a> 400         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != elems)
<a id="L401" name="L401"></a> 401         <em class="brace">{</em>
<a id="L402" name="L402"></a> 402           <strong class="reserved">int</strong> pos = <a href="../S/5889.html#L353" title="Defined at 353 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findGTE</a>(elems, 1, elems[0], firstPotential);
<a id="L403" name="L403"></a> 403 
<a id="L404" name="L404"></a> 404           <strong class="reserved">if</strong> (pos &gt; -1)
<a id="L405" name="L405"></a> 405           <em class="brace">{</em>
<a id="L406" name="L406"></a> 406             <strong class="reserved">return</strong> elems[pos];
<a id="L407" name="L407"></a> 407           <em class="brace">}</em>
<a id="L408" name="L408"></a> 408         <em class="brace">}</em>
<a id="L409" name="L409"></a> 409       <em class="brace">}</em>
<a id="L410" name="L410"></a> 410     <em class="brace">}</em>
<a id="L411" name="L411"></a> 411 
<a id="L412" name="L412"></a> 412     <strong class="reserved">return</strong> NOTPROCESSED;
<a id="L413" name="L413"></a> 413   <em class="brace">}</em>
<a id="L414" name="L414"></a> 414 
<div class="comment">
    Get the next node identity value in the list, and call the iterator
    if it hasn't been added yet.
    @param identity The node identity (index).
    @return identity+1, or DTM.NULL.</div>
<a id="L422" name="L422"></a> 422   <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/17935.html" title="Multiple referred from 9 places.">getNextNodeIdentity</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L423" name="L423"></a> 423 
<div class="comment">
    This method should try and build one or more nodes in the table.
    @return The true if a next node is found or false if
            there are no more nodes.</div>
<a id="L430" name="L430"></a> 430   <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>();
<a id="L431" name="L431"></a> 431 
<div class="comment">
    Get the number of nodes that have been added.
    @return the number of nodes that have been mapped.</div>
<a id="L437" name="L437"></a> 437   <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/18057.html" title="Multiple referred from 3 places.">getNumberOfNodes</a>();
<a id="L438" name="L438"></a> 438 
<div class="comment">
   /** Stateless axis traversers, lazely built. */</div>
<a id="L440" name="L440"></a> 440   <strong class="reserved">protected</strong> <a href="../S/5919.html#L46" title="Defined at 46 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisTraverser.java.">DTMAxisTraverser</a>[] m_traversers;
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442 <em class="comment">//    /**</em>
<a id="L443" name="L443"></a> 443 <em class="comment">//     * Ensure that the size of the information arrays can hold another entry</em>
<a id="L444" name="L444"></a> 444 <em class="comment">//     * at the given index.</em>
<a id="L445" name="L445"></a> 445 <em class="comment">//     *</em>
<a id="L446" name="L446"></a> 446 <em class="comment">//     * @param index On exit from this function, the information arrays sizes must be</em>
<a id="L447" name="L447"></a> 447 <em class="comment">//     * at least index+1.</em>
<a id="L448" name="L448"></a> 448 <em class="comment">//     */</em>
<a id="L449" name="L449"></a> 449 <em class="comment">//    protected void ensureSize(int index)</em>
<a id="L450" name="L450"></a> 450 <em class="comment">//    {</em>
<a id="L451" name="L451"></a> 451 <em class="comment">//        // We've cut over to Suballocated*Vector, which are self-sizing.</em>
<a id="L452" name="L452"></a> 452 <em class="comment">//    }</em>
<a id="L453" name="L453"></a> 453 
<div class="comment">
    Get the simple type ID for the given node identity.
    @param identity The node identity.
    @return The simple type ID, or DTM.NULL.</div>
<a id="L461" name="L461"></a> 461   <strong class="reserved">protected</strong> <strong class="reserved">short</strong> <a href="../R/9486.html" title="Multiple referred from 200 places.">_type</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L462" name="L462"></a> 462   <em class="brace">{</em>
<a id="L463" name="L463"></a> 463 
<a id="L464" name="L464"></a> 464     <strong class="reserved">int</strong> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = <a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L465" name="L465"></a> 465 
<a id="L466" name="L466"></a> 466     <strong class="reserved">if</strong> (<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>)
<a id="L467" name="L467"></a> 467       <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L468" name="L468"></a> 468     <strong class="reserved">else</strong>
<a id="L469" name="L469"></a> 469       <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L470" name="L470"></a> 470   <em class="brace">}</em>
<a id="L471" name="L471"></a> 471 
<div class="comment">
    Get the expanded type ID for the given node identity.
    @param identity The node identity.
    @return The expanded type ID, or DTM.NULL.</div>
<a id="L479" name="L479"></a> 479   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9407.html" title="Multiple referred from 31 places.">_exptype</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L480" name="L480"></a> 480   <em class="brace">{</em>
<a id="L481" name="L481"></a> 481         <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L482" name="L482"></a> 482         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L483" name="L483"></a> 483     <em class="comment">// Reorganized test and loop into single flow</em>
<a id="L484" name="L484"></a> 484     <em class="comment">// Tiny performance improvement, saves a few bytes of code, clearer.</em>
<a id="L485" name="L485"></a> 485     <em class="comment">// %OPT% Other internal getters could be treated simliarly</em>
<a id="L486" name="L486"></a> 486     <strong class="reserved">while</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>&gt;=m_size)
<a id="L487" name="L487"></a> 487     <em class="brace">{</em>
<a id="L488" name="L488"></a> 488       <strong class="reserved">if</strong> (!<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>() &amp;&amp; <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size)
<a id="L489" name="L489"></a> 489         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L490" name="L490"></a> 490     <em class="brace">}</em>
<a id="L491" name="L491"></a> 491     <strong class="reserved">return</strong> m_exptype.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493   <em class="brace">}</em>
<a id="L494" name="L494"></a> 494 
<div class="comment">
    Get the level in the tree for the given node identity.
    @param identity The node identity.
    @return The tree level, or DTM.NULL.</div>
<a id="L502" name="L502"></a> 502   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9432.html" title="Multiple referred from 16 places.">_level</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L503" name="L503"></a> 503   <em class="brace">{</em>
<a id="L504" name="L504"></a> 504     <strong class="reserved">while</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>&gt;=m_size)
<a id="L505" name="L505"></a> 505     <em class="brace">{</em>
<a id="L506" name="L506"></a> 506       <strong class="reserved">boolean</strong> isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L507" name="L507"></a> 507       <strong class="reserved">if</strong> (!isMore &amp;&amp; <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size)
<a id="L508" name="L508"></a> 508         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L509" name="L509"></a> 509     <em class="brace">}</em>
<a id="L510" name="L510"></a> 510 
<a id="L511" name="L511"></a> 511     <strong class="reserved">int</strong> i=0;
<a id="L512" name="L512"></a> 512     <strong class="reserved">while</strong>(<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>=<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)))
<a id="L513" name="L513"></a> 513       ++i;
<a id="L514" name="L514"></a> 514     <strong class="reserved">return</strong> i;
<a id="L515" name="L515"></a> 515   <em class="brace">}</em>
<a id="L516" name="L516"></a> 516 
<div class="comment">
    Get the first child for the given node identity.
    @param identity The node identity.
    @return The first child identity, or DTM.NULL.</div>
<a id="L524" name="L524"></a> 524   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9410.html" title="Multiple referred from 21 places.">_firstch</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L525" name="L525"></a> 525   <em class="brace">{</em>
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527     <em class="comment">// Boiler-plate code for each of the _xxx functions, except for the array.</em>
<a id="L528" name="L528"></a> 528     <strong class="reserved">int</strong> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size) ? NOTPROCESSED : m_firstch.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L529" name="L529"></a> 529 
<a id="L530" name="L530"></a> 530     <em class="comment">// Check to see if the information requested has been processed, and,</em>
<a id="L531" name="L531"></a> 531     <em class="comment">// if not, advance the iterator until we the information has been</em>
<a id="L532" name="L532"></a> 532     <em class="comment">// processed.</em>
<a id="L533" name="L533"></a> 533     <strong class="reserved">while</strong> (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> == NOTPROCESSED)
<a id="L534" name="L534"></a> 534     <em class="brace">{</em>
<a id="L535" name="L535"></a> 535       <strong class="reserved">boolean</strong> isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L536" name="L536"></a> 536 
<a id="L537" name="L537"></a> 537       <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size &amp;&amp;!isMore)
<a id="L538" name="L538"></a> 538         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L539" name="L539"></a> 539       <strong class="reserved">else</strong>
<a id="L540" name="L540"></a> 540       <em class="brace">{</em>
<a id="L541" name="L541"></a> 541         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = m_firstch.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L542" name="L542"></a> 542         <strong class="reserved">if</strong>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> == NOTPROCESSED &amp;&amp; !isMore)
<a id="L543" name="L543"></a> 543           <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L544" name="L544"></a> 544       <em class="brace">}</em>
<a id="L545" name="L545"></a> 545     <em class="brace">}</em>
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547     <strong class="reserved">return</strong> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>;
<a id="L548" name="L548"></a> 548   <em class="brace">}</em>
<a id="L549" name="L549"></a> 549 
<div class="comment">
    Get the next sibling for the given node identity.
    @param identity The node identity.
    @return The next sibling identity, or DTM.NULL.</div>
<a id="L557" name="L557"></a> 557   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9437.html" title="Multiple referred from 27 places.">_nextsib</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L558" name="L558"></a> 558   <em class="brace">{</em>
<a id="L559" name="L559"></a> 559     <em class="comment">// Boiler-plate code for each of the _xxx functions, except for the array.</em>
<a id="L560" name="L560"></a> 560     <strong class="reserved">int</strong> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size) ? NOTPROCESSED : m_nextsib.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L561" name="L561"></a> 561 
<a id="L562" name="L562"></a> 562     <em class="comment">// Check to see if the information requested has been processed, and,</em>
<a id="L563" name="L563"></a> 563     <em class="comment">// if not, advance the iterator until we the information has been</em>
<a id="L564" name="L564"></a> 564     <em class="comment">// processed.</em>
<a id="L565" name="L565"></a> 565     <strong class="reserved">while</strong> (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> == NOTPROCESSED)
<a id="L566" name="L566"></a> 566     <em class="brace">{</em>
<a id="L567" name="L567"></a> 567       <strong class="reserved">boolean</strong> isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L568" name="L568"></a> 568 
<a id="L569" name="L569"></a> 569       <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size &amp;&amp;!isMore)
<a id="L570" name="L570"></a> 570         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L571" name="L571"></a> 571       <strong class="reserved">else</strong>
<a id="L572" name="L572"></a> 572       <em class="brace">{</em>
<a id="L573" name="L573"></a> 573         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = m_nextsib.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L574" name="L574"></a> 574         <strong class="reserved">if</strong>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> == NOTPROCESSED &amp;&amp; !isMore)
<a id="L575" name="L575"></a> 575           <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L576" name="L576"></a> 576       <em class="brace">}</em>
<a id="L577" name="L577"></a> 577     <em class="brace">}</em>
<a id="L578" name="L578"></a> 578 
<a id="L579" name="L579"></a> 579     <strong class="reserved">return</strong> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>;
<a id="L580" name="L580"></a> 580   <em class="brace">}</em>
<a id="L581" name="L581"></a> 581 
<div class="comment">
    Get the previous sibling for the given node identity.
    @param identity The node identity.
    @return The previous sibling identity, or DTM.NULL.</div>
<a id="L589" name="L589"></a> 589   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9458.html" title="Multiple referred from 2 places.">_prevsib</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L590" name="L590"></a> 590   <em class="brace">{</em>
<a id="L591" name="L591"></a> 591 
<a id="L592" name="L592"></a> 592     <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &lt; m_size)
<a id="L593" name="L593"></a> 593       <strong class="reserved">return</strong> m_prevsib.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L594" name="L594"></a> 594 
<a id="L595" name="L595"></a> 595     <em class="comment">// Check to see if the information requested has been processed, and,</em>
<a id="L596" name="L596"></a> 596     <em class="comment">// if not, advance the iterator until we the information has been</em>
<a id="L597" name="L597"></a> 597     <em class="comment">// processed.</em>
<a id="L598" name="L598"></a> 598     <strong class="reserved">while</strong> (<strong class="reserved">true</strong>)
<a id="L599" name="L599"></a> 599     <em class="brace">{</em>
<a id="L600" name="L600"></a> 600       <strong class="reserved">boolean</strong> isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L601" name="L601"></a> 601 
<a id="L602" name="L602"></a> 602       <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size &amp;&amp; !isMore)
<a id="L603" name="L603"></a> 603         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L604" name="L604"></a> 604       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &lt; m_size)
<a id="L605" name="L605"></a> 605         <strong class="reserved">return</strong> m_prevsib.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L606" name="L606"></a> 606     <em class="brace">}</em>
<a id="L607" name="L607"></a> 607   <em class="brace">}</em>
<a id="L608" name="L608"></a> 608 
<div class="comment">
    Get the parent for the given node identity.
    @param identity The node identity.
    @return The parent identity, or DTM.NULL.</div>
<a id="L616" name="L616"></a> 616   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9442.html" title="Multiple referred from 42 places.">_parent</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L617" name="L617"></a> 617   <em class="brace">{</em>
<a id="L618" name="L618"></a> 618 
<a id="L619" name="L619"></a> 619     <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &lt; m_size)
<a id="L620" name="L620"></a> 620       <strong class="reserved">return</strong> m_parent.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L621" name="L621"></a> 621 
<a id="L622" name="L622"></a> 622     <em class="comment">// Check to see if the information requested has been processed, and,</em>
<a id="L623" name="L623"></a> 623     <em class="comment">// if not, advance the iterator until we the information has been</em>
<a id="L624" name="L624"></a> 624     <em class="comment">// processed.</em>
<a id="L625" name="L625"></a> 625     <strong class="reserved">while</strong> (<strong class="reserved">true</strong>)
<a id="L626" name="L626"></a> 626     <em class="brace">{</em>
<a id="L627" name="L627"></a> 627       <strong class="reserved">boolean</strong> isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L628" name="L628"></a> 628 
<a id="L629" name="L629"></a> 629       <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size &amp;&amp; !isMore)
<a id="L630" name="L630"></a> 630         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L631" name="L631"></a> 631       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &lt; m_size)
<a id="L632" name="L632"></a> 632         <strong class="reserved">return</strong> m_parent.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L633" name="L633"></a> 633     <em class="brace">}</em>
<a id="L634" name="L634"></a> 634   <em class="brace">}</em>
<a id="L635" name="L635"></a> 635 
<div class="comment">
    Diagnostics function to dump the DTM.</div>
<a id="L639" name="L639"></a> 639   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13598.html" title="Multiple referred from 2 places.">dumpDTM</a>(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> os)
<a id="L640" name="L640"></a> 640   <em class="brace">{</em>
<a id="L641" name="L641"></a> 641     <strong class="reserved">try</strong>
<a id="L642" name="L642"></a> 642     <em class="brace">{</em>
<a id="L643" name="L643"></a> 643       <strong class="reserved">if</strong>(os==<strong class="reserved">null</strong>)
<a id="L644" name="L644"></a> 644       <em class="brace">{</em>
<a id="L645" name="L645"></a> 645               <a href="../S/1433.html#L149" title="Defined at 149 in src/java/io/File.java.">File</a> f = <strong class="reserved">new</strong> <a href="../S/1433.html#L149" title="Defined at 149 in src/java/io/File.java.">File</a>("DTMDump"+((<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)<strong class="reserved">this</strong>).<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>()+".txt");
<a id="L646" name="L646"></a> 646               <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Dumping... "+f.<a href="../S/1433.html#L555" title="Defined at 555 in src/java/io/File.java.">getAbsolutePath</a>());
<a id="L647" name="L647"></a> 647               os=<strong class="reserved">new</strong> <a href="../S/1382.html#L53" title="Defined at 53 in src/java/io/FileOutputStream.java.">FileOutputStream</a>(f);
<a id="L648" name="L648"></a> 648       <em class="brace">}</em>
<a id="L649" name="L649"></a> 649       <a href="../S/1370.html#L57" title="Defined at 57 in src/java/io/PrintStream.java.">PrintStream</a> ps = <strong class="reserved">new</strong> <a href="../S/1370.html#L57" title="Defined at 57 in src/java/io/PrintStream.java.">PrintStream</a>(os);
<a id="L650" name="L650"></a> 650 
<a id="L651" name="L651"></a> 651       <strong class="reserved">while</strong> (<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>())<em class="brace">{</em><em class="brace">}</em>
<a id="L652" name="L652"></a> 652 
<a id="L653" name="L653"></a> 653       <strong class="reserved">int</strong> nRecords = m_size;
<a id="L654" name="L654"></a> 654 
<a id="L655" name="L655"></a> 655       ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Total nodes: " + nRecords);
<a id="L656" name="L656"></a> 656 
<a id="L657" name="L657"></a> 657       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0; <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; nRecords; ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L658" name="L658"></a> 658       <em class="brace">{</em>
<a id="L659" name="L659"></a> 659         <strong class="reserved">int</strong> i=<a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L660" name="L660"></a> 660         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("=========== index=" + <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + " handle=" + i + " ===========");
<a id="L661" name="L661"></a> 661         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("NodeName: " + <a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>(i));
<a id="L662" name="L662"></a> 662         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("NodeNameX: " + <a href="../D/20984.html" title="Multiple defined in 11 places.">getNodeNameX</a>(i));
<a id="L663" name="L663"></a> 663         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("LocalName: " + <a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(i));
<a id="L664" name="L664"></a> 664         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("NamespaceURI: " + <a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>(i));
<a id="L665" name="L665"></a> 665         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Prefix: " + <a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(i));
<a id="L666" name="L666"></a> 666 
<a id="L667" name="L667"></a> 667         <strong class="reserved">int</strong> exTypeID = <a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Expanded Type ID: "
<a id="L670" name="L670"></a> 670                            + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(exTypeID));
<a id="L671" name="L671"></a> 671 
<a id="L672" name="L672"></a> 672         <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L673" name="L673"></a> 673         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> typestring;
<a id="L674" name="L674"></a> 674 
<a id="L675" name="L675"></a> 675         <strong class="reserved">switch</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L676" name="L676"></a> 676         <em class="brace">{</em>
<a id="L677" name="L677"></a> 677         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE :
<a id="L678" name="L678"></a> 678           typestring = "ATTRIBUTE_NODE";
<a id="L679" name="L679"></a> 679           <strong class="reserved">break</strong>;
<a id="L680" name="L680"></a> 680         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.CDATA_SECTION_NODE :
<a id="L681" name="L681"></a> 681           typestring = "CDATA_SECTION_NODE";
<a id="L682" name="L682"></a> 682           <strong class="reserved">break</strong>;
<a id="L683" name="L683"></a> 683         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.COMMENT_NODE :
<a id="L684" name="L684"></a> 684           typestring = "COMMENT_NODE";
<a id="L685" name="L685"></a> 685           <strong class="reserved">break</strong>;
<a id="L686" name="L686"></a> 686         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_FRAGMENT_NODE :
<a id="L687" name="L687"></a> 687           typestring = "DOCUMENT_FRAGMENT_NODE";
<a id="L688" name="L688"></a> 688           <strong class="reserved">break</strong>;
<a id="L689" name="L689"></a> 689         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE :
<a id="L690" name="L690"></a> 690           typestring = "DOCUMENT_NODE";
<a id="L691" name="L691"></a> 691           <strong class="reserved">break</strong>;
<a id="L692" name="L692"></a> 692         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_TYPE_NODE :
<a id="L693" name="L693"></a> 693           typestring = "DOCUMENT_NODE";
<a id="L694" name="L694"></a> 694           <strong class="reserved">break</strong>;
<a id="L695" name="L695"></a> 695         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE :
<a id="L696" name="L696"></a> 696           typestring = "ELEMENT_NODE";
<a id="L697" name="L697"></a> 697           <strong class="reserved">break</strong>;
<a id="L698" name="L698"></a> 698         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ENTITY_NODE :
<a id="L699" name="L699"></a> 699           typestring = "ENTITY_NODE";
<a id="L700" name="L700"></a> 700           <strong class="reserved">break</strong>;
<a id="L701" name="L701"></a> 701         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ENTITY_REFERENCE_NODE :
<a id="L702" name="L702"></a> 702           typestring = "ENTITY_REFERENCE_NODE";
<a id="L703" name="L703"></a> 703           <strong class="reserved">break</strong>;
<a id="L704" name="L704"></a> 704         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE :
<a id="L705" name="L705"></a> 705           typestring = "NAMESPACE_NODE";
<a id="L706" name="L706"></a> 706           <strong class="reserved">break</strong>;
<a id="L707" name="L707"></a> 707         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NOTATION_NODE :
<a id="L708" name="L708"></a> 708           typestring = "NOTATION_NODE";
<a id="L709" name="L709"></a> 709           <strong class="reserved">break</strong>;
<a id="L710" name="L710"></a> 710         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> :
<a id="L711" name="L711"></a> 711           typestring = "NULL";
<a id="L712" name="L712"></a> 712           <strong class="reserved">break</strong>;
<a id="L713" name="L713"></a> 713         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.PROCESSING_INSTRUCTION_NODE :
<a id="L714" name="L714"></a> 714           typestring = "PROCESSING_INSTRUCTION_NODE";
<a id="L715" name="L715"></a> 715           <strong class="reserved">break</strong>;
<a id="L716" name="L716"></a> 716         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE :
<a id="L717" name="L717"></a> 717           typestring = "TEXT_NODE";
<a id="L718" name="L718"></a> 718           <strong class="reserved">break</strong>;
<a id="L719" name="L719"></a> 719         <strong class="reserved">default</strong> :
<a id="L720" name="L720"></a> 720           typestring = "Unknown!";
<a id="L721" name="L721"></a> 721           <strong class="reserved">break</strong>;
<a id="L722" name="L722"></a> 722         <em class="brace">}</em>
<a id="L723" name="L723"></a> 723 
<a id="L724" name="L724"></a> 724         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Type: " + typestring);
<a id="L725" name="L725"></a> 725 
<a id="L726" name="L726"></a> 726         <strong class="reserved">int</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L727" name="L727"></a> 727 
<a id="L728" name="L728"></a> 728         <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>)
<a id="L729" name="L729"></a> 729           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("First child: DTM.NULL");
<a id="L730" name="L730"></a> 730         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (NOTPROCESSED == <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>)
<a id="L731" name="L731"></a> 731           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("First child: NOTPROCESSED");
<a id="L732" name="L732"></a> 732         <strong class="reserved">else</strong>
<a id="L733" name="L733"></a> 733           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("First child: " + <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>);
<a id="L734" name="L734"></a> 734 
<a id="L735" name="L735"></a> 735         <strong class="reserved">if</strong> (m_prevsib != <strong class="reserved">null</strong>)
<a id="L736" name="L736"></a> 736         <em class="brace">{</em>
<a id="L737" name="L737"></a> 737           <strong class="reserved">int</strong> prevSibling = <a href="../S/5889.html#L589" title="Defined at 589 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_prevsib</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L738" name="L738"></a> 738 
<a id="L739" name="L739"></a> 739           <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == prevSibling)
<a id="L740" name="L740"></a> 740             ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Prev sibling: DTM.NULL");
<a id="L741" name="L741"></a> 741           <strong class="reserved">else</strong> <strong class="reserved">if</strong> (NOTPROCESSED == prevSibling)
<a id="L742" name="L742"></a> 742             ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Prev sibling: NOTPROCESSED");
<a id="L743" name="L743"></a> 743           <strong class="reserved">else</strong>
<a id="L744" name="L744"></a> 744             ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Prev sibling: " + prevSibling);
<a id="L745" name="L745"></a> 745         <em class="brace">}</em>
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747         <strong class="reserved">int</strong> <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> = <a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L748" name="L748"></a> 748 
<a id="L749" name="L749"></a> 749         <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>)
<a id="L750" name="L750"></a> 750           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Next sibling: DTM.NULL");
<a id="L751" name="L751"></a> 751         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (NOTPROCESSED == <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>)
<a id="L752" name="L752"></a> 752           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Next sibling: NOTPROCESSED");
<a id="L753" name="L753"></a> 753         <strong class="reserved">else</strong>
<a id="L754" name="L754"></a> 754           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Next sibling: " + <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>);
<a id="L755" name="L755"></a> 755 
<a id="L756" name="L756"></a> 756         <strong class="reserved">int</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758         <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>)
<a id="L759" name="L759"></a> 759           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Parent: DTM.NULL");
<a id="L760" name="L760"></a> 760         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (NOTPROCESSED == <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>)
<a id="L761" name="L761"></a> 761           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Parent: NOTPROCESSED");
<a id="L762" name="L762"></a> 762         <strong class="reserved">else</strong>
<a id="L763" name="L763"></a> 763           ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Parent: " + <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L764" name="L764"></a> 764 
<a id="L765" name="L765"></a> 765         <strong class="reserved">int</strong> level = <a href="../S/5889.html#L502" title="Defined at 502 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_level</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L766" name="L766"></a> 766 
<a id="L767" name="L767"></a> 767         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Level: " + level);
<a id="L768" name="L768"></a> 768         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Node Value: " + <a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(i));
<a id="L769" name="L769"></a> 769         ps.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("String Value: " + <a href="../D/22791.html" title="Multiple defined in 23 places.">getStringValue</a>(i));
<a id="L770" name="L770"></a> 770       <em class="brace">}</em>
<a id="L771" name="L771"></a> 771     <em class="brace">}</em>
<a id="L772" name="L772"></a> 772     <strong class="reserved">catch</strong>(<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> ioe)
<a id="L773" name="L773"></a> 773     <em class="brace">{</em>
<a id="L774" name="L774"></a> 774       ioe.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>(<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err);
<a id="L775" name="L775"></a> 775         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(ioe.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L776" name="L776"></a> 776     <em class="brace">}</em>
<a id="L777" name="L777"></a> 777   <em class="brace">}</em>
<a id="L778" name="L778"></a> 778 
<div class="comment">
    Diagnostics function to dump a single node.
    %REVIEW% KNOWN GLITCH: If you pass it a node index rather than a
    node handle, it works just fine... but the displayed identity
    number before the colon is different, which complicates comparing
    it with nodes printed the other way. We could always OR the DTM ID
    into the value, to suppress that distinction...
    %REVIEW% This might want to be moved up to DTMDefaultBase, or possibly
    DTM itself, since it's a useful diagnostic and uses only DTM's public
    APIs.</div>
<a id="L792" name="L792"></a> 792   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dumpNode(<strong class="reserved">int</strong> nodeHandle)
<a id="L793" name="L793"></a> 793   <em class="brace">{</em>
<a id="L794" name="L794"></a> 794           <strong class="reserved">if</strong>(nodeHandle==<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L795" name="L795"></a> 795                   <strong class="reserved">return</strong> "[null]";
<a id="L796" name="L796"></a> 796 
<a id="L797" name="L797"></a> 797         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> typestring;
<a id="L798" name="L798"></a> 798         <strong class="reserved">switch</strong> (<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>(nodeHandle))
<a id="L799" name="L799"></a> 799         <em class="brace">{</em>
<a id="L800" name="L800"></a> 800         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE :
<a id="L801" name="L801"></a> 801           typestring = "ATTR";
<a id="L802" name="L802"></a> 802           <strong class="reserved">break</strong>;
<a id="L803" name="L803"></a> 803         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.CDATA_SECTION_NODE :
<a id="L804" name="L804"></a> 804           typestring = "CDATA";
<a id="L805" name="L805"></a> 805           <strong class="reserved">break</strong>;
<a id="L806" name="L806"></a> 806         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.COMMENT_NODE :
<a id="L807" name="L807"></a> 807           typestring = "COMMENT";
<a id="L808" name="L808"></a> 808           <strong class="reserved">break</strong>;
<a id="L809" name="L809"></a> 809         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_FRAGMENT_NODE :
<a id="L810" name="L810"></a> 810           typestring = "DOC_FRAG";
<a id="L811" name="L811"></a> 811           <strong class="reserved">break</strong>;
<a id="L812" name="L812"></a> 812         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE :
<a id="L813" name="L813"></a> 813           typestring = "DOC";
<a id="L814" name="L814"></a> 814           <strong class="reserved">break</strong>;
<a id="L815" name="L815"></a> 815         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_TYPE_NODE :
<a id="L816" name="L816"></a> 816           typestring = "DOC_TYPE";
<a id="L817" name="L817"></a> 817           <strong class="reserved">break</strong>;
<a id="L818" name="L818"></a> 818         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE :
<a id="L819" name="L819"></a> 819           typestring = "ELEMENT";
<a id="L820" name="L820"></a> 820           <strong class="reserved">break</strong>;
<a id="L821" name="L821"></a> 821         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ENTITY_NODE :
<a id="L822" name="L822"></a> 822           typestring = "ENTITY";
<a id="L823" name="L823"></a> 823           <strong class="reserved">break</strong>;
<a id="L824" name="L824"></a> 824         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ENTITY_REFERENCE_NODE :
<a id="L825" name="L825"></a> 825           typestring = "ENT_REF";
<a id="L826" name="L826"></a> 826           <strong class="reserved">break</strong>;
<a id="L827" name="L827"></a> 827         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE :
<a id="L828" name="L828"></a> 828           typestring = "NAMESPACE";
<a id="L829" name="L829"></a> 829           <strong class="reserved">break</strong>;
<a id="L830" name="L830"></a> 830         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NOTATION_NODE :
<a id="L831" name="L831"></a> 831           typestring = "NOTATION";
<a id="L832" name="L832"></a> 832           <strong class="reserved">break</strong>;
<a id="L833" name="L833"></a> 833         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> :
<a id="L834" name="L834"></a> 834           typestring = "null";
<a id="L835" name="L835"></a> 835           <strong class="reserved">break</strong>;
<a id="L836" name="L836"></a> 836         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.PROCESSING_INSTRUCTION_NODE :
<a id="L837" name="L837"></a> 837           typestring = "PI";
<a id="L838" name="L838"></a> 838           <strong class="reserved">break</strong>;
<a id="L839" name="L839"></a> 839         <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE :
<a id="L840" name="L840"></a> 840           typestring = "TEXT";
<a id="L841" name="L841"></a> 841           <strong class="reserved">break</strong>;
<a id="L842" name="L842"></a> 842         <strong class="reserved">default</strong> :
<a id="L843" name="L843"></a> 843           typestring = "Unknown!";
<a id="L844" name="L844"></a> 844           <strong class="reserved">break</strong>;
<a id="L845" name="L845"></a> 845         <em class="brace">}</em>
<a id="L846" name="L846"></a> 846 
<a id="L847" name="L847"></a> 847       <strong class="reserved">return</strong> "[" + nodeHandle + ": " + typestring +
<a id="L848" name="L848"></a> 848               "(0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(nodeHandle)) + ") " +
<a id="L849" name="L849"></a> 849               <a href="../D/20984.html" title="Multiple defined in 11 places.">getNodeNameX</a>(nodeHandle) + " {" + <a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>(nodeHandle) + "}" +
<a id="L850" name="L850"></a> 850               "=\"" + <a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(nodeHandle) + "\"]";
<a id="L851" name="L851"></a> 851   <em class="brace">}</em>
<a id="L852" name="L852"></a> 852 
<a id="L853" name="L853"></a> 853   <em class="comment">// ========= DTM Implementation Control Functions. ==============</em>
<a id="L854" name="L854"></a> 854 
<div class="comment">
    Set an implementation dependent feature.
    <p>
    %REVIEW% Do we really expect to set features on DTMs?
    @param featureId A feature URL.
    @param state true if this feature should be on, false otherwise.</p></div>
<a id="L863" name="L863"></a> 863   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27391.html" title="Multiple referred from 223 places.">setFeature</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> featureId, <strong class="reserved">boolean</strong> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>)<em class="brace">{</em><em class="brace">}</em>
<a id="L864" name="L864"></a> 864 
<a id="L865" name="L865"></a> 865   <em class="comment">// ========= Document Navigation Functions =========</em>
<a id="L866" name="L866"></a> 866 
<div class="comment">
    Given a node handle, test if it has child nodes.
    <p> %REVIEW% This is obviously useful at the DOM layer, where it
    would permit testing this without having to create a proxy
    node. It's less useful in the DTM API, where
    (dtm.getFirstChild(nodeHandle)!=DTM.NULL) is just as fast and
    almost as self-evident. But it's a convenience, and eases porting
    of DOM code to DTM.  </p>
    @param nodeHandle int Handle of the node.
    @return int true if the given node has child nodes.</div>
<a id="L879" name="L879"></a> 879   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20185.html" title="Multiple referred from 24 places.">hasChildNodes</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L880" name="L880"></a> 880   <em class="brace">{</em>
<a id="L881" name="L881"></a> 881 
<a id="L882" name="L882"></a> 882     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L883" name="L883"></a> 883     <strong class="reserved">int</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L884" name="L884"></a> 884 
<a id="L885" name="L885"></a> 885     <strong class="reserved">return</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L886" name="L886"></a> 886   <em class="brace">}</em>
<a id="L887" name="L887"></a> 887 
<div class="comment">
 Given a node identity, return a node handle. If extended addressing
    has been used (multiple DTM IDs), we need to map the high bits of the
    identity into the proper DTM ID.
    This has been made FINAL to facilitate inlining, since we do not expect
    any subclass of DTMDefaultBase to ever change the algorithm. (I don't
    really like doing so, and would love to have an excuse not to...)
    %REVIEW% Is it worth trying to specialcase small documents?
    %REVIEW% Should this be exposed at the package/public layers?
    @param nodeIdentity Internal offset to this node's records.
    @return NodeHandle (external representation of node)
   * </div>
<a id="L902" name="L902"></a> 902   <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/22950.html" title="Multiple referred from 101 places.">makeNodeHandle</a>(<strong class="reserved">int</strong> nodeIdentity)
<a id="L903" name="L903"></a> 903   <em class="brace">{</em>
<a id="L904" name="L904"></a> 904     <strong class="reserved">if</strong>(<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>==nodeIdentity) <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L905" name="L905"></a> 905 
<a id="L906" name="L906"></a> 906     <strong class="reserved">if</strong>(JJK_DEBUG &amp;&amp; nodeIdentity&gt;<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_NODE_DEFAULT)
<a id="L907" name="L907"></a> 907       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("GONK! (only useful in limited situations)");
<a id="L908" name="L908"></a> 908 
<a id="L909" name="L909"></a> 909     <strong class="reserved">return</strong> m_dtmIdent.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(nodeIdentity &gt;&gt;&gt; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS)
<a id="L910" name="L910"></a> 910       + (nodeIdentity &amp; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_NODE_DEFAULT) ;
<a id="L911" name="L911"></a> 911   <em class="brace">}</em>
<a id="L912" name="L912"></a> 912 
<div class="comment">
 Given a node handle, return a node identity. If extended addressing
    has been used (multiple DTM IDs), we need to map the high bits of the
    identity into the proper DTM ID and thence find the proper offset
    to add to the low bits of the identity
    This has been made FINAL to facilitate inlining, since we do not expect
    any subclass of DTMDefaultBase to ever change the algorithm. (I don't
    really like doing so, and would love to have an excuse not to...)
    %OPT% Performance is critical for this operation.
    %REVIEW% Should this be exposed at the package/public layers?
    @param nodeHandle (external representation of node)
    @return nodeIdentity Internal offset to this node's records.
   * </div>
<a id="L929" name="L929"></a> 929   <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/22951.html" title="Multiple referred from 112 places.">makeNodeIdentity</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L930" name="L930"></a> 930   <em class="brace">{</em>
<a id="L931" name="L931"></a> 931     <strong class="reserved">if</strong>(<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>==nodeHandle) <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L932" name="L932"></a> 932 
<a id="L933" name="L933"></a> 933     <strong class="reserved">if</strong>(m_mgrDefault!=<strong class="reserved">null</strong>)
<a id="L934" name="L934"></a> 934     <em class="brace">{</em>
<a id="L935" name="L935"></a> 935       <em class="comment">// Optimization: use the DTMManagerDefault's fast DTMID-to-offsets</em>
<a id="L936" name="L936"></a> 936       <em class="comment">// table.  I'm not wild about this solution but this operation</em>
<a id="L937" name="L937"></a> 937       <em class="comment">// needs need extreme speed.</em>
<a id="L938" name="L938"></a> 938 
<a id="L939" name="L939"></a> 939       <strong class="reserved">int</strong> whichDTMindex=nodeHandle&gt;&gt;&gt;<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS;
<a id="L940" name="L940"></a> 940 
<a id="L941" name="L941"></a> 941       <em class="comment">// %REVIEW% Wish I didn't have to perform the pre-test, but</em>
<a id="L942" name="L942"></a> 942       <em class="comment">// someone is apparently asking DTMs whether they contain nodes</em>
<a id="L943" name="L943"></a> 943       <em class="comment">// which really don't belong to them. That's probably a bug</em>
<a id="L944" name="L944"></a> 944       <em class="comment">// which should be fixed, but until it is:</em>
<a id="L945" name="L945"></a> 945       <strong class="reserved">if</strong>(m_mgrDefault.m_dtms[whichDTMindex]!=<strong class="reserved">this</strong>)
<a id="L946" name="L946"></a> 946         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L947" name="L947"></a> 947       <strong class="reserved">else</strong>
<a id="L948" name="L948"></a> 948         <strong class="reserved">return</strong>
<a id="L949" name="L949"></a> 949           m_mgrDefault.m_dtm_offsets[whichDTMindex]
<a id="L950" name="L950"></a> 950           | (nodeHandle &amp; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_NODE_DEFAULT);
<a id="L951" name="L951"></a> 951     <em class="brace">}</em>
<a id="L952" name="L952"></a> 952 
<a id="L953" name="L953"></a> 953     <strong class="reserved">int</strong> whichDTMid=m_dtmIdent.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(nodeHandle &amp; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_DEFAULT);
<a id="L954" name="L954"></a> 954     <strong class="reserved">return</strong> (whichDTMid==<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L955" name="L955"></a> 955       ? <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>
<a id="L956" name="L956"></a> 956       : (whichDTMid &lt;&lt; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS)
<a id="L957" name="L957"></a> 957       + (nodeHandle &amp; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_NODE_DEFAULT);
<a id="L958" name="L958"></a> 958   <em class="brace">}</em>
<a id="L959" name="L959"></a> 959 
<a id="L960" name="L960"></a> 960 
<div class="comment">
    Given a node handle, get the handle of the node's first child.
    If not yet resolved, waits for more nodes to be added to the document and
    tries again.
    @param nodeHandle int Handle of the node.
    @return int DTM node-number of first child, or DTM.NULL to indicate none exists.</div>
<a id="L969" name="L969"></a> 969   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16606.html" title="Multiple referred from 267 places.">getFirstChild</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L970" name="L970"></a> 970   <em class="brace">{</em>
<a id="L971" name="L971"></a> 971 
<a id="L972" name="L972"></a> 972     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L973" name="L973"></a> 973     <strong class="reserved">int</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L974" name="L974"></a> 974 
<a id="L975" name="L975"></a> 975     <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>);
<a id="L976" name="L976"></a> 976   <em class="brace">}</em>
<a id="L977" name="L977"></a> 977 
<div class="comment">
    Given a node handle, get the handle of the node's first child.
    If not yet resolved, waits for more nodes to be added to the document and
    tries again.
    @param nodeHandle int Handle of the node.
    @return int DTM node-number of first child, or DTM.NULL to indicate none exists.</div>
<a id="L986" name="L986"></a> 986   <strong class="reserved">public</strong> <strong class="reserved">int</strong> getTypedFirstChild(<strong class="reserved">int</strong> nodeHandle, <strong class="reserved">int</strong> nodeType)
<a id="L987" name="L987"></a> 987   <em class="brace">{</em>
<a id="L988" name="L988"></a> 988 
<a id="L989" name="L989"></a> 989     <strong class="reserved">int</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>, eType;
<a id="L990" name="L990"></a> 990     <strong class="reserved">if</strong> (nodeType &lt; <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NTYPES) <em class="brace">{</em>
<a id="L991" name="L991"></a> 991       <strong class="reserved">for</strong> (<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle));
<a id="L992" name="L992"></a> 992            <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L993" name="L993"></a> 993            <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>)) <em class="brace">{</em>
<a id="L994" name="L994"></a> 994         eType = <a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>);
<a id="L995" name="L995"></a> 995         <strong class="reserved">if</strong> (eType == nodeType
<a id="L996" name="L996"></a> 996                || (eType &gt;= <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NTYPES
<a id="L997" name="L997"></a> 997                       &amp;&amp; m_expandedNameTable.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(eType) == nodeType)) <em class="brace">{</em>
<a id="L998" name="L998"></a> 998           <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>);
<a id="L999" name="L999"></a> 999         <em class="brace">}</em>
<a id="L1000" name="L1000"></a>1000       <em class="brace">}</em>
<a id="L1001" name="L1001"></a>1001     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1002" name="L1002"></a>1002       <strong class="reserved">for</strong> (<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle));
<a id="L1003" name="L1003"></a>1003            <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1004" name="L1004"></a>1004            <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>)) <em class="brace">{</em>
<a id="L1005" name="L1005"></a>1005         <strong class="reserved">if</strong> (<a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>) == nodeType) <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006           <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>);
<a id="L1007" name="L1007"></a>1007         <em class="brace">}</em>
<a id="L1008" name="L1008"></a>1008       <em class="brace">}</em>
<a id="L1009" name="L1009"></a>1009     <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1011" name="L1011"></a>1011   <em class="brace">}</em>
<a id="L1012" name="L1012"></a>1012 
<div class="comment">
    Given a node handle, advance to its last child.
    If not yet resolved, waits for more nodes to be added to the document and
    tries again.
    @param nodeHandle int Handle of the node.
    @return int Node-number of last child,
    or DTM.NULL to indicate none exists.</div>
<a id="L1022" name="L1022"></a>1022   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17271.html" title="Multiple referred from 52 places.">getLastChild</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1023" name="L1023"></a>1023   <em class="brace">{</em>
<a id="L1024" name="L1024"></a>1024 
<a id="L1025" name="L1025"></a>1025     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1026" name="L1026"></a>1026     <strong class="reserved">int</strong> child = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1027" name="L1027"></a>1027     <strong class="reserved">int</strong> <a href="../D/26741.html" title="Multiple defined in 7 places.">lastChild</a> = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1028" name="L1028"></a>1028 
<a id="L1029" name="L1029"></a>1029     <strong class="reserved">while</strong> (child != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1030" name="L1030"></a>1030     <em class="brace">{</em>
<a id="L1031" name="L1031"></a>1031       <a href="../D/26741.html" title="Multiple defined in 7 places.">lastChild</a> = child;
<a id="L1032" name="L1032"></a>1032       child = <a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(child);
<a id="L1033" name="L1033"></a>1033     <em class="brace">}</em>
<a id="L1034" name="L1034"></a>1034 
<a id="L1035" name="L1035"></a>1035     <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/26741.html" title="Multiple defined in 7 places.">lastChild</a>);
<a id="L1036" name="L1036"></a>1036   <em class="brace">}</em>
<a id="L1037" name="L1037"></a>1037 
<div class="comment">
    Retrieves an attribute node by by qualified name and namespace URI.
    @param nodeHandle int Handle of the node upon which to look up this attribute..
    @param namespaceURI The namespace URI of the attribute to
      retrieve, or null.
    @param name The local name of the attribute to
      retrieve.
    @return The attribute node handle with the specified name (
      <code>nodeName</code>) or <code>DTM.NULL</code> if there is no such
      attribute.</div>
<a id="L1050" name="L1050"></a>1050   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/15154.html" title="Multiple referred from 32 places.">getAttributeNode</a>(<strong class="reserved">int</strong> nodeHandle, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>,
<a id="L1051" name="L1051"></a>1051                                        <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1052" name="L1052"></a>1052 
<div class="comment">
    Given a node handle, get the index of the node's first attribute.
    @param nodeHandle int Handle of the node.
    @return Handle of first attribute, or DTM.NULL to indicate none exists.</div>
<a id="L1059" name="L1059"></a>1059   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16601.html" title="Multiple referred from 16 places.">getFirstAttribute</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1060" name="L1060"></a>1060   <em class="brace">{</em>
<a id="L1061" name="L1061"></a>1061     <strong class="reserved">int</strong> nodeID = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1062" name="L1062"></a>1062 
<a id="L1063" name="L1063"></a>1063     <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/19085.html" title="Multiple defined in 2 places.">getFirstAttributeIdentity</a>(nodeID));
<a id="L1064" name="L1064"></a>1064   <em class="brace">}</em>
<a id="L1065" name="L1065"></a>1065 
<div class="comment">
    Given a node identity, get the index of the node's first attribute.
    @param identity int identity of the node.
    @return Identity of first attribute, or DTM.NULL to indicate none exists.</div>
<a id="L1072" name="L1072"></a>1072   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/16603.html" title="Multiple referred from 4 places.">getFirstAttributeIdentity</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) <em class="brace">{</em>
<a id="L1073" name="L1073"></a>1073     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1074" name="L1074"></a>1074 
<a id="L1075" name="L1075"></a>1075     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1076" name="L1076"></a>1076     <em class="brace">{</em>
<a id="L1077" name="L1077"></a>1077       <em class="comment">// Assume that attributes and namespaces immediately follow the element.</em>
<a id="L1078" name="L1078"></a>1078       <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)))
<a id="L1079" name="L1079"></a>1079       <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080 
<a id="L1081" name="L1081"></a>1081         <em class="comment">// Assume this can not be null.</em>
<a id="L1082" name="L1082"></a>1082         <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1083" name="L1083"></a>1083 
<a id="L1084" name="L1084"></a>1084         <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE)
<a id="L1085" name="L1085"></a>1085         <em class="brace">{</em>
<a id="L1086" name="L1086"></a>1086           <strong class="reserved">return</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L1087" name="L1087"></a>1087         <em class="brace">}</em>
<a id="L1088" name="L1088"></a>1088         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE != <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1089" name="L1089"></a>1089         <em class="brace">{</em>
<a id="L1090" name="L1090"></a>1090           <strong class="reserved">break</strong>;
<a id="L1091" name="L1091"></a>1091         <em class="brace">}</em>
<a id="L1092" name="L1092"></a>1092       <em class="brace">}</em>
<a id="L1093" name="L1093"></a>1093     <em class="brace">}</em>
<a id="L1094" name="L1094"></a>1094 
<a id="L1095" name="L1095"></a>1095     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1096" name="L1096"></a>1096   <em class="brace">}</em>
<a id="L1097" name="L1097"></a>1097 
<div class="comment">
    Given a node handle and an expanded type ID, get the index of the node's
    attribute of that type, if any.
    @param nodeHandle int Handle of the node.
    @param attType int expanded type ID of the required attribute.
    @return Handle of attribute of the required type, or DTM.NULL to indicate
    none exists.</div>
<a id="L1107" name="L1107"></a>1107   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/19637.html" title="Multiple referred from 2 places.">getTypedAttribute</a>(<strong class="reserved">int</strong> nodeHandle, <strong class="reserved">int</strong> attType) <em class="brace">{</em>
<a id="L1108" name="L1108"></a>1108     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>(nodeHandle);
<a id="L1109" name="L1109"></a>1109     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1110" name="L1110"></a>1110       <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1111" name="L1111"></a>1111 
<a id="L1112" name="L1112"></a>1112       <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)))
<a id="L1113" name="L1113"></a>1113       <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114         <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1115" name="L1115"></a>1115 
<a id="L1116" name="L1116"></a>1116         <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE)
<a id="L1117" name="L1117"></a>1117         <em class="brace">{</em>
<a id="L1118" name="L1118"></a>1118           <strong class="reserved">if</strong> (<a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) == attType) <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1119" name="L1119"></a>1119         <em class="brace">}</em>
<a id="L1120" name="L1120"></a>1120         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE != <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1121" name="L1121"></a>1121         <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122           <strong class="reserved">break</strong>;
<a id="L1123" name="L1123"></a>1123         <em class="brace">}</em>
<a id="L1124" name="L1124"></a>1124       <em class="brace">}</em>
<a id="L1125" name="L1125"></a>1125     <em class="brace">}</em>
<a id="L1126" name="L1126"></a>1126 
<a id="L1127" name="L1127"></a>1127     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1128" name="L1128"></a>1128   <em class="brace">}</em>
<a id="L1129" name="L1129"></a>1129 
<div class="comment">
    Given a node handle, advance to its next sibling.
    If not yet resolved, waits for more nodes to be added to the document and
    tries again.
    @param nodeHandle int Handle of the node.
    @return int Node-number of next sibling,
    or DTM.NULL to indicate none exists.</div>
<a id="L1138" name="L1138"></a>1138   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17946.html" title="Multiple referred from 249 places.">getNextSibling</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1139" name="L1139"></a>1139   <em class="brace">{</em>
<a id="L1140" name="L1140"></a>1140         <strong class="reserved">if</strong> (nodeHandle == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1141" name="L1141"></a>1141         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1142" name="L1142"></a>1142     <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle)));
<a id="L1143" name="L1143"></a>1143   <em class="brace">}</em>
<a id="L1144" name="L1144"></a>1144 
<div class="comment">
    Given a node handle, advance to its next sibling.
    If not yet resolved, waits for more nodes to be added to the document and
    tries again.
    @param nodeHandle int Handle of the node.
    @return int Node-number of next sibling,
    or DTM.NULL to indicate none exists.</div>
<a id="L1153" name="L1153"></a>1153   <strong class="reserved">public</strong> <strong class="reserved">int</strong> getTypedNextSibling(<strong class="reserved">int</strong> nodeHandle, <strong class="reserved">int</strong> nodeType)
<a id="L1154" name="L1154"></a>1154   <em class="brace">{</em>
<a id="L1155" name="L1155"></a>1155         <strong class="reserved">if</strong> (nodeHandle == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1156" name="L1156"></a>1156         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1157" name="L1157"></a>1157         <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1158" name="L1158"></a>1158         <strong class="reserved">int</strong> eType;
<a id="L1159" name="L1159"></a>1159         <strong class="reserved">while</strong> ((<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)) != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> &amp;&amp;
<a id="L1160" name="L1160"></a>1160         ((eType = <a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)) != nodeType &amp;&amp;
<a id="L1161" name="L1161"></a>1161         m_expandedNameTable.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(eType)!= nodeType));
<a id="L1162" name="L1162"></a>1162         <em class="comment">//_type(node) != nodeType));</em>
<a id="L1163" name="L1163"></a>1163 
<a id="L1164" name="L1164"></a>1164     <strong class="reserved">return</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> ? <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> : <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>));
<a id="L1165" name="L1165"></a>1165   <em class="brace">}</em>
<a id="L1166" name="L1166"></a>1166 
<div class="comment">
    Given a node handle, find its preceeding sibling.
    WARNING: DTM is asymmetric; this operation is resolved by search, and is
    relatively expensive.
    @param nodeHandle the id of the node.
    @return int Node-number of the previous sib,
    or DTM.NULL to indicate none exists.</div>
<a id="L1176" name="L1176"></a>1176   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18441.html" title="Multiple referred from 49 places.">getPreviousSibling</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1177" name="L1177"></a>1177   <em class="brace">{</em>
<a id="L1178" name="L1178"></a>1178     <strong class="reserved">if</strong> (nodeHandle == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1179" name="L1179"></a>1179       <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1180" name="L1180"></a>1180 
<a id="L1181" name="L1181"></a>1181     <strong class="reserved">if</strong> (m_prevsib != <strong class="reserved">null</strong>)
<a id="L1182" name="L1182"></a>1182       <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../S/5889.html#L589" title="Defined at 589 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_prevsib</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle)));
<a id="L1183" name="L1183"></a>1183     <strong class="reserved">else</strong>
<a id="L1184" name="L1184"></a>1184     <em class="brace">{</em>
<a id="L1185" name="L1185"></a>1185       <em class="comment">// If the previous sibling array is not built, we get at</em>
<a id="L1186" name="L1186"></a>1186       <em class="comment">// the previous sibling using the parent, firstch and</em>
<a id="L1187" name="L1187"></a>1187       <em class="comment">// nextsib arrays.</em>
<a id="L1188" name="L1188"></a>1188       <strong class="reserved">int</strong> nodeID = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1189" name="L1189"></a>1189       <strong class="reserved">int</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(nodeID);
<a id="L1190" name="L1190"></a>1190       <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L1191" name="L1191"></a>1191       <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1192" name="L1192"></a>1192       <strong class="reserved">while</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != nodeID)
<a id="L1193" name="L1193"></a>1193       <em class="brace">{</em>
<a id="L1194" name="L1194"></a>1194         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L1195" name="L1195"></a>1195         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../S/5889.html#L557" title="Defined at 557 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_nextsib</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L1196" name="L1196"></a>1196       <em class="brace">}</em>
<a id="L1197" name="L1197"></a>1197       <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1198" name="L1198"></a>1198     <em class="brace">}</em>
<a id="L1199" name="L1199"></a>1199   <em class="brace">}</em>
<a id="L1200" name="L1200"></a>1200 
<div class="comment">
    Given a node handle, advance to the next attribute.
    If an attr, we advance to
    the next attr on the same node.  If not an attribute, we return NULL.
    @param nodeHandle int Handle of the node.
    @return int DTM node-number of the resolved attr,
    or DTM.NULL to indicate none exists.</div>
<a id="L1210" name="L1210"></a>1210   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17902.html" title="Multiple referred from 43 places.">getNextAttribute</a>(<strong class="reserved">int</strong> nodeHandle) <em class="brace">{</em>
<a id="L1211" name="L1211"></a>1211     <strong class="reserved">int</strong> nodeID = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1212" name="L1212"></a>1212 
<a id="L1213" name="L1213"></a>1213     <strong class="reserved">if</strong> (<a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(nodeID) == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE) <em class="brace">{</em>
<a id="L1214" name="L1214"></a>1214       <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/20888.html" title="Multiple defined in 2 places.">getNextAttributeIdentity</a>(nodeID));
<a id="L1215" name="L1215"></a>1215     <em class="brace">}</em>
<a id="L1216" name="L1216"></a>1216 
<a id="L1217" name="L1217"></a>1217     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1218" name="L1218"></a>1218   <em class="brace">}</em>
<a id="L1219" name="L1219"></a>1219 
<div class="comment">
    Given a node identity for an attribute, advance to the next attribute.
    @param identity int identity of the attribute node.  This
    <strong>must</strong> be an attribute node.
    @return int DTM node-identity of the resolved attr,
    or DTM.NULL to indicate none exists.</div>
<a id="L1230" name="L1230"></a>1230   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/17904.html" title="Multiple referred from 4 places.">getNextAttributeIdentity</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231     <em class="comment">// Assume that attributes and namespace nodes immediately follow the element</em>
<a id="L1232" name="L1232"></a>1232     <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>))) <em class="brace">{</em>
<a id="L1233" name="L1233"></a>1233       <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1234" name="L1234"></a>1234 
<a id="L1235" name="L1235"></a>1235       <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE) <em class="brace">{</em>
<a id="L1236" name="L1236"></a>1236         <strong class="reserved">return</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L1237" name="L1237"></a>1237       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE) <em class="brace">{</em>
<a id="L1238" name="L1238"></a>1238         <strong class="reserved">break</strong>;
<a id="L1239" name="L1239"></a>1239       <em class="brace">}</em>
<a id="L1240" name="L1240"></a>1240     <em class="brace">}</em>
<a id="L1241" name="L1241"></a>1241 
<a id="L1242" name="L1242"></a>1242     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1243" name="L1243"></a>1243   <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244 
<div class="comment">
   /** Lazily created namespace lists. */</div>
<a id="L1246" name="L1246"></a>1246   <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> m_namespaceLists = <strong class="reserved">null</strong>;  <em class="comment">// on demand</em>
<a id="L1247" name="L1247"></a>1247 
<a id="L1248" name="L1248"></a>1248 
<div class="comment">
 Build table of namespace declaration
    locations during DTM construction. Table is a Vector of
    SuballocatedIntVectors containing the namespace node HANDLES declared at
    that ID, plus an SuballocatedIntVector of the element node INDEXES at which
    these declarations appeared.
    NOTE: Since this occurs during model build, nodes will be encountered
    in doucment order and thus the table will be ordered by element,
    permitting binary-search as a possible retrieval optimization.
    %REVIEW% Directly managed arrays rather than vectors?
    %REVIEW% Handles or IDs? Given usage, I think handles.
   * </div>
<a id="L1262" name="L1262"></a>1262   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/12936.html" title="Multiple referred from 3 places.">declareNamespaceInContext</a>(<strong class="reserved">int</strong> elementNodeIndex,<strong class="reserved">int</strong> namespaceNodeIndex)
<a id="L1263" name="L1263"></a>1263   <em class="brace">{</em>
<a id="L1264" name="L1264"></a>1264     <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> nsList=<strong class="reserved">null</strong>;
<a id="L1265" name="L1265"></a>1265     <strong class="reserved">if</strong>(m_namespaceDeclSets==<strong class="reserved">null</strong>)
<a id="L1266" name="L1266"></a>1266       <em class="brace">{</em>
<a id="L1267" name="L1267"></a>1267 
<a id="L1268" name="L1268"></a>1268         <em class="comment">// First</em>
<a id="L1269" name="L1269"></a>1269         m_namespaceDeclSetElements=<strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(32);
<a id="L1270" name="L1270"></a>1270         m_namespaceDeclSetElements.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(elementNodeIndex);
<a id="L1271" name="L1271"></a>1271         m_namespaceDeclSets=<strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1272" name="L1272"></a>1272         nsList=<strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(32);
<a id="L1273" name="L1273"></a>1273         m_namespaceDeclSets.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(nsList);
<a id="L1274" name="L1274"></a>1274       <em class="brace">}</em>
<a id="L1275" name="L1275"></a>1275     <strong class="reserved">else</strong>
<a id="L1276" name="L1276"></a>1276       <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277         <em class="comment">// Most recent. May be -1 (none) if DTM was pruned.</em>
<a id="L1278" name="L1278"></a>1278         <em class="comment">// %OPT% Is there a lastElement() method? Should there be?</em>
<a id="L1279" name="L1279"></a>1279         <strong class="reserved">int</strong> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>=m_namespaceDeclSetElements.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1;
<a id="L1280" name="L1280"></a>1280 
<a id="L1281" name="L1281"></a>1281         <strong class="reserved">if</strong>(<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>&gt;=0 &amp;&amp; elementNodeIndex==m_namespaceDeclSetElements.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>))
<a id="L1282" name="L1282"></a>1282           <em class="brace">{</em>
<a id="L1283" name="L1283"></a>1283             nsList=(<a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>)m_namespaceDeclSets.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>);
<a id="L1284" name="L1284"></a>1284           <em class="brace">}</em>
<a id="L1285" name="L1285"></a>1285       <em class="brace">}</em>
<a id="L1286" name="L1286"></a>1286     <strong class="reserved">if</strong>(nsList==<strong class="reserved">null</strong>)
<a id="L1287" name="L1287"></a>1287       <em class="brace">{</em>
<a id="L1288" name="L1288"></a>1288         m_namespaceDeclSetElements.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(elementNodeIndex);
<a id="L1289" name="L1289"></a>1289 
<a id="L1290" name="L1290"></a>1290         <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> inherited =
<a id="L1291" name="L1291"></a>1291                                 <a href="../S/5889.html#L1339" title="Defined at 1339 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findNamespaceContext</a>(<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(elementNodeIndex));
<a id="L1292" name="L1292"></a>1292 
<a id="L1293" name="L1293"></a>1293         <strong class="reserved">if</strong> (inherited!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1294" name="L1294"></a>1294             <em class="comment">// %OPT% Count-down might be faster, but debuggability may</em>
<a id="L1295" name="L1295"></a>1295             <em class="comment">// be better this way, and if we ever decide we want to</em>
<a id="L1296" name="L1296"></a>1296             <em class="comment">// keep this ordered by expanded-type...</em>
<a id="L1297" name="L1297"></a>1297             <strong class="reserved">int</strong> isize=inherited.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1298" name="L1298"></a>1298 
<a id="L1299" name="L1299"></a>1299             <em class="comment">// Base the size of a new namespace list on the</em>
<a id="L1300" name="L1300"></a>1300             <em class="comment">// size of the inherited list - but within reason!</em>
<a id="L1301" name="L1301"></a>1301             nsList=<strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(isize+16,2048),
<a id="L1302" name="L1302"></a>1302                                                       32));
<a id="L1303" name="L1303"></a>1303 
<a id="L1304" name="L1304"></a>1304             <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i=0;i&lt;isize;++i)
<a id="L1305" name="L1305"></a>1305               <em class="brace">{</em>
<a id="L1306" name="L1306"></a>1306                 nsList.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(inherited.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i));
<a id="L1307" name="L1307"></a>1307               <em class="brace">}</em>
<a id="L1308" name="L1308"></a>1308         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1309" name="L1309"></a>1309             nsList=<strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(32);
<a id="L1310" name="L1310"></a>1310         <em class="brace">}</em>
<a id="L1311" name="L1311"></a>1311 
<a id="L1312" name="L1312"></a>1312         m_namespaceDeclSets.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(nsList);
<a id="L1313" name="L1313"></a>1313       <em class="brace">}</em>
<a id="L1314" name="L1314"></a>1314 
<a id="L1315" name="L1315"></a>1315     <em class="comment">// Handle overwriting inherited.</em>
<a id="L1316" name="L1316"></a>1316     <em class="comment">// %OPT% Keep sorted? (By expanded-name rather than by doc order...)</em>
<a id="L1317" name="L1317"></a>1317     <em class="comment">// Downside: Would require insertElementAt if not found,</em>
<a id="L1318" name="L1318"></a>1318     <em class="comment">// which has recopying costs. But these are generally short lists...</em>
<a id="L1319" name="L1319"></a>1319     <strong class="reserved">int</strong> newEType=<a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(namespaceNodeIndex);
<a id="L1320" name="L1320"></a>1320 
<a id="L1321" name="L1321"></a>1321     <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i=nsList.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1;i&gt;=0;--i)
<a id="L1322" name="L1322"></a>1322       <em class="brace">{</em>
<a id="L1323" name="L1323"></a>1323         <strong class="reserved">if</strong>(newEType==<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(nsList.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i)))
<a id="L1324" name="L1324"></a>1324           <em class="brace">{</em>
<a id="L1325" name="L1325"></a>1325             nsList.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(namespaceNodeIndex),i);
<a id="L1326" name="L1326"></a>1326             <strong class="reserved">return</strong>;
<a id="L1327" name="L1327"></a>1327           <em class="brace">}</em>
<a id="L1328" name="L1328"></a>1328       <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329     nsList.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(namespaceNodeIndex));
<a id="L1330" name="L1330"></a>1330   <em class="brace">}</em>
<a id="L1331" name="L1331"></a>1331 
<div class="comment">
 Retrieve list of namespace declaration locations
      active at this node. List is an SuballocatedIntVector whose
      entries are the namespace node HANDLES declared at that ID.
      %REVIEW% Directly managed arrays rather than vectors?
      %REVIEW% Handles or IDs? Given usage, I think handles.
     * </div>
<a id="L1339" name="L1339"></a>1339   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> <a href="../R/14428.html" title="Multiple referred from 4 places.">findNamespaceContext</a>(<strong class="reserved">int</strong> elementNodeIndex)
<a id="L1340" name="L1340"></a>1340   <em class="brace">{</em>
<a id="L1341" name="L1341"></a>1341     <strong class="reserved">if</strong> (<strong class="reserved">null</strong>!=m_namespaceDeclSetElements)
<a id="L1342" name="L1342"></a>1342       <em class="brace">{</em>
<a id="L1343" name="L1343"></a>1343         <em class="comment">// %OPT% Is binary-search really saving us a lot versus linear?</em>
<a id="L1344" name="L1344"></a>1344         <em class="comment">// (... It may be, in large docs with many NS decls.)</em>
<a id="L1345" name="L1345"></a>1345         <strong class="reserved">int</strong> wouldBeAt=<a href="../S/5889.html#L1415" title="Defined at 1415 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findInSortedSuballocatedIntVector</a>(m_namespaceDeclSetElements,
<a id="L1346" name="L1346"></a>1346                                             elementNodeIndex);
<a id="L1347" name="L1347"></a>1347         <strong class="reserved">if</strong>(wouldBeAt&gt;=0) <em class="comment">// Found it</em>
<a id="L1348" name="L1348"></a>1348           <strong class="reserved">return</strong> (<a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>) m_namespaceDeclSets.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(wouldBeAt);
<a id="L1349" name="L1349"></a>1349         <strong class="reserved">if</strong>(wouldBeAt == -1) <em class="comment">// -1-wouldbeat == 0</em>
<a id="L1350" name="L1350"></a>1350           <strong class="reserved">return</strong> <strong class="reserved">null</strong>; <em class="comment">// Not after anything; definitely not found</em>
<a id="L1351" name="L1351"></a>1351 
<a id="L1352" name="L1352"></a>1352         <em class="comment">// Not found, but we know where it should have been.</em>
<a id="L1353" name="L1353"></a>1353         <em class="comment">// Search back until we find an ancestor or run out.</em>
<a id="L1354" name="L1354"></a>1354         wouldBeAt=-1-wouldBeAt;
<a id="L1355" name="L1355"></a>1355 
<a id="L1356" name="L1356"></a>1356         <em class="comment">// Decrement wouldBeAt to find last possible ancestor</em>
<a id="L1357" name="L1357"></a>1357         <strong class="reserved">int</strong> candidate=m_namespaceDeclSetElements.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(-- wouldBeAt);
<a id="L1358" name="L1358"></a>1358         <strong class="reserved">int</strong> ancestor=<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(elementNodeIndex);
<a id="L1359" name="L1359"></a>1359 
<a id="L1360" name="L1360"></a>1360         <em class="comment">// Special case: if the candidate is before the given node, and</em>
<a id="L1361" name="L1361"></a>1361         <em class="comment">// is in the earliest possible position in the document, it</em>
<a id="L1362" name="L1362"></a>1362         <em class="comment">// must have the namespace declarations we're interested in.</em>
<a id="L1363" name="L1363"></a>1363         <strong class="reserved">if</strong> (wouldBeAt == 0 &amp;&amp; candidate &lt; ancestor) <em class="brace">{</em>
<a id="L1364" name="L1364"></a>1364           <strong class="reserved">int</strong> rootHandle = <a href="../D/18566.html" title="Multiple defined in 9 places.">getDocumentRoot</a>(<a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(elementNodeIndex));
<a id="L1365" name="L1365"></a>1365           <strong class="reserved">int</strong> rootID = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(rootHandle);
<a id="L1366" name="L1366"></a>1366           <strong class="reserved">int</strong> uppermostNSCandidateID;
<a id="L1367" name="L1367"></a>1367 
<a id="L1368" name="L1368"></a>1368           <strong class="reserved">if</strong> (<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>(rootHandle) == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE) <em class="brace">{</em>
<a id="L1369" name="L1369"></a>1369             <strong class="reserved">int</strong> ch = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(rootID);
<a id="L1370" name="L1370"></a>1370             uppermostNSCandidateID = (ch != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) ? ch : rootID;
<a id="L1371" name="L1371"></a>1371           <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1372" name="L1372"></a>1372             uppermostNSCandidateID = rootID;
<a id="L1373" name="L1373"></a>1373           <em class="brace">}</em>
<a id="L1374" name="L1374"></a>1374 
<a id="L1375" name="L1375"></a>1375           <strong class="reserved">if</strong> (candidate == uppermostNSCandidateID) <em class="brace">{</em>
<a id="L1376" name="L1376"></a>1376             <strong class="reserved">return</strong> (<a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>)m_namespaceDeclSets.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(wouldBeAt);
<a id="L1377" name="L1377"></a>1377           <em class="brace">}</em>
<a id="L1378" name="L1378"></a>1378         <em class="brace">}</em>
<a id="L1379" name="L1379"></a>1379 
<a id="L1380" name="L1380"></a>1380         <strong class="reserved">while</strong>(wouldBeAt&gt;=0 &amp;&amp; ancestor&gt;0)
<a id="L1381" name="L1381"></a>1381           <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382             <strong class="reserved">if</strong> (candidate==ancestor) <em class="brace">{</em>
<a id="L1383" name="L1383"></a>1383                 <em class="comment">// Found ancestor in list</em>
<a id="L1384" name="L1384"></a>1384                 <strong class="reserved">return</strong> (<a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>)m_namespaceDeclSets.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(wouldBeAt);
<a id="L1385" name="L1385"></a>1385             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (candidate&lt;ancestor) <em class="brace">{</em>
<a id="L1386" name="L1386"></a>1386                 <em class="comment">// Too deep in tree</em>
<a id="L1387" name="L1387"></a>1387                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L1388" name="L1388"></a>1388                   ancestor=<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(ancestor);
<a id="L1389" name="L1389"></a>1389                 <em class="brace">}</em> <strong class="reserved">while</strong> (candidate &lt; ancestor);
<a id="L1390" name="L1390"></a>1390             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>(wouldBeAt &gt; 0)<em class="brace">{</em>
<a id="L1391" name="L1391"></a>1391               <em class="comment">// Too late in list</em>
<a id="L1392" name="L1392"></a>1392               candidate=m_namespaceDeclSetElements.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(--wouldBeAt);
<a id="L1393" name="L1393"></a>1393             <em class="brace">}</em>
<a id="L1394" name="L1394"></a>1394             <strong class="reserved">else</strong>
<a id="L1395" name="L1395"></a>1395                 <strong class="reserved">break</strong>;
<a id="L1396" name="L1396"></a>1396           <em class="brace">}</em>
<a id="L1397" name="L1397"></a>1397       <em class="brace">}</em>
<a id="L1398" name="L1398"></a>1398 
<a id="L1399" name="L1399"></a>1399     <strong class="reserved">return</strong> <strong class="reserved">null</strong>; <em class="comment">// No namespaces known at this node</em>
<a id="L1400" name="L1400"></a>1400   <em class="brace">}</em>
<a id="L1401" name="L1401"></a>1401 
<div class="comment">
      Subroutine: Locate the specified node within
      m_namespaceDeclSetElements, or the last element which
      preceeds it in document order
      %REVIEW% Inlne this into findNamespaceContext? Create SortedSuballocatedIntVector type?
      @return If positive or zero, the index of the found item.
      If negative, index of the point at which it would have appeared,
      encoded as -1-index and hence reconvertable by subtracting
      it from -1. (Encoding because I don't want to recompare the strings
      but don't want to burn bytes on a datatype to hold a flagged value.)</div>
<a id="L1415" name="L1415"></a>1415   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../S/5889.html#L1345" title="Referred from 1345 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findInSortedSuballocatedIntVector</a>(<a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> vector, <strong class="reserved">int</strong> lookfor)
<a id="L1416" name="L1416"></a>1416   <em class="brace">{</em>
<a id="L1417" name="L1417"></a>1417     <em class="comment">// Binary search</em>
<a id="L1418" name="L1418"></a>1418     <strong class="reserved">int</strong> i = 0;
<a id="L1419" name="L1419"></a>1419     <strong class="reserved">if</strong>(vector != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1420" name="L1420"></a>1420       <strong class="reserved">int</strong> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = 0;
<a id="L1421" name="L1421"></a>1421       <strong class="reserved">int</strong> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>  = vector.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1;
<a id="L1422" name="L1422"></a>1422 
<a id="L1423" name="L1423"></a>1423       <strong class="reserved">while</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> &lt;= <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>) <em class="brace">{</em>
<a id="L1424" name="L1424"></a>1424         i = (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> + <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>) / 2;
<a id="L1425" name="L1425"></a>1425         <strong class="reserved">int</strong> <a href="../D/35234.html" title="Multiple defined in 11 places.">test</a> = lookfor-vector.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1426" name="L1426"></a>1426         <strong class="reserved">if</strong>(<a href="../D/35234.html" title="Multiple defined in 11 places.">test</a> == 0) <em class="brace">{</em>
<a id="L1427" name="L1427"></a>1427           <strong class="reserved">return</strong> i; <em class="comment">// Name found</em>
<a id="L1428" name="L1428"></a>1428         <em class="brace">}</em>
<a id="L1429" name="L1429"></a>1429         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35234.html" title="Multiple defined in 11 places.">test</a> &lt; 0) <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430           <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a> = i - 1; <em class="comment">// looked too late</em>
<a id="L1431" name="L1431"></a>1431         <em class="brace">}</em>
<a id="L1432" name="L1432"></a>1432         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1433" name="L1433"></a>1433           <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = i + 1; <em class="comment">// looked ot early</em>
<a id="L1434" name="L1434"></a>1434         <em class="brace">}</em>
<a id="L1435" name="L1435"></a>1435       <em class="brace">}</em>
<a id="L1436" name="L1436"></a>1436 
<a id="L1437" name="L1437"></a>1437       <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> &gt; i) <em class="brace">{</em>
<a id="L1438" name="L1438"></a>1438         i = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>; <em class="comment">// Clean up at loop end</em>
<a id="L1439" name="L1439"></a>1439       <em class="brace">}</em>
<a id="L1440" name="L1440"></a>1440     <em class="brace">}</em>
<a id="L1441" name="L1441"></a>1441 
<a id="L1442" name="L1442"></a>1442     <strong class="reserved">return</strong> -1 - i; <em class="comment">// not-found has to be encoded.</em>
<a id="L1443" name="L1443"></a>1443   <em class="brace">}</em>
<a id="L1444" name="L1444"></a>1444 
<a id="L1445" name="L1445"></a>1445 
<div class="comment">
    Given a node handle, get the index of the node's first child.
    If not yet resolved, waits for more nodes to be added to the document and
    tries again
    @param nodeHandle handle to node, which should probably be an element
                      node, but need not be.
    @param inScope    true if all namespaces in scope should be returned,
                      false if only the namespace declarations should be
                      returned.
    @return handle of first namespace, or DTM.NULL to indicate none exists.</div>
<a id="L1459" name="L1459"></a>1459   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16624.html" title="Multiple referred from 10 places.">getFirstNamespaceNode</a>(<strong class="reserved">int</strong> nodeHandle, <strong class="reserved">boolean</strong> inScope)
<a id="L1460" name="L1460"></a>1460   <em class="brace">{</em>
<a id="L1461" name="L1461"></a>1461         <strong class="reserved">if</strong>(inScope)
<a id="L1462" name="L1462"></a>1462         <em class="brace">{</em>
<a id="L1463" name="L1463"></a>1463             <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1464" name="L1464"></a>1464             <strong class="reserved">if</strong> (<a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE)
<a id="L1465" name="L1465"></a>1465             <em class="brace">{</em>
<a id="L1466" name="L1466"></a>1466               <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> nsContext=<a href="../S/5889.html#L1339" title="Defined at 1339 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findNamespaceContext</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1467" name="L1467"></a>1467               <strong class="reserved">if</strong>(nsContext==<strong class="reserved">null</strong> || nsContext.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()&lt;1)
<a id="L1468" name="L1468"></a>1468                 <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1469" name="L1469"></a>1469 
<a id="L1470" name="L1470"></a>1470               <strong class="reserved">return</strong> nsContext.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(0);
<a id="L1471" name="L1471"></a>1471             <em class="brace">}</em>
<a id="L1472" name="L1472"></a>1472             <strong class="reserved">else</strong>
<a id="L1473" name="L1473"></a>1473               <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1474" name="L1474"></a>1474           <em class="brace">}</em>
<a id="L1475" name="L1475"></a>1475         <strong class="reserved">else</strong>
<a id="L1476" name="L1476"></a>1476           <em class="brace">{</em>
<a id="L1477" name="L1477"></a>1477             <em class="comment">// Assume that attributes and namespaces immediately</em>
<a id="L1478" name="L1478"></a>1478             <em class="comment">// follow the element.</em>
<a id="L1479" name="L1479"></a>1479             <em class="comment">//</em>
<a id="L1480" name="L1480"></a>1480             <em class="comment">// %OPT% Would things be faster if all NS nodes were built</em>
<a id="L1481" name="L1481"></a>1481             <em class="comment">// before all Attr nodes? Some costs at build time for 2nd</em>
<a id="L1482" name="L1482"></a>1482             <em class="comment">// pass...</em>
<a id="L1483" name="L1483"></a>1483             <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1484" name="L1484"></a>1484             <strong class="reserved">if</strong> (<a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE)
<a id="L1485" name="L1485"></a>1485             <em class="brace">{</em>
<a id="L1486" name="L1486"></a>1486               <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)))
<a id="L1487" name="L1487"></a>1487               <em class="brace">{</em>
<a id="L1488" name="L1488"></a>1488                 <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1489" name="L1489"></a>1489                 <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE)
<a id="L1490" name="L1490"></a>1490                     <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1491" name="L1491"></a>1491                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE != <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1492" name="L1492"></a>1492                     <strong class="reserved">break</strong>;
<a id="L1493" name="L1493"></a>1493               <em class="brace">}</em>
<a id="L1494" name="L1494"></a>1494               <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1495" name="L1495"></a>1495             <em class="brace">}</em>
<a id="L1496" name="L1496"></a>1496             <strong class="reserved">else</strong>
<a id="L1497" name="L1497"></a>1497               <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1498" name="L1498"></a>1498           <em class="brace">}</em>
<a id="L1499" name="L1499"></a>1499   <em class="brace">}</em>
<a id="L1500" name="L1500"></a>1500 
<div class="comment">
    Given a namespace handle, advance to the next namespace.
    @param baseHandle handle to original node from where the first namespace
    was relative to (needed to return nodes in document order).
    @param nodeHandle A namespace handle for which we will find the next node.
    @param inScope true if all namespaces that are in scope should be processed,
    otherwise just process the nodes in the given element handle.
    @return handle of next namespace, or DTM.NULL to indicate none exists.</div>
<a id="L1511" name="L1511"></a>1511   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17931.html" title="Multiple referred from 13 places.">getNextNamespaceNode</a>(<strong class="reserved">int</strong> baseHandle, <strong class="reserved">int</strong> nodeHandle,
<a id="L1512" name="L1512"></a>1512                                   <strong class="reserved">boolean</strong> inScope)
<a id="L1513" name="L1513"></a>1513   <em class="brace">{</em>
<a id="L1514" name="L1514"></a>1514         <strong class="reserved">if</strong>(inScope)
<a id="L1515" name="L1515"></a>1515           <em class="brace">{</em>
<a id="L1516" name="L1516"></a>1516             <em class="comment">//Since we've been given the base, try direct lookup</em>
<a id="L1517" name="L1517"></a>1517             <em class="comment">//(could look from nodeHandle but this is at least one</em>
<a id="L1518" name="L1518"></a>1518             <em class="comment">//comparison/get-parent faster)</em>
<a id="L1519" name="L1519"></a>1519             <em class="comment">//SuballocatedIntVector nsContext=findNamespaceContext(nodeHandle &amp; m_mask);</em>
<a id="L1520" name="L1520"></a>1520 
<a id="L1521" name="L1521"></a>1521                 <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> nsContext=<a href="../S/5889.html#L1339" title="Defined at 1339 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">findNamespaceContext</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(baseHandle));
<a id="L1522" name="L1522"></a>1522 
<a id="L1523" name="L1523"></a>1523             <strong class="reserved">if</strong>(nsContext==<strong class="reserved">null</strong>)
<a id="L1524" name="L1524"></a>1524               <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1525" name="L1525"></a>1525             <strong class="reserved">int</strong> i=1 + nsContext.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(nodeHandle);
<a id="L1526" name="L1526"></a>1526             <strong class="reserved">if</strong>(i&lt;=0 || i==nsContext.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())
<a id="L1527" name="L1527"></a>1527               <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1528" name="L1528"></a>1528 
<a id="L1529" name="L1529"></a>1529             <strong class="reserved">return</strong> nsContext.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1530" name="L1530"></a>1530           <em class="brace">}</em>
<a id="L1531" name="L1531"></a>1531         <strong class="reserved">else</strong>
<a id="L1532" name="L1532"></a>1532           <em class="brace">{</em>
<a id="L1533" name="L1533"></a>1533             <em class="comment">// Assume that attributes and namespace nodes immediately follow the element.</em>
<a id="L1534" name="L1534"></a>1534             <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1535" name="L1535"></a>1535             <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)))
<a id="L1536" name="L1536"></a>1536               <em class="brace">{</em>
<a id="L1537" name="L1537"></a>1537                 <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1538" name="L1538"></a>1538                 <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE)
<a id="L1539" name="L1539"></a>1539                   <em class="brace">{</em>
<a id="L1540" name="L1540"></a>1540                     <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1541" name="L1541"></a>1541                   <em class="brace">}</em>
<a id="L1542" name="L1542"></a>1542                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE)
<a id="L1543" name="L1543"></a>1543                   <em class="brace">{</em>
<a id="L1544" name="L1544"></a>1544                     <strong class="reserved">break</strong>;
<a id="L1545" name="L1545"></a>1545                   <em class="brace">}</em>
<a id="L1546" name="L1546"></a>1546               <em class="brace">}</em>
<a id="L1547" name="L1547"></a>1547           <em class="brace">}</em>
<a id="L1548" name="L1548"></a>1548      <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1549" name="L1549"></a>1549   <em class="brace">}</em>
<a id="L1550" name="L1550"></a>1550 
<div class="comment">
    Given a node handle, find its parent node.
    @param nodeHandle the id of the node.
    @return int Node-number of parent,
    or DTM.NULL to indicate none exists.</div>
<a id="L1558" name="L1558"></a>1558   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18269.html" title="Multiple referred from 606 places.">getParent</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1559" name="L1559"></a>1559   <em class="brace">{</em>
<a id="L1560" name="L1560"></a>1560 
<a id="L1561" name="L1561"></a>1561     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1562" name="L1562"></a>1562 
<a id="L1563" name="L1563"></a>1563     <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt; 0)
<a id="L1564" name="L1564"></a>1564       <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>));
<a id="L1565" name="L1565"></a>1565     <strong class="reserved">else</strong>
<a id="L1566" name="L1566"></a>1566       <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1567" name="L1567"></a>1567   <em class="brace">}</em>
<a id="L1568" name="L1568"></a>1568 
<div class="comment">
    Find the Document node handle for the document currently under construction.
    PLEASE NOTE that most people should use getOwnerDocument(nodeHandle) instead;
    this version of the operation is primarily intended for use during negotiation
    with the DTM Manager.
     @return int Node handle of document, which should always be valid.</div>
<a id="L1577" name="L1577"></a>1577   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16214.html" title="Multiple referred from 348 places.">getDocument</a>()
<a id="L1578" name="L1578"></a>1578   <em class="brace">{</em>
<a id="L1579" name="L1579"></a>1579     <strong class="reserved">return</strong> m_dtmIdent.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(0); <em class="comment">// makeNodeHandle(0)</em>
<a id="L1580" name="L1580"></a>1580   <em class="brace">}</em>
<a id="L1581" name="L1581"></a>1581 
<div class="comment">
    Given a node handle, find the owning document node.  This has the exact
    same semantics as the DOM Document method of the same name, in that if
    the nodeHandle is a document node, it will return NULL.
    <p>%REVIEW% Since this is DOM-specific, it may belong at the DOM
    binding layer. Included here as a convenience function and to
    aid porting of DOM code to DTM.</p>
    @param nodeHandle the id of the node.
    @return int Node handle of owning document, or -1 if the node was a Docment</div>
<a id="L1594" name="L1594"></a>1594   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18201.html" title="Multiple referred from 121 places.">getOwnerDocument</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1595" name="L1595"></a>1595   <em class="brace">{</em>
<a id="L1596" name="L1596"></a>1596 
<a id="L1597" name="L1597"></a>1597     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE == <a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>(nodeHandle))
<a id="L1598" name="L1598"></a>1598             <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1599" name="L1599"></a>1599 
<a id="L1600" name="L1600"></a>1600     <strong class="reserved">return</strong> <a href="../D/18566.html" title="Multiple defined in 9 places.">getDocumentRoot</a>(nodeHandle);
<a id="L1601" name="L1601"></a>1601   <em class="brace">}</em>
<a id="L1602" name="L1602"></a>1602 
<div class="comment">
    Given a node handle, find the owning document node.  Unlike the DOM,
    this considers the owningDocument of a Document to be itself.
    @param nodeHandle the id of the node.
    @return int Node handle of owning document, or the nodeHandle if it is
                a Document.</div>
<a id="L1611" name="L1611"></a>1611   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16226.html" title="Multiple referred from 13 places.">getDocumentRoot</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1612" name="L1612"></a>1612   <em class="brace">{</em>
<a id="L1613" name="L1613"></a>1613     <strong class="reserved">return</strong> <a href="../S/5889.html#L2355" title="Defined at 2355 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">getManager</a>().<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(nodeHandle).<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L1614" name="L1614"></a>1614   <em class="brace">}</em>
<a id="L1615" name="L1615"></a>1615 
<div class="comment">
    Get the string-value of a node as a String object
    (see http://www.w3.org/TR/xpath#data-model
    for the definition of a node's string-value).
    @param nodeHandle The node ID.
    @return A string object that represents the string-value of the given node.</div>
<a id="L1625" name="L1625"></a>1625   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../R/19227.html" title="Multiple referred from 38 places.">getStringValue</a>(<strong class="reserved">int</strong> nodeHandle);
<a id="L1626" name="L1626"></a>1626 
<div class="comment">
    Get number of character array chunks in
    the string-value of a node.
    (see http://www.w3.org/TR/xpath#data-model
    for the definition of a node's string-value).
    Note that a single text node may have multiple text chunks.
    @param nodeHandle The node ID.
    @return number of character array chunks in
            the string-value of a node.</div>
<a id="L1639" name="L1639"></a>1639   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19230.html" title="Multiple referred from 2 places.">getStringValueChunkCount</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1640" name="L1640"></a>1640   <em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641 
<a id="L1642" name="L1642"></a>1642     <em class="comment">// %TBD%</em>
<a id="L1643" name="L1643"></a>1643     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//("getStringValueChunkCount not yet supported!");</em>
<a id="L1644" name="L1644"></a>1644 
<a id="L1645" name="L1645"></a>1645     <strong class="reserved">return</strong> 0;
<a id="L1646" name="L1646"></a>1646   <em class="brace">}</em>
<a id="L1647" name="L1647"></a>1647 
<div class="comment">
    Get a character array chunk in the string-value of a node.
    (see http://www.w3.org/TR/xpath#data-model
    for the definition of a node's string-value).
    Note that a single text node may have multiple text chunks.
    @param nodeHandle The node ID.
    @param chunkIndex Which chunk to get.
    @param startAndLen An array of 2 where the start position and length of
                       the chunk will be returned.
    @return The character array reference where the chunk occurs.</div>
<a id="L1661" name="L1661"></a>1661   <strong class="reserved">public</strong> <strong class="reserved">char</strong>[] <a href="../R/19229.html" title="Multiple referred from 2 places.">getStringValueChunk</a>(<strong class="reserved">int</strong> nodeHandle, <strong class="reserved">int</strong> chunkIndex,
<a id="L1662" name="L1662"></a>1662                                     <strong class="reserved">int</strong>[] startAndLen)
<a id="L1663" name="L1663"></a>1663   <em class="brace">{</em>
<a id="L1664" name="L1664"></a>1664 
<a id="L1665" name="L1665"></a>1665     <em class="comment">// %TBD%</em>
<a id="L1666" name="L1666"></a>1666     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//"getStringValueChunk not yet supported!");</em>
<a id="L1667" name="L1667"></a>1667 
<a id="L1668" name="L1668"></a>1668     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1669" name="L1669"></a>1669   <em class="brace">}</em>
<a id="L1670" name="L1670"></a>1670 
<div class="comment">
    Given a node handle, return an ID that represents the node's expanded name.
    @param nodeHandle The handle to the node in question.
    @return the expanded-name id of the node.</div>
<a id="L1678" name="L1678"></a>1678   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16489.html" title="Multiple referred from 61 places.">getExpandedTypeID</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1679" name="L1679"></a>1679   <em class="brace">{</em>
<a id="L1680" name="L1680"></a>1680     <em class="comment">// %REVIEW% This _should_ only be null if someone asked the wrong DTM about the node...</em>
<a id="L1681" name="L1681"></a>1681     <em class="comment">// which one would hope would never happen...</em>
<a id="L1682" name="L1682"></a>1682     <strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>=<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1683" name="L1683"></a>1683     <strong class="reserved">if</strong>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>==<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1684" name="L1684"></a>1684       <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1685" name="L1685"></a>1685     <strong class="reserved">return</strong> <a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L1686" name="L1686"></a>1686   <em class="brace">}</em>
<a id="L1687" name="L1687"></a>1687 
<div class="comment">
    Given an expanded name, return an ID.  If the expanded-name does not
    exist in the internal tables, the entry will be created, and the ID will
    be returned.  Any additional nodes that are created that have this
    expanded name will use this ID.
    @param type The simple type, i.e. one of ELEMENT, ATTRIBUTE, etc.
    @param namespace The namespace URI, which may be null, may be an empty
                     string (which will be the same as null), or may be a
                     namespace URI.
    @param localName The local name string, which must be a valid
                     <a href="http://www.w3.org/TR/REC-xml-names/">NCName</a>.
    @return the expanded-name id of the node.</div>
<a id="L1704" name="L1704"></a>1704   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16489.html" title="Multiple referred from 61 places.">getExpandedTypeID</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1705" name="L1705"></a>1705   <em class="brace">{</em>
<a id="L1706" name="L1706"></a>1706 
<a id="L1707" name="L1707"></a>1707     <a href="../S/5887.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">ExpandedNameTable</a> ent = m_expandedNameTable;
<a id="L1708" name="L1708"></a>1708 
<a id="L1709" name="L1709"></a>1709     <strong class="reserved">return</strong> ent.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a>, <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L1710" name="L1710"></a>1710   <em class="brace">}</em>
<a id="L1711" name="L1711"></a>1711 
<div class="comment">
    Given an expanded-name ID, return the local name part.
    @param expandedNameID an ID that represents an expanded-name.
    @return String Local name of this node.</div>
<a id="L1718" name="L1718"></a>1718   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17420.html" title="Multiple referred from 2 places.">getLocalNameFromExpandedNameID</a>(<strong class="reserved">int</strong> expandedNameID)
<a id="L1719" name="L1719"></a>1719   <em class="brace">{</em>
<a id="L1720" name="L1720"></a>1720     <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(expandedNameID);
<a id="L1721" name="L1721"></a>1721   <em class="brace">}</em>
<a id="L1722" name="L1722"></a>1722 
<div class="comment">
    Given an expanded-name ID, return the namespace URI part.
    @param expandedNameID an ID that represents an expanded-name.
    @return String URI value of this node's namespace, or null if no
    namespace was resolved.</div>
<a id="L1730" name="L1730"></a>1730   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17853.html" title="Multiple referred from 2 places.">getNamespaceFromExpandedNameID</a>(<strong class="reserved">int</strong> expandedNameID)
<a id="L1731" name="L1731"></a>1731   <em class="brace">{</em>
<a id="L1732" name="L1732"></a>1732     <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/20808.html" title="Multiple defined in 28 places.">getNamespace</a>(expandedNameID);
<a id="L1733" name="L1733"></a>1733   <em class="brace">}</em>
<a id="L1734" name="L1734"></a>1734 
<div class="comment">
    Returns the namespace type of a specific node
    @param nodeHandle the id of the node.
    @return the ID of the namespace.</div>
<a id="L1740" name="L1740"></a>1740   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17863.html" title="Multiple referred from 5 places.">getNamespaceType</a>(<strong class="reserved">final</strong> <strong class="reserved">int</strong> nodeHandle)
<a id="L1741" name="L1741"></a>1741   <em class="brace">{</em>
<a id="L1742" name="L1742"></a>1742 
<a id="L1743" name="L1743"></a>1743     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1744" name="L1744"></a>1744     <strong class="reserved">int</strong> expandedNameID = <a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1745" name="L1745"></a>1745 
<a id="L1746" name="L1746"></a>1746     <strong class="reserved">return</strong> m_expandedNameTable.<a href="../S/5887.html#L331" title="Defined at 331 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">getNamespaceID</a>(expandedNameID);
<a id="L1747" name="L1747"></a>1747   <em class="brace">}</em>
<a id="L1748" name="L1748"></a>1748 
<div class="comment">
    Given a node handle, return its DOM-style node name. This will
    include names such as #text or #document.
    @param nodeHandle the id of the node.
    @return String Name of this node, which may be an empty string.
    %REVIEW% Document when empty string is possible...
    %REVIEW-COMMENT% It should never be empty, should it?</div>
<a id="L1758" name="L1758"></a>1758   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17984.html" title="Multiple referred from 297 places.">getNodeName</a>(<strong class="reserved">int</strong> nodeHandle);
<a id="L1759" name="L1759"></a>1759 
<div class="comment">
    Given a node handle, return the XPath node name.  This should be
    the name as described by the XPath data model, NOT the DOM-style
    name.
    @param nodeHandle the id of the node.
    @return String Name of this node, which may be an empty string.</div>
<a id="L1768" name="L1768"></a>1768   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17985.html" title="Multiple referred from 11 places.">getNodeNameX</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1769" name="L1769"></a>1769   <em class="brace">{</em>
<a id="L1770" name="L1770"></a>1770 
<div class="comment">
     /** @todo: implement this com.sun.org.apache.xml.internal.dtm.DTMDefaultBase abstract method */</div>
<a id="L1772" name="L1772"></a>1772     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//"Not yet supported!");</em>
<a id="L1773" name="L1773"></a>1773 
<a id="L1774" name="L1774"></a>1774     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1775" name="L1775"></a>1775   <em class="brace">}</em>
<a id="L1776" name="L1776"></a>1776 
<div class="comment">
    Given a node handle, return its XPath-style localname.
    (As defined in Namespaces, this is the portion of the name after any
    colon character).
    @param nodeHandle the id of the node.
    @return String Local name of this node.</div>
<a id="L1785" name="L1785"></a>1785   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17419.html" title="Multiple referred from 323 places.">getLocalName</a>(<strong class="reserved">int</strong> nodeHandle);
<a id="L1786" name="L1786"></a>1786 
<div class="comment">
    Given a namespace handle, return the prefix that the namespace decl is
    mapping.
    Given a node handle, return the prefix used to map to the namespace.
    <p> %REVIEW% Are you sure you want "" for no prefix?  </p>
    <p> %REVIEW-COMMENT% I think so... not totally sure. -sb  </p>
    @param nodeHandle the id of the node.
    @return String prefix of this node's name, or "" if no explicit
    namespace prefix was given.</div>
<a id="L1799" name="L1799"></a>1799   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18418.html" title="Multiple referred from 112 places.">getPrefix</a>(<strong class="reserved">int</strong> nodeHandle);
<a id="L1800" name="L1800"></a>1800 
<div class="comment">
    Given a node handle, return its DOM-style namespace URI
    (As defined in Namespaces, this is the declared URI which this node's
    prefix -- or default in lieu thereof -- was mapped to.)
    <p>%REVIEW% Null or ""? -sb</p>
    @param nodeHandle the id of the node.
    @return String URI value of this node's namespace, or null if no
    namespace was resolved.</div>
<a id="L1812" name="L1812"></a>1812   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17864.html" title="Multiple referred from 185 places.">getNamespaceURI</a>(<strong class="reserved">int</strong> nodeHandle);
<a id="L1813" name="L1813"></a>1813 
<div class="comment">
    Given a node handle, return its node value. This is mostly
    as defined by the DOM, but may ignore some conveniences.
    <p>
    @param nodeHandle The node id.
    @return String Value of this node, or null if not
    meaningful for this node type.</p></div>
<a id="L1823" name="L1823"></a>1823   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17992.html" title="Multiple referred from 231 places.">getNodeValue</a>(<strong class="reserved">int</strong> nodeHandle);
<a id="L1824" name="L1824"></a>1824 
<div class="comment">
    Given a node handle, return its DOM-style node type.
    <p>
    %REVIEW% Generally, returning short is false economy. Return int?
    %REVIEW% Make assumption that node has already arrived.  Is OK?
    @param nodeHandle The node id.
    @return int Node type, as per the DOM's Node._NODE constants.</p></div>
<a id="L1834" name="L1834"></a>1834   <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/17989.html" title="Multiple referred from 431 places.">getNodeType</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1835" name="L1835"></a>1835   <em class="brace">{</em>
<a id="L1836" name="L1836"></a>1836         <strong class="reserved">if</strong> (nodeHandle == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1837" name="L1837"></a>1837         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1838" name="L1838"></a>1838     <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(<a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle)));
<a id="L1839" name="L1839"></a>1839   <em class="brace">}</em>
<a id="L1840" name="L1840"></a>1840 
<div class="comment">
    Get the depth level of this node in the tree (equals 1 for
    a parentless node).
    @param nodeHandle The node id.
    @return the number of ancestors, plus one
    @xsl.usage internal</div>
<a id="L1849" name="L1849"></a>1849   <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/17337.html" title="Multiple referred from 27 places.">getLevel</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1850" name="L1850"></a>1850   <em class="brace">{</em>
<a id="L1851" name="L1851"></a>1851     <em class="comment">// Apparently, the axis walker stuff requires levels to count from 1.</em>
<a id="L1852" name="L1852"></a>1852     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1853" name="L1853"></a>1853     <strong class="reserved">return</strong> (<strong class="reserved">short</strong>) (<a href="../S/5889.html#L502" title="Defined at 502 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_level</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) + 1);
<a id="L1854" name="L1854"></a>1854   <em class="brace">}</em>
<a id="L1855" name="L1855"></a>1855 
<div class="comment">
    Get the identity of this node in the tree
    @param nodeHandle The node handle.
    @return the node identity
    @xsl.usage internal</div>
<a id="L1863" name="L1863"></a>1863   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17981.html" title="Multiple referred from 20 places.">getNodeIdent</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1864" name="L1864"></a>1864   <em class="brace">{</em>
<div class="comment">
if (nodeHandle != DTM.NULL)
      return nodeHandle &amp; m_mask;
    else
      return DTM.NULL;</div>
<a id="L1869" name="L1869"></a>1869 
<a id="L1870" name="L1870"></a>1870       <strong class="reserved">return</strong> <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1871" name="L1871"></a>1871   <em class="brace">}</em>
<a id="L1872" name="L1872"></a>1872 
<div class="comment">
    Get the handle of this node in the tree
    @param nodeId The node identity.
    @return the node handle
    @xsl.usage internal</div>
<a id="L1880" name="L1880"></a>1880   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17980.html" title="Multiple referred from 15 places.">getNodeHandle</a>(<strong class="reserved">int</strong> nodeId)
<a id="L1881" name="L1881"></a>1881   <em class="brace">{</em>
<div class="comment">
if (nodeId != DTM.NULL)
      return nodeId | m_dtmIdent;
    else
      return DTM.NULL;</div>
<a id="L1886" name="L1886"></a>1886 
<a id="L1887" name="L1887"></a>1887       <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(nodeId);
<a id="L1888" name="L1888"></a>1888   <em class="brace">}</em>
<a id="L1889" name="L1889"></a>1889 
<a id="L1890" name="L1890"></a>1890   <em class="comment">// ============== Document query functions ==============</em>
<a id="L1891" name="L1891"></a>1891 
<div class="comment">
    Tests whether DTM DOM implementation implements a specific feature and
    that feature is supported by this node.
    @param feature The name of the feature to test.
    @param version This is the version number of the feature to test.
      If the version is not
      specified, supporting any version of the feature will cause the
      method to return <code>true</code>.
    @return Returns <code>true</code> if the specified feature is
      supported on this node, <code>false</code> otherwise.</div>
<a id="L1904" name="L1904"></a>1904   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22081.html" title="Multiple referred from 65 places.">isSupported</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> feature, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>)
<a id="L1905" name="L1905"></a>1905   <em class="brace">{</em>
<a id="L1906" name="L1906"></a>1906 
<a id="L1907" name="L1907"></a>1907     <em class="comment">// %TBD%</em>
<a id="L1908" name="L1908"></a>1908     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1909" name="L1909"></a>1909   <em class="brace">}</em>
<a id="L1910" name="L1910"></a>1910 
<div class="comment">
    Return the base URI of the document entity. If it is not known
    (because the document was parsed from a socket connection or from
    standard input, for example), the value of this property is unknown.
    @return the document base URI String object or null if unknown.</div>
<a id="L1918" name="L1918"></a>1918   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16217.html" title="Multiple referred from 6 places.">getDocumentBaseURI</a>()
<a id="L1919" name="L1919"></a>1919   <em class="brace">{</em>
<a id="L1920" name="L1920"></a>1920     <strong class="reserved">return</strong> m_documentBaseURI;
<a id="L1921" name="L1921"></a>1921   <em class="brace">}</em>
<a id="L1922" name="L1922"></a>1922 
<div class="comment">
    Set the base URI of the document entity.
    @param baseURI the document base URI String object or null if unknown.</div>
<a id="L1928" name="L1928"></a>1928   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27264.html" title="Multiple referred from 3 places.">setDocumentBaseURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI)
<a id="L1929" name="L1929"></a>1929   <em class="brace">{</em>
<a id="L1930" name="L1930"></a>1930     m_documentBaseURI = baseURI;
<a id="L1931" name="L1931"></a>1931   <em class="brace">}</em>
<a id="L1932" name="L1932"></a>1932 
<div class="comment">
    Return the system identifier of the document entity. If
    it is not known, the value of this property is unknown.
    @param nodeHandle The node id, which can be any valid node handle.
    @return the system identifier String object or null if unknown.</div>
<a id="L1940" name="L1940"></a>1940   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16229.html" title="Multiple referred from 2 places.">getDocumentSystemIdentifier</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1941" name="L1941"></a>1941   <em class="brace">{</em>
<a id="L1942" name="L1942"></a>1942 
<a id="L1943" name="L1943"></a>1943     <em class="comment">// %REVIEW%  OK? -sb</em>
<a id="L1944" name="L1944"></a>1944     <strong class="reserved">return</strong> m_documentBaseURI;
<a id="L1945" name="L1945"></a>1945   <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946 
<div class="comment">
    Return the name of the character encoding scheme
           in which the document entity is expressed.
    @param nodeHandle The node id, which can be any valid node handle.
    @return the document encoding String object.
    @xsl.usage internal</div>
<a id="L1955" name="L1955"></a>1955   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16219.html" title="Multiple referred from 2 places.">getDocumentEncoding</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1956" name="L1956"></a>1956   <em class="brace">{</em>
<a id="L1957" name="L1957"></a>1957 
<a id="L1958" name="L1958"></a>1958     <em class="comment">// %REVIEW%  OK??  -sb</em>
<a id="L1959" name="L1959"></a>1959     <strong class="reserved">return</strong> "UTF-8";
<a id="L1960" name="L1960"></a>1960   <em class="brace">}</em>
<a id="L1961" name="L1961"></a>1961 
<div class="comment">
    Return an indication of the standalone status of the document,
           either "yes" or "no". This property is derived from the optional
           standalone document declaration in the XML declaration at the
           beginning of the document entity, and has no value if there is no
           standalone document declaration.
    @param nodeHandle The node id, which can be any valid node handle.
    @return the document standalone String object, either "yes", "no", or null.</div>
<a id="L1972" name="L1972"></a>1972   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16228.html" title="Multiple referred from 2 places.">getDocumentStandalone</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1973" name="L1973"></a>1973   <em class="brace">{</em>
<a id="L1974" name="L1974"></a>1974     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1975" name="L1975"></a>1975   <em class="brace">}</em>
<a id="L1976" name="L1976"></a>1976 
<div class="comment">
    Return a string representing the XML version of the document. This
    property is derived from the XML declaration optionally present at the
    beginning of the document entity, and has no value if there is no XML
    declaration.
    @param documentHandle The document handle
    @return the document version String object.</div>
<a id="L1987" name="L1987"></a>1987   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16233.html" title="Multiple referred from 2 places.">getDocumentVersion</a>(<strong class="reserved">int</strong> documentHandle)
<a id="L1988" name="L1988"></a>1988   <em class="brace">{</em>
<a id="L1989" name="L1989"></a>1989     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1990" name="L1990"></a>1990   <em class="brace">}</em>
<a id="L1991" name="L1991"></a>1991 
<div class="comment">
    Return an indication of
    whether the processor has read the complete DTD. Its value is a
    boolean. If it is false, then certain properties (indicated in their
    descriptions below) may be unknown. If it is true, those properties
    are never unknown.
    @return <code>true</code> if all declarations were processed;
            <code>false</code> otherwise.</div>
<a id="L2002" name="L2002"></a>2002   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/16215.html" title="Multiple referred from 2 places.">getDocumentAllDeclarationsProcessed</a>()
<a id="L2003" name="L2003"></a>2003   <em class="brace">{</em>
<a id="L2004" name="L2004"></a>2004 
<a id="L2005" name="L2005"></a>2005     <em class="comment">// %REVIEW% OK?</em>
<a id="L2006" name="L2006"></a>2006     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2007" name="L2007"></a>2007   <em class="brace">}</em>
<a id="L2008" name="L2008"></a>2008 
<div class="comment">
      A document type declaration information item has the following properties:
        1. [system identifier] The system identifier of the external subset, if
           it exists. Otherwise this property has no value.
    @return the system identifier String object, or null if there is none.</div>
<a id="L2017" name="L2017"></a>2017   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16231.html" title="Multiple referred from 2 places.">getDocumentTypeDeclarationSystemIdentifier</a>();
<a id="L2018" name="L2018"></a>2018 
<div class="comment">
    Return the public identifier of the external subset,
    normalized as described in 4.2.2 External Entities [XML]. If there is
    no external subset or if it has no public identifier, this property
    has no value.
    @return the public identifier String object, or null if there is none.</div>
<a id="L2027" name="L2027"></a>2027   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16230.html" title="Multiple referred from 2 places.">getDocumentTypeDeclarationPublicIdentifier</a>();
<a id="L2028" name="L2028"></a>2028 
<div class="comment">
    Returns the <code>Element</code> whose <code>ID</code> is given by
    <code>elementId</code>. If no such element exists, returns
    <code>DTM.NULL</code>. Behavior is not defined if more than one element
    has this <code>ID</code>. Attributes (including those
    with the name "ID") are not of type ID unless so defined by DTD/Schema
    information available to the DTM implementation.
    Implementations that do not know whether attributes are of type ID or
    not are expected to return <code>DTM.NULL</code>.
    <p>%REVIEW% Presumably IDs are still scoped to a single document,
    and this operation searches only within a single document, right?
    Wouldn't want collisions between DTMs in the same process.</p>
    @param elementId The unique <code>id</code> value for an element.
    @return The handle of the matching element.</div>
<a id="L2046" name="L2046"></a>2046   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/16314.html" title="Multiple referred from 11 places.">getElementById</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> elementId);
<a id="L2047" name="L2047"></a>2047 
<div class="comment">
    The getUnparsedEntityURI function returns the URI of the unparsed
    entity with the specified name in the same document as the context
    node (see [3.3 Unparsed Entities]). It returns the empty string if
    there is no such entity.
    <p>
    XML processors may choose to use the System Identifier (if one
    is provided) to resolve the entity, rather than the URI in the
    Public Identifier. The details are dependent on the processor, and
    we would have to support some form of plug-in resolver to handle
    this properly. Currently, we simply return the System Identifier if
    present, and hope that it a usable URI or that our caller can
    map it to one.
    TODO: Resolve Public Identifiers... or consider changing function name.
    </p><p>
    If we find a relative URI
    reference, XML expects it to be resolved in terms of the base URI
    of the document. The DOM doesn't do that for us, and it isn't
    entirely clear whether that should be done here; currently that's
    pushed up to a higher level of our application. (Note that DOM Level
    1 didn't store the document's base URI.)
    TODO: Consider resolving Relative URIs.
    </p><p>
    (The DOM's statement that "An XML processor may choose to
    completely expand entities before the structure model is passed
    to the DOM" refers only to parsed entities, not unparsed, and hence
    doesn't affect this function.)
    @param name A string containing the Entity Name of the unparsed
    entity.
    @return String containing the URI of the Unparsed Entity, or an
    empty string if no such entity exists.</p></div>
<a id="L2082" name="L2082"></a>2082   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19689.html" title="Multiple referred from 6 places.">getUnparsedEntityURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L2083" name="L2083"></a>2083 
<a id="L2084" name="L2084"></a>2084   <em class="comment">// ============== Boolean methods ================</em>
<a id="L2085" name="L2085"></a>2085 
<div class="comment">
    Return true if the xsl:strip-space or xsl:preserve-space was processed
    during construction of the DTM document.
    @return true if this DTM supports prestripping.</div>
<a id="L2092" name="L2092"></a>2092   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29049.html" title="Multiple referred from 2 places.">supportsPreStripping</a>()
<a id="L2093" name="L2093"></a>2093   <em class="brace">{</em>
<a id="L2094" name="L2094"></a>2094     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2095" name="L2095"></a>2095   <em class="brace">}</em>
<a id="L2096" name="L2096"></a>2096 
<div class="comment">
    Figure out whether nodeHandle2 should be considered as being later
    in the document than nodeHandle1, in Document Order as defined
    by the XPath model. This may not agree with the ordering defined
    by other XML applications.
    <p>
    There are some cases where ordering isn't defined, and neither are
    the results of this function -- though we'll generally return false.
    @param nodeHandle1 Node handle to perform position comparison on.
    @param nodeHandle2 Second Node handle to perform position comparison on .
    @return true if node1 comes before node2, otherwise return false.
    You can think of this as
    <code>(node1.documentOrderPosition &lt;= node2.documentOrderPosition)</code>.</p></div>
<a id="L2113" name="L2113"></a>2113   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21781.html" title="Multiple referred from 15 places.">isNodeAfter</a>(<strong class="reserved">int</strong> nodeHandle1, <strong class="reserved">int</strong> nodeHandle2)
<a id="L2114" name="L2114"></a>2114   <em class="brace">{</em>
<a id="L2115" name="L2115"></a>2115                 <em class="comment">// These return NULL if the node doesn't belong to this document.</em>
<a id="L2116" name="L2116"></a>2116     <strong class="reserved">int</strong> index1 = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle1);
<a id="L2117" name="L2117"></a>2117     <strong class="reserved">int</strong> index2 = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle2);
<a id="L2118" name="L2118"></a>2118 
<a id="L2119" name="L2119"></a>2119     <strong class="reserved">return</strong> index1!=<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> &amp;&amp; index2!=<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> &amp;&amp; index1 &lt;= index2;
<a id="L2120" name="L2120"></a>2120   <em class="brace">}</em>
<a id="L2121" name="L2121"></a>2121 
<div class="comment">
        2. [element content whitespace] A boolean indicating whether the
           character is white space appearing within element content (see [XML],
           2.10 "White Space Handling"). Note that validating XML processors are
           required by XML 1.0 to provide this information. If there is no
           declaration for the containing element, this property has no value for
           white space characters. If no declaration has been read, but the [all
           declarations processed] property of the document information item is
           false (so there may be an unread declaration), then the value of this
           property is unknown for white space characters. It is always false for
           characters that are not white space.
    @param nodeHandle the node ID.
    @return <code>true</code> if the character data is whitespace;
            <code>false</code> otherwise.</div>
<a id="L2138" name="L2138"></a>2138   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21244.html" title="Multiple referred from 2 places.">isCharacterElementContentWhitespace</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L2139" name="L2139"></a>2139   <em class="brace">{</em>
<a id="L2140" name="L2140"></a>2140 
<a id="L2141" name="L2141"></a>2141     <em class="comment">// %TBD%</em>
<a id="L2142" name="L2142"></a>2142     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2143" name="L2143"></a>2143   <em class="brace">}</em>
<a id="L2144" name="L2144"></a>2144 
<div class="comment">
       10. [all declarations processed] This property is not strictly speaking
           part of the infoset of the document. Rather it is an indication of
           whether the processor has read the complete DTD. Its value is a
           boolean. If it is false, then certain properties (indicated in their
           descriptions below) may be unknown. If it is true, those properties
           are never unknown.
    @param documentHandle A node handle that must identify a document.
    @return <code>true</code> if all declarations were processed;
            <code>false</code> otherwise.</div>
<a id="L2157" name="L2157"></a>2157   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21374.html" title="Multiple referred from 2 places.">isDocumentAllDeclarationsProcessed</a>(<strong class="reserved">int</strong> documentHandle)
<a id="L2158" name="L2158"></a>2158   <em class="brace">{</em>
<a id="L2159" name="L2159"></a>2159     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2160" name="L2160"></a>2160   <em class="brace">}</em>
<a id="L2161" name="L2161"></a>2161 
<div class="comment">
        5. [specified] A flag indicating whether this attribute was actually
           specified in the start-tag of its element, or was defaulted from the
           DTD.
    @param attributeHandle The attribute handle in question.
    @return <code>true</code> if the attribute was specified;
            <code>false</code> if it was defaulted.</div>
<a id="L2172" name="L2172"></a>2172   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/21189.html" title="Multiple referred from 5 places.">isAttributeSpecified</a>(<strong class="reserved">int</strong> attributeHandle);
<a id="L2173" name="L2173"></a>2173 
<a id="L2174" name="L2174"></a>2174   <em class="comment">// ========== Direct SAX Dispatch, for optimization purposes ========</em>
<a id="L2175" name="L2175"></a>2175 
<div class="comment">
    Directly call the
    characters method on the passed ContentHandler for the
    string-value of the given node (see http://www.w3.org/TR/xpath#data-model
    for the definition of a node's string-value). Multiple calls to the
    ContentHandler's characters methods may well occur for a single call to
    this method.
    @param nodeHandle The node ID.
    @param ch A non-null reference to a ContentHandler.
    @param normalize true if the content should be normalized according to
    the rules for the XPath
    <a href="http://www.w3.org/TR/xpath#function-normalize-space">normalize-space</a>
    function.
    @throws org.xml.sax.SAXException</div>
<a id="L2193" name="L2193"></a>2193   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/13318.html" title="Multiple referred from 11 places.">dispatchCharactersEvents</a>(
<a id="L2194" name="L2194"></a>2194     <strong class="reserved">int</strong> nodeHandle, org.xml.sax.<a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> ch, <strong class="reserved">boolean</strong> <a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>)
<a id="L2195" name="L2195"></a>2195       <strong class="reserved">throws</strong> org.xml.sax.<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>;
<a id="L2196" name="L2196"></a>2196 
<div class="comment">
    Directly create SAX parser events from a subtree.
    @param nodeHandle The node ID.
    @param ch A non-null reference to a ContentHandler.
    @throws org.xml.sax.SAXException</div>
<a id="L2205" name="L2205"></a>2205   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/13328.html" title="Multiple referred from 2 places.">dispatchToEvents</a>(
<a id="L2206" name="L2206"></a>2206     <strong class="reserved">int</strong> nodeHandle, org.xml.sax.<a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> ch)
<a id="L2207" name="L2207"></a>2207       <strong class="reserved">throws</strong> org.xml.sax.<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>;
<a id="L2208" name="L2208"></a>2208 
<div class="comment">
    Return an DOM node for the given node.
    @param nodeHandle The node ID.
    @return A node representation of the DTM node.</div>
<a id="L2216" name="L2216"></a>2216   <strong class="reserved">public</strong> org.w3c.dom.<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/17972.html" title="Multiple referred from 119 places.">getNode</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L2217" name="L2217"></a>2217   <em class="brace">{</em>
<a id="L2218" name="L2218"></a>2218     <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5916.html#L65" title="Defined at 65 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMNodeProxy.java.">DTMNodeProxy</a>(<strong class="reserved">this</strong>, nodeHandle);
<a id="L2219" name="L2219"></a>2219   <em class="brace">}</em>
<a id="L2220" name="L2220"></a>2220 
<a id="L2221" name="L2221"></a>2221   <em class="comment">// ==== Construction methods (may not be supported by some implementations!) =====</em>
<a id="L2222" name="L2222"></a>2222 
<div class="comment">
    Append a child to the end of the document. Please note that the node
    is always cloned if it is owned by another document.
    <p>%REVIEW% "End of the document" needs to be defined more clearly.
    Does it become the last child of the Document? Of the root element?</p>
    @param newChild Must be a valid new node handle.
    @param clone true if the child should be cloned into the document.
    @param cloneDepth if the clone argument is true, specifies that the
                      clone should include all it's children.</div>
<a id="L2235" name="L2235"></a>2235   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10197.html" title="Multiple referred from 328 places.">appendChild</a>(<strong class="reserved">int</strong> newChild, <strong class="reserved">boolean</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>, <strong class="reserved">boolean</strong> cloneDepth)
<a id="L2236" name="L2236"></a>2236   <em class="brace">{</em>
<a id="L2237" name="L2237"></a>2237     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//"appendChild not yet supported!");</em>
<a id="L2238" name="L2238"></a>2238   <em class="brace">}</em>
<a id="L2239" name="L2239"></a>2239 
<div class="comment">
    Append a text node child that will be constructed from a string,
    to the end of the document.
    <p>%REVIEW% "End of the document" needs to be defined more clearly.
    Does it become the last child of the Document? Of the root element?</p>
    @param str Non-null reverence to a string.</div>
<a id="L2249" name="L2249"></a>2249   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10248.html" title="Multiple referred from 6 places.">appendTextChild</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>)
<a id="L2250" name="L2250"></a>2250   <em class="brace">{</em>
<a id="L2251" name="L2251"></a>2251     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//"appendTextChild not yet supported!");</em>
<a id="L2252" name="L2252"></a>2252   <em class="brace">}</em>
<a id="L2253" name="L2253"></a>2253 
<div class="comment">
    Simple error for asserts and the like.
    @param msg Error message to report.</div>
<a id="L2259" name="L2259"></a>2259   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14003.html" title="Multiple referred from 408 places.">error</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>)
<a id="L2260" name="L2260"></a>2260   <em class="brace">{</em>
<a id="L2261" name="L2261"></a>2261     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/2144.html" title="Multiple defined in 2 places.">DTMException</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L2262" name="L2262"></a>2262   <em class="brace">}</em>
<a id="L2263" name="L2263"></a>2263 
<div class="comment">
    Find out whether or not to strip whispace nodes.
    @return whether or not to strip whispace nodes.</div>
<a id="L2270" name="L2270"></a>2270   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/19029.html" title="Multiple referred from 7 places.">getShouldStripWhitespace</a>()
<a id="L2271" name="L2271"></a>2271   <em class="brace">{</em>
<a id="L2272" name="L2272"></a>2272     <strong class="reserved">return</strong> m_shouldStripWS;
<a id="L2273" name="L2273"></a>2273   <em class="brace">}</em>
<a id="L2274" name="L2274"></a>2274 
<div class="comment">
    Set whether to strip whitespaces and push in current value of
    m_shouldStripWS in m_shouldStripWhitespaceStack.
    @param shouldStrip Flag indicating whether to strip whitespace nodes</div>
<a id="L2281" name="L2281"></a>2281   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/25280.html" title="Multiple referred from 4 places.">pushShouldStripWhitespace</a>(<strong class="reserved">boolean</strong> shouldStrip)
<a id="L2282" name="L2282"></a>2282   <em class="brace">{</em>
<a id="L2283" name="L2283"></a>2283 
<a id="L2284" name="L2284"></a>2284     m_shouldStripWS = shouldStrip;
<a id="L2285" name="L2285"></a>2285 
<a id="L2286" name="L2286"></a>2286     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_shouldStripWhitespaceStack)
<a id="L2287" name="L2287"></a>2287       m_shouldStripWhitespaceStack.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(shouldStrip);
<a id="L2288" name="L2288"></a>2288   <em class="brace">}</em>
<a id="L2289" name="L2289"></a>2289 
<div class="comment">
    Set whether to strip whitespaces at this point by popping out
    m_shouldStripWhitespaceStack.</div>
<a id="L2295" name="L2295"></a>2295   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/24828.html" title="Multiple referred from 3 places.">popShouldStripWhitespace</a>()
<a id="L2296" name="L2296"></a>2296   <em class="brace">{</em>
<a id="L2297" name="L2297"></a>2297     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_shouldStripWhitespaceStack)
<a id="L2298" name="L2298"></a>2298       m_shouldStripWS = m_shouldStripWhitespaceStack.<a href="../D/29417.html" title="Multiple defined in 5 places.">popAndTop</a>();
<a id="L2299" name="L2299"></a>2299   <em class="brace">}</em>
<a id="L2300" name="L2300"></a>2300 
<div class="comment">
    Set whether to strip whitespaces and set the top of the stack to
    the current value of m_shouldStripWS.
    @param shouldStrip Flag indicating whether to strip whitespace nodes</div>
<a id="L2308" name="L2308"></a>2308   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> setShouldStripWhitespace(<strong class="reserved">boolean</strong> shouldStrip)
<a id="L2309" name="L2309"></a>2309   <em class="brace">{</em>
<a id="L2310" name="L2310"></a>2310 
<a id="L2311" name="L2311"></a>2311     m_shouldStripWS = shouldStrip;
<a id="L2312" name="L2312"></a>2312 
<a id="L2313" name="L2313"></a>2313     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_shouldStripWhitespaceStack)
<a id="L2314" name="L2314"></a>2314       m_shouldStripWhitespaceStack.<a href="../D/34173.html" title="Multiple defined in 6 places.">setTop</a>(shouldStrip);
<a id="L2315" name="L2315"></a>2315   <em class="brace">}</em>
<a id="L2316" name="L2316"></a>2316 
<div class="comment">
    A dummy routine to satisify the abstract interface. If the DTM
    implememtation that extends the default base requires notification
    of registration, they can override this method.</div>
<a id="L2322" name="L2322"></a>2322    <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13464.html" title="Multiple referred from 3 places.">documentRegistration</a>()
<a id="L2323" name="L2323"></a>2323    <em class="brace">{</em>
<a id="L2324" name="L2324"></a>2324    <em class="brace">}</em>
<a id="L2325" name="L2325"></a>2325 
<div class="comment">
    A dummy routine to satisify the abstract interface. If the DTM
    implememtation that extends the default base requires notification
    when the document is being released, they can override this method</div>
<a id="L2331" name="L2331"></a>2331    <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13465.html" title="Multiple referred from 3 places.">documentRelease</a>()
<a id="L2332" name="L2332"></a>2332    <em class="brace">{</em>
<a id="L2333" name="L2333"></a>2333    <em class="brace">}</em>
<a id="L2334" name="L2334"></a>2334 
<div class="comment">
     Migrate a DTM built with an old DTMManager to a new DTMManager.
     After the migration, the new DTMManager will treat the DTM as
     one that is built by itself.
     This is used to support DTM sharing between multiple transformations.
     @param mgr the DTMManager</div>
<a id="L2342" name="L2342"></a>2342    <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23285.html" title="Multiple referred from 4 places.">migrateTo</a>(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> mgr)
<a id="L2343" name="L2343"></a>2343    <em class="brace">{</em>
<a id="L2344" name="L2344"></a>2344      m_mgr = mgr;
<a id="L2345" name="L2345"></a>2345      <strong class="reserved">if</strong>(mgr <strong class="reserved">instanceof</strong> <a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a>)
<a id="L2346" name="L2346"></a>2346        m_mgrDefault=(<a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a>)mgr;
<a id="L2347" name="L2347"></a>2347    <em class="brace">}</em>
<a id="L2348" name="L2348"></a>2348 
<div class="comment">
 Query which DTMManager this DTM is currently being handled by.
           %REVEW% Should this become part of the base DTM API?
           @return a DTMManager, or null if this is a "stand-alone" DTM.</div>
<a id="L2355" name="L2355"></a>2355          <strong class="reserved">public</strong> <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> <a href="../R/17537.html" title="Multiple referred from 3 places.">getManager</a>()
<a id="L2356" name="L2356"></a>2356          <em class="brace">{</em>
<a id="L2357" name="L2357"></a>2357                  <strong class="reserved">return</strong> m_mgr;
<a id="L2358" name="L2358"></a>2358          <em class="brace">}</em>
<a id="L2359" name="L2359"></a>2359 
<div class="comment">
 Query which DTMIDs this DTM is currently using within the DTMManager.
           %REVEW% Should this become part of the base DTM API?
           @return an IntVector, or null if this is a "stand-alone" DTM.</div>
<a id="L2366" name="L2366"></a>2366          <strong class="reserved">public</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> <a href="../R/15935.html" title="Multiple referred from 3 places.">getDTMIDs</a>()
<a id="L2367" name="L2367"></a>2367          <em class="brace">{</em>
<a id="L2368" name="L2368"></a>2368                  <strong class="reserved">if</strong>(m_mgr==<strong class="reserved">null</strong>) <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2369" name="L2369"></a>2369                  <strong class="reserved">return</strong> m_dtmIdent;
<a id="L2370" name="L2370"></a>2370          <em class="brace">}</em>
<a id="L2371" name="L2371"></a>2371 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L258">[^]</a><a href="#L2366">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/DefaultKeyboardFocusManager.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L100">[^]</a><a href="#L1414">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L100" title="Defined at 100.">toString</a></li>
<li><a href="#L105" title="Defined at 105.">getOwningFrameDialog</a></li>
<li><a href="#L118" title="Defined at 118.">restoreFocus</a></li>
<li><a href="#L133" title="Defined at 133.">restoreFocus</a></li>
<li><a href="#L147" title="Defined at 147.">restoreFocus</a></li>
<li><a href="#L161" title="Defined at 161.">restoreFocus</a></li>
<li><a href="#L164" title="Defined at 164.">doRestoreFocus</a></li>
<li><a href="#L203" title="Defined at 203.">dispatch</a></li>
<li><a href="#L236" title="Defined at 236.">sendMessage</a></li>
<li><a href="#L281" title="Defined at 281.">repostIfFollowsKeyEvents</a></li>
<li><a href="#L319" title="Defined at 319.">dispatchEvent</a></li>
<li><a href="#L799" title="Defined at 799.">dispatchKeyEvent</a></li>
<li><a href="#L854" title="Defined at 854.">postProcessKeyEvent</a></li>
<li><a href="#L866" title="Defined at 866.">pumpApprovedKeyEvents</a></li>
<li><a href="#L900" title="Defined at 900.">dumpMarkers</a></li>
<li><a href="#L915" title="Defined at 915.">typeAheadAssertions</a></li>
<li><a href="#L1005" title="Defined at 1005.">hasMarker</a></li>
<li><a href="#L1018" title="Defined at 1018.">clearMarkers</a></li>
<li><a href="#L1024" title="Defined at 1024.">preDispatchKeyEvent</a></li>
<li><a href="#L1081" title="Defined at 1081.">consumeNextKeyTyped</a></li>
<li><a href="#L1085" title="Defined at 1085.">consumeTraversalKey</a></li>
<li><a href="#L1094" title="Defined at 1094.">consumeProcessedKeyEvent</a></li>
<li><a href="#L1116" title="Defined at 1116.">processKeyEvent</a></li>
<li><a href="#L1213" title="Defined at 1213.">enqueueKeyEvents</a></li>
<li><a href="#L1255" title="Defined at 1255.">dequeueKeyEvents</a></li>
<li><a href="#L1302" title="Defined at 1302.">discardKeyEvents</a></li>
<li><a href="#L1336" title="Defined at 1336.">purgeStampedEvents</a></li>
<li><a href="#L1364" title="Defined at 1364.">focusPreviousComponent</a></li>
<li><a href="#L1379" title="Defined at 1379.">focusNextComponent</a></li>
<li><a href="#L1397" title="Defined at 1397.">upFocusCycle</a></li>
<li><a href="#L1414" title="Defined at 1414.">downFocusCycle</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.awt.event.FocusEvent;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.event.KeyEvent;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.event.WindowEvent;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.awt.peer.ComponentPeer;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.awt.peer.LightweightPeer;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.lang.ref.WeakReference;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.LinkedList;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.ListIterator;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.Set;
<a id="L37" name="L37"></a>  37 
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> sun.util.logging.PlatformLogger;
<a id="L39" name="L39"></a>  39 
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> sun.awt.AppContext;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> sun.awt.SunToolkit;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> sun.awt.AWTAccessor;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> sun.awt.CausedFocusEvent;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> sun.awt.TimedWindowEvent;
<a id="L45" name="L45"></a>  45 
<div class="comment">
  The default KeyboardFocusManager for AWT applications. Focus traversal is
  done in response to a Component's focus traversal keys, and using a
  Container's FocusTraversalPolicy.
  <p>
  Please see
  <a href="https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html">
  How to Use the Focus Subsystem</a>,
  a section in <em>The Java Tutorial</em>, and the
  <a href="../../java/awt/doc-files/FocusSpec.html">Focus Specification</a>
  for more information.
  @author David Mendenhall
  @see FocusTraversalPolicy
  @see Component#setFocusTraversalKeys
  @see Component#getFocusTraversalKeys
  @since 1.4</p></div>
<a id="L65" name="L65"></a>  65 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2104.html" title="Multiple referred from 6 places.">DefaultKeyboardFocusManager</a> <strong class="reserved">extends</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> <em class="brace">{</em>
<a id="L66" name="L66"></a>  66     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> PlatformLogger focusLog = PlatformLogger.<a href="../D/20268.html" title="Multiple defined in 6 places.">getLogger</a>("java.awt.focus.DefaultKeyboardFocusManager");
<a id="L67" name="L67"></a>  67 
<a id="L68" name="L68"></a>  68     <em class="comment">// null weak references to not create too many objects</em>
<a id="L69" name="L69"></a>  69     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>&gt; NULL_WINDOW_WR =
<a id="L70" name="L70"></a>  70         <strong class="reserved">new</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>&gt;(<strong class="reserved">null</strong>);
<a id="L71" name="L71"></a>  71     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt; NULL_COMPONENT_WR =
<a id="L72" name="L72"></a>  72         <strong class="reserved">new</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt;(<strong class="reserved">null</strong>);
<a id="L73" name="L73"></a>  73     <strong class="reserved">private</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>&gt; realOppositeWindowWR = NULL_WINDOW_WR;
<a id="L74" name="L74"></a>  74     <strong class="reserved">private</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt; realOppositeComponentWR = NULL_COMPONENT_WR;
<a id="L75" name="L75"></a>  75     <strong class="reserved">private</strong> <strong class="reserved">int</strong> inSendMessage;
<a id="L76" name="L76"></a>  76     <strong class="reserved">private</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>&gt; enqueuedKeyEvents = <strong class="reserved">new</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>&gt;();
<a id="L77" name="L77"></a>  77     <strong class="reserved">private</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; typeAheadMarkers = <strong class="reserved">new</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt;();
<a id="L78" name="L78"></a>  78     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a>;
<a id="L79" name="L79"></a>  79 
<a id="L80" name="L80"></a>  80     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L81" name="L81"></a>  81         AWTAccessor.setDefaultKeyboardFocusManagerAccessor(
<a id="L82" name="L82"></a>  82             <strong class="reserved">new</strong> AWTAccessor.DefaultKeyboardFocusManagerAccessor() <em class="brace">{</em>
<a id="L83" name="L83"></a>  83                 <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a>(<a href="../S/2359.html#L65" title="Defined at 65 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManager</a> dkfm, <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L84" name="L84"></a>  84                     dkfm.<a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a>(e);
<a id="L85" name="L85"></a>  85                 <em class="brace">}</em>
<a id="L86" name="L86"></a>  86             <em class="brace">}</em>);
<a id="L87" name="L87"></a>  87     <em class="brace">}</em>
<a id="L88" name="L88"></a>  88 
<a id="L89" name="L89"></a>  89     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/8344.html" title="Multiple referred from 15 places.">TypeAheadMarker</a> <em class="brace">{</em>
<a id="L90" name="L90"></a>  90         <strong class="reserved">long</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>;
<a id="L91" name="L91"></a>  91         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> untilFocused;
<a id="L92" name="L92"></a>  92 
<a id="L93" name="L93"></a>  93         TypeAheadMarker(<strong class="reserved">long</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> untilFocused) <em class="brace">{</em>
<a id="L94" name="L94"></a>  94             <strong class="reserved">this</strong>.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> = <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>;
<a id="L95" name="L95"></a>  95             <strong class="reserved">this</strong>.untilFocused = untilFocused;
<a id="L96" name="L96"></a>  96         <em class="brace">}</em>
<div class="comment">
          Returns string representation of the marker</div>
<a id="L100" name="L100"></a> 100         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L101" name="L101"></a> 101             <strong class="reserved">return</strong> "&gt;&gt;&gt; Marker after " + <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> + " on " + untilFocused;
<a id="L102" name="L102"></a> 102         <em class="brace">}</em>
<a id="L103" name="L103"></a> 103     <em class="brace">}</em>
<a id="L104" name="L104"></a> 104 
<a id="L105" name="L105"></a> 105     <strong class="reserved">private</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../S/2359.html#L363" title="Referred from 363 in src/java/awt/DefaultKeyboardFocusManager.java.">getOwningFrameDialog</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> window) <em class="brace">{</em>
<a id="L106" name="L106"></a> 106         <strong class="reserved">while</strong> (window != <strong class="reserved">null</strong> &amp;&amp; !(window <strong class="reserved">instanceof</strong> <a href="../S/2118.html#L135" title="Defined at 135 in src/java/awt/Frame.java.">Frame</a> ||
<a id="L107" name="L107"></a> 107                                    window <strong class="reserved">instanceof</strong> <a href="../S/2212.html#L97" title="Defined at 97 in src/java/awt/Dialog.java.">Dialog</a>)) <em class="brace">{</em>
<a id="L108" name="L108"></a> 108             window = (<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)window.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L109" name="L109"></a> 109         <em class="brace">}</em>
<a id="L110" name="L110"></a> 110         <strong class="reserved">return</strong> window;
<a id="L111" name="L111"></a> 111     <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<div class="comment">
      This series of restoreFocus methods is used for recovering from a
      rejected focus or activation change. Rejections typically occur when
      the user attempts to focus a non-focusable Component or Window.</div>
<a id="L118" name="L118"></a> 118     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/26424.html" title="Multiple referred from 14 places.">restoreFocus</a>(<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe, <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> newFocusedWindow) <em class="brace">{</em>
<a id="L119" name="L119"></a> 119         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> realOppositeComponent = <strong class="reserved">this</strong>.realOppositeComponentWR.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L120" name="L120"></a> 120         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> vetoedComponent = fe.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L121" name="L121"></a> 121 
<a id="L122" name="L122"></a> 122         <strong class="reserved">if</strong> (newFocusedWindow != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(newFocusedWindow,
<a id="L123" name="L123"></a> 123                                                      vetoedComponent, <strong class="reserved">false</strong>))
<a id="L124" name="L124"></a> 124         <em class="brace">{</em>
<a id="L125" name="L125"></a> 125         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (realOppositeComponent != <strong class="reserved">null</strong> &amp;&amp;
<a id="L126" name="L126"></a> 126                    <a href="../S/2359.html#L164" title="Defined at 164 in src/java/awt/DefaultKeyboardFocusManager.java.">doRestoreFocus</a>(realOppositeComponent, vetoedComponent, <strong class="reserved">false</strong>)) <em class="brace">{</em>
<a id="L127" name="L127"></a> 127         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>() != <strong class="reserved">null</strong> &amp;&amp;
<a id="L128" name="L128"></a> 128                    <a href="../S/2359.html#L164" title="Defined at 164 in src/java/awt/DefaultKeyboardFocusManager.java.">doRestoreFocus</a>(fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>(), vetoedComponent, <strong class="reserved">false</strong>)) <em class="brace">{</em>
<a id="L129" name="L129"></a> 129         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L130" name="L130"></a> 130             <a href="../S/2110.html#L642" title="Defined at 642 in src/java/awt/KeyboardFocusManager.java.">clearGlobalFocusOwnerPriv</a>();
<a id="L131" name="L131"></a> 131         <em class="brace">}</em>
<a id="L132" name="L132"></a> 132     <em class="brace">}</em>
<a id="L133" name="L133"></a> 133     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/26424.html" title="Multiple referred from 14 places.">restoreFocus</a>(<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> we) <em class="brace">{</em>
<a id="L134" name="L134"></a> 134         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> realOppositeWindow = <strong class="reserved">this</strong>.realOppositeWindowWR.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L135" name="L135"></a> 135         <strong class="reserved">if</strong> (realOppositeWindow != <strong class="reserved">null</strong>
<a id="L136" name="L136"></a> 136             &amp;&amp; <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(realOppositeWindow, <strong class="reserved">null</strong>, <strong class="reserved">false</strong>))
<a id="L137" name="L137"></a> 137         <em class="brace">{</em>
<a id="L138" name="L138"></a> 138             <em class="comment">// do nothing, everything is done in restoreFocus()</em>
<a id="L139" name="L139"></a> 139         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (we.<a href="../S/2398.html#L327" title="Defined at 327 in src/java/awt/event/WindowEvent.java.">getOppositeWindow</a>() != <strong class="reserved">null</strong> &amp;&amp;
<a id="L140" name="L140"></a> 140                    <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(we.<a href="../S/2398.html#L327" title="Defined at 327 in src/java/awt/event/WindowEvent.java.">getOppositeWindow</a>(), <strong class="reserved">null</strong>, <strong class="reserved">false</strong>))
<a id="L141" name="L141"></a> 141         <em class="brace">{</em>
<a id="L142" name="L142"></a> 142             <em class="comment">// do nothing, everything is done in restoreFocus()</em>
<a id="L143" name="L143"></a> 143         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L144" name="L144"></a> 144             <a href="../S/2110.html#L642" title="Defined at 642 in src/java/awt/KeyboardFocusManager.java.">clearGlobalFocusOwnerPriv</a>();
<a id="L145" name="L145"></a> 145         <em class="brace">}</em>
<a id="L146" name="L146"></a> 146     <em class="brace">}</em>
<a id="L147" name="L147"></a> 147     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/26424.html" title="Multiple referred from 14 places.">restoreFocus</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> aWindow, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> vetoedComponent,
<a id="L148" name="L148"></a> 148                                  <strong class="reserved">boolean</strong> clearOnFailure) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> toFocus =
<a id="L150" name="L150"></a> 150             <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../D/20738.html" title="Multiple defined in 3 places.">getMostRecentFocusOwner</a>(aWindow);
<a id="L151" name="L151"></a> 151 
<a id="L152" name="L152"></a> 152         <strong class="reserved">if</strong> (toFocus != <strong class="reserved">null</strong> &amp;&amp; toFocus != vetoedComponent &amp;&amp; <a href="../S/2359.html#L164" title="Defined at 164 in src/java/awt/DefaultKeyboardFocusManager.java.">doRestoreFocus</a>(toFocus, vetoedComponent, <strong class="reserved">false</strong>)) <em class="brace">{</em>
<a id="L153" name="L153"></a> 153             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L154" name="L154"></a> 154         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (clearOnFailure) <em class="brace">{</em>
<a id="L155" name="L155"></a> 155             <a href="../S/2110.html#L642" title="Defined at 642 in src/java/awt/KeyboardFocusManager.java.">clearGlobalFocusOwnerPriv</a>();
<a id="L156" name="L156"></a> 156             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L157" name="L157"></a> 157         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L158" name="L158"></a> 158             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L159" name="L159"></a> 159         <em class="brace">}</em>
<a id="L160" name="L160"></a> 160     <em class="brace">}</em>
<a id="L161" name="L161"></a> 161     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/26424.html" title="Multiple referred from 14 places.">restoreFocus</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> toFocus, <strong class="reserved">boolean</strong> clearOnFailure) <em class="brace">{</em>
<a id="L162" name="L162"></a> 162         <strong class="reserved">return</strong> <a href="../S/2359.html#L164" title="Defined at 164 in src/java/awt/DefaultKeyboardFocusManager.java.">doRestoreFocus</a>(toFocus, <strong class="reserved">null</strong>, clearOnFailure);
<a id="L163" name="L163"></a> 163     <em class="brace">}</em>
<a id="L164" name="L164"></a> 164     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/13436.html" title="Multiple referred from 4 places.">doRestoreFocus</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> toFocus, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> vetoedComponent,
<a id="L165" name="L165"></a> 165                                    <strong class="reserved">boolean</strong> clearOnFailure)
<a id="L166" name="L166"></a> 166     <em class="brace">{</em>
<a id="L167" name="L167"></a> 167         <strong class="reserved">if</strong> (toFocus != vetoedComponent &amp;&amp; toFocus.<a href="../D/26239.html" title="Multiple defined in 14 places.">isShowing</a>() &amp;&amp; toFocus.<a href="../S/2177.html#L8937" title="Defined at 8937 in src/java/awt/Component.java.">canBeFocusOwner</a>() &amp;&amp;
<a id="L168" name="L168"></a> 168             toFocus.<a href="../D/31123.html" title="Multiple defined in 22 places.">requestFocus</a>(<strong class="reserved">false</strong>, CausedFocusEvent.Cause.ROLLBACK))
<a id="L169" name="L169"></a> 169         <em class="brace">{</em>
<a id="L170" name="L170"></a> 170             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L171" name="L171"></a> 171         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L172" name="L172"></a> 172             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/2177.html#L7873" title="Defined at 7873 in src/java/awt/Component.java.">nextFocus</a> = toFocus.<a href="../S/2177.html#L7898" title="Defined at 7898 in src/java/awt/Component.java.">getNextFocusCandidate</a>();
<a id="L173" name="L173"></a> 173             <strong class="reserved">if</strong> (<a href="../S/2177.html#L7873" title="Defined at 7873 in src/java/awt/Component.java.">nextFocus</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../S/2177.html#L7873" title="Defined at 7873 in src/java/awt/Component.java.">nextFocus</a> != vetoedComponent &amp;&amp;
<a id="L174" name="L174"></a> 174                 <a href="../S/2177.html#L7873" title="Defined at 7873 in src/java/awt/Component.java.">nextFocus</a>.<a href="../D/31126.html" title="Multiple defined in 6 places.">requestFocusInWindow</a>(CausedFocusEvent.Cause.ROLLBACK))
<a id="L175" name="L175"></a> 175             <em class="brace">{</em>
<a id="L176" name="L176"></a> 176                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L177" name="L177"></a> 177             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (clearOnFailure) <em class="brace">{</em>
<a id="L178" name="L178"></a> 178                 <a href="../S/2110.html#L642" title="Defined at 642 in src/java/awt/KeyboardFocusManager.java.">clearGlobalFocusOwnerPriv</a>();
<a id="L179" name="L179"></a> 179                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L180" name="L180"></a> 180             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L181" name="L181"></a> 181                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L182" name="L182"></a> 182             <em class="brace">}</em>
<a id="L183" name="L183"></a> 183         <em class="brace">}</em>
<a id="L184" name="L184"></a> 184     <em class="brace">}</em>
<a id="L185" name="L185"></a> 185 
<div class="comment">
      A special type of SentEvent which updates a counter in the target
      KeyboardFocusManager if it is an instance of
      DefaultKeyboardFocusManager.</div>
<a id="L191" name="L191"></a> 191     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/2359.html#L241" title="Referred from 241 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManagerSentEvent</a>
<a id="L192" name="L192"></a> 192         <strong class="reserved">extends</strong> <a href="../S/2096.html#L39" title="Defined at 39 in src/java/awt/SentEvent.java.">SentEvent</a>
<a id="L193" name="L193"></a> 193     <em class="brace">{</em>
<div class="comment">
          serialVersionUID</div>
<a id="L197" name="L197"></a> 197         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -2924743257508701758L;
<a id="L198" name="L198"></a> 198 
<a id="L199" name="L199"></a> 199         <strong class="reserved">public</strong> DefaultKeyboardFocusManagerSentEvent(<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> nested,
<a id="L200" name="L200"></a> 200                                                     AppContext toNotify) <em class="brace">{</em>
<a id="L201" name="L201"></a> 201             <strong class="reserved">super</strong>(nested, toNotify);
<a id="L202" name="L202"></a> 202         <em class="brace">}</em>
<a id="L203" name="L203"></a> 203         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/13314.html" title="Multiple referred from 12 places.">dispatch</a>() <em class="brace">{</em>
<a id="L204" name="L204"></a> 204             <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager =
<a id="L205" name="L205"></a> 205                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>();
<a id="L206" name="L206"></a> 206             <a href="../S/2359.html#L65" title="Defined at 65 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManager</a> <a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a> =
<a id="L207" name="L207"></a> 207                 (manager <strong class="reserved">instanceof</strong> <a href="../S/2359.html#L65" title="Defined at 65 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManager</a>)
<a id="L208" name="L208"></a> 208                 ? (<a href="../S/2359.html#L65" title="Defined at 65 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManager</a>)manager
<a id="L209" name="L209"></a> 209                 : <strong class="reserved">null</strong>;
<a id="L210" name="L210"></a> 210 
<a id="L211" name="L211"></a> 211             <strong class="reserved">if</strong> (<a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L212" name="L212"></a> 212                 <strong class="reserved">synchronized</strong> (<a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a>) <em class="brace">{</em>
<a id="L213" name="L213"></a> 213                     <a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a>.inSendMessage++;
<a id="L214" name="L214"></a> 214                 <em class="brace">}</em>
<a id="L215" name="L215"></a> 215             <em class="brace">}</em>
<a id="L216" name="L216"></a> 216 
<a id="L217" name="L217"></a> 217             <strong class="reserved">super</strong>.<a href="../D/14945.html" title="Multiple defined in 15 places.">dispatch</a>();
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219             <strong class="reserved">if</strong> (<a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L220" name="L220"></a> 220                 <strong class="reserved">synchronized</strong> (<a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a>) <em class="brace">{</em>
<a id="L221" name="L221"></a> 221                     <a href="../S/3189.html#L56" title="Defined at 56 in src/javax/swing/MenuSelectionManager.java.">defaultManager</a>.inSendMessage--;
<a id="L222" name="L222"></a> 222                 <em class="brace">}</em>
<a id="L223" name="L223"></a> 223             <em class="brace">}</em>
<a id="L224" name="L224"></a> 224         <em class="brace">}</em>
<a id="L225" name="L225"></a> 225     <em class="brace">}</em>
<a id="L226" name="L226"></a> 226 
<div class="comment">
      Sends a synthetic AWTEvent to a Component. If the Component is in
      the current AppContext, then the event is immediately dispatched.
      If the Component is in a different AppContext, then the event is
      posted to the other AppContext's EventQueue, and this method blocks
      until the event is handled or target AppContext is disposed.
      Returns true if successfuly dispatched event, false if failed
      to dispatch.</div>
<a id="L236" name="L236"></a> 236     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/26769.html" title="Multiple referred from 8 places.">sendMessage</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> e) <em class="brace">{</em>
<a id="L237" name="L237"></a> 237         e.isPosted = <strong class="reserved">true</strong>;
<a id="L238" name="L238"></a> 238         AppContext myAppContext = AppContext.getAppContext();
<a id="L239" name="L239"></a> 239         <strong class="reserved">final</strong> AppContext targetAppContext = <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.appContext;
<a id="L240" name="L240"></a> 240         <strong class="reserved">final</strong> <a href="../S/2096.html#L39" title="Defined at 39 in src/java/awt/SentEvent.java.">SentEvent</a> se =
<a id="L241" name="L241"></a> 241             <strong class="reserved">new</strong> <a href="../S/2359.html#L191" title="Defined at 191 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManagerSentEvent</a>(e, myAppContext);
<a id="L242" name="L242"></a> 242 
<a id="L243" name="L243"></a> 243         <strong class="reserved">if</strong> (myAppContext == targetAppContext) <em class="brace">{</em>
<a id="L244" name="L244"></a> 244             se.<a href="../D/14945.html" title="Multiple defined in 15 places.">dispatch</a>();
<a id="L245" name="L245"></a> 245         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L246" name="L246"></a> 246             <strong class="reserved">if</strong> (targetAppContext.<a href="../D/25453.html" title="Multiple defined in 2 places.">isDisposed</a>()) <em class="brace">{</em>
<a id="L247" name="L247"></a> 247                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L248" name="L248"></a> 248             <em class="brace">}</em>
<a id="L249" name="L249"></a> 249             SunToolkit.<a href="../D/29484.html" title="Multiple defined in 6 places.">postEvent</a>(targetAppContext, se);
<a id="L250" name="L250"></a> 250             <strong class="reserved">if</strong> (<a href="../S/2178.html#L97" title="Defined at 97 in src/java/awt/EventQueue.java.">EventQueue</a>.<a href="../S/2178.html#L1040" title="Defined at 1040 in src/java/awt/EventQueue.java.">isDispatchThread</a>()) <em class="brace">{</em>
<a id="L251" name="L251"></a> 251                 <a href="../D/2988.html" title="Multiple defined in 2 places.">EventDispatchThread</a> edt = (<a href="../D/2988.html" title="Multiple defined in 2 places.">EventDispatchThread</a>)
<a id="L252" name="L252"></a> 252                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L253" name="L253"></a> 253                 edt.<a href="../D/29922.html" title="Multiple defined in 2 places.">pumpEvents</a>(<a href="../S/2096.html#L39" title="Defined at 39 in src/java/awt/SentEvent.java.">SentEvent</a>.ID, <strong class="reserved">new</strong> <a href="../D/1787.html" title="Multiple defined in 2 places.">Conditional</a>() <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../D/15746.html" title="Multiple defined in 42 places.">evaluate</a>() <em class="brace">{</em>
<a id="L255" name="L255"></a> 255                             <strong class="reserved">return</strong> !se.<a href="../S/2213.html#L606" title="Defined at 606 in src/java/awt/AWTEvent.java.">dispatched</a> &amp;&amp; !targetAppContext.<a href="../D/25453.html" title="Multiple defined in 2 places.">isDisposed</a>();
<a id="L256" name="L256"></a> 256                         <em class="brace">}</em>
<a id="L257" name="L257"></a> 257                     <em class="brace">}</em>);
<a id="L258" name="L258"></a> 258             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                 <strong class="reserved">synchronized</strong> (se) <em class="brace">{</em>
<a id="L260" name="L260"></a> 260                     <strong class="reserved">while</strong> (!se.<a href="../S/2213.html#L606" title="Defined at 606 in src/java/awt/AWTEvent.java.">dispatched</a> &amp;&amp; !targetAppContext.<a href="../D/25453.html" title="Multiple defined in 2 places.">isDisposed</a>()) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L262" name="L262"></a> 262                             se.<a href="../D/36778.html" title="Multiple defined in 3 places.">wait</a>(1000);
<a id="L263" name="L263"></a> 263                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> ie) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264                             <strong class="reserved">break</strong>;
<a id="L265" name="L265"></a> 265                         <em class="brace">}</em>
<a id="L266" name="L266"></a> 266                     <em class="brace">}</em>
<a id="L267" name="L267"></a> 267                 <em class="brace">}</em>
<a id="L268" name="L268"></a> 268             <em class="brace">}</em>
<a id="L269" name="L269"></a> 269         <em class="brace">}</em>
<a id="L270" name="L270"></a> 270         <strong class="reserved">return</strong> se.<a href="../S/2213.html#L606" title="Defined at 606 in src/java/awt/AWTEvent.java.">dispatched</a>;
<a id="L271" name="L271"></a> 271     <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<div class="comment">
      Checks if the focus window event follows key events waiting in the type-ahead
      queue (if any). This may happen when a user types ahead in the window, the client
      listeners hang EDT for a while, and the user switches b/w toplevels. In that
      case the focus window events may be dispatched before the type-ahead events
      get handled. This may lead to wrong focus behavior and in order to avoid it,
      the focus window events are reposted to the end of the event queue. See 6981400.</div>
<a id="L281" name="L281"></a> 281     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/26209.html" title="Multiple referred from 2 places.">repostIfFollowsKeyEvents</a>(<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> e) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282         <strong class="reserved">if</strong> (!(e <strong class="reserved">instanceof</strong> TimedWindowEvent)) <em class="brace">{</em>
<a id="L283" name="L283"></a> 283             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L284" name="L284"></a> 284         <em class="brace">}</em>
<a id="L285" name="L285"></a> 285         TimedWindowEvent we = (TimedWindowEvent)e;
<a id="L286" name="L286"></a> 286         <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = we.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>();
<a id="L287" name="L287"></a> 287         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L288" name="L288"></a> 288             <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> ke = enqueuedKeyEvents.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>() ? <strong class="reserved">null</strong> : enqueuedKeyEvents.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L289" name="L289"></a> 289             <strong class="reserved">if</strong> (ke != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &gt;= ke.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>()) <em class="brace">{</em>
<a id="L290" name="L290"></a> 290                 <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker = typeAheadMarkers.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>() ? <strong class="reserved">null</strong> : typeAheadMarkers.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L291" name="L291"></a> 291                 <strong class="reserved">if</strong> (marker != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292                     <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> toplevel = marker.untilFocused.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>();
<a id="L293" name="L293"></a> 293                     <em class="comment">// Check that the component awaiting focus belongs to</em>
<a id="L294" name="L294"></a> 294                     <em class="comment">// the current focused window. See 8015454.</em>
<a id="L295" name="L295"></a> 295                     <strong class="reserved">if</strong> (toplevel != <strong class="reserved">null</strong> &amp;&amp; toplevel.<a href="../S/2106.html#L2382" title="Defined at 2382 in src/java/awt/Window.java.">isFocused</a>()) <em class="brace">{</em>
<a id="L296" name="L296"></a> 296                         SunToolkit.<a href="../D/29484.html" title="Multiple defined in 6 places.">postEvent</a>(AppContext.getAppContext(), <strong class="reserved">new</strong> <a href="../S/2097.html#L44" title="Defined at 44 in src/java/awt/SequencedEvent.java.">SequencedEvent</a>(e));
<a id="L297" name="L297"></a> 297                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L298" name="L298"></a> 298                     <em class="brace">}</em>
<a id="L299" name="L299"></a> 299                 <em class="brace">}</em>
<a id="L300" name="L300"></a> 300             <em class="brace">}</em>
<a id="L301" name="L301"></a> 301         <em class="brace">}</em>
<a id="L302" name="L302"></a> 302         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L303" name="L303"></a> 303     <em class="brace">}</em>
<a id="L304" name="L304"></a> 304 
<div class="comment">
      This method is called by the AWT event dispatcher requesting that the
      current KeyboardFocusManager dispatch the specified event on its behalf.
      DefaultKeyboardFocusManagers dispatch all FocusEvents, all WindowEvents
      related to focus, and all KeyEvents. These events are dispatched based
      on the KeyboardFocusManager's notion of the focus owner and the focused
      and active Windows, sometimes overriding the source of the specified
      AWTEvent. If this method returns <code>false</code>, then the AWT event
      dispatcher will attempt to dispatch the event itself.
      @param e the AWTEvent to be dispatched
      @return <code>true</code> if this method dispatched the event;
              <code>false</code> otherwise</div>
<a id="L319" name="L319"></a> 319     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13320.html" title="Multiple referred from 46 places.">dispatchEvent</a>(<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> e) <em class="brace">{</em>
<a id="L320" name="L320"></a> 320         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE) &amp;&amp; (e <strong class="reserved">instanceof</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> || e <strong class="reserved">instanceof</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)) <em class="brace">{</em>
<a id="L321" name="L321"></a> 321             focusLog.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("" + e);
<a id="L322" name="L322"></a> 322         <em class="brace">}</em>
<a id="L323" name="L323"></a> 323         <strong class="reserved">switch</strong> (e.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>()) <em class="brace">{</em>
<a id="L324" name="L324"></a> 324             <strong class="reserved">case</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_GAINED_FOCUS: <em class="brace">{</em>
<a id="L325" name="L325"></a> 325                 <strong class="reserved">if</strong> (<a href="../S/2359.html#L281" title="Defined at 281 in src/java/awt/DefaultKeyboardFocusManager.java.">repostIfFollowsKeyEvents</a>((<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>)e)) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326                     <strong class="reserved">break</strong>;
<a id="L327" name="L327"></a> 327                 <em class="brace">}</em>
<a id="L328" name="L328"></a> 328 
<a id="L329" name="L329"></a> 329                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> we = (<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>)e;
<a id="L330" name="L330"></a> 330                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> oldFocusedWindow = <a href="../S/2110.html#L820" title="Defined at 820 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusedWindow</a>();
<a id="L331" name="L331"></a> 331                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> newFocusedWindow = we.<a href="../D/23696.html" title="Multiple defined in 2 places.">getWindow</a>();
<a id="L332" name="L332"></a> 332                 <strong class="reserved">if</strong> (newFocusedWindow == oldFocusedWindow) <em class="brace">{</em>
<a id="L333" name="L333"></a> 333                     <strong class="reserved">break</strong>;
<a id="L334" name="L334"></a> 334                 <em class="brace">}</em>
<a id="L335" name="L335"></a> 335 
<a id="L336" name="L336"></a> 336                 <strong class="reserved">if</strong> (!(newFocusedWindow.<a href="../S/2106.html#L2493" title="Defined at 2493 in src/java/awt/Window.java.">isFocusableWindow</a>()
<a id="L337" name="L337"></a> 337                       &amp;&amp; newFocusedWindow.<a href="../D/26487.html" title="Multiple defined in 29 places.">isVisible</a>()
<a id="L338" name="L338"></a> 338                       &amp;&amp; newFocusedWindow.<a href="../S/2177.html#L1272" title="Defined at 1272 in src/java/awt/Component.java.">isDisplayable</a>()))
<a id="L339" name="L339"></a> 339                 <em class="brace">{</em>
<a id="L340" name="L340"></a> 340                     <em class="comment">// we can not accept focus on such window, so reject it.</em>
<a id="L341" name="L341"></a> 341                     <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(we);
<a id="L342" name="L342"></a> 342                     <strong class="reserved">break</strong>;
<a id="L343" name="L343"></a> 343                 <em class="brace">}</em>
<a id="L344" name="L344"></a> 344                 <em class="comment">// If there exists a current focused window, then notify it</em>
<a id="L345" name="L345"></a> 345                 <em class="comment">// that it has lost focus.</em>
<a id="L346" name="L346"></a> 346                 <strong class="reserved">if</strong> (oldFocusedWindow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347                     <strong class="reserved">boolean</strong> isEventDispatched =
<a id="L348" name="L348"></a> 348                         <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(oldFocusedWindow,
<a id="L349" name="L349"></a> 349                                 <strong class="reserved">new</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>(oldFocusedWindow,
<a id="L350" name="L350"></a> 350                                                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_LOST_FOCUS,
<a id="L351" name="L351"></a> 351                                                 newFocusedWindow));
<a id="L352" name="L352"></a> 352                     <em class="comment">// Failed to dispatch, clear by ourselfves</em>
<a id="L353" name="L353"></a> 353                     <strong class="reserved">if</strong> (!isEventDispatched) <em class="brace">{</em>
<a id="L354" name="L354"></a> 354                         <a href="../S/2110.html#L533" title="Defined at 533 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusOwner</a>(<strong class="reserved">null</strong>);
<a id="L355" name="L355"></a> 355                         <a href="../S/2110.html#L852" title="Defined at 852 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusedWindow</a>(<strong class="reserved">null</strong>);
<a id="L356" name="L356"></a> 356                     <em class="brace">}</em>
<a id="L357" name="L357"></a> 357                 <em class="brace">}</em>
<a id="L358" name="L358"></a> 358 
<a id="L359" name="L359"></a> 359                 <em class="comment">// Because the native libraries do not post WINDOW_ACTIVATED</em>
<a id="L360" name="L360"></a> 360                 <em class="comment">// events, we need to synthesize one if the active Window</em>
<a id="L361" name="L361"></a> 361                 <em class="comment">// changed.</em>
<a id="L362" name="L362"></a> 362                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> newActiveWindow =
<a id="L363" name="L363"></a> 363                     <a href="../S/2359.html#L105" title="Defined at 105 in src/java/awt/DefaultKeyboardFocusManager.java.">getOwningFrameDialog</a>(newFocusedWindow);
<a id="L364" name="L364"></a> 364                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> currentActiveWindow = <a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>();
<a id="L365" name="L365"></a> 365                 <strong class="reserved">if</strong> (newActiveWindow != currentActiveWindow) <em class="brace">{</em>
<a id="L366" name="L366"></a> 366                     <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(newActiveWindow,
<a id="L367" name="L367"></a> 367                                 <strong class="reserved">new</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>(newActiveWindow,
<a id="L368" name="L368"></a> 368                                                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_ACTIVATED,
<a id="L369" name="L369"></a> 369                                                 currentActiveWindow));
<a id="L370" name="L370"></a> 370                     <strong class="reserved">if</strong> (newActiveWindow != <a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>()) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371                         <em class="comment">// Activation change was rejected. Unlikely, but</em>
<a id="L372" name="L372"></a> 372                         <em class="comment">// possible.</em>
<a id="L373" name="L373"></a> 373                         <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(we);
<a id="L374" name="L374"></a> 374                         <strong class="reserved">break</strong>;
<a id="L375" name="L375"></a> 375                     <em class="brace">}</em>
<a id="L376" name="L376"></a> 376                 <em class="brace">}</em>
<a id="L377" name="L377"></a> 377 
<a id="L378" name="L378"></a> 378                 <a href="../S/2110.html#L852" title="Defined at 852 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusedWindow</a>(newFocusedWindow);
<a id="L379" name="L379"></a> 379 
<a id="L380" name="L380"></a> 380                 <strong class="reserved">if</strong> (newFocusedWindow != <a href="../S/2110.html#L820" title="Defined at 820 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusedWindow</a>()) <em class="brace">{</em>
<a id="L381" name="L381"></a> 381                     <em class="comment">// Focus change was rejected. Will happen if</em>
<a id="L382" name="L382"></a> 382                     <em class="comment">// newFocusedWindow is not a focusable Window.</em>
<a id="L383" name="L383"></a> 383                     <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(we);
<a id="L384" name="L384"></a> 384                     <strong class="reserved">break</strong>;
<a id="L385" name="L385"></a> 385                 <em class="brace">}</em>
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387                 <em class="comment">// Restore focus to the Component which last held it. We do</em>
<a id="L388" name="L388"></a> 388                 <em class="comment">// this here so that client code can override our choice in</em>
<a id="L389" name="L389"></a> 389                 <em class="comment">// a WINDOW_GAINED_FOCUS handler.</em>
<a id="L390" name="L390"></a> 390                 <em class="comment">//</em>
<a id="L391" name="L391"></a> 391                 <em class="comment">// Make sure that the focus change request doesn't change the</em>
<a id="L392" name="L392"></a> 392                 <em class="comment">// focused Window in case we are no longer the focused Window</em>
<a id="L393" name="L393"></a> 393                 <em class="comment">// when the request is handled.</em>
<a id="L394" name="L394"></a> 394                 <strong class="reserved">if</strong> (inSendMessage == 0) <em class="brace">{</em>
<a id="L395" name="L395"></a> 395                     <em class="comment">// Identify which Component should initially gain focus</em>
<a id="L396" name="L396"></a> 396                     <em class="comment">// in the Window.</em>
<a id="L397" name="L397"></a> 397                     <em class="comment">//</em>
<a id="L398" name="L398"></a> 398                     <em class="comment">// * If we're in SendMessage, then this is a synthetic</em>
<a id="L399" name="L399"></a> 399                     <em class="comment">//   WINDOW_GAINED_FOCUS message which was generated by a</em>
<a id="L400" name="L400"></a> 400                     <em class="comment">//   the FOCUS_GAINED handler. Allow the Component to</em>
<a id="L401" name="L401"></a> 401                     <em class="comment">//   which the FOCUS_GAINED message was targeted to</em>
<a id="L402" name="L402"></a> 402                     <em class="comment">//   receive the focus.</em>
<a id="L403" name="L403"></a> 403                     <em class="comment">// * Otherwise, look up the correct Component here.</em>
<a id="L404" name="L404"></a> 404                     <em class="comment">//   We don't use Window.getMostRecentFocusOwner because</em>
<a id="L405" name="L405"></a> 405                     <em class="comment">//   window is focused now and 'null' will be returned</em>
<a id="L406" name="L406"></a> 406 
<a id="L407" name="L407"></a> 407 
<a id="L408" name="L408"></a> 408                     <em class="comment">// Calculating of most recent focus owner and focus</em>
<a id="L409" name="L409"></a> 409                     <em class="comment">// request should be synchronized on KeyboardFocusManager.class</em>
<a id="L410" name="L410"></a> 410                     <em class="comment">// to prevent from thread race when user will request</em>
<a id="L411" name="L411"></a> 411                     <em class="comment">// focus between calculation and our request.</em>
<a id="L412" name="L412"></a> 412                     <em class="comment">// But if focus transfer is synchronous, this synchronization</em>
<a id="L413" name="L413"></a> 413                     <em class="comment">// may cause deadlock, thus we don't synchronize this block.</em>
<a id="L414" name="L414"></a> 414                     <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> toFocus = <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.
<a id="L415" name="L415"></a> 415                         <a href="../D/20738.html" title="Multiple defined in 3 places.">getMostRecentFocusOwner</a>(newFocusedWindow);
<a id="L416" name="L416"></a> 416                     <strong class="reserved">if</strong> ((toFocus == <strong class="reserved">null</strong>) &amp;&amp;
<a id="L417" name="L417"></a> 417                         newFocusedWindow.<a href="../S/2106.html#L2493" title="Defined at 2493 in src/java/awt/Window.java.">isFocusableWindow</a>())
<a id="L418" name="L418"></a> 418                     <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                         toFocus = newFocusedWindow.<a href="../S/2224.html#L3365" title="Defined at 3365 in src/java/awt/Container.java.">getFocusTraversalPolicy</a>().
<a id="L420" name="L420"></a> 420                             <a href="../D/19703.html" title="Multiple defined in 2 places.">getInitialComponent</a>(newFocusedWindow);
<a id="L421" name="L421"></a> 421                     <em class="brace">}</em>
<a id="L422" name="L422"></a> 422                     <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> tempLost = <strong class="reserved">null</strong>;
<a id="L423" name="L423"></a> 423                     <strong class="reserved">synchronized</strong>(<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L424" name="L424"></a> 424                         tempLost = newFocusedWindow.<a href="../S/2106.html#L3380" title="Defined at 3380 in src/java/awt/Window.java.">setTemporaryLostComponent</a>(<strong class="reserved">null</strong>);
<a id="L425" name="L425"></a> 425                     <em class="brace">}</em>
<a id="L426" name="L426"></a> 426 
<a id="L427" name="L427"></a> 427                     <em class="comment">// The component which last has the focus when this window was focused</em>
<a id="L428" name="L428"></a> 428                     <em class="comment">// should receive focus first</em>
<a id="L429" name="L429"></a> 429                     <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430                         focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("tempLost {0}, toFocus {1}",
<a id="L431" name="L431"></a> 431                                        tempLost, toFocus);
<a id="L432" name="L432"></a> 432                     <em class="brace">}</em>
<a id="L433" name="L433"></a> 433                     <strong class="reserved">if</strong> (tempLost != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434                         tempLost.<a href="../D/31126.html" title="Multiple defined in 6 places.">requestFocusInWindow</a>(CausedFocusEvent.Cause.ACTIVATION);
<a id="L435" name="L435"></a> 435                     <em class="brace">}</em>
<a id="L436" name="L436"></a> 436 
<a id="L437" name="L437"></a> 437                     <strong class="reserved">if</strong> (toFocus != <strong class="reserved">null</strong> &amp;&amp; toFocus != tempLost) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438                         <em class="comment">// If there is a component which requested focus when this window</em>
<a id="L439" name="L439"></a> 439                         <em class="comment">// was inactive it expects to receive focus after activation.</em>
<a id="L440" name="L440"></a> 440                         toFocus.<a href="../D/31126.html" title="Multiple defined in 6 places.">requestFocusInWindow</a>(CausedFocusEvent.Cause.ACTIVATION);
<a id="L441" name="L441"></a> 441                     <em class="brace">}</em>
<a id="L442" name="L442"></a> 442                 <em class="brace">}</em>
<a id="L443" name="L443"></a> 443 
<a id="L444" name="L444"></a> 444                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> realOppositeWindow = <strong class="reserved">this</strong>.realOppositeWindowWR.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L445" name="L445"></a> 445                 <strong class="reserved">if</strong> (realOppositeWindow != we.<a href="../S/2398.html#L327" title="Defined at 327 in src/java/awt/event/WindowEvent.java.">getOppositeWindow</a>()) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446                     we = <strong class="reserved">new</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>(newFocusedWindow,
<a id="L447" name="L447"></a> 447                                          <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_GAINED_FOCUS,
<a id="L448" name="L448"></a> 448                                          realOppositeWindow);
<a id="L449" name="L449"></a> 449                 <em class="brace">}</em>
<a id="L450" name="L450"></a> 450                 <strong class="reserved">return</strong> <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(newFocusedWindow, we);
<a id="L451" name="L451"></a> 451             <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453             <strong class="reserved">case</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_ACTIVATED: <em class="brace">{</em>
<a id="L454" name="L454"></a> 454                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> we = (<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>)e;
<a id="L455" name="L455"></a> 455                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> oldActiveWindow = <a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>();
<a id="L456" name="L456"></a> 456                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> newActiveWindow = we.<a href="../D/23696.html" title="Multiple defined in 2 places.">getWindow</a>();
<a id="L457" name="L457"></a> 457                 <strong class="reserved">if</strong> (oldActiveWindow == newActiveWindow) <em class="brace">{</em>
<a id="L458" name="L458"></a> 458                     <strong class="reserved">break</strong>;
<a id="L459" name="L459"></a> 459                 <em class="brace">}</em>
<a id="L460" name="L460"></a> 460 
<a id="L461" name="L461"></a> 461                 <em class="comment">// If there exists a current active window, then notify it that</em>
<a id="L462" name="L462"></a> 462                 <em class="comment">// it has lost activation.</em>
<a id="L463" name="L463"></a> 463                 <strong class="reserved">if</strong> (oldActiveWindow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L464" name="L464"></a> 464                     <strong class="reserved">boolean</strong> isEventDispatched =
<a id="L465" name="L465"></a> 465                         <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(oldActiveWindow,
<a id="L466" name="L466"></a> 466                                 <strong class="reserved">new</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>(oldActiveWindow,
<a id="L467" name="L467"></a> 467                                                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_DEACTIVATED,
<a id="L468" name="L468"></a> 468                                                 newActiveWindow));
<a id="L469" name="L469"></a> 469                     <em class="comment">// Failed to dispatch, clear by ourselfves</em>
<a id="L470" name="L470"></a> 470                     <strong class="reserved">if</strong> (!isEventDispatched) <em class="brace">{</em>
<a id="L471" name="L471"></a> 471                         <a href="../S/2110.html#L957" title="Defined at 957 in src/java/awt/KeyboardFocusManager.java.">setGlobalActiveWindow</a>(<strong class="reserved">null</strong>);
<a id="L472" name="L472"></a> 472                     <em class="brace">}</em>
<a id="L473" name="L473"></a> 473                     <strong class="reserved">if</strong> (<a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L474" name="L474"></a> 474                         <em class="comment">// Activation change was rejected. Unlikely, but</em>
<a id="L475" name="L475"></a> 475                         <em class="comment">// possible.</em>
<a id="L476" name="L476"></a> 476                         <strong class="reserved">break</strong>;
<a id="L477" name="L477"></a> 477                     <em class="brace">}</em>
<a id="L478" name="L478"></a> 478                 <em class="brace">}</em>
<a id="L479" name="L479"></a> 479 
<a id="L480" name="L480"></a> 480                 <a href="../S/2110.html#L957" title="Defined at 957 in src/java/awt/KeyboardFocusManager.java.">setGlobalActiveWindow</a>(newActiveWindow);
<a id="L481" name="L481"></a> 481 
<a id="L482" name="L482"></a> 482                 <strong class="reserved">if</strong> (newActiveWindow != <a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>()) <em class="brace">{</em>
<a id="L483" name="L483"></a> 483                     <em class="comment">// Activation change was rejected. Unlikely, but</em>
<a id="L484" name="L484"></a> 484                     <em class="comment">// possible.</em>
<a id="L485" name="L485"></a> 485                     <strong class="reserved">break</strong>;
<a id="L486" name="L486"></a> 486                 <em class="brace">}</em>
<a id="L487" name="L487"></a> 487 
<a id="L488" name="L488"></a> 488                 <strong class="reserved">return</strong> <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(newActiveWindow, we);
<a id="L489" name="L489"></a> 489             <em class="brace">}</em>
<a id="L490" name="L490"></a> 490 
<a id="L491" name="L491"></a> 491             <strong class="reserved">case</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED: <em class="brace">{</em>
<a id="L492" name="L492"></a> 492                 <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe = (<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)e;
<a id="L493" name="L493"></a> 493                 CausedFocusEvent.Cause cause = (fe <strong class="reserved">instanceof</strong> CausedFocusEvent) ?
<a id="L494" name="L494"></a> 494                     ((CausedFocusEvent)fe).<a href="../D/17525.html" title="Multiple defined in 41 places.">getCause</a>() : CausedFocusEvent.Cause.<a href="../D/9240.html" title="Multiple defined in 3 places.">UNKNOWN</a>;
<a id="L495" name="L495"></a> 495                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> oldFocusOwner = <a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L496" name="L496"></a> 496                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> newFocusOwner = fe.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L497" name="L497"></a> 497                 <strong class="reserved">if</strong> (oldFocusOwner == newFocusOwner) <em class="brace">{</em>
<a id="L498" name="L498"></a> 498                     <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499                         focusLog.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Skipping {0} because focus owner is the same", e);
<a id="L500" name="L500"></a> 500                     <em class="brace">}</em>
<a id="L501" name="L501"></a> 501                     <em class="comment">// We can't just drop the event - there could be</em>
<a id="L502" name="L502"></a> 502                     <em class="comment">// type-ahead markers associated with it.</em>
<a id="L503" name="L503"></a> 503                     <a href="../D/14836.html" title="Multiple defined in 2 places.">dequeueKeyEvents</a>(-1, newFocusOwner);
<a id="L504" name="L504"></a> 504                     <strong class="reserved">break</strong>;
<a id="L505" name="L505"></a> 505                 <em class="brace">}</em>
<a id="L506" name="L506"></a> 506 
<a id="L507" name="L507"></a> 507                 <em class="comment">// If there exists a current focus owner, then notify it that</em>
<a id="L508" name="L508"></a> 508                 <em class="comment">// it has lost focus.</em>
<a id="L509" name="L509"></a> 509                 <strong class="reserved">if</strong> (oldFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L510" name="L510"></a> 510                     <strong class="reserved">boolean</strong> isEventDispatched =
<a id="L511" name="L511"></a> 511                         <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(oldFocusOwner,
<a id="L512" name="L512"></a> 512                                     <strong class="reserved">new</strong> CausedFocusEvent(oldFocusOwner,
<a id="L513" name="L513"></a> 513                                                    <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L514" name="L514"></a> 514                                                    fe.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>(),
<a id="L515" name="L515"></a> 515                                                    newFocusOwner, cause));
<a id="L516" name="L516"></a> 516                     <em class="comment">// Failed to dispatch, clear by ourselfves</em>
<a id="L517" name="L517"></a> 517                     <strong class="reserved">if</strong> (!isEventDispatched) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518                         <a href="../S/2110.html#L533" title="Defined at 533 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusOwner</a>(<strong class="reserved">null</strong>);
<a id="L519" name="L519"></a> 519                         <strong class="reserved">if</strong> (!fe.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>()) <em class="brace">{</em>
<a id="L520" name="L520"></a> 520                             <a href="../S/2110.html#L749" title="Defined at 749 in src/java/awt/KeyboardFocusManager.java.">setGlobalPermanentFocusOwner</a>(<strong class="reserved">null</strong>);
<a id="L521" name="L521"></a> 521                         <em class="brace">}</em>
<a id="L522" name="L522"></a> 522                     <em class="brace">}</em>
<a id="L523" name="L523"></a> 523                 <em class="brace">}</em>
<a id="L524" name="L524"></a> 524 
<a id="L525" name="L525"></a> 525                 <em class="comment">// Because the native windowing system has a different notion</em>
<a id="L526" name="L526"></a> 526                 <em class="comment">// of the current focus and activation states, it is possible</em>
<a id="L527" name="L527"></a> 527                 <em class="comment">// that a Component outside of the focused Window receives a</em>
<a id="L528" name="L528"></a> 528                 <em class="comment">// FOCUS_GAINED event. We synthesize a WINDOW_GAINED_FOCUS</em>
<a id="L529" name="L529"></a> 529                 <em class="comment">// event in that case.</em>
<a id="L530" name="L530"></a> 530                 <strong class="reserved">final</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> newFocusedWindow = SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(newFocusOwner);
<a id="L531" name="L531"></a> 531                 <strong class="reserved">final</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> currentFocusedWindow = <a href="../S/2110.html#L820" title="Defined at 820 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusedWindow</a>();
<a id="L532" name="L532"></a> 532                 <strong class="reserved">if</strong> (newFocusedWindow != <strong class="reserved">null</strong> &amp;&amp;
<a id="L533" name="L533"></a> 533                     newFocusedWindow != currentFocusedWindow)
<a id="L534" name="L534"></a> 534                 <em class="brace">{</em>
<a id="L535" name="L535"></a> 535                     <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(newFocusedWindow,
<a id="L536" name="L536"></a> 536                                 <strong class="reserved">new</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>(newFocusedWindow,
<a id="L537" name="L537"></a> 537                                         <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_GAINED_FOCUS,
<a id="L538" name="L538"></a> 538                                                 currentFocusedWindow));
<a id="L539" name="L539"></a> 539                     <strong class="reserved">if</strong> (newFocusedWindow != <a href="../S/2110.html#L820" title="Defined at 820 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusedWindow</a>()) <em class="brace">{</em>
<a id="L540" name="L540"></a> 540                         <em class="comment">// Focus change was rejected. Will happen if</em>
<a id="L541" name="L541"></a> 541                         <em class="comment">// newFocusedWindow is not a focusable Window.</em>
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543                         <em class="comment">// Need to recover type-ahead, but don't bother</em>
<a id="L544" name="L544"></a> 544                         <em class="comment">// restoring focus. That was done by the</em>
<a id="L545" name="L545"></a> 545                         <em class="comment">// WINDOW_GAINED_FOCUS handler</em>
<a id="L546" name="L546"></a> 546                         <a href="../D/14836.html" title="Multiple defined in 2 places.">dequeueKeyEvents</a>(-1, newFocusOwner);
<a id="L547" name="L547"></a> 547                         <strong class="reserved">break</strong>;
<a id="L548" name="L548"></a> 548                     <em class="brace">}</em>
<a id="L549" name="L549"></a> 549                 <em class="brace">}</em>
<a id="L550" name="L550"></a> 550 
<a id="L551" name="L551"></a> 551                 <strong class="reserved">if</strong> (!(newFocusOwner.<a href="../D/25590.html" title="Multiple defined in 2 places.">isFocusable</a>() &amp;&amp; newFocusOwner.<a href="../D/26239.html" title="Multiple defined in 14 places.">isShowing</a>() &amp;&amp;
<a id="L552" name="L552"></a> 552                     <em class="comment">// Refuse focus on a disabled component if the focus event</em>
<a id="L553" name="L553"></a> 553                     <em class="comment">// isn't of UNKNOWN reason (i.e. not a result of a direct request</em>
<a id="L554" name="L554"></a> 554                     <em class="comment">// but traversal, activation or system generated).</em>
<a id="L555" name="L555"></a> 555                     (newFocusOwner.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>() || cause.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(CausedFocusEvent.Cause.<a href="../D/9240.html" title="Multiple defined in 3 places.">UNKNOWN</a>))))
<a id="L556" name="L556"></a> 556                 <em class="brace">{</em>
<a id="L557" name="L557"></a> 557                     <em class="comment">// we should not accept focus on such component, so reject it.</em>
<a id="L558" name="L558"></a> 558                     <a href="../D/14836.html" title="Multiple defined in 2 places.">dequeueKeyEvents</a>(-1, newFocusOwner);
<a id="L559" name="L559"></a> 559                     <strong class="reserved">if</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2580" title="Defined at 2580 in src/java/awt/KeyboardFocusManager.java.">isAutoFocusTransferEnabled</a>()) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560                         <em class="comment">// If FOCUS_GAINED is for a disposed component (however</em>
<a id="L561" name="L561"></a> 561                         <em class="comment">// it shouldn't happen) its toplevel parent is null. In this</em>
<a id="L562" name="L562"></a> 562                         <em class="comment">// case we have to try to restore focus in the current focused</em>
<a id="L563" name="L563"></a> 563                         <em class="comment">// window (for the details: 6607170).</em>
<a id="L564" name="L564"></a> 564                         <strong class="reserved">if</strong> (newFocusedWindow == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L565" name="L565"></a> 565                             <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(fe, currentFocusedWindow);
<a id="L566" name="L566"></a> 566                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L567" name="L567"></a> 567                             <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(fe, newFocusedWindow);
<a id="L568" name="L568"></a> 568                         <em class="brace">}</em>
<a id="L569" name="L569"></a> 569                         <a href="../D/33292.html" title="Multiple defined in 2 places.">setMostRecentFocusOwner</a>(newFocusedWindow, <strong class="reserved">null</strong>); <em class="comment">// see: 8013773</em>
<a id="L570" name="L570"></a> 570                     <em class="brace">}</em>
<a id="L571" name="L571"></a> 571                     <strong class="reserved">break</strong>;
<a id="L572" name="L572"></a> 572                 <em class="brace">}</em>
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574                 <a href="../S/2110.html#L533" title="Defined at 533 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusOwner</a>(newFocusOwner);
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576                 <strong class="reserved">if</strong> (newFocusOwner != <a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>()) <em class="brace">{</em>
<a id="L577" name="L577"></a> 577                     <em class="comment">// Focus change was rejected. Will happen if</em>
<a id="L578" name="L578"></a> 578                     <em class="comment">// newFocusOwner is not focus traversable.</em>
<a id="L579" name="L579"></a> 579                     <a href="../D/14836.html" title="Multiple defined in 2 places.">dequeueKeyEvents</a>(-1, newFocusOwner);
<a id="L580" name="L580"></a> 580                     <strong class="reserved">if</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2580" title="Defined at 2580 in src/java/awt/KeyboardFocusManager.java.">isAutoFocusTransferEnabled</a>()) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581                         <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(fe, (<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)newFocusedWindow);
<a id="L582" name="L582"></a> 582                     <em class="brace">}</em>
<a id="L583" name="L583"></a> 583                     <strong class="reserved">break</strong>;
<a id="L584" name="L584"></a> 584                 <em class="brace">}</em>
<a id="L585" name="L585"></a> 585 
<a id="L586" name="L586"></a> 586                 <strong class="reserved">if</strong> (!fe.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>()) <em class="brace">{</em>
<a id="L587" name="L587"></a> 587                     <a href="../S/2110.html#L749" title="Defined at 749 in src/java/awt/KeyboardFocusManager.java.">setGlobalPermanentFocusOwner</a>(newFocusOwner);
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589                     <strong class="reserved">if</strong> (newFocusOwner != <a href="../S/2110.html#L711" title="Defined at 711 in src/java/awt/KeyboardFocusManager.java.">getGlobalPermanentFocusOwner</a>()) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590                         <em class="comment">// Focus change was rejected. Unlikely, but possible.</em>
<a id="L591" name="L591"></a> 591                         <a href="../D/14836.html" title="Multiple defined in 2 places.">dequeueKeyEvents</a>(-1, newFocusOwner);
<a id="L592" name="L592"></a> 592                         <strong class="reserved">if</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2580" title="Defined at 2580 in src/java/awt/KeyboardFocusManager.java.">isAutoFocusTransferEnabled</a>()) <em class="brace">{</em>
<a id="L593" name="L593"></a> 593                             <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(fe, (<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)newFocusedWindow);
<a id="L594" name="L594"></a> 594                         <em class="brace">}</em>
<a id="L595" name="L595"></a> 595                         <strong class="reserved">break</strong>;
<a id="L596" name="L596"></a> 596                     <em class="brace">}</em>
<a id="L597" name="L597"></a> 597                 <em class="brace">}</em>
<a id="L598" name="L598"></a> 598 
<a id="L599" name="L599"></a> 599                 <a href="../S/2110.html#L655" title="Defined at 655 in src/java/awt/KeyboardFocusManager.java.">setNativeFocusOwner</a>(<a href="../S/2110.html#L3053" title="Defined at 3053 in src/java/awt/KeyboardFocusManager.java.">getHeavyweight</a>(newFocusOwner));
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> realOppositeComponent = <strong class="reserved">this</strong>.realOppositeComponentWR.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L602" name="L602"></a> 602                 <strong class="reserved">if</strong> (realOppositeComponent != <strong class="reserved">null</strong> &amp;&amp;
<a id="L603" name="L603"></a> 603                     realOppositeComponent != fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>()) <em class="brace">{</em>
<a id="L604" name="L604"></a> 604                     fe = <strong class="reserved">new</strong> CausedFocusEvent(newFocusOwner,
<a id="L605" name="L605"></a> 605                                         <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED,
<a id="L606" name="L606"></a> 606                                         fe.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>(),
<a id="L607" name="L607"></a> 607                                         realOppositeComponent, cause);
<a id="L608" name="L608"></a> 608                     ((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>) fe).isPosted = <strong class="reserved">true</strong>;
<a id="L609" name="L609"></a> 609                 <em class="brace">}</em>
<a id="L610" name="L610"></a> 610                 <strong class="reserved">return</strong> <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(newFocusOwner, fe);
<a id="L611" name="L611"></a> 611             <em class="brace">}</em>
<a id="L612" name="L612"></a> 612 
<a id="L613" name="L613"></a> 613             <strong class="reserved">case</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST: <em class="brace">{</em>
<a id="L614" name="L614"></a> 614                 <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe = (<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)e;
<a id="L615" name="L615"></a> 615                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = <a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L616" name="L616"></a> 616                 <strong class="reserved">if</strong> (currentFocusOwner == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617                     <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE))
<a id="L618" name="L618"></a> 618                         focusLog.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Skipping {0} because focus owner is null", e);
<a id="L619" name="L619"></a> 619                     <strong class="reserved">break</strong>;
<a id="L620" name="L620"></a> 620                 <em class="brace">}</em>
<a id="L621" name="L621"></a> 621                 <em class="comment">// Ignore cases where a Component loses focus to itself.</em>
<a id="L622" name="L622"></a> 622                 <em class="comment">// If we make a mistake because of retargeting, then the</em>
<a id="L623" name="L623"></a> 623                 <em class="comment">// FOCUS_GAINED handler will correct it.</em>
<a id="L624" name="L624"></a> 624                 <strong class="reserved">if</strong> (currentFocusOwner == fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>()) <em class="brace">{</em>
<a id="L625" name="L625"></a> 625                     <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE))
<a id="L626" name="L626"></a> 626                         focusLog.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Skipping {0} because current focus owner is equal to opposite", e);
<a id="L627" name="L627"></a> 627                     <strong class="reserved">break</strong>;
<a id="L628" name="L628"></a> 628                 <em class="brace">}</em>
<a id="L629" name="L629"></a> 629 
<a id="L630" name="L630"></a> 630                 <a href="../S/2110.html#L533" title="Defined at 533 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusOwner</a>(<strong class="reserved">null</strong>);
<a id="L631" name="L631"></a> 631 
<a id="L632" name="L632"></a> 632                 <strong class="reserved">if</strong> (<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633                     <em class="comment">// Focus change was rejected. Unlikely, but possible.</em>
<a id="L634" name="L634"></a> 634                     <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(currentFocusOwner, <strong class="reserved">true</strong>);
<a id="L635" name="L635"></a> 635                     <strong class="reserved">break</strong>;
<a id="L636" name="L636"></a> 636                 <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638                 <strong class="reserved">if</strong> (!fe.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>()) <em class="brace">{</em>
<a id="L639" name="L639"></a> 639                     <a href="../S/2110.html#L749" title="Defined at 749 in src/java/awt/KeyboardFocusManager.java.">setGlobalPermanentFocusOwner</a>(<strong class="reserved">null</strong>);
<a id="L640" name="L640"></a> 640 
<a id="L641" name="L641"></a> 641                     <strong class="reserved">if</strong> (<a href="../S/2110.html#L711" title="Defined at 711 in src/java/awt/KeyboardFocusManager.java.">getGlobalPermanentFocusOwner</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L642" name="L642"></a> 642                         <em class="comment">// Focus change was rejected. Unlikely, but possible.</em>
<a id="L643" name="L643"></a> 643                         <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(currentFocusOwner, <strong class="reserved">true</strong>);
<a id="L644" name="L644"></a> 644                         <strong class="reserved">break</strong>;
<a id="L645" name="L645"></a> 645                     <em class="brace">}</em>
<a id="L646" name="L646"></a> 646                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L647" name="L647"></a> 647                     <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> owningWindow = currentFocusOwner.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>();
<a id="L648" name="L648"></a> 648                     <strong class="reserved">if</strong> (owningWindow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L649" name="L649"></a> 649                         owningWindow.<a href="../S/2106.html#L3380" title="Defined at 3380 in src/java/awt/Window.java.">setTemporaryLostComponent</a>(currentFocusOwner);
<a id="L650" name="L650"></a> 650                     <em class="brace">}</em>
<a id="L651" name="L651"></a> 651                 <em class="brace">}</em>
<a id="L652" name="L652"></a> 652 
<a id="L653" name="L653"></a> 653                 <a href="../S/2110.html#L655" title="Defined at 655 in src/java/awt/KeyboardFocusManager.java.">setNativeFocusOwner</a>(<strong class="reserved">null</strong>);
<a id="L654" name="L654"></a> 654 
<a id="L655" name="L655"></a> 655                 fe.<a href="../D/33956.html" title="Multiple defined in 9 places.">setSource</a>(currentFocusOwner);
<a id="L656" name="L656"></a> 656 
<a id="L657" name="L657"></a> 657                 realOppositeComponentWR = (fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>() != <strong class="reserved">null</strong>)
<a id="L658" name="L658"></a> 658                     ? <strong class="reserved">new</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt;(currentFocusOwner)
<a id="L659" name="L659"></a> 659                     : NULL_COMPONENT_WR;
<a id="L660" name="L660"></a> 660 
<a id="L661" name="L661"></a> 661                 <strong class="reserved">return</strong> <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(currentFocusOwner, fe);
<a id="L662" name="L662"></a> 662             <em class="brace">}</em>
<a id="L663" name="L663"></a> 663 
<a id="L664" name="L664"></a> 664             <strong class="reserved">case</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_DEACTIVATED: <em class="brace">{</em>
<a id="L665" name="L665"></a> 665                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> we = (<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>)e;
<a id="L666" name="L666"></a> 666                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> currentActiveWindow = <a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>();
<a id="L667" name="L667"></a> 667                 <strong class="reserved">if</strong> (currentActiveWindow == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L668" name="L668"></a> 668                     <strong class="reserved">break</strong>;
<a id="L669" name="L669"></a> 669                 <em class="brace">}</em>
<a id="L670" name="L670"></a> 670 
<a id="L671" name="L671"></a> 671                 <strong class="reserved">if</strong> (currentActiveWindow != e.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>()) <em class="brace">{</em>
<a id="L672" name="L672"></a> 672                     <em class="comment">// The event is lost in time.</em>
<a id="L673" name="L673"></a> 673                     <em class="comment">// Allow listeners to precess the event but do not</em>
<a id="L674" name="L674"></a> 674                     <em class="comment">// change any global states</em>
<a id="L675" name="L675"></a> 675                     <strong class="reserved">break</strong>;
<a id="L676" name="L676"></a> 676                 <em class="brace">}</em>
<a id="L677" name="L677"></a> 677 
<a id="L678" name="L678"></a> 678                 <a href="../S/2110.html#L957" title="Defined at 957 in src/java/awt/KeyboardFocusManager.java.">setGlobalActiveWindow</a>(<strong class="reserved">null</strong>);
<a id="L679" name="L679"></a> 679                 <strong class="reserved">if</strong> (<a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                     <em class="comment">// Activation change was rejected. Unlikely, but possible.</em>
<a id="L681" name="L681"></a> 681                     <strong class="reserved">break</strong>;
<a id="L682" name="L682"></a> 682                 <em class="brace">}</em>
<a id="L683" name="L683"></a> 683 
<a id="L684" name="L684"></a> 684                 we.<a href="../D/33956.html" title="Multiple defined in 9 places.">setSource</a>(currentActiveWindow);
<a id="L685" name="L685"></a> 685                 <strong class="reserved">return</strong> <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(currentActiveWindow, we);
<a id="L686" name="L686"></a> 686             <em class="brace">}</em>
<a id="L687" name="L687"></a> 687 
<a id="L688" name="L688"></a> 688             <strong class="reserved">case</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_LOST_FOCUS: <em class="brace">{</em>
<a id="L689" name="L689"></a> 689                 <strong class="reserved">if</strong> (<a href="../S/2359.html#L281" title="Defined at 281 in src/java/awt/DefaultKeyboardFocusManager.java.">repostIfFollowsKeyEvents</a>((<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>)e)) <em class="brace">{</em>
<a id="L690" name="L690"></a> 690                     <strong class="reserved">break</strong>;
<a id="L691" name="L691"></a> 691                 <em class="brace">}</em>
<a id="L692" name="L692"></a> 692 
<a id="L693" name="L693"></a> 693                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a> we = (<a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>)e;
<a id="L694" name="L694"></a> 694                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> currentFocusedWindow = <a href="../S/2110.html#L820" title="Defined at 820 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusedWindow</a>();
<a id="L695" name="L695"></a> 695                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> losingFocusWindow = we.<a href="../D/23696.html" title="Multiple defined in 2 places.">getWindow</a>();
<a id="L696" name="L696"></a> 696                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> activeWindow = <a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>();
<a id="L697" name="L697"></a> 697                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> oppositeWindow = we.<a href="../S/2398.html#L327" title="Defined at 327 in src/java/awt/event/WindowEvent.java.">getOppositeWindow</a>();
<a id="L698" name="L698"></a> 698                 <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE))
<a id="L699" name="L699"></a> 699                     focusLog.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Active {0}, Current focused {1}, losing focus {2} opposite {3}",
<a id="L700" name="L700"></a> 700                                   activeWindow, currentFocusedWindow,
<a id="L701" name="L701"></a> 701                                   losingFocusWindow, oppositeWindow);
<a id="L702" name="L702"></a> 702                 <strong class="reserved">if</strong> (currentFocusedWindow == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703                     <strong class="reserved">break</strong>;
<a id="L704" name="L704"></a> 704                 <em class="brace">}</em>
<a id="L705" name="L705"></a> 705 
<a id="L706" name="L706"></a> 706                 <em class="comment">// Special case -- if the native windowing system posts an</em>
<a id="L707" name="L707"></a> 707                 <em class="comment">// event claiming that the active Window has lost focus to the</em>
<a id="L708" name="L708"></a> 708                 <em class="comment">// focused Window, then discard the event. This is an artifact</em>
<a id="L709" name="L709"></a> 709                 <em class="comment">// of the native windowing system not knowing which Window is</em>
<a id="L710" name="L710"></a> 710                 <em class="comment">// really focused.</em>
<a id="L711" name="L711"></a> 711                 <strong class="reserved">if</strong> (inSendMessage == 0 &amp;&amp; losingFocusWindow == activeWindow &amp;&amp;
<a id="L712" name="L712"></a> 712                     oppositeWindow == currentFocusedWindow)
<a id="L713" name="L713"></a> 713                 <em class="brace">{</em>
<a id="L714" name="L714"></a> 714                     <strong class="reserved">break</strong>;
<a id="L715" name="L715"></a> 715                 <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<a id="L717" name="L717"></a> 717                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = <a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L718" name="L718"></a> 718                 <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L719" name="L719"></a> 719                     <em class="comment">// The focus owner should always receive a FOCUS_LOST event</em>
<a id="L720" name="L720"></a> 720                     <em class="comment">// before the Window is defocused.</em>
<a id="L721" name="L721"></a> 721                     <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> oppositeComp = <strong class="reserved">null</strong>;
<a id="L722" name="L722"></a> 722                     <strong class="reserved">if</strong> (oppositeWindow != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L723" name="L723"></a> 723                         oppositeComp = oppositeWindow.<a href="../S/2106.html#L3377" title="Defined at 3377 in src/java/awt/Window.java.">getTemporaryLostComponent</a>();
<a id="L724" name="L724"></a> 724                         <strong class="reserved">if</strong> (oppositeComp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L725" name="L725"></a> 725                             oppositeComp = oppositeWindow.<a href="../D/20738.html" title="Multiple defined in 3 places.">getMostRecentFocusOwner</a>();
<a id="L726" name="L726"></a> 726                         <em class="brace">}</em>
<a id="L727" name="L727"></a> 727                     <em class="brace">}</em>
<a id="L728" name="L728"></a> 728                     <strong class="reserved">if</strong> (oppositeComp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L729" name="L729"></a> 729                         oppositeComp = oppositeWindow;
<a id="L730" name="L730"></a> 730                     <em class="brace">}</em>
<a id="L731" name="L731"></a> 731                     <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(currentFocusOwner,
<a id="L732" name="L732"></a> 732                                 <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner,
<a id="L733" name="L733"></a> 733                                                <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L734" name="L734"></a> 734                                                <strong class="reserved">true</strong>,
<a id="L735" name="L735"></a> 735                                                oppositeComp, CausedFocusEvent.Cause.ACTIVATION));
<a id="L736" name="L736"></a> 736                 <em class="brace">}</em>
<a id="L737" name="L737"></a> 737 
<a id="L738" name="L738"></a> 738                 <a href="../S/2110.html#L852" title="Defined at 852 in src/java/awt/KeyboardFocusManager.java.">setGlobalFocusedWindow</a>(<strong class="reserved">null</strong>);
<a id="L739" name="L739"></a> 739                 <strong class="reserved">if</strong> (<a href="../S/2110.html#L820" title="Defined at 820 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusedWindow</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L740" name="L740"></a> 740                     <em class="comment">// Focus change was rejected. Unlikely, but possible.</em>
<a id="L741" name="L741"></a> 741                     <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(currentFocusedWindow, <strong class="reserved">null</strong>, <strong class="reserved">true</strong>);
<a id="L742" name="L742"></a> 742                     <strong class="reserved">break</strong>;
<a id="L743" name="L743"></a> 743                 <em class="brace">}</em>
<a id="L744" name="L744"></a> 744 
<a id="L745" name="L745"></a> 745                 we.<a href="../D/33956.html" title="Multiple defined in 9 places.">setSource</a>(currentFocusedWindow);
<a id="L746" name="L746"></a> 746                 realOppositeWindowWR = (oppositeWindow != <strong class="reserved">null</strong>)
<a id="L747" name="L747"></a> 747                     ? <strong class="reserved">new</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>&gt;(currentFocusedWindow)
<a id="L748" name="L748"></a> 748                     : NULL_WINDOW_WR;
<a id="L749" name="L749"></a> 749                 <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(currentFocusedWindow, we);
<a id="L750" name="L750"></a> 750 
<a id="L751" name="L751"></a> 751                 <strong class="reserved">if</strong> (oppositeWindow == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L752" name="L752"></a> 752                     <em class="comment">// Then we need to deactive the active Window as well.</em>
<a id="L753" name="L753"></a> 753                     <em class="comment">// No need to synthesize in other cases, because</em>
<a id="L754" name="L754"></a> 754                     <em class="comment">// WINDOW_ACTIVATED will handle it if necessary.</em>
<a id="L755" name="L755"></a> 755                     <a href="../D/31738.html" title="Multiple defined in 5 places.">sendMessage</a>(activeWindow,
<a id="L756" name="L756"></a> 756                                 <strong class="reserved">new</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>(activeWindow,
<a id="L757" name="L757"></a> 757                                                 <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>.WINDOW_DEACTIVATED,
<a id="L758" name="L758"></a> 758                                                 <strong class="reserved">null</strong>));
<a id="L759" name="L759"></a> 759                     <strong class="reserved">if</strong> (<a href="../S/2110.html#L924" title="Defined at 924 in src/java/awt/KeyboardFocusManager.java.">getGlobalActiveWindow</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L760" name="L760"></a> 760                         <em class="comment">// Activation change was rejected. Unlikely,</em>
<a id="L761" name="L761"></a> 761                         <em class="comment">// but possible.</em>
<a id="L762" name="L762"></a> 762                         <a href="../D/31349.html" title="Multiple defined in 4 places.">restoreFocus</a>(currentFocusedWindow, <strong class="reserved">null</strong>, <strong class="reserved">true</strong>);
<a id="L763" name="L763"></a> 763                     <em class="brace">}</em>
<a id="L764" name="L764"></a> 764                 <em class="brace">}</em>
<a id="L765" name="L765"></a> 765                 <strong class="reserved">break</strong>;
<a id="L766" name="L766"></a> 766             <em class="brace">}</em>
<a id="L767" name="L767"></a> 767 
<a id="L768" name="L768"></a> 768             <strong class="reserved">case</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_TYPED:
<a id="L769" name="L769"></a> 769             <strong class="reserved">case</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_PRESSED:
<a id="L770" name="L770"></a> 770             <strong class="reserved">case</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_RELEASED:
<a id="L771" name="L771"></a> 771                 <strong class="reserved">return</strong> <a href="../S/2359.html#L915" title="Defined at 915 in src/java/awt/DefaultKeyboardFocusManager.java.">typeAheadAssertions</a>(<strong class="reserved">null</strong>, e);
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773             <strong class="reserved">default</strong>:
<a id="L774" name="L774"></a> 774                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L775" name="L775"></a> 775         <em class="brace">}</em>
<a id="L776" name="L776"></a> 776 
<a id="L777" name="L777"></a> 777         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L778" name="L778"></a> 778     <em class="brace">}</em>
<a id="L779" name="L779"></a> 779 
<div class="comment">
      Called by <code>dispatchEvent</code> if no other
      KeyEventDispatcher in the dispatcher chain dispatched the KeyEvent, or
      if no other KeyEventDispatchers are registered. If the event has not
      been consumed, its target is enabled, and the focus owner is not null,
      this method dispatches the event to its target. This method will also
      subsequently dispatch the event to all registered
      KeyEventPostProcessors. After all this operations are finished,
      the event is passed to peers for processing.
      <p>
      In all cases, this method returns <code>true</code>, since
      DefaultKeyboardFocusManager is designed so that neither
      <code>dispatchEvent</code>, nor the AWT event dispatcher, should take
      further action on the event in any situation.
      @param e the KeyEvent to be dispatched
      @return <code>true</code>
      @see Component#dispatchEvent</p></div>
<a id="L799" name="L799"></a> 799     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13324.html" title="Multiple referred from 3 places.">dispatchKeyEvent</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L800" name="L800"></a> 800         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner = (((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>)e).isPosted) ? <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>() : e.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L801" name="L801"></a> 801 
<a id="L802" name="L802"></a> 802         <strong class="reserved">if</strong> (focusOwner != <strong class="reserved">null</strong> &amp;&amp; focusOwner.<a href="../D/26239.html" title="Multiple defined in 14 places.">isShowing</a>() &amp;&amp; focusOwner.<a href="../S/2177.html#L8937" title="Defined at 8937 in src/java/awt/Component.java.">canBeFocusOwner</a>()) <em class="brace">{</em>
<a id="L803" name="L803"></a> 803             <strong class="reserved">if</strong> (!e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>()) <em class="brace">{</em>
<a id="L804" name="L804"></a> 804                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp = e.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L805" name="L805"></a> 805                 <strong class="reserved">if</strong> (comp != <strong class="reserved">null</strong> &amp;&amp; comp.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>()) <em class="brace">{</em>
<a id="L806" name="L806"></a> 806                     <a href="../S/2110.html#L1952" title="Defined at 1952 in src/java/awt/KeyboardFocusManager.java.">redispatchEvent</a>(comp, e);
<a id="L807" name="L807"></a> 807                 <em class="brace">}</em>
<a id="L808" name="L808"></a> 808             <em class="brace">}</em>
<a id="L809" name="L809"></a> 809         <em class="brace">}</em>
<a id="L810" name="L810"></a> 810         <strong class="reserved">boolean</strong> stopPostProcessing = <strong class="reserved">false</strong>;
<a id="L811" name="L811"></a> 811         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a>&gt; processors = <a href="../S/2110.html#L1845" title="Defined at 1845 in src/java/awt/KeyboardFocusManager.java.">getKeyEventPostProcessors</a>();
<a id="L812" name="L812"></a> 812         <strong class="reserved">if</strong> (processors != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L813" name="L813"></a> 813             <strong class="reserved">for</strong> (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = processors.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L814" name="L814"></a> 814                  !stopPostProcessing &amp;&amp; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); )
<a id="L815" name="L815"></a> 815             <em class="brace">{</em>
<a id="L816" name="L816"></a> 816                 stopPostProcessing = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().
<a id="L817" name="L817"></a> 817                             <a href="../D/29490.html" title="Multiple defined in 7 places.">postProcessKeyEvent</a>(e);
<a id="L818" name="L818"></a> 818             <em class="brace">}</em>
<a id="L819" name="L819"></a> 819         <em class="brace">}</em>
<a id="L820" name="L820"></a> 820         <strong class="reserved">if</strong> (!stopPostProcessing) <em class="brace">{</em>
<a id="L821" name="L821"></a> 821             <a href="../D/29490.html" title="Multiple defined in 7 places.">postProcessKeyEvent</a>(e);
<a id="L822" name="L822"></a> 822         <em class="brace">}</em>
<a id="L823" name="L823"></a> 823 
<a id="L824" name="L824"></a> 824         <em class="comment">// Allow the peer to process KeyEvent</em>
<a id="L825" name="L825"></a> 825         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = e.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L826" name="L826"></a> 826         <a href="../S/2204.html#L52" title="Defined at 52 in src/java/awt/peer/ComponentPeer.java.">ComponentPeer</a> peer = <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/21465.html" title="Multiple defined in 3 places.">getPeer</a>();
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828         <strong class="reserved">if</strong> (peer == <strong class="reserved">null</strong> || peer <strong class="reserved">instanceof</strong> <a href="../S/2206.html#L42" title="Defined at 42 in src/java/awt/peer/LightweightPeer.java.">LightweightPeer</a>) <em class="brace">{</em>
<a id="L829" name="L829"></a> 829             <em class="comment">// if focus owner is lightweight then its native container</em>
<a id="L830" name="L830"></a> 830             <em class="comment">// processes event</em>
<a id="L831" name="L831"></a> 831             <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> = <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/20835.html" title="Multiple defined in 2 places.">getNativeContainer</a>();
<a id="L832" name="L832"></a> 832             <strong class="reserved">if</strong> (<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L833" name="L833"></a> 833                 peer = <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.<a href="../D/21465.html" title="Multiple defined in 3 places.">getPeer</a>();
<a id="L834" name="L834"></a> 834             <em class="brace">}</em>
<a id="L835" name="L835"></a> 835         <em class="brace">}</em>
<a id="L836" name="L836"></a> 836         <strong class="reserved">if</strong> (peer != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837             peer.<a href="../D/23977.html" title="Multiple defined in 10 places.">handleEvent</a>(e);
<a id="L838" name="L838"></a> 838         <em class="brace">}</em>
<a id="L839" name="L839"></a> 839 
<a id="L840" name="L840"></a> 840         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L841" name="L841"></a> 841     <em class="brace">}</em>
<a id="L842" name="L842"></a> 842 
<div class="comment">
      This method will be called by <code>dispatchKeyEvent</code>. It will
      handle any unconsumed KeyEvents that map to an AWT
      <code>MenuShortcut</code> by consuming the event and activating the
      shortcut.
      @param e the KeyEvent to post-process
      @return <code>true</code>
      @see #dispatchKeyEvent
      @see MenuShortcut</div>
<a id="L854" name="L854"></a> 854     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/24863.html" title="Multiple referred from 6 places.">postProcessKeyEvent</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L855" name="L855"></a> 855         <strong class="reserved">if</strong> (!e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>()) <em class="brace">{</em>
<a id="L856" name="L856"></a> 856             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> = e.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L857" name="L857"></a> 857             <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> p = (<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>)
<a id="L858" name="L858"></a> 858                 (<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> <strong class="reserved">instanceof</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> ? <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> : <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>());
<a id="L859" name="L859"></a> 859             <strong class="reserved">if</strong> (p != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L860" name="L860"></a> 860                 p.<a href="../D/29490.html" title="Multiple defined in 7 places.">postProcessKeyEvent</a>(e);
<a id="L861" name="L861"></a> 861             <em class="brace">}</em>
<a id="L862" name="L862"></a> 862         <em class="brace">}</em>
<a id="L863" name="L863"></a> 863         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L864" name="L864"></a> 864     <em class="brace">}</em>
<a id="L865" name="L865"></a> 865 
<a id="L866" name="L866"></a> 866     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25245.html" title="Multiple referred from 2 places.">pumpApprovedKeyEvents</a>() <em class="brace">{</em>
<a id="L867" name="L867"></a> 867         <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> ke;
<a id="L868" name="L868"></a> 868         <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L869" name="L869"></a> 869             ke = <strong class="reserved">null</strong>;
<a id="L870" name="L870"></a> 870             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L871" name="L871"></a> 871                 <strong class="reserved">if</strong> (enqueuedKeyEvents.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L872" name="L872"></a> 872                     ke = enqueuedKeyEvents.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L873" name="L873"></a> 873                     <strong class="reserved">if</strong> (typeAheadMarkers.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L874" name="L874"></a> 874                         <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker = typeAheadMarkers.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L875" name="L875"></a> 875                         <em class="comment">// Fixed 5064013: may appears that the events have the same time</em>
<a id="L876" name="L876"></a> 876                         <em class="comment">// if (ke.getWhen() &gt;= marker.after) {</em>
<a id="L877" name="L877"></a> 877                         <em class="comment">// The fix is rolled out.</em>
<a id="L878" name="L878"></a> 878 
<a id="L879" name="L879"></a> 879                         <strong class="reserved">if</strong> (ke.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>() &gt; marker.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>) <em class="brace">{</em>
<a id="L880" name="L880"></a> 880                             ke = <strong class="reserved">null</strong>;
<a id="L881" name="L881"></a> 881                         <em class="brace">}</em>
<a id="L882" name="L882"></a> 882                     <em class="brace">}</em>
<a id="L883" name="L883"></a> 883                     <strong class="reserved">if</strong> (ke != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L884" name="L884"></a> 884                         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L885" name="L885"></a> 885                             focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("Pumping approved event {0}", ke);
<a id="L886" name="L886"></a> 886                         <em class="brace">}</em>
<a id="L887" name="L887"></a> 887                         enqueuedKeyEvents.<a href="../D/30795.html" title="Multiple defined in 5 places.">removeFirst</a>();
<a id="L888" name="L888"></a> 888                     <em class="brace">}</em>
<a id="L889" name="L889"></a> 889                 <em class="brace">}</em>
<a id="L890" name="L890"></a> 890             <em class="brace">}</em>
<a id="L891" name="L891"></a> 891             <strong class="reserved">if</strong> (ke != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L892" name="L892"></a> 892                 <a href="../S/2359.html#L1024" title="Defined at 1024 in src/java/awt/DefaultKeyboardFocusManager.java.">preDispatchKeyEvent</a>(ke);
<a id="L893" name="L893"></a> 893             <em class="brace">}</em>
<a id="L894" name="L894"></a> 894         <em class="brace">}</em> <strong class="reserved">while</strong> (ke != <strong class="reserved">null</strong>);
<a id="L895" name="L895"></a> 895     <em class="brace">}</em>
<a id="L896" name="L896"></a> 896 
<div class="comment">
      Dumps the list of type-ahead queue markers to stderr</div>
<a id="L900" name="L900"></a> 900     <strong class="reserved">void</strong> <a href="../R/13600.html" title="Multiple referred from 2 places.">dumpMarkers</a>() <em class="brace">{</em>
<a id="L901" name="L901"></a> 901         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L902" name="L902"></a> 902             focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("&gt;&gt;&gt; Markers dump, time: {0}", <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L353" title="Defined at 353 in src/java/lang/System.java.">currentTimeMillis</a>());
<a id="L903" name="L903"></a> 903             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L904" name="L904"></a> 904                 <strong class="reserved">if</strong> (typeAheadMarkers.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L905" name="L905"></a> 905                     <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = typeAheadMarkers.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L906" name="L906"></a> 906                     <strong class="reserved">while</strong> (<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L907" name="L907"></a> 907                         <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L908" name="L908"></a> 908                         focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("    {0}", marker);
<a id="L909" name="L909"></a> 909                     <em class="brace">}</em>
<a id="L910" name="L910"></a> 910                 <em class="brace">}</em>
<a id="L911" name="L911"></a> 911             <em class="brace">}</em>
<a id="L912" name="L912"></a> 912         <em class="brace">}</em>
<a id="L913" name="L913"></a> 913     <em class="brace">}</em>
<a id="L914" name="L914"></a> 914 
<a id="L915" name="L915"></a> 915     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/29571.html" title="Multiple referred from 7 places.">typeAheadAssertions</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> e) <em class="brace">{</em>
<a id="L916" name="L916"></a> 916 
<a id="L917" name="L917"></a> 917         <em class="comment">// Clear any pending events here as well as in the FOCUS_GAINED</em>
<a id="L918" name="L918"></a> 918         <em class="comment">// handler. We need this call here in case a marker was removed in</em>
<a id="L919" name="L919"></a> 919         <em class="comment">// response to a call to dequeueKeyEvents.</em>
<a id="L920" name="L920"></a> 920         <a href="../S/2359.html#L866" title="Defined at 866 in src/java/awt/DefaultKeyboardFocusManager.java.">pumpApprovedKeyEvents</a>();
<a id="L921" name="L921"></a> 921 
<a id="L922" name="L922"></a> 922         <strong class="reserved">switch</strong> (e.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>()) <em class="brace">{</em>
<a id="L923" name="L923"></a> 923             <strong class="reserved">case</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_TYPED:
<a id="L924" name="L924"></a> 924             <strong class="reserved">case</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_PRESSED:
<a id="L925" name="L925"></a> 925             <strong class="reserved">case</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_RELEASED: <em class="brace">{</em>
<a id="L926" name="L926"></a> 926                 <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> ke = (<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>)e;
<a id="L927" name="L927"></a> 927                 <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928                     <strong class="reserved">if</strong> (e.isPosted &amp;&amp; typeAheadMarkers.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != 0) <em class="brace">{</em>
<a id="L929" name="L929"></a> 929                         <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker = typeAheadMarkers.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L930" name="L930"></a> 930                         <em class="comment">// Fixed 5064013: may appears that the events have the same time</em>
<a id="L931" name="L931"></a> 931                         <em class="comment">// if (ke.getWhen() &gt;= marker.after) {</em>
<a id="L932" name="L932"></a> 932                         <em class="comment">// The fix is rolled out.</em>
<a id="L933" name="L933"></a> 933 
<a id="L934" name="L934"></a> 934                         <strong class="reserved">if</strong> (ke.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>() &gt; marker.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>) <em class="brace">{</em>
<a id="L935" name="L935"></a> 935                             <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L936" name="L936"></a> 936                                 focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("Storing event {0} because of marker {1}", ke, marker);
<a id="L937" name="L937"></a> 937                             <em class="brace">}</em>
<a id="L938" name="L938"></a> 938                             enqueuedKeyEvents.<a href="../D/10901.html" title="Multiple defined in 6 places.">addLast</a>(ke);
<a id="L939" name="L939"></a> 939                             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L940" name="L940"></a> 940                         <em class="brace">}</em>
<a id="L941" name="L941"></a> 941                     <em class="brace">}</em>
<a id="L942" name="L942"></a> 942                 <em class="brace">}</em>
<a id="L943" name="L943"></a> 943 
<a id="L944" name="L944"></a> 944                 <em class="comment">// KeyEvent was posted before focus change request</em>
<a id="L945" name="L945"></a> 945                 <strong class="reserved">return</strong> <a href="../S/2359.html#L1024" title="Defined at 1024 in src/java/awt/DefaultKeyboardFocusManager.java.">preDispatchKeyEvent</a>(ke);
<a id="L946" name="L946"></a> 946             <em class="brace">}</em>
<a id="L947" name="L947"></a> 947 
<a id="L948" name="L948"></a> 948             <strong class="reserved">case</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED:
<a id="L949" name="L949"></a> 949                 <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L950" name="L950"></a> 950                     focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("Markers before FOCUS_GAINED on {0}", <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>);
<a id="L951" name="L951"></a> 951                 <em class="brace">}</em>
<a id="L952" name="L952"></a> 952                 <a href="../S/2359.html#L900" title="Defined at 900 in src/java/awt/DefaultKeyboardFocusManager.java.">dumpMarkers</a>();
<a id="L953" name="L953"></a> 953                 <em class="comment">// Search the marker list for the first marker tied to</em>
<a id="L954" name="L954"></a> 954                 <em class="comment">// the Component which just gained focus. Then remove</em>
<a id="L955" name="L955"></a> 955                 <em class="comment">// that marker, any markers which immediately follow</em>
<a id="L956" name="L956"></a> 956                 <em class="comment">// and are tied to the same component, and all markers</em>
<a id="L957" name="L957"></a> 957                 <em class="comment">// that preceed it. This handles the case where</em>
<a id="L958" name="L958"></a> 958                 <em class="comment">// multiple focus requests were made for the same</em>
<a id="L959" name="L959"></a> 959                 <em class="comment">// Component in a row and when we lost some of the</em>
<a id="L960" name="L960"></a> 960                 <em class="comment">// earlier requests. Since FOCUS_GAINED events will</em>
<a id="L961" name="L961"></a> 961                 <em class="comment">// not be generated for these additional requests, we</em>
<a id="L962" name="L962"></a> 962                 <em class="comment">// need to clear those markers too.</em>
<a id="L963" name="L963"></a> 963                 <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964                     <strong class="reserved">boolean</strong> found = <strong class="reserved">false</strong>;
<a id="L965" name="L965"></a> 965                     <strong class="reserved">if</strong> (<a href="../S/2359.html#L1005" title="Defined at 1005 in src/java/awt/DefaultKeyboardFocusManager.java.">hasMarker</a>(<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>)) <em class="brace">{</em>
<a id="L966" name="L966"></a> 966                         <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = typeAheadMarkers.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L967" name="L967"></a> 967                              <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); )
<a id="L968" name="L968"></a> 968                         <em class="brace">{</em>
<a id="L969" name="L969"></a> 969                             <strong class="reserved">if</strong> (<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().untilFocused == <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>) <em class="brace">{</em>
<a id="L970" name="L970"></a> 970                                 found = <strong class="reserved">true</strong>;
<a id="L971" name="L971"></a> 971                             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (found) <em class="brace">{</em>
<a id="L972" name="L972"></a> 972                                 <strong class="reserved">break</strong>;
<a id="L973" name="L973"></a> 973                             <em class="brace">}</em>
<a id="L974" name="L974"></a> 974                             <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L975" name="L975"></a> 975                         <em class="brace">}</em>
<a id="L976" name="L976"></a> 976                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L977" name="L977"></a> 977                         <em class="comment">// Exception condition - event without marker</em>
<a id="L978" name="L978"></a> 978                         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L979" name="L979"></a> 979                             focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("Event without marker {0}", e);
<a id="L980" name="L980"></a> 980                         <em class="brace">}</em>
<a id="L981" name="L981"></a> 981                     <em class="brace">}</em>
<a id="L982" name="L982"></a> 982                 <em class="brace">}</em>
<a id="L983" name="L983"></a> 983                 focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("Markers after FOCUS_GAINED");
<a id="L984" name="L984"></a> 984                 <a href="../S/2359.html#L900" title="Defined at 900 in src/java/awt/DefaultKeyboardFocusManager.java.">dumpMarkers</a>();
<a id="L985" name="L985"></a> 985 
<a id="L986" name="L986"></a> 986                 <a href="../S/2110.html#L1952" title="Defined at 1952 in src/java/awt/KeyboardFocusManager.java.">redispatchEvent</a>(<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, e);
<a id="L987" name="L987"></a> 987 
<a id="L988" name="L988"></a> 988                 <em class="comment">// Now, dispatch any pending KeyEvents which have been</em>
<a id="L989" name="L989"></a> 989                 <em class="comment">// released because of the FOCUS_GAINED event so that we don't</em>
<a id="L990" name="L990"></a> 990                 <em class="comment">// have to wait for another event to be posted to the queue.</em>
<a id="L991" name="L991"></a> 991                 <a href="../S/2359.html#L866" title="Defined at 866 in src/java/awt/DefaultKeyboardFocusManager.java.">pumpApprovedKeyEvents</a>();
<a id="L992" name="L992"></a> 992                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L993" name="L993"></a> 993 
<a id="L994" name="L994"></a> 994             <strong class="reserved">default</strong>:
<a id="L995" name="L995"></a> 995                 <a href="../S/2110.html#L1952" title="Defined at 1952 in src/java/awt/KeyboardFocusManager.java.">redispatchEvent</a>(<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, e);
<a id="L996" name="L996"></a> 996                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L997" name="L997"></a> 997         <em class="brace">}</em>
<a id="L998" name="L998"></a> 998     <em class="brace">}</em>
<a id="L999" name="L999"></a> 999 
<div class="comment">
      Returns true if there are some marker associated with component <code>comp</code>
      in a markers' queue
      @since 1.5</div>
<a id="L1005" name="L1005"></a>1005     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/2359.html#L965" title="Referred from 965 in src/java/awt/DefaultKeyboardFocusManager.java.">hasMarker</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp) <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006         <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = typeAheadMarkers.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); ) <em class="brace">{</em>
<a id="L1007" name="L1007"></a>1007             <strong class="reserved">if</strong> (<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().untilFocused == comp) <em class="brace">{</em>
<a id="L1008" name="L1008"></a>1008                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1009" name="L1009"></a>1009             <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010         <em class="brace">}</em>
<a id="L1011" name="L1011"></a>1011         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1012" name="L1012"></a>1012     <em class="brace">}</em>
<a id="L1013" name="L1013"></a>1013 
<div class="comment">
      Clears markers queue
      @since 1.5</div>
<a id="L1018" name="L1018"></a>1018     <strong class="reserved">void</strong> <a href="../R/11523.html" title="Multiple referred from 2 places.">clearMarkers</a>() <em class="brace">{</em>
<a id="L1019" name="L1019"></a>1019         <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1020" name="L1020"></a>1020             typeAheadMarkers.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1021" name="L1021"></a>1021         <em class="brace">}</em>
<a id="L1022" name="L1022"></a>1022     <em class="brace">}</em>
<a id="L1023" name="L1023"></a>1023 
<a id="L1024" name="L1024"></a>1024     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/24889.html" title="Multiple referred from 2 places.">preDispatchKeyEvent</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> ke) <em class="brace">{</em>
<a id="L1025" name="L1025"></a>1025         <strong class="reserved">if</strong> (((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>) ke).isPosted) <em class="brace">{</em>
<a id="L1026" name="L1026"></a>1026             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner = <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>();
<a id="L1027" name="L1027"></a>1027             ke.<a href="../D/33956.html" title="Multiple defined in 9 places.">setSource</a>(((focusOwner != <strong class="reserved">null</strong>) ? focusOwner : <a href="../D/19175.html" title="Multiple defined in 2 places.">getFocusedWindow</a>()));
<a id="L1028" name="L1028"></a>1028         <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029         <strong class="reserved">if</strong> (ke.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1030" name="L1030"></a>1030             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1031" name="L1031"></a>1031         <em class="brace">}</em>
<a id="L1032" name="L1032"></a>1032 
<a id="L1033" name="L1033"></a>1033         <em class="comment">// Explicitly set the key event timestamp here (not in Component.dispatchEventImpl):</em>
<a id="L1034" name="L1034"></a>1034         <em class="comment">// - A key event is anyway passed to this method which starts its actual dispatching.</em>
<a id="L1035" name="L1035"></a>1035         <em class="comment">// - If a key event is put to the type ahead queue, its time stamp should not be registered</em>
<a id="L1036" name="L1036"></a>1036         <em class="comment">//   until its dispatching actually starts (by this method).</em>
<a id="L1037" name="L1037"></a>1037         <a href="../S/2178.html#L97" title="Defined at 97 in src/java/awt/EventQueue.java.">EventQueue</a>.<a href="../S/2178.html#L1204" title="Defined at 1204 in src/java/awt/EventQueue.java.">setCurrentEventAndMostRecentTime</a>(ke);
<a id="L1038" name="L1038"></a>1038 
<div class="comment">
          Fix for 4495473.
          This fix allows to correctly dispatch events when native
          event proxying mechanism is active.
          If it is active we should redispatch key events after
          we detected its correct target.</div>
<a id="L1046" name="L1046"></a>1046         <strong class="reserved">if</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L3092" title="Defined at 3092 in src/java/awt/KeyboardFocusManager.java.">isProxyActive</a>(ke)) <em class="brace">{</em>
<a id="L1047" name="L1047"></a>1047             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = (<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>)ke.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>();
<a id="L1048" name="L1048"></a>1048             <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> = <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/20835.html" title="Multiple defined in 2 places.">getNativeContainer</a>();
<a id="L1049" name="L1049"></a>1049             <strong class="reserved">if</strong> (<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1050" name="L1050"></a>1050                 <a href="../S/2204.html#L52" title="Defined at 52 in src/java/awt/peer/ComponentPeer.java.">ComponentPeer</a> peer = <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.<a href="../D/21465.html" title="Multiple defined in 3 places.">getPeer</a>();
<a id="L1051" name="L1051"></a>1051                 <strong class="reserved">if</strong> (peer != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1052" name="L1052"></a>1052                     peer.<a href="../D/23977.html" title="Multiple defined in 10 places.">handleEvent</a>(ke);
<div class="comment">
                      Fix for 4478780 - consume event after it was dispatched by peer.</div>
<a id="L1056" name="L1056"></a>1056                     ke.<a href="../D/13298.html" title="Multiple defined in 4 places.">consume</a>();
<a id="L1057" name="L1057"></a>1057                 <em class="brace">}</em>
<a id="L1058" name="L1058"></a>1058             <em class="brace">}</em>
<a id="L1059" name="L1059"></a>1059             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1060" name="L1060"></a>1060         <em class="brace">}</em>
<a id="L1061" name="L1061"></a>1061 
<a id="L1062" name="L1062"></a>1062         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a>&gt; dispatchers = <a href="../S/2110.html#L1754" title="Defined at 1754 in src/java/awt/KeyboardFocusManager.java.">getKeyEventDispatchers</a>();
<a id="L1063" name="L1063"></a>1063         <strong class="reserved">if</strong> (dispatchers != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1064" name="L1064"></a>1064             <strong class="reserved">for</strong> (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = dispatchers.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L1065" name="L1065"></a>1065                  <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); )
<a id="L1066" name="L1066"></a>1066              <em class="brace">{</em>
<a id="L1067" name="L1067"></a>1067                  <strong class="reserved">if</strong> (<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().
<a id="L1068" name="L1068"></a>1068                      <a href="../D/14956.html" title="Multiple defined in 4 places.">dispatchKeyEvent</a>(ke))
<a id="L1069" name="L1069"></a>1069                  <em class="brace">{</em>
<a id="L1070" name="L1070"></a>1070                      <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1071" name="L1071"></a>1071                  <em class="brace">}</em>
<a id="L1072" name="L1072"></a>1072              <em class="brace">}</em>
<a id="L1073" name="L1073"></a>1073         <em class="brace">}</em>
<a id="L1074" name="L1074"></a>1074         <strong class="reserved">return</strong> <a href="../D/14956.html" title="Multiple defined in 4 places.">dispatchKeyEvent</a>(ke);
<a id="L1075" name="L1075"></a>1075     <em class="brace">}</em>
<a id="L1076" name="L1076"></a>1076 
<div class="comment">
      @param e is a KEY_PRESSED event that can be used
               to track the next KEY_TYPED related.</div>
<a id="L1081" name="L1081"></a>1081     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11942.html" title="Multiple referred from 8 places.">consumeNextKeyTyped</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082         <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a> = <strong class="reserved">true</strong>;
<a id="L1083" name="L1083"></a>1083     <em class="brace">}</em>
<a id="L1084" name="L1084"></a>1084 
<a id="L1085" name="L1085"></a>1085     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11946.html" title="Multiple referred from 4 places.">consumeTraversalKey</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L1086" name="L1086"></a>1086         e.<a href="../D/13298.html" title="Multiple defined in 4 places.">consume</a>();
<a id="L1087" name="L1087"></a>1087         <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a> = (e.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_PRESSED) &amp;&amp;
<a id="L1088" name="L1088"></a>1088                               !e.<a href="../S/2425.html#L1424" title="Defined at 1424 in src/java/awt/event/KeyEvent.java.">isActionKey</a>();
<a id="L1089" name="L1089"></a>1089     <em class="brace">}</em>
<a id="L1090" name="L1090"></a>1090 
<div class="comment">
      return true if event was consumed</div>
<a id="L1094" name="L1094"></a>1094     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/2359.html#L1118" title="Referred from 1118 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeProcessedKeyEvent</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095         <strong class="reserved">if</strong> ((e.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_TYPED) &amp;&amp; <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a>) <em class="brace">{</em>
<a id="L1096" name="L1096"></a>1096             e.<a href="../D/13298.html" title="Multiple defined in 4 places.">consume</a>();
<a id="L1097" name="L1097"></a>1097             <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a> = <strong class="reserved">false</strong>;
<a id="L1098" name="L1098"></a>1098             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1099" name="L1099"></a>1099         <em class="brace">}</em>
<a id="L1100" name="L1100"></a>1100         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1101" name="L1101"></a>1101     <em class="brace">}</em>
<a id="L1102" name="L1102"></a>1102 
<div class="comment">
      This method initiates a focus traversal operation if and only if the
      KeyEvent represents a focus traversal key for the specified
      focusedComponent. It is expected that focusedComponent is the current
      focus owner, although this need not be the case. If it is not,
      focus traversal will nevertheless proceed as if focusedComponent
      were the focus owner.
      @param focusedComponent the Component that is the basis for a focus
             traversal operation if the specified event represents a focus
             traversal key for the Component
      @param e the event that may represent a focus traversal key</div>
<a id="L1116" name="L1116"></a>1116     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25155.html" title="Multiple referred from 16 places.">processKeyEvent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusedComponent, <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L1117" name="L1117"></a>1117         <em class="comment">// consume processed event if needed</em>
<a id="L1118" name="L1118"></a>1118         <strong class="reserved">if</strong> (<a href="../S/2359.html#L1094" title="Defined at 1094 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeProcessedKeyEvent</a>(e)) <em class="brace">{</em>
<a id="L1119" name="L1119"></a>1119             <strong class="reserved">return</strong>;
<a id="L1120" name="L1120"></a>1120         <em class="brace">}</em>
<a id="L1121" name="L1121"></a>1121 
<a id="L1122" name="L1122"></a>1122         <em class="comment">// KEY_TYPED events cannot be focus traversal keys</em>
<a id="L1123" name="L1123"></a>1123         <strong class="reserved">if</strong> (e.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_TYPED) <em class="brace">{</em>
<a id="L1124" name="L1124"></a>1124             <strong class="reserved">return</strong>;
<a id="L1125" name="L1125"></a>1125         <em class="brace">}</em>
<a id="L1126" name="L1126"></a>1126 
<a id="L1127" name="L1127"></a>1127         <strong class="reserved">if</strong> (focusedComponent.<a href="../S/2177.html#L7397" title="Defined at 7397 in src/java/awt/Component.java.">getFocusTraversalKeysEnabled</a>() &amp;&amp;
<a id="L1128" name="L1128"></a>1128             !e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>())
<a id="L1129" name="L1129"></a>1129         <em class="brace">{</em>
<a id="L1130" name="L1130"></a>1130             <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a> stroke = <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../S/2439.html#L453" title="Defined at 453 in src/java/awt/AWTKeyStroke.java.">getAWTKeyStrokeForEvent</a>(e),
<a id="L1131" name="L1131"></a>1131                 oppStroke = <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../D/16691.html" title="Multiple defined in 5 places.">getAWTKeyStroke</a>(stroke.<a href="../D/19922.html" title="Multiple defined in 2 places.">getKeyCode</a>(),
<a id="L1132" name="L1132"></a>1132                                                  stroke.<a href="../D/20712.html" title="Multiple defined in 18 places.">getModifiers</a>(),
<a id="L1133" name="L1133"></a>1133                                                  !stroke.<a href="../S/2439.html#L668" title="Defined at 668 in src/java/awt/AWTKeyStroke.java.">isOnKeyRelease</a>());
<a id="L1134" name="L1134"></a>1134             <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; toTest;
<a id="L1135" name="L1135"></a>1135             <strong class="reserved">boolean</strong> <a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>, containsOpp;
<a id="L1136" name="L1136"></a>1136 
<a id="L1137" name="L1137"></a>1137             toTest = focusedComponent.<a href="../D/19169.html" title="Multiple defined in 4 places.">getFocusTraversalKeys</a>(
<a id="L1138" name="L1138"></a>1138                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.FORWARD_TRAVERSAL_KEYS);
<a id="L1139" name="L1139"></a>1139             <a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(stroke);
<a id="L1140" name="L1140"></a>1140             containsOpp = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(oppStroke);
<a id="L1141" name="L1141"></a>1141 
<a id="L1142" name="L1142"></a>1142             <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> || containsOpp) <em class="brace">{</em>
<a id="L1143" name="L1143"></a>1143                 <a href="../S/2359.html#L1085" title="Defined at 1085 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeTraversalKey</a>(e);
<a id="L1144" name="L1144"></a>1144                 <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>) <em class="brace">{</em>
<a id="L1145" name="L1145"></a>1145                     <a href="../D/16496.html" title="Multiple defined in 4 places.">focusNextComponent</a>(focusedComponent);
<a id="L1146" name="L1146"></a>1146                 <em class="brace">}</em>
<a id="L1147" name="L1147"></a>1147                 <strong class="reserved">return</strong>;
<a id="L1148" name="L1148"></a>1148             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (e.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.KEY_PRESSED) <em class="brace">{</em>
<a id="L1149" name="L1149"></a>1149                 <em class="comment">// Fix for 6637607: consumeNextKeyTyped should be reset.</em>
<a id="L1150" name="L1150"></a>1150                 <a href="../S/2359.html#L1081" title="Defined at 1081 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeNextKeyTyped</a> = <strong class="reserved">false</strong>;
<a id="L1151" name="L1151"></a>1151             <em class="brace">}</em>
<a id="L1152" name="L1152"></a>1152 
<a id="L1153" name="L1153"></a>1153             toTest = focusedComponent.<a href="../D/19169.html" title="Multiple defined in 4 places.">getFocusTraversalKeys</a>(
<a id="L1154" name="L1154"></a>1154                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.BACKWARD_TRAVERSAL_KEYS);
<a id="L1155" name="L1155"></a>1155             <a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(stroke);
<a id="L1156" name="L1156"></a>1156             containsOpp = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(oppStroke);
<a id="L1157" name="L1157"></a>1157 
<a id="L1158" name="L1158"></a>1158             <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> || containsOpp) <em class="brace">{</em>
<a id="L1159" name="L1159"></a>1159                 <a href="../S/2359.html#L1085" title="Defined at 1085 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeTraversalKey</a>(e);
<a id="L1160" name="L1160"></a>1160                 <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>) <em class="brace">{</em>
<a id="L1161" name="L1161"></a>1161                     <a href="../D/16497.html" title="Multiple defined in 4 places.">focusPreviousComponent</a>(focusedComponent);
<a id="L1162" name="L1162"></a>1162                 <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163                 <strong class="reserved">return</strong>;
<a id="L1164" name="L1164"></a>1164             <em class="brace">}</em>
<a id="L1165" name="L1165"></a>1165 
<a id="L1166" name="L1166"></a>1166             toTest = focusedComponent.<a href="../D/19169.html" title="Multiple defined in 4 places.">getFocusTraversalKeys</a>(
<a id="L1167" name="L1167"></a>1167                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.UP_CYCLE_TRAVERSAL_KEYS);
<a id="L1168" name="L1168"></a>1168             <a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(stroke);
<a id="L1169" name="L1169"></a>1169             containsOpp = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(oppStroke);
<a id="L1170" name="L1170"></a>1170 
<a id="L1171" name="L1171"></a>1171             <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> || containsOpp) <em class="brace">{</em>
<a id="L1172" name="L1172"></a>1172                 <a href="../S/2359.html#L1085" title="Defined at 1085 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeTraversalKey</a>(e);
<a id="L1173" name="L1173"></a>1173                 <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>) <em class="brace">{</em>
<a id="L1174" name="L1174"></a>1174                     <a href="../D/36026.html" title="Multiple defined in 4 places.">upFocusCycle</a>(focusedComponent);
<a id="L1175" name="L1175"></a>1175                 <em class="brace">}</em>
<a id="L1176" name="L1176"></a>1176                 <strong class="reserved">return</strong>;
<a id="L1177" name="L1177"></a>1177             <em class="brace">}</em>
<a id="L1178" name="L1178"></a>1178 
<a id="L1179" name="L1179"></a>1179             <strong class="reserved">if</strong> (!((focusedComponent <strong class="reserved">instanceof</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>) &amp;&amp;
<a id="L1180" name="L1180"></a>1180                   ((<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>)focusedComponent).<a href="../D/25582.html" title="Multiple defined in 5 places.">isFocusCycleRoot</a>())) <em class="brace">{</em>
<a id="L1181" name="L1181"></a>1181                 <strong class="reserved">return</strong>;
<a id="L1182" name="L1182"></a>1182             <em class="brace">}</em>
<a id="L1183" name="L1183"></a>1183 
<a id="L1184" name="L1184"></a>1184             toTest = focusedComponent.<a href="../D/19169.html" title="Multiple defined in 4 places.">getFocusTraversalKeys</a>(
<a id="L1185" name="L1185"></a>1185                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.DOWN_CYCLE_TRAVERSAL_KEYS);
<a id="L1186" name="L1186"></a>1186             <a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(stroke);
<a id="L1187" name="L1187"></a>1187             containsOpp = toTest.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(oppStroke);
<a id="L1188" name="L1188"></a>1188 
<a id="L1189" name="L1189"></a>1189             <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a> || containsOpp) <em class="brace">{</em>
<a id="L1190" name="L1190"></a>1190                 <a href="../S/2359.html#L1085" title="Defined at 1085 in src/java/awt/DefaultKeyboardFocusManager.java.">consumeTraversalKey</a>(e);
<a id="L1191" name="L1191"></a>1191                 <strong class="reserved">if</strong> (<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>) <em class="brace">{</em>
<a id="L1192" name="L1192"></a>1192                     <a href="../D/15138.html" title="Multiple defined in 4 places.">downFocusCycle</a>((<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>)focusedComponent);
<a id="L1193" name="L1193"></a>1193                 <em class="brace">}</em>
<a id="L1194" name="L1194"></a>1194             <em class="brace">}</em>
<a id="L1195" name="L1195"></a>1195         <em class="brace">}</em>
<a id="L1196" name="L1196"></a>1196     <em class="brace">}</em>
<a id="L1197" name="L1197"></a>1197 
<div class="comment">
      Delays dispatching of KeyEvents until the specified Component becomes
      the focus owner. KeyEvents with timestamps later than the specified
      timestamp will be enqueued until the specified Component receives a
      FOCUS_GAINED event, or the AWT cancels the delay request by invoking
      <code>dequeueKeyEvents</code> or <code>discardKeyEvents</code>.
      @param after timestamp of current event, or the current, system time if
             the current event has no timestamp, or the AWT cannot determine
             which event is currently being handled
      @param untilFocused Component which will receive a FOCUS_GAINED event
             before any pending KeyEvents
      @see #dequeueKeyEvents
      @see #discardKeyEvents</div>
<a id="L1213" name="L1213"></a>1213     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/13894.html" title="Multiple referred from 6 places.">enqueueKeyEvents</a>(<strong class="reserved">long</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>,
<a id="L1214" name="L1214"></a>1214                                                  <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> untilFocused) <em class="brace">{</em>
<a id="L1215" name="L1215"></a>1215         <strong class="reserved">if</strong> (untilFocused == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1216" name="L1216"></a>1216             <strong class="reserved">return</strong>;
<a id="L1217" name="L1217"></a>1217         <em class="brace">}</em>
<a id="L1218" name="L1218"></a>1218 
<a id="L1219" name="L1219"></a>1219         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L1220" name="L1220"></a>1220             focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("Enqueue at {0} for {1}",
<a id="L1221" name="L1221"></a>1221                        <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>, untilFocused);
<a id="L1222" name="L1222"></a>1222         <em class="brace">}</em>
<a id="L1223" name="L1223"></a>1223 
<a id="L1224" name="L1224"></a>1224         <strong class="reserved">int</strong> insertionIndex = 0,
<a id="L1225" name="L1225"></a>1225             i = typeAheadMarkers.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1226" name="L1226"></a>1226         <a href="../S/1187.html#L60" title="Defined at 60 in src/java/util/ListIterator.java.">ListIterator</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = typeAheadMarkers.<a href="../D/26876.html" title="Multiple defined in 26 places.">listIterator</a>(i);
<a id="L1227" name="L1227"></a>1227 
<a id="L1228" name="L1228"></a>1228         <strong class="reserved">for</strong> (; i &gt; 0; i--) <em class="brace">{</em>
<a id="L1229" name="L1229"></a>1229             <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/29600.html" title="Multiple defined in 22 places.">previous</a>();
<a id="L1230" name="L1230"></a>1230             <strong class="reserved">if</strong> (marker.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> &lt;= <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231                 insertionIndex = i;
<a id="L1232" name="L1232"></a>1232                 <strong class="reserved">break</strong>;
<a id="L1233" name="L1233"></a>1233             <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234         <em class="brace">}</em>
<a id="L1235" name="L1235"></a>1235 
<a id="L1236" name="L1236"></a>1236         typeAheadMarkers.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(insertionIndex,
<a id="L1237" name="L1237"></a>1237                              <strong class="reserved">new</strong> <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>(<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>, untilFocused));
<a id="L1238" name="L1238"></a>1238     <em class="brace">}</em>
<a id="L1239" name="L1239"></a>1239 
<div class="comment">
      Releases for normal dispatching to the current focus owner all
      KeyEvents which were enqueued because of a call to
      <code>enqueueKeyEvents</code> with the same timestamp and Component.
      If the given timestamp is less than zero, the outstanding enqueue
      request for the given Component with the <b>oldest</b> timestamp (if
      any) should be cancelled.
      @param after the timestamp specified in the call to
             <code>enqueueKeyEvents</code>, or any value &lt; 0
      @param untilFocused the Component specified in the call to
             <code>enqueueKeyEvents</code>
      @see #enqueueKeyEvents
      @see #discardKeyEvents</div>
<a id="L1255" name="L1255"></a>1255     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/13229.html" title="Multiple referred from 9 places.">dequeueKeyEvents</a>(<strong class="reserved">long</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>,
<a id="L1256" name="L1256"></a>1256                                                  <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> untilFocused) <em class="brace">{</em>
<a id="L1257" name="L1257"></a>1257         <strong class="reserved">if</strong> (untilFocused == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1258" name="L1258"></a>1258             <strong class="reserved">return</strong>;
<a id="L1259" name="L1259"></a>1259         <em class="brace">}</em>
<a id="L1260" name="L1260"></a>1260 
<a id="L1261" name="L1261"></a>1261         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L1262" name="L1262"></a>1262             focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("Dequeue at {0} for {1}",
<a id="L1263" name="L1263"></a>1263                        <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>, untilFocused);
<a id="L1264" name="L1264"></a>1264         <em class="brace">}</em>
<a id="L1265" name="L1265"></a>1265 
<a id="L1266" name="L1266"></a>1266         <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker;
<a id="L1267" name="L1267"></a>1267         <a href="../S/1187.html#L60" title="Defined at 60 in src/java/util/ListIterator.java.">ListIterator</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = typeAheadMarkers.<a href="../D/26876.html" title="Multiple defined in 26 places.">listIterator</a>
<a id="L1268" name="L1268"></a>1268             ((<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> &gt;= 0) ? typeAheadMarkers.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() : 0);
<a id="L1269" name="L1269"></a>1269 
<a id="L1270" name="L1270"></a>1270         <strong class="reserved">if</strong> (<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> &lt; 0) <em class="brace">{</em>
<a id="L1271" name="L1271"></a>1271             <strong class="reserved">while</strong> (<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L1272" name="L1272"></a>1272                 marker = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L1273" name="L1273"></a>1273                 <strong class="reserved">if</strong> (marker.untilFocused == untilFocused)
<a id="L1274" name="L1274"></a>1274                 <em class="brace">{</em>
<a id="L1275" name="L1275"></a>1275                     <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L1276" name="L1276"></a>1276                     <strong class="reserved">return</strong>;
<a id="L1277" name="L1277"></a>1277                 <em class="brace">}</em>
<a id="L1278" name="L1278"></a>1278             <em class="brace">}</em>
<a id="L1279" name="L1279"></a>1279         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1280" name="L1280"></a>1280             <strong class="reserved">while</strong> (<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24162.html" title="Multiple defined in 10 places.">hasPrevious</a>()) <em class="brace">{</em>
<a id="L1281" name="L1281"></a>1281                 marker = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/29600.html" title="Multiple defined in 22 places.">previous</a>();
<a id="L1282" name="L1282"></a>1282                 <strong class="reserved">if</strong> (marker.untilFocused == untilFocused &amp;&amp;
<a id="L1283" name="L1283"></a>1283                     marker.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a> == <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>)
<a id="L1284" name="L1284"></a>1284                 <em class="brace">{</em>
<a id="L1285" name="L1285"></a>1285                     <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L1286" name="L1286"></a>1286                     <strong class="reserved">return</strong>;
<a id="L1287" name="L1287"></a>1287                 <em class="brace">}</em>
<a id="L1288" name="L1288"></a>1288             <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289         <em class="brace">}</em>
<a id="L1290" name="L1290"></a>1290     <em class="brace">}</em>
<a id="L1291" name="L1291"></a>1291 
<div class="comment">
      Discards all KeyEvents which were enqueued because of one or more calls
      to <code>enqueueKeyEvents</code> with the specified Component, or one of
      its descendants.
      @param comp the Component specified in one or more calls to
             <code>enqueueKeyEvents</code>, or a parent of such a Component
      @see #enqueueKeyEvents
      @see #dequeueKeyEvents</div>
<a id="L1302" name="L1302"></a>1302     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/2177.html#L7042" title="Referred from 7042 in src/java/awt/Component.java.">discardKeyEvents</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp) <em class="brace">{</em>
<a id="L1303" name="L1303"></a>1303         <strong class="reserved">if</strong> (comp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1304" name="L1304"></a>1304             <strong class="reserved">return</strong>;
<a id="L1305" name="L1305"></a>1305         <em class="brace">}</em>
<a id="L1306" name="L1306"></a>1306 
<a id="L1307" name="L1307"></a>1307         <strong class="reserved">long</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = -1;
<a id="L1308" name="L1308"></a>1308 
<a id="L1309" name="L1309"></a>1309         <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = typeAheadMarkers.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); ) <em class="brace">{</em>
<a id="L1310" name="L1310"></a>1310             <a href="../S/2359.html#L89" title="Defined at 89 in src/java/awt/DefaultKeyboardFocusManager.java.">TypeAheadMarker</a> marker = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L1311" name="L1311"></a>1311             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> toTest = marker.untilFocused;
<a id="L1312" name="L1312"></a>1312             <strong class="reserved">boolean</strong> <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> = (toTest == comp);
<a id="L1313" name="L1313"></a>1313             <strong class="reserved">while</strong> (!<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> &amp;&amp; toTest != <strong class="reserved">null</strong> &amp;&amp; !(toTest <strong class="reserved">instanceof</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)) <em class="brace">{</em>
<a id="L1314" name="L1314"></a>1314                 toTest = toTest.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L1315" name="L1315"></a>1315                 <a href="../D/27519.html" title="Multiple defined in 69 places.">match</a> = (toTest == comp);
<a id="L1316" name="L1316"></a>1316             <em class="brace">}</em>
<a id="L1317" name="L1317"></a>1317             <strong class="reserved">if</strong> (<a href="../D/27519.html" title="Multiple defined in 69 places.">match</a>) <em class="brace">{</em>
<a id="L1318" name="L1318"></a>1318                 <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt; 0) <em class="brace">{</em>
<a id="L1319" name="L1319"></a>1319                     <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = marker.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>;
<a id="L1320" name="L1320"></a>1320                 <em class="brace">}</em>
<a id="L1321" name="L1321"></a>1321                 <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L1322" name="L1322"></a>1322             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &gt;= 0) <em class="brace">{</em>
<a id="L1323" name="L1323"></a>1323                 <a href="../S/2359.html#L1336" title="Defined at 1336 in src/java/awt/DefaultKeyboardFocusManager.java.">purgeStampedEvents</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, marker.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>);
<a id="L1324" name="L1324"></a>1324                 <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = -1;
<a id="L1325" name="L1325"></a>1325             <em class="brace">}</em>
<a id="L1326" name="L1326"></a>1326         <em class="brace">}</em>
<a id="L1327" name="L1327"></a>1327 
<a id="L1328" name="L1328"></a>1328         <a href="../S/2359.html#L1336" title="Defined at 1336 in src/java/awt/DefaultKeyboardFocusManager.java.">purgeStampedEvents</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, -1);
<a id="L1329" name="L1329"></a>1329     <em class="brace">}</em>
<a id="L1330" name="L1330"></a>1330 
<a id="L1331" name="L1331"></a>1331     <em class="comment">// Notes:</em>
<a id="L1332" name="L1332"></a>1332     <em class="comment">//   * must be called inside a synchronized block</em>
<a id="L1333" name="L1333"></a>1333     <em class="comment">//   * if 'start' is &lt; 0, then this function does nothing</em>
<a id="L1334" name="L1334"></a>1334     <em class="comment">//   * if 'end' is &lt; 0, then all KeyEvents from 'start' to the end of the</em>
<a id="L1335" name="L1335"></a>1335     <em class="comment">//     queue will be removed</em>
<a id="L1336" name="L1336"></a>1336     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25252.html" title="Multiple referred from 2 places.">purgeStampedEvents</a>(<strong class="reserved">long</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">long</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1337" name="L1337"></a>1337         <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt; 0) <em class="brace">{</em>
<a id="L1338" name="L1338"></a>1338             <strong class="reserved">return</strong>;
<a id="L1339" name="L1339"></a>1339         <em class="brace">}</em>
<a id="L1340" name="L1340"></a>1340 
<a id="L1341" name="L1341"></a>1341         <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = enqueuedKeyEvents.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); ) <em class="brace">{</em>
<a id="L1342" name="L1342"></a>1342             <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> ke = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L1343" name="L1343"></a>1343             <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = ke.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>();
<a id="L1344" name="L1344"></a>1344 
<a id="L1345" name="L1345"></a>1345             <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt; <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &amp;&amp; (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &lt; 0 || <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>)) <em class="brace">{</em>
<a id="L1346" name="L1346"></a>1346                 <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L1347" name="L1347"></a>1347             <em class="brace">}</em>
<a id="L1348" name="L1348"></a>1348 
<a id="L1349" name="L1349"></a>1349             <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt;= 0 &amp;&amp; <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &gt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1350" name="L1350"></a>1350                 <strong class="reserved">break</strong>;
<a id="L1351" name="L1351"></a>1351             <em class="brace">}</em>
<a id="L1352" name="L1352"></a>1352         <em class="brace">}</em>
<a id="L1353" name="L1353"></a>1353     <em class="brace">}</em>
<a id="L1354" name="L1354"></a>1354 
<div class="comment">
      Focuses the Component before aComponent, typically based on a
      FocusTraversalPolicy.
      @param aComponent the Component that is the basis for the focus
             traversal operation
      @see FocusTraversalPolicy
      @see Component#transferFocusBackward</div>
<a id="L1364" name="L1364"></a>1364     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14718.html" title="Multiple referred from 5 places.">focusPreviousComponent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> aComponent) <em class="brace">{</em>
<a id="L1365" name="L1365"></a>1365         <strong class="reserved">if</strong> (aComponent != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1366" name="L1366"></a>1366             aComponent.<a href="../D/35581.html" title="Multiple defined in 2 places.">transferFocusBackward</a>();
<a id="L1367" name="L1367"></a>1367         <em class="brace">}</em>
<a id="L1368" name="L1368"></a>1368     <em class="brace">}</em>
<a id="L1369" name="L1369"></a>1369 
<div class="comment">
      Focuses the Component after aComponent, typically based on a
      FocusTraversalPolicy.
      @param aComponent the Component that is the basis for the focus
             traversal operation
      @see FocusTraversalPolicy
      @see Component#transferFocus</div>
<a id="L1379" name="L1379"></a>1379     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14717.html" title="Multiple referred from 5 places.">focusNextComponent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> aComponent) <em class="brace">{</em>
<a id="L1380" name="L1380"></a>1380         <strong class="reserved">if</strong> (aComponent != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1381" name="L1381"></a>1381             aComponent.<a href="../D/35580.html" title="Multiple defined in 2 places.">transferFocus</a>();
<a id="L1382" name="L1382"></a>1382         <em class="brace">}</em>
<a id="L1383" name="L1383"></a>1383     <em class="brace">}</em>
<a id="L1384" name="L1384"></a>1384 
<div class="comment">
      Moves the focus up one focus traversal cycle. Typically, the focus owner
      is set to aComponent's focus cycle root, and the current focus cycle
      root is set to the new focus owner's focus cycle root. If, however,
      aComponent's focus cycle root is a Window, then the focus owner is set
      to the focus cycle root's default Component to focus, and the current
      focus cycle root is unchanged.
      @param aComponent the Component that is the basis for the focus
             traversal operation
      @see Component#transferFocusUpCycle</div>
<a id="L1397" name="L1397"></a>1397     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29798.html" title="Multiple referred from 3 places.">upFocusCycle</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> aComponent) <em class="brace">{</em>
<a id="L1398" name="L1398"></a>1398         <strong class="reserved">if</strong> (aComponent != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1399" name="L1399"></a>1399             aComponent.<a href="../S/2177.html#L7992" title="Defined at 7992 in src/java/awt/Component.java.">transferFocusUpCycle</a>();
<a id="L1400" name="L1400"></a>1400         <em class="brace">}</em>
<a id="L1401" name="L1401"></a>1401     <em class="brace">}</em>
<a id="L1402" name="L1402"></a>1402 
<div class="comment">
      Moves the focus down one focus traversal cycle. If aContainer is a focus
      cycle root, then the focus owner is set to aContainer's default
      Component to focus, and the current focus cycle root is set to
      aContainer. If aContainer is not a focus cycle root, then no focus
      traversal operation occurs.
      @param aContainer the Container that is the basis for the focus
             traversal operation
      @see Container#transferFocusDownCycle</div>
<a id="L1414" name="L1414"></a>1414     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13495.html" title="Multiple referred from 3 places.">downFocusCycle</a>(<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> aContainer) <em class="brace">{</em>
<a id="L1415" name="L1415"></a>1415         <strong class="reserved">if</strong> (aContainer != <strong class="reserved">null</strong> &amp;&amp; aContainer.<a href="../D/25582.html" title="Multiple defined in 5 places.">isFocusCycleRoot</a>()) <em class="brace">{</em>
<a id="L1416" name="L1416"></a>1416             aContainer.<a href="../S/2224.html#L3510" title="Defined at 3510 in src/java/awt/Container.java.">transferFocusDownCycle</a>();
<a id="L1417" name="L1417"></a>1417         <em class="brace">}</em>
<a id="L1418" name="L1418"></a>1418     <em class="brace">}</em>
<a id="L1419" name="L1419"></a>1419 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L100">[^]</a><a href="#L1414">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
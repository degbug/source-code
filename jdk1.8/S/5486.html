<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L77">[^]</a><a href="#L2064">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L77" title="Defined at 77.">getStartContainer</a></li>
<li><a href="#L86" title="Defined at 86.">getStartOffset</a></li>
<li><a href="#L95" title="Defined at 95.">getEndContainer</a></li>
<li><a href="#L104" title="Defined at 104.">getEndOffset</a></li>
<li><a href="#L113" title="Defined at 113.">getCollapsed</a></li>
<li><a href="#L123" title="Defined at 123.">getCommonAncestorContainer</a></li>
<li><a href="#L158" title="Defined at 158.">setStart</a></li>
<li><a href="#L195" title="Defined at 195.">setEnd</a></li>
<li><a href="#L232" title="Defined at 232.">setStartBefore</a></li>
<li><a href="#L273" title="Defined at 273.">setStartAfter</a></li>
<li><a href="#L312" title="Defined at 312.">setEndBefore</a></li>
<li><a href="#L351" title="Defined at 351.">setEndAfter</a></li>
<li><a href="#L390" title="Defined at 390.">collapse</a></li>
<li><a href="#L407" title="Defined at 407.">selectNode</a></li>
<li><a href="#L442" title="Defined at 442.">selectNodeContents</a></li>
<li><a href="#L478" title="Defined at 478.">compareBoundaryPoints</a></li>
<li><a href="#L603" title="Defined at 603.">deleteContents</a></li>
<li><a href="#L609" title="Defined at 609.">extractContents</a></li>
<li><a href="#L615" title="Defined at 615.">cloneContents</a></li>
<li><a href="#L621" title="Defined at 621.">insertNode</a></li>
<li><a href="#L714" title="Defined at 714.">surroundContents</a></li>
<li><a href="#L760" title="Defined at 760.">cloneRange</a></li>
<li><a href="#L773" title="Defined at 773.">toString</a></li>
<li><a href="#L835" title="Defined at 835.">detach</a></li>
<li><a href="#L853" title="Defined at 853.">signalSplitData</a></li>
<li><a href="#L863" title="Defined at 863.">receiveSplitData</a></li>
<li><a href="#L887" title="Defined at 887.">deleteData</a></li>
<li><a href="#L898" title="Defined at 898.">receiveDeletedText</a></li>
<li><a href="#L925" title="Defined at 925.">insertData</a></li>
<li><a href="#L936" title="Defined at 936.">receiveInsertedText</a></li>
<li><a href="#L958" title="Defined at 958.">receiveReplacedText</a></li>
<li><a href="#L975" title="Defined at 975.">insertedNodeFromDOM</a></li>
<li><a href="#L1005" title="Defined at 1005.">removeChild</a></li>
<li><a href="#L1016" title="Defined at 1016.">removeNode</a></li>
<li><a href="#L1090" title="Defined at 1090.">traverseContents</a></li>
<li><a href="#L1199" title="Defined at 1199.">traverseSameContainer</a></li>
<li><a href="#L1285" title="Defined at 1285.">traverseCommonStartContainer</a></li>
<li><a href="#L1364" title="Defined at 1364.">traverseCommonEndContainer</a></li>
<li><a href="#L1439" title="Defined at 1439.">traverseCommonAncestors</a></li>
<li><a href="#L1537" title="Defined at 1537.">traverseRightBoundary</a></li>
<li><a href="#L1640" title="Defined at 1640.">traverseLeftBoundary</a></li>
<li><a href="#L1721" title="Defined at 1721.">traverseNode</a></li>
<li><a href="#L1757" title="Defined at 1757.">traverseFullySelected</a></li>
<li><a href="#L1806" title="Defined at 1806.">traversePartiallySelected</a></li>
<li><a href="#L1852" title="Defined at 1852.">traverseTextNode</a></li>
<li><a href="#L1880" title="Defined at 1880.">checkIndex</a></li>
<li><a href="#L1915" title="Defined at 1915.">getRootContainer</a></li>
<li><a href="#L1929" title="Defined at 1929.">isLegalContainer</a></li>
<li><a href="#L1957" title="Defined at 1957.">hasLegalRootContainer</a></li>
<li><a href="#L1977" title="Defined at 1977.">isLegalContainedNode</a></li>
<li><a href="#L1993" title="Defined at 1993.">nextNode</a></li>
<li><a href="#L2031" title="Defined at 2031.">isAncestorOf</a></li>
<li><a href="#L2039" title="Defined at 2039.">indexOf</a></li>
<li><a href="#L2064" title="Defined at 2064.">getSelectedNode</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.dom;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> java.util.Vector;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> org.w3c.dom.CharacterData;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> org.w3c.dom.DOMException;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> org.w3c.dom.DocumentFragment;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> org.w3c.dom.ranges.Range;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> org.w3c.dom.ranges.RangeException;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 
<div class="comment">
 The RangeImpl class implements the org.w3c.dom.range.Range interface.
   <p> Please see the API documentation for the interface classes
   and use the interfaces in your client programs.
  @xerces.internal</p></div>
<a id="L40" name="L40"></a>  40 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6472.html" title="Multiple referred from 7 places.">RangeImpl</a>  <strong class="reserved">implements</strong> <a href="../D/7102.html" title="Multiple defined in 2 places.">Range</a> <em class="brace">{</em>
<a id="L41" name="L41"></a>  41 
<a id="L42" name="L42"></a>  42     <em class="comment">//</em>
<a id="L43" name="L43"></a>  43     <em class="comment">// Constants</em>
<a id="L44" name="L44"></a>  44     <em class="comment">//</em>
<a id="L45" name="L45"></a>  45 
<a id="L46" name="L46"></a>  46 
<a id="L47" name="L47"></a>  47     <em class="comment">//</em>
<a id="L48" name="L48"></a>  48     <em class="comment">// Data</em>
<a id="L49" name="L49"></a>  49     <em class="comment">//</em>
<a id="L50" name="L50"></a>  50 
<a id="L51" name="L51"></a>  51     <a href="../S/5446.html#L82" title="Defined at 82 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">DocumentImpl</a> fDocument;
<a id="L52" name="L52"></a>  52     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fStartContainer;
<a id="L53" name="L53"></a>  53     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fEndContainer;
<a id="L54" name="L54"></a>  54     <strong class="reserved">int</strong> fStartOffset;
<a id="L55" name="L55"></a>  55     <strong class="reserved">int</strong> fEndOffset;
<a id="L56" name="L56"></a>  56     <strong class="reserved">boolean</strong> fIsCollapsed;
<a id="L57" name="L57"></a>  57     <strong class="reserved">boolean</strong> fDetach = <strong class="reserved">false</strong>;
<a id="L58" name="L58"></a>  58     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fInsertNode = <strong class="reserved">null</strong>;
<a id="L59" name="L59"></a>  59     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fDeleteNode = <strong class="reserved">null</strong>;
<a id="L60" name="L60"></a>  60     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fSplitNode = <strong class="reserved">null</strong>;
<a id="L61" name="L61"></a>  61     <em class="comment">// Was the Node inserted from the Range or the Document</em>
<a id="L62" name="L62"></a>  62     <strong class="reserved">boolean</strong> fInsertedFromRange = <strong class="reserved">false</strong>;
<a id="L63" name="L63"></a>  63 
<div class="comment">
 The constructor. Clients must use DocumentRange.createRange(),
       because it registers the Range with the document, so it can
       be fixed-up.</div>
<a id="L68" name="L68"></a>  68     <strong class="reserved">public</strong> RangeImpl(<a href="../S/5446.html#L82" title="Defined at 82 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">DocumentImpl</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>) <em class="brace">{</em>
<a id="L69" name="L69"></a>  69         fDocument = <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>;
<a id="L70" name="L70"></a>  70         fStartContainer = <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>;
<a id="L71" name="L71"></a>  71         fEndContainer = <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>;
<a id="L72" name="L72"></a>  72         fStartOffset = 0;
<a id="L73" name="L73"></a>  73         fEndOffset = 0;
<a id="L74" name="L74"></a>  74         fDetach = <strong class="reserved">false</strong>;
<a id="L75" name="L75"></a>  75     <em class="brace">}</em>
<a id="L76" name="L76"></a>  76 
<a id="L77" name="L77"></a>  77     <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/19169.html" title="Multiple referred from 8 places.">getStartContainer</a>() <em class="brace">{</em>
<a id="L78" name="L78"></a>  78         <strong class="reserved">if</strong> ( fDetach ) <em class="brace">{</em>
<a id="L79" name="L79"></a>  79             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L80" name="L80"></a>  80                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L81" name="L81"></a>  81                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L82" name="L82"></a>  82         <em class="brace">}</em>
<a id="L83" name="L83"></a>  83         <strong class="reserved">return</strong> fStartContainer;
<a id="L84" name="L84"></a>  84     <em class="brace">}</em>
<a id="L85" name="L85"></a>  85 
<a id="L86" name="L86"></a>  86     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19172.html" title="Multiple referred from 263 places.">getStartOffset</a>() <em class="brace">{</em>
<a id="L87" name="L87"></a>  87         <strong class="reserved">if</strong> ( fDetach ) <em class="brace">{</em>
<a id="L88" name="L88"></a>  88             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L89" name="L89"></a>  89                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L90" name="L90"></a>  90                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L91" name="L91"></a>  91         <em class="brace">}</em>
<a id="L92" name="L92"></a>  92         <strong class="reserved">return</strong> fStartOffset;
<a id="L93" name="L93"></a>  93     <em class="brace">}</em>
<a id="L94" name="L94"></a>  94 
<a id="L95" name="L95"></a>  95     <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/16365.html" title="Multiple referred from 4 places.">getEndContainer</a>() <em class="brace">{</em>
<a id="L96" name="L96"></a>  96         <strong class="reserved">if</strong> ( fDetach ) <em class="brace">{</em>
<a id="L97" name="L97"></a>  97             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L98" name="L98"></a>  98                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L99" name="L99"></a>  99                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L100" name="L100"></a> 100         <em class="brace">}</em>
<a id="L101" name="L101"></a> 101         <strong class="reserved">return</strong> fEndContainer;
<a id="L102" name="L102"></a> 102     <em class="brace">}</em>
<a id="L103" name="L103"></a> 103 
<a id="L104" name="L104"></a> 104     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16369.html" title="Multiple referred from 229 places.">getEndOffset</a>() <em class="brace">{</em>
<a id="L105" name="L105"></a> 105         <strong class="reserved">if</strong> ( fDetach ) <em class="brace">{</em>
<a id="L106" name="L106"></a> 106             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L107" name="L107"></a> 107                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L108" name="L108"></a> 108                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L109" name="L109"></a> 109         <em class="brace">}</em>
<a id="L110" name="L110"></a> 110         <strong class="reserved">return</strong> fEndOffset;
<a id="L111" name="L111"></a> 111     <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<a id="L113" name="L113"></a> 113     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getCollapsed() <em class="brace">{</em>
<a id="L114" name="L114"></a> 114         <strong class="reserved">if</strong> ( fDetach ) <em class="brace">{</em>
<a id="L115" name="L115"></a> 115             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L116" name="L116"></a> 116                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L117" name="L117"></a> 117                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L118" name="L118"></a> 118         <em class="brace">}</em>
<a id="L119" name="L119"></a> 119         <strong class="reserved">return</strong> (fStartContainer == fEndContainer
<a id="L120" name="L120"></a> 120              &amp;&amp; fStartOffset == fEndOffset);
<a id="L121" name="L121"></a> 121     <em class="brace">}</em>
<a id="L122" name="L122"></a> 122 
<a id="L123" name="L123"></a> 123     <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/15697.html" title="Multiple referred from 6 places.">getCommonAncestorContainer</a>() <em class="brace">{</em>
<a id="L124" name="L124"></a> 124         <strong class="reserved">if</strong> ( fDetach ) <em class="brace">{</em>
<a id="L125" name="L125"></a> 125             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L126" name="L126"></a> 126                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L127" name="L127"></a> 127                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L128" name="L128"></a> 128         <em class="brace">}</em>
<a id="L129" name="L129"></a> 129         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> startV = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L130" name="L130"></a> 130         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L131" name="L131"></a> 131         <strong class="reserved">for</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=fStartContainer; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != <strong class="reserved">null</strong>;
<a id="L132" name="L132"></a> 132              <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>())
<a id="L133" name="L133"></a> 133         <em class="brace">{</em>
<a id="L134" name="L134"></a> 134             startV.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L135" name="L135"></a> 135         <em class="brace">}</em>
<a id="L136" name="L136"></a> 136         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> endV = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L137" name="L137"></a> 137         <strong class="reserved">for</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=fEndContainer; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != <strong class="reserved">null</strong>;
<a id="L138" name="L138"></a> 138              <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>())
<a id="L139" name="L139"></a> 139         <em class="brace">{</em>
<a id="L140" name="L140"></a> 140             endV.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L141" name="L141"></a> 141         <em class="brace">}</em>
<a id="L142" name="L142"></a> 142         <strong class="reserved">int</strong> s = startV.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1;
<a id="L143" name="L143"></a> 143         <strong class="reserved">int</strong> e = endV.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1;
<a id="L144" name="L144"></a> 144         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong>;
<a id="L145" name="L145"></a> 145         <strong class="reserved">while</strong> (s&gt;=0 &amp;&amp; e&gt;=0) <em class="brace">{</em>
<a id="L146" name="L146"></a> 146             <strong class="reserved">if</strong> (startV.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(s) == endV.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(e)) <em class="brace">{</em>
<a id="L147" name="L147"></a> 147                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = startV.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(s);
<a id="L148" name="L148"></a> 148             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L149" name="L149"></a> 149                 <strong class="reserved">break</strong>;
<a id="L150" name="L150"></a> 150             <em class="brace">}</em>
<a id="L151" name="L151"></a> 151             --s;
<a id="L152" name="L152"></a> 152             --e;
<a id="L153" name="L153"></a> 153         <em class="brace">}</em>
<a id="L154" name="L154"></a> 154         <strong class="reserved">return</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>)<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L155" name="L155"></a> 155     <em class="brace">}</em>
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157 
<a id="L158" name="L158"></a> 158     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28219.html" title="Multiple referred from 60 places.">setStart</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>)
<a id="L159" name="L159"></a> 159                          <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>, <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L160" name="L160"></a> 160     <em class="brace">{</em>
<a id="L161" name="L161"></a> 161         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L162" name="L162"></a> 162             <strong class="reserved">if</strong> ( fDetach) <em class="brace">{</em>
<a id="L163" name="L163"></a> 163                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L164" name="L164"></a> 164                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L165" name="L165"></a> 165                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L166" name="L166"></a> 166             <em class="brace">}</em>
<a id="L167" name="L167"></a> 167             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1929" title="Defined at 1929 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainer</a>(refNode)) <em class="brace">{</em>
<a id="L168" name="L168"></a> 168                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L169" name="L169"></a> 169                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L170" name="L170"></a> 170                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L171" name="L171"></a> 171             <em class="brace">}</em>
<a id="L172" name="L172"></a> 172             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L173" name="L173"></a> 173                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L174" name="L174"></a> 174                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L175" name="L175"></a> 175                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L176" name="L176"></a> 176             <em class="brace">}</em>
<a id="L177" name="L177"></a> 177         <em class="brace">}</em>
<a id="L178" name="L178"></a> 178 
<a id="L179" name="L179"></a> 179         <a href="../D/12492.html" title="Multiple defined in 7 places.">checkIndex</a>(refNode, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L180" name="L180"></a> 180 
<a id="L181" name="L181"></a> 181         fStartContainer = refNode;
<a id="L182" name="L182"></a> 182         fStartOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L183" name="L183"></a> 183 
<a id="L184" name="L184"></a> 184         <em class="comment">// If one boundary-point of a Range is set to have a root container</em>
<a id="L185" name="L185"></a> 185         <em class="comment">// other</em>
<a id="L186" name="L186"></a> 186         <em class="comment">// than the current one for the Range, the Range should be collapsed to</em>
<a id="L187" name="L187"></a> 187         <em class="comment">// the new position.</em>
<a id="L188" name="L188"></a> 188         <em class="comment">// The start position of a Range should never be after the end position.</em>
<a id="L189" name="L189"></a> 189         <strong class="reserved">if</strong> (<a href="../D/17840.html" title="Multiple defined in 2 places.">getCommonAncestorContainer</a>() == <strong class="reserved">null</strong>
<a id="L190" name="L190"></a> 190                 || (fStartContainer == fEndContainer &amp;&amp; fEndOffset &lt; fStartOffset)) <em class="brace">{</em>
<a id="L191" name="L191"></a> 191             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>(<strong class="reserved">true</strong>);
<a id="L192" name="L192"></a> 192         <em class="brace">}</em>
<a id="L193" name="L193"></a> 193     <em class="brace">}</em>
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27323.html" title="Multiple referred from 65 places.">setEnd</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>)
<a id="L196" name="L196"></a> 196                        <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>, <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L197" name="L197"></a> 197     <em class="brace">{</em>
<a id="L198" name="L198"></a> 198         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L201" name="L201"></a> 201                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L202" name="L202"></a> 202                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L203" name="L203"></a> 203             <em class="brace">}</em>
<a id="L204" name="L204"></a> 204             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1929" title="Defined at 1929 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainer</a>(refNode)) <em class="brace">{</em>
<a id="L205" name="L205"></a> 205                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L206" name="L206"></a> 206                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L207" name="L207"></a> 207                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L208" name="L208"></a> 208             <em class="brace">}</em>
<a id="L209" name="L209"></a> 209             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L211" name="L211"></a> 211                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L212" name="L212"></a> 212                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L213" name="L213"></a> 213             <em class="brace">}</em>
<a id="L214" name="L214"></a> 214         <em class="brace">}</em>
<a id="L215" name="L215"></a> 215 
<a id="L216" name="L216"></a> 216         <a href="../D/12492.html" title="Multiple defined in 7 places.">checkIndex</a>(refNode, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L217" name="L217"></a> 217 
<a id="L218" name="L218"></a> 218         fEndContainer = refNode;
<a id="L219" name="L219"></a> 219         fEndOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221         <em class="comment">// If one boundary-point of a Range is set to have a root container</em>
<a id="L222" name="L222"></a> 222         <em class="comment">// other</em>
<a id="L223" name="L223"></a> 223         <em class="comment">// than the current one for the Range, the Range should be collapsed to</em>
<a id="L224" name="L224"></a> 224         <em class="comment">// the new position.</em>
<a id="L225" name="L225"></a> 225         <em class="comment">// The start position of a Range should never be after the end position.</em>
<a id="L226" name="L226"></a> 226         <strong class="reserved">if</strong> (<a href="../D/17840.html" title="Multiple defined in 2 places.">getCommonAncestorContainer</a>() == <strong class="reserved">null</strong>
<a id="L227" name="L227"></a> 227                 || (fStartContainer == fEndContainer &amp;&amp; fEndOffset &lt; fStartOffset)) <em class="brace">{</em>
<a id="L228" name="L228"></a> 228             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>(<strong class="reserved">false</strong>);
<a id="L229" name="L229"></a> 229         <em class="brace">}</em>
<a id="L230" name="L230"></a> 230     <em class="brace">}</em>
<a id="L231" name="L231"></a> 231 
<a id="L232" name="L232"></a> 232     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setStartBefore(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode)
<a id="L233" name="L233"></a> 233         <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L234" name="L234"></a> 234     <em class="brace">{</em>
<a id="L235" name="L235"></a> 235         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L236" name="L236"></a> 236             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L237" name="L237"></a> 237                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L238" name="L238"></a> 238                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L239" name="L239"></a> 239                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L240" name="L240"></a> 240             <em class="brace">}</em>
<a id="L241" name="L241"></a> 241             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1957" title="Defined at 1957 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">hasLegalRootContainer</a>(refNode) ||
<a id="L242" name="L242"></a> 242                     !<a href="../S/5486.html#L1977" title="Defined at 1977 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainedNode</a>(refNode) )
<a id="L243" name="L243"></a> 243             <em class="brace">{</em>
<a id="L244" name="L244"></a> 244                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L245" name="L245"></a> 245                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L246" name="L246"></a> 246                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L247" name="L247"></a> 247             <em class="brace">}</em>
<a id="L248" name="L248"></a> 248             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L249" name="L249"></a> 249                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L250" name="L250"></a> 250                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L251" name="L251"></a> 251                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L252" name="L252"></a> 252             <em class="brace">}</em>
<a id="L253" name="L253"></a> 253         <em class="brace">}</em>
<a id="L254" name="L254"></a> 254 
<a id="L255" name="L255"></a> 255         fStartContainer = refNode.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L256" name="L256"></a> 256         <strong class="reserved">int</strong> i = 0;
<a id="L257" name="L257"></a> 257         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = refNode; n!=<strong class="reserved">null</strong>; n = n.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>()) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258             i++;
<a id="L259" name="L259"></a> 259         <em class="brace">}</em>
<a id="L260" name="L260"></a> 260         fStartOffset = i-1;
<a id="L261" name="L261"></a> 261 
<a id="L262" name="L262"></a> 262         <em class="comment">// If one boundary-point of a Range is set to have a root container</em>
<a id="L263" name="L263"></a> 263         <em class="comment">// other</em>
<a id="L264" name="L264"></a> 264         <em class="comment">// than the current one for the Range, the Range should be collapsed to</em>
<a id="L265" name="L265"></a> 265         <em class="comment">// the new position.</em>
<a id="L266" name="L266"></a> 266         <em class="comment">// The start position of a Range should never be after the end position.</em>
<a id="L267" name="L267"></a> 267         <strong class="reserved">if</strong> (<a href="../D/17840.html" title="Multiple defined in 2 places.">getCommonAncestorContainer</a>() == <strong class="reserved">null</strong>
<a id="L268" name="L268"></a> 268                 || (fStartContainer == fEndContainer &amp;&amp; fEndOffset &lt; fStartOffset)) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>(<strong class="reserved">true</strong>);
<a id="L270" name="L270"></a> 270         <em class="brace">}</em>
<a id="L271" name="L271"></a> 271     <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28220.html" title="Multiple referred from 2 places.">setStartAfter</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode)
<a id="L274" name="L274"></a> 274         <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L275" name="L275"></a> 275     <em class="brace">{</em>
<a id="L276" name="L276"></a> 276         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L277" name="L277"></a> 277             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L278" name="L278"></a> 278                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L279" name="L279"></a> 279                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L280" name="L280"></a> 280                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L281" name="L281"></a> 281             <em class="brace">}</em>
<a id="L282" name="L282"></a> 282             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1957" title="Defined at 1957 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">hasLegalRootContainer</a>(refNode) ||
<a id="L283" name="L283"></a> 283                     !<a href="../S/5486.html#L1977" title="Defined at 1977 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainedNode</a>(refNode)) <em class="brace">{</em>
<a id="L284" name="L284"></a> 284                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L285" name="L285"></a> 285                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L286" name="L286"></a> 286                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L287" name="L287"></a> 287             <em class="brace">}</em>
<a id="L288" name="L288"></a> 288             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L290" name="L290"></a> 290                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L291" name="L291"></a> 291                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L292" name="L292"></a> 292             <em class="brace">}</em>
<a id="L293" name="L293"></a> 293         <em class="brace">}</em>
<a id="L294" name="L294"></a> 294         fStartContainer = refNode.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L295" name="L295"></a> 295         <strong class="reserved">int</strong> i = 0;
<a id="L296" name="L296"></a> 296         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = refNode; n!=<strong class="reserved">null</strong>; n = n.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>()) <em class="brace">{</em>
<a id="L297" name="L297"></a> 297             i++;
<a id="L298" name="L298"></a> 298         <em class="brace">}</em>
<a id="L299" name="L299"></a> 299         fStartOffset = i;
<a id="L300" name="L300"></a> 300 
<a id="L301" name="L301"></a> 301         <em class="comment">// If one boundary-point of a Range is set to have a root container</em>
<a id="L302" name="L302"></a> 302         <em class="comment">// other</em>
<a id="L303" name="L303"></a> 303         <em class="comment">// than the current one for the Range, the Range should be collapsed to</em>
<a id="L304" name="L304"></a> 304         <em class="comment">// the new position.</em>
<a id="L305" name="L305"></a> 305         <em class="comment">// The start position of a Range should never be after the end position.</em>
<a id="L306" name="L306"></a> 306         <strong class="reserved">if</strong> (<a href="../D/17840.html" title="Multiple defined in 2 places.">getCommonAncestorContainer</a>() == <strong class="reserved">null</strong>
<a id="L307" name="L307"></a> 307                 || (fStartContainer == fEndContainer &amp;&amp; fEndOffset &lt; fStartOffset)) <em class="brace">{</em>
<a id="L308" name="L308"></a> 308             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>(<strong class="reserved">true</strong>);
<a id="L309" name="L309"></a> 309         <em class="brace">}</em>
<a id="L310" name="L310"></a> 310     <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<a id="L312" name="L312"></a> 312     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27324.html" title="Multiple referred from 2 places.">setEndBefore</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode)
<a id="L313" name="L313"></a> 313         <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L314" name="L314"></a> 314     <em class="brace">{</em>
<a id="L315" name="L315"></a> 315         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L316" name="L316"></a> 316             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L317" name="L317"></a> 317                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L318" name="L318"></a> 318                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L319" name="L319"></a> 319                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L320" name="L320"></a> 320             <em class="brace">}</em>
<a id="L321" name="L321"></a> 321             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1957" title="Defined at 1957 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">hasLegalRootContainer</a>(refNode) ||
<a id="L322" name="L322"></a> 322                     !<a href="../S/5486.html#L1977" title="Defined at 1977 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainedNode</a>(refNode)) <em class="brace">{</em>
<a id="L323" name="L323"></a> 323                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L324" name="L324"></a> 324                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L325" name="L325"></a> 325                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L326" name="L326"></a> 326             <em class="brace">}</em>
<a id="L327" name="L327"></a> 327             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L329" name="L329"></a> 329                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L330" name="L330"></a> 330                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L331" name="L331"></a> 331             <em class="brace">}</em>
<a id="L332" name="L332"></a> 332         <em class="brace">}</em>
<a id="L333" name="L333"></a> 333         fEndContainer = refNode.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L334" name="L334"></a> 334         <strong class="reserved">int</strong> i = 0;
<a id="L335" name="L335"></a> 335         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = refNode; n!=<strong class="reserved">null</strong>; n = n.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>()) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336             i++;
<a id="L337" name="L337"></a> 337         <em class="brace">}</em>
<a id="L338" name="L338"></a> 338         fEndOffset = i-1;
<a id="L339" name="L339"></a> 339 
<a id="L340" name="L340"></a> 340         <em class="comment">// If one boundary-point of a Range is set to have a root container</em>
<a id="L341" name="L341"></a> 341         <em class="comment">// other</em>
<a id="L342" name="L342"></a> 342         <em class="comment">// than the current one for the Range, the Range should be collapsed to</em>
<a id="L343" name="L343"></a> 343         <em class="comment">// the new position.</em>
<a id="L344" name="L344"></a> 344         <em class="comment">// The start position of a Range should never be after the end position.</em>
<a id="L345" name="L345"></a> 345         <strong class="reserved">if</strong> (<a href="../D/17840.html" title="Multiple defined in 2 places.">getCommonAncestorContainer</a>() == <strong class="reserved">null</strong>
<a id="L346" name="L346"></a> 346                 || (fStartContainer == fEndContainer &amp;&amp; fEndOffset &lt; fStartOffset)) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>(<strong class="reserved">false</strong>);
<a id="L348" name="L348"></a> 348         <em class="brace">}</em>
<a id="L349" name="L349"></a> 349     <em class="brace">}</em>
<a id="L350" name="L350"></a> 350 
<a id="L351" name="L351"></a> 351     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setEndAfter(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode)
<a id="L352" name="L352"></a> 352         <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L353" name="L353"></a> 353     <em class="brace">{</em>
<a id="L354" name="L354"></a> 354         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L355" name="L355"></a> 355             <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L356" name="L356"></a> 356                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L357" name="L357"></a> 357                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L358" name="L358"></a> 358                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L359" name="L359"></a> 359             <em class="brace">}</em>
<a id="L360" name="L360"></a> 360             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1957" title="Defined at 1957 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">hasLegalRootContainer</a>(refNode) ||
<a id="L361" name="L361"></a> 361                     !<a href="../S/5486.html#L1977" title="Defined at 1977 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainedNode</a>(refNode)) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L363" name="L363"></a> 363                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L364" name="L364"></a> 364                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L365" name="L365"></a> 365             <em class="brace">}</em>
<a id="L366" name="L366"></a> 366             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L367" name="L367"></a> 367                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L368" name="L368"></a> 368                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L369" name="L369"></a> 369                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L370" name="L370"></a> 370             <em class="brace">}</em>
<a id="L371" name="L371"></a> 371         <em class="brace">}</em>
<a id="L372" name="L372"></a> 372         fEndContainer = refNode.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L373" name="L373"></a> 373         <strong class="reserved">int</strong> i = 0;
<a id="L374" name="L374"></a> 374         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = refNode; n!=<strong class="reserved">null</strong>; n = n.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>()) <em class="brace">{</em>
<a id="L375" name="L375"></a> 375             i++;
<a id="L376" name="L376"></a> 376         <em class="brace">}</em>
<a id="L377" name="L377"></a> 377         fEndOffset = i;
<a id="L378" name="L378"></a> 378 
<a id="L379" name="L379"></a> 379         <em class="comment">// If one boundary-point of a Range is set to have a root container</em>
<a id="L380" name="L380"></a> 380         <em class="comment">// other</em>
<a id="L381" name="L381"></a> 381         <em class="comment">// than the current one for the Range, the Range should be collapsed to</em>
<a id="L382" name="L382"></a> 382         <em class="comment">// the new position.</em>
<a id="L383" name="L383"></a> 383         <em class="comment">// The start position of a Range should never be after the end position.</em>
<a id="L384" name="L384"></a> 384         <strong class="reserved">if</strong> (<a href="../D/17840.html" title="Multiple defined in 2 places.">getCommonAncestorContainer</a>() == <strong class="reserved">null</strong>
<a id="L385" name="L385"></a> 385                 || (fStartContainer == fEndContainer &amp;&amp; fEndOffset &lt; fStartOffset)) <em class="brace">{</em>
<a id="L386" name="L386"></a> 386             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>(<strong class="reserved">false</strong>);
<a id="L387" name="L387"></a> 387         <em class="brace">}</em>
<a id="L388" name="L388"></a> 388     <em class="brace">}</em>
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11635.html" title="Multiple referred from 30 places.">collapse</a>(<strong class="reserved">boolean</strong> toStart) <em class="brace">{</em>
<a id="L391" name="L391"></a> 391 
<a id="L392" name="L392"></a> 392         <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L393" name="L393"></a> 393                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L394" name="L394"></a> 394                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L395" name="L395"></a> 395                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L396" name="L396"></a> 396         <em class="brace">}</em>
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398         <strong class="reserved">if</strong> (toStart) <em class="brace">{</em>
<a id="L399" name="L399"></a> 399             fEndContainer = fStartContainer;
<a id="L400" name="L400"></a> 400             fEndOffset = fStartOffset;
<a id="L401" name="L401"></a> 401         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L402" name="L402"></a> 402             fStartContainer = fEndContainer;
<a id="L403" name="L403"></a> 403             fStartOffset = fEndOffset;
<a id="L404" name="L404"></a> 404         <em class="brace">}</em>
<a id="L405" name="L405"></a> 405     <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<a id="L407" name="L407"></a> 407     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26733.html" title="Multiple referred from 9 places.">selectNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode)
<a id="L408" name="L408"></a> 408         <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L409" name="L409"></a> 409     <em class="brace">{</em>
<a id="L410" name="L410"></a> 410         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L413" name="L413"></a> 413                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L414" name="L414"></a> 414                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L415" name="L415"></a> 415             <em class="brace">}</em>
<a id="L416" name="L416"></a> 416             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1929" title="Defined at 1929 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainer</a>( refNode.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>() ) ||
<a id="L417" name="L417"></a> 417                     !<a href="../S/5486.html#L1977" title="Defined at 1977 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainedNode</a>( refNode ) ) <em class="brace">{</em>
<a id="L418" name="L418"></a> 418                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L419" name="L419"></a> 419                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L420" name="L420"></a> 420                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L421" name="L421"></a> 421             <em class="brace">}</em>
<a id="L422" name="L422"></a> 422             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L423" name="L423"></a> 423                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L424" name="L424"></a> 424                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L425" name="L425"></a> 425                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L426" name="L426"></a> 426             <em class="brace">}</em>
<a id="L427" name="L427"></a> 427         <em class="brace">}</em>
<a id="L428" name="L428"></a> 428         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = refNode.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L429" name="L429"></a> 429         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong> ) <em class="comment">// REVIST: what to do if it IS null?</em>
<a id="L430" name="L430"></a> 430         <em class="brace">{</em>
<a id="L431" name="L431"></a> 431             fStartContainer = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L432" name="L432"></a> 432             fEndContainer = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L433" name="L433"></a> 433             <strong class="reserved">int</strong> i = 0;
<a id="L434" name="L434"></a> 434             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = refNode; n!=<strong class="reserved">null</strong>; n = n.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>()) <em class="brace">{</em>
<a id="L435" name="L435"></a> 435                 i++;
<a id="L436" name="L436"></a> 436             <em class="brace">}</em>
<a id="L437" name="L437"></a> 437             fStartOffset = i-1;
<a id="L438" name="L438"></a> 438             fEndOffset = fStartOffset+1;
<a id="L439" name="L439"></a> 439         <em class="brace">}</em>
<a id="L440" name="L440"></a> 440     <em class="brace">}</em>
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442     <strong class="reserved">public</strong> <strong class="reserved">void</strong> selectNodeContents(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode)
<a id="L443" name="L443"></a> 443         <strong class="reserved">throws</strong> <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L444" name="L444"></a> 444     <em class="brace">{</em>
<a id="L445" name="L445"></a> 445         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446             <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L448" name="L448"></a> 448                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L449" name="L449"></a> 449                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L450" name="L450"></a> 450             <em class="brace">}</em>
<a id="L451" name="L451"></a> 451             <strong class="reserved">if</strong> ( !<a href="../S/5486.html#L1929" title="Defined at 1929 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">isLegalContainer</a>(refNode)) <em class="brace">{</em>
<a id="L452" name="L452"></a> 452                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L453" name="L453"></a> 453                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L454" name="L454"></a> 454                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L455" name="L455"></a> 455             <em class="brace">}</em>
<a id="L456" name="L456"></a> 456             <strong class="reserved">if</strong> ( fDocument != refNode.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() &amp;&amp; fDocument != refNode) <em class="brace">{</em>
<a id="L457" name="L457"></a> 457                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L458" name="L458"></a> 458                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L459" name="L459"></a> 459                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L460" name="L460"></a> 460             <em class="brace">}</em>
<a id="L461" name="L461"></a> 461         <em class="brace">}</em>
<a id="L462" name="L462"></a> 462         fStartContainer = refNode;
<a id="L463" name="L463"></a> 463         fEndContainer = refNode;
<a id="L464" name="L464"></a> 464         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = refNode.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L465" name="L465"></a> 465         fStartOffset = 0;
<a id="L466" name="L466"></a> 466         <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L467" name="L467"></a> 467             fEndOffset = 0;
<a id="L468" name="L468"></a> 468         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L469" name="L469"></a> 469             <strong class="reserved">int</strong> i = 0;
<a id="L470" name="L470"></a> 470             <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>; n!=<strong class="reserved">null</strong>; n = n.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>()) <em class="brace">{</em>
<a id="L471" name="L471"></a> 471                 i++;
<a id="L472" name="L472"></a> 472             <em class="brace">}</em>
<a id="L473" name="L473"></a> 473             fEndOffset = i;
<a id="L474" name="L474"></a> 474         <em class="brace">}</em>
<a id="L475" name="L475"></a> 475 
<a id="L476" name="L476"></a> 476     <em class="brace">}</em>
<a id="L477" name="L477"></a> 477 
<a id="L478" name="L478"></a> 478     <strong class="reserved">public</strong> <strong class="reserved">short</strong> compareBoundaryPoints(<strong class="reserved">short</strong> how, <a href="../D/7102.html" title="Multiple defined in 2 places.">Range</a> sourceRange)
<a id="L479" name="L479"></a> 479         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L480" name="L480"></a> 480     <em class="brace">{</em>
<a id="L481" name="L481"></a> 481         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L482" name="L482"></a> 482             <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L483" name="L483"></a> 483                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L484" name="L484"></a> 484                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L485" name="L485"></a> 485                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L486" name="L486"></a> 486             <em class="brace">}</em>
<a id="L487" name="L487"></a> 487             <em class="comment">// WRONG_DOCUMENT_ERR: Raised if the two Ranges are not in the same Document or DocumentFragment.</em>
<a id="L488" name="L488"></a> 488             <strong class="reserved">if</strong> ((fDocument != sourceRange.<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>().<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>()
<a id="L489" name="L489"></a> 489                     &amp;&amp; fDocument != sourceRange.<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>()
<a id="L490" name="L490"></a> 490                     &amp;&amp; sourceRange.<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>() != <strong class="reserved">null</strong>)
<a id="L491" name="L491"></a> 491                     || (fDocument != sourceRange.<a href="../D/18767.html" title="Multiple defined in 2 places.">getEndContainer</a>().<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>()
<a id="L492" name="L492"></a> 492                             &amp;&amp; fDocument != sourceRange.<a href="../D/18767.html" title="Multiple defined in 2 places.">getEndContainer</a>()
<a id="L493" name="L493"></a> 493                             &amp;&amp; sourceRange.<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>() != <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L494" name="L494"></a> 494                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(<a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L495" name="L495"></a> 495                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>( <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L496" name="L496"></a> 496             <em class="brace">}</em>
<a id="L497" name="L497"></a> 497         <em class="brace">}</em>
<a id="L498" name="L498"></a> 498 
<a id="L499" name="L499"></a> 499         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> endPointA;
<a id="L500" name="L500"></a> 500         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> endPointB;
<a id="L501" name="L501"></a> 501         <strong class="reserved">int</strong> offsetA;
<a id="L502" name="L502"></a> 502         <strong class="reserved">int</strong> offsetB;
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504         <strong class="reserved">if</strong> (how == START_TO_START) <em class="brace">{</em>
<a id="L505" name="L505"></a> 505             endPointA = sourceRange.<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>();
<a id="L506" name="L506"></a> 506             endPointB = fStartContainer;
<a id="L507" name="L507"></a> 507             offsetA = sourceRange.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L508" name="L508"></a> 508             offsetB = fStartOffset;
<a id="L509" name="L509"></a> 509         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L510" name="L510"></a> 510         <strong class="reserved">if</strong> (how == START_TO_END) <em class="brace">{</em>
<a id="L511" name="L511"></a> 511             endPointA = sourceRange.<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>();
<a id="L512" name="L512"></a> 512             endPointB = fEndContainer;
<a id="L513" name="L513"></a> 513             offsetA = sourceRange.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L514" name="L514"></a> 514             offsetB = fEndOffset;
<a id="L515" name="L515"></a> 515         <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L516" name="L516"></a> 516         <strong class="reserved">if</strong> (how == END_TO_START) <em class="brace">{</em>
<a id="L517" name="L517"></a> 517             endPointA = sourceRange.<a href="../D/18767.html" title="Multiple defined in 2 places.">getEndContainer</a>();
<a id="L518" name="L518"></a> 518             endPointB = fStartContainer;
<a id="L519" name="L519"></a> 519             offsetA = sourceRange.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L520" name="L520"></a> 520             offsetB = fStartOffset;
<a id="L521" name="L521"></a> 521         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L522" name="L522"></a> 522             endPointA = sourceRange.<a href="../D/18767.html" title="Multiple defined in 2 places.">getEndContainer</a>();
<a id="L523" name="L523"></a> 523             endPointB = fEndContainer;
<a id="L524" name="L524"></a> 524             offsetA = sourceRange.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L525" name="L525"></a> 525             offsetB = fEndOffset;
<a id="L526" name="L526"></a> 526         <em class="brace">}</em>
<a id="L527" name="L527"></a> 527 
<a id="L528" name="L528"></a> 528         <em class="comment">// The DOM Spec outlines four cases that need to be tested</em>
<a id="L529" name="L529"></a> 529         <em class="comment">// to compare two range boundary points:</em>
<a id="L530" name="L530"></a> 530         <em class="comment">//   case 1: same container</em>
<a id="L531" name="L531"></a> 531         <em class="comment">//   case 2: Child C of container A is ancestor of B</em>
<a id="L532" name="L532"></a> 532         <em class="comment">//   case 3: Child C of container B is ancestor of A</em>
<a id="L533" name="L533"></a> 533         <em class="comment">//   case 4: preorder traversal of context tree.</em>
<a id="L534" name="L534"></a> 534 
<a id="L535" name="L535"></a> 535         <em class="comment">// case 1: same container</em>
<a id="L536" name="L536"></a> 536         <strong class="reserved">if</strong> (endPointA == endPointB) <em class="brace">{</em>
<a id="L537" name="L537"></a> 537             <strong class="reserved">if</strong> (offsetA &lt; offsetB) <strong class="reserved">return</strong> 1;
<a id="L538" name="L538"></a> 538             <strong class="reserved">if</strong> (offsetA == offsetB) <strong class="reserved">return</strong> 0;
<a id="L539" name="L539"></a> 539             <strong class="reserved">return</strong> -1;
<a id="L540" name="L540"></a> 540         <em class="brace">}</em>
<a id="L541" name="L541"></a> 541         <em class="comment">// case 2: Child C of container A is ancestor of B</em>
<a id="L542" name="L542"></a> 542         <em class="comment">// This can be quickly tested by walking the parent chain of B</em>
<a id="L543" name="L543"></a> 543         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = endPointB, p = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L544" name="L544"></a> 544              p != <strong class="reserved">null</strong>;
<a id="L545" name="L545"></a> 545              <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = p, p = p.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>())
<a id="L546" name="L546"></a> 546         <em class="brace">{</em>
<a id="L547" name="L547"></a> 547             <strong class="reserved">if</strong> (p == endPointA) <em class="brace">{</em>
<a id="L548" name="L548"></a> 548                 <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, endPointA);
<a id="L549" name="L549"></a> 549                 <strong class="reserved">if</strong> (offsetA &lt;= <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <strong class="reserved">return</strong> 1;
<a id="L550" name="L550"></a> 550                 <strong class="reserved">return</strong> -1;
<a id="L551" name="L551"></a> 551             <em class="brace">}</em>
<a id="L552" name="L552"></a> 552         <em class="brace">}</em>
<a id="L553" name="L553"></a> 553 
<a id="L554" name="L554"></a> 554         <em class="comment">// case 3: Child C of container B is ancestor of A</em>
<a id="L555" name="L555"></a> 555         <em class="comment">// This can be quickly tested by walking the parent chain of A</em>
<a id="L556" name="L556"></a> 556         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = endPointA, p = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L557" name="L557"></a> 557              p != <strong class="reserved">null</strong>;
<a id="L558" name="L558"></a> 558              <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = p, p = p.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>())
<a id="L559" name="L559"></a> 559         <em class="brace">{</em>
<a id="L560" name="L560"></a> 560             <strong class="reserved">if</strong> (p == endPointB) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561                 <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, endPointB);
<a id="L562" name="L562"></a> 562                 <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; offsetB) <strong class="reserved">return</strong> 1;
<a id="L563" name="L563"></a> 563                 <strong class="reserved">return</strong> -1;
<a id="L564" name="L564"></a> 564             <em class="brace">}</em>
<a id="L565" name="L565"></a> 565         <em class="brace">}</em>
<a id="L566" name="L566"></a> 566 
<a id="L567" name="L567"></a> 567         <em class="comment">// case 4: preorder traversal of context tree.</em>
<a id="L568" name="L568"></a> 568         <em class="comment">// Instead of literally walking the context tree in pre-order,</em>
<a id="L569" name="L569"></a> 569         <em class="comment">// we use relative node depth walking which is usually faster</em>
<a id="L570" name="L570"></a> 570 
<a id="L571" name="L571"></a> 571         <strong class="reserved">int</strong> depthDiff = 0;
<a id="L572" name="L572"></a> 572         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = endPointA; n != <strong class="reserved">null</strong>; n = n.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>() )
<a id="L573" name="L573"></a> 573             depthDiff++;
<a id="L574" name="L574"></a> 574         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = endPointB; n != <strong class="reserved">null</strong>; n = n.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>() )
<a id="L575" name="L575"></a> 575             depthDiff--;
<a id="L576" name="L576"></a> 576         <strong class="reserved">while</strong> (depthDiff &gt; 0) <em class="brace">{</em>
<a id="L577" name="L577"></a> 577             endPointA = endPointA.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L578" name="L578"></a> 578             depthDiff--;
<a id="L579" name="L579"></a> 579         <em class="brace">}</em>
<a id="L580" name="L580"></a> 580         <strong class="reserved">while</strong> (depthDiff &lt; 0) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581             endPointB = endPointB.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L582" name="L582"></a> 582             depthDiff++;
<a id="L583" name="L583"></a> 583         <em class="brace">}</em>
<a id="L584" name="L584"></a> 584         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> pA = endPointA.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>(),
<a id="L585" name="L585"></a> 585              pB = endPointB.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L586" name="L586"></a> 586              pA != pB;
<a id="L587" name="L587"></a> 587              pA = pA.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>(), pB = pB.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>() )
<a id="L588" name="L588"></a> 588         <em class="brace">{</em>
<a id="L589" name="L589"></a> 589             endPointA = pA;
<a id="L590" name="L590"></a> 590             endPointB = pB;
<a id="L591" name="L591"></a> 591         <em class="brace">}</em>
<a id="L592" name="L592"></a> 592         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = endPointA.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L593" name="L593"></a> 593              n != <strong class="reserved">null</strong>;
<a id="L594" name="L594"></a> 594              n = n.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>() )
<a id="L595" name="L595"></a> 595         <em class="brace">{</em>
<a id="L596" name="L596"></a> 596             <strong class="reserved">if</strong> (n == endPointB) <em class="brace">{</em>
<a id="L597" name="L597"></a> 597                 <strong class="reserved">return</strong> 1;
<a id="L598" name="L598"></a> 598             <em class="brace">}</em>
<a id="L599" name="L599"></a> 599         <em class="brace">}</em>
<a id="L600" name="L600"></a> 600         <strong class="reserved">return</strong> -1;
<a id="L601" name="L601"></a> 601     <em class="brace">}</em>
<a id="L602" name="L602"></a> 602 
<a id="L603" name="L603"></a> 603     <strong class="reserved">public</strong> <strong class="reserved">void</strong> deleteContents()
<a id="L604" name="L604"></a> 604         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L605" name="L605"></a> 605     <em class="brace">{</em>
<a id="L606" name="L606"></a> 606         <a href="../S/5486.html#L1090" title="Defined at 1090 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseContents</a>(DELETE_CONTENTS);
<a id="L607" name="L607"></a> 607     <em class="brace">}</em>
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609     <strong class="reserved">public</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> <a href="../S/5486.html#L754" title="Referred from 754 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">extractContents</a>()
<a id="L610" name="L610"></a> 610         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L611" name="L611"></a> 611     <em class="brace">{</em>
<a id="L612" name="L612"></a> 612         <strong class="reserved">return</strong> <a href="../S/5486.html#L1090" title="Defined at 1090 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseContents</a>(EXTRACT_CONTENTS);
<a id="L613" name="L613"></a> 613     <em class="brace">}</em>
<a id="L614" name="L614"></a> 614 
<a id="L615" name="L615"></a> 615     <strong class="reserved">public</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> cloneContents()
<a id="L616" name="L616"></a> 616         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L617" name="L617"></a> 617     <em class="brace">{</em>
<a id="L618" name="L618"></a> 618         <strong class="reserved">return</strong> <a href="../S/5486.html#L1090" title="Defined at 1090 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseContents</a>(CLONE_CONTENTS);
<a id="L619" name="L619"></a> 619     <em class="brace">}</em>
<a id="L620" name="L620"></a> 620 
<a id="L621" name="L621"></a> 621     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20782.html" title="Multiple referred from 4 places.">insertNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>)
<a id="L622" name="L622"></a> 622         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>, <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L623" name="L623"></a> 623     <em class="brace">{</em>
<a id="L624" name="L624"></a> 624         <strong class="reserved">if</strong> ( <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a> == <strong class="reserved">null</strong> ) <strong class="reserved">return</strong>; <em class="comment">//throw exception?</em>
<a id="L625" name="L625"></a> 625 
<a id="L626" name="L626"></a> 626         <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>();
<a id="L627" name="L627"></a> 627 
<a id="L628" name="L628"></a> 628         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L629" name="L629"></a> 629             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L630" name="L630"></a> 630                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L631" name="L631"></a> 631                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L632" name="L632"></a> 632                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L633" name="L633"></a> 633             <em class="brace">}</em>
<a id="L634" name="L634"></a> 634             <strong class="reserved">if</strong> ( fDocument != <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>() ) <em class="brace">{</em>
<a id="L635" name="L635"></a> 635                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(<a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.WRONG_DOCUMENT_ERR,
<a id="L636" name="L636"></a> 636                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "WRONG_DOCUMENT_ERR", <strong class="reserved">null</strong>));
<a id="L637" name="L637"></a> 637             <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<a id="L639" name="L639"></a> 639             <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE
<a id="L640" name="L640"></a> 640                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE
<a id="L641" name="L641"></a> 641                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.NOTATION_NODE
<a id="L642" name="L642"></a> 642                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_NODE)
<a id="L643" name="L643"></a> 643             <em class="brace">{</em>
<a id="L644" name="L644"></a> 644                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L645" name="L645"></a> 645                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L646" name="L646"></a> 646                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L647" name="L647"></a> 647             <em class="brace">}</em>
<a id="L648" name="L648"></a> 648         <em class="brace">}</em>
<a id="L649" name="L649"></a> 649         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> cloneCurrent;
<a id="L650" name="L650"></a> 650         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>;
<a id="L651" name="L651"></a> 651         <strong class="reserved">int</strong> currentChildren = 0;
<a id="L652" name="L652"></a> 652         fInsertedFromRange = <strong class="reserved">true</strong>;
<a id="L653" name="L653"></a> 653 
<a id="L654" name="L654"></a> 654         <em class="comment">//boolean MULTIPLE_MODE = false;</em>
<a id="L655" name="L655"></a> 655         <strong class="reserved">if</strong> (fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L656" name="L656"></a> 656 
<a id="L657" name="L657"></a> 657             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = fStartContainer.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L658" name="L658"></a> 658             currentChildren = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/17640.html" title="Multiple defined in 11 places.">getChildNodes</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); <em class="comment">//holds number of kids before insertion</em>
<a id="L659" name="L659"></a> 659             <em class="comment">// split text node: results is 3 nodes..</em>
<a id="L660" name="L660"></a> 660             cloneCurrent = fStartContainer.<a href="../D/12908.html" title="Multiple defined in 21 places.">cloneNode</a>(<strong class="reserved">false</strong>);
<a id="L661" name="L661"></a> 661             ((<a href="../D/8917.html" title="Multiple defined in 2 places.">TextImpl</a>)cloneCurrent).<a href="../D/33368.html" title="Multiple defined in 2 places.">setNodeValueInternal</a>(
<a id="L662" name="L662"></a> 662                     (cloneCurrent.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>()).<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(fStartOffset));
<a id="L663" name="L663"></a> 663             ((<a href="../D/8917.html" title="Multiple defined in 2 places.">TextImpl</a>)fStartContainer).<a href="../D/33368.html" title="Multiple defined in 2 places.">setNodeValueInternal</a>(
<a id="L664" name="L664"></a> 664                     (fStartContainer.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>()).<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0,fStartOffset));
<a id="L665" name="L665"></a> 665             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = fStartContainer.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L666" name="L666"></a> 666             <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667                     <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> !=  <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L668" name="L668"></a> 668                         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>(<a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L669" name="L669"></a> 669                         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>(cloneCurrent, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L670" name="L670"></a> 670                     <em class="brace">}</em>
<a id="L671" name="L671"></a> 671             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L672" name="L672"></a> 672                     <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L673" name="L673"></a> 673                         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(<a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>);
<a id="L674" name="L674"></a> 674                         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(cloneCurrent);
<a id="L675" name="L675"></a> 675                     <em class="brace">}</em>
<a id="L676" name="L676"></a> 676             <em class="brace">}</em>
<a id="L677" name="L677"></a> 677              <em class="comment">//update ranges after the insertion</em>
<a id="L678" name="L678"></a> 678              <strong class="reserved">if</strong> ( fEndContainer == fStartContainer) <em class="brace">{</em>
<a id="L679" name="L679"></a> 679                   fEndContainer = cloneCurrent; <em class="comment">//endContainer is the new Node created</em>
<a id="L680" name="L680"></a> 680                   fEndOffset -= fStartOffset;
<a id="L681" name="L681"></a> 681              <em class="brace">}</em>
<a id="L682" name="L682"></a> 682              <strong class="reserved">else</strong> <strong class="reserved">if</strong> ( fEndContainer == <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> ) <em class="brace">{</em>    <em class="comment">//endContainer was not a text Node.</em>
<a id="L683" name="L683"></a> 683                   <em class="comment">//endOffset + = number_of_children_added</em>
<a id="L684" name="L684"></a> 684                    fEndOffset += (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/17640.html" title="Multiple defined in 11 places.">getChildNodes</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() - currentChildren);
<a id="L685" name="L685"></a> 685              <em class="brace">}</em>
<a id="L686" name="L686"></a> 686 
<a id="L687" name="L687"></a> 687              <em class="comment">// signal other Ranges to update their start/end containers/offsets</em>
<a id="L688" name="L688"></a> 688              <a href="../S/5486.html#L853" title="Defined at 853 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">signalSplitData</a>(fStartContainer, cloneCurrent, fStartOffset);
<a id="L689" name="L689"></a> 689 
<a id="L690" name="L690"></a> 690 
<a id="L691" name="L691"></a> 691         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// ! TEXT_NODE</em>
<a id="L692" name="L692"></a> 692             <strong class="reserved">if</strong> ( fEndContainer == fStartContainer )      <em class="comment">//need to remember number of kids</em>
<a id="L693" name="L693"></a> 693                 currentChildren= fEndContainer.<a href="../D/17640.html" title="Multiple defined in 11 places.">getChildNodes</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695             <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = fStartContainer.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L696" name="L696"></a> 696             <strong class="reserved">int</strong> i = 0;
<a id="L697" name="L697"></a> 697             <strong class="reserved">for</strong>(i = 0; i &lt; fStartOffset &amp;&amp; <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> != <strong class="reserved">null</strong>; i++) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698                 <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>=<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L699" name="L699"></a> 699             <em class="brace">}</em>
<a id="L700" name="L700"></a> 700             <strong class="reserved">if</strong> (<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701                 fStartContainer.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>(<a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>, <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>);
<a id="L702" name="L702"></a> 702             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L703" name="L703"></a> 703                 fStartContainer.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(<a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>);
<a id="L704" name="L704"></a> 704             <em class="brace">}</em>
<a id="L705" name="L705"></a> 705             <em class="comment">//update fEndOffset. ex:&lt;body&gt;&lt;p/&gt;&lt;/body&gt;. Range(start;end): body,0; body,1</em>
<a id="L706" name="L706"></a> 706             <em class="comment">// insert &lt;h1&gt;: &lt;body&gt;&lt;/h1&gt;&lt;p/&gt;&lt;/body&gt;. Range(start;end): body,0; body,2</em>
<a id="L707" name="L707"></a> 707             <strong class="reserved">if</strong> ( fEndContainer == fStartContainer &amp;&amp; fEndOffset != 0 ) <em class="brace">{</em>     <em class="comment">//update fEndOffset if not 0</em>
<a id="L708" name="L708"></a> 708                 fEndOffset += (fEndContainer.<a href="../D/17640.html" title="Multiple defined in 11 places.">getChildNodes</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() - currentChildren);
<a id="L709" name="L709"></a> 709             <em class="brace">}</em>
<a id="L710" name="L710"></a> 710         <em class="brace">}</em>
<a id="L711" name="L711"></a> 711         fInsertedFromRange = <strong class="reserved">false</strong>;
<a id="L712" name="L712"></a> 712     <em class="brace">}</em>
<a id="L713" name="L713"></a> 713 
<a id="L714" name="L714"></a> 714     <strong class="reserved">public</strong> <strong class="reserved">void</strong> surroundContents(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> newParent)
<a id="L715" name="L715"></a> 715         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>, <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>
<a id="L716" name="L716"></a> 716     <em class="brace">{</em>
<a id="L717" name="L717"></a> 717         <strong class="reserved">if</strong> (newParent==<strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L718" name="L718"></a> 718         <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = newParent.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>();
<a id="L719" name="L719"></a> 719 
<a id="L720" name="L720"></a> 720         <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L721" name="L721"></a> 721             <strong class="reserved">if</strong> (fDetach) <em class="brace">{</em>
<a id="L722" name="L722"></a> 722                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L723" name="L723"></a> 723                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L724" name="L724"></a> 724                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L725" name="L725"></a> 725             <em class="brace">}</em>
<a id="L726" name="L726"></a> 726             <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE
<a id="L727" name="L727"></a> 727                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE
<a id="L728" name="L728"></a> 728                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.NOTATION_NODE
<a id="L729" name="L729"></a> 729                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_TYPE_NODE
<a id="L730" name="L730"></a> 730                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_NODE
<a id="L731" name="L731"></a> 731                     || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_FRAGMENT_NODE)
<a id="L732" name="L732"></a> 732             <em class="brace">{</em>
<a id="L733" name="L733"></a> 733                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L734" name="L734"></a> 734                         <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.INVALID_NODE_TYPE_ERR,
<a id="L735" name="L735"></a> 735                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_NODE_TYPE_ERR", <strong class="reserved">null</strong>));
<a id="L736" name="L736"></a> 736             <em class="brace">}</em>
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738 
<a id="L739" name="L739"></a> 739         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> realStart = fStartContainer;
<a id="L740" name="L740"></a> 740         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> realEnd = fEndContainer;
<a id="L741" name="L741"></a> 741         <strong class="reserved">if</strong> (fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L742" name="L742"></a> 742             realStart = fStartContainer.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L743" name="L743"></a> 743         <em class="brace">}</em>
<a id="L744" name="L744"></a> 744         <strong class="reserved">if</strong> (fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L745" name="L745"></a> 745             realEnd = fEndContainer.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L746" name="L746"></a> 746         <em class="brace">}</em>
<a id="L747" name="L747"></a> 747 
<a id="L748" name="L748"></a> 748         <strong class="reserved">if</strong> (realStart != realEnd) <em class="brace">{</em>
<a id="L749" name="L749"></a> 749                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5436.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/dom/RangeExceptionImpl.java.">RangeExceptionImpl</a>(
<a id="L750" name="L750"></a> 750                 <a href="../S/19.html#L50" title="Defined at 50 in src/org/w3c/dom/ranges/RangeException.java.">RangeException</a>.BAD_BOUNDARYPOINTS_ERR,
<a id="L751" name="L751"></a> 751                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "BAD_BOUNDARYPOINTS_ERR", <strong class="reserved">null</strong>));
<a id="L752" name="L752"></a> 752         <em class="brace">}</em>
<a id="L753" name="L753"></a> 753 
<a id="L754" name="L754"></a> 754         <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> frag = <a href="../D/15926.html" title="Multiple defined in 2 places.">extractContents</a>();
<a id="L755" name="L755"></a> 755         <a href="../D/24761.html" title="Multiple defined in 5 places.">insertNode</a>(newParent);
<a id="L756" name="L756"></a> 756         newParent.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(frag);
<a id="L757" name="L757"></a> 757         <a href="../D/31699.html" title="Multiple defined in 3 places.">selectNode</a>(newParent);
<a id="L758" name="L758"></a> 758     <em class="brace">}</em>
<a id="L759" name="L759"></a> 759 
<a id="L760" name="L760"></a> 760     <strong class="reserved">public</strong> <a href="../D/7102.html" title="Multiple defined in 2 places.">Range</a> cloneRange()<em class="brace">{</em>
<a id="L761" name="L761"></a> 761         <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L762" name="L762"></a> 762                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L763" name="L763"></a> 763                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L764" name="L764"></a> 764                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L765" name="L765"></a> 765         <em class="brace">}</em>
<a id="L766" name="L766"></a> 766 
<a id="L767" name="L767"></a> 767         <a href="../D/7102.html" title="Multiple defined in 2 places.">Range</a> <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a> = fDocument.<a href="../D/14141.html" title="Multiple defined in 4 places.">createRange</a>();
<a id="L768" name="L768"></a> 768         <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a>.<a href="../D/33997.html" title="Multiple defined in 5 places.">setStart</a>(fStartContainer, fStartOffset);
<a id="L769" name="L769"></a> 769         <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a>.<a href="../D/32584.html" title="Multiple defined in 5 places.">setEnd</a>(fEndContainer, fEndOffset);
<a id="L770" name="L770"></a> 770         <strong class="reserved">return</strong> <a href="../D/30095.html" title="Multiple defined in 38 places.">range</a>;
<a id="L771" name="L771"></a> 771     <em class="brace">}</em>
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>()<em class="brace">{</em>
<a id="L774" name="L774"></a> 774         <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L775" name="L775"></a> 775                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L776" name="L776"></a> 776                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L777" name="L777"></a> 777                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L778" name="L778"></a> 778         <em class="brace">}</em>
<a id="L779" name="L779"></a> 779 
<a id="L780" name="L780"></a> 780         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = fStartContainer;
<a id="L781" name="L781"></a> 781         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> stopNode = fEndContainer;
<a id="L782" name="L782"></a> 782         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> sb = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L783" name="L783"></a> 783         <strong class="reserved">if</strong> (fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE
<a id="L784" name="L784"></a> 784          || fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE
<a id="L785" name="L785"></a> 785         ) <em class="brace">{</em>
<a id="L786" name="L786"></a> 786             <strong class="reserved">if</strong> (fStartContainer == fEndContainer) <em class="brace">{</em>
<a id="L787" name="L787"></a> 787                 sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(fStartContainer.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>().<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(fStartOffset, fEndOffset));
<a id="L788" name="L788"></a> 788                 <strong class="reserved">return</strong> sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L789" name="L789"></a> 789             <em class="brace">}</em>
<a id="L790" name="L790"></a> 790             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(fStartContainer.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>().<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(fStartOffset));
<a id="L791" name="L791"></a> 791             <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>,<strong class="reserved">true</strong>); <em class="comment">//fEndContainer!=fStartContainer</em>
<a id="L792" name="L792"></a> 792 
<a id="L793" name="L793"></a> 793         <em class="brace">}</em>
<a id="L794" name="L794"></a> 794         <strong class="reserved">else</strong> <em class="brace">{</em>  <em class="comment">//fStartContainer is not a TextNode</em>
<a id="L795" name="L795"></a> 795             <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L796" name="L796"></a> 796             <strong class="reserved">if</strong> (fStartOffset&gt;0) <em class="brace">{</em> <em class="comment">//find a first node within a range, specified by fStartOffset</em>
<a id="L797" name="L797"></a> 797                <strong class="reserved">int</strong> counter=0;
<a id="L798" name="L798"></a> 798                <strong class="reserved">while</strong> (counter&lt;fStartOffset &amp;&amp; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L799" name="L799"></a> 799                    <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L800" name="L800"></a> 800                    counter++;
<a id="L801" name="L801"></a> 801                <em class="brace">}</em>
<a id="L802" name="L802"></a> 802             <em class="brace">}</em>
<a id="L803" name="L803"></a> 803             <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L804" name="L804"></a> 804                    <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>(fStartContainer,<strong class="reserved">false</strong>);
<a id="L805" name="L805"></a> 805             <em class="brace">}</em>
<a id="L806" name="L806"></a> 806         <em class="brace">}</em>
<a id="L807" name="L807"></a> 807         <strong class="reserved">if</strong> ( fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()!= <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE &amp;&amp;
<a id="L808" name="L808"></a> 808              fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()!= <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE )<em class="brace">{</em>
<a id="L809" name="L809"></a> 809              <strong class="reserved">int</strong> i=fEndOffset;
<a id="L810" name="L810"></a> 810              stopNode = fEndContainer.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L811" name="L811"></a> 811              <strong class="reserved">while</strong>( i&gt;0 &amp;&amp; stopNode!=<strong class="reserved">null</strong> )<em class="brace">{</em>
<a id="L812" name="L812"></a> 812                  --i;
<a id="L813" name="L813"></a> 813                  stopNode = stopNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L814" name="L814"></a> 814              <em class="brace">}</em>
<a id="L815" name="L815"></a> 815              <strong class="reserved">if</strong> ( stopNode == <strong class="reserved">null</strong> )
<a id="L816" name="L816"></a> 816                  stopNode = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>( fEndContainer, <strong class="reserved">false</strong> );
<a id="L817" name="L817"></a> 817          <em class="brace">}</em>
<a id="L818" name="L818"></a> 818          <strong class="reserved">while</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != stopNode) <em class="brace">{</em>  <em class="comment">//look into all kids of the Range</em>
<a id="L819" name="L819"></a> 819              <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">break</strong>;
<a id="L820" name="L820"></a> 820              <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE
<a id="L821" name="L821"></a> 821              ||  <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE) <em class="brace">{</em>
<a id="L822" name="L822"></a> 822                  sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>());
<a id="L823" name="L823"></a> 823              <em class="brace">}</em>
<a id="L824" name="L824"></a> 824 
<a id="L825" name="L825"></a> 825              <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">true</strong>);
<a id="L826" name="L826"></a> 826          <em class="brace">}</em>
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828         <strong class="reserved">if</strong> (fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE
<a id="L829" name="L829"></a> 829          || fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE) <em class="brace">{</em>
<a id="L830" name="L830"></a> 830             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(fEndContainer.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>().<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0,fEndOffset));
<a id="L831" name="L831"></a> 831         <em class="brace">}</em>
<a id="L832" name="L832"></a> 832         <strong class="reserved">return</strong> sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L833" name="L833"></a> 833     <em class="brace">}</em>
<a id="L834" name="L834"></a> 834 
<a id="L835" name="L835"></a> 835     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>() <em class="brace">{</em>
<a id="L836" name="L836"></a> 836         <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L838" name="L838"></a> 838             <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L839" name="L839"></a> 839                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L840" name="L840"></a> 840         <em class="brace">}</em>
<a id="L841" name="L841"></a> 841         fDetach = <strong class="reserved">true</strong>;
<a id="L842" name="L842"></a> 842         fDocument.<a href="../D/30929.html" title="Multiple defined in 8 places.">removeRange</a>(<strong class="reserved">this</strong>);
<a id="L843" name="L843"></a> 843     <em class="brace">}</em>
<a id="L844" name="L844"></a> 844 
<a id="L845" name="L845"></a> 845     <em class="comment">//</em>
<a id="L846" name="L846"></a> 846     <em class="comment">// Mutation functions</em>
<a id="L847" name="L847"></a> 847     <em class="comment">//</em>
<a id="L848" name="L848"></a> 848 
<div class="comment">
 Signal other Ranges to update their start/end
       containers/offsets. The data has already been split
       into the two Nodes.</div>
<a id="L853" name="L853"></a> 853     <strong class="reserved">void</strong> <a href="../S/5486.html#L688" title="Referred from 688 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">signalSplitData</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L854" name="L854"></a> 854         fSplitNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L855" name="L855"></a> 855         <em class="comment">// notify document</em>
<a id="L856" name="L856"></a> 856         fDocument.<a href="../S/5446.html#L372" title="Defined at 372 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">splitData</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L857" name="L857"></a> 857         fSplitNode = <strong class="reserved">null</strong>;
<a id="L858" name="L858"></a> 858     <em class="brace">}</em>
<a id="L859" name="L859"></a> 859 
<div class="comment">
 Fix up this Range if another Range has split a Text Node
       into 2 Nodes.</div>
<a id="L863" name="L863"></a> 863     <strong class="reserved">void</strong> <a href="../S/5446.html#L377" title="Referred from 377 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">receiveSplitData</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L864" name="L864"></a> 864         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong> || <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L865" name="L865"></a> 865         <strong class="reserved">if</strong> (fSplitNode == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <strong class="reserved">return</strong>;
<a id="L866" name="L866"></a> 866 
<a id="L867" name="L867"></a> 867         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fStartContainer
<a id="L868" name="L868"></a> 868         &amp;&amp; fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L869" name="L869"></a> 869             <strong class="reserved">if</strong> (fStartOffset &gt; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L870" name="L870"></a> 870                 fStartOffset = fStartOffset - <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L871" name="L871"></a> 871                 fStartContainer = <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>;
<a id="L872" name="L872"></a> 872             <em class="brace">}</em>
<a id="L873" name="L873"></a> 873         <em class="brace">}</em>
<a id="L874" name="L874"></a> 874         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fEndContainer
<a id="L875" name="L875"></a> 875         &amp;&amp; fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L876" name="L876"></a> 876             <strong class="reserved">if</strong> (fEndOffset &gt; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L877" name="L877"></a> 877                 fEndOffset = fEndOffset-<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L878" name="L878"></a> 878                 fEndContainer = <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>;
<a id="L879" name="L879"></a> 879             <em class="brace">}</em>
<a id="L880" name="L880"></a> 880         <em class="brace">}</em>
<a id="L881" name="L881"></a> 881 
<a id="L882" name="L882"></a> 882     <em class="brace">}</em>
<a id="L883" name="L883"></a> 883 
<div class="comment">
 This function inserts text into a Node and invokes
       a method to fix-up all other Ranges.</div>
<a id="L887" name="L887"></a> 887     <strong class="reserved">void</strong> <a href="../R/13208.html" title="Multiple referred from 2 places.">deleteData</a>(<a href="../D/1403.html" title="Multiple defined in 2 places.">CharacterData</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L888" name="L888"></a> 888         fDeleteNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L889" name="L889"></a> 889         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/14800.html" title="Multiple defined in 6 places.">deleteData</a>( <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>,  <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L890" name="L890"></a> 890         fDeleteNode = <strong class="reserved">null</strong>;
<a id="L891" name="L891"></a> 891     <em class="brace">}</em>
<a id="L892" name="L892"></a> 892 
<a id="L893" name="L893"></a> 893 
<div class="comment">
 This function is called from DOM.
       The  text has already beeen inserted.
       Fix-up any offsets.</div>
<a id="L898" name="L898"></a> 898     <strong class="reserved">void</strong> <a href="../S/5446.html#L347" title="Referred from 347 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">receiveDeletedText</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L899" name="L899"></a> 899         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L900" name="L900"></a> 900         <strong class="reserved">if</strong> (fDeleteNode == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <strong class="reserved">return</strong>;
<a id="L901" name="L901"></a> 901         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fStartContainer
<a id="L902" name="L902"></a> 902         &amp;&amp; fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L903" name="L903"></a> 903             <strong class="reserved">if</strong> (fStartOffset &gt; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L904" name="L904"></a> 904                 fStartOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+(fStartOffset-(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>));
<a id="L905" name="L905"></a> 905             <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L906" name="L906"></a> 906             <strong class="reserved">if</strong> (fStartOffset &gt; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L907" name="L907"></a> 907                 fStartOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L908" name="L908"></a> 908             <em class="brace">}</em>
<a id="L909" name="L909"></a> 909         <em class="brace">}</em>
<a id="L910" name="L910"></a> 910         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fEndContainer
<a id="L911" name="L911"></a> 911         &amp;&amp; fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L912" name="L912"></a> 912             <strong class="reserved">if</strong> (fEndOffset &gt; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L913" name="L913"></a> 913                 fEndOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+(fEndOffset-(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>));
<a id="L914" name="L914"></a> 914             <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L915" name="L915"></a> 915             <strong class="reserved">if</strong> (fEndOffset &gt; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L916" name="L916"></a> 916                 fEndOffset = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L917" name="L917"></a> 917             <em class="brace">}</em>
<a id="L918" name="L918"></a> 918         <em class="brace">}</em>
<a id="L919" name="L919"></a> 919 
<a id="L920" name="L920"></a> 920     <em class="brace">}</em>
<a id="L921" name="L921"></a> 921 
<div class="comment">
 This function inserts text into a Node and invokes
       a method to fix-up all other Ranges.</div>
<a id="L925" name="L925"></a> 925     <strong class="reserved">void</strong> <a href="../R/20765.html" title="Multiple referred from 2 places.">insertData</a>(<a href="../D/1403.html" title="Multiple defined in 2 places.">CharacterData</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>) <em class="brace">{</em>
<a id="L926" name="L926"></a> 926         fInsertNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L927" name="L927"></a> 927         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/24741.html" title="Multiple defined in 6 places.">insertData</a>( <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>,  <a href="../D/24721.html" title="Multiple defined in 265 places.">insert</a>);
<a id="L928" name="L928"></a> 928         fInsertNode = <strong class="reserved">null</strong>;
<a id="L929" name="L929"></a> 929     <em class="brace">}</em>
<a id="L930" name="L930"></a> 930 
<a id="L931" name="L931"></a> 931 
<div class="comment">
 This function is called from DOM.
       The  text has already beeen inserted.
       Fix-up any offsets.</div>
<a id="L936" name="L936"></a> 936     <strong class="reserved">void</strong> <a href="../S/5446.html#L362" title="Referred from 362 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">receiveInsertedText</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> len) <em class="brace">{</em>
<a id="L937" name="L937"></a> 937         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L938" name="L938"></a> 938         <strong class="reserved">if</strong> (fInsertNode == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <strong class="reserved">return</strong>;
<a id="L939" name="L939"></a> 939         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fStartContainer
<a id="L940" name="L940"></a> 940         &amp;&amp; fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L941" name="L941"></a> 941             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; fStartOffset) <em class="brace">{</em>
<a id="L942" name="L942"></a> 942                 fStartOffset = fStartOffset+len;
<a id="L943" name="L943"></a> 943             <em class="brace">}</em>
<a id="L944" name="L944"></a> 944         <em class="brace">}</em>
<a id="L945" name="L945"></a> 945         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fEndContainer
<a id="L946" name="L946"></a> 946         &amp;&amp; fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L947" name="L947"></a> 947             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; fEndOffset) <em class="brace">{</em>
<a id="L948" name="L948"></a> 948                 fEndOffset = fEndOffset+len;
<a id="L949" name="L949"></a> 949             <em class="brace">}</em>
<a id="L950" name="L950"></a> 950         <em class="brace">}</em>
<a id="L951" name="L951"></a> 951 
<a id="L952" name="L952"></a> 952     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953 
<div class="comment">
 This function is called from DOM.
       The  text has already beeen replaced.
       Fix-up any offsets.</div>
<a id="L958" name="L958"></a> 958     <strong class="reserved">void</strong> <a href="../S/5446.html#L333" title="Referred from 333 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">receiveReplacedText</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L959" name="L959"></a> 959         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L960" name="L960"></a> 960         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fStartContainer
<a id="L961" name="L961"></a> 961         &amp;&amp; fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L962" name="L962"></a> 962             fStartOffset = 0;
<a id="L963" name="L963"></a> 963         <em class="brace">}</em>
<a id="L964" name="L964"></a> 964         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == fEndContainer
<a id="L965" name="L965"></a> 965         &amp;&amp; fEndContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L966" name="L966"></a> 966             fEndOffset = 0;
<a id="L967" name="L967"></a> 967         <em class="brace">}</em>
<a id="L968" name="L968"></a> 968 
<a id="L969" name="L969"></a> 969     <em class="brace">}</em>
<a id="L970" name="L970"></a> 970 
<div class="comment">
 This function is called from the DOM.
       This node has already been inserted into the DOM.
       Fix-up any offsets.</div>
<a id="L975" name="L975"></a> 975     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5446.html#L1121" title="Referred from 1121 in src/com/sun/org/apache/xerces/internal/dom/DocumentImpl.java.">insertedNodeFromDOM</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L976" name="L976"></a> 976         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L977" name="L977"></a> 977         <strong class="reserved">if</strong> (fInsertNode == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <strong class="reserved">return</strong>;
<a id="L978" name="L978"></a> 978         <strong class="reserved">if</strong> (fInsertedFromRange) <strong class="reserved">return</strong>; <em class="comment">// Offsets are adjusted in Range.insertNode</em>
<a id="L979" name="L979"></a> 979 
<a id="L980" name="L980"></a> 980         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L981" name="L981"></a> 981 
<a id="L982" name="L982"></a> 982         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == fStartContainer) <em class="brace">{</em>
<a id="L983" name="L983"></a> 983             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, fStartContainer);
<a id="L984" name="L984"></a> 984             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; fStartOffset) <em class="brace">{</em>
<a id="L985" name="L985"></a> 985                 fStartOffset++;
<a id="L986" name="L986"></a> 986             <em class="brace">}</em>
<a id="L987" name="L987"></a> 987         <em class="brace">}</em>
<a id="L988" name="L988"></a> 988 
<a id="L989" name="L989"></a> 989         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == fEndContainer) <em class="brace">{</em>
<a id="L990" name="L990"></a> 990             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, fEndContainer);
<a id="L991" name="L991"></a> 991             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; fEndOffset) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992                 fEndOffset++;
<a id="L993" name="L993"></a> 993             <em class="brace">}</em>
<a id="L994" name="L994"></a> 994         <em class="brace">}</em>
<a id="L995" name="L995"></a> 995 
<a id="L996" name="L996"></a> 996     <em class="brace">}</em>
<a id="L997" name="L997"></a> 997 
<div class="comment">
 This function is called within Range
       instead of Node.removeChild,
       so that the range can remember that it is actively
       removing this child.</div>
<a id="L1003" name="L1003"></a>1003 
<a id="L1004" name="L1004"></a>1004     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fRemoveChild = <strong class="reserved">null</strong>;
<a id="L1005" name="L1005"></a>1005     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/25920.html" title="Multiple referred from 47 places.">removeChild</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> child) <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006         fRemoveChild = child;
<a id="L1007" name="L1007"></a>1007         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>(child);
<a id="L1008" name="L1008"></a>1008         fRemoveChild = <strong class="reserved">null</strong>;
<a id="L1009" name="L1009"></a>1009         <strong class="reserved">return</strong> n;
<a id="L1010" name="L1010"></a>1010     <em class="brace">}</em>
<a id="L1011" name="L1011"></a>1011 
<div class="comment">
 This function must be called by the DOM _BEFORE_
       a node is deleted, because at that time it is
       connected in the DOM tree, which we depend on.</div>
<a id="L1016" name="L1016"></a>1016     <strong class="reserved">void</strong> <a href="../R/26030.html" title="Multiple referred from 14 places.">removeNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L1018" name="L1018"></a>1018         <strong class="reserved">if</strong> (fRemoveChild == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <strong class="reserved">return</strong>;
<a id="L1019" name="L1019"></a>1019 
<a id="L1020" name="L1020"></a>1020         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1021" name="L1021"></a>1021 
<a id="L1022" name="L1022"></a>1022         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == fStartContainer) <em class="brace">{</em>
<a id="L1023" name="L1023"></a>1023             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, fStartContainer);
<a id="L1024" name="L1024"></a>1024             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; fStartOffset) <em class="brace">{</em>
<a id="L1025" name="L1025"></a>1025                 fStartOffset--;
<a id="L1026" name="L1026"></a>1026             <em class="brace">}</em>
<a id="L1027" name="L1027"></a>1027         <em class="brace">}</em>
<a id="L1028" name="L1028"></a>1028 
<a id="L1029" name="L1029"></a>1029         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == fEndContainer) <em class="brace">{</em>
<a id="L1030" name="L1030"></a>1030             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, fEndContainer);
<a id="L1031" name="L1031"></a>1031             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; fEndOffset) <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032                 fEndOffset--;
<a id="L1033" name="L1033"></a>1033             <em class="brace">}</em>
<a id="L1034" name="L1034"></a>1034         <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035         <em class="comment">//startContainer or endContainer or both is/are the ancestor(s) of the Node to be deleted</em>
<a id="L1036" name="L1036"></a>1036         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != fStartContainer
<a id="L1037" name="L1037"></a>1037         ||  <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != fEndContainer) <em class="brace">{</em>
<a id="L1038" name="L1038"></a>1038             <strong class="reserved">if</strong> (<a href="../D/25188.html" title="Multiple defined in 2 places.">isAncestorOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, fStartContainer)) <em class="brace">{</em>
<a id="L1039" name="L1039"></a>1039                 fStartContainer = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L1040" name="L1040"></a>1040                 fStartOffset = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L1041" name="L1041"></a>1041             <em class="brace">}</em>
<a id="L1042" name="L1042"></a>1042             <strong class="reserved">if</strong> (<a href="../D/25188.html" title="Multiple defined in 2 places.">isAncestorOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, fEndContainer)) <em class="brace">{</em>
<a id="L1043" name="L1043"></a>1043                 fEndContainer = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L1044" name="L1044"></a>1044                 fEndOffset = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L1045" name="L1045"></a>1045             <em class="brace">}</em>
<a id="L1046" name="L1046"></a>1046         <em class="brace">}</em>
<a id="L1047" name="L1047"></a>1047 
<a id="L1048" name="L1048"></a>1048     <em class="brace">}</em>
<a id="L1049" name="L1049"></a>1049 
<a id="L1050" name="L1050"></a>1050     <em class="comment">//</em>
<a id="L1051" name="L1051"></a>1051     <em class="comment">// Utility functions.</em>
<a id="L1052" name="L1052"></a>1052     <em class="comment">//</em>
<a id="L1053" name="L1053"></a>1053 
<a id="L1054" name="L1054"></a>1054     <em class="comment">// parameters for traverseContents(int)</em>
<a id="L1055" name="L1055"></a>1055     <em class="comment">//REVIST: use boolean, since there are only 2 now...</em>
<a id="L1056" name="L1056"></a>1056     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> EXTRACT_CONTENTS = 1;
<a id="L1057" name="L1057"></a>1057     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CLONE_CONTENTS = 2;
<a id="L1058" name="L1058"></a>1058     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DELETE_CONTENTS = 3;
<a id="L1059" name="L1059"></a>1059 
<div class="comment">
      This is the master routine invoked to visit the nodes
      selected by this range.  For each such node, different
      actions are taken depending on the value of the
      <code>how</code> argument.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a document fragment containing the range's content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but sill
                    produced cloned content in a document fragment
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes.
                    </li></ol>
      @return Returns a document fragment containing any
              copied or extracted nodes.  If the <code>how</code>
              parameter was <code>DELETE_CONTENTS</code>, the
              return value is null.</div>
<a id="L1090" name="L1090"></a>1090     <strong class="reserved">private</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> <a href="../R/29488.html" title="Multiple referred from 3 places.">traverseContents</a>( <strong class="reserved">int</strong> how )
<a id="L1091" name="L1091"></a>1091         <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L1092" name="L1092"></a>1092     <em class="brace">{</em>
<a id="L1093" name="L1093"></a>1093         <strong class="reserved">if</strong> (fStartContainer == <strong class="reserved">null</strong> || fEndContainer == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1094" name="L1094"></a>1094             <strong class="reserved">return</strong> <strong class="reserved">null</strong>; <em class="comment">// REVIST: Throw exception?</em>
<a id="L1095" name="L1095"></a>1095         <em class="brace">}</em>
<a id="L1096" name="L1096"></a>1096 
<a id="L1097" name="L1097"></a>1097         <em class="comment">//Check for a detached range.</em>
<a id="L1098" name="L1098"></a>1098         <strong class="reserved">if</strong>( fDetach) <em class="brace">{</em>
<a id="L1099" name="L1099"></a>1099             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L1100" name="L1100"></a>1100                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,
<a id="L1101" name="L1101"></a>1101                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INVALID_STATE_ERR", <strong class="reserved">null</strong>));
<a id="L1102" name="L1102"></a>1102         <em class="brace">}</em>
<a id="L1103" name="L1103"></a>1103 
<div class="comment">
          Traversal is accomplished by first determining the
          relationship between the endpoints of the range.
          For each of four significant relationships, we will
          delegate the traversal call to a method that
          can make appropriate assumptions.</div>
<a id="L1111" name="L1111"></a>1111 
<a id="L1112" name="L1112"></a>1112         <em class="comment">// case 1: same container</em>
<a id="L1113" name="L1113"></a>1113         <strong class="reserved">if</strong> ( fStartContainer == fEndContainer )
<a id="L1114" name="L1114"></a>1114             <strong class="reserved">return</strong> <a href="../S/5486.html#L1199" title="Defined at 1199 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseSameContainer</a>( how );
<a id="L1115" name="L1115"></a>1115 
<a id="L1116" name="L1116"></a>1116 
<a id="L1117" name="L1117"></a>1117         <em class="comment">// case 2: Child C of start container is ancestor of end container</em>
<a id="L1118" name="L1118"></a>1118         <em class="comment">// This can be quickly tested by walking the parent chain of</em>
<a id="L1119" name="L1119"></a>1119         <em class="comment">// end container</em>
<a id="L1120" name="L1120"></a>1120         <strong class="reserved">int</strong> endContainerDepth = 0;
<a id="L1121" name="L1121"></a>1121         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = fEndContainer, p = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1122" name="L1122"></a>1122              p != <strong class="reserved">null</strong>;
<a id="L1123" name="L1123"></a>1123              <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = p, p = p.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>())
<a id="L1124" name="L1124"></a>1124         <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125             <strong class="reserved">if</strong> (p == fStartContainer)
<a id="L1126" name="L1126"></a>1126                 <strong class="reserved">return</strong> <a href="../S/5486.html#L1285" title="Defined at 1285 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseCommonStartContainer</a>( <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, how );
<a id="L1127" name="L1127"></a>1127             ++endContainerDepth;
<a id="L1128" name="L1128"></a>1128         <em class="brace">}</em>
<a id="L1129" name="L1129"></a>1129 
<a id="L1130" name="L1130"></a>1130         <em class="comment">// case 3: Child C of container B is ancestor of A</em>
<a id="L1131" name="L1131"></a>1131         <em class="comment">// This can be quickly tested by walking the parent chain of A</em>
<a id="L1132" name="L1132"></a>1132         <strong class="reserved">int</strong> startContainerDepth = 0;
<a id="L1133" name="L1133"></a>1133         <strong class="reserved">for</strong> ( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = fStartContainer, p = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1134" name="L1134"></a>1134              p != <strong class="reserved">null</strong>;
<a id="L1135" name="L1135"></a>1135              <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = p, p = p.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>())
<a id="L1136" name="L1136"></a>1136         <em class="brace">{</em>
<a id="L1137" name="L1137"></a>1137             <strong class="reserved">if</strong> (p == fEndContainer)
<a id="L1138" name="L1138"></a>1138                 <strong class="reserved">return</strong> <a href="../S/5486.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseCommonEndContainer</a>( <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, how );
<a id="L1139" name="L1139"></a>1139             ++startContainerDepth;
<a id="L1140" name="L1140"></a>1140         <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141 
<a id="L1142" name="L1142"></a>1142         <em class="comment">// case 4: There is a common ancestor container.  Find the</em>
<a id="L1143" name="L1143"></a>1143         <em class="comment">// ancestor siblings that are children of that container.</em>
<a id="L1144" name="L1144"></a>1144         <strong class="reserved">int</strong> depthDiff = startContainerDepth - endContainerDepth;
<a id="L1145" name="L1145"></a>1145 
<a id="L1146" name="L1146"></a>1146         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a> = fStartContainer;
<a id="L1147" name="L1147"></a>1147         <strong class="reserved">while</strong> (depthDiff &gt; 0) <em class="brace">{</em>
<a id="L1148" name="L1148"></a>1148             <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a> = <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1149" name="L1149"></a>1149             depthDiff--;
<a id="L1150" name="L1150"></a>1150         <em class="brace">}</em>
<a id="L1151" name="L1151"></a>1151 
<a id="L1152" name="L1152"></a>1152         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/15461.html" title="Multiple defined in 3 places.">endNode</a> = fEndContainer;
<a id="L1153" name="L1153"></a>1153         <strong class="reserved">while</strong> (depthDiff &lt; 0) <em class="brace">{</em>
<a id="L1154" name="L1154"></a>1154             <a href="../D/15461.html" title="Multiple defined in 3 places.">endNode</a> = <a href="../D/15461.html" title="Multiple defined in 3 places.">endNode</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1155" name="L1155"></a>1155             depthDiff++;
<a id="L1156" name="L1156"></a>1156         <em class="brace">}</em>
<a id="L1157" name="L1157"></a>1157 
<a id="L1158" name="L1158"></a>1158         <em class="comment">// ascend the ancestor hierarchy until we have a common parent.</em>
<a id="L1159" name="L1159"></a>1159         <strong class="reserved">for</strong>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sp = <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>(), ep = <a href="../D/15461.html" title="Multiple defined in 3 places.">endNode</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1160" name="L1160"></a>1160              sp!=ep;
<a id="L1161" name="L1161"></a>1161              sp = sp.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>(), ep = ep.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>() )
<a id="L1162" name="L1162"></a>1162         <em class="brace">{</em>
<a id="L1163" name="L1163"></a>1163             <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a> = sp;
<a id="L1164" name="L1164"></a>1164             <a href="../D/15461.html" title="Multiple defined in 3 places.">endNode</a> = ep;
<a id="L1165" name="L1165"></a>1165         <em class="brace">}</em>
<a id="L1166" name="L1166"></a>1166         <strong class="reserved">return</strong> <a href="../S/5486.html#L1439" title="Defined at 1439 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseCommonAncestors</a>( <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a>, <a href="../D/15461.html" title="Multiple defined in 3 places.">endNode</a>, how );
<a id="L1167" name="L1167"></a>1167     <em class="brace">}</em>
<a id="L1168" name="L1168"></a>1168 
<div class="comment">
      Visits the nodes selected by this range when we know
      a-priori that the start and end containers are the same.
      This method is invoked by the generic <code>traverse</code>
      method.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a document fragment containing the range's content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but sill
                    produced cloned content in a document fragment
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes.
                    </li></ol>
      @return Returns a document fragment containing any
              copied or extracted nodes.  If the <code>how</code>
              parameter was <code>DELETE_CONTENTS</code>, the
              return value is null.</div>
<a id="L1199" name="L1199"></a>1199     <strong class="reserved">private</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> <a href="../S/5486.html#L1114" title="Referred from 1114 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseSameContainer</a>( <strong class="reserved">int</strong> how )
<a id="L1200" name="L1200"></a>1200     <em class="brace">{</em>
<a id="L1201" name="L1201"></a>1201         <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> frag = <strong class="reserved">null</strong>;
<a id="L1202" name="L1202"></a>1202         <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS)
<a id="L1203" name="L1203"></a>1203             frag = fDocument.<a href="../D/13813.html" title="Multiple defined in 8 places.">createDocumentFragment</a>();
<a id="L1204" name="L1204"></a>1204 
<a id="L1205" name="L1205"></a>1205         <em class="comment">// If selection is empty, just return the fragment</em>
<a id="L1206" name="L1206"></a>1206         <strong class="reserved">if</strong> ( fStartOffset==fEndOffset )
<a id="L1207" name="L1207"></a>1207             <strong class="reserved">return</strong> frag;
<a id="L1208" name="L1208"></a>1208 
<a id="L1209" name="L1209"></a>1209         <em class="comment">// Text node needs special case handling</em>
<a id="L1210" name="L1210"></a>1210         <strong class="reserved">if</strong> ( fStartContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()==<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE )
<a id="L1211" name="L1211"></a>1211         <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212             <em class="comment">// get the substring</em>
<a id="L1213" name="L1213"></a>1213             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s = fStartContainer.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>();
<a id="L1214" name="L1214"></a>1214             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sub = s.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>( fStartOffset, fEndOffset );
<a id="L1215" name="L1215"></a>1215 
<a id="L1216" name="L1216"></a>1216             <em class="comment">// set the original text node to its new value</em>
<a id="L1217" name="L1217"></a>1217             <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1218" name="L1218"></a>1218             <em class="brace">{</em>
<a id="L1219" name="L1219"></a>1219                 ((<a href="../D/8917.html" title="Multiple defined in 2 places.">TextImpl</a>)fStartContainer).<a href="../D/14800.html" title="Multiple defined in 6 places.">deleteData</a>(fStartOffset,
<a id="L1220" name="L1220"></a>1220                      fEndOffset-fStartOffset) ;
<a id="L1221" name="L1221"></a>1221                 <em class="comment">// Nothing is partially selected, so collapse to start point</em>
<a id="L1222" name="L1222"></a>1222                 <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>( <strong class="reserved">true</strong> );
<a id="L1223" name="L1223"></a>1223             <em class="brace">}</em>
<a id="L1224" name="L1224"></a>1224             <strong class="reserved">if</strong> ( how==DELETE_CONTENTS)
<a id="L1225" name="L1225"></a>1225                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1226" name="L1226"></a>1226             frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( fDocument.<a href="../D/14246.html" title="Multiple defined in 5 places.">createTextNode</a>(sub) );
<a id="L1227" name="L1227"></a>1227             <strong class="reserved">return</strong> frag;
<a id="L1228" name="L1228"></a>1228         <em class="brace">}</em>
<a id="L1229" name="L1229"></a>1229 
<a id="L1230" name="L1230"></a>1230         <em class="comment">// Copy nodes between the start/end offsets.</em>
<a id="L1231" name="L1231"></a>1231         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../S/5486.html#L2064" title="Defined at 2064 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">getSelectedNode</a>( fStartContainer, fStartOffset );
<a id="L1232" name="L1232"></a>1232         <strong class="reserved">int</strong> cnt = fEndOffset - fStartOffset;
<a id="L1233" name="L1233"></a>1233         <strong class="reserved">while</strong>( cnt &gt; 0 )
<a id="L1234" name="L1234"></a>1234         <em class="brace">{</em>
<a id="L1235" name="L1235"></a>1235             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sibling = n.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1236" name="L1236"></a>1236             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> xferNode = <a href="../S/5486.html#L1757" title="Defined at 1757 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseFullySelected</a>( n, how );
<a id="L1237" name="L1237"></a>1237             <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1238" name="L1238"></a>1238                 frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( xferNode );
<a id="L1239" name="L1239"></a>1239             --cnt;
<a id="L1240" name="L1240"></a>1240             n = sibling;
<a id="L1241" name="L1241"></a>1241         <em class="brace">}</em>
<a id="L1242" name="L1242"></a>1242 
<a id="L1243" name="L1243"></a>1243         <em class="comment">// Nothing is partially selected, so collapse to start point</em>
<a id="L1244" name="L1244"></a>1244         <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1245" name="L1245"></a>1245             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>( <strong class="reserved">true</strong> );
<a id="L1246" name="L1246"></a>1246         <strong class="reserved">return</strong> frag;
<a id="L1247" name="L1247"></a>1247     <em class="brace">}</em>
<a id="L1248" name="L1248"></a>1248 
<div class="comment">
      Visits the nodes selected by this range when we know
      a-priori that the start and end containers are not the
      same, but the start container is an ancestor of the
      end container. This method is invoked by the generic
      <code>traverse</code> method.
      @param endAncestor
                    The ancestor of the end container that is a direct child
                    of the start container.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a document fragment containing the range's content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but sill
                    produced cloned content in a document fragment
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes.
                    </li></ol>
      @return Returns a document fragment containing any
              copied or extracted nodes.  If the <code>how</code>
              parameter was <code>DELETE_CONTENTS</code>, the
              return value is null.</div>
<a id="L1284" name="L1284"></a>1284     <strong class="reserved">private</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a>
<a id="L1285" name="L1285"></a>1285         <a href="../S/5486.html#L1126" title="Referred from 1126 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseCommonStartContainer</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> endAncestor, <strong class="reserved">int</strong> how )
<a id="L1286" name="L1286"></a>1286     <em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287         <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> frag = <strong class="reserved">null</strong>;
<a id="L1288" name="L1288"></a>1288         <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS)
<a id="L1289" name="L1289"></a>1289             frag = fDocument.<a href="../D/13813.html" title="Multiple defined in 8 places.">createDocumentFragment</a>();
<a id="L1290" name="L1290"></a>1290         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../S/5486.html#L1537" title="Defined at 1537 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseRightBoundary</a>( endAncestor, how );
<a id="L1291" name="L1291"></a>1291         <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1292" name="L1292"></a>1292             frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( n );
<a id="L1293" name="L1293"></a>1293 
<a id="L1294" name="L1294"></a>1294         <strong class="reserved">int</strong> endIdx = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( endAncestor, fStartContainer );
<a id="L1295" name="L1295"></a>1295         <strong class="reserved">int</strong> cnt = endIdx - fStartOffset;
<a id="L1296" name="L1296"></a>1296         <strong class="reserved">if</strong> ( cnt &lt;=0 )
<a id="L1297" name="L1297"></a>1297         <em class="brace">{</em>
<a id="L1298" name="L1298"></a>1298             <em class="comment">// Collapse to just before the endAncestor, which</em>
<a id="L1299" name="L1299"></a>1299             <em class="comment">// is partially selected.</em>
<a id="L1300" name="L1300"></a>1300             <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1301" name="L1301"></a>1301             <em class="brace">{</em>
<a id="L1302" name="L1302"></a>1302                 <a href="../D/32586.html" title="Multiple defined in 2 places.">setEndBefore</a>( endAncestor );
<a id="L1303" name="L1303"></a>1303                 <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>( <strong class="reserved">false</strong> );
<a id="L1304" name="L1304"></a>1304             <em class="brace">}</em>
<a id="L1305" name="L1305"></a>1305             <strong class="reserved">return</strong> frag;
<a id="L1306" name="L1306"></a>1306         <em class="brace">}</em>
<a id="L1307" name="L1307"></a>1307 
<a id="L1308" name="L1308"></a>1308         n = endAncestor.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L1309" name="L1309"></a>1309         <strong class="reserved">while</strong>( cnt &gt; 0 )
<a id="L1310" name="L1310"></a>1310         <em class="brace">{</em>
<a id="L1311" name="L1311"></a>1311             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sibling = n.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L1312" name="L1312"></a>1312             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> xferNode = <a href="../S/5486.html#L1757" title="Defined at 1757 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseFullySelected</a>( n, how );
<a id="L1313" name="L1313"></a>1313             <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1314" name="L1314"></a>1314                 frag.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>( xferNode, frag.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>() );
<a id="L1315" name="L1315"></a>1315             --cnt;
<a id="L1316" name="L1316"></a>1316             n = sibling;
<a id="L1317" name="L1317"></a>1317         <em class="brace">}</em>
<a id="L1318" name="L1318"></a>1318         <em class="comment">// Collapse to just before the endAncestor, which</em>
<a id="L1319" name="L1319"></a>1319         <em class="comment">// is partially selected.</em>
<a id="L1320" name="L1320"></a>1320         <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1321" name="L1321"></a>1321         <em class="brace">{</em>
<a id="L1322" name="L1322"></a>1322             <a href="../D/32586.html" title="Multiple defined in 2 places.">setEndBefore</a>( endAncestor );
<a id="L1323" name="L1323"></a>1323             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>( <strong class="reserved">false</strong> );
<a id="L1324" name="L1324"></a>1324         <em class="brace">}</em>
<a id="L1325" name="L1325"></a>1325         <strong class="reserved">return</strong> frag;
<a id="L1326" name="L1326"></a>1326     <em class="brace">}</em>
<a id="L1327" name="L1327"></a>1327 
<div class="comment">
      Visits the nodes selected by this range when we know
      a-priori that the start and end containers are not the
      same, but the end container is an ancestor of the
      start container. This method is invoked by the generic
      <code>traverse</code> method.
      @param startAncestor
                    The ancestor of the start container that is a direct
                    child of the end container.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a document fragment containing the range's content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but sill
                    produced cloned content in a document fragment
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes.
                    </li></ol>
      @return Returns a document fragment containing any
              copied or extracted nodes.  If the <code>how</code>
              parameter was <code>DELETE_CONTENTS</code>, the
              return value is null.</div>
<a id="L1363" name="L1363"></a>1363     <strong class="reserved">private</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a>
<a id="L1364" name="L1364"></a>1364         <a href="../S/5486.html#L1138" title="Referred from 1138 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseCommonEndContainer</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> startAncestor, <strong class="reserved">int</strong> how )
<a id="L1365" name="L1365"></a>1365     <em class="brace">{</em>
<a id="L1366" name="L1366"></a>1366         <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> frag = <strong class="reserved">null</strong>;
<a id="L1367" name="L1367"></a>1367         <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS)
<a id="L1368" name="L1368"></a>1368             frag = fDocument.<a href="../D/13813.html" title="Multiple defined in 8 places.">createDocumentFragment</a>();
<a id="L1369" name="L1369"></a>1369         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../S/5486.html#L1640" title="Defined at 1640 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseLeftBoundary</a>( startAncestor, how );
<a id="L1370" name="L1370"></a>1370         <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1371" name="L1371"></a>1371             frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( n );
<a id="L1372" name="L1372"></a>1372         <strong class="reserved">int</strong> startIdx = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( startAncestor, fEndContainer );
<a id="L1373" name="L1373"></a>1373         ++startIdx;  <em class="comment">// Because we already traversed it....</em>
<a id="L1374" name="L1374"></a>1374 
<a id="L1375" name="L1375"></a>1375         <strong class="reserved">int</strong> cnt = fEndOffset - startIdx;
<a id="L1376" name="L1376"></a>1376         n = startAncestor.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1377" name="L1377"></a>1377         <strong class="reserved">while</strong>( cnt &gt; 0 )
<a id="L1378" name="L1378"></a>1378         <em class="brace">{</em>
<a id="L1379" name="L1379"></a>1379             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sibling = n.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1380" name="L1380"></a>1380             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> xferNode = <a href="../S/5486.html#L1757" title="Defined at 1757 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseFullySelected</a>( n, how );
<a id="L1381" name="L1381"></a>1381             <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1382" name="L1382"></a>1382                 frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( xferNode );
<a id="L1383" name="L1383"></a>1383             --cnt;
<a id="L1384" name="L1384"></a>1384             n = sibling;
<a id="L1385" name="L1385"></a>1385         <em class="brace">}</em>
<a id="L1386" name="L1386"></a>1386 
<a id="L1387" name="L1387"></a>1387         <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1388" name="L1388"></a>1388         <em class="brace">{</em>
<a id="L1389" name="L1389"></a>1389             <a href="../D/33998.html" title="Multiple defined in 2 places.">setStartAfter</a>( startAncestor );
<a id="L1390" name="L1390"></a>1390             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>( <strong class="reserved">true</strong> );
<a id="L1391" name="L1391"></a>1391         <em class="brace">}</em>
<a id="L1392" name="L1392"></a>1392 
<a id="L1393" name="L1393"></a>1393         <strong class="reserved">return</strong> frag;
<a id="L1394" name="L1394"></a>1394     <em class="brace">}</em>
<a id="L1395" name="L1395"></a>1395 
<div class="comment">
      Visits the nodes selected by this range when we know
      a-priori that the start and end containers are not
      the same, and we also know that neither the start
      nor end container is an ancestor of the other.
      This method is invoked by
      the generic <code>traverse</code> method.
      @param startAncestor
                    Given a common ancestor of the start and end containers,
                    this parameter is the ancestor (or self) of the start
                    container that is a direct child of the common ancestor.
      @param endAncestor
                    Given a common ancestor of the start and end containers,
                    this parameter is the ancestor (or self) of the end
                    container that is a direct child of the common ancestor.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a document fragment containing the range's content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but sill
                    produced cloned content in a document fragment
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes.
                    </li></ol>
      @return Returns a document fragment containing any
              copied or extracted nodes.  If the <code>how</code>
              parameter was <code>DELETE_CONTENTS</code>, the
              return value is null.</div>
<a id="L1438" name="L1438"></a>1438     <strong class="reserved">private</strong> <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a>
<a id="L1439" name="L1439"></a>1439         <a href="../S/5486.html#L1166" title="Referred from 1166 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseCommonAncestors</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> startAncestor, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> endAncestor, <strong class="reserved">int</strong> how )
<a id="L1440" name="L1440"></a>1440     <em class="brace">{</em>
<a id="L1441" name="L1441"></a>1441         <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> frag = <strong class="reserved">null</strong>;
<a id="L1442" name="L1442"></a>1442         <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS)
<a id="L1443" name="L1443"></a>1443             frag = fDocument.<a href="../D/13813.html" title="Multiple defined in 8 places.">createDocumentFragment</a>();
<a id="L1444" name="L1444"></a>1444 
<a id="L1445" name="L1445"></a>1445         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = <a href="../S/5486.html#L1640" title="Defined at 1640 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseLeftBoundary</a>( startAncestor, how );
<a id="L1446" name="L1446"></a>1446         <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1447" name="L1447"></a>1447             frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( n );
<a id="L1448" name="L1448"></a>1448 
<a id="L1449" name="L1449"></a>1449         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> commonParent = startAncestor.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1450" name="L1450"></a>1450         <strong class="reserved">int</strong> startOffset = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( startAncestor, commonParent );
<a id="L1451" name="L1451"></a>1451         <strong class="reserved">int</strong> endOffset = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>( endAncestor, commonParent );
<a id="L1452" name="L1452"></a>1452         ++startOffset;
<a id="L1453" name="L1453"></a>1453 
<a id="L1454" name="L1454"></a>1454         <strong class="reserved">int</strong> cnt = endOffset - startOffset;
<a id="L1455" name="L1455"></a>1455         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sibling = startAncestor.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1456" name="L1456"></a>1456 
<a id="L1457" name="L1457"></a>1457         <strong class="reserved">while</strong>( cnt &gt; 0 )
<a id="L1458" name="L1458"></a>1458         <em class="brace">{</em>
<a id="L1459" name="L1459"></a>1459             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> = sibling.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1460" name="L1460"></a>1460             n = <a href="../S/5486.html#L1757" title="Defined at 1757 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseFullySelected</a>( sibling, how );
<a id="L1461" name="L1461"></a>1461             <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1462" name="L1462"></a>1462                 frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( n );
<a id="L1463" name="L1463"></a>1463             sibling = <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>;
<a id="L1464" name="L1464"></a>1464             --cnt;
<a id="L1465" name="L1465"></a>1465         <em class="brace">}</em>
<a id="L1466" name="L1466"></a>1466 
<a id="L1467" name="L1467"></a>1467         n = <a href="../S/5486.html#L1537" title="Defined at 1537 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseRightBoundary</a>( endAncestor, how );
<a id="L1468" name="L1468"></a>1468         <strong class="reserved">if</strong> ( frag!=<strong class="reserved">null</strong> )
<a id="L1469" name="L1469"></a>1469             frag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( n );
<a id="L1470" name="L1470"></a>1470 
<a id="L1471" name="L1471"></a>1471         <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1472" name="L1472"></a>1472         <em class="brace">{</em>
<a id="L1473" name="L1473"></a>1473             <a href="../D/33998.html" title="Multiple defined in 2 places.">setStartAfter</a>( startAncestor );
<a id="L1474" name="L1474"></a>1474             <a href="../D/12973.html" title="Multiple defined in 8 places.">collapse</a>( <strong class="reserved">true</strong> );
<a id="L1475" name="L1475"></a>1475         <em class="brace">}</em>
<a id="L1476" name="L1476"></a>1476         <strong class="reserved">return</strong> frag;
<a id="L1477" name="L1477"></a>1477     <em class="brace">}</em>
<a id="L1478" name="L1478"></a>1478 
<div class="comment">
      Traverses the "right boundary" of this range and
      operates on each "boundary node" according to the
      <code>how</code> parameter.  It is a-priori assumed
      by this method that the right boundary does
      not contain the range's start container.
      <p>
      A "right boundary" is best visualized by thinking
      of a sample tree:</p><pre>                      A
                     /|\
                    / | \
                   /  |  \
                  B   C   D
                 /|\     /|\
                E F G   H I J
      </pre>
      Imagine first a range that begins between the
      "E" and "F" nodes and ends between the
      "I" and "J" nodes.  The start container is
      "B" and the end container is "D".  Given this setup,
      the following applies:
      <p>
      Partially Selected Nodes: B, D<br>
      Fully Selected Nodes: F, G, C, H, I
      </p><p>
      The "right boundary" is the highest subtree node
      that contains the ending container.  The root of
      this subtree is always partially selected.
      </p><p>
      In this example, the nodes that are traversed
      as "right boundary" nodes are: H, I, and D.
      @param root   The node that is the root of the "right boundary" subtree.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    </p><ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a node containing the boundaries content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but will
                    produced cloned content.
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes within the boundary.
                    </li></ol>
      @return Returns a node that is the result of visiting nodes.
              If the traversal operation is
              <code>DELETE_CONTENTS</code> the return value is null.</div>
<a id="L1537" name="L1537"></a>1537     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/29504.html" title="Multiple referred from 2 places.">traverseRightBoundary</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <strong class="reserved">int</strong> how )
<a id="L1538" name="L1538"></a>1538     <em class="brace">{</em>
<a id="L1539" name="L1539"></a>1539         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../S/5486.html#L2064" title="Defined at 2064 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">getSelectedNode</a>( fEndContainer, fEndOffset-1 );
<a id="L1540" name="L1540"></a>1540         <strong class="reserved">boolean</strong> isFullySelected = ( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>!=fEndContainer );
<a id="L1541" name="L1541"></a>1541 
<a id="L1542" name="L1542"></a>1542         <strong class="reserved">if</strong> ( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>==<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> )
<a id="L1543" name="L1543"></a>1543             <strong class="reserved">return</strong> <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, isFullySelected, <strong class="reserved">false</strong>, how );
<a id="L1544" name="L1544"></a>1544 
<a id="L1545" name="L1545"></a>1545         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1546" name="L1546"></a>1546         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> clonedParent = <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, how );
<a id="L1547" name="L1547"></a>1547 
<a id="L1548" name="L1548"></a>1548         <strong class="reserved">while</strong>( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>!=<strong class="reserved">null</strong> )
<a id="L1549" name="L1549"></a>1549         <em class="brace">{</em>
<a id="L1550" name="L1550"></a>1550             <strong class="reserved">while</strong>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>!=<strong class="reserved">null</strong> )
<a id="L1551" name="L1551"></a>1551             <em class="brace">{</em>
<a id="L1552" name="L1552"></a>1552                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> prevSibling = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L1553" name="L1553"></a>1553                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> clonedChild =
<a id="L1554" name="L1554"></a>1554                     <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, isFullySelected, <strong class="reserved">false</strong>, how );
<a id="L1555" name="L1555"></a>1555                 <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS )
<a id="L1556" name="L1556"></a>1556                 <em class="brace">{</em>
<a id="L1557" name="L1557"></a>1557                     clonedParent.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>(
<a id="L1558" name="L1558"></a>1558                         clonedChild,
<a id="L1559" name="L1559"></a>1559                         clonedParent.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>()
<a id="L1560" name="L1560"></a>1560                     );
<a id="L1561" name="L1561"></a>1561                 <em class="brace">}</em>
<a id="L1562" name="L1562"></a>1562                 isFullySelected = <strong class="reserved">true</strong>;
<a id="L1563" name="L1563"></a>1563                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = prevSibling;
<a id="L1564" name="L1564"></a>1564             <em class="brace">}</em>
<a id="L1565" name="L1565"></a>1565             <strong class="reserved">if</strong> ( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>==<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> )
<a id="L1566" name="L1566"></a>1566                 <strong class="reserved">return</strong> clonedParent;
<a id="L1567" name="L1567"></a>1567 
<a id="L1568" name="L1568"></a>1568             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L1569" name="L1569"></a>1569             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1570" name="L1570"></a>1570             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> clonedGrandParent = <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, how );
<a id="L1571" name="L1571"></a>1571             <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS )
<a id="L1572" name="L1572"></a>1572                 clonedGrandParent.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( clonedParent );
<a id="L1573" name="L1573"></a>1573             clonedParent = clonedGrandParent;
<a id="L1574" name="L1574"></a>1574 
<a id="L1575" name="L1575"></a>1575         <em class="brace">}</em>
<a id="L1576" name="L1576"></a>1576 
<a id="L1577" name="L1577"></a>1577         <em class="comment">// should never occur</em>
<a id="L1578" name="L1578"></a>1578         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1579" name="L1579"></a>1579     <em class="brace">}</em>
<a id="L1580" name="L1580"></a>1580 
<div class="comment">
      Traverses the "left boundary" of this range and
      operates on each "boundary node" according to the
      <code>how</code> parameter.  It is a-priori assumed
      by this method that the left boundary does
      not contain the range's end container.
      <p>
      A "left boundary" is best visualized by thinking
      of a sample tree:</p><pre>                      A
                     /|\
                    / | \
                   /  |  \
                  B   C   D
                 /|\     /|\
                E F G   H I J
      </pre>
      Imagine first a range that begins between the
      "E" and "F" nodes and ends between the
      "I" and "J" nodes.  The start container is
      "B" and the end container is "D".  Given this setup,
      the following applies:
      <p>
      Partially Selected Nodes: B, D<br>
      Fully Selected Nodes: F, G, C, H, I
      </p><p>
      The "left boundary" is the highest subtree node
      that contains the starting container.  The root of
      this subtree is always partially selected.
      </p><p>
      In this example, the nodes that are traversed
      as "left boundary" nodes are: F, G, and B.
      @param root   The node that is the root of the "left boundary" subtree.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    </p><ol>
                    <li><code>EXTRACT_CONTENTS</code> - will produce
                    a node containing the boundaries content.
                    Partially selected nodes are copied, but fully
                    selected nodes are moved.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but will
                    produced cloned content.
                    </li><li><code>DELETE_CONTENTS</code> - will delete from
                    the context tree of the range, all fully selected
                    nodes within the boundary.
                    </li></ol>
      @return Returns a node that is the result of visiting nodes.
              If the traversal operation is
              <code>DELETE_CONTENTS</code> the return value is null.</div>
<a id="L1640" name="L1640"></a>1640     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/29496.html" title="Multiple referred from 2 places.">traverseLeftBoundary</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <strong class="reserved">int</strong> how )
<a id="L1641" name="L1641"></a>1641     <em class="brace">{</em>
<a id="L1642" name="L1642"></a>1642         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../S/5486.html#L2064" title="Defined at 2064 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">getSelectedNode</a>( <a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>(), <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() );
<a id="L1643" name="L1643"></a>1643         <strong class="reserved">boolean</strong> isFullySelected = ( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>!=<a href="../D/22715.html" title="Multiple defined in 2 places.">getStartContainer</a>() );
<a id="L1644" name="L1644"></a>1644 
<a id="L1645" name="L1645"></a>1645         <strong class="reserved">if</strong> ( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>==<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> )
<a id="L1646" name="L1646"></a>1646             <strong class="reserved">return</strong> <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, isFullySelected, <strong class="reserved">true</strong>, how );
<a id="L1647" name="L1647"></a>1647 
<a id="L1648" name="L1648"></a>1648         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1649" name="L1649"></a>1649         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> clonedParent = <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong>, how );
<a id="L1650" name="L1650"></a>1650 
<a id="L1651" name="L1651"></a>1651         <strong class="reserved">while</strong>( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>!=<strong class="reserved">null</strong> )
<a id="L1652" name="L1652"></a>1652         <em class="brace">{</em>
<a id="L1653" name="L1653"></a>1653             <strong class="reserved">while</strong>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>!=<strong class="reserved">null</strong> )
<a id="L1654" name="L1654"></a>1654             <em class="brace">{</em>
<a id="L1655" name="L1655"></a>1655                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1656" name="L1656"></a>1656                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> clonedChild =
<a id="L1657" name="L1657"></a>1657                     <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>, isFullySelected, <strong class="reserved">true</strong>, how );
<a id="L1658" name="L1658"></a>1658                 <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS )
<a id="L1659" name="L1659"></a>1659                     clonedParent.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(clonedChild);
<a id="L1660" name="L1660"></a>1660                 isFullySelected = <strong class="reserved">true</strong>;
<a id="L1661" name="L1661"></a>1661                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>;
<a id="L1662" name="L1662"></a>1662             <em class="brace">}</em>
<a id="L1663" name="L1663"></a>1663             <strong class="reserved">if</strong> ( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>==<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> )
<a id="L1664" name="L1664"></a>1664                 <strong class="reserved">return</strong> clonedParent;
<a id="L1665" name="L1665"></a>1665 
<a id="L1666" name="L1666"></a>1666             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L1667" name="L1667"></a>1667             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1668" name="L1668"></a>1668             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> clonedGrandParent = <a href="../S/5486.html#L1721" title="Defined at 1721 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseNode</a>( <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong>, how );
<a id="L1669" name="L1669"></a>1669             <strong class="reserved">if</strong> ( how!=DELETE_CONTENTS )
<a id="L1670" name="L1670"></a>1670                 clonedGrandParent.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>( clonedParent );
<a id="L1671" name="L1671"></a>1671             clonedParent = clonedGrandParent;
<a id="L1672" name="L1672"></a>1672 
<a id="L1673" name="L1673"></a>1673         <em class="brace">}</em>
<a id="L1674" name="L1674"></a>1674 
<a id="L1675" name="L1675"></a>1675         <em class="comment">// should never occur</em>
<a id="L1676" name="L1676"></a>1676         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1677" name="L1677"></a>1677 
<a id="L1678" name="L1678"></a>1678     <em class="brace">}</em>
<a id="L1679" name="L1679"></a>1679 
<div class="comment">
      Utility method for traversing a single node.
      Does not properly handle a text node containing both the
      start and end offsets.  Such nodes should
      have been previously detected and been routed to traverseTextNode.
      @param n      The node to be traversed.
      @param isFullySelected
                    Set to true if the node is fully selected.  Should be
                    false otherwise.
                    Note that although the DOM 2 specification says that a
                    text node that is boththe start and end container is not
                    selected, we treat it here as if it were partially
                    selected.
      @param isLeft Is true if we are traversing the node as part of navigating
                    the "left boundary" of the range.  If this value is false,
                    it implies we are navigating the "right boundary" of the
                    range.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will simply
                    return the original node.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but will
                    return a cloned node.
                    </li><li><code>DELETE_CONTENTS</code> - will delete the
                    node from it's parent, but will return null.
                    </li></ol>
      @return Returns a node that is the result of visiting the node.
              If the traversal operation is
              <code>DELETE_CONTENTS</code> the return value is null.</div>
<a id="L1721" name="L1721"></a>1721     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/29501.html" title="Multiple referred from 8 places.">traverseNode</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n, <strong class="reserved">boolean</strong> isFullySelected, <strong class="reserved">boolean</strong> isLeft, <strong class="reserved">int</strong> how )
<a id="L1722" name="L1722"></a>1722     <em class="brace">{</em>
<a id="L1723" name="L1723"></a>1723         <strong class="reserved">if</strong> ( isFullySelected )
<a id="L1724" name="L1724"></a>1724             <strong class="reserved">return</strong> <a href="../S/5486.html#L1757" title="Defined at 1757 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseFullySelected</a>( n, how );
<a id="L1725" name="L1725"></a>1725         <strong class="reserved">if</strong> ( n.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()==<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE )
<a id="L1726" name="L1726"></a>1726             <strong class="reserved">return</strong> <a href="../S/5486.html#L1852" title="Defined at 1852 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseTextNode</a>( n, isLeft, how );
<a id="L1727" name="L1727"></a>1727         <strong class="reserved">return</strong> <a href="../S/5486.html#L1806" title="Defined at 1806 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traversePartiallySelected</a>( n, how );
<a id="L1728" name="L1728"></a>1728     <em class="brace">}</em>
<a id="L1729" name="L1729"></a>1729 
<div class="comment">
      Utility method for traversing a single node when
      we know a-priori that the node if fully
      selected.
      @param n      The node to be traversed.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will simply
                    return the original node.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but will
                    return a cloned node.
                    </li><li><code>DELETE_CONTENTS</code> - will delete the
                    node from it's parent, but will return null.
                    </li></ol>
      @return Returns a node that is the result of visiting the node.
              If the traversal operation is
              <code>DELETE_CONTENTS</code> the return value is null.</div>
<a id="L1757" name="L1757"></a>1757     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/29492.html" title="Multiple referred from 5 places.">traverseFullySelected</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n, <strong class="reserved">int</strong> how )
<a id="L1758" name="L1758"></a>1758     <em class="brace">{</em>
<a id="L1759" name="L1759"></a>1759         <strong class="reserved">switch</strong>( how )
<a id="L1760" name="L1760"></a>1760         <em class="brace">{</em>
<a id="L1761" name="L1761"></a>1761         <strong class="reserved">case</strong> CLONE_CONTENTS:
<a id="L1762" name="L1762"></a>1762             <strong class="reserved">return</strong> n.<a href="../D/12908.html" title="Multiple defined in 21 places.">cloneNode</a>( <strong class="reserved">true</strong> );
<a id="L1763" name="L1763"></a>1763         <strong class="reserved">case</strong> EXTRACT_CONTENTS:
<a id="L1764" name="L1764"></a>1764             <strong class="reserved">if</strong> ( n.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()==<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_TYPE_NODE )
<a id="L1765" name="L1765"></a>1765             <em class="brace">{</em>
<a id="L1766" name="L1766"></a>1766                 <em class="comment">// TBD: This should be a HIERARCHY_REQUEST_ERR</em>
<a id="L1767" name="L1767"></a>1767                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L1768" name="L1768"></a>1768                         <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.HIERARCHY_REQUEST_ERR,
<a id="L1769" name="L1769"></a>1769                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "HIERARCHY_REQUEST_ERR", <strong class="reserved">null</strong>));
<a id="L1770" name="L1770"></a>1770             <em class="brace">}</em>
<a id="L1771" name="L1771"></a>1771             <strong class="reserved">return</strong> n;
<a id="L1772" name="L1772"></a>1772         <strong class="reserved">case</strong> DELETE_CONTENTS:
<a id="L1773" name="L1773"></a>1773             n.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>().<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>(n);
<a id="L1774" name="L1774"></a>1774             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1775" name="L1775"></a>1775         <em class="brace">}</em>
<a id="L1776" name="L1776"></a>1776         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1777" name="L1777"></a>1777     <em class="brace">}</em>
<a id="L1778" name="L1778"></a>1778 
<div class="comment">
      Utility method for traversing a single node when
      we know a-priori that the node if partially
      selected and is not a text node.
      @param n      The node to be traversed.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will simply
                    return the original node.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but will
                    return a cloned node.
                    </li><li><code>DELETE_CONTENTS</code> - will delete the
                    node from it's parent, but will return null.
                    </li></ol>
      @return Returns a node that is the result of visiting the node.
              If the traversal operation is
              <code>DELETE_CONTENTS</code> the return value is null.</div>
<a id="L1806" name="L1806"></a>1806     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/5486.html#L1727" title="Referred from 1727 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traversePartiallySelected</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n, <strong class="reserved">int</strong> how )
<a id="L1807" name="L1807"></a>1807     <em class="brace">{</em>
<a id="L1808" name="L1808"></a>1808         <strong class="reserved">switch</strong>( how )
<a id="L1809" name="L1809"></a>1809         <em class="brace">{</em>
<a id="L1810" name="L1810"></a>1810         <strong class="reserved">case</strong> DELETE_CONTENTS:
<a id="L1811" name="L1811"></a>1811             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1812" name="L1812"></a>1812         <strong class="reserved">case</strong> CLONE_CONTENTS:
<a id="L1813" name="L1813"></a>1813         <strong class="reserved">case</strong> EXTRACT_CONTENTS:
<a id="L1814" name="L1814"></a>1814             <strong class="reserved">return</strong> n.<a href="../D/12908.html" title="Multiple defined in 21 places.">cloneNode</a>( <strong class="reserved">false</strong> );
<a id="L1815" name="L1815"></a>1815         <em class="brace">}</em>
<a id="L1816" name="L1816"></a>1816         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1817" name="L1817"></a>1817     <em class="brace">}</em>
<a id="L1818" name="L1818"></a>1818 
<div class="comment">
      Utility method for traversing a text node that we know
      a-priori to be on a left or right boundary of the range.
      This method does not properly handle text nodes that contain
      both the start and end points of the range.
      @param n      The node to be traversed.
      @param isLeft Is true if we are traversing the node as part of navigating
                    the "left boundary" of the range.  If this value is false,
                    it implies we are navigating the "right boundary" of the
                    range.
      @param how    Specifies what type of traversal is being
                    requested (extract, clone, or delete).
                    Legal values for this argument are:
                    <ol>
                    <li><code>EXTRACT_CONTENTS</code> - will simply
                    return the original node.
                    </li><li><code>CLONE_CONTENTS</code> - will leave the
                    context tree of the range undisturbed, but will
                    return a cloned node.
                    </li><li><code>DELETE_CONTENTS</code> - will delete the
                    node from it's parent, but will return null.
                    </li></ol>
      @return Returns a node that is the result of visiting the node.
              If the traversal operation is
              <code>DELETE_CONTENTS</code> the return value is null.</div>
<a id="L1852" name="L1852"></a>1852     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/5486.html#L1726" title="Referred from 1726 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">traverseTextNode</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n, <strong class="reserved">boolean</strong> isLeft, <strong class="reserved">int</strong> how )
<a id="L1853" name="L1853"></a>1853     <em class="brace">{</em>
<a id="L1854" name="L1854"></a>1854         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> txtValue = n.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>();
<a id="L1855" name="L1855"></a>1855         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newNodeValue;
<a id="L1856" name="L1856"></a>1856         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> oldNodeValue;
<a id="L1857" name="L1857"></a>1857 
<a id="L1858" name="L1858"></a>1858         <strong class="reserved">if</strong> ( isLeft )
<a id="L1859" name="L1859"></a>1859         <em class="brace">{</em>
<a id="L1860" name="L1860"></a>1860             <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L1861" name="L1861"></a>1861             newNodeValue = txtValue.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>( <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> );
<a id="L1862" name="L1862"></a>1862             oldNodeValue = txtValue.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>( 0, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> );
<a id="L1863" name="L1863"></a>1863         <em class="brace">}</em>
<a id="L1864" name="L1864"></a>1864         <strong class="reserved">else</strong>
<a id="L1865" name="L1865"></a>1865         <em class="brace">{</em>
<a id="L1866" name="L1866"></a>1866             <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L1867" name="L1867"></a>1867             newNodeValue = txtValue.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>( 0, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> );
<a id="L1868" name="L1868"></a>1868             oldNodeValue = txtValue.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>( <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> );
<a id="L1869" name="L1869"></a>1869         <em class="brace">}</em>
<a id="L1870" name="L1870"></a>1870 
<a id="L1871" name="L1871"></a>1871         <strong class="reserved">if</strong> ( how != CLONE_CONTENTS )
<a id="L1872" name="L1872"></a>1872             n.<a href="../D/33367.html" title="Multiple defined in 12 places.">setNodeValue</a>( oldNodeValue );
<a id="L1873" name="L1873"></a>1873         <strong class="reserved">if</strong> ( how==DELETE_CONTENTS )
<a id="L1874" name="L1874"></a>1874             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1875" name="L1875"></a>1875         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a> = n.<a href="../D/12908.html" title="Multiple defined in 21 places.">cloneNode</a>( <strong class="reserved">false</strong> );
<a id="L1876" name="L1876"></a>1876         <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>.<a href="../D/33367.html" title="Multiple defined in 12 places.">setNodeValue</a>( newNodeValue );
<a id="L1877" name="L1877"></a>1877         <strong class="reserved">return</strong> <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>;
<a id="L1878" name="L1878"></a>1878     <em class="brace">}</em>
<a id="L1879" name="L1879"></a>1879 
<a id="L1880" name="L1880"></a>1880     <strong class="reserved">void</strong> <a href="../R/11197.html" title="Multiple referred from 118 places.">checkIndex</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> refNode, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L1881" name="L1881"></a>1881     <em class="brace">{</em>
<a id="L1882" name="L1882"></a>1882         <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &lt; 0) <em class="brace">{</em>
<a id="L1883" name="L1883"></a>1883             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(
<a id="L1884" name="L1884"></a>1884                 <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INDEX_SIZE_ERR,
<a id="L1885" name="L1885"></a>1885                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INDEX_SIZE_ERR", <strong class="reserved">null</strong>));
<a id="L1886" name="L1886"></a>1886         <em class="brace">}</em>
<a id="L1887" name="L1887"></a>1887 
<a id="L1888" name="L1888"></a>1888         <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = refNode.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>();
<a id="L1889" name="L1889"></a>1889 
<a id="L1890" name="L1890"></a>1890         <em class="comment">// If the node contains text, ensure that the</em>
<a id="L1891" name="L1891"></a>1891         <em class="comment">// offset of the range is &lt;= to the length of the text</em>
<a id="L1892" name="L1892"></a>1892         <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE
<a id="L1893" name="L1893"></a>1893             || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE
<a id="L1894" name="L1894"></a>1894             || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.COMMENT_NODE
<a id="L1895" name="L1895"></a>1895             || <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.PROCESSING_INSTRUCTION_NODE) <em class="brace">{</em>
<a id="L1896" name="L1896"></a>1896             <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt; refNode.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L1897" name="L1897"></a>1897                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(<a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INDEX_SIZE_ERR,
<a id="L1898" name="L1898"></a>1898                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INDEX_SIZE_ERR", <strong class="reserved">null</strong>));
<a id="L1899" name="L1899"></a>1899             <em class="brace">}</em>
<a id="L1900" name="L1900"></a>1900         <em class="brace">}</em>
<a id="L1901" name="L1901"></a>1901         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1902" name="L1902"></a>1902             <em class="comment">// Since the node is not text, ensure that the offset</em>
<a id="L1903" name="L1903"></a>1903             <em class="comment">// is valid with respect to the number of child nodes</em>
<a id="L1904" name="L1904"></a>1904             <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt; refNode.<a href="../D/17640.html" title="Multiple defined in 11 places.">getChildNodes</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>()) <em class="brace">{</em>
<a id="L1905" name="L1905"></a>1905                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(<a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INDEX_SIZE_ERR,
<a id="L1906" name="L1906"></a>1906                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "INDEX_SIZE_ERR", <strong class="reserved">null</strong>));
<a id="L1907" name="L1907"></a>1907             <em class="brace">}</em>
<a id="L1908" name="L1908"></a>1908         <em class="brace">}</em>
<a id="L1909" name="L1909"></a>1909     <em class="brace">}</em>
<a id="L1910" name="L1910"></a>1910 
<div class="comment">
          Given a node, calculate what the Range's root container
          for that node would be.</div>
<a id="L1915" name="L1915"></a>1915         <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/5486.html#L1962" title="Referred from 1962 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">getRootContainer</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> )
<a id="L1916" name="L1916"></a>1916         <em class="brace">{</em>
<a id="L1917" name="L1917"></a>1917                 <strong class="reserved">if</strong> ( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>==<strong class="reserved">null</strong> )
<a id="L1918" name="L1918"></a>1918                         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1919" name="L1919"></a>1919 
<a id="L1920" name="L1920"></a>1920                 <strong class="reserved">while</strong>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>()!=<strong class="reserved">null</strong> )
<a id="L1921" name="L1921"></a>1921                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1922" name="L1922"></a>1922                 <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L1923" name="L1923"></a>1923         <em class="brace">}</em>
<a id="L1924" name="L1924"></a>1924 
<div class="comment">
          Returns true IFF the given node can serve as a container
          for a range's boundary points.</div>
<a id="L1929" name="L1929"></a>1929         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21652.html" title="Multiple referred from 4 places.">isLegalContainer</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> )
<a id="L1930" name="L1930"></a>1930         <em class="brace">{</em>
<a id="L1931" name="L1931"></a>1931                 <strong class="reserved">if</strong> ( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>==<strong class="reserved">null</strong> )
<a id="L1932" name="L1932"></a>1932                         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1933" name="L1933"></a>1933 
<a id="L1934" name="L1934"></a>1934                 <strong class="reserved">while</strong>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>!=<strong class="reserved">null</strong> )
<a id="L1935" name="L1935"></a>1935                 <em class="brace">{</em>
<a id="L1936" name="L1936"></a>1936                         <strong class="reserved">switch</strong>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() )
<a id="L1937" name="L1937"></a>1937                         <em class="brace">{</em>
<a id="L1938" name="L1938"></a>1938                         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE:
<a id="L1939" name="L1939"></a>1939                         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.NOTATION_NODE:
<a id="L1940" name="L1940"></a>1940                         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_TYPE_NODE:
<a id="L1941" name="L1941"></a>1941                                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1942" name="L1942"></a>1942                         <em class="brace">}</em>
<a id="L1943" name="L1943"></a>1943                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L1944" name="L1944"></a>1944                 <em class="brace">}</em>
<a id="L1945" name="L1945"></a>1945 
<a id="L1946" name="L1946"></a>1946                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1947" name="L1947"></a>1947         <em class="brace">}</em>
<a id="L1948" name="L1948"></a>1948 
<a id="L1949" name="L1949"></a>1949 
<div class="comment">
          Finds the root container for the given node and determines
          if that root container is legal with respect to the
          DOM 2 specification.  At present, that means the root
          container must be either an attribute, a document,
          or a document fragment.</div>
<a id="L1957" name="L1957"></a>1957         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/20213.html" title="Multiple referred from 4 places.">hasLegalRootContainer</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> )
<a id="L1958" name="L1958"></a>1958         <em class="brace">{</em>
<a id="L1959" name="L1959"></a>1959                 <strong class="reserved">if</strong> ( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>==<strong class="reserved">null</strong> )
<a id="L1960" name="L1960"></a>1960                         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1961" name="L1961"></a>1961 
<a id="L1962" name="L1962"></a>1962                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> rootContainer = <a href="../S/5486.html#L1915" title="Defined at 1915 in src/com/sun/org/apache/xerces/internal/dom/RangeImpl.java.">getRootContainer</a>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> );
<a id="L1963" name="L1963"></a>1963                 <strong class="reserved">switch</strong>( rootContainer.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() )
<a id="L1964" name="L1964"></a>1964                 <em class="brace">{</em>
<a id="L1965" name="L1965"></a>1965                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE:
<a id="L1966" name="L1966"></a>1966                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_NODE:
<a id="L1967" name="L1967"></a>1967                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_FRAGMENT_NODE:
<a id="L1968" name="L1968"></a>1968                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1969" name="L1969"></a>1969                 <em class="brace">}</em>
<a id="L1970" name="L1970"></a>1970                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1971" name="L1971"></a>1971         <em class="brace">}</em>
<a id="L1972" name="L1972"></a>1972 
<div class="comment">
          Returns true IFF the given node can be contained by
          a range.</div>
<a id="L1977" name="L1977"></a>1977         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21651.html" title="Multiple referred from 5 places.">isLegalContainedNode</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> )
<a id="L1978" name="L1978"></a>1978         <em class="brace">{</em>
<a id="L1979" name="L1979"></a>1979                 <strong class="reserved">if</strong> ( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>==<strong class="reserved">null</strong> )
<a id="L1980" name="L1980"></a>1980                         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1981" name="L1981"></a>1981                 <strong class="reserved">switch</strong>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() )
<a id="L1982" name="L1982"></a>1982                 <em class="brace">{</em>
<a id="L1983" name="L1983"></a>1983                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_NODE:
<a id="L1984" name="L1984"></a>1984                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_FRAGMENT_NODE:
<a id="L1985" name="L1985"></a>1985                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE:
<a id="L1986" name="L1986"></a>1986                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE:
<a id="L1987" name="L1987"></a>1987                 <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.NOTATION_NODE:
<a id="L1988" name="L1988"></a>1988                         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1989" name="L1989"></a>1989                 <em class="brace">}</em>
<a id="L1990" name="L1990"></a>1990                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1991" name="L1991"></a>1991         <em class="brace">}</em>
<a id="L1992" name="L1992"></a>1992 
<a id="L1993" name="L1993"></a>1993     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">boolean</strong> visitChildren) <em class="brace">{</em>
<a id="L1994" name="L1994"></a>1994 
<a id="L1995" name="L1995"></a>1995         <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1996" name="L1996"></a>1996 
<a id="L1997" name="L1997"></a>1997         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1998" name="L1998"></a>1998         <strong class="reserved">if</strong> (visitChildren) <em class="brace">{</em>
<a id="L1999" name="L1999"></a>1999             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L2000" name="L2000"></a>2000             <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2001" name="L2001"></a>2001                 <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L2002" name="L2002"></a>2002             <em class="brace">}</em>
<a id="L2003" name="L2003"></a>2003         <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004 
<a id="L2005" name="L2005"></a>2005         <em class="comment">// if hasSibling, return sibling</em>
<a id="L2006" name="L2006"></a>2006         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L2007" name="L2007"></a>2007         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2008" name="L2008"></a>2008             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L2009" name="L2009"></a>2009         <em class="brace">}</em>
<a id="L2010" name="L2010"></a>2010 
<a id="L2011" name="L2011"></a>2011 
<a id="L2012" name="L2012"></a>2012         <em class="comment">// return parent's 1st sibling.</em>
<a id="L2013" name="L2013"></a>2013         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L2014" name="L2014"></a>2014         <strong class="reserved">while</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong>
<a id="L2015" name="L2015"></a>2015                &amp;&amp; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != fDocument
<a id="L2016" name="L2016"></a>2016                 ) <em class="brace">{</em>
<a id="L2017" name="L2017"></a>2017             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L2018" name="L2018"></a>2018             <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2019" name="L2019"></a>2019                 <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L2020" name="L2020"></a>2020             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2021" name="L2021"></a>2021                 <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L2022" name="L2022"></a>2022             <em class="brace">}</em>
<a id="L2023" name="L2023"></a>2023 
<a id="L2024" name="L2024"></a>2024         <em class="brace">}</em> <em class="comment">// while (parent != null &amp;&amp; parent != fRoot) {</em>
<a id="L2025" name="L2025"></a>2025 
<a id="L2026" name="L2026"></a>2026         <em class="comment">// end of list, return null</em>
<a id="L2027" name="L2027"></a>2027         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2028" name="L2028"></a>2028     <em class="brace">}</em>
<a id="L2029" name="L2029"></a>2029 
<div class="comment">
     /** is a an ancestor of b ? */</div>
<a id="L2031" name="L2031"></a>2031     <strong class="reserved">boolean</strong> <a href="../R/21162.html" title="Multiple referred from 7 places.">isAncestorOf</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> b) <em class="brace">{</em>
<a id="L2032" name="L2032"></a>2032         <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=b; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != <strong class="reserved">null</strong>; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>()) <em class="brace">{</em>
<a id="L2033" name="L2033"></a>2033             <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> == <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2034" name="L2034"></a>2034         <em class="brace">}</em>
<a id="L2035" name="L2035"></a>2035         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2036" name="L2036"></a>2036     <em class="brace">}</em>
<a id="L2037" name="L2037"></a>2037 
<div class="comment">
     /** what is the index of the child in the parent */</div>
<a id="L2039" name="L2039"></a>2039     <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> child, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L2040" name="L2040"></a>2040         <strong class="reserved">if</strong> (child.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>() != <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <strong class="reserved">return</strong> -1;
<a id="L2041" name="L2041"></a>2041         <strong class="reserved">int</strong> i = 0;
<a id="L2042" name="L2042"></a>2042         <strong class="reserved">for</strong>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>(); <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>!= child; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>()) <em class="brace">{</em>
<a id="L2043" name="L2043"></a>2043             i++;
<a id="L2044" name="L2044"></a>2044         <em class="brace">}</em>
<a id="L2045" name="L2045"></a>2045         <strong class="reserved">return</strong> i;
<a id="L2046" name="L2046"></a>2046     <em class="brace">}</em>
<a id="L2047" name="L2047"></a>2047 
<div class="comment">
      Utility method to retrieve a child node by index.  This method
      assumes the caller is trying to find out which node is
      selected by the given index.  Note that if the index is
      greater than the number of children, this implies that the
      first node selected is the parent node itself.
      @param container A container node
      @param offset    An offset within the container for which a selected node should
                       be computed.  If the offset is less than zero, or if the offset
                       is greater than the number of children, the container is returned.
      @return Returns either a child node of the container or the
              container itself.</div>
<a id="L2064" name="L2064"></a>2064     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/18922.html" title="Multiple referred from 3 places.">getSelectedNode</a>( <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> container, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> )
<a id="L2065" name="L2065"></a>2065     <em class="brace">{</em>
<a id="L2066" name="L2066"></a>2066         <strong class="reserved">if</strong> ( container.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE )
<a id="L2067" name="L2067"></a>2067             <strong class="reserved">return</strong> container;
<a id="L2068" name="L2068"></a>2068 
<a id="L2069" name="L2069"></a>2069         <em class="comment">// This case is an important convenience for</em>
<a id="L2070" name="L2070"></a>2070         <em class="comment">// traverseRightBoundary()</em>
<a id="L2071" name="L2071"></a>2071         <strong class="reserved">if</strong> ( <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>&lt;0 )
<a id="L2072" name="L2072"></a>2072             <strong class="reserved">return</strong> container;
<a id="L2073" name="L2073"></a>2073 
<a id="L2074" name="L2074"></a>2074         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> child = container.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L2075" name="L2075"></a>2075         <strong class="reserved">while</strong>( child!=<strong class="reserved">null</strong> &amp;&amp; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt; 0 )
<a id="L2076" name="L2076"></a>2076         <em class="brace">{</em>
<a id="L2077" name="L2077"></a>2077             --<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L2078" name="L2078"></a>2078             child = child.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L2079" name="L2079"></a>2079         <em class="brace">}</em>
<a id="L2080" name="L2080"></a>2080         <strong class="reserved">if</strong> ( child!=<strong class="reserved">null</strong> )
<a id="L2081" name="L2081"></a>2081             <strong class="reserved">return</strong> child;
<a id="L2082" name="L2082"></a>2082         <strong class="reserved">return</strong> container;
<a id="L2083" name="L2083"></a>2083     <em class="brace">}</em>
<a id="L2084" name="L2084"></a>2084 
<a id="L2085" name="L2085"></a>2085 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L77">[^]</a><a href="#L2064">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
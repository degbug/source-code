<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/ArraysParallelSortHelpers.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L92">[^]</a><a href="#L948">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L92" title="Defined at 92.">compute</a></li>
<li><a href="#L105" title="Defined at 105.">compute</a></li>
<li><a href="#L106" title="Defined at 106.">onCompletion</a></li>
<li><a href="#L126" title="Defined at 126.">compute</a></li>
<li><a href="#L167" title="Defined at 167.">compute</a></li>
<li><a href="#L245" title="Defined at 245.">compute</a></li>
<li><a href="#L282" title="Defined at 282.">compute</a></li>
<li><a href="#L356" title="Defined at 356.">compute</a></li>
<li><a href="#L393" title="Defined at 393.">compute</a></li>
<li><a href="#L467" title="Defined at 467.">compute</a></li>
<li><a href="#L504" title="Defined at 504.">compute</a></li>
<li><a href="#L578" title="Defined at 578.">compute</a></li>
<li><a href="#L615" title="Defined at 615.">compute</a></li>
<li><a href="#L689" title="Defined at 689.">compute</a></li>
<li><a href="#L726" title="Defined at 726.">compute</a></li>
<li><a href="#L800" title="Defined at 800.">compute</a></li>
<li><a href="#L837" title="Defined at 837.">compute</a></li>
<li><a href="#L911" title="Defined at 911.">compute</a></li>
<li><a href="#L948" title="Defined at 948.">compute</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.concurrent.RecursiveAction;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.concurrent.CountedCompleter;
<a id="L29" name="L29"></a>  29 
<div class="comment">
  Helper utilities for the parallel sort methods in Arrays.parallelSort.
  For each primitive type, plus Object, we define a static class to
  contain the Sorter and Merger implementations for that type:
  Sorter classes based mainly on CilkSort
  <a href="http://supertech.lcs.mit.edu/cilk/"> Cilk</a>:
  Basic algorithm:
  if array size is small, just use a sequential quicksort (via Arrays.sort)
          Otherwise:
          1. Break array in half.
          2. For each half,
              a. break the half in half (i.e., quarters),
              b. sort the quarters
              c. merge them together
          3. merge together the two halves.
  One reason for splitting in quarters is that this guarantees that
  the final sort is in the main array, not the workspace array.
  (workspace and main swap roles on each subsort step.)  Leaf-level
  sorts use the associated sequential sort.
  Merger classes perform merging for Sorter.  They are structured
  such that if the underlying sort is stable (as is true for
  TimSort), then so is the full sort.  If big enough, they split the
  largest of the two partitions in half, find the greatest point in
  smaller partition less than the beginning of the second half of
  larger via binary search; and then merge in parallel the two
  partitions.  In part to ensure tasks are triggered in
  stability-preserving order, the current CountedCompleter design
  requires some little tasks to serve as place holders for triggering
  completion tasks.  These classes (EmptyCompleter and Relay) don't
  need to keep track of the arrays, and are never themselves forked,
  so don't hold any task state.
  The primitive class versions (FJByte... FJDouble) are
  identical to each other except for type declarations.
  The base sequential sorts rely on non-public versions of TimSort,
  ComparableTimSort, and DualPivotQuicksort sort methods that accept
  temp workspace array slices that we will have already allocated, so
  avoids redundant allocation. (Except for DualPivotQuicksort byte[]
  sort, that does not ever use a workspace array.)</div>
<div class="comment">
 /*package*/</div> <strong class="reserved">class</strong> <a href="../R/467.html" title="Multiple referred from 18 places.">ArraysParallelSortHelpers</a> <em class="brace">{</em>
<a id="L76" name="L76"></a>  76 
<div class="comment">
      Style note: The task classes have a lot of parameters, that are
      stored as task fields and copied to local variables and used in
      compute() methods, We pack these into as few lines as possible,
      and hoist consistency checks among them before main loops, to
      reduce distraction.</div>
<a id="L84" name="L84"></a>  84 
<div class="comment">
      A placeholder task for Sorters, used for the lowest
      quartile task, that does not need to maintain array state.</div>
<a id="L89" name="L89"></a>  89     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2612.html" title="Multiple referred from 8 places.">EmptyCompleter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L90" name="L90"></a>  90         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L91" name="L91"></a>  91         EmptyCompleter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; p) <em class="brace">{</em> <strong class="reserved">super</strong>(p); <em class="brace">}</em>
<a id="L92" name="L92"></a>  92         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em> <em class="brace">}</em>
<a id="L93" name="L93"></a>  93     <em class="brace">}</em>
<a id="L94" name="L94"></a>  94 
<div class="comment">
      A trigger for secondary merge of two merges</div>
<a id="L98" name="L98"></a>  98     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6595.html" title="Multiple referred from 24 places.">Relay</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L99" name="L99"></a>  99         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L100" name="L100"></a> 100         <strong class="reserved">final</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; task;
<a id="L101" name="L101"></a> 101         Relay(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; task) <em class="brace">{</em>
<a id="L102" name="L102"></a> 102             <strong class="reserved">super</strong>(<strong class="reserved">null</strong>, 1);
<a id="L103" name="L103"></a> 103             <strong class="reserved">this</strong>.task = task;
<a id="L104" name="L104"></a> 104         <em class="brace">}</em>
<a id="L105" name="L105"></a> 105         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em> <em class="brace">}</em>
<a id="L106" name="L106"></a> 106         <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/23948.html" title="Multiple referred from 6 places.">onCompletion</a>(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; t) <em class="brace">{</em>
<a id="L107" name="L107"></a> 107             task.<a href="../D/13161.html" title="Multiple defined in 74 places.">compute</a>();
<a id="L108" name="L108"></a> 108         <em class="brace">}</em>
<a id="L109" name="L109"></a> 109     <em class="brace">}</em>
<a id="L110" name="L110"></a> 110 
<div class="comment">
     /** Object + Comparator support class */</div>
<a id="L112" name="L112"></a> 112     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2836.html" title="Multiple referred from 4 places.">FJObject</a> <em class="brace">{</em>
<a id="L113" name="L113"></a> 113         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L114" name="L114"></a> 114             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L115" name="L115"></a> 115             <strong class="reserved">final</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L116" name="L116"></a> 116             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L117" name="L117"></a> 117             <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L118" name="L118"></a> 118             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] w, <strong class="reserved">int</strong> base, <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>,
<a id="L119" name="L119"></a> 119                    <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran,
<a id="L120" name="L120"></a> 120                    <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>) <em class="brace">{</em>
<a id="L121" name="L121"></a> 121                 <strong class="reserved">super</strong>(par);
<a id="L122" name="L122"></a> 122                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L123" name="L123"></a> 123                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L124" name="L124"></a> 124                 <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L125" name="L125"></a> 125             <em class="brace">}</em>
<a id="L126" name="L126"></a> 126             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L127" name="L127"></a> 127                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L128" name="L128"></a> 128                 <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L129" name="L129"></a> 129                 <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L130" name="L130"></a> 130                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L131" name="L131"></a> 131                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L132" name="L132"></a> 132                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L133" name="L133"></a> 133                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L134" name="L134"></a> 134                                                        wb+h, n-h, b, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>));
<a id="L135" name="L135"></a> 135                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L136" name="L136"></a> 136                                                        b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>));
<a id="L137" name="L137"></a> 137                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L138" name="L138"></a> 138                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L139" name="L139"></a> 139                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L140" name="L140"></a> 140                                                        b+q, h-q, wb, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>));
<a id="L141" name="L141"></a> 141                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L142" name="L142"></a> 142                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L143" name="L143"></a> 143                     n = q;
<a id="L144" name="L144"></a> 144                 <em class="brace">}</em>
<a id="L145" name="L145"></a> 145                 <a href="../S/917.html#L62" title="Defined at 62 in src/java/util/TimSort.java.">TimSort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, w, wb, n);
<a id="L146" name="L146"></a> 146                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L147" name="L147"></a> 147             <em class="brace">}</em>
<a id="L148" name="L148"></a> 148         <em class="brace">}</em>
<a id="L149" name="L149"></a> 149 
<a id="L150" name="L150"></a> 150         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L151" name="L151"></a> 151             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L152" name="L152"></a> 152             <strong class="reserved">final</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L153" name="L153"></a> 153             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L154" name="L154"></a> 154             <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L155" name="L155"></a> 155             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] w,
<a id="L156" name="L156"></a> 156                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L157" name="L157"></a> 157                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran,
<a id="L158" name="L158"></a> 158                    <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159                 <strong class="reserved">super</strong>(par);
<a id="L160" name="L160"></a> 160                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L161" name="L161"></a> 161                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L162" name="L162"></a> 162                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L163" name="L163"></a> 163                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L164" name="L164"></a> 164                 <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a> = <a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L165" name="L165"></a> 165             <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L168" name="L168"></a> 168                 <a href="../D/1687.html" title="Multiple defined in 3 places.">Comparator</a>&lt;? <strong class="reserved">super</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <strong class="reserved">this</strong>.<a href="../D/13031.html" title="Multiple defined in 21 places.">comparator</a>;
<a id="L169" name="L169"></a> 169                 <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L170" name="L170"></a> 170                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L171" name="L171"></a> 171                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L172" name="L172"></a> 172                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0 ||
<a id="L173" name="L173"></a> 173                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>)
<a id="L174" name="L174"></a> 174                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L175" name="L175"></a> 175                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L176" name="L176"></a> 176                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L177" name="L177"></a> 177                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L178" name="L178"></a> 178                             <strong class="reserved">break</strong>;
<a id="L179" name="L179"></a> 179                         rh = rn;
<a id="L180" name="L180"></a> 180                         <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L181" name="L181"></a> 181                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L183" name="L183"></a> 183                             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13032.html" title="Multiple defined in 71 places.">compare</a>(<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb]) &lt;= 0)
<a id="L184" name="L184"></a> 184                                 rh = rm;
<a id="L185" name="L185"></a> 185                             <strong class="reserved">else</strong>
<a id="L186" name="L186"></a> 186                                 lo = rm + 1;
<a id="L187" name="L187"></a> 187                         <em class="brace">}</em>
<a id="L188" name="L188"></a> 188                     <em class="brace">}</em>
<a id="L189" name="L189"></a> 189                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L190" name="L190"></a> 190                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L191" name="L191"></a> 191                             <strong class="reserved">break</strong>;
<a id="L192" name="L192"></a> 192                         lh = ln;
<a id="L193" name="L193"></a> 193                         <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L194" name="L194"></a> 194                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L195" name="L195"></a> 195                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L196" name="L196"></a> 196                             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13032.html" title="Multiple defined in 71 places.">compare</a>(<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb]) &lt;= 0)
<a id="L197" name="L197"></a> 197                                 lh = lm;
<a id="L198" name="L198"></a> 198                             <strong class="reserved">else</strong>
<a id="L199" name="L199"></a> 199                                 lo = lm + 1;
<a id="L200" name="L200"></a> 200                         <em class="brace">}</em>
<a id="L201" name="L201"></a> 201                     <em class="brace">}</em>
<a id="L202" name="L202"></a> 202                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L203" name="L203"></a> 203                                                 rb + rh, rn - rh,
<a id="L204" name="L204"></a> 204                                                 k + lh + rh, g, <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L205" name="L205"></a> 205                     rn = rh;
<a id="L206" name="L206"></a> 206                     ln = lh;
<a id="L207" name="L207"></a> 207                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L208" name="L208"></a> 208                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L209" name="L209"></a> 209                 <em class="brace">}</em>
<a id="L210" name="L210"></a> 210 
<a id="L211" name="L211"></a> 211                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L212" name="L212"></a> 212                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L213" name="L213"></a> 213                     <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> t, al, ar;
<a id="L214" name="L214"></a> 214                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13032.html" title="Multiple defined in 71 places.">compare</a>((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]), (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) &lt;= 0) <em class="brace">{</em>
<a id="L215" name="L215"></a> 215                         lb++; t = al;
<a id="L216" name="L216"></a> 216                     <em class="brace">}</em>
<a id="L217" name="L217"></a> 217                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L218" name="L218"></a> 218                         rb++; t = ar;
<a id="L219" name="L219"></a> 219                     <em class="brace">}</em>
<a id="L220" name="L220"></a> 220                     w[k++] = t;
<a id="L221" name="L221"></a> 221                 <em class="brace">}</em>
<a id="L222" name="L222"></a> 222                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L223" name="L223"></a> 223                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L224" name="L224"></a> 224                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L225" name="L225"></a> 225                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L226" name="L226"></a> 226 
<a id="L227" name="L227"></a> 227                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L228" name="L228"></a> 228             <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<a id="L230" name="L230"></a> 230         <em class="brace">}</em>
<a id="L231" name="L231"></a> 231     <em class="brace">}</em> <em class="comment">// FJObject</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
     /** byte support class */</div>
<a id="L234" name="L234"></a> 234     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2830.html" title="Multiple referred from 2 places.">FJByte</a> <em class="brace">{</em>
<a id="L235" name="L235"></a> 235         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L236" name="L236"></a> 236             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L237" name="L237"></a> 237             <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L238" name="L238"></a> 238             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L239" name="L239"></a> 239             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">byte</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L240" name="L240"></a> 240                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241                 <strong class="reserved">super</strong>(par);
<a id="L242" name="L242"></a> 242                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L243" name="L243"></a> 243                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L244" name="L244"></a> 244             <em class="brace">}</em>
<a id="L245" name="L245"></a> 245             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L246" name="L246"></a> 246                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L247" name="L247"></a> 247                 <strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L248" name="L248"></a> 248                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L249" name="L249"></a> 249                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L250" name="L250"></a> 250                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L251" name="L251"></a> 251                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L252" name="L252"></a> 252                                                     wb+h, n-h, b, g));
<a id="L253" name="L253"></a> 253                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L254" name="L254"></a> 254                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L255" name="L255"></a> 255                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L256" name="L256"></a> 256                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L257" name="L257"></a> 257                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L258" name="L258"></a> 258                                                     b+q, h-q, wb, g));
<a id="L259" name="L259"></a> 259                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L260" name="L260"></a> 260                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L261" name="L261"></a> 261                     n = q;
<a id="L262" name="L262"></a> 262                 <em class="brace">}</em>
<a id="L263" name="L263"></a> 263                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1);
<a id="L264" name="L264"></a> 264                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L265" name="L265"></a> 265             <em class="brace">}</em>
<a id="L266" name="L266"></a> 266         <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 
<a id="L268" name="L268"></a> 268         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L269" name="L269"></a> 269             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L270" name="L270"></a> 270             <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L271" name="L271"></a> 271             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L272" name="L272"></a> 272             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">byte</strong>[] w,
<a id="L273" name="L273"></a> 273                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L274" name="L274"></a> 274                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L275" name="L275"></a> 275                 <strong class="reserved">super</strong>(par);
<a id="L276" name="L276"></a> 276                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L277" name="L277"></a> 277                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L278" name="L278"></a> 278                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L279" name="L279"></a> 279                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L280" name="L280"></a> 280             <em class="brace">}</em>
<a id="L281" name="L281"></a> 281 
<a id="L282" name="L282"></a> 282             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L283" name="L283"></a> 283                 <strong class="reserved">byte</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L284" name="L284"></a> 284                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L285" name="L285"></a> 285                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L286" name="L286"></a> 286                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L287" name="L287"></a> 287                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L288" name="L288"></a> 288                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L289" name="L289"></a> 289                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L290" name="L290"></a> 290                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L291" name="L291"></a> 291                             <strong class="reserved">break</strong>;
<a id="L292" name="L292"></a> 292                         rh = rn;
<a id="L293" name="L293"></a> 293                         <strong class="reserved">byte</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L294" name="L294"></a> 294                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L295" name="L295"></a> 295                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L296" name="L296"></a> 296                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L297" name="L297"></a> 297                                 rh = rm;
<a id="L298" name="L298"></a> 298                             <strong class="reserved">else</strong>
<a id="L299" name="L299"></a> 299                                 lo = rm + 1;
<a id="L300" name="L300"></a> 300                         <em class="brace">}</em>
<a id="L301" name="L301"></a> 301                     <em class="brace">}</em>
<a id="L302" name="L302"></a> 302                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L303" name="L303"></a> 303                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L304" name="L304"></a> 304                             <strong class="reserved">break</strong>;
<a id="L305" name="L305"></a> 305                         lh = ln;
<a id="L306" name="L306"></a> 306                         <strong class="reserved">byte</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L307" name="L307"></a> 307                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L308" name="L308"></a> 308                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L309" name="L309"></a> 309                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L310" name="L310"></a> 310                                 lh = lm;
<a id="L311" name="L311"></a> 311                             <strong class="reserved">else</strong>
<a id="L312" name="L312"></a> 312                                 lo = lm + 1;
<a id="L313" name="L313"></a> 313                         <em class="brace">}</em>
<a id="L314" name="L314"></a> 314                     <em class="brace">}</em>
<a id="L315" name="L315"></a> 315                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L316" name="L316"></a> 316                                           rb + rh, rn - rh,
<a id="L317" name="L317"></a> 317                                           k + lh + rh, g);
<a id="L318" name="L318"></a> 318                     rn = rh;
<a id="L319" name="L319"></a> 319                     ln = lh;
<a id="L320" name="L320"></a> 320                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L321" name="L321"></a> 321                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L322" name="L322"></a> 322                 <em class="brace">}</em>
<a id="L323" name="L323"></a> 323 
<a id="L324" name="L324"></a> 324                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L325" name="L325"></a> 325                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326                     <strong class="reserved">byte</strong> t, al, ar;
<a id="L327" name="L327"></a> 327                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328                         lb++; t = al;
<a id="L329" name="L329"></a> 329                     <em class="brace">}</em>
<a id="L330" name="L330"></a> 330                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L331" name="L331"></a> 331                         rb++; t = ar;
<a id="L332" name="L332"></a> 332                     <em class="brace">}</em>
<a id="L333" name="L333"></a> 333                     w[k++] = t;
<a id="L334" name="L334"></a> 334                 <em class="brace">}</em>
<a id="L335" name="L335"></a> 335                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L336" name="L336"></a> 336                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L337" name="L337"></a> 337                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L338" name="L338"></a> 338                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L339" name="L339"></a> 339                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L340" name="L340"></a> 340             <em class="brace">}</em>
<a id="L341" name="L341"></a> 341         <em class="brace">}</em>
<a id="L342" name="L342"></a> 342     <em class="brace">}</em> <em class="comment">// FJByte</em>
<a id="L343" name="L343"></a> 343 
<div class="comment">
     /** char support class */</div>
<a id="L345" name="L345"></a> 345     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2831.html" title="Multiple referred from 2 places.">FJChar</a> <em class="brace">{</em>
<a id="L346" name="L346"></a> 346         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L347" name="L347"></a> 347             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L348" name="L348"></a> 348             <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L349" name="L349"></a> 349             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L350" name="L350"></a> 350             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">char</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L351" name="L351"></a> 351                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L352" name="L352"></a> 352                 <strong class="reserved">super</strong>(par);
<a id="L353" name="L353"></a> 353                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L354" name="L354"></a> 354                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L355" name="L355"></a> 355             <em class="brace">}</em>
<a id="L356" name="L356"></a> 356             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L357" name="L357"></a> 357                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L358" name="L358"></a> 358                 <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L359" name="L359"></a> 359                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L360" name="L360"></a> 360                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L361" name="L361"></a> 361                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L362" name="L362"></a> 362                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L363" name="L363"></a> 363                                                     wb+h, n-h, b, g));
<a id="L364" name="L364"></a> 364                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L365" name="L365"></a> 365                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L366" name="L366"></a> 366                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L367" name="L367"></a> 367                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L368" name="L368"></a> 368                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L369" name="L369"></a> 369                                                     b+q, h-q, wb, g));
<a id="L370" name="L370"></a> 370                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L371" name="L371"></a> 371                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L372" name="L372"></a> 372                     n = q;
<a id="L373" name="L373"></a> 373                 <em class="brace">}</em>
<a id="L374" name="L374"></a> 374                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1, w, wb, n);
<a id="L375" name="L375"></a> 375                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L376" name="L376"></a> 376             <em class="brace">}</em>
<a id="L377" name="L377"></a> 377         <em class="brace">}</em>
<a id="L378" name="L378"></a> 378 
<a id="L379" name="L379"></a> 379         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L380" name="L380"></a> 380             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L381" name="L381"></a> 381             <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L382" name="L382"></a> 382             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L383" name="L383"></a> 383             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">char</strong>[] w,
<a id="L384" name="L384"></a> 384                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L385" name="L385"></a> 385                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L386" name="L386"></a> 386                 <strong class="reserved">super</strong>(par);
<a id="L387" name="L387"></a> 387                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L388" name="L388"></a> 388                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L389" name="L389"></a> 389                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L390" name="L390"></a> 390                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L391" name="L391"></a> 391             <em class="brace">}</em>
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L394" name="L394"></a> 394                 <strong class="reserved">char</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L395" name="L395"></a> 395                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L396" name="L396"></a> 396                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L397" name="L397"></a> 397                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L398" name="L398"></a> 398                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L399" name="L399"></a> 399                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L400" name="L400"></a> 400                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L401" name="L401"></a> 401                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L402" name="L402"></a> 402                             <strong class="reserved">break</strong>;
<a id="L403" name="L403"></a> 403                         rh = rn;
<a id="L404" name="L404"></a> 404                         <strong class="reserved">char</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L405" name="L405"></a> 405                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L406" name="L406"></a> 406                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L407" name="L407"></a> 407                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L408" name="L408"></a> 408                                 rh = rm;
<a id="L409" name="L409"></a> 409                             <strong class="reserved">else</strong>
<a id="L410" name="L410"></a> 410                                 lo = rm + 1;
<a id="L411" name="L411"></a> 411                         <em class="brace">}</em>
<a id="L412" name="L412"></a> 412                     <em class="brace">}</em>
<a id="L413" name="L413"></a> 413                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L414" name="L414"></a> 414                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L415" name="L415"></a> 415                             <strong class="reserved">break</strong>;
<a id="L416" name="L416"></a> 416                         lh = ln;
<a id="L417" name="L417"></a> 417                         <strong class="reserved">char</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L418" name="L418"></a> 418                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L420" name="L420"></a> 420                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L421" name="L421"></a> 421                                 lh = lm;
<a id="L422" name="L422"></a> 422                             <strong class="reserved">else</strong>
<a id="L423" name="L423"></a> 423                                 lo = lm + 1;
<a id="L424" name="L424"></a> 424                         <em class="brace">}</em>
<a id="L425" name="L425"></a> 425                     <em class="brace">}</em>
<a id="L426" name="L426"></a> 426                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L427" name="L427"></a> 427                                           rb + rh, rn - rh,
<a id="L428" name="L428"></a> 428                                           k + lh + rh, g);
<a id="L429" name="L429"></a> 429                     rn = rh;
<a id="L430" name="L430"></a> 430                     ln = lh;
<a id="L431" name="L431"></a> 431                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L432" name="L432"></a> 432                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L433" name="L433"></a> 433                 <em class="brace">}</em>
<a id="L434" name="L434"></a> 434 
<a id="L435" name="L435"></a> 435                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L436" name="L436"></a> 436                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L437" name="L437"></a> 437                     <strong class="reserved">char</strong> t, al, ar;
<a id="L438" name="L438"></a> 438                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L439" name="L439"></a> 439                         lb++; t = al;
<a id="L440" name="L440"></a> 440                     <em class="brace">}</em>
<a id="L441" name="L441"></a> 441                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L442" name="L442"></a> 442                         rb++; t = ar;
<a id="L443" name="L443"></a> 443                     <em class="brace">}</em>
<a id="L444" name="L444"></a> 444                     w[k++] = t;
<a id="L445" name="L445"></a> 445                 <em class="brace">}</em>
<a id="L446" name="L446"></a> 446                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L447" name="L447"></a> 447                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L448" name="L448"></a> 448                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L449" name="L449"></a> 449                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L450" name="L450"></a> 450                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L451" name="L451"></a> 451             <em class="brace">}</em>
<a id="L452" name="L452"></a> 452         <em class="brace">}</em>
<a id="L453" name="L453"></a> 453     <em class="brace">}</em> <em class="comment">// FJChar</em>
<a id="L454" name="L454"></a> 454 
<div class="comment">
     /** short support class */</div>
<a id="L456" name="L456"></a> 456     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2837.html" title="Multiple referred from 2 places.">FJShort</a> <em class="brace">{</em>
<a id="L457" name="L457"></a> 457         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L458" name="L458"></a> 458             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L459" name="L459"></a> 459             <strong class="reserved">final</strong> <strong class="reserved">short</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L460" name="L460"></a> 460             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L461" name="L461"></a> 461             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">short</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">short</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L462" name="L462"></a> 462                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463                 <strong class="reserved">super</strong>(par);
<a id="L464" name="L464"></a> 464                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L465" name="L465"></a> 465                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L466" name="L466"></a> 466             <em class="brace">}</em>
<a id="L467" name="L467"></a> 467             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L469" name="L469"></a> 469                 <strong class="reserved">short</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L470" name="L470"></a> 470                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L471" name="L471"></a> 471                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L472" name="L472"></a> 472                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L473" name="L473"></a> 473                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L474" name="L474"></a> 474                                                     wb+h, n-h, b, g));
<a id="L475" name="L475"></a> 475                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L476" name="L476"></a> 476                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L477" name="L477"></a> 477                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L478" name="L478"></a> 478                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L479" name="L479"></a> 479                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L480" name="L480"></a> 480                                                     b+q, h-q, wb, g));
<a id="L481" name="L481"></a> 481                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L482" name="L482"></a> 482                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L483" name="L483"></a> 483                     n = q;
<a id="L484" name="L484"></a> 484                 <em class="brace">}</em>
<a id="L485" name="L485"></a> 485                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1, w, wb, n);
<a id="L486" name="L486"></a> 486                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L487" name="L487"></a> 487             <em class="brace">}</em>
<a id="L488" name="L488"></a> 488         <em class="brace">}</em>
<a id="L489" name="L489"></a> 489 
<a id="L490" name="L490"></a> 490         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L491" name="L491"></a> 491             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L492" name="L492"></a> 492             <strong class="reserved">final</strong> <strong class="reserved">short</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L493" name="L493"></a> 493             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L494" name="L494"></a> 494             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">short</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">short</strong>[] w,
<a id="L495" name="L495"></a> 495                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L496" name="L496"></a> 496                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L497" name="L497"></a> 497                 <strong class="reserved">super</strong>(par);
<a id="L498" name="L498"></a> 498                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L499" name="L499"></a> 499                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L500" name="L500"></a> 500                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L501" name="L501"></a> 501                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L502" name="L502"></a> 502             <em class="brace">}</em>
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L505" name="L505"></a> 505                 <strong class="reserved">short</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L506" name="L506"></a> 506                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L507" name="L507"></a> 507                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L508" name="L508"></a> 508                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L509" name="L509"></a> 509                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L510" name="L510"></a> 510                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L511" name="L511"></a> 511                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L513" name="L513"></a> 513                             <strong class="reserved">break</strong>;
<a id="L514" name="L514"></a> 514                         rh = rn;
<a id="L515" name="L515"></a> 515                         <strong class="reserved">short</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L516" name="L516"></a> 516                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L517" name="L517"></a> 517                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L518" name="L518"></a> 518                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L519" name="L519"></a> 519                                 rh = rm;
<a id="L520" name="L520"></a> 520                             <strong class="reserved">else</strong>
<a id="L521" name="L521"></a> 521                                 lo = rm + 1;
<a id="L522" name="L522"></a> 522                         <em class="brace">}</em>
<a id="L523" name="L523"></a> 523                     <em class="brace">}</em>
<a id="L524" name="L524"></a> 524                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L525" name="L525"></a> 525                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L526" name="L526"></a> 526                             <strong class="reserved">break</strong>;
<a id="L527" name="L527"></a> 527                         lh = ln;
<a id="L528" name="L528"></a> 528                         <strong class="reserved">short</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L529" name="L529"></a> 529                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L530" name="L530"></a> 530                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L531" name="L531"></a> 531                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L532" name="L532"></a> 532                                 lh = lm;
<a id="L533" name="L533"></a> 533                             <strong class="reserved">else</strong>
<a id="L534" name="L534"></a> 534                                 lo = lm + 1;
<a id="L535" name="L535"></a> 535                         <em class="brace">}</em>
<a id="L536" name="L536"></a> 536                     <em class="brace">}</em>
<a id="L537" name="L537"></a> 537                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L538" name="L538"></a> 538                                           rb + rh, rn - rh,
<a id="L539" name="L539"></a> 539                                           k + lh + rh, g);
<a id="L540" name="L540"></a> 540                     rn = rh;
<a id="L541" name="L541"></a> 541                     ln = lh;
<a id="L542" name="L542"></a> 542                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L543" name="L543"></a> 543                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L544" name="L544"></a> 544                 <em class="brace">}</em>
<a id="L545" name="L545"></a> 545 
<a id="L546" name="L546"></a> 546                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L547" name="L547"></a> 547                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L548" name="L548"></a> 548                     <strong class="reserved">short</strong> t, al, ar;
<a id="L549" name="L549"></a> 549                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L550" name="L550"></a> 550                         lb++; t = al;
<a id="L551" name="L551"></a> 551                     <em class="brace">}</em>
<a id="L552" name="L552"></a> 552                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                         rb++; t = ar;
<a id="L554" name="L554"></a> 554                     <em class="brace">}</em>
<a id="L555" name="L555"></a> 555                     w[k++] = t;
<a id="L556" name="L556"></a> 556                 <em class="brace">}</em>
<a id="L557" name="L557"></a> 557                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L558" name="L558"></a> 558                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L559" name="L559"></a> 559                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L560" name="L560"></a> 560                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L561" name="L561"></a> 561                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L562" name="L562"></a> 562             <em class="brace">}</em>
<a id="L563" name="L563"></a> 563         <em class="brace">}</em>
<a id="L564" name="L564"></a> 564     <em class="brace">}</em> <em class="comment">// FJShort</em>
<a id="L565" name="L565"></a> 565 
<div class="comment">
     /** int support class */</div>
<a id="L567" name="L567"></a> 567     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2834.html" title="Multiple referred from 2 places.">FJInt</a> <em class="brace">{</em>
<a id="L568" name="L568"></a> 568         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L569" name="L569"></a> 569             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L570" name="L570"></a> 570             <strong class="reserved">final</strong> <strong class="reserved">int</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L571" name="L571"></a> 571             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L572" name="L572"></a> 572             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">int</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">int</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L573" name="L573"></a> 573                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574                 <strong class="reserved">super</strong>(par);
<a id="L575" name="L575"></a> 575                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L576" name="L576"></a> 576                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L577" name="L577"></a> 577             <em class="brace">}</em>
<a id="L578" name="L578"></a> 578             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L579" name="L579"></a> 579                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L580" name="L580"></a> 580                 <strong class="reserved">int</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L581" name="L581"></a> 581                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L582" name="L582"></a> 582                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L583" name="L583"></a> 583                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L584" name="L584"></a> 584                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L585" name="L585"></a> 585                                                     wb+h, n-h, b, g));
<a id="L586" name="L586"></a> 586                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L587" name="L587"></a> 587                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L588" name="L588"></a> 588                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L589" name="L589"></a> 589                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L590" name="L590"></a> 590                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L591" name="L591"></a> 591                                                     b+q, h-q, wb, g));
<a id="L592" name="L592"></a> 592                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L593" name="L593"></a> 593                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L594" name="L594"></a> 594                     n = q;
<a id="L595" name="L595"></a> 595                 <em class="brace">}</em>
<a id="L596" name="L596"></a> 596                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1, w, wb, n);
<a id="L597" name="L597"></a> 597                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L598" name="L598"></a> 598             <em class="brace">}</em>
<a id="L599" name="L599"></a> 599         <em class="brace">}</em>
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L602" name="L602"></a> 602             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L603" name="L603"></a> 603             <strong class="reserved">final</strong> <strong class="reserved">int</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L604" name="L604"></a> 604             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L605" name="L605"></a> 605             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">int</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">int</strong>[] w,
<a id="L606" name="L606"></a> 606                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L607" name="L607"></a> 607                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L608" name="L608"></a> 608                 <strong class="reserved">super</strong>(par);
<a id="L609" name="L609"></a> 609                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L610" name="L610"></a> 610                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L611" name="L611"></a> 611                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L612" name="L612"></a> 612                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L613" name="L613"></a> 613             <em class="brace">}</em>
<a id="L614" name="L614"></a> 614 
<a id="L615" name="L615"></a> 615             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L616" name="L616"></a> 616                 <strong class="reserved">int</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L617" name="L617"></a> 617                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L618" name="L618"></a> 618                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L619" name="L619"></a> 619                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L620" name="L620"></a> 620                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L621" name="L621"></a> 621                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L622" name="L622"></a> 622                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L623" name="L623"></a> 623                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L624" name="L624"></a> 624                             <strong class="reserved">break</strong>;
<a id="L625" name="L625"></a> 625                         rh = rn;
<a id="L626" name="L626"></a> 626                         <strong class="reserved">int</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L627" name="L627"></a> 627                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L628" name="L628"></a> 628                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L629" name="L629"></a> 629                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L630" name="L630"></a> 630                                 rh = rm;
<a id="L631" name="L631"></a> 631                             <strong class="reserved">else</strong>
<a id="L632" name="L632"></a> 632                                 lo = rm + 1;
<a id="L633" name="L633"></a> 633                         <em class="brace">}</em>
<a id="L634" name="L634"></a> 634                     <em class="brace">}</em>
<a id="L635" name="L635"></a> 635                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L636" name="L636"></a> 636                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L637" name="L637"></a> 637                             <strong class="reserved">break</strong>;
<a id="L638" name="L638"></a> 638                         lh = ln;
<a id="L639" name="L639"></a> 639                         <strong class="reserved">int</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L640" name="L640"></a> 640                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L641" name="L641"></a> 641                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L642" name="L642"></a> 642                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L643" name="L643"></a> 643                                 lh = lm;
<a id="L644" name="L644"></a> 644                             <strong class="reserved">else</strong>
<a id="L645" name="L645"></a> 645                                 lo = lm + 1;
<a id="L646" name="L646"></a> 646                         <em class="brace">}</em>
<a id="L647" name="L647"></a> 647                     <em class="brace">}</em>
<a id="L648" name="L648"></a> 648                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L649" name="L649"></a> 649                                           rb + rh, rn - rh,
<a id="L650" name="L650"></a> 650                                           k + lh + rh, g);
<a id="L651" name="L651"></a> 651                     rn = rh;
<a id="L652" name="L652"></a> 652                     ln = lh;
<a id="L653" name="L653"></a> 653                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L654" name="L654"></a> 654                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L655" name="L655"></a> 655                 <em class="brace">}</em>
<a id="L656" name="L656"></a> 656 
<a id="L657" name="L657"></a> 657                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L658" name="L658"></a> 658                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L659" name="L659"></a> 659                     <strong class="reserved">int</strong> t, al, ar;
<a id="L660" name="L660"></a> 660                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L661" name="L661"></a> 661                         lb++; t = al;
<a id="L662" name="L662"></a> 662                     <em class="brace">}</em>
<a id="L663" name="L663"></a> 663                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L664" name="L664"></a> 664                         rb++; t = ar;
<a id="L665" name="L665"></a> 665                     <em class="brace">}</em>
<a id="L666" name="L666"></a> 666                     w[k++] = t;
<a id="L667" name="L667"></a> 667                 <em class="brace">}</em>
<a id="L668" name="L668"></a> 668                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L669" name="L669"></a> 669                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L670" name="L670"></a> 670                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L671" name="L671"></a> 671                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L672" name="L672"></a> 672                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L673" name="L673"></a> 673             <em class="brace">}</em>
<a id="L674" name="L674"></a> 674         <em class="brace">}</em>
<a id="L675" name="L675"></a> 675     <em class="brace">}</em> <em class="comment">// FJInt</em>
<a id="L676" name="L676"></a> 676 
<div class="comment">
     /** long support class */</div>
<a id="L678" name="L678"></a> 678     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2835.html" title="Multiple referred from 2 places.">FJLong</a> <em class="brace">{</em>
<a id="L679" name="L679"></a> 679         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L680" name="L680"></a> 680             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L681" name="L681"></a> 681             <strong class="reserved">final</strong> <strong class="reserved">long</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L682" name="L682"></a> 682             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L683" name="L683"></a> 683             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">long</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">long</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L684" name="L684"></a> 684                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L685" name="L685"></a> 685                 <strong class="reserved">super</strong>(par);
<a id="L686" name="L686"></a> 686                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L687" name="L687"></a> 687                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L688" name="L688"></a> 688             <em class="brace">}</em>
<a id="L689" name="L689"></a> 689             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L690" name="L690"></a> 690                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L691" name="L691"></a> 691                 <strong class="reserved">long</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L692" name="L692"></a> 692                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L693" name="L693"></a> 693                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L694" name="L694"></a> 694                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L695" name="L695"></a> 695                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L696" name="L696"></a> 696                                                     wb+h, n-h, b, g));
<a id="L697" name="L697"></a> 697                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L698" name="L698"></a> 698                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L699" name="L699"></a> 699                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L700" name="L700"></a> 700                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L701" name="L701"></a> 701                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L702" name="L702"></a> 702                                                     b+q, h-q, wb, g));
<a id="L703" name="L703"></a> 703                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L704" name="L704"></a> 704                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L705" name="L705"></a> 705                     n = q;
<a id="L706" name="L706"></a> 706                 <em class="brace">}</em>
<a id="L707" name="L707"></a> 707                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1, w, wb, n);
<a id="L708" name="L708"></a> 708                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L709" name="L709"></a> 709             <em class="brace">}</em>
<a id="L710" name="L710"></a> 710         <em class="brace">}</em>
<a id="L711" name="L711"></a> 711 
<a id="L712" name="L712"></a> 712         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L713" name="L713"></a> 713             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L714" name="L714"></a> 714             <strong class="reserved">final</strong> <strong class="reserved">long</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L715" name="L715"></a> 715             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L716" name="L716"></a> 716             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">long</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">long</strong>[] w,
<a id="L717" name="L717"></a> 717                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L718" name="L718"></a> 718                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L719" name="L719"></a> 719                 <strong class="reserved">super</strong>(par);
<a id="L720" name="L720"></a> 720                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L721" name="L721"></a> 721                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L722" name="L722"></a> 722                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L723" name="L723"></a> 723                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L724" name="L724"></a> 724             <em class="brace">}</em>
<a id="L725" name="L725"></a> 725 
<a id="L726" name="L726"></a> 726             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L727" name="L727"></a> 727                 <strong class="reserved">long</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L728" name="L728"></a> 728                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L729" name="L729"></a> 729                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L730" name="L730"></a> 730                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L731" name="L731"></a> 731                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L732" name="L732"></a> 732                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L733" name="L733"></a> 733                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L734" name="L734"></a> 734                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L735" name="L735"></a> 735                             <strong class="reserved">break</strong>;
<a id="L736" name="L736"></a> 736                         rh = rn;
<a id="L737" name="L737"></a> 737                         <strong class="reserved">long</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L738" name="L738"></a> 738                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L739" name="L739"></a> 739                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L740" name="L740"></a> 740                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L741" name="L741"></a> 741                                 rh = rm;
<a id="L742" name="L742"></a> 742                             <strong class="reserved">else</strong>
<a id="L743" name="L743"></a> 743                                 lo = rm + 1;
<a id="L744" name="L744"></a> 744                         <em class="brace">}</em>
<a id="L745" name="L745"></a> 745                     <em class="brace">}</em>
<a id="L746" name="L746"></a> 746                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L747" name="L747"></a> 747                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L748" name="L748"></a> 748                             <strong class="reserved">break</strong>;
<a id="L749" name="L749"></a> 749                         lh = ln;
<a id="L750" name="L750"></a> 750                         <strong class="reserved">long</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L751" name="L751"></a> 751                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L752" name="L752"></a> 752                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L753" name="L753"></a> 753                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L754" name="L754"></a> 754                                 lh = lm;
<a id="L755" name="L755"></a> 755                             <strong class="reserved">else</strong>
<a id="L756" name="L756"></a> 756                                 lo = lm + 1;
<a id="L757" name="L757"></a> 757                         <em class="brace">}</em>
<a id="L758" name="L758"></a> 758                     <em class="brace">}</em>
<a id="L759" name="L759"></a> 759                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L760" name="L760"></a> 760                                           rb + rh, rn - rh,
<a id="L761" name="L761"></a> 761                                           k + lh + rh, g);
<a id="L762" name="L762"></a> 762                     rn = rh;
<a id="L763" name="L763"></a> 763                     ln = lh;
<a id="L764" name="L764"></a> 764                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L765" name="L765"></a> 765                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L766" name="L766"></a> 766                 <em class="brace">}</em>
<a id="L767" name="L767"></a> 767 
<a id="L768" name="L768"></a> 768                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L769" name="L769"></a> 769                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L770" name="L770"></a> 770                     <strong class="reserved">long</strong> t, al, ar;
<a id="L771" name="L771"></a> 771                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L772" name="L772"></a> 772                         lb++; t = al;
<a id="L773" name="L773"></a> 773                     <em class="brace">}</em>
<a id="L774" name="L774"></a> 774                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L775" name="L775"></a> 775                         rb++; t = ar;
<a id="L776" name="L776"></a> 776                     <em class="brace">}</em>
<a id="L777" name="L777"></a> 777                     w[k++] = t;
<a id="L778" name="L778"></a> 778                 <em class="brace">}</em>
<a id="L779" name="L779"></a> 779                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L780" name="L780"></a> 780                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L781" name="L781"></a> 781                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L782" name="L782"></a> 782                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L783" name="L783"></a> 783                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L784" name="L784"></a> 784             <em class="brace">}</em>
<a id="L785" name="L785"></a> 785         <em class="brace">}</em>
<a id="L786" name="L786"></a> 786     <em class="brace">}</em> <em class="comment">// FJLong</em>
<a id="L787" name="L787"></a> 787 
<div class="comment">
     /** float support class */</div>
<a id="L789" name="L789"></a> 789     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2833.html" title="Multiple referred from 2 places.">FJFloat</a> <em class="brace">{</em>
<a id="L790" name="L790"></a> 790         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L791" name="L791"></a> 791             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L792" name="L792"></a> 792             <strong class="reserved">final</strong> <strong class="reserved">float</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L793" name="L793"></a> 793             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L794" name="L794"></a> 794             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">float</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">float</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L795" name="L795"></a> 795                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L796" name="L796"></a> 796                 <strong class="reserved">super</strong>(par);
<a id="L797" name="L797"></a> 797                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L798" name="L798"></a> 798                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L799" name="L799"></a> 799             <em class="brace">}</em>
<a id="L800" name="L800"></a> 800             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L801" name="L801"></a> 801                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L802" name="L802"></a> 802                 <strong class="reserved">float</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L803" name="L803"></a> 803                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L804" name="L804"></a> 804                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L805" name="L805"></a> 805                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L806" name="L806"></a> 806                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L807" name="L807"></a> 807                                                     wb+h, n-h, b, g));
<a id="L808" name="L808"></a> 808                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L809" name="L809"></a> 809                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L810" name="L810"></a> 810                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L811" name="L811"></a> 811                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L812" name="L812"></a> 812                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L813" name="L813"></a> 813                                                     b+q, h-q, wb, g));
<a id="L814" name="L814"></a> 814                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L815" name="L815"></a> 815                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L816" name="L816"></a> 816                     n = q;
<a id="L817" name="L817"></a> 817                 <em class="brace">}</em>
<a id="L818" name="L818"></a> 818                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1, w, wb, n);
<a id="L819" name="L819"></a> 819                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L820" name="L820"></a> 820             <em class="brace">}</em>
<a id="L821" name="L821"></a> 821         <em class="brace">}</em>
<a id="L822" name="L822"></a> 822 
<a id="L823" name="L823"></a> 823         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L824" name="L824"></a> 824             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L825" name="L825"></a> 825             <strong class="reserved">final</strong> <strong class="reserved">float</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L826" name="L826"></a> 826             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L827" name="L827"></a> 827             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">float</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">float</strong>[] w,
<a id="L828" name="L828"></a> 828                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L829" name="L829"></a> 829                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L830" name="L830"></a> 830                 <strong class="reserved">super</strong>(par);
<a id="L831" name="L831"></a> 831                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L832" name="L832"></a> 832                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L833" name="L833"></a> 833                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L834" name="L834"></a> 834                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L835" name="L835"></a> 835             <em class="brace">}</em>
<a id="L836" name="L836"></a> 836 
<a id="L837" name="L837"></a> 837             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L838" name="L838"></a> 838                 <strong class="reserved">float</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L839" name="L839"></a> 839                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L840" name="L840"></a> 840                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L841" name="L841"></a> 841                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L842" name="L842"></a> 842                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L843" name="L843"></a> 843                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L844" name="L844"></a> 844                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L845" name="L845"></a> 845                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L846" name="L846"></a> 846                             <strong class="reserved">break</strong>;
<a id="L847" name="L847"></a> 847                         rh = rn;
<a id="L848" name="L848"></a> 848                         <strong class="reserved">float</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L849" name="L849"></a> 849                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L850" name="L850"></a> 850                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L851" name="L851"></a> 851                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L852" name="L852"></a> 852                                 rh = rm;
<a id="L853" name="L853"></a> 853                             <strong class="reserved">else</strong>
<a id="L854" name="L854"></a> 854                                 lo = rm + 1;
<a id="L855" name="L855"></a> 855                         <em class="brace">}</em>
<a id="L856" name="L856"></a> 856                     <em class="brace">}</em>
<a id="L857" name="L857"></a> 857                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L858" name="L858"></a> 858                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L859" name="L859"></a> 859                             <strong class="reserved">break</strong>;
<a id="L860" name="L860"></a> 860                         lh = ln;
<a id="L861" name="L861"></a> 861                         <strong class="reserved">float</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L862" name="L862"></a> 862                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L863" name="L863"></a> 863                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L864" name="L864"></a> 864                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L865" name="L865"></a> 865                                 lh = lm;
<a id="L866" name="L866"></a> 866                             <strong class="reserved">else</strong>
<a id="L867" name="L867"></a> 867                                 lo = lm + 1;
<a id="L868" name="L868"></a> 868                         <em class="brace">}</em>
<a id="L869" name="L869"></a> 869                     <em class="brace">}</em>
<a id="L870" name="L870"></a> 870                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L871" name="L871"></a> 871                                           rb + rh, rn - rh,
<a id="L872" name="L872"></a> 872                                           k + lh + rh, g);
<a id="L873" name="L873"></a> 873                     rn = rh;
<a id="L874" name="L874"></a> 874                     ln = lh;
<a id="L875" name="L875"></a> 875                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L876" name="L876"></a> 876                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L877" name="L877"></a> 877                 <em class="brace">}</em>
<a id="L878" name="L878"></a> 878 
<a id="L879" name="L879"></a> 879                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L880" name="L880"></a> 880                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L881" name="L881"></a> 881                     <strong class="reserved">float</strong> t, al, ar;
<a id="L882" name="L882"></a> 882                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L883" name="L883"></a> 883                         lb++; t = al;
<a id="L884" name="L884"></a> 884                     <em class="brace">}</em>
<a id="L885" name="L885"></a> 885                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L886" name="L886"></a> 886                         rb++; t = ar;
<a id="L887" name="L887"></a> 887                     <em class="brace">}</em>
<a id="L888" name="L888"></a> 888                     w[k++] = t;
<a id="L889" name="L889"></a> 889                 <em class="brace">}</em>
<a id="L890" name="L890"></a> 890                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L891" name="L891"></a> 891                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L892" name="L892"></a> 892                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L893" name="L893"></a> 893                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L894" name="L894"></a> 894                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L895" name="L895"></a> 895             <em class="brace">}</em>
<a id="L896" name="L896"></a> 896         <em class="brace">}</em>
<a id="L897" name="L897"></a> 897     <em class="brace">}</em> <em class="comment">// FJFloat</em>
<a id="L898" name="L898"></a> 898 
<div class="comment">
     /** double support class */</div>
<a id="L900" name="L900"></a> 900     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2832.html" title="Multiple referred from 2 places.">FJDouble</a> <em class="brace">{</em>
<a id="L901" name="L901"></a> 901         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7485.html" title="Multiple referred from 42 places.">Sorter</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L902" name="L902"></a> 902             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L903" name="L903"></a> 903             <strong class="reserved">final</strong> <strong class="reserved">double</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w;
<a id="L904" name="L904"></a> 904             <strong class="reserved">final</strong> <strong class="reserved">int</strong> base, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wbase, gran;
<a id="L905" name="L905"></a> 905             Sorter(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">double</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">double</strong>[] w, <strong class="reserved">int</strong> base,
<a id="L906" name="L906"></a> 906                    <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L907" name="L907"></a> 907                 <strong class="reserved">super</strong>(par);
<a id="L908" name="L908"></a> 908                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w; <strong class="reserved">this</strong>.base = base; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L909" name="L909"></a> 909                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L910" name="L910"></a> 910             <em class="brace">}</em>
<a id="L911" name="L911"></a> 911             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L912" name="L912"></a> 912                 <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; s = <strong class="reserved">this</strong>;
<a id="L913" name="L913"></a> 913                 <strong class="reserved">double</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L914" name="L914"></a> 914                 <strong class="reserved">int</strong> b = <strong class="reserved">this</strong>.base, n = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, wb = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L915" name="L915"></a> 915                 <strong class="reserved">while</strong> (n &gt; g) <em class="brace">{</em>
<a id="L916" name="L916"></a> 916                     <strong class="reserved">int</strong> h = n &gt;&gt;&gt; 1, q = h &gt;&gt;&gt; 1, <a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a> = h + q; <em class="comment">// quartiles</em>
<a id="L917" name="L917"></a> 917                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> fc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(s, w, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, wb, h,
<a id="L918" name="L918"></a> 918                                                     wb+h, n-h, b, g));
<a id="L919" name="L919"></a> 919                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> rc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q,
<a id="L920" name="L920"></a> 920                                                     b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+h, g));
<a id="L921" name="L921"></a> 921                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, n-<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, wb+<a href="../S/986.html#L3242" title="Defined at 3242 in src/java/util/regex/Pattern.java.">u</a>, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L922" name="L922"></a> 922                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(rc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+h, q, wb+h, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();;
<a id="L923" name="L923"></a> 923                     <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a> bc = <strong class="reserved">new</strong> <a href="../S/1035.html#L98" title="Defined at 98 in src/java/util/ArraysParallelSortHelpers.java.">Relay</a>(<strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(fc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b, q,
<a id="L924" name="L924"></a> 924                                                     b+q, h-q, wb, g));
<a id="L925" name="L925"></a> 925                     <strong class="reserved">new</strong> <a href="../D/8252.html" title="Multiple defined in 8 places.">Sorter</a>(bc, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, b+q, h-q, wb+q, g).<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L926" name="L926"></a> 926                     s = <strong class="reserved">new</strong> <a href="../S/1035.html#L89" title="Defined at 89 in src/java/util/ArraysParallelSortHelpers.java.">EmptyCompleter</a>(bc);
<a id="L927" name="L927"></a> 927                     n = q;
<a id="L928" name="L928"></a> 928                 <em class="brace">}</em>
<a id="L929" name="L929"></a> 929                 <a href="../S/874.html#L47" title="Defined at 47 in src/java/util/DualPivotQuicksort.java.">DualPivotQuicksort</a>.<a href="../D/34687.html" title="Multiple defined in 56 places.">sort</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, b, b + n - 1, w, wb, n);
<a id="L930" name="L930"></a> 930                 s.<a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L931" name="L931"></a> 931             <em class="brace">}</em>
<a id="L932" name="L932"></a> 932         <em class="brace">}</em>
<a id="L933" name="L933"></a> 933 
<a id="L934" name="L934"></a> 934         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5035.html" title="Multiple referred from 32 places.">Merger</a> <strong class="reserved">extends</strong> <a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; <em class="brace">{</em>
<a id="L935" name="L935"></a> 935             <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2446542900576103244L;
<a id="L936" name="L936"></a> 936             <strong class="reserved">final</strong> <strong class="reserved">double</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w; <em class="comment">// main and workspace arrays</em>
<a id="L937" name="L937"></a> 937             <strong class="reserved">final</strong> <strong class="reserved">int</strong> lbase, lsize, rbase, rsize, wbase, gran;
<a id="L938" name="L938"></a> 938             Merger(<a href="../S/1070.html#L411" title="Defined at 411 in src/java/util/concurrent/CountedCompleter.java.">CountedCompleter</a>&lt;?&gt; par, <strong class="reserved">double</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">double</strong>[] w,
<a id="L939" name="L939"></a> 939                    <strong class="reserved">int</strong> lbase, <strong class="reserved">int</strong> lsize, <strong class="reserved">int</strong> rbase,
<a id="L940" name="L940"></a> 940                    <strong class="reserved">int</strong> rsize, <strong class="reserved">int</strong> wbase, <strong class="reserved">int</strong> gran) <em class="brace">{</em>
<a id="L941" name="L941"></a> 941                 <strong class="reserved">super</strong>(par);
<a id="L942" name="L942"></a> 942                 <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>; <strong class="reserved">this</strong>.w = w;
<a id="L943" name="L943"></a> 943                 <strong class="reserved">this</strong>.lbase = lbase; <strong class="reserved">this</strong>.lsize = lsize;
<a id="L944" name="L944"></a> 944                 <strong class="reserved">this</strong>.rbase = rbase; <strong class="reserved">this</strong>.rsize = rsize;
<a id="L945" name="L945"></a> 945                 <strong class="reserved">this</strong>.wbase = wbase; <strong class="reserved">this</strong>.gran = gran;
<a id="L946" name="L946"></a> 946             <em class="brace">}</em>
<a id="L947" name="L947"></a> 947 
<a id="L948" name="L948"></a> 948             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11810.html" title="Multiple referred from 7 places.">compute</a>() <em class="brace">{</em>
<a id="L949" name="L949"></a> 949                 <strong class="reserved">double</strong>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">this</strong>.<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w = <strong class="reserved">this</strong>.w; <em class="comment">// localize all params</em>
<a id="L950" name="L950"></a> 950                 <strong class="reserved">int</strong> lb = <strong class="reserved">this</strong>.lbase, ln = <strong class="reserved">this</strong>.lsize, rb = <strong class="reserved">this</strong>.rbase,
<a id="L951" name="L951"></a> 951                     rn = <strong class="reserved">this</strong>.rsize, k = <strong class="reserved">this</strong>.wbase, g = <strong class="reserved">this</strong>.gran;
<a id="L952" name="L952"></a> 952                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong> || w == <strong class="reserved">null</strong> || lb &lt; 0 || rb &lt; 0 || k &lt; 0)
<a id="L953" name="L953"></a> 953                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>(); <em class="comment">// hoist checks</em>
<a id="L954" name="L954"></a> 954                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lh, rh;;) <em class="brace">{</em>  <em class="comment">// split larger, find point in smaller</em>
<a id="L955" name="L955"></a> 955                     <strong class="reserved">if</strong> (ln &gt;= rn) <em class="brace">{</em>
<a id="L956" name="L956"></a> 956                         <strong class="reserved">if</strong> (ln &lt;= g)
<a id="L957" name="L957"></a> 957                             <strong class="reserved">break</strong>;
<a id="L958" name="L958"></a> 958                         rh = rn;
<a id="L959" name="L959"></a> 959                         <strong class="reserved">double</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(lh = ln &gt;&gt;&gt; 1) + lb];
<a id="L960" name="L960"></a> 960                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; rh; ) <em class="brace">{</em>
<a id="L961" name="L961"></a> 961                             <strong class="reserved">int</strong> rm = (lo + rh) &gt;&gt;&gt; 1;
<a id="L962" name="L962"></a> 962                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rm + rb])
<a id="L963" name="L963"></a> 963                                 rh = rm;
<a id="L964" name="L964"></a> 964                             <strong class="reserved">else</strong>
<a id="L965" name="L965"></a> 965                                 lo = rm + 1;
<a id="L966" name="L966"></a> 966                         <em class="brace">}</em>
<a id="L967" name="L967"></a> 967                     <em class="brace">}</em>
<a id="L968" name="L968"></a> 968                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L969" name="L969"></a> 969                         <strong class="reserved">if</strong> (rn &lt;= g)
<a id="L970" name="L970"></a> 970                             <strong class="reserved">break</strong>;
<a id="L971" name="L971"></a> 971                         lh = ln;
<a id="L972" name="L972"></a> 972                         <strong class="reserved">double</strong> <a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[(rh = rn &gt;&gt;&gt; 1) + rb];
<a id="L973" name="L973"></a> 973                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> lo = 0; lo &lt; lh; ) <em class="brace">{</em>
<a id="L974" name="L974"></a> 974                             <strong class="reserved">int</strong> lm = (lo + lh) &gt;&gt;&gt; 1;
<a id="L975" name="L975"></a> 975                             <strong class="reserved">if</strong> (<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a> &lt;= <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lm + lb])
<a id="L976" name="L976"></a> 976                                 lh = lm;
<a id="L977" name="L977"></a> 977                             <strong class="reserved">else</strong>
<a id="L978" name="L978"></a> 978                                 lo = lm + 1;
<a id="L979" name="L979"></a> 979                         <em class="brace">}</em>
<a id="L980" name="L980"></a> 980                     <em class="brace">}</em>
<a id="L981" name="L981"></a> 981                     <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a> m = <strong class="reserved">new</strong> <a href="../D/5528.html" title="Multiple defined in 8 places.">Merger</a>(<strong class="reserved">this</strong>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, w, lb + lh, ln - lh,
<a id="L982" name="L982"></a> 982                                           rb + rh, rn - rh,
<a id="L983" name="L983"></a> 983                                           k + lh + rh, g);
<a id="L984" name="L984"></a> 984                     rn = rh;
<a id="L985" name="L985"></a> 985                     ln = lh;
<a id="L986" name="L986"></a> 986                     <a href="../S/1070.html#L525" title="Defined at 525 in src/java/util/concurrent/CountedCompleter.java.">addToPendingCount</a>(1);
<a id="L987" name="L987"></a> 987                     m.<a href="../S/1101.html#L697" title="Defined at 697 in src/java/util/concurrent/ForkJoinTask.java.">fork</a>();
<a id="L988" name="L988"></a> 988                 <em class="brace">}</em>
<a id="L989" name="L989"></a> 989 
<a id="L990" name="L990"></a> 990                 <strong class="reserved">int</strong> lf = lb + ln, rf = rb + rn; <em class="comment">// index bounds</em>
<a id="L991" name="L991"></a> 991                 <strong class="reserved">while</strong> (lb &lt; lf &amp;&amp; rb &lt; rf) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992                     <strong class="reserved">double</strong> t, al, ar;
<a id="L993" name="L993"></a> 993                     <strong class="reserved">if</strong> ((al = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[lb]) &lt;= (ar = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[rb])) <em class="brace">{</em>
<a id="L994" name="L994"></a> 994                         lb++; t = al;
<a id="L995" name="L995"></a> 995                     <em class="brace">}</em>
<a id="L996" name="L996"></a> 996                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L997" name="L997"></a> 997                         rb++; t = ar;
<a id="L998" name="L998"></a> 998                     <em class="brace">}</em>
<a id="L999" name="L999"></a> 999                     w[k++] = t;
<a id="L1000" name="L1000"></a>1000                 <em class="brace">}</em>
<a id="L1001" name="L1001"></a>1001                 <strong class="reserved">if</strong> (rb &lt; rf)
<a id="L1002" name="L1002"></a>1002                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, rb, w, k, rf - rb);
<a id="L1003" name="L1003"></a>1003                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lb &lt; lf)
<a id="L1004" name="L1004"></a>1004                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lb, w, k, lf - lb);
<a id="L1005" name="L1005"></a>1005                 <a href="../S/1070.html#L573" title="Defined at 573 in src/java/util/concurrent/CountedCompleter.java.">tryComplete</a>();
<a id="L1006" name="L1006"></a>1006             <em class="brace">}</em>
<a id="L1007" name="L1007"></a>1007         <em class="brace">}</em>
<a id="L1008" name="L1008"></a>1008     <em class="brace">}</em> <em class="comment">// FJDouble</em>
<a id="L1009" name="L1009"></a>1009 
<a id="L1010" name="L1010"></a>1010 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L92">[^]</a><a href="#L948">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/Base64.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L87">[^]</a><a href="#L991">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L87" title="Defined at 87.">getEncoder</a></li>
<li><a href="#L98" title="Defined at 98.">getUrlEncoder</a></li>
<li><a href="#L108" title="Defined at 108.">getMimeEncoder</a></li>
<li><a href="#L130" title="Defined at 130.">getMimeEncoder</a></li>
<li><a href="#L150" title="Defined at 150.">getDecoder</a></li>
<li><a href="#L161" title="Defined at 161.">getUrlDecoder</a></li>
<li><a href="#L171" title="Defined at 171.">getMimeDecoder</a></li>
<li><a href="#L237" title="Defined at 237.">outLength</a></li>
<li><a href="#L260" title="Defined at 260.">encode</a></li>
<li><a href="#L288" title="Defined at 288.">encode</a></li>
<li><a href="#L313" title="Defined at 313.">SuppressWarnings</a></li>
<li><a href="#L314" title="Defined at 314.">encodeToString</a></li>
<li><a href="#L333" title="Defined at 333.">encode</a></li>
<li><a href="#L367" title="Defined at 367.">wrap</a></li>
<li><a href="#L385" title="Defined at 385.">withoutPadding</a></li>
<li><a href="#L391" title="Defined at 391.">encode0</a></li>
<li><a href="#L524" title="Defined at 524.">decode</a></li>
<li><a href="#L548" title="Defined at 548.">decode</a></li>
<li><a href="#L577" title="Defined at 577.">decode</a></li>
<li><a href="#L606" title="Defined at 606.">decode</a></li>
<li><a href="#L645" title="Defined at 645.">wrap</a></li>
<li><a href="#L650" title="Defined at 650.">outLength</a></li>
<li><a href="#L688" title="Defined at 688.">decode0</a></li>
<li><a href="#L774" title="Defined at 774.">write</a></li>
<li><a href="#L780" title="Defined at 780.">checkNewline</a></li>
<li><a href="#L788" title="Defined at 788.">write</a></li>
<li><a href="#L835" title="Defined at 835.">close</a></li>
<li><a href="#L886" title="Defined at 886.">read</a></li>
<li><a href="#L891" title="Defined at 891.">read</a></li>
<li><a href="#L984" title="Defined at 984.">available</a></li>
<li><a href="#L991" title="Defined at 991.">close</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.FilterOutputStream;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.InputStream;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.io.IOException;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.io.OutputStream;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.nio.ByteBuffer;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.nio.charset.StandardCharsets;
<a id="L34" name="L34"></a>  34 
<div class="comment">
  This class consists exclusively of static methods for obtaining
  encoders and decoders for the Base64 encoding scheme. The
  implementation of this class supports the following types of Base64
  as specified in
  <a href="http://www.ietf.org/rfc/rfc4648.txt">RFC 4648</a> and
  <a href="http://www.ietf.org/rfc/rfc2045.txt">RFC 2045</a>.
  <ul><li><a name="basic"><b>Basic</b></a>
  <p> Uses "The Base64 Alphabet" as specified in Table 1 of
      RFC 4648 and RFC 2045 for encoding and decoding operation.
      The encoder does not add any line feed (line separator)
      character. The decoder rejects data that contains characters
      outside the base64 alphabet.</p></li><li><a name="url"><b>URL and Filename safe</b></a>
  <p> Uses the "URL and Filename safe Base64 Alphabet" as specified
      in Table 2 of RFC 4648 for encoding and decoding. The
      encoder does not add any line feed (line separator) character.
      The decoder rejects data that contains characters outside the
      base64 alphabet.</p></li><li><a name="mime"><b>MIME</b></a>
  <p> Uses the "The Base64 Alphabet" as specified in Table 1 of
      RFC 2045 for encoding and decoding operation. The encoded output
      must be represented in lines of no more than 76 characters each
      and uses a carriage return <code>'\r'</code> followed immediately by
      a linefeed <code>'\n'</code> as the line separator. No line separator
      is added to the end of the encoded output. All line separators
      or other characters not found in the base64 alphabet table are
      ignored in decoding operation.</p></li>
  </ul>
  <p> Unless otherwise noted, passing a <code>null</code> argument to a
  method of this class will cause a {@link java.lang.NullPointerException
  NullPointerException} to be thrown.
  @author  Xueming Shen
  @since   1.8</p></div>
<a id="L76" name="L76"></a>  76 
<a id="L77" name="L77"></a>  77 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a> <em class="brace">{</em>
<a id="L78" name="L78"></a>  78 
<a id="L79" name="L79"></a>  79     <strong class="reserved">private</strong> Base64() <em class="brace">{</em><em class="brace">}</em>
<a id="L80" name="L80"></a>  80 
<div class="comment">
      Returns a <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> that encodes using the
      <a href="#basic">Basic</a> type base64 encoding scheme.
      @return  A Base64 encoder.</div>
<a id="L87" name="L87"></a>  87     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> getEncoder() <em class="brace">{</em>
<a id="L88" name="L88"></a>  88          <strong class="reserved">return</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.RFC4648;
<a id="L89" name="L89"></a>  89     <em class="brace">}</em>
<a id="L90" name="L90"></a>  90 
<div class="comment">
      Returns a <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> that encodes using the
      <a href="#url">URL and Filename safe</a> type base64
      encoding scheme.
      @return  A Base64 encoder.</div>
<a id="L98" name="L98"></a>  98     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> getUrlEncoder() <em class="brace">{</em>
<a id="L99" name="L99"></a>  99          <strong class="reserved">return</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.RFC4648_URLSAFE;
<a id="L100" name="L100"></a> 100     <em class="brace">}</em>
<a id="L101" name="L101"></a> 101 
<div class="comment">
      Returns a <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> that encodes using the
      <a href="#mime">MIME</a> type base64 encoding scheme.
      @return  A Base64 encoder.</div>
<a id="L108" name="L108"></a> 108     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> getMimeEncoder() <em class="brace">{</em>
<a id="L109" name="L109"></a> 109         <strong class="reserved">return</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.RFC2045;
<a id="L110" name="L110"></a> 110     <em class="brace">}</em>
<a id="L111" name="L111"></a> 111 
<div class="comment">
      Returns a <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> that encodes using the
      <a href="#mime">MIME</a> type base64 encoding scheme
      with specified line length and line separators.
      @param   lineLength
               the length of each output line (rounded down to nearest multiple
               of 4). If <code>lineLength &lt;= 0</code> the output will not be separated
               in lines
      @param   lineSeparator
               the line separator for each output line
      @return  A Base64 encoder.
      @throws  IllegalArgumentException if <code>lineSeparator</code> includes any
               character of "The Base64 Alphabet" as specified in Table 1 of
               RFC 2045.</div>
<a id="L130" name="L130"></a> 130     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> getMimeEncoder(<strong class="reserved">int</strong> lineLength, <strong class="reserved">byte</strong>[] <a href="../S/1557.html#L647" title="Defined at 647 in src/java/lang/System.java.">lineSeparator</a>) <em class="brace">{</em>
<a id="L131" name="L131"></a> 131          <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(<a href="../S/1557.html#L647" title="Defined at 647 in src/java/lang/System.java.">lineSeparator</a>);
<a id="L132" name="L132"></a> 132          <strong class="reserved">int</strong>[] base64 = <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>.fromBase64;
<a id="L133" name="L133"></a> 133          <strong class="reserved">for</strong> (<strong class="reserved">byte</strong> b : <a href="../S/1557.html#L647" title="Defined at 647 in src/java/lang/System.java.">lineSeparator</a>) <em class="brace">{</em>
<a id="L134" name="L134"></a> 134              <strong class="reserved">if</strong> (base64[b &amp; 0xff] != -1)
<a id="L135" name="L135"></a> 135                  <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L136" name="L136"></a> 136                      "Illegal base64 line separator character 0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(b, 16));
<a id="L137" name="L137"></a> 137          <em class="brace">}</em>
<a id="L138" name="L138"></a> 138          <strong class="reserved">if</strong> (lineLength &lt;= 0) <em class="brace">{</em>
<a id="L139" name="L139"></a> 139              <strong class="reserved">return</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.RFC4648;
<a id="L140" name="L140"></a> 140          <em class="brace">}</em>
<a id="L141" name="L141"></a> 141          <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>(<strong class="reserved">false</strong>, <a href="../S/1557.html#L647" title="Defined at 647 in src/java/lang/System.java.">lineSeparator</a>, lineLength &gt;&gt; 2 &lt;&lt; 2, <strong class="reserved">true</strong>);
<a id="L142" name="L142"></a> 142     <em class="brace">}</em>
<a id="L143" name="L143"></a> 143 
<div class="comment">
      Returns a <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> that decodes using the
      <a href="#basic">Basic</a> type base64 encoding scheme.
      @return  A Base64 decoder.</div>
<a id="L150" name="L150"></a> 150     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> getDecoder() <em class="brace">{</em>
<a id="L151" name="L151"></a> 151          <strong class="reserved">return</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>.RFC4648;
<a id="L152" name="L152"></a> 152     <em class="brace">}</em>
<a id="L153" name="L153"></a> 153 
<div class="comment">
      Returns a <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> that decodes using the
      <a href="#url">URL and Filename safe</a> type base64
      encoding scheme.
      @return  A Base64 decoder.</div>
<a id="L161" name="L161"></a> 161     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> getUrlDecoder() <em class="brace">{</em>
<a id="L162" name="L162"></a> 162          <strong class="reserved">return</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>.RFC4648_URLSAFE;
<a id="L163" name="L163"></a> 163     <em class="brace">}</em>
<a id="L164" name="L164"></a> 164 
<div class="comment">
      Returns a <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> that decodes using the
      <a href="#mime">MIME</a> type base64 decoding scheme.
      @return  A Base64 decoder.</div>
<a id="L171" name="L171"></a> 171     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> getMimeDecoder() <em class="brace">{</em>
<a id="L172" name="L172"></a> 172          <strong class="reserved">return</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>.RFC2045;
<a id="L173" name="L173"></a> 173     <em class="brace">}</em>
<a id="L174" name="L174"></a> 174 
<div class="comment">
      This class implements an encoder for encoding byte data using
      the Base64 encoding scheme as specified in RFC 4648 and RFC 2045.
      <p> Instances of <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> class are safe for use by
      multiple concurrent threads.
      </p><p> Unless otherwise noted, passing a <code>null</code> argument to
      a method of this class will cause a
      {@link java.lang.NullPointerException NullPointerException} to
      be thrown.
      @see     Decoder
      @since   1.8</p></div>
<a id="L190" name="L190"></a> 190     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2640.html" title="Multiple referred from 101 places.">Encoder</a> <em class="brace">{</em>
<a id="L191" name="L191"></a> 191 
<a id="L192" name="L192"></a> 192         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] newline;
<a id="L193" name="L193"></a> 193         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> linemax;
<a id="L194" name="L194"></a> 194         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> isURL;
<a id="L195" name="L195"></a> 195         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> doPadding;
<a id="L196" name="L196"></a> 196 
<a id="L197" name="L197"></a> 197         <strong class="reserved">private</strong> Encoder(<strong class="reserved">boolean</strong> isURL, <strong class="reserved">byte</strong>[] newline, <strong class="reserved">int</strong> linemax, <strong class="reserved">boolean</strong> doPadding) <em class="brace">{</em>
<a id="L198" name="L198"></a> 198             <strong class="reserved">this</strong>.isURL = isURL;
<a id="L199" name="L199"></a> 199             <strong class="reserved">this</strong>.newline = newline;
<a id="L200" name="L200"></a> 200             <strong class="reserved">this</strong>.linemax = linemax;
<a id="L201" name="L201"></a> 201             <strong class="reserved">this</strong>.doPadding = doPadding;
<a id="L202" name="L202"></a> 202         <em class="brace">}</em>
<a id="L203" name="L203"></a> 203 
<div class="comment">
          This array is a lookup table that translates 6-bit positive integer
          index values into their "Base64 Alphabet" equivalents as specified
          in "Table 1: The Base64 Alphabet" of RFC 2045 (and RFC 4648).</div>
<a id="L209" name="L209"></a> 209         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] toBase64 = <em class="brace">{</em>
<a id="L210" name="L210"></a> 210             'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
<a id="L211" name="L211"></a> 211             'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
<a id="L212" name="L212"></a> 212             'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
<a id="L213" name="L213"></a> 213             'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
<a id="L214" name="L214"></a> 214             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/'
<a id="L215" name="L215"></a> 215         <em class="brace">}</em>;
<a id="L216" name="L216"></a> 216 
<div class="comment">
          It's the lookup table for "URL and Filename safe Base64" as specified
          in Table 2 of the RFC 4648, with the '+' and '/' changed to '-' and
          '_'. This table is used when BASE64_URL is specified.</div>
<a id="L222" name="L222"></a> 222         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] toBase64URL = <em class="brace">{</em>
<a id="L223" name="L223"></a> 223             'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
<a id="L224" name="L224"></a> 224             'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
<a id="L225" name="L225"></a> 225             'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
<a id="L226" name="L226"></a> 226             'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
<a id="L227" name="L227"></a> 227             '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', '_'
<a id="L228" name="L228"></a> 228         <em class="brace">}</em>;
<a id="L229" name="L229"></a> 229 
<a id="L230" name="L230"></a> 230         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MIMELINEMAX = 76;
<a id="L231" name="L231"></a> 231         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] CRLF = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[] <em class="brace">{</em>'\r', '\n'<em class="brace">}</em>;
<a id="L232" name="L232"></a> 232 
<a id="L233" name="L233"></a> 233         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> RFC4648 = <strong class="reserved">new</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>(<strong class="reserved">false</strong>, <strong class="reserved">null</strong>, -1, <strong class="reserved">true</strong>);
<a id="L234" name="L234"></a> 234         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> RFC4648_URLSAFE = <strong class="reserved">new</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>(<strong class="reserved">true</strong>, <strong class="reserved">null</strong>, -1, <strong class="reserved">true</strong>);
<a id="L235" name="L235"></a> 235         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> RFC2045 = <strong class="reserved">new</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>(<strong class="reserved">false</strong>, CRLF, MIMELINEMAX, <strong class="reserved">true</strong>);
<a id="L236" name="L236"></a> 236 
<a id="L237" name="L237"></a> 237         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/24039.html" title="Multiple referred from 6 places.">outLength</a>(<strong class="reserved">int</strong> srclen) <em class="brace">{</em>
<a id="L238" name="L238"></a> 238             <strong class="reserved">int</strong> len = 0;
<a id="L239" name="L239"></a> 239             <strong class="reserved">if</strong> (doPadding) <em class="brace">{</em>
<a id="L240" name="L240"></a> 240                 len = 4 * ((srclen + 2) / 3);
<a id="L241" name="L241"></a> 241             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L242" name="L242"></a> 242                 <strong class="reserved">int</strong> n = srclen % 3;
<a id="L243" name="L243"></a> 243                 len = 4 * (srclen / 3) + (n == 0 ? 0 : n + 1);
<a id="L244" name="L244"></a> 244             <em class="brace">}</em>
<a id="L245" name="L245"></a> 245             <strong class="reserved">if</strong> (linemax &gt; 0)                                  <em class="comment">// line separators</em>
<a id="L246" name="L246"></a> 246                 len += (len - 1) / linemax * newline.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L247" name="L247"></a> 247             <strong class="reserved">return</strong> len;
<a id="L248" name="L248"></a> 248         <em class="brace">}</em>
<a id="L249" name="L249"></a> 249 
<div class="comment">
          Encodes all bytes from the specified byte array into a newly-allocated
          byte array using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a> encoding scheme. The returned byte
          array is of the length of the resulting bytes.
          @param   src
                   the byte array to encode
          @return  A newly-allocated byte array containing the resulting
                   encoded bytes.</div>
<a id="L260" name="L260"></a> 260         <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/13718.html" title="Multiple referred from 69 places.">encode</a>(<strong class="reserved">byte</strong>[] src) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261             <strong class="reserved">int</strong> len = <a href="../D/28592.html" title="Multiple defined in 2 places.">outLength</a>(src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);          <em class="comment">// dst array size</em>
<a id="L262" name="L262"></a> 262             <strong class="reserved">byte</strong>[] dst = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[len];
<a id="L263" name="L263"></a> 263             <strong class="reserved">int</strong> ret = <a href="../S/868.html#L391" title="Defined at 391 in src/java/util/Base64.java.">encode0</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, dst);
<a id="L264" name="L264"></a> 264             <strong class="reserved">if</strong> (ret != dst.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L265" name="L265"></a> 265                  <strong class="reserved">return</strong> <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(dst, ret);
<a id="L266" name="L266"></a> 266             <strong class="reserved">return</strong> dst;
<a id="L267" name="L267"></a> 267         <em class="brace">}</em>
<a id="L268" name="L268"></a> 268 
<div class="comment">
          Encodes all bytes from the specified byte array using the
          <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a> encoding scheme, writing the resulting bytes to the
          given output byte array, starting at offset 0.
          <p> It is the responsibility of the invoker of this method to make
          sure the output byte array <code>dst</code> has enough space for encoding
          all bytes from the input byte array. No bytes will be written to the
          output byte array if the output byte array is not big enough.
          @param   src
                   the byte array to encode
          @param   dst
                   the output byte array
          @return  The number of bytes written to the output byte array
          @throws  IllegalArgumentException if <code>dst</code> does not have enough
                   space for encoding all input bytes.</p></div>
<a id="L288" name="L288"></a> 288         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13718.html" title="Multiple referred from 69 places.">encode</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">byte</strong>[] dst) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289             <strong class="reserved">int</strong> len = <a href="../D/28592.html" title="Multiple defined in 2 places.">outLength</a>(src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);         <em class="comment">// dst array size</em>
<a id="L290" name="L290"></a> 290             <strong class="reserved">if</strong> (dst.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; len)
<a id="L291" name="L291"></a> 291                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L292" name="L292"></a> 292                     "Output byte array is too small for encoding all input bytes");
<a id="L293" name="L293"></a> 293             <strong class="reserved">return</strong> <a href="../S/868.html#L391" title="Defined at 391 in src/java/util/Base64.java.">encode0</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, dst);
<a id="L294" name="L294"></a> 294         <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<div class="comment">
          Encodes the specified byte array into a String using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a>
          encoding scheme.
          <p> This method first encodes all input bytes into a base64 encoded
          byte array and then constructs a new String by using the encoded byte
          array and the {@link java.nio.charset.StandardCharsets#ISO_8859_1
          ISO-8859-1} charset.
          </p><p> In other words, an invocation of this method has exactly the same
          effect as invoking
          <code>new String(encode(src), StandardCharsets.ISO_8859_1)</code>.
          @param   src
                   the byte array to encode
          @return  A String containing the resulting Base64 encoded characters</p></div>
<a id="L313" name="L313"></a> 313         @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("deprecation")
<a id="L314" name="L314"></a> 314         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> encodeToString(<strong class="reserved">byte</strong>[] src) <em class="brace">{</em>
<a id="L315" name="L315"></a> 315             <strong class="reserved">byte</strong>[] encoded = <a href="../D/15393.html" title="Multiple defined in 39 places.">encode</a>(src);
<a id="L316" name="L316"></a> 316             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>(encoded, 0, 0, encoded.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L317" name="L317"></a> 317         <em class="brace">}</em>
<a id="L318" name="L318"></a> 318 
<div class="comment">
          Encodes all remaining bytes from the specified byte buffer into
          a newly-allocated ByteBuffer using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a> encoding
          scheme.
          Upon return, the source buffer's position will be updated to
          its limit; its limit will not have been changed. The returned
          output buffer's position will be zero and its limit will be the
          number of resulting encoded bytes.
          @param   buffer
                   the source ByteBuffer to encode
          @return  A newly-allocated byte buffer containing the encoded bytes.</div>
<a id="L333" name="L333"></a> 333         <strong class="reserved">public</strong> <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../R/13718.html" title="Multiple referred from 69 places.">encode</a>(<a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>) <em class="brace">{</em>
<a id="L334" name="L334"></a> 334             <strong class="reserved">int</strong> len = <a href="../D/28592.html" title="Multiple defined in 2 places.">outLength</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>());
<a id="L335" name="L335"></a> 335             <strong class="reserved">byte</strong>[] dst = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[len];
<a id="L336" name="L336"></a> 336             <strong class="reserved">int</strong> ret = 0;
<a id="L337" name="L337"></a> 337             <strong class="reserved">if</strong> (<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/24058.html" title="Multiple defined in 8 places.">hasArray</a>()) <em class="brace">{</em>
<a id="L338" name="L338"></a> 338                 ret = <a href="../S/868.html#L391" title="Defined at 391 in src/java/util/Base64.java.">encode0</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>(),
<a id="L339" name="L339"></a> 339                               <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11508.html" title="Multiple defined in 8 places.">arrayOffset</a>() + <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>(),
<a id="L340" name="L340"></a> 340                               <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11508.html" title="Multiple defined in 8 places.">arrayOffset</a>() + <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>(),
<a id="L341" name="L341"></a> 341                               dst);
<a id="L342" name="L342"></a> 342                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>());
<a id="L343" name="L343"></a> 343             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L344" name="L344"></a> 344                 <strong class="reserved">byte</strong>[] src = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>()];
<a id="L345" name="L345"></a> 345                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(src);
<a id="L346" name="L346"></a> 346                 ret = <a href="../S/868.html#L391" title="Defined at 391 in src/java/util/Base64.java.">encode0</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, dst);
<a id="L347" name="L347"></a> 347             <em class="brace">}</em>
<a id="L348" name="L348"></a> 348             <strong class="reserved">if</strong> (ret != dst.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L349" name="L349"></a> 349                  dst = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(dst, ret);
<a id="L350" name="L350"></a> 350             <strong class="reserved">return</strong> <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a>.<a href="../D/36957.html" title="Multiple defined in 35 places.">wrap</a>(dst);
<a id="L351" name="L351"></a> 351         <em class="brace">}</em>
<a id="L352" name="L352"></a> 352 
<div class="comment">
          Wraps an output stream for encoding byte data using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a>
          encoding scheme.
          <p> It is recommended to promptly close the returned output stream after
          use, during which it will flush all possible leftover bytes to the underlying
          output stream. Closing the returned output stream will close the underlying
          output stream.
          @param   os
                   the output stream.
          @return  the output stream for encoding the byte data into the
                   specified Base64 encoded format</p></div>
<a id="L367" name="L367"></a> 367         <strong class="reserved">public</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../R/30535.html" title="Multiple referred from 76 places.">wrap</a>(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> os) <em class="brace">{</em>
<a id="L368" name="L368"></a> 368             <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(os);
<a id="L369" name="L369"></a> 369             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/868.html#L752" title="Defined at 752 in src/java/util/Base64.java.">EncOutputStream</a>(os, isURL ? toBase64URL : toBase64,
<a id="L370" name="L370"></a> 370                                        newline, linemax, doPadding);
<a id="L371" name="L371"></a> 371         <em class="brace">}</em>
<a id="L372" name="L372"></a> 372 
<div class="comment">
          Returns an encoder instance that encodes equivalently to this one,
          but without adding any padding character at the end of the encoded
          byte data.
          <p> The encoding scheme of this encoder instance is unaffected by
          this invocation. The returned encoder instance should be used for
          non-padding encoding operation.
          @return an equivalent encoder that encodes without adding any
                  padding character at the end</p></div>
<a id="L385" name="L385"></a> 385         <strong class="reserved">public</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a> withoutPadding() <em class="brace">{</em>
<a id="L386" name="L386"></a> 386             <strong class="reserved">if</strong> (!doPadding)
<a id="L387" name="L387"></a> 387                 <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L388" name="L388"></a> 388             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>(isURL, newline, linemax, <strong class="reserved">false</strong>);
<a id="L389" name="L389"></a> 389         <em class="brace">}</em>
<a id="L390" name="L390"></a> 390 
<a id="L391" name="L391"></a> 391         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/13719.html" title="Multiple referred from 4 places.">encode0</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, <strong class="reserved">byte</strong>[] dst) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <strong class="reserved">char</strong>[] base64 = isURL ? toBase64URL : toBase64;
<a id="L393" name="L393"></a> 393             <strong class="reserved">int</strong> sp = off;
<a id="L394" name="L394"></a> 394             <strong class="reserved">int</strong> slen = (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - off) / 3 * 3;
<a id="L395" name="L395"></a> 395             <strong class="reserved">int</strong> sl = off + slen;
<a id="L396" name="L396"></a> 396             <strong class="reserved">if</strong> (linemax &gt; 0 &amp;&amp; slen  &gt; linemax / 4 * 3)
<a id="L397" name="L397"></a> 397                 slen = linemax / 4 * 3;
<a id="L398" name="L398"></a> 398             <strong class="reserved">int</strong> dp = 0;
<a id="L399" name="L399"></a> 399             <strong class="reserved">while</strong> (sp &lt; sl) <em class="brace">{</em>
<a id="L400" name="L400"></a> 400                 <strong class="reserved">int</strong> sl0 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(sp + slen, sl);
<a id="L401" name="L401"></a> 401                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> sp0 = sp, dp0 = dp ; sp0 &lt; sl0; ) <em class="brace">{</em>
<a id="L402" name="L402"></a> 402                     <strong class="reserved">int</strong> bits = (src[sp0++] &amp; 0xff) &lt;&lt; 16 |
<a id="L403" name="L403"></a> 403                                (src[sp0++] &amp; 0xff) &lt;&lt;  8 |
<a id="L404" name="L404"></a> 404                                (src[sp0++] &amp; 0xff);
<a id="L405" name="L405"></a> 405                     dst[dp0++] = (<strong class="reserved">byte</strong>)base64[(bits &gt;&gt;&gt; 18) &amp; 0x3f];
<a id="L406" name="L406"></a> 406                     dst[dp0++] = (<strong class="reserved">byte</strong>)base64[(bits &gt;&gt;&gt; 12) &amp; 0x3f];
<a id="L407" name="L407"></a> 407                     dst[dp0++] = (<strong class="reserved">byte</strong>)base64[(bits &gt;&gt;&gt; 6)  &amp; 0x3f];
<a id="L408" name="L408"></a> 408                     dst[dp0++] = (<strong class="reserved">byte</strong>)base64[bits &amp; 0x3f];
<a id="L409" name="L409"></a> 409                 <em class="brace">}</em>
<a id="L410" name="L410"></a> 410                 <strong class="reserved">int</strong> dlen = (sl0 - sp) / 3 * 4;
<a id="L411" name="L411"></a> 411                 dp += dlen;
<a id="L412" name="L412"></a> 412                 sp = sl0;
<a id="L413" name="L413"></a> 413                 <strong class="reserved">if</strong> (dlen == linemax &amp;&amp; sp &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L414" name="L414"></a> 414                     <strong class="reserved">for</strong> (<strong class="reserved">byte</strong> b : newline)<em class="brace">{</em>
<a id="L415" name="L415"></a> 415                         dst[dp++] = b;
<a id="L416" name="L416"></a> 416                     <em class="brace">}</em>
<a id="L417" name="L417"></a> 417                 <em class="brace">}</em>
<a id="L418" name="L418"></a> 418             <em class="brace">}</em>
<a id="L419" name="L419"></a> 419             <strong class="reserved">if</strong> (sp &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>               <em class="comment">// 1 or 2 leftover bytes</em>
<a id="L420" name="L420"></a> 420                 <strong class="reserved">int</strong> b0 = src[sp++] &amp; 0xff;
<a id="L421" name="L421"></a> 421                 dst[dp++] = (<strong class="reserved">byte</strong>)base64[b0 &gt;&gt; 2];
<a id="L422" name="L422"></a> 422                 <strong class="reserved">if</strong> (sp == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L423" name="L423"></a> 423                     dst[dp++] = (<strong class="reserved">byte</strong>)base64[(b0 &lt;&lt; 4) &amp; 0x3f];
<a id="L424" name="L424"></a> 424                     <strong class="reserved">if</strong> (doPadding) <em class="brace">{</em>
<a id="L425" name="L425"></a> 425                         dst[dp++] = '=';
<a id="L426" name="L426"></a> 426                         dst[dp++] = '=';
<a id="L427" name="L427"></a> 427                     <em class="brace">}</em>
<a id="L428" name="L428"></a> 428                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L429" name="L429"></a> 429                     <strong class="reserved">int</strong> b1 = src[sp++] &amp; 0xff;
<a id="L430" name="L430"></a> 430                     dst[dp++] = (<strong class="reserved">byte</strong>)base64[(b0 &lt;&lt; 4) &amp; 0x3f | (b1 &gt;&gt; 4)];
<a id="L431" name="L431"></a> 431                     dst[dp++] = (<strong class="reserved">byte</strong>)base64[(b1 &lt;&lt; 2) &amp; 0x3f];
<a id="L432" name="L432"></a> 432                     <strong class="reserved">if</strong> (doPadding) <em class="brace">{</em>
<a id="L433" name="L433"></a> 433                         dst[dp++] = '=';
<a id="L434" name="L434"></a> 434                     <em class="brace">}</em>
<a id="L435" name="L435"></a> 435                 <em class="brace">}</em>
<a id="L436" name="L436"></a> 436             <em class="brace">}</em>
<a id="L437" name="L437"></a> 437             <strong class="reserved">return</strong> dp;
<a id="L438" name="L438"></a> 438         <em class="brace">}</em>
<a id="L439" name="L439"></a> 439     <em class="brace">}</em>
<a id="L440" name="L440"></a> 440 
<div class="comment">
      This class implements a decoder for decoding byte data using the
      Base64 encoding scheme as specified in RFC 4648 and RFC 2045.
      <p> The Base64 padding character <code>'='</code> is accepted and
      interpreted as the end of the encoded byte data, but is not
      required. So if the final unit of the encoded byte data only has
      two or three Base64 characters (without the corresponding padding
      character(s) padded), they are decoded as if followed by padding
      character(s). If there is a padding character present in the
      final unit, the correct number of padding character(s) must be
      present, otherwise <code>IllegalArgumentException</code> (
      <code>IOException</code> when reading from a Base64 stream) is thrown
      during decoding.
      </p><p> Instances of <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> class are safe for use by
      multiple concurrent threads.
      </p><p> Unless otherwise noted, passing a <code>null</code> argument to
      a method of this class will cause a
      {@link java.lang.NullPointerException NullPointerException} to
      be thrown.
      @see     Encoder
      @since   1.8</p></div>
<a id="L467" name="L467"></a> 467     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2067.html" title="Multiple referred from 10 places.">Decoder</a> <em class="brace">{</em>
<a id="L468" name="L468"></a> 468 
<a id="L469" name="L469"></a> 469         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> isURL;
<a id="L470" name="L470"></a> 470         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> isMIME;
<a id="L471" name="L471"></a> 471 
<a id="L472" name="L472"></a> 472         <strong class="reserved">private</strong> Decoder(<strong class="reserved">boolean</strong> isURL, <strong class="reserved">boolean</strong> isMIME) <em class="brace">{</em>
<a id="L473" name="L473"></a> 473             <strong class="reserved">this</strong>.isURL = isURL;
<a id="L474" name="L474"></a> 474             <strong class="reserved">this</strong>.isMIME = isMIME;
<a id="L475" name="L475"></a> 475         <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<div class="comment">
          Lookup table for decoding unicode characters drawn from the
          "Base64 Alphabet" (as specified in Table 1 of RFC 2045) into
          their 6-bit positive integer equivalents.  Characters that
          are not in the Base64 alphabet but fall within the bounds of
          the array are encoded to -1.</div>
<a id="L485" name="L485"></a> 485         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>[] fromBase64 = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[256];
<a id="L486" name="L486"></a> 486         <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L487" name="L487"></a> 487             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(fromBase64, -1);
<a id="L488" name="L488"></a> 488             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.toBase64.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L489" name="L489"></a> 489                 fromBase64[<a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.toBase64[i]] = i;
<a id="L490" name="L490"></a> 490             fromBase64['='] = -2;
<a id="L491" name="L491"></a> 491         <em class="brace">}</em>
<a id="L492" name="L492"></a> 492 
<div class="comment">
          Lookup table for decoding "URL and Filename safe Base64 Alphabet"
          as specified in Table2 of the RFC 4648.</div>
<a id="L497" name="L497"></a> 497         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>[] fromBase64URL = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[256];
<a id="L498" name="L498"></a> 498 
<a id="L499" name="L499"></a> 499         <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L500" name="L500"></a> 500             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(fromBase64URL, -1);
<a id="L501" name="L501"></a> 501             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.toBase64URL.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L502" name="L502"></a> 502                 fromBase64URL[<a href="../D/2868.html" title="Multiple defined in 2 places.">Encoder</a>.toBase64URL[i]] = i;
<a id="L503" name="L503"></a> 503             fromBase64URL['='] = -2;
<a id="L504" name="L504"></a> 504         <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<a id="L506" name="L506"></a> 506         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> RFC4648         = <strong class="reserved">new</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>(<strong class="reserved">false</strong>, <strong class="reserved">false</strong>);
<a id="L507" name="L507"></a> 507         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> RFC4648_URLSAFE = <strong class="reserved">new</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>(<strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L508" name="L508"></a> 508         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a> RFC2045         = <strong class="reserved">new</strong> <a href="../S/868.html#L467" title="Defined at 467 in src/java/util/Base64.java.">Decoder</a>(<strong class="reserved">false</strong>, <strong class="reserved">true</strong>);
<a id="L509" name="L509"></a> 509 
<div class="comment">
          Decodes all bytes from the input byte array using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a>
          encoding scheme, writing the results into a newly-allocated output
          byte array. The returned byte array is of the length of the resulting
          bytes.
          @param   src
                   the byte array to decode
          @return  A newly-allocated byte array containing the decoded bytes.
          @throws  IllegalArgumentException
                   if <code>src</code> is not in valid Base64 scheme</div>
<a id="L524" name="L524"></a> 524         <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/12941.html" title="Multiple referred from 73 places.">decode</a>(<strong class="reserved">byte</strong>[] src) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525             <strong class="reserved">byte</strong>[] dst = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[<a href="../D/28592.html" title="Multiple defined in 2 places.">outLength</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)];
<a id="L526" name="L526"></a> 526             <strong class="reserved">int</strong> ret = <a href="../S/868.html#L688" title="Defined at 688 in src/java/util/Base64.java.">decode0</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, dst);
<a id="L527" name="L527"></a> 527             <strong class="reserved">if</strong> (ret != dst.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528                 dst = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(dst, ret);
<a id="L529" name="L529"></a> 529             <em class="brace">}</em>
<a id="L530" name="L530"></a> 530             <strong class="reserved">return</strong> dst;
<a id="L531" name="L531"></a> 531         <em class="brace">}</em>
<a id="L532" name="L532"></a> 532 
<div class="comment">
          Decodes a Base64 encoded String into a newly-allocated byte array
          using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a> encoding scheme.
          <p> An invocation of this method has exactly the same effect as invoking
          <code>decode(src.getBytes(StandardCharsets.ISO_8859_1))</code>
          @param   src
                   the string to decode
          @return  A newly-allocated byte array containing the decoded bytes.
          @throws  IllegalArgumentException
                   if <code>src</code> is not in valid Base64 scheme</p></div>
<a id="L548" name="L548"></a> 548         <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/12941.html" title="Multiple referred from 73 places.">decode</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> src) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549             <strong class="reserved">return</strong> <a href="../D/14516.html" title="Multiple defined in 39 places.">decode</a>(src.<a href="../D/17415.html" title="Multiple defined in 35 places.">getBytes</a>(<a href="../S/2006.html#L35" title="Defined at 35 in src/java/nio/charset/StandardCharsets.java.">StandardCharsets</a>.ISO_8859_1));
<a id="L550" name="L550"></a> 550         <em class="brace">}</em>
<a id="L551" name="L551"></a> 551 
<div class="comment">
          Decodes all bytes from the input byte array using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a>
          encoding scheme, writing the results into the given output byte array,
          starting at offset 0.
          <p> It is the responsibility of the invoker of this method to make
          sure the output byte array <code>dst</code> has enough space for decoding
          all bytes from the input byte array. No bytes will be be written to
          the output byte array if the output byte array is not big enough.
          </p><p> If the input byte array is not in valid Base64 encoding scheme
          then some bytes may have been written to the output byte array before
          IllegalargumentException is thrown.
          @param   src
                   the byte array to decode
          @param   dst
                   the output byte array
          @return  The number of bytes written to the output byte array
          @throws  IllegalArgumentException
                   if <code>src</code> is not in valid Base64 scheme, or <code>dst</code>
                   does not have enough space for decoding all input bytes.</p></div>
<a id="L577" name="L577"></a> 577         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/12941.html" title="Multiple referred from 73 places.">decode</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">byte</strong>[] dst) <em class="brace">{</em>
<a id="L578" name="L578"></a> 578             <strong class="reserved">int</strong> len = <a href="../D/28592.html" title="Multiple defined in 2 places.">outLength</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L579" name="L579"></a> 579             <strong class="reserved">if</strong> (dst.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; len)
<a id="L580" name="L580"></a> 580                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L581" name="L581"></a> 581                     "Output byte array is too small for decoding all input bytes");
<a id="L582" name="L582"></a> 582             <strong class="reserved">return</strong> <a href="../S/868.html#L688" title="Defined at 688 in src/java/util/Base64.java.">decode0</a>(src, 0, src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, dst);
<a id="L583" name="L583"></a> 583         <em class="brace">}</em>
<a id="L584" name="L584"></a> 584 
<div class="comment">
          Decodes all bytes from the input byte buffer using the <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a>
          encoding scheme, writing the results into a newly-allocated ByteBuffer.
          <p> Upon return, the source buffer's position will be updated to
          its limit; its limit will not have been changed. The returned
          output buffer's position will be zero and its limit will be the
          number of resulting decoded bytes
          </p><p> <code>IllegalArgumentException</code> is thrown if the input buffer
          is not in valid Base64 encoding scheme. The position of the input
          buffer will not be advanced in this case.
          @param   buffer
                   the ByteBuffer to decode
          @return  A newly-allocated byte buffer containing the decoded bytes
          @throws  IllegalArgumentException
                   if <code>src</code> is not in valid Base64 scheme.</p></div>
<a id="L606" name="L606"></a> 606         <strong class="reserved">public</strong> <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../R/12941.html" title="Multiple referred from 73 places.">decode</a>(<a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>) <em class="brace">{</em>
<a id="L607" name="L607"></a> 607             <strong class="reserved">int</strong> pos0 = <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>();
<a id="L608" name="L608"></a> 608             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L609" name="L609"></a> 609                 <strong class="reserved">byte</strong>[] src;
<a id="L610" name="L610"></a> 610                 <strong class="reserved">int</strong> sp, sl;
<a id="L611" name="L611"></a> 611                 <strong class="reserved">if</strong> (<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/24058.html" title="Multiple defined in 8 places.">hasArray</a>()) <em class="brace">{</em>
<a id="L612" name="L612"></a> 612                     src = <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>();
<a id="L613" name="L613"></a> 613                     sp = <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11508.html" title="Multiple defined in 8 places.">arrayOffset</a>() + <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>();
<a id="L614" name="L614"></a> 614                     sl = <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11508.html" title="Multiple defined in 8 places.">arrayOffset</a>() + <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>();
<a id="L615" name="L615"></a> 615                     <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>());
<a id="L616" name="L616"></a> 616                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L617" name="L617"></a> 617                     src = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>()];
<a id="L618" name="L618"></a> 618                     <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(src);
<a id="L619" name="L619"></a> 619                     sp = 0;
<a id="L620" name="L620"></a> 620                     sl = src.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L621" name="L621"></a> 621                 <em class="brace">}</em>
<a id="L622" name="L622"></a> 622                 <strong class="reserved">byte</strong>[] dst = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[<a href="../D/28592.html" title="Multiple defined in 2 places.">outLength</a>(src, sp, sl)];
<a id="L623" name="L623"></a> 623                 <strong class="reserved">return</strong> <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a>.<a href="../D/36957.html" title="Multiple defined in 35 places.">wrap</a>(dst, 0, <a href="../S/868.html#L688" title="Defined at 688 in src/java/util/Base64.java.">decode0</a>(src, sp, sl, dst));
<a id="L624" name="L624"></a> 624             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> iae) <em class="brace">{</em>
<a id="L625" name="L625"></a> 625                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>(pos0);
<a id="L626" name="L626"></a> 626                 <strong class="reserved">throw</strong> iae;
<a id="L627" name="L627"></a> 627             <em class="brace">}</em>
<a id="L628" name="L628"></a> 628         <em class="brace">}</em>
<a id="L629" name="L629"></a> 629 
<div class="comment">
          Returns an input stream for decoding <a href="../R/650.html" title="Multiple referred from 49 places.">Base64</a> encoded byte stream.
          <p> The <code>read</code>  methods of the returned <code>InputStream</code> will
          throw <code>IOException</code> when reading bytes that cannot be decoded.
          </p><p> Closing the returned input stream will close the underlying
          input stream.
          @param   is
                   the input stream
          @return  the input stream for decoding the specified Base64 encoded
                   byte stream</p></div>
<a id="L645" name="L645"></a> 645         <strong class="reserved">public</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../R/30535.html" title="Multiple referred from 76 places.">wrap</a>(<a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>) <em class="brace">{</em>
<a id="L646" name="L646"></a> 646             <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>);
<a id="L647" name="L647"></a> 647             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/868.html#L864" title="Defined at 864 in src/java/util/Base64.java.">DecInputStream</a>(<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>, isURL ? fromBase64URL : fromBase64, isMIME);
<a id="L648" name="L648"></a> 648         <em class="brace">}</em>
<a id="L649" name="L649"></a> 649 
<a id="L650" name="L650"></a> 650         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/24039.html" title="Multiple referred from 6 places.">outLength</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">int</strong> sp, <strong class="reserved">int</strong> sl) <em class="brace">{</em>
<a id="L651" name="L651"></a> 651             <strong class="reserved">int</strong>[] base64 = isURL ? fromBase64URL : fromBase64;
<a id="L652" name="L652"></a> 652             <strong class="reserved">int</strong> paddings = 0;
<a id="L653" name="L653"></a> 653             <strong class="reserved">int</strong> len = sl - sp;
<a id="L654" name="L654"></a> 654             <strong class="reserved">if</strong> (len == 0)
<a id="L655" name="L655"></a> 655                 <strong class="reserved">return</strong> 0;
<a id="L656" name="L656"></a> 656             <strong class="reserved">if</strong> (len &lt; 2) <em class="brace">{</em>
<a id="L657" name="L657"></a> 657                 <strong class="reserved">if</strong> (isMIME &amp;&amp; base64[0] == -1)
<a id="L658" name="L658"></a> 658                     <strong class="reserved">return</strong> 0;
<a id="L659" name="L659"></a> 659                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L660" name="L660"></a> 660                     "Input byte[] should at least have 2 bytes for base64 bytes");
<a id="L661" name="L661"></a> 661             <em class="brace">}</em>
<a id="L662" name="L662"></a> 662             <strong class="reserved">if</strong> (isMIME) <em class="brace">{</em>
<a id="L663" name="L663"></a> 663                 <em class="comment">// scan all bytes to fill out all non-alphabet. a performance</em>
<a id="L664" name="L664"></a> 664                 <em class="comment">// trade-off of pre-scan or Arrays.copyOf</em>
<a id="L665" name="L665"></a> 665                 <strong class="reserved">int</strong> n = 0;
<a id="L666" name="L666"></a> 666                 <strong class="reserved">while</strong> (sp &lt; sl) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667                     <strong class="reserved">int</strong> b = src[sp++] &amp; 0xff;
<a id="L668" name="L668"></a> 668                     <strong class="reserved">if</strong> (b == '=') <em class="brace">{</em>
<a id="L669" name="L669"></a> 669                         len -= (sl - sp + 1);
<a id="L670" name="L670"></a> 670                         <strong class="reserved">break</strong>;
<a id="L671" name="L671"></a> 671                     <em class="brace">}</em>
<a id="L672" name="L672"></a> 672                     <strong class="reserved">if</strong> ((b = base64[b]) == -1)
<a id="L673" name="L673"></a> 673                         n++;
<a id="L674" name="L674"></a> 674                 <em class="brace">}</em>
<a id="L675" name="L675"></a> 675                 len -= n;
<a id="L676" name="L676"></a> 676             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L677" name="L677"></a> 677                 <strong class="reserved">if</strong> (src[sl - 1] == '=') <em class="brace">{</em>
<a id="L678" name="L678"></a> 678                     paddings++;
<a id="L679" name="L679"></a> 679                     <strong class="reserved">if</strong> (src[sl - 2] == '=')
<a id="L680" name="L680"></a> 680                         paddings++;
<a id="L681" name="L681"></a> 681                 <em class="brace">}</em>
<a id="L682" name="L682"></a> 682             <em class="brace">}</em>
<a id="L683" name="L683"></a> 683             <strong class="reserved">if</strong> (paddings == 0 &amp;&amp; (len &amp; 0x3) !=  0)
<a id="L684" name="L684"></a> 684                 paddings = 4 - (len &amp; 0x3);
<a id="L685" name="L685"></a> 685             <strong class="reserved">return</strong> 3 * ((len + 3) / 4) - paddings;
<a id="L686" name="L686"></a> 686         <em class="brace">}</em>
<a id="L687" name="L687"></a> 687 
<a id="L688" name="L688"></a> 688         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/12942.html" title="Multiple referred from 3 places.">decode0</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">int</strong> sp, <strong class="reserved">int</strong> sl, <strong class="reserved">byte</strong>[] dst) <em class="brace">{</em>
<a id="L689" name="L689"></a> 689             <strong class="reserved">int</strong>[] base64 = isURL ? fromBase64URL : fromBase64;
<a id="L690" name="L690"></a> 690             <strong class="reserved">int</strong> dp = 0;
<a id="L691" name="L691"></a> 691             <strong class="reserved">int</strong> bits = 0;
<a id="L692" name="L692"></a> 692             <strong class="reserved">int</strong> shiftto = 18;       <em class="comment">// pos of first byte of 4-byte atom</em>
<a id="L693" name="L693"></a> 693             <strong class="reserved">while</strong> (sp &lt; sl) <em class="brace">{</em>
<a id="L694" name="L694"></a> 694                 <strong class="reserved">int</strong> b = src[sp++] &amp; 0xff;
<a id="L695" name="L695"></a> 695                 <strong class="reserved">if</strong> ((b = base64[b]) &lt; 0) <em class="brace">{</em>
<a id="L696" name="L696"></a> 696                     <strong class="reserved">if</strong> (b == -2) <em class="brace">{</em>         <em class="comment">// padding byte '='</em>
<a id="L697" name="L697"></a> 697                         <em class="comment">// =     shiftto==18 unnecessary padding</em>
<a id="L698" name="L698"></a> 698                         <em class="comment">// x=    shiftto==12 a dangling single x</em>
<a id="L699" name="L699"></a> 699                         <em class="comment">// x     to be handled together with non-padding case</em>
<a id="L700" name="L700"></a> 700                         <em class="comment">// xx=   shiftto==6&amp;&amp;sp==sl missing last =</em>
<a id="L701" name="L701"></a> 701                         <em class="comment">// xx=y  shiftto==6 last is not =</em>
<a id="L702" name="L702"></a> 702                         <strong class="reserved">if</strong> (shiftto == 6 &amp;&amp; (sp == sl || src[sp++] != '=') ||
<a id="L703" name="L703"></a> 703                             shiftto == 18) <em class="brace">{</em>
<a id="L704" name="L704"></a> 704                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L705" name="L705"></a> 705                                 "Input byte array has wrong 4-byte ending unit");
<a id="L706" name="L706"></a> 706                         <em class="brace">}</em>
<a id="L707" name="L707"></a> 707                         <strong class="reserved">break</strong>;
<a id="L708" name="L708"></a> 708                     <em class="brace">}</em>
<a id="L709" name="L709"></a> 709                     <strong class="reserved">if</strong> (isMIME)    <em class="comment">// skip if for rfc2045</em>
<a id="L710" name="L710"></a> 710                         <strong class="reserved">continue</strong>;
<a id="L711" name="L711"></a> 711                     <strong class="reserved">else</strong>
<a id="L712" name="L712"></a> 712                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L713" name="L713"></a> 713                             "Illegal base64 character " +
<a id="L714" name="L714"></a> 714                             <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(src[sp - 1], 16));
<a id="L715" name="L715"></a> 715                 <em class="brace">}</em>
<a id="L716" name="L716"></a> 716                 bits |= (b &lt;&lt; shiftto);
<a id="L717" name="L717"></a> 717                 shiftto -= 6;
<a id="L718" name="L718"></a> 718                 <strong class="reserved">if</strong> (shiftto &lt; 0) <em class="brace">{</em>
<a id="L719" name="L719"></a> 719                     dst[dp++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; 16);
<a id="L720" name="L720"></a> 720                     dst[dp++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt;  8);
<a id="L721" name="L721"></a> 721                     dst[dp++] = (<strong class="reserved">byte</strong>)(bits);
<a id="L722" name="L722"></a> 722                     shiftto = 18;
<a id="L723" name="L723"></a> 723                     bits = 0;
<a id="L724" name="L724"></a> 724                 <em class="brace">}</em>
<a id="L725" name="L725"></a> 725             <em class="brace">}</em>
<a id="L726" name="L726"></a> 726             <em class="comment">// reached end of byte array or hit padding '=' characters.</em>
<a id="L727" name="L727"></a> 727             <strong class="reserved">if</strong> (shiftto == 6) <em class="brace">{</em>
<a id="L728" name="L728"></a> 728                 dst[dp++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; 16);
<a id="L729" name="L729"></a> 729             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (shiftto == 0) <em class="brace">{</em>
<a id="L730" name="L730"></a> 730                 dst[dp++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; 16);
<a id="L731" name="L731"></a> 731                 dst[dp++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt;  8);
<a id="L732" name="L732"></a> 732             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (shiftto == 12) <em class="brace">{</em>
<a id="L733" name="L733"></a> 733                 <em class="comment">// dangling single "x", incorrectly encoded.</em>
<a id="L734" name="L734"></a> 734                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L735" name="L735"></a> 735                     "Last unit does not have enough valid bits");
<a id="L736" name="L736"></a> 736             <em class="brace">}</em>
<a id="L737" name="L737"></a> 737             <em class="comment">// anything left is invalid, if is not MIME.</em>
<a id="L738" name="L738"></a> 738             <em class="comment">// if MIME, ignore all non-base64 character</em>
<a id="L739" name="L739"></a> 739             <strong class="reserved">while</strong> (sp &lt; sl) <em class="brace">{</em>
<a id="L740" name="L740"></a> 740                 <strong class="reserved">if</strong> (isMIME &amp;&amp; base64[src[sp++]] &lt; 0)
<a id="L741" name="L741"></a> 741                     <strong class="reserved">continue</strong>;
<a id="L742" name="L742"></a> 742                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L743" name="L743"></a> 743                     "Input byte array has incorrect ending byte at " + sp);
<a id="L744" name="L744"></a> 744             <em class="brace">}</em>
<a id="L745" name="L745"></a> 745             <strong class="reserved">return</strong> dp;
<a id="L746" name="L746"></a> 746         <em class="brace">}</em>
<a id="L747" name="L747"></a> 747     <em class="brace">}</em>
<a id="L748" name="L748"></a> 748 
<div class="comment">
      An output stream for encoding bytes into the Base64.</div>
<a id="L752" name="L752"></a> 752     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/868.html#L369" title="Referred from 369 in src/java/util/Base64.java.">EncOutputStream</a> <strong class="reserved">extends</strong> <a href="../S/1415.html#L45" title="Defined at 45 in src/java/io/FilterOutputStream.java.">FilterOutputStream</a> <em class="brace">{</em>
<a id="L753" name="L753"></a> 753 
<a id="L754" name="L754"></a> 754         <strong class="reserved">private</strong> <strong class="reserved">int</strong> leftover = 0;
<a id="L755" name="L755"></a> 755         <strong class="reserved">private</strong> <strong class="reserved">int</strong> b0, b1, b2;
<a id="L756" name="L756"></a> 756         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> closed = <strong class="reserved">false</strong>;
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] base64;    <em class="comment">// byte-&gt;base64 mapping</em>
<a id="L759" name="L759"></a> 759         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] newline;   <em class="comment">// line separator, if needed</em>
<a id="L760" name="L760"></a> 760         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> linemax;
<a id="L761" name="L761"></a> 761         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> doPadding;<em class="comment">// whether or not to pad</em>
<a id="L762" name="L762"></a> 762         <strong class="reserved">private</strong> <strong class="reserved">int</strong> linepos = 0;
<a id="L763" name="L763"></a> 763 
<a id="L764" name="L764"></a> 764         EncOutputStream(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> os, <strong class="reserved">char</strong>[] base64,
<a id="L765" name="L765"></a> 765                         <strong class="reserved">byte</strong>[] newline, <strong class="reserved">int</strong> linemax, <strong class="reserved">boolean</strong> doPadding) <em class="brace">{</em>
<a id="L766" name="L766"></a> 766             <strong class="reserved">super</strong>(os);
<a id="L767" name="L767"></a> 767             <strong class="reserved">this</strong>.base64 = base64;
<a id="L768" name="L768"></a> 768             <strong class="reserved">this</strong>.newline = newline;
<a id="L769" name="L769"></a> 769             <strong class="reserved">this</strong>.linemax = linemax;
<a id="L770" name="L770"></a> 770             <strong class="reserved">this</strong>.doPadding = doPadding;
<a id="L771" name="L771"></a> 771         <em class="brace">}</em>
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L774" name="L774"></a> 774         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">int</strong> b) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L775" name="L775"></a> 775             <strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1];
<a id="L776" name="L776"></a> 776             <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[0] = (<strong class="reserved">byte</strong>)(b &amp; 0xff);
<a id="L777" name="L777"></a> 777             <a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 1);
<a id="L778" name="L778"></a> 778         <em class="brace">}</em>
<a id="L779" name="L779"></a> 779 
<a id="L780" name="L780"></a> 780         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11259.html" title="Multiple referred from 4 places.">checkNewline</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L781" name="L781"></a> 781             <strong class="reserved">if</strong> (linepos == linemax) <em class="brace">{</em>
<a id="L782" name="L782"></a> 782                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(newline);
<a id="L783" name="L783"></a> 783                 linepos = 0;
<a id="L784" name="L784"></a> 784             <em class="brace">}</em>
<a id="L785" name="L785"></a> 785         <em class="brace">}</em>
<a id="L786" name="L786"></a> 786 
<a id="L787" name="L787"></a> 787         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L788" name="L788"></a> 788         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30544.html" title="Multiple referred from 1880 places.">write</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L789" name="L789"></a> 789             <strong class="reserved">if</strong> (closed)
<a id="L790" name="L790"></a> 790                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("Stream is closed");
<a id="L791" name="L791"></a> 791             <strong class="reserved">if</strong> (off &lt; 0 || len &lt; 0 || off + len &gt; b.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L792" name="L792"></a> 792                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a>();
<a id="L793" name="L793"></a> 793             <strong class="reserved">if</strong> (len == 0)
<a id="L794" name="L794"></a> 794                 <strong class="reserved">return</strong>;
<a id="L795" name="L795"></a> 795             <strong class="reserved">if</strong> (leftover != 0) <em class="brace">{</em>
<a id="L796" name="L796"></a> 796                 <strong class="reserved">if</strong> (leftover == 1) <em class="brace">{</em>
<a id="L797" name="L797"></a> 797                     b1 = b[off++] &amp; 0xff;
<a id="L798" name="L798"></a> 798                     len--;
<a id="L799" name="L799"></a> 799                     <strong class="reserved">if</strong> (len == 0) <em class="brace">{</em>
<a id="L800" name="L800"></a> 800                         leftover++;
<a id="L801" name="L801"></a> 801                         <strong class="reserved">return</strong>;
<a id="L802" name="L802"></a> 802                     <em class="brace">}</em>
<a id="L803" name="L803"></a> 803                 <em class="brace">}</em>
<a id="L804" name="L804"></a> 804                 b2 = b[off++] &amp; 0xff;
<a id="L805" name="L805"></a> 805                 len--;
<a id="L806" name="L806"></a> 806                 <a href="../S/868.html#L780" title="Defined at 780 in src/java/util/Base64.java.">checkNewline</a>();
<a id="L807" name="L807"></a> 807                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[b0 &gt;&gt; 2]);
<a id="L808" name="L808"></a> 808                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(b0 &lt;&lt; 4) &amp; 0x3f | (b1 &gt;&gt; 4)]);
<a id="L809" name="L809"></a> 809                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(b1 &lt;&lt; 2) &amp; 0x3f | (b2 &gt;&gt; 6)]);
<a id="L810" name="L810"></a> 810                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[b2 &amp; 0x3f]);
<a id="L811" name="L811"></a> 811                 linepos += 4;
<a id="L812" name="L812"></a> 812             <em class="brace">}</em>
<a id="L813" name="L813"></a> 813             <strong class="reserved">int</strong> nBits24 = len / 3;
<a id="L814" name="L814"></a> 814             leftover = len - (nBits24 * 3);
<a id="L815" name="L815"></a> 815             <strong class="reserved">while</strong> (nBits24-- &gt; 0) <em class="brace">{</em>
<a id="L816" name="L816"></a> 816                 <a href="../S/868.html#L780" title="Defined at 780 in src/java/util/Base64.java.">checkNewline</a>();
<a id="L817" name="L817"></a> 817                 <strong class="reserved">int</strong> bits = (b[off++] &amp; 0xff) &lt;&lt; 16 |
<a id="L818" name="L818"></a> 818                            (b[off++] &amp; 0xff) &lt;&lt;  8 |
<a id="L819" name="L819"></a> 819                            (b[off++] &amp; 0xff);
<a id="L820" name="L820"></a> 820                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(bits &gt;&gt;&gt; 18) &amp; 0x3f]);
<a id="L821" name="L821"></a> 821                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(bits &gt;&gt;&gt; 12) &amp; 0x3f]);
<a id="L822" name="L822"></a> 822                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(bits &gt;&gt;&gt; 6)  &amp; 0x3f]);
<a id="L823" name="L823"></a> 823                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[bits &amp; 0x3f]);
<a id="L824" name="L824"></a> 824                 linepos += 4;
<a id="L825" name="L825"></a> 825            <em class="brace">}</em>
<a id="L826" name="L826"></a> 826             <strong class="reserved">if</strong> (leftover == 1) <em class="brace">{</em>
<a id="L827" name="L827"></a> 827                 b0 = b[off++] &amp; 0xff;
<a id="L828" name="L828"></a> 828             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (leftover == 2) <em class="brace">{</em>
<a id="L829" name="L829"></a> 829                 b0 = b[off++] &amp; 0xff;
<a id="L830" name="L830"></a> 830                 b1 = b[off++] &amp; 0xff;
<a id="L831" name="L831"></a> 831             <em class="brace">}</em>
<a id="L832" name="L832"></a> 832         <em class="brace">}</em>
<a id="L833" name="L833"></a> 833 
<a id="L834" name="L834"></a> 834         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L835" name="L835"></a> 835         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L836" name="L836"></a> 836             <strong class="reserved">if</strong> (!closed) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837                 closed = <strong class="reserved">true</strong>;
<a id="L838" name="L838"></a> 838                 <strong class="reserved">if</strong> (leftover == 1) <em class="brace">{</em>
<a id="L839" name="L839"></a> 839                     <a href="../S/868.html#L780" title="Defined at 780 in src/java/util/Base64.java.">checkNewline</a>();
<a id="L840" name="L840"></a> 840                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[b0 &gt;&gt; 2]);
<a id="L841" name="L841"></a> 841                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(b0 &lt;&lt; 4) &amp; 0x3f]);
<a id="L842" name="L842"></a> 842                     <strong class="reserved">if</strong> (doPadding) <em class="brace">{</em>
<a id="L843" name="L843"></a> 843                         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('=');
<a id="L844" name="L844"></a> 844                         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('=');
<a id="L845" name="L845"></a> 845                     <em class="brace">}</em>
<a id="L846" name="L846"></a> 846                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (leftover == 2) <em class="brace">{</em>
<a id="L847" name="L847"></a> 847                     <a href="../S/868.html#L780" title="Defined at 780 in src/java/util/Base64.java.">checkNewline</a>();
<a id="L848" name="L848"></a> 848                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[b0 &gt;&gt; 2]);
<a id="L849" name="L849"></a> 849                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(b0 &lt;&lt; 4) &amp; 0x3f | (b1 &gt;&gt; 4)]);
<a id="L850" name="L850"></a> 850                     <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(base64[(b1 &lt;&lt; 2) &amp; 0x3f]);
<a id="L851" name="L851"></a> 851                     <strong class="reserved">if</strong> (doPadding) <em class="brace">{</em>
<a id="L852" name="L852"></a> 852                        <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('=');
<a id="L853" name="L853"></a> 853                     <em class="brace">}</em>
<a id="L854" name="L854"></a> 854                 <em class="brace">}</em>
<a id="L855" name="L855"></a> 855                 leftover = 0;
<a id="L856" name="L856"></a> 856                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L857" name="L857"></a> 857             <em class="brace">}</em>
<a id="L858" name="L858"></a> 858         <em class="brace">}</em>
<a id="L859" name="L859"></a> 859     <em class="brace">}</em>
<a id="L860" name="L860"></a> 860 
<div class="comment">
      An input stream for decoding Base64 bytes</div>
<a id="L864" name="L864"></a> 864     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/868.html#L647" title="Referred from 647 in src/java/util/Base64.java.">DecInputStream</a> <strong class="reserved">extends</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <em class="brace">{</em>
<a id="L865" name="L865"></a> 865 
<a id="L866" name="L866"></a> 866         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>;
<a id="L867" name="L867"></a> 867         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> isMIME;
<a id="L868" name="L868"></a> 868         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>[] base64;      <em class="comment">// base64 -&gt; byte mapping</em>
<a id="L869" name="L869"></a> 869         <strong class="reserved">private</strong> <strong class="reserved">int</strong> bits = 0;            <em class="comment">// 24-bit buffer for decoding</em>
<a id="L870" name="L870"></a> 870         <strong class="reserved">private</strong> <strong class="reserved">int</strong> nextin = 18;         <em class="comment">// next available "off" in "bits" for input;</em>
<a id="L871" name="L871"></a> 871                                          <em class="comment">// -&gt; 18, 12, 6, 0</em>
<a id="L872" name="L872"></a> 872         <strong class="reserved">private</strong> <strong class="reserved">int</strong> nextout = -8;        <em class="comment">// next available "off" in "bits" for output;</em>
<a id="L873" name="L873"></a> 873                                          <em class="comment">// -&gt; 8, 0, -8 (no byte for output)</em>
<a id="L874" name="L874"></a> 874         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> eof = <strong class="reserved">false</strong>;
<a id="L875" name="L875"></a> 875         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> closed = <strong class="reserved">false</strong>;
<a id="L876" name="L876"></a> 876 
<a id="L877" name="L877"></a> 877         DecInputStream(<a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>, <strong class="reserved">int</strong>[] base64, <strong class="reserved">boolean</strong> isMIME) <em class="brace">{</em>
<a id="L878" name="L878"></a> 878             <strong class="reserved">this</strong>.<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> = <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>;
<a id="L879" name="L879"></a> 879             <strong class="reserved">this</strong>.base64 = base64;
<a id="L880" name="L880"></a> 880             <strong class="reserved">this</strong>.isMIME = isMIME;
<a id="L881" name="L881"></a> 881         <em class="brace">}</em>
<a id="L882" name="L882"></a> 882 
<a id="L883" name="L883"></a> 883         <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] sbBuf = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1];
<a id="L884" name="L884"></a> 884 
<a id="L885" name="L885"></a> 885         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L886" name="L886"></a> 886         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L887" name="L887"></a> 887             <strong class="reserved">return</strong> <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(sbBuf, 0, 1) == -1 ? -1 : sbBuf[0] &amp; 0xff;
<a id="L888" name="L888"></a> 888         <em class="brace">}</em>
<a id="L889" name="L889"></a> 889 
<a id="L890" name="L890"></a> 890         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L891" name="L891"></a> 891         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L892" name="L892"></a> 892             <strong class="reserved">if</strong> (closed)
<a id="L893" name="L893"></a> 893                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("Stream is closed");
<a id="L894" name="L894"></a> 894             <strong class="reserved">if</strong> (eof &amp;&amp; nextout &lt; 0)    <em class="comment">// eof and no leftover</em>
<a id="L895" name="L895"></a> 895                 <strong class="reserved">return</strong> -1;
<a id="L896" name="L896"></a> 896             <strong class="reserved">if</strong> (off &lt; 0 || len &lt; 0 || len &gt; b.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - off)
<a id="L897" name="L897"></a> 897                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a>();
<a id="L898" name="L898"></a> 898             <strong class="reserved">int</strong> oldOff = off;
<a id="L899" name="L899"></a> 899             <strong class="reserved">if</strong> (nextout &gt;= 0) <em class="brace">{</em>       <em class="comment">// leftover output byte(s) in bits buf</em>
<a id="L900" name="L900"></a> 900                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L901" name="L901"></a> 901                     <strong class="reserved">if</strong> (len == 0)
<a id="L902" name="L902"></a> 902                         <strong class="reserved">return</strong> off - oldOff;
<a id="L903" name="L903"></a> 903                     b[off++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; nextout);
<a id="L904" name="L904"></a> 904                     len--;
<a id="L905" name="L905"></a> 905                     nextout -= 8;
<a id="L906" name="L906"></a> 906                 <em class="brace">}</em> <strong class="reserved">while</strong> (nextout &gt;= 0);
<a id="L907" name="L907"></a> 907                 bits = 0;
<a id="L908" name="L908"></a> 908             <em class="brace">}</em>
<a id="L909" name="L909"></a> 909             <strong class="reserved">while</strong> (len &gt; 0) <em class="brace">{</em>
<a id="L910" name="L910"></a> 910                 <strong class="reserved">int</strong> v = <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L911" name="L911"></a> 911                 <strong class="reserved">if</strong> (v == -1) <em class="brace">{</em>
<a id="L912" name="L912"></a> 912                     eof = <strong class="reserved">true</strong>;
<a id="L913" name="L913"></a> 913                     <strong class="reserved">if</strong> (nextin != 18) <em class="brace">{</em>
<a id="L914" name="L914"></a> 914                         <strong class="reserved">if</strong> (nextin == 12)
<a id="L915" name="L915"></a> 915                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("Base64 stream has one un-decoded dangling byte.");
<a id="L916" name="L916"></a> 916                         <em class="comment">// treat ending xx/xxx without padding character legal.</em>
<a id="L917" name="L917"></a> 917                         <em class="comment">// same logic as v == '=' below</em>
<a id="L918" name="L918"></a> 918                         b[off++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; (16));
<a id="L919" name="L919"></a> 919                         len--;
<a id="L920" name="L920"></a> 920                         <strong class="reserved">if</strong> (nextin == 0) <em class="brace">{</em>           <em class="comment">// only one padding byte</em>
<a id="L921" name="L921"></a> 921                             <strong class="reserved">if</strong> (len == 0) <em class="brace">{</em>          <em class="comment">// no enough output space</em>
<a id="L922" name="L922"></a> 922                                 bits &gt;&gt;= 8;          <em class="comment">// shift to lowest byte</em>
<a id="L923" name="L923"></a> 923                                 nextout = 0;
<a id="L924" name="L924"></a> 924                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L925" name="L925"></a> 925                                 b[off++] = (<strong class="reserved">byte</strong>) (bits &gt;&gt;  8);
<a id="L926" name="L926"></a> 926                             <em class="brace">}</em>
<a id="L927" name="L927"></a> 927                         <em class="brace">}</em>
<a id="L928" name="L928"></a> 928                     <em class="brace">}</em>
<a id="L929" name="L929"></a> 929                     <strong class="reserved">if</strong> (off == oldOff)
<a id="L930" name="L930"></a> 930                         <strong class="reserved">return</strong> -1;
<a id="L931" name="L931"></a> 931                     <strong class="reserved">else</strong>
<a id="L932" name="L932"></a> 932                         <strong class="reserved">return</strong> off - oldOff;
<a id="L933" name="L933"></a> 933                 <em class="brace">}</em>
<a id="L934" name="L934"></a> 934                 <strong class="reserved">if</strong> (v == '=') <em class="brace">{</em>                  <em class="comment">// padding byte(s)</em>
<a id="L935" name="L935"></a> 935                     <em class="comment">// =     shiftto==18 unnecessary padding</em>
<a id="L936" name="L936"></a> 936                     <em class="comment">// x=    shiftto==12 dangling x, invalid unit</em>
<a id="L937" name="L937"></a> 937                     <em class="comment">// xx=   shiftto==6 &amp;&amp; missing last '='</em>
<a id="L938" name="L938"></a> 938                     <em class="comment">// xx=y  or last is not '='</em>
<a id="L939" name="L939"></a> 939                     <strong class="reserved">if</strong> (nextin == 18 || nextin == 12 ||
<a id="L940" name="L940"></a> 940                         nextin == 6 &amp;&amp; <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>() != '=') <em class="brace">{</em>
<a id="L941" name="L941"></a> 941                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("Illegal base64 ending sequence:" + nextin);
<a id="L942" name="L942"></a> 942                     <em class="brace">}</em>
<a id="L943" name="L943"></a> 943                     b[off++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; (16));
<a id="L944" name="L944"></a> 944                     len--;
<a id="L945" name="L945"></a> 945                     <strong class="reserved">if</strong> (nextin == 0) <em class="brace">{</em>           <em class="comment">// only one padding byte</em>
<a id="L946" name="L946"></a> 946                         <strong class="reserved">if</strong> (len == 0) <em class="brace">{</em>          <em class="comment">// no enough output space</em>
<a id="L947" name="L947"></a> 947                             bits &gt;&gt;= 8;          <em class="comment">// shift to lowest byte</em>
<a id="L948" name="L948"></a> 948                             nextout = 0;
<a id="L949" name="L949"></a> 949                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L950" name="L950"></a> 950                             b[off++] = (<strong class="reserved">byte</strong>) (bits &gt;&gt;  8);
<a id="L951" name="L951"></a> 951                         <em class="brace">}</em>
<a id="L952" name="L952"></a> 952                     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953                     eof = <strong class="reserved">true</strong>;
<a id="L954" name="L954"></a> 954                     <strong class="reserved">break</strong>;
<a id="L955" name="L955"></a> 955                 <em class="brace">}</em>
<a id="L956" name="L956"></a> 956                 <strong class="reserved">if</strong> ((v = base64[v]) == -1) <em class="brace">{</em>
<a id="L957" name="L957"></a> 957                     <strong class="reserved">if</strong> (isMIME)                 <em class="comment">// skip if for rfc2045</em>
<a id="L958" name="L958"></a> 958                         <strong class="reserved">continue</strong>;
<a id="L959" name="L959"></a> 959                     <strong class="reserved">else</strong>
<a id="L960" name="L960"></a> 960                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("Illegal base64 character " +
<a id="L961" name="L961"></a> 961                             <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(v, 16));
<a id="L962" name="L962"></a> 962                 <em class="brace">}</em>
<a id="L963" name="L963"></a> 963                 bits |= (v &lt;&lt; nextin);
<a id="L964" name="L964"></a> 964                 <strong class="reserved">if</strong> (nextin == 0) <em class="brace">{</em>
<a id="L965" name="L965"></a> 965                     nextin = 18;    <em class="comment">// clear for next</em>
<a id="L966" name="L966"></a> 966                     nextout = 16;
<a id="L967" name="L967"></a> 967                     <strong class="reserved">while</strong> (nextout &gt;= 0) <em class="brace">{</em>
<a id="L968" name="L968"></a> 968                         b[off++] = (<strong class="reserved">byte</strong>)(bits &gt;&gt; nextout);
<a id="L969" name="L969"></a> 969                         len--;
<a id="L970" name="L970"></a> 970                         nextout -= 8;
<a id="L971" name="L971"></a> 971                         <strong class="reserved">if</strong> (len == 0 &amp;&amp; nextout &gt;= 0) <em class="brace">{</em>  <em class="comment">// don't clean "bits"</em>
<a id="L972" name="L972"></a> 972                             <strong class="reserved">return</strong> off - oldOff;
<a id="L973" name="L973"></a> 973                         <em class="brace">}</em>
<a id="L974" name="L974"></a> 974                     <em class="brace">}</em>
<a id="L975" name="L975"></a> 975                     bits = 0;
<a id="L976" name="L976"></a> 976                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L977" name="L977"></a> 977                     nextin -= 6;
<a id="L978" name="L978"></a> 978                 <em class="brace">}</em>
<a id="L979" name="L979"></a> 979             <em class="brace">}</em>
<a id="L980" name="L980"></a> 980             <strong class="reserved">return</strong> off - oldOff;
<a id="L981" name="L981"></a> 981         <em class="brace">}</em>
<a id="L982" name="L982"></a> 982 
<a id="L983" name="L983"></a> 983         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L984" name="L984"></a> 984         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/10425.html" title="Multiple referred from 160 places.">available</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L985" name="L985"></a> 985             <strong class="reserved">if</strong> (closed)
<a id="L986" name="L986"></a> 986                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>("Stream is closed");
<a id="L987" name="L987"></a> 987             <strong class="reserved">return</strong> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>();   <em class="comment">// TBD:</em>
<a id="L988" name="L988"></a> 988         <em class="brace">}</em>
<a id="L989" name="L989"></a> 989 
<a id="L990" name="L990"></a> 990         @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L991" name="L991"></a> 991         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L992" name="L992"></a> 992             <strong class="reserved">if</strong> (!closed) <em class="brace">{</em>
<a id="L993" name="L993"></a> 993                 closed = <strong class="reserved">true</strong>;
<a id="L994" name="L994"></a> 994                 <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L995" name="L995"></a> 995             <em class="brace">}</em>
<a id="L996" name="L996"></a> 996         <em class="brace">}</em>
<a id="L997" name="L997"></a> 997     <em class="brace">}</em>
<a id="L998" name="L998"></a> 998 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L87">[^]</a><a href="#L991">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
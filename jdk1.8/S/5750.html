<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/security/keys/keyresolver/implementations/RetrievalMethodResolver.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L85">[^]</a><a href="#L359">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L85" title="Defined at 85.">engineLookupAndResolvePublicKey</a></li>
<li><a href="#L161" title="Defined at 161.">engineLookupResolveX509Certificate</a></li>
<li><a href="#L232" title="Defined at 232.">resolveCertificate</a></li>
<li><a href="#L254" title="Defined at 254.">resolveKey</a></li>
<li><a href="#L268" title="Defined at 268.">obtainReferenceElement</a></li>
<li><a href="#L289" title="Defined at 289.">getRawCertificate</a></li>
<li><a href="#L305" title="Defined at 305.">resolveInput</a></li>
<li><a href="#L329" title="Defined at 329.">getDocFromBytes</a></li>
<li><a href="#L353" title="Defined at 353.">engineLookupAndResolveSecretKey</a></li>
<li><a href="#L359" title="Defined at 359.">getDocumentElement</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements. See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership. The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License. You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied. See the License for the
  specific language governing permissions and limitations
  under the License.</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.security.<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>.keyresolver.<a href="../D/24375.html" title="Multiple defined in 2 places.">implementations</a>;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.io.ByteArrayInputStream;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.io.IOException;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.security.PublicKey;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.security.cert.CertificateException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.security.cert.CertificateFactory;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.security.cert.X509Certificate;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.List;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.ListIterator;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Set;
<a id="L36" name="L36"></a>  36 
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> javax.xml.XMLConstants;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilder;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilderFactory;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> javax.xml.parsers.ParserConfigurationException;
<a id="L41" name="L41"></a>  41 
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.CanonicalizationException;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.exceptions.XMLSecurityException;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.keys.content.RetrievalMethod;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.keys.content.x509.XMLX509Certificate;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.keys.keyresolver.KeyResolver;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.keys.keyresolver.KeyResolverException;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.keys.keyresolver.KeyResolverSpi;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.keys.storage.StorageResolver;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.signature.XMLSignatureInput;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.transforms.Transforms;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.Constants;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.XMLUtils;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolver;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> org.w3c.dom.Attr;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> org.w3c.dom.Element;
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> org.xml.sax.SAXException;
<a id="L60" name="L60"></a>  60 
<div class="comment">
  The RetrievalMethodResolver can retrieve public keys and certificates from
  other locations. The location is specified using the ds:RetrievalMethod
  element which points to the location. This includes the handling of raw
  (binary) X.509 certificate which are not encapsulated in an XML structure.
  If the retrieval process encounters an element which the
  RetrievalMethodResolver cannot handle itself, resolving of the extracted
  element is delegated back to the KeyResolver mechanism.
  @author $Author: raul $ modified by Dave Garcia</div>
<a id="L72" name="L72"></a>  72 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6709.html" title="Multiple referred from 3 places.">RetrievalMethodResolver</a> <strong class="reserved">extends</strong> <a href="../S/5743.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverSpi.java.">KeyResolverSpi</a> <em class="brace">{</em>
<a id="L73" name="L73"></a>  73 
<div class="comment">
     /** {@link org.apache.commons.logging} logging facility */</div>
<a id="L75" name="L75"></a>  75     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1170.html#L218" title="Defined at 218 in src/java/util/logging/Logger.java.">Logger</a> <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a> =
<a id="L76" name="L76"></a>  76         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1170.html#L218" title="Defined at 218 in src/java/util/logging/Logger.java.">Logger</a>.<a href="../D/20268.html" title="Multiple defined in 6 places.">getLogger</a>(<a href="../S/5750.html#L72" title="Defined at 72 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/implementations/RetrievalMethodResolver.java.">RetrievalMethodResolver</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>());
<a id="L77" name="L77"></a>  77 
<div class="comment">
      Method engineResolvePublicKey
      @inheritDoc
      @param element
      @param baseURI
      @param storage</div>
<a id="L85" name="L85"></a>  85     <strong class="reserved">public</strong> <a href="../S/1329.html#L46" title="Defined at 46 in src/java/security/PublicKey.java.">PublicKey</a> <a href="../R/13864.html" title="Multiple referred from 3 places.">engineLookupAndResolvePublicKey</a>(
<a id="L86" name="L86"></a>  86            <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI, <a href="../S/5781.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/security/keys/storage/StorageResolver.java.">StorageResolver</a> storage
<a id="L87" name="L87"></a>  87     ) <em class="brace">{</em>
<a id="L88" name="L88"></a>  88         <strong class="reserved">if</strong> (!<a href="../S/5680.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">XMLUtils</a>.<a href="../S/5680.html#L376" title="Defined at 376 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">elementIsInSignatureSpace</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>._TAG_RETRIEVALMETHOD)) <em class="brace">{</em>
<a id="L89" name="L89"></a>  89             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L90" name="L90"></a>  90         <em class="brace">}</em>
<a id="L91" name="L91"></a>  91 
<a id="L92" name="L92"></a>  92         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L93" name="L93"></a>  93             <em class="comment">// Create a retrieval method over the given element</em>
<a id="L94" name="L94"></a>  94             <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a> rm = <strong class="reserved">new</strong> <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, baseURI);
<a id="L95" name="L95"></a>  95             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = rm.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>();
<a id="L96" name="L96"></a>  96             <a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource = <a href="../D/31270.html" title="Multiple defined in 2 places.">resolveInput</a>(rm, baseURI, secureValidation);
<a id="L97" name="L97"></a>  97             <strong class="reserved">if</strong> (<a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a>.TYPE_RAWX509.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)) <em class="brace">{</em>
<a id="L98" name="L98"></a>  98                 <em class="comment">// a raw certificate, direct parsing is done!</em>
<a id="L99" name="L99"></a>  99                 <a href="../D/9813.html" title="Multiple defined in 2 places.">X509Certificate</a> cert = <a href="../S/5750.html#L289" title="Defined at 289 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/implementations/RetrievalMethodResolver.java.">getRawCertificate</a>(resource);
<a id="L100" name="L100"></a> 100                 <strong class="reserved">if</strong> (cert != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L101" name="L101"></a> 101                     <strong class="reserved">return</strong> cert.<a href="../D/21782.html" title="Multiple defined in 14 places.">getPublicKey</a>();
<a id="L102" name="L102"></a> 102                 <em class="brace">}</em>
<a id="L103" name="L103"></a> 103                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L104" name="L104"></a> 104              <em class="brace">}</em>
<a id="L105" name="L105"></a> 105              <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/28417.html" title="Multiple defined in 2 places.">obtainReferenceElement</a>(resource);
<a id="L106" name="L106"></a> 106 
<a id="L107" name="L107"></a> 107              <em class="comment">// Check to make sure that the reference is not to another RetrievalMethod</em>
<a id="L108" name="L108"></a> 108              <em class="comment">// which points to this element</em>
<a id="L109" name="L109"></a> 109              <strong class="reserved">if</strong> (<a href="../S/5680.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">XMLUtils</a>.<a href="../S/5680.html#L376" title="Defined at 376 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">elementIsInSignatureSpace</a>(e, <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>._TAG_RETRIEVALMETHOD)) <em class="brace">{</em>
<a id="L110" name="L110"></a> 110                  <strong class="reserved">if</strong> (secureValidation) <em class="brace">{</em>
<a id="L111" name="L111"></a> 111                      <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a> = "Error: It is forbidden to have one RetrievalMethod "
<a id="L112" name="L112"></a> 112                          + "point to another with secure validation";
<a id="L113" name="L113"></a> 113                      <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L114" name="L114"></a> 114                          <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>);
<a id="L115" name="L115"></a> 115                      <em class="brace">}</em>
<a id="L116" name="L116"></a> 116                      <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L117" name="L117"></a> 117                  <em class="brace">}</em>
<a id="L118" name="L118"></a> 118                  <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a> rm2 = <strong class="reserved">new</strong> <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a>(e, baseURI);
<a id="L119" name="L119"></a> 119                  <a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource2 = <a href="../D/31270.html" title="Multiple defined in 2 places.">resolveInput</a>(rm2, baseURI, secureValidation);
<a id="L120" name="L120"></a> 120                  <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e2 = <a href="../D/28417.html" title="Multiple defined in 2 places.">obtainReferenceElement</a>(resource2);
<a id="L121" name="L121"></a> 121                  <strong class="reserved">if</strong> (e2 == <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>) <em class="brace">{</em>
<a id="L122" name="L122"></a> 122                      <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L123" name="L123"></a> 123                          <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "Error: Can't have RetrievalMethods pointing to each other");
<a id="L124" name="L124"></a> 124                      <em class="brace">}</em>
<a id="L125" name="L125"></a> 125                      <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L126" name="L126"></a> 126                  <em class="brace">}</em>
<a id="L127" name="L127"></a> 127              <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129              <strong class="reserved">return</strong> <a href="../S/5750.html#L254" title="Defined at 254 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/implementations/RetrievalMethodResolver.java.">resolveKey</a>(e, baseURI, storage);
<a id="L130" name="L130"></a> 130          <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5715.html#L64" title="Defined at 64 in src/com/sun/org/apache/xml/internal/security/exceptions/XMLSecurityException.java.">XMLSecurityException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L131" name="L131"></a> 131              <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L132" name="L132"></a> 132                  <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "XMLSecurityException", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L133" name="L133"></a> 133              <em class="brace">}</em>
<a id="L134" name="L134"></a> 134          <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/1348.html" title="Multiple defined in 2 places.">CertificateException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L135" name="L135"></a> 135              <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L136" name="L136"></a> 136                  <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "CertificateException", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L137" name="L137"></a> 137              <em class="brace">}</em>
<a id="L138" name="L138"></a> 138          <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L139" name="L139"></a> 139              <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L140" name="L140"></a> 140                  <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "IOException", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L141" name="L141"></a> 141              <em class="brace">}</em>
<a id="L142" name="L142"></a> 142          <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a> e) <em class="brace">{</em>
<a id="L143" name="L143"></a> 143              <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L144" name="L144"></a> 144                  <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "ParserConfigurationException", e);
<a id="L145" name="L145"></a> 145              <em class="brace">}</em>
<a id="L146" name="L146"></a> 146          <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> e) <em class="brace">{</em>
<a id="L147" name="L147"></a> 147              <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L148" name="L148"></a> 148                  <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "SAXException", e);
<a id="L149" name="L149"></a> 149              <em class="brace">}</em>
<a id="L150" name="L150"></a> 150          <em class="brace">}</em>
<a id="L151" name="L151"></a> 151          <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L152" name="L152"></a> 152     <em class="brace">}</em>
<a id="L153" name="L153"></a> 153 
<div class="comment">
      Method engineResolveX509Certificate
      @inheritDoc
      @param element
      @param baseURI
      @param storage</div>
<a id="L161" name="L161"></a> 161     <strong class="reserved">public</strong> <a href="../D/9813.html" title="Multiple defined in 2 places.">X509Certificate</a> <a href="../R/13866.html" title="Multiple referred from 8 places.">engineLookupResolveX509Certificate</a>(
<a id="L162" name="L162"></a> 162         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI, <a href="../S/5781.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/security/keys/storage/StorageResolver.java.">StorageResolver</a> storage) <em class="brace">{</em>
<a id="L163" name="L163"></a> 163         <strong class="reserved">if</strong> (!<a href="../S/5680.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">XMLUtils</a>.<a href="../S/5680.html#L376" title="Defined at 376 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">elementIsInSignatureSpace</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>._TAG_RETRIEVALMETHOD)) <em class="brace">{</em>
<a id="L164" name="L164"></a> 164              <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L165" name="L165"></a> 165         <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L168" name="L168"></a> 168             <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a> rm = <strong class="reserved">new</strong> <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, baseURI);
<a id="L169" name="L169"></a> 169             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = rm.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>();
<a id="L170" name="L170"></a> 170             <a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource = <a href="../D/31270.html" title="Multiple defined in 2 places.">resolveInput</a>(rm, baseURI, secureValidation);
<a id="L171" name="L171"></a> 171             <strong class="reserved">if</strong> (<a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a>.TYPE_RAWX509.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)) <em class="brace">{</em>
<a id="L172" name="L172"></a> 172                 <strong class="reserved">return</strong> <a href="../S/5750.html#L289" title="Defined at 289 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/implementations/RetrievalMethodResolver.java.">getRawCertificate</a>(resource);
<a id="L173" name="L173"></a> 173             <em class="brace">}</em>
<a id="L174" name="L174"></a> 174 
<a id="L175" name="L175"></a> 175             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/28417.html" title="Multiple defined in 2 places.">obtainReferenceElement</a>(resource);
<a id="L176" name="L176"></a> 176 
<a id="L177" name="L177"></a> 177             <em class="comment">// Check to make sure that the reference is not to another RetrievalMethod</em>
<a id="L178" name="L178"></a> 178             <em class="comment">// which points to this element</em>
<a id="L179" name="L179"></a> 179             <strong class="reserved">if</strong> (<a href="../S/5680.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">XMLUtils</a>.<a href="../S/5680.html#L376" title="Defined at 376 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">elementIsInSignatureSpace</a>(e, <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>._TAG_RETRIEVALMETHOD)) <em class="brace">{</em>
<a id="L180" name="L180"></a> 180                 <strong class="reserved">if</strong> (secureValidation) <em class="brace">{</em>
<a id="L181" name="L181"></a> 181                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a> = "Error: It is forbidden to have one RetrievalMethod "
<a id="L182" name="L182"></a> 182                         + "point to another with secure validation";
<a id="L183" name="L183"></a> 183                     <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L184" name="L184"></a> 184                         <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>);
<a id="L185" name="L185"></a> 185                     <em class="brace">}</em>
<a id="L186" name="L186"></a> 186                     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L187" name="L187"></a> 187                 <em class="brace">}</em>
<a id="L188" name="L188"></a> 188                 <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a> rm2 = <strong class="reserved">new</strong> <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a>(e, baseURI);
<a id="L189" name="L189"></a> 189                 <a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource2 = <a href="../D/31270.html" title="Multiple defined in 2 places.">resolveInput</a>(rm2, baseURI, secureValidation);
<a id="L190" name="L190"></a> 190                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e2 = <a href="../D/28417.html" title="Multiple defined in 2 places.">obtainReferenceElement</a>(resource2);
<a id="L191" name="L191"></a> 191                 <strong class="reserved">if</strong> (e2 == <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>) <em class="brace">{</em>
<a id="L192" name="L192"></a> 192                     <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L193" name="L193"></a> 193                         <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "Error: Can't have RetrievalMethods pointing to each other");
<a id="L194" name="L194"></a> 194                     <em class="brace">}</em>
<a id="L195" name="L195"></a> 195                     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L196" name="L196"></a> 196                 <em class="brace">}</em>
<a id="L197" name="L197"></a> 197             <em class="brace">}</em>
<a id="L198" name="L198"></a> 198 
<a id="L199" name="L199"></a> 199             <strong class="reserved">return</strong> <a href="../D/31244.html" title="Multiple defined in 2 places.">resolveCertificate</a>(e, baseURI, storage);
<a id="L200" name="L200"></a> 200         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5715.html#L64" title="Defined at 64 in src/com/sun/org/apache/xml/internal/security/exceptions/XMLSecurityException.java.">XMLSecurityException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L201" name="L201"></a> 201             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L202" name="L202"></a> 202                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "XMLSecurityException", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L203" name="L203"></a> 203             <em class="brace">}</em>
<a id="L204" name="L204"></a> 204         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/1348.html" title="Multiple defined in 2 places.">CertificateException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L205" name="L205"></a> 205             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "CertificateException", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L207" name="L207"></a> 207             <em class="brace">}</em>
<a id="L208" name="L208"></a> 208         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "IOException", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L211" name="L211"></a> 211             <em class="brace">}</em>
<a id="L212" name="L212"></a> 212         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a> e) <em class="brace">{</em>
<a id="L213" name="L213"></a> 213             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L214" name="L214"></a> 214                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "ParserConfigurationException", e);
<a id="L215" name="L215"></a> 215             <em class="brace">}</em>
<a id="L216" name="L216"></a> 216         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> e) <em class="brace">{</em>
<a id="L217" name="L217"></a> 217             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L218" name="L218"></a> 218                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "SAXException", e);
<a id="L219" name="L219"></a> 219             <em class="brace">}</em>
<a id="L220" name="L220"></a> 220         <em class="brace">}</em>
<a id="L221" name="L221"></a> 221         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<div class="comment">
      Retrieves a x509Certificate from the given information
      @param e
      @param baseURI
      @param storage
      @return
      @throws KeyResolverException</div>
<a id="L232" name="L232"></a> 232     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/9813.html" title="Multiple defined in 2 places.">X509Certificate</a> <a href="../R/26323.html" title="Multiple referred from 2 places.">resolveCertificate</a>(
<a id="L233" name="L233"></a> 233         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI, <a href="../S/5781.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/security/keys/storage/StorageResolver.java.">StorageResolver</a> storage
<a id="L234" name="L234"></a> 234     ) <strong class="reserved">throws</strong> <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a> <em class="brace">{</em>
<a id="L235" name="L235"></a> 235         <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L236" name="L236"></a> 236             <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "Now we have a {" + e.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>() + "}"
<a id="L237" name="L237"></a> 237                 + e.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>() + " Element");
<a id="L238" name="L238"></a> 238         <em class="brace">}</em>
<a id="L239" name="L239"></a> 239         <em class="comment">// An element has been provided</em>
<a id="L240" name="L240"></a> 240         <strong class="reserved">if</strong> (e != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241             <strong class="reserved">return</strong> <a href="../S/5744.html#L53" title="Defined at 53 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolver.java.">KeyResolver</a>.<a href="../D/23741.html" title="Multiple defined in 3 places.">getX509Certificate</a>(e, baseURI, storage);
<a id="L242" name="L242"></a> 242         <em class="brace">}</em>
<a id="L243" name="L243"></a> 243         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L244" name="L244"></a> 244     <em class="brace">}</em>
<a id="L245" name="L245"></a> 245 
<div class="comment">
      Retrieves a PublicKey from the given information
      @param e
      @param baseURI
      @param storage
      @return
      @throws KeyResolverException</div>
<a id="L254" name="L254"></a> 254     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1329.html#L46" title="Defined at 46 in src/java/security/PublicKey.java.">PublicKey</a> <a href="../S/5750.html#L129" title="Referred from 129 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/implementations/RetrievalMethodResolver.java.">resolveKey</a>(
<a id="L255" name="L255"></a> 255         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI, <a href="../S/5781.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/security/keys/storage/StorageResolver.java.">StorageResolver</a> storage
<a id="L256" name="L256"></a> 256     ) <strong class="reserved">throws</strong> <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a> <em class="brace">{</em>
<a id="L257" name="L257"></a> 257         <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258             <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "Now we have a {" + e.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>() + "}"
<a id="L259" name="L259"></a> 259                 + e.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>() + " Element");
<a id="L260" name="L260"></a> 260         <em class="brace">}</em>
<a id="L261" name="L261"></a> 261         <em class="comment">// An element has been provided</em>
<a id="L262" name="L262"></a> 262         <strong class="reserved">if</strong> (e != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L263" name="L263"></a> 263             <strong class="reserved">return</strong> <a href="../S/5744.html#L53" title="Defined at 53 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolver.java.">KeyResolver</a>.<a href="../D/21782.html" title="Multiple defined in 14 places.">getPublicKey</a>(e, baseURI, storage);
<a id="L264" name="L264"></a> 264         <em class="brace">}</em>
<a id="L265" name="L265"></a> 265         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L266" name="L266"></a> 266     <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 
<a id="L268" name="L268"></a> 268     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/23896.html" title="Multiple referred from 5 places.">obtainReferenceElement</a>(<a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource)
<a id="L269" name="L269"></a> 269         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>, <a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a>,
<a id="L270" name="L270"></a> 270         <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>, <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a> <em class="brace">{</em>
<a id="L271" name="L271"></a> 271         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e;
<a id="L272" name="L272"></a> 272         <strong class="reserved">if</strong> (resource.<a href="../D/25488.html" title="Multiple defined in 9 places.">isElement</a>())<em class="brace">{</em>
<a id="L273" name="L273"></a> 273             e = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>) resource.<a href="../S/5663.html#L447" title="Defined at 447 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">getSubNode</a>();
<a id="L274" name="L274"></a> 274         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (resource.<a href="../S/5663.html#L288" title="Defined at 288 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">isNodeSet</a>()) <em class="brace">{</em>
<a id="L275" name="L275"></a> 275             <em class="comment">// Retrieved resource is a nodeSet</em>
<a id="L276" name="L276"></a> 276             e = <a href="../D/18558.html" title="Multiple defined in 7 places.">getDocumentElement</a>(resource.<a href="../D/20987.html" title="Multiple defined in 2 places.">getNodeSet</a>());
<a id="L277" name="L277"></a> 277         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L278" name="L278"></a> 278             <em class="comment">// Retrieved resource is an inputStream</em>
<a id="L279" name="L279"></a> 279             <strong class="reserved">byte</strong> inputBytes[] = resource.<a href="../D/17415.html" title="Multiple defined in 35 places.">getBytes</a>();
<a id="L280" name="L280"></a> 280             e = <a href="../D/18546.html" title="Multiple defined in 2 places.">getDocFromBytes</a>(inputBytes);
<a id="L281" name="L281"></a> 281             <em class="comment">// otherwise, we parse the resource, create an Element and delegate</em>
<a id="L282" name="L282"></a> 282             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L283" name="L283"></a> 283                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "we have to parse " + inputBytes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> + " bytes");
<a id="L284" name="L284"></a> 284             <em class="brace">}</em>
<a id="L285" name="L285"></a> 285         <em class="brace">}</em>
<a id="L286" name="L286"></a> 286         <strong class="reserved">return</strong> e;
<a id="L287" name="L287"></a> 287     <em class="brace">}</em>
<a id="L288" name="L288"></a> 288 
<a id="L289" name="L289"></a> 289     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/9813.html" title="Multiple defined in 2 places.">X509Certificate</a> <a href="../R/18598.html" title="Multiple referred from 2 places.">getRawCertificate</a>(<a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource)
<a id="L290" name="L290"></a> 290         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../D/1348.html" title="Multiple defined in 2 places.">CertificateException</a> <em class="brace">{</em>
<a id="L291" name="L291"></a> 291         <strong class="reserved">byte</strong> inputBytes[] = resource.<a href="../D/17415.html" title="Multiple defined in 35 places.">getBytes</a>();
<a id="L292" name="L292"></a> 292         <em class="comment">// if the resource stores a raw certificate, we have to handle it</em>
<a id="L293" name="L293"></a> 293         <a href="../S/1307.html#L126" title="Defined at 126 in src/java/security/cert/CertificateFactory.java.">CertificateFactory</a> certFact =
<a id="L294" name="L294"></a> 294             <a href="../S/1307.html#L126" title="Defined at 126 in src/java/security/cert/CertificateFactory.java.">CertificateFactory</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>(<a href="../S/5765.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/security/keys/content/x509/XMLX509Certificate.java.">XMLX509Certificate</a>.JCA_CERT_ID);
<a id="L295" name="L295"></a> 295         <a href="../D/9813.html" title="Multiple defined in 2 places.">X509Certificate</a> cert = (<a href="../D/9813.html" title="Multiple defined in 2 places.">X509Certificate</a>)
<a id="L296" name="L296"></a> 296             certFact.<a href="../S/1307.html#L336" title="Defined at 336 in src/java/security/cert/CertificateFactory.java.">generateCertificate</a>(<strong class="reserved">new</strong> <a href="../S/1443.html#L44" title="Defined at 44 in src/java/io/ByteArrayInputStream.java.">ByteArrayInputStream</a>(inputBytes));
<a id="L297" name="L297"></a> 297         <strong class="reserved">return</strong> cert;
<a id="L298" name="L298"></a> 298     <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<div class="comment">
      Resolves the input from the given retrieval method
      @return
      @throws XMLSecurityException</div>
<a id="L305" name="L305"></a> 305     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> <a href="../R/26349.html" title="Multiple referred from 5 places.">resolveInput</a>(
<a id="L306" name="L306"></a> 306         <a href="../D/7358.html" title="Multiple defined in 2 places.">RetrievalMethod</a> rm, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI, <strong class="reserved">boolean</strong> secureValidation
<a id="L307" name="L307"></a> 307     ) <strong class="reserved">throws</strong> <a href="../S/5715.html#L64" title="Defined at 64 in src/com/sun/org/apache/xml/internal/security/exceptions/XMLSecurityException.java.">XMLSecurityException</a> <em class="brace">{</em>
<a id="L308" name="L308"></a> 308         <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> uri = rm.<a href="../D/23372.html" title="Multiple defined in 2 places.">getURIAttr</a>();
<a id="L309" name="L309"></a> 309         <em class="comment">// Apply the transforms</em>
<a id="L310" name="L310"></a> 310         <a href="../D/9094.html" title="Multiple defined in 2 places.">Transforms</a> transforms = rm.<a href="../D/23252.html" title="Multiple defined in 6 places.">getTransforms</a>();
<a id="L311" name="L311"></a> 311         <a href="../S/5704.html#L43" title="Defined at 43 in src/com/sun/org/apache/xml/internal/security/utils/resolver/ResourceResolver.java.">ResourceResolver</a> resRes = <a href="../S/5704.html#L43" title="Defined at 43 in src/com/sun/org/apache/xml/internal/security/utils/resolver/ResourceResolver.java.">ResourceResolver</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>(uri, baseURI, secureValidation);
<a id="L312" name="L312"></a> 312         <a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> resource = resRes.<a href="../D/31237.html" title="Multiple defined in 38 places.">resolve</a>(uri, baseURI, secureValidation);
<a id="L313" name="L313"></a> 313         <strong class="reserved">if</strong> (transforms != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L315" name="L315"></a> 315                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.logging.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE, "We have Transforms");
<a id="L316" name="L316"></a> 316             <em class="brace">}</em>
<a id="L317" name="L317"></a> 317             resource = transforms.<a href="../D/29325.html" title="Multiple defined in 2 places.">performTransforms</a>(resource);
<a id="L318" name="L318"></a> 318         <em class="brace">}</em>
<a id="L319" name="L319"></a> 319         <strong class="reserved">return</strong> resource;
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321 
<div class="comment">
      Parses a byte array and returns the parsed Element.
      @param bytes
      @return the Document Element after parsing bytes
      @throws KeyResolverException if something goes wrong</div>
<a id="L329" name="L329"></a> 329     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/16207.html" title="Multiple referred from 2 places.">getDocFromBytes</a>(<strong class="reserved">byte</strong>[] bytes) <strong class="reserved">throws</strong> <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a> <em class="brace">{</em>
<a id="L330" name="L330"></a> 330         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L331" name="L331"></a> 331             <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a> dbf = <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L332" name="L332"></a> 332             dbf.<a href="../D/33323.html" title="Multiple defined in 3 places.">setNamespaceAware</a>(<strong class="reserved">true</strong>);
<a id="L333" name="L333"></a> 333             dbf.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../S/3865.html#L43" title="Defined at 43 in src/javax/xml/XMLConstants.java.">XMLConstants</a>.FEATURE_SECURE_PROCESSING, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L334" name="L334"></a> 334             <a href="../S/3846.html#L62" title="Defined at 62 in src/javax/xml/parsers/DocumentBuilder.java.">DocumentBuilder</a> db = dbf.<a href="../D/27987.html" title="Multiple defined in 2 places.">newDocumentBuilder</a>();
<a id="L335" name="L335"></a> 335             <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = db.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<strong class="reserved">new</strong> <a href="../S/1443.html#L44" title="Defined at 44 in src/java/io/ByteArrayInputStream.java.">ByteArrayInputStream</a>(bytes));
<a id="L336" name="L336"></a> 336             <strong class="reserved">return</strong> doc.<a href="../D/18558.html" title="Multiple defined in 7 places.">getDocumentElement</a>();
<a id="L337" name="L337"></a> 337         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L338" name="L338"></a> 338             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L339" name="L339"></a> 339         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L341" name="L341"></a> 341         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L342" name="L342"></a> 342             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5741.html#L27" title="Defined at 27 in src/com/sun/org/apache/xml/internal/security/keys/keyresolver/KeyResolverException.java.">KeyResolverException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L343" name="L343"></a> 343         <em class="brace">}</em>
<a id="L344" name="L344"></a> 344     <em class="brace">}</em>
<a id="L345" name="L345"></a> 345 
<div class="comment">
      Method engineResolveSecretKey
      @inheritDoc
      @param element
      @param baseURI
      @param storage</div>
<a id="L353" name="L353"></a> 353     <strong class="reserved">public</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.crypto.SecretKey <a href="../R/13865.html" title="Multiple referred from 3 places.">engineLookupAndResolveSecretKey</a>(
<a id="L354" name="L354"></a> 354         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> baseURI, <a href="../S/5781.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/security/keys/storage/StorageResolver.java.">StorageResolver</a> storage
<a id="L355" name="L355"></a> 355     ) <em class="brace">{</em>
<a id="L356" name="L356"></a> 356         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L357" name="L357"></a> 357     <em class="brace">}</em>
<a id="L358" name="L358"></a> 358 
<a id="L359" name="L359"></a> 359     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../R/16218.html" title="Multiple referred from 34 places.">getDocumentElement</a>(<a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>) <em class="brace">{</em>
<a id="L360" name="L360"></a> 360         <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; it = <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L361" name="L361"></a> 361         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <strong class="reserved">null</strong>;
<a id="L362" name="L362"></a> 362         <strong class="reserved">while</strong> (it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L363" name="L363"></a> 363             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> currentNode = it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L364" name="L364"></a> 364             <strong class="reserved">if</strong> (currentNode != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE == currentNode.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L365" name="L365"></a> 365                 e = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>) currentNode;
<a id="L366" name="L366"></a> 366                 <strong class="reserved">break</strong>;
<a id="L367" name="L367"></a> 367             <em class="brace">}</em>
<a id="L368" name="L368"></a> 368         <em class="brace">}</em>
<a id="L369" name="L369"></a> 369         <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; parents = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt;();
<a id="L370" name="L370"></a> 370 
<a id="L371" name="L371"></a> 371         <em class="comment">// Obtain all the parents of the elemnt</em>
<a id="L372" name="L372"></a> 372         <strong class="reserved">while</strong> (e != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L373" name="L373"></a> 373             parents.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(e);
<a id="L374" name="L374"></a> 374             <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = e.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L375" name="L375"></a> 375             <strong class="reserved">if</strong> (n == <strong class="reserved">null</strong> || <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE != n.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376                 <strong class="reserved">break</strong>;
<a id="L377" name="L377"></a> 377             <em class="brace">}</em>
<a id="L378" name="L378"></a> 378             e = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>) n;
<a id="L379" name="L379"></a> 379         <em class="brace">}</em>
<a id="L380" name="L380"></a> 380         <em class="comment">// Visit them in reverse order.</em>
<a id="L381" name="L381"></a> 381         <a href="../S/1187.html#L60" title="Defined at 60 in src/java/util/ListIterator.java.">ListIterator</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; it2 = parents.<a href="../D/26876.html" title="Multiple defined in 26 places.">listIterator</a>(parents.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1);
<a id="L382" name="L382"></a> 382         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> ele = <strong class="reserved">null</strong>;
<a id="L383" name="L383"></a> 383         <strong class="reserved">while</strong> (it2.<a href="../D/24162.html" title="Multiple defined in 10 places.">hasPrevious</a>()) <em class="brace">{</em>
<a id="L384" name="L384"></a> 384             ele = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>) it2.<a href="../D/29600.html" title="Multiple defined in 22 places.">previous</a>();
<a id="L385" name="L385"></a> 385             <strong class="reserved">if</strong> (<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(ele)) <em class="brace">{</em>
<a id="L386" name="L386"></a> 386                 <strong class="reserved">return</strong> ele;
<a id="L387" name="L387"></a> 387             <em class="brace">}</em>
<a id="L388" name="L388"></a> 388         <em class="brace">}</em>
<a id="L389" name="L389"></a> 389         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L390" name="L390"></a> 390     <em class="brace">}</em>
<a id="L391" name="L391"></a> 391 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L85">[^]</a><a href="#L359">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L122">[^]</a><a href="#L1030">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L122" title="Defined at 122.">getAnalysisBits</a></li>
<li><a href="#L137" title="Defined at 137.">readObject</a></li>
<li><a href="#L164" title="Defined at 164.">setEnvironment</a></li>
<li><a href="#L178" title="Defined at 178.">getDTM</a></li>
<li><a href="#L191" title="Defined at 191.">getDTMManager</a></li>
<li><a href="#L208" title="Defined at 208.">execute</a></li>
<li><a href="#L233" title="Defined at 233.">executeCharsToContentHandler</a></li>
<li><a href="#L265" title="Defined at 265.">asIterator</a></li>
<li><a href="#L282" title="Defined at 282.">isNodesetExpr</a></li>
<li><a href="#L295" title="Defined at 295.">asNode</a></li>
<li><a href="#L334" title="Defined at 334.">setIsTopLevel</a></li>
<li><a href="#L347" title="Defined at 347.">getIsTopLevel</a></li>
<li><a href="#L359" title="Defined at 359.">setRoot</a></li>
<li><a href="#L391" title="Defined at 391.">setNextPosition</a></li>
<li><a href="#L405" title="Defined at 405.">getCurrentPos</a></li>
<li><a href="#L417" title="Defined at 417.">setShouldCacheNodes</a></li>
<li><a href="#L429" title="Defined at 429.">isMutable</a></li>
<li><a href="#L440" title="Defined at 440.">setCurrentPos</a></li>
<li><a href="#L448" title="Defined at 448.">incrementCurrentPos</a></li>
<li><a href="#L464" title="Defined at 464.">size</a></li>
<li><a href="#L479" title="Defined at 479.">item</a></li>
<li><a href="#L498" title="Defined at 498.">setItem</a></li>
<li><a href="#L509" title="Defined at 509.">getLength</a></li>
<li><a href="#L576" title="Defined at 576.">isFresh</a></li>
<li><a href="#L587" title="Defined at 587.">previousNode</a></li>
<li><a href="#L606" title="Defined at 606.">getWhatToShow</a></li>
<li><a href="#L621" title="Defined at 621.">getFilter</a></li>
<li><a href="#L632" title="Defined at 632.">getRoot</a></li>
<li><a href="#L652" title="Defined at 652.">getExpandEntityReferences</a></li>
<li><a href="#L666" title="Defined at 666.">allowDetachToRelease</a></li>
<li><a href="#L678" title="Defined at 678.">detach</a></li>
<li><a href="#L700" title="Defined at 700.">reset</a></li>
<li><a href="#L713" title="Defined at 713.">cloneWithReset</a></li>
<li><a href="#L753" title="Defined at 753.">nextNode</a></li>
<li><a href="#L763" title="Defined at 763.">returnNextNode</a></li>
<li><a href="#L784" title="Defined at 784.">getCurrentNode</a></li>
<li><a href="#L798" title="Defined at 798.">runTo</a></li>
<li><a href="#L825" title="Defined at 825.">getFoundLast</a></li>
<li><a href="#L836" title="Defined at 836.">getXPathContext</a></li>
<li><a href="#L846" title="Defined at 846.">getContext</a></li>
<li><a href="#L857" title="Defined at 857.">getCurrentContextNode</a></li>
<li><a href="#L867" title="Defined at 867.">setCurrentContextNode</a></li>
<li><a href="#L889" title="Defined at 889.">getPrefixResolver</a></li>
<li><a href="#L922" title="Defined at 922.">callVisitors</a></li>
<li><a href="#L1003" title="Defined at 1003.">isDocOrdered</a></li>
<li><a href="#L1014" title="Defined at 1014.">getAxis</a></li>
<li><a href="#L1030" title="Defined at 1030.">getLastPos</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: LocPathIterator.java,v 1.2.4.2 2005/09/14 19:45:22 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal.axes;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.res.XSLMessages;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMFilter;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMIterator;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMManager;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.PrefixResolver;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.ExpressionOwner;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPathContext;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPathVisitor;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.compiler.Compiler;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XNodeSet;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XObject;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
<a id="L38" name="L38"></a>  38 
<div class="comment">
  This class extends NodeSetDTM, which implements NodeIterator,
  and fetches nodes one at a time in document order based on a XPath
  <a href="http://www.w3.org/TR/xpath#NT-LocationPath>LocationPath</a>.
  <p>If setShouldCacheNodes(true) is called,
  as each node is iterated via nextNode(), the node is also stored
  in the NodeVector, so that previousNode() can easily be done, except in
  the case where the LocPathIterator is " owned" by a unionpathiterator, in which case the unionpathiterator will cache nodes.< p>
  @xsl.usage advanced</a></div>
<a id="L51" name="L51"></a>  51 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/4676.html" title="Multiple referred from 37 places.">LocPathIterator</a> <strong class="reserved">extends</strong> <a href="../S/4867.html#L36" title="Defined at 36 in src/com/sun/org/apache/xpath/internal/axes/PredicatedNodeTest.java.">PredicatedNodeTest</a>
<a id="L52" name="L52"></a>  52         <strong class="reserved">implements</strong> <a href="../S/1744.html#L53" title="Defined at 53 in src/java/lang/Cloneable.java.">Cloneable</a>, <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>, <a href="../S/4870.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/axes/PathComponent.java.">PathComponent</a>
<a id="L53" name="L53"></a>  53 <em class="brace">{</em>
<a id="L54" name="L54"></a>  54     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -4602476357268405754L;
<a id="L55" name="L55"></a>  55 
<div class="comment">
    Create a LocPathIterator object.</div>
<a id="L60" name="L60"></a>  60   <strong class="reserved">protected</strong> LocPathIterator()
<a id="L61" name="L61"></a>  61   <em class="brace">{</em>
<a id="L62" name="L62"></a>  62   <em class="brace">}</em>
<a id="L63" name="L63"></a>  63 
<a id="L64" name="L64"></a>  64 
<div class="comment">
    Create a LocPathIterator object.
    @param nscontext The namespace context for this iterator,
    should be OK if null.</div>
<a id="L71" name="L71"></a>  71   <strong class="reserved">protected</strong> LocPathIterator(<a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a> nscontext)
<a id="L72" name="L72"></a>  72   <em class="brace">{</em>
<a id="L73" name="L73"></a>  73 
<a id="L74" name="L74"></a>  74     <a href="../S/4867.html#L519" title="Defined at 519 in src/com/sun/org/apache/xpath/internal/axes/PredicatedNodeTest.java.">setLocPathIterator</a>(<strong class="reserved">this</strong>);
<a id="L75" name="L75"></a>  75     m_prefixResolver = nscontext;
<a id="L76" name="L76"></a>  76   <em class="brace">}</em>
<a id="L77" name="L77"></a>  77 
<div class="comment">
    Create a LocPathIterator object, including creation
    of step walkers from the opcode list, and call back
    into the Compiler to create predicate expressions.
    @param compiler The Compiler which is creating
    this expression.
    @param opPos The position of this iterator in the
    opcode list from the compiler.
    @throws javax.xml.transform.TransformerException</div>
<a id="L90" name="L90"></a>  90   <strong class="reserved">protected</strong> LocPathIterator(<a href="../D/1702.html" title="Multiple defined in 2 places.">Compiler</a> compiler, <strong class="reserved">int</strong> opPos, <strong class="reserved">int</strong> analysis)
<a id="L91" name="L91"></a>  91           <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L92" name="L92"></a>  92   <em class="brace">{</em>
<a id="L93" name="L93"></a>  93     <strong class="reserved">this</strong>(compiler, opPos, analysis, <strong class="reserved">true</strong>);
<a id="L94" name="L94"></a>  94   <em class="brace">}</em>
<a id="L95" name="L95"></a>  95 
<div class="comment">
    Create a LocPathIterator object, including creation
    of step walkers from the opcode list, and call back
    into the Compiler to create predicate expressions.
    @param compiler The Compiler which is creating
    this expression.
    @param opPos The position of this iterator in the
    opcode list from the compiler.
    @param shouldLoadWalkers True if walkers should be
    loaded, or false if this is a derived iterator and
    it doesn't wish to load child walkers.
    @throws javax.xml.transform.TransformerException</div>
<a id="L111" name="L111"></a> 111   <strong class="reserved">protected</strong> LocPathIterator(
<a id="L112" name="L112"></a> 112           <a href="../D/1702.html" title="Multiple defined in 2 places.">Compiler</a> compiler, <strong class="reserved">int</strong> opPos, <strong class="reserved">int</strong> analysis, <strong class="reserved">boolean</strong> shouldLoadWalkers)
<a id="L113" name="L113"></a> 113             <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L114" name="L114"></a> 114   <em class="brace">{</em>
<a id="L115" name="L115"></a> 115     <a href="../S/4867.html#L519" title="Defined at 519 in src/com/sun/org/apache/xpath/internal/axes/PredicatedNodeTest.java.">setLocPathIterator</a>(<strong class="reserved">this</strong>);
<a id="L116" name="L116"></a> 116   <em class="brace">}</em>
<a id="L117" name="L117"></a> 117 
<div class="comment">
    Get the analysis bits for this walker, as defined in the WalkerFactory.
    @return One of WalkerFactory#BIT_DESCENDANT, etc.</div>
<a id="L122" name="L122"></a> 122   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15048.html" title="Multiple referred from 7 places.">getAnalysisBits</a>()
<a id="L123" name="L123"></a> 123   <em class="brace">{</em>
<a id="L124" name="L124"></a> 124         <strong class="reserved">int</strong> axis = <a href="../D/17162.html" title="Multiple defined in 25 places.">getAxis</a>();
<a id="L125" name="L125"></a> 125         <strong class="reserved">int</strong> <a href="../D/11869.html" title="Multiple defined in 2 places.">bit</a> = <a href="../S/4868.html#L46" title="Defined at 46 in src/com/sun/org/apache/xpath/internal/axes/WalkerFactory.java.">WalkerFactory</a>.<a href="../S/4868.html#L355" title="Defined at 355 in src/com/sun/org/apache/xpath/internal/axes/WalkerFactory.java.">getAnalysisBitFromAxes</a>(axis);
<a id="L126" name="L126"></a> 126         <strong class="reserved">return</strong> <a href="../D/11869.html" title="Multiple defined in 2 places.">bit</a>;
<a id="L127" name="L127"></a> 127   <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<div class="comment">
    Read the object from a serialization stream.
    @param stream Input stream to read from
    @throws java.io.IOException
    @throws javax.xml.transform.TransformerException</div>
<a id="L137" name="L137"></a> 137   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>)
<a id="L138" name="L138"></a> 138           <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L139" name="L139"></a> 139   <em class="brace">{</em>
<a id="L140" name="L140"></a> 140     <strong class="reserved">try</strong>
<a id="L141" name="L141"></a> 141     <em class="brace">{</em>
<a id="L142" name="L142"></a> 142       <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L143" name="L143"></a> 143       m_clones =  <strong class="reserved">new</strong> <a href="../S/4864.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/axes/IteratorPool.java.">IteratorPool</a>(<strong class="reserved">this</strong>);
<a id="L144" name="L144"></a> 144     <em class="brace">}</em>
<a id="L145" name="L145"></a> 145     <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> cnfe)
<a id="L146" name="L146"></a> 146     <em class="brace">{</em>
<a id="L147" name="L147"></a> 147       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(cnfe);
<a id="L148" name="L148"></a> 148     <em class="brace">}</em>
<a id="L149" name="L149"></a> 149   <em class="brace">}</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
    Set the environment in which this iterator operates, which should provide:
    a node (the context node... same value as "root" defined below)
    a pair of non-zero positive integers (the context position and the context size)
    a set of variable bindings
    a function library
    the set of namespace declarations in scope for the expression.
    <p>At this time the exact implementation of this environment is application
    dependent.  Probably a proper interface will be created fairly soon.</p>
    @param environment The environment object.</div>
<a id="L164" name="L164"></a> 164   <strong class="reserved">public</strong> <strong class="reserved">void</strong> setEnvironment(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L165" name="L165"></a> 165   <em class="brace">{</em>
<a id="L166" name="L166"></a> 166     <em class="comment">// no-op for now.</em>
<a id="L167" name="L167"></a> 167   <em class="brace">}</em>
<a id="L168" name="L168"></a> 168 
<div class="comment">
    Get an instance of a DTM that "owns" a node handle.  Since a node
    iterator may be passed without a DTMManager, this allows the
    caller to easily get the DTM using just the iterator.
    @param nodeHandle the nodeHandle.
    @return a non-null DTM reference.</div>
<a id="L178" name="L178"></a> 178   <strong class="reserved">public</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> <a href="../R/15933.html" title="Multiple referred from 85 places.">getDTM</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L179" name="L179"></a> 179   <em class="brace">{</em>
<a id="L180" name="L180"></a> 180     <em class="comment">// %OPT%</em>
<a id="L181" name="L181"></a> 181     <strong class="reserved">return</strong> m_execContext.<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(nodeHandle);
<a id="L182" name="L182"></a> 182   <em class="brace">}</em>
<a id="L183" name="L183"></a> 183 
<div class="comment">
    Get an instance of the DTMManager.  Since a node
    iterator may be passed without a DTMManager, this allows the
    caller to easily get the DTMManager using just the iterator.
    @return a non-null DTMManager reference.</div>
<a id="L191" name="L191"></a> 191   <strong class="reserved">public</strong> <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> <a href="../R/15939.html" title="Multiple referred from 22 places.">getDTMManager</a>()
<a id="L192" name="L192"></a> 192   <em class="brace">{</em>
<a id="L193" name="L193"></a> 193     <strong class="reserved">return</strong> m_execContext.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L194" name="L194"></a> 194   <em class="brace">}</em>
<a id="L195" name="L195"></a> 195 
<div class="comment">
    Execute this iterator, meaning create a clone that can
    store state, and initialize it for fast execution from
    the current runtime state.  When this is called, no actual
    query from the current context node is performed.
    @param xctxt The XPath execution context.
    @return An XNodeSet reference that holds this iterator.
    @throws javax.xml.transform.TransformerException</div>
<a id="L208" name="L208"></a> 208   <strong class="reserved">public</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../R/14093.html" title="Multiple referred from 117 places.">execute</a>(<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt)
<a id="L209" name="L209"></a> 209           <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L210" name="L210"></a> 210   <em class="brace">{</em>
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212     <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = <strong class="reserved">new</strong> <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>((<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>)m_clones.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>());
<a id="L213" name="L213"></a> 213 
<a id="L214" name="L214"></a> 214     <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(xctxt.<a href="../D/18114.html" title="Multiple defined in 11 places.">getCurrentNode</a>(), xctxt);
<a id="L215" name="L215"></a> 215 
<a id="L216" name="L216"></a> 216     <strong class="reserved">return</strong> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>;
<a id="L217" name="L217"></a> 217   <em class="brace">}</em>
<a id="L218" name="L218"></a> 218 
<div class="comment">
    Execute an expression in the XPath runtime context, and return the
    result of the expression.
    @param xctxt The XPath runtime context.
    @param handler The target content handler.
    @return The result of the expression in the form of a <code>XObject</code>.
    @throws javax.xml.transform.TransformerException if a runtime exception
            occurs.
    @throws org.xml.sax.SAXException</div>
<a id="L233" name="L233"></a> 233   <strong class="reserved">public</strong> <strong class="reserved">void</strong> executeCharsToContentHandler(
<a id="L234" name="L234"></a> 234           <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt, org.xml.sax.<a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L235" name="L235"></a> 235             <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>,
<a id="L236" name="L236"></a> 236                    org.xml.sax.<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L237" name="L237"></a> 237   <em class="brace">{</em>
<a id="L238" name="L238"></a> 238     <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>)m_clones.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L239" name="L239"></a> 239 
<a id="L240" name="L240"></a> 240     <strong class="reserved">int</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = xctxt.<a href="../D/18114.html" title="Multiple defined in 11 places.">getCurrentNode</a>();
<a id="L241" name="L241"></a> 241     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>, xctxt);
<a id="L242" name="L242"></a> 242 
<a id="L243" name="L243"></a> 243     <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L244" name="L244"></a> 244     <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> dtm = <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L245" name="L245"></a> 245     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L246" name="L246"></a> 246 
<a id="L247" name="L247"></a> 247     <strong class="reserved">if</strong>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L248" name="L248"></a> 248     <em class="brace">{</em>
<a id="L249" name="L249"></a> 249       dtm.<a href="../D/14949.html" title="Multiple defined in 15 places.">dispatchCharactersEvents</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>, <strong class="reserved">false</strong>);
<a id="L250" name="L250"></a> 250     <em class="brace">}</em>
<a id="L251" name="L251"></a> 251   <em class="brace">}</em>
<a id="L252" name="L252"></a> 252 
<div class="comment">
    Given an select expression and a context, evaluate the XPath
    and return the resulting iterator.
    @param xctxt The execution context.
    @param contextNode The node that "." expresses.
    @throws TransformerException thrown if the active ProblemListener decides
    the error condition is severe enough to halt processing.
    @throws javax.xml.transform.TransformerException
    @xsl.usage experimental</div>
<a id="L265" name="L265"></a> 265   <strong class="reserved">public</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../R/10342.html" title="Multiple referred from 7 places.">asIterator</a>(
<a id="L266" name="L266"></a> 266           <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt, <strong class="reserved">int</strong> contextNode)
<a id="L267" name="L267"></a> 267             <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L268" name="L268"></a> 268   <em class="brace">{</em>
<a id="L269" name="L269"></a> 269     <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = <strong class="reserved">new</strong> <a href="../S/4901.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">XNodeSet</a>((<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>)m_clones.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>());
<a id="L270" name="L270"></a> 270 
<a id="L271" name="L271"></a> 271     <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(contextNode, xctxt);
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273     <strong class="reserved">return</strong> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>;
<a id="L274" name="L274"></a> 274   <em class="brace">}</em>
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276 
<div class="comment">
    Tell if the expression is a nodeset expression.
    @return true if the expression can be represented as a nodeset.</div>
<a id="L282" name="L282"></a> 282   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4985.html#L67" title="Referred from 67 in src/com/sun/org/apache/xpath/internal/functions/FunctionDef1Arg.java.">isNodesetExpr</a>()
<a id="L283" name="L283"></a> 283   <em class="brace">{</em>
<a id="L284" name="L284"></a> 284     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L285" name="L285"></a> 285   <em class="brace">}</em>
<a id="L286" name="L286"></a> 286 
<div class="comment">
    Return the first node out of the nodeset, if this expression is
    a nodeset expression.  This is the default implementation for
    nodesets.  Derived classes should try and override this and return a
    value without having to do a clone operation.
    @param xctxt The XPath runtime context.
    @return the first node out of the nodeset, or DTM.NULL.</div>
<a id="L295" name="L295"></a> 295   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/10344.html" title="Multiple referred from 3 places.">asNode</a>(<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt)
<a id="L296" name="L296"></a> 296     <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L297" name="L297"></a> 297   <em class="brace">{</em>
<a id="L298" name="L298"></a> 298     <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = (<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>)m_clones.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300     <strong class="reserved">int</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = xctxt.<a href="../D/18114.html" title="Multiple defined in 11 places.">getCurrentNode</a>();
<a id="L301" name="L301"></a> 301 
<a id="L302" name="L302"></a> 302     <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>, xctxt);
<a id="L303" name="L303"></a> 303 
<a id="L304" name="L304"></a> 304     <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L305" name="L305"></a> 305     <em class="comment">// m_clones.freeInstance(iter);</em>
<a id="L306" name="L306"></a> 306     <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L307" name="L307"></a> 307     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L308" name="L308"></a> 308   <em class="brace">}</em>
<a id="L309" name="L309"></a> 309 
<div class="comment">
    Evaluate this operation directly to a boolean.
    @param xctxt The runtime execution context.
    @return The result of the operation as a boolean.
    @throws javax.xml.transform.TransformerException</div>
<a id="L319" name="L319"></a> 319   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/10641.html" title="Multiple referred from 37 places.">bool</a>(<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt)
<a id="L320" name="L320"></a> 320           <strong class="reserved">throws</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.xml.<a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>.<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L321" name="L321"></a> 321   <em class="brace">{</em>
<a id="L322" name="L322"></a> 322     <strong class="reserved">return</strong> (<a href="../D/11548.html" title="Multiple defined in 5 places.">asNode</a>(xctxt) != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L323" name="L323"></a> 323   <em class="brace">}</em>
<a id="L324" name="L324"></a> 324 
<a id="L325" name="L325"></a> 325 
<div class="comment">
    Set if this is an iterator at the upper level of
    the XPath.
    @param b true if this location path is at the top level of the
             expression.
    @xsl.usage advanced</div>
<a id="L334" name="L334"></a> 334   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27606.html" title="Multiple referred from 2 places.">setIsTopLevel</a>(<strong class="reserved">boolean</strong> b)
<a id="L335" name="L335"></a> 335   <em class="brace">{</em>
<a id="L336" name="L336"></a> 336     m_isTopLevel = b;
<a id="L337" name="L337"></a> 337   <em class="brace">}</em>
<a id="L338" name="L338"></a> 338 
<div class="comment">
    Get if this is an iterator at the upper level of
    the XPath.
    @return true if this location path is at the top level of the
             expression.
    @xsl.usage advanced</div>
<a id="L347" name="L347"></a> 347   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/17169.html" title="Multiple referred from 3 places.">getIsTopLevel</a>()
<a id="L348" name="L348"></a> 348   <em class="brace">{</em>
<a id="L349" name="L349"></a> 349     <strong class="reserved">return</strong> m_isTopLevel;
<a id="L350" name="L350"></a> 350   <em class="brace">}</em>
<a id="L351" name="L351"></a> 351 
<div class="comment">
    Initialize the context values for this expression
    after it is cloned.
    @param context The XPath runtime context for this
    transformation.</div>
<a id="L359" name="L359"></a> 359   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28067.html" title="Multiple referred from 27 places.">setRoot</a>(<strong class="reserved">int</strong> <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L360" name="L360"></a> 360   <em class="brace">{</em>
<a id="L361" name="L361"></a> 361 
<a id="L362" name="L362"></a> 362     m_context = <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>;
<a id="L363" name="L363"></a> 363 
<a id="L364" name="L364"></a> 364     <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = (<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>)<a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>;
<a id="L365" name="L365"></a> 365     m_execContext = xctxt;
<a id="L366" name="L366"></a> 366     m_cdtm = xctxt.<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(<a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>);
<a id="L367" name="L367"></a> 367 
<a id="L368" name="L368"></a> 368     m_currentContextNode = <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>; <em class="comment">// only if top level?</em>
<a id="L369" name="L369"></a> 369 
<a id="L370" name="L370"></a> 370     <em class="comment">// Yech, shouldn't have to do this.  -sb</em>
<a id="L371" name="L371"></a> 371     <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == m_prefixResolver)
<a id="L372" name="L372"></a> 372         m_prefixResolver = xctxt.<a href="../D/20811.html" title="Multiple defined in 14 places.">getNamespaceContext</a>();
<a id="L373" name="L373"></a> 373 
<a id="L374" name="L374"></a> 374     m_lastFetched = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L375" name="L375"></a> 375     m_foundLast = <strong class="reserved">false</strong>;
<a id="L376" name="L376"></a> 376     m_pos = 0;
<a id="L377" name="L377"></a> 377     m_length = -1;
<a id="L378" name="L378"></a> 378 
<a id="L379" name="L379"></a> 379     <strong class="reserved">if</strong> (m_isTopLevel)
<a id="L380" name="L380"></a> 380       <strong class="reserved">this</strong>.m_stackFrame = xctxt.<a href="../S/4946.html#L467" title="Defined at 467 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getVarStack</a>().<a href="../S/4856.html#L161" title="Defined at 161 in src/com/sun/org/apache/xpath/internal/VariableStack.java.">getStackFrame</a>();
<a id="L381" name="L381"></a> 381 
<a id="L382" name="L382"></a> 382     <em class="comment">// reset();</em>
<a id="L383" name="L383"></a> 383   <em class="brace">}</em>
<a id="L384" name="L384"></a> 384 
<div class="comment">
    Set the next position index of this iterator.
    @param next A value greater than or equal to zero that indicates the next
    node position to fetch.</div>
<a id="L391" name="L391"></a> 391   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> setNextPosition(<strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>)
<a id="L392" name="L392"></a> 392   <em class="brace">{</em>
<a id="L393" name="L393"></a> 393     <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "setNextPosition not supported in this iterator!");
<a id="L394" name="L394"></a> 394   <em class="brace">}</em>
<a id="L395" name="L395"></a> 395 
<div class="comment">
    Get the current position, which is one less than
    the next nextNode() call will retrieve.  i.e. if
    you call getCurrentPos() and the return is 0, the next
    fetch will take place at index 1.
    @return A value greater than or equal to zero that indicates the next
    node position to fetch.</div>
<a id="L405" name="L405"></a> 405   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/15900.html" title="Multiple referred from 15 places.">getCurrentPos</a>()
<a id="L406" name="L406"></a> 406   <em class="brace">{</em>
<a id="L407" name="L407"></a> 407     <strong class="reserved">return</strong> m_pos;
<a id="L408" name="L408"></a> 408   <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410 
<div class="comment">
    If setShouldCacheNodes(true) is called, then nodes will
    be cached.  They are not cached by default.
    @param b True if this iterator should cache nodes.</div>
<a id="L417" name="L417"></a> 417   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28175.html" title="Multiple referred from 15 places.">setShouldCacheNodes</a>(<strong class="reserved">boolean</strong> b)
<a id="L418" name="L418"></a> 418   <em class="brace">{</em>
<a id="L419" name="L419"></a> 419 
<a id="L420" name="L420"></a> 420     <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "setShouldCacheNodes not supported by this iterater!");
<a id="L421" name="L421"></a> 421   <em class="brace">}</em>
<a id="L422" name="L422"></a> 422 
<div class="comment">
    Tells if this iterator can have nodes added to it or set via
    the <code>setItem(int node, int index)</code> method.
    @return True if the nodelist can be mutated.</div>
<a id="L429" name="L429"></a> 429   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isMutable()
<a id="L430" name="L430"></a> 430   <em class="brace">{</em>
<a id="L431" name="L431"></a> 431     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L432" name="L432"></a> 432   <em class="brace">}</em>
<a id="L433" name="L433"></a> 433 
<div class="comment">
    Set the current position in the node set.
    @param i Must be a valid index greater
    than or equal to zero and less than m_cachedNodes.size().</div>
<a id="L440" name="L440"></a> 440   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27137.html" title="Multiple referred from 3 places.">setCurrentPos</a>(<strong class="reserved">int</strong> i)
<a id="L441" name="L441"></a> 441   <em class="brace">{</em>
<a id="L442" name="L442"></a> 442         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "setCurrentPos not supported by this iterator!");
<a id="L443" name="L443"></a> 443   <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<div class="comment">
    Increment the current position in the node set.</div>
<a id="L448" name="L448"></a> 448   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20495.html" title="Multiple referred from 2 places.">incrementCurrentPos</a>()
<a id="L449" name="L449"></a> 449   <em class="brace">{</em>
<a id="L450" name="L450"></a> 450         m_pos++;
<a id="L451" name="L451"></a> 451   <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453 
<div class="comment">
    Get the length of the cached nodes.
    <p>Note: for the moment at least, this only returns
    the size of the nodes that have been fetched to date,
    it doesn't attempt to run to the end to make sure we
    have found everything.  This should be reviewed.</p>
    @return The size of the current cache list.</div>
<a id="L464" name="L464"></a> 464   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>()
<a id="L465" name="L465"></a> 465   <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "size() not supported by this iterator!");
<a id="L467" name="L467"></a> 467         <strong class="reserved">return</strong> 0;
<a id="L468" name="L468"></a> 468   <em class="brace">}</em>
<a id="L469" name="L469"></a> 469 
<div class="comment">
     Returns the <code>index</code> th item in the collection. If
    <code>index</code> is greater than or equal to the number of nodes in
    the list, this returns <code>null</code> .
    @param index  Index into the collection.
    @return  The node at the <code>index</code> th position in the
      <code>NodeList</code> , or <code>null</code> if that is not a valid
      index.</div>
<a id="L479" name="L479"></a> 479   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/22287.html" title="Multiple referred from 822 places.">item</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L480" name="L480"></a> 480   <em class="brace">{</em>
<a id="L481" name="L481"></a> 481         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "item(int index) not supported by this iterator!");
<a id="L482" name="L482"></a> 482         <strong class="reserved">return</strong> 0;
<a id="L483" name="L483"></a> 483   <em class="brace">}</em>
<a id="L484" name="L484"></a> 484 
<div class="comment">
    Sets the node at the specified index of this vector to be the
    specified node. The previous component at that position is discarded.
    <p>The index must be a value greater than or equal to 0 and less
    than the current size of the vector.
    The iterator must be in cached mode.</p>
    <p>Meant to be used for sorted iterators.</p>
    @param node Node to set
    @param index Index of where to set the node</div>
<a id="L498" name="L498"></a> 498   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27608.html" title="Multiple referred from 8 places.">setItem</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L499" name="L499"></a> 499   <em class="brace">{</em>
<a id="L500" name="L500"></a> 500         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "setItem not supported by this iterator!");
<a id="L501" name="L501"></a> 501   <em class="brace">}</em>
<a id="L502" name="L502"></a> 502 
<div class="comment">
     The number of nodes in the list. The range of valid child node indices
    is 0 to <code>length-1</code> inclusive.
    @return The number of nodes in the list, always greater or equal to zero.</div>
<a id="L509" name="L509"></a> 509   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17335.html" title="Multiple referred from 644 places.">getLength</a>()
<a id="L510" name="L510"></a> 510   <em class="brace">{</em>
<a id="L511" name="L511"></a> 511     <em class="comment">// Tell if this is being called from within a predicate.</em>
<a id="L512" name="L512"></a> 512         <strong class="reserved">boolean</strong> isPredicateTest = (<strong class="reserved">this</strong> == m_execContext.<a href="../S/4946.html#L961" title="Defined at 961 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">getSubContextList</a>());
<a id="L513" name="L513"></a> 513 
<a id="L514" name="L514"></a> 514     <em class="comment">// And get how many total predicates are part of this step.</em>
<a id="L515" name="L515"></a> 515         <strong class="reserved">int</strong> predCount = <a href="../D/21565.html" title="Multiple defined in 2 places.">getPredicateCount</a>();
<a id="L516" name="L516"></a> 516 
<a id="L517" name="L517"></a> 517     <em class="comment">// If we have already calculated the length, and the current predicate</em>
<a id="L518" name="L518"></a> 518     <em class="comment">// is the first predicate, then return the length.  We don't cache</em>
<a id="L519" name="L519"></a> 519     <em class="comment">// the anything but the length of the list to the first predicate.</em>
<a id="L520" name="L520"></a> 520     <strong class="reserved">if</strong> (-1 != m_length &amp;&amp; isPredicateTest &amp;&amp; m_predicateIndex &lt; 1)
<a id="L521" name="L521"></a> 521                 <strong class="reserved">return</strong> m_length;
<a id="L522" name="L522"></a> 522 
<a id="L523" name="L523"></a> 523     <em class="comment">// I'm a bit worried about this one, since it doesn't have the</em>
<a id="L524" name="L524"></a> 524     <em class="comment">// checks found above.  I suspect it's fine.  -sb</em>
<a id="L525" name="L525"></a> 525     <strong class="reserved">if</strong> (m_foundLast)
<a id="L526" name="L526"></a> 526                 <strong class="reserved">return</strong> m_pos;
<a id="L527" name="L527"></a> 527 
<a id="L528" name="L528"></a> 528     <em class="comment">// Create a clone, and count from the current position to the end</em>
<a id="L529" name="L529"></a> 529     <em class="comment">// of the list, not taking into account the current predicate and</em>
<a id="L530" name="L530"></a> 530     <em class="comment">// predicates after the current one.</em>
<a id="L531" name="L531"></a> 531     <strong class="reserved">int</strong> pos = (m_predicateIndex &gt;= 0) ? <a href="../D/21769.html" title="Multiple defined in 8 places.">getProximityPosition</a>() : m_pos;
<a id="L532" name="L532"></a> 532 
<a id="L533" name="L533"></a> 533     <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L534" name="L534"></a> 534 
<a id="L535" name="L535"></a> 535     <strong class="reserved">try</strong>
<a id="L536" name="L536"></a> 536     <em class="brace">{</em>
<a id="L537" name="L537"></a> 537       <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>) <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L538" name="L538"></a> 538     <em class="brace">}</em>
<a id="L539" name="L539"></a> 539     <strong class="reserved">catch</strong> (<a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a> cnse)
<a id="L540" name="L540"></a> 540     <em class="brace">{</em>
<a id="L541" name="L541"></a> 541       <strong class="reserved">return</strong> -1;
<a id="L542" name="L542"></a> 542     <em class="brace">}</em>
<a id="L543" name="L543"></a> 543 
<a id="L544" name="L544"></a> 544     <em class="comment">// We want to clip off the last predicate, but only if we are a sub</em>
<a id="L545" name="L545"></a> 545     <em class="comment">// context node list, NOT if we are a context list.  See pos68 test,</em>
<a id="L546" name="L546"></a> 546     <em class="comment">// also test against bug4638.</em>
<a id="L547" name="L547"></a> 547     <strong class="reserved">if</strong> (predCount &gt; 0 &amp;&amp; isPredicateTest)
<a id="L548" name="L548"></a> 548     <em class="brace">{</em>
<a id="L549" name="L549"></a> 549       <em class="comment">// Don't call setPredicateCount, because it clones and is slower.</em>
<a id="L550" name="L550"></a> 550       <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_predCount = m_predicateIndex;
<a id="L551" name="L551"></a> 551       <em class="comment">// The line above used to be:</em>
<a id="L552" name="L552"></a> 552       <em class="comment">// clone.m_predCount = predCount - 1;</em>
<a id="L553" name="L553"></a> 553       <em class="comment">// ...which looks like a dumb bug to me. -sb</em>
<a id="L554" name="L554"></a> 554     <em class="brace">}</em>
<a id="L555" name="L555"></a> 555 
<a id="L556" name="L556"></a> 556     <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L557" name="L557"></a> 557 
<a id="L558" name="L558"></a> 558     <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L559" name="L559"></a> 559     <em class="brace">{</em>
<a id="L560" name="L560"></a> 560       pos++;
<a id="L561" name="L561"></a> 561     <em class="brace">}</em>
<a id="L562" name="L562"></a> 562 
<a id="L563" name="L563"></a> 563     <strong class="reserved">if</strong> (isPredicateTest &amp;&amp; m_predicateIndex &lt; 1)
<a id="L564" name="L564"></a> 564       m_length = pos;
<a id="L565" name="L565"></a> 565 
<a id="L566" name="L566"></a> 566     <strong class="reserved">return</strong> pos;
<a id="L567" name="L567"></a> 567   <em class="brace">}</em>
<a id="L568" name="L568"></a> 568 
<div class="comment">
    Tells if this NodeSetDTM is "fresh", in other words, if
    the first nextNode() that is called will return the
    first node in the set.
    @return true of nextNode has not been called.</div>
<a id="L576" name="L576"></a> 576   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21499.html" title="Multiple referred from 2 places.">isFresh</a>()
<a id="L577" name="L577"></a> 577   <em class="brace">{</em>
<a id="L578" name="L578"></a> 578     <strong class="reserved">return</strong> (m_pos == 0);
<a id="L579" name="L579"></a> 579   <em class="brace">}</em>
<a id="L580" name="L580"></a> 580 
<div class="comment">
     Returns the previous node in the set and moves the position of the
    iterator backwards in the set.
    @return  The previous <code>Node</code> in the set being iterated over,
      or<code>null</code> if there are no more members in that set.</div>
<a id="L587" name="L587"></a> 587   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/24966.html" title="Multiple referred from 15 places.">previousNode</a>()
<a id="L588" name="L588"></a> 588   <em class="brace">{</em>
<a id="L589" name="L589"></a> 589     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L590" name="L590"></a> 590       <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESETDTM_CANNOT_ITERATE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSetDTM can not iterate to a previous node!");</em>
<a id="L591" name="L591"></a> 591   <em class="brace">}</em>
<a id="L592" name="L592"></a> 592 
<div class="comment">
    This attribute determines which node types are presented via the
    iterator. The available set of constants is defined in the
    <code>NodeFilter</code> interface.
    <p>This is somewhat useless at this time, since it doesn't
    really return information that tells what this iterator will
    show.  It is here only to fullfill the DOM NodeIterator
    interface.</p>
    @return For now, always NodeFilter.SHOW_ALL &amp; ~NodeFilter.SHOW_ENTITY_REFERENCE.
    @see org.w3c.dom.traversal.NodeIterator</div>
<a id="L606" name="L606"></a> 606   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19853.html" title="Multiple referred from 27 places.">getWhatToShow</a>()
<a id="L607" name="L607"></a> 607   <em class="brace">{</em>
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609     <em class="comment">// TODO: ??</em>
<a id="L610" name="L610"></a> 610     <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ALL &amp; ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ENTITY_REFERENCE;
<a id="L611" name="L611"></a> 611   <em class="brace">}</em>
<a id="L612" name="L612"></a> 612 
<div class="comment">
     The filter used to screen nodes.  Not used at this time,
    this is here only to fullfill the DOM NodeIterator
    interface.
    @return Always null.
    @see org.w3c.dom.traversal.NodeIterator</div>
<a id="L621" name="L621"></a> 621   <strong class="reserved">public</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a> <a href="../R/16590.html" title="Multiple referred from 6 places.">getFilter</a>()
<a id="L622" name="L622"></a> 622   <em class="brace">{</em>
<a id="L623" name="L623"></a> 623     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L624" name="L624"></a> 624   <em class="brace">}</em>
<a id="L625" name="L625"></a> 625 
<div class="comment">
    The root node of the Iterator, as specified when it was created.
    @return The "root" of this iterator, which, in XPath terms,
    is the node context for this iterator.</div>
<a id="L632" name="L632"></a> 632   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18758.html" title="Multiple referred from 54 places.">getRoot</a>()
<a id="L633" name="L633"></a> 633   <em class="brace">{</em>
<a id="L634" name="L634"></a> 634     <strong class="reserved">return</strong> m_context;
<a id="L635" name="L635"></a> 635   <em class="brace">}</em>
<a id="L636" name="L636"></a> 636 
<div class="comment">
     The value of this flag determines whether the children of entity
    reference nodes are visible to the iterator. If false, they will be
    skipped over.
    <br> To produce a view of the document that has entity references
    expanded and does not expose the entity reference node itself, use the
    whatToShow flags to hide the entity reference node and set
    expandEntityReferences to true when creating the iterator. To produce
    a view of the document that has entity reference nodes but no entity
    expansion, use the whatToShow flags to show the entity reference node
    and set expandEntityReferences to false.
    @return Always true, since entity reference nodes are not
    visible in the XPath model.</div>
<a id="L652" name="L652"></a> 652   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4889.html#L311" title="Referred from 311 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">getExpandEntityReferences</a>()
<a id="L653" name="L653"></a> 653   <em class="brace">{</em>
<a id="L654" name="L654"></a> 654     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L655" name="L655"></a> 655   <em class="brace">}</em>
<a id="L656" name="L656"></a> 656 
<div class="comment">
   /** Control over whether it is OK for detach to reset the iterator. */</div>
<a id="L658" name="L658"></a> 658   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_allowDetach = <strong class="reserved">true</strong>;
<a id="L659" name="L659"></a> 659 
<div class="comment">
    Specify if it's OK for detach to release the iterator for reuse.
    @param allowRelease true if it is OK for detach to release this iterator
    for pooling.</div>
<a id="L666" name="L666"></a> 666   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10150.html" title="Multiple referred from 6 places.">allowDetachToRelease</a>(<strong class="reserved">boolean</strong> allowRelease)
<a id="L667" name="L667"></a> 667   <em class="brace">{</em>
<a id="L668" name="L668"></a> 668     m_allowDetach = allowRelease;
<a id="L669" name="L669"></a> 669   <em class="brace">}</em>
<a id="L670" name="L670"></a> 670 
<div class="comment">
     Detaches the iterator from the set which it iterated over, releasing
    any computational resources and placing the iterator in the INVALID
    state. After<code>detach</code> has been invoked, calls to
    <code>nextNode</code> or<code>previousNode</code> will raise the
    exception INVALID_STATE_ERR.</div>
<a id="L678" name="L678"></a> 678   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>()
<a id="L679" name="L679"></a> 679   <em class="brace">{</em>
<a id="L680" name="L680"></a> 680     <strong class="reserved">if</strong>(m_allowDetach)
<a id="L681" name="L681"></a> 681     <em class="brace">{</em>
<a id="L682" name="L682"></a> 682       <em class="comment">// sb: allow reusing of cached nodes when possible?</em>
<a id="L683" name="L683"></a> 683       <em class="comment">// m_cachedNodes = null;</em>
<a id="L684" name="L684"></a> 684       m_execContext = <strong class="reserved">null</strong>;
<a id="L685" name="L685"></a> 685       <em class="comment">// m_prefixResolver = null;  sb: Why would this ever want to be null?</em>
<a id="L686" name="L686"></a> 686       m_cdtm = <strong class="reserved">null</strong>;
<a id="L687" name="L687"></a> 687       m_length = -1;
<a id="L688" name="L688"></a> 688       m_pos = 0;
<a id="L689" name="L689"></a> 689       m_lastFetched = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L690" name="L690"></a> 690       m_context = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L691" name="L691"></a> 691       m_currentContextNode = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L692" name="L692"></a> 692 
<a id="L693" name="L693"></a> 693       m_clones.<a href="../D/16580.html" title="Multiple defined in 2 places.">freeInstance</a>(<strong class="reserved">this</strong>);
<a id="L694" name="L694"></a> 694     <em class="brace">}</em>
<a id="L695" name="L695"></a> 695   <em class="brace">}</em>
<a id="L696" name="L696"></a> 696 
<div class="comment">
    Reset the iterator.</div>
<a id="L700" name="L700"></a> 700   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>()
<a id="L701" name="L701"></a> 701   <em class="brace">{</em>
<a id="L702" name="L702"></a> 702         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "This iterator can not reset!");
<a id="L703" name="L703"></a> 703   <em class="brace">}</em>
<a id="L704" name="L704"></a> 704 
<div class="comment">
    Get a cloned Iterator that is reset to the beginning
    of the query.
    @return A cloned NodeIterator set of the start of the query.
    @throws CloneNotSupportedException</div>
<a id="L713" name="L713"></a> 713   <strong class="reserved">public</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../R/11583.html" title="Multiple referred from 10 places.">cloneWithReset</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L714" name="L714"></a> 714   <em class="brace">{</em>
<a id="L715" name="L715"></a> 715     <a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L716" name="L716"></a> 716 <em class="comment">//    clone = (LocPathIterator) clone();</em>
<a id="L717" name="L717"></a> 717     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4876.html#L51" title="Defined at 51 in src/com/sun/org/apache/xpath/internal/axes/LocPathIterator.java.">LocPathIterator</a>)m_clones.<a href="../S/4864.html#L64" title="Defined at 64 in src/com/sun/org/apache/xpath/internal/axes/IteratorPool.java.">getInstanceOrThrow</a>();
<a id="L718" name="L718"></a> 718     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_execContext = m_execContext;
<a id="L719" name="L719"></a> 719     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_cdtm = m_cdtm;
<a id="L720" name="L720"></a> 720 
<a id="L721" name="L721"></a> 721     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_context = m_context;
<a id="L722" name="L722"></a> 722     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_currentContextNode = m_currentContextNode;
<a id="L723" name="L723"></a> 723     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_stackFrame = m_stackFrame;
<a id="L724" name="L724"></a> 724 
<a id="L725" name="L725"></a> 725     <em class="comment">// clone.reset();</em>
<a id="L726" name="L726"></a> 726 
<a id="L727" name="L727"></a> 727     <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L728" name="L728"></a> 728   <em class="brace">}</em>
<a id="L729" name="L729"></a> 729 
<a id="L730" name="L730"></a> 730 <em class="comment">//  /**</em>
<a id="L731" name="L731"></a> 731 <em class="comment">//   * Get a cloned LocPathIterator that holds the same</em>
<a id="L732" name="L732"></a> 732 <em class="comment">//   * position as this iterator.</em>
<a id="L733" name="L733"></a> 733 <em class="comment">//   *</em>
<a id="L734" name="L734"></a> 734 <em class="comment">//   * @return A clone of this iterator that holds the same node position.</em>
<a id="L735" name="L735"></a> 735 <em class="comment">//   *</em>
<a id="L736" name="L736"></a> 736 <em class="comment">//   * @throws CloneNotSupportedException</em>
<a id="L737" name="L737"></a> 737 <em class="comment">//   */</em>
<a id="L738" name="L738"></a> 738 <em class="comment">//  public Object clone() throws CloneNotSupportedException</em>
<a id="L739" name="L739"></a> 739 <em class="comment">//  {</em>
<a id="L740" name="L740"></a> 740 <em class="comment">//</em>
<a id="L741" name="L741"></a> 741 <em class="comment">//    LocPathIterator clone = (LocPathIterator) super.clone();</em>
<a id="L742" name="L742"></a> 742 <em class="comment">//</em>
<a id="L743" name="L743"></a> 743 <em class="comment">//    return clone;</em>
<a id="L744" name="L744"></a> 744 <em class="comment">//  }</em>
<a id="L745" name="L745"></a> 745 
<div class="comment">
     Returns the next node in the set and advances the position of the
    iterator in the set. After a NodeIterator is created, the first call
    to nextNode() returns the first node in the set.
    @return  The next <code>Node</code> in the set being iterated over, or
      <code>null</code> if there are no more members in that set.</div>
<a id="L753" name="L753"></a> 753   <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>();
<a id="L754" name="L754"></a> 754 
<div class="comment">
    Bottleneck the return of a next node, to make returns
    easier from nextNode().
    @param nextNode The next node found, may be null.
    @return The same node that was passed as an argument.</div>
<a id="L763" name="L763"></a> 763   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/26468.html" title="Multiple referred from 2 places.">returnNextNode</a>(<strong class="reserved">int</strong> <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>)
<a id="L764" name="L764"></a> 764   <em class="brace">{</em>
<a id="L765" name="L765"></a> 765 
<a id="L766" name="L766"></a> 766     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>)
<a id="L767" name="L767"></a> 767     <em class="brace">{</em>
<a id="L768" name="L768"></a> 768       m_pos++;
<a id="L769" name="L769"></a> 769     <em class="brace">}</em>
<a id="L770" name="L770"></a> 770 
<a id="L771" name="L771"></a> 771     m_lastFetched = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>;
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>)
<a id="L774" name="L774"></a> 774       m_foundLast = <strong class="reserved">true</strong>;
<a id="L775" name="L775"></a> 775 
<a id="L776" name="L776"></a> 776     <strong class="reserved">return</strong> <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>;
<a id="L777" name="L777"></a> 777   <em class="brace">}</em>
<a id="L778" name="L778"></a> 778 
<div class="comment">
    Return the last fetched node.  Needed to support the UnionPathIterator.
    @return The last fetched node, or null if the last fetch was null.</div>
<a id="L784" name="L784"></a> 784   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15897.html" title="Multiple referred from 27 places.">getCurrentNode</a>()
<a id="L785" name="L785"></a> 785   <em class="brace">{</em>
<a id="L786" name="L786"></a> 786     <strong class="reserved">return</strong> m_lastFetched;
<a id="L787" name="L787"></a> 787   <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
    If an index is requested, NodeSetDTM will call this method
    to run the iterator to the index.  By default this sets
    m_next to the index.  If the index argument is -1, this
    signals that the iterator should be run to the end.
    @param index The index to run to, or -1 if the iterator
    should run to the end.</div>
<a id="L798" name="L798"></a> 798   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26561.html" title="Multiple referred from 15 places.">runTo</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L799" name="L799"></a> 799   <em class="brace">{</em>
<a id="L800" name="L800"></a> 800 
<a id="L801" name="L801"></a> 801     <strong class="reserved">if</strong> (m_foundLast || ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt;= <a href="../D/18120.html" title="Multiple defined in 7 places.">getCurrentPos</a>())))
<a id="L802" name="L802"></a> 802       <strong class="reserved">return</strong>;
<a id="L803" name="L803"></a> 803 
<a id="L804" name="L804"></a> 804     <strong class="reserved">int</strong> n;
<a id="L805" name="L805"></a> 805 
<a id="L806" name="L806"></a> 806     <strong class="reserved">if</strong> (-1 == <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L807" name="L807"></a> 807     <em class="brace">{</em>
<a id="L808" name="L808"></a> 808       <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (n = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()));
<a id="L809" name="L809"></a> 809     <em class="brace">}</em>
<a id="L810" name="L810"></a> 810     <strong class="reserved">else</strong>
<a id="L811" name="L811"></a> 811     <em class="brace">{</em>
<a id="L812" name="L812"></a> 812       <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (n = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L813" name="L813"></a> 813       <em class="brace">{</em>
<a id="L814" name="L814"></a> 814         <strong class="reserved">if</strong> (<a href="../D/18120.html" title="Multiple defined in 7 places.">getCurrentPos</a>() &gt;= <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L815" name="L815"></a> 815           <strong class="reserved">break</strong>;
<a id="L816" name="L816"></a> 816       <em class="brace">}</em>
<a id="L817" name="L817"></a> 817     <em class="brace">}</em>
<a id="L818" name="L818"></a> 818   <em class="brace">}</em>
<a id="L819" name="L819"></a> 819 
<div class="comment">
    Tells if we've found the last node yet.
    @return true if the last nextNode returned null.</div>
<a id="L825" name="L825"></a> 825   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> getFoundLast()
<a id="L826" name="L826"></a> 826   <em class="brace">{</em>
<a id="L827" name="L827"></a> 827     <strong class="reserved">return</strong> m_foundLast;
<a id="L828" name="L828"></a> 828   <em class="brace">}</em>
<a id="L829" name="L829"></a> 829 
<div class="comment">
    The XPath execution context we are operating on.
    @return XPath execution context this iterator is operating on,
    or null if setRoot has not been called.</div>
<a id="L836" name="L836"></a> 836   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> <a href="../R/19927.html" title="Multiple referred from 18 places.">getXPathContext</a>()
<a id="L837" name="L837"></a> 837   <em class="brace">{</em>
<a id="L838" name="L838"></a> 838     <strong class="reserved">return</strong> m_execContext;
<a id="L839" name="L839"></a> 839   <em class="brace">}</em>
<a id="L840" name="L840"></a> 840 
<div class="comment">
    The node context for the iterator.
    @return The node context, same as getRoot().</div>
<a id="L846" name="L846"></a> 846   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/15801.html" title="Multiple referred from 401 places.">getContext</a>()
<a id="L847" name="L847"></a> 847   <em class="brace">{</em>
<a id="L848" name="L848"></a> 848     <strong class="reserved">return</strong> m_context;
<a id="L849" name="L849"></a> 849   <em class="brace">}</em>
<a id="L850" name="L850"></a> 850 
<div class="comment">
    The node context from where the expression is being
    executed from (i.e. for current() support).
    @return The top-level node context of the entire expression.</div>
<a id="L857" name="L857"></a> 857   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/4960.html#L64" title="Referred from 64 in src/com/sun/org/apache/xpath/internal/functions/FuncCurrent.java.">getCurrentContextNode</a>()
<a id="L858" name="L858"></a> 858   <em class="brace">{</em>
<a id="L859" name="L859"></a> 859     <strong class="reserved">return</strong> m_currentContextNode;
<a id="L860" name="L860"></a> 860   <em class="brace">}</em>
<a id="L861" name="L861"></a> 861 
<div class="comment">
    Set the current context node for this iterator.
    @param n Must be a non-null reference to the node context.</div>
<a id="L867" name="L867"></a> 867   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> setCurrentContextNode(<strong class="reserved">int</strong> n)
<a id="L868" name="L868"></a> 868   <em class="brace">{</em>
<a id="L869" name="L869"></a> 869     m_currentContextNode = n;
<a id="L870" name="L870"></a> 870   <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<a id="L872" name="L872"></a> 872 <em class="comment">//  /**</em>
<a id="L873" name="L873"></a> 873 <em class="comment">//   * Set the current context node for this iterator.</em>
<a id="L874" name="L874"></a> 874 <em class="comment">//   *</em>
<a id="L875" name="L875"></a> 875 <em class="comment">//   * @param n Must be a non-null reference to the node context.</em>
<a id="L876" name="L876"></a> 876 <em class="comment">//   */</em>
<a id="L877" name="L877"></a> 877 <em class="comment">//  public void setRoot(int n)</em>
<a id="L878" name="L878"></a> 878 <em class="comment">//  {</em>
<a id="L879" name="L879"></a> 879 <em class="comment">//    m_context = n;</em>
<a id="L880" name="L880"></a> 880 <em class="comment">//    m_cdtm = m_execContext.getDTM(n);</em>
<a id="L881" name="L881"></a> 881 <em class="comment">//  }</em>
<a id="L882" name="L882"></a> 882 
<div class="comment">
    Return the saved reference to the prefix resolver that
    was in effect when this iterator was created.
    @return The prefix resolver or this iterator, which may be null.</div>
<a id="L889" name="L889"></a> 889   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a> <a href="../R/18423.html" title="Multiple referred from 5 places.">getPrefixResolver</a>()
<a id="L890" name="L890"></a> 890   <em class="brace">{</em>
<a id="L891" name="L891"></a> 891         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == m_prefixResolver)
<a id="L892" name="L892"></a> 892         <em class="brace">{</em>
<a id="L893" name="L893"></a> 893         m_prefixResolver = (<a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a>)<a href="../D/18944.html" title="Multiple defined in 2 places.">getExpressionOwner</a>();
<a id="L894" name="L894"></a> 894         <em class="brace">}</em>
<a id="L895" name="L895"></a> 895 
<a id="L896" name="L896"></a> 896     <strong class="reserved">return</strong> m_prefixResolver;
<a id="L897" name="L897"></a> 897   <em class="brace">}</em>
<a id="L898" name="L898"></a> 898 
<a id="L899" name="L899"></a> 899 <em class="comment">//  /**</em>
<a id="L900" name="L900"></a> 900 <em class="comment">//   * Get the analysis pattern built by the WalkerFactory.</em>
<a id="L901" name="L901"></a> 901 <em class="comment">//   *</em>
<a id="L902" name="L902"></a> 902 <em class="comment">//   * @return The analysis pattern built by the WalkerFactory.</em>
<a id="L903" name="L903"></a> 903 <em class="comment">//   */</em>
<a id="L904" name="L904"></a> 904 <em class="comment">//  int getAnalysis()</em>
<a id="L905" name="L905"></a> 905 <em class="comment">//  {</em>
<a id="L906" name="L906"></a> 906 <em class="comment">//    return m_analysis;</em>
<a id="L907" name="L907"></a> 907 <em class="comment">//  }</em>
<a id="L908" name="L908"></a> 908 
<a id="L909" name="L909"></a> 909 <em class="comment">//  /**</em>
<a id="L910" name="L910"></a> 910 <em class="comment">//   * Set the analysis pattern built by the WalkerFactory.</em>
<a id="L911" name="L911"></a> 911 <em class="comment">//   *</em>
<a id="L912" name="L912"></a> 912 <em class="comment">//   * @param a The analysis pattern built by the WalkerFactory.</em>
<a id="L913" name="L913"></a> 913 <em class="comment">//   */</em>
<a id="L914" name="L914"></a> 914 <em class="comment">//  void setAnalysis(int a)</em>
<a id="L915" name="L915"></a> 915 <em class="comment">//  {</em>
<a id="L916" name="L916"></a> 916 <em class="comment">//    m_analysis = a;</em>
<a id="L917" name="L917"></a> 917 <em class="comment">//  }</em>
<a id="L918" name="L918"></a> 918 
<div class="comment">
    @see com.sun.org.apache.xpath.internal.XPathVisitable#callVisitors(ExpressionOwner, XPathVisitor)</div>
<a id="L922" name="L922"></a> 922   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10860.html" title="Multiple referred from 22 places.">callVisitors</a>(<a href="../S/4989.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/ExpressionOwner.java.">ExpressionOwner</a> <a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a>, <a href="../S/4945.html#L53" title="Defined at 53 in src/com/sun/org/apache/xpath/internal/XPathVisitor.java.">XPathVisitor</a> visitor)
<a id="L923" name="L923"></a> 923   <em class="brace">{</em>
<a id="L924" name="L924"></a> 924                 <strong class="reserved">if</strong>(visitor.<a href="../S/4945.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/XPathVisitor.java.">visitLocationPath</a>(<a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a>, <strong class="reserved">this</strong>))
<a id="L925" name="L925"></a> 925                 <em class="brace">{</em>
<a id="L926" name="L926"></a> 926                         visitor.<a href="../S/4945.html#L86" title="Defined at 86 in src/com/sun/org/apache/xpath/internal/XPathVisitor.java.">visitStep</a>(<a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a>, <strong class="reserved">this</strong>);
<a id="L927" name="L927"></a> 927                         <a href="../D/12112.html" title="Multiple defined in 4 places.">callPredicateVisitors</a>(visitor);
<a id="L928" name="L928"></a> 928                 <em class="brace">}</em>
<a id="L929" name="L929"></a> 929   <em class="brace">}</em>
<a id="L930" name="L930"></a> 930 
<a id="L931" name="L931"></a> 931 
<a id="L932" name="L932"></a> 932   <em class="comment">//============= State Data =============</em>
<a id="L933" name="L933"></a> 933 
<div class="comment">
    The pool for cloned iterators.  Iterators need to be cloned
    because the hold running state, and thus the original iterator
    expression from the stylesheet pool can not be used.</div>
<a id="L939" name="L939"></a> 939   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../S/4864.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/axes/IteratorPool.java.">IteratorPool</a> m_clones = <strong class="reserved">new</strong> <a href="../S/4864.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/axes/IteratorPool.java.">IteratorPool</a>(<strong class="reserved">this</strong>);
<a id="L940" name="L940"></a> 940 
<div class="comment">
    The dtm of the context node.  Careful about using this... it may not
    be the dtm of the current node.</div>
<a id="L945" name="L945"></a> 945   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> m_cdtm;
<a id="L946" name="L946"></a> 946 
<div class="comment">
    The stack frame index for this iterator.</div>
<a id="L950" name="L950"></a> 950   <strong class="reserved">transient</strong> <strong class="reserved">int</strong> m_stackFrame = -1;
<a id="L951" name="L951"></a> 951 
<div class="comment">
    Value determined at compile time, indicates that this is an
    iterator at the top level of the expression, rather than inside
    a predicate.
    @serial</div>
<a id="L958" name="L958"></a> 958   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> m_isTopLevel = <strong class="reserved">false</strong>;
<a id="L959" name="L959"></a> 959 
<div class="comment">
   /** The last node that was fetched, usually by nextNode. */</div>
<a id="L961" name="L961"></a> 961   <strong class="reserved">transient</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> m_lastFetched = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L962" name="L962"></a> 962 
<div class="comment">
    The context node for this iterator, which doesn't change through
    the course of the iteration.</div>
<a id="L967" name="L967"></a> 967   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_context = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L968" name="L968"></a> 968 
<div class="comment">
    The node context from where the expression is being
    executed from (i.e. for current() support).  Different
    from m_context in that this is the context for the entire
    expression, rather than the context for the subexpression.</div>
<a id="L975" name="L975"></a> 975   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_currentContextNode = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L976" name="L976"></a> 976 
<div class="comment">
    The current position of the context node.</div>
<a id="L980" name="L980"></a> 980   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_pos = 0;
<a id="L981" name="L981"></a> 981 
<a id="L982" name="L982"></a> 982   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_length = -1;
<a id="L983" name="L983"></a> 983 
<div class="comment">
    Fast access to the current prefix resolver.  It isn't really
    clear that this is needed.
    @serial</div>
<a id="L989" name="L989"></a> 989   <strong class="reserved">private</strong> <a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a> m_prefixResolver;
<a id="L990" name="L990"></a> 990 
<div class="comment">
    The XPathContext reference, needed for execution of many
    operations.</div>
<a id="L995" name="L995"></a> 995   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> m_execContext;
<a id="L996" name="L996"></a> 996 
<div class="comment">
    Returns true if all the nodes in the iteration well be returned in document
    order.
    @return true as a default.</div>
<a id="L1003" name="L1003"></a>1003   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21373.html" title="Multiple referred from 8 places.">isDocOrdered</a>()
<a id="L1004" name="L1004"></a>1004   <em class="brace">{</em>
<a id="L1005" name="L1005"></a>1005     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1006" name="L1006"></a>1006   <em class="brace">}</em>
<a id="L1007" name="L1007"></a>1007 
<div class="comment">
    Returns the axis being iterated, if it is known.
    @return Axis.CHILD, etc., or -1 if the axis is not known or is of multiple
    types.</div>
<a id="L1014" name="L1014"></a>1014   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15203.html" title="Multiple referred from 33 places.">getAxis</a>()
<a id="L1015" name="L1015"></a>1015   <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016     <strong class="reserved">return</strong> -1;
<a id="L1017" name="L1017"></a>1017   <em class="brace">}</em>
<a id="L1018" name="L1018"></a>1018 
<a id="L1019" name="L1019"></a>1019 
<a id="L1020" name="L1020"></a>1020 <em class="comment">//  /**</em>
<a id="L1021" name="L1021"></a>1021 <em class="comment">//   * The analysis pattern built by the WalkerFactory.</em>
<a id="L1022" name="L1022"></a>1022 <em class="comment">//   * TODO: Move to LocPathIterator.</em>
<a id="L1023" name="L1023"></a>1023 <em class="comment">//   * @see com.sun.org.apache.xpath.internal.axes.WalkerFactory</em>
<a id="L1024" name="L1024"></a>1024 <em class="comment">//   * @serial</em>
<a id="L1025" name="L1025"></a>1025 <em class="comment">//   */</em>
<a id="L1026" name="L1026"></a>1026 <em class="comment">//  protected int m_analysis = 0x00000000;</em>
<div class="comment">
    @see PredicatedNodeTest#getLastPos(XPathContext)</div>
<a id="L1030" name="L1030"></a>1030   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/4977.html#L71" title="Referred from 71 in src/com/sun/org/apache/xpath/internal/functions/FuncLast.java.">getLastPos</a>(<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt)
<a id="L1031" name="L1031"></a>1031   <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032     <strong class="reserved">return</strong> <a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1033" name="L1033"></a>1033   <em class="brace">}</em>
<a id="L1034" name="L1034"></a>1034 
<a id="L1035" name="L1035"></a>1035 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L122">[^]</a><a href="#L1030">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
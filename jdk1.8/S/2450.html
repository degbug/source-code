<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/SystemTray.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L177">[^]</a><a href="#L510">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L177" title="Defined at 177.">getSystemTray</a></li>
<li><a href="#L218" title="Defined at 218.">isSupported</a></li>
<li><a href="#L254" title="Defined at 254.">add</a></li>
<li><a href="#L300" title="Defined at 300.">remove</a></li>
<li><a href="#L337" title="Defined at 337.">getTrayIcons</a></li>
<li><a href="#L357" title="Defined at 357.">getTrayIconSize</a></li>
<li><a href="#L399" title="Defined at 399.">addPropertyChangeListener</a></li>
<li><a href="#L423" title="Defined at 423.">removePropertyChangeListener</a></li>
<li><a href="#L447" title="Defined at 447.">getPropertyChangeListeners</a></li>
<li><a href="#L466" title="Defined at 466.">firePropertyChange</a></li>
<li><a href="#L481" title="Defined at 481.">getCurrentChangeSupport</a></li>
<li><a href="#L492" title="Defined at 492.">addNotify</a></li>
<li><a href="#L503" title="Defined at 503.">checkSystemTrayAllowed</a></li>
<li><a href="#L510" title="Defined at 510.">initializeSystemTrayIfNeeded</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2005, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Vector;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.peer.SystemTrayPeer;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.beans.PropertyChangeListener;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.beans.PropertyChangeSupport;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> sun.awt.AppContext;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> sun.awt.SunToolkit;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> sun.awt.HeadlessToolkit;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> sun.security.util.SecurityConstants;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> sun.awt.AWTAccessor;
<a id="L37" name="L37"></a>  37 
<div class="comment">
  The <code>SystemTray</code> class represents the system tray for a
  desktop.  On Microsoft Windows it is referred to as the "Taskbar
  Status Area", on Gnome it is referred to as the "Notification
  Area", on KDE it is referred to as the "System Tray".  The system
  tray is shared by all applications running on the desktop.
  <p> On some platforms the system tray may not be present or may not
  be supported, in this case {@link SystemTray#getSystemTray()}
  throws <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>.  To detect whether the
  system tray is supported, use {@link SystemTray#isSupported}.
  </p><p>The <code>SystemTray</code> may contain one or more {@link
  TrayIcon TrayIcons}, which are added to the tray using the {@link
  #add} method, and removed when no longer needed, using the
  <a href="#L300" title="Defined at 300.">remove</a>.  <code>TrayIcon</code> consists of an
  image, a popup menu and a set of associated listeners.  Please see
  the <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a> class for details.
  </p><p>Every Java application has a single <code>SystemTray</code>
  instance that allows the app to interface with the system tray of
  the desktop while the app is running.  The <code>SystemTray</code>
  instance can be obtained from the <a href="#L177" title="Defined at 177.">getSystemTray</a> method.
  An application may not create its own instance of
  <code>SystemTray</code>.
  </p><p>The following code snippet demonstrates how to access
  and customize the system tray:
  </p><pre>  <code>
      <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a> trayIcon = null;
      if (SystemTray.isSupported()) {
          // get the SystemTray instance
          SystemTray tray = SystemTray.<a href="#L177" title="Defined at 177.">getSystemTray</a>;
          // load an image
          {@link java.awt.Image} image = {@link java.awt.Toolkit#getImage(String) Toolkit.getDefaultToolkit().getImage}(...);
          // create a action listener to listen for default action executed on the tray icon
          {@link java.awt.event.ActionListener} listener = new {@link java.awt.event.ActionListener ActionListener}() {
              public void {@link java.awt.event.ActionListener#actionPerformed actionPerformed}({@link java.awt.event.ActionEvent} e) {
                  // execute default action of the application
                  // ...
              }
          };
          // create a popup menu
          {@link java.awt.PopupMenu} popup = new {@link java.awt.PopupMenu#PopupMenu PopupMenu}();
          // create menu item for the default action
          MenuItem defaultItem = new MenuItem(...);
          defaultItem.addActionListener(listener);
          popup.add(defaultItem);
          /// ... add other items
          // construct a TrayIcon
          trayIcon = new {@link TrayIcon#TrayIcon(java.awt.Image, String, java.awt.PopupMenu) TrayIcon}(image, "Tray Demo", popup);
          // set the TrayIcon properties
          trayIcon.{@link TrayIcon#addActionListener(java.awt.event.ActionListener) addActionListener}(listener);
          // ...
          // add the tray image
          try {
              tray.{@link SystemTray#add(TrayIcon) add}(trayIcon);
          } catch (AWTException e) {
              System.err.println(e);
          }
          // ...
      } else {
          // disable tray option in your application or
          // perform other actions
          ...
      }
      // ...
      // some time later
      // the application state has changed - update the image
      if (trayIcon != null) {
          trayIcon.{@link TrayIcon#setImage(java.awt.Image) setImage}(updatedImage);
      }
      // ...
  </code>
  </pre>
  @since 1.6
  @see TrayIcon
  @author Bino George
  @author Denis Mikhalkin
  @author Sharon Zakhour
  @author Anton Tarasov</div>
<a id="L123" name="L123"></a> 123 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/7905.html" title="Multiple referred from 12 places.">SystemTray</a> <em class="brace">{</em>
<a id="L124" name="L124"></a> 124     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a> systemTray;
<a id="L125" name="L125"></a> 125     <strong class="reserved">private</strong> <strong class="reserved">int</strong> currentIconID = 0; <em class="comment">// each TrayIcon added gets a unique ID</em>
<a id="L126" name="L126"></a> 126 
<a id="L127" name="L127"></a> 127     <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <a href="../S/2208.html#L35" title="Defined at 35 in src/java/awt/peer/SystemTrayPeer.java.">SystemTrayPeer</a> peer;
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[] EMPTY_TRAY_ARRAY = <strong class="reserved">new</strong> <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[0];
<a id="L130" name="L130"></a> 130 
<a id="L131" name="L131"></a> 131     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L132" name="L132"></a> 132         AWTAccessor.setSystemTrayAccessor(
<a id="L133" name="L133"></a> 133             <strong class="reserved">new</strong> AWTAccessor.SystemTrayAccessor() <em class="brace">{</em>
<a id="L134" name="L134"></a> 134                 <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>(<a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a> tray,
<a id="L135" name="L135"></a> 135                                                <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L136" name="L136"></a> 136                                                <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue,
<a id="L137" name="L137"></a> 137                                                <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue) <em class="brace">{</em>
<a id="L138" name="L138"></a> 138                     tray.<a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, oldValue, newValue);
<a id="L139" name="L139"></a> 139                 <em class="brace">}</em>
<a id="L140" name="L140"></a> 140             <em class="brace">}</em>);
<a id="L141" name="L141"></a> 141     <em class="brace">}</em>
<a id="L142" name="L142"></a> 142 
<div class="comment">
      Private <code>SystemTray</code> constructor.</div>
<a id="L147" name="L147"></a> 147     <strong class="reserved">private</strong> SystemTray() <em class="brace">{</em>
<a id="L148" name="L148"></a> 148         <a href="../D/10976.html" title="Multiple defined in 35 places.">addNotify</a>();
<a id="L149" name="L149"></a> 149     <em class="brace">}</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
      Gets the <code>SystemTray</code> instance that represents the
      desktop's tray area.  This always returns the same instance per
      application.  On some platforms the system tray may not be
      supported.  You may use the <a href="#L218" title="Defined at 218.">isSupported</a> method to
      check if the system tray is supported.
      <p>If a SecurityManager is installed, the AWTPermission
      <code>accessSystemTray</code> must be granted in order to get the
      <code>SystemTray</code> instance. Otherwise this method will throw a
      SecurityException.
      @return the <code>SystemTray</code> instance that represents
      the desktop's tray area
      @throws UnsupportedOperationException if the system tray isn't
      supported by the current platform
      @throws HeadlessException if
      <code>GraphicsEnvironment.isHeadless()</code> returns <code>true</code>
      @throws SecurityException if <code>accessSystemTray</code> permission
      is not granted
      @see #add(TrayIcon)
      @see TrayIcon
      @see #isSupported
      @see SecurityManager#checkPermission
      @see AWTPermission</p></div>
<a id="L177" name="L177"></a> 177     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a> <a href="../S/2090.html#L678" title="Referred from 678 in src/java/awt/TrayIcon.java.">getSystemTray</a>() <em class="brace">{</em>
<a id="L178" name="L178"></a> 178         <a href="../S/2450.html#L503" title="Defined at 503 in src/java/awt/SystemTray.java.">checkSystemTrayAllowed</a>();
<a id="L179" name="L179"></a> 179         <strong class="reserved">if</strong> (<a href="../S/2120.html#L56" title="Defined at 56 in src/java/awt/GraphicsEnvironment.java.">GraphicsEnvironment</a>.<a href="../D/25646.html" title="Multiple defined in 2 places.">isHeadless</a>()) <em class="brace">{</em>
<a id="L180" name="L180"></a> 180             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/2385.html#L36" title="Defined at 36 in src/java/awt/HeadlessException.java.">HeadlessException</a>();
<a id="L181" name="L181"></a> 181         <em class="brace">}</em>
<a id="L182" name="L182"></a> 182 
<a id="L183" name="L183"></a> 183         <a href="../S/2450.html#L510" title="Defined at 510 in src/java/awt/SystemTray.java.">initializeSystemTrayIfNeeded</a>();
<a id="L184" name="L184"></a> 184 
<a id="L185" name="L185"></a> 185         <strong class="reserved">if</strong> (!<a href="../D/26316.html" title="Multiple defined in 54 places.">isSupported</a>()) <em class="brace">{</em>
<a id="L186" name="L186"></a> 186             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>(
<a id="L187" name="L187"></a> 187                 "The system tray is not supported on the current platform.");
<a id="L188" name="L188"></a> 188         <em class="brace">}</em>
<a id="L189" name="L189"></a> 189 
<a id="L190" name="L190"></a> 190         <strong class="reserved">return</strong> systemTray;
<a id="L191" name="L191"></a> 191     <em class="brace">}</em>
<a id="L192" name="L192"></a> 192 
<div class="comment">
      Returns whether the system tray is supported on the current
      platform.  In addition to displaying the tray icon, minimal
      system tray support includes either a popup menu (see {@link
      TrayIcon#setPopupMenu(PopupMenu)}) or an action event (see
      {@link TrayIcon#addActionListener(ActionListener)}).
      <p>Developers should not assume that all of the system tray
      functionality is supported.  To guarantee that the tray icon's
      default action is always accessible, add the default action to
      both the action listener and the popup menu.  See the {@link
      SystemTray example} for an example of how to do this.
      </p><p><b>Note</b>: When implementing <code>SystemTray</code> and
      <code>TrayIcon</code> it is <em>strongly recommended</em> that
      you assign different gestures to the popup menu and an action
      event.  Overloading a gesture for both purposes is confusing
      and may prevent the user from accessing one or the other.
      @see #getSystemTray
      @return <code>false</code> if no system tray access is supported; this
      method returns <code>true</code> if the minimal system tray access is
      supported but does not guarantee that all system tray
      functionality is supported for the current platform</p></div>
<a id="L218" name="L218"></a> 218     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22081.html" title="Multiple referred from 65 places.">isSupported</a>() <em class="brace">{</em>
<a id="L219" name="L219"></a> 219         <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a> toolkit = <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../S/2437.html#L852" title="Defined at 852 in src/java/awt/Toolkit.java.">getDefaultToolkit</a>();
<a id="L220" name="L220"></a> 220         <strong class="reserved">if</strong> (toolkit <strong class="reserved">instanceof</strong> SunToolkit) <em class="brace">{</em>
<a id="L221" name="L221"></a> 221             <em class="comment">// connecting tray to native resource</em>
<a id="L222" name="L222"></a> 222             <a href="../S/2450.html#L510" title="Defined at 510 in src/java/awt/SystemTray.java.">initializeSystemTrayIfNeeded</a>();
<a id="L223" name="L223"></a> 223             <strong class="reserved">return</strong> ((SunToolkit)toolkit).isTraySupported();
<a id="L224" name="L224"></a> 224         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (toolkit <strong class="reserved">instanceof</strong> HeadlessToolkit) <em class="brace">{</em>
<a id="L225" name="L225"></a> 225             <em class="comment">// skip initialization as the init routine</em>
<a id="L226" name="L226"></a> 226             <em class="comment">// throws HeadlessException</em>
<a id="L227" name="L227"></a> 227             <strong class="reserved">return</strong> ((HeadlessToolkit)toolkit).isTraySupported();
<a id="L228" name="L228"></a> 228         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L229" name="L229"></a> 229             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L230" name="L230"></a> 230         <em class="brace">}</em>
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
      Adds a <code>TrayIcon</code> to the <code>SystemTray</code>.
      The tray icon becomes visible in the system tray once it is
      added.  The order in which icons are displayed in a tray is not
      specified - it is platform and implementation-dependent.
      <p> All icons added by the application are automatically
      removed from the <code>SystemTray</code> upon application exit
      and also when the desktop system tray becomes unavailable.
      @param trayIcon the <code>TrayIcon</code> to be added
      @throws NullPointerException if <code>trayIcon</code> is
      <code>null</code>
      @throws IllegalArgumentException if the same instance of
      a <code>TrayIcon</code> is added more than once
      @throws AWTException if the desktop system tray is missing
      @see #remove(TrayIcon)
      @see #getSystemTray
      @see TrayIcon
      @see java.awt.Image</p></div>
<a id="L254" name="L254"></a> 254     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a> trayIcon) <strong class="reserved">throws</strong> <a href="../S/2342.html#L33" title="Defined at 33 in src/java/awt/AWTException.java.">AWTException</a> <em class="brace">{</em>
<a id="L255" name="L255"></a> 255         <strong class="reserved">if</strong> (trayIcon == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L256" name="L256"></a> 256             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>("adding null TrayIcon");
<a id="L257" name="L257"></a> 257         <em class="brace">}</em>
<a id="L258" name="L258"></a> 258         <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[] oldArray = <strong class="reserved">null</strong>, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = <strong class="reserved">null</strong>;
<a id="L259" name="L259"></a> 259         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt; icons = <strong class="reserved">null</strong>;
<a id="L260" name="L260"></a> 260         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261             oldArray = systemTray.<a href="../S/2450.html#L337" title="Defined at 337 in src/java/awt/SystemTray.java.">getTrayIcons</a>();
<a id="L262" name="L262"></a> 262             icons = (<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt;)AppContext.getAppContext().<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>.<strong class="reserved">class</strong>);
<a id="L263" name="L263"></a> 263             <strong class="reserved">if</strong> (icons == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264                 icons = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt;(3);
<a id="L265" name="L265"></a> 265                 AppContext.getAppContext().<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>.<strong class="reserved">class</strong>, icons);
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (icons.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(trayIcon)) <em class="brace">{</em>
<a id="L268" name="L268"></a> 268                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("adding TrayIcon that is already added");
<a id="L269" name="L269"></a> 269             <em class="brace">}</em>
<a id="L270" name="L270"></a> 270             icons.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(trayIcon);
<a id="L271" name="L271"></a> 271             <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = systemTray.<a href="../S/2450.html#L337" title="Defined at 337 in src/java/awt/SystemTray.java.">getTrayIcons</a>();
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273             trayIcon.<a href="../D/32871.html" title="Multiple defined in 2 places.">setID</a>(++currentIconID);
<a id="L274" name="L274"></a> 274         <em class="brace">}</em>
<a id="L275" name="L275"></a> 275         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L276" name="L276"></a> 276             trayIcon.<a href="../D/10976.html" title="Multiple defined in 35 places.">addNotify</a>();
<a id="L277" name="L277"></a> 277         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/2342.html#L33" title="Defined at 33 in src/java/awt/AWTException.java.">AWTException</a> e) <em class="brace">{</em>
<a id="L278" name="L278"></a> 278             icons.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(trayIcon);
<a id="L279" name="L279"></a> 279             <strong class="reserved">throw</strong> e;
<a id="L280" name="L280"></a> 280         <em class="brace">}</em>
<a id="L281" name="L281"></a> 281         <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("trayIcons", oldArray, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>);
<a id="L282" name="L282"></a> 282     <em class="brace">}</em>
<a id="L283" name="L283"></a> 283 
<div class="comment">
      Removes the specified <code>TrayIcon</code> from the
      <code>SystemTray</code>.
      <p> All icons added by the application are automatically
      removed from the <code>SystemTray</code> upon application exit
      and also when the desktop system tray becomes unavailable.
      </p><p> If <code>trayIcon</code> is <code>null</code> or was not
      added to the system tray, no exception is thrown and no action
      is performed.
      @param trayIcon the <code>TrayIcon</code> to be removed
      @see #add(TrayIcon)
      @see TrayIcon</p></div>
<a id="L300" name="L300"></a> 300     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a> trayIcon) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301         <strong class="reserved">if</strong> (trayIcon == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L302" name="L302"></a> 302             <strong class="reserved">return</strong>;
<a id="L303" name="L303"></a> 303         <em class="brace">}</em>
<a id="L304" name="L304"></a> 304         <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[] oldArray = <strong class="reserved">null</strong>, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = <strong class="reserved">null</strong>;
<a id="L305" name="L305"></a> 305         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L306" name="L306"></a> 306             oldArray = systemTray.<a href="../S/2450.html#L337" title="Defined at 337 in src/java/awt/SystemTray.java.">getTrayIcons</a>();
<a id="L307" name="L307"></a> 307             <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt; icons = (<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt;)AppContext.getAppContext().<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>.<strong class="reserved">class</strong>);
<a id="L308" name="L308"></a> 308             <em class="comment">// TrayIcon with no peer is not contained in the array.</em>
<a id="L309" name="L309"></a> 309             <strong class="reserved">if</strong> (icons == <strong class="reserved">null</strong> || !icons.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(trayIcon)) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310                 <strong class="reserved">return</strong>;
<a id="L311" name="L311"></a> 311             <em class="brace">}</em>
<a id="L312" name="L312"></a> 312             trayIcon.<a href="../D/30903.html" title="Multiple defined in 23 places.">removeNotify</a>();
<a id="L313" name="L313"></a> 313             <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = systemTray.<a href="../S/2450.html#L337" title="Defined at 337 in src/java/awt/SystemTray.java.">getTrayIcons</a>();
<a id="L314" name="L314"></a> 314         <em class="brace">}</em>
<a id="L315" name="L315"></a> 315         <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("trayIcons", oldArray, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>);
<a id="L316" name="L316"></a> 316     <em class="brace">}</em>
<a id="L317" name="L317"></a> 317 
<div class="comment">
      Returns an array of all icons added to the tray by this
      application.  You can't access the icons added by another
      application.  Some browsers partition applets in different
      code bases into separate contexts, and establish walls between
      these contexts.  In such a scenario, only the tray icons added
      from this context will be returned.
      <p> The returned array is a copy of the actual array and may be
      modified in any way without affecting the system tray.  To
      remove a <code>TrayIcon</code> from the
      <code>SystemTray</code>, use the {@link
      #remove(TrayIcon)} method.
      @return an array of all tray icons added to this tray, or an
      empty array if none has been added
      @see #add(TrayIcon)
      @see TrayIcon</p></div>
<a id="L337" name="L337"></a> 337     <strong class="reserved">public</strong> <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[] <a href="../R/19595.html" title="Multiple referred from 4 places.">getTrayIcons</a>() <em class="brace">{</em>
<a id="L338" name="L338"></a> 338         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt; icons = (<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>&gt;)AppContext.getAppContext().<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>.<strong class="reserved">class</strong>);
<a id="L339" name="L339"></a> 339         <strong class="reserved">if</strong> (icons != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340             <strong class="reserved">return</strong> (<a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[])icons.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(<strong class="reserved">new</strong> <a href="../S/2090.html#L86" title="Defined at 86 in src/java/awt/TrayIcon.java.">TrayIcon</a>[icons.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()]);
<a id="L341" name="L341"></a> 341         <em class="brace">}</em>
<a id="L342" name="L342"></a> 342         <strong class="reserved">return</strong> EMPTY_TRAY_ARRAY;
<a id="L343" name="L343"></a> 343     <em class="brace">}</em>
<a id="L344" name="L344"></a> 344 
<div class="comment">
      Returns the size, in pixels, of the space that a tray icon will
      occupy in the system tray.  Developers may use this methods to
      acquire the preferred size for the image property of a tray icon
      before it is created.  For convenience, there is a similar
      method {@link TrayIcon#getSize} in the <code>TrayIcon</code> class.
      @return the default size of a tray icon, in pixels
      @see TrayIcon#setImageAutoSize(boolean)
      @see java.awt.Image
      @see TrayIcon#getSize()</div>
<a id="L357" name="L357"></a> 357     <strong class="reserved">public</strong> <a href="../S/2344.html#L54" title="Defined at 54 in src/java/awt/Dimension.java.">Dimension</a> <a href="../R/19594.html" title="Multiple referred from 2 places.">getTrayIconSize</a>() <em class="brace">{</em>
<a id="L358" name="L358"></a> 358         <strong class="reserved">return</strong> peer.<a href="../D/23281.html" title="Multiple defined in 2 places.">getTrayIconSize</a>();
<a id="L359" name="L359"></a> 359     <em class="brace">}</em>
<a id="L360" name="L360"></a> 360 
<div class="comment">
      Adds a <code>PropertyChangeListener</code> to the list of listeners for the
      specific property. The following properties are currently supported:
      <table border="1" summary="SystemTray properties">
      <tbody><tr>
         <th>Property</th>
         <th>Description</th>
      </tr>
      <tr>
         <td><code>trayIcons</code></td>
         <td>The <code>SystemTray</code>'s array of <code>TrayIcon</code> objects.
             The array is accessed via the <a href="#L337" title="Defined at 337.">getTrayIcons</a> method.<br>
             This property is changed when a tray icon is added to (or removed
             from) the system tray.<br> For example, this property is changed
             when the system tray becomes unavailable on the desktop<br>
             and the tray icons are automatically removed.</td>
      </tr>
      <tr>
         <td><code>systemTray</code></td>
         <td>This property contains <code>SystemTray</code> instance when the system tray
             is available or <code>null</code> otherwise.<br> This property is changed
             when the system tray becomes available or unavailable on the desktop.<br>
             The property is accessed by the <a href="#L177" title="Defined at 177.">getSystemTray</a> method.</td>
      </tr>
      </tbody></table>
      <p>
      The <code>listener</code> listens to property changes only in this context.
      </p><p>
      If <code>listener</code> is <code>null</code>, no exception is thrown
      and no action is performed.
      @param propertyName the specified property
      @param listener the property change listener to be added
      @see #removePropertyChangeListener
      @see #getPropertyChangeListeners</p></div>
<a id="L399" name="L399"></a> 399     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/9914.html" title="Multiple referred from 169 places.">addPropertyChangeListener</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L400" name="L400"></a> 400                                                        <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a> listener)
<a id="L401" name="L401"></a> 401     <em class="brace">{</em>
<a id="L402" name="L402"></a> 402         <strong class="reserved">if</strong> (listener == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L403" name="L403"></a> 403             <strong class="reserved">return</strong>;
<a id="L404" name="L404"></a> 404         <em class="brace">}</em>
<a id="L405" name="L405"></a> 405         <a href="../S/2450.html#L481" title="Defined at 481 in src/java/awt/SystemTray.java.">getCurrentChangeSupport</a>().<a href="../D/11015.html" title="Multiple defined in 48 places.">addPropertyChangeListener</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, listener);
<a id="L406" name="L406"></a> 406     <em class="brace">}</em>
<a id="L407" name="L407"></a> 407 
<div class="comment">
      Removes a <code>PropertyChangeListener</code> from the listener list
      for a specific property.
      <p>
      The <code>PropertyChangeListener</code> must be from this context.
      </p><p>
      If <code>propertyName</code> or <code>listener</code> is <code>null</code> or invalid,
      no exception is thrown and no action is taken.
      @param propertyName the specified property
      @param listener the PropertyChangeListener to be removed
      @see #addPropertyChangeListener
      @see #getPropertyChangeListeners</p></div>
<a id="L423" name="L423"></a> 423     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/26051.html" title="Multiple referred from 157 places.">removePropertyChangeListener</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L424" name="L424"></a> 424                                                           <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a> listener)
<a id="L425" name="L425"></a> 425     <em class="brace">{</em>
<a id="L426" name="L426"></a> 426         <strong class="reserved">if</strong> (listener == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L427" name="L427"></a> 427             <strong class="reserved">return</strong>;
<a id="L428" name="L428"></a> 428         <em class="brace">}</em>
<a id="L429" name="L429"></a> 429         <a href="../S/2450.html#L481" title="Defined at 481 in src/java/awt/SystemTray.java.">getCurrentChangeSupport</a>().<a href="../D/30926.html" title="Multiple defined in 44 places.">removePropertyChangeListener</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, listener);
<a id="L430" name="L430"></a> 430     <em class="brace">}</em>
<a id="L431" name="L431"></a> 431 
<div class="comment">
      Returns an array of all the listeners that have been associated
      with the named property.
      <p>
      Only the listeners in this context are returned.
      @param propertyName the specified property
      @return all of the <code>PropertyChangeListener</code>s associated with
              the named property; if no such listeners have been added or
              if <code>propertyName</code> is <code>null</code> or invalid, an empty
              array is returned
      @see #addPropertyChangeListener
      @see #removePropertyChangeListener</p></div>
<a id="L447" name="L447"></a> 447     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a>[] <a href="../R/18511.html" title="Multiple referred from 20 places.">getPropertyChangeListeners</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448         <strong class="reserved">return</strong> <a href="../S/2450.html#L481" title="Defined at 481 in src/java/awt/SystemTray.java.">getCurrentChangeSupport</a>().<a href="../D/21724.html" title="Multiple defined in 19 places.">getPropertyChangeListeners</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>);
<a id="L449" name="L449"></a> 449     <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<a id="L451" name="L451"></a> 451 
<a id="L452" name="L452"></a> 452     <em class="comment">// ***************************************************************</em>
<a id="L453" name="L453"></a> 453     <em class="comment">// ***************************************************************</em>
<a id="L454" name="L454"></a> 454 
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Support for reporting bound property changes for Object properties.
      This method can be called when a bound property has changed and it will
      send the appropriate PropertyChangeEvent to any registered
      PropertyChangeListeners.
      @param propertyName the property whose value has changed
      @param oldValue the property's previous value
      @param newValue the property's new value</div>
<a id="L466" name="L466"></a> 466     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/14596.html" title="Multiple referred from 503 places.">firePropertyChange</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L467" name="L467"></a> 467                                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue)
<a id="L468" name="L468"></a> 468     <em class="brace">{</em>
<a id="L469" name="L469"></a> 469         <strong class="reserved">if</strong> (oldValue != <strong class="reserved">null</strong> &amp;&amp; newValue != <strong class="reserved">null</strong> &amp;&amp; oldValue.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(newValue)) <em class="brace">{</em>
<a id="L470" name="L470"></a> 470             <strong class="reserved">return</strong>;
<a id="L471" name="L471"></a> 471         <em class="brace">}</em>
<a id="L472" name="L472"></a> 472         <a href="../S/2450.html#L481" title="Defined at 481 in src/java/awt/SystemTray.java.">getCurrentChangeSupport</a>().<a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, oldValue, newValue);
<a id="L473" name="L473"></a> 473     <em class="brace">}</em>
<a id="L474" name="L474"></a> 474 
<div class="comment">
      Returns the current PropertyChangeSupport instance for the
      calling thread's context.
      @return this thread's context's PropertyChangeSupport</div>
<a id="L481" name="L481"></a> 481     <strong class="reserved">private</strong> <strong class="reserved">synchronized</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a> <a href="../R/15873.html" title="Multiple referred from 4 places.">getCurrentChangeSupport</a>() <em class="brace">{</em>
<a id="L482" name="L482"></a> 482         <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a> changeSupport =
<a id="L483" name="L483"></a> 483             (<a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a>)AppContext.getAppContext().<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a>.<strong class="reserved">class</strong>);
<a id="L484" name="L484"></a> 484 
<a id="L485" name="L485"></a> 485         <strong class="reserved">if</strong> (changeSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L486" name="L486"></a> 486             changeSupport = <strong class="reserved">new</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L487" name="L487"></a> 487             AppContext.getAppContext().<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a>.<strong class="reserved">class</strong>, changeSupport);
<a id="L488" name="L488"></a> 488         <em class="brace">}</em>
<a id="L489" name="L489"></a> 489         <strong class="reserved">return</strong> changeSupport;
<a id="L490" name="L490"></a> 490     <em class="brace">}</em>
<a id="L491" name="L491"></a> 491 
<a id="L492" name="L492"></a> 492     <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/9882.html" title="Multiple referred from 58 places.">addNotify</a>() <em class="brace">{</em>
<a id="L493" name="L493"></a> 493         <strong class="reserved">if</strong> (peer == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L494" name="L494"></a> 494             <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a> toolkit = <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../S/2437.html#L852" title="Defined at 852 in src/java/awt/Toolkit.java.">getDefaultToolkit</a>();
<a id="L495" name="L495"></a> 495             <strong class="reserved">if</strong> (toolkit <strong class="reserved">instanceof</strong> SunToolkit) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496                 peer = ((SunToolkit)<a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../S/2437.html#L852" title="Defined at 852 in src/java/awt/Toolkit.java.">getDefaultToolkit</a>()).createSystemTray(<strong class="reserved">this</strong>);
<a id="L497" name="L497"></a> 497             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (toolkit <strong class="reserved">instanceof</strong> HeadlessToolkit) <em class="brace">{</em>
<a id="L498" name="L498"></a> 498                 peer = ((HeadlessToolkit)<a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../S/2437.html#L852" title="Defined at 852 in src/java/awt/Toolkit.java.">getDefaultToolkit</a>()).createSystemTray(<strong class="reserved">this</strong>);
<a id="L499" name="L499"></a> 499             <em class="brace">}</em>
<a id="L500" name="L500"></a> 500         <em class="brace">}</em>
<a id="L501" name="L501"></a> 501     <em class="brace">}</em>
<a id="L502" name="L502"></a> 502 
<a id="L503" name="L503"></a> 503     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11380.html" title="Multiple referred from 2 places.">checkSystemTrayAllowed</a>() <em class="brace">{</em>
<a id="L504" name="L504"></a> 504         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L505" name="L505"></a> 505         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506             security.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SecurityConstants.AWT.ACCESS_SYSTEM_TRAY_PERMISSION);
<a id="L507" name="L507"></a> 507         <em class="brace">}</em>
<a id="L508" name="L508"></a> 508     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/20724.html" title="Multiple referred from 2 places.">initializeSystemTrayIfNeeded</a>() <em class="brace">{</em>
<a id="L511" name="L511"></a> 511         <strong class="reserved">synchronized</strong> (<a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512             <strong class="reserved">if</strong> (systemTray == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L513" name="L513"></a> 513                 systemTray = <strong class="reserved">new</strong> <a href="../S/2450.html#L123" title="Defined at 123 in src/java/awt/SystemTray.java.">SystemTray</a>();
<a id="L514" name="L514"></a> 514             <em class="brace">}</em>
<a id="L515" name="L515"></a> 515         <em class="brace">}</em>
<a id="L516" name="L516"></a> 516     <em class="brace">}</em>
<a id="L517" name="L517"></a> 517 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L177">[^]</a><a href="#L510">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L183">[^]</a><a href="#L2043">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L183" title="Defined at 183.">normalizeDocument</a></li>
<li><a href="#L271" title="Defined at 271.">normalizeNode</a></li>
<li><a href="#L689" title="Defined at 689.">createGrammarPool</a></li>
<li><a href="#L720" title="Defined at 720.">expandEntityRef</a></li>
<li><a href="#L733" title="Defined at 733.">namespaceFixUp</a></li>
<li><a href="#L1052" title="Defined at 1052.">addNamespaceDecl</a></li>
<li><a href="#L1080" title="Defined at 1080.">isCDataWF</a></li>
<li><a href="#L1180" title="Defined at 1180.">isXMLCharWF</a></li>
<li><a href="#L1243" title="Defined at 1243.">isCommentWF</a></li>
<li><a href="#L1316" title="Defined at 1316.">isAttrValueWF</a></li>
<li><a href="#L1364" title="Defined at 1364.">reportDOMError</a></li>
<li><a href="#L1381" title="Defined at 1381.">updateQName</a></li>
<li><a href="#L1414" title="Defined at 1414.">normalizeAttributeValue</a></li>
<li><a href="#L1459" title="Defined at 1459.">setAttributes</a></li>
<li><a href="#L1483" title="Defined at 1483.">addAttribute</a></li>
<li><a href="#L1512" title="Defined at 1512.">removeAllAttributes</a></li>
<li><a href="#L1517" title="Defined at 1517.">removeAttributeAt</a></li>
<li><a href="#L1522" title="Defined at 1522.">getLength</a></li>
<li><a href="#L1527" title="Defined at 1527.">getIndex</a></li>
<li><a href="#L1532" title="Defined at 1532.">getIndex</a></li>
<li><a href="#L1537" title="Defined at 1537.">setName</a></li>
<li><a href="#L1541" title="Defined at 1541.">getName</a></li>
<li><a href="#L1547" title="Defined at 1547.">getPrefix</a></li>
<li><a href="#L1553" title="Defined at 1553.">getURI</a></li>
<li><a href="#L1559" title="Defined at 1559.">getLocalName</a></li>
<li><a href="#L1565" title="Defined at 1565.">getQName</a></li>
<li><a href="#L1570" title="Defined at 1570.">getQualifiedName</a></li>
<li><a href="#L1575" title="Defined at 1575.">setType</a></li>
<li><a href="#L1580" title="Defined at 1580.">getType</a></li>
<li><a href="#L1585" title="Defined at 1585.">getType</a></li>
<li><a href="#L1590" title="Defined at 1590.">getType</a></li>
<li><a href="#L1595" title="Defined at 1595.">setValue</a></li>
<li><a href="#L1609" title="Defined at 1609.">setValue</a></li>
<li><a href="#L1613" title="Defined at 1613.">getValue</a></li>
<li><a href="#L1619" title="Defined at 1619.">getValue</a></li>
<li><a href="#L1625" title="Defined at 1625.">getValue</a></li>
<li><a href="#L1634" title="Defined at 1634.">setNonNormalizedValue</a></li>
<li><a href="#L1640" title="Defined at 1640.">getNonNormalizedValue</a></li>
<li><a href="#L1646" title="Defined at 1646.">setSpecified</a></li>
<li><a href="#L1651" title="Defined at 1651.">isSpecified</a></li>
<li><a href="#L1655" title="Defined at 1655.">getAugmentations</a></li>
<li><a href="#L1659" title="Defined at 1659.">getAugmentations</a></li>
<li><a href="#L1664" title="Defined at 1664.">getAugmentations</a></li>
<li><a href="#L1675" title="Defined at 1675.">setAugmentations</a></li>
<li><a href="#L1711" title="Defined at 1711.">startDocument</a></li>
<li><a href="#L1731" title="Defined at 1731.">xmlDecl</a></li>
<li><a href="#L1749" title="Defined at 1749.">doctypeDecl</a></li>
<li><a href="#L1762" title="Defined at 1762.">comment</a></li>
<li><a href="#L1783" title="Defined at 1783.">processingInstruction</a></li>
<li><a href="#L1797" title="Defined at 1797.">startElement</a></li>
<li><a href="#L1861" title="Defined at 1861.">emptyElement</a></li>
<li><a href="#L1888" title="Defined at 1888.">startGeneralEntity</a></li>
<li><a href="#L1912" title="Defined at 1912.">textDecl</a></li>
<li><a href="#L1927" title="Defined at 1927.">endGeneralEntity</a></li>
<li><a href="#L1939" title="Defined at 1939.">characters</a></li>
<li><a href="#L1956" title="Defined at 1956.">ignorableWhitespace</a></li>
<li><a href="#L1969" title="Defined at 1969.">endElement</a></li>
<li><a href="#L2011" title="Defined at 2011.">startCDATA</a></li>
<li><a href="#L2022" title="Defined at 2022.">endCDATA</a></li>
<li><a href="#L2033" title="Defined at 2033.">endDocument</a></li>
<li><a href="#L2038" title="Defined at 2038.">setDocumentSource</a></li>
<li><a href="#L2043" title="Defined at 2043.">getDocumentSource</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2002,2004, 2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.dom;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> java.io.IOException;
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.io.StringReader;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.Vector;
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.Constants;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.RevalidationHandler;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dtd.DTDGrammar;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDDescription;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dv.XSSimpleType;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.util.SimpleLocator;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.parsers.XMLGrammarPreparser;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.AugmentationsImpl;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.NamespaceSupport;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.SymbolTable;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.XML11Char;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.XMLChar;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.XMLGrammarPoolImpl;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.XMLSymbols;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.Augmentations;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.NamespaceContext;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.QName;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLAttributes;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLDocumentHandler;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLLocator;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLResourceIdentifier;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLString;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XNIException;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarDescription;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarPool;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLComponent;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLDocumentSource;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLInputSource;
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.AttributePSVI;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.ElementPSVI;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.XSTypeDefinition;
<a id="L61" name="L61"></a>  61 <strong class="reserved">import</strong> org.w3c.dom.Attr;
<a id="L62" name="L62"></a>  62 <strong class="reserved">import</strong> org.w3c.dom.Comment;
<a id="L63" name="L63"></a>  63 <strong class="reserved">import</strong> org.w3c.dom.DOMError;
<a id="L64" name="L64"></a>  64 <strong class="reserved">import</strong> org.w3c.dom.DOMErrorHandler;
<a id="L65" name="L65"></a>  65 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L66" name="L66"></a>  66 <strong class="reserved">import</strong> org.w3c.dom.DocumentType;
<a id="L67" name="L67"></a>  67 <strong class="reserved">import</strong> org.w3c.dom.Element;
<a id="L68" name="L68"></a>  68 <strong class="reserved">import</strong> org.w3c.dom.Entity;
<a id="L69" name="L69"></a>  69 <strong class="reserved">import</strong> org.w3c.dom.NamedNodeMap;
<a id="L70" name="L70"></a>  70 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L71" name="L71"></a>  71 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L72" name="L72"></a>  72 <strong class="reserved">import</strong> org.w3c.dom.ProcessingInstruction;
<a id="L73" name="L73"></a>  73 <strong class="reserved">import</strong> org.w3c.dom.Text;
<div class="comment">
  This class adds implementation for normalizeDocument method.
  It acts as if the document was going through a save and load cycle, putting
  the document in a "normal" form. The actual result depends on the features being set
  and governing what operations actually take place. See setNormalizationFeature for details.
  Noticeably this method normalizes Text nodes, makes the document "namespace wellformed",
  according to the algorithm described below in pseudo code, by adding missing namespace
  declaration attributes and adding or changing namespace prefixes, updates the replacement
  tree of EntityReference nodes, normalizes attribute values, etc.
  Mutation events, when supported, are generated to reflect the changes occuring on the
  document.
  See Namespace normalization for details on how namespace declaration attributes and prefixes
  are normalized.
  NOTE: There is an initial support for DOM revalidation with XML Schema as a grammar.
  The tree might not be validated correctly if entityReferences, CDATA sections are
  present in the tree. The PSVI information is not exposed, normalized data (including element
  default content is not available).
  @xerces.experimental
  @author Elena Litani, IBM
  @author Neeraj Bajaj, Sun Microsystems, inc.
  @version $Id: DOMNormalizer.java,v 1.9 2010-11-01 04:39:38 joehw Exp $</div>
<a id="L99" name="L99"></a>  99 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1905.html" title="Multiple referred from 14 places.">DOMNormalizer</a> <strong class="reserved">implements</strong> <a href="../S/5518.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/xni/XMLDocumentHandler.java.">XMLDocumentHandler</a> <em class="brace">{</em>
<a id="L100" name="L100"></a> 100 
<a id="L101" name="L101"></a> 101     <em class="comment">//</em>
<a id="L102" name="L102"></a> 102     <em class="comment">// constants</em>
<a id="L103" name="L103"></a> 103     <em class="comment">//</em>
<div class="comment">
     /** Debug normalize document*/</div>
<a id="L105" name="L105"></a> 105     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> DEBUG_ND = <strong class="reserved">false</strong>;
<div class="comment">
     /** Debug namespace fix up algorithm*/</div>
<a id="L107" name="L107"></a> 107     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> DEBUG = <strong class="reserved">false</strong>;
<div class="comment">
     /** Debug document handler events */</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> DEBUG_EVENTS = <strong class="reserved">false</strong>;
<a id="L110" name="L110"></a> 110 
<div class="comment">
     /** prefix added by namespace fixup algorithm should follow a pattern "NS" + index*/</div>
<a id="L112" name="L112"></a> 112     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> PREFIX = "NS";
<a id="L113" name="L113"></a> 113 
<a id="L114" name="L114"></a> 114     <em class="comment">//</em>
<a id="L115" name="L115"></a> 115     <em class="comment">// Data</em>
<a id="L116" name="L116"></a> 116     <em class="comment">//</em>
<a id="L117" name="L117"></a> 117     <strong class="reserved">protected</strong> <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a> fConfiguration = <strong class="reserved">null</strong>;
<a id="L118" name="L118"></a> 118     <strong class="reserved">protected</strong> <a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a> fDocument = <strong class="reserved">null</strong>;
<a id="L119" name="L119"></a> 119     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/5428.html#L1450" title="Defined at 1450 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">XMLAttributesProxy</a> fAttrProxy = <strong class="reserved">new</strong> <a href="../S/5428.html#L1450" title="Defined at 1450 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">XMLAttributesProxy</a>();
<a id="L120" name="L120"></a> 120     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> fQName = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L121" name="L121"></a> 121 
<div class="comment">
     /** Validation handler represents validator instance. */</div>
<a id="L123" name="L123"></a> 123     <strong class="reserved">protected</strong> <a href="../S/5034.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/RevalidationHandler.java.">RevalidationHandler</a> fValidationHandler;
<a id="L124" name="L124"></a> 124 
<div class="comment">
     /** symbol table */</div>
<a id="L126" name="L126"></a> 126     <strong class="reserved">protected</strong> <a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> fSymbolTable;
<div class="comment">
     /** error handler. may be null. */</div>
<a id="L128" name="L128"></a> 128     <strong class="reserved">protected</strong> <a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a> fErrorHandler;
<a id="L129" name="L129"></a> 129 
<div class="comment">
      Cached <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a> impl.
      The same object is re-used to report multiple errors.</div>
<a id="L134" name="L134"></a> 134     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a> fError = <strong class="reserved">new</strong> <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a>();
<a id="L135" name="L135"></a> 135 
<a id="L136" name="L136"></a> 136     <em class="comment">// Validation against namespace aware grammar</em>
<a id="L137" name="L137"></a> 137     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fNamespaceValidation = <strong class="reserved">false</strong>;
<a id="L138" name="L138"></a> 138 
<a id="L139" name="L139"></a> 139     <em class="comment">// Update PSVI information in the tree</em>
<a id="L140" name="L140"></a> 140     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fPSVI = <strong class="reserved">false</strong>;
<a id="L141" name="L141"></a> 141 
<div class="comment">
     /** The namespace context of this document: stores namespaces in scope */</div>
<a id="L143" name="L143"></a> 143     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a> fNamespaceContext = <strong class="reserved">new</strong> <a href="../D/5978.html" title="Multiple defined in 2 places.">NamespaceSupport</a>();
<a id="L144" name="L144"></a> 144 
<div class="comment">
     /** Stores all namespace bindings on the current element */</div>
<a id="L146" name="L146"></a> 146     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a> fLocalNSBinder = <strong class="reserved">new</strong> <a href="../D/5978.html" title="Multiple defined in 2 places.">NamespaceSupport</a>();
<a id="L147" name="L147"></a> 147 
<div class="comment">
     /** list of attributes */</div>
<a id="L149" name="L149"></a> 149     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> fAttributeList = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>(5);
<a id="L150" name="L150"></a> 150 
<div class="comment">
     /** DOM Locator -  for namespace fixup algorithm */</div>
<a id="L152" name="L152"></a> 152     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a> fLocator = <strong class="reserved">new</strong> <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a>();
<a id="L153" name="L153"></a> 153 
<div class="comment">
     /** for setting the PSVI */</div>
<a id="L155" name="L155"></a> 155     <strong class="reserved">protected</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> fCurrentNode = <strong class="reserved">null</strong>;
<a id="L156" name="L156"></a> 156     <strong class="reserved">private</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> fAttrQName = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L157" name="L157"></a> 157 
<a id="L158" name="L158"></a> 158     <em class="comment">// attribute value normalization</em>
<a id="L159" name="L159"></a> 159     <strong class="reserved">final</strong> <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> fNormalizedValue = <strong class="reserved">new</strong> <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a>(<strong class="reserved">new</strong> <strong class="reserved">char</strong>[16], 0, 0);
<a id="L160" name="L160"></a> 160 
<div class="comment">
      If the user stops the process, this exception will be thrown.</div>
<a id="L164" name="L164"></a> 164     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a> <a href="../D/10517.html" title="Multiple defined in 19 places.">abort</a> = <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>();
<a id="L165" name="L165"></a> 165 
<a id="L166" name="L166"></a> 166     <em class="comment">//DTD validator</em>
<a id="L167" name="L167"></a> 167     <strong class="reserved">private</strong> <a href="../S/5160.html#L88" title="Defined at 88 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">XMLDTDValidator</a> fDTDValidator;
<a id="L168" name="L168"></a> 168 
<a id="L169" name="L169"></a> 169     <em class="comment">//Check if element content is all "ignorable whitespace"</em>
<a id="L170" name="L170"></a> 170     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> allWhitespace = <strong class="reserved">false</strong>;
<a id="L171" name="L171"></a> 171 
<a id="L172" name="L172"></a> 172     <em class="comment">// Constructor</em>
<a id="L173" name="L173"></a> 173     <em class="comment">//</em>
<a id="L174" name="L174"></a> 174 
<a id="L175" name="L175"></a> 175     <strong class="reserved">public</strong> DOMNormalizer()<em class="brace">{</em><em class="brace">}</em>
<a id="L176" name="L176"></a> 176 
<a id="L177" name="L177"></a> 177 
<a id="L178" name="L178"></a> 178 
<div class="comment">
      Normalizes document.
      Note: reset() must be called before this method.</div>
<a id="L183" name="L183"></a> 183         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5445.html#L1158" title="Referred from 1158 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">normalizeDocument</a>(<a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>, <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a> <a href="../D/13217.html" title="Multiple defined in 5 places.">config</a>) <em class="brace">{</em>
<a id="L184" name="L184"></a> 184 
<a id="L185" name="L185"></a> 185                 fDocument = <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>;
<a id="L186" name="L186"></a> 186                 fConfiguration = <a href="../D/13217.html" title="Multiple defined in 5 places.">config</a>;
<a id="L187" name="L187"></a> 187 
<a id="L188" name="L188"></a> 188                 <em class="comment">// intialize and reset DOMNormalizer component</em>
<a id="L189" name="L189"></a> 189                 <em class="comment">//</em>
<a id="L190" name="L190"></a> 190                 fSymbolTable = (<a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a>) fConfiguration.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.SYMBOL_TABLE);
<a id="L191" name="L191"></a> 191                 <em class="comment">// reset namespace context</em>
<a id="L192" name="L192"></a> 192                 fNamespaceContext.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L193" name="L193"></a> 193                 fNamespaceContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING, <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING);
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.VALIDATE) != 0) <em class="brace">{</em>
<a id="L196" name="L196"></a> 196             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> schemaLang = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)fConfiguration.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.JAXP_SCHEMA_LANGUAGE);
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198             <strong class="reserved">if</strong>(schemaLang != <strong class="reserved">null</strong> &amp;&amp; schemaLang.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.NS_XMLSCHEMA)) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199                         fValidationHandler =
<a id="L200" name="L200"></a> 200                                 <a href="../S/5467.html#L58" title="Defined at 58 in src/com/sun/org/apache/xerces/internal/dom/CoreDOMImplementationImpl.java.">CoreDOMImplementationImpl</a>.<a href="../D/34585.html" title="Multiple defined in 2 places.">singleton</a>.<a href="../S/5467.html#L404" title="Defined at 404 in src/com/sun/org/apache/xerces/internal/dom/CoreDOMImplementationImpl.java.">getValidator</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_SCHEMA);
<a id="L201" name="L201"></a> 201                 fConfiguration.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.SCHEMA, <strong class="reserved">true</strong>);
<a id="L202" name="L202"></a> 202                 fConfiguration.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.SCHEMA_FULL_CHECKING, <strong class="reserved">true</strong>);
<a id="L203" name="L203"></a> 203                 <em class="comment">// report fatal error on DOM Level 1 nodes</em>
<a id="L204" name="L204"></a> 204                 fNamespaceValidation = <strong class="reserved">true</strong>;
<a id="L205" name="L205"></a> 205 
<a id="L206" name="L206"></a> 206                 <em class="comment">// check if we need to fill in PSVI</em>
<a id="L207" name="L207"></a> 207                 fPSVI = ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.PSVI) !=0)?<strong class="reserved">true</strong>:<strong class="reserved">false</strong>;
<a id="L208" name="L208"></a> 208             <em class="brace">}</em>
<a id="L209" name="L209"></a> 209 
<a id="L210" name="L210"></a> 210                         fConfiguration.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.XERCES_VALIDATION, <strong class="reserved">true</strong>);
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212             <em class="comment">// reset ID table</em>
<a id="L213" name="L213"></a> 213             fDocument.<a href="../S/5445.html#L1970" title="Defined at 1970 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">clearIdentifiers</a>();
<a id="L214" name="L214"></a> 214 
<a id="L215" name="L215"></a> 215             <strong class="reserved">if</strong>(fValidationHandler != <strong class="reserved">null</strong>)
<a id="L216" name="L216"></a> 216             <em class="comment">// reset schema validator</em>
<a id="L217" name="L217"></a> 217                 ((<a href="../S/5506.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLComponent.java.">XMLComponent</a>) fValidationHandler).<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>(fConfiguration);
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219                 <em class="brace">}</em>
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221                 fErrorHandler = (<a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a>) fConfiguration.<a href="../D/21364.html" title="Multiple defined in 20 places.">getParameter</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.DOM_ERROR_HANDLER);
<a id="L222" name="L222"></a> 222                 <strong class="reserved">if</strong> (fValidationHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L223" name="L223"></a> 223                         fValidationHandler.<a href="../D/32498.html" title="Multiple defined in 21 places.">setDocumentHandler</a>(<strong class="reserved">this</strong>);
<a id="L224" name="L224"></a> 224                         fValidationHandler.<a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>(
<a id="L225" name="L225"></a> 225                     <strong class="reserved">new</strong> <a href="../S/5055.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/impl/xs/util/SimpleLocator.java.">SimpleLocator</a>(fDocument.fDocumentURI, fDocument.fDocumentURI,
<a id="L226" name="L226"></a> 226                                                 -1, -1 ), fDocument.<a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, fNamespaceContext, <strong class="reserved">null</strong>);
<a id="L227" name="L227"></a> 227 
<a id="L228" name="L228"></a> 228                 <em class="brace">}</em>
<a id="L229" name="L229"></a> 229                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L230" name="L230"></a> 230                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> kid, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L231" name="L231"></a> 231                         <strong class="reserved">for</strong> (kid = fDocument.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>(); kid != <strong class="reserved">null</strong>; kid = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L232" name="L232"></a> 232                                 <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = kid.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L233" name="L233"></a> 233                                 kid = <a href="../S/5428.html#L271" title="Defined at 271 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">normalizeNode</a>(kid);
<a id="L234" name="L234"></a> 234                                 <strong class="reserved">if</strong> (kid != <strong class="reserved">null</strong>) <em class="brace">{</em> <em class="comment">// don't advance</em>
<a id="L235" name="L235"></a> 235                                         <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = kid;
<a id="L236" name="L236"></a> 236                                 <em class="brace">}</em>
<a id="L237" name="L237"></a> 237                         <em class="brace">}</em>
<a id="L238" name="L238"></a> 238 
<a id="L239" name="L239"></a> 239                         <em class="comment">// release resources</em>
<a id="L240" name="L240"></a> 240                         <strong class="reserved">if</strong> (fValidationHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241                                 fValidationHandler.<a href="../D/15443.html" title="Multiple defined in 65 places.">endDocument</a>(<strong class="reserved">null</strong>);
<a id="L242" name="L242"></a> 242                                 <a href="../S/5467.html#L58" title="Defined at 58 in src/com/sun/org/apache/xerces/internal/dom/CoreDOMImplementationImpl.java.">CoreDOMImplementationImpl</a>.<a href="../D/34585.html" title="Multiple defined in 2 places.">singleton</a>.<a href="../S/5467.html#L439" title="Defined at 439 in src/com/sun/org/apache/xerces/internal/dom/CoreDOMImplementationImpl.java.">releaseValidator</a>(
<a id="L243" name="L243"></a> 243                                         <a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_SCHEMA, fValidationHandler);
<a id="L244" name="L244"></a> 244                                 fValidationHandler = <strong class="reserved">null</strong>;
<a id="L245" name="L245"></a> 245                         <em class="brace">}</em>
<a id="L246" name="L246"></a> 246                 <em class="brace">}</em>
<a id="L247" name="L247"></a> 247                 <strong class="reserved">catch</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a> e) <em class="brace">{</em>
<a id="L248" name="L248"></a> 248             <strong class="reserved">if</strong>( e==<a href="../D/10517.html" title="Multiple defined in 19 places.">abort</a> )
<a id="L249" name="L249"></a> 249                 <strong class="reserved">return</strong>; <em class="comment">// processing aborted by the user</em>
<a id="L250" name="L250"></a> 250             <strong class="reserved">throw</strong> e;    <em class="comment">// otherwise re-throw.</em>
<a id="L251" name="L251"></a> 251                 <em class="brace">}</em>
<a id="L252" name="L252"></a> 252 
<a id="L253" name="L253"></a> 253         <em class="brace">}</em>
<a id="L254" name="L254"></a> 254 
<a id="L255" name="L255"></a> 255 
<div class="comment">
      This method acts as if the document was going through a save
      and load cycle, putting the document in a "normal" form. The actual result
      depends on the features being set and governing what operations actually
      take place. See setNormalizationFeature for details. Noticeably this method
      normalizes Text nodes, makes the document "namespace wellformed",
      according to the algorithm described below in pseudo code, by adding missing
      namespace declaration attributes and adding or changing namespace prefixes, updates
      the replacement tree of EntityReference nodes,normalizes attribute values, etc.
      @param node   Modified node or null. If node is returned, we need
                    to normalize again starting on the node returned.
      @return  the normalized Node</div>
<a id="L271" name="L271"></a> 271     <strong class="reserved">protected</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/23790.html" title="Multiple referred from 2 places.">normalizeNode</a> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)<em class="brace">{</em>
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273         <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>();
<a id="L274" name="L274"></a> 274         <strong class="reserved">boolean</strong> wellformed;
<a id="L275" name="L275"></a> 275         fLocator.fRelatedNode=<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L276" name="L276"></a> 276 
<a id="L277" name="L277"></a> 277         <strong class="reserved">switch</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L278" name="L278"></a> 278         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_TYPE_NODE: <em class="brace">{</em>
<a id="L279" name="L279"></a> 279                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L280" name="L280"></a> 280                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;normalizeNode:{doctype}");
<a id="L281" name="L281"></a> 281                 <em class="brace">}</em>
<a id="L282" name="L282"></a> 282                 <a href="../S/5444.html#L54" title="Defined at 54 in src/com/sun/org/apache/xerces/internal/dom/DocumentTypeImpl.java.">DocumentTypeImpl</a> docType = (<a href="../S/5444.html#L54" title="Defined at 54 in src/com/sun/org/apache/xerces/internal/dom/DocumentTypeImpl.java.">DocumentTypeImpl</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L283" name="L283"></a> 283                 fDTDValidator = (<a href="../S/5160.html#L88" title="Defined at 88 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">XMLDTDValidator</a>)<a href="../S/5467.html#L58" title="Defined at 58 in src/com/sun/org/apache/xerces/internal/dom/CoreDOMImplementationImpl.java.">CoreDOMImplementationImpl</a>.<a href="../D/34585.html" title="Multiple defined in 2 places.">singleton</a>.<a href="../S/5467.html#L404" title="Defined at 404 in src/com/sun/org/apache/xerces/internal/dom/CoreDOMImplementationImpl.java.">getValidator</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_DTD);
<a id="L284" name="L284"></a> 284                 fDTDValidator.<a href="../D/32498.html" title="Multiple defined in 21 places.">setDocumentHandler</a>(<strong class="reserved">this</strong>);
<a id="L285" name="L285"></a> 285                 fConfiguration.<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XMLGRAMMAR_POOL_PROPERTY, <a href="../S/5428.html#L689" title="Defined at 689 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">createGrammarPool</a>(docType));
<a id="L286" name="L286"></a> 286                 fDTDValidator.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>(fConfiguration);
<a id="L287" name="L287"></a> 287                 fDTDValidator.<a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>(
<a id="L288" name="L288"></a> 288                         <strong class="reserved">new</strong> <a href="../S/5055.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/impl/xs/util/SimpleLocator.java.">SimpleLocator</a>(fDocument.fDocumentURI, fDocument.fDocumentURI,
<a id="L289" name="L289"></a> 289                             -1, -1 ), fDocument.<a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, fNamespaceContext, <strong class="reserved">null</strong>);
<a id="L290" name="L290"></a> 290                 fDTDValidator.<a href="../D/15103.html" title="Multiple defined in 21 places.">doctypeDecl</a>(docType.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), docType.<a href="../D/21781.html" title="Multiple defined in 41 places.">getPublicId</a>(), docType.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>(), <strong class="reserved">null</strong>);
<a id="L291" name="L291"></a> 291                 <em class="comment">//REVISIT: well-formness encoding info</em>
<a id="L292" name="L292"></a> 292                 <strong class="reserved">break</strong>;
<a id="L293" name="L293"></a> 293             <em class="brace">}</em>
<a id="L294" name="L294"></a> 294 
<a id="L295" name="L295"></a> 295         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE: <em class="brace">{</em>
<a id="L296" name="L296"></a> 296                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L297" name="L297"></a> 297                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;normalizeNode:{element} "+<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>());
<a id="L298" name="L298"></a> 298                 <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300                 <em class="comment">//do the name check only when version of the document was changed &amp;</em>
<a id="L301" name="L301"></a> 301                 <em class="comment">//application has set the value of well-formed features to true</em>
<a id="L302" name="L302"></a> 302                 <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L303" name="L303"></a> 303                     <strong class="reserved">if</strong> ( ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0) &amp;&amp;
<a id="L304" name="L304"></a> 304                             fDocument.<a href="../S/5445.html#L2606" title="Defined at 2606 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLVersionChanged</a>())<em class="brace">{</em>
<a id="L305" name="L305"></a> 305                         <strong class="reserved">if</strong> (fNamespaceValidation)<em class="brace">{</em>
<a id="L306" name="L306"></a> 306                             wellformed = <a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a>.<a href="../D/26458.html" title="Multiple defined in 2 places.">isValidQName</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>() , <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(), fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>()) ;
<a id="L307" name="L307"></a> 307                         <em class="brace">}</em>
<a id="L308" name="L308"></a> 308                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L309" name="L309"></a> 309                             wellformed = <a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a>.<a href="../S/5445.html#L2209" title="Defined at 2209 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLName</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>() , fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L310" name="L310"></a> 310                         <em class="brace">}</em>
<a id="L311" name="L311"></a> 311                         <strong class="reserved">if</strong> (!wellformed)<em class="brace">{</em>
<a id="L312" name="L312"></a> 312                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L313" name="L313"></a> 313                                     <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L314" name="L314"></a> 314                                     "wf-invalid-character-in-node-name",
<a id="L315" name="L315"></a> 315                                     <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>"Element", <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L316" name="L316"></a> 316                             <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L317" name="L317"></a> 317                             "wf-invalid-character-in-node-name");
<a id="L318" name="L318"></a> 318                         <em class="brace">}</em>
<a id="L319" name="L319"></a> 319                     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320                 <em class="brace">}</em>
<a id="L321" name="L321"></a> 321                 <em class="comment">// push namespace context</em>
<a id="L322" name="L322"></a> 322                 fNamespaceContext.<a href="../D/29939.html" title="Multiple defined in 10 places.">pushContext</a>();
<a id="L323" name="L323"></a> 323                 fLocalNSBinder.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L324" name="L324"></a> 324 
<a id="L325" name="L325"></a> 325                 <a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a> elem = (<a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L326" name="L326"></a> 326                 <strong class="reserved">if</strong> (elem.<a href="../D/27943.html" title="Multiple defined in 2 places.">needsSyncChildren</a>()) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327                     elem.<a href="../D/35168.html" title="Multiple defined in 14 places.">synchronizeChildren</a>();
<a id="L328" name="L328"></a> 328                 <em class="brace">}</em>
<a id="L329" name="L329"></a> 329                 <a href="../D/579.html" title="Multiple defined in 2 places.">AttributeMap</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> = (elem.<a href="../D/24061.html" title="Multiple defined in 12 places.">hasAttributes</a>()) ? (<a href="../D/579.html" title="Multiple defined in 2 places.">AttributeMap</a>) elem.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>() : <strong class="reserved">null</strong>;
<a id="L330" name="L330"></a> 330 
<a id="L331" name="L331"></a> 331                 <em class="comment">// fix namespaces and remove default attributes</em>
<a id="L332" name="L332"></a> 332                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.NAMESPACES) !=0) <em class="brace">{</em>
<a id="L333" name="L333"></a> 333                     <em class="comment">// fix namespaces</em>
<a id="L334" name="L334"></a> 334                     <em class="comment">// normalize attribute values</em>
<a id="L335" name="L335"></a> 335                     <em class="comment">// remove default attributes</em>
<a id="L336" name="L336"></a> 336                     <a href="../S/5428.html#L733" title="Defined at 733 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">namespaceFixUp</a>(elem, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L337" name="L337"></a> 337 
<a id="L338" name="L338"></a> 338                     <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.NSDECL) == 0 &amp;&amp; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L339" name="L339"></a> 339                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); ++i) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340                             <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> att = (<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>)<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(i);
<a id="L341" name="L341"></a> 341                             <strong class="reserved">if</strong> (<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.PREFIX_XMLNS.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(att.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>()) ||
<a id="L342" name="L342"></a> 342                                 <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.PREFIX_XMLNS.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(att.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>())) <em class="brace">{</em>
<a id="L343" name="L343"></a> 343                                 elem.<a href="../D/30713.html" title="Multiple defined in 6 places.">removeAttributeNode</a>(att);
<a id="L344" name="L344"></a> 344                                 --i;
<a id="L345" name="L345"></a> 345                             <em class="brace">}</em>
<a id="L346" name="L346"></a> 346                         <em class="brace">}</em>
<a id="L347" name="L347"></a> 347                     <em class="brace">}</em>
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L350" name="L350"></a> 350                     <strong class="reserved">if</strong> ( <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>!=<strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L351" name="L351"></a> 351                         <strong class="reserved">for</strong> ( <strong class="reserved">int</strong> i=0; i&lt;<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); ++i ) <em class="brace">{</em>
<a id="L352" name="L352"></a> 352                             <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>)<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L353" name="L353"></a> 353                             <em class="comment">//removeDefault(attr, attributes);</em>
<a id="L354" name="L354"></a> 354                             <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>();
<a id="L355" name="L355"></a> 355                             <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0))<em class="brace">{</em>
<a id="L356" name="L356"></a> 356                                     <a href="../S/5428.html#L1316" title="Defined at 1316 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isAttrValueWF</a>(fErrorHandler, fError, fLocator, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, (<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>, <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(), fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L357" name="L357"></a> 357                                 <strong class="reserved">if</strong> (fDocument.<a href="../S/5445.html#L2606" title="Defined at 2606 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLVersionChanged</a>())<em class="brace">{</em>
<a id="L358" name="L358"></a> 358                                     wellformed=<a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a>.<a href="../S/5445.html#L2209" title="Defined at 2209 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLName</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>() , fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L359" name="L359"></a> 359                                     <strong class="reserved">if</strong> (!wellformed)<em class="brace">{</em>
<a id="L360" name="L360"></a> 360                                                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L361" name="L361"></a> 361                                                               <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L362" name="L362"></a> 362                                                               "wf-invalid-character-in-node-name",
<a id="L363" name="L363"></a> 363                                                                <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>"Attr",<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L364" name="L364"></a> 364                                                             <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L365" name="L365"></a> 365                                                                 "wf-invalid-character-in-node-name");
<a id="L366" name="L366"></a> 366                                     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367                                 <em class="brace">}</em>
<a id="L368" name="L368"></a> 368                             <em class="brace">}</em>
<a id="L369" name="L369"></a> 369                         <em class="brace">}</em>
<a id="L370" name="L370"></a> 370                     <em class="brace">}</em>
<a id="L371" name="L371"></a> 371                 <em class="brace">}</em>
<a id="L372" name="L372"></a> 372 
<a id="L373" name="L373"></a> 373 
<a id="L374" name="L374"></a> 374                 <strong class="reserved">if</strong> (fValidationHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L375" name="L375"></a> 375                     <em class="comment">// REVISIT: possible solutions to discard default content are:</em>
<a id="L376" name="L376"></a> 376                     <em class="comment">//         either we pass some flag to XML Schema validator</em>
<a id="L377" name="L377"></a> 377                     <em class="comment">//         or rely on the PSVI information.</em>
<a id="L378" name="L378"></a> 378                     fAttrProxy.<a href="../D/31947.html" title="Multiple defined in 31 places.">setAttributes</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, fDocument, elem);
<a id="L379" name="L379"></a> 379                     <a href="../S/5428.html#L1381" title="Defined at 1381 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">updateQName</a>(elem, fQName); <em class="comment">// updates global qname</em>
<a id="L380" name="L380"></a> 380                     <em class="comment">// set error node in the dom error wrapper</em>
<a id="L381" name="L381"></a> 381                     <em class="comment">// so if error occurs we can report an error node</em>
<a id="L382" name="L382"></a> 382                     fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L383" name="L383"></a> 383                     fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L384" name="L384"></a> 384                     <em class="comment">// call re-validation handler</em>
<a id="L385" name="L385"></a> 385                     fValidationHandler.<a href="../D/34781.html" title="Multiple defined in 105 places.">startElement</a>(fQName, fAttrProxy, <strong class="reserved">null</strong>);
<a id="L386" name="L386"></a> 386                 <em class="brace">}</em>
<a id="L387" name="L387"></a> 387 
<a id="L388" name="L388"></a> 388                 <strong class="reserved">if</strong> (fDTDValidator != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L389" name="L389"></a> 389                     <em class="comment">// REVISIT: possible solutions to discard default content are:</em>
<a id="L390" name="L390"></a> 390                     <em class="comment">//         either we pass some flag to XML Schema validator</em>
<a id="L391" name="L391"></a> 391                     <em class="comment">//         or rely on the PSVI information.</em>
<a id="L392" name="L392"></a> 392                     fAttrProxy.<a href="../D/31947.html" title="Multiple defined in 31 places.">setAttributes</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, fDocument, elem);
<a id="L393" name="L393"></a> 393                     <a href="../S/5428.html#L1381" title="Defined at 1381 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">updateQName</a>(elem, fQName); <em class="comment">// updates global qname</em>
<a id="L394" name="L394"></a> 394                     <em class="comment">// set error node in the dom error wrapper</em>
<a id="L395" name="L395"></a> 395                     <em class="comment">// so if error occurs we can report an error node</em>
<a id="L396" name="L396"></a> 396                     fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L397" name="L397"></a> 397                     fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L398" name="L398"></a> 398                     <em class="comment">// call re-validation handler</em>
<a id="L399" name="L399"></a> 399                     fDTDValidator.<a href="../D/34781.html" title="Multiple defined in 105 places.">startElement</a>(fQName, fAttrProxy, <strong class="reserved">null</strong>);
<a id="L400" name="L400"></a> 400                 <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402                 <em class="comment">// normalize children</em>
<a id="L403" name="L403"></a> 403                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> kid, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L404" name="L404"></a> 404                 <strong class="reserved">for</strong> (kid = elem.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>(); kid != <strong class="reserved">null</strong>; kid = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L405" name="L405"></a> 405                     <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = kid.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L406" name="L406"></a> 406                     kid = <a href="../S/5428.html#L271" title="Defined at 271 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">normalizeNode</a>(kid);
<a id="L407" name="L407"></a> 407                     <strong class="reserved">if</strong> (kid !=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L408" name="L408"></a> 408                         <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = kid;  <em class="comment">// don't advance</em>
<a id="L409" name="L409"></a> 409                     <em class="brace">}</em>
<a id="L410" name="L410"></a> 410                 <em class="brace">}</em>
<a id="L411" name="L411"></a> 411                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412                     <em class="comment">// normalized subtree</em>
<a id="L413" name="L413"></a> 413                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("***The children of {"+<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()+"} are normalized");
<a id="L414" name="L414"></a> 414                     <strong class="reserved">for</strong> (kid = elem.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>(); kid != <strong class="reserved">null</strong>; kid = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415                         <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = kid.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L416" name="L416"></a> 416                         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(kid.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>() +"["+kid.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>()+"]");
<a id="L417" name="L417"></a> 417                     <em class="brace">}</em>
<a id="L418" name="L418"></a> 418 
<a id="L419" name="L419"></a> 419                 <em class="brace">}</em>
<a id="L420" name="L420"></a> 420 
<a id="L421" name="L421"></a> 421 
<a id="L422" name="L422"></a> 422                 <strong class="reserved">if</strong> (fValidationHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L423" name="L423"></a> 423                     <a href="../S/5428.html#L1381" title="Defined at 1381 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">updateQName</a>(elem, fQName); <em class="comment">// updates global qname</em>
<a id="L424" name="L424"></a> 424                     <em class="comment">//</em>
<a id="L425" name="L425"></a> 425                     <em class="comment">// set error node in the dom error wrapper</em>
<a id="L426" name="L426"></a> 426                     <em class="comment">// so if error occurs we can report an error node</em>
<a id="L427" name="L427"></a> 427                     fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L428" name="L428"></a> 428                     fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L429" name="L429"></a> 429                     fValidationHandler.<a href="../D/15448.html" title="Multiple defined in 90 places.">endElement</a>(fQName, <strong class="reserved">null</strong>);
<a id="L430" name="L430"></a> 430                 <em class="brace">}</em>
<a id="L431" name="L431"></a> 431 
<a id="L432" name="L432"></a> 432                 <strong class="reserved">if</strong> (fDTDValidator != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L433" name="L433"></a> 433                     <a href="../S/5428.html#L1381" title="Defined at 1381 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">updateQName</a>(elem, fQName); <em class="comment">// updates global qname</em>
<a id="L434" name="L434"></a> 434                     <em class="comment">//</em>
<a id="L435" name="L435"></a> 435                     <em class="comment">// set error node in the dom error wrapper</em>
<a id="L436" name="L436"></a> 436                     <em class="comment">// so if error occurs we can report an error node</em>
<a id="L437" name="L437"></a> 437                     fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L438" name="L438"></a> 438                     fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L439" name="L439"></a> 439                     fDTDValidator.<a href="../D/15448.html" title="Multiple defined in 90 places.">endElement</a>(fQName, <strong class="reserved">null</strong>);
<a id="L440" name="L440"></a> 440                 <em class="brace">}</em>
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442                 <em class="comment">// pop namespace context</em>
<a id="L443" name="L443"></a> 443                 fNamespaceContext.<a href="../D/29421.html" title="Multiple defined in 9 places.">popContext</a>();
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445                 <strong class="reserved">break</strong>;
<a id="L446" name="L446"></a> 446             <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<a id="L448" name="L448"></a> 448         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.COMMENT_NODE: <em class="brace">{</em>
<a id="L449" name="L449"></a> 449                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L450" name="L450"></a> 450                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;normalizeNode:{comments}");
<a id="L451" name="L451"></a> 451                 <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.COMMENTS) == 0) <em class="brace">{</em>
<a id="L454" name="L454"></a> 454                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> prevSibling = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L455" name="L455"></a> 455                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L456" name="L456"></a> 456                     <em class="comment">// remove the comment node</em>
<a id="L457" name="L457"></a> 457                     <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L458" name="L458"></a> 458                     <strong class="reserved">if</strong> (prevSibling != <strong class="reserved">null</strong> &amp;&amp; prevSibling.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L459" name="L459"></a> 459                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> = prevSibling.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L460" name="L460"></a> 460                         <strong class="reserved">if</strong> (<a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L461" name="L461"></a> 461                             ((<a href="../D/8917.html" title="Multiple defined in 2 places.">TextImpl</a>)<a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>).<a href="../D/24741.html" title="Multiple defined in 6 places.">insertData</a>(0, prevSibling.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>());
<a id="L462" name="L462"></a> 462                             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>(prevSibling);
<a id="L463" name="L463"></a> 463                             <strong class="reserved">return</strong> <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>;
<a id="L464" name="L464"></a> 464                         <em class="brace">}</em>
<a id="L465" name="L465"></a> 465                     <em class="brace">}</em>
<a id="L466" name="L466"></a> 466                 <em class="brace">}</em><em class="comment">//if comment node need not be removed</em>
<a id="L467" name="L467"></a> 467                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                     <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0))<em class="brace">{</em>
<a id="L469" name="L469"></a> 469                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> commentdata = ((<a href="../D/1672.html" title="Multiple defined in 3 places.">Comment</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>).<a href="../D/18190.html" title="Multiple defined in 47 places.">getData</a>();
<a id="L470" name="L470"></a> 470                         <em class="comment">// check comments for invalid xml chracter as per the version</em>
<a id="L471" name="L471"></a> 471                         <em class="comment">// of the document</em>
<a id="L472" name="L472"></a> 472                         <a href="../S/5428.html#L1243" title="Defined at 1243 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isCommentWF</a>(fErrorHandler, fError, fLocator, commentdata, fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L473" name="L473"></a> 473                     <em class="brace">}</em>
<a id="L474" name="L474"></a> 474                 <em class="brace">}</em><em class="comment">//end-else if comment node is not to be removed.</em>
<a id="L475" name="L475"></a> 475                                 <strong class="reserved">break</strong>;
<a id="L476" name="L476"></a> 476             <em class="brace">}</em>
<a id="L477" name="L477"></a> 477         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_REFERENCE_NODE: <em class="brace">{</em>
<a id="L478" name="L478"></a> 478                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L479" name="L479"></a> 479                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;normalizeNode:{entityRef} "+<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>());
<a id="L480" name="L480"></a> 480                 <em class="brace">}</em>
<a id="L481" name="L481"></a> 481 
<a id="L482" name="L482"></a> 482                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.ENTITIES) == 0) <em class="brace">{</em>
<a id="L483" name="L483"></a> 483                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> prevSibling = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L484" name="L484"></a> 484                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L485" name="L485"></a> 485                     ((<a href="../S/5430.html#L85" title="Defined at 85 in src/com/sun/org/apache/xerces/internal/dom/EntityReferenceImpl.java.">EntityReferenceImpl</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>).<a href="../D/33663.html" title="Multiple defined in 19 places.">setReadOnly</a>(<strong class="reserved">false</strong>, <strong class="reserved">true</strong>);
<a id="L486" name="L486"></a> 486                     <a href="../S/5428.html#L720" title="Defined at 720 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">expandEntityRef</a> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L487" name="L487"></a> 487                     <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L488" name="L488"></a> 488                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = (prevSibling != <strong class="reserved">null</strong>)?prevSibling.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>():<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L489" name="L489"></a> 489                     <em class="comment">// The list of children #text -&gt; &amp;ent;</em>
<a id="L490" name="L490"></a> 490                     <em class="comment">// and entity has a first child as a text</em>
<a id="L491" name="L491"></a> 491                     <em class="comment">// we should not advance</em>
<a id="L492" name="L492"></a> 492                     <strong class="reserved">if</strong> (prevSibling != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong> &amp;&amp; prevSibling.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE &amp;&amp;
<a id="L493" name="L493"></a> 493                         <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE) <em class="brace">{</em>
<a id="L494" name="L494"></a> 494                         <strong class="reserved">return</strong> prevSibling;  <em class="comment">// Don't advance</em>
<a id="L495" name="L495"></a> 495                     <em class="brace">}</em>
<a id="L496" name="L496"></a> 496                     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L497" name="L497"></a> 497                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L498" name="L498"></a> 498                     <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0) &amp;&amp;
<a id="L499" name="L499"></a> 499                         fDocument.<a href="../S/5445.html#L2606" title="Defined at 2606 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLVersionChanged</a>())<em class="brace">{</em>
<a id="L500" name="L500"></a> 500                             <a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a>.<a href="../S/5445.html#L2209" title="Defined at 2209 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLName</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>() , fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L501" name="L501"></a> 501                     <em class="brace">}</em>
<a id="L502" name="L502"></a> 502                     <em class="comment">// REVISIT: traverse entity reference and send appropriate calls to the validator</em>
<a id="L503" name="L503"></a> 503                     <em class="comment">// (no normalization should be performed for the children).</em>
<a id="L504" name="L504"></a> 504                 <em class="brace">}</em>
<a id="L505" name="L505"></a> 505                 <strong class="reserved">break</strong>;
<a id="L506" name="L506"></a> 506             <em class="brace">}</em>
<a id="L507" name="L507"></a> 507 
<a id="L508" name="L508"></a> 508         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE: <em class="brace">{</em>
<a id="L509" name="L509"></a> 509                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L510" name="L510"></a> 510                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;normalizeNode:{cdata}");
<a id="L511" name="L511"></a> 511                 <em class="brace">}</em>
<a id="L512" name="L512"></a> 512 
<a id="L513" name="L513"></a> 513                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.CDATA) == 0) <em class="brace">{</em>
<a id="L514" name="L514"></a> 514                     <em class="comment">// convert CDATA to TEXT nodes</em>
<a id="L515" name="L515"></a> 515                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> prevSibling = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21622.html" title="Multiple defined in 19 places.">getPreviousSibling</a>();
<a id="L516" name="L516"></a> 516                     <strong class="reserved">if</strong> (prevSibling != <strong class="reserved">null</strong> &amp;&amp; prevSibling.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE)<em class="brace">{</em>
<a id="L517" name="L517"></a> 517                         ((<a href="../D/8891.html" title="Multiple defined in 3 places.">Text</a>)prevSibling).<a href="../D/11372.html" title="Multiple defined in 5 places.">appendData</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>());
<a id="L518" name="L518"></a> 518                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>().<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L519" name="L519"></a> 519                         <strong class="reserved">return</strong> prevSibling; <em class="comment">//don't advance</em>
<a id="L520" name="L520"></a> 520                     <em class="brace">}</em>
<a id="L521" name="L521"></a> 521                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L522" name="L522"></a> 522                         <a href="../D/8891.html" title="Multiple defined in 3 places.">Text</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = fDocument.<a href="../D/14246.html" title="Multiple defined in 5 places.">createTextNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>());
<a id="L523" name="L523"></a> 523                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L524" name="L524"></a> 524                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/31039.html" title="Multiple defined in 11 places.">replaceChild</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L525" name="L525"></a> 525                         <strong class="reserved">return</strong> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;  <em class="comment">//don't advance</em>
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527                     <em class="brace">}</em>
<a id="L528" name="L528"></a> 528                 <em class="brace">}</em>
<a id="L529" name="L529"></a> 529 
<a id="L530" name="L530"></a> 530                 <em class="comment">// send characters call for CDATA</em>
<a id="L531" name="L531"></a> 531                 <strong class="reserved">if</strong> (fValidationHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L532" name="L532"></a> 532                     <em class="comment">// set error node in the dom error wrapper</em>
<a id="L533" name="L533"></a> 533                     <em class="comment">// so if error occurs we can report an error node</em>
<a id="L534" name="L534"></a> 534                     fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L535" name="L535"></a> 535                     fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L536" name="L536"></a> 536                     fValidationHandler.<a href="../D/34760.html" title="Multiple defined in 37 places.">startCDATA</a>(<strong class="reserved">null</strong>);
<a id="L537" name="L537"></a> 537                     fValidationHandler.<a href="../D/12336.html" title="Multiple defined in 3 places.">characterData</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <strong class="reserved">null</strong>);
<a id="L538" name="L538"></a> 538                     fValidationHandler.<a href="../D/15437.html" title="Multiple defined in 40 places.">endCDATA</a>(<strong class="reserved">null</strong>);
<a id="L539" name="L539"></a> 539                 <em class="brace">}</em>
<a id="L540" name="L540"></a> 540 
<a id="L541" name="L541"></a> 541                 <strong class="reserved">if</strong> (fDTDValidator != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L542" name="L542"></a> 542                     <em class="comment">// set error node in the dom error wrapper</em>
<a id="L543" name="L543"></a> 543                     <em class="comment">// so if error occurs we can report an error node</em>
<a id="L544" name="L544"></a> 544                     fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L545" name="L545"></a> 545                     fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L546" name="L546"></a> 546                     fDTDValidator.<a href="../D/34760.html" title="Multiple defined in 37 places.">startCDATA</a>(<strong class="reserved">null</strong>);
<a id="L547" name="L547"></a> 547                     fDTDValidator.<a href="../D/12336.html" title="Multiple defined in 3 places.">characterData</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <strong class="reserved">null</strong>);
<a id="L548" name="L548"></a> 548                     fDTDValidator.<a href="../D/15437.html" title="Multiple defined in 40 places.">endCDATA</a>(<strong class="reserved">null</strong>);
<a id="L549" name="L549"></a> 549                 <em class="brace">}</em>
<a id="L550" name="L550"></a> 550                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>();
<a id="L551" name="L551"></a> 551 
<a id="L552" name="L552"></a> 552                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.SPLITCDATA) != 0) <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L554" name="L554"></a> 554                     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L555" name="L555"></a> 555                     <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L556" name="L556"></a> 556                         <a href="../S/5428.html#L1180" title="Defined at 1180 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isXMLCharWF</a>(fErrorHandler, fError, fLocator, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L557" name="L557"></a> 557                     <em class="brace">}</em>
<a id="L558" name="L558"></a> 558                     <strong class="reserved">while</strong> ( (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>=<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("]]&gt;")) &gt;= 0 ) <em class="brace">{</em>
<a id="L559" name="L559"></a> 559                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/33367.html" title="Multiple defined in 12 places.">setNodeValue</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2));
<a id="L560" name="L560"></a> 560                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> +2);
<a id="L561" name="L561"></a> 561 
<a id="L562" name="L562"></a> 562                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> firstSplitNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L563" name="L563"></a> 563                         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> newChild = fDocument.<a href="../D/13657.html" title="Multiple defined in 5 places.">createCDATASection</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L564" name="L564"></a> 564                         <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>(newChild, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>());
<a id="L565" name="L565"></a> 565                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = newChild;
<a id="L566" name="L566"></a> 566                         <em class="comment">// issue warning</em>
<a id="L567" name="L567"></a> 567                         fLocator.fRelatedNode = firstSplitNode;
<a id="L568" name="L568"></a> 568                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L569" name="L569"></a> 569                             <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L570" name="L570"></a> 570                             "cdata-sections-splitted",
<a id="L571" name="L571"></a> 571                              <strong class="reserved">null</strong>);
<a id="L572" name="L572"></a> 572                         <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_WARNING,
<a id="L573" name="L573"></a> 573                             "cdata-sections-splitted");
<a id="L574" name="L574"></a> 574                     <em class="brace">}</em>
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576                 <em class="brace">}</em>
<a id="L577" name="L577"></a> 577                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (fDocument.errorChecking) <em class="brace">{</em>
<a id="L578" name="L578"></a> 578                     <em class="comment">// check well-formedness</em>
<a id="L579" name="L579"></a> 579                     <a href="../S/5428.html#L1080" title="Defined at 1080 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isCDataWF</a>(fErrorHandler, fError, fLocator, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L580" name="L580"></a> 580                 <em class="brace">}</em>
<a id="L581" name="L581"></a> 581                 <strong class="reserved">break</strong>;
<a id="L582" name="L582"></a> 582             <em class="brace">}</em>
<a id="L583" name="L583"></a> 583 
<a id="L584" name="L584"></a> 584         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE: <em class="brace">{</em>
<a id="L585" name="L585"></a> 585                 <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L586" name="L586"></a> 586                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;normalizeNode(text):{"+<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>()+"}");
<a id="L587" name="L587"></a> 587                 <em class="brace">}</em>
<a id="L588" name="L588"></a> 588                 <em class="comment">// If node is a text node, we need to check for one of two</em>
<a id="L589" name="L589"></a> 589                 <em class="comment">// conditions:</em>
<a id="L590" name="L590"></a> 590                 <em class="comment">//   1) There is an adjacent text node</em>
<a id="L591" name="L591"></a> 591                 <em class="comment">//   2) There is no adjacent text node, but node is</em>
<a id="L592" name="L592"></a> 592                 <em class="comment">//      an empty text node.</em>
<a id="L593" name="L593"></a> 593                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L594" name="L594"></a> 594                 <em class="comment">// If an adjacent text node, merge it with this node</em>
<a id="L595" name="L595"></a> 595                 <strong class="reserved">if</strong> ( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>!=<strong class="reserved">null</strong> &amp;&amp; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE ) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596                     ((<a href="../D/8891.html" title="Multiple defined in 3 places.">Text</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>).<a href="../D/11372.html" title="Multiple defined in 5 places.">appendData</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>());
<a id="L597" name="L597"></a> 597                     <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>().<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>( <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> );
<a id="L598" name="L598"></a> 598                     <em class="comment">// We don't need to check well-formness here since we are not yet</em>
<a id="L599" name="L599"></a> 599                     <em class="comment">// done with this node.</em>
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601                     <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>; <em class="comment">// Don't advance;</em>
<a id="L602" name="L602"></a> 602                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()==0) <em class="brace">{</em>
<a id="L603" name="L603"></a> 603                     <em class="comment">// If kid is empty, remove it</em>
<a id="L604" name="L604"></a> 604                     <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>().<a href="../D/30731.html" title="Multiple defined in 14 places.">removeChild</a>( <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> );
<a id="L605" name="L605"></a> 605                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L606" name="L606"></a> 606                     <em class="comment">// validator.characters() call and well-formness</em>
<a id="L607" name="L607"></a> 607                     <em class="comment">// Don't send characters or check well-formness in the following cases:</em>
<a id="L608" name="L608"></a> 608                     <em class="comment">// 1. entities is false, next child is entity reference: expand tree first</em>
<a id="L609" name="L609"></a> 609                     <em class="comment">// 2. comments is false, and next child is comment</em>
<a id="L610" name="L610"></a> 610                     <em class="comment">// 3. cdata is false, and next child is cdata</em>
<a id="L611" name="L611"></a> 611 
<a id="L612" name="L612"></a> 612                     <strong class="reserved">short</strong> nextType = (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> != <strong class="reserved">null</strong>)?<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>():-1;
<a id="L613" name="L613"></a> 613                     <strong class="reserved">if</strong> (nextType == -1 || !(((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.ENTITIES) == 0 &amp;&amp;
<a id="L614" name="L614"></a> 614                            nextType == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE) ||
<a id="L615" name="L615"></a> 615                           ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.COMMENTS) == 0 &amp;&amp;
<a id="L616" name="L616"></a> 616                            nextType == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.COMMENT_NODE) ||
<a id="L617" name="L617"></a> 617                           ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.CDATA) == 0) &amp;&amp;
<a id="L618" name="L618"></a> 618                           nextType == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE)) <em class="brace">{</em>
<a id="L619" name="L619"></a> 619                               <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0) )<em class="brace">{</em>
<a id="L620" name="L620"></a> 620                                   <a href="../S/5428.html#L1180" title="Defined at 1180 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isXMLCharWF</a>(fErrorHandler, fError, fLocator, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L621" name="L621"></a> 621                               <em class="brace">}</em>
<a id="L622" name="L622"></a> 622                               <strong class="reserved">if</strong> (fValidationHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L623" name="L623"></a> 623                                      fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L624" name="L624"></a> 624                                      fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L625" name="L625"></a> 625                                      fValidationHandler.<a href="../D/12336.html" title="Multiple defined in 3 places.">characterData</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <strong class="reserved">null</strong>);
<a id="L626" name="L626"></a> 626                                      <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L627" name="L627"></a> 627                                          <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("=====&gt;characterData(),"+nextType);
<a id="L628" name="L628"></a> 628 
<a id="L629" name="L629"></a> 629                                      <em class="brace">}</em>
<a id="L630" name="L630"></a> 630                               <em class="brace">}</em>
<a id="L631" name="L631"></a> 631                               <strong class="reserved">if</strong> (fDTDValidator != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632                                   fConfiguration.fErrorHandlerWrapper.fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L633" name="L633"></a> 633                                   fCurrentNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L634" name="L634"></a> 634                                   fDTDValidator.<a href="../D/12336.html" title="Multiple defined in 3 places.">characterData</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <strong class="reserved">null</strong>);
<a id="L635" name="L635"></a> 635                                   <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L636" name="L636"></a> 636                                       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("=====&gt;characterData(),"+nextType);
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638                                   <em class="brace">}</em>
<a id="L639" name="L639"></a> 639                                   <strong class="reserved">if</strong>(allWhitespace) <em class="brace">{</em>
<a id="L640" name="L640"></a> 640                                       allWhitespace = <strong class="reserved">false</strong>;
<a id="L641" name="L641"></a> 641                                       ((<a href="../D/8917.html" title="Multiple defined in 2 places.">TextImpl</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>).<a href="../S/5452.html#L107" title="Defined at 107 in src/com/sun/org/apache/xerces/internal/dom/TextImpl.java.">setIgnorableWhitespace</a>(<strong class="reserved">true</strong>);
<a id="L642" name="L642"></a> 642                                   <em class="brace">}</em>
<a id="L643" name="L643"></a> 643                               <em class="brace">}</em>
<a id="L644" name="L644"></a> 644                     <em class="brace">}</em>
<a id="L645" name="L645"></a> 645                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L646" name="L646"></a> 646                             <strong class="reserved">if</strong> (DEBUG_ND) <em class="brace">{</em>
<a id="L647" name="L647"></a> 647                                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("=====&gt;don't send characters(),"+nextType);
<a id="L648" name="L648"></a> 648 
<a id="L649" name="L649"></a> 649                             <em class="brace">}</em>
<a id="L650" name="L650"></a> 650                     <em class="brace">}</em>
<a id="L651" name="L651"></a> 651                 <em class="brace">}</em>
<a id="L652" name="L652"></a> 652                 <strong class="reserved">break</strong>;
<a id="L653" name="L653"></a> 653             <em class="brace">}</em>
<a id="L654" name="L654"></a> 654         <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.PROCESSING_INSTRUCTION_NODE: <em class="brace">{</em>
<a id="L655" name="L655"></a> 655 
<a id="L656" name="L656"></a> 656             <em class="comment">//do the well-formed valid PI target name , data check when application has set the value of well-formed feature to true</em>
<a id="L657" name="L657"></a> 657             <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; (fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0 ) <em class="brace">{</em>
<a id="L658" name="L658"></a> 658                 <a href="../D/6899.html" title="Multiple defined in 3 places.">ProcessingInstruction</a> pinode = (<a href="../D/6899.html" title="Multiple defined in 3 places.">ProcessingInstruction</a>)<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> ;
<a id="L659" name="L659"></a> 659 
<a id="L660" name="L660"></a> 660                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> = pinode.<a href="../D/22997.html" title="Multiple defined in 36 places.">getTarget</a>();
<a id="L661" name="L661"></a> 661                 <em class="comment">//1.check PI target name</em>
<a id="L662" name="L662"></a> 662                 <strong class="reserved">if</strong>(fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>())<em class="brace">{</em>
<a id="L663" name="L663"></a> 663                     wellformed = <a href="../D/9846.html" title="Multiple defined in 2 places.">XML11Char</a>.<a href="../D/26539.html" title="Multiple defined in 2 places.">isXML11ValidName</a>(<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>);
<a id="L664" name="L664"></a> 664                 <em class="brace">}</em>
<a id="L665" name="L665"></a> 665                 <strong class="reserved">else</strong><em class="brace">{</em>
<a id="L666" name="L666"></a> 666                     wellformed = <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26450.html" title="Multiple defined in 4 places.">isValidName</a>(<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>);
<a id="L667" name="L667"></a> 667                 <em class="brace">}</em>
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669                                 <strong class="reserved">if</strong> (!wellformed) <em class="brace">{</em>
<a id="L670" name="L670"></a> 670                                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L671" name="L671"></a> 671                                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L672" name="L672"></a> 672                                         "wf-invalid-character-in-node-name",
<a id="L673" name="L673"></a> 673                                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>"Element", <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L674" name="L674"></a> 674                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L675" name="L675"></a> 675                         "wf-invalid-character-in-node-name");
<a id="L676" name="L676"></a> 676                 <em class="brace">}</em>
<a id="L677" name="L677"></a> 677 
<a id="L678" name="L678"></a> 678                 <em class="comment">//2. check PI data</em>
<a id="L679" name="L679"></a> 679                 <em class="comment">//processing isntruction data may have certain characters</em>
<a id="L680" name="L680"></a> 680                 <em class="comment">//which may not be valid XML character</em>
<a id="L681" name="L681"></a> 681                 <a href="../S/5428.html#L1180" title="Defined at 1180 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isXMLCharWF</a>(fErrorHandler, fError, fLocator, pinode.<a href="../D/18190.html" title="Multiple defined in 47 places.">getData</a>(), fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L682" name="L682"></a> 682             <em class="brace">}</em>
<a id="L683" name="L683"></a> 683         <em class="brace">}</em><em class="comment">//end case Node.PROCESSING_INSTRUCTION_NODE</em>
<a id="L684" name="L684"></a> 684 
<a id="L685" name="L685"></a> 685         <em class="brace">}</em><em class="comment">//end of switch</em>
<a id="L686" name="L686"></a> 686         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L687" name="L687"></a> 687     <em class="brace">}</em><em class="comment">//normalizeNode</em>
<a id="L688" name="L688"></a> 688 
<a id="L689" name="L689"></a> 689     <strong class="reserved">private</strong> <a href="../S/5516.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarPool.java.">XMLGrammarPool</a> <a href="../S/5428.html#L285" title="Referred from 285 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">createGrammarPool</a>(<a href="../S/5444.html#L54" title="Defined at 54 in src/com/sun/org/apache/xerces/internal/dom/DocumentTypeImpl.java.">DocumentTypeImpl</a> docType) <em class="brace">{</em>
<a id="L690" name="L690"></a> 690 
<a id="L691" name="L691"></a> 691         <a href="../S/5284.html#L42" title="Defined at 42 in src/com/sun/org/apache/xerces/internal/util/XMLGrammarPoolImpl.java.">XMLGrammarPoolImpl</a> pool = <strong class="reserved">new</strong> <a href="../S/5284.html#L42" title="Defined at 42 in src/com/sun/org/apache/xerces/internal/util/XMLGrammarPoolImpl.java.">XMLGrammarPoolImpl</a>();
<a id="L692" name="L692"></a> 692 
<a id="L693" name="L693"></a> 693         <a href="../S/5265.html#L54" title="Defined at 54 in src/com/sun/org/apache/xerces/internal/parsers/XMLGrammarPreparser.java.">XMLGrammarPreparser</a> preParser = <strong class="reserved">new</strong> <a href="../S/5265.html#L54" title="Defined at 54 in src/com/sun/org/apache/xerces/internal/parsers/XMLGrammarPreparser.java.">XMLGrammarPreparser</a>(fSymbolTable);
<a id="L694" name="L694"></a> 694         preParser.<a href="../S/5265.html#L153" title="Defined at 153 in src/com/sun/org/apache/xerces/internal/parsers/XMLGrammarPreparser.java.">registerPreparser</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_DTD, <strong class="reserved">null</strong>);
<a id="L695" name="L695"></a> 695         preParser.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.NAMESPACES_FEATURE, <strong class="reserved">true</strong>);
<a id="L696" name="L696"></a> 696         preParser.<a href="../D/32684.html" title="Multiple defined in 62 places.">setFeature</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.VALIDATION_FEATURE, <strong class="reserved">true</strong>);
<a id="L697" name="L697"></a> 697         preParser.<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XMLGRAMMAR_POOL_PROPERTY, pool);
<a id="L698" name="L698"></a> 698 
<a id="L699" name="L699"></a> 699         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> internalSubset = docType.<a href="../D/19819.html" title="Multiple defined in 2 places.">getInternalSubset</a>();
<a id="L700" name="L700"></a> 700         <a href="../S/5494.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLInputSource.java.">XMLInputSource</a> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> = <strong class="reserved">new</strong> <a href="../S/5494.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLInputSource.java.">XMLInputSource</a>(docType.<a href="../D/21781.html" title="Multiple defined in 41 places.">getPublicId</a>(), docType.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>(), <strong class="reserved">null</strong>);
<a id="L701" name="L701"></a> 701 
<a id="L702" name="L702"></a> 702         <strong class="reserved">if</strong>(internalSubset != <strong class="reserved">null</strong>)
<a id="L703" name="L703"></a> 703             <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/32136.html" title="Multiple defined in 24 places.">setCharacterStream</a>(<strong class="reserved">new</strong> <a href="../S/1417.html#L36" title="Defined at 36 in src/java/io/StringReader.java.">StringReader</a>(internalSubset));
<a id="L704" name="L704"></a> 704         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L705" name="L705"></a> 705             <a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a> g = (<a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a>)preParser.<a href="../S/5265.html#L189" title="Defined at 189 in src/com/sun/org/apache/xerces/internal/parsers/XMLGrammarPreparser.java.">preparseGrammar</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_DTD, <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>);
<a id="L706" name="L706"></a> 706             ((<a href="../D/9884.html" title="Multiple defined in 2 places.">XMLDTDDescription</a>)g.<a href="../D/19353.html" title="Multiple defined in 5 places.">getGrammarDescription</a>()).<a href="../S/5161.html#L129" title="Defined at 129 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDDescription.java.">setRootName</a>(docType.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>());
<a id="L707" name="L707"></a> 707             <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/32136.html" title="Multiple defined in 24 places.">setCharacterStream</a>(<strong class="reserved">null</strong>);
<a id="L708" name="L708"></a> 708             g = (<a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a>)preParser.<a href="../S/5265.html#L189" title="Defined at 189 in src/com/sun/org/apache/xerces/internal/parsers/XMLGrammarPreparser.java.">preparseGrammar</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_DTD, <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>);
<a id="L709" name="L709"></a> 709             ((<a href="../D/9884.html" title="Multiple defined in 2 places.">XMLDTDDescription</a>)g.<a href="../D/19353.html" title="Multiple defined in 5 places.">getGrammarDescription</a>()).<a href="../S/5161.html#L129" title="Defined at 129 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDDescription.java.">setRootName</a>(docType.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>());
<a id="L710" name="L710"></a> 710 
<a id="L711" name="L711"></a> 711         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> e) <em class="brace">{</em>
<a id="L712" name="L712"></a> 712         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713         <em class="brace">}</em>
<a id="L714" name="L714"></a> 714 
<a id="L715" name="L715"></a> 715         <strong class="reserved">return</strong> pool;
<a id="L716" name="L716"></a> 716     <em class="brace">}</em>
<a id="L717" name="L717"></a> 717 
<a id="L718" name="L718"></a> 718 
<a id="L719" name="L719"></a> 719 
<a id="L720" name="L720"></a> 720     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/14118.html" title="Multiple referred from 5 places.">expandEntityRef</a> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> reference)<em class="brace">{</em>
<a id="L721" name="L721"></a> 721         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> kid, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L722" name="L722"></a> 722         <strong class="reserved">for</strong> (kid = reference.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>(); kid != <strong class="reserved">null</strong>; kid = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>) <em class="brace">{</em>
<a id="L723" name="L723"></a> 723             <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = kid.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L724" name="L724"></a> 724             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/24733.html" title="Multiple defined in 12 places.">insertBefore</a>(kid, reference);
<a id="L725" name="L725"></a> 725         <em class="brace">}</em>
<a id="L726" name="L726"></a> 726     <em class="brace">}</em>
<a id="L727" name="L727"></a> 727 
<a id="L728" name="L728"></a> 728     <em class="comment">// fix namespaces</em>
<a id="L729" name="L729"></a> 729     <em class="comment">// normalize attribute values</em>
<a id="L730" name="L730"></a> 730     <em class="comment">// remove default attributes</em>
<a id="L731" name="L731"></a> 731     <em class="comment">// check attribute names if the version of the document changed.</em>
<a id="L732" name="L732"></a> 732 
<a id="L733" name="L733"></a> 733     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/5428.html#L336" title="Referred from 336 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">namespaceFixUp</a> (<a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/579.html" title="Multiple defined in 2 places.">AttributeMap</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>)<em class="brace">{</em>
<a id="L734" name="L734"></a> 734         <strong class="reserved">if</strong> (DEBUG) <em class="brace">{</em>
<a id="L735" name="L735"></a> 735             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("[ns-fixup] element:" +<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()+
<a id="L736" name="L736"></a> 736                                " uri: "+<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>());
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738 
<a id="L739" name="L739"></a> 739         <em class="comment">// ------------------------------------</em>
<a id="L740" name="L740"></a> 740         <em class="comment">// pick up local namespace declarations</em>
<a id="L741" name="L741"></a> 741         <em class="comment">// &lt;xsl:stylesheet xmlns:xsl="http://xslt"&gt;</em>
<a id="L742" name="L742"></a> 742         <em class="comment">//   &lt;!-- add the following via DOM</em>
<a id="L743" name="L743"></a> 743         <em class="comment">//          body is bound to http://xslt</em>
<a id="L744" name="L744"></a> 744         <em class="comment">//    --&gt;</em>
<a id="L745" name="L745"></a> 745         <em class="comment">//   &lt;xsl:body xmlns:xsl="http://bound"/&gt;</em>
<a id="L746" name="L746"></a> 746         <em class="comment">//</em>
<a id="L747" name="L747"></a> 747         <em class="comment">// ------------------------------------</em>
<a id="L748" name="L748"></a> 748 
<a id="L749" name="L749"></a> 749         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, uri, <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L750" name="L750"></a> 750         <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751 
<a id="L752" name="L752"></a> 752             <em class="comment">// Record all valid local declarations</em>
<a id="L753" name="L753"></a> 753             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> k = 0; k &lt; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); ++k) <em class="brace">{</em>
<a id="L754" name="L754"></a> 754                 <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>)<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(k);
<a id="L755" name="L755"></a> 755 
<a id="L756" name="L756"></a> 756                 <em class="comment">//do the name check only when version of the document was changed &amp;</em>
<a id="L757" name="L757"></a> 757                 <em class="comment">//application has set the value of well-formed features to true</em>
<a id="L758" name="L758"></a> 758                 <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0) &amp;&amp;
<a id="L759" name="L759"></a> 759                     fDocument.<a href="../S/5445.html#L2606" title="Defined at 2606 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLVersionChanged</a>()) <em class="brace">{</em>
<a id="L760" name="L760"></a> 760                     <em class="comment">//checkQName does checking based on the version of the document</em>
<a id="L761" name="L761"></a> 761                     fDocument.<a href="../D/12611.html" title="Multiple defined in 3 places.">checkQName</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>() , <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>()) ;
<a id="L762" name="L762"></a> 762                 <em class="brace">}</em>
<a id="L763" name="L763"></a> 763 
<a id="L764" name="L764"></a> 764                 uri = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>();
<a id="L765" name="L765"></a> 765                 <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong> &amp;&amp; uri.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a>.XMLNS_URI)) <em class="brace">{</em>
<a id="L766" name="L766"></a> 766                     <em class="comment">// namespace attribute</em>
<a id="L767" name="L767"></a> 767 
<a id="L768" name="L768"></a> 768                     <em class="comment">// "namespace-declarations" == false; Discard all namespace declaration attributes</em>
<a id="L769" name="L769"></a> 769                     <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.NSDECL) == 0) <em class="brace">{</em>
<a id="L770" name="L770"></a> 770                         <strong class="reserved">continue</strong>;
<a id="L771" name="L771"></a> 771                     <em class="brace">}</em>
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>();
<a id="L774" name="L774"></a> 774                     <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L775" name="L775"></a> 775                         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>=<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING;
<a id="L776" name="L776"></a> 776                     <em class="brace">}</em>
<a id="L777" name="L777"></a> 777 
<a id="L778" name="L778"></a> 778                     <em class="comment">// Check for invalid namespace declaration:</em>
<a id="L779" name="L779"></a> 779                     <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a>.XMLNS_URI)) <em class="brace">{</em>
<a id="L780" name="L780"></a> 780                         <em class="comment">//A null value for locale is passed to formatMessage,</em>
<a id="L781" name="L781"></a> 781                         <em class="comment">//which means that the default locale will be used</em>
<a id="L782" name="L782"></a> 782                         fLocator.fRelatedNode = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>;
<a id="L783" name="L783"></a> 783                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,"CantBindXMLNS",<strong class="reserved">null</strong> );
<a id="L784" name="L784"></a> 784                         <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "CantBindXMLNS");
<a id="L785" name="L785"></a> 785                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L786" name="L786"></a> 786                         <em class="comment">// XML 1.0 Attribute value normalization</em>
<a id="L787" name="L787"></a> 787                         <em class="comment">// value = normalizeAttributeValue(value, attr);</em>
<a id="L788" name="L788"></a> 788                         <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>();
<a id="L789" name="L789"></a> 789                         <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <strong class="reserved">null</strong> ||
<a id="L790" name="L790"></a> 790                                   <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) ? <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING :fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L791" name="L791"></a> 791                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> localpart = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>( <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>());
<a id="L792" name="L792"></a> 792                         <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.PREFIX_XMLNS) <em class="brace">{</em> <em class="comment">//xmlns:prefix</em>
<a id="L793" name="L793"></a> 793 
<a id="L794" name="L794"></a> 794                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L795" name="L795"></a> 795                             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() != 0) <em class="brace">{</em>
<a id="L796" name="L796"></a> 796                                 fNamespaceContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(localpart, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L797" name="L797"></a> 797                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L798" name="L798"></a> 798                                 <em class="comment">// REVISIT: issue error on invalid declarations</em>
<a id="L799" name="L799"></a> 799                                 <em class="comment">//          xmlns:foo = ""</em>
<a id="L800" name="L800"></a> 800 
<a id="L801" name="L801"></a> 801                             <em class="brace">}</em>
<a id="L802" name="L802"></a> 802                             <em class="comment">//removeDefault (attr, attributes);</em>
<a id="L803" name="L803"></a> 803                             <strong class="reserved">continue</strong>;
<a id="L804" name="L804"></a> 804                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// (localpart == fXmlnsSymbol &amp;&amp; prefix == fEmptySymbol)  -- xmlns</em>
<a id="L805" name="L805"></a> 805                             <em class="comment">// empty prefix is always bound ("" or some string)</em>
<a id="L806" name="L806"></a> 806                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L807" name="L807"></a> 807                             fNamespaceContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L808" name="L808"></a> 808                             <em class="comment">//removeDefault (attr, attributes);</em>
<a id="L809" name="L809"></a> 809                             <strong class="reserved">continue</strong>;
<a id="L810" name="L810"></a> 810                         <em class="brace">}</em>
<a id="L811" name="L811"></a> 811                     <em class="brace">}</em>  <em class="comment">// end-else: valid declaration</em>
<a id="L812" name="L812"></a> 812                 <em class="brace">}</em> <em class="comment">// end-if: namespace attribute</em>
<a id="L813" name="L813"></a> 813             <em class="brace">}</em>
<a id="L814" name="L814"></a> 814         <em class="brace">}</em>
<a id="L815" name="L815"></a> 815 
<a id="L816" name="L816"></a> 816 
<a id="L817" name="L817"></a> 817 
<a id="L818" name="L818"></a> 818         <em class="comment">// ---------------------------------------------------------</em>
<a id="L819" name="L819"></a> 819         <em class="comment">// Fix up namespaces for element: per DOM L3</em>
<a id="L820" name="L820"></a> 820         <em class="comment">// Need to consider the following cases:</em>
<a id="L821" name="L821"></a> 821         <em class="comment">//</em>
<a id="L822" name="L822"></a> 822         <em class="comment">// case 1: &lt;xsl:stylesheet xmlns:xsl="http://xsl"&gt;</em>
<a id="L823" name="L823"></a> 823         <em class="comment">// We create another element body bound to the "http://xsl" namespace</em>
<a id="L824" name="L824"></a> 824         <em class="comment">// as well as namespace attribute rebounding xsl to another namespace.</em>
<a id="L825" name="L825"></a> 825         <em class="comment">// &lt;xsl:body xmlns:xsl="http://another"&gt;</em>
<a id="L826" name="L826"></a> 826         <em class="comment">// Need to make sure that the new namespace decl value is changed to</em>
<a id="L827" name="L827"></a> 827         <em class="comment">// "http://xsl"</em>
<a id="L828" name="L828"></a> 828         <em class="comment">//</em>
<a id="L829" name="L829"></a> 829         <em class="comment">// ---------------------------------------------------------</em>
<a id="L830" name="L830"></a> 830         <em class="comment">// check if prefix/namespace is correct for current element</em>
<a id="L831" name="L831"></a> 831         <em class="comment">// ---------------------------------------------------------</em>
<a id="L832" name="L832"></a> 832 
<a id="L833" name="L833"></a> 833         uri = <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>();
<a id="L834" name="L834"></a> 834         <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>();
<a id="L835" name="L835"></a> 835 
<a id="L836" name="L836"></a> 836         <em class="comment">// "namespace-declarations" == false? Discard all namespace declaration attributes</em>
<a id="L837" name="L837"></a> 837         <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.NSDECL) == 0) <em class="brace">{</em>
<a id="L838" name="L838"></a> 838             <em class="comment">// no namespace declaration == no namespace URI, semantics are to keep prefix</em>
<a id="L839" name="L839"></a> 839             uri = <strong class="reserved">null</strong>;
<a id="L840" name="L840"></a> 840         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong>) <em class="brace">{</em>  <em class="comment">// Element has a namespace</em>
<a id="L841" name="L841"></a> 841             uri = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(uri);
<a id="L842" name="L842"></a> 842             <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <strong class="reserved">null</strong> ||
<a id="L843" name="L843"></a> 843                       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) ? <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING :fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L844" name="L844"></a> 844             <strong class="reserved">if</strong> (fNamespaceContext.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>) == uri) <em class="brace">{</em>
<a id="L845" name="L845"></a> 845                 <em class="comment">// The xmlns:prefix=namespace or xmlns="default" was declared at parent.</em>
<a id="L846" name="L846"></a> 846                 <em class="comment">// The binder always stores mapping of empty prefix to "".</em>
<a id="L847" name="L847"></a> 847             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L848" name="L848"></a> 848                 <em class="comment">// the prefix is either undeclared</em>
<a id="L849" name="L849"></a> 849                 <em class="comment">// or</em>
<a id="L850" name="L850"></a> 850                 <em class="comment">// conflict: the prefix is bound to another URI</em>
<a id="L851" name="L851"></a> 851                 <a href="../S/5428.html#L1052" title="Defined at 1052 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">addNamespaceDecl</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri, <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L852" name="L852"></a> 852                 fLocalNSBinder.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L853" name="L853"></a> 853                 fNamespaceContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L854" name="L854"></a> 854             <em class="brace">}</em>
<a id="L855" name="L855"></a> 855         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// Element has no namespace</em>
<a id="L856" name="L856"></a> 856             <strong class="reserved">if</strong> (<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L857" name="L857"></a> 857 
<a id="L858" name="L858"></a> 858                 <em class="comment">//  Error: DOM Level 1 node!</em>
<a id="L859" name="L859"></a> 859                 <strong class="reserved">if</strong> (fNamespaceValidation) <em class="brace">{</em>
<a id="L860" name="L860"></a> 860                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L861" name="L861"></a> 861                             <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "NullLocalElementName",
<a id="L862" name="L862"></a> 862                             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L863" name="L863"></a> 863                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_FATAL_ERROR,
<a id="L864" name="L864"></a> 864                     "NullLocalElementName");
<a id="L865" name="L865"></a> 865                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L866" name="L866"></a> 866                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L867" name="L867"></a> 867                             <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "NullLocalElementName",
<a id="L868" name="L868"></a> 868                             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L869" name="L869"></a> 869                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L870" name="L870"></a> 870                     "NullLocalElementName");
<a id="L871" name="L871"></a> 871                 <em class="brace">}</em>
<a id="L872" name="L872"></a> 872 
<a id="L873" name="L873"></a> 873             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// uri=null and no colon (DOM L2 node)</em>
<a id="L874" name="L874"></a> 874                 uri = fNamespaceContext.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING);
<a id="L875" name="L875"></a> 875                 <strong class="reserved">if</strong> (uri !=<strong class="reserved">null</strong> &amp;&amp; uri.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L876" name="L876"></a> 876                     <em class="comment">// undeclare default namespace declaration (before that element</em>
<a id="L877" name="L877"></a> 877                     <em class="comment">// bound to non-zero length uir), but adding xmlns="" decl</em>
<a id="L878" name="L878"></a> 878                     <a href="../S/5428.html#L1052" title="Defined at 1052 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">addNamespaceDecl</a> (<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING, <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING, <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L879" name="L879"></a> 879                     fLocalNSBinder.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING, <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING);
<a id="L880" name="L880"></a> 880                     fNamespaceContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING, <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING);
<a id="L881" name="L881"></a> 881                 <em class="brace">}</em>
<a id="L882" name="L882"></a> 882             <em class="brace">}</em>
<a id="L883" name="L883"></a> 883         <em class="brace">}</em>
<a id="L884" name="L884"></a> 884 
<a id="L885" name="L885"></a> 885         <em class="comment">// -----------------------------------------</em>
<a id="L886" name="L886"></a> 886         <em class="comment">// Fix up namespaces for attributes: per DOM L3</em>
<a id="L887" name="L887"></a> 887         <em class="comment">// check if prefix/namespace is correct the attributes</em>
<a id="L888" name="L888"></a> 888         <em class="comment">// -----------------------------------------</em>
<a id="L889" name="L889"></a> 889         <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L890" name="L890"></a> 890 
<a id="L891" name="L891"></a> 891             <em class="comment">// clone content of the attributes</em>
<a id="L892" name="L892"></a> 892             <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/12906.html" title="Multiple defined in 3 places.">cloneMap</a>(fAttributeList);
<a id="L893" name="L893"></a> 893             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; fAttributeList.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); i++) <em class="brace">{</em>
<a id="L894" name="L894"></a> 894                 <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>) fAttributeList.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L895" name="L895"></a> 895                 fLocator.fRelatedNode = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>;
<a id="L896" name="L896"></a> 896 
<a id="L897" name="L897"></a> 897                 <strong class="reserved">if</strong> (DEBUG) <em class="brace">{</em>
<a id="L898" name="L898"></a> 898                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;[ns-fixup] process attribute: "+<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>());
<a id="L899" name="L899"></a> 899                 <em class="brace">}</em>
<a id="L900" name="L900"></a> 900                 <em class="comment">// normalize attribute value</em>
<a id="L901" name="L901"></a> 901                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>();
<a id="L902" name="L902"></a> 902                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L903" name="L903"></a> 903                 <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>();
<a id="L904" name="L904"></a> 904                 uri = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>();
<a id="L905" name="L905"></a> 905 
<a id="L906" name="L906"></a> 906                 <em class="comment">// make sure that value is never null.</em>
<a id="L907" name="L907"></a> 907                 <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L908" name="L908"></a> 908                     <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>=<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING;
<a id="L909" name="L909"></a> 909                 <em class="brace">}</em>
<a id="L910" name="L910"></a> 910 
<a id="L911" name="L911"></a> 911                 <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong>) <em class="brace">{</em>  <em class="comment">// attribute has namespace !=null</em>
<a id="L912" name="L912"></a> 912                     <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>();
<a id="L913" name="L913"></a> 913                     <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <strong class="reserved">null</strong> ||
<a id="L914" name="L914"></a> 914                               <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) ? <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING :fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<div class="comment">
                     /*String localpart =*/</div> fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>( <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>());
<a id="L916" name="L916"></a> 916 
<a id="L917" name="L917"></a> 917                     <em class="comment">// ---------------------------------------</em>
<a id="L918" name="L918"></a> 918                     <em class="comment">// skip namespace declarations</em>
<a id="L919" name="L919"></a> 919                     <em class="comment">// ---------------------------------------</em>
<a id="L920" name="L920"></a> 920                     <em class="comment">// REVISIT: can we assume that "uri" is from some symbol</em>
<a id="L921" name="L921"></a> 921                     <em class="comment">// table, and compare by reference? -SG</em>
<a id="L922" name="L922"></a> 922                     <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong> &amp;&amp; uri.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a>.XMLNS_URI)) <em class="brace">{</em>
<a id="L923" name="L923"></a> 923                         <strong class="reserved">continue</strong>;
<a id="L924" name="L924"></a> 924                     <em class="brace">}</em>
<a id="L925" name="L925"></a> 925                     <em class="comment">//---------------------------------------</em>
<a id="L926" name="L926"></a> 926                     <em class="comment">// check if value of the attribute is namespace well-formed</em>
<a id="L927" name="L927"></a> 927                     <em class="comment">//---------------------------------------</em>
<a id="L928" name="L928"></a> 928                     <strong class="reserved">if</strong> (fDocument.errorChecking &amp;&amp; ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.WELLFORMED) != 0)) <em class="brace">{</em>
<a id="L929" name="L929"></a> 929                             <a href="../S/5428.html#L1316" title="Defined at 1316 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isAttrValueWF</a>(fErrorHandler, fError, fLocator, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, (<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>, <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(), fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L930" name="L930"></a> 930                             <strong class="reserved">if</strong> (fDocument.<a href="../S/5445.html#L2606" title="Defined at 2606 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLVersionChanged</a>())<em class="brace">{</em>
<a id="L931" name="L931"></a> 931                                 <strong class="reserved">boolean</strong> wellformed=<a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a>.<a href="../S/5445.html#L2209" title="Defined at 2209 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXMLName</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>() , fDocument.<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>());
<a id="L932" name="L932"></a> 932                                 <strong class="reserved">if</strong> (!wellformed)<em class="brace">{</em>
<a id="L933" name="L933"></a> 933                                                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L934" name="L934"></a> 934                                                             <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L935" name="L935"></a> 935                                                             "wf-invalid-character-in-node-name",
<a id="L936" name="L936"></a> 936                                                             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>"Attribute", <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L937" name="L937"></a> 937                                         <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L938" name="L938"></a> 938                                             "wf-invalid-character-in-node-name");
<a id="L939" name="L939"></a> 939                                 <em class="brace">}</em>
<a id="L940" name="L940"></a> 940                         <em class="brace">}</em>
<a id="L941" name="L941"></a> 941                     <em class="brace">}</em>
<a id="L942" name="L942"></a> 942 
<a id="L943" name="L943"></a> 943                     <em class="comment">// ---------------------------------------</em>
<a id="L944" name="L944"></a> 944                     <em class="comment">// remove default attributes</em>
<a id="L945" name="L945"></a> 945                     <em class="comment">// ---------------------------------------</em>
<div class="comment">
                    if (removeDefault(attr, attributes)) {
                        continue;
                    }</div>
<a id="L951" name="L951"></a> 951                     <em class="comment">// XML 1.0 Attribute value normalization</em>
<a id="L952" name="L952"></a> 952                     <em class="comment">//value = normalizeAttributeValue(value, attr);</em>
<a id="L953" name="L953"></a> 953 
<a id="L954" name="L954"></a> 954                     <em class="comment">// reset id-attributes</em>
<a id="L955" name="L955"></a> 955                     ((<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>).<a href="../D/32885.html" title="Multiple defined in 10 places.">setIdAttribute</a>(<strong class="reserved">false</strong>);
<a id="L956" name="L956"></a> 956 
<a id="L957" name="L957"></a> 957 
<a id="L958" name="L958"></a> 958                     uri = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(uri);
<a id="L959" name="L959"></a> 959 
<a id="L960" name="L960"></a> 960                     <em class="comment">// find if for this prefix a URI was already declared</em>
<a id="L961" name="L961"></a> 961                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> declaredURI =  fNamespaceContext.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L962" name="L962"></a> 962 
<a id="L963" name="L963"></a> 963                     <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING || declaredURI != uri) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964                         <em class="comment">// attribute has no prefix (default namespace decl does not apply to attributes)</em>
<a id="L965" name="L965"></a> 965                         <em class="comment">// OR</em>
<a id="L966" name="L966"></a> 966                         <em class="comment">// attribute prefix is not declared</em>
<a id="L967" name="L967"></a> 967                         <em class="comment">// OR</em>
<a id="L968" name="L968"></a> 968                         <em class="comment">// conflict: attribute has a prefix that conficlicts with a binding</em>
<a id="L969" name="L969"></a> 969                         <em class="comment">//           already active in scope</em>
<a id="L970" name="L970"></a> 970 
<a id="L971" name="L971"></a> 971                         <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>  = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>();
<a id="L972" name="L972"></a> 972                         <em class="comment">// Find if any prefix for attributes namespace URI is available</em>
<a id="L973" name="L973"></a> 973                         <em class="comment">// in the scope</em>
<a id="L974" name="L974"></a> 974                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> declaredPrefix = fNamespaceContext.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(uri);
<a id="L975" name="L975"></a> 975                         <strong class="reserved">if</strong> (declaredPrefix !=<strong class="reserved">null</strong> &amp;&amp; declaredPrefix !=<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING) <em class="brace">{</em>
<a id="L976" name="L976"></a> 976 
<a id="L977" name="L977"></a> 977                             <em class="comment">// use the prefix that was found (declared previously for this URI</em>
<a id="L978" name="L978"></a> 978                             <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = declaredPrefix;
<a id="L979" name="L979"></a> 979                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L980" name="L980"></a> 980                             <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> != <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING &amp;&amp; fLocalNSBinder.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L981" name="L981"></a> 981                                 <em class="comment">// the current prefix is not null and it has no in scope declaration</em>
<a id="L982" name="L982"></a> 982 
<a id="L983" name="L983"></a> 983                                 <em class="comment">// use this prefix</em>
<a id="L984" name="L984"></a> 984                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L985" name="L985"></a> 985 
<a id="L986" name="L986"></a> 986                                 <em class="comment">// find a prefix following the pattern "NS" +index (starting at 1)</em>
<a id="L987" name="L987"></a> 987                                 <em class="comment">// make sure this prefix is not declared in the current scope.</em>
<a id="L988" name="L988"></a> 988                                 <strong class="reserved">int</strong> counter = 1;
<a id="L989" name="L989"></a> 989                                 <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(PREFIX +counter++);
<a id="L990" name="L990"></a> 990                                 <strong class="reserved">while</strong> (fLocalNSBinder.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L991" name="L991"></a> 991                                     <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(PREFIX +counter++);
<a id="L992" name="L992"></a> 992                                 <em class="brace">}</em>
<a id="L993" name="L993"></a> 993 
<a id="L994" name="L994"></a> 994                             <em class="brace">}</em>
<a id="L995" name="L995"></a> 995                             <em class="comment">// add declaration for the new prefix</em>
<a id="L996" name="L996"></a> 996                             <a href="../S/5428.html#L1052" title="Defined at 1052 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">addNamespaceDecl</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri, <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L997" name="L997"></a> 997                             <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L998" name="L998"></a> 998                             fLocalNSBinder.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L999" name="L999"></a> 999                             fNamespaceContext.<a href="../D/14512.html" title="Multiple defined in 8 places.">declarePrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L1000" name="L1000"></a>1000                         <em class="brace">}</em>
<a id="L1001" name="L1001"></a>1001 
<a id="L1002" name="L1002"></a>1002                         <em class="comment">// change prefix for this attribute</em>
<a id="L1003" name="L1003"></a>1003                         <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/33583.html" title="Multiple defined in 13 places.">setPrefix</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L1004" name="L1004"></a>1004                     <em class="brace">}</em>
<a id="L1005" name="L1005"></a>1005                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em> <em class="comment">// attribute uri == null</em>
<a id="L1006" name="L1006"></a>1006 
<a id="L1007" name="L1007"></a>1007                     <em class="comment">// XML 1.0 Attribute value normalization</em>
<a id="L1008" name="L1008"></a>1008                     <em class="comment">//value = normalizeAttributeValue(value, attr);</em>
<a id="L1009" name="L1009"></a>1009 
<a id="L1010" name="L1010"></a>1010                     <em class="comment">// reset id-attributes</em>
<a id="L1011" name="L1011"></a>1011                     ((<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>).<a href="../D/32885.html" title="Multiple defined in 10 places.">setIdAttribute</a>(<strong class="reserved">false</strong>);
<a id="L1012" name="L1012"></a>1012 
<a id="L1013" name="L1013"></a>1013                     <strong class="reserved">if</strong> (<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1014" name="L1014"></a>1014                         <em class="comment">// It is an error if document has DOM L1 nodes.</em>
<a id="L1015" name="L1015"></a>1015                         <strong class="reserved">if</strong> (fNamespaceValidation) <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1017" name="L1017"></a>1017                                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L1018" name="L1018"></a>1018                                 "NullLocalAttrName", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L1019" name="L1019"></a>1019                             <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_FATAL_ERROR,
<a id="L1020" name="L1020"></a>1020                                 "NullLocalAttrName");
<a id="L1021" name="L1021"></a>1021                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1022" name="L1022"></a>1022                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1023" name="L1023"></a>1023                                 <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN,
<a id="L1024" name="L1024"></a>1024                                 "NullLocalAttrName", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L1025" name="L1025"></a>1025                             <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(fErrorHandler, fError, fLocator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L1026" name="L1026"></a>1026                                 "NullLocalAttrName");
<a id="L1027" name="L1027"></a>1027                         <em class="brace">}</em>
<a id="L1028" name="L1028"></a>1028                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1029" name="L1029"></a>1029                         <em class="comment">// uri=null and no colon</em>
<a id="L1030" name="L1030"></a>1030                         <em class="comment">// no fix up is needed: default namespace decl does not</em>
<a id="L1031" name="L1031"></a>1031 
<a id="L1032" name="L1032"></a>1032                         <em class="comment">// ---------------------------------------</em>
<a id="L1033" name="L1033"></a>1033                         <em class="comment">// remove default attributes</em>
<a id="L1034" name="L1034"></a>1034                         <em class="comment">// ---------------------------------------</em>
<a id="L1035" name="L1035"></a>1035                         <em class="comment">// removeDefault(attr, attributes);</em>
<a id="L1036" name="L1036"></a>1036                     <em class="brace">}</em>
<a id="L1037" name="L1037"></a>1037                 <em class="brace">}</em>
<a id="L1038" name="L1038"></a>1038             <em class="brace">}</em>
<a id="L1039" name="L1039"></a>1039         <em class="brace">}</em> <em class="comment">// end loop for attributes</em>
<a id="L1040" name="L1040"></a>1040     <em class="brace">}</em>
<a id="L1041" name="L1041"></a>1041 
<div class="comment">
      Adds a namespace attribute or replaces the value of existing namespace
      attribute with the given prefix and value for URI.
      In case prefix is empty will add/update default namespace declaration.
      @param prefix
      @param uri
      @exception IOException</div>
<a id="L1051" name="L1051"></a>1051 
<a id="L1052" name="L1052"></a>1052     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/9861.html" title="Multiple referred from 3 places.">addNamespaceDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>)<em class="brace">{</em>
<a id="L1053" name="L1053"></a>1053         <strong class="reserved">if</strong> (DEBUG) <em class="brace">{</em>
<a id="L1054" name="L1054"></a>1054             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("[ns-fixup] addNamespaceDecl ["+<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>+"]");
<a id="L1055" name="L1055"></a>1055         <em class="brace">}</em>
<a id="L1056" name="L1056"></a>1056         <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.EMPTY_STRING) <em class="brace">{</em>
<a id="L1057" name="L1057"></a>1057             <strong class="reserved">if</strong> (DEBUG) <em class="brace">{</em>
<a id="L1058" name="L1058"></a>1058                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("=&gt;add xmlns=\""+uri+"\" declaration");
<a id="L1059" name="L1059"></a>1059             <em class="brace">}</em>
<a id="L1060" name="L1060"></a>1060             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/31944.html" title="Multiple defined in 6 places.">setAttributeNS</a>(<a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a>.XMLNS_URI, <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.PREFIX_XMLNS, uri);
<a id="L1061" name="L1061"></a>1061         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1062" name="L1062"></a>1062             <strong class="reserved">if</strong> (DEBUG) <em class="brace">{</em>
<a id="L1063" name="L1063"></a>1063                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("=&gt;add xmlns:"+<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>+"=\""+uri+"\" declaration");
<a id="L1064" name="L1064"></a>1064             <em class="brace">}</em>
<a id="L1065" name="L1065"></a>1065             <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.<a href="../D/31944.html" title="Multiple defined in 6 places.">setAttributeNS</a>(<a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a>.XMLNS_URI, "xmlns:"+<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, uri);
<a id="L1066" name="L1066"></a>1066         <em class="brace">}</em>
<a id="L1067" name="L1067"></a>1067     <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068 
<a id="L1069" name="L1069"></a>1069 
<a id="L1070" name="L1070"></a>1070     <em class="comment">//</em>
<a id="L1071" name="L1071"></a>1071     <em class="comment">// Methods for well-formness checking</em>
<a id="L1072" name="L1072"></a>1072     <em class="comment">//</em>
<a id="L1073" name="L1073"></a>1073 
<a id="L1074" name="L1074"></a>1074 
<div class="comment">
      Check if CDATA section is well-formed
      @param datavalue
      @param isXML11Version = true if XML 1.1</div>
<a id="L1080" name="L1080"></a>1080     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/5428.html#L579" title="Referred from 579 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isCDataWF</a>(<a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a> errorHandler, <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a> locator,
<a id="L1081" name="L1081"></a>1081         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datavalue, <strong class="reserved">boolean</strong> <a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>)
<a id="L1082" name="L1082"></a>1082     <em class="brace">{</em>
<a id="L1083" name="L1083"></a>1083         <strong class="reserved">if</strong> (datavalue == <strong class="reserved">null</strong> || (datavalue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) ) <em class="brace">{</em>
<a id="L1084" name="L1084"></a>1084             <strong class="reserved">return</strong>;
<a id="L1085" name="L1085"></a>1085         <em class="brace">}</em>
<a id="L1086" name="L1086"></a>1086 
<a id="L1087" name="L1087"></a>1087         <strong class="reserved">char</strong> [] dataarray = datavalue.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1088" name="L1088"></a>1088         <strong class="reserved">int</strong> datalength = dataarray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1089" name="L1089"></a>1089 
<a id="L1090" name="L1090"></a>1090         <em class="comment">// version of the document is XML 1.1</em>
<a id="L1091" name="L1091"></a>1091         <strong class="reserved">if</strong> (<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>) <em class="brace">{</em>
<a id="L1092" name="L1092"></a>1092             <em class="comment">// we need to check all chracters as per production rules of XML11</em>
<a id="L1093" name="L1093"></a>1093             <strong class="reserved">int</strong> i = 0;
<a id="L1094" name="L1094"></a>1094             <strong class="reserved">while</strong>(i &lt; datalength)<em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = dataarray[i++];
<a id="L1096" name="L1096"></a>1096                 <strong class="reserved">if</strong> ( <a href="../D/9846.html" title="Multiple defined in 2 places.">XML11Char</a>.<a href="../D/26529.html" title="Multiple defined in 2 places.">isXML11Invalid</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) ) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097                     <em class="comment">// check if this is a supplemental character</em>
<a id="L1098" name="L1098"></a>1098                     <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25654.html" title="Multiple defined in 4 places.">isHighSurrogate</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &amp;&amp; i &lt; datalength) <em class="brace">{</em>
<a id="L1099" name="L1099"></a>1099                         <strong class="reserved">char</strong> c2 = dataarray[i++];
<a id="L1100" name="L1100"></a>1100                         <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25841.html" title="Multiple defined in 4 places.">isLowSurrogate</a>(c2) &amp;&amp;
<a id="L1101" name="L1101"></a>1101                             <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26313.html" title="Multiple defined in 2 places.">isSupplemental</a>(<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/35050.html" title="Multiple defined in 2 places.">supplemental</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, c2))) <em class="brace">{</em>
<a id="L1102" name="L1102"></a>1102                             <strong class="reserved">continue</strong>;
<a id="L1103" name="L1103"></a>1103                         <em class="brace">}</em>
<a id="L1104" name="L1104"></a>1104                     <em class="brace">}</em>
<a id="L1105" name="L1105"></a>1105                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1106" name="L1106"></a>1106                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,
<a id="L1107" name="L1107"></a>1107                         "InvalidCharInCDSect",
<a id="L1108" name="L1108"></a>1108                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, 16)<em class="brace">}</em>);
<a id="L1109" name="L1109"></a>1109                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(
<a id="L1110" name="L1110"></a>1110                         errorHandler,
<a id="L1111" name="L1111"></a>1111                         <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>,
<a id="L1112" name="L1112"></a>1112                         locator,
<a id="L1113" name="L1113"></a>1113                         <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>,
<a id="L1114" name="L1114"></a>1114                         <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L1115" name="L1115"></a>1115                         "wf-invalid-character");
<a id="L1116" name="L1116"></a>1116                 <em class="brace">}</em>
<a id="L1117" name="L1117"></a>1117                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == ']') <em class="brace">{</em>
<a id="L1118" name="L1118"></a>1118                     <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = i;
<a id="L1119" name="L1119"></a>1119                     <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; datalength &amp;&amp; dataarray[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] == ']') <em class="brace">{</em>
<a id="L1120" name="L1120"></a>1120                         <strong class="reserved">while</strong> (++<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; datalength &amp;&amp; dataarray[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] == ']') <em class="brace">{</em>
<a id="L1121" name="L1121"></a>1121                             <em class="comment">// do nothing</em>
<a id="L1122" name="L1122"></a>1122                         <em class="brace">}</em>
<a id="L1123" name="L1123"></a>1123                         <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; datalength &amp;&amp; dataarray[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] == '&gt;') <em class="brace">{</em>
<a id="L1124" name="L1124"></a>1124                             <em class="comment">// CDEndInContent</em>
<a id="L1125" name="L1125"></a>1125                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN, "CDEndInContent", <strong class="reserved">null</strong>);
<a id="L1126" name="L1126"></a>1126                             <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator,<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1127" name="L1127"></a>1127                         <em class="brace">}</em>
<a id="L1128" name="L1128"></a>1128                     <em class="brace">}</em>
<a id="L1129" name="L1129"></a>1129 
<a id="L1130" name="L1130"></a>1130                 <em class="brace">}</em>
<a id="L1131" name="L1131"></a>1131             <em class="brace">}</em>
<a id="L1132" name="L1132"></a>1132         <em class="brace">}</em> <em class="comment">// version of the document is XML 1.0</em>
<a id="L1133" name="L1133"></a>1133         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1134" name="L1134"></a>1134             <em class="comment">// we need to check all chracters as per production rules of XML 1.0</em>
<a id="L1135" name="L1135"></a>1135             <strong class="reserved">int</strong> i = 0;
<a id="L1136" name="L1136"></a>1136             <strong class="reserved">while</strong> (i &lt; datalength) <em class="brace">{</em>
<a id="L1137" name="L1137"></a>1137                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = dataarray[i++];
<a id="L1138" name="L1138"></a>1138                 <strong class="reserved">if</strong>( <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25740.html" title="Multiple defined in 6 places.">isInvalid</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) ) <em class="brace">{</em>
<a id="L1139" name="L1139"></a>1139                     <em class="comment">// check if this is a supplemental character</em>
<a id="L1140" name="L1140"></a>1140                     <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25654.html" title="Multiple defined in 4 places.">isHighSurrogate</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &amp;&amp; i &lt; datalength) <em class="brace">{</em>
<a id="L1141" name="L1141"></a>1141                         <strong class="reserved">char</strong> c2 = dataarray[i++];
<a id="L1142" name="L1142"></a>1142                         <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25841.html" title="Multiple defined in 4 places.">isLowSurrogate</a>(c2) &amp;&amp;
<a id="L1143" name="L1143"></a>1143                             <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26313.html" title="Multiple defined in 2 places.">isSupplemental</a>(<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/35050.html" title="Multiple defined in 2 places.">supplemental</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, c2))) <em class="brace">{</em>
<a id="L1144" name="L1144"></a>1144                             <strong class="reserved">continue</strong>;
<a id="L1145" name="L1145"></a>1145                         <em class="brace">}</em>
<a id="L1146" name="L1146"></a>1146                     <em class="brace">}</em>
<a id="L1147" name="L1147"></a>1147                     <em class="comment">// Note:  The key InvalidCharInCDSect from XMLMessages.properties</em>
<a id="L1148" name="L1148"></a>1148                     <em class="comment">// is being used to obtain the message and DOM error type</em>
<a id="L1149" name="L1149"></a>1149                     <em class="comment">// "wf-invalid-character" is used.  Also per DOM it is error but</em>
<a id="L1150" name="L1150"></a>1150                     <em class="comment">// as per XML spec. it is fatal error</em>
<a id="L1151" name="L1151"></a>1151                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1152" name="L1152"></a>1152                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,
<a id="L1153" name="L1153"></a>1153                         "InvalidCharInCDSect",
<a id="L1154" name="L1154"></a>1154                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, 16)<em class="brace">}</em>);
<a id="L1155" name="L1155"></a>1155                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1156" name="L1156"></a>1156                 <em class="brace">}</em>
<a id="L1157" name="L1157"></a>1157                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>==']') <em class="brace">{</em>
<a id="L1158" name="L1158"></a>1158                     <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = i;
<a id="L1159" name="L1159"></a>1159                     <strong class="reserved">if</strong> ( <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>&lt; datalength &amp;&amp; dataarray[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>]==']' ) <em class="brace">{</em>
<a id="L1160" name="L1160"></a>1160                         <strong class="reserved">while</strong> (++<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; datalength &amp;&amp; dataarray[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>]==']' ) <em class="brace">{</em>
<a id="L1161" name="L1161"></a>1161                             <em class="comment">// do nothing</em>
<a id="L1162" name="L1162"></a>1162                         <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163                         <strong class="reserved">if</strong> ( <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; datalength &amp;&amp; dataarray[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>]=='&gt;' ) <em class="brace">{</em>
<a id="L1164" name="L1164"></a>1164                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN, "CDEndInContent", <strong class="reserved">null</strong>);
<a id="L1165" name="L1165"></a>1165                             <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1166" name="L1166"></a>1166                         <em class="brace">}</em>
<a id="L1167" name="L1167"></a>1167                     <em class="brace">}</em>
<a id="L1168" name="L1168"></a>1168 
<a id="L1169" name="L1169"></a>1169                 <em class="brace">}</em>
<a id="L1170" name="L1170"></a>1170             <em class="brace">}</em>
<a id="L1171" name="L1171"></a>1171         <em class="brace">}</em> <em class="comment">// end-else fDocument.isXMLVersion()</em>
<a id="L1172" name="L1172"></a>1172 
<a id="L1173" name="L1173"></a>1173     <em class="brace">}</em> <em class="comment">// isCDataWF</em>
<a id="L1174" name="L1174"></a>1174 
<div class="comment">
      NON-DOM: check for valid XML characters as per the XML version
      @param datavalue
      @param isXML11Version = true if XML 1.1</div>
<a id="L1180" name="L1180"></a>1180     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/22271.html" title="Multiple referred from 8 places.">isXMLCharWF</a>(<a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a> errorHandler, <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a> locator,
<a id="L1181" name="L1181"></a>1181         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datavalue, <strong class="reserved">boolean</strong> <a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>)
<a id="L1182" name="L1182"></a>1182     <em class="brace">{</em>
<a id="L1183" name="L1183"></a>1183         <strong class="reserved">if</strong> ( datavalue == <strong class="reserved">null</strong> || (datavalue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) ) <em class="brace">{</em>
<a id="L1184" name="L1184"></a>1184             <strong class="reserved">return</strong>;
<a id="L1185" name="L1185"></a>1185         <em class="brace">}</em>
<a id="L1186" name="L1186"></a>1186 
<a id="L1187" name="L1187"></a>1187         <strong class="reserved">char</strong> [] dataarray = datavalue.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1188" name="L1188"></a>1188         <strong class="reserved">int</strong> datalength = dataarray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1189" name="L1189"></a>1189 
<a id="L1190" name="L1190"></a>1190         <em class="comment">// version of the document is XML 1.1</em>
<a id="L1191" name="L1191"></a>1191         <strong class="reserved">if</strong>(<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>)<em class="brace">{</em>
<a id="L1192" name="L1192"></a>1192             <em class="comment">//we need to check all characters as per production rules of XML11</em>
<a id="L1193" name="L1193"></a>1193             <strong class="reserved">int</strong> i = 0 ;
<a id="L1194" name="L1194"></a>1194             <strong class="reserved">while</strong> (i &lt; datalength) <em class="brace">{</em>
<a id="L1195" name="L1195"></a>1195                 <strong class="reserved">if</strong>(<a href="../D/9846.html" title="Multiple defined in 2 places.">XML11Char</a>.<a href="../D/26529.html" title="Multiple defined in 2 places.">isXML11Invalid</a>(dataarray[i++]))<em class="brace">{</em>
<a id="L1196" name="L1196"></a>1196                     <em class="comment">// check if this is a supplemental character</em>
<a id="L1197" name="L1197"></a>1197                     <strong class="reserved">char</strong> ch = dataarray[i-1];
<a id="L1198" name="L1198"></a>1198                     <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25654.html" title="Multiple defined in 4 places.">isHighSurrogate</a>(ch) &amp;&amp; i &lt; datalength) <em class="brace">{</em>
<a id="L1199" name="L1199"></a>1199                         <strong class="reserved">char</strong> ch2 = dataarray[i++];
<a id="L1200" name="L1200"></a>1200                         <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25841.html" title="Multiple defined in 4 places.">isLowSurrogate</a>(ch2) &amp;&amp;
<a id="L1201" name="L1201"></a>1201                             <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26313.html" title="Multiple defined in 2 places.">isSupplemental</a>(<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/35050.html" title="Multiple defined in 2 places.">supplemental</a>(ch, ch2))) <em class="brace">{</em>
<a id="L1202" name="L1202"></a>1202                             <strong class="reserved">continue</strong>;
<a id="L1203" name="L1203"></a>1203                         <em class="brace">}</em>
<a id="L1204" name="L1204"></a>1204                     <em class="brace">}</em>
<a id="L1205" name="L1205"></a>1205                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1206" name="L1206"></a>1206                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "InvalidXMLCharInDOM",
<a id="L1207" name="L1207"></a>1207                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(dataarray[i-1], 16)<em class="brace">}</em>);
<a id="L1208" name="L1208"></a>1208                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L1209" name="L1209"></a>1209                     "wf-invalid-character");
<a id="L1210" name="L1210"></a>1210                 <em class="brace">}</em>
<a id="L1211" name="L1211"></a>1211             <em class="brace">}</em>
<a id="L1212" name="L1212"></a>1212         <em class="brace">}</em> <em class="comment">// version of the document is XML 1.0</em>
<a id="L1213" name="L1213"></a>1213         <strong class="reserved">else</strong><em class="brace">{</em>
<a id="L1214" name="L1214"></a>1214             <em class="comment">// we need to check all characters as per production rules of XML 1.0</em>
<a id="L1215" name="L1215"></a>1215             <strong class="reserved">int</strong> i = 0 ;
<a id="L1216" name="L1216"></a>1216             <strong class="reserved">while</strong> (i &lt; datalength) <em class="brace">{</em>
<a id="L1217" name="L1217"></a>1217                 <strong class="reserved">if</strong>( <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25740.html" title="Multiple defined in 6 places.">isInvalid</a>(dataarray[i++]) ) <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218                     <em class="comment">// check if this is a supplemental character</em>
<a id="L1219" name="L1219"></a>1219                     <strong class="reserved">char</strong> ch = dataarray[i-1];
<a id="L1220" name="L1220"></a>1220                     <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25654.html" title="Multiple defined in 4 places.">isHighSurrogate</a>(ch) &amp;&amp; i &lt; datalength) <em class="brace">{</em>
<a id="L1221" name="L1221"></a>1221                         <strong class="reserved">char</strong> ch2 = dataarray[i++];
<a id="L1222" name="L1222"></a>1222                         <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25841.html" title="Multiple defined in 4 places.">isLowSurrogate</a>(ch2) &amp;&amp;
<a id="L1223" name="L1223"></a>1223                             <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26313.html" title="Multiple defined in 2 places.">isSupplemental</a>(<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/35050.html" title="Multiple defined in 2 places.">supplemental</a>(ch, ch2))) <em class="brace">{</em>
<a id="L1224" name="L1224"></a>1224                             <strong class="reserved">continue</strong>;
<a id="L1225" name="L1225"></a>1225                         <em class="brace">}</em>
<a id="L1226" name="L1226"></a>1226                     <em class="brace">}</em>
<a id="L1227" name="L1227"></a>1227                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1228" name="L1228"></a>1228                         <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "InvalidXMLCharInDOM",
<a id="L1229" name="L1229"></a>1229                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(dataarray[i-1], 16)<em class="brace">}</em>);
<a id="L1230" name="L1230"></a>1230                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L1231" name="L1231"></a>1231                     "wf-invalid-character");
<a id="L1232" name="L1232"></a>1232                 <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233             <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234         <em class="brace">}</em> <em class="comment">// end-else fDocument.isXMLVersion()</em>
<a id="L1235" name="L1235"></a>1235 
<a id="L1236" name="L1236"></a>1236     <em class="brace">}</em> <em class="comment">// isXMLCharWF</em>
<a id="L1237" name="L1237"></a>1237 
<div class="comment">
      NON-DOM: check if value of the comment is well-formed
      @param datavalue
      @param isXML11Version = true if XML 1.1</div>
<a id="L1243" name="L1243"></a>1243     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/21266.html" title="Multiple referred from 2 places.">isCommentWF</a>(<a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a> errorHandler, <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a> locator,
<a id="L1244" name="L1244"></a>1244         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datavalue, <strong class="reserved">boolean</strong> <a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>)
<a id="L1245" name="L1245"></a>1245     <em class="brace">{</em>
<a id="L1246" name="L1246"></a>1246         <strong class="reserved">if</strong> ( datavalue == <strong class="reserved">null</strong> || (datavalue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) ) <em class="brace">{</em>
<a id="L1247" name="L1247"></a>1247             <strong class="reserved">return</strong>;
<a id="L1248" name="L1248"></a>1248         <em class="brace">}</em>
<a id="L1249" name="L1249"></a>1249 
<a id="L1250" name="L1250"></a>1250         <strong class="reserved">char</strong> [] dataarray = datavalue.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>();
<a id="L1251" name="L1251"></a>1251         <strong class="reserved">int</strong> datalength = dataarray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> ;
<a id="L1252" name="L1252"></a>1252 
<a id="L1253" name="L1253"></a>1253         <em class="comment">// version of the document is XML 1.1</em>
<a id="L1254" name="L1254"></a>1254         <strong class="reserved">if</strong> (<a href="../S/5445.html#L2594" title="Defined at 2594 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">isXML11Version</a>) <em class="brace">{</em>
<a id="L1255" name="L1255"></a>1255             <em class="comment">// we need to check all chracters as per production rules of XML11</em>
<a id="L1256" name="L1256"></a>1256             <strong class="reserved">int</strong> i = 0 ;
<a id="L1257" name="L1257"></a>1257             <strong class="reserved">while</strong> (i &lt; datalength)<em class="brace">{</em>
<a id="L1258" name="L1258"></a>1258                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = dataarray[i++];
<a id="L1259" name="L1259"></a>1259                 <strong class="reserved">if</strong> ( <a href="../D/9846.html" title="Multiple defined in 2 places.">XML11Char</a>.<a href="../D/26529.html" title="Multiple defined in 2 places.">isXML11Invalid</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) ) <em class="brace">{</em>
<a id="L1260" name="L1260"></a>1260                     <em class="comment">// check if this is a supplemental character</em>
<a id="L1261" name="L1261"></a>1261                     <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25654.html" title="Multiple defined in 4 places.">isHighSurrogate</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &amp;&amp; i &lt; datalength) <em class="brace">{</em>
<a id="L1262" name="L1262"></a>1262                         <strong class="reserved">char</strong> c2 = dataarray[i++];
<a id="L1263" name="L1263"></a>1263                         <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25841.html" title="Multiple defined in 4 places.">isLowSurrogate</a>(c2) &amp;&amp;
<a id="L1264" name="L1264"></a>1264                             <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26313.html" title="Multiple defined in 2 places.">isSupplemental</a>(<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/35050.html" title="Multiple defined in 2 places.">supplemental</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, c2))) <em class="brace">{</em>
<a id="L1265" name="L1265"></a>1265                             <strong class="reserved">continue</strong>;
<a id="L1266" name="L1266"></a>1266                         <em class="brace">}</em>
<a id="L1267" name="L1267"></a>1267                     <em class="brace">}</em>
<a id="L1268" name="L1268"></a>1268                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,
<a id="L1269" name="L1269"></a>1269                         "InvalidCharInComment",
<a id="L1270" name="L1270"></a>1270                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> [] <em class="brace">{</em><a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(dataarray[i-1], 16)<em class="brace">}</em>);
<a id="L1271" name="L1271"></a>1271                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1272" name="L1272"></a>1272                 <em class="brace">}</em>
<a id="L1273" name="L1273"></a>1273                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '-' &amp;&amp; i &lt; datalength &amp;&amp; dataarray[i] == '-') <em class="brace">{</em>
<a id="L1274" name="L1274"></a>1274                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,
<a id="L1275" name="L1275"></a>1275                         "DashDashInComment", <strong class="reserved">null</strong>);
<a id="L1276" name="L1276"></a>1276                     <em class="comment">// invalid: '--' in comment</em>
<a id="L1277" name="L1277"></a>1277                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1278" name="L1278"></a>1278                 <em class="brace">}</em>
<a id="L1279" name="L1279"></a>1279             <em class="brace">}</em>
<a id="L1280" name="L1280"></a>1280         <em class="brace">}</em> <em class="comment">// version of the document is XML 1.0</em>
<a id="L1281" name="L1281"></a>1281         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1282" name="L1282"></a>1282             <em class="comment">// we need to check all chracters as per production rules of XML 1.0</em>
<a id="L1283" name="L1283"></a>1283             <strong class="reserved">int</strong> i = 0;
<a id="L1284" name="L1284"></a>1284             <strong class="reserved">while</strong> (i &lt; datalength)<em class="brace">{</em>
<a id="L1285" name="L1285"></a>1285                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = dataarray[i++];
<a id="L1286" name="L1286"></a>1286                 <strong class="reserved">if</strong>( <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25740.html" title="Multiple defined in 6 places.">isInvalid</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) )<em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287                     <em class="comment">// check if this is a supplemental character</em>
<a id="L1288" name="L1288"></a>1288                     <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25654.html" title="Multiple defined in 4 places.">isHighSurrogate</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &amp;&amp; i &lt; datalength) <em class="brace">{</em>
<a id="L1289" name="L1289"></a>1289                         <strong class="reserved">char</strong> c2 = dataarray[i++];
<a id="L1290" name="L1290"></a>1290                         <strong class="reserved">if</strong> (<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/25841.html" title="Multiple defined in 4 places.">isLowSurrogate</a>(c2) &amp;&amp;
<a id="L1291" name="L1291"></a>1291                             <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26313.html" title="Multiple defined in 2 places.">isSupplemental</a>(<a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/35050.html" title="Multiple defined in 2 places.">supplemental</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, c2))) <em class="brace">{</em>
<a id="L1292" name="L1292"></a>1292                             <strong class="reserved">continue</strong>;
<a id="L1293" name="L1293"></a>1293                         <em class="brace">}</em>
<a id="L1294" name="L1294"></a>1294                     <em class="brace">}</em>
<a id="L1295" name="L1295"></a>1295                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,
<a id="L1296" name="L1296"></a>1296                         "InvalidCharInComment", <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> [] <em class="brace">{</em><a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(dataarray[i-1], 16)<em class="brace">}</em>);
<a id="L1297" name="L1297"></a>1297                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1298" name="L1298"></a>1298                 <em class="brace">}</em>
<a id="L1299" name="L1299"></a>1299                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '-' &amp;&amp; i&lt;datalength &amp;&amp; dataarray[i]=='-')<em class="brace">{</em>
<a id="L1300" name="L1300"></a>1300                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(<a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.XML_DOMAIN,
<a id="L1301" name="L1301"></a>1301                         "DashDashInComment", <strong class="reserved">null</strong>);
<a id="L1302" name="L1302"></a>1302                     <em class="comment">// invalid: '--' in comment</em>
<a id="L1303" name="L1303"></a>1303                     <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR, "wf-invalid-character");
<a id="L1304" name="L1304"></a>1304                 <em class="brace">}</em>
<a id="L1305" name="L1305"></a>1305             <em class="brace">}</em>
<a id="L1306" name="L1306"></a>1306 
<a id="L1307" name="L1307"></a>1307         <em class="brace">}</em> <em class="comment">// end-else fDocument.isXMLVersion()</em>
<a id="L1308" name="L1308"></a>1308 
<a id="L1309" name="L1309"></a>1309     <em class="brace">}</em> <em class="comment">// isCommentWF</em>
<a id="L1310" name="L1310"></a>1310 
<div class="comment">
 NON-DOM: check if attribute value is well-formed
      @param attributes
      @param a
      @param value</div>
<a id="L1316" name="L1316"></a>1316     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/21185.html" title="Multiple referred from 3 places.">isAttrValueWF</a>(<a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a> errorHandler, <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>,
<a id="L1317" name="L1317"></a>1317             <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a> locator, <a href="../S/114.html#L56" title="Defined at 56 in src/org/w3c/dom/NamedNodeMap.java.">NamedNodeMap</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">boolean</strong> xml11Version) <em class="brace">{</em>
<a id="L1318" name="L1318"></a>1318         <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> <strong class="reserved">instanceof</strong> <a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a> &amp;&amp; ((<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>).<a href="../D/24190.html" title="Multiple defined in 2 places.">hasStringValue</a>()) <em class="brace">{</em>
<a id="L1319" name="L1319"></a>1319             <a href="../S/5428.html#L1180" title="Defined at 1180 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isXMLCharWF</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, xml11Version);
<a id="L1320" name="L1320"></a>1320         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1321" name="L1321"></a>1321                 <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17640.html" title="Multiple defined in 11 places.">getChildNodes</a>();
<a id="L1322" name="L1322"></a>1322             <em class="comment">//check each child node of the attribute's value</em>
<a id="L1323" name="L1323"></a>1323             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); j++) <em class="brace">{</em>
<a id="L1324" name="L1324"></a>1324                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> child = <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(j);
<a id="L1325" name="L1325"></a>1325                 <em class="comment">//If the attribute's child is an entity refernce</em>
<a id="L1326" name="L1326"></a>1326                 <strong class="reserved">if</strong> (child.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_REFERENCE_NODE) <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327                     <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> <a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a> = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>();
<a id="L1328" name="L1328"></a>1328                     <a href="../D/2913.html" title="Multiple defined in 2 places.">Entity</a> ent = <strong class="reserved">null</strong>;
<a id="L1329" name="L1329"></a>1329                     <em class="comment">//search for the entity in the docType</em>
<a id="L1330" name="L1330"></a>1330                     <em class="comment">//of the attribute's ownerDocument</em>
<a id="L1331" name="L1331"></a>1331                     <strong class="reserved">if</strong> (<a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1332" name="L1332"></a>1332                         <a href="../S/130.html#L55" title="Defined at 55 in src/org/w3c/dom/DocumentType.java.">DocumentType</a> docType = <a href="../D/28636.html" title="Multiple defined in 2 places.">owner</a>.<a href="../D/18550.html" title="Multiple defined in 5 places.">getDoctype</a>();
<a id="L1333" name="L1333"></a>1333                         <strong class="reserved">if</strong> (docType != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1334" name="L1334"></a>1334                             <a href="../S/114.html#L56" title="Defined at 56 in src/org/w3c/dom/NamedNodeMap.java.">NamedNodeMap</a> entities = docType.<a href="../D/18794.html" title="Multiple defined in 3 places.">getEntities</a>();
<a id="L1335" name="L1335"></a>1335                             ent = (<a href="../D/2913.html" title="Multiple defined in 2 places.">Entity</a>) entities.<a href="../D/20800.html" title="Multiple defined in 5 places.">getNamedItemNS</a>(
<a id="L1336" name="L1336"></a>1336                                     "*",
<a id="L1337" name="L1337"></a>1337                                     child.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>());
<a id="L1338" name="L1338"></a>1338                         <em class="brace">}</em>
<a id="L1339" name="L1339"></a>1339                     <em class="brace">}</em>
<a id="L1340" name="L1340"></a>1340                     <em class="comment">//If the entity was not found issue a fatal error</em>
<a id="L1341" name="L1341"></a>1341                     <strong class="reserved">if</strong> (ent == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1342" name="L1342"></a>1342                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.<a href="../D/16540.html" title="Multiple defined in 20 places.">formatMessage</a>(
<a id="L1343" name="L1343"></a>1343                             <a href="../S/5440.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/dom/DOMMessageFormatter.java.">DOMMessageFormatter</a>.DOM_DOMAIN, "UndeclaredEntRefInAttrValue",
<a id="L1344" name="L1344"></a>1344                             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>()<em class="brace">}</em>);
<a id="L1345" name="L1345"></a>1345                         <a href="../S/5428.html#L1364" title="Defined at 1364 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">reportDOMError</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_ERROR,
<a id="L1346" name="L1346"></a>1346                             "UndeclaredEntRefInAttrValue");
<a id="L1347" name="L1347"></a>1347                     <em class="brace">}</em>
<a id="L1348" name="L1348"></a>1348                 <em class="brace">}</em>
<a id="L1349" name="L1349"></a>1349                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1350" name="L1350"></a>1350                     <em class="comment">// Text node</em>
<a id="L1351" name="L1351"></a>1351                     <a href="../S/5428.html#L1180" title="Defined at 1180 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">isXMLCharWF</a>(errorHandler, <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, locator, child.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), xml11Version);
<a id="L1352" name="L1352"></a>1352                 <em class="brace">}</em>
<a id="L1353" name="L1353"></a>1353             <em class="brace">}</em>
<a id="L1354" name="L1354"></a>1354         <em class="brace">}</em>
<a id="L1355" name="L1355"></a>1355     <em class="brace">}</em>
<a id="L1356" name="L1356"></a>1356 
<a id="L1357" name="L1357"></a>1357 
<a id="L1358" name="L1358"></a>1358 
<div class="comment">
      Reports a DOM error to the user handler.
      If the error is fatal, the processing will be always aborted.</div>
<a id="L1364" name="L1364"></a>1364     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/26183.html" title="Multiple referred from 24 places.">reportDOMError</a>(<a href="../S/118.html#L58" title="Defined at 58 in src/org/w3c/dom/DOMErrorHandler.java.">DOMErrorHandler</a> errorHandler, <a href="../S/5426.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/dom/DOMErrorImpl.java.">DOMErrorImpl</a> <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>, <a href="../S/5437.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/dom/DOMLocatorImpl.java.">DOMLocatorImpl</a> locator,
<a id="L1365" name="L1365"></a>1365                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, <strong class="reserved">short</strong> severity, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> ) <em class="brace">{</em>
<a id="L1366" name="L1366"></a>1366         <strong class="reserved">if</strong>( errorHandler!=<strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L1367" name="L1367"></a>1367             <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L1368" name="L1368"></a>1368             <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>.fMessage = <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>;
<a id="L1369" name="L1369"></a>1369             <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>.fSeverity = severity;
<a id="L1370" name="L1370"></a>1370             <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>.fLocator = locator;
<a id="L1371" name="L1371"></a>1371             <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>.fType = <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1372" name="L1372"></a>1372             <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>.fRelatedData = locator.fRelatedNode;
<a id="L1373" name="L1373"></a>1373 
<a id="L1374" name="L1374"></a>1374             <strong class="reserved">if</strong>(!errorHandler.<a href="../D/23976.html" title="Multiple defined in 6 places.">handleError</a>(<a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>))
<a id="L1375" name="L1375"></a>1375                 <strong class="reserved">throw</strong> <a href="../D/10517.html" title="Multiple defined in 19 places.">abort</a>;
<a id="L1376" name="L1376"></a>1376         <em class="brace">}</em>
<a id="L1377" name="L1377"></a>1377         <strong class="reserved">if</strong>( severity==<a href="../S/126.html#L49" title="Defined at 49 in src/org/w3c/dom/DOMError.java.">DOMError</a>.SEVERITY_FATAL_ERROR )
<a id="L1378" name="L1378"></a>1378             <strong class="reserved">throw</strong> <a href="../D/10517.html" title="Multiple defined in 19 places.">abort</a>;
<a id="L1379" name="L1379"></a>1379     <em class="brace">}</em>
<a id="L1380" name="L1380"></a>1380 
<a id="L1381" name="L1381"></a>1381     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29939.html" title="Multiple referred from 5 places.">updateQName</a> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> qname)<em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382 
<a id="L1383" name="L1383"></a>1383         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>    = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>();
<a id="L1384" name="L1384"></a>1384         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>();
<a id="L1385" name="L1385"></a>1385         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>();
<a id="L1386" name="L1386"></a>1386         <em class="comment">// REVISIT: the symbols are added too often: start/endElement</em>
<a id="L1387" name="L1387"></a>1387         <em class="comment">//          and in the namespaceFixup. Should reduce number of calls to symbol table.</em>
<a id="L1388" name="L1388"></a>1388         qname.<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>!=<strong class="reserved">null</strong> &amp;&amp; <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()!=0)?fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>):<strong class="reserved">null</strong>;
<a id="L1389" name="L1389"></a>1389         qname.localpart = (<a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> != <strong class="reserved">null</strong>)?fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>):<strong class="reserved">null</strong>;
<a id="L1390" name="L1390"></a>1390         qname.rawname = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>());
<a id="L1391" name="L1391"></a>1391         qname.uri =  (<a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a> != <strong class="reserved">null</strong>)?fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a>):<strong class="reserved">null</strong>;
<a id="L1392" name="L1392"></a>1392     <em class="brace">}</em>
<a id="L1393" name="L1393"></a>1393 
<a id="L1394" name="L1394"></a>1394 
<a id="L1395" name="L1395"></a>1395 
<div class="comment">
 REVISIT: remove this method if DOM does not change spec.
          Performs partial XML 1.0 attribute value normalization and replaces
      attribute value if the value is changed after the normalization.
      DOM defines that normalizeDocument acts as if the document was going
      through a save and load cycle, given that serializer will not escape
      any '\n' or '\r' characters on load those will be normalized.
      Thus during normalize document we need to do the following:
      - perform "2.11 End-of-Line Handling"
      - replace #xD, #xA, #x9 with #x20 (white space).
      Note: This alg. won't attempt to resolve entity references or character entity
      references, since '&amp;' will be escaped during serialization and during loading
      this won't be recognized as entity reference, i.e. attribute value "&amp;foo;" will
      be serialized as "&amp;foo;" and thus after loading will be "&amp;foo;" again.
          @param value current attribute value
          @param attr current attribute
          @return String the value (could be original if normalization did not change
      the string)</div>
<a id="L1414" name="L1414"></a>1414     <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> normalizeAttributeValue(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>) <em class="brace">{</em>
<a id="L1415" name="L1415"></a>1415         <strong class="reserved">if</strong> (!<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/22666.html" title="Multiple defined in 7 places.">getSpecified</a>())<em class="brace">{</em>
<a id="L1416" name="L1416"></a>1416             <em class="comment">// specified attributes should already have a normalized form</em>
<a id="L1417" name="L1417"></a>1417             <em class="comment">// since those were added by validator</em>
<a id="L1418" name="L1418"></a>1418             <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1419" name="L1419"></a>1419         <em class="brace">}</em>
<a id="L1420" name="L1420"></a>1420         <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1421" name="L1421"></a>1421         <em class="comment">// ensure capacity</em>
<a id="L1422" name="L1422"></a>1422         <strong class="reserved">if</strong> (fNormalizedValue.ch.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1423" name="L1423"></a>1423             fNormalizedValue.ch = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>];
<a id="L1424" name="L1424"></a>1424         <em class="brace">}</em>
<a id="L1425" name="L1425"></a>1425         fNormalizedValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = 0;
<a id="L1426" name="L1426"></a>1426         <strong class="reserved">boolean</strong> <a href="../D/28301.html" title="Multiple defined in 4 places.">normalized</a> = <strong class="reserved">false</strong>;
<a id="L1427" name="L1427"></a>1427         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>; i++) <em class="brace">{</em>
<a id="L1428" name="L1428"></a>1428             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1429" name="L1429"></a>1429             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>==0x0009 || <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>==0x000A) <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430                fNormalizedValue.ch[fNormalizedValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>++] = ' ';
<a id="L1431" name="L1431"></a>1431                <a href="../D/28301.html" title="Multiple defined in 4 places.">normalized</a> = <strong class="reserved">true</strong>;
<a id="L1432" name="L1432"></a>1432             <em class="brace">}</em>
<a id="L1433" name="L1433"></a>1433             <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>==0x000D)<em class="brace">{</em>
<a id="L1434" name="L1434"></a>1434                <a href="../D/28301.html" title="Multiple defined in 4 places.">normalized</a> = <strong class="reserved">true</strong>;
<a id="L1435" name="L1435"></a>1435                fNormalizedValue.ch[fNormalizedValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>++] = ' ';
<a id="L1436" name="L1436"></a>1436                <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = i+1;
<a id="L1437" name="L1437"></a>1437                <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &amp;&amp; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>)==0x000A) i=<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>; <em class="comment">// skip following xA</em>
<a id="L1438" name="L1438"></a>1438             <em class="brace">}</em>
<a id="L1439" name="L1439"></a>1439             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1440" name="L1440"></a>1440                 fNormalizedValue.ch[fNormalizedValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>++] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L1441" name="L1441"></a>1441             <em class="brace">}</em>
<a id="L1442" name="L1442"></a>1442         <em class="brace">}</em>
<a id="L1443" name="L1443"></a>1443         <strong class="reserved">if</strong> (<a href="../D/28301.html" title="Multiple defined in 4 places.">normalized</a>)<em class="brace">{</em>
<a id="L1444" name="L1444"></a>1444            <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = fNormalizedValue.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1445" name="L1445"></a>1445            <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L1446" name="L1446"></a>1446         <em class="brace">}</em>
<a id="L1447" name="L1447"></a>1447         <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1448" name="L1448"></a>1448     <em class="brace">}</em>
<a id="L1449" name="L1449"></a>1449 
<a id="L1450" name="L1450"></a>1450     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../S/5428.html#L119" title="Referred from 119 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">XMLAttributesProxy</a>
<a id="L1451" name="L1451"></a>1451     <strong class="reserved">implements</strong> <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <em class="brace">{</em>
<a id="L1452" name="L1452"></a>1452         <strong class="reserved">protected</strong> <a href="../D/579.html" title="Multiple defined in 2 places.">AttributeMap</a> fAttributes;
<a id="L1453" name="L1453"></a>1453         <strong class="reserved">protected</strong> <a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a> fDocument;
<a id="L1454" name="L1454"></a>1454         <strong class="reserved">protected</strong> <a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a> fElement;
<a id="L1455" name="L1455"></a>1455 
<a id="L1456" name="L1456"></a>1456         <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> fAugmentations = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>(5);
<a id="L1457" name="L1457"></a>1457 
<a id="L1458" name="L1458"></a>1458 
<a id="L1459" name="L1459"></a>1459         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26924.html" title="Multiple referred from 25 places.">setAttributes</a>(<a href="../D/579.html" title="Multiple defined in 2 places.">AttributeMap</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a> doc, <a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a> elem) <em class="brace">{</em>
<a id="L1460" name="L1460"></a>1460             fDocument = doc;
<a id="L1461" name="L1461"></a>1461             fAttributes = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>;
<a id="L1462" name="L1462"></a>1462             fElement = elem;
<a id="L1463" name="L1463"></a>1463             <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1464" name="L1464"></a>1464                 <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1465" name="L1465"></a>1465 
<a id="L1466" name="L1466"></a>1466                 fAugmentations.<a href="../D/33924.html" title="Multiple defined in 54 places.">setSize</a>(<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1467" name="L1467"></a>1467                 <em class="comment">// REVISIT: this implementation does not store any value in augmentations</em>
<a id="L1468" name="L1468"></a>1468                 <em class="comment">//          and basically not keeping augs in parallel to attributes map</em>
<a id="L1469" name="L1469"></a>1469                 <em class="comment">//          untill all attributes are added (default attributes)</em>
<a id="L1470" name="L1470"></a>1470                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1471" name="L1471"></a>1471                     fAugmentations.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<strong class="reserved">new</strong> <a href="../S/5298.html#L38" title="Defined at 38 in src/com/sun/org/apache/xerces/internal/util/AugmentationsImpl.java.">AugmentationsImpl</a>(), i);
<a id="L1472" name="L1472"></a>1472                 <em class="brace">}</em>
<a id="L1473" name="L1473"></a>1473             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1474" name="L1474"></a>1474                 fAugmentations.<a href="../D/33924.html" title="Multiple defined in 54 places.">setSize</a>(0);
<a id="L1475" name="L1475"></a>1475             <em class="brace">}</em>
<a id="L1476" name="L1476"></a>1476         <em class="brace">}</em>
<a id="L1477" name="L1477"></a>1477 
<a id="L1478" name="L1478"></a>1478 
<div class="comment">
          This method adds default declarations
                  @see com.sun.org.apache.xerces.internal.xni.XMLAttributes#addAttribute(QName, String, String)</div>
<a id="L1483" name="L1483"></a>1483                 <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/9616.html" title="Multiple referred from 451 places.">addAttribute</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> qname, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrType, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrValue) <em class="brace">{</em>
<a id="L1484" name="L1484"></a>1484                         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = fElement.<a href="../S/5475.html#L834" title="Defined at 834 in src/com/sun/org/apache/xerces/internal/dom/ElementImpl.java.">getXercesAttribute</a>(qname.uri, qname.localpart);
<a id="L1485" name="L1485"></a>1485                         <em class="comment">// add defaults to the tree</em>
<a id="L1486" name="L1486"></a>1486                         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; 0) <em class="brace">{</em>
<a id="L1487" name="L1487"></a>1487                 <em class="comment">// the default attribute was removed by a user and needed to</em>
<a id="L1488" name="L1488"></a>1488                 <em class="comment">// be added back</em>
<a id="L1489" name="L1489"></a>1489                                 <a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)
<a id="L1490" name="L1490"></a>1490                                         ((<a href="../S/5445.html#L87" title="Defined at 87 in src/com/sun/org/apache/xerces/internal/dom/CoreDocumentImpl.java.">CoreDocumentImpl</a>) fElement.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>()).<a href="../D/13620.html" title="Multiple defined in 8 places.">createAttributeNS</a>(
<a id="L1491" name="L1491"></a>1491                                                 qname.uri,
<a id="L1492" name="L1492"></a>1492                                                 qname.rawname,
<a id="L1493" name="L1493"></a>1493                                                 qname.localpart);
<a id="L1494" name="L1494"></a>1494                 <em class="comment">// REVISIT: the following should also update ID table</em>
<a id="L1495" name="L1495"></a>1495                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/33367.html" title="Multiple defined in 12 places.">setNodeValue</a>(attrValue);
<a id="L1496" name="L1496"></a>1496                 <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = fElement.<a href="../S/5475.html#L818" title="Defined at 818 in src/com/sun/org/apache/xerces/internal/dom/ElementImpl.java.">setXercesAttributeNode</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L1497" name="L1497"></a>1497                 fAugmentations.<a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<strong class="reserved">new</strong> <a href="../S/5298.html#L38" title="Defined at 38 in src/com/sun/org/apache/xerces/internal/util/AugmentationsImpl.java.">AugmentationsImpl</a>(), <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1498" name="L1498"></a>1498                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/33986.html" title="Multiple defined in 5 places.">setSpecified</a>(<strong class="reserved">false</strong>);
<a id="L1499" name="L1499"></a>1499                         <em class="brace">}</em>
<a id="L1500" name="L1500"></a>1500                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501                 <em class="comment">// default attribute is in the tree</em>
<a id="L1502" name="L1502"></a>1502                 <em class="comment">// we don't need to do anything since prefix was already fixed</em>
<a id="L1503" name="L1503"></a>1503                 <em class="comment">// at the namespace fixup time and value must be same value, otherwise</em>
<a id="L1504" name="L1504"></a>1504                 <em class="comment">// attribute will be treated as specified and we will never reach</em>
<a id="L1505" name="L1505"></a>1505                 <em class="comment">// this method.</em>
<a id="L1506" name="L1506"></a>1506 
<a id="L1507" name="L1507"></a>1507             <em class="brace">}</em>
<a id="L1508" name="L1508"></a>1508             <strong class="reserved">return</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1509" name="L1509"></a>1509                 <em class="brace">}</em>
<a id="L1510" name="L1510"></a>1510 
<a id="L1511" name="L1511"></a>1511 
<a id="L1512" name="L1512"></a>1512         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25890.html" title="Multiple referred from 13 places.">removeAllAttributes</a>()<em class="brace">{</em>
<a id="L1513" name="L1513"></a>1513             <em class="comment">// REVISIT: implement</em>
<a id="L1514" name="L1514"></a>1514         <em class="brace">}</em>
<a id="L1515" name="L1515"></a>1515 
<a id="L1516" name="L1516"></a>1516 
<a id="L1517" name="L1517"></a>1517         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25906.html" title="Multiple referred from 3 places.">removeAttributeAt</a>(<strong class="reserved">int</strong> attrIndex)<em class="brace">{</em>
<a id="L1518" name="L1518"></a>1518             <em class="comment">// REVISIT: implement</em>
<a id="L1519" name="L1519"></a>1519         <em class="brace">}</em>
<a id="L1520" name="L1520"></a>1520 
<a id="L1521" name="L1521"></a>1521 
<a id="L1522" name="L1522"></a>1522         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17335.html" title="Multiple referred from 644 places.">getLength</a>()<em class="brace">{</em>
<a id="L1523" name="L1523"></a>1523             <strong class="reserved">return</strong>(fAttributes != <strong class="reserved">null</strong>)?fAttributes.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>():0;
<a id="L1524" name="L1524"></a>1524         <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525 
<a id="L1526" name="L1526"></a>1526 
<a id="L1527" name="L1527"></a>1527         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17035.html" title="Multiple referred from 302 places.">getIndex</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName)<em class="brace">{</em>
<a id="L1528" name="L1528"></a>1528             <em class="comment">// REVISIT: implement</em>
<a id="L1529" name="L1529"></a>1529             <strong class="reserved">return</strong> -1;
<a id="L1530" name="L1530"></a>1530         <em class="brace">}</em>
<a id="L1531" name="L1531"></a>1531 
<a id="L1532" name="L1532"></a>1532         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17035.html" title="Multiple referred from 302 places.">getIndex</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> localPart)<em class="brace">{</em>
<a id="L1533" name="L1533"></a>1533             <em class="comment">// REVISIT: implement</em>
<a id="L1534" name="L1534"></a>1534             <strong class="reserved">return</strong> -1;
<a id="L1535" name="L1535"></a>1535         <em class="brace">}</em>
<a id="L1536" name="L1536"></a>1536 
<a id="L1537" name="L1537"></a>1537         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27794.html" title="Multiple referred from 133 places.">setName</a>(<strong class="reserved">int</strong> attrIndex, <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> attrName)<em class="brace">{</em>
<a id="L1538" name="L1538"></a>1538             <em class="comment">// REVISIT: implement</em>
<a id="L1539" name="L1539"></a>1539         <em class="brace">}</em>
<a id="L1540" name="L1540"></a>1540 
<a id="L1541" name="L1541"></a>1541         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/17826.html" title="Multiple referred from 2652 places.">getName</a>(<strong class="reserved">int</strong> attrIndex, <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> attrName)<em class="brace">{</em>
<a id="L1542" name="L1542"></a>1542             <strong class="reserved">if</strong> (fAttributes !=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1543" name="L1543"></a>1543                 <a href="../S/5428.html#L1381" title="Defined at 1381 in src/com/sun/org/apache/xerces/internal/dom/DOMNormalizer.java.">updateQName</a>((<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>)fAttributes.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(attrIndex), attrName);
<a id="L1544" name="L1544"></a>1544             <em class="brace">}</em>
<a id="L1545" name="L1545"></a>1545         <em class="brace">}</em>
<a id="L1546" name="L1546"></a>1546 
<a id="L1547" name="L1547"></a>1547         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18418.html" title="Multiple referred from 112 places.">getPrefix</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1548" name="L1548"></a>1548             <em class="comment">// REVISIT: implement</em>
<a id="L1549" name="L1549"></a>1549             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1550" name="L1550"></a>1550         <em class="brace">}</em>
<a id="L1551" name="L1551"></a>1551 
<a id="L1552" name="L1552"></a>1552 
<a id="L1553" name="L1553"></a>1553         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19651.html" title="Multiple referred from 112 places.">getURI</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1554" name="L1554"></a>1554             <em class="comment">// REVISIT: implement</em>
<a id="L1555" name="L1555"></a>1555             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1556" name="L1556"></a>1556         <em class="brace">}</em>
<a id="L1557" name="L1557"></a>1557 
<a id="L1558" name="L1558"></a>1558 
<a id="L1559" name="L1559"></a>1559         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17419.html" title="Multiple referred from 323 places.">getLocalName</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1560" name="L1560"></a>1560             <em class="comment">// REVISIT: implement</em>
<a id="L1561" name="L1561"></a>1561             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1562" name="L1562"></a>1562         <em class="brace">}</em>
<a id="L1563" name="L1563"></a>1563 
<a id="L1564" name="L1564"></a>1564 
<a id="L1565" name="L1565"></a>1565         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18561.html" title="Multiple referred from 98 places.">getQName</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1566" name="L1566"></a>1566             <em class="comment">// REVISIT: implement</em>
<a id="L1567" name="L1567"></a>1567             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1568" name="L1568"></a>1568         <em class="brace">}</em>
<a id="L1569" name="L1569"></a>1569 
<a id="L1570" name="L1570"></a>1570          <strong class="reserved">public</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../S/5020.html#L687" title="Referred from 687 in src/com/sun/org/apache/xerces/internal/impl/XMLStreamReaderImpl.java.">getQualifiedName</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1571" name="L1571"></a>1571             <em class="comment">//return fAttributes.item(index).ge);</em>
<a id="L1572" name="L1572"></a>1572             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1573" name="L1573"></a>1573         <em class="brace">}</em>
<a id="L1574" name="L1574"></a>1574 
<a id="L1575" name="L1575"></a>1575         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28332.html" title="Multiple referred from 31 places.">setType</a>(<strong class="reserved">int</strong> attrIndex, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrType)<em class="brace">{</em>
<a id="L1576" name="L1576"></a>1576             <em class="comment">// REVISIT: implement</em>
<a id="L1577" name="L1577"></a>1577         <em class="brace">}</em>
<a id="L1578" name="L1578"></a>1578 
<a id="L1579" name="L1579"></a>1579 
<a id="L1580" name="L1580"></a>1580         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19609.html" title="Multiple referred from 540 places.">getType</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1581" name="L1581"></a>1581             <strong class="reserved">return</strong> "CDATA";
<a id="L1582" name="L1582"></a>1582         <em class="brace">}</em>
<a id="L1583" name="L1583"></a>1583 
<a id="L1584" name="L1584"></a>1584 
<a id="L1585" name="L1585"></a>1585         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19609.html" title="Multiple referred from 540 places.">getType</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName)<em class="brace">{</em>
<a id="L1586" name="L1586"></a>1586             <strong class="reserved">return</strong> "CDATA";
<a id="L1587" name="L1587"></a>1587         <em class="brace">}</em>
<a id="L1588" name="L1588"></a>1588 
<a id="L1589" name="L1589"></a>1589 
<a id="L1590" name="L1590"></a>1590         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19609.html" title="Multiple referred from 540 places.">getType</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>)<em class="brace">{</em>
<a id="L1591" name="L1591"></a>1591             <strong class="reserved">return</strong> "CDATA";
<a id="L1592" name="L1592"></a>1592         <em class="brace">}</em>
<a id="L1593" name="L1593"></a>1593 
<a id="L1594" name="L1594"></a>1594 
<a id="L1595" name="L1595"></a>1595         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28371.html" title="Multiple referred from 200 places.">setValue</a>(<strong class="reserved">int</strong> attrIndex, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrValue)<em class="brace">{</em>
<a id="L1596" name="L1596"></a>1596             <em class="comment">// REVISIT: is this desired behaviour?</em>
<a id="L1597" name="L1597"></a>1597             <em class="comment">// The values are updated in the case datatype-normalization is turned on</em>
<a id="L1598" name="L1598"></a>1598             <em class="comment">// in this case we need to make sure that specified attributes stay specified</em>
<a id="L1599" name="L1599"></a>1599 
<a id="L1600" name="L1600"></a>1600             <strong class="reserved">if</strong> (fAttributes != <strong class="reserved">null</strong>)<em class="brace">{</em>
<a id="L1601" name="L1601"></a>1601                 <a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)fAttributes.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(attrIndex);
<a id="L1602" name="L1602"></a>1602                 <strong class="reserved">boolean</strong> specified = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/22666.html" title="Multiple defined in 7 places.">getSpecified</a>();
<a id="L1603" name="L1603"></a>1603                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>(attrValue);
<a id="L1604" name="L1604"></a>1604                 <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/33986.html" title="Multiple defined in 5 places.">setSpecified</a>(specified);
<a id="L1605" name="L1605"></a>1605 
<a id="L1606" name="L1606"></a>1606             <em class="brace">}</em>
<a id="L1607" name="L1607"></a>1607         <em class="brace">}</em>
<a id="L1608" name="L1608"></a>1608 
<a id="L1609" name="L1609"></a>1609         <strong class="reserved">public</strong>  <strong class="reserved">void</strong> <a href="../R/28371.html" title="Multiple referred from 200 places.">setValue</a>(<strong class="reserved">int</strong> attrIndex, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrValue, <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)<em class="brace">{</em>
<a id="L1610" name="L1610"></a>1610             <a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>(attrIndex, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1611" name="L1611"></a>1611         <em class="brace">}</em>
<a id="L1612" name="L1612"></a>1612 
<a id="L1613" name="L1613"></a>1613         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19753.html" title="Multiple referred from 961 places.">getValue</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)<em class="brace">{</em>
<a id="L1614" name="L1614"></a>1614             <strong class="reserved">return</strong> (fAttributes !=<strong class="reserved">null</strong>)?fAttributes.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>).<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>():"";
<a id="L1615" name="L1615"></a>1615 
<a id="L1616" name="L1616"></a>1616         <em class="brace">}</em>
<a id="L1617" name="L1617"></a>1617 
<a id="L1618" name="L1618"></a>1618 
<a id="L1619" name="L1619"></a>1619         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19753.html" title="Multiple referred from 961 places.">getValue</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName)<em class="brace">{</em>
<a id="L1620" name="L1620"></a>1620             <em class="comment">// REVISIT: implement</em>
<a id="L1621" name="L1621"></a>1621             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1622" name="L1622"></a>1622         <em class="brace">}</em>
<a id="L1623" name="L1623"></a>1623 
<a id="L1624" name="L1624"></a>1624 
<a id="L1625" name="L1625"></a>1625         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19753.html" title="Multiple referred from 961 places.">getValue</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>)<em class="brace">{</em>
<a id="L1626" name="L1626"></a>1626             <strong class="reserved">if</strong> (fAttributes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1627" name="L1627"></a>1627                 <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> =  fAttributes.<a href="../D/20800.html" title="Multiple defined in 5 places.">getNamedItemNS</a>(uri, <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>);
<a id="L1628" name="L1628"></a>1628                 <strong class="reserved">return</strong>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != <strong class="reserved">null</strong>)? <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>():<strong class="reserved">null</strong>;
<a id="L1629" name="L1629"></a>1629             <em class="brace">}</em>
<a id="L1630" name="L1630"></a>1630             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1631" name="L1631"></a>1631         <em class="brace">}</em>
<a id="L1632" name="L1632"></a>1632 
<a id="L1633" name="L1633"></a>1633 
<a id="L1634" name="L1634"></a>1634         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5134.html#L666" title="Referred from 666 in src/com/sun/org/apache/xerces/internal/impl/XML11NSDocumentScannerImpl.java.">setNonNormalizedValue</a>(<strong class="reserved">int</strong> attrIndex, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrValue)<em class="brace">{</em>
<a id="L1635" name="L1635"></a>1635             <em class="comment">// REVISIT: implement</em>
<a id="L1636" name="L1636"></a>1636 
<a id="L1637" name="L1637"></a>1637         <em class="brace">}</em>
<a id="L1638" name="L1638"></a>1638 
<a id="L1639" name="L1639"></a>1639 
<a id="L1640" name="L1640"></a>1640         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/5160.html#L1222" title="Referred from 1222 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">getNonNormalizedValue</a>(<strong class="reserved">int</strong> attrIndex)<em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641             <em class="comment">// REVISIT: implement</em>
<a id="L1642" name="L1642"></a>1642             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1643" name="L1643"></a>1643         <em class="brace">}</em>
<a id="L1644" name="L1644"></a>1644 
<a id="L1645" name="L1645"></a>1645 
<a id="L1646" name="L1646"></a>1646         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28212.html" title="Multiple referred from 22 places.">setSpecified</a>(<strong class="reserved">int</strong> attrIndex, <strong class="reserved">boolean</strong> specified)<em class="brace">{</em>
<a id="L1647" name="L1647"></a>1647             <a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = (<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>)fAttributes.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(attrIndex);
<a id="L1648" name="L1648"></a>1648             <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/33986.html" title="Multiple defined in 5 places.">setSpecified</a>(specified);
<a id="L1649" name="L1649"></a>1649         <em class="brace">}</em>
<a id="L1650" name="L1650"></a>1650 
<a id="L1651" name="L1651"></a>1651         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22042.html" title="Multiple referred from 42 places.">isSpecified</a>(<strong class="reserved">int</strong> attrIndex)<em class="brace">{</em>
<a id="L1652" name="L1652"></a>1652             <strong class="reserved">return</strong>((<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>)fAttributes.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(attrIndex)).<a href="../D/22666.html" title="Multiple defined in 7 places.">getSpecified</a>();
<a id="L1653" name="L1653"></a>1653         <em class="brace">}</em>
<a id="L1654" name="L1654"></a>1654 
<a id="L1655" name="L1655"></a>1655         <strong class="reserved">public</strong> <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> <a href="../R/15178.html" title="Multiple referred from 26 places.">getAugmentations</a> (<strong class="reserved">int</strong> attributeIndex)<em class="brace">{</em>
<a id="L1656" name="L1656"></a>1656             <strong class="reserved">return</strong>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a>)fAugmentations.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(attributeIndex);
<a id="L1657" name="L1657"></a>1657         <em class="brace">}</em>
<a id="L1658" name="L1658"></a>1658 
<a id="L1659" name="L1659"></a>1659         <strong class="reserved">public</strong> <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> <a href="../R/15178.html" title="Multiple referred from 26 places.">getAugmentations</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> localPart)<em class="brace">{</em>
<a id="L1660" name="L1660"></a>1660             <em class="comment">// REVISIT: implement</em>
<a id="L1661" name="L1661"></a>1661             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1662" name="L1662"></a>1662         <em class="brace">}</em>
<a id="L1663" name="L1663"></a>1663 
<a id="L1664" name="L1664"></a>1664         <strong class="reserved">public</strong> <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> <a href="../R/15178.html" title="Multiple referred from 26 places.">getAugmentations</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName)<em class="brace">{</em>
<a id="L1665" name="L1665"></a>1665             <em class="comment">// REVISIT: implement</em>
<a id="L1666" name="L1666"></a>1666             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1667" name="L1667"></a>1667         <em class="brace">}</em>
<a id="L1668" name="L1668"></a>1668 
<div class="comment">
          Sets the augmentations of the attribute at the specified index.
          @param attrIndex The attribute index.
          @param augs      The augmentations.</div>
<a id="L1675" name="L1675"></a>1675         <strong class="reserved">public</strong> <strong class="reserved">void</strong> setAugmentations(<strong class="reserved">int</strong> attrIndex, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <em class="brace">{</em>
<a id="L1676" name="L1676"></a>1676             fAugmentations.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(augs, attrIndex);
<a id="L1677" name="L1677"></a>1677         <em class="brace">}</em>
<a id="L1678" name="L1678"></a>1678     <em class="brace">}</em>
<a id="L1679" name="L1679"></a>1679 
<a id="L1680" name="L1680"></a>1680     <em class="comment">//</em>
<a id="L1681" name="L1681"></a>1681     <em class="comment">// XMLDocumentHandler methods</em>
<a id="L1682" name="L1682"></a>1682     <em class="comment">//</em>
<a id="L1683" name="L1683"></a>1683 
<div class="comment">
      The start of the document.
      @param locator  The document locator, or null if the document
                      location cannot be reported during the parsing
                      of this document. However, it is <em>strongly</em>
                      recommended that a locator be supplied that can
                      at least report the system identifier of the
                      document.
      @param encoding The auto-detected IANA encoding name of the entity
                      stream. This value will be null in those situations
                      where the entity encoding is not auto-detected (e.g.
                      internal entities or a document entity that is
                      parsed from a java.io.Reader).
      @param namespaceContext
                      The namespace context in effect at the
                      start of this document.
                      This object represents the current context.
                      Implementors of this class are responsible
                      for copying the namespace bindings from the
                      the current context (and its parent contexts)
                      if that information is important.
      @param augs     Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1711" name="L1711"></a>1711     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28800.html" title="Multiple referred from 67 places.">startDocument</a>(<a href="../S/5517.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/xni/XMLLocator.java.">XMLLocator</a> locator, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>,
<a id="L1712" name="L1712"></a>1712                               <a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a> namespaceContext,
<a id="L1713" name="L1713"></a>1713                               <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1714" name="L1714"></a>1714         <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1715" name="L1715"></a>1715     <em class="brace">}</em>
<a id="L1716" name="L1716"></a>1716 
<div class="comment">
      Notifies of the presence of an XMLDecl line in the document. If
      present, this method will be called immediately following the
      startDocument call.
      @param version    The XML version.
      @param encoding   The IANA encoding name of the document, or null if
                        not specified.
      @param standalone The standalone value, or null if not specified.
      @param augs       Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1731" name="L1731"></a>1731     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30835.html" title="Multiple referred from 12 places.">xmlDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> standalone, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1732" name="L1732"></a>1732         <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1733" name="L1733"></a>1733     <em class="brace">}</em>
<a id="L1734" name="L1734"></a>1734 
<div class="comment">
      Notifies of the presence of the DOCTYPE line in the document.
      @param rootElement
                      The name of the root element.
      @param publicId The public identifier if an external DTD or null
                      if the external DTD is specified using SYSTEM.
      @param systemId The system identifier if an external DTD, null
                      otherwise.
      @param augs     Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1749" name="L1749"></a>1749     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13462.html" title="Multiple referred from 14 places.">doctypeDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rootElement, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1750" name="L1750"></a>1750         <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1751" name="L1751"></a>1751     <em class="brace">}</em>
<a id="L1752" name="L1752"></a>1752 
<div class="comment">
      A comment.
      @param text   The text in the comment.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by application to signal an error.</div>
<a id="L1762" name="L1762"></a>1762     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11671.html" title="Multiple referred from 126 places.">comment</a>(<a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1763" name="L1763"></a>1763     <em class="brace">}</em>
<a id="L1764" name="L1764"></a>1764 
<div class="comment">
      A processing instruction. Processing instructions consist of a
      target name and, optionally, text data. The data is only meaningful
      to the application.
      <p>
      Typically, a processing instruction's data will contain a series
      of pseudo-attributes. These pseudo-attributes follow the form of
      element attributes but are <strong>not</strong> parsed or presented
      to the application as anything other than text. The application is
      responsible for parsing the data.
      @param target The target.
      @param data   The data or null if none specified.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</p></div>
<a id="L1783" name="L1783"></a>1783     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25204.html" title="Multiple referred from 66 places.">processingInstruction</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1784" name="L1784"></a>1784         <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1785" name="L1785"></a>1785     <em class="brace">}</em>
<a id="L1786" name="L1786"></a>1786 
<div class="comment">
      The start of an element.
      @param element    The name of the element.
      @param attributes The element attributes.
      @param augs       Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1797" name="L1797"></a>1797         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1798" name="L1798"></a>1798                 <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1799" name="L1799"></a>1799                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> currentElement = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>) fCurrentNode;
<a id="L1800" name="L1800"></a>1800                 <strong class="reserved">int</strong> attrCount = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1801" name="L1801"></a>1801         <strong class="reserved">if</strong> (DEBUG_EVENTS) <em class="brace">{</em>
<a id="L1802" name="L1802"></a>1802             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;startElement: " +<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>+
<a id="L1803" name="L1803"></a>1803             " attrs.length="+attrCount);
<a id="L1804" name="L1804"></a>1804         <em class="brace">}</em>
<a id="L1805" name="L1805"></a>1805 
<a id="L1806" name="L1806"></a>1806                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; attrCount; i++) <em class="brace">{</em>
<a id="L1807" name="L1807"></a>1807                         <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(i, fAttrQName);
<a id="L1808" name="L1808"></a>1808                         <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <strong class="reserved">null</strong>;
<a id="L1809" name="L1809"></a>1809 
<a id="L1810" name="L1810"></a>1810                         <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = currentElement.<a href="../D/17095.html" title="Multiple defined in 7 places.">getAttributeNodeNS</a>(fAttrQName.uri, fAttrQName.localpart);
<a id="L1811" name="L1811"></a>1811             <a href="../S/5376.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/AttributePSVI.java.">AttributePSVI</a> attrPSVI =
<a id="L1812" name="L1812"></a>1812                                 (<a href="../S/5376.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/AttributePSVI.java.">AttributePSVI</a>) <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/17122.html" title="Multiple defined in 9 places.">getAugmentations</a>(i).<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ATTRIBUTE_PSVI);
<a id="L1813" name="L1813"></a>1813 
<a id="L1814" name="L1814"></a>1814                         <strong class="reserved">if</strong> (attrPSVI != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1815" name="L1815"></a>1815                 <em class="comment">//REVISIT: instead we should be using augmentations:</em>
<a id="L1816" name="L1816"></a>1816                 <em class="comment">// to set/retrieve Id attributes</em>
<a id="L1817" name="L1817"></a>1817                 <a href="../S/5343.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/XSTypeDefinition.java.">XSTypeDefinition</a> decl = attrPSVI.<a href="../D/20528.html" title="Multiple defined in 5 places.">getMemberTypeDefinition</a>();
<a id="L1818" name="L1818"></a>1818                 <strong class="reserved">boolean</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = <strong class="reserved">false</strong>;
<a id="L1819" name="L1819"></a>1819                 <strong class="reserved">if</strong> (decl != <strong class="reserved">null</strong>)<em class="brace">{</em>
<a id="L1820" name="L1820"></a>1820                     <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = ((<a href="../S/5227.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/impl/dv/XSSimpleType.java.">XSSimpleType</a>)decl).<a href="../D/25667.html" title="Multiple defined in 3 places.">isIDType</a>();
<a id="L1821" name="L1821"></a>1821                 <em class="brace">}</em> <strong class="reserved">else</strong><em class="brace">{</em>
<a id="L1822" name="L1822"></a>1822                     decl = attrPSVI.<a href="../D/23323.html" title="Multiple defined in 14 places.">getTypeDefinition</a>();
<a id="L1823" name="L1823"></a>1823                     <strong class="reserved">if</strong> (decl !=<strong class="reserved">null</strong>)<em class="brace">{</em>
<a id="L1824" name="L1824"></a>1824                        <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = ((<a href="../S/5227.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/impl/dv/XSSimpleType.java.">XSSimpleType</a>)decl).<a href="../D/25667.html" title="Multiple defined in 3 places.">isIDType</a>();
<a id="L1825" name="L1825"></a>1825                     <em class="brace">}</em>
<a id="L1826" name="L1826"></a>1826                 <em class="brace">}</em>
<a id="L1827" name="L1827"></a>1827                 <strong class="reserved">if</strong> (<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>)<em class="brace">{</em>
<a id="L1828" name="L1828"></a>1828                     ((<a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a>)currentElement).<a href="../D/32887.html" title="Multiple defined in 7 places.">setIdAttributeNode</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>, <strong class="reserved">true</strong>);
<a id="L1829" name="L1829"></a>1829                 <em class="brace">}</em>
<a id="L1830" name="L1830"></a>1830 
<a id="L1831" name="L1831"></a>1831                                 <strong class="reserved">if</strong> (fPSVI) <em class="brace">{</em>
<a id="L1832" name="L1832"></a>1832                                         ((<a href="../S/5455.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/dom/PSVIAttrNSImpl.java.">PSVIAttrNSImpl</a>) <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>).<a href="../D/33473.html" title="Multiple defined in 2 places.">setPSVI</a>(attrPSVI);
<a id="L1833" name="L1833"></a>1833                                 <em class="brace">}</em>
<a id="L1834" name="L1834"></a>1834                                 <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.DTNORMALIZATION) != 0) <em class="brace">{</em>
<a id="L1835" name="L1835"></a>1835                                         <em class="comment">// datatype-normalization</em>
<a id="L1836" name="L1836"></a>1836                                         <em class="comment">// NOTE: The specified value MUST be set after we set</em>
<a id="L1837" name="L1837"></a>1837                                         <em class="comment">//       the node value because that turns the "specified"</em>
<a id="L1838" name="L1838"></a>1838                                         <em class="comment">//       flag to "true" which may overwrite a "false"</em>
<a id="L1839" name="L1839"></a>1839                                         <em class="comment">//       value from the attribute list.</em>
<a id="L1840" name="L1840"></a>1840                                         <strong class="reserved">boolean</strong> specified = <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/22666.html" title="Multiple defined in 7 places.">getSpecified</a>();
<a id="L1841" name="L1841"></a>1841                                         <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>(attrPSVI.<a href="../D/22267.html" title="Multiple defined in 5 places.">getSchemaNormalizedValue</a>());
<a id="L1842" name="L1842"></a>1842                                         <strong class="reserved">if</strong> (!specified) <em class="brace">{</em>
<a id="L1843" name="L1843"></a>1843                                                 ((<a href="../D/564.html" title="Multiple defined in 2 places.">AttrImpl</a>) <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>).<a href="../D/33986.html" title="Multiple defined in 5 places.">setSpecified</a>(specified);
<a id="L1844" name="L1844"></a>1844                                         <em class="brace">}</em>
<a id="L1845" name="L1845"></a>1845                                 <em class="brace">}</em>
<a id="L1846" name="L1846"></a>1846                         <em class="brace">}</em>
<a id="L1847" name="L1847"></a>1847                 <em class="brace">}</em>
<a id="L1848" name="L1848"></a>1848         <em class="brace">}</em>
<a id="L1849" name="L1849"></a>1849 
<a id="L1850" name="L1850"></a>1850 
<div class="comment">
      An empty element.
      @param element    The name of the element.
      @param attributes The element attributes.
      @param augs       Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1861" name="L1861"></a>1861         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13687.html" title="Multiple referred from 19 places.">emptyElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1862" name="L1862"></a>1862                 <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1863" name="L1863"></a>1863         <strong class="reserved">if</strong> (DEBUG_EVENTS) <em class="brace">{</em>
<a id="L1864" name="L1864"></a>1864             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;emptyElement: " +<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1865" name="L1865"></a>1865         <em class="brace">}</em>
<a id="L1866" name="L1866"></a>1866 
<a id="L1867" name="L1867"></a>1867                 <a href="../D/34781.html" title="Multiple defined in 105 places.">startElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, augs);
<a id="L1868" name="L1868"></a>1868         <a href="../D/15448.html" title="Multiple defined in 90 places.">endElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, augs);
<a id="L1869" name="L1869"></a>1869         <em class="brace">}</em>
<a id="L1870" name="L1870"></a>1870 
<div class="comment">
      This method notifies the start of a general entity.
      <p>
      <strong>Note:</strong> This method is not called for entity references
      appearing as part of attribute values.
      @param name     The name of the general entity.
      @param identifier The resource identifier.
      @param encoding The auto-detected IANA encoding name of the entity
                      stream. This value will be null in those situations
                      where the entity encoding is not auto-detected (e.g.
                      internal entities or a document entity that is
                      parsed from a java.io.Reader).
      @param augs     Additional information that may include infoset augmentations
      @exception XNIException Thrown by handler to signal an error.</p></div>
<a id="L1888" name="L1888"></a>1888     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28820.html" title="Multiple referred from 13 places.">startGeneralEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,
<a id="L1889" name="L1889"></a>1889                                    <a href="../S/5523.html#L30" title="Defined at 30 in src/com/sun/org/apache/xerces/internal/xni/XMLResourceIdentifier.java.">XMLResourceIdentifier</a> identifier,
<a id="L1890" name="L1890"></a>1890                                    <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>,
<a id="L1891" name="L1891"></a>1891                                    <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1892" name="L1892"></a>1892     <em class="brace">}</em>
<a id="L1893" name="L1893"></a>1893 
<div class="comment">
      Notifies of the presence of a TextDecl line in an entity. If present,
      this method will be called immediately following the startEntity call.
      <p>
      <strong>Note:</strong> This method will never be called for the
      document entity; it is only called for external general entities
      referenced in document content.
      </p><p>
      <strong>Note:</strong> This method is not called for entity references
      appearing as part of attribute values.
      @param version  The XML version, or null if not specified.
      @param encoding The IANA encoding name of the entity.
      @param augs     Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</p></div>
<a id="L1912" name="L1912"></a>1912     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29152.html" title="Multiple referred from 20 places.">textDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1913" name="L1913"></a>1913     <em class="brace">}</em>
<a id="L1914" name="L1914"></a>1914 
<div class="comment">
      This method notifies the end of a general entity.
      <p>
      <strong>Note:</strong> This method is not called for entity references
      appearing as part of attribute values.
      @param name   The name of the entity.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</p></div>
<a id="L1927" name="L1927"></a>1927     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13772.html" title="Multiple referred from 13 places.">endGeneralEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1928" name="L1928"></a>1928     <em class="brace">}</em>
<a id="L1929" name="L1929"></a>1929 
<div class="comment">
      Character content.
      @param text   The content.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1939" name="L1939"></a>1939     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>(<a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1940" name="L1940"></a>1940     <em class="brace">}</em>
<a id="L1941" name="L1941"></a>1941 
<div class="comment">
      Ignorable whitespace. For this method to be called, the document
      source must have some way of determining that the text containing
      only whitespace characters should be considered ignorable. For
      example, the validator can determine if a length of whitespace
      characters in the document are ignorable based on the element
      content model.
      @param text   The ignorable whitespace.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1956" name="L1956"></a>1956     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20375.html" title="Multiple referred from 42 places.">ignorableWhitespace</a>(<a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L1957" name="L1957"></a>1957         allWhitespace = <strong class="reserved">true</strong>;
<a id="L1958" name="L1958"></a>1958     <em class="brace">}</em>
<a id="L1959" name="L1959"></a>1959 
<div class="comment">
      The end of an element.
      @param element The name of the element.
      @param augs    Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L1969" name="L1969"></a>1969         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1970" name="L1970"></a>1970                 <strong class="reserved">if</strong> (DEBUG_EVENTS) <em class="brace">{</em>
<a id="L1971" name="L1971"></a>1971                         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("==&gt;endElement: " + <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1972" name="L1972"></a>1972                 <em class="brace">}</em>
<a id="L1973" name="L1973"></a>1973 
<a id="L1974" name="L1974"></a>1974         <strong class="reserved">if</strong>(augs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1975" name="L1975"></a>1975                 <a href="../S/5379.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/ElementPSVI.java.">ElementPSVI</a> elementPSVI = (<a href="../S/5379.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/ElementPSVI.java.">ElementPSVI</a>) augs.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ELEMENT_PSVI);
<a id="L1976" name="L1976"></a>1976                 <strong class="reserved">if</strong> (elementPSVI != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1977" name="L1977"></a>1977                         <a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a> elementNode = (<a href="../D/2805.html" title="Multiple defined in 2 places.">ElementImpl</a>) fCurrentNode;
<a id="L1978" name="L1978"></a>1978                         <strong class="reserved">if</strong> (fPSVI) <em class="brace">{</em>
<a id="L1979" name="L1979"></a>1979                                 ((<a href="../S/5458.html#L40" title="Defined at 40 in src/com/sun/org/apache/xerces/internal/dom/PSVIElementNSImpl.java.">PSVIElementNSImpl</a>) fCurrentNode).<a href="../D/33473.html" title="Multiple defined in 2 places.">setPSVI</a>(elementPSVI);
<a id="L1980" name="L1980"></a>1980                         <em class="brace">}</em>
<a id="L1981" name="L1981"></a>1981                         <em class="comment">// include element default content (if one is available)</em>
<a id="L1982" name="L1982"></a>1982                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> normalizedValue = elementPSVI.<a href="../D/22267.html" title="Multiple defined in 5 places.">getSchemaNormalizedValue</a>();
<a id="L1983" name="L1983"></a>1983                         <strong class="reserved">if</strong> ((fConfiguration.features &amp; <a href="../S/5485.html#L73" title="Defined at 73 in src/com/sun/org/apache/xerces/internal/dom/DOMConfigurationImpl.java.">DOMConfigurationImpl</a>.DTNORMALIZATION) != 0) <em class="brace">{</em>
<a id="L1984" name="L1984"></a>1984                     <strong class="reserved">if</strong> (normalizedValue !=<strong class="reserved">null</strong>)
<a id="L1985" name="L1985"></a>1985                                     elementNode.<a href="../D/34099.html" title="Multiple defined in 11 places.">setTextContent</a>(normalizedValue);
<a id="L1986" name="L1986"></a>1986                         <em class="brace">}</em>
<a id="L1987" name="L1987"></a>1987                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1988" name="L1988"></a>1988                                 <em class="comment">// NOTE: this is a hack: it is possible that DOM had an empty element</em>
<a id="L1989" name="L1989"></a>1989                                 <em class="comment">// and validator sent default value using characters(), which we don't</em>
<a id="L1990" name="L1990"></a>1990                                 <em class="comment">// implement. Thus, here we attempt to add the default value.</em>
<a id="L1991" name="L1991"></a>1991                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = elementNode.<a href="../D/23051.html" title="Multiple defined in 13 places.">getTextContent</a>();
<a id="L1992" name="L1992"></a>1992                                 <strong class="reserved">if</strong> (<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L1993" name="L1993"></a>1993                                         <em class="comment">// default content could be provided</em>
<a id="L1994" name="L1994"></a>1994                         <strong class="reserved">if</strong> (normalizedValue !=<strong class="reserved">null</strong>)
<a id="L1995" name="L1995"></a>1995                             elementNode.<a href="../D/34099.html" title="Multiple defined in 11 places.">setTextContent</a>(normalizedValue);
<a id="L1996" name="L1996"></a>1996                                 <em class="brace">}</em>
<a id="L1997" name="L1997"></a>1997                         <em class="brace">}</em>
<a id="L1998" name="L1998"></a>1998                 <em class="brace">}</em>
<a id="L1999" name="L1999"></a>1999         <em class="brace">}</em>
<a id="L2000" name="L2000"></a>2000         <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001 
<a id="L2002" name="L2002"></a>2002 
<div class="comment">
      The start of a CDATA section.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L2011" name="L2011"></a>2011     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28793.html" title="Multiple referred from 30 places.">startCDATA</a>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L2012" name="L2012"></a>2012     <em class="brace">}</em>
<a id="L2013" name="L2013"></a>2013 
<div class="comment">
      The end of a CDATA section.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L2022" name="L2022"></a>2022     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13755.html" title="Multiple referred from 33 places.">endCDATA</a>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L2023" name="L2023"></a>2023     <em class="brace">}</em>
<a id="L2024" name="L2024"></a>2024 
<div class="comment">
      The end of the document.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</div>
<a id="L2033" name="L2033"></a>2033     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13761.html" title="Multiple referred from 58 places.">endDocument</a>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a><em class="brace">{</em>
<a id="L2034" name="L2034"></a>2034     <em class="brace">}</em>
<a id="L2035" name="L2035"></a>2035 
<a id="L2036" name="L2036"></a>2036 
<div class="comment">
     /** Sets the document source. */</div>
<a id="L2038" name="L2038"></a>2038     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27271.html" title="Multiple referred from 65 places.">setDocumentSource</a>(<a href="../S/5502.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLDocumentSource.java.">XMLDocumentSource</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>)<em class="brace">{</em>
<a id="L2039" name="L2039"></a>2039     <em class="brace">}</em>
<a id="L2040" name="L2040"></a>2040 
<a id="L2041" name="L2041"></a>2041 
<div class="comment">
     /** Returns the document source. */</div>
<a id="L2043" name="L2043"></a>2043     <strong class="reserved">public</strong> <a href="../S/5502.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLDocumentSource.java.">XMLDocumentSource</a> <a href="../R/16227.html" title="Multiple referred from 8 places.">getDocumentSource</a>()<em class="brace">{</em>
<a id="L2044" name="L2044"></a>2044         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2045" name="L2045"></a>2045     <em class="brace">}</em>
<a id="L2046" name="L2046"></a>2046 
<a id="L2047" name="L2047"></a>2047 
<a id="L2048" name="L2048"></a>2048 <em class="brace">}</em>  <em class="comment">// DOMNormalizer class</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L183">[^]</a><a href="#L2043">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
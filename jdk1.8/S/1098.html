<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/ScheduledThreadPoolExecutor.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L176">[^]</a><a href="#L1275">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L176" title="Defined at 176.">now</a></li>
<li><a href="#L235" title="Defined at 235.">getDelay</a></li>
<li><a href="#L239" title="Defined at 239.">compareTo</a></li>
<li><a href="#L263" title="Defined at 263.">isPeriodic</a></li>
<li><a href="#L270" title="Defined at 270.">setNextRunTime</a></li>
<li><a href="#L278" title="Defined at 278.">cancel</a></li>
<li><a href="#L288" title="Defined at 288.">run</a></li>
<li><a href="#L307" title="Defined at 307.">canRunInCurrentRunState</a></li>
<li><a href="#L324" title="Defined at 324.">delayedExecute</a></li>
<li><a href="#L344" title="Defined at 344.">reExecutePeriodic</a></li>
<li><a href="#L358" title="Defined at 358.">onShutdown</a></li>
<li><a href="#L399" title="Defined at 399.">decorateTask</a></li>
<li><a href="#L416" title="Defined at 416.">decorateTask</a></li>
<li><a href="#L492" title="Defined at 492.">triggerTime</a></li>
<li><a href="#L499" title="Defined at 499.">triggerTime</a></li>
<li><a href="#L511" title="Defined at 511.">overflowFree</a></li>
<li><a href="#L525" title="Defined at 525.">schedule</a></li>
<li><a href="#L541" title="Defined at 541.">schedule</a></li>
<li><a href="#L558" title="Defined at 558.">scheduleAtFixedRate</a></li>
<li><a href="#L582" title="Defined at 582.">scheduleWithFixedDelay</a></li>
<li><a href="#L621" title="Defined at 621.">execute</a></li>
<li><a href="#L631" title="Defined at 631.">submit</a></li>
<li><a href="#L639" title="Defined at 639.">submit</a></li>
<li><a href="#L647" title="Defined at 647.">submit</a></li>
<li><a href="#L662" title="Defined at 662.">setContinueExistingPeriodicTasksAfterShutdownPolicy</a></li>
<li><a href="#L679" title="Defined at 679.">getContinueExistingPeriodicTasksAfterShutdownPolicy</a></li>
<li><a href="#L694" title="Defined at 694.">setExecuteExistingDelayedTasksAfterShutdownPolicy</a></li>
<li><a href="#L711" title="Defined at 711.">getExecuteExistingDelayedTasksAfterShutdownPolicy</a></li>
<li><a href="#L724" title="Defined at 724.">setRemoveOnCancelPolicy</a></li>
<li><a href="#L738" title="Defined at 738.">getRemoveOnCancelPolicy</a></li>
<li><a href="#L760" title="Defined at 760.">shutdown</a></li>
<li><a href="#L785" title="Defined at 785.">shutdownNow</a></li>
<li><a href="#L800" title="Defined at 800.">getQueue</a></li>
<li><a href="#L868" title="Defined at 868.">setIndex</a></li>
<li><a href="#L877" title="Defined at 877.">siftUp</a></li>
<li><a href="#L895" title="Defined at 895.">siftDown</a></li>
<li><a href="#L916" title="Defined at 916.">grow</a></li>
<li><a href="#L927" title="Defined at 927.">indexOf</a></li>
<li><a href="#L944" title="Defined at 944.">contains</a></li>
<li><a href="#L954" title="Defined at 954.">remove</a></li>
<li><a href="#L977" title="Defined at 977.">size</a></li>
<li><a href="#L987" title="Defined at 987.">isEmpty</a></li>
<li><a href="#L991" title="Defined at 991.">remainingCapacity</a></li>
<li><a href="#L995" title="Defined at 995.">peek</a></li>
<li><a href="#L1005" title="Defined at 1005.">offer</a></li>
<li><a href="#L1032" title="Defined at 1032.">put</a></li>
<li><a href="#L1036" title="Defined at 1036.">add</a></li>
<li><a href="#L1040" title="Defined at 1040.">offer</a></li>
<li><a href="#L1050" title="Defined at 1050.">finishPoll</a></li>
<li><a href="#L1060" title="Defined at 1060.">poll</a></li>
<li><a href="#L1074" title="Defined at 1074.">take</a></li>
<li><a href="#L1108" title="Defined at 1108.">poll</a></li>
<li><a href="#L1150" title="Defined at 1150.">clear</a></li>
<li><a href="#L1171" title="Defined at 1171.">peekExpired</a></li>
<li><a href="#L1178" title="Defined at 1178.">drainTo</a></li>
<li><a href="#L1199" title="Defined at 1199.">drainTo</a></li>
<li><a href="#L1222" title="Defined at 1222.">toArray</a></li>
<li><a href="#L1232" title="Defined at 1232.">SuppressWarnings</a></li>
<li><a href="#L1233" title="Defined at 1233.">toArray</a></li>
<li><a href="#L1248" title="Defined at 1248.">iterator</a></li>
<li><a href="#L1264" title="Defined at 1264.">hasNext</a></li>
<li><a href="#L1268" title="Defined at 1268.">next</a></li>
<li><a href="#L1275" title="Defined at 1275.">remove</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> static java.util.concurrent.TimeUnit.NANOSECONDS;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.concurrent.atomic.AtomicLong;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.util.concurrent.locks.Condition;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.util.concurrent.locks.ReentrantLock;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.util.*;
<a id="L42" name="L42"></a>  42 
<div class="comment">
  A <a href="../S/1117.html#L319" title="Defined at 319 in src/java/util/concurrent/ThreadPoolExecutor.java.">ThreadPoolExecutor</a> that can additionally schedule
  commands to run after a given delay, or to execute
  periodically. This class is preferable to {@link java.util.Timer}
  when multiple worker threads are needed, or when the additional
  flexibility or capabilities of <a href="../S/1117.html#L319" title="Defined at 319 in src/java/util/concurrent/ThreadPoolExecutor.java.">ThreadPoolExecutor</a> (which
  this class extends) are required.
  <p>Delayed tasks execute no sooner than they are enabled, but
  without any real-time guarantees about when, after they are
  enabled, they will commence. Tasks scheduled for exactly the same
  execution time are enabled in first-in-first-out (FIFO) order of
  submission.
  </p><p>When a submitted task is cancelled before it is run, execution
  is suppressed. By default, such a cancelled task is not
  automatically removed from the work queue until its delay
  elapses. While this enables further inspection and monitoring, it
  may also cause unbounded retention of cancelled tasks. To avoid
  this, set <a href="#L724" title="Defined at 724.">setRemoveOnCancelPolicy</a> to <code>true</code>, which
  causes tasks to be immediately removed from the work queue at
  time of cancellation.
  </p><p>Successive executions of a task scheduled via
  <code>scheduleAtFixedRate</code> or
  <code>scheduleWithFixedDelay</code> do not overlap. While different
  executions may be performed by different threads, the effects of
  prior executions <a href="package-summary.html#MemoryVisibility"><i>happen-before</i></a>
  those of subsequent ones.
  </p><p>While this class inherits from <a href="../S/1117.html#L319" title="Defined at 319 in src/java/util/concurrent/ThreadPoolExecutor.java.">ThreadPoolExecutor</a>, a few
  of the inherited tuning methods are not useful for it. In
  particular, because it acts as a fixed-sized pool using
  <code>corePoolSize</code> threads and an unbounded queue, adjustments
  to <code>maximumPoolSize</code> have no useful effect. Additionally, it
  is almost never a good idea to set <code>corePoolSize</code> to zero or
  use <code>allowCoreThreadTimeOut</code> because this may leave the pool
  without threads to handle tasks once they become eligible to run.
  </p><p><b>Extension notes:</b> This class overrides the
  {@link ThreadPoolExecutor#execute(Runnable) execute} and
  {@link AbstractExecutorService#submit(Runnable) submit}
  methods to generate internal <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a> objects to
  control per-task delays and scheduling.  To preserve
  functionality, any further overrides of these methods in
  subclasses must invoke superclass versions, which effectively
  disables additional task customization.  However, this class
  provides alternative protected extension method
  <code>decorateTask</code> (one version each for <code>Runnable</code> and
  <code>Callable</code>) that can be used to customize the concrete task
  types used to execute commands entered via <code>execute</code>,
  <code>submit</code>, <code>schedule</code>, <code>scheduleAtFixedRate</code>,
  and <code>scheduleWithFixedDelay</code>.  By default, a
  <code>ScheduledThreadPoolExecutor</code> uses a task type extending
  <a href="../S/1127.html#L63" title="Defined at 63 in src/java/util/concurrent/FutureTask.java.">FutureTask</a>. However, this may be modified or replaced using
  subclasses of the form:
   </p><pre> {@code
  public class CustomScheduledExecutor extends ScheduledThreadPoolExecutor {
    static class CustomTask<v> implements RunnableScheduledFuture<v> { ... }
    protected <v> RunnableScheduledFuture<v> decorateTask(
                 Runnable r, RunnableScheduledFuture<v> task) {
        return new CustomTask<v>(r, task);
    }
    protected <v> RunnableScheduledFuture<v> decorateTask(
                 Callable<v> c, RunnableScheduledFuture<v> task) {
        return new CustomTask<v>(c, task);
    }
    // ... add constructors, etc.
  }}</v></v></v></v></v></v></v></v></v></v></v></pre>
  @since 1.5
  @author Doug Lea</div>
<a id="L121" name="L121"></a> 121 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6921.html" title="Multiple referred from 4 places.">ScheduledThreadPoolExecutor</a>
<a id="L122" name="L122"></a> 122         <strong class="reserved">extends</strong> <a href="../S/1117.html#L319" title="Defined at 319 in src/java/util/concurrent/ThreadPoolExecutor.java.">ThreadPoolExecutor</a>
<a id="L123" name="L123"></a> 123         <strong class="reserved">implements</strong> <a href="../S/1106.html#L94" title="Defined at 94 in src/java/util/concurrent/ScheduledExecutorService.java.">ScheduledExecutorService</a> <em class="brace">{</em>
<a id="L124" name="L124"></a> 124 
<div class="comment">
      This class specializes ThreadPoolExecutor implementation by
      1. Using a custom task type, ScheduledFutureTask for
         tasks, even those that don't require scheduling (i.e.,
         those submitted using ExecutorService execute, not
         ScheduledExecutorService methods) which are treated as
         delayed tasks with a delay of zero.
      2. Using a custom queue (DelayedWorkQueue), a variant of
         unbounded DelayQueue. The lack of capacity constraint and
         the fact that corePoolSize and maximumPoolSize are
         effectively identical simplifies some execution mechanics
         (see delayedExecute) compared to ThreadPoolExecutor.
      3. Supporting optional run-after-shutdown parameters, which
         leads to overrides of shutdown methods to remove and cancel
         tasks that should NOT be run after shutdown, as well as
         different recheck logic when task (re)submission overlaps
         with a shutdown.
      4. Task decoration methods to allow interception and
         instrumentation, which are needed because subclasses cannot
         otherwise override submit methods to get this effect. These
         don't have any impact on pool control logic though.</div>
<a id="L151" name="L151"></a> 151 
<div class="comment">
      False if should cancel/suppress periodic tasks on shutdown.</div>
<a id="L155" name="L155"></a> 155     <strong class="reserved">private</strong> <strong class="reserved">volatile</strong> <strong class="reserved">boolean</strong> continueExistingPeriodicTasksAfterShutdown;
<a id="L156" name="L156"></a> 156 
<div class="comment">
      False if should cancel non-periodic tasks on shutdown.</div>
<a id="L160" name="L160"></a> 160     <strong class="reserved">private</strong> <strong class="reserved">volatile</strong> <strong class="reserved">boolean</strong> executeExistingDelayedTasksAfterShutdown = <strong class="reserved">true</strong>;
<a id="L161" name="L161"></a> 161 
<div class="comment">
      True if ScheduledFutureTask.cancel should remove from queue</div>
<a id="L165" name="L165"></a> 165     <strong class="reserved">private</strong> <strong class="reserved">volatile</strong> <strong class="reserved">boolean</strong> removeOnCancel = <strong class="reserved">false</strong>;
<a id="L166" name="L166"></a> 166 
<div class="comment">
      Sequence number to break scheduling ties, and in turn to
      guarantee FIFO order among tied entries.</div>
<a id="L171" name="L171"></a> 171     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1088.html#L54" title="Defined at 54 in src/java/util/concurrent/atomic/AtomicLong.java.">AtomicLong</a> sequencer = <strong class="reserved">new</strong> <a href="../S/1088.html#L54" title="Defined at 54 in src/java/util/concurrent/atomic/AtomicLong.java.">AtomicLong</a>();
<a id="L172" name="L172"></a> 172 
<div class="comment">
      Returns current nanosecond time.</div>
<a id="L176" name="L176"></a> 176     <strong class="reserved">final</strong> <strong class="reserved">long</strong> <a href="../R/23834.html" title="Multiple referred from 91 places.">now</a>() <em class="brace">{</em>
<a id="L177" name="L177"></a> 177         <strong class="reserved">return</strong> <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L399" title="Defined at 399 in src/java/lang/System.java.">nanoTime</a>();
<a id="L178" name="L178"></a> 178     <em class="brace">}</em>
<a id="L179" name="L179"></a> 179 
<a id="L180" name="L180"></a> 180     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/6920.html" title="Multiple referred from 14 places.">ScheduledFutureTask</a>&lt;V&gt;
<a id="L181" name="L181"></a> 181             <strong class="reserved">extends</strong> <a href="../S/1127.html#L63" title="Defined at 63 in src/java/util/concurrent/FutureTask.java.">FutureTask</a>&lt;V&gt; <strong class="reserved">implements</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; <em class="brace">{</em>
<a id="L182" name="L182"></a> 182 
<div class="comment">
         /** Sequence number to break ties FIFO */</div>
<a id="L184" name="L184"></a> 184         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> sequenceNumber;
<a id="L185" name="L185"></a> 185 
<div class="comment">
         /** The time the task is enabled to execute in nanoTime units */</div>
<a id="L187" name="L187"></a> 187         <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>;
<a id="L188" name="L188"></a> 188 
<div class="comment">
          Period in nanoseconds for repeating tasks.  A positive
          value indicates fixed-rate execution.  A negative value
          indicates fixed-delay execution.  A value of 0 indicates a
          non-repeating task.</div>
<a id="L195" name="L195"></a> 195         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>;
<a id="L196" name="L196"></a> 196 
<div class="comment">
         /** The actual task to be re-enqueued by reExecutePeriodic */</div>
<a id="L198" name="L198"></a> 198         <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; outerTask = <strong class="reserved">this</strong>;
<a id="L199" name="L199"></a> 199 
<div class="comment">
          Index into delay queue, to support faster cancellation.</div>
<a id="L203" name="L203"></a> 203         <strong class="reserved">int</strong> heapIndex;
<a id="L204" name="L204"></a> 204 
<div class="comment">
          Creates a one-shot action with given nanoTime-based trigger time.</div>
<a id="L208" name="L208"></a> 208         ScheduledFutureTask(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> r, V <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, <strong class="reserved">long</strong> ns) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209             <strong class="reserved">super</strong>(r, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L210" name="L210"></a> 210             <strong class="reserved">this</strong>.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = ns;
<a id="L211" name="L211"></a> 211             <strong class="reserved">this</strong>.<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> = 0;
<a id="L212" name="L212"></a> 212             <strong class="reserved">this</strong>.sequenceNumber = sequencer.<a href="../D/16942.html" title="Multiple defined in 8 places.">getAndIncrement</a>();
<a id="L213" name="L213"></a> 213         <em class="brace">}</em>
<a id="L214" name="L214"></a> 214 
<div class="comment">
          Creates a periodic action with given nano time and period.</div>
<a id="L218" name="L218"></a> 218         ScheduledFutureTask(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> r, V <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, <strong class="reserved">long</strong> ns, <strong class="reserved">long</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>) <em class="brace">{</em>
<a id="L219" name="L219"></a> 219             <strong class="reserved">super</strong>(r, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L220" name="L220"></a> 220             <strong class="reserved">this</strong>.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = ns;
<a id="L221" name="L221"></a> 221             <strong class="reserved">this</strong>.<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> = <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>;
<a id="L222" name="L222"></a> 222             <strong class="reserved">this</strong>.sequenceNumber = sequencer.<a href="../D/16942.html" title="Multiple defined in 8 places.">getAndIncrement</a>();
<a id="L223" name="L223"></a> 223         <em class="brace">}</em>
<a id="L224" name="L224"></a> 224 
<div class="comment">
          Creates a one-shot action with given nanoTime-based trigger time.</div>
<a id="L228" name="L228"></a> 228         ScheduledFutureTask(<a href="../S/1040.html#L58" title="Defined at 58 in src/java/util/concurrent/Callable.java.">Callable</a>&lt;V&gt; <a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>, <strong class="reserved">long</strong> ns) <em class="brace">{</em>
<a id="L229" name="L229"></a> 229             <strong class="reserved">super</strong>(<a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>);
<a id="L230" name="L230"></a> 230             <strong class="reserved">this</strong>.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = ns;
<a id="L231" name="L231"></a> 231             <strong class="reserved">this</strong>.<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> = 0;
<a id="L232" name="L232"></a> 232             <strong class="reserved">this</strong>.sequenceNumber = sequencer.<a href="../D/16942.html" title="Multiple defined in 8 places.">getAndIncrement</a>();
<a id="L233" name="L233"></a> 233         <em class="brace">}</em>
<a id="L234" name="L234"></a> 234 
<a id="L235" name="L235"></a> 235         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/16098.html" title="Multiple referred from 19 places.">getDelay</a>(<a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L236" name="L236"></a> 236             <strong class="reserved">return</strong> unit.<a href="../D/13388.html" title="Multiple defined in 7 places.">convert</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> - <a href="../D/28344.html" title="Multiple defined in 43 places.">now</a>(), NANOSECONDS);
<a id="L237" name="L237"></a> 237         <em class="brace">}</em>
<a id="L238" name="L238"></a> 238 
<a id="L239" name="L239"></a> 239         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11724.html" title="Multiple referred from 291 places.">compareTo</a>(<a href="../S/1053.html#L49" title="Defined at 49 in src/java/util/concurrent/Delayed.java.">Delayed</a> other) <em class="brace">{</em>
<a id="L240" name="L240"></a> 240             <strong class="reserved">if</strong> (other == <strong class="reserved">this</strong>) <em class="comment">// compare zero if same object</em>
<a id="L241" name="L241"></a> 241                 <strong class="reserved">return</strong> 0;
<a id="L242" name="L242"></a> 242             <strong class="reserved">if</strong> (other <strong class="reserved">instanceof</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243                 <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;?&gt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (<a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;?&gt;)other;
<a id="L244" name="L244"></a> 244                 <strong class="reserved">long</strong> diff = <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> - <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>;
<a id="L245" name="L245"></a> 245                 <strong class="reserved">if</strong> (diff &lt; 0)
<a id="L246" name="L246"></a> 246                     <strong class="reserved">return</strong> -1;
<a id="L247" name="L247"></a> 247                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (diff &gt; 0)
<a id="L248" name="L248"></a> 248                     <strong class="reserved">return</strong> 1;
<a id="L249" name="L249"></a> 249                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sequenceNumber &lt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.sequenceNumber)
<a id="L250" name="L250"></a> 250                     <strong class="reserved">return</strong> -1;
<a id="L251" name="L251"></a> 251                 <strong class="reserved">else</strong>
<a id="L252" name="L252"></a> 252                     <strong class="reserved">return</strong> 1;
<a id="L253" name="L253"></a> 253             <em class="brace">}</em>
<a id="L254" name="L254"></a> 254             <strong class="reserved">long</strong> diff = <a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS) - other.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS);
<a id="L255" name="L255"></a> 255             <strong class="reserved">return</strong> (diff &lt; 0) ? -1 : (diff &gt; 0) ? 1 : 0;
<a id="L256" name="L256"></a> 256         <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<div class="comment">
          Returns <code>true</code> if this is a periodic (not a one-shot) action.
          @return <code>true</code> if periodic</div>
<a id="L263" name="L263"></a> 263         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21876.html" title="Multiple referred from 3 places.">isPeriodic</a>() <em class="brace">{</em>
<a id="L264" name="L264"></a> 264             <strong class="reserved">return</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> != 0;
<a id="L265" name="L265"></a> 265         <em class="brace">}</em>
<a id="L266" name="L266"></a> 266 
<div class="comment">
          Sets the next time to run for a periodic task.</div>
<a id="L270" name="L270"></a> 270         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1098.html#L295" title="Referred from 295 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">setNextRunTime</a>() <em class="brace">{</em>
<a id="L271" name="L271"></a> 271             <strong class="reserved">long</strong> p = <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>;
<a id="L272" name="L272"></a> 272             <strong class="reserved">if</strong> (p &gt; 0)
<a id="L273" name="L273"></a> 273                 <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> += p;
<a id="L274" name="L274"></a> 274             <strong class="reserved">else</strong>
<a id="L275" name="L275"></a> 275                 <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = <a href="../D/35697.html" title="Multiple defined in 2 places.">triggerTime</a>(-p);
<a id="L276" name="L276"></a> 276         <em class="brace">}</em>
<a id="L277" name="L277"></a> 277 
<a id="L278" name="L278"></a> 278         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/10918.html" title="Multiple referred from 41 places.">cancel</a>(<strong class="reserved">boolean</strong> mayInterruptIfRunning) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279             <strong class="reserved">boolean</strong> cancelled = <strong class="reserved">super</strong>.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>(mayInterruptIfRunning);
<a id="L280" name="L280"></a> 280             <strong class="reserved">if</strong> (cancelled &amp;&amp; removeOnCancel &amp;&amp; heapIndex &gt;= 0)
<a id="L281" name="L281"></a> 281                 <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<strong class="reserved">this</strong>);
<a id="L282" name="L282"></a> 282             <strong class="reserved">return</strong> cancelled;
<a id="L283" name="L283"></a> 283         <em class="brace">}</em>
<a id="L284" name="L284"></a> 284 
<div class="comment">
          Overrides FutureTask version so as to reset/requeue if periodic.</div>
<a id="L288" name="L288"></a> 288         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26539.html" title="Multiple referred from 715 places.">run</a>() <em class="brace">{</em>
<a id="L289" name="L289"></a> 289             <strong class="reserved">boolean</strong> periodic = <a href="../D/26055.html" title="Multiple defined in 2 places.">isPeriodic</a>();
<a id="L290" name="L290"></a> 290             <strong class="reserved">if</strong> (!<a href="../S/1098.html#L307" title="Defined at 307 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">canRunInCurrentRunState</a>(periodic))
<a id="L291" name="L291"></a> 291                 <a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>(<strong class="reserved">false</strong>);
<a id="L292" name="L292"></a> 292             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!periodic)
<a id="L293" name="L293"></a> 293                 <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>.<strong class="reserved">super</strong>.<a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>();
<a id="L294" name="L294"></a> 294             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>.<strong class="reserved">super</strong>.<a href="../S/1127.html#L297" title="Defined at 297 in src/java/util/concurrent/FutureTask.java.">runAndReset</a>()) <em class="brace">{</em>
<a id="L295" name="L295"></a> 295                 <a href="../S/1098.html#L270" title="Defined at 270 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">setNextRunTime</a>();
<a id="L296" name="L296"></a> 296                 <a href="../S/1098.html#L344" title="Defined at 344 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">reExecutePeriodic</a>(outerTask);
<a id="L297" name="L297"></a> 297             <em class="brace">}</em>
<a id="L298" name="L298"></a> 298         <em class="brace">}</em>
<a id="L299" name="L299"></a> 299     <em class="brace">}</em>
<a id="L300" name="L300"></a> 300 
<div class="comment">
      Returns true if can run a task given current run state
      and run-after-shutdown parameters.
      @param periodic true if this task periodic, false if delayed</div>
<a id="L307" name="L307"></a> 307     <strong class="reserved">boolean</strong> <a href="../R/10903.html" title="Multiple referred from 4 places.">canRunInCurrentRunState</a>(<strong class="reserved">boolean</strong> periodic) <em class="brace">{</em>
<a id="L308" name="L308"></a> 308         <strong class="reserved">return</strong> <a href="../S/1117.html#L840" title="Defined at 840 in src/java/util/concurrent/ThreadPoolExecutor.java.">isRunningOrShutdown</a>(periodic ?
<a id="L309" name="L309"></a> 309                                    continueExistingPeriodicTasksAfterShutdown :
<a id="L310" name="L310"></a> 310                                    executeExistingDelayedTasksAfterShutdown);
<a id="L311" name="L311"></a> 311     <em class="brace">}</em>
<a id="L312" name="L312"></a> 312 
<div class="comment">
      Main execution method for delayed or periodic tasks.  If pool
      is shut down, rejects the task. Otherwise adds task to queue
      and starts a thread, if necessary, to run it.  (We cannot
      prestart the thread to run the task because the task (probably)
      shouldn't be run yet.)  If the pool is shut down while the task
      is being added, cancel and remove it if required by state and
      run-after-shutdown parameters.
      @param task the task</div>
<a id="L324" name="L324"></a> 324     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13200.html" title="Multiple referred from 4 places.">delayedExecute</a>(<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; task) <em class="brace">{</em>
<a id="L325" name="L325"></a> 325         <strong class="reserved">if</strong> (<a href="../D/26240.html" title="Multiple defined in 5 places.">isShutdown</a>())
<a id="L326" name="L326"></a> 326             <a href="../S/1117.html#L822" title="Defined at 822 in src/java/util/concurrent/ThreadPoolExecutor.java.">reject</a>(task);
<a id="L327" name="L327"></a> 327         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L328" name="L328"></a> 328             <strong class="reserved">super</strong>.<a href="../D/21805.html" title="Multiple defined in 3 places.">getQueue</a>().<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(task);
<a id="L329" name="L329"></a> 329             <strong class="reserved">if</strong> (<a href="../D/26240.html" title="Multiple defined in 5 places.">isShutdown</a>() &amp;&amp;
<a id="L330" name="L330"></a> 330                 !<a href="../S/1098.html#L307" title="Defined at 307 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">canRunInCurrentRunState</a>(task.<a href="../D/26055.html" title="Multiple defined in 2 places.">isPeriodic</a>()) &amp;&amp;
<a id="L331" name="L331"></a> 331                 <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(task))
<a id="L332" name="L332"></a> 332                 task.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>(<strong class="reserved">false</strong>);
<a id="L333" name="L333"></a> 333             <strong class="reserved">else</strong>
<a id="L334" name="L334"></a> 334                 <a href="../S/1117.html#L1584" title="Defined at 1584 in src/java/util/concurrent/ThreadPoolExecutor.java.">ensurePrestart</a>();
<a id="L335" name="L335"></a> 335         <em class="brace">}</em>
<a id="L336" name="L336"></a> 336     <em class="brace">}</em>
<a id="L337" name="L337"></a> 337 
<div class="comment">
      Requeues a periodic task unless current run state precludes it.
      Same idea as delayedExecute except drops task rather than rejecting.
      @param task the task</div>
<a id="L344" name="L344"></a> 344     <strong class="reserved">void</strong> <a href="../S/1098.html#L296" title="Referred from 296 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">reExecutePeriodic</a>(<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; task) <em class="brace">{</em>
<a id="L345" name="L345"></a> 345         <strong class="reserved">if</strong> (<a href="../S/1098.html#L307" title="Defined at 307 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">canRunInCurrentRunState</a>(<strong class="reserved">true</strong>)) <em class="brace">{</em>
<a id="L346" name="L346"></a> 346             <strong class="reserved">super</strong>.<a href="../D/21805.html" title="Multiple defined in 3 places.">getQueue</a>().<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(task);
<a id="L347" name="L347"></a> 347             <strong class="reserved">if</strong> (!<a href="../S/1098.html#L307" title="Defined at 307 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">canRunInCurrentRunState</a>(<strong class="reserved">true</strong>) &amp;&amp; <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(task))
<a id="L348" name="L348"></a> 348                 task.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>(<strong class="reserved">false</strong>);
<a id="L349" name="L349"></a> 349             <strong class="reserved">else</strong>
<a id="L350" name="L350"></a> 350                 <a href="../S/1117.html#L1584" title="Defined at 1584 in src/java/util/concurrent/ThreadPoolExecutor.java.">ensurePrestart</a>();
<a id="L351" name="L351"></a> 351         <em class="brace">}</em>
<a id="L352" name="L352"></a> 352     <em class="brace">}</em>
<a id="L353" name="L353"></a> 353 
<div class="comment">
      Cancels and clears the queue of all tasks that should not be run
      due to shutdown policy.  Invoked within super.shutdown.</div>
<a id="L358" name="L358"></a> 358     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a> <strong class="reserved">void</strong> <a href="../R/23954.html" title="Multiple referred from 3 places.">onShutdown</a>() <em class="brace">{</em>
<a id="L359" name="L359"></a> 359         <a href="../S/1109.html#L180" title="Defined at 180 in src/java/util/concurrent/BlockingQueue.java.">BlockingQueue</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; q = <strong class="reserved">super</strong>.<a href="../D/21805.html" title="Multiple defined in 3 places.">getQueue</a>();
<a id="L360" name="L360"></a> 360         <strong class="reserved">boolean</strong> keepDelayed =
<a id="L361" name="L361"></a> 361             <a href="../S/1098.html#L711" title="Defined at 711 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">getExecuteExistingDelayedTasksAfterShutdownPolicy</a>();
<a id="L362" name="L362"></a> 362         <strong class="reserved">boolean</strong> keepPeriodic =
<a id="L363" name="L363"></a> 363             <a href="../S/1098.html#L679" title="Defined at 679 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">getContinueExistingPeriodicTasksAfterShutdownPolicy</a>();
<a id="L364" name="L364"></a> 364         <strong class="reserved">if</strong> (!keepDelayed &amp;&amp; !keepPeriodic) <em class="brace">{</em>
<a id="L365" name="L365"></a> 365             <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e : q.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>())
<a id="L366" name="L366"></a> 366                 <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;)
<a id="L367" name="L367"></a> 367                     ((<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;) e).<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>(<strong class="reserved">false</strong>);
<a id="L368" name="L368"></a> 368             q.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L369" name="L369"></a> 369         <em class="brace">}</em>
<a id="L370" name="L370"></a> 370         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L371" name="L371"></a> 371             <em class="comment">// Traverse snapshot to avoid iterator exceptions</em>
<a id="L372" name="L372"></a> 372             <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> e : q.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>()) <em class="brace">{</em>
<a id="L373" name="L373"></a> 373                 <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374                     <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; t =
<a id="L375" name="L375"></a> 375                         (<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;)e;
<a id="L376" name="L376"></a> 376                     <strong class="reserved">if</strong> ((t.<a href="../D/26055.html" title="Multiple defined in 2 places.">isPeriodic</a>() ? !keepPeriodic : !keepDelayed) ||
<a id="L377" name="L377"></a> 377                         t.<a href="../D/25280.html" title="Multiple defined in 8 places.">isCancelled</a>()) <em class="brace">{</em> <em class="comment">// also remove if already cancelled</em>
<a id="L378" name="L378"></a> 378                         <strong class="reserved">if</strong> (q.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(t))
<a id="L379" name="L379"></a> 379                             t.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>(<strong class="reserved">false</strong>);
<a id="L380" name="L380"></a> 380                     <em class="brace">}</em>
<a id="L381" name="L381"></a> 381                 <em class="brace">}</em>
<a id="L382" name="L382"></a> 382             <em class="brace">}</em>
<a id="L383" name="L383"></a> 383         <em class="brace">}</em>
<a id="L384" name="L384"></a> 384         <a href="../D/35739.html" title="Multiple defined in 2 places.">tryTerminate</a>();
<a id="L385" name="L385"></a> 385     <em class="brace">}</em>
<a id="L386" name="L386"></a> 386 
<div class="comment">
      Modifies or replaces the task used to execute a runnable.
      This method can be used to override the concrete
      class used for managing internal tasks.
      The default implementation simply returns the given task.
      @param runnable the submitted Runnable
      @param task the task created to execute the runnable
      @param <v> the type of the task's result
      @return a task that can execute the runnable
      @since 1.6</v></div>
<a id="L399" name="L399"></a> 399     <strong class="reserved">protected</strong> &lt;V&gt; <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; <a href="../R/13120.html" title="Multiple referred from 4 places.">decorateTask</a>(
<a id="L400" name="L400"></a> 400         <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> runnable, <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; task) <em class="brace">{</em>
<a id="L401" name="L401"></a> 401         <strong class="reserved">return</strong> task;
<a id="L402" name="L402"></a> 402     <em class="brace">}</em>
<a id="L403" name="L403"></a> 403 
<div class="comment">
      Modifies or replaces the task used to execute a callable.
      This method can be used to override the concrete
      class used for managing internal tasks.
      The default implementation simply returns the given task.
      @param callable the submitted Callable
      @param task the task created to execute the callable
      @param <v> the type of the task's result
      @return a task that can execute the callable
      @since 1.6</v></div>
<a id="L416" name="L416"></a> 416     <strong class="reserved">protected</strong> &lt;V&gt; <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; <a href="../R/13120.html" title="Multiple referred from 4 places.">decorateTask</a>(
<a id="L417" name="L417"></a> 417         <a href="../S/1040.html#L58" title="Defined at 58 in src/java/util/concurrent/Callable.java.">Callable</a>&lt;V&gt; <a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>, <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; task) <em class="brace">{</em>
<a id="L418" name="L418"></a> 418         <strong class="reserved">return</strong> task;
<a id="L419" name="L419"></a> 419     <em class="brace">}</em>
<a id="L420" name="L420"></a> 420 
<div class="comment">
      Creates a new <code>ScheduledThreadPoolExecutor</code> with the
      given core pool size.
      @param corePoolSize the number of threads to keep in the pool, even
             if they are idle, unless <code>allowCoreThreadTimeOut</code> is set
      @throws IllegalArgumentException if <code>corePoolSize &lt; 0</code></div>
<a id="L429" name="L429"></a> 429     <strong class="reserved">public</strong> ScheduledThreadPoolExecutor(<strong class="reserved">int</strong> corePoolSize) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430         <strong class="reserved">super</strong>(corePoolSize, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE, 0, NANOSECONDS,
<a id="L431" name="L431"></a> 431               <strong class="reserved">new</strong> <a href="../S/1098.html#L809" title="Defined at 809 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">DelayedWorkQueue</a>());
<a id="L432" name="L432"></a> 432     <em class="brace">}</em>
<a id="L433" name="L433"></a> 433 
<div class="comment">
      Creates a new <code>ScheduledThreadPoolExecutor</code> with the
      given initial parameters.
      @param corePoolSize the number of threads to keep in the pool, even
             if they are idle, unless <code>allowCoreThreadTimeOut</code> is set
      @param threadFactory the factory to use when the executor
             creates a new thread
      @throws IllegalArgumentException if <code>corePoolSize &lt; 0</code>
      @throws NullPointerException if <code>threadFactory</code> is null</div>
<a id="L445" name="L445"></a> 445     <strong class="reserved">public</strong> ScheduledThreadPoolExecutor(<strong class="reserved">int</strong> corePoolSize,
<a id="L446" name="L446"></a> 446                                        <a href="../S/1104.html#L58" title="Defined at 58 in src/java/util/concurrent/ThreadFactory.java.">ThreadFactory</a> threadFactory) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447         <strong class="reserved">super</strong>(corePoolSize, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE, 0, NANOSECONDS,
<a id="L448" name="L448"></a> 448               <strong class="reserved">new</strong> <a href="../S/1098.html#L809" title="Defined at 809 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">DelayedWorkQueue</a>(), threadFactory);
<a id="L449" name="L449"></a> 449     <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<div class="comment">
      Creates a new ScheduledThreadPoolExecutor with the given
      initial parameters.
      @param corePoolSize the number of threads to keep in the pool, even
             if they are idle, unless <code>allowCoreThreadTimeOut</code> is set
      @param handler the handler to use when execution is blocked
             because the thread bounds and queue capacities are reached
      @throws IllegalArgumentException if <code>corePoolSize &lt; 0</code>
      @throws NullPointerException if <code>handler</code> is null</div>
<a id="L462" name="L462"></a> 462     <strong class="reserved">public</strong> ScheduledThreadPoolExecutor(<strong class="reserved">int</strong> corePoolSize,
<a id="L463" name="L463"></a> 463                                        <a href="../S/1100.html#L44" title="Defined at 44 in src/java/util/concurrent/RejectedExecutionHandler.java.">RejectedExecutionHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>) <em class="brace">{</em>
<a id="L464" name="L464"></a> 464         <strong class="reserved">super</strong>(corePoolSize, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE, 0, NANOSECONDS,
<a id="L465" name="L465"></a> 465               <strong class="reserved">new</strong> <a href="../S/1098.html#L809" title="Defined at 809 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">DelayedWorkQueue</a>(), <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L466" name="L466"></a> 466     <em class="brace">}</em>
<a id="L467" name="L467"></a> 467 
<div class="comment">
      Creates a new ScheduledThreadPoolExecutor with the given
      initial parameters.
      @param corePoolSize the number of threads to keep in the pool, even
             if they are idle, unless <code>allowCoreThreadTimeOut</code> is set
      @param threadFactory the factory to use when the executor
             creates a new thread
      @param handler the handler to use when execution is blocked
             because the thread bounds and queue capacities are reached
      @throws IllegalArgumentException if <code>corePoolSize &lt; 0</code>
      @throws NullPointerException if <code>threadFactory</code> or
              <code>handler</code> is null</div>
<a id="L482" name="L482"></a> 482     <strong class="reserved">public</strong> ScheduledThreadPoolExecutor(<strong class="reserved">int</strong> corePoolSize,
<a id="L483" name="L483"></a> 483                                        <a href="../S/1104.html#L58" title="Defined at 58 in src/java/util/concurrent/ThreadFactory.java.">ThreadFactory</a> threadFactory,
<a id="L484" name="L484"></a> 484                                        <a href="../S/1100.html#L44" title="Defined at 44 in src/java/util/concurrent/RejectedExecutionHandler.java.">RejectedExecutionHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>) <em class="brace">{</em>
<a id="L485" name="L485"></a> 485         <strong class="reserved">super</strong>(corePoolSize, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE, 0, NANOSECONDS,
<a id="L486" name="L486"></a> 486               <strong class="reserved">new</strong> <a href="../S/1098.html#L809" title="Defined at 809 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">DelayedWorkQueue</a>(), threadFactory, <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L487" name="L487"></a> 487     <em class="brace">}</em>
<a id="L488" name="L488"></a> 488 
<div class="comment">
      Returns the trigger time of a delayed action.</div>
<a id="L492" name="L492"></a> 492     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/29526.html" title="Multiple referred from 6 places.">triggerTime</a>(<strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L493" name="L493"></a> 493         <strong class="reserved">return</strong> <a href="../D/35697.html" title="Multiple defined in 2 places.">triggerTime</a>(unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>((<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt; 0) ? 0 : <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>));
<a id="L494" name="L494"></a> 494     <em class="brace">}</em>
<a id="L495" name="L495"></a> 495 
<div class="comment">
      Returns the trigger time of a delayed action.</div>
<a id="L499" name="L499"></a> 499     <strong class="reserved">long</strong> <a href="../R/29526.html" title="Multiple referred from 6 places.">triggerTime</a>(<strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500         <strong class="reserved">return</strong> <a href="../D/28344.html" title="Multiple defined in 43 places.">now</a>() +
<a id="L501" name="L501"></a> 501             ((<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt; (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE &gt;&gt; 1)) ? <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> : <a href="../S/1098.html#L511" title="Defined at 511 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">overflowFree</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>));
<a id="L502" name="L502"></a> 502     <em class="brace">}</em>
<a id="L503" name="L503"></a> 503 
<div class="comment">
      Constrains the values of all delays in the queue to be within
      Long.MAX_VALUE of each other, to avoid overflow in compareTo.
      This may occur if a task is eligible to be dequeued, but has
      not yet been, while some other task is added with a delay of
      Long.MAX_VALUE.</div>
<a id="L511" name="L511"></a> 511     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../S/1098.html#L501" title="Referred from 501 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">overflowFree</a>(<strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512         <a href="../S/1053.html#L49" title="Defined at 49 in src/java/util/concurrent/Delayed.java.">Delayed</a> head = (<a href="../S/1053.html#L49" title="Defined at 49 in src/java/util/concurrent/Delayed.java.">Delayed</a>) <strong class="reserved">super</strong>.<a href="../D/21805.html" title="Multiple defined in 3 places.">getQueue</a>().<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L513" name="L513"></a> 513         <strong class="reserved">if</strong> (head != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L514" name="L514"></a> 514             <strong class="reserved">long</strong> headDelay = head.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS);
<a id="L515" name="L515"></a> 515             <strong class="reserved">if</strong> (headDelay &lt; 0 &amp;&amp; (<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> - headDelay &lt; 0))
<a id="L516" name="L516"></a> 516                 <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE + headDelay;
<a id="L517" name="L517"></a> 517         <em class="brace">}</em>
<a id="L518" name="L518"></a> 518         <strong class="reserved">return</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>;
<a id="L519" name="L519"></a> 519     <em class="brace">}</em>
<a id="L520" name="L520"></a> 520 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}</div>
<a id="L525" name="L525"></a> 525     <strong class="reserved">public</strong> <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>&lt;?&gt; <a href="../R/26667.html" title="Multiple referred from 16 places.">schedule</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>,
<a id="L526" name="L526"></a> 526                                        <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>,
<a id="L527" name="L527"></a> 527                                        <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528         <strong class="reserved">if</strong> (<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a> == <strong class="reserved">null</strong> || unit == <strong class="reserved">null</strong>)
<a id="L529" name="L529"></a> 529             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L530" name="L530"></a> 530         <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; t = <a href="../D/14700.html" title="Multiple defined in 2 places.">decorateTask</a>(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>,
<a id="L531" name="L531"></a> 531             <strong class="reserved">new</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>, <strong class="reserved">null</strong>,
<a id="L532" name="L532"></a> 532                                           <a href="../D/35697.html" title="Multiple defined in 2 places.">triggerTime</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>, unit)));
<a id="L533" name="L533"></a> 533         <a href="../S/1098.html#L324" title="Defined at 324 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">delayedExecute</a>(t);
<a id="L534" name="L534"></a> 534         <strong class="reserved">return</strong> t;
<a id="L535" name="L535"></a> 535     <em class="brace">}</em>
<a id="L536" name="L536"></a> 536 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}</div>
<a id="L541" name="L541"></a> 541     <strong class="reserved">public</strong> &lt;V&gt; <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>&lt;V&gt; <a href="../R/26667.html" title="Multiple referred from 16 places.">schedule</a>(<a href="../S/1040.html#L58" title="Defined at 58 in src/java/util/concurrent/Callable.java.">Callable</a>&lt;V&gt; <a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>,
<a id="L542" name="L542"></a> 542                                            <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>,
<a id="L543" name="L543"></a> 543                                            <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">if</strong> (<a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a> == <strong class="reserved">null</strong> || unit == <strong class="reserved">null</strong>)
<a id="L545" name="L545"></a> 545             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L546" name="L546"></a> 546         <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;V&gt; t = <a href="../D/14700.html" title="Multiple defined in 2 places.">decorateTask</a>(<a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>,
<a id="L547" name="L547"></a> 547             <strong class="reserved">new</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;V&gt;(<a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>,
<a id="L548" name="L548"></a> 548                                        <a href="../D/35697.html" title="Multiple defined in 2 places.">triggerTime</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>, unit)));
<a id="L549" name="L549"></a> 549         <a href="../S/1098.html#L324" title="Defined at 324 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">delayedExecute</a>(t);
<a id="L550" name="L550"></a> 550         <strong class="reserved">return</strong> t;
<a id="L551" name="L551"></a> 551     <em class="brace">}</em>
<a id="L552" name="L552"></a> 552 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}
      @throws IllegalArgumentException   {@inheritDoc}</div>
<a id="L558" name="L558"></a> 558     <strong class="reserved">public</strong> <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>&lt;?&gt; <a href="../S/1124.html#L735" title="Referred from 735 in src/java/util/concurrent/Executors.java.">scheduleAtFixedRate</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>,
<a id="L559" name="L559"></a> 559                                                   <strong class="reserved">long</strong> initialDelay,
<a id="L560" name="L560"></a> 560                                                   <strong class="reserved">long</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>,
<a id="L561" name="L561"></a> 561                                                   <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L562" name="L562"></a> 562         <strong class="reserved">if</strong> (<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a> == <strong class="reserved">null</strong> || unit == <strong class="reserved">null</strong>)
<a id="L563" name="L563"></a> 563             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L564" name="L564"></a> 564         <strong class="reserved">if</strong> (<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> &lt;= 0)
<a id="L565" name="L565"></a> 565             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L566" name="L566"></a> 566         <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; sft =
<a id="L567" name="L567"></a> 567             <strong class="reserved">new</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>,
<a id="L568" name="L568"></a> 568                                           <strong class="reserved">null</strong>,
<a id="L569" name="L569"></a> 569                                           <a href="../D/35697.html" title="Multiple defined in 2 places.">triggerTime</a>(initialDelay, unit),
<a id="L570" name="L570"></a> 570                                           unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>));
<a id="L571" name="L571"></a> 571         <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; t = <a href="../D/14700.html" title="Multiple defined in 2 places.">decorateTask</a>(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>, sft);
<a id="L572" name="L572"></a> 572         sft.outerTask = t;
<a id="L573" name="L573"></a> 573         <a href="../S/1098.html#L324" title="Defined at 324 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">delayedExecute</a>(t);
<a id="L574" name="L574"></a> 574         <strong class="reserved">return</strong> t;
<a id="L575" name="L575"></a> 575     <em class="brace">}</em>
<a id="L576" name="L576"></a> 576 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}
      @throws IllegalArgumentException   {@inheritDoc}</div>
<a id="L582" name="L582"></a> 582     <strong class="reserved">public</strong> <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>&lt;?&gt; <a href="../S/1124.html#L738" title="Referred from 738 in src/java/util/concurrent/Executors.java.">scheduleWithFixedDelay</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>,
<a id="L583" name="L583"></a> 583                                                      <strong class="reserved">long</strong> initialDelay,
<a id="L584" name="L584"></a> 584                                                      <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>,
<a id="L585" name="L585"></a> 585                                                      <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L586" name="L586"></a> 586         <strong class="reserved">if</strong> (<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a> == <strong class="reserved">null</strong> || unit == <strong class="reserved">null</strong>)
<a id="L587" name="L587"></a> 587             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L588" name="L588"></a> 588         <strong class="reserved">if</strong> (<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt;= 0)
<a id="L589" name="L589"></a> 589             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L590" name="L590"></a> 590         <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; sft =
<a id="L591" name="L591"></a> 591             <strong class="reserved">new</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>,
<a id="L592" name="L592"></a> 592                                           <strong class="reserved">null</strong>,
<a id="L593" name="L593"></a> 593                                           <a href="../D/35697.html" title="Multiple defined in 2 places.">triggerTime</a>(initialDelay, unit),
<a id="L594" name="L594"></a> 594                                           unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(-<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>));
<a id="L595" name="L595"></a> 595         <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt; t = <a href="../D/14700.html" title="Multiple defined in 2 places.">decorateTask</a>(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>, sft);
<a id="L596" name="L596"></a> 596         sft.outerTask = t;
<a id="L597" name="L597"></a> 597         <a href="../S/1098.html#L324" title="Defined at 324 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">delayedExecute</a>(t);
<a id="L598" name="L598"></a> 598         <strong class="reserved">return</strong> t;
<a id="L599" name="L599"></a> 599     <em class="brace">}</em>
<a id="L600" name="L600"></a> 600 
<div class="comment">
      Executes <code>command</code> with zero required delay.
      This has effect equivalent to
      {@link #schedule(Runnable,long,TimeUnit) schedule(command, 0, anyUnit)}.
      Note that inspections of the queue and of the list returned by
      <code>shutdownNow</code> will access the zero-delayed
      <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>, not the <code>command</code> itself.
      <p>A consequence of the use of <code>ScheduledFuture</code> objects is
      that {@link ThreadPoolExecutor#afterExecute afterExecute} is always
      called with a null second <code>Throwable</code> argument, even if the
      <code>command</code> terminated abruptly.  Instead, the <code>Throwable</code>
      thrown by such a task can be obtained via {@link Future#get}.
      @throws RejectedExecutionException at discretion of
              <code>RejectedExecutionHandler</code>, if the task
              cannot be accepted for execution because the
              executor has been shut down
      @throws NullPointerException {@inheritDoc}</p></div>
<a id="L621" name="L621"></a> 621     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14093.html" title="Multiple referred from 117 places.">execute</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>) <em class="brace">{</em>
<a id="L622" name="L622"></a> 622         <a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(<a href="../D/13010.html" title="Multiple defined in 4 places.">command</a>, 0, NANOSECONDS);
<a id="L623" name="L623"></a> 623     <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<a id="L625" name="L625"></a> 625     <em class="comment">// Override AbstractExecutorService methods</em>
<a id="L626" name="L626"></a> 626 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}</div>
<a id="L631" name="L631"></a> 631     <strong class="reserved">public</strong> <a href="../D/3465.html" title="Multiple defined in 2 places.">Future</a>&lt;?&gt; <a href="../R/29011.html" title="Multiple referred from 11 places.">submit</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> task) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632         <strong class="reserved">return</strong> <a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(task, 0, NANOSECONDS);
<a id="L633" name="L633"></a> 633     <em class="brace">}</em>
<a id="L634" name="L634"></a> 634 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}</div>
<a id="L639" name="L639"></a> 639     <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/3465.html" title="Multiple defined in 2 places.">Future</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../R/29011.html" title="Multiple referred from 11 places.">submit</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> task, <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L640" name="L640"></a> 640         <strong class="reserved">return</strong> <a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(<a href="../S/1124.html#L71" title="Defined at 71 in src/java/util/concurrent/Executors.java.">Executors</a>.<a href="../D/12117.html" title="Multiple defined in 4 places.">callable</a>(task, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>), 0, NANOSECONDS);
<a id="L641" name="L641"></a> 641     <em class="brace">}</em>
<a id="L642" name="L642"></a> 642 
<div class="comment">
      @throws RejectedExecutionException {@inheritDoc}
      @throws NullPointerException       {@inheritDoc}</div>
<a id="L647" name="L647"></a> 647     <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/3465.html" title="Multiple defined in 2 places.">Future</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../R/29011.html" title="Multiple referred from 11 places.">submit</a>(<a href="../S/1040.html#L58" title="Defined at 58 in src/java/util/concurrent/Callable.java.">Callable</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; task) <em class="brace">{</em>
<a id="L648" name="L648"></a> 648         <strong class="reserved">return</strong> <a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(task, 0, NANOSECONDS);
<a id="L649" name="L649"></a> 649     <em class="brace">}</em>
<a id="L650" name="L650"></a> 650 
<div class="comment">
      Sets the policy on whether to continue executing existing
      periodic tasks even when this executor has been <code>shutdown</code>.
      In this case, these tasks will only terminate upon
      <code>shutdownNow</code> or after setting the policy to
      <code>false</code> when already shutdown.
      This value is by default <code>false</code>.
      @param value if <code>true</code>, continue after shutdown, else don't
      @see #getContinueExistingPeriodicTasksAfterShutdownPolicy</div>
<a id="L662" name="L662"></a> 662     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setContinueExistingPeriodicTasksAfterShutdownPolicy(<strong class="reserved">boolean</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L663" name="L663"></a> 663         continueExistingPeriodicTasksAfterShutdown = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L664" name="L664"></a> 664         <strong class="reserved">if</strong> (!<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &amp;&amp; <a href="../D/26240.html" title="Multiple defined in 5 places.">isShutdown</a>())
<a id="L665" name="L665"></a> 665             <a href="../D/28493.html" title="Multiple defined in 2 places.">onShutdown</a>();
<a id="L666" name="L666"></a> 666     <em class="brace">}</em>
<a id="L667" name="L667"></a> 667 
<div class="comment">
      Gets the policy on whether to continue executing existing
      periodic tasks even when this executor has been <code>shutdown</code>.
      In this case, these tasks will only terminate upon
      <code>shutdownNow</code> or after setting the policy to
      <code>false</code> when already shutdown.
      This value is by default <code>false</code>.
      @return <code>true</code> if will continue after shutdown
      @see #setContinueExistingPeriodicTasksAfterShutdownPolicy</div>
<a id="L679" name="L679"></a> 679     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/1098.html#L363" title="Referred from 363 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">getContinueExistingPeriodicTasksAfterShutdownPolicy</a>() <em class="brace">{</em>
<a id="L680" name="L680"></a> 680         <strong class="reserved">return</strong> continueExistingPeriodicTasksAfterShutdown;
<a id="L681" name="L681"></a> 681     <em class="brace">}</em>
<a id="L682" name="L682"></a> 682 
<div class="comment">
      Sets the policy on whether to execute existing delayed
      tasks even when this executor has been <code>shutdown</code>.
      In this case, these tasks will only terminate upon
      <code>shutdownNow</code>, or after setting the policy to
      <code>false</code> when already shutdown.
      This value is by default <code>true</code>.
      @param value if <code>true</code>, execute after shutdown, else don't
      @see #getExecuteExistingDelayedTasksAfterShutdownPolicy</div>
<a id="L694" name="L694"></a> 694     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setExecuteExistingDelayedTasksAfterShutdownPolicy(<strong class="reserved">boolean</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695         executeExistingDelayedTasksAfterShutdown = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L696" name="L696"></a> 696         <strong class="reserved">if</strong> (!<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &amp;&amp; <a href="../D/26240.html" title="Multiple defined in 5 places.">isShutdown</a>())
<a id="L697" name="L697"></a> 697             <a href="../D/28493.html" title="Multiple defined in 2 places.">onShutdown</a>();
<a id="L698" name="L698"></a> 698     <em class="brace">}</em>
<a id="L699" name="L699"></a> 699 
<div class="comment">
      Gets the policy on whether to execute existing delayed
      tasks even when this executor has been <code>shutdown</code>.
      In this case, these tasks will only terminate upon
      <code>shutdownNow</code>, or after setting the policy to
      <code>false</code> when already shutdown.
      This value is by default <code>true</code>.
      @return <code>true</code> if will execute after shutdown
      @see #setExecuteExistingDelayedTasksAfterShutdownPolicy</div>
<a id="L711" name="L711"></a> 711     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/1098.html#L361" title="Referred from 361 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">getExecuteExistingDelayedTasksAfterShutdownPolicy</a>() <em class="brace">{</em>
<a id="L712" name="L712"></a> 712         <strong class="reserved">return</strong> executeExistingDelayedTasksAfterShutdown;
<a id="L713" name="L713"></a> 713     <em class="brace">}</em>
<a id="L714" name="L714"></a> 714 
<div class="comment">
      Sets the policy on whether cancelled tasks should be immediately
      removed from the work queue at time of cancellation.  This value is
      by default <code>false</code>.
      @param value if <code>true</code>, remove on cancellation, else don't
      @see #getRemoveOnCancelPolicy
      @since 1.7</div>
<a id="L724" name="L724"></a> 724     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setRemoveOnCancelPolicy(<strong class="reserved">boolean</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L725" name="L725"></a> 725         removeOnCancel = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L726" name="L726"></a> 726     <em class="brace">}</em>
<a id="L727" name="L727"></a> 727 
<div class="comment">
      Gets the policy on whether cancelled tasks should be immediately
      removed from the work queue at time of cancellation.  This value is
      by default <code>false</code>.
      @return <code>true</code> if cancelled tasks are immediately removed
              from the queue
      @see #setRemoveOnCancelPolicy
      @since 1.7</div>
<a id="L738" name="L738"></a> 738     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getRemoveOnCancelPolicy() <em class="brace">{</em>
<a id="L739" name="L739"></a> 739         <strong class="reserved">return</strong> removeOnCancel;
<a id="L740" name="L740"></a> 740     <em class="brace">}</em>
<a id="L741" name="L741"></a> 741 
<div class="comment">
      Initiates an orderly shutdown in which previously submitted
      tasks are executed, but no new tasks will be accepted.
      Invocation has no additional effect if already shut down.
      <p>This method does not wait for previously submitted tasks to
      complete execution.  Use {@link #awaitTermination awaitTermination}
      to do that.
      </p><p>If the <code>ExecuteExistingDelayedTasksAfterShutdownPolicy</code>
      has been set <code>false</code>, existing delayed tasks whose delays
      have not yet elapsed are cancelled.  And unless the {@code
      ContinueExistingPeriodicTasksAfterShutdownPolicy} has been set
      <code>true</code>, future executions of existing periodic tasks will
      be cancelled.
      @throws SecurityException {@inheritDoc}</p></div>
<a id="L760" name="L760"></a> 760     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28585.html" title="Multiple referred from 25 places.">shutdown</a>() <em class="brace">{</em>
<a id="L761" name="L761"></a> 761         <strong class="reserved">super</strong>.<a href="../D/34538.html" title="Multiple defined in 27 places.">shutdown</a>();
<a id="L762" name="L762"></a> 762     <em class="brace">}</em>
<a id="L763" name="L763"></a> 763 
<div class="comment">
      Attempts to stop all actively executing tasks, halts the
      processing of waiting tasks, and returns a list of the tasks
      that were awaiting execution.
      <p>This method does not wait for actively executing tasks to
      terminate.  Use {@link #awaitTermination awaitTermination} to
      do that.
      </p><p>There are no guarantees beyond best-effort attempts to stop
      processing actively executing tasks.  This implementation
      cancels tasks via {@link Thread#interrupt}, so any task that
      fails to respond to interrupts may never terminate.
      @return list of tasks that never commenced execution.
              Each element of this list is a <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>,
              including those tasks submitted using <code>execute</code>,
              which are for scheduling purposes used as the basis of a
              zero-delay <code>ScheduledFuture</code>.
      @throws SecurityException {@inheritDoc}</p></div>
<a id="L785" name="L785"></a> 785     <strong class="reserved">public</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <a href="../R/28588.html" title="Multiple referred from 2 places.">shutdownNow</a>() <em class="brace">{</em>
<a id="L786" name="L786"></a> 786         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/34541.html" title="Multiple defined in 6 places.">shutdownNow</a>();
<a id="L787" name="L787"></a> 787     <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
      Returns the task queue used by this executor.  Each element of
      this queue is a <a href="../S/1108.html#L47" title="Defined at 47 in src/java/util/concurrent/ScheduledFuture.java.">ScheduledFuture</a>, including those
      tasks submitted using <code>execute</code> which are for scheduling
      purposes used as the basis of a zero-delay
      <code>ScheduledFuture</code>.  Iteration over this queue is
      <em>not</em> guaranteed to traverse tasks in the order in
      which they will execute.
      @return the task queue</div>
<a id="L800" name="L800"></a> 800     <strong class="reserved">public</strong> <a href="../S/1109.html#L180" title="Defined at 180 in src/java/util/concurrent/BlockingQueue.java.">BlockingQueue</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <a href="../R/18571.html" title="Multiple referred from 7 places.">getQueue</a>() <em class="brace">{</em>
<a id="L801" name="L801"></a> 801         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/21805.html" title="Multiple defined in 3 places.">getQueue</a>();
<a id="L802" name="L802"></a> 802     <em class="brace">}</em>
<a id="L803" name="L803"></a> 803 
<div class="comment">
      Specialized delay queue. To mesh with TPE declarations, this
      class must be declared as a BlockingQueue<runnable> even though
      it can only hold RunnableScheduledFutures.</runnable></div>
<a id="L809" name="L809"></a> 809     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2175.html" title="Multiple referred from 5 places.">DelayedWorkQueue</a> <strong class="reserved">extends</strong> <a href="../S/994.html#L64" title="Defined at 64 in src/java/util/AbstractQueue.java.">AbstractQueue</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt;
<a id="L810" name="L810"></a> 810         <strong class="reserved">implements</strong> <a href="../S/1109.html#L180" title="Defined at 180 in src/java/util/concurrent/BlockingQueue.java.">BlockingQueue</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <em class="brace">{</em>
<a id="L811" name="L811"></a> 811 
<div class="comment">
          A DelayedWorkQueue is based on a heap-based data structure
          like those in DelayQueue and PriorityQueue, except that
          every ScheduledFutureTask also records its index into the
          heap array. This eliminates the need to find a task upon
          cancellation, greatly speeding up removal (down from O(n)
          to O(log n)), and reducing garbage retention that would
          otherwise occur by waiting for the element to rise to top
          before clearing. But because the queue may also hold
          RunnableScheduledFutures that are not ScheduledFutureTasks,
          we are not guaranteed to have such indices available, in
          which case we fall back to linear search. (We expect that
          most tasks will not be decorated, and that the faster cases
          will be much more common.)
          All heap operations must record index changes -- mainly
          within siftUp and siftDown. Upon removal, a task's
          heapIndex is set to -1. Note that ScheduledFutureTasks can
          appear at most once in the queue (this need not be true for
          other kinds of tasks or work queues), so are uniquely
          identified by heapIndex.</div>
<a id="L834" name="L834"></a> 834 
<a id="L835" name="L835"></a> 835         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> INITIAL_CAPACITY = 16;
<a id="L836" name="L836"></a> 836         <strong class="reserved">private</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;[] queue =
<a id="L837" name="L837"></a> 837             <strong class="reserved">new</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;[INITIAL_CAPACITY];
<a id="L838" name="L838"></a> 838         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">new</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a>();
<a id="L839" name="L839"></a> 839         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L840" name="L840"></a> 840 
<div class="comment">
          Thread designated to wait for the task at the head of the
          queue.  This variant of the Leader-Follower pattern
          (http://www.cs.wustl.edu/~schmidt/POSA/POSA2/) serves to
          minimize unnecessary timed waiting.  When a thread becomes
          the leader, it waits only for the next delay to elapse, but
          other threads await indefinitely.  The leader thread must
          signal some other thread before returning from take() or
          poll(...), unless some other thread becomes leader in the
          interim.  Whenever the head of the queue is replaced with a
          task with an earlier expiration time, the leader field is
          invalidated by being reset to null, and some waiting
          thread, but not necessarily the current leader, is
          signalled.  So waiting threads must be prepared to acquire
          and lose leadership while waiting.</div>
<a id="L857" name="L857"></a> 857         <strong class="reserved">private</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> leader = <strong class="reserved">null</strong>;
<a id="L858" name="L858"></a> 858 
<div class="comment">
          Condition signalled when a newer task becomes available at the
          head of the queue or a new thread may need to become leader.</div>
<a id="L863" name="L863"></a> 863         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a> = <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L864" name="L864"></a> 864 
<div class="comment">
          Sets f's heapIndex if it is a ScheduledFutureTask.</div>
<a id="L868" name="L868"></a> 868         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/27555.html" title="Multiple referred from 63 places.">setIndex</a>(<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; f, <strong class="reserved">int</strong> idx) <em class="brace">{</em>
<a id="L869" name="L869"></a> 869             <strong class="reserved">if</strong> (f <strong class="reserved">instanceof</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>)
<a id="L870" name="L870"></a> 870                 ((<a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>)f).heapIndex = idx;
<a id="L871" name="L871"></a> 871         <em class="brace">}</em>
<a id="L872" name="L872"></a> 872 
<div class="comment">
          Sifts element added at bottom up to its heap-ordered spot.
          Call only when holding lock.</div>
<a id="L877" name="L877"></a> 877         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/28597.html" title="Multiple referred from 4 places.">siftUp</a>(<strong class="reserved">int</strong> k, <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L878" name="L878"></a> 878             <strong class="reserved">while</strong> (k &gt; 0) <em class="brace">{</em>
<a id="L879" name="L879"></a> 879                 <strong class="reserved">int</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = (k - 1) &gt;&gt;&gt; 1;
<a id="L880" name="L880"></a> 880                 <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; e = queue[<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>];
<a id="L881" name="L881"></a> 881                 <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(e) &gt;= 0)
<a id="L882" name="L882"></a> 882                     <strong class="reserved">break</strong>;
<a id="L883" name="L883"></a> 883                 queue[k] = e;
<a id="L884" name="L884"></a> 884                 <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(e, k);
<a id="L885" name="L885"></a> 885                 k = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L886" name="L886"></a> 886             <em class="brace">}</em>
<a id="L887" name="L887"></a> 887             queue[k] = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L888" name="L888"></a> 888             <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, k);
<a id="L889" name="L889"></a> 889         <em class="brace">}</em>
<a id="L890" name="L890"></a> 890 
<div class="comment">
          Sifts element added at top down to its heap-ordered spot.
          Call only when holding lock.</div>
<a id="L895" name="L895"></a> 895         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/28594.html" title="Multiple referred from 5 places.">siftDown</a>(<strong class="reserved">int</strong> k, <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L896" name="L896"></a> 896             <strong class="reserved">int</strong> half = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;&gt;&gt; 1;
<a id="L897" name="L897"></a> 897             <strong class="reserved">while</strong> (k &lt; half) <em class="brace">{</em>
<a id="L898" name="L898"></a> 898                 <strong class="reserved">int</strong> child = (k &lt;&lt; 1) + 1;
<a id="L899" name="L899"></a> 899                 <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = queue[child];
<a id="L900" name="L900"></a> 900                 <strong class="reserved">int</strong> right = child + 1;
<a id="L901" name="L901"></a> 901                 <strong class="reserved">if</strong> (right &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &amp;&amp; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(queue[right]) &gt; 0)
<a id="L902" name="L902"></a> 902                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = queue[child = right];
<a id="L903" name="L903"></a> 903                 <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/13068.html" title="Multiple defined in 86 places.">compareTo</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) &lt;= 0)
<a id="L904" name="L904"></a> 904                     <strong class="reserved">break</strong>;
<a id="L905" name="L905"></a> 905                 queue[k] = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L906" name="L906"></a> 906                 <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, k);
<a id="L907" name="L907"></a> 907                 k = child;
<a id="L908" name="L908"></a> 908             <em class="brace">}</em>
<a id="L909" name="L909"></a> 909             queue[k] = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L910" name="L910"></a> 910             <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, k);
<a id="L911" name="L911"></a> 911         <em class="brace">}</em>
<a id="L912" name="L912"></a> 912 
<div class="comment">
          Resizes the heap array.  Call only when holding lock.</div>
<a id="L916" name="L916"></a> 916         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20041.html" title="Multiple referred from 53 places.">grow</a>() <em class="brace">{</em>
<a id="L917" name="L917"></a> 917             <strong class="reserved">int</strong> oldCapacity = queue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L918" name="L918"></a> 918             <strong class="reserved">int</strong> newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); <em class="comment">// grow 50%</em>
<a id="L919" name="L919"></a> 919             <strong class="reserved">if</strong> (newCapacity &lt; 0) <em class="comment">// overflow</em>
<a id="L920" name="L920"></a> 920                 newCapacity = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L921" name="L921"></a> 921             queue = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(queue, newCapacity);
<a id="L922" name="L922"></a> 922         <em class="brace">}</em>
<a id="L923" name="L923"></a> 923 
<div class="comment">
          Finds index of given object, or -1 if absent.</div>
<a id="L927" name="L927"></a> 927         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928             <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L929" name="L929"></a> 929                 <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> <strong class="reserved">instanceof</strong> <a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>) <em class="brace">{</em>
<a id="L930" name="L930"></a> 930                     <strong class="reserved">int</strong> i = ((<a href="../S/1098.html#L180" title="Defined at 180 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">ScheduledFutureTask</a>) <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>).heapIndex;
<a id="L931" name="L931"></a> 931                     <em class="comment">// Sanity check; x could conceivably be a</em>
<a id="L932" name="L932"></a> 932                     <em class="comment">// ScheduledFutureTask from some other pool.</em>
<a id="L933" name="L933"></a> 933                     <strong class="reserved">if</strong> (i &gt;= 0 &amp;&amp; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &amp;&amp; queue[i] == <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>)
<a id="L934" name="L934"></a> 934                         <strong class="reserved">return</strong> i;
<a id="L935" name="L935"></a> 935                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L936" name="L936"></a> 936                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++)
<a id="L937" name="L937"></a> 937                         <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(queue[i]))
<a id="L938" name="L938"></a> 938                             <strong class="reserved">return</strong> i;
<a id="L939" name="L939"></a> 939                 <em class="brace">}</em>
<a id="L940" name="L940"></a> 940             <em class="brace">}</em>
<a id="L941" name="L941"></a> 941             <strong class="reserved">return</strong> -1;
<a id="L942" name="L942"></a> 942         <em class="brace">}</em>
<a id="L943" name="L943"></a> 943 
<a id="L944" name="L944"></a> 944         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L945" name="L945"></a> 945             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L946" name="L946"></a> 946             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L947" name="L947"></a> 947             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L948" name="L948"></a> 948                 <strong class="reserved">return</strong> <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) != -1;
<a id="L949" name="L949"></a> 949             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L950" name="L950"></a> 950                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L951" name="L951"></a> 951             <em class="brace">}</em>
<a id="L952" name="L952"></a> 952         <em class="brace">}</em>
<a id="L953" name="L953"></a> 953 
<a id="L954" name="L954"></a> 954         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L955" name="L955"></a> 955             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L956" name="L956"></a> 956             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L957" name="L957"></a> 957             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L958" name="L958"></a> 958                 <strong class="reserved">int</strong> i = <a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L959" name="L959"></a> 959                 <strong class="reserved">if</strong> (i &lt; 0)
<a id="L960" name="L960"></a> 960                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L961" name="L961"></a> 961 
<a id="L962" name="L962"></a> 962                 <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(queue[i], -1);
<a id="L963" name="L963"></a> 963                 <strong class="reserved">int</strong> s = --<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L964" name="L964"></a> 964                 <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = queue[s];
<a id="L965" name="L965"></a> 965                 queue[s] = <strong class="reserved">null</strong>;
<a id="L966" name="L966"></a> 966                 <strong class="reserved">if</strong> (s != i) <em class="brace">{</em>
<a id="L967" name="L967"></a> 967                     <a href="../D/34547.html" title="Multiple defined in 2 places.">siftDown</a>(i, <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>);
<a id="L968" name="L968"></a> 968                     <strong class="reserved">if</strong> (queue[i] == <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>)
<a id="L969" name="L969"></a> 969                         <a href="../D/34550.html" title="Multiple defined in 2 places.">siftUp</a>(i, <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>);
<a id="L970" name="L970"></a> 970                 <em class="brace">}</em>
<a id="L971" name="L971"></a> 971                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L972" name="L972"></a> 972             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L973" name="L973"></a> 973                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L974" name="L974"></a> 974             <em class="brace">}</em>
<a id="L975" name="L975"></a> 975         <em class="brace">}</em>
<a id="L976" name="L976"></a> 976 
<a id="L977" name="L977"></a> 977         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L978" name="L978"></a> 978             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L979" name="L979"></a> 979             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L980" name="L980"></a> 980             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L981" name="L981"></a> 981                 <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L982" name="L982"></a> 982             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L983" name="L983"></a> 983                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L984" name="L984"></a> 984             <em class="brace">}</em>
<a id="L985" name="L985"></a> 985         <em class="brace">}</em>
<a id="L986" name="L986"></a> 986 
<a id="L987" name="L987"></a> 987         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21404.html" title="Multiple referred from 435 places.">isEmpty</a>() <em class="brace">{</em>
<a id="L988" name="L988"></a> 988             <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0;
<a id="L989" name="L989"></a> 989         <em class="brace">}</em>
<a id="L990" name="L990"></a> 990 
<a id="L991" name="L991"></a> 991         <strong class="reserved">public</strong> <strong class="reserved">int</strong> remainingCapacity() <em class="brace">{</em>
<a id="L992" name="L992"></a> 992             <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L993" name="L993"></a> 993         <em class="brace">}</em>
<a id="L994" name="L994"></a> 994 
<a id="L995" name="L995"></a> 995         <strong class="reserved">public</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../R/24689.html" title="Multiple referred from 168 places.">peek</a>() <em class="brace">{</em>
<a id="L996" name="L996"></a> 996             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L997" name="L997"></a> 997             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L998" name="L998"></a> 998             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L999" name="L999"></a> 999                 <strong class="reserved">return</strong> queue[0];
<a id="L1000" name="L1000"></a>1000             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1001" name="L1001"></a>1001                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1002" name="L1002"></a>1002             <em class="brace">}</em>
<a id="L1003" name="L1003"></a>1003         <em class="brace">}</em>
<a id="L1004" name="L1004"></a>1004 
<a id="L1005" name="L1005"></a>1005         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006             <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> == <strong class="reserved">null</strong>)
<a id="L1007" name="L1007"></a>1007                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1008" name="L1008"></a>1008             <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; e = (<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;)<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L1009" name="L1009"></a>1009             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1010" name="L1010"></a>1010             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1011" name="L1011"></a>1011             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1012" name="L1012"></a>1012                 <strong class="reserved">int</strong> i = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L1013" name="L1013"></a>1013                 <strong class="reserved">if</strong> (i &gt;= queue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1014" name="L1014"></a>1014                     <a href="../D/23921.html" title="Multiple defined in 19 places.">grow</a>();
<a id="L1015" name="L1015"></a>1015                 <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = i + 1;
<a id="L1016" name="L1016"></a>1016                 <strong class="reserved">if</strong> (i == 0) <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017                     queue[0] = e;
<a id="L1018" name="L1018"></a>1018                     <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(e, 0);
<a id="L1019" name="L1019"></a>1019                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1020" name="L1020"></a>1020                     <a href="../D/34550.html" title="Multiple defined in 2 places.">siftUp</a>(i, e);
<a id="L1021" name="L1021"></a>1021                 <em class="brace">}</em>
<a id="L1022" name="L1022"></a>1022                 <strong class="reserved">if</strong> (queue[0] == e) <em class="brace">{</em>
<a id="L1023" name="L1023"></a>1023                     leader = <strong class="reserved">null</strong>;
<a id="L1024" name="L1024"></a>1024                     <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L1025" name="L1025"></a>1025                 <em class="brace">}</em>
<a id="L1026" name="L1026"></a>1026             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1027" name="L1027"></a>1027                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1028" name="L1028"></a>1028             <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1030" name="L1030"></a>1030         <em class="brace">}</em>
<a id="L1031" name="L1031"></a>1031 
<a id="L1032" name="L1032"></a>1032         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> e) <em class="brace">{</em>
<a id="L1033" name="L1033"></a>1033             <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L1034" name="L1034"></a>1034         <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035 
<a id="L1036" name="L1036"></a>1036         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> e) <em class="brace">{</em>
<a id="L1037" name="L1037"></a>1037             <strong class="reserved">return</strong> <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L1038" name="L1038"></a>1038         <em class="brace">}</em>
<a id="L1039" name="L1039"></a>1039 
<a id="L1040" name="L1040"></a>1040         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> e, <strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041             <strong class="reserved">return</strong> <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L1042" name="L1042"></a>1042         <em class="brace">}</em>
<a id="L1043" name="L1043"></a>1043 
<div class="comment">
          Performs common bookkeeping for poll and take: Replaces
          first element with last and sifts it down.  Call only when
          holding lock.
          @param f the task to remove and return</div>
<a id="L1050" name="L1050"></a>1050         <strong class="reserved">private</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../R/14530.html" title="Multiple referred from 5 places.">finishPoll</a>(<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; f) <em class="brace">{</em>
<a id="L1051" name="L1051"></a>1051             <strong class="reserved">int</strong> s = --<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L1052" name="L1052"></a>1052             <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = queue[s];
<a id="L1053" name="L1053"></a>1053             queue[s] = <strong class="reserved">null</strong>;
<a id="L1054" name="L1054"></a>1054             <strong class="reserved">if</strong> (s != 0)
<a id="L1055" name="L1055"></a>1055                 <a href="../D/34547.html" title="Multiple defined in 2 places.">siftDown</a>(0, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L1056" name="L1056"></a>1056             <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(f, -1);
<a id="L1057" name="L1057"></a>1057             <strong class="reserved">return</strong> f;
<a id="L1058" name="L1058"></a>1058         <em class="brace">}</em>
<a id="L1059" name="L1059"></a>1059 
<a id="L1060" name="L1060"></a>1060         <strong class="reserved">public</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>() <em class="brace">{</em>
<a id="L1061" name="L1061"></a>1061             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1062" name="L1062"></a>1062             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1063" name="L1063"></a>1063             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1064" name="L1064"></a>1064                 <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = queue[0];
<a id="L1065" name="L1065"></a>1065                 <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong> || <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS) &gt; 0)
<a id="L1066" name="L1066"></a>1066                     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1067" name="L1067"></a>1067                 <strong class="reserved">else</strong>
<a id="L1068" name="L1068"></a>1068                     <strong class="reserved">return</strong> <a href="../S/1098.html#L1050" title="Defined at 1050 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">finishPoll</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1069" name="L1069"></a>1069             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1070" name="L1070"></a>1070                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1071" name="L1071"></a>1071             <em class="brace">}</em>
<a id="L1072" name="L1072"></a>1072         <em class="brace">}</em>
<a id="L1073" name="L1073"></a>1073 
<a id="L1074" name="L1074"></a>1074         <strong class="reserved">public</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../R/29108.html" title="Multiple referred from 11 places.">take</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L1075" name="L1075"></a>1075             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1076" name="L1076"></a>1076             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L1077" name="L1077"></a>1077             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1078" name="L1078"></a>1078                 <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L1079" name="L1079"></a>1079                     <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = queue[0];
<a id="L1080" name="L1080"></a>1080                     <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>)
<a id="L1081" name="L1081"></a>1081                         <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L1082" name="L1082"></a>1082                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1083" name="L1083"></a>1083                         <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS);
<a id="L1084" name="L1084"></a>1084                         <strong class="reserved">if</strong> (<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt;= 0)
<a id="L1085" name="L1085"></a>1085                             <strong class="reserved">return</strong> <a href="../S/1098.html#L1050" title="Defined at 1050 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">finishPoll</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1086" name="L1086"></a>1086                         <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">null</strong>; <em class="comment">// don't retain ref while waiting</em>
<a id="L1087" name="L1087"></a>1087                         <strong class="reserved">if</strong> (leader != <strong class="reserved">null</strong>)
<a id="L1088" name="L1088"></a>1088                             <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L1089" name="L1089"></a>1089                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1090" name="L1090"></a>1090                             <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> thisThread = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L1091" name="L1091"></a>1091                             leader = thisThread;
<a id="L1092" name="L1092"></a>1092                             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1093" name="L1093"></a>1093                                 <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>);
<a id="L1094" name="L1094"></a>1094                             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095                                 <strong class="reserved">if</strong> (leader == thisThread)
<a id="L1096" name="L1096"></a>1096                                     leader = <strong class="reserved">null</strong>;
<a id="L1097" name="L1097"></a>1097                             <em class="brace">}</em>
<a id="L1098" name="L1098"></a>1098                         <em class="brace">}</em>
<a id="L1099" name="L1099"></a>1099                     <em class="brace">}</em>
<a id="L1100" name="L1100"></a>1100                 <em class="brace">}</em>
<a id="L1101" name="L1101"></a>1101             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1102" name="L1102"></a>1102                 <strong class="reserved">if</strong> (leader == <strong class="reserved">null</strong> &amp;&amp; queue[0] != <strong class="reserved">null</strong>)
<a id="L1103" name="L1103"></a>1103                     <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L1104" name="L1104"></a>1104                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1105" name="L1105"></a>1105             <em class="brace">}</em>
<a id="L1106" name="L1106"></a>1106         <em class="brace">}</em>
<a id="L1107" name="L1107"></a>1107 
<a id="L1108" name="L1108"></a>1108         <strong class="reserved">public</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>(<strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit)
<a id="L1109" name="L1109"></a>1109             <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L1110" name="L1110"></a>1110             <strong class="reserved">long</strong> nanos = unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout);
<a id="L1111" name="L1111"></a>1111             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1112" name="L1112"></a>1112             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L1113" name="L1113"></a>1113             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114                 <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L1115" name="L1115"></a>1115                     <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = queue[0];
<a id="L1116" name="L1116"></a>1116                     <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1117" name="L1117"></a>1117                         <strong class="reserved">if</strong> (nanos &lt;= 0)
<a id="L1118" name="L1118"></a>1118                             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1119" name="L1119"></a>1119                         <strong class="reserved">else</strong>
<a id="L1120" name="L1120"></a>1120                             nanos = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L1121" name="L1121"></a>1121                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122                         <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS);
<a id="L1123" name="L1123"></a>1123                         <strong class="reserved">if</strong> (<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt;= 0)
<a id="L1124" name="L1124"></a>1124                             <strong class="reserved">return</strong> <a href="../S/1098.html#L1050" title="Defined at 1050 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">finishPoll</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1125" name="L1125"></a>1125                         <strong class="reserved">if</strong> (nanos &lt;= 0)
<a id="L1126" name="L1126"></a>1126                             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1127" name="L1127"></a>1127                         <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">null</strong>; <em class="comment">// don't retain ref while waiting</em>
<a id="L1128" name="L1128"></a>1128                         <strong class="reserved">if</strong> (nanos &lt; <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> || leader != <strong class="reserved">null</strong>)
<a id="L1129" name="L1129"></a>1129                             nanos = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L1130" name="L1130"></a>1130                         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1131" name="L1131"></a>1131                             <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> thisThread = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L1132" name="L1132"></a>1132                             leader = thisThread;
<a id="L1133" name="L1133"></a>1133                             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1134" name="L1134"></a>1134                                 <strong class="reserved">long</strong> timeLeft = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>);
<a id="L1135" name="L1135"></a>1135                                 nanos -= <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> - timeLeft;
<a id="L1136" name="L1136"></a>1136                             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1137" name="L1137"></a>1137                                 <strong class="reserved">if</strong> (leader == thisThread)
<a id="L1138" name="L1138"></a>1138                                     leader = <strong class="reserved">null</strong>;
<a id="L1139" name="L1139"></a>1139                             <em class="brace">}</em>
<a id="L1140" name="L1140"></a>1140                         <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141                     <em class="brace">}</em>
<a id="L1142" name="L1142"></a>1142                 <em class="brace">}</em>
<a id="L1143" name="L1143"></a>1143             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1144" name="L1144"></a>1144                 <strong class="reserved">if</strong> (leader == <strong class="reserved">null</strong> &amp;&amp; queue[0] != <strong class="reserved">null</strong>)
<a id="L1145" name="L1145"></a>1145                     <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L1146" name="L1146"></a>1146                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1147" name="L1147"></a>1147             <em class="brace">}</em>
<a id="L1148" name="L1148"></a>1148         <em class="brace">}</em>
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L1151" name="L1151"></a>1151             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1152" name="L1152"></a>1152             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1153" name="L1153"></a>1153             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1154" name="L1154"></a>1154                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L1155" name="L1155"></a>1155                     <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; t = queue[i];
<a id="L1156" name="L1156"></a>1156                     <strong class="reserved">if</strong> (t != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1157" name="L1157"></a>1157                         queue[i] = <strong class="reserved">null</strong>;
<a id="L1158" name="L1158"></a>1158                         <a href="../D/32925.html" title="Multiple defined in 28 places.">setIndex</a>(t, -1);
<a id="L1159" name="L1159"></a>1159                     <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160                 <em class="brace">}</em>
<a id="L1161" name="L1161"></a>1161                 <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L1162" name="L1162"></a>1162             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1163" name="L1163"></a>1163                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1164" name="L1164"></a>1164             <em class="brace">}</em>
<a id="L1165" name="L1165"></a>1165         <em class="brace">}</em>
<a id="L1166" name="L1166"></a>1166 
<div class="comment">
          Returns first element only if it is expired.
          Used only by drainTo.  Call only when holding lock.</div>
<a id="L1171" name="L1171"></a>1171         <strong class="reserved">private</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../R/24695.html" title="Multiple referred from 4 places.">peekExpired</a>() <em class="brace">{</em>
<a id="L1172" name="L1172"></a>1172             <em class="comment">// assert lock.isHeldByCurrentThread();</em>
<a id="L1173" name="L1173"></a>1173             <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = queue[0];
<a id="L1174" name="L1174"></a>1174             <strong class="reserved">return</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong> || <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS) &gt; 0) ?
<a id="L1175" name="L1175"></a>1175                 <strong class="reserved">null</strong> : <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1176" name="L1176"></a>1176         <em class="brace">}</em>
<a id="L1177" name="L1177"></a>1177 
<a id="L1178" name="L1178"></a>1178         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L1179" name="L1179"></a>1179             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>)
<a id="L1180" name="L1180"></a>1180                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1181" name="L1181"></a>1181             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">this</strong>)
<a id="L1182" name="L1182"></a>1182                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L1183" name="L1183"></a>1183             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1184" name="L1184"></a>1184             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1185" name="L1185"></a>1185             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1186" name="L1186"></a>1186                 <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1187" name="L1187"></a>1187                 <strong class="reserved">int</strong> n = 0;
<a id="L1188" name="L1188"></a>1188                 <strong class="reserved">while</strong> ((<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../D/29293.html" title="Multiple defined in 2 places.">peekExpired</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);   <em class="comment">// In this order, in case add() throws.</em>
<a id="L1190" name="L1190"></a>1190                     <a href="../S/1098.html#L1050" title="Defined at 1050 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">finishPoll</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1191" name="L1191"></a>1191                     ++n;
<a id="L1192" name="L1192"></a>1192                 <em class="brace">}</em>
<a id="L1193" name="L1193"></a>1193                 <strong class="reserved">return</strong> n;
<a id="L1194" name="L1194"></a>1194             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1195" name="L1195"></a>1195                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1196" name="L1196"></a>1196             <em class="brace">}</em>
<a id="L1197" name="L1197"></a>1197         <em class="brace">}</em>
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <strong class="reserved">int</strong> maxElements) <em class="brace">{</em>
<a id="L1200" name="L1200"></a>1200             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>)
<a id="L1201" name="L1201"></a>1201                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1202" name="L1202"></a>1202             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">this</strong>)
<a id="L1203" name="L1203"></a>1203                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L1204" name="L1204"></a>1204             <strong class="reserved">if</strong> (maxElements &lt;= 0)
<a id="L1205" name="L1205"></a>1205                 <strong class="reserved">return</strong> 0;
<a id="L1206" name="L1206"></a>1206             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1207" name="L1207"></a>1207             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1208" name="L1208"></a>1208             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1209" name="L1209"></a>1209                 <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt; <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L1210" name="L1210"></a>1210                 <strong class="reserved">int</strong> n = 0;
<a id="L1211" name="L1211"></a>1211                 <strong class="reserved">while</strong> (n &lt; maxElements &amp;&amp; (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../D/29293.html" title="Multiple defined in 2 places.">peekExpired</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);   <em class="comment">// In this order, in case add() throws.</em>
<a id="L1213" name="L1213"></a>1213                     <a href="../S/1098.html#L1050" title="Defined at 1050 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">finishPoll</a>(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>);
<a id="L1214" name="L1214"></a>1214                     ++n;
<a id="L1215" name="L1215"></a>1215                 <em class="brace">}</em>
<a id="L1216" name="L1216"></a>1216                 <strong class="reserved">return</strong> n;
<a id="L1217" name="L1217"></a>1217             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1219" name="L1219"></a>1219             <em class="brace">}</em>
<a id="L1220" name="L1220"></a>1220         <em class="brace">}</em>
<a id="L1221" name="L1221"></a>1221 
<a id="L1222" name="L1222"></a>1222         <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>() <em class="brace">{</em>
<a id="L1223" name="L1223"></a>1223             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1224" name="L1224"></a>1224             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1225" name="L1225"></a>1225             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1226" name="L1226"></a>1226                 <strong class="reserved">return</strong> <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(queue, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[].<strong class="reserved">class</strong>);
<a id="L1227" name="L1227"></a>1227             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1228" name="L1228"></a>1228                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1229" name="L1229"></a>1229             <em class="brace">}</em>
<a id="L1230" name="L1230"></a>1230         <em class="brace">}</em>
<a id="L1231" name="L1231"></a>1231 
<a id="L1232" name="L1232"></a>1232         @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L1233" name="L1233"></a>1233         <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L1234" name="L1234"></a>1234             <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L1235" name="L1235"></a>1235             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L1236" name="L1236"></a>1236             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1237" name="L1237"></a>1237                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>)
<a id="L1238" name="L1238"></a>1238                     <strong class="reserved">return</strong> (<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[]) <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(queue, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>());
<a id="L1239" name="L1239"></a>1239                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(queue, 0, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L1240" name="L1240"></a>1240                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>)
<a id="L1241" name="L1241"></a>1241                     <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>] = <strong class="reserved">null</strong>;
<a id="L1242" name="L1242"></a>1242                 <strong class="reserved">return</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L1243" name="L1243"></a>1243             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1244" name="L1244"></a>1244                 <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L1245" name="L1245"></a>1245             <em class="brace">}</em>
<a id="L1246" name="L1246"></a>1246         <em class="brace">}</em>
<a id="L1247" name="L1247"></a>1247 
<a id="L1248" name="L1248"></a>1248         <strong class="reserved">public</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L1249" name="L1249"></a>1249             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a>(<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(queue, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L1250" name="L1250"></a>1250         <em class="brace">}</em>
<a id="L1251" name="L1251"></a>1251 
<div class="comment">
          Snapshot iterator that works off copy of underlying q array.</div>
<a id="L1255" name="L1255"></a>1255         <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/4056.html" title="Multiple referred from 24 places.">Itr</a> <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>&gt; <em class="brace">{</em>
<a id="L1256" name="L1256"></a>1256             <strong class="reserved">final</strong> <a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1257" name="L1257"></a>1257             <strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> = 0;     <em class="comment">// index of next element to return</em>
<a id="L1258" name="L1258"></a>1258             <strong class="reserved">int</strong> lastRet = -1;   <em class="comment">// index of last element, or -1 if no such</em>
<a id="L1259" name="L1259"></a>1259 
<a id="L1260" name="L1260"></a>1260             Itr(<a href="../S/1058.html#L48" title="Defined at 48 in src/java/util/concurrent/RunnableScheduledFuture.java.">RunnableScheduledFuture</a>&lt;?&gt;[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L1261" name="L1261"></a>1261                 <strong class="reserved">this</strong>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1262" name="L1262"></a>1262             <em class="brace">}</em>
<a id="L1263" name="L1263"></a>1263 
<a id="L1264" name="L1264"></a>1264             <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20233.html" title="Multiple referred from 653 places.">hasNext</a>() <em class="brace">{</em>
<a id="L1265" name="L1265"></a>1265                 <strong class="reserved">return</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &lt; <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1266" name="L1266"></a>1266             <em class="brace">}</em>
<a id="L1267" name="L1267"></a>1267 
<a id="L1268" name="L1268"></a>1268             <strong class="reserved">public</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L1269" name="L1269"></a>1269                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &gt;= <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1270" name="L1270"></a>1270                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L1271" name="L1271"></a>1271                 lastRet = <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;
<a id="L1272" name="L1272"></a>1272                 <strong class="reserved">return</strong> <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>++];
<a id="L1273" name="L1273"></a>1273             <em class="brace">}</em>
<a id="L1274" name="L1274"></a>1274 
<a id="L1275" name="L1275"></a>1275             <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>() <em class="brace">{</em>
<a id="L1276" name="L1276"></a>1276                 <strong class="reserved">if</strong> (lastRet &lt; 0)
<a id="L1277" name="L1277"></a>1277                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>();
<a id="L1278" name="L1278"></a>1278                 <a href="../S/1098.html#L809" title="Defined at 809 in src/java/util/concurrent/ScheduledThreadPoolExecutor.java.">DelayedWorkQueue</a>.<strong class="reserved">this</strong>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[lastRet]);
<a id="L1279" name="L1279"></a>1279                 lastRet = -1;
<a id="L1280" name="L1280"></a>1280             <em class="brace">}</em>
<a id="L1281" name="L1281"></a>1281         <em class="brace">}</em>
<a id="L1282" name="L1282"></a>1282     <em class="brace">}</em>
<a id="L1283" name="L1283"></a>1283 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L176">[^]</a><a href="#L1275">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
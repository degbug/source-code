<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/NodeSet.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L144">[^]</a><a href="#L1354">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L144" title="Defined at 144.">getRoot</a></li>
<li><a href="#L159" title="Defined at 159.">cloneWithReset</a></li>
<li><a href="#L172" title="Defined at 172.">reset</a></li>
<li><a href="#L189" title="Defined at 189.">getWhatToShow</a></li>
<li><a href="#L207" title="Defined at 207.">getFilter</a></li>
<li><a href="#L228" title="Defined at 228.">getExpandEntityReferences</a></li>
<li><a href="#L243" title="Defined at 243.">nextNode</a></li>
<li><a href="#L269" title="Defined at 269.">previousNode</a></li>
<li><a href="#L297" title="Defined at 297.">detach</a></li>
<li><a href="#L307" title="Defined at 307.">isFresh</a></li>
<li><a href="#L324" title="Defined at 324.">runTo</a></li>
<li><a href="#L349" title="Defined at 349.">item</a></li>
<li><a href="#L365" title="Defined at 365.">getLength</a></li>
<li><a href="#L381" title="Defined at 381.">addNode</a></li>
<li><a href="#L399" title="Defined at 399.">insertNode</a></li>
<li><a href="#L415" title="Defined at 415.">removeNode</a></li>
<li><a href="#L433" title="Defined at 433.">addNodes</a></li>
<li><a href="#L473" title="Defined at 473.">addNodes</a></li>
<li><a href="#L490" title="Defined at 490.">addNodes</a></li>
<li><a href="#L518" title="Defined at 518.">addNodesInDocOrder</a></li>
<li><a href="#L546" title="Defined at 546.">addNodesInDocOrder</a></li>
<li><a href="#L573" title="Defined at 573.">addNodesInDocOrder</a></li>
<li><a href="#L634" title="Defined at 634.">addNodeInDocOrder</a></li>
<li><a href="#L708" title="Defined at 708.">addNodeInDocOrder</a></li>
<li><a href="#L730" title="Defined at 730.">getCurrentPos</a></li>
<li><a href="#L741" title="Defined at 741.">setCurrentPos</a></li>
<li><a href="#L758" title="Defined at 758.">getCurrentNode</a></li>
<li><a href="#L784" title="Defined at 784.">getShouldCacheNodes</a></li>
<li><a href="#L800" title="Defined at 800.">setShouldCacheNodes</a></li>
<li><a href="#L814" title="Defined at 814.">getLast</a></li>
<li><a href="#L819" title="Defined at 819.">setLast</a></li>
<li><a href="#L847" title="Defined at 847.">clone</a></li>
<li><a href="#L867" title="Defined at 867.">size</a></li>
<li><a href="#L877" title="Defined at 877.">addElement</a></li>
<li><a href="#L911" title="Defined at 911.">push</a></li>
<li><a href="#L947" title="Defined at 947.">pop</a></li>
<li><a href="#L965" title="Defined at 965.">popAndTop</a></li>
<li><a href="#L978" title="Defined at 978.">popQuick</a></li>
<li><a href="#L993" title="Defined at 993.">peepOrNull</a></li>
<li><a href="#L1007" title="Defined at 1007.">pushPair</a></li>
<li><a href="#L1039" title="Defined at 1039.">popPair</a></li>
<li><a href="#L1054" title="Defined at 1054.">setTail</a></li>
<li><a href="#L1066" title="Defined at 1066.">setTailSub1</a></li>
<li><a href="#L1078" title="Defined at 1078.">peepTail</a></li>
<li><a href="#L1090" title="Defined at 1090.">peepTailSub1</a></li>
<li><a href="#L1104" title="Defined at 1104.">insertElementAt</a></li>
<li><a href="#L1140" title="Defined at 1140.">appendNodes</a></li>
<li><a href="#L1172" title="Defined at 1172.">removeAllElements</a></li>
<li><a href="#L1197" title="Defined at 1197.">removeElement</a></li>
<li><a href="#L1232" title="Defined at 1232.">removeElementAt</a></li>
<li><a href="#L1260" title="Defined at 1260.">setElementAt</a></li>
<li><a href="#L1281" title="Defined at 1281.">elementAt</a></li>
<li><a href="#L1297" title="Defined at 1297.">contains</a></li>
<li><a href="#L1326" title="Defined at 1326.">indexOf</a></li>
<li><a href="#L1354" title="Defined at 1354.">indexOf</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: NodeSet.java,v 1.2.4.1 2005/09/10 17:39:49 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.res.XSLMessages;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.DOM2Helper;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.axes.ContextNodeList;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
<a id="L29" name="L29"></a>  29 
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> org.w3c.dom.DOMException;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> org.w3c.dom.traversal.NodeFilter;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> org.w3c.dom.traversal.NodeIterator;
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 
<div class="comment">
  <p>The NodeSet class can act as either a NodeVector,
  NodeList, or NodeIterator.  However, in order for it to
  act as a NodeVector or NodeList, it's required that
  setShouldCacheNodes(true) be called before the first
  nextNode() is called, in order that nodes can be added
  as they are fetched.  Derived classes that implement iterators
  must override runTo(int index), in order that they may
  run the iteration to the given index. </p>
  <p>Note that we directly implement the DOM's NodeIterator
  interface. We do not emulate all the behavior of the
  standard NodeIterator. In particular, we do not guarantee
  to present a "live view" of the document ... but in XSLT,
  the source document should never be mutated, so this should
  never be an issue.</p>
  <p>Thought: Should NodeSet really implement NodeList and NodeIterator,
  or should there be specific subclasses of it which do so? The
  advantage of doing it all here is that all NodeSets will respond
  to the same calls; the disadvantage is that some of them may return
  less-than-enlightening results when you do so.</p>
  @xsl.usage advanced</div>
<a id="L61" name="L61"></a>  61 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/5562.html" title="Multiple referred from 118 places.">NodeSet</a>
<a id="L62" name="L62"></a>  62         <strong class="reserved">implements</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a>, <a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a>, <a href="../S/1744.html#L53" title="Defined at 53 in src/java/lang/Cloneable.java.">Cloneable</a>, <a href="../S/4880.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/axes/ContextNodeList.java.">ContextNodeList</a>
<a id="L63" name="L63"></a>  63 <em class="brace">{</em>
<a id="L64" name="L64"></a>  64 
<div class="comment">
    Create an empty nodelist.</div>
<a id="L68" name="L68"></a>  68   <strong class="reserved">public</strong> NodeSet()
<a id="L69" name="L69"></a>  69   <em class="brace">{</em>
<a id="L70" name="L70"></a>  70     m_blocksize = 32;
<a id="L71" name="L71"></a>  71     m_mapSize = 0;
<a id="L72" name="L72"></a>  72   <em class="brace">}</em>
<a id="L73" name="L73"></a>  73 
<div class="comment">
    Create an empty, using the given block size.
    @param blocksize Size of blocks to allocate</div>
<a id="L79" name="L79"></a>  79   <strong class="reserved">public</strong> NodeSet(<strong class="reserved">int</strong> blocksize)
<a id="L80" name="L80"></a>  80   <em class="brace">{</em>
<a id="L81" name="L81"></a>  81     m_blocksize = blocksize;
<a id="L82" name="L82"></a>  82     m_mapSize = 0;
<a id="L83" name="L83"></a>  83   <em class="brace">}</em>
<a id="L84" name="L84"></a>  84 
<div class="comment">
    Create a NodeSet, and copy the members of the
    given nodelist into it.
    @param nodelist List of Nodes to be made members of the new set.</div>
<a id="L91" name="L91"></a>  91   <strong class="reserved">public</strong> NodeSet(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>)
<a id="L92" name="L92"></a>  92   <em class="brace">{</em>
<a id="L93" name="L93"></a>  93 
<a id="L94" name="L94"></a>  94     <strong class="reserved">this</strong>(32);
<a id="L95" name="L95"></a>  95 
<a id="L96" name="L96"></a>  96     <a href="../D/10968.html" title="Multiple defined in 5 places.">addNodes</a>(<a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>);
<a id="L97" name="L97"></a>  97   <em class="brace">}</em>
<a id="L98" name="L98"></a>  98 
<div class="comment">
    Create a NodeSet, and copy the members of the
    given NodeSet into it.
    @param nodelist Set of Nodes to be made members of the new set.</div>
<a id="L105" name="L105"></a> 105   <strong class="reserved">public</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>(NodeSet <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>)
<a id="L106" name="L106"></a> 106   <em class="brace">{</em>
<a id="L107" name="L107"></a> 107 
<a id="L108" name="L108"></a> 108     <strong class="reserved">this</strong>(32);
<a id="L109" name="L109"></a> 109 
<a id="L110" name="L110"></a> 110     <a href="../D/10968.html" title="Multiple defined in 5 places.">addNodes</a>((<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a>) <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>);
<a id="L111" name="L111"></a> 111   <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<div class="comment">
    Create a NodeSet, and copy the members of the
    given NodeIterator into it.
    @param ni Iterator which yields Nodes to be made members of the new set.</div>
<a id="L119" name="L119"></a> 119   <strong class="reserved">public</strong> NodeSet(<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> ni)
<a id="L120" name="L120"></a> 120   <em class="brace">{</em>
<a id="L121" name="L121"></a> 121 
<a id="L122" name="L122"></a> 122     <strong class="reserved">this</strong>(32);
<a id="L123" name="L123"></a> 123 
<a id="L124" name="L124"></a> 124     <a href="../D/10968.html" title="Multiple defined in 5 places.">addNodes</a>(ni);
<a id="L125" name="L125"></a> 125   <em class="brace">}</em>
<a id="L126" name="L126"></a> 126 
<div class="comment">
    Create a NodeSet which contains the given Node.
    @param node Single node to be added to the new set.</div>
<a id="L132" name="L132"></a> 132   <strong class="reserved">public</strong> NodeSet(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L133" name="L133"></a> 133   <em class="brace">{</em>
<a id="L134" name="L134"></a> 134 
<a id="L135" name="L135"></a> 135     <strong class="reserved">this</strong>(32);
<a id="L136" name="L136"></a> 136 
<a id="L137" name="L137"></a> 137     <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L138" name="L138"></a> 138   <em class="brace">}</em>
<a id="L139" name="L139"></a> 139 
<div class="comment">
    @return The root node of the Iterator, as specified when it was created.
    For non-Iterator NodeSets, this will be null.</div>
<a id="L144" name="L144"></a> 144   <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/18758.html" title="Multiple referred from 54 places.">getRoot</a>()
<a id="L145" name="L145"></a> 145   <em class="brace">{</em>
<a id="L146" name="L146"></a> 146     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L147" name="L147"></a> 147   <em class="brace">}</em>
<a id="L148" name="L148"></a> 148 
<div class="comment">
    Get a cloned Iterator, and reset its state to the beginning of the
    iteration.
    @return a new NodeSet of the same type, having the same state...
    except that the reset() operation has been called.
    @throws CloneNotSupportedException if this subclass of NodeSet
    does not support the clone() operation.</div>
<a id="L159" name="L159"></a> 159   <strong class="reserved">public</strong> <a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> <a href="../R/11583.html" title="Multiple referred from 10 places.">cloneWithReset</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L160" name="L160"></a> 160   <em class="brace">{</em>
<a id="L161" name="L161"></a> 161 
<a id="L162" name="L162"></a> 162     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>) <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164     <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L165" name="L165"></a> 165 
<a id="L166" name="L166"></a> 166     <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L167" name="L167"></a> 167   <em class="brace">}</em>
<a id="L168" name="L168"></a> 168 
<div class="comment">
    Reset the iterator. May have no effect on non-iterator Nodesets.</div>
<a id="L172" name="L172"></a> 172   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>()
<a id="L173" name="L173"></a> 173   <em class="brace">{</em>
<a id="L174" name="L174"></a> 174     m_next = 0;
<a id="L175" name="L175"></a> 175   <em class="brace">}</em>
<a id="L176" name="L176"></a> 176 
<div class="comment">
     This attribute determines which node types are presented via the
    iterator. The available set of constants is defined in the
    <code>NodeFilter</code> interface. For NodeSets, the mask has been
    hardcoded to show all nodes except EntityReference nodes, which have
    no equivalent in the XPath data model.
    @return integer used as a bit-array, containing flags defined in
    the DOM's NodeFilter class. The value will be
    <code>SHOW_ALL &amp; ~SHOW_ENTITY_REFERENCE</code>, meaning that
    only entity references are suppressed.</div>
<a id="L189" name="L189"></a> 189   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19853.html" title="Multiple referred from 27 places.">getWhatToShow</a>()
<a id="L190" name="L190"></a> 190   <em class="brace">{</em>
<a id="L191" name="L191"></a> 191     <strong class="reserved">return</strong> <a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a>.SHOW_ALL &amp; ~<a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a>.SHOW_ENTITY_REFERENCE;
<a id="L192" name="L192"></a> 192   <em class="brace">}</em>
<a id="L193" name="L193"></a> 193 
<div class="comment">
    The filter object used to screen nodes. Filters are applied to
    further reduce (and restructure) the NodeIterator's view of the
    document. In our case, we will be using hardcoded filters built
    into our iterators... but getFilter() is part of the DOM's
    NodeIterator interface, so we have to support it.
    @return null, which is slightly misleading. True, there is no
    user-written filter object, but in fact we are doing some very
    sophisticated custom filtering. A DOM purist might suggest
    returning a placeholder object just to indicate that this is
    not going to return all nodes selected by whatToShow.</div>
<a id="L207" name="L207"></a> 207   <strong class="reserved">public</strong> <a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a> <a href="../R/16590.html" title="Multiple referred from 6 places.">getFilter</a>()
<a id="L208" name="L208"></a> 208   <em class="brace">{</em>
<a id="L209" name="L209"></a> 209     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L210" name="L210"></a> 210   <em class="brace">}</em>
<a id="L211" name="L211"></a> 211 
<div class="comment">
     The value of this flag determines whether the children of entity
    reference nodes are visible to the iterator. If false, they will be
    skipped over.
    <br> To produce a view of the document that has entity references
    expanded and does not expose the entity reference node itself, use the
    whatToShow flags to hide the entity reference node and set
    expandEntityReferences to true when creating the iterator. To produce
    a view of the document that has entity reference nodes but no entity
    expansion, use the whatToShow flags to show the entity reference node
    and set expandEntityReferences to false.
    @return true for all iterators based on NodeSet, meaning that the
    contents of EntityRefrence nodes may be returned (though whatToShow
    says that the EntityReferences themselves are not shown.)</div>
<a id="L228" name="L228"></a> 228   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4889.html#L311" title="Referred from 311 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">getExpandEntityReferences</a>()
<a id="L229" name="L229"></a> 229   <em class="brace">{</em>
<a id="L230" name="L230"></a> 230     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L231" name="L231"></a> 231   <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
     Returns the next node in the set and advances the position of the
    iterator in the set. After a NodeIterator is created, the first call
    to nextNode() returns the first node in the set.
    @return  The next <code>Node</code> in the set being iterated over, or
      <code>null</code> if there are no more members in that set.
    @throws DOMException
       INVALID_STATE_ERR: Raised if this method is called after the
      <code>detach</code> method was invoked.</div>
<a id="L243" name="L243"></a> 243   <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>() <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L244" name="L244"></a> 244   <em class="brace">{</em>
<a id="L245" name="L245"></a> 245 
<a id="L246" name="L246"></a> 246     <strong class="reserved">if</strong> ((m_next) &lt; <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())
<a id="L247" name="L247"></a> 247     <em class="brace">{</em>
<a id="L248" name="L248"></a> 248       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">this</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(m_next);
<a id="L249" name="L249"></a> 249 
<a id="L250" name="L250"></a> 250       m_next++;
<a id="L251" name="L251"></a> 251 
<a id="L252" name="L252"></a> 252       <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L253" name="L253"></a> 253     <em class="brace">}</em>
<a id="L254" name="L254"></a> 254     <strong class="reserved">else</strong>
<a id="L255" name="L255"></a> 255       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L256" name="L256"></a> 256   <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<div class="comment">
     Returns the previous node in the set and moves the position of the
    iterator backwards in the set.
    @return  The previous <code>Node</code> in the set being iterated over,
      or<code>null</code> if there are no more members in that set.
    @throws DOMException
       INVALID_STATE_ERR: Raised if this method is called after the
      <code>detach</code> method was invoked.
    @throws RuntimeException thrown if this NodeSet is not of
    a cached type, and hence doesn't know what the previous node was.</div>
<a id="L269" name="L269"></a> 269   <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/24966.html" title="Multiple referred from 15 places.">previousNode</a>() <strong class="reserved">throws</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>
<a id="L270" name="L270"></a> 270   <em class="brace">{</em>
<a id="L271" name="L271"></a> 271 
<a id="L272" name="L272"></a> 272     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L273" name="L273"></a> 273       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L274" name="L274"></a> 274         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_CANNOT_ITERATE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet can not iterate to a previous node!");</em>
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276     <strong class="reserved">if</strong> ((m_next - 1) &gt; 0)
<a id="L277" name="L277"></a> 277     <em class="brace">{</em>
<a id="L278" name="L278"></a> 278       m_next--;
<a id="L279" name="L279"></a> 279 
<a id="L280" name="L280"></a> 280       <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(m_next);
<a id="L281" name="L281"></a> 281     <em class="brace">}</em>
<a id="L282" name="L282"></a> 282     <strong class="reserved">else</strong>
<a id="L283" name="L283"></a> 283       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L284" name="L284"></a> 284   <em class="brace">}</em>
<a id="L285" name="L285"></a> 285 
<div class="comment">
    Detaches the iterator from the set which it iterated over, releasing
    any computational resources and placing the iterator in the INVALID
    state. After<code>detach</code> has been invoked, calls to
    <code>nextNode</code> or<code>previousNode</code> will raise the
    exception INVALID_STATE_ERR.
    <p>
    This operation is a no-op in NodeSet, and will not cause
    INVALID_STATE_ERR to be raised by later operations.
    </p></div>
<a id="L297" name="L297"></a> 297   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>()<em class="brace">{</em><em class="brace">}</em>
<a id="L298" name="L298"></a> 298 
<div class="comment">
    Tells if this NodeSet is "fresh", in other words, if
    the first nextNode() that is called will return the
    first node in the set.
    @return true if nextNode() would return the first node in the set,
    false if it would return a later one.</div>
<a id="L307" name="L307"></a> 307   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21499.html" title="Multiple referred from 2 places.">isFresh</a>()
<a id="L308" name="L308"></a> 308   <em class="brace">{</em>
<a id="L309" name="L309"></a> 309     <strong class="reserved">return</strong> (m_next == 0);
<a id="L310" name="L310"></a> 310   <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<div class="comment">
    If an index is requested, NodeSet will call this method
    to run the iterator to the index.  By default this sets
    m_next to the index.  If the index argument is -1, this
    signals that the iterator should be run to the end.
    @param index Position to advance (or retreat) to, with
    0 requesting the reset ("fresh") position and -1 (or indeed
    any out-of-bounds value) requesting the final position.
    @throws RuntimeException thrown if this NodeSet is not
    one of the types which supports indexing/counting.</div>
<a id="L324" name="L324"></a> 324   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26561.html" title="Multiple referred from 15 places.">runTo</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L325" name="L325"></a> 325   <em class="brace">{</em>
<a id="L326" name="L326"></a> 326 
<a id="L327" name="L327"></a> 327     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L328" name="L328"></a> 328       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L329" name="L329"></a> 329         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_CANNOT_INDEX, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet can not do indexing or counting functions!");</em>
<a id="L330" name="L330"></a> 330 
<a id="L331" name="L331"></a> 331     <strong class="reserved">if</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) &amp;&amp; (m_next &lt; m_firstFree))
<a id="L332" name="L332"></a> 332       m_next = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L333" name="L333"></a> 333     <strong class="reserved">else</strong>
<a id="L334" name="L334"></a> 334       m_next = m_firstFree - 1;
<a id="L335" name="L335"></a> 335   <em class="brace">}</em>
<a id="L336" name="L336"></a> 336 
<div class="comment">
    Returns the <code>index</code>th item in the collection. If
    <code>index</code> is greater than or equal to the number of nodes in
    the list, this returns <code>null</code>.
    TODO: What happens if index is out of range?
    @param index Index into the collection.
    @return The node at the <code>index</code>th position in the
      <code>NodeList</code>, or <code>null</code> if that is not a valid
      index.</div>
<a id="L349" name="L349"></a> 349   <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/22287.html" title="Multiple referred from 822 places.">item</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L350" name="L350"></a> 350   <em class="brace">{</em>
<a id="L351" name="L351"></a> 351 
<a id="L352" name="L352"></a> 352     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354     <strong class="reserved">return</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>) <strong class="reserved">this</strong>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L355" name="L355"></a> 355   <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<div class="comment">
    The number of nodes in the list. The range of valid child node indices is
    0 to <code>length-1</code> inclusive. Note that this operation requires
    finding all the matching nodes, which may defeat attempts to defer
    that work.
    @return integer indicating how many nodes are represented by this list.</div>
<a id="L365" name="L365"></a> 365   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17335.html" title="Multiple referred from 644 places.">getLength</a>()
<a id="L366" name="L366"></a> 366   <em class="brace">{</em>
<a id="L367" name="L367"></a> 367 
<a id="L368" name="L368"></a> 368     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L369" name="L369"></a> 369 
<a id="L370" name="L370"></a> 370     <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L371" name="L371"></a> 371   <em class="brace">}</em>
<a id="L372" name="L372"></a> 372 
<div class="comment">
    Add a node to the NodeSet. Not all types of NodeSets support this
    operation
    @param n Node to be added
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L381" name="L381"></a> 381   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9871.html" title="Multiple referred from 39 places.">addNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n)
<a id="L382" name="L382"></a> 382   <em class="brace">{</em>
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384     <strong class="reserved">if</strong> (!m_mutable)
<a id="L385" name="L385"></a> 385       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387     <strong class="reserved">this</strong>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(n);
<a id="L388" name="L388"></a> 388   <em class="brace">}</em>
<a id="L389" name="L389"></a> 389 
<div class="comment">
    Insert a node at a given position.
    @param n Node to be added
    @param pos Offset at which the node is to be inserted,
    with 0 being the first position.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L399" name="L399"></a> 399   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20782.html" title="Multiple referred from 4 places.">insertNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n, <strong class="reserved">int</strong> pos)
<a id="L400" name="L400"></a> 400   <em class="brace">{</em>
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402     <strong class="reserved">if</strong> (!m_mutable)
<a id="L403" name="L403"></a> 403       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L404" name="L404"></a> 404 
<a id="L405" name="L405"></a> 405     <a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(n, pos);
<a id="L406" name="L406"></a> 406   <em class="brace">}</em>
<a id="L407" name="L407"></a> 407 
<div class="comment">
    Remove a node.
    @param n Node to be added
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L415" name="L415"></a> 415   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26030.html" title="Multiple referred from 14 places.">removeNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n)
<a id="L416" name="L416"></a> 416   <em class="brace">{</em>
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418     <strong class="reserved">if</strong> (!m_mutable)
<a id="L419" name="L419"></a> 419       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L420" name="L420"></a> 420 
<a id="L421" name="L421"></a> 421     <strong class="reserved">this</strong>.<a href="../D/30774.html" title="Multiple defined in 14 places.">removeElement</a>(n);
<a id="L422" name="L422"></a> 422   <em class="brace">}</em>
<a id="L423" name="L423"></a> 423 
<div class="comment">
    Copy NodeList members into this nodelist, adding in
    document order.  If a node is null, don't add it.
    @param nodelist List of nodes which should now be referenced by
    this NodeSet.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L433" name="L433"></a> 433   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9875.html" title="Multiple referred from 8 places.">addNodes</a>(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>)
<a id="L434" name="L434"></a> 434   <em class="brace">{</em>
<a id="L435" name="L435"></a> 435 
<a id="L436" name="L436"></a> 436     <strong class="reserved">if</strong> (!m_mutable)
<a id="L437" name="L437"></a> 437       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L438" name="L438"></a> 438 
<a id="L439" name="L439"></a> 439     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>)  <em class="comment">// defensive to fix a bug that Sanjiva reported.</em>
<a id="L440" name="L440"></a> 440     <em class="brace">{</em>
<a id="L441" name="L441"></a> 441       <strong class="reserved">int</strong> nChildren = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L442" name="L442"></a> 442 
<a id="L443" name="L443"></a> 443       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nChildren; i++)
<a id="L444" name="L444"></a> 444       <em class="brace">{</em>
<a id="L445" name="L445"></a> 445         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> obj = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L446" name="L446"></a> 446 
<a id="L447" name="L447"></a> 447         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != obj)
<a id="L448" name="L448"></a> 448         <em class="brace">{</em>
<a id="L449" name="L449"></a> 449           <a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(obj);
<a id="L450" name="L450"></a> 450         <em class="brace">}</em>
<a id="L451" name="L451"></a> 451       <em class="brace">}</em>
<a id="L452" name="L452"></a> 452     <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<a id="L454" name="L454"></a> 454     <em class="comment">// checkDups();</em>
<a id="L455" name="L455"></a> 455   <em class="brace">}</em>
<a id="L456" name="L456"></a> 456 
<div class="comment">
    <p>Copy NodeList members into this nodelist, adding in
    document order.  Only genuine node references will be copied;
    nulls appearing in the source NodeSet will
    not be added to this one. </p>
    <p> In case you're wondering why this function is needed: NodeSet
    implements both NodeIterator and NodeList. If this method isn't
    provided, Java can't decide which of those to use when addNodes()
    is invoked. Providing the more-explicit match avoids that
    ambiguity.)</p>
    @param ns NodeSet whose members should be merged into this NodeSet.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L473" name="L473"></a> 473   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9875.html" title="Multiple referred from 8 places.">addNodes</a>(<a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> ns)
<a id="L474" name="L474"></a> 474   <em class="brace">{</em>
<a id="L475" name="L475"></a> 475 
<a id="L476" name="L476"></a> 476     <strong class="reserved">if</strong> (!m_mutable)
<a id="L477" name="L477"></a> 477       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L478" name="L478"></a> 478 
<a id="L479" name="L479"></a> 479     <a href="../D/10968.html" title="Multiple defined in 5 places.">addNodes</a>((<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a>) ns);
<a id="L480" name="L480"></a> 480   <em class="brace">}</em>
<a id="L481" name="L481"></a> 481 
<div class="comment">
    Copy NodeList members into this nodelist, adding in
    document order.  Null references are not added.
    @param iterator NodeIterator which yields the nodes to be added.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L490" name="L490"></a> 490   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9875.html" title="Multiple referred from 8 places.">addNodes</a>(<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>)
<a id="L491" name="L491"></a> 491   <em class="brace">{</em>
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493     <strong class="reserved">if</strong> (!m_mutable)
<a id="L494" name="L494"></a> 494       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L495" name="L495"></a> 495 
<a id="L496" name="L496"></a> 496     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>)  <em class="comment">// defensive to fix a bug that Sanjiva reported.</em>
<a id="L497" name="L497"></a> 497     <em class="brace">{</em>
<a id="L498" name="L498"></a> 498       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> obj;
<a id="L499" name="L499"></a> 499 
<a id="L500" name="L500"></a> 500       <strong class="reserved">while</strong> (<strong class="reserved">null</strong> != (obj = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L501" name="L501"></a> 501       <em class="brace">{</em>
<a id="L502" name="L502"></a> 502         <a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(obj);
<a id="L503" name="L503"></a> 503       <em class="brace">}</em>
<a id="L504" name="L504"></a> 504     <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<a id="L506" name="L506"></a> 506     <em class="comment">// checkDups();</em>
<a id="L507" name="L507"></a> 507   <em class="brace">}</em>
<a id="L508" name="L508"></a> 508 
<div class="comment">
    Copy NodeList members into this nodelist, adding in
    document order.  If a node is null, don't add it.
    @param nodelist List of nodes to be added
    @param support The XPath runtime context.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L518" name="L518"></a> 518   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9876.html" title="Multiple referred from 2 places.">addNodesInDocOrder</a>(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L519" name="L519"></a> 519   <em class="brace">{</em>
<a id="L520" name="L520"></a> 520 
<a id="L521" name="L521"></a> 521     <strong class="reserved">if</strong> (!m_mutable)
<a id="L522" name="L522"></a> 522       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L523" name="L523"></a> 523 
<a id="L524" name="L524"></a> 524     <strong class="reserved">int</strong> nChildren = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L525" name="L525"></a> 525 
<a id="L526" name="L526"></a> 526     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nChildren; i++)
<a id="L527" name="L527"></a> 527     <em class="brace">{</em>
<a id="L528" name="L528"></a> 528       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L529" name="L529"></a> 529 
<a id="L530" name="L530"></a> 530       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L531" name="L531"></a> 531       <em class="brace">{</em>
<a id="L532" name="L532"></a> 532         <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, support);
<a id="L533" name="L533"></a> 533       <em class="brace">}</em>
<a id="L534" name="L534"></a> 534     <em class="brace">}</em>
<a id="L535" name="L535"></a> 535   <em class="brace">}</em>
<a id="L536" name="L536"></a> 536 
<div class="comment">
    Copy NodeList members into this nodelist, adding in
    document order.  If a node is null, don't add it.
    @param iterator NodeIterator which yields the nodes to be added.
    @param support The XPath runtime context.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L546" name="L546"></a> 546   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9876.html" title="Multiple referred from 2 places.">addNodesInDocOrder</a>(<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L547" name="L547"></a> 547   <em class="brace">{</em>
<a id="L548" name="L548"></a> 548 
<a id="L549" name="L549"></a> 549     <strong class="reserved">if</strong> (!m_mutable)
<a id="L550" name="L550"></a> 550       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L551" name="L551"></a> 551 
<a id="L552" name="L552"></a> 552     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L553" name="L553"></a> 553 
<a id="L554" name="L554"></a> 554     <strong class="reserved">while</strong> (<strong class="reserved">null</strong> != (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()))
<a id="L555" name="L555"></a> 555     <em class="brace">{</em>
<a id="L556" name="L556"></a> 556       <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, support);
<a id="L557" name="L557"></a> 557     <em class="brace">}</em>
<a id="L558" name="L558"></a> 558   <em class="brace">}</em>
<a id="L559" name="L559"></a> 559 
<div class="comment">
    Add the node list to this node set in document order.
    @param start index.
    @param end index.
    @param testIndex index.
    @param nodelist The nodelist to add.
    @param support The XPath runtime context.
    @return false always.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L573" name="L573"></a> 573   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/9876.html" title="Multiple referred from 2 places.">addNodesInDocOrder</a>(<strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, <strong class="reserved">int</strong> testIndex,
<a id="L574" name="L574"></a> 574                                      <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L575" name="L575"></a> 575   <em class="brace">{</em>
<a id="L576" name="L576"></a> 576 
<a id="L577" name="L577"></a> 577     <strong class="reserved">if</strong> (!m_mutable)
<a id="L578" name="L578"></a> 578       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L579" name="L579"></a> 579 
<a id="L580" name="L580"></a> 580     <strong class="reserved">boolean</strong> foundit = <strong class="reserved">false</strong>;
<a id="L581" name="L581"></a> 581     <strong class="reserved">int</strong> i;
<a id="L582" name="L582"></a> 582     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(testIndex);
<a id="L583" name="L583"></a> 583 
<a id="L584" name="L584"></a> 584     <strong class="reserved">for</strong> (i = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>; i &gt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>; i--)
<a id="L585" name="L585"></a> 585     <em class="brace">{</em>
<a id="L586" name="L586"></a> 586       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> child = (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>) <a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L587" name="L587"></a> 587 
<a id="L588" name="L588"></a> 588       <strong class="reserved">if</strong> (child == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L589" name="L589"></a> 589       <em class="brace">{</em>
<a id="L590" name="L590"></a> 590         i = -2;  <em class="comment">// Duplicate, suppress insert</em>
<a id="L591" name="L591"></a> 591 
<a id="L592" name="L592"></a> 592         <strong class="reserved">break</strong>;
<a id="L593" name="L593"></a> 593       <em class="brace">}</em>
<a id="L594" name="L594"></a> 594 
<a id="L595" name="L595"></a> 595       <strong class="reserved">if</strong> (!<a href="../D/2042.html" title="Multiple defined in 2 places.">DOM2Helper</a>.<a href="../D/25944.html" title="Multiple defined in 7 places.">isNodeAfter</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, child))
<a id="L596" name="L596"></a> 596       <em class="brace">{</em>
<a id="L597" name="L597"></a> 597         <a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, i + 1);
<a id="L598" name="L598"></a> 598 
<a id="L599" name="L599"></a> 599         testIndex--;
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601         <strong class="reserved">if</strong> (testIndex &gt; 0)
<a id="L602" name="L602"></a> 602         <em class="brace">{</em>
<a id="L603" name="L603"></a> 603           <strong class="reserved">boolean</strong> foundPrev = <a href="../D/10969.html" title="Multiple defined in 4 places.">addNodesInDocOrder</a>(0, i, testIndex, <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>,
<a id="L604" name="L604"></a> 604                                                  support);
<a id="L605" name="L605"></a> 605 
<a id="L606" name="L606"></a> 606           <strong class="reserved">if</strong> (!foundPrev)
<a id="L607" name="L607"></a> 607           <em class="brace">{</em>
<a id="L608" name="L608"></a> 608             <a href="../D/10969.html" title="Multiple defined in 4 places.">addNodesInDocOrder</a>(i, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1, testIndex, <a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>, support);
<a id="L609" name="L609"></a> 609           <em class="brace">}</em>
<a id="L610" name="L610"></a> 610         <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<a id="L612" name="L612"></a> 612         <strong class="reserved">break</strong>;
<a id="L613" name="L613"></a> 613       <em class="brace">}</em>
<a id="L614" name="L614"></a> 614     <em class="brace">}</em>
<a id="L615" name="L615"></a> 615 
<a id="L616" name="L616"></a> 616     <strong class="reserved">if</strong> (i == -1)
<a id="L617" name="L617"></a> 617     <em class="brace">{</em>
<a id="L618" name="L618"></a> 618       <a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, 0);
<a id="L619" name="L619"></a> 619     <em class="brace">}</em>
<a id="L620" name="L620"></a> 620 
<a id="L621" name="L621"></a> 621     <strong class="reserved">return</strong> foundit;
<a id="L622" name="L622"></a> 622   <em class="brace">}</em>
<a id="L623" name="L623"></a> 623 
<div class="comment">
    Add the node into a vector of nodes where it should occur in
    document order.
    @param node The node to be added.
    @param test true if we should test for doc order
    @param support The XPath runtime context.
    @return insertIndex.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L634" name="L634"></a> 634   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/9873.html" title="Multiple referred from 8 places.">addNodeInDocOrder</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">boolean</strong> <a href="../D/35234.html" title="Multiple defined in 11 places.">test</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L635" name="L635"></a> 635   <em class="brace">{</em>
<a id="L636" name="L636"></a> 636 
<a id="L637" name="L637"></a> 637     <strong class="reserved">if</strong> (!m_mutable)
<a id="L638" name="L638"></a> 638       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NODESET_NOT_MUTABLE, null)); //"This NodeSet is not mutable!");</em>
<a id="L639" name="L639"></a> 639 
<a id="L640" name="L640"></a> 640     <strong class="reserved">int</strong> insertIndex = -1;
<a id="L641" name="L641"></a> 641 
<a id="L642" name="L642"></a> 642     <strong class="reserved">if</strong> (<a href="../D/35234.html" title="Multiple defined in 11 places.">test</a>)
<a id="L643" name="L643"></a> 643     <em class="brace">{</em>
<a id="L644" name="L644"></a> 644 
<a id="L645" name="L645"></a> 645       <em class="comment">// This needs to do a binary search, but a binary search</em>
<a id="L646" name="L646"></a> 646       <em class="comment">// is somewhat tough because the sequence test involves</em>
<a id="L647" name="L647"></a> 647       <em class="comment">// two nodes.</em>
<a id="L648" name="L648"></a> 648       <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(), i;
<a id="L649" name="L649"></a> 649 
<a id="L650" name="L650"></a> 650       <strong class="reserved">for</strong> (i = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1; i &gt;= 0; i--)
<a id="L651" name="L651"></a> 651       <em class="brace">{</em>
<a id="L652" name="L652"></a> 652         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> child = (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>) <a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L653" name="L653"></a> 653 
<a id="L654" name="L654"></a> 654         <strong class="reserved">if</strong> (child == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L655" name="L655"></a> 655         <em class="brace">{</em>
<a id="L656" name="L656"></a> 656           i = -2;  <em class="comment">// Duplicate, suppress insert</em>
<a id="L657" name="L657"></a> 657 
<a id="L658" name="L658"></a> 658           <strong class="reserved">break</strong>;
<a id="L659" name="L659"></a> 659         <em class="brace">}</em>
<a id="L660" name="L660"></a> 660 
<a id="L661" name="L661"></a> 661         <strong class="reserved">if</strong> (!<a href="../D/2042.html" title="Multiple defined in 2 places.">DOM2Helper</a>.<a href="../D/25944.html" title="Multiple defined in 7 places.">isNodeAfter</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, child))
<a id="L662" name="L662"></a> 662         <em class="brace">{</em>
<a id="L663" name="L663"></a> 663           <strong class="reserved">break</strong>;
<a id="L664" name="L664"></a> 664         <em class="brace">}</em>
<a id="L665" name="L665"></a> 665       <em class="brace">}</em>
<a id="L666" name="L666"></a> 666 
<a id="L667" name="L667"></a> 667       <strong class="reserved">if</strong> (i != -2)
<a id="L668" name="L668"></a> 668       <em class="brace">{</em>
<a id="L669" name="L669"></a> 669         insertIndex = i + 1;
<a id="L670" name="L670"></a> 670 
<a id="L671" name="L671"></a> 671         <a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, insertIndex);
<a id="L672" name="L672"></a> 672       <em class="brace">}</em>
<a id="L673" name="L673"></a> 673     <em class="brace">}</em>
<a id="L674" name="L674"></a> 674     <strong class="reserved">else</strong>
<a id="L675" name="L675"></a> 675     <em class="brace">{</em>
<a id="L676" name="L676"></a> 676       insertIndex = <strong class="reserved">this</strong>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L677" name="L677"></a> 677 
<a id="L678" name="L678"></a> 678       <strong class="reserved">boolean</strong> foundit = <strong class="reserved">false</strong>;
<a id="L679" name="L679"></a> 679 
<a id="L680" name="L680"></a> 680       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; insertIndex; i++)
<a id="L681" name="L681"></a> 681       <em class="brace">{</em>
<a id="L682" name="L682"></a> 682         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>))
<a id="L683" name="L683"></a> 683         <em class="brace">{</em>
<a id="L684" name="L684"></a> 684           foundit = <strong class="reserved">true</strong>;
<a id="L685" name="L685"></a> 685 
<a id="L686" name="L686"></a> 686           <strong class="reserved">break</strong>;
<a id="L687" name="L687"></a> 687         <em class="brace">}</em>
<a id="L688" name="L688"></a> 688       <em class="brace">}</em>
<a id="L689" name="L689"></a> 689 
<a id="L690" name="L690"></a> 690       <strong class="reserved">if</strong> (!foundit)
<a id="L691" name="L691"></a> 691         <a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L692" name="L692"></a> 692     <em class="brace">}</em>
<a id="L693" name="L693"></a> 693 
<a id="L694" name="L694"></a> 694     <em class="comment">// checkDups();</em>
<a id="L695" name="L695"></a> 695     <strong class="reserved">return</strong> insertIndex;
<a id="L696" name="L696"></a> 696   <em class="brace">}</em>  <em class="comment">// end addNodeInDocOrder(Vector v, Object obj)</em>
<a id="L697" name="L697"></a> 697 
<div class="comment">
    Add the node into a vector of nodes where it should occur in
    document order.
    @param node The node to be added.
    @param support The XPath runtime context.
    @return The index where it was inserted.
    @throws RuntimeException thrown if this NodeSet is not of
    a mutable type.</div>
<a id="L708" name="L708"></a> 708   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/9873.html" title="Multiple referred from 8 places.">addNodeInDocOrder</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> support)
<a id="L709" name="L709"></a> 709   <em class="brace">{</em>
<a id="L710" name="L710"></a> 710 
<a id="L711" name="L711"></a> 711     <strong class="reserved">if</strong> (!m_mutable)
<a id="L712" name="L712"></a> 712       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L713" name="L713"></a> 713 
<a id="L714" name="L714"></a> 714     <strong class="reserved">return</strong> <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">true</strong>, support);
<a id="L715" name="L715"></a> 715   <em class="brace">}</em>  <em class="comment">// end addNodeInDocOrder(Vector v, Object obj)</em>
<a id="L716" name="L716"></a> 716 
<a id="L717" name="L717"></a> 717 
<div class="comment">
 If this node is being used as an iterator, the next index that nextNode()
   *  will return.  </div>
<a id="L720" name="L720"></a> 720   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_next = 0;
<a id="L721" name="L721"></a> 721 
<div class="comment">
    Get the current position, which is one less than
    the next nextNode() call will retrieve.  i.e. if
    you call getCurrentPos() and the return is 0, the next
    fetch will take place at index 1.
    @return The the current position index.</div>
<a id="L730" name="L730"></a> 730   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15900.html" title="Multiple referred from 15 places.">getCurrentPos</a>()
<a id="L731" name="L731"></a> 731   <em class="brace">{</em>
<a id="L732" name="L732"></a> 732     <strong class="reserved">return</strong> m_next;
<a id="L733" name="L733"></a> 733   <em class="brace">}</em>
<a id="L734" name="L734"></a> 734 
<div class="comment">
    Set the current position in the node set.
    @param i Must be a valid index.
    @throws RuntimeException thrown if this NodeSet is not of
    a cached type, and thus doesn't permit indexed access.</div>
<a id="L741" name="L741"></a> 741   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27137.html" title="Multiple referred from 3 places.">setCurrentPos</a>(<strong class="reserved">int</strong> i)
<a id="L742" name="L742"></a> 742   <em class="brace">{</em>
<a id="L743" name="L743"></a> 743 
<a id="L744" name="L744"></a> 744     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L745" name="L745"></a> 745       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L746" name="L746"></a> 746         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_CANNOT_INDEX, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet can not do indexing or counting functions!");</em>
<a id="L747" name="L747"></a> 747 
<a id="L748" name="L748"></a> 748     m_next = i;
<a id="L749" name="L749"></a> 749   <em class="brace">}</em>
<a id="L750" name="L750"></a> 750 
<div class="comment">
    Return the last fetched node.  Needed to support the UnionPathIterator.
    @return the last fetched node.
    @throws RuntimeException thrown if this NodeSet is not of
    a cached type, and thus doesn't permit indexed access.</div>
<a id="L758" name="L758"></a> 758   <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/15897.html" title="Multiple referred from 27 places.">getCurrentNode</a>()
<a id="L759" name="L759"></a> 759   <em class="brace">{</em>
<a id="L760" name="L760"></a> 760 
<a id="L761" name="L761"></a> 761     <strong class="reserved">if</strong> (!m_cacheNodes)
<a id="L762" name="L762"></a> 762       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L763" name="L763"></a> 763         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_CANNOT_INDEX, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet can not do indexing or counting functions!");</em>
<a id="L764" name="L764"></a> 764 
<a id="L765" name="L765"></a> 765     <strong class="reserved">int</strong> saved = m_next;
<a id="L766" name="L766"></a> 766     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = (m_next &lt; m_firstFree) ? <a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(m_next) : <strong class="reserved">null</strong>;
<a id="L767" name="L767"></a> 767     m_next = saved; <em class="comment">// HACK: I think this is a bit of a hack.  -sb</em>
<a id="L768" name="L768"></a> 768     <strong class="reserved">return</strong> n;
<a id="L769" name="L769"></a> 769   <em class="brace">}</em>
<a id="L770" name="L770"></a> 770 
<div class="comment">
   /** True if this list can be mutated.  */</div>
<a id="L772" name="L772"></a> 772   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_mutable = <strong class="reserved">true</strong>;
<a id="L773" name="L773"></a> 773 
<div class="comment">
 True if this list is cached.
   *  @serial  </div>
<a id="L776" name="L776"></a> 776   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_cacheNodes = <strong class="reserved">true</strong>;
<a id="L777" name="L777"></a> 777 
<div class="comment">
    Get whether or not this is a cached node set.
    @return True if this list is cached.</div>
<a id="L784" name="L784"></a> 784   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getShouldCacheNodes()
<a id="L785" name="L785"></a> 785   <em class="brace">{</em>
<a id="L786" name="L786"></a> 786     <strong class="reserved">return</strong> m_cacheNodes;
<a id="L787" name="L787"></a> 787   <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
    If setShouldCacheNodes(true) is called, then nodes will
    be cached.  They are not cached by default. This switch must
    be set before the first call to nextNode is made, to ensure
    that all nodes are cached.
    @param b true if this node set should be cached.
    @throws RuntimeException thrown if an attempt is made to
    request caching after we've already begun stepping through the
    nodes in this set.</div>
<a id="L800" name="L800"></a> 800   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28175.html" title="Multiple referred from 15 places.">setShouldCacheNodes</a>(<strong class="reserved">boolean</strong> b)
<a id="L801" name="L801"></a> 801   <em class="brace">{</em>
<a id="L802" name="L802"></a> 802 
<a id="L803" name="L803"></a> 803     <strong class="reserved">if</strong> (!<a href="../D/25614.html" title="Multiple defined in 6 places.">isFresh</a>())
<a id="L804" name="L804"></a> 804       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L805" name="L805"></a> 805         <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANNOT_CALL_SETSHOULDCACHENODE, <strong class="reserved">null</strong>)); <em class="comment">//"Can not call setShouldCacheNodes after nextNode has been called!");</em>
<a id="L806" name="L806"></a> 806 
<a id="L807" name="L807"></a> 807     m_cacheNodes = b;
<a id="L808" name="L808"></a> 808     m_mutable = <strong class="reserved">true</strong>;
<a id="L809" name="L809"></a> 809   <em class="brace">}</em>
<a id="L810" name="L810"></a> 810 
<a id="L811" name="L811"></a> 811 
<a id="L812" name="L812"></a> 812   <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <strong class="reserved">int</strong> m_last = 0;
<a id="L813" name="L813"></a> 813 
<a id="L814" name="L814"></a> 814   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17269.html" title="Multiple referred from 11 places.">getLast</a>()
<a id="L815" name="L815"></a> 815   <em class="brace">{</em>
<a id="L816" name="L816"></a> 816     <strong class="reserved">return</strong> m_last;
<a id="L817" name="L817"></a> 817   <em class="brace">}</em>
<a id="L818" name="L818"></a> 818 
<a id="L819" name="L819"></a> 819   <strong class="reserved">public</strong> <strong class="reserved">void</strong> setLast(<strong class="reserved">int</strong> <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>)
<a id="L820" name="L820"></a> 820   <em class="brace">{</em>
<a id="L821" name="L821"></a> 821     m_last = <a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>;
<a id="L822" name="L822"></a> 822   <em class="brace">}</em>
<a id="L823" name="L823"></a> 823 
<div class="comment">
 Size of blocks to allocate.
   *  @serial          </div>
<a id="L826" name="L826"></a> 826   <strong class="reserved">private</strong> <strong class="reserved">int</strong> m_blocksize;
<a id="L827" name="L827"></a> 827 
<div class="comment">
 Array of nodes this points to.
   *  @serial          </div>
<a id="L830" name="L830"></a> 830   <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> m_map[];
<a id="L831" name="L831"></a> 831 
<div class="comment">
 Number of nodes in this NodeVector.
   *  @serial          </div>
<a id="L834" name="L834"></a> 834   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_firstFree = 0;
<a id="L835" name="L835"></a> 835 
<div class="comment">
 Size of the array this points to.
   *  @serial           </div>
<a id="L838" name="L838"></a> 838   <strong class="reserved">private</strong> <strong class="reserved">int</strong> m_mapSize;  <em class="comment">// lazy initialization</em>
<a id="L839" name="L839"></a> 839 
<div class="comment">
    Get a cloned LocPathIterator.
    @return A clone of this
    @throws CloneNotSupportedException</div>
<a id="L847" name="L847"></a> 847   <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L848" name="L848"></a> 848   <em class="brace">{</em>
<a id="L849" name="L849"></a> 849 
<a id="L850" name="L850"></a> 850     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>) <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L851" name="L851"></a> 851 
<a id="L852" name="L852"></a> 852     <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != <strong class="reserved">this</strong>.m_map) &amp;&amp; (<strong class="reserved">this</strong>.m_map == <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_map))
<a id="L853" name="L853"></a> 853     <em class="brace">{</em>
<a id="L854" name="L854"></a> 854       <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[<strong class="reserved">this</strong>.m_map.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L855" name="L855"></a> 855 
<a id="L856" name="L856"></a> 856       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<strong class="reserved">this</strong>.m_map, 0, <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_map, 0, <strong class="reserved">this</strong>.m_map.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L857" name="L857"></a> 857     <em class="brace">}</em>
<a id="L858" name="L858"></a> 858 
<a id="L859" name="L859"></a> 859     <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L860" name="L860"></a> 860   <em class="brace">}</em>
<a id="L861" name="L861"></a> 861 
<div class="comment">
    Get the length of the list.
    @return Number of nodes in this NodeVector</div>
<a id="L867" name="L867"></a> 867   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>()
<a id="L868" name="L868"></a> 868   <em class="brace">{</em>
<a id="L869" name="L869"></a> 869     <strong class="reserved">return</strong> m_firstFree;
<a id="L870" name="L870"></a> 870   <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<div class="comment">
    Append a Node onto the vector.
    @param value Node to add to the vector</div>
<a id="L877" name="L877"></a> 877   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9708.html" title="Multiple referred from 886 places.">addElement</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L878" name="L878"></a> 878   <em class="brace">{</em>
<a id="L879" name="L879"></a> 879     <strong class="reserved">if</strong> (!m_mutable)
<a id="L880" name="L880"></a> 880       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L881" name="L881"></a> 881 
<a id="L882" name="L882"></a> 882     <strong class="reserved">if</strong> ((m_firstFree + 1) &gt;= m_mapSize)
<a id="L883" name="L883"></a> 883     <em class="brace">{</em>
<a id="L884" name="L884"></a> 884       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L885" name="L885"></a> 885       <em class="brace">{</em>
<a id="L886" name="L886"></a> 886         m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_blocksize];
<a id="L887" name="L887"></a> 887         m_mapSize = m_blocksize;
<a id="L888" name="L888"></a> 888       <em class="brace">}</em>
<a id="L889" name="L889"></a> 889       <strong class="reserved">else</strong>
<a id="L890" name="L890"></a> 890       <em class="brace">{</em>
<a id="L891" name="L891"></a> 891         m_mapSize += m_blocksize;
<a id="L892" name="L892"></a> 892 
<a id="L893" name="L893"></a> 893         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>[] = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_mapSize];
<a id="L894" name="L894"></a> 894 
<a id="L895" name="L895"></a> 895         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, 0, <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>, 0, m_firstFree + 1);
<a id="L896" name="L896"></a> 896 
<a id="L897" name="L897"></a> 897         m_map = <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>;
<a id="L898" name="L898"></a> 898       <em class="brace">}</em>
<a id="L899" name="L899"></a> 899     <em class="brace">}</em>
<a id="L900" name="L900"></a> 900 
<a id="L901" name="L901"></a> 901     m_map[m_firstFree] = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L902" name="L902"></a> 902 
<a id="L903" name="L903"></a> 903     m_firstFree++;
<a id="L904" name="L904"></a> 904   <em class="brace">}</em>
<a id="L905" name="L905"></a> 905 
<div class="comment">
    Append a Node onto the vector.
    @param value Node to add to the vector</div>
<a id="L911" name="L911"></a> 911   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/25256.html" title="Multiple referred from 281 places.">push</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L912" name="L912"></a> 912   <em class="brace">{</em>
<a id="L913" name="L913"></a> 913 
<a id="L914" name="L914"></a> 914     <strong class="reserved">int</strong> ff = m_firstFree;
<a id="L915" name="L915"></a> 915 
<a id="L916" name="L916"></a> 916     <strong class="reserved">if</strong> ((ff + 1) &gt;= m_mapSize)
<a id="L917" name="L917"></a> 917     <em class="brace">{</em>
<a id="L918" name="L918"></a> 918       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L919" name="L919"></a> 919       <em class="brace">{</em>
<a id="L920" name="L920"></a> 920         m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_blocksize];
<a id="L921" name="L921"></a> 921         m_mapSize = m_blocksize;
<a id="L922" name="L922"></a> 922       <em class="brace">}</em>
<a id="L923" name="L923"></a> 923       <strong class="reserved">else</strong>
<a id="L924" name="L924"></a> 924       <em class="brace">{</em>
<a id="L925" name="L925"></a> 925         m_mapSize += m_blocksize;
<a id="L926" name="L926"></a> 926 
<a id="L927" name="L927"></a> 927         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>[] = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_mapSize];
<a id="L928" name="L928"></a> 928 
<a id="L929" name="L929"></a> 929         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, 0, <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>, 0, ff + 1);
<a id="L930" name="L930"></a> 930 
<a id="L931" name="L931"></a> 931         m_map = <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>;
<a id="L932" name="L932"></a> 932       <em class="brace">}</em>
<a id="L933" name="L933"></a> 933     <em class="brace">}</em>
<a id="L934" name="L934"></a> 934 
<a id="L935" name="L935"></a> 935     m_map[ff] = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L936" name="L936"></a> 936 
<a id="L937" name="L937"></a> 937     ff++;
<a id="L938" name="L938"></a> 938 
<a id="L939" name="L939"></a> 939     m_firstFree = ff;
<a id="L940" name="L940"></a> 940   <em class="brace">}</em>
<a id="L941" name="L941"></a> 941 
<div class="comment">
    Pop a node from the tail of the vector and return the result.
    @return the node at the tail of the vector</div>
<a id="L947" name="L947"></a> 947   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/24804.html" title="Multiple referred from 176 places.">pop</a>()
<a id="L948" name="L948"></a> 948   <em class="brace">{</em>
<a id="L949" name="L949"></a> 949 
<a id="L950" name="L950"></a> 950     m_firstFree--;
<a id="L951" name="L951"></a> 951 
<a id="L952" name="L952"></a> 952     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = m_map[m_firstFree];
<a id="L953" name="L953"></a> 953 
<a id="L954" name="L954"></a> 954     m_map[m_firstFree] = <strong class="reserved">null</strong>;
<a id="L955" name="L955"></a> 955 
<a id="L956" name="L956"></a> 956     <strong class="reserved">return</strong> n;
<a id="L957" name="L957"></a> 957   <em class="brace">}</em>
<a id="L958" name="L958"></a> 958 
<div class="comment">
    Pop a node from the tail of the vector and return the
    top of the stack after the pop.
    @return The top of the stack after it's been popped</div>
<a id="L965" name="L965"></a> 965   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/5889.html#L2298" title="Referred from 2298 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">popAndTop</a>()
<a id="L966" name="L966"></a> 966   <em class="brace">{</em>
<a id="L967" name="L967"></a> 967 
<a id="L968" name="L968"></a> 968     m_firstFree--;
<a id="L969" name="L969"></a> 969 
<a id="L970" name="L970"></a> 970     m_map[m_firstFree] = <strong class="reserved">null</strong>;
<a id="L971" name="L971"></a> 971 
<a id="L972" name="L972"></a> 972     <strong class="reserved">return</strong> (m_firstFree == 0) ? <strong class="reserved">null</strong> : m_map[m_firstFree - 1];
<a id="L973" name="L973"></a> 973   <em class="brace">}</em>
<a id="L974" name="L974"></a> 974 
<div class="comment">
    Pop a node from the tail of the vector.</div>
<a id="L978" name="L978"></a> 978   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/24825.html" title="Multiple referred from 2 places.">popQuick</a>()
<a id="L979" name="L979"></a> 979   <em class="brace">{</em>
<a id="L980" name="L980"></a> 980 
<a id="L981" name="L981"></a> 981     m_firstFree--;
<a id="L982" name="L982"></a> 982 
<a id="L983" name="L983"></a> 983     m_map[m_firstFree] = <strong class="reserved">null</strong>;
<a id="L984" name="L984"></a> 984   <em class="brace">}</em>
<a id="L985" name="L985"></a> 985 
<div class="comment">
    Return the node at the top of the stack without popping the stack.
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.
    @return Node at the top of the stack or null if stack is empty.</div>
<a id="L993" name="L993"></a> 993   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/24711.html" title="Multiple referred from 2 places.">peepOrNull</a>()
<a id="L994" name="L994"></a> 994   <em class="brace">{</em>
<a id="L995" name="L995"></a> 995     <strong class="reserved">return</strong> ((<strong class="reserved">null</strong> != m_map) &amp;&amp; (m_firstFree &gt; 0))
<a id="L996" name="L996"></a> 996            ? m_map[m_firstFree - 1] : <strong class="reserved">null</strong>;
<a id="L997" name="L997"></a> 997   <em class="brace">}</em>
<a id="L998" name="L998"></a> 998 
<div class="comment">
    Push a pair of nodes into the stack.
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.
    @param v1 First node to add to vector
    @param v2 Second node to add to vector</div>
<a id="L1007" name="L1007"></a>1007   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> pushPair(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> v1, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> v2)
<a id="L1008" name="L1008"></a>1008   <em class="brace">{</em>
<a id="L1009" name="L1009"></a>1009 
<a id="L1010" name="L1010"></a>1010     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1011" name="L1011"></a>1011     <em class="brace">{</em>
<a id="L1012" name="L1012"></a>1012       m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_blocksize];
<a id="L1013" name="L1013"></a>1013       m_mapSize = m_blocksize;
<a id="L1014" name="L1014"></a>1014     <em class="brace">}</em>
<a id="L1015" name="L1015"></a>1015     <strong class="reserved">else</strong>
<a id="L1016" name="L1016"></a>1016     <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017       <strong class="reserved">if</strong> ((m_firstFree + 2) &gt;= m_mapSize)
<a id="L1018" name="L1018"></a>1018       <em class="brace">{</em>
<a id="L1019" name="L1019"></a>1019         m_mapSize += m_blocksize;
<a id="L1020" name="L1020"></a>1020 
<a id="L1021" name="L1021"></a>1021         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>[] = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_mapSize];
<a id="L1022" name="L1022"></a>1022 
<a id="L1023" name="L1023"></a>1023         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, 0, <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>, 0, m_firstFree);
<a id="L1024" name="L1024"></a>1024 
<a id="L1025" name="L1025"></a>1025         m_map = <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>;
<a id="L1026" name="L1026"></a>1026       <em class="brace">}</em>
<a id="L1027" name="L1027"></a>1027     <em class="brace">}</em>
<a id="L1028" name="L1028"></a>1028 
<a id="L1029" name="L1029"></a>1029     m_map[m_firstFree] = v1;
<a id="L1030" name="L1030"></a>1030     m_map[m_firstFree + 1] = v2;
<a id="L1031" name="L1031"></a>1031     m_firstFree += 2;
<a id="L1032" name="L1032"></a>1032   <em class="brace">}</em>
<a id="L1033" name="L1033"></a>1033 
<div class="comment">
    Pop a pair of nodes from the tail of the stack.
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.</div>
<a id="L1039" name="L1039"></a>1039   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> popPair()
<a id="L1040" name="L1040"></a>1040   <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041 
<a id="L1042" name="L1042"></a>1042     m_firstFree -= 2;
<a id="L1043" name="L1043"></a>1043     m_map[m_firstFree] = <strong class="reserved">null</strong>;
<a id="L1044" name="L1044"></a>1044     m_map[m_firstFree + 1] = <strong class="reserved">null</strong>;
<a id="L1045" name="L1045"></a>1045   <em class="brace">}</em>
<a id="L1046" name="L1046"></a>1046 
<div class="comment">
    Set the tail of the stack to the given node.
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.
    @param n Node to set at the tail of vector</div>
<a id="L1054" name="L1054"></a>1054   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> setTail(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n)
<a id="L1055" name="L1055"></a>1055   <em class="brace">{</em>
<a id="L1056" name="L1056"></a>1056     m_map[m_firstFree - 1] = n;
<a id="L1057" name="L1057"></a>1057   <em class="brace">}</em>
<a id="L1058" name="L1058"></a>1058 
<div class="comment">
    Set the given node one position from the tail.
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.
    @param n Node to set</div>
<a id="L1066" name="L1066"></a>1066   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> setTailSub1(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n)
<a id="L1067" name="L1067"></a>1067   <em class="brace">{</em>
<a id="L1068" name="L1068"></a>1068     m_map[m_firstFree - 2] = n;
<a id="L1069" name="L1069"></a>1069   <em class="brace">}</em>
<a id="L1070" name="L1070"></a>1070 
<div class="comment">
    Return the node at the tail of the vector without popping
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.
    @return Node at the tail of the vector</div>
<a id="L1078" name="L1078"></a>1078   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> peepTail()
<a id="L1079" name="L1079"></a>1079   <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080     <strong class="reserved">return</strong> m_map[m_firstFree - 1];
<a id="L1081" name="L1081"></a>1081   <em class="brace">}</em>
<a id="L1082" name="L1082"></a>1082 
<div class="comment">
    Return the node one position from the tail without popping.
    Special purpose method for TransformerImpl, pushElemTemplateElement.
    Performance critical.
    @return Node one away from the tail</div>
<a id="L1090" name="L1090"></a>1090   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> peepTailSub1()
<a id="L1091" name="L1091"></a>1091   <em class="brace">{</em>
<a id="L1092" name="L1092"></a>1092     <strong class="reserved">return</strong> m_map[m_firstFree - 2];
<a id="L1093" name="L1093"></a>1093   <em class="brace">}</em>
<a id="L1094" name="L1094"></a>1094 
<div class="comment">
    Inserts the specified node in this vector at the specified index.
    Each component in this vector with an index greater or equal to
    the specified index is shifted upward to have an index one greater
    than the value it had previously.
    @param value Node to insert
    @param at Position where to insert</div>
<a id="L1104" name="L1104"></a>1104   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20769.html" title="Multiple referred from 72 places.">insertElementAt</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">int</strong> <a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>)
<a id="L1105" name="L1105"></a>1105   <em class="brace">{</em>
<a id="L1106" name="L1106"></a>1106     <strong class="reserved">if</strong> (!m_mutable)
<a id="L1107" name="L1107"></a>1107       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L1108" name="L1108"></a>1108 
<a id="L1109" name="L1109"></a>1109     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1110" name="L1110"></a>1110     <em class="brace">{</em>
<a id="L1111" name="L1111"></a>1111       m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_blocksize];
<a id="L1112" name="L1112"></a>1112       m_mapSize = m_blocksize;
<a id="L1113" name="L1113"></a>1113     <em class="brace">}</em>
<a id="L1114" name="L1114"></a>1114     <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((m_firstFree + 1) &gt;= m_mapSize)
<a id="L1115" name="L1115"></a>1115     <em class="brace">{</em>
<a id="L1116" name="L1116"></a>1116       m_mapSize += m_blocksize;
<a id="L1117" name="L1117"></a>1117 
<a id="L1118" name="L1118"></a>1118       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>[] = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_mapSize];
<a id="L1119" name="L1119"></a>1119 
<a id="L1120" name="L1120"></a>1120       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, 0, <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>, 0, m_firstFree + 1);
<a id="L1121" name="L1121"></a>1121 
<a id="L1122" name="L1122"></a>1122       m_map = <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>;
<a id="L1123" name="L1123"></a>1123     <em class="brace">}</em>
<a id="L1124" name="L1124"></a>1124 
<a id="L1125" name="L1125"></a>1125     <strong class="reserved">if</strong> (<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a> &lt;= (m_firstFree - 1))
<a id="L1126" name="L1126"></a>1126     <em class="brace">{</em>
<a id="L1127" name="L1127"></a>1127       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, <a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>, m_map, <a href="../D/11601.html" title="Multiple defined in 3 places.">at</a> + 1, m_firstFree - <a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>);
<a id="L1128" name="L1128"></a>1128     <em class="brace">}</em>
<a id="L1129" name="L1129"></a>1129 
<a id="L1130" name="L1130"></a>1130     m_map[<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>] = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1131" name="L1131"></a>1131 
<a id="L1132" name="L1132"></a>1132     m_firstFree++;
<a id="L1133" name="L1133"></a>1133   <em class="brace">}</em>
<a id="L1134" name="L1134"></a>1134 
<div class="comment">
    Append the nodes to the list.
    @param nodes NodeVector to append to this list</div>
<a id="L1140" name="L1140"></a>1140   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/4943.html#L937" title="Referred from 937 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">appendNodes</a>(<a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> nodes)
<a id="L1141" name="L1141"></a>1141   <em class="brace">{</em>
<a id="L1142" name="L1142"></a>1142 
<a id="L1143" name="L1143"></a>1143     <strong class="reserved">int</strong> nNodes = nodes.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1144" name="L1144"></a>1144 
<a id="L1145" name="L1145"></a>1145     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1146" name="L1146"></a>1146     <em class="brace">{</em>
<a id="L1147" name="L1147"></a>1147       m_mapSize = nNodes + m_blocksize;
<a id="L1148" name="L1148"></a>1148       m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_mapSize];
<a id="L1149" name="L1149"></a>1149     <em class="brace">}</em>
<a id="L1150" name="L1150"></a>1150     <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((m_firstFree + nNodes) &gt;= m_mapSize)
<a id="L1151" name="L1151"></a>1151     <em class="brace">{</em>
<a id="L1152" name="L1152"></a>1152       m_mapSize += (nNodes + m_blocksize);
<a id="L1153" name="L1153"></a>1153 
<a id="L1154" name="L1154"></a>1154       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>[] = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_mapSize];
<a id="L1155" name="L1155"></a>1155 
<a id="L1156" name="L1156"></a>1156       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, 0, <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>, 0, m_firstFree + nNodes);
<a id="L1157" name="L1157"></a>1157 
<a id="L1158" name="L1158"></a>1158       m_map = <a href="../S/6273.html#L54" title="Defined at 54 in src/com/sun/jmx/mbeanserver/Util.java.">newMap</a>;
<a id="L1159" name="L1159"></a>1159     <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160 
<a id="L1161" name="L1161"></a>1161     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(nodes.m_map, 0, m_map, m_firstFree, nNodes);
<a id="L1162" name="L1162"></a>1162 
<a id="L1163" name="L1163"></a>1163     m_firstFree += nNodes;
<a id="L1164" name="L1164"></a>1164   <em class="brace">}</em>
<a id="L1165" name="L1165"></a>1165 
<div class="comment">
    Inserts the specified node in this vector at the specified index.
    Each component in this vector with an index greater or equal to
    the specified index is shifted upward to have an index one greater
    than the value it had previously.</div>
<a id="L1172" name="L1172"></a>1172   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25892.html" title="Multiple referred from 90 places.">removeAllElements</a>()
<a id="L1173" name="L1173"></a>1173   <em class="brace">{</em>
<a id="L1174" name="L1174"></a>1174 
<a id="L1175" name="L1175"></a>1175     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1176" name="L1176"></a>1176       <strong class="reserved">return</strong>;
<a id="L1177" name="L1177"></a>1177 
<a id="L1178" name="L1178"></a>1178     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; m_firstFree; i++)
<a id="L1179" name="L1179"></a>1179     <em class="brace">{</em>
<a id="L1180" name="L1180"></a>1180       m_map[i] = <strong class="reserved">null</strong>;
<a id="L1181" name="L1181"></a>1181     <em class="brace">}</em>
<a id="L1182" name="L1182"></a>1182 
<a id="L1183" name="L1183"></a>1183     m_firstFree = 0;
<a id="L1184" name="L1184"></a>1184   <em class="brace">}</em>
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
    Removes the first occurrence of the argument from this vector.
    If the object is found in this vector, each component in the vector
    with an index greater or equal to the object's index is shifted
    downward to have an index one smaller than the value it had
    previously.
    @param s Node to remove from the list
    @return True if the node was successfully removed</div>
<a id="L1197" name="L1197"></a>1197   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25951.html" title="Multiple referred from 45 places.">removeElement</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> s)
<a id="L1198" name="L1198"></a>1198   <em class="brace">{</em>
<a id="L1199" name="L1199"></a>1199     <strong class="reserved">if</strong> (!m_mutable)
<a id="L1200" name="L1200"></a>1200       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L1201" name="L1201"></a>1201 
<a id="L1202" name="L1202"></a>1202     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1203" name="L1203"></a>1203       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1204" name="L1204"></a>1204 
<a id="L1205" name="L1205"></a>1205     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; m_firstFree; i++)
<a id="L1206" name="L1206"></a>1206     <em class="brace">{</em>
<a id="L1207" name="L1207"></a>1207       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_map[i];
<a id="L1208" name="L1208"></a>1208 
<a id="L1209" name="L1209"></a>1209       <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &amp;&amp; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(s))
<a id="L1210" name="L1210"></a>1210       <em class="brace">{</em>
<a id="L1211" name="L1211"></a>1211         <strong class="reserved">if</strong> (i &lt; m_firstFree - 1)
<a id="L1212" name="L1212"></a>1212           <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, i + 1, m_map, i, m_firstFree - i - 1);
<a id="L1213" name="L1213"></a>1213 
<a id="L1214" name="L1214"></a>1214         m_firstFree--;
<a id="L1215" name="L1215"></a>1215         m_map[m_firstFree] = <strong class="reserved">null</strong>;
<a id="L1216" name="L1216"></a>1216 
<a id="L1217" name="L1217"></a>1217         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1218" name="L1218"></a>1218       <em class="brace">}</em>
<a id="L1219" name="L1219"></a>1219     <em class="brace">}</em>
<a id="L1220" name="L1220"></a>1220 
<a id="L1221" name="L1221"></a>1221     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1222" name="L1222"></a>1222   <em class="brace">}</em>
<a id="L1223" name="L1223"></a>1223 
<div class="comment">
    Deletes the component at the specified index. Each component in
    this vector with an index greater or equal to the specified
    index is shifted downward to have an index one smaller than
    the value it had previously.
    @param i Index of node to remove</div>
<a id="L1232" name="L1232"></a>1232   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25952.html" title="Multiple referred from 79 places.">removeElementAt</a>(<strong class="reserved">int</strong> i)
<a id="L1233" name="L1233"></a>1233   <em class="brace">{</em>
<a id="L1234" name="L1234"></a>1234 
<a id="L1235" name="L1235"></a>1235     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1236" name="L1236"></a>1236       <strong class="reserved">return</strong>;
<a id="L1237" name="L1237"></a>1237 
<a id="L1238" name="L1238"></a>1238     <strong class="reserved">if</strong> (i &gt;= m_firstFree)
<a id="L1239" name="L1239"></a>1239       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a>(i + " &gt;= " + m_firstFree);
<a id="L1240" name="L1240"></a>1240     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (i &lt; 0)
<a id="L1241" name="L1241"></a>1241       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a>(i);
<a id="L1242" name="L1242"></a>1242 
<a id="L1243" name="L1243"></a>1243     <strong class="reserved">if</strong> (i &lt; m_firstFree - 1)
<a id="L1244" name="L1244"></a>1244       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(m_map, i + 1, m_map, i, m_firstFree - i - 1);
<a id="L1245" name="L1245"></a>1245 
<a id="L1246" name="L1246"></a>1246     m_firstFree--;
<a id="L1247" name="L1247"></a>1247     m_map[m_firstFree] = <strong class="reserved">null</strong>;
<a id="L1248" name="L1248"></a>1248   <em class="brace">}</em>
<a id="L1249" name="L1249"></a>1249 
<div class="comment">
    Sets the component at the specified index of this vector to be the
    specified object. The previous component at that position is discarded.
    The index must be a value greater than or equal to 0 and less
    than the current size of the vector.
    @param node Node to set
    @param index Index of where to set the node</div>
<a id="L1260" name="L1260"></a>1260   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27311.html" title="Multiple referred from 85 places.">setElementAt</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L1261" name="L1261"></a>1261   <em class="brace">{</em>
<a id="L1262" name="L1262"></a>1262     <strong class="reserved">if</strong> (!m_mutable)
<a id="L1263" name="L1263"></a>1263       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NODESET_NOT_MUTABLE, <strong class="reserved">null</strong>)); <em class="comment">//"This NodeSet is not mutable!");</em>
<a id="L1264" name="L1264"></a>1264 
<a id="L1265" name="L1265"></a>1265     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1266" name="L1266"></a>1266     <em class="brace">{</em>
<a id="L1267" name="L1267"></a>1267       m_map = <strong class="reserved">new</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>[m_blocksize];
<a id="L1268" name="L1268"></a>1268       m_mapSize = m_blocksize;
<a id="L1269" name="L1269"></a>1269     <em class="brace">}</em>
<a id="L1270" name="L1270"></a>1270 
<a id="L1271" name="L1271"></a>1271     m_map[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>] = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L1272" name="L1272"></a>1272   <em class="brace">}</em>
<a id="L1273" name="L1273"></a>1273 
<div class="comment">
    Get the nth element.
    @param i Index of node to get
    @return Node at specified index</div>
<a id="L1281" name="L1281"></a>1281   <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../R/13630.html" title="Multiple referred from 1941 places.">elementAt</a>(<strong class="reserved">int</strong> i)
<a id="L1282" name="L1282"></a>1282   <em class="brace">{</em>
<a id="L1283" name="L1283"></a>1283 
<a id="L1284" name="L1284"></a>1284     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1285" name="L1285"></a>1285       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1286" name="L1286"></a>1286 
<a id="L1287" name="L1287"></a>1287     <strong class="reserved">return</strong> m_map[i];
<a id="L1288" name="L1288"></a>1288   <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289 
<div class="comment">
    Tell if the table contains the given node.
    @param s Node to look for
    @return True if the given node was found.</div>
<a id="L1297" name="L1297"></a>1297   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11949.html" title="Multiple referred from 682 places.">contains</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> s)
<a id="L1298" name="L1298"></a>1298   <em class="brace">{</em>
<a id="L1299" name="L1299"></a>1299     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L1300" name="L1300"></a>1300 
<a id="L1301" name="L1301"></a>1301     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1302" name="L1302"></a>1302       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1303" name="L1303"></a>1303 
<a id="L1304" name="L1304"></a>1304     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; m_firstFree; i++)
<a id="L1305" name="L1305"></a>1305     <em class="brace">{</em>
<a id="L1306" name="L1306"></a>1306       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_map[i];
<a id="L1307" name="L1307"></a>1307 
<a id="L1308" name="L1308"></a>1308       <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &amp;&amp; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(s))
<a id="L1309" name="L1309"></a>1309         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1310" name="L1310"></a>1310     <em class="brace">}</em>
<a id="L1311" name="L1311"></a>1311 
<a id="L1312" name="L1312"></a>1312     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1313" name="L1313"></a>1313   <em class="brace">}</em>
<a id="L1314" name="L1314"></a>1314 
<div class="comment">
    Searches for the first occurence of the given argument,
    beginning the search at index, and testing for equality
    using the equals method.
    @param elem Node to look for
    @param index Index of where to start the search
    @return the index of the first occurrence of the object
    argument in this vector at position index or later in the
    vector; returns -1 if the object is not found.</div>
<a id="L1326" name="L1326"></a>1326   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> elem, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L1327" name="L1327"></a>1327   <em class="brace">{</em>
<a id="L1328" name="L1328"></a>1328     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L1329" name="L1329"></a>1329 
<a id="L1330" name="L1330"></a>1330     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1331" name="L1331"></a>1331       <strong class="reserved">return</strong> -1;
<a id="L1332" name="L1332"></a>1332 
<a id="L1333" name="L1333"></a>1333     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>; i &lt; m_firstFree; i++)
<a id="L1334" name="L1334"></a>1334     <em class="brace">{</em>
<a id="L1335" name="L1335"></a>1335       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_map[i];
<a id="L1336" name="L1336"></a>1336 
<a id="L1337" name="L1337"></a>1337       <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &amp;&amp; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(elem))
<a id="L1338" name="L1338"></a>1338         <strong class="reserved">return</strong> i;
<a id="L1339" name="L1339"></a>1339     <em class="brace">}</em>
<a id="L1340" name="L1340"></a>1340 
<a id="L1341" name="L1341"></a>1341     <strong class="reserved">return</strong> -1;
<a id="L1342" name="L1342"></a>1342   <em class="brace">}</em>
<a id="L1343" name="L1343"></a>1343 
<div class="comment">
    Searches for the first occurence of the given argument,
    beginning the search at index, and testing for equality
    using the equals method.
    @param elem Node to look for
    @return the index of the first occurrence of the object
    argument in this vector at position index or later in the
    vector; returns -1 if the object is not found.</div>
<a id="L1354" name="L1354"></a>1354   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20511.html" title="Multiple referred from 769 places.">indexOf</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> elem)
<a id="L1355" name="L1355"></a>1355   <em class="brace">{</em>
<a id="L1356" name="L1356"></a>1356     <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L1357" name="L1357"></a>1357 
<a id="L1358" name="L1358"></a>1358     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_map)
<a id="L1359" name="L1359"></a>1359       <strong class="reserved">return</strong> -1;
<a id="L1360" name="L1360"></a>1360 
<a id="L1361" name="L1361"></a>1361     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; m_firstFree; i++)
<a id="L1362" name="L1362"></a>1362     <em class="brace">{</em>
<a id="L1363" name="L1363"></a>1363       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_map[i];
<a id="L1364" name="L1364"></a>1364 
<a id="L1365" name="L1365"></a>1365       <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &amp;&amp; <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(elem))
<a id="L1366" name="L1366"></a>1366         <strong class="reserved">return</strong> i;
<a id="L1367" name="L1367"></a>1367     <em class="brace">}</em>
<a id="L1368" name="L1368"></a>1368 
<a id="L1369" name="L1369"></a>1369     <strong class="reserved">return</strong> -1;
<a id="L1370" name="L1370"></a>1370   <em class="brace">}</em>
<a id="L1371" name="L1371"></a>1371 
<a id="L1372" name="L1372"></a>1372 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L144">[^]</a><a href="#L1354">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
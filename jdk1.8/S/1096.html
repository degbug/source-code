<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/DelayQueue.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L125">[^]</a><a href="#L549">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L125" title="Defined at 125.">add</a></li>
<li><a href="#L136" title="Defined at 136.">offer</a></li>
<li><a href="#L158" title="Defined at 158.">put</a></li>
<li><a href="#L172" title="Defined at 172.">offer</a></li>
<li><a href="#L183" title="Defined at 183.">poll</a></li>
<li><a href="#L204" title="Defined at 204.">take</a></li>
<li><a href="#L248" title="Defined at 248.">poll</a></li>
<li><a href="#L299" title="Defined at 299.">peek</a></li>
<li><a href="#L309" title="Defined at 309.">size</a></li>
<li><a href="#L323" title="Defined at 323.">peekExpired</a></li>
<li><a href="#L336" title="Defined at 336.">drainTo</a></li>
<li><a href="#L362" title="Defined at 362.">drainTo</a></li>
<li><a href="#L390" title="Defined at 390.">clear</a></li>
<li><a href="#L406" title="Defined at 406.">remainingCapacity</a></li>
<li><a href="#L423" title="Defined at 423.">toArray</a></li>
<li><a href="#L468" title="Defined at 468.">toArray</a></li>
<li><a href="#L482" title="Defined at 482.">remove</a></li>
<li><a href="#L495" title="Defined at 495.">removeEQ</a></li>
<li><a href="#L520" title="Defined at 520.">iterator</a></li>
<li><a href="#L537" title="Defined at 537.">hasNext</a></li>
<li><a href="#L541" title="Defined at 541.">SuppressWarnings</a></li>
<li><a href="#L542" title="Defined at 542.">next</a></li>
<li><a href="#L549" title="Defined at 549.">remove</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> static java.util.concurrent.TimeUnit.NANOSECONDS;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.concurrent.locks.Condition;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.util.concurrent.locks.ReentrantLock;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.util.*;
<a id="L41" name="L41"></a>  41 
<div class="comment">
  An unbounded {@linkplain BlockingQueue blocking queue} of
  <code>Delayed</code> elements, in which an element can only be taken
  when its delay has expired.  The <em>head</em> of the queue is that
  <code>Delayed</code> element whose delay expired furthest in the
  past.  If no delay has expired there is no head and <code>poll</code>
  will return <code>null</code>. Expiration occurs when an element's
  <code>getDelay(TimeUnit.NANOSECONDS)</code> method returns a value less
  than or equal to zero.  Even though unexpired elements cannot be
  removed using <code>take</code> or <code>poll</code>, they are otherwise
  treated as normal elements. For example, the <code>size</code> method
  returns the count of both expired and unexpired elements.
  This queue does not permit null elements.
  <p>This class and its iterator implement all of the
  <em>optional</em> methods of the {@link Collection} and {@link
  Iterator} interfaces.  The Iterator provided in method {@link
  #iterator()} is <em>not</em> guaranteed to traverse the elements of
  the DelayQueue in any particular order.
  </p><p>This class is a member of the
  <a href="{@docRoot}/../technotes/guides/collections/index.html">
  Java Collections Framework</a>.
  @since 1.5
  @author Doug Lea
  @param <e> the type of elements held in this collection</e></p></div>
<a id="L70" name="L70"></a>  70 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2171.html" title="Multiple referred from 2 places.">DelayQueue</a>&lt;E <strong class="reserved">extends</strong> <a href="../S/1053.html#L49" title="Defined at 49 in src/java/util/concurrent/Delayed.java.">Delayed</a>&gt; <strong class="reserved">extends</strong> <a href="../S/994.html#L64" title="Defined at 64 in src/java/util/AbstractQueue.java.">AbstractQueue</a>&lt;E&gt;
<a id="L71" name="L71"></a>  71     <strong class="reserved">implements</strong> <a href="../S/1109.html#L180" title="Defined at 180 in src/java/util/concurrent/BlockingQueue.java.">BlockingQueue</a>&lt;E&gt; <em class="brace">{</em>
<a id="L72" name="L72"></a>  72 
<a id="L73" name="L73"></a>  73     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">transient</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">new</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a>();
<a id="L74" name="L74"></a>  74     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/998.html#L82" title="Defined at 82 in src/java/util/PriorityQueue.java.">PriorityQueue</a>&lt;E&gt; q = <strong class="reserved">new</strong> <a href="../S/998.html#L82" title="Defined at 82 in src/java/util/PriorityQueue.java.">PriorityQueue</a>&lt;E&gt;();
<a id="L75" name="L75"></a>  75 
<div class="comment">
      Thread designated to wait for the element at the head of
      the queue.  This variant of the Leader-Follower pattern
      (http://www.cs.wustl.edu/~schmidt/POSA/POSA2/) serves to
      minimize unnecessary timed waiting.  When a thread becomes
      the leader, it waits only for the next delay to elapse, but
      other threads await indefinitely.  The leader thread must
      signal some other thread before returning from take() or
      poll(...), unless some other thread becomes leader in the
      interim.  Whenever the head of the queue is replaced with
      an element with an earlier expiration time, the leader
      field is invalidated by being reset to null, and some
      waiting thread, but not necessarily the current leader, is
      signalled.  So waiting threads must be prepared to acquire
      and lose leadership while waiting.</div>
<a id="L92" name="L92"></a>  92     <strong class="reserved">private</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> leader = <strong class="reserved">null</strong>;
<a id="L93" name="L93"></a>  93 
<div class="comment">
      Condition signalled when a newer element becomes available
      at the head of the queue or a new thread may need to
      become leader.</div>
<a id="L99" name="L99"></a>  99     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a> = <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L100" name="L100"></a> 100 
<div class="comment">
      Creates a new <code>DelayQueue</code> that is initially empty.</div>
<a id="L104" name="L104"></a> 104     <strong class="reserved">public</strong> DelayQueue() <em class="brace">{</em><em class="brace">}</em>
<a id="L105" name="L105"></a> 105 
<div class="comment">
      Creates a <code>DelayQueue</code> initially containing the elements of the
      given collection of {@link Delayed} instances.
      @param c the collection of elements to initially contain
      @throws NullPointerException if the specified collection or any
              of its elements are null</div>
<a id="L114" name="L114"></a> 114     <strong class="reserved">public</strong> DelayQueue(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">extends</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L115" name="L115"></a> 115         <strong class="reserved">this</strong>.<a href="../D/10646.html" title="Multiple defined in 78 places.">addAll</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L116" name="L116"></a> 116     <em class="brace">}</em>
<a id="L117" name="L117"></a> 117 
<div class="comment">
      Inserts the specified element into this delay queue.
      @param e the element to add
      @return <code>true</code> (as specified by {@link Collection#add})
      @throws NullPointerException if the specified element is null</div>
<a id="L125" name="L125"></a> 125     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(E e) <em class="brace">{</em>
<a id="L126" name="L126"></a> 126         <strong class="reserved">return</strong> <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L127" name="L127"></a> 127     <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<div class="comment">
      Inserts the specified element into this delay queue.
      @param e the element to add
      @return <code>true</code>
      @throws NullPointerException if the specified element is null</div>
<a id="L136" name="L136"></a> 136     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(E e) <em class="brace">{</em>
<a id="L137" name="L137"></a> 137         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L138" name="L138"></a> 138         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L139" name="L139"></a> 139         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L140" name="L140"></a> 140             q.<a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L141" name="L141"></a> 141             <strong class="reserved">if</strong> (q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>() == e) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142                 leader = <strong class="reserved">null</strong>;
<a id="L143" name="L143"></a> 143                 <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L144" name="L144"></a> 144             <em class="brace">}</em>
<a id="L145" name="L145"></a> 145             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L146" name="L146"></a> 146         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L147" name="L147"></a> 147             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L148" name="L148"></a> 148         <em class="brace">}</em>
<a id="L149" name="L149"></a> 149     <em class="brace">}</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
      Inserts the specified element into this delay queue. As the queue is
      unbounded this method will never block.
      @param e the element to add
      @throws NullPointerException {@inheritDoc}</div>
<a id="L158" name="L158"></a> 158     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(E e) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159         <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L160" name="L160"></a> 160     <em class="brace">}</em>
<a id="L161" name="L161"></a> 161 
<div class="comment">
      Inserts the specified element into this delay queue. As the queue is
      unbounded this method will never block.
      @param e the element to add
      @param timeout This parameter is ignored as the method never blocks
      @param unit This parameter is ignored as the method never blocks
      @return <code>true</code>
      @throws NullPointerException {@inheritDoc}</div>
<a id="L172" name="L172"></a> 172     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23932.html" title="Multiple referred from 17 places.">offer</a>(E e, <strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <em class="brace">{</em>
<a id="L173" name="L173"></a> 173         <strong class="reserved">return</strong> <a href="../D/28469.html" title="Multiple defined in 29 places.">offer</a>(e);
<a id="L174" name="L174"></a> 174     <em class="brace">}</em>
<a id="L175" name="L175"></a> 175 
<div class="comment">
      Retrieves and removes the head of this queue, or returns <code>null</code>
      if this queue has no elements with an expired delay.
      @return the head of this queue, or <code>null</code> if this
              queue has no elements with an expired delay</div>
<a id="L183" name="L183"></a> 183     <strong class="reserved">public</strong> E <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>() <em class="brace">{</em>
<a id="L184" name="L184"></a> 184         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L185" name="L185"></a> 185         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L186" name="L186"></a> 186         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L187" name="L187"></a> 187             E <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L188" name="L188"></a> 188             <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong> || <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS) &gt; 0)
<a id="L189" name="L189"></a> 189                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L190" name="L190"></a> 190             <strong class="reserved">else</strong>
<a id="L191" name="L191"></a> 191                 <strong class="reserved">return</strong> q.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L192" name="L192"></a> 192         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L193" name="L193"></a> 193             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L194" name="L194"></a> 194         <em class="brace">}</em>
<a id="L195" name="L195"></a> 195     <em class="brace">}</em>
<a id="L196" name="L196"></a> 196 
<div class="comment">
      Retrieves and removes the head of this queue, waiting if necessary
      until an element with an expired delay is available on this queue.
      @return the head of this queue
      @throws InterruptedException {@inheritDoc}</div>
<a id="L204" name="L204"></a> 204     <strong class="reserved">public</strong> E <a href="../R/29108.html" title="Multiple referred from 11 places.">take</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L205" name="L205"></a> 205         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L206" name="L206"></a> 206         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L207" name="L207"></a> 207         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L208" name="L208"></a> 208             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209                 E <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L210" name="L210"></a> 210                 <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>)
<a id="L211" name="L211"></a> 211                     <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L212" name="L212"></a> 212                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L213" name="L213"></a> 213                     <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS);
<a id="L214" name="L214"></a> 214                     <strong class="reserved">if</strong> (<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt;= 0)
<a id="L215" name="L215"></a> 215                         <strong class="reserved">return</strong> q.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L216" name="L216"></a> 216                     <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">null</strong>; <em class="comment">// don't retain ref while waiting</em>
<a id="L217" name="L217"></a> 217                     <strong class="reserved">if</strong> (leader != <strong class="reserved">null</strong>)
<a id="L218" name="L218"></a> 218                         <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11670.html" title="Multiple defined in 11 places.">await</a>();
<a id="L219" name="L219"></a> 219                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L220" name="L220"></a> 220                         <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> thisThread = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L221" name="L221"></a> 221                         leader = thisThread;
<a id="L222" name="L222"></a> 222                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L223" name="L223"></a> 223                             <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>);
<a id="L224" name="L224"></a> 224                         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L225" name="L225"></a> 225                             <strong class="reserved">if</strong> (leader == thisThread)
<a id="L226" name="L226"></a> 226                                 leader = <strong class="reserved">null</strong>;
<a id="L227" name="L227"></a> 227                         <em class="brace">}</em>
<a id="L228" name="L228"></a> 228                     <em class="brace">}</em>
<a id="L229" name="L229"></a> 229                 <em class="brace">}</em>
<a id="L230" name="L230"></a> 230             <em class="brace">}</em>
<a id="L231" name="L231"></a> 231         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L232" name="L232"></a> 232             <strong class="reserved">if</strong> (leader == <strong class="reserved">null</strong> &amp;&amp; q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>() != <strong class="reserved">null</strong>)
<a id="L233" name="L233"></a> 233                 <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L234" name="L234"></a> 234             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L235" name="L235"></a> 235         <em class="brace">}</em>
<a id="L236" name="L236"></a> 236     <em class="brace">}</em>
<a id="L237" name="L237"></a> 237 
<div class="comment">
      Retrieves and removes the head of this queue, waiting if necessary
      until an element with an expired delay is available on this queue,
      or the specified wait time expires.
      @return the head of this queue, or <code>null</code> if the
              specified waiting time elapses before an element with
              an expired delay becomes available
      @throws InterruptedException {@inheritDoc}</div>
<a id="L248" name="L248"></a> 248     <strong class="reserved">public</strong> E <a href="../R/24795.html" title="Multiple referred from 51 places.">poll</a>(<strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit) <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L249" name="L249"></a> 249         <strong class="reserved">long</strong> nanos = unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout);
<a id="L250" name="L250"></a> 250         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L251" name="L251"></a> 251         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27036.html" title="Multiple defined in 6 places.">lockInterruptibly</a>();
<a id="L252" name="L252"></a> 252         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L253" name="L253"></a> 253             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                 E <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L255" name="L255"></a> 255                 <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L256" name="L256"></a> 256                     <strong class="reserved">if</strong> (nanos &lt;= 0)
<a id="L257" name="L257"></a> 257                         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L258" name="L258"></a> 258                     <strong class="reserved">else</strong>
<a id="L259" name="L259"></a> 259                         nanos = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L260" name="L260"></a> 260                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L261" name="L261"></a> 261                     <strong class="reserved">long</strong> <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> = <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS);
<a id="L262" name="L262"></a> 262                     <strong class="reserved">if</strong> (<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> &lt;= 0)
<a id="L263" name="L263"></a> 263                         <strong class="reserved">return</strong> q.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L264" name="L264"></a> 264                     <strong class="reserved">if</strong> (nanos &lt;= 0)
<a id="L265" name="L265"></a> 265                         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L266" name="L266"></a> 266                     <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">null</strong>; <em class="comment">// don't retain ref while waiting</em>
<a id="L267" name="L267"></a> 267                     <strong class="reserved">if</strong> (nanos &lt; <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> || leader != <strong class="reserved">null</strong>)
<a id="L268" name="L268"></a> 268                         nanos = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(nanos);
<a id="L269" name="L269"></a> 269                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L270" name="L270"></a> 270                         <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> thisThread = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L271" name="L271"></a> 271                         leader = thisThread;
<a id="L272" name="L272"></a> 272                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L273" name="L273"></a> 273                             <strong class="reserved">long</strong> timeLeft = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/11677.html" title="Multiple defined in 3 places.">awaitNanos</a>(<a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a>);
<a id="L274" name="L274"></a> 274                             nanos -= <a href="../S/2171.html#L532" title="Defined at 532 in src/java/awt/Robot.java.">delay</a> - timeLeft;
<a id="L275" name="L275"></a> 275                         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L276" name="L276"></a> 276                             <strong class="reserved">if</strong> (leader == thisThread)
<a id="L277" name="L277"></a> 277                                 leader = <strong class="reserved">null</strong>;
<a id="L278" name="L278"></a> 278                         <em class="brace">}</em>
<a id="L279" name="L279"></a> 279                     <em class="brace">}</em>
<a id="L280" name="L280"></a> 280                 <em class="brace">}</em>
<a id="L281" name="L281"></a> 281             <em class="brace">}</em>
<a id="L282" name="L282"></a> 282         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L283" name="L283"></a> 283             <strong class="reserved">if</strong> (leader == <strong class="reserved">null</strong> &amp;&amp; q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>() != <strong class="reserved">null</strong>)
<a id="L284" name="L284"></a> 284                 <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>.<a href="../D/34558.html" title="Multiple defined in 4 places.">signal</a>();
<a id="L285" name="L285"></a> 285             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L286" name="L286"></a> 286         <em class="brace">}</em>
<a id="L287" name="L287"></a> 287     <em class="brace">}</em>
<a id="L288" name="L288"></a> 288 
<div class="comment">
      Retrieves, but does not remove, the head of this queue, or
      returns <code>null</code> if this queue is empty.  Unlike
      <code>poll</code>, if no expired elements are available in the queue,
      this method returns the element that will expire next,
      if one exists.
      @return the head of this queue, or <code>null</code> if this
              queue is empty</div>
<a id="L299" name="L299"></a> 299     <strong class="reserved">public</strong> E <a href="../R/24689.html" title="Multiple referred from 168 places.">peek</a>() <em class="brace">{</em>
<a id="L300" name="L300"></a> 300         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L301" name="L301"></a> 301         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L302" name="L302"></a> 302         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L303" name="L303"></a> 303             <strong class="reserved">return</strong> q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L304" name="L304"></a> 304         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L305" name="L305"></a> 305             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L306" name="L306"></a> 306         <em class="brace">}</em>
<a id="L307" name="L307"></a> 307     <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<a id="L309" name="L309"></a> 309     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L310" name="L310"></a> 310         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L311" name="L311"></a> 311         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L312" name="L312"></a> 312         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L313" name="L313"></a> 313             <strong class="reserved">return</strong> q.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L314" name="L314"></a> 314         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L315" name="L315"></a> 315             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L316" name="L316"></a> 316         <em class="brace">}</em>
<a id="L317" name="L317"></a> 317     <em class="brace">}</em>
<a id="L318" name="L318"></a> 318 
<div class="comment">
      Returns first element only if it is expired.
      Used only by drainTo.  Call only when holding lock.</div>
<a id="L323" name="L323"></a> 323     <strong class="reserved">private</strong> E <a href="../R/24695.html" title="Multiple referred from 4 places.">peekExpired</a>() <em class="brace">{</em>
<a id="L324" name="L324"></a> 324         <em class="comment">// assert lock.isHeldByCurrentThread();</em>
<a id="L325" name="L325"></a> 325         E <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = q.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L326" name="L326"></a> 326         <strong class="reserved">return</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == <strong class="reserved">null</strong> || <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>(NANOSECONDS) &gt; 0) ?
<a id="L327" name="L327"></a> 327             <strong class="reserved">null</strong> : <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>;
<a id="L328" name="L328"></a> 328     <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 
<div class="comment">
      @throws UnsupportedOperationException {@inheritDoc}
      @throws ClassCastException            {@inheritDoc}
      @throws NullPointerException          {@inheritDoc}
      @throws IllegalArgumentException      {@inheritDoc}</div>
<a id="L336" name="L336"></a> 336     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>)
<a id="L338" name="L338"></a> 338             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L339" name="L339"></a> 339         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">this</strong>)
<a id="L340" name="L340"></a> 340             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L341" name="L341"></a> 341         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L342" name="L342"></a> 342         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L343" name="L343"></a> 343         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L344" name="L344"></a> 344             <strong class="reserved">int</strong> n = 0;
<a id="L345" name="L345"></a> 345             <strong class="reserved">for</strong> (E e; (e = <a href="../D/29293.html" title="Multiple defined in 2 places.">peekExpired</a>()) != <strong class="reserved">null</strong>;) <em class="brace">{</em>
<a id="L346" name="L346"></a> 346                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(e);       <em class="comment">// In this order, in case add() throws.</em>
<a id="L347" name="L347"></a> 347                 q.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L348" name="L348"></a> 348                 ++n;
<a id="L349" name="L349"></a> 349             <em class="brace">}</em>
<a id="L350" name="L350"></a> 350             <strong class="reserved">return</strong> n;
<a id="L351" name="L351"></a> 351         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L352" name="L352"></a> 352             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L353" name="L353"></a> 353         <em class="brace">}</em>
<a id="L354" name="L354"></a> 354     <em class="brace">}</em>
<a id="L355" name="L355"></a> 355 
<div class="comment">
      @throws UnsupportedOperationException {@inheritDoc}
      @throws ClassCastException            {@inheritDoc}
      @throws NullPointerException          {@inheritDoc}
      @throws IllegalArgumentException      {@inheritDoc}</div>
<a id="L362" name="L362"></a> 362     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/13516.html" title="Multiple referred from 5 places.">drainTo</a>(<a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;? <strong class="reserved">super</strong> E&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <strong class="reserved">int</strong> maxElements) <em class="brace">{</em>
<a id="L363" name="L363"></a> 363         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong>)
<a id="L364" name="L364"></a> 364             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L365" name="L365"></a> 365         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">this</strong>)
<a id="L366" name="L366"></a> 366             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L367" name="L367"></a> 367         <strong class="reserved">if</strong> (maxElements &lt;= 0)
<a id="L368" name="L368"></a> 368             <strong class="reserved">return</strong> 0;
<a id="L369" name="L369"></a> 369         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L370" name="L370"></a> 370         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L371" name="L371"></a> 371         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L372" name="L372"></a> 372             <strong class="reserved">int</strong> n = 0;
<a id="L373" name="L373"></a> 373             <strong class="reserved">for</strong> (E e; n &lt; maxElements &amp;&amp; (e = <a href="../D/29293.html" title="Multiple defined in 2 places.">peekExpired</a>()) != <strong class="reserved">null</strong>;) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(e);       <em class="comment">// In this order, in case add() throws.</em>
<a id="L375" name="L375"></a> 375                 q.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>();
<a id="L376" name="L376"></a> 376                 ++n;
<a id="L377" name="L377"></a> 377             <em class="brace">}</em>
<a id="L378" name="L378"></a> 378             <strong class="reserved">return</strong> n;
<a id="L379" name="L379"></a> 379         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L380" name="L380"></a> 380             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L381" name="L381"></a> 381         <em class="brace">}</em>
<a id="L382" name="L382"></a> 382     <em class="brace">}</em>
<a id="L383" name="L383"></a> 383 
<div class="comment">
      Atomically removes all of the elements from this delay queue.
      The queue will be empty after this call returns.
      Elements with an unexpired delay are not waited for; they are
      simply discarded from the queue.</div>
<a id="L390" name="L390"></a> 390     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L391" name="L391"></a> 391         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L392" name="L392"></a> 392         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L393" name="L393"></a> 393         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L394" name="L394"></a> 394             q.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L395" name="L395"></a> 395         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L396" name="L396"></a> 396             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L397" name="L397"></a> 397         <em class="brace">}</em>
<a id="L398" name="L398"></a> 398     <em class="brace">}</em>
<a id="L399" name="L399"></a> 399 
<div class="comment">
      Always returns <code>Integer.MAX_VALUE</code> because
      a <code>DelayQueue</code> is not capacity constrained.
      @return <code>Integer.MAX_VALUE</code></div>
<a id="L406" name="L406"></a> 406     <strong class="reserved">public</strong> <strong class="reserved">int</strong> remainingCapacity() <em class="brace">{</em>
<a id="L407" name="L407"></a> 407         <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L408" name="L408"></a> 408     <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<div class="comment">
      Returns an array containing all of the elements in this queue.
      The returned array elements are in no particular order.
      <p>The returned array will be "safe" in that no references to it are
      maintained by this queue.  (In other words, this method must allocate
      a new array).  The caller is thus free to modify the returned array.
      </p><p>This method acts as bridge between array-based and collection-based
      APIs.
      @return an array containing all of the elements in this queue</p></div>
<a id="L423" name="L423"></a> 423     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>() <em class="brace">{</em>
<a id="L424" name="L424"></a> 424         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L425" name="L425"></a> 425         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L426" name="L426"></a> 426         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L427" name="L427"></a> 427             <strong class="reserved">return</strong> q.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>();
<a id="L428" name="L428"></a> 428         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L429" name="L429"></a> 429             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L430" name="L430"></a> 430         <em class="brace">}</em>
<a id="L431" name="L431"></a> 431     <em class="brace">}</em>
<a id="L432" name="L432"></a> 432 
<div class="comment">
      Returns an array containing all of the elements in this queue; the
      runtime type of the returned array is that of the specified array.
      The returned array elements are in no particular order.
      If the queue fits in the specified array, it is returned therein.
      Otherwise, a new array is allocated with the runtime type of the
      specified array and the size of this queue.
      <p>If this queue fits in the specified array with room to spare
      (i.e., the array has more elements than this queue), the element in
      the array immediately following the end of the queue is set to
      <code>null</code>.
      </p><p>Like the {@link #toArray()} method, this method acts as bridge between
      array-based and collection-based APIs.  Further, this method allows
      precise control over the runtime type of the output array, and may,
      under certain circumstances, be used to save allocation costs.
      </p><p>The following code can be used to dump a delay queue into a newly
      allocated array of <code>Delayed</code>:
      </p><pre> <code>Delayed[] a = q.toArray(new Delayed[0]);</code></pre>
      Note that <code>toArray(new Object[0])</code> is identical in function to
      <code>toArray()</code>.
      @param a the array into which the elements of the queue are to
               be stored, if it is big enough; otherwise, a new array of the
               same runtime type is allocated for this purpose
      @return an array containing all of the elements in this queue
      @throws ArrayStoreException if the runtime type of the specified array
              is not a supertype of the runtime type of every element in
              this queue
      @throws NullPointerException if the specified array is null</div>
<a id="L468" name="L468"></a> 468     <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../R/29213.html" title="Multiple referred from 289 places.">toArray</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L469" name="L469"></a> 469         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L470" name="L470"></a> 470         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L471" name="L471"></a> 471         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L472" name="L472"></a> 472             <strong class="reserved">return</strong> q.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L473" name="L473"></a> 473         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L474" name="L474"></a> 474             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L475" name="L475"></a> 475         <em class="brace">}</em>
<a id="L476" name="L476"></a> 476     <em class="brace">}</em>
<a id="L477" name="L477"></a> 477 
<div class="comment">
      Removes a single instance of the specified element from this
      queue, if it is present, whether or not it has expired.</div>
<a id="L482" name="L482"></a> 482     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L483" name="L483"></a> 483         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L484" name="L484"></a> 484         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L485" name="L485"></a> 485         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L486" name="L486"></a> 486             <strong class="reserved">return</strong> q.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>);
<a id="L487" name="L487"></a> 487         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L488" name="L488"></a> 488             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L489" name="L489"></a> 489         <em class="brace">}</em>
<a id="L490" name="L490"></a> 490     <em class="brace">}</em>
<a id="L491" name="L491"></a> 491 
<div class="comment">
      Identity-based version for use in Itr.remove</div>
<a id="L495" name="L495"></a> 495     <strong class="reserved">void</strong> <a href="../R/25946.html" title="Multiple referred from 2 places.">removeEQ</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496         <strong class="reserved">final</strong> <a href="../S/1047.html#L106" title="Defined at 106 in src/java/util/concurrent/locks/ReentrantLock.java.">ReentrantLock</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">this</strong>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>;
<a id="L497" name="L497"></a> 497         <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L498" name="L498"></a> 498         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L499" name="L499"></a> 499             <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; it = q.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); ) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>()) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501                     it.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L502" name="L502"></a> 502                     <strong class="reserved">break</strong>;
<a id="L503" name="L503"></a> 503                 <em class="brace">}</em>
<a id="L504" name="L504"></a> 504             <em class="brace">}</em>
<a id="L505" name="L505"></a> 505         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L506" name="L506"></a> 506             <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>.<a href="../D/35916.html" title="Multiple defined in 13 places.">unlock</a>();
<a id="L507" name="L507"></a> 507         <em class="brace">}</em>
<a id="L508" name="L508"></a> 508     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<div class="comment">
      Returns an iterator over all the elements (both expired and
      unexpired) in this queue. The iterator does not return the
      elements in any particular order.
      <p>The returned iterator is
      <a href="package-summary.html#Weakly"><i>weakly consistent</i></a>.
      @return an iterator over the elements in this queue</p></div>
<a id="L520" name="L520"></a> 520     <strong class="reserved">public</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <a href="../R/22304.html" title="Multiple referred from 905 places.">iterator</a>() <em class="brace">{</em>
<a id="L521" name="L521"></a> 521         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/4466.html" title="Multiple defined in 13 places.">Itr</a>(<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>());
<a id="L522" name="L522"></a> 522     <em class="brace">}</em>
<a id="L523" name="L523"></a> 523 
<div class="comment">
      Snapshot iterator that works off copy of underlying q array.</div>
<a id="L527" name="L527"></a> 527     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/4056.html" title="Multiple referred from 24 places.">Itr</a> <strong class="reserved">implements</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;E&gt; <em class="brace">{</em>
<a id="L528" name="L528"></a> 528         <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>; <em class="comment">// Array of all elements</em>
<a id="L529" name="L529"></a> 529         <strong class="reserved">int</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;           <em class="comment">// index of next element to return</em>
<a id="L530" name="L530"></a> 530         <strong class="reserved">int</strong> lastRet;          <em class="comment">// index of last element, or -1 if no such</em>
<a id="L531" name="L531"></a> 531 
<a id="L532" name="L532"></a> 532         Itr(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L533" name="L533"></a> 533             lastRet = -1;
<a id="L534" name="L534"></a> 534             <strong class="reserved">this</strong>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L535" name="L535"></a> 535         <em class="brace">}</em>
<a id="L536" name="L536"></a> 536 
<a id="L537" name="L537"></a> 537         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20233.html" title="Multiple referred from 653 places.">hasNext</a>() <em class="brace">{</em>
<a id="L538" name="L538"></a> 538             <strong class="reserved">return</strong> <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &lt; <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L539" name="L539"></a> 539         <em class="brace">}</em>
<a id="L540" name="L540"></a> 540 
<a id="L541" name="L541"></a> 541         @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("unchecked")
<a id="L542" name="L542"></a> 542         <strong class="reserved">public</strong> E <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L543" name="L543"></a> 543             <strong class="reserved">if</strong> (<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a> &gt;= <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L544" name="L544"></a> 544                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>();
<a id="L545" name="L545"></a> 545             lastRet = <a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>;
<a id="L546" name="L546"></a> 546             <strong class="reserved">return</strong> (E)<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../S/986.html#L3222" title="Defined at 3222 in src/java/util/regex/Pattern.java.">cursor</a>++];
<a id="L547" name="L547"></a> 547         <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<a id="L549" name="L549"></a> 549         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>() <em class="brace">{</em>
<a id="L550" name="L550"></a> 550             <strong class="reserved">if</strong> (lastRet &lt; 0)
<a id="L551" name="L551"></a> 551                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>();
<a id="L552" name="L552"></a> 552             <a href="../D/30769.html" title="Multiple defined in 2 places.">removeEQ</a>(<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[lastRet]);
<a id="L553" name="L553"></a> 553             lastRet = -1;
<a id="L554" name="L554"></a> 554         <em class="brace">}</em>
<a id="L555" name="L555"></a> 555     <em class="brace">}</em>
<a id="L556" name="L556"></a> 556 
<a id="L557" name="L557"></a> 557 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L125">[^]</a><a href="#L549">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
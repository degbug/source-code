<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L119">[^]</a><a href="#L879">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L119" title="Defined at 119.">engineCanonicalizeSubTree</a></li>
<li><a href="#L130" title="Defined at 130.">engineCanonicalizeXPathNodeSet</a></li>
<li><a href="#L142" title="Defined at 142.">engineCanonicalize</a></li>
<li><a href="#L178" title="Defined at 178.">setWriter</a></li>
<li><a href="#L192" title="Defined at 192.">engineCanonicalizeSubTree</a></li>
<li><a href="#L243" title="Defined at 243.">canonicalizeSubTree</a></li>
<li><a href="#L350" title="Defined at 350.">engineCanonicalizeXPathNodeSetInternal</a></li>
<li><a href="#L391" title="Defined at 391.">canonicalizeXPathNodeSet</a></li>
<li><a href="#L534" title="Defined at 534.">isVisibleDO</a></li>
<li><a href="#L550" title="Defined at 550.">isVisibleInt</a></li>
<li><a href="#L566" title="Defined at 566.">isVisible</a></li>
<li><a href="#L581" title="Defined at 581.">handleParent</a></li>
<li><a href="#L618" title="Defined at 618.">getParentNameSpaces</a></li>
<li><a href="#L653" title="Defined at 653.">handleAttributes</a></li>
<li><a href="#L664" title="Defined at 664.">handleAttributesSubtree</a></li>
<li><a href="#L667" title="Defined at 667.">circumventBugIfNeeded</a></li>
<li><a href="#L689" title="Defined at 689.">outputAttrToWriter</a></li>
<li><a href="#L749" title="Defined at 749.">outputPItoWriter</a></li>
<li><a href="#L803" title="Defined at 803.">outputCommentToWriter</a></li>
<li><a href="#L840" title="Defined at 840.">outputTextToWriter</a></li>
<li><a href="#L879" title="Defined at 879.">getNullNode</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements. See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership. The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License. You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied. See the License for the
  specific language governing permissions and limitations
  under the License.</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.security.c14n.<a href="../D/24375.html" title="Multiple defined in 2 places.">implementations</a>;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.io.ByteArrayOutputStream;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.io.IOException;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.io.OutputStream;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.UnsupportedEncodingException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.List;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.ListIterator;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.Map;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Set;
<a id="L36" name="L36"></a>  36 
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> javax.xml.parsers.ParserConfigurationException;
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.CanonicalizationException;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.CanonicalizerSpi;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.c14n.helper.AttrCompare;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.signature.NodeFilter;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.signature.XMLSignatureInput;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.Constants;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.UnsyncByteArrayOutputStream;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.security.utils.XMLUtils;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> org.w3c.dom.Attr;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> org.w3c.dom.Comment;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> org.w3c.dom.Element;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> org.w3c.dom.NamedNodeMap;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> org.w3c.dom.ProcessingInstruction;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> org.xml.sax.SAXException;
<a id="L55" name="L55"></a>  55 
<div class="comment">
  Abstract base class for canonicalization algorithms.
  @author Christian Geuer-Pollmann <geuerp@apache.org></geuerp@apache.org></div>
<a id="L61" name="L61"></a>  61 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/1178.html" title="Multiple referred from 6 places.">CanonicalizerBase</a> <strong class="reserved">extends</strong> <a href="../S/5606.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java.">CanonicalizerSpi</a> <em class="brace">{</em>
<a id="L62" name="L62"></a>  62     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> XML = "xml";
<a id="L63" name="L63"></a>  63     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> XMLNS = "xmlns";
<a id="L64" name="L64"></a>  64 
<a id="L65" name="L65"></a>  65     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/5624.html#L46" title="Defined at 46 in src/com/sun/org/apache/xml/internal/security/c14n/helper/AttrCompare.java.">AttrCompare</a> COMPARE = <strong class="reserved">new</strong> <a href="../S/5624.html#L46" title="Defined at 46 in src/com/sun/org/apache/xml/internal/security/c14n/helper/AttrCompare.java.">AttrCompare</a>();
<a id="L66" name="L66"></a>  66 
<a id="L67" name="L67"></a>  67     <em class="comment">// Make sure you clone the following mutable arrays before passing to</em>
<a id="L68" name="L68"></a>  68     <em class="comment">// potentially untrusted objects such as OutputStreams.</em>
<a id="L69" name="L69"></a>  69     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] END_PI = <em class="brace">{</em>'?','&gt;'<em class="brace">}</em>;
<a id="L70" name="L70"></a>  70     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] BEGIN_PI = <em class="brace">{</em>'&lt;','?'<em class="brace">}</em>;
<a id="L71" name="L71"></a>  71     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] END_COMM = <em class="brace">{</em>'-','-','&gt;'<em class="brace">}</em>;
<a id="L72" name="L72"></a>  72     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] BEGIN_COMM = <em class="brace">{</em>'&lt;','!','-','-'<em class="brace">}</em>;
<a id="L73" name="L73"></a>  73     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] XA = <em class="brace">{</em>'&amp;','#','x','A',';'<em class="brace">}</em>;
<a id="L74" name="L74"></a>  74     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] X9 = <em class="brace">{</em>'&amp;','#','x','9',';'<em class="brace">}</em>;
<a id="L75" name="L75"></a>  75     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] QUOT = <em class="brace">{</em>'&amp;','q','u','o','t',';'<em class="brace">}</em>;
<a id="L76" name="L76"></a>  76     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] XD = <em class="brace">{</em>'&amp;','#','x','D',';'<em class="brace">}</em>;
<a id="L77" name="L77"></a>  77     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../D/3501.html" title="Multiple defined in 3 places.">GT</a> = <em class="brace">{</em>'&amp;','g','t',';'<em class="brace">}</em>;
<a id="L78" name="L78"></a>  78     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../D/4946.html" title="Multiple defined in 3 places.">LT</a> = <em class="brace">{</em>'&amp;','l','t',';'<em class="brace">}</em>;
<a id="L79" name="L79"></a>  79     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] END_TAG = <em class="brace">{</em>'&lt;','/'<em class="brace">}</em>;
<a id="L80" name="L80"></a>  80     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] AMP = <em class="brace">{</em>'&amp;','a','m','p',';'<em class="brace">}</em>;
<a id="L81" name="L81"></a>  81     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] EQUALS_STR = <em class="brace">{</em>'=','\"'<em class="brace">}</em>;
<a id="L82" name="L82"></a>  82 
<a id="L83" name="L83"></a>  83     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NODE_BEFORE_DOCUMENT_ELEMENT = -1;
<a id="L84" name="L84"></a>  84     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NODE_NOT_BEFORE_OR_AFTER_DOCUMENT_ELEMENT = 0;
<a id="L85" name="L85"></a>  85     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NODE_AFTER_DOCUMENT_ELEMENT = 1;
<a id="L86" name="L86"></a>  86 
<a id="L87" name="L87"></a>  87     <strong class="reserved">private</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a>&gt; nodeFilter;
<a id="L88" name="L88"></a>  88 
<a id="L89" name="L89"></a>  89     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> includeComments;
<a id="L90" name="L90"></a>  90     <strong class="reserved">private</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; xpathNodeSet;
<a id="L91" name="L91"></a>  91 
<div class="comment">
      The node to be skipped/excluded from the DOM tree
      in subtree canonicalizations.</div>
<a id="L96" name="L96"></a>  96     <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> excludeNode;
<a id="L97" name="L97"></a>  97     <strong class="reserved">private</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> = <strong class="reserved">new</strong> <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>();
<a id="L98" name="L98"></a>  98 
<div class="comment">
      The null xmlns definition.</div>
<a id="L102" name="L102"></a> 102     <strong class="reserved">private</strong> <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> nullNode;
<a id="L103" name="L103"></a> 103 
<div class="comment">
      Constructor CanonicalizerBase
      @param includeComments</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">public</strong> CanonicalizerBase(<strong class="reserved">boolean</strong> includeComments) <em class="brace">{</em>
<a id="L110" name="L110"></a> 110         <strong class="reserved">this</strong>.includeComments = includeComments;
<a id="L111" name="L111"></a> 111     <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<div class="comment">
      Method engineCanonicalizeSubTree
      @inheritDoc
      @param rootNode
      @throws CanonicalizationException</div>
<a id="L119" name="L119"></a> 119     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/13814.html" title="Multiple referred from 8 places.">engineCanonicalizeSubTree</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>)
<a id="L120" name="L120"></a> 120         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L121" name="L121"></a> 121         <strong class="reserved">return</strong> <a href="../D/15503.html" title="Multiple defined in 10 places.">engineCanonicalizeSubTree</a>(<a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>, (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>)<strong class="reserved">null</strong>);
<a id="L122" name="L122"></a> 122     <em class="brace">}</em>
<a id="L123" name="L123"></a> 123 
<div class="comment">
      Method engineCanonicalizeXPathNodeSet
      @inheritDoc
      @param xpathNodeSet
      @throws CanonicalizationException</div>
<a id="L130" name="L130"></a> 130     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/13815.html" title="Multiple referred from 8 places.">engineCanonicalizeXPathNodeSet</a>(<a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>&gt; xpathNodeSet)
<a id="L131" name="L131"></a> 131         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L132" name="L132"></a> 132         <strong class="reserved">this</strong>.xpathNodeSet = xpathNodeSet;
<a id="L133" name="L133"></a> 133         <strong class="reserved">return</strong> <a href="../S/5620.html#L350" title="Defined at 350 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">engineCanonicalizeXPathNodeSetInternal</a>(<a href="../S/5680.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/security/utils/XMLUtils.java.">XMLUtils</a>.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>(<strong class="reserved">this</strong>.xpathNodeSet));
<a id="L134" name="L134"></a> 134     <em class="brace">}</em>
<a id="L135" name="L135"></a> 135 
<div class="comment">
      Canonicalizes a Subtree node.
      @param input the root of the subtree to canicalize
      @return The canonicalize stream.
      @throws CanonicalizationException</div>
<a id="L142" name="L142"></a> 142     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/13813.html" title="Multiple referred from 10 places.">engineCanonicalize</a>(<a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>) <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L143" name="L143"></a> 143         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L144" name="L144"></a> 144             <strong class="reserved">if</strong> (<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L454" title="Defined at 454 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">isExcludeComments</a>()) <em class="brace">{</em>
<a id="L145" name="L145"></a> 145                 includeComments = <strong class="reserved">false</strong>;
<a id="L146" name="L146"></a> 146             <em class="brace">}</em>
<a id="L147" name="L147"></a> 147             <strong class="reserved">if</strong> (<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L308" title="Defined at 308 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">isOctetStream</a>()) <em class="brace">{</em>
<a id="L148" name="L148"></a> 148                 <strong class="reserved">return</strong> <a href="../D/15502.html" title="Multiple defined in 3 places.">engineCanonicalize</a>(<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/17415.html" title="Multiple defined in 35 places.">getBytes</a>());
<a id="L149" name="L149"></a> 149             <em class="brace">}</em>
<a id="L150" name="L150"></a> 150             <strong class="reserved">if</strong> (<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/25488.html" title="Multiple defined in 9 places.">isElement</a>()) <em class="brace">{</em>
<a id="L151" name="L151"></a> 151                 <strong class="reserved">return</strong> <a href="../D/15503.html" title="Multiple defined in 10 places.">engineCanonicalizeSubTree</a>(<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L447" title="Defined at 447 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">getSubNode</a>(), <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L431" title="Defined at 431 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">getExcludeNode</a>());
<a id="L152" name="L152"></a> 152             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L288" title="Defined at 288 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">isNodeSet</a>()) <em class="brace">{</em>
<a id="L153" name="L153"></a> 153                 nodeFilter = <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L546" title="Defined at 546 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">getNodeFilters</a>();
<a id="L154" name="L154"></a> 154 
<a id="L155" name="L155"></a> 155                 <a href="../D/12765.html" title="Multiple defined in 5 places.">circumventBugIfNeeded</a>(<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>);
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157                 <strong class="reserved">if</strong> (<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L447" title="Defined at 447 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">getSubNode</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L158" name="L158"></a> 158                     <strong class="reserved">return</strong> <a href="../S/5620.html#L350" title="Defined at 350 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">engineCanonicalizeXPathNodeSetInternal</a>(<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../S/5663.html#L447" title="Defined at 447 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">getSubNode</a>());
<a id="L159" name="L159"></a> 159                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L160" name="L160"></a> 160                     <strong class="reserved">return</strong> <a href="../D/15504.html" title="Multiple defined in 9 places.">engineCanonicalizeXPathNodeSet</a>(<a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>.<a href="../D/20987.html" title="Multiple defined in 2 places.">getNodeSet</a>());
<a id="L161" name="L161"></a> 161                 <em class="brace">}</em>
<a id="L162" name="L162"></a> 162             <em class="brace">}</em>
<a id="L163" name="L163"></a> 163             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L164" name="L164"></a> 164         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L165" name="L165"></a> 165             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L166" name="L166"></a> 166         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L167" name="L167"></a> 167             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L168" name="L168"></a> 168         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L169" name="L169"></a> 169             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L170" name="L170"></a> 170         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L171" name="L171"></a> 171             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L172" name="L172"></a> 172         <em class="brace">}</em>
<a id="L173" name="L173"></a> 173     <em class="brace">}</em>
<a id="L174" name="L174"></a> 174 
<div class="comment">
      @param writer The writer to set.</div>
<a id="L178" name="L178"></a> 178     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28427.html" title="Multiple referred from 20 places.">setWriter</a>(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>) <em class="brace">{</em>
<a id="L179" name="L179"></a> 179         <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> = <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>;
<a id="L180" name="L180"></a> 180     <em class="brace">}</em>
<a id="L181" name="L181"></a> 181 
<div class="comment">
      Canonicalizes a Subtree node.
      @param rootNode
                 the root of the subtree to canonicalize
      @param excludeNode
                 a node to be excluded from the canonicalize operation
      @return The canonicalize stream.
      @throws CanonicalizationException</div>
<a id="L192" name="L192"></a> 192     <strong class="reserved">protected</strong> <strong class="reserved">byte</strong>[] <a href="../R/13814.html" title="Multiple referred from 8 places.">engineCanonicalizeSubTree</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> excludeNode)
<a id="L193" name="L193"></a> 193         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L194" name="L194"></a> 194         <strong class="reserved">this</strong>.excludeNode = excludeNode;
<a id="L195" name="L195"></a> 195         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L196" name="L196"></a> 196             <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns = <strong class="reserved">new</strong> <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a>();
<a id="L197" name="L197"></a> 197             <strong class="reserved">int</strong> nodeLevel = NODE_BEFORE_DOCUMENT_ELEMENT;
<a id="L198" name="L198"></a> 198             <strong class="reserved">if</strong> (<a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE == <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199                 <em class="comment">//Fills the nssymbtable with the definitions of the parent of the root subnode</em>
<a id="L200" name="L200"></a> 200                 <a href="../S/5620.html#L618" title="Defined at 618 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">getParentNameSpaces</a>((<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)<a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>, ns);
<a id="L201" name="L201"></a> 201                 nodeLevel = NODE_NOT_BEFORE_OR_AFTER_DOCUMENT_ELEMENT;
<a id="L202" name="L202"></a> 202             <em class="brace">}</em>
<a id="L203" name="L203"></a> 203             <strong class="reserved">this</strong>.<a href="../S/5620.html#L243" title="Defined at 243 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">canonicalizeSubTree</a>(<a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>, ns, <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>, nodeLevel);
<a id="L204" name="L204"></a> 204             <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L205" name="L205"></a> 205             <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> <strong class="reserved">instanceof</strong> <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206                 <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/35362.html" title="Multiple defined in 10 places.">toByteArray</a>();
<a id="L207" name="L207"></a> 207                 <strong class="reserved">if</strong> (<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>) <em class="brace">{</em>
<a id="L208" name="L208"></a> 208                     ((<a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L209" name="L209"></a> 209                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                     <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L211" name="L211"></a> 211                 <em class="brace">}</em>
<a id="L212" name="L212"></a> 212                 <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L213" name="L213"></a> 213             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> <strong class="reserved">instanceof</strong> <a href="../S/5698.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/utils/UnsyncByteArrayOutputStream.java.">UnsyncByteArrayOutputStream</a>) <em class="brace">{</em>
<a id="L214" name="L214"></a> 214                 <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../S/5698.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/utils/UnsyncByteArrayOutputStream.java.">UnsyncByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/35362.html" title="Multiple defined in 10 places.">toByteArray</a>();
<a id="L215" name="L215"></a> 215                 <strong class="reserved">if</strong> (<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216                     ((<a href="../S/5698.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/utils/UnsyncByteArrayOutputStream.java.">UnsyncByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L217" name="L217"></a> 217                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L218" name="L218"></a> 218                     <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L219" name="L219"></a> 219                 <em class="brace">}</em>
<a id="L220" name="L220"></a> 220                 <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L221" name="L221"></a> 221             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L222" name="L222"></a> 222                 <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L223" name="L223"></a> 223             <em class="brace">}</em>
<a id="L224" name="L224"></a> 224             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L225" name="L225"></a> 225 
<a id="L226" name="L226"></a> 226         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1372.html#L33" title="Defined at 33 in src/java/io/UnsupportedEncodingException.java.">UnsupportedEncodingException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L227" name="L227"></a> 227             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L228" name="L228"></a> 228         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L229" name="L229"></a> 229             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L230" name="L230"></a> 230         <em class="brace">}</em>
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<a id="L233" name="L233"></a> 233 
<div class="comment">
      Method canonicalizeSubTree, this function is a recursive one.
      @param currentNode
      @param ns
      @param endnode
      @throws CanonicalizationException
      @throws IOException</div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/5620.html#L203" title="Referred from 203 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">canonicalizeSubTree</a>(
<a id="L244" name="L244"></a> 244         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> currentNode, <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> endnode, <strong class="reserved">int</strong> documentLevel
<a id="L245" name="L245"></a> 245     ) <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L246" name="L246"></a> 246         <strong class="reserved">if</strong> (<a href="../S/5620.html#L550" title="Defined at 550 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">isVisibleInt</a>(currentNode) == -1) <em class="brace">{</em>
<a id="L247" name="L247"></a> 247             <strong class="reserved">return</strong>;
<a id="L248" name="L248"></a> 248         <em class="brace">}</em>
<a id="L249" name="L249"></a> 249         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sibling = <strong class="reserved">null</strong>;
<a id="L250" name="L250"></a> 250         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = <strong class="reserved">null</strong>;
<a id="L251" name="L251"></a> 251         <strong class="reserved">final</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> = <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>;
<a id="L252" name="L252"></a> 252         <strong class="reserved">final</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> excludeNode = <strong class="reserved">this</strong>.excludeNode;
<a id="L253" name="L253"></a> 253         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> includeComments = <strong class="reserved">this</strong>.includeComments;
<a id="L254" name="L254"></a> 254         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <strong class="reserved">byte</strong>[]&gt; <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a> = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <strong class="reserved">byte</strong>[]&gt;();
<a id="L255" name="L255"></a> 255         <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L256" name="L256"></a> 256             <strong class="reserved">switch</strong> (currentNode.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L257" name="L257"></a> 257 
<a id="L258" name="L258"></a> 258             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE :
<a id="L259" name="L259"></a> 259             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.NOTATION_NODE :
<a id="L260" name="L260"></a> 260             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE :
<a id="L261" name="L261"></a> 261                 <em class="comment">// illegal node type during traversal</em>
<a id="L262" name="L262"></a> 262                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty");
<a id="L263" name="L263"></a> 263 
<a id="L264" name="L264"></a> 264             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_FRAGMENT_NODE :
<a id="L265" name="L265"></a> 265             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_NODE :
<a id="L266" name="L266"></a> 266                 ns.<a href="../S/5613.html#L93" title="Defined at 93 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePush</a>();
<a id="L267" name="L267"></a> 267                 sibling = currentNode.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L268" name="L268"></a> 268                 <strong class="reserved">break</strong>;
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.COMMENT_NODE :
<a id="L271" name="L271"></a> 271                 <strong class="reserved">if</strong> (includeComments) <em class="brace">{</em>
<a id="L272" name="L272"></a> 272                     <a href="../D/28600.html" title="Multiple defined in 3 places.">outputCommentToWriter</a>((<a href="../D/1672.html" title="Multiple defined in 3 places.">Comment</a>) currentNode, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, documentLevel);
<a id="L273" name="L273"></a> 273                 <em class="brace">}</em>
<a id="L274" name="L274"></a> 274                 <strong class="reserved">break</strong>;
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.PROCESSING_INSTRUCTION_NODE :
<a id="L277" name="L277"></a> 277                 <a href="../D/28611.html" title="Multiple defined in 3 places.">outputPItoWriter</a>((<a href="../D/6899.html" title="Multiple defined in 3 places.">ProcessingInstruction</a>) currentNode, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, documentLevel);
<a id="L278" name="L278"></a> 278                 <strong class="reserved">break</strong>;
<a id="L279" name="L279"></a> 279 
<a id="L280" name="L280"></a> 280             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE :
<a id="L281" name="L281"></a> 281             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE :
<a id="L282" name="L282"></a> 282                 <a href="../D/28615.html" title="Multiple defined in 2 places.">outputTextToWriter</a>(currentNode.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L283" name="L283"></a> 283                 <strong class="reserved">break</strong>;
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE :
<a id="L286" name="L286"></a> 286                 documentLevel = NODE_NOT_BEFORE_OR_AFTER_DOCUMENT_ELEMENT;
<a id="L287" name="L287"></a> 287                 <strong class="reserved">if</strong> (currentNode == excludeNode) <em class="brace">{</em>
<a id="L288" name="L288"></a> 288                     <strong class="reserved">break</strong>;
<a id="L289" name="L289"></a> 289                 <em class="brace">}</em>
<a id="L290" name="L290"></a> 290                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> currentElement = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)currentNode;
<a id="L291" name="L291"></a> 291                 <em class="comment">//Add a level to the nssymbtable. So latter can be pop-back.</em>
<a id="L292" name="L292"></a> 292                 ns.<a href="../S/5613.html#L93" title="Defined at 93 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePush</a>();
<a id="L293" name="L293"></a> 293                 <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&lt;');
<a id="L294" name="L294"></a> 294                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = currentElement.<a href="../D/22989.html" title="Multiple defined in 9 places.">getTagName</a>();
<a id="L295" name="L295"></a> 295                 <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L296" name="L296"></a> 296 
<a id="L297" name="L297"></a> 297                 <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>&gt; attrs = <strong class="reserved">this</strong>.<a href="../D/23947.html" title="Multiple defined in 5 places.">handleAttributesSubtree</a>(currentElement, ns);
<a id="L298" name="L298"></a> 298                 <strong class="reserved">if</strong> (attrs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L299" name="L299"></a> 299                     <em class="comment">//we output all Attrs which are available</em>
<a id="L300" name="L300"></a> 300                     <strong class="reserved">while</strong> (attrs.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301                         <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = attrs.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L302" name="L302"></a> 302                         <a href="../D/28598.html" title="Multiple defined in 2 places.">outputAttrToWriter</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>(), <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L303" name="L303"></a> 303                     <em class="brace">}</em>
<a id="L304" name="L304"></a> 304                 <em class="brace">}</em>
<a id="L305" name="L305"></a> 305                 <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&gt;');
<a id="L306" name="L306"></a> 306                 sibling = currentNode.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L307" name="L307"></a> 307                 <strong class="reserved">if</strong> (sibling == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L308" name="L308"></a> 308                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(END_TAG.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L309" name="L309"></a> 309                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../S/5619.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">writeStringToUtf8</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L310" name="L310"></a> 310                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&gt;');
<a id="L311" name="L311"></a> 311                     <em class="comment">//We finished with this level, pop to the previous definitions.</em>
<a id="L312" name="L312"></a> 312                     ns.<a href="../S/5613.html#L100" title="Defined at 100 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePop</a>();
<a id="L313" name="L313"></a> 313                     <strong class="reserved">if</strong> (<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314                         sibling = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L315" name="L315"></a> 315                     <em class="brace">}</em>
<a id="L316" name="L316"></a> 316                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L317" name="L317"></a> 317                     <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = currentElement;
<a id="L318" name="L318"></a> 318                 <em class="brace">}</em>
<a id="L319" name="L319"></a> 319                 <strong class="reserved">break</strong>;
<a id="L320" name="L320"></a> 320 
<a id="L321" name="L321"></a> 321             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_TYPE_NODE :
<a id="L322" name="L322"></a> 322             <strong class="reserved">default</strong> :
<a id="L323" name="L323"></a> 323                 <strong class="reserved">break</strong>;
<a id="L324" name="L324"></a> 324             <em class="brace">}</em>
<a id="L325" name="L325"></a> 325             <strong class="reserved">while</strong> (sibling == <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326                 <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(END_TAG.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L327" name="L327"></a> 327                 <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(((<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>).<a href="../D/22989.html" title="Multiple defined in 9 places.">getTagName</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L328" name="L328"></a> 328                 <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&gt;');
<a id="L329" name="L329"></a> 329                 <em class="comment">//We finished with this level, pop to the previous definitions.</em>
<a id="L330" name="L330"></a> 330                 ns.<a href="../S/5613.html#L100" title="Defined at 100 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePop</a>();
<a id="L331" name="L331"></a> 331                 <strong class="reserved">if</strong> (<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> == endnode) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332                     <strong class="reserved">return</strong>;
<a id="L333" name="L333"></a> 333                 <em class="brace">}</em>
<a id="L334" name="L334"></a> 334                 sibling = <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L335" name="L335"></a> 335                 <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L336" name="L336"></a> 336                 <strong class="reserved">if</strong> (<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> == <strong class="reserved">null</strong> || <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE != <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337                     documentLevel = NODE_AFTER_DOCUMENT_ELEMENT;
<a id="L338" name="L338"></a> 338                     <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = <strong class="reserved">null</strong>;
<a id="L339" name="L339"></a> 339                 <em class="brace">}</em>
<a id="L340" name="L340"></a> 340             <em class="brace">}</em>
<a id="L341" name="L341"></a> 341             <strong class="reserved">if</strong> (sibling == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L342" name="L342"></a> 342                 <strong class="reserved">return</strong>;
<a id="L343" name="L343"></a> 343             <em class="brace">}</em>
<a id="L344" name="L344"></a> 344             currentNode = sibling;
<a id="L345" name="L345"></a> 345             sibling = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L346" name="L346"></a> 346         <em class="brace">}</em> <strong class="reserved">while</strong>(<strong class="reserved">true</strong>);
<a id="L347" name="L347"></a> 347     <em class="brace">}</em>
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349 
<a id="L350" name="L350"></a> 350     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] <a href="../R/13816.html" title="Multiple referred from 2 places.">engineCanonicalizeXPathNodeSetInternal</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> doc)
<a id="L351" name="L351"></a> 351         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a> <em class="brace">{</em>
<a id="L352" name="L352"></a> 352         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L353" name="L353"></a> 353             <strong class="reserved">this</strong>.<a href="../D/12239.html" title="Multiple defined in 6 places.">canonicalizeXPathNodeSet</a>(doc, doc);
<a id="L354" name="L354"></a> 354             <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L355" name="L355"></a> 355             <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> <strong class="reserved">instanceof</strong> <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>) <em class="brace">{</em>
<a id="L356" name="L356"></a> 356                 <strong class="reserved">byte</strong>[] sol = ((<a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/35362.html" title="Multiple defined in 10 places.">toByteArray</a>();
<a id="L357" name="L357"></a> 357                 <strong class="reserved">if</strong> (<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358                     ((<a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L359" name="L359"></a> 359                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L360" name="L360"></a> 360                     <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L361" name="L361"></a> 361                 <em class="brace">}</em>
<a id="L362" name="L362"></a> 362                 <strong class="reserved">return</strong> sol;
<a id="L363" name="L363"></a> 363             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> <strong class="reserved">instanceof</strong> <a href="../S/5698.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/utils/UnsyncByteArrayOutputStream.java.">UnsyncByteArrayOutputStream</a>) <em class="brace">{</em>
<a id="L364" name="L364"></a> 364                 <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../S/5698.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/utils/UnsyncByteArrayOutputStream.java.">UnsyncByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/35362.html" title="Multiple defined in 10 places.">toByteArray</a>();
<a id="L365" name="L365"></a> 365                 <strong class="reserved">if</strong> (<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>) <em class="brace">{</em>
<a id="L366" name="L366"></a> 366                     ((<a href="../S/5698.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/utils/UnsyncByteArrayOutputStream.java.">UnsyncByteArrayOutputStream</a>)<strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>).<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L367" name="L367"></a> 367                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L368" name="L368"></a> 368                     <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L369" name="L369"></a> 369                 <em class="brace">}</em>
<a id="L370" name="L370"></a> 370                 <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L371" name="L371"></a> 371             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L372" name="L372"></a> 372                 <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L373" name="L373"></a> 373             <em class="brace">}</em>
<a id="L374" name="L374"></a> 374             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L375" name="L375"></a> 375         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1372.html#L33" title="Defined at 33 in src/java/io/UnsupportedEncodingException.java.">UnsupportedEncodingException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L377" name="L377"></a> 377         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L378" name="L378"></a> 378             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L379" name="L379"></a> 379         <em class="brace">}</em>
<a id="L380" name="L380"></a> 380     <em class="brace">}</em>
<a id="L381" name="L381"></a> 381 
<div class="comment">
      Canonicalizes all the nodes included in the currentNode and contained in the
      xpathNodeSet field.
      @param currentNode
      @param endnode
      @throws CanonicalizationException
      @throws IOException</div>
<a id="L391" name="L391"></a> 391     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/10962.html" title="Multiple referred from 4 places.">canonicalizeXPathNodeSet</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> currentNode, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> endnode)
<a id="L392" name="L392"></a> 392         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L393" name="L393"></a> 393         <strong class="reserved">if</strong> (<a href="../S/5620.html#L550" title="Defined at 550 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">isVisibleInt</a>(currentNode) == -1) <em class="brace">{</em>
<a id="L394" name="L394"></a> 394             <strong class="reserved">return</strong>;
<a id="L395" name="L395"></a> 395         <em class="brace">}</em>
<a id="L396" name="L396"></a> 396         <strong class="reserved">boolean</strong> currentNodeIsVisible = <strong class="reserved">false</strong>;
<a id="L397" name="L397"></a> 397         <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns = <strong class="reserved">new</strong> <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a>();
<a id="L398" name="L398"></a> 398         <strong class="reserved">if</strong> (currentNode != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE == currentNode.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L399" name="L399"></a> 399             <a href="../S/5620.html#L618" title="Defined at 618 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">getParentNameSpaces</a>((<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)currentNode, ns);
<a id="L400" name="L400"></a> 400         <em class="brace">}</em>
<a id="L401" name="L401"></a> 401         <strong class="reserved">if</strong> (currentNode == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L402" name="L402"></a> 402             <strong class="reserved">return</strong>;
<a id="L403" name="L403"></a> 403         <em class="brace">}</em>
<a id="L404" name="L404"></a> 404         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> sibling = <strong class="reserved">null</strong>;
<a id="L405" name="L405"></a> 405         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = <strong class="reserved">null</strong>;
<a id="L406" name="L406"></a> 406         <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a> = <strong class="reserved">this</strong>.<a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>;
<a id="L407" name="L407"></a> 407         <strong class="reserved">int</strong> documentLevel = NODE_BEFORE_DOCUMENT_ELEMENT;
<a id="L408" name="L408"></a> 408         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <strong class="reserved">byte</strong>[]&gt; <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a> = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <strong class="reserved">byte</strong>[]&gt;();
<a id="L409" name="L409"></a> 409         <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L410" name="L410"></a> 410             <strong class="reserved">switch</strong> (currentNode.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411 
<a id="L412" name="L412"></a> 412             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ENTITY_NODE :
<a id="L413" name="L413"></a> 413             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.NOTATION_NODE :
<a id="L414" name="L414"></a> 414             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE :
<a id="L415" name="L415"></a> 415                 <em class="comment">// illegal node type during traversal</em>
<a id="L416" name="L416"></a> 416                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>("empty");
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_FRAGMENT_NODE :
<a id="L419" name="L419"></a> 419             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_NODE :
<a id="L420" name="L420"></a> 420                 ns.<a href="../S/5613.html#L93" title="Defined at 93 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePush</a>();
<a id="L421" name="L421"></a> 421                 sibling = currentNode.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L422" name="L422"></a> 422                 <strong class="reserved">break</strong>;
<a id="L423" name="L423"></a> 423 
<a id="L424" name="L424"></a> 424             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.COMMENT_NODE :
<a id="L425" name="L425"></a> 425                 <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.includeComments &amp;&amp; (<a href="../S/5620.html#L534" title="Defined at 534 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">isVisibleDO</a>(currentNode, ns.<a href="../D/20078.html" title="Multiple defined in 14 places.">getLevel</a>()) == 1)) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426                     <a href="../D/28600.html" title="Multiple defined in 3 places.">outputCommentToWriter</a>((<a href="../D/1672.html" title="Multiple defined in 3 places.">Comment</a>) currentNode, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, documentLevel);
<a id="L427" name="L427"></a> 427                 <em class="brace">}</em>
<a id="L428" name="L428"></a> 428                 <strong class="reserved">break</strong>;
<a id="L429" name="L429"></a> 429 
<a id="L430" name="L430"></a> 430             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.PROCESSING_INSTRUCTION_NODE :
<a id="L431" name="L431"></a> 431                 <strong class="reserved">if</strong> (<a href="../D/26487.html" title="Multiple defined in 29 places.">isVisible</a>(currentNode)) <em class="brace">{</em>
<a id="L432" name="L432"></a> 432                     <a href="../D/28611.html" title="Multiple defined in 3 places.">outputPItoWriter</a>((<a href="../D/6899.html" title="Multiple defined in 3 places.">ProcessingInstruction</a>) currentNode, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, documentLevel);
<a id="L433" name="L433"></a> 433                 <em class="brace">}</em>
<a id="L434" name="L434"></a> 434                 <strong class="reserved">break</strong>;
<a id="L435" name="L435"></a> 435 
<a id="L436" name="L436"></a> 436             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE :
<a id="L437" name="L437"></a> 437             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE :
<a id="L438" name="L438"></a> 438                 <strong class="reserved">if</strong> (<a href="../D/26487.html" title="Multiple defined in 29 places.">isVisible</a>(currentNode)) <em class="brace">{</em>
<a id="L439" name="L439"></a> 439                     <a href="../D/28615.html" title="Multiple defined in 2 places.">outputTextToWriter</a>(currentNode.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L440" name="L440"></a> 440                     <strong class="reserved">for</strong> (<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L441" name="L441"></a> 441                         (<a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> != <strong class="reserved">null</strong>) &amp;&amp; ((<a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.TEXT_NODE)
<a id="L442" name="L442"></a> 442                             || (<a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.CDATA_SECTION_NODE));
<a id="L443" name="L443"></a> 443                         <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a> = <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>()) <em class="brace">{</em>
<a id="L444" name="L444"></a> 444                         <a href="../D/28615.html" title="Multiple defined in 2 places.">outputTextToWriter</a>(<a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L445" name="L445"></a> 445                         currentNode = <a href="../D/28184.html" title="Multiple defined in 2 places.">nextSibling</a>;
<a id="L446" name="L446"></a> 446                         sibling = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L447" name="L447"></a> 447                     <em class="brace">}</em>
<a id="L448" name="L448"></a> 448                 <em class="brace">}</em>
<a id="L449" name="L449"></a> 449                 <strong class="reserved">break</strong>;
<a id="L450" name="L450"></a> 450 
<a id="L451" name="L451"></a> 451             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE :
<a id="L452" name="L452"></a> 452                 documentLevel = NODE_NOT_BEFORE_OR_AFTER_DOCUMENT_ELEMENT;
<a id="L453" name="L453"></a> 453                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> currentElement = (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>) currentNode;
<a id="L454" name="L454"></a> 454                 <em class="comment">//Add a level to the nssymbtable. So latter can be pop-back.</em>
<a id="L455" name="L455"></a> 455                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <strong class="reserved">null</strong>;
<a id="L456" name="L456"></a> 456                 <strong class="reserved">int</strong> i = <a href="../S/5620.html#L534" title="Defined at 534 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">isVisibleDO</a>(currentNode, ns.<a href="../D/20078.html" title="Multiple defined in 14 places.">getLevel</a>());
<a id="L457" name="L457"></a> 457                 <strong class="reserved">if</strong> (i == -1) <em class="brace">{</em>
<a id="L458" name="L458"></a> 458                     sibling = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L459" name="L459"></a> 459                     <strong class="reserved">break</strong>;
<a id="L460" name="L460"></a> 460                 <em class="brace">}</em>
<a id="L461" name="L461"></a> 461                 currentNodeIsVisible = (i == 1);
<a id="L462" name="L462"></a> 462                 <strong class="reserved">if</strong> (currentNodeIsVisible) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463                     ns.<a href="../S/5613.html#L93" title="Defined at 93 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePush</a>();
<a id="L464" name="L464"></a> 464                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&lt;');
<a id="L465" name="L465"></a> 465                     <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = currentElement.<a href="../D/22989.html" title="Multiple defined in 9 places.">getTagName</a>();
<a id="L466" name="L466"></a> 466                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L467" name="L467"></a> 467                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                     ns.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>();
<a id="L469" name="L469"></a> 469                 <em class="brace">}</em>
<a id="L470" name="L470"></a> 470 
<a id="L471" name="L471"></a> 471                 <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>&gt; attrs = <a href="../D/23946.html" title="Multiple defined in 5 places.">handleAttributes</a>(currentElement,ns);
<a id="L472" name="L472"></a> 472                 <strong class="reserved">if</strong> (attrs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L473" name="L473"></a> 473                     <em class="comment">//we output all Attrs which are available</em>
<a id="L474" name="L474"></a> 474                     <strong class="reserved">while</strong> (attrs.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L475" name="L475"></a> 475                         <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = attrs.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L476" name="L476"></a> 476                         <a href="../D/28598.html" title="Multiple defined in 2 places.">outputAttrToWriter</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>(), <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L477" name="L477"></a> 477                     <em class="brace">}</em>
<a id="L478" name="L478"></a> 478                 <em class="brace">}</em>
<a id="L479" name="L479"></a> 479                 <strong class="reserved">if</strong> (currentNodeIsVisible) <em class="brace">{</em>
<a id="L480" name="L480"></a> 480                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&gt;');
<a id="L481" name="L481"></a> 481                 <em class="brace">}</em>
<a id="L482" name="L482"></a> 482                 sibling = currentNode.<a href="../D/19088.html" title="Multiple defined in 18 places.">getFirstChild</a>();
<a id="L483" name="L483"></a> 483 
<a id="L484" name="L484"></a> 484                 <strong class="reserved">if</strong> (sibling == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L485" name="L485"></a> 485                     <strong class="reserved">if</strong> (currentNodeIsVisible) <em class="brace">{</em>
<a id="L486" name="L486"></a> 486                         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(END_TAG.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L487" name="L487"></a> 487                         <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L488" name="L488"></a> 488                         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&gt;');
<a id="L489" name="L489"></a> 489                         <em class="comment">//We finished with this level, pop to the previous definitions.</em>
<a id="L490" name="L490"></a> 490                         ns.<a href="../S/5613.html#L100" title="Defined at 100 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePop</a>();
<a id="L491" name="L491"></a> 491                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L492" name="L492"></a> 492                         ns.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L493" name="L493"></a> 493                     <em class="brace">}</em>
<a id="L494" name="L494"></a> 494                     <strong class="reserved">if</strong> (<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L495" name="L495"></a> 495                         sibling = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L496" name="L496"></a> 496                     <em class="brace">}</em>
<a id="L497" name="L497"></a> 497                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L498" name="L498"></a> 498                     <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = currentElement;
<a id="L499" name="L499"></a> 499                 <em class="brace">}</em>
<a id="L500" name="L500"></a> 500                 <strong class="reserved">break</strong>;
<a id="L501" name="L501"></a> 501 
<a id="L502" name="L502"></a> 502             <strong class="reserved">case</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.DOCUMENT_TYPE_NODE :
<a id="L503" name="L503"></a> 503             <strong class="reserved">default</strong> :
<a id="L504" name="L504"></a> 504                 <strong class="reserved">break</strong>;
<a id="L505" name="L505"></a> 505             <em class="brace">}</em>
<a id="L506" name="L506"></a> 506             <strong class="reserved">while</strong> (sibling == <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L507" name="L507"></a> 507                 <strong class="reserved">if</strong> (<a href="../D/26487.html" title="Multiple defined in 29 places.">isVisible</a>(<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>)) <em class="brace">{</em>
<a id="L508" name="L508"></a> 508                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(END_TAG.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L509" name="L509"></a> 509                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(((<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>).<a href="../D/22989.html" title="Multiple defined in 9 places.">getTagName</a>(), <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L510" name="L510"></a> 510                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('&gt;');
<a id="L511" name="L511"></a> 511                     <em class="comment">//We finished with this level, pop to the previous definitions.</em>
<a id="L512" name="L512"></a> 512                     ns.<a href="../S/5613.html#L100" title="Defined at 100 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">outputNodePop</a>();
<a id="L513" name="L513"></a> 513                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L514" name="L514"></a> 514                     ns.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L515" name="L515"></a> 515                 <em class="brace">}</em>
<a id="L516" name="L516"></a> 516                 <strong class="reserved">if</strong> (<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> == endnode) <em class="brace">{</em>
<a id="L517" name="L517"></a> 517                     <strong class="reserved">return</strong>;
<a id="L518" name="L518"></a> 518                 <em class="brace">}</em>
<a id="L519" name="L519"></a> 519                 sibling = <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L520" name="L520"></a> 520                 <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L521" name="L521"></a> 521                 <strong class="reserved">if</strong> (<a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> == <strong class="reserved">null</strong> || <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE != <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522                     <a href="../D/29069.html" title="Multiple defined in 4 places.">parentNode</a> = <strong class="reserved">null</strong>;
<a id="L523" name="L523"></a> 523                     documentLevel = NODE_AFTER_DOCUMENT_ELEMENT;
<a id="L524" name="L524"></a> 524                 <em class="brace">}</em>
<a id="L525" name="L525"></a> 525             <em class="brace">}</em>
<a id="L526" name="L526"></a> 526             <strong class="reserved">if</strong> (sibling == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L527" name="L527"></a> 527                 <strong class="reserved">return</strong>;
<a id="L528" name="L528"></a> 528             <em class="brace">}</em>
<a id="L529" name="L529"></a> 529             currentNode = sibling;
<a id="L530" name="L530"></a> 530             sibling = currentNode.<a href="../D/20935.html" title="Multiple defined in 22 places.">getNextSibling</a>();
<a id="L531" name="L531"></a> 531         <em class="brace">}</em> <strong class="reserved">while</strong>(<strong class="reserved">true</strong>);
<a id="L532" name="L532"></a> 532     <em class="brace">}</em>
<a id="L533" name="L533"></a> 533 
<a id="L534" name="L534"></a> 534     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/22219.html" title="Multiple referred from 5 places.">isVisibleDO</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> currentNode, <strong class="reserved">int</strong> level) <em class="brace">{</em>
<a id="L535" name="L535"></a> 535         <strong class="reserved">if</strong> (nodeFilter != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L536" name="L536"></a> 536             <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a>&gt; it = nodeFilter.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L537" name="L537"></a> 537             <strong class="reserved">while</strong> (it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L538" name="L538"></a> 538                 <strong class="reserved">int</strong> i = (it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>()).<a href="../D/25950.html" title="Multiple defined in 4 places.">isNodeIncludeDO</a>(currentNode, level);
<a id="L539" name="L539"></a> 539                 <strong class="reserved">if</strong> (i != 1) <em class="brace">{</em>
<a id="L540" name="L540"></a> 540                     <strong class="reserved">return</strong> i;
<a id="L541" name="L541"></a> 541                 <em class="brace">}</em>
<a id="L542" name="L542"></a> 542             <em class="brace">}</em>
<a id="L543" name="L543"></a> 543         <em class="brace">}</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">if</strong> ((<strong class="reserved">this</strong>.xpathNodeSet != <strong class="reserved">null</strong>) &amp;&amp; !<strong class="reserved">this</strong>.xpathNodeSet.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(currentNode)) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545             <strong class="reserved">return</strong> 0;
<a id="L546" name="L546"></a> 546         <em class="brace">}</em>
<a id="L547" name="L547"></a> 547         <strong class="reserved">return</strong> 1;
<a id="L548" name="L548"></a> 548     <em class="brace">}</em>
<a id="L549" name="L549"></a> 549 
<a id="L550" name="L550"></a> 550     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/22220.html" title="Multiple referred from 2 places.">isVisibleInt</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> currentNode) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551         <strong class="reserved">if</strong> (nodeFilter != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552             <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a>&gt; it = nodeFilter.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L553" name="L553"></a> 553             <strong class="reserved">while</strong> (it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554                 <strong class="reserved">int</strong> i = (it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>()).<a href="../D/25949.html" title="Multiple defined in 4 places.">isNodeInclude</a>(currentNode);
<a id="L555" name="L555"></a> 555                 <strong class="reserved">if</strong> (i != 1) <em class="brace">{</em>
<a id="L556" name="L556"></a> 556                     <strong class="reserved">return</strong> i;
<a id="L557" name="L557"></a> 557                 <em class="brace">}</em>
<a id="L558" name="L558"></a> 558             <em class="brace">}</em>
<a id="L559" name="L559"></a> 559         <em class="brace">}</em>
<a id="L560" name="L560"></a> 560         <strong class="reserved">if</strong> ((<strong class="reserved">this</strong>.xpathNodeSet != <strong class="reserved">null</strong>) &amp;&amp; !<strong class="reserved">this</strong>.xpathNodeSet.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(currentNode)) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561             <strong class="reserved">return</strong> 0;
<a id="L562" name="L562"></a> 562         <em class="brace">}</em>
<a id="L563" name="L563"></a> 563         <strong class="reserved">return</strong> 1;
<a id="L564" name="L564"></a> 564     <em class="brace">}</em>
<a id="L565" name="L565"></a> 565 
<a id="L566" name="L566"></a> 566     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/22218.html" title="Multiple referred from 244 places.">isVisible</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> currentNode) <em class="brace">{</em>
<a id="L567" name="L567"></a> 567         <strong class="reserved">if</strong> (nodeFilter != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L568" name="L568"></a> 568             <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../D/6087.html" title="Multiple defined in 2 places.">NodeFilter</a>&gt; it = nodeFilter.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L569" name="L569"></a> 569             <strong class="reserved">while</strong> (it.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L570" name="L570"></a> 570                 <strong class="reserved">if</strong> (it.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().<a href="../D/25949.html" title="Multiple defined in 4 places.">isNodeInclude</a>(currentNode) != 1) <em class="brace">{</em>
<a id="L571" name="L571"></a> 571                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L572" name="L572"></a> 572                 <em class="brace">}</em>
<a id="L573" name="L573"></a> 573             <em class="brace">}</em>
<a id="L574" name="L574"></a> 574         <em class="brace">}</em>
<a id="L575" name="L575"></a> 575         <strong class="reserved">if</strong> ((<strong class="reserved">this</strong>.xpathNodeSet != <strong class="reserved">null</strong>) &amp;&amp; !<strong class="reserved">this</strong>.xpathNodeSet.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(currentNode)) <em class="brace">{</em>
<a id="L576" name="L576"></a> 576             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L577" name="L577"></a> 577         <em class="brace">}</em>
<a id="L578" name="L578"></a> 578         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L579" name="L579"></a> 579     <em class="brace">}</em>
<a id="L580" name="L580"></a> 580 
<a id="L581" name="L581"></a> 581     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5620.html#L634" title="Referred from 634 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">handleParent</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e, <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns) <em class="brace">{</em>
<a id="L582" name="L582"></a> 582         <strong class="reserved">if</strong> (!e.<a href="../D/24061.html" title="Multiple defined in 12 places.">hasAttributes</a>() &amp;&amp; e.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L583" name="L583"></a> 583             <strong class="reserved">return</strong>;
<a id="L584" name="L584"></a> 584         <em class="brace">}</em>
<a id="L585" name="L585"></a> 585         <a href="../S/114.html#L56" title="Defined at 56 in src/org/w3c/dom/NamedNodeMap.java.">NamedNodeMap</a> attrs = e.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L586" name="L586"></a> 586         <strong class="reserved">int</strong> attrsLength = attrs.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L587" name="L587"></a> 587         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; attrsLength; i++) <em class="brace">{</em>
<a id="L588" name="L588"></a> 588             <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a> = (<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>) attrs.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(i);
<a id="L589" name="L589"></a> 589             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> NName = <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>();
<a id="L590" name="L590"></a> 590             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> NValue = <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>.<a href="../D/20992.html" title="Multiple defined in 23 places.">getNodeValue</a>();
<a id="L591" name="L591"></a> 591 
<a id="L592" name="L592"></a> 592             <strong class="reserved">if</strong> (<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.NamespaceSpecNS.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>())
<a id="L593" name="L593"></a> 593                 &amp;&amp; (!XML.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(NName) || !<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XML_LANG_SPACE_SpecNS.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(NValue))) <em class="brace">{</em>
<a id="L594" name="L594"></a> 594                 ns.<a href="../D/10924.html" title="Multiple defined in 3 places.">addMapping</a>(NName, NValue, <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>);
<a id="L595" name="L595"></a> 595             <em class="brace">}</em>
<a id="L596" name="L596"></a> 596         <em class="brace">}</em>
<a id="L597" name="L597"></a> 597         <strong class="reserved">if</strong> (e.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L598" name="L598"></a> 598             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> NName = e.<a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>();
<a id="L599" name="L599"></a> 599             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> NValue = e.<a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>();
<a id="L600" name="L600"></a> 600             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/5923.html" title="Multiple defined in 5 places.">Name</a>;
<a id="L601" name="L601"></a> 601             <strong class="reserved">if</strong> (NName == <strong class="reserved">null</strong> || NName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("")) <em class="brace">{</em>
<a id="L602" name="L602"></a> 602                 NName = XMLNS;
<a id="L603" name="L603"></a> 603                 <a href="../D/5923.html" title="Multiple defined in 5 places.">Name</a> = XMLNS;
<a id="L604" name="L604"></a> 604             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L605" name="L605"></a> 605                 <a href="../D/5923.html" title="Multiple defined in 5 places.">Name</a> = XMLNS + ":" + NName;
<a id="L606" name="L606"></a> 606             <em class="brace">}</em>
<a id="L607" name="L607"></a> 607             <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> n = e.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>().<a href="../D/13620.html" title="Multiple defined in 8 places.">createAttributeNS</a>("http://www.w3.org/2000/xmlns/", <a href="../D/5923.html" title="Multiple defined in 5 places.">Name</a>);
<a id="L608" name="L608"></a> 608             n.<a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>(NValue);
<a id="L609" name="L609"></a> 609             ns.<a href="../D/10924.html" title="Multiple defined in 3 places.">addMapping</a>(NName, NValue, n);
<a id="L610" name="L610"></a> 610         <em class="brace">}</em>
<a id="L611" name="L611"></a> 611     <em class="brace">}</em>
<a id="L612" name="L612"></a> 612 
<div class="comment">
      Adds to ns the definitions from the parent elements of el
      @param el
      @param ns</div>
<a id="L618" name="L618"></a> 618     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/18277.html" title="Multiple referred from 2 places.">getParentNameSpaces</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> el, <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns)  <em class="brace">{</em>
<a id="L619" name="L619"></a> 619         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n1 = el.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L620" name="L620"></a> 620         <strong class="reserved">if</strong> (n1 == <strong class="reserved">null</strong> || <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE != n1.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L621" name="L621"></a> 621             <strong class="reserved">return</strong>;
<a id="L622" name="L622"></a> 622         <em class="brace">}</em>
<a id="L623" name="L623"></a> 623         <em class="comment">//Obtain all the parents of the element</em>
<a id="L624" name="L624"></a> 624         <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; parents = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt;();
<a id="L625" name="L625"></a> 625         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = n1;
<a id="L626" name="L626"></a> 626         <strong class="reserved">while</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ELEMENT_NODE == <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>()) <em class="brace">{</em>
<a id="L627" name="L627"></a> 627             parents.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>((<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L628" name="L628"></a> 628             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>();
<a id="L629" name="L629"></a> 629         <em class="brace">}</em>
<a id="L630" name="L630"></a> 630         <em class="comment">//Visit them in reverse order.</em>
<a id="L631" name="L631"></a> 631         <a href="../S/1187.html#L60" title="Defined at 60 in src/java/util/ListIterator.java.">ListIterator</a>&lt;<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>&gt; it = parents.<a href="../D/26876.html" title="Multiple defined in 26 places.">listIterator</a>(parents.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());
<a id="L632" name="L632"></a> 632         <strong class="reserved">while</strong> (it.<a href="../D/24162.html" title="Multiple defined in 10 places.">hasPrevious</a>()) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> ele = it.<a href="../D/29600.html" title="Multiple defined in 22 places.">previous</a>();
<a id="L634" name="L634"></a> 634             <a href="../D/24015.html" title="Multiple defined in 4 places.">handleParent</a>(ele, ns);
<a id="L635" name="L635"></a> 635         <em class="brace">}</em>
<a id="L636" name="L636"></a> 636         parents.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L637" name="L637"></a> 637         <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> nsprefix;
<a id="L638" name="L638"></a> 638         <strong class="reserved">if</strong> (((nsprefix = ns.<a href="../S/5613.html#L174" title="Defined at 174 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">getMappingWithoutRendered</a>(XMLNS)) != <strong class="reserved">null</strong>)
<a id="L639" name="L639"></a> 639                 &amp;&amp; "".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(nsprefix.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>())) <em class="brace">{</em>
<a id="L640" name="L640"></a> 640             ns.<a href="../S/5613.html#L222" title="Defined at 222 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">addMappingAndRender</a>(
<a id="L641" name="L641"></a> 641                     XMLNS, "", <a href="../S/5620.html#L879" title="Defined at 879 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">getNullNode</a>(nsprefix.<a href="../D/21292.html" title="Multiple defined in 20 places.">getOwnerDocument</a>()));
<a id="L642" name="L642"></a> 642         <em class="brace">}</em>
<a id="L643" name="L643"></a> 643     <em class="brace">}</em>
<a id="L644" name="L644"></a> 644 
<div class="comment">
      Obtain the attributes to output for this node in XPathNodeSet c14n.
      @param element
      @param ns
      @return the attributes nodes to output.
      @throws CanonicalizationException</div>
<a id="L653" name="L653"></a> 653     <strong class="reserved">abstract</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>&gt; <a href="../S/5620.html#L471" title="Referred from 471 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">handleAttributes</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns)
<a id="L654" name="L654"></a> 654         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>;
<a id="L655" name="L655"></a> 655 
<div class="comment">
      Obtain the attributes to output for this node in a Subtree c14n.
      @param element
      @param ns
      @return the attributes nodes to output.
      @throws CanonicalizationException</div>
<a id="L664" name="L664"></a> 664     <strong class="reserved">abstract</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a>&gt; <a href="../S/5620.html#L297" title="Referred from 297 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">handleAttributesSubtree</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5613.html#L40" title="Defined at 40 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/NameSpaceSymbTable.java.">NameSpaceSymbTable</a> ns)
<a id="L665" name="L665"></a> 665         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>;
<a id="L666" name="L666"></a> 666 
<a id="L667" name="L667"></a> 667     <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/5620.html#L155" title="Referred from 155 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/CanonicalizerBase.java.">circumventBugIfNeeded</a>(<a href="../S/5663.html#L57" title="Defined at 57 in src/com/sun/org/apache/xml/internal/security/signature/XMLSignatureInput.java.">XMLSignatureInput</a> <a href="../S/4116.html#L132" title="Defined at 132 in src/javax/xml/ws/Action.java.">input</a>)
<a id="L668" name="L668"></a> 668         <strong class="reserved">throws</strong> <a href="../S/5608.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/security/c14n/CanonicalizationException.java.">CanonicalizationException</a>, <a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>;
<a id="L669" name="L669"></a> 669 
<div class="comment">
      Outputs an Attribute to the internal Writer.
      The string value of the node is modified by replacing
      <ul>
      <li>all ampersands (&amp;) with <code>&amp;amp;</code></li>
      <li>all open angle brackets (&lt;) with <code>&amp;lt;</code></li>
      <li>all quotation mark characters with <code>&amp;quot;</code></li>
      <li>and the whitespace characters <code>#x9</code>, #xA, and #xD, with character
      references. The character references are written in uppercase
      hexadecimal with no leading zeroes (for example, <code>#xD</code> is represented
      by the character reference <code>&amp;#xD;</code>)</li>
      </ul>
      @param name
      @param value
      @param writer
      @throws IOException</div>
<a id="L689" name="L689"></a> 689     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/24045.html" title="Multiple referred from 3 places.">outputAttrToWriter</a>(
<a id="L690" name="L690"></a> 690         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>,
<a id="L691" name="L691"></a> 691         <strong class="reserved">final</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <strong class="reserved">final</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <strong class="reserved">byte</strong>[]&gt; <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>
<a id="L692" name="L692"></a> 692     ) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L693" name="L693"></a> 693         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(' ');
<a id="L694" name="L694"></a> 694         <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../D/37003.html" title="Multiple defined in 12 places.">writeByte</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>);
<a id="L695" name="L695"></a> 695         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(EQUALS_STR.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L696" name="L696"></a> 696         <strong class="reserved">byte</strong>[] toWrite;
<a id="L697" name="L697"></a> 697         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L698" name="L698"></a> 698         <strong class="reserved">int</strong> i = 0;
<a id="L699" name="L699"></a> 699         <strong class="reserved">while</strong> (i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L700" name="L700"></a> 700             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i++);
<a id="L701" name="L701"></a> 701 
<a id="L702" name="L702"></a> 702             <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703 
<a id="L704" name="L704"></a> 704             <strong class="reserved">case</strong> '&amp;' :
<a id="L705" name="L705"></a> 705                 toWrite = AMP.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L706" name="L706"></a> 706                 <strong class="reserved">break</strong>;
<a id="L707" name="L707"></a> 707 
<a id="L708" name="L708"></a> 708             <strong class="reserved">case</strong> '&lt;' :
<a id="L709" name="L709"></a> 709                 toWrite = <a href="../D/4946.html" title="Multiple defined in 3 places.">LT</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L710" name="L710"></a> 710                 <strong class="reserved">break</strong>;
<a id="L711" name="L711"></a> 711 
<a id="L712" name="L712"></a> 712             <strong class="reserved">case</strong> '"' :
<a id="L713" name="L713"></a> 713                 toWrite = QUOT.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L714" name="L714"></a> 714                 <strong class="reserved">break</strong>;
<a id="L715" name="L715"></a> 715 
<a id="L716" name="L716"></a> 716             <strong class="reserved">case</strong> 0x09 :    <em class="comment">// '\t'</em>
<a id="L717" name="L717"></a> 717                 toWrite = X9.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L718" name="L718"></a> 718                 <strong class="reserved">break</strong>;
<a id="L719" name="L719"></a> 719 
<a id="L720" name="L720"></a> 720             <strong class="reserved">case</strong> 0x0A :    <em class="comment">// '\n'</em>
<a id="L721" name="L721"></a> 721                 toWrite = XA.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L722" name="L722"></a> 722                 <strong class="reserved">break</strong>;
<a id="L723" name="L723"></a> 723 
<a id="L724" name="L724"></a> 724             <strong class="reserved">case</strong> 0x0D :    <em class="comment">// '\r'</em>
<a id="L725" name="L725"></a> 725                 toWrite = XD.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L726" name="L726"></a> 726                 <strong class="reserved">break</strong>;
<a id="L727" name="L727"></a> 727 
<a id="L728" name="L728"></a> 728             <strong class="reserved">default</strong> :
<a id="L729" name="L729"></a> 729                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; 0x80) <em class="brace">{</em>
<a id="L730" name="L730"></a> 730                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L731" name="L731"></a> 731                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L732" name="L732"></a> 732                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../S/5619.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">writeCharToUtf8</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L733" name="L733"></a> 733                 <em class="brace">}</em>
<a id="L734" name="L734"></a> 734                 <strong class="reserved">continue</strong>;
<a id="L735" name="L735"></a> 735             <em class="brace">}</em>
<a id="L736" name="L736"></a> 736             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(toWrite);
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738 
<a id="L739" name="L739"></a> 739         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('\"');
<a id="L740" name="L740"></a> 740     <em class="brace">}</em>
<a id="L741" name="L741"></a> 741 
<div class="comment">
      Outputs a PI to the internal Writer.
      @param currentPI
      @param writer where to write the things
      @throws IOException</div>
<a id="L749" name="L749"></a> 749     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/24057.html" title="Multiple referred from 4 places.">outputPItoWriter</a>(
<a id="L750" name="L750"></a> 750         <a href="../D/6899.html" title="Multiple defined in 3 places.">ProcessingInstruction</a> currentPI, <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>
<a id="L751" name="L751"></a> 751     ) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L752" name="L752"></a> 752         <strong class="reserved">if</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> == NODE_AFTER_DOCUMENT_ELEMENT) <em class="brace">{</em>
<a id="L753" name="L753"></a> 753             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('\n');
<a id="L754" name="L754"></a> 754         <em class="brace">}</em>
<a id="L755" name="L755"></a> 755         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(BEGIN_PI.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L756" name="L756"></a> 756 
<a id="L757" name="L757"></a> 757         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> = currentPI.<a href="../D/22997.html" title="Multiple defined in 36 places.">getTarget</a>();
<a id="L758" name="L758"></a> 758         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L759" name="L759"></a> 759 
<a id="L760" name="L760"></a> 760         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L761" name="L761"></a> 761             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L762" name="L762"></a> 762             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 0x0D) <em class="brace">{</em>
<a id="L763" name="L763"></a> 763                 <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(XD.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L764" name="L764"></a> 764             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L765" name="L765"></a> 765                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; 0x80) <em class="brace">{</em>
<a id="L766" name="L766"></a> 766                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L767" name="L767"></a> 767                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L768" name="L768"></a> 768                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../S/5619.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">writeCharToUtf8</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L769" name="L769"></a> 769                 <em class="brace">}</em>
<a id="L770" name="L770"></a> 770             <em class="brace">}</em>
<a id="L771" name="L771"></a> 771         <em class="brace">}</em>
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = currentPI.<a href="../D/18190.html" title="Multiple defined in 47 places.">getData</a>();
<a id="L774" name="L774"></a> 774 
<a id="L775" name="L775"></a> 775         <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L776" name="L776"></a> 776 
<a id="L777" name="L777"></a> 777         <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0) <em class="brace">{</em>
<a id="L778" name="L778"></a> 778             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(' ');
<a id="L779" name="L779"></a> 779 
<a id="L780" name="L780"></a> 780             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781                 <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L782" name="L782"></a> 782                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 0x0D) <em class="brace">{</em>
<a id="L783" name="L783"></a> 783                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(XD.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L784" name="L784"></a> 784                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L785" name="L785"></a> 785                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../S/5619.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">writeCharToUtf8</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L786" name="L786"></a> 786                 <em class="brace">}</em>
<a id="L787" name="L787"></a> 787             <em class="brace">}</em>
<a id="L788" name="L788"></a> 788         <em class="brace">}</em>
<a id="L789" name="L789"></a> 789 
<a id="L790" name="L790"></a> 790         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(END_PI.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L791" name="L791"></a> 791         <strong class="reserved">if</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> == NODE_BEFORE_DOCUMENT_ELEMENT) <em class="brace">{</em>
<a id="L792" name="L792"></a> 792             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('\n');
<a id="L793" name="L793"></a> 793         <em class="brace">}</em>
<a id="L794" name="L794"></a> 794     <em class="brace">}</em>
<a id="L795" name="L795"></a> 795 
<div class="comment">
      Method outputCommentToWriter
      @param currentComment
      @param writer writer where to write the things
      @throws IOException</div>
<a id="L803" name="L803"></a> 803     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/24047.html" title="Multiple referred from 4 places.">outputCommentToWriter</a>(
<a id="L804" name="L804"></a> 804         <a href="../D/1672.html" title="Multiple defined in 3 places.">Comment</a> currentComment, <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>, <strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>
<a id="L805" name="L805"></a> 805     ) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L806" name="L806"></a> 806         <strong class="reserved">if</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> == NODE_AFTER_DOCUMENT_ELEMENT) <em class="brace">{</em>
<a id="L807" name="L807"></a> 807             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('\n');
<a id="L808" name="L808"></a> 808         <em class="brace">}</em>
<a id="L809" name="L809"></a> 809         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(BEGIN_COMM.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L810" name="L810"></a> 810 
<a id="L811" name="L811"></a> 811         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> = currentComment.<a href="../D/18190.html" title="Multiple defined in 47 places.">getData</a>();
<a id="L812" name="L812"></a> 812         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L813" name="L813"></a> 813 
<a id="L814" name="L814"></a> 814         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L815" name="L815"></a> 815             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L816" name="L816"></a> 816             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 0x0D) <em class="brace">{</em>
<a id="L817" name="L817"></a> 817                 <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(XD.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L818" name="L818"></a> 818             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L819" name="L819"></a> 819                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; 0x80) <em class="brace">{</em>
<a id="L820" name="L820"></a> 820                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L821" name="L821"></a> 821                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L822" name="L822"></a> 822                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../S/5619.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">writeCharToUtf8</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L823" name="L823"></a> 823                 <em class="brace">}</em>
<a id="L824" name="L824"></a> 824             <em class="brace">}</em>
<a id="L825" name="L825"></a> 825         <em class="brace">}</em>
<a id="L826" name="L826"></a> 826 
<a id="L827" name="L827"></a> 827         <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(END_COMM.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L828" name="L828"></a> 828         <strong class="reserved">if</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> == NODE_BEFORE_DOCUMENT_ELEMENT) <em class="brace">{</em>
<a id="L829" name="L829"></a> 829             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>('\n');
<a id="L830" name="L830"></a> 830         <em class="brace">}</em>
<a id="L831" name="L831"></a> 831     <em class="brace">}</em>
<a id="L832" name="L832"></a> 832 
<div class="comment">
      Outputs a Text of CDATA section to the internal Writer.
      @param text
      @param writer writer where to write the things
      @throws IOException</div>
<a id="L840" name="L840"></a> 840     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/24061.html" title="Multiple referred from 5 places.">outputTextToWriter</a>(
<a id="L841" name="L841"></a> 841         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <strong class="reserved">final</strong> <a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>
<a id="L842" name="L842"></a> 842     ) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L843" name="L843"></a> 843         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L844" name="L844"></a> 844         <strong class="reserved">byte</strong>[] toWrite;
<a id="L845" name="L845"></a> 845         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L846" name="L846"></a> 846             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L847" name="L847"></a> 847 
<a id="L848" name="L848"></a> 848             <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L849" name="L849"></a> 849 
<a id="L850" name="L850"></a> 850             <strong class="reserved">case</strong> '&amp;' :
<a id="L851" name="L851"></a> 851                 toWrite = AMP.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L852" name="L852"></a> 852                 <strong class="reserved">break</strong>;
<a id="L853" name="L853"></a> 853 
<a id="L854" name="L854"></a> 854             <strong class="reserved">case</strong> '&lt;' :
<a id="L855" name="L855"></a> 855                 toWrite = <a href="../D/4946.html" title="Multiple defined in 3 places.">LT</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L856" name="L856"></a> 856                 <strong class="reserved">break</strong>;
<a id="L857" name="L857"></a> 857 
<a id="L858" name="L858"></a> 858             <strong class="reserved">case</strong> '&gt;' :
<a id="L859" name="L859"></a> 859                 toWrite = <a href="../D/3501.html" title="Multiple defined in 3 places.">GT</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L860" name="L860"></a> 860                 <strong class="reserved">break</strong>;
<a id="L861" name="L861"></a> 861 
<a id="L862" name="L862"></a> 862             <strong class="reserved">case</strong> 0xD :
<a id="L863" name="L863"></a> 863                 toWrite = XD.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L864" name="L864"></a> 864                 <strong class="reserved">break</strong>;
<a id="L865" name="L865"></a> 865 
<a id="L866" name="L866"></a> 866             <strong class="reserved">default</strong> :
<a id="L867" name="L867"></a> 867                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; 0x80) <em class="brace">{</em>
<a id="L868" name="L868"></a> 868                     <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L869" name="L869"></a> 869                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L870" name="L870"></a> 870                     <a href="../S/5619.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">UtfHelpper</a>.<a href="../S/5619.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/security/c14n/implementations/UtfHelpper.java.">writeCharToUtf8</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>);
<a id="L871" name="L871"></a> 871                 <em class="brace">}</em>
<a id="L872" name="L872"></a> 872                 <strong class="reserved">continue</strong>;
<a id="L873" name="L873"></a> 873             <em class="brace">}</em>
<a id="L874" name="L874"></a> 874             <a href="../S/1437.html#L100" title="Defined at 100 in src/java/io/Console.java.">writer</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(toWrite);
<a id="L875" name="L875"></a> 875         <em class="brace">}</em>
<a id="L876" name="L876"></a> 876     <em class="brace">}</em>
<a id="L877" name="L877"></a> 877 
<a id="L878" name="L878"></a> 878     <em class="comment">// The null xmlns definition.</em>
<a id="L879" name="L879"></a> 879     <strong class="reserved">protected</strong> <a href="../S/54.html#L186" title="Defined at 186 in src/org/w3c/dom/Attr.java.">Attr</a> <a href="../R/18031.html" title="Multiple referred from 4 places.">getNullNode</a>(<a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> <a href="../D/28637.html" title="Multiple defined in 2 places.">ownerDocument</a>) <em class="brace">{</em>
<a id="L880" name="L880"></a> 880         <strong class="reserved">if</strong> (nullNode == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L881" name="L881"></a> 881             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L882" name="L882"></a> 882                 nullNode = <a href="../D/28637.html" title="Multiple defined in 2 places.">ownerDocument</a>.<a href="../D/13620.html" title="Multiple defined in 8 places.">createAttributeNS</a>(
<a id="L883" name="L883"></a> 883                                     <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.NamespaceSpecNS, XMLNS);
<a id="L884" name="L884"></a> 884                 nullNode.<a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>("");
<a id="L885" name="L885"></a> 885             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L886" name="L886"></a> 886                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>("Unable to create nullNode: " + e);
<a id="L887" name="L887"></a> 887             <em class="brace">}</em>
<a id="L888" name="L888"></a> 888         <em class="brace">}</em>
<a id="L889" name="L889"></a> 889         <strong class="reserved">return</strong> nullNode;
<a id="L890" name="L890"></a> 890     <em class="brace">}</em>
<a id="L891" name="L891"></a> 891 
<a id="L892" name="L892"></a> 892 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L119">[^]</a><a href="#L879">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
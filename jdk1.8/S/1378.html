<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/io/ObjectInputStream.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L361">[^]</a><a href="#L3522">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L361" title="Defined at 361.">readObject</a></li>
<li><a href="#L406" title="Defined at 406.">readObjectOverride</a></li>
<li><a href="#L457" title="Defined at 457.">readUnshared</a></li>
<li><a href="#L491" title="Defined at 491.">defaultReadObject</a></li>
<li><a href="#L530" title="Defined at 530.">readFields</a></li>
<li><a href="#L571" title="Defined at 571.">registerValidation</a></li>
<li><a href="#L621" title="Defined at 621.">resolveClass</a></li>
<li><a href="#L688" title="Defined at 688.">resolveProxyClass</a></li>
<li><a href="#L748" title="Defined at 748.">resolveObject</a></li>
<li><a href="#L773" title="Defined at 773.">enableResolveObject</a></li>
<li><a href="#L799" title="Defined at 799.">readStreamHeader</a></li>
<li><a href="#L827" title="Defined at 827.">readClassDescriptor</a></li>
<li><a href="#L841" title="Defined at 841.">read</a></li>
<li><a href="#L858" title="Defined at 858.">read</a></li>
<li><a href="#L876" title="Defined at 876.">available</a></li>
<li><a href="#L886" title="Defined at 886.">close</a></li>
<li><a href="#L905" title="Defined at 905.">readBoolean</a></li>
<li><a href="#L916" title="Defined at 916.">readByte</a></li>
<li><a href="#L927" title="Defined at 927.">readUnsignedByte</a></li>
<li><a href="#L938" title="Defined at 938.">readChar</a></li>
<li><a href="#L949" title="Defined at 949.">readShort</a></li>
<li><a href="#L960" title="Defined at 960.">readUnsignedShort</a></li>
<li><a href="#L971" title="Defined at 971.">readInt</a></li>
<li><a href="#L982" title="Defined at 982.">readLong</a></li>
<li><a href="#L993" title="Defined at 993.">readFloat</a></li>
<li><a href="#L1004" title="Defined at 1004.">readDouble</a></li>
<li><a href="#L1015" title="Defined at 1015.">readFully</a></li>
<li><a href="#L1028" title="Defined at 1028.">readFully</a></li>
<li><a href="#L1043" title="Defined at 1043.">skipBytes</a></li>
<li><a href="#L1057" title="Defined at 1057.">readLine</a></li>
<li><a href="#L1072" title="Defined at 1072.">readUTF</a></li>
<li><a href="#L1086" title="Defined at 1086.">getObjectStreamClass</a></li>
<li><a href="#L1099" title="Defined at 1099.">defaulted</a></li>
<li><a href="#L1113" title="Defined at 1113.">get</a></li>
<li><a href="#L1128" title="Defined at 1128.">get</a></li>
<li><a href="#L1142" title="Defined at 1142.">get</a></li>
<li><a href="#L1156" title="Defined at 1156.">get</a></li>
<li><a href="#L1170" title="Defined at 1170.">get</a></li>
<li><a href="#L1184" title="Defined at 1184.">get</a></li>
<li><a href="#L1198" title="Defined at 1198.">get</a></li>
<li><a href="#L1212" title="Defined at 1212.">get</a></li>
<li><a href="#L1226" title="Defined at 1226.">get</a></li>
<li><a href="#L1235" title="Defined at 1235.">verifySubclass</a></li>
<li><a href="#L1262" title="Defined at 1262.">auditSubclass</a></li>
<li><a href="#L1292" title="Defined at 1292.">clear</a></li>
<li><a href="#L1300" title="Defined at 1300.">readObject0</a></li>
<li><a href="#L1395" title="Defined at 1395.">checkResolve</a></li>
<li><a href="#L1410" title="Defined at 1410.">readTypeString</a></li>
<li><a href="#L1437" title="Defined at 1437.">readNull</a></li>
<li><a href="#L1449" title="Defined at 1449.">readHandle</a></li>
<li><a href="#L1480" title="Defined at 1480.">readClass</a></li>
<li><a href="#L1503" title="Defined at 1503.">readClassDesc</a></li>
<li><a href="#L1526" title="Defined at 1526.">isCustomSubclass</a></li>
<li><a href="#L1538" title="Defined at 1538.">readProxyDesc</a></li>
<li><a href="#L1589" title="Defined at 1589.">readNonProxyDesc</a></li>
<li><a href="#L1634" title="Defined at 1634.">readString</a></li>
<li><a href="#L1659" title="Defined at 1659.">readArray</a></li>
<li><a href="#L1721" title="Defined at 1721.">readEnum</a></li>
<li><a href="#L1767" title="Defined at 1767.">readOrdinaryObject</a></li>
<li><a href="#L1828" title="Defined at 1828.">readExternalData</a></li>
<li><a href="#L1882" title="Defined at 1882.">readSerialData</a></li>
<li><a href="#L1947" title="Defined at 1947.">skipCustomData</a></li>
<li><a href="#L1977" title="Defined at 1977.">defaultReadFields</a></li>
<li><a href="#L2016" title="Defined at 2016.">readFatalException</a></li>
<li><a href="#L2029" title="Defined at 2029.">handleReset</a></li>
<li><a href="#L2041" title="Defined at 2041.">bytesToFloats</a></li>
<li><a href="#L2049" title="Defined at 2049.">bytesToDoubles</a></li>
<li><a href="#L2064" title="Defined at 2064.">latestUserDefinedLoader</a></li>
<li><a href="#L2093" title="Defined at 2093.">getObjectStreamClass</a></li>
<li><a href="#L2097" title="Defined at 2097.">defaulted</a></li>
<li><a href="#L2101" title="Defined at 2101.">get</a></li>
<li><a href="#L2106" title="Defined at 2106.">get</a></li>
<li><a href="#L2111" title="Defined at 2111.">get</a></li>
<li><a href="#L2116" title="Defined at 2116.">get</a></li>
<li><a href="#L2121" title="Defined at 2121.">get</a></li>
<li><a href="#L2126" title="Defined at 2126.">get</a></li>
<li><a href="#L2131" title="Defined at 2131.">get</a></li>
<li><a href="#L2136" title="Defined at 2136.">get</a></li>
<li><a href="#L2141" title="Defined at 2141.">get</a></li>
<li><a href="#L2156" title="Defined at 2156.">readFields</a></li>
<li><a href="#L2179" title="Defined at 2179.">getFieldOffset</a></li>
<li><a href="#L2227" title="Defined at 2227.">register</a></li>
<li><a href="#L2254" title="Defined at 2254.">doCallbacks</a></li>
<li><a href="#L2276" title="Defined at 2276.">clear</a></li>
<li><a href="#L2302" title="Defined at 2302.">peek</a></li>
<li><a href="#L2306" title="Defined at 2306.">read</a></li>
<li><a href="#L2316" title="Defined at 2316.">read</a></li>
<li><a href="#L2330" title="Defined at 2330.">readFully</a></li>
<li><a href="#L2341" title="Defined at 2341.">skip</a></li>
<li><a href="#L2354" title="Defined at 2354.">available</a></li>
<li><a href="#L2358" title="Defined at 2358.">close</a></li>
<li><a href="#L2422" title="Defined at 2422.">setBlockDataMode</a></li>
<li><a href="#L2441" title="Defined at 2441.">getBlockDataMode</a></li>
<li><a href="#L2450" title="Defined at 2450.">skipBlockData</a></li>
<li><a href="#L2466" title="Defined at 2466.">readBlockHeader</a></li>
<li><a href="#L2538" title="Defined at 2538.">refill</a></li>
<li><a href="#L2576" title="Defined at 2576.">currentBlockRemaining</a></li>
<li><a href="#L2589" title="Defined at 2589.">peek</a></li>
<li><a href="#L2605" title="Defined at 2605.">peekByte</a></li>
<li><a href="#L2622" title="Defined at 2622.">read</a></li>
<li><a href="#L2633" title="Defined at 2633.">read</a></li>
<li><a href="#L2637" title="Defined at 2637.">skip</a></li>
<li><a href="#L2661" title="Defined at 2661.">available</a></li>
<li><a href="#L2691" title="Defined at 2691.">close</a></li>
<li><a href="#L2707" title="Defined at 2707.">read</a></li>
<li><a href="#L2740" title="Defined at 2740.">readFully</a></li>
<li><a href="#L2744" title="Defined at 2744.">readFully</a></li>
<li><a href="#L2748" title="Defined at 2748.">readFully</a></li>
<li><a href="#L2761" title="Defined at 2761.">skipBytes</a></li>
<li><a href="#L2765" title="Defined at 2765.">readBoolean</a></li>
<li><a href="#L2773" title="Defined at 2773.">readByte</a></li>
<li><a href="#L2781" title="Defined at 2781.">readUnsignedByte</a></li>
<li><a href="#L2789" title="Defined at 2789.">readChar</a></li>
<li><a href="#L2801" title="Defined at 2801.">readShort</a></li>
<li><a href="#L2813" title="Defined at 2813.">readUnsignedShort</a></li>
<li><a href="#L2825" title="Defined at 2825.">readInt</a></li>
<li><a href="#L2837" title="Defined at 2837.">readFloat</a></li>
<li><a href="#L2849" title="Defined at 2849.">readLong</a></li>
<li><a href="#L2861" title="Defined at 2861.">readDouble</a></li>
<li><a href="#L2873" title="Defined at 2873.">readUTF</a></li>
<li><a href="#L2877" title="Defined at 2877.">SuppressWarnings</a></li>
<li><a href="#L2878" title="Defined at 2878.">readLine</a></li>
<li><a href="#L2890" title="Defined at 2890.">readBooleans</a></li>
<li><a href="#L2911" title="Defined at 2911.">readChars</a></li>
<li><a href="#L2933" title="Defined at 2933.">readShorts</a></li>
<li><a href="#L2955" title="Defined at 2955.">readInts</a></li>
<li><a href="#L2977" title="Defined at 2977.">readFloats</a></li>
<li><a href="#L2997" title="Defined at 2997.">readLongs</a></li>
<li><a href="#L3019" title="Defined at 3019.">readDoubles</a></li>
<li><a href="#L3044" title="Defined at 3044.">readLongUTF</a></li>
<li><a href="#L3053" title="Defined at 3053.">readUTFBody</a></li>
<li><a href="#L3088" title="Defined at 3088.">readUTFSpan</a></li>
<li><a href="#L3165" title="Defined at 3165.">readUTFChar</a></li>
<li><a href="#L3280" title="Defined at 3280.">assign</a></li>
<li><a href="#L3295" title="Defined at 3295.">markDependency</a></li>
<li><a href="#L3345" title="Defined at 3345.">markException</a></li>
<li><a href="#L3375" title="Defined at 3375.">finish</a></li>
<li><a href="#L3413" title="Defined at 3413.">setObject</a></li>
<li><a href="#L3433" title="Defined at 3433.">lookupObject</a></li>
<li><a href="#L3444" title="Defined at 3444.">lookupException</a></li>
<li><a href="#L3453" title="Defined at 3453.">clear</a></li>
<li><a href="#L3464" title="Defined at 3464.">size</a></li>
<li><a href="#L3471" title="Defined at 3471.">grow</a></li>
<li><a href="#L3497" title="Defined at 3497.">add</a></li>
<li><a href="#L3506" title="Defined at 3506.">get</a></li>
<li><a href="#L3513" title="Defined at 3513.">size</a></li>
<li><a href="#L3522" title="Defined at 3522.">cloneArray</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1996, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.ObjectStreamClass.WeakClassKey;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.lang.ref.ReferenceQueue;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.lang.reflect.Array;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.lang.reflect.Modifier;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.lang.reflect.Proxy;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.security.AccessControlContext;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.security.PrivilegedAction;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.security.PrivilegedActionException;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.security.PrivilegedExceptionAction;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentHashMap;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentMap;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.util.concurrent.atomic.AtomicBoolean;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> static java.io.ObjectStreamClass.processQueue;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> sun.reflect.misc.ReflectUtil;
<a id="L45" name="L45"></a>  45 
<div class="comment">
  An ObjectInputStream deserializes primitive data and objects previously
  written using an ObjectOutputStream.
  <p>ObjectOutputStream and ObjectInputStream can provide an application with
  persistent storage for graphs of objects when used with a FileOutputStream
  and FileInputStream respectively.  ObjectInputStream is used to recover
  those objects previously serialized. Other uses include passing objects
  between hosts using a socket stream or for marshaling and unmarshaling
  arguments and parameters in a remote communication system.
  </p><p>ObjectInputStream ensures that the types of all objects in the graph
  created from the stream match the classes present in the Java Virtual
  Machine.  Classes are loaded as required using the standard mechanisms.
  </p><p>Only objects that support the java.io.Serializable or
  java.io.Externalizable interface can be read from streams.
  </p><p>The method <code>readObject</code> is used to read an object from the
  stream.  Java's safe casting should be used to get the desired type.  In
  Java, strings and arrays are objects and are treated as objects during
  serialization. When read they need to be cast to the expected type.
  </p><p>Primitive data types can be read from the stream using the appropriate
  method on DataInput.
  </p><p>The default deserialization mechanism for objects restores the contents
  of each field to the value and type it had when it was written.  Fields
  declared as transient or static are ignored by the deserialization process.
  References to other objects cause those objects to be read from the stream
  as necessary.  Graphs of objects are restored correctly using a reference
  sharing mechanism.  New objects are always allocated when deserializing,
  which prevents existing objects from being overwritten.
  </p><p>Reading an object is analogous to running the constructors of a new
  object.  Memory is allocated for the object and initialized to zero (NULL).
  No-arg constructors are invoked for the non-serializable classes and then
  the fields of the serializable classes are restored from the stream starting
  with the serializable class closest to java.lang.object and finishing with
  the object's most specific class.
  </p><p>For example to read from a stream as written by the example in
  ObjectOutputStream:
  <br>
  </p><pre>       FileInputStream fis = new FileInputStream("t.tmp");
       ObjectInputStream ois = new ObjectInputStream(fis);
       int i = ois.readInt();
       String today = (String) ois.readObject();
       Date date = (Date) ois.readObject();
       ois.close();
  </pre>
  <p>Classes control how they are serialized by implementing either the
  java.io.Serializable or java.io.Externalizable interfaces.
  </p><p>Implementing the Serializable interface allows object serialization to
  save and restore the entire state of the object and it allows classes to
  evolve between the time the stream is written and the time it is read.  It
  automatically traverses references between objects, saving and restoring
  entire graphs.
  </p><p>Serializable classes that require special handling during the
  serialization and deserialization process should implement the following
  methods:
  </p><pre>  private void writeObject(java.io.ObjectOutputStream stream)
      throws IOException;
  private void readObject(java.io.ObjectInputStream stream)
      throws IOException, ClassNotFoundException;
  private void readObjectNoData()
      throws ObjectStreamException;
  </pre>
  <p>The readObject method is responsible for reading and restoring the state
  of the object for its particular class using data written to the stream by
  the corresponding writeObject method.  The method does not need to concern
  itself with the state belonging to its superclasses or subclasses.  State is
  restored by reading data from the ObjectInputStream for the individual
  fields and making assignments to the appropriate fields of the object.
  Reading primitive data types is supported by DataInput.
  </p><p>Any attempt to read object data which exceeds the boundaries of the
  custom data written by the corresponding writeObject method will cause an
  OptionalDataException to be thrown with an eof field value of true.
  Non-object reads which exceed the end of the allotted data will reflect the
  end of data in the same way that they would indicate the end of the stream:
  bytewise reads will return -1 as the byte read or number of bytes read, and
  primitive reads will throw EOFExceptions.  If there is no corresponding
  writeObject method, then the end of default serialized data marks the end of
  the allotted data.
  </p><p>Primitive and object read calls issued from within a readExternal method
  behave in the same manner--if the stream is already positioned at the end of
  data written by the corresponding writeExternal method, object reads will
  throw OptionalDataExceptions with eof set to true, bytewise reads will
  return -1, and primitive reads will throw EOFExceptions.  Note that this
  behavior does not hold for streams written with the old
  <code>ObjectStreamConstants.PROTOCOL_VERSION_1</code> protocol, in which the
  end of data written by writeExternal methods is not demarcated, and hence
  cannot be detected.
  </p><p>The readObjectNoData method is responsible for initializing the state of
  the object for its particular class in the event that the serialization
  stream does not list the given class as a superclass of the object being
  deserialized.  This may occur in cases where the receiving party uses a
  different version of the deserialized instance's class than the sending
  party, and the receiver's version extends classes that are not extended by
  the sender's version.  This may also occur if the serialization stream has
  been tampered; hence, readObjectNoData is useful for initializing
  deserialized objects properly despite a "hostile" or incomplete source
  stream.
  </p><p>Serialization does not read or assign values to the fields of any object
  that does not implement the java.io.Serializable interface.  Subclasses of
  Objects that are not serializable can be serializable. In this case the
  non-serializable class must have a no-arg constructor to allow its fields to
  be initialized.  In this case it is the responsibility of the subclass to
  save and restore the state of the non-serializable class. It is frequently
  the case that the fields of that class are accessible (public, package, or
  protected) or that there are get and set methods that can be used to restore
  the state.
  </p><p>Any exception that occurs while deserializing an object will be caught by
  the ObjectInputStream and abort the reading process.
  </p><p>Implementing the Externalizable interface allows the object to assume
  complete control over the contents and format of the object's serialized
  form.  The methods of the Externalizable interface, writeExternal and
  readExternal, are called to save and restore the objects state.  When
  implemented by a class they can write and read their own state using all of
  the methods of ObjectOutput and ObjectInput.  It is the responsibility of
  the objects to handle any versioning that occurs.
  </p><p>Enum constants are deserialized differently than ordinary serializable or
  externalizable objects.  The serialized form of an enum constant consists
  solely of its name; field values of the constant are not transmitted.  To
  deserialize an enum constant, ObjectInputStream reads the constant name from
  the stream; the deserialized constant is then obtained by calling the static
  method <code>Enum.valueOf(Class, String)</code> with the enum constant's
  base type and the received constant name as arguments.  Like other
  serializable or externalizable objects, enum constants can function as the
  targets of back references appearing subsequently in the serialization
  stream.  The process by which enum constants are deserialized cannot be
  customized: any class-specific readObject, readObjectNoData, and readResolve
  methods defined by enum types are ignored during deserialization.
  Similarly, any serialPersistentFields or serialVersionUID field declarations
  are also ignored--all enum types have a fixed serialVersionUID of 0L.
  @author      Mike Warres
  @author      Roger Riggs
  @see java.io.DataInput
  @see java.io.ObjectOutputStream
  @see java.io.Serializable
  @see <a href="../../../platform/serialization/spec/input.html"> Object Serialization Specification, Section 3, Object Input Classes</a>
  @since   JDK1.1</p></div>
<a id="L206" name="L206"></a> 206 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/5735.html" title="Multiple referred from 657 places.">ObjectInputStream</a>
<a id="L207" name="L207"></a> 207     <strong class="reserved">extends</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <strong class="reserved">implements</strong> <a href="../S/1375.html#L39" title="Defined at 39 in src/java/io/ObjectInput.java.">ObjectInput</a>, <a href="../S/1455.html#L34" title="Defined at 34 in src/java/io/ObjectStreamConstants.java.">ObjectStreamConstants</a>
<a id="L208" name="L208"></a> 208 <em class="brace">{</em>
<div class="comment">
     /** handle value representing null */</div>
<a id="L210" name="L210"></a> 210     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NULL_HANDLE = -1;
<a id="L211" name="L211"></a> 211 
<div class="comment">
     /** marker for unshared objects in internal handle table */</div>
<a id="L213" name="L213"></a> 213     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> unsharedMarker = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L214" name="L214"></a> 214 
<div class="comment">
     /** table mapping primitive type names to corresponding class objects */</div>
<a id="L216" name="L216"></a> 216     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; primClasses
<a id="L217" name="L217"></a> 217         = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;&gt;(8, 1.0F);
<a id="L218" name="L218"></a> 218     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L219" name="L219"></a> 219         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("boolean", <strong class="reserved">boolean</strong>.<strong class="reserved">class</strong>);
<a id="L220" name="L220"></a> 220         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("byte", <strong class="reserved">byte</strong>.<strong class="reserved">class</strong>);
<a id="L221" name="L221"></a> 221         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("char", <strong class="reserved">char</strong>.<strong class="reserved">class</strong>);
<a id="L222" name="L222"></a> 222         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("short", <strong class="reserved">short</strong>.<strong class="reserved">class</strong>);
<a id="L223" name="L223"></a> 223         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("int", <strong class="reserved">int</strong>.<strong class="reserved">class</strong>);
<a id="L224" name="L224"></a> 224         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("long", <strong class="reserved">long</strong>.<strong class="reserved">class</strong>);
<a id="L225" name="L225"></a> 225         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("float", <strong class="reserved">float</strong>.<strong class="reserved">class</strong>);
<a id="L226" name="L226"></a> 226         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("double", <strong class="reserved">double</strong>.<strong class="reserved">class</strong>);
<a id="L227" name="L227"></a> 227         primClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("void", <strong class="reserved">void</strong>.<strong class="reserved">class</strong>);
<a id="L228" name="L228"></a> 228     <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<a id="L230" name="L230"></a> 230     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/1138.html" title="Multiple referred from 24 places.">Caches</a> <em class="brace">{</em>
<div class="comment">
         /** cache of subclass security audit results */</div>
<a id="L232" name="L232"></a> 232         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1110.html#L63" title="Defined at 63 in src/java/util/concurrent/ConcurrentMap.java.">ConcurrentMap</a>&lt;<a href="../D/9617.html" title="Multiple defined in 2 places.">WeakClassKey</a>,<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt; subclassAudits =
<a id="L233" name="L233"></a> 233             <strong class="reserved">new</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;&gt;();
<a id="L234" name="L234"></a> 234 
<div class="comment">
         /** queue for WeakReferences to audited subclasses */</div>
<a id="L236" name="L236"></a> 236         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; subclassAuditsQueue =
<a id="L237" name="L237"></a> 237             <strong class="reserved">new</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;&gt;();
<a id="L238" name="L238"></a> 238     <em class="brace">}</em>
<a id="L239" name="L239"></a> 239 
<div class="comment">
     /** filter stream for handling block data conversion */</div>
<a id="L241" name="L241"></a> 241     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1378.html#L2371" title="Defined at 2371 in src/java/io/ObjectInputStream.java.">BlockDataInputStream</a> bin;
<div class="comment">
     /** validation callback list */</div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1378.html#L2196" title="Defined at 2196 in src/java/io/ObjectInputStream.java.">ValidationList</a> vlist;
<div class="comment">
     /** recursion depth */</div>
<a id="L245" name="L245"></a> 245     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>;
<div class="comment">
     /** whether stream is closed */</div>
<a id="L247" name="L247"></a> 247     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> closed;
<a id="L248" name="L248"></a> 248 
<div class="comment">
     /** wire handle -&gt; obj/exception map */</div>
<a id="L250" name="L250"></a> 250     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/3726.html" title="Multiple defined in 2 places.">HandleTable</a> handles;
<div class="comment">
     /** scratch field for passing handle values up/down call stack */</div>
<a id="L252" name="L252"></a> 252     <strong class="reserved">private</strong> <strong class="reserved">int</strong> passHandle = NULL_HANDLE;
<div class="comment">
     /** flag set when at end of field value block with no TC_ENDBLOCKDATA */</div>
<a id="L254" name="L254"></a> 254     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> defaultDataEnd = <strong class="reserved">false</strong>;
<a id="L255" name="L255"></a> 255 
<div class="comment">
     /** buffer for reading primitive field values */</div>
<a id="L257" name="L257"></a> 257     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] primVals;
<a id="L258" name="L258"></a> 258 
<div class="comment">
     /** if true, invoke readObjectOverride() instead of readObject() */</div>
<a id="L260" name="L260"></a> 260     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> enableOverride;
<div class="comment">
     /** if true, invoke resolveObject() */</div>
<a id="L262" name="L262"></a> 262     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> enableResolve;
<a id="L263" name="L263"></a> 263 
<div class="comment">
      Context during upcalls to class-defined readObject methods; holds
      object currently being deserialized and descriptor for current class.
      Null when not during readObject upcall.</div>
<a id="L269" name="L269"></a> 269     <strong class="reserved">private</strong> <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> curContext;
<a id="L270" name="L270"></a> 270 
<div class="comment">
      Creates an ObjectInputStream that reads from the specified InputStream.
      A serialization stream header is read from the stream and verified.
      This constructor will block until the corresponding ObjectOutputStream
      has written and flushed the header.
      <p>If a security manager is installed, this constructor will check for
      the "enableSubclassImplementation" SerializablePermission when invoked
      directly or indirectly by the constructor of a subclass which overrides
      the ObjectInputStream.readFields or ObjectInputStream.readUnshared
      methods.
      @param   in input stream to read from
      @throws  StreamCorruptedException if the stream header is incorrect
      @throws  IOException if an I/O error occurs while reading stream header
      @throws  SecurityException if untrusted subclass illegally overrides
               security-sensitive methods
      @throws  NullPointerException if <code>in</code> is <code>null</code>
      @see     ObjectInputStream#ObjectInputStream()
      @see     ObjectInputStream#readFields()
      @see     ObjectOutputStream#ObjectOutputStream(OutputStream)</p></div>
<a id="L293" name="L293"></a> 293     <strong class="reserved">public</strong> ObjectInputStream(<a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L294" name="L294"></a> 294         <a href="../D/36405.html" title="Multiple defined in 2 places.">verifySubclass</a>();
<a id="L295" name="L295"></a> 295         bin = <strong class="reserved">new</strong> <a href="../S/1378.html#L2371" title="Defined at 2371 in src/java/io/ObjectInputStream.java.">BlockDataInputStream</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>);
<a id="L296" name="L296"></a> 296         handles = <strong class="reserved">new</strong> <a href="../D/3726.html" title="Multiple defined in 2 places.">HandleTable</a>(10);
<a id="L297" name="L297"></a> 297         vlist = <strong class="reserved">new</strong> <a href="../S/1378.html#L2196" title="Defined at 2196 in src/java/io/ObjectInputStream.java.">ValidationList</a>();
<a id="L298" name="L298"></a> 298         enableOverride = <strong class="reserved">false</strong>;
<a id="L299" name="L299"></a> 299         <a href="../D/30264.html" title="Multiple defined in 2 places.">readStreamHeader</a>();
<a id="L300" name="L300"></a> 300         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L301" name="L301"></a> 301     <em class="brace">}</em>
<a id="L302" name="L302"></a> 302 
<div class="comment">
      Provide a way for subclasses that are completely reimplementing
      ObjectInputStream to not have to allocate private data just used by this
      implementation of ObjectInputStream.
      <p>If there is a security manager installed, this method first calls the
      security manager's <code>checkPermission</code> method with the
      <code>SerializablePermission("enableSubclassImplementation")</code>
      permission to ensure it's ok to enable subclassing.
      @throws  SecurityException if a security manager exists and its
               <code>checkPermission</code> method denies enabling
               subclassing.
      @throws  IOException if an I/O error occurs while creating this stream
      @see SecurityManager#checkPermission
      @see java.io.SerializablePermission</p></div>
<a id="L320" name="L320"></a> 320     <strong class="reserved">protected</strong> ObjectInputStream() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> <em class="brace">{</em>
<a id="L321" name="L321"></a> 321         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L322" name="L322"></a> 322         <strong class="reserved">if</strong> (sm != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L323" name="L323"></a> 323             sm.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SUBCLASS_IMPLEMENTATION_PERMISSION);
<a id="L324" name="L324"></a> 324         <em class="brace">}</em>
<a id="L325" name="L325"></a> 325         bin = <strong class="reserved">null</strong>;
<a id="L326" name="L326"></a> 326         handles = <strong class="reserved">null</strong>;
<a id="L327" name="L327"></a> 327         vlist = <strong class="reserved">null</strong>;
<a id="L328" name="L328"></a> 328         enableOverride = <strong class="reserved">true</strong>;
<a id="L329" name="L329"></a> 329     <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<div class="comment">
      Read an object from the ObjectInputStream.  The class of the object, the
      signature of the class, and the values of the non-transient and
      non-static fields of the class and all of its supertypes are read.
      Default deserializing for a class can be overriden using the writeObject
      and readObject methods.  Objects referenced by this object are read
      transitively so that a complete equivalent graph of objects is
      reconstructed by readObject.
      <p>The root object is completely restored when all of its fields and the
      objects it references are completely restored.  At this point the object
      validation callbacks are executed in order based on their registered
      priorities. The callbacks are registered by objects (in the readObject
      special methods) as they are individually restored.
      </p><p>Exceptions are thrown for problems with the InputStream and for
      classes that should not be deserialized.  All exceptions are fatal to
      the InputStream and leave it in an indeterminate state; it is up to the
      caller to ignore or recover the stream state.
      @throws  ClassNotFoundException Class of a serialized object cannot be
               found.
      @throws  InvalidClassException Something is wrong with a class used by
               serialization.
      @throws  StreamCorruptedException Control information in the
               stream is inconsistent.
      @throws  OptionalDataException Primitive data was found in the
               stream instead of objects.
      @throws  IOException Any of the usual Input/Output related exceptions.</p></div>
<a id="L361" name="L361"></a> 361     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>()
<a id="L362" name="L362"></a> 362         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L363" name="L363"></a> 363     <em class="brace">{</em>
<a id="L364" name="L364"></a> 364         <strong class="reserved">if</strong> (enableOverride) <em class="brace">{</em>
<a id="L365" name="L365"></a> 365             <strong class="reserved">return</strong> <a href="../D/30240.html" title="Multiple defined in 2 places.">readObjectOverride</a>();
<a id="L366" name="L366"></a> 366         <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<a id="L368" name="L368"></a> 368         <em class="comment">// if nested read, passHandle contains handle of enclosing object</em>
<a id="L369" name="L369"></a> 369         <strong class="reserved">int</strong> outerHandle = passHandle;
<a id="L370" name="L370"></a> 370         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L371" name="L371"></a> 371             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj = <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<strong class="reserved">false</strong>);
<a id="L372" name="L372"></a> 372             handles.<a href="../S/1378.html#L3295" title="Defined at 3295 in src/java/io/ObjectInputStream.java.">markDependency</a>(outerHandle, passHandle);
<a id="L373" name="L373"></a> 373             <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> = handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle);
<a id="L374" name="L374"></a> 374             <strong class="reserved">if</strong> (<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L375" name="L375"></a> 375                 <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L376" name="L376"></a> 376             <em class="brace">}</em>
<a id="L377" name="L377"></a> 377             <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L378" name="L378"></a> 378                 vlist.<a href="../S/1378.html#L2254" title="Defined at 2254 in src/java/io/ObjectInputStream.java.">doCallbacks</a>();
<a id="L379" name="L379"></a> 379             <em class="brace">}</em>
<a id="L380" name="L380"></a> 380             <strong class="reserved">return</strong> obj;
<a id="L381" name="L381"></a> 381         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L382" name="L382"></a> 382             passHandle = outerHandle;
<a id="L383" name="L383"></a> 383             <strong class="reserved">if</strong> (closed &amp;&amp; <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L384" name="L384"></a> 384                 <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L385" name="L385"></a> 385             <em class="brace">}</em>
<a id="L386" name="L386"></a> 386         <em class="brace">}</em>
<a id="L387" name="L387"></a> 387     <em class="brace">}</em>
<a id="L388" name="L388"></a> 388 
<div class="comment">
      This method is called by trusted subclasses of ObjectOutputStream that
      constructed ObjectOutputStream using the protected no-arg constructor.
      The subclass is expected to provide an override method with the modifier
      "final".
      @return  the Object read from the stream.
      @throws  ClassNotFoundException Class definition of a serialized object
               cannot be found.
      @throws  OptionalDataException Primitive data was found in the stream
               instead of objects.
      @throws  IOException if I/O errors occurred while reading from the
               underlying stream
      @see #ObjectInputStream()
      @see #readObject()
      @since 1.2</div>
<a id="L406" name="L406"></a> 406     <strong class="reserved">protected</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1378.html#L365" title="Referred from 365 in src/java/io/ObjectInputStream.java.">readObjectOverride</a>()
<a id="L407" name="L407"></a> 407         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L408" name="L408"></a> 408     <em class="brace">{</em>
<a id="L409" name="L409"></a> 409         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L410" name="L410"></a> 410     <em class="brace">}</em>
<a id="L411" name="L411"></a> 411 
<div class="comment">
      Reads an "unshared" object from the ObjectInputStream.  This method is
      identical to readObject, except that it prevents subsequent calls to
      readObject and readUnshared from returning additional references to the
      deserialized instance obtained via this call.  Specifically:
      <ul><li>If readUnshared is called to deserialize a back-reference (the
            stream representation of an object which has been written
            previously to the stream), an ObjectStreamException will be
            thrown.
        </li><li>If readUnshared returns successfully, then any subsequent attempts
            to deserialize back-references to the stream handle deserialized
            by readUnshared will cause an ObjectStreamException to be thrown.
      </li></ul>
      Deserializing an object via readUnshared invalidates the stream handle
      associated with the returned object.  Note that this in itself does not
      always guarantee that the reference returned by readUnshared is unique;
      the deserialized object may define a readResolve method which returns an
      object visible to other parties, or readUnshared may return a Class
      object or enum constant obtainable elsewhere in the stream or through
      external means. If the deserialized object defines a readResolve method
      and the invocation of that method returns an array, then readUnshared
      returns a shallow clone of that array; this guarantees that the returned
      array object is unique and cannot be obtained a second time from an
      invocation of readObject or readUnshared on the ObjectInputStream,
      even if the underlying data stream has been manipulated.
      <p>ObjectInputStream subclasses which override this method can only be
      constructed in security contexts possessing the
      "enableSubclassImplementation" SerializablePermission; any attempt to
      instantiate such a subclass without this permission will cause a
      SecurityException to be thrown.
      @return  reference to deserialized object
      @throws  ClassNotFoundException if class of an object to deserialize
               cannot be found
      @throws  StreamCorruptedException if control information in the stream
               is inconsistent
      @throws  ObjectStreamException if object to deserialize has already
               appeared in stream
      @throws  OptionalDataException if primitive data is next in stream
      @throws  IOException if an I/O error occurs during deserialization
      @since   1.4</p></div>
<a id="L457" name="L457"></a> 457     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> readUnshared() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L458" name="L458"></a> 458         <em class="comment">// if nested read, passHandle contains handle of enclosing object</em>
<a id="L459" name="L459"></a> 459         <strong class="reserved">int</strong> outerHandle = passHandle;
<a id="L460" name="L460"></a> 460         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L461" name="L461"></a> 461             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj = <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<strong class="reserved">true</strong>);
<a id="L462" name="L462"></a> 462             handles.<a href="../S/1378.html#L3295" title="Defined at 3295 in src/java/io/ObjectInputStream.java.">markDependency</a>(outerHandle, passHandle);
<a id="L463" name="L463"></a> 463             <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> = handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle);
<a id="L464" name="L464"></a> 464             <strong class="reserved">if</strong> (<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L465" name="L465"></a> 465                 <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L466" name="L466"></a> 466             <em class="brace">}</em>
<a id="L467" name="L467"></a> 467             <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                 vlist.<a href="../S/1378.html#L2254" title="Defined at 2254 in src/java/io/ObjectInputStream.java.">doCallbacks</a>();
<a id="L469" name="L469"></a> 469             <em class="brace">}</em>
<a id="L470" name="L470"></a> 470             <strong class="reserved">return</strong> obj;
<a id="L471" name="L471"></a> 471         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L472" name="L472"></a> 472             passHandle = outerHandle;
<a id="L473" name="L473"></a> 473             <strong class="reserved">if</strong> (closed &amp;&amp; <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L474" name="L474"></a> 474                 <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L475" name="L475"></a> 475             <em class="brace">}</em>
<a id="L476" name="L476"></a> 476         <em class="brace">}</em>
<a id="L477" name="L477"></a> 477     <em class="brace">}</em>
<a id="L478" name="L478"></a> 478 
<div class="comment">
      Read the non-static and non-transient fields of the current class from
      this stream.  This may only be called from the readObject method of the
      class being deserialized. It will throw the NotActiveException if it is
      called otherwise.
      @throws  ClassNotFoundException if the class of a serialized object
               could not be found.
      @throws  IOException if an I/O error occurs.
      @throws  NotActiveException if the stream is not currently reading
               objects.</div>
<a id="L491" name="L491"></a> 491     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13159.html" title="Multiple referred from 181 places.">defaultReadObject</a>()
<a id="L492" name="L492"></a> 492         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L493" name="L493"></a> 493     <em class="brace">{</em>
<a id="L494" name="L494"></a> 494         <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> = curContext;
<a id="L495" name="L495"></a> 495         <strong class="reserved">if</strong> (<a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>("not in call to readObject");
<a id="L497" name="L497"></a> 497         <em class="brace">}</em>
<a id="L498" name="L498"></a> 498         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> curObj = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L54" title="Defined at 54 in src/java/io/SerialCallbackContext.java.">getObj</a>();
<a id="L499" name="L499"></a> 499         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> curDesc = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L59" title="Defined at 59 in src/java/io/SerialCallbackContext.java.">getDesc</a>();
<a id="L500" name="L500"></a> 500         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L501" name="L501"></a> 501         <a href="../S/1378.html#L1977" title="Defined at 1977 in src/java/io/ObjectInputStream.java.">defaultReadFields</a>(curObj, curDesc);
<a id="L502" name="L502"></a> 502         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L503" name="L503"></a> 503         <strong class="reserved">if</strong> (!curDesc.<a href="../S/1402.html#L894" title="Defined at 894 in src/java/io/ObjectStreamClass.java.">hasWriteObjectData</a>()) <em class="brace">{</em>
<div class="comment">
              Fix for 4360508: since stream does not contain terminating
              TC_ENDBLOCKDATA tag, set flag so that reading code elsewhere
              knows to simulate end-of-custom-data behavior.</div>
<a id="L509" name="L509"></a> 509             defaultDataEnd = <strong class="reserved">true</strong>;
<a id="L510" name="L510"></a> 510         <em class="brace">}</em>
<a id="L511" name="L511"></a> 511         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> = handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle);
<a id="L512" name="L512"></a> 512         <strong class="reserved">if</strong> (<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L513" name="L513"></a> 513             <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L514" name="L514"></a> 514         <em class="brace">}</em>
<a id="L515" name="L515"></a> 515     <em class="brace">}</em>
<a id="L516" name="L516"></a> 516 
<div class="comment">
      Reads the persistent fields from the stream and makes them available by
      name.
      @return  the <code>GetField</code> object representing the persistent
               fields of the object being deserialized
      @throws  ClassNotFoundException if the class of a serialized object
               could not be found.
      @throws  IOException if an I/O error occurs.
      @throws  NotActiveException if the stream is not currently reading
               objects.
      @since 1.2</div>
<a id="L530" name="L530"></a> 530     <strong class="reserved">public</strong> <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<a href="../S/1378.html#L1079" title="Defined at 1079 in src/java/io/ObjectInputStream.java.">GetField</a> <a href="../R/25472.html" title="Multiple referred from 62 places.">readFields</a>()
<a id="L531" name="L531"></a> 531         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L532" name="L532"></a> 532     <em class="brace">{</em>
<a id="L533" name="L533"></a> 533         <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> = curContext;
<a id="L534" name="L534"></a> 534         <strong class="reserved">if</strong> (<a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L535" name="L535"></a> 535             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>("not in call to readObject");
<a id="L536" name="L536"></a> 536         <em class="brace">}</em>
<a id="L537" name="L537"></a> 537         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> curObj = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L54" title="Defined at 54 in src/java/io/SerialCallbackContext.java.">getObj</a>();
<a id="L538" name="L538"></a> 538         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> curDesc = <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>.<a href="../S/1441.html#L59" title="Defined at 59 in src/java/io/SerialCallbackContext.java.">getDesc</a>();
<a id="L539" name="L539"></a> 539         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L540" name="L540"></a> 540         <a href="../S/1378.html#L2071" title="Defined at 2071 in src/java/io/ObjectInputStream.java.">GetFieldImpl</a> <a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a> = <strong class="reserved">new</strong> <a href="../S/1378.html#L2071" title="Defined at 2071 in src/java/io/ObjectInputStream.java.">GetFieldImpl</a>(curDesc);
<a id="L541" name="L541"></a> 541         <a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>.<a href="../D/30181.html" title="Multiple defined in 6 places.">readFields</a>();
<a id="L542" name="L542"></a> 542         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L543" name="L543"></a> 543         <strong class="reserved">if</strong> (!curDesc.<a href="../S/1402.html#L894" title="Defined at 894 in src/java/io/ObjectStreamClass.java.">hasWriteObjectData</a>()) <em class="brace">{</em>
<div class="comment">
              Fix for 4360508: since stream does not contain terminating
              TC_ENDBLOCKDATA tag, set flag so that reading code elsewhere
              knows to simulate end-of-custom-data behavior.</div>
<a id="L549" name="L549"></a> 549             defaultDataEnd = <strong class="reserved">true</strong>;
<a id="L550" name="L550"></a> 550         <em class="brace">}</em>
<a id="L551" name="L551"></a> 551 
<a id="L552" name="L552"></a> 552         <strong class="reserved">return</strong> <a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>;
<a id="L553" name="L553"></a> 553     <em class="brace">}</em>
<a id="L554" name="L554"></a> 554 
<div class="comment">
      Register an object to be validated before the graph is returned.  While
      similar to resolveObject these validations are called after the entire
      graph has been reconstituted.  Typically, a readObject method will
      register the object with the stream so that when all of the objects are
      restored a final set of validations can be performed.
      @param   obj the object to receive the validation callback.
      @param   prio controls the order of callbacks;zero is a good default.
               Use higher numbers to be called back earlier, lower numbers for
               later callbacks. Within a priority, callbacks are processed in
               no particular order.
      @throws  NotActiveException The stream is not currently reading objects
               so it is invalid to register a callback.
      @throws  InvalidObjectException The validation object is null.</div>
<a id="L571" name="L571"></a> 571     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25822.html" title="Multiple referred from 2 places.">registerValidation</a>(<a href="../S/1373.html#L38" title="Defined at 38 in src/java/io/ObjectInputValidation.java.">ObjectInputValidation</a> obj, <strong class="reserved">int</strong> prio)
<a id="L572" name="L572"></a> 572         <strong class="reserved">throws</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>, <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>
<a id="L573" name="L573"></a> 573     <em class="brace">{</em>
<a id="L574" name="L574"></a> 574         <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L575" name="L575"></a> 575             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1377.html#L34" title="Defined at 34 in src/java/io/NotActiveException.java.">NotActiveException</a>("stream inactive");
<a id="L576" name="L576"></a> 576         <em class="brace">}</em>
<a id="L577" name="L577"></a> 577         vlist.<a href="../D/30517.html" title="Multiple defined in 40 places.">register</a>(obj, prio);
<a id="L578" name="L578"></a> 578     <em class="brace">}</em>
<a id="L579" name="L579"></a> 579 
<div class="comment">
      Load the local class equivalent of the specified stream class
      description.  Subclasses may implement this method to allow classes to
      be fetched from an alternate source.
      <p>The corresponding method in <code>ObjectOutputStream</code> is
      <code>annotateClass</code>.  This method will be invoked only once for
      each unique class in the stream.  This method can be implemented by
      subclasses to use an alternate loading mechanism but must return a
      <code>Class</code> object. Once returned, if the class is not an array
      class, its serialVersionUID is compared to the serialVersionUID of the
      serialized class, and if there is a mismatch, the deserialization fails
      and an {@link InvalidClassException} is thrown.
      </p><p>The default implementation of this method in
      <code>ObjectInputStream</code> returns the result of calling
      </p><pre>          Class.forName(desc.getName(), false, loader)
      </pre>
      where <code>loader</code> is determined as follows: if there is a
      method on the current thread's stack whose declaring class was
      defined by a user-defined class loader (and was not a generated to
      implement reflective invocations), then <code>loader</code> is class
      loader corresponding to the closest such method to the currently
      executing frame; otherwise, <code>loader</code> is
      <code>null</code>. If this call results in a
      <code>ClassNotFoundException</code> and the name of the passed
      <code>ObjectStreamClass</code> instance is the Java language keyword
      for a primitive type or void, then the <code>Class</code> object
      representing that primitive type or void will be returned
      (e.g., an <code>ObjectStreamClass</code> with the name
      <code>"int"</code> will be resolved to <code>Integer.TYPE</code>).
      Otherwise, the <code>ClassNotFoundException</code> will be thrown to
      the caller of this method.
      @param   desc an instance of class <code>ObjectStreamClass</code>
      @return  a <code>Class</code> object corresponding to <code>desc</code>
      @throws  IOException any of the usual Input/Output exceptions.
      @throws  ClassNotFoundException if class of a serialized object cannot
               be found.</div>
<a id="L621" name="L621"></a> 621     <strong class="reserved">protected</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/26324.html" title="Multiple referred from 6 places.">resolveClass</a>(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L622" name="L622"></a> 622         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L623" name="L623"></a> 623     <em class="brace">{</em>
<a id="L624" name="L624"></a> 624         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = desc.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L625" name="L625"></a> 625         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L626" name="L626"></a> 626             <strong class="reserved">return</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">false</strong>, <a href="../S/1378.html#L2064" title="Defined at 2064 in src/java/io/ObjectInputStream.java.">latestUserDefinedLoader</a>());
<a id="L627" name="L627"></a> 627         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L628" name="L628"></a> 628             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = primClasses.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L629" name="L629"></a> 629             <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L630" name="L630"></a> 630                 <strong class="reserved">return</strong> cl;
<a id="L631" name="L631"></a> 631             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L632" name="L632"></a> 632                 <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L633" name="L633"></a> 633             <em class="brace">}</em>
<a id="L634" name="L634"></a> 634         <em class="brace">}</em>
<a id="L635" name="L635"></a> 635     <em class="brace">}</em>
<a id="L636" name="L636"></a> 636 
<div class="comment">
      Returns a proxy class that implements the interfaces named in a proxy
      class descriptor; subclasses may implement this method to read custom
      data from the stream along with the descriptors for dynamic proxy
      classes, allowing them to use an alternate loading mechanism for the
      interfaces and the proxy class.
      <p>This method is called exactly once for each unique proxy class
      descriptor in the stream.
      </p><p>The corresponding method in <code>ObjectOutputStream</code> is
      <code>annotateProxyClass</code>.  For a given subclass of
      <code>ObjectInputStream</code> that overrides this method, the
      <code>annotateProxyClass</code> method in the corresponding subclass of
      <code>ObjectOutputStream</code> must write any data or objects read by
      this method.
      </p><p>The default implementation of this method in
      <code>ObjectInputStream</code> returns the result of calling
      <code>Proxy.getProxyClass</code> with the list of <code>Class</code>
      objects for the interfaces that are named in the <code>interfaces</code>
      parameter.  The <code>Class</code> object for each interface name
      <code>i</code> is the value returned by calling
      </p><pre>          Class.forName(i, false, loader)
      </pre>
      where <code>loader</code> is that of the first non-<code>null</code>
      class loader up the execution stack, or <code>null</code> if no
      non-<code>null</code> class loaders are on the stack (the same class
      loader choice used by the <code>resolveClass</code> method).  Unless any
      of the resolved interfaces are non-public, this same value of
      <code>loader</code> is also the class loader passed to
      <code>Proxy.getProxyClass</code>; if non-public interfaces are present,
      their class loader is passed instead (if more than one non-public
      interface class loader is encountered, an
      <code>IllegalAccessError</code> is thrown).
      If <code>Proxy.getProxyClass</code> throws an
      <code>IllegalArgumentException</code>, <code>resolveProxyClass</code>
      will throw a <code>ClassNotFoundException</code> containing the
      <code>IllegalArgumentException</code>.
      @param interfaces the list of interface names that were
                     deserialized in the proxy class descriptor
      @return  a proxy class for the specified interfaces
      @throws        IOException any exception thrown by the underlying
                     <code>InputStream</code>
      @throws        ClassNotFoundException if the proxy class or any of the
                     named interfaces could not be found
      @see ObjectOutputStream#annotateProxyClass(Class)
      @since 1.3</div>
<a id="L688" name="L688"></a> 688     <strong class="reserved">protected</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1378.html#L1559" title="Referred from 1559 in src/java/io/ObjectInputStream.java.">resolveProxyClass</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../D/24908.html" title="Multiple defined in 2 places.">interfaces</a>)
<a id="L689" name="L689"></a> 689         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L690" name="L690"></a> 690     <em class="brace">{</em>
<a id="L691" name="L691"></a> 691         <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> latestLoader = <a href="../S/1378.html#L2064" title="Defined at 2064 in src/java/io/ObjectInputStream.java.">latestUserDefinedLoader</a>();
<a id="L692" name="L692"></a> 692         <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> nonPublicLoader = <strong class="reserved">null</strong>;
<a id="L693" name="L693"></a> 693         <strong class="reserved">boolean</strong> hasNonPublicInterface = <strong class="reserved">false</strong>;
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695         <em class="comment">// define proxy in class loader of non-public interface(s), if any</em>
<a id="L696" name="L696"></a> 696         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] classObjs = <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[<a href="../D/24908.html" title="Multiple defined in 2 places.">interfaces</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L697" name="L697"></a> 697         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/24908.html" title="Multiple defined in 2 places.">interfaces</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(<a href="../D/24908.html" title="Multiple defined in 2 places.">interfaces</a>[i], <strong class="reserved">false</strong>, latestLoader);
<a id="L699" name="L699"></a> 699             <strong class="reserved">if</strong> ((cl.<a href="../D/20712.html" title="Multiple defined in 18 places.">getModifiers</a>() &amp; <a href="../D/5688.html" title="Multiple defined in 3 places.">Modifier</a>.PUBLIC) == 0) <em class="brace">{</em>
<a id="L700" name="L700"></a> 700                 <strong class="reserved">if</strong> (hasNonPublicInterface) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701                     <strong class="reserved">if</strong> (nonPublicLoader != cl.<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>()) <em class="brace">{</em>
<a id="L702" name="L702"></a> 702                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1639.html#L39" title="Defined at 39 in src/java/lang/IllegalAccessError.java.">IllegalAccessError</a>(
<a id="L703" name="L703"></a> 703                             "conflicting non-public interface class loaders");
<a id="L704" name="L704"></a> 704                     <em class="brace">}</em>
<a id="L705" name="L705"></a> 705                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L706" name="L706"></a> 706                     nonPublicLoader = cl.<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>();
<a id="L707" name="L707"></a> 707                     hasNonPublicInterface = <strong class="reserved">true</strong>;
<a id="L708" name="L708"></a> 708                 <em class="brace">}</em>
<a id="L709" name="L709"></a> 709             <em class="brace">}</em>
<a id="L710" name="L710"></a> 710             classObjs[i] = cl;
<a id="L711" name="L711"></a> 711         <em class="brace">}</em>
<a id="L712" name="L712"></a> 712         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L713" name="L713"></a> 713             <strong class="reserved">return</strong> <a href="../D/6957.html" title="Multiple defined in 2 places.">Proxy</a>.<a href="../S/1663.html#L361" title="Defined at 361 in src/java/lang/reflect/Proxy.java.">getProxyClass</a>(
<a id="L714" name="L714"></a> 714                 hasNonPublicInterface ? nonPublicLoader : latestLoader,
<a id="L715" name="L715"></a> 715                 classObjs);
<a id="L716" name="L716"></a> 716         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> e) <em class="brace">{</em>
<a id="L717" name="L717"></a> 717             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>(<strong class="reserved">null</strong>, e);
<a id="L718" name="L718"></a> 718         <em class="brace">}</em>
<a id="L719" name="L719"></a> 719     <em class="brace">}</em>
<a id="L720" name="L720"></a> 720 
<div class="comment">
      This method will allow trusted subclasses of ObjectInputStream to
      substitute one object for another during deserialization. Replacing
      objects is disabled until enableResolveObject is called. The
      enableResolveObject method checks that the stream requesting to resolve
      object can be trusted. Every reference to serializable objects is passed
      to resolveObject.  To insure that the private state of objects is not
      unintentionally exposed only trusted streams may use resolveObject.
      <p>This method is called after an object has been read but before it is
      returned from readObject.  The default resolveObject method just returns
      the same object.
      </p><p>When a subclass is replacing objects it must insure that the
      substituted object is compatible with every field where the reference
      will be stored.  Objects whose type is not a subclass of the type of the
      field or array element abort the serialization by raising an exception
      and the object is not be stored.
      </p><p>This method is called only once when each object is first
      encountered.  All subsequent references to the object will be redirected
      to the new object.
      @param   obj object to be substituted
      @return  the substituted object
      @throws  IOException Any of the usual Input/Output exceptions.</p></div>
<a id="L748" name="L748"></a> 748     <strong class="reserved">protected</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1378.html#L1399" title="Referred from 1399 in src/java/io/ObjectInputStream.java.">resolveObject</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L749" name="L749"></a> 749         <strong class="reserved">return</strong> obj;
<a id="L750" name="L750"></a> 750     <em class="brace">}</em>
<a id="L751" name="L751"></a> 751 
<div class="comment">
      Enable the stream to allow objects read from the stream to be replaced.
      When enabled, the resolveObject method is called for every object being
      deserialized.
      <p>If <i>enable</i> is true, and there is a security manager installed,
      this method first calls the security manager's
      <code>checkPermission</code> method with the
      <code>SerializablePermission("enableSubstitution")</code> permission to
      ensure it's ok to enable the stream to allow objects read from the
      stream to be replaced.
      @param   enable true for enabling use of <code>resolveObject</code> for
               every object being deserialized
      @return  the previous setting before this method was invoked
      @throws  SecurityException if a security manager exists and its
               <code>checkPermission</code> method denies enabling the stream
               to allow objects read from the stream to be replaced.
      @see SecurityManager#checkPermission
      @see java.io.SerializablePermission</p></div>
<a id="L773" name="L773"></a> 773     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../S/7007.html#L128" title="Referred from 128 in src/com/sun/corba/se/impl/encoding/IDLJavaSerializationInputStream.java.">enableResolveObject</a>(<strong class="reserved">boolean</strong> <a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>)
<a id="L774" name="L774"></a> 774         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L775" name="L775"></a> 775     <em class="brace">{</em>
<a id="L776" name="L776"></a> 776         <strong class="reserved">if</strong> (<a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a> == enableResolve) <em class="brace">{</em>
<a id="L777" name="L777"></a> 777             <strong class="reserved">return</strong> <a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>;
<a id="L778" name="L778"></a> 778         <em class="brace">}</em>
<a id="L779" name="L779"></a> 779         <strong class="reserved">if</strong> (<a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>) <em class="brace">{</em>
<a id="L780" name="L780"></a> 780             <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L781" name="L781"></a> 781             <strong class="reserved">if</strong> (sm != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L782" name="L782"></a> 782                 sm.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SUBSTITUTION_PERMISSION);
<a id="L783" name="L783"></a> 783             <em class="brace">}</em>
<a id="L784" name="L784"></a> 784         <em class="brace">}</em>
<a id="L785" name="L785"></a> 785         enableResolve = <a href="../D/15371.html" title="Multiple defined in 6 places.">enable</a>;
<a id="L786" name="L786"></a> 786         <strong class="reserved">return</strong> !enableResolve;
<a id="L787" name="L787"></a> 787     <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
      The readStreamHeader method is provided to allow subclasses to read and
      verify their own stream headers. It reads and verifies the magic number
      and version number.
      @throws  IOException if there are I/O errors while reading from the
               underlying <code>InputStream</code>
      @throws  StreamCorruptedException if control information in the stream
               is inconsistent</div>
<a id="L799" name="L799"></a> 799     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1378.html#L299" title="Referred from 299 in src/java/io/ObjectInputStream.java.">readStreamHeader</a>()
<a id="L800" name="L800"></a> 800         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>
<a id="L801" name="L801"></a> 801     <em class="brace">{</em>
<a id="L802" name="L802"></a> 802         <strong class="reserved">short</strong> s0 = bin.<a href="../D/30259.html" title="Multiple defined in 10 places.">readShort</a>();
<a id="L803" name="L803"></a> 803         <strong class="reserved">short</strong> s1 = bin.<a href="../D/30259.html" title="Multiple defined in 10 places.">readShort</a>();
<a id="L804" name="L804"></a> 804         <strong class="reserved">if</strong> (s0 != STREAM_MAGIC || s1 != STREAM_VERSION) <em class="brace">{</em>
<a id="L805" name="L805"></a> 805             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L806" name="L806"></a> 806                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid stream header: %04X%04X", s0, s1));
<a id="L807" name="L807"></a> 807         <em class="brace">}</em>
<a id="L808" name="L808"></a> 808     <em class="brace">}</em>
<a id="L809" name="L809"></a> 809 
<div class="comment">
      Read a class descriptor from the serialization stream.  This method is
      called when the ObjectInputStream expects a class descriptor as the next
      item in the serialization stream.  Subclasses of ObjectInputStream may
      override this method to read in class descriptors that have been written
      in non-standard formats (by subclasses of ObjectOutputStream which have
      overridden the <code>writeClassDescriptor</code> method).  By default,
      this method reads class descriptors according to the format defined in
      the Object Serialization specification.
      @return  the class descriptor read
      @throws  IOException If an I/O error has occurred.
      @throws  ClassNotFoundException If the Class of a serialized object used
               in the class descriptor representation cannot be found
      @see java.io.ObjectOutputStream#writeClassDescriptor(java.io.ObjectStreamClass)
      @since 1.3</div>
<a id="L827" name="L827"></a> 827     <strong class="reserved">protected</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> <a href="../S/1378.html#L1602" title="Referred from 1602 in src/java/io/ObjectInputStream.java.">readClassDescriptor</a>()
<a id="L828" name="L828"></a> 828         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L829" name="L829"></a> 829     <em class="brace">{</em>
<a id="L830" name="L830"></a> 830         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <strong class="reserved">new</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>();
<a id="L831" name="L831"></a> 831         desc.<a href="../S/1402.html#L668" title="Defined at 668 in src/java/io/ObjectStreamClass.java.">readNonProxy</a>(<strong class="reserved">this</strong>);
<a id="L832" name="L832"></a> 832         <strong class="reserved">return</strong> desc;
<a id="L833" name="L833"></a> 833     <em class="brace">}</em>
<a id="L834" name="L834"></a> 834 
<div class="comment">
      Reads a byte of data. This method will block if no input is available.
      @return  the byte read, or -1 if the end of the stream is reached.
      @throws  IOException If an I/O error has occurred.</div>
<a id="L841" name="L841"></a> 841     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L842" name="L842"></a> 842         <strong class="reserved">return</strong> bin.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L843" name="L843"></a> 843     <em class="brace">}</em>
<a id="L844" name="L844"></a> 844 
<div class="comment">
      Reads into an array of bytes.  This method will block until some input
      is available. Consider using java.io.DataInputStream.readFully to read
      exactly 'length' bytes.
      @param   buf the buffer into which the data is read
      @param   off the start offset of the data
      @param   len the maximum number of bytes read
      @return  the actual number of bytes read, -1 is returned when the end of
               the stream is reached.
      @throws  IOException If an I/O error has occurred.
      @see java.io.DataInputStream#readFully(byte[],int,int)</div>
<a id="L858" name="L858"></a> 858     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>(<strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L859" name="L859"></a> 859         <strong class="reserved">if</strong> (<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L860" name="L860"></a> 860             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L861" name="L861"></a> 861         <em class="brace">}</em>
<a id="L862" name="L862"></a> 862         <strong class="reserved">int</strong> endoff = off + len;
<a id="L863" name="L863"></a> 863         <strong class="reserved">if</strong> (off &lt; 0 || len &lt; 0 || endoff &gt; <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || endoff &lt; 0) <em class="brace">{</em>
<a id="L864" name="L864"></a> 864             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a>();
<a id="L865" name="L865"></a> 865         <em class="brace">}</em>
<a id="L866" name="L866"></a> 866         <strong class="reserved">return</strong> bin.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, off, len, <strong class="reserved">false</strong>);
<a id="L867" name="L867"></a> 867     <em class="brace">}</em>
<a id="L868" name="L868"></a> 868 
<div class="comment">
      Returns the number of bytes that can be read without blocking.
      @return  the number of available bytes.
      @throws  IOException if there are I/O errors while reading from the
               underlying <code>InputStream</code></div>
<a id="L876" name="L876"></a> 876     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/10425.html" title="Multiple referred from 160 places.">available</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L877" name="L877"></a> 877         <strong class="reserved">return</strong> bin.<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>();
<a id="L878" name="L878"></a> 878     <em class="brace">}</em>
<a id="L879" name="L879"></a> 879 
<div class="comment">
      Closes the input stream. Must be called to release any resources
      associated with the stream.
      @throws  IOException If an I/O error has occurred.</div>
<a id="L886" name="L886"></a> 886     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<div class="comment">
          Even if stream already closed, propagate redundant close to
          underlying stream to stay consistent with previous implementations.</div>
<a id="L891" name="L891"></a> 891         closed = <strong class="reserved">true</strong>;
<a id="L892" name="L892"></a> 892         <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> == 0) <em class="brace">{</em>
<a id="L893" name="L893"></a> 893             <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L894" name="L894"></a> 894         <em class="brace">}</em>
<a id="L895" name="L895"></a> 895         bin.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L896" name="L896"></a> 896     <em class="brace">}</em>
<a id="L897" name="L897"></a> 897 
<div class="comment">
      Reads in a boolean.
      @return  the boolean read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L905" name="L905"></a> 905     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25430.html" title="Multiple referred from 16 places.">readBoolean</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L906" name="L906"></a> 906         <strong class="reserved">return</strong> bin.<a href="../D/30135.html" title="Multiple defined in 10 places.">readBoolean</a>();
<a id="L907" name="L907"></a> 907     <em class="brace">}</em>
<a id="L908" name="L908"></a> 908 
<div class="comment">
      Reads an 8 bit byte.
      @return  the 8 bit byte read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L916" name="L916"></a> 916     <strong class="reserved">public</strong> <strong class="reserved">byte</strong> <a href="../R/25433.html" title="Multiple referred from 91 places.">readByte</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>  <em class="brace">{</em>
<a id="L917" name="L917"></a> 917         <strong class="reserved">return</strong> bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L918" name="L918"></a> 918     <em class="brace">}</em>
<a id="L919" name="L919"></a> 919 
<div class="comment">
      Reads an unsigned 8 bit byte.
      @return  the 8 bit byte read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L927" name="L927"></a> 927     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25567.html" title="Multiple referred from 72 places.">readUnsignedByte</a>()  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L928" name="L928"></a> 928         <strong class="reserved">return</strong> bin.<a href="../D/30291.html" title="Multiple defined in 8 places.">readUnsignedByte</a>();
<a id="L929" name="L929"></a> 929     <em class="brace">}</em>
<a id="L930" name="L930"></a> 930 
<div class="comment">
      Reads a 16 bit char.
      @return  the 16 bit char read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L938" name="L938"></a> 938     <strong class="reserved">public</strong> <strong class="reserved">char</strong> <a href="../R/25439.html" title="Multiple referred from 30 places.">readChar</a>()  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L939" name="L939"></a> 939         <strong class="reserved">return</strong> bin.<a href="../D/30144.html" title="Multiple defined in 10 places.">readChar</a>();
<a id="L940" name="L940"></a> 940     <em class="brace">}</em>
<a id="L941" name="L941"></a> 941 
<div class="comment">
      Reads a 16 bit short.
      @return  the 16 bit short read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L949" name="L949"></a> 949     <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/25541.html" title="Multiple referred from 52 places.">readShort</a>()  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L950" name="L950"></a> 950         <strong class="reserved">return</strong> bin.<a href="../D/30259.html" title="Multiple defined in 10 places.">readShort</a>();
<a id="L951" name="L951"></a> 951     <em class="brace">}</em>
<a id="L952" name="L952"></a> 952 
<div class="comment">
      Reads an unsigned 16 bit short.
      @return  the 16 bit short read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L960" name="L960"></a> 960     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25569.html" title="Multiple referred from 87 places.">readUnsignedShort</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L961" name="L961"></a> 961         <strong class="reserved">return</strong> bin.<a href="../D/30293.html" title="Multiple defined in 8 places.">readUnsignedShort</a>();
<a id="L962" name="L962"></a> 962     <em class="brace">}</em>
<a id="L963" name="L963"></a> 963 
<div class="comment">
      Reads a 32 bit int.
      @return  the 32 bit integer read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L971" name="L971"></a> 971     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25495.html" title="Multiple referred from 180 places.">readInt</a>()  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L972" name="L972"></a> 972         <strong class="reserved">return</strong> bin.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L973" name="L973"></a> 973     <em class="brace">}</em>
<a id="L974" name="L974"></a> 974 
<div class="comment">
      Reads a 64 bit long.
      @return  the read 64 bit long.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L982" name="L982"></a> 982     <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/25505.html" title="Multiple referred from 17 places.">readLong</a>()  <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L983" name="L983"></a> 983         <strong class="reserved">return</strong> bin.<a href="../D/30217.html" title="Multiple defined in 10 places.">readLong</a>();
<a id="L984" name="L984"></a> 984     <em class="brace">}</em>
<a id="L985" name="L985"></a> 985 
<div class="comment">
      Reads a 32 bit float.
      @return  the 32 bit float read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L993" name="L993"></a> 993     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/25473.html" title="Multiple referred from 7 places.">readFloat</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L994" name="L994"></a> 994         <strong class="reserved">return</strong> bin.<a href="../D/30182.html" title="Multiple defined in 10 places.">readFloat</a>();
<a id="L995" name="L995"></a> 995     <em class="brace">}</em>
<a id="L996" name="L996"></a> 996 
<div class="comment">
      Reads a 64 bit double.
      @return  the 64 bit double read.
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L1004" name="L1004"></a>1004     <strong class="reserved">public</strong> <strong class="reserved">double</strong> <a href="../R/25458.html" title="Multiple referred from 6 places.">readDouble</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1005" name="L1005"></a>1005         <strong class="reserved">return</strong> bin.<a href="../D/30166.html" title="Multiple defined in 10 places.">readDouble</a>();
<a id="L1006" name="L1006"></a>1006     <em class="brace">}</em>
<a id="L1007" name="L1007"></a>1007 
<div class="comment">
      Reads bytes, blocking until all bytes are read.
      @param   buf the buffer into which the data is read
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L1015" name="L1015"></a>1015     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25479.html" title="Multiple referred from 96 places.">readFully</a>(<strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016         bin.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">false</strong>);
<a id="L1017" name="L1017"></a>1017     <em class="brace">}</em>
<a id="L1018" name="L1018"></a>1018 
<div class="comment">
      Reads bytes, blocking until all bytes are read.
      @param   buf the buffer into which the data is read
      @param   off the start offset of the data
      @param   len the maximum number of bytes to read
      @throws  EOFException If end of file is reached.
      @throws  IOException If other I/O error has occurred.</div>
<a id="L1028" name="L1028"></a>1028     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25479.html" title="Multiple referred from 96 places.">readFully</a>(<strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1029" name="L1029"></a>1029         <strong class="reserved">int</strong> endoff = off + len;
<a id="L1030" name="L1030"></a>1030         <strong class="reserved">if</strong> (off &lt; 0 || len &lt; 0 || endoff &gt; <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || endoff &lt; 0) <em class="brace">{</em>
<a id="L1031" name="L1031"></a>1031             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a>();
<a id="L1032" name="L1032"></a>1032         <em class="brace">}</em>
<a id="L1033" name="L1033"></a>1033         bin.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, off, len, <strong class="reserved">false</strong>);
<a id="L1034" name="L1034"></a>1034     <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035 
<div class="comment">
      Skips bytes.
      @param   len the number of bytes to be skipped
      @return  the actual number of bytes skipped.
      @throws  IOException If an I/O error has occurred.</div>
<a id="L1043" name="L1043"></a>1043     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28645.html" title="Multiple referred from 54 places.">skipBytes</a>(<strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1044" name="L1044"></a>1044         <strong class="reserved">return</strong> bin.<a href="../D/34600.html" title="Multiple defined in 12 places.">skipBytes</a>(len);
<a id="L1045" name="L1045"></a>1045     <em class="brace">}</em>
<a id="L1046" name="L1046"></a>1046 
<div class="comment">
      Reads in a line that has been terminated by a \n, \r, \r\n or EOF.
      @return  a String copy of the line.
      @throws  IOException if there are I/O errors while reading from the
               underlying <code>InputStream</code>
      @deprecated This method does not properly convert bytes to characters.
               see DataInputStream for the details and alternatives.</div>
<a id="L1056" name="L1056"></a>1056     @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L1057" name="L1057"></a>1057     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25502.html" title="Multiple referred from 43 places.">readLine</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1058" name="L1058"></a>1058         <strong class="reserved">return</strong> bin.<a href="../D/30213.html" title="Multiple defined in 17 places.">readLine</a>();
<a id="L1059" name="L1059"></a>1059     <em class="brace">}</em>
<a id="L1060" name="L1060"></a>1060 
<div class="comment">
      Reads a String in
      <a href="DataInput.html#modified-utf-8">modified UTF-8</a>
      format.
      @return  the String.
      @throws  IOException if there are I/O errors while reading from the
               underlying <code>InputStream</code>
      @throws  UTFDataFormatException if read bytes do not represent a valid
               modified UTF-8 encoding of a string</div>
<a id="L1072" name="L1072"></a>1072     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25561.html" title="Multiple referred from 54 places.">readUTF</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1073" name="L1073"></a>1073         <strong class="reserved">return</strong> bin.<a href="../D/30284.html" title="Multiple defined in 9 places.">readUTF</a>();
<a id="L1074" name="L1074"></a>1074     <em class="brace">}</em>
<a id="L1075" name="L1075"></a>1075 
<div class="comment">
      Provide access to the persistent fields read from the input stream.</div>
<a id="L1079" name="L1079"></a>1079     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/3269.html" title="Multiple referred from 64 places.">GetField</a> <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080 
<div class="comment">
          Get the ObjectStreamClass that describes the fields in the stream.
          @return  the descriptor class that describes the serializable fields</div>
<a id="L1086" name="L1086"></a>1086         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> getObjectStreamClass();
<a id="L1087" name="L1087"></a>1087 
<div class="comment">
          Return true if the named field is defaulted and has no value in this
          stream.
          @param  name the name of the field
          @return true, if and only if the named field is defaulted
          @throws IOException if there are I/O errors while reading from
                  the underlying <code>InputStream</code>
          @throws IllegalArgumentException if <code>name</code> does not
                  correspond to a serializable field</div>
<a id="L1099" name="L1099"></a>1099         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/13169.html" title="Multiple referred from 69 places.">defaulted</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1100" name="L1100"></a>1100 
<div class="comment">
          Get the value of the named boolean field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>boolean</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1113" name="L1113"></a>1113         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">boolean</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>)
<a id="L1114" name="L1114"></a>1114             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1115" name="L1115"></a>1115 
<div class="comment">
          Get the value of the named byte field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>byte</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1128" name="L1128"></a>1128         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">byte</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">byte</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1129" name="L1129"></a>1129 
<div class="comment">
          Get the value of the named char field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>char</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1142" name="L1142"></a>1142         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">char</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">char</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1143" name="L1143"></a>1143 
<div class="comment">
          Get the value of the named short field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>short</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1156" name="L1156"></a>1156         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">short</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">short</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1157" name="L1157"></a>1157 
<div class="comment">
          Get the value of the named int field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>int</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1170" name="L1170"></a>1170         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1171" name="L1171"></a>1171 
<div class="comment">
          Get the value of the named long field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>long</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1184" name="L1184"></a>1184         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">long</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
          Get the value of the named float field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>float</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1198" name="L1198"></a>1198         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">float</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">float</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1199" name="L1199"></a>1199 
<div class="comment">
          Get the value of the named double field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>double</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1212" name="L1212"></a>1212         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">double</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1213" name="L1213"></a>1213 
<div class="comment">
          Get the value of the named Object field from the persistent field.
          @param  name the name of the field
          @param  val the default value to use if <code>name</code> does not
                  have a value
          @return the value of the named <code>Object</code> field
          @throws IOException if there are I/O errors while reading from the
                  underlying <code>InputStream</code>
          @throws IllegalArgumentException if type of <code>name</code> is
                  not serializable or if the field type is incorrect</div>
<a id="L1226" name="L1226"></a>1226         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>;
<a id="L1227" name="L1227"></a>1227     <em class="brace">}</em>
<a id="L1228" name="L1228"></a>1228 
<div class="comment">
      Verifies that this (possibly subclass) instance can be constructed
      without violating security constraints: the subclass must not override
      security-sensitive non-final methods, or else the
      "enableSubclassImplementation" SerializablePermission is checked.</div>
<a id="L1235" name="L1235"></a>1235     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30127.html" title="Multiple referred from 2 places.">verifySubclass</a>() <em class="brace">{</em>
<a id="L1236" name="L1236"></a>1236         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L1237" name="L1237"></a>1237         <strong class="reserved">if</strong> (cl == <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1238" name="L1238"></a>1238             <strong class="reserved">return</strong>;
<a id="L1239" name="L1239"></a>1239         <em class="brace">}</em>
<a id="L1240" name="L1240"></a>1240         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L1241" name="L1241"></a>1241         <strong class="reserved">if</strong> (sm == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1242" name="L1242"></a>1242             <strong class="reserved">return</strong>;
<a id="L1243" name="L1243"></a>1243         <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244         <a href="../D/29849.html" title="Multiple defined in 2 places.">processQueue</a>(<a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAuditsQueue, <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAudits);
<a id="L1245" name="L1245"></a>1245         <a href="../D/9617.html" title="Multiple defined in 2 places.">WeakClassKey</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a> = <strong class="reserved">new</strong> <a href="../D/9617.html" title="Multiple defined in 2 places.">WeakClassKey</a>(cl, <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAuditsQueue);
<a id="L1246" name="L1246"></a>1246         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAudits.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1247" name="L1247"></a>1247         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1248" name="L1248"></a>1248             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/11639.html" title="Multiple defined in 3 places.">auditSubclass</a>(cl));
<a id="L1249" name="L1249"></a>1249             <a href="../D/1248.html" title="Multiple defined in 4 places.">Caches</a>.subclassAudits.<a href="../D/30006.html" title="Multiple defined in 13 places.">putIfAbsent</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1250" name="L1250"></a>1250         <em class="brace">}</em>
<a id="L1251" name="L1251"></a>1251         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>()) <em class="brace">{</em>
<a id="L1252" name="L1252"></a>1252             <strong class="reserved">return</strong>;
<a id="L1253" name="L1253"></a>1253         <em class="brace">}</em>
<a id="L1254" name="L1254"></a>1254         sm.<a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(SUBCLASS_IMPLEMENTATION_PERMISSION);
<a id="L1255" name="L1255"></a>1255     <em class="brace">}</em>
<a id="L1256" name="L1256"></a>1256 
<div class="comment">
      Performs reflective checks on given subclass to verify that it doesn't
      override security-sensitive non-final methods.  Returns true if subclass
      is "safe", false otherwise.</div>
<a id="L1262" name="L1262"></a>1262     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/10410.html" title="Multiple referred from 3 places.">auditSubclass</a>(<strong class="reserved">final</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; subcl) <em class="brace">{</em>
<a id="L1263" name="L1263"></a>1263         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L1264" name="L1264"></a>1264             <strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;() <em class="brace">{</em>
<a id="L1265" name="L1265"></a>1265                 <strong class="reserved">public</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L1266" name="L1266"></a>1266                     <strong class="reserved">for</strong> (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = subcl;
<a id="L1267" name="L1267"></a>1267                          cl != <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<strong class="reserved">class</strong>;
<a id="L1268" name="L1268"></a>1268                          cl = cl.<a href="../D/22863.html" title="Multiple defined in 4 places.">getSuperclass</a>())
<a id="L1269" name="L1269"></a>1269                     <em class="brace">{</em>
<a id="L1270" name="L1270"></a>1270                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1271" name="L1271"></a>1271                             cl.<a href="../D/18255.html" title="Multiple defined in 2 places.">getDeclaredMethod</a>(
<a id="L1272" name="L1272"></a>1272                                 "readUnshared", (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[]) <strong class="reserved">null</strong>);
<a id="L1273" name="L1273"></a>1273                             <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L1274" name="L1274"></a>1274                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1275" name="L1275"></a>1275                         <em class="brace">}</em>
<a id="L1276" name="L1276"></a>1276                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277                             cl.<a href="../D/18255.html" title="Multiple defined in 2 places.">getDeclaredMethod</a>("readFields", (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[]) <strong class="reserved">null</strong>);
<a id="L1278" name="L1278"></a>1278                             <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L1279" name="L1279"></a>1279                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1280" name="L1280"></a>1280                         <em class="brace">}</em>
<a id="L1281" name="L1281"></a>1281                     <em class="brace">}</em>
<a id="L1282" name="L1282"></a>1282                     <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE;
<a id="L1283" name="L1283"></a>1283                 <em class="brace">}</em>
<a id="L1284" name="L1284"></a>1284             <em class="brace">}</em>
<a id="L1285" name="L1285"></a>1285         );
<a id="L1286" name="L1286"></a>1286         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L1287" name="L1287"></a>1287     <em class="brace">}</em>
<a id="L1288" name="L1288"></a>1288 
<div class="comment">
      Clears internal data structures.</div>
<a id="L1292" name="L1292"></a>1292     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L1293" name="L1293"></a>1293         handles.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1294" name="L1294"></a>1294         vlist.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1295" name="L1295"></a>1295     <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296 
<div class="comment">
      Underlying readObject implementation.</div>
<a id="L1300" name="L1300"></a>1300     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/25519.html" title="Multiple referred from 8 places.">readObject0</a>(<strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301         <strong class="reserved">boolean</strong> oldMode = bin.<a href="../D/17273.html" title="Multiple defined in 2 places.">getBlockDataMode</a>();
<a id="L1302" name="L1302"></a>1302         <strong class="reserved">if</strong> (oldMode) <em class="brace">{</em>
<a id="L1303" name="L1303"></a>1303             <strong class="reserved">int</strong> remain = bin.<a href="../S/1378.html#L2576" title="Defined at 2576 in src/java/io/ObjectInputStream.java.">currentBlockRemaining</a>();
<a id="L1304" name="L1304"></a>1304             <strong class="reserved">if</strong> (remain &gt; 0) <em class="brace">{</em>
<a id="L1305" name="L1305"></a>1305                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/6411.html" title="Multiple defined in 2 places.">OptionalDataException</a>(remain);
<a id="L1306" name="L1306"></a>1306             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (defaultDataEnd) <em class="brace">{</em>
<div class="comment">
                  Fix for 4360508: stream is currently at the end of a field
                  value block written via default serialization; since there
                  is no terminating TC_ENDBLOCKDATA tag, simulate
                  end-of-custom-data behavior explicitly.</div>
<a id="L1313" name="L1313"></a>1313                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/6411.html" title="Multiple defined in 2 places.">OptionalDataException</a>(<strong class="reserved">true</strong>);
<a id="L1314" name="L1314"></a>1314             <em class="brace">}</em>
<a id="L1315" name="L1315"></a>1315             bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1316" name="L1316"></a>1316         <em class="brace">}</em>
<a id="L1317" name="L1317"></a>1317 
<a id="L1318" name="L1318"></a>1318         <strong class="reserved">byte</strong> tc;
<a id="L1319" name="L1319"></a>1319         <strong class="reserved">while</strong> ((tc = bin.<a href="../S/1378.html#L2605" title="Defined at 2605 in src/java/io/ObjectInputStream.java.">peekByte</a>()) == TC_RESET) <em class="brace">{</em>
<a id="L1320" name="L1320"></a>1320             bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L1321" name="L1321"></a>1321             <a href="../S/1378.html#L2029" title="Defined at 2029 in src/java/io/ObjectInputStream.java.">handleReset</a>();
<a id="L1322" name="L1322"></a>1322         <em class="brace">}</em>
<a id="L1323" name="L1323"></a>1323 
<a id="L1324" name="L1324"></a>1324         <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>++;
<a id="L1325" name="L1325"></a>1325         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1326" name="L1326"></a>1326             <strong class="reserved">switch</strong> (tc) <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327                 <strong class="reserved">case</strong> TC_NULL:
<a id="L1328" name="L1328"></a>1328                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1437" title="Defined at 1437 in src/java/io/ObjectInputStream.java.">readNull</a>();
<a id="L1329" name="L1329"></a>1329 
<a id="L1330" name="L1330"></a>1330                 <strong class="reserved">case</strong> TC_REFERENCE:
<a id="L1331" name="L1331"></a>1331                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1449" title="Defined at 1449 in src/java/io/ObjectInputStream.java.">readHandle</a>(unshared);
<a id="L1332" name="L1332"></a>1332 
<a id="L1333" name="L1333"></a>1333                 <strong class="reserved">case</strong> TC_CLASS:
<a id="L1334" name="L1334"></a>1334                     <strong class="reserved">return</strong> <a href="../D/30150.html" title="Multiple defined in 2 places.">readClass</a>(unshared);
<a id="L1335" name="L1335"></a>1335 
<a id="L1336" name="L1336"></a>1336                 <strong class="reserved">case</strong> TC_CLASSDESC:
<a id="L1337" name="L1337"></a>1337                 <strong class="reserved">case</strong> TC_PROXYCLASSDESC:
<a id="L1338" name="L1338"></a>1338                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(unshared);
<a id="L1339" name="L1339"></a>1339 
<a id="L1340" name="L1340"></a>1340                 <strong class="reserved">case</strong> TC_STRING:
<a id="L1341" name="L1341"></a>1341                 <strong class="reserved">case</strong> TC_LONGSTRING:
<a id="L1342" name="L1342"></a>1342                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1395" title="Defined at 1395 in src/java/io/ObjectInputStream.java.">checkResolve</a>(<a href="../D/30265.html" title="Multiple defined in 3 places.">readString</a>(unshared));
<a id="L1343" name="L1343"></a>1343 
<a id="L1344" name="L1344"></a>1344                 <strong class="reserved">case</strong> TC_ARRAY:
<a id="L1345" name="L1345"></a>1345                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1395" title="Defined at 1395 in src/java/io/ObjectInputStream.java.">checkResolve</a>(<a href="../D/30121.html" title="Multiple defined in 3 places.">readArray</a>(unshared));
<a id="L1346" name="L1346"></a>1346 
<a id="L1347" name="L1347"></a>1347                 <strong class="reserved">case</strong> TC_ENUM:
<a id="L1348" name="L1348"></a>1348                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1395" title="Defined at 1395 in src/java/io/ObjectInputStream.java.">checkResolve</a>(<a href="../S/1378.html#L1721" title="Defined at 1721 in src/java/io/ObjectInputStream.java.">readEnum</a>(unshared));
<a id="L1349" name="L1349"></a>1349 
<a id="L1350" name="L1350"></a>1350                 <strong class="reserved">case</strong> TC_OBJECT:
<a id="L1351" name="L1351"></a>1351                     <strong class="reserved">return</strong> <a href="../S/1378.html#L1395" title="Defined at 1395 in src/java/io/ObjectInputStream.java.">checkResolve</a>(<a href="../S/1378.html#L1767" title="Defined at 1767 in src/java/io/ObjectInputStream.java.">readOrdinaryObject</a>(unshared));
<a id="L1352" name="L1352"></a>1352 
<a id="L1353" name="L1353"></a>1353                 <strong class="reserved">case</strong> TC_EXCEPTION:
<a id="L1354" name="L1354"></a>1354                     <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> = <a href="../S/1378.html#L2016" title="Defined at 2016 in src/java/io/ObjectInputStream.java.">readFatalException</a>();
<a id="L1355" name="L1355"></a>1355                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1430.html#L46" title="Defined at 46 in src/java/io/WriteAbortedException.java.">WriteAbortedException</a>("writing aborted", <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1356" name="L1356"></a>1356 
<a id="L1357" name="L1357"></a>1357                 <strong class="reserved">case</strong> TC_BLOCKDATA:
<a id="L1358" name="L1358"></a>1358                 <strong class="reserved">case</strong> TC_BLOCKDATALONG:
<a id="L1359" name="L1359"></a>1359                     <strong class="reserved">if</strong> (oldMode) <em class="brace">{</em>
<a id="L1360" name="L1360"></a>1360                         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1361" name="L1361"></a>1361                         bin.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();             <em class="comment">// force header read</em>
<a id="L1362" name="L1362"></a>1362                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/6411.html" title="Multiple defined in 2 places.">OptionalDataException</a>(
<a id="L1363" name="L1363"></a>1363                             bin.<a href="../S/1378.html#L2576" title="Defined at 2576 in src/java/io/ObjectInputStream.java.">currentBlockRemaining</a>());
<a id="L1364" name="L1364"></a>1364                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1365" name="L1365"></a>1365                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1366" name="L1366"></a>1366                             "unexpected block data");
<a id="L1367" name="L1367"></a>1367                     <em class="brace">}</em>
<a id="L1368" name="L1368"></a>1368 
<a id="L1369" name="L1369"></a>1369                 <strong class="reserved">case</strong> TC_ENDBLOCKDATA:
<a id="L1370" name="L1370"></a>1370                     <strong class="reserved">if</strong> (oldMode) <em class="brace">{</em>
<a id="L1371" name="L1371"></a>1371                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/6411.html" title="Multiple defined in 2 places.">OptionalDataException</a>(<strong class="reserved">true</strong>);
<a id="L1372" name="L1372"></a>1372                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1373" name="L1373"></a>1373                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1374" name="L1374"></a>1374                             "unexpected end of block data");
<a id="L1375" name="L1375"></a>1375                     <em class="brace">}</em>
<a id="L1376" name="L1376"></a>1376 
<a id="L1377" name="L1377"></a>1377                 <strong class="reserved">default</strong>:
<a id="L1378" name="L1378"></a>1378                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1379" name="L1379"></a>1379                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid type code: %02X", tc));
<a id="L1380" name="L1380"></a>1380             <em class="brace">}</em>
<a id="L1381" name="L1381"></a>1381         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382             <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>--;
<a id="L1383" name="L1383"></a>1383             bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(oldMode);
<a id="L1384" name="L1384"></a>1384         <em class="brace">}</em>
<a id="L1385" name="L1385"></a>1385     <em class="brace">}</em>
<a id="L1386" name="L1386"></a>1386 
<div class="comment">
      If resolveObject has been enabled and given object does not have an
      exception associated with it, calls resolveObject to determine
      replacement for object, and updates handle table accordingly.  Returns
      replacement object, or echoes provided object if no replacement
      occurred.  Expects that passHandle is set to given object's handle prior
      to calling this method.</div>
<a id="L1395" name="L1395"></a>1395     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11329.html" title="Multiple referred from 4 places.">checkResolve</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1396" name="L1396"></a>1396         <strong class="reserved">if</strong> (!enableResolve || handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1397" name="L1397"></a>1397             <strong class="reserved">return</strong> obj;
<a id="L1398" name="L1398"></a>1398         <em class="brace">}</em>
<a id="L1399" name="L1399"></a>1399         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> rep = <a href="../D/31287.html" title="Multiple defined in 3 places.">resolveObject</a>(obj);
<a id="L1400" name="L1400"></a>1400         <strong class="reserved">if</strong> (rep != obj) <em class="brace">{</em>
<a id="L1401" name="L1401"></a>1401             handles.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(passHandle, rep);
<a id="L1402" name="L1402"></a>1402         <em class="brace">}</em>
<a id="L1403" name="L1403"></a>1403         <strong class="reserved">return</strong> rep;
<a id="L1404" name="L1404"></a>1404     <em class="brace">}</em>
<a id="L1405" name="L1405"></a>1405 
<div class="comment">
      Reads string without allowing it to be replaced in stream.  Called from
      within ObjectStreamClass.read().</div>
<a id="L1410" name="L1410"></a>1410     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1402.html#L706" title="Referred from 706 in src/java/io/ObjectStreamClass.java.">readTypeString</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1411" name="L1411"></a>1411         <strong class="reserved">int</strong> oldHandle = passHandle;
<a id="L1412" name="L1412"></a>1412         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1413" name="L1413"></a>1413             <strong class="reserved">byte</strong> tc = bin.<a href="../S/1378.html#L2605" title="Defined at 2605 in src/java/io/ObjectInputStream.java.">peekByte</a>();
<a id="L1414" name="L1414"></a>1414             <strong class="reserved">switch</strong> (tc) <em class="brace">{</em>
<a id="L1415" name="L1415"></a>1415                 <strong class="reserved">case</strong> TC_NULL:
<a id="L1416" name="L1416"></a>1416                     <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/1378.html#L1437" title="Defined at 1437 in src/java/io/ObjectInputStream.java.">readNull</a>();
<a id="L1417" name="L1417"></a>1417 
<a id="L1418" name="L1418"></a>1418                 <strong class="reserved">case</strong> TC_REFERENCE:
<a id="L1419" name="L1419"></a>1419                     <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/1378.html#L1449" title="Defined at 1449 in src/java/io/ObjectInputStream.java.">readHandle</a>(<strong class="reserved">false</strong>);
<a id="L1420" name="L1420"></a>1420 
<a id="L1421" name="L1421"></a>1421                 <strong class="reserved">case</strong> TC_STRING:
<a id="L1422" name="L1422"></a>1422                 <strong class="reserved">case</strong> TC_LONGSTRING:
<a id="L1423" name="L1423"></a>1423                     <strong class="reserved">return</strong> <a href="../D/30265.html" title="Multiple defined in 3 places.">readString</a>(<strong class="reserved">false</strong>);
<a id="L1424" name="L1424"></a>1424 
<a id="L1425" name="L1425"></a>1425                 <strong class="reserved">default</strong>:
<a id="L1426" name="L1426"></a>1426                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1427" name="L1427"></a>1427                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid type code: %02X", tc));
<a id="L1428" name="L1428"></a>1428             <em class="brace">}</em>
<a id="L1429" name="L1429"></a>1429         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430             passHandle = oldHandle;
<a id="L1431" name="L1431"></a>1431         <em class="brace">}</em>
<a id="L1432" name="L1432"></a>1432     <em class="brace">}</em>
<a id="L1433" name="L1433"></a>1433 
<div class="comment">
      Reads in null code, sets passHandle to NULL_HANDLE and returns null.</div>
<a id="L1437" name="L1437"></a>1437     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/25516.html" title="Multiple referred from 3 places.">readNull</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1438" name="L1438"></a>1438         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_NULL) <em class="brace">{</em>
<a id="L1439" name="L1439"></a>1439             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1440" name="L1440"></a>1440         <em class="brace">}</em>
<a id="L1441" name="L1441"></a>1441         passHandle = NULL_HANDLE;
<a id="L1442" name="L1442"></a>1442         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1443" name="L1443"></a>1443     <em class="brace">}</em>
<a id="L1444" name="L1444"></a>1444 
<div class="comment">
      Reads in object handle, sets passHandle to the read handle, and returns
      object associated with the handle.</div>
<a id="L1449" name="L1449"></a>1449     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/25483.html" title="Multiple referred from 3 places.">readHandle</a>(<strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1450" name="L1450"></a>1450         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_REFERENCE) <em class="brace">{</em>
<a id="L1451" name="L1451"></a>1451             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1452" name="L1452"></a>1452         <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453         passHandle = bin.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>() - baseWireHandle;
<a id="L1454" name="L1454"></a>1454         <strong class="reserved">if</strong> (passHandle &lt; 0 || passHandle &gt;= handles.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()) <em class="brace">{</em>
<a id="L1455" name="L1455"></a>1455             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1456" name="L1456"></a>1456                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid handle value: %08X", passHandle +
<a id="L1457" name="L1457"></a>1457                 baseWireHandle));
<a id="L1458" name="L1458"></a>1458         <em class="brace">}</em>
<a id="L1459" name="L1459"></a>1459         <strong class="reserved">if</strong> (unshared) <em class="brace">{</em>
<a id="L1460" name="L1460"></a>1460             <em class="comment">// REMIND: what type of exception to throw here?</em>
<a id="L1461" name="L1461"></a>1461             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>(
<a id="L1462" name="L1462"></a>1462                 "cannot read back reference as unshared");
<a id="L1463" name="L1463"></a>1463         <em class="brace">}</em>
<a id="L1464" name="L1464"></a>1464 
<a id="L1465" name="L1465"></a>1465         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj = handles.<a href="../S/1378.html#L3433" title="Defined at 3433 in src/java/io/ObjectInputStream.java.">lookupObject</a>(passHandle);
<a id="L1466" name="L1466"></a>1466         <strong class="reserved">if</strong> (obj == unsharedMarker) <em class="brace">{</em>
<a id="L1467" name="L1467"></a>1467             <em class="comment">// REMIND: what type of exception to throw here?</em>
<a id="L1468" name="L1468"></a>1468             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>(
<a id="L1469" name="L1469"></a>1469                 "cannot read back reference to unshared object");
<a id="L1470" name="L1470"></a>1470         <em class="brace">}</em>
<a id="L1471" name="L1471"></a>1471         <strong class="reserved">return</strong> obj;
<a id="L1472" name="L1472"></a>1472     <em class="brace">}</em>
<a id="L1473" name="L1473"></a>1473 
<div class="comment">
      Reads in and returns class object.  Sets passHandle to class object's
      assigned handle.  Returns null if class is unresolvable (in which case a
      ClassNotFoundException will be associated with the class' handle in the
      handle table).</div>
<a id="L1480" name="L1480"></a>1480     <strong class="reserved">private</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/25444.html" title="Multiple referred from 2 places.">readClass</a>(<strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1481" name="L1481"></a>1481         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_CLASS) <em class="brace">{</em>
<a id="L1482" name="L1482"></a>1482             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1483" name="L1483"></a>1483         <em class="brace">}</em>
<a id="L1484" name="L1484"></a>1484         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(<strong class="reserved">false</strong>);
<a id="L1485" name="L1485"></a>1485         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1486" name="L1486"></a>1486         passHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : cl);
<a id="L1487" name="L1487"></a>1487 
<a id="L1488" name="L1488"></a>1488         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> resolveEx = desc.<a href="../S/1402.html#L757" title="Defined at 757 in src/java/io/ObjectStreamClass.java.">getResolveException</a>();
<a id="L1489" name="L1489"></a>1489         <strong class="reserved">if</strong> (resolveEx != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1490" name="L1490"></a>1490             handles.<a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(passHandle, resolveEx);
<a id="L1491" name="L1491"></a>1491         <em class="brace">}</em>
<a id="L1492" name="L1492"></a>1492 
<a id="L1493" name="L1493"></a>1493         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(passHandle);
<a id="L1494" name="L1494"></a>1494         <strong class="reserved">return</strong> cl;
<a id="L1495" name="L1495"></a>1495     <em class="brace">}</em>
<a id="L1496" name="L1496"></a>1496 
<div class="comment">
      Reads in and returns (possibly null) class descriptor.  Sets passHandle
      to class descriptor's assigned handle.  If class descriptor cannot be
      resolved to a class in the local VM, a ClassNotFoundException is
      associated with the class descriptor's handle.</div>
<a id="L1503" name="L1503"></a>1503     <strong class="reserved">private</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> <a href="../R/25445.html" title="Multiple referred from 7 places.">readClassDesc</a>(<strong class="reserved">boolean</strong> unshared)
<a id="L1504" name="L1504"></a>1504         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1505" name="L1505"></a>1505     <em class="brace">{</em>
<a id="L1506" name="L1506"></a>1506         <strong class="reserved">byte</strong> tc = bin.<a href="../S/1378.html#L2605" title="Defined at 2605 in src/java/io/ObjectInputStream.java.">peekByte</a>();
<a id="L1507" name="L1507"></a>1507         <strong class="reserved">switch</strong> (tc) <em class="brace">{</em>
<a id="L1508" name="L1508"></a>1508             <strong class="reserved">case</strong> TC_NULL:
<a id="L1509" name="L1509"></a>1509                 <strong class="reserved">return</strong> (<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>) <a href="../S/1378.html#L1437" title="Defined at 1437 in src/java/io/ObjectInputStream.java.">readNull</a>();
<a id="L1510" name="L1510"></a>1510 
<a id="L1511" name="L1511"></a>1511             <strong class="reserved">case</strong> TC_REFERENCE:
<a id="L1512" name="L1512"></a>1512                 <strong class="reserved">return</strong> (<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>) <a href="../S/1378.html#L1449" title="Defined at 1449 in src/java/io/ObjectInputStream.java.">readHandle</a>(unshared);
<a id="L1513" name="L1513"></a>1513 
<a id="L1514" name="L1514"></a>1514             <strong class="reserved">case</strong> TC_PROXYCLASSDESC:
<a id="L1515" name="L1515"></a>1515                 <strong class="reserved">return</strong> <a href="../S/1378.html#L1538" title="Defined at 1538 in src/java/io/ObjectInputStream.java.">readProxyDesc</a>(unshared);
<a id="L1516" name="L1516"></a>1516 
<a id="L1517" name="L1517"></a>1517             <strong class="reserved">case</strong> TC_CLASSDESC:
<a id="L1518" name="L1518"></a>1518                 <strong class="reserved">return</strong> <a href="../S/1378.html#L1589" title="Defined at 1589 in src/java/io/ObjectInputStream.java.">readNonProxyDesc</a>(unshared);
<a id="L1519" name="L1519"></a>1519 
<a id="L1520" name="L1520"></a>1520             <strong class="reserved">default</strong>:
<a id="L1521" name="L1521"></a>1521                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1522" name="L1522"></a>1522                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid type code: %02X", tc));
<a id="L1523" name="L1523"></a>1523         <em class="brace">}</em>
<a id="L1524" name="L1524"></a>1524     <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525 
<a id="L1526" name="L1526"></a>1526     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21314.html" title="Multiple referred from 3 places.">isCustomSubclass</a>() <em class="brace">{</em>
<a id="L1527" name="L1527"></a>1527         <em class="comment">// Return true if this class is a custom subclass of ObjectInputStream</em>
<a id="L1528" name="L1528"></a>1528         <strong class="reserved">return</strong> <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>()
<a id="L1529" name="L1529"></a>1529                     != <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<strong class="reserved">class</strong>.<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>();
<a id="L1530" name="L1530"></a>1530     <em class="brace">}</em>
<a id="L1531" name="L1531"></a>1531 
<div class="comment">
      Reads in and returns class descriptor for a dynamic proxy class.  Sets
      passHandle to proxy class descriptor's assigned handle.  If proxy class
      descriptor cannot be resolved to a class in the local VM, a
      ClassNotFoundException is associated with the descriptor's handle.</div>
<a id="L1538" name="L1538"></a>1538     <strong class="reserved">private</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> <a href="../S/1378.html#L1515" title="Referred from 1515 in src/java/io/ObjectInputStream.java.">readProxyDesc</a>(<strong class="reserved">boolean</strong> unshared)
<a id="L1539" name="L1539"></a>1539         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1540" name="L1540"></a>1540     <em class="brace">{</em>
<a id="L1541" name="L1541"></a>1541         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_PROXYCLASSDESC) <em class="brace">{</em>
<a id="L1542" name="L1542"></a>1542             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1543" name="L1543"></a>1543         <em class="brace">}</em>
<a id="L1544" name="L1544"></a>1544 
<a id="L1545" name="L1545"></a>1545         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <strong class="reserved">new</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>();
<a id="L1546" name="L1546"></a>1546         <strong class="reserved">int</strong> descHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : desc);
<a id="L1547" name="L1547"></a>1547         passHandle = NULL_HANDLE;
<a id="L1548" name="L1548"></a>1548 
<a id="L1549" name="L1549"></a>1549         <strong class="reserved">int</strong> numIfaces = bin.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L1550" name="L1550"></a>1550         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] ifaces = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[numIfaces];
<a id="L1551" name="L1551"></a>1551         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numIfaces; i++) <em class="brace">{</em>
<a id="L1552" name="L1552"></a>1552             ifaces[i] = bin.<a href="../D/30284.html" title="Multiple defined in 9 places.">readUTF</a>();
<a id="L1553" name="L1553"></a>1553         <em class="brace">}</em>
<a id="L1554" name="L1554"></a>1554 
<a id="L1555" name="L1555"></a>1555         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = <strong class="reserved">null</strong>;
<a id="L1556" name="L1556"></a>1556         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> resolveEx = <strong class="reserved">null</strong>;
<a id="L1557" name="L1557"></a>1557         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1558" name="L1558"></a>1558         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1559" name="L1559"></a>1559             <strong class="reserved">if</strong> ((cl = <a href="../S/1378.html#L688" title="Defined at 688 in src/java/io/ObjectInputStream.java.">resolveProxyClass</a>(ifaces)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1560" name="L1560"></a>1560                 resolveEx = <strong class="reserved">new</strong> <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>("null class");
<a id="L1561" name="L1561"></a>1561             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/6957.html" title="Multiple defined in 2 places.">Proxy</a>.<a href="../S/1663.html#L790" title="Defined at 790 in src/java/lang/reflect/Proxy.java.">isProxyClass</a>(cl)) <em class="brace">{</em>
<a id="L1562" name="L1562"></a>1562                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1387.html#L41" title="Defined at 41 in src/java/io/InvalidClassException.java.">InvalidClassException</a>("Not a proxy");
<a id="L1563" name="L1563"></a>1563             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1564" name="L1564"></a>1564                 <em class="comment">// ReflectUtil.checkProxyPackageAccess makes a test</em>
<a id="L1565" name="L1565"></a>1565                 <em class="comment">// equivalent to isCustomSubclass so there's no need</em>
<a id="L1566" name="L1566"></a>1566                 <em class="comment">// to condition this call to isCustomSubclass == true here.</em>
<a id="L1567" name="L1567"></a>1567                 ReflectUtil.checkProxyPackageAccess(
<a id="L1568" name="L1568"></a>1568                         <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>(),
<a id="L1569" name="L1569"></a>1569                         cl.<a href="../D/19802.html" title="Multiple defined in 13 places.">getInterfaces</a>());
<a id="L1570" name="L1570"></a>1570             <em class="brace">}</em>
<a id="L1571" name="L1571"></a>1571         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1572" name="L1572"></a>1572             resolveEx = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L1573" name="L1573"></a>1573         <em class="brace">}</em>
<a id="L1574" name="L1574"></a>1574         <a href="../S/1378.html#L1947" title="Defined at 1947 in src/java/io/ObjectInputStream.java.">skipCustomData</a>();
<a id="L1575" name="L1575"></a>1575 
<a id="L1576" name="L1576"></a>1576         desc.<a href="../S/1402.html#L548" title="Defined at 548 in src/java/io/ObjectStreamClass.java.">initProxy</a>(cl, resolveEx, <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(<strong class="reserved">false</strong>));
<a id="L1577" name="L1577"></a>1577 
<a id="L1578" name="L1578"></a>1578         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(descHandle);
<a id="L1579" name="L1579"></a>1579         passHandle = descHandle;
<a id="L1580" name="L1580"></a>1580         <strong class="reserved">return</strong> desc;
<a id="L1581" name="L1581"></a>1581     <em class="brace">}</em>
<a id="L1582" name="L1582"></a>1582 
<div class="comment">
      Reads in and returns class descriptor for a class that is not a dynamic
      proxy class.  Sets passHandle to class descriptor's assigned handle.  If
      class descriptor cannot be resolved to a class in the local VM, a
      ClassNotFoundException is associated with the descriptor's handle.</div>
<a id="L1589" name="L1589"></a>1589     <strong class="reserved">private</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> <a href="../S/1378.html#L1518" title="Referred from 1518 in src/java/io/ObjectInputStream.java.">readNonProxyDesc</a>(<strong class="reserved">boolean</strong> unshared)
<a id="L1590" name="L1590"></a>1590         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1591" name="L1591"></a>1591     <em class="brace">{</em>
<a id="L1592" name="L1592"></a>1592         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_CLASSDESC) <em class="brace">{</em>
<a id="L1593" name="L1593"></a>1593             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1594" name="L1594"></a>1594         <em class="brace">}</em>
<a id="L1595" name="L1595"></a>1595 
<a id="L1596" name="L1596"></a>1596         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <strong class="reserved">new</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>();
<a id="L1597" name="L1597"></a>1597         <strong class="reserved">int</strong> descHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : desc);
<a id="L1598" name="L1598"></a>1598         passHandle = NULL_HANDLE;
<a id="L1599" name="L1599"></a>1599 
<a id="L1600" name="L1600"></a>1600         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> readDesc = <strong class="reserved">null</strong>;
<a id="L1601" name="L1601"></a>1601         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1602" name="L1602"></a>1602             readDesc = <a href="../S/1378.html#L827" title="Defined at 827 in src/java/io/ObjectInputStream.java.">readClassDescriptor</a>();
<a id="L1603" name="L1603"></a>1603         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1604" name="L1604"></a>1604             <strong class="reserved">throw</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>) <strong class="reserved">new</strong> <a href="../S/1387.html#L41" title="Defined at 41 in src/java/io/InvalidClassException.java.">InvalidClassException</a>(
<a id="L1605" name="L1605"></a>1605                 "failed to read class descriptor").<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1606" name="L1606"></a>1606         <em class="brace">}</em>
<a id="L1607" name="L1607"></a>1607 
<a id="L1608" name="L1608"></a>1608         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = <strong class="reserved">null</strong>;
<a id="L1609" name="L1609"></a>1609         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> resolveEx = <strong class="reserved">null</strong>;
<a id="L1610" name="L1610"></a>1610         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1611" name="L1611"></a>1611         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> checksRequired = <a href="../D/25389.html" title="Multiple defined in 2 places.">isCustomSubclass</a>();
<a id="L1612" name="L1612"></a>1612         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1613" name="L1613"></a>1613             <strong class="reserved">if</strong> ((cl = <a href="../D/31245.html" title="Multiple defined in 7 places.">resolveClass</a>(readDesc)) == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1614" name="L1614"></a>1614                 resolveEx = <strong class="reserved">new</strong> <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>("null class");
<a id="L1615" name="L1615"></a>1615             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (checksRequired) <em class="brace">{</em>
<a id="L1616" name="L1616"></a>1616                 ReflectUtil.<a href="../D/12578.html" title="Multiple defined in 3 places.">checkPackageAccess</a>(cl);
<a id="L1617" name="L1617"></a>1617             <em class="brace">}</em>
<a id="L1618" name="L1618"></a>1618         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1619" name="L1619"></a>1619             resolveEx = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L1620" name="L1620"></a>1620         <em class="brace">}</em>
<a id="L1621" name="L1621"></a>1621         <a href="../S/1378.html#L1947" title="Defined at 1947 in src/java/io/ObjectInputStream.java.">skipCustomData</a>();
<a id="L1622" name="L1622"></a>1622 
<a id="L1623" name="L1623"></a>1623         desc.<a href="../S/1402.html#L580" title="Defined at 580 in src/java/io/ObjectStreamClass.java.">initNonProxy</a>(readDesc, cl, resolveEx, <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(<strong class="reserved">false</strong>));
<a id="L1624" name="L1624"></a>1624 
<a id="L1625" name="L1625"></a>1625         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(descHandle);
<a id="L1626" name="L1626"></a>1626         passHandle = descHandle;
<a id="L1627" name="L1627"></a>1627         <strong class="reserved">return</strong> desc;
<a id="L1628" name="L1628"></a>1628     <em class="brace">}</em>
<a id="L1629" name="L1629"></a>1629 
<div class="comment">
      Reads in and returns new string.  Sets passHandle to new string's
      assigned handle.</div>
<a id="L1634" name="L1634"></a>1634     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25547.html" title="Multiple referred from 3 places.">readString</a>(<strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1635" name="L1635"></a>1635         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>;
<a id="L1636" name="L1636"></a>1636         <strong class="reserved">byte</strong> tc = bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L1637" name="L1637"></a>1637         <strong class="reserved">switch</strong> (tc) <em class="brace">{</em>
<a id="L1638" name="L1638"></a>1638             <strong class="reserved">case</strong> TC_STRING:
<a id="L1639" name="L1639"></a>1639                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = bin.<a href="../D/30284.html" title="Multiple defined in 9 places.">readUTF</a>();
<a id="L1640" name="L1640"></a>1640                 <strong class="reserved">break</strong>;
<a id="L1641" name="L1641"></a>1641 
<a id="L1642" name="L1642"></a>1642             <strong class="reserved">case</strong> TC_LONGSTRING:
<a id="L1643" name="L1643"></a>1643                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = bin.<a href="../S/1378.html#L3044" title="Defined at 3044 in src/java/io/ObjectInputStream.java.">readLongUTF</a>();
<a id="L1644" name="L1644"></a>1644                 <strong class="reserved">break</strong>;
<a id="L1645" name="L1645"></a>1645 
<a id="L1646" name="L1646"></a>1646             <strong class="reserved">default</strong>:
<a id="L1647" name="L1647"></a>1647                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L1648" name="L1648"></a>1648                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid type code: %02X", tc));
<a id="L1649" name="L1649"></a>1649         <em class="brace">}</em>
<a id="L1650" name="L1650"></a>1650         passHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L1651" name="L1651"></a>1651         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(passHandle);
<a id="L1652" name="L1652"></a>1652         <strong class="reserved">return</strong> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>;
<a id="L1653" name="L1653"></a>1653     <em class="brace">}</em>
<a id="L1654" name="L1654"></a>1654 
<div class="comment">
      Reads in and returns array object, or null if array class is
      unresolvable.  Sets passHandle to array's assigned handle.</div>
<a id="L1659" name="L1659"></a>1659     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1378.html#L1345" title="Referred from 1345 in src/java/io/ObjectInputStream.java.">readArray</a>(<strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1660" name="L1660"></a>1660         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_ARRAY) <em class="brace">{</em>
<a id="L1661" name="L1661"></a>1661             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1662" name="L1662"></a>1662         <em class="brace">}</em>
<a id="L1663" name="L1663"></a>1663 
<a id="L1664" name="L1664"></a>1664         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(<strong class="reserved">false</strong>);
<a id="L1665" name="L1665"></a>1665         <strong class="reserved">int</strong> len = bin.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L1666" name="L1666"></a>1666 
<a id="L1667" name="L1667"></a>1667         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <strong class="reserved">null</strong>;
<a id="L1668" name="L1668"></a>1668         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl, ccl = <strong class="reserved">null</strong>;
<a id="L1669" name="L1669"></a>1669         <strong class="reserved">if</strong> ((cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1670" name="L1670"></a>1670             ccl = cl.<a href="../D/17880.html" title="Multiple defined in 2 places.">getComponentType</a>();
<a id="L1671" name="L1671"></a>1671             <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <a href="../D/487.html" title="Multiple defined in 2 places.">Array</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(ccl, len);
<a id="L1672" name="L1672"></a>1672         <em class="brace">}</em>
<a id="L1673" name="L1673"></a>1673 
<a id="L1674" name="L1674"></a>1674         <strong class="reserved">int</strong> arrayHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>);
<a id="L1675" name="L1675"></a>1675         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> resolveEx = desc.<a href="../S/1402.html#L757" title="Defined at 757 in src/java/io/ObjectStreamClass.java.">getResolveException</a>();
<a id="L1676" name="L1676"></a>1676         <strong class="reserved">if</strong> (resolveEx != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1677" name="L1677"></a>1677             handles.<a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(arrayHandle, resolveEx);
<a id="L1678" name="L1678"></a>1678         <em class="brace">}</em>
<a id="L1679" name="L1679"></a>1679 
<a id="L1680" name="L1680"></a>1680         <strong class="reserved">if</strong> (ccl == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1681" name="L1681"></a>1681             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; len; i++) <em class="brace">{</em>
<a id="L1682" name="L1682"></a>1682                 <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<strong class="reserved">false</strong>);
<a id="L1683" name="L1683"></a>1683             <em class="brace">}</em>
<a id="L1684" name="L1684"></a>1684         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L1685" name="L1685"></a>1685             <strong class="reserved">if</strong> (ccl == <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.TYPE) <em class="brace">{</em>
<a id="L1686" name="L1686"></a>1686                 bin.<a href="../S/1378.html#L2955" title="Defined at 2955 in src/java/io/ObjectInputStream.java.">readInts</a>((<strong class="reserved">int</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1687" name="L1687"></a>1687             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../D/1038.html" title="Multiple defined in 2 places.">Byte</a>.TYPE) <em class="brace">{</em>
<a id="L1688" name="L1688"></a>1688                 bin.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>((<strong class="reserved">byte</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len, <strong class="reserved">true</strong>);
<a id="L1689" name="L1689"></a>1689             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.TYPE) <em class="brace">{</em>
<a id="L1690" name="L1690"></a>1690                 bin.<a href="../S/1378.html#L2997" title="Defined at 2997 in src/java/io/ObjectInputStream.java.">readLongs</a>((<strong class="reserved">long</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1691" name="L1691"></a>1691             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.TYPE) <em class="brace">{</em>
<a id="L1692" name="L1692"></a>1692                 bin.<a href="../S/1378.html#L2977" title="Defined at 2977 in src/java/io/ObjectInputStream.java.">readFloats</a>((<strong class="reserved">float</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1693" name="L1693"></a>1693             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.TYPE) <em class="brace">{</em>
<a id="L1694" name="L1694"></a>1694                 bin.<a href="../S/1378.html#L3019" title="Defined at 3019 in src/java/io/ObjectInputStream.java.">readDoubles</a>((<strong class="reserved">double</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1695" name="L1695"></a>1695             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a>.TYPE) <em class="brace">{</em>
<a id="L1696" name="L1696"></a>1696                 bin.<a href="../S/1378.html#L2933" title="Defined at 2933 in src/java/io/ObjectInputStream.java.">readShorts</a>((<strong class="reserved">short</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1697" name="L1697"></a>1697             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.TYPE) <em class="brace">{</em>
<a id="L1698" name="L1698"></a>1698                 bin.<a href="../S/1378.html#L2911" title="Defined at 2911 in src/java/io/ObjectInputStream.java.">readChars</a>((<strong class="reserved">char</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1699" name="L1699"></a>1699             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ccl == <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TYPE) <em class="brace">{</em>
<a id="L1700" name="L1700"></a>1700                 bin.<a href="../S/1378.html#L2890" title="Defined at 2890 in src/java/io/ObjectInputStream.java.">readBooleans</a>((<strong class="reserved">boolean</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, len);
<a id="L1701" name="L1701"></a>1701             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1702" name="L1702"></a>1702                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1703" name="L1703"></a>1703             <em class="brace">}</em>
<a id="L1704" name="L1704"></a>1704         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1705" name="L1705"></a>1705             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../S/7537.html#L81" title="Defined at 81 in src/com/sun/corba/se/spi/oa/OAInvocationInfo.java.">oa</a> = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1706" name="L1706"></a>1706             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; len; i++) <em class="brace">{</em>
<a id="L1707" name="L1707"></a>1707                 <a href="../S/7537.html#L81" title="Defined at 81 in src/com/sun/corba/se/spi/oa/OAInvocationInfo.java.">oa</a>[i] = <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<strong class="reserved">false</strong>);
<a id="L1708" name="L1708"></a>1708                 handles.<a href="../S/1378.html#L3295" title="Defined at 3295 in src/java/io/ObjectInputStream.java.">markDependency</a>(arrayHandle, passHandle);
<a id="L1709" name="L1709"></a>1709             <em class="brace">}</em>
<a id="L1710" name="L1710"></a>1710         <em class="brace">}</em>
<a id="L1711" name="L1711"></a>1711 
<a id="L1712" name="L1712"></a>1712         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(arrayHandle);
<a id="L1713" name="L1713"></a>1713         passHandle = arrayHandle;
<a id="L1714" name="L1714"></a>1714         <strong class="reserved">return</strong> <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L1715" name="L1715"></a>1715     <em class="brace">}</em>
<a id="L1716" name="L1716"></a>1716 
<div class="comment">
      Reads in and returns enum constant, or null if enum type is
      unresolvable.  Sets passHandle to enum constant's assigned handle.</div>
<a id="L1721" name="L1721"></a>1721     <strong class="reserved">private</strong> <a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>&lt;?&gt; <a href="../S/1378.html#L1348" title="Referred from 1348 in src/java/io/ObjectInputStream.java.">readEnum</a>(<strong class="reserved">boolean</strong> unshared) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1722" name="L1722"></a>1722         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_ENUM) <em class="brace">{</em>
<a id="L1723" name="L1723"></a>1723             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1724" name="L1724"></a>1724         <em class="brace">}</em>
<a id="L1725" name="L1725"></a>1725 
<a id="L1726" name="L1726"></a>1726         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(<strong class="reserved">false</strong>);
<a id="L1727" name="L1727"></a>1727         <strong class="reserved">if</strong> (!desc.<a href="../D/25511.html" title="Multiple defined in 3 places.">isEnum</a>()) <em class="brace">{</em>
<a id="L1728" name="L1728"></a>1728             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1387.html#L41" title="Defined at 41 in src/java/io/InvalidClassException.java.">InvalidClassException</a>("non-enum class: " + desc);
<a id="L1729" name="L1729"></a>1729         <em class="brace">}</em>
<a id="L1730" name="L1730"></a>1730 
<a id="L1731" name="L1731"></a>1731         <strong class="reserved">int</strong> enumHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : <strong class="reserved">null</strong>);
<a id="L1732" name="L1732"></a>1732         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> resolveEx = desc.<a href="../S/1402.html#L757" title="Defined at 757 in src/java/io/ObjectStreamClass.java.">getResolveException</a>();
<a id="L1733" name="L1733"></a>1733         <strong class="reserved">if</strong> (resolveEx != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1734" name="L1734"></a>1734             handles.<a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(enumHandle, resolveEx);
<a id="L1735" name="L1735"></a>1735         <em class="brace">}</em>
<a id="L1736" name="L1736"></a>1736 
<a id="L1737" name="L1737"></a>1737         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../D/30265.html" title="Multiple defined in 3 places.">readString</a>(<strong class="reserved">false</strong>);
<a id="L1738" name="L1738"></a>1738         <a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>&lt;?&gt; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong>;
<a id="L1739" name="L1739"></a>1739         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1740" name="L1740"></a>1740         <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1741" name="L1741"></a>1741             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1742" name="L1742"></a>1742                 @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L1743" name="L1743"></a>1743                 <a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>&lt;?&gt; en = <a href="../D/2933.html" title="Multiple defined in 2 places.">Enum</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>((<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>)cl, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1744" name="L1744"></a>1744                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = en;
<a id="L1745" name="L1745"></a>1745             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1746" name="L1746"></a>1746                 <strong class="reserved">throw</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>) <strong class="reserved">new</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>(
<a id="L1747" name="L1747"></a>1747                     "enum constant " + <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> + " does not exist in " +
<a id="L1748" name="L1748"></a>1748                     cl).<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1749" name="L1749"></a>1749             <em class="brace">}</em>
<a id="L1750" name="L1750"></a>1750             <strong class="reserved">if</strong> (!unshared) <em class="brace">{</em>
<a id="L1751" name="L1751"></a>1751                 handles.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(enumHandle, <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L1752" name="L1752"></a>1752             <em class="brace">}</em>
<a id="L1753" name="L1753"></a>1753         <em class="brace">}</em>
<a id="L1754" name="L1754"></a>1754 
<a id="L1755" name="L1755"></a>1755         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(enumHandle);
<a id="L1756" name="L1756"></a>1756         passHandle = enumHandle;
<a id="L1757" name="L1757"></a>1757         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1758" name="L1758"></a>1758     <em class="brace">}</em>
<a id="L1759" name="L1759"></a>1759 
<div class="comment">
      Reads and returns "ordinary" (i.e., not a String, Class,
      ObjectStreamClass, array, or enum constant) object, or null if object's
      class is unresolvable (in which case a ClassNotFoundException will be
      associated with object's handle).  Sets passHandle to object's assigned
      handle.</div>
<a id="L1767" name="L1767"></a>1767     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1378.html#L1351" title="Referred from 1351 in src/java/io/ObjectInputStream.java.">readOrdinaryObject</a>(<strong class="reserved">boolean</strong> unshared)
<a id="L1768" name="L1768"></a>1768         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1769" name="L1769"></a>1769     <em class="brace">{</em>
<a id="L1770" name="L1770"></a>1770         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_OBJECT) <em class="brace">{</em>
<a id="L1771" name="L1771"></a>1771             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L1772" name="L1772"></a>1772         <em class="brace">}</em>
<a id="L1773" name="L1773"></a>1773 
<a id="L1774" name="L1774"></a>1774         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc = <a href="../S/1378.html#L1503" title="Defined at 1503 in src/java/io/ObjectInputStream.java.">readClassDesc</a>(<strong class="reserved">false</strong>);
<a id="L1775" name="L1775"></a>1775         desc.<a href="../S/1402.html#L766" title="Defined at 766 in src/java/io/ObjectStreamClass.java.">checkDeserialize</a>();
<a id="L1776" name="L1776"></a>1776 
<a id="L1777" name="L1777"></a>1777         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1778" name="L1778"></a>1778         <strong class="reserved">if</strong> (cl == <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong> || cl == <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<strong class="reserved">class</strong>
<a id="L1779" name="L1779"></a>1779                 || cl == <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1780" name="L1780"></a>1780             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1387.html#L41" title="Defined at 41 in src/java/io/InvalidClassException.java.">InvalidClassException</a>("invalid class descriptor");
<a id="L1781" name="L1781"></a>1781         <em class="brace">}</em>
<a id="L1782" name="L1782"></a>1782 
<a id="L1783" name="L1783"></a>1783         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj;
<a id="L1784" name="L1784"></a>1784         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1785" name="L1785"></a>1785             obj = desc.<a href="../S/1402.html#L905" title="Defined at 905 in src/java/io/ObjectStreamClass.java.">isInstantiable</a>() ? desc.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>() : <strong class="reserved">null</strong>;
<a id="L1786" name="L1786"></a>1786         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1787" name="L1787"></a>1787             <strong class="reserved">throw</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>) <strong class="reserved">new</strong> <a href="../S/1387.html#L41" title="Defined at 41 in src/java/io/InvalidClassException.java.">InvalidClassException</a>(
<a id="L1788" name="L1788"></a>1788                 desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L1789" name="L1789"></a>1789                 "unable to create instance").<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1790" name="L1790"></a>1790         <em class="brace">}</em>
<a id="L1791" name="L1791"></a>1791 
<a id="L1792" name="L1792"></a>1792         passHandle = handles.<a href="../D/11593.html" title="Multiple defined in 17 places.">assign</a>(unshared ? unsharedMarker : obj);
<a id="L1793" name="L1793"></a>1793         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> resolveEx = desc.<a href="../S/1402.html#L757" title="Defined at 757 in src/java/io/ObjectStreamClass.java.">getResolveException</a>();
<a id="L1794" name="L1794"></a>1794         <strong class="reserved">if</strong> (resolveEx != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1795" name="L1795"></a>1795             handles.<a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(passHandle, resolveEx);
<a id="L1796" name="L1796"></a>1796         <em class="brace">}</em>
<a id="L1797" name="L1797"></a>1797 
<a id="L1798" name="L1798"></a>1798         <strong class="reserved">if</strong> (desc.<a href="../D/25538.html" title="Multiple defined in 4 places.">isExternalizable</a>()) <em class="brace">{</em>
<a id="L1799" name="L1799"></a>1799             <a href="../S/1378.html#L1828" title="Defined at 1828 in src/java/io/ObjectInputStream.java.">readExternalData</a>((<a href="../S/1425.html#L66" title="Defined at 66 in src/java/io/Externalizable.java.">Externalizable</a>) obj, desc);
<a id="L1800" name="L1800"></a>1800         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1801" name="L1801"></a>1801             <a href="../S/1378.html#L1882" title="Defined at 1882 in src/java/io/ObjectInputStream.java.">readSerialData</a>(obj, desc);
<a id="L1802" name="L1802"></a>1802         <em class="brace">}</em>
<a id="L1803" name="L1803"></a>1803 
<a id="L1804" name="L1804"></a>1804         handles.<a href="../D/16280.html" title="Multiple defined in 8 places.">finish</a>(passHandle);
<a id="L1805" name="L1805"></a>1805 
<a id="L1806" name="L1806"></a>1806         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1807" name="L1807"></a>1807             handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle) == <strong class="reserved">null</strong> &amp;&amp;
<a id="L1808" name="L1808"></a>1808             desc.<a href="../S/1402.html#L948" title="Defined at 948 in src/java/io/ObjectStreamClass.java.">hasReadResolveMethod</a>())
<a id="L1809" name="L1809"></a>1809         <em class="brace">{</em>
<a id="L1810" name="L1810"></a>1810             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> rep = desc.<a href="../S/1402.html#L1099" title="Defined at 1099 in src/java/io/ObjectStreamClass.java.">invokeReadResolve</a>(obj);
<a id="L1811" name="L1811"></a>1811             <strong class="reserved">if</strong> (unshared &amp;&amp; rep.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/25208.html" title="Multiple defined in 5 places.">isArray</a>()) <em class="brace">{</em>
<a id="L1812" name="L1812"></a>1812                 rep = <a href="../D/12891.html" title="Multiple defined in 2 places.">cloneArray</a>(rep);
<a id="L1813" name="L1813"></a>1813             <em class="brace">}</em>
<a id="L1814" name="L1814"></a>1814             <strong class="reserved">if</strong> (rep != obj) <em class="brace">{</em>
<a id="L1815" name="L1815"></a>1815                 handles.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(passHandle, obj = rep);
<a id="L1816" name="L1816"></a>1816             <em class="brace">}</em>
<a id="L1817" name="L1817"></a>1817         <em class="brace">}</em>
<a id="L1818" name="L1818"></a>1818 
<a id="L1819" name="L1819"></a>1819         <strong class="reserved">return</strong> obj;
<a id="L1820" name="L1820"></a>1820     <em class="brace">}</em>
<a id="L1821" name="L1821"></a>1821 
<div class="comment">
      If obj is non-null, reads externalizable data by invoking readExternal()
      method of obj; otherwise, attempts to skip over externalizable data.
      Expects that passHandle is set to obj's handle before this method is
      called.</div>
<a id="L1828" name="L1828"></a>1828     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1378.html#L1799" title="Referred from 1799 in src/java/io/ObjectInputStream.java.">readExternalData</a>(<a href="../S/1425.html#L66" title="Defined at 66 in src/java/io/Externalizable.java.">Externalizable</a> obj, <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L1829" name="L1829"></a>1829         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1830" name="L1830"></a>1830     <em class="brace">{</em>
<a id="L1831" name="L1831"></a>1831         <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> oldContext = curContext;
<a id="L1832" name="L1832"></a>1832         <strong class="reserved">if</strong> (oldContext != <strong class="reserved">null</strong>)
<a id="L1833" name="L1833"></a>1833             oldContext.<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>();
<a id="L1834" name="L1834"></a>1834         curContext = <strong class="reserved">null</strong>;
<a id="L1835" name="L1835"></a>1835         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1836" name="L1836"></a>1836             <strong class="reserved">boolean</strong> blocked = desc.<a href="../S/1402.html#L885" title="Defined at 885 in src/java/io/ObjectStreamClass.java.">hasBlockExternalData</a>();
<a id="L1837" name="L1837"></a>1837             <strong class="reserved">if</strong> (blocked) <em class="brace">{</em>
<a id="L1838" name="L1838"></a>1838                 bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1839" name="L1839"></a>1839             <em class="brace">}</em>
<a id="L1840" name="L1840"></a>1840             <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1841" name="L1841"></a>1841                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1842" name="L1842"></a>1842                     obj.<a href="../D/30178.html" title="Multiple defined in 35 places.">readExternal</a>(<strong class="reserved">this</strong>);
<a id="L1843" name="L1843"></a>1843                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<div class="comment">
                      In most cases, the handle table has already propagated
                      a CNFException to passHandle at this point; this mark
                      call is included to address cases where the readExternal
                      method has cons'ed and thrown a new CNFException of its
                      own.</div>
<a id="L1851" name="L1851"></a>1851                      handles.<a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(passHandle, <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1852" name="L1852"></a>1852                 <em class="brace">}</em>
<a id="L1853" name="L1853"></a>1853             <em class="brace">}</em>
<a id="L1854" name="L1854"></a>1854             <strong class="reserved">if</strong> (blocked) <em class="brace">{</em>
<a id="L1855" name="L1855"></a>1855                 <a href="../S/1378.html#L1947" title="Defined at 1947 in src/java/io/ObjectInputStream.java.">skipCustomData</a>();
<a id="L1856" name="L1856"></a>1856             <em class="brace">}</em>
<a id="L1857" name="L1857"></a>1857         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1858" name="L1858"></a>1858             <strong class="reserved">if</strong> (oldContext != <strong class="reserved">null</strong>)
<a id="L1859" name="L1859"></a>1859                 oldContext.<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>();
<a id="L1860" name="L1860"></a>1860             curContext = oldContext;
<a id="L1861" name="L1861"></a>1861         <em class="brace">}</em>
<div class="comment">
          At this point, if the externalizable data was not written in
          block-data form and either the externalizable class doesn't exist
          locally (i.e., obj == null) or readExternal() just threw a
          CNFException, then the stream is probably in an inconsistent state,
          since some (or all) of the externalizable data may not have been
          consumed.  Since there's no "correct" action to take in this case,
          we mimic the behavior of past serialization implementations and
          blindly hope that the stream is in sync; if it isn't and additional
          externalizable data remains in the stream, a subsequent read will
          most likely throw a StreamCorruptedException.</div>
<a id="L1874" name="L1874"></a>1874     <em class="brace">}</em>
<a id="L1875" name="L1875"></a>1875 
<div class="comment">
      Reads (or attempts to skip, if obj is null or is tagged with a
      ClassNotFoundException) instance data for each serializable class of
      object in stream, from superclass to subclass.  Expects that passHandle
      is set to obj's handle before this method is called.</div>
<a id="L1882" name="L1882"></a>1882     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1378.html#L1801" title="Referred from 1801 in src/java/io/ObjectInputStream.java.">readSerialData</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L1883" name="L1883"></a>1883         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1884" name="L1884"></a>1884     <em class="brace">{</em>
<a id="L1885" name="L1885"></a>1885         <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a>.<a href="../S/1402.html#L1128" title="Defined at 1128 in src/java/io/ObjectStreamClass.java.">ClassDataSlot</a>[] slots = desc.<a href="../S/1402.html#L1148" title="Defined at 1148 in src/java/io/ObjectStreamClass.java.">getClassDataLayout</a>();
<a id="L1886" name="L1886"></a>1886         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; slots.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1887" name="L1887"></a>1887             <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> slotDesc = slots[i].desc;
<a id="L1888" name="L1888"></a>1888 
<a id="L1889" name="L1889"></a>1889             <strong class="reserved">if</strong> (slots[i].hasData) <em class="brace">{</em>
<a id="L1890" name="L1890"></a>1890                 <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong> || handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1891" name="L1891"></a>1891                     <a href="../S/1378.html#L1977" title="Defined at 1977 in src/java/io/ObjectInputStream.java.">defaultReadFields</a>(<strong class="reserved">null</strong>, slotDesc); <em class="comment">// skip field values</em>
<a id="L1892" name="L1892"></a>1892                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (slotDesc.<a href="../S/1402.html#L923" title="Defined at 923 in src/java/io/ObjectStreamClass.java.">hasReadObjectMethod</a>()) <em class="brace">{</em>
<a id="L1893" name="L1893"></a>1893                     <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a> oldContext = curContext;
<a id="L1894" name="L1894"></a>1894                     <strong class="reserved">if</strong> (oldContext != <strong class="reserved">null</strong>)
<a id="L1895" name="L1895"></a>1895                         oldContext.<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>();
<a id="L1896" name="L1896"></a>1896                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1897" name="L1897"></a>1897                         curContext = <strong class="reserved">new</strong> <a href="../S/1441.html#L39" title="Defined at 39 in src/java/io/SerialCallbackContext.java.">SerialCallbackContext</a>(obj, slotDesc);
<a id="L1898" name="L1898"></a>1898 
<a id="L1899" name="L1899"></a>1899                         bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1900" name="L1900"></a>1900                         slotDesc.<a href="../S/1402.html#L1011" title="Defined at 1011 in src/java/io/ObjectStreamClass.java.">invokeReadObject</a>(obj, <strong class="reserved">this</strong>);
<a id="L1901" name="L1901"></a>1901                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<div class="comment">
                          In most cases, the handle table has already
                          propagated a CNFException to passHandle at this
                          point; this mark call is included to address cases
                          where the custom readObject method has cons'ed and
                          thrown a new CNFException of its own.</div>
<a id="L1909" name="L1909"></a>1909                         handles.<a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(passHandle, <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1910" name="L1910"></a>1910                     <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1911" name="L1911"></a>1911                         curContext.<a href="../S/1441.html#L78" title="Defined at 78 in src/java/io/SerialCallbackContext.java.">setUsed</a>();
<a id="L1912" name="L1912"></a>1912                         <strong class="reserved">if</strong> (oldContext!= <strong class="reserved">null</strong>)
<a id="L1913" name="L1913"></a>1913                             oldContext.<a href="../D/12348.html" title="Multiple defined in 34 places.">check</a>();
<a id="L1914" name="L1914"></a>1914                         curContext = oldContext;
<a id="L1915" name="L1915"></a>1915                     <em class="brace">}</em>
<a id="L1916" name="L1916"></a>1916 
<div class="comment">
                      defaultDataEnd may have been set indirectly by custom
                      readObject() method when calling defaultReadObject() or
                      readFields(); clear it to restore normal read behavior.</div>
<a id="L1922" name="L1922"></a>1922                     defaultDataEnd = <strong class="reserved">false</strong>;
<a id="L1923" name="L1923"></a>1923                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1924" name="L1924"></a>1924                     <a href="../S/1378.html#L1977" title="Defined at 1977 in src/java/io/ObjectInputStream.java.">defaultReadFields</a>(obj, slotDesc);
<a id="L1925" name="L1925"></a>1925                 <em class="brace">}</em>
<a id="L1926" name="L1926"></a>1926 
<a id="L1927" name="L1927"></a>1927                 <strong class="reserved">if</strong> (slotDesc.<a href="../S/1402.html#L894" title="Defined at 894 in src/java/io/ObjectStreamClass.java.">hasWriteObjectData</a>()) <em class="brace">{</em>
<a id="L1928" name="L1928"></a>1928                     <a href="../S/1378.html#L1947" title="Defined at 1947 in src/java/io/ObjectInputStream.java.">skipCustomData</a>();
<a id="L1929" name="L1929"></a>1929                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1930" name="L1930"></a>1930                     bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1931" name="L1931"></a>1931                 <em class="brace">}</em>
<a id="L1932" name="L1932"></a>1932             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1933" name="L1933"></a>1933                 <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1934" name="L1934"></a>1934                     slotDesc.<a href="../S/1402.html#L932" title="Defined at 932 in src/java/io/ObjectStreamClass.java.">hasReadObjectNoDataMethod</a>() &amp;&amp;
<a id="L1935" name="L1935"></a>1935                     handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(passHandle) == <strong class="reserved">null</strong>)
<a id="L1936" name="L1936"></a>1936                 <em class="brace">{</em>
<a id="L1937" name="L1937"></a>1937                     slotDesc.<a href="../S/1402.html#L1042" title="Defined at 1042 in src/java/io/ObjectStreamClass.java.">invokeReadObjectNoData</a>(obj);
<a id="L1938" name="L1938"></a>1938                 <em class="brace">}</em>
<a id="L1939" name="L1939"></a>1939             <em class="brace">}</em>
<a id="L1940" name="L1940"></a>1940         <em class="brace">}</em>
<a id="L1941" name="L1941"></a>1941     <em class="brace">}</em>
<a id="L1942" name="L1942"></a>1942 
<div class="comment">
      Skips over all block data and objects until TC_ENDBLOCKDATA is
      encountered.</div>
<a id="L1947" name="L1947"></a>1947     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/28647.html" title="Multiple referred from 4 places.">skipCustomData</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1948" name="L1948"></a>1948         <strong class="reserved">int</strong> oldHandle = passHandle;
<a id="L1949" name="L1949"></a>1949         <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L1950" name="L1950"></a>1950             <strong class="reserved">if</strong> (bin.<a href="../D/17273.html" title="Multiple defined in 2 places.">getBlockDataMode</a>()) <em class="brace">{</em>
<a id="L1951" name="L1951"></a>1951                 bin.<a href="../S/1378.html#L2450" title="Defined at 2450 in src/java/io/ObjectInputStream.java.">skipBlockData</a>();
<a id="L1952" name="L1952"></a>1952                 bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">false</strong>);
<a id="L1953" name="L1953"></a>1953             <em class="brace">}</em>
<a id="L1954" name="L1954"></a>1954             <strong class="reserved">switch</strong> (bin.<a href="../S/1378.html#L2605" title="Defined at 2605 in src/java/io/ObjectInputStream.java.">peekByte</a>()) <em class="brace">{</em>
<a id="L1955" name="L1955"></a>1955                 <strong class="reserved">case</strong> TC_BLOCKDATA:
<a id="L1956" name="L1956"></a>1956                 <strong class="reserved">case</strong> TC_BLOCKDATALONG:
<a id="L1957" name="L1957"></a>1957                     bin.<a href="../D/32005.html" title="Multiple defined in 2 places.">setBlockDataMode</a>(<strong class="reserved">true</strong>);
<a id="L1958" name="L1958"></a>1958                     <strong class="reserved">break</strong>;
<a id="L1959" name="L1959"></a>1959 
<a id="L1960" name="L1960"></a>1960                 <strong class="reserved">case</strong> TC_ENDBLOCKDATA:
<a id="L1961" name="L1961"></a>1961                     bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L1962" name="L1962"></a>1962                     passHandle = oldHandle;
<a id="L1963" name="L1963"></a>1963                     <strong class="reserved">return</strong>;
<a id="L1964" name="L1964"></a>1964 
<a id="L1965" name="L1965"></a>1965                 <strong class="reserved">default</strong>:
<a id="L1966" name="L1966"></a>1966                     <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<strong class="reserved">false</strong>);
<a id="L1967" name="L1967"></a>1967                     <strong class="reserved">break</strong>;
<a id="L1968" name="L1968"></a>1968             <em class="brace">}</em>
<a id="L1969" name="L1969"></a>1969         <em class="brace">}</em>
<a id="L1970" name="L1970"></a>1970     <em class="brace">}</em>
<a id="L1971" name="L1971"></a>1971 
<div class="comment">
      Reads in values of serializable fields declared by given class
      descriptor.  If obj is non-null, sets field values in obj.  Expects that
      passHandle is set to obj's handle before this method is called.</div>
<a id="L1977" name="L1977"></a>1977     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13158.html" title="Multiple referred from 3 places.">defaultReadFields</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj, <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc)
<a id="L1978" name="L1978"></a>1978         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1979" name="L1979"></a>1979     <em class="brace">{</em>
<a id="L1980" name="L1980"></a>1980         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cl = desc.<a href="../D/16507.html" title="Multiple defined in 3 places.">forClass</a>();
<a id="L1981" name="L1981"></a>1981         <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong> &amp;&amp; obj != <strong class="reserved">null</strong> &amp;&amp; !cl.<a href="../S/1722.html#L483" title="Defined at 483 in src/java/lang/Class.java.">isInstance</a>(obj)) <em class="brace">{</em>
<a id="L1982" name="L1982"></a>1982             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a>();
<a id="L1983" name="L1983"></a>1983         <em class="brace">}</em>
<a id="L1984" name="L1984"></a>1984 
<a id="L1985" name="L1985"></a>1985         <strong class="reserved">int</strong> primDataSize = desc.<a href="../S/1402.html#L1214" title="Defined at 1214 in src/java/io/ObjectStreamClass.java.">getPrimDataSize</a>();
<a id="L1986" name="L1986"></a>1986         <strong class="reserved">if</strong> (primVals == <strong class="reserved">null</strong> || primVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; primDataSize) <em class="brace">{</em>
<a id="L1987" name="L1987"></a>1987             primVals = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[primDataSize];
<a id="L1988" name="L1988"></a>1988         <em class="brace">}</em>
<a id="L1989" name="L1989"></a>1989         bin.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(primVals, 0, primDataSize, <strong class="reserved">false</strong>);
<a id="L1990" name="L1990"></a>1990         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1991" name="L1991"></a>1991             desc.<a href="../D/33597.html" title="Multiple defined in 2 places.">setPrimFieldValues</a>(obj, primVals);
<a id="L1992" name="L1992"></a>1992         <em class="brace">}</em>
<a id="L1993" name="L1993"></a>1993 
<a id="L1994" name="L1994"></a>1994         <strong class="reserved">int</strong> objHandle = passHandle;
<a id="L1995" name="L1995"></a>1995         <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a> = desc.<a href="../D/19038.html" title="Multiple defined in 15 places.">getFields</a>(<strong class="reserved">false</strong>);
<a id="L1996" name="L1996"></a>1996         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] objVals = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[desc.<a href="../S/1402.html#L1222" title="Defined at 1222 in src/java/io/ObjectStreamClass.java.">getNumObjFields</a>()];
<a id="L1997" name="L1997"></a>1997         <strong class="reserved">int</strong> numPrimFields = <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1998" name="L1998"></a>1998         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1999" name="L1999"></a>1999             <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a> f = <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i];
<a id="L2000" name="L2000"></a>2000             objVals[i] = <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(f.<a href="../S/1446.html#L247" title="Defined at 247 in src/java/io/ObjectStreamField.java.">isUnshared</a>());
<a id="L2001" name="L2001"></a>2001             <strong class="reserved">if</strong> (f.<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2002" name="L2002"></a>2002                 handles.<a href="../S/1378.html#L3295" title="Defined at 3295 in src/java/io/ObjectInputStream.java.">markDependency</a>(objHandle, passHandle);
<a id="L2003" name="L2003"></a>2003             <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004         <em class="brace">}</em>
<a id="L2005" name="L2005"></a>2005         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2006" name="L2006"></a>2006             desc.<a href="../D/33400.html" title="Multiple defined in 2 places.">setObjFieldValues</a>(obj, objVals);
<a id="L2007" name="L2007"></a>2007         <em class="brace">}</em>
<a id="L2008" name="L2008"></a>2008         passHandle = objHandle;
<a id="L2009" name="L2009"></a>2009     <em class="brace">}</em>
<a id="L2010" name="L2010"></a>2010 
<div class="comment">
      Reads in and returns IOException that caused serialization to abort.
      All stream state is discarded prior to reading in fatal exception.  Sets
      passHandle to fatal exception's handle.</div>
<a id="L2016" name="L2016"></a>2016     <strong class="reserved">private</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/1378.html#L1354" title="Referred from 1354 in src/java/io/ObjectInputStream.java.">readFatalException</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2017" name="L2017"></a>2017         <strong class="reserved">if</strong> (bin.<a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() != TC_EXCEPTION) <em class="brace">{</em>
<a id="L2018" name="L2018"></a>2018             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L2019" name="L2019"></a>2019         <em class="brace">}</em>
<a id="L2020" name="L2020"></a>2020         <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L2021" name="L2021"></a>2021         <strong class="reserved">return</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>) <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<strong class="reserved">false</strong>);
<a id="L2022" name="L2022"></a>2022     <em class="brace">}</em>
<a id="L2023" name="L2023"></a>2023 
<div class="comment">
      If recursion depth is 0, clears internal data structures; otherwise,
      throws a StreamCorruptedException.  This method is called when a
      TC_RESET typecode is encountered.</div>
<a id="L2029" name="L2029"></a>2029     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20139.html" title="Multiple referred from 2 places.">handleReset</a>() <strong class="reserved">throws</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a> <em class="brace">{</em>
<a id="L2030" name="L2030"></a>2030         <strong class="reserved">if</strong> (<a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a> &gt; 0) <em class="brace">{</em>
<a id="L2031" name="L2031"></a>2031             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L2032" name="L2032"></a>2032                 "unexpected reset; recursion depth: " + <a href="../S/3238.html#L188" title="Defined at 188 in src/javax/swing/text/ElementIterator.java.">depth</a>);
<a id="L2033" name="L2033"></a>2033         <em class="brace">}</em>
<a id="L2034" name="L2034"></a>2034         <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L2035" name="L2035"></a>2035     <em class="brace">}</em>
<a id="L2036" name="L2036"></a>2036 
<div class="comment">
      Converts specified span of bytes into float values.</div>
<a id="L2040" name="L2040"></a>2040     <em class="comment">// REMIND: remove once hotspot inlines Float.intBitsToFloat</em>
<a id="L2041" name="L2041"></a>2041     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../S/1378.html#L2991" title="Referred from 2991 in src/java/io/ObjectInputStream.java.">bytesToFloats</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">int</strong> srcpos,
<a id="L2042" name="L2042"></a>2042                                              <strong class="reserved">float</strong>[] dst, <strong class="reserved">int</strong> dstpos,
<a id="L2043" name="L2043"></a>2043                                              <strong class="reserved">int</strong> nfloats);
<a id="L2044" name="L2044"></a>2044 
<div class="comment">
      Converts specified span of bytes into double values.</div>
<a id="L2048" name="L2048"></a>2048     <em class="comment">// REMIND: remove once hotspot inlines Double.longBitsToDouble</em>
<a id="L2049" name="L2049"></a>2049     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../S/1378.html#L3033" title="Referred from 3033 in src/java/io/ObjectInputStream.java.">bytesToDoubles</a>(<strong class="reserved">byte</strong>[] src, <strong class="reserved">int</strong> srcpos,
<a id="L2050" name="L2050"></a>2050                                               <strong class="reserved">double</strong>[] dst, <strong class="reserved">int</strong> dstpos,
<a id="L2051" name="L2051"></a>2051                                               <strong class="reserved">int</strong> ndoubles);
<a id="L2052" name="L2052"></a>2052 
<div class="comment">
      Returns the first non-null class loader (not counting class loaders of
      generated reflection implementation classes) up the execution stack, or
      null if only code from the null class loader is on the stack.  This
      method is also called via reflection by the following RMI-IIOP class:
          com.sun.corba.se.internal.util.JDKClassLoader
      This method should not be removed or its signature changed without
      corresponding modifications to the above class.</div>
<a id="L2064" name="L2064"></a>2064     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> <a href="../R/22428.html" title="Multiple referred from 3 places.">latestUserDefinedLoader</a>() <em class="brace">{</em>
<a id="L2065" name="L2065"></a>2065         <strong class="reserved">return</strong> sun.misc.VM.<a href="../S/1378.html#L2064" title="Defined at 2064 in src/java/io/ObjectInputStream.java.">latestUserDefinedLoader</a>();
<a id="L2066" name="L2066"></a>2066     <em class="brace">}</em>
<a id="L2067" name="L2067"></a>2067 
<div class="comment">
      Default GetField implementation.</div>
<a id="L2071" name="L2071"></a>2071     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../S/1378.html#L540" title="Referred from 540 in src/java/io/ObjectInputStream.java.">GetFieldImpl</a> <strong class="reserved">extends</strong> <a href="../S/1378.html#L1079" title="Defined at 1079 in src/java/io/ObjectInputStream.java.">GetField</a> <em class="brace">{</em>
<a id="L2072" name="L2072"></a>2072 
<div class="comment">
         /** class descriptor describing serializable fields */</div>
<a id="L2074" name="L2074"></a>2074         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc;
<div class="comment">
         /** primitive field values */</div>
<a id="L2076" name="L2076"></a>2076         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] primVals;
<div class="comment">
         /** object field values */</div>
<a id="L2078" name="L2078"></a>2078         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] objVals;
<div class="comment">
         /** object field value handles */</div>
<a id="L2080" name="L2080"></a>2080         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>[] objHandles;
<a id="L2081" name="L2081"></a>2081 
<div class="comment">
          Creates GetFieldImpl object for reading fields defined in given
          class descriptor.</div>
<a id="L2086" name="L2086"></a>2086         GetFieldImpl(<a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> desc) <em class="brace">{</em>
<a id="L2087" name="L2087"></a>2087             <strong class="reserved">this</strong>.desc = desc;
<a id="L2088" name="L2088"></a>2088             primVals = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[desc.<a href="../S/1402.html#L1214" title="Defined at 1214 in src/java/io/ObjectStreamClass.java.">getPrimDataSize</a>()];
<a id="L2089" name="L2089"></a>2089             objVals = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[desc.<a href="../S/1402.html#L1222" title="Defined at 1222 in src/java/io/ObjectStreamClass.java.">getNumObjFields</a>()];
<a id="L2090" name="L2090"></a>2090             objHandles = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L2091" name="L2091"></a>2091         <em class="brace">}</em>
<a id="L2092" name="L2092"></a>2092 
<a id="L2093" name="L2093"></a>2093         <strong class="reserved">public</strong> <a href="../D/6327.html" title="Multiple defined in 2 places.">ObjectStreamClass</a> getObjectStreamClass() <em class="brace">{</em>
<a id="L2094" name="L2094"></a>2094             <strong class="reserved">return</strong> desc;
<a id="L2095" name="L2095"></a>2095         <em class="brace">}</em>
<a id="L2096" name="L2096"></a>2096 
<a id="L2097" name="L2097"></a>2097         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13169.html" title="Multiple referred from 69 places.">defaulted</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2098" name="L2098"></a>2098             <strong class="reserved">return</strong> (<a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">null</strong>) &lt; 0);
<a id="L2099" name="L2099"></a>2099         <em class="brace">}</em>
<a id="L2100" name="L2100"></a>2100 
<a id="L2101" name="L2101"></a>2101         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">boolean</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2102" name="L2102"></a>2102             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TYPE);
<a id="L2103" name="L2103"></a>2103             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/17286.html" title="Multiple defined in 18 places.">getBoolean</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2104" name="L2104"></a>2104         <em class="brace">}</em>
<a id="L2105" name="L2105"></a>2105 
<a id="L2106" name="L2106"></a>2106         <strong class="reserved">public</strong> <strong class="reserved">byte</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">byte</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2107" name="L2107"></a>2107             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/1038.html" title="Multiple defined in 2 places.">Byte</a>.TYPE);
<a id="L2108" name="L2108"></a>2108             <strong class="reserved">return</strong> (off &gt;= 0) ? primVals[off] : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2109" name="L2109"></a>2109         <em class="brace">}</em>
<a id="L2110" name="L2110"></a>2110 
<a id="L2111" name="L2111"></a>2111         <strong class="reserved">public</strong> <strong class="reserved">char</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">char</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2112" name="L2112"></a>2112             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.TYPE);
<a id="L2113" name="L2113"></a>2113             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/17574.html" title="Multiple defined in 21 places.">getChar</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2114" name="L2114"></a>2114         <em class="brace">}</em>
<a id="L2115" name="L2115"></a>2115 
<a id="L2116" name="L2116"></a>2116         <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">short</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2117" name="L2117"></a>2117             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a>.TYPE);
<a id="L2118" name="L2118"></a>2118             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/22477.html" title="Multiple defined in 18 places.">getShort</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2119" name="L2119"></a>2119         <em class="brace">}</em>
<a id="L2120" name="L2120"></a>2120 
<a id="L2121" name="L2121"></a>2121         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2122" name="L2122"></a>2122             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.TYPE);
<a id="L2123" name="L2123"></a>2123             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/19781.html" title="Multiple defined in 33 places.">getInt</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2124" name="L2124"></a>2124         <em class="brace">}</em>
<a id="L2125" name="L2125"></a>2125 
<a id="L2126" name="L2126"></a>2126         <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">float</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2127" name="L2127"></a>2127             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.TYPE);
<a id="L2128" name="L2128"></a>2128             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/19143.html" title="Multiple defined in 18 places.">getFloat</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2129" name="L2129"></a>2129         <em class="brace">}</em>
<a id="L2130" name="L2130"></a>2130 
<a id="L2131" name="L2131"></a>2131         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">long</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2132" name="L2132"></a>2132             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.TYPE);
<a id="L2133" name="L2133"></a>2133             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/20280.html" title="Multiple defined in 48 places.">getLong</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2134" name="L2134"></a>2134         <em class="brace">}</em>
<a id="L2135" name="L2135"></a>2135 
<a id="L2136" name="L2136"></a>2136         <strong class="reserved">public</strong> <strong class="reserved">double</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">double</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2137" name="L2137"></a>2137             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.TYPE);
<a id="L2138" name="L2138"></a>2138             <strong class="reserved">return</strong> (off &gt;= 0) ? <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/18583.html" title="Multiple defined in 19 places.">getDouble</a>(primVals, off) : <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2139" name="L2139"></a>2139         <em class="brace">}</em>
<a id="L2140" name="L2140"></a>2140 
<a id="L2141" name="L2141"></a>2141         <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2142" name="L2142"></a>2142             <strong class="reserved">int</strong> off = <a href="../D/19030.html" title="Multiple defined in 2 places.">getFieldOffset</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>);
<a id="L2143" name="L2143"></a>2143             <strong class="reserved">if</strong> (off &gt;= 0) <em class="brace">{</em>
<a id="L2144" name="L2144"></a>2144                 <strong class="reserved">int</strong> objHandle = objHandles[off];
<a id="L2145" name="L2145"></a>2145                 handles.<a href="../S/1378.html#L3295" title="Defined at 3295 in src/java/io/ObjectInputStream.java.">markDependency</a>(passHandle, objHandle);
<a id="L2146" name="L2146"></a>2146                 <strong class="reserved">return</strong> (handles.<a href="../S/1378.html#L3444" title="Defined at 3444 in src/java/io/ObjectInputStream.java.">lookupException</a>(objHandle) == <strong class="reserved">null</strong>) ?
<a id="L2147" name="L2147"></a>2147                     objVals[off] : <strong class="reserved">null</strong>;
<a id="L2148" name="L2148"></a>2148             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2149" name="L2149"></a>2149                 <strong class="reserved">return</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2150" name="L2150"></a>2150             <em class="brace">}</em>
<a id="L2151" name="L2151"></a>2151         <em class="brace">}</em>
<a id="L2152" name="L2152"></a>2152 
<div class="comment">
          Reads primitive and object field values from stream.</div>
<a id="L2156" name="L2156"></a>2156         <strong class="reserved">void</strong> <a href="../R/25472.html" title="Multiple referred from 62 places.">readFields</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2157" name="L2157"></a>2157             bin.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(primVals, 0, primVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">false</strong>);
<a id="L2158" name="L2158"></a>2158 
<a id="L2159" name="L2159"></a>2159             <strong class="reserved">int</strong> oldHandle = passHandle;
<a id="L2160" name="L2160"></a>2160             <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a> = desc.<a href="../D/19038.html" title="Multiple defined in 15 places.">getFields</a>(<strong class="reserved">false</strong>);
<a id="L2161" name="L2161"></a>2161             <strong class="reserved">int</strong> numPrimFields = <a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L2162" name="L2162"></a>2162             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; objVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L2163" name="L2163"></a>2163                 objVals[i] =
<a id="L2164" name="L2164"></a>2164                     <a href="../S/1378.html#L1300" title="Defined at 1300 in src/java/io/ObjectInputStream.java.">readObject0</a>(<a href="../D/16020.html" title="Multiple defined in 2 places.">fields</a>[numPrimFields + i].<a href="../S/1446.html#L247" title="Defined at 247 in src/java/io/ObjectStreamField.java.">isUnshared</a>());
<a id="L2165" name="L2165"></a>2165                 objHandles[i] = passHandle;
<a id="L2166" name="L2166"></a>2166             <em class="brace">}</em>
<a id="L2167" name="L2167"></a>2167             passHandle = oldHandle;
<a id="L2168" name="L2168"></a>2168         <em class="brace">}</em>
<a id="L2169" name="L2169"></a>2169 
<div class="comment">
          Returns offset of field with given name and type.  A specified type
          of null matches all types, Object.class matches all non-primitive
          types, and any other non-null type matches assignable types only.
          If no matching field is found in the (incoming) class
          descriptor but a matching field is present in the associated local
          class descriptor, returns -1.  Throws IllegalArgumentException if
          neither incoming nor local class descriptor contains a match.</div>
<a id="L2179" name="L2179"></a>2179         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/16559.html" title="Multiple referred from 19 places.">getFieldOffset</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L2180" name="L2180"></a>2180             <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a> field = desc.<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L2181" name="L2181"></a>2181             <strong class="reserved">if</strong> (field != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2182" name="L2182"></a>2182                 <strong class="reserved">return</strong> field.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L2183" name="L2183"></a>2183             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (desc.<a href="../S/1402.html#L811" title="Defined at 811 in src/java/io/ObjectStreamClass.java.">getLocalDesc</a>().<a href="../D/19018.html" title="Multiple defined in 13 places.">getField</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2184" name="L2184"></a>2184                 <strong class="reserved">return</strong> -1;
<a id="L2185" name="L2185"></a>2185             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2186" name="L2186"></a>2186                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("no such field " + <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> +
<a id="L2187" name="L2187"></a>2187                                                    " with type " + <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L2188" name="L2188"></a>2188             <em class="brace">}</em>
<a id="L2189" name="L2189"></a>2189         <em class="brace">}</em>
<a id="L2190" name="L2190"></a>2190     <em class="brace">}</em>
<a id="L2191" name="L2191"></a>2191 
<div class="comment">
      Prioritized list of callbacks to be performed once object graph has been
      completely deserialized.</div>
<a id="L2196" name="L2196"></a>2196     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/8606.html" title="Multiple referred from 2 places.">ValidationList</a> <em class="brace">{</em>
<a id="L2197" name="L2197"></a>2197 
<a id="L2198" name="L2198"></a>2198         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/1148.html" title="Multiple referred from 37 places.">Callback</a> <em class="brace">{</em>
<a id="L2199" name="L2199"></a>2199             <strong class="reserved">final</strong> <a href="../S/1373.html#L38" title="Defined at 38 in src/java/io/ObjectInputValidation.java.">ObjectInputValidation</a> obj;
<a id="L2200" name="L2200"></a>2200             <strong class="reserved">final</strong> <strong class="reserved">int</strong> priority;
<a id="L2201" name="L2201"></a>2201             <a href="../D/1261.html" title="Multiple defined in 2 places.">Callback</a> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2202" name="L2202"></a>2202             <strong class="reserved">final</strong> <a href="../S/1212.html#L77" title="Defined at 77 in src/java/security/AccessControlContext.java.">AccessControlContext</a> acc;
<a id="L2203" name="L2203"></a>2203 
<a id="L2204" name="L2204"></a>2204             <a href="../D/1261.html" title="Multiple defined in 2 places.">Callback</a>(<a href="../S/1373.html#L38" title="Defined at 38 in src/java/io/ObjectInputValidation.java.">ObjectInputValidation</a> obj, <strong class="reserved">int</strong> priority, Callback <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>,
<a id="L2205" name="L2205"></a>2205                 <a href="../S/1212.html#L77" title="Defined at 77 in src/java/security/AccessControlContext.java.">AccessControlContext</a> acc)
<a id="L2206" name="L2206"></a>2206             <em class="brace">{</em>
<a id="L2207" name="L2207"></a>2207                 <strong class="reserved">this</strong>.obj = obj;
<a id="L2208" name="L2208"></a>2208                 <strong class="reserved">this</strong>.priority = priority;
<a id="L2209" name="L2209"></a>2209                 <strong class="reserved">this</strong>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2210" name="L2210"></a>2210                 <strong class="reserved">this</strong>.acc = acc;
<a id="L2211" name="L2211"></a>2211             <em class="brace">}</em>
<a id="L2212" name="L2212"></a>2212         <em class="brace">}</em>
<a id="L2213" name="L2213"></a>2213 
<div class="comment">
         /** linked list of callbacks */</div>
<a id="L2215" name="L2215"></a>2215         <strong class="reserved">private</strong> <a href="../D/1261.html" title="Multiple defined in 2 places.">Callback</a> <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>;
<a id="L2216" name="L2216"></a>2216 
<div class="comment">
          Creates new (empty) ValidationList.</div>
<a id="L2220" name="L2220"></a>2220         ValidationList() <em class="brace">{</em>
<a id="L2221" name="L2221"></a>2221         <em class="brace">}</em>
<a id="L2222" name="L2222"></a>2222 
<div class="comment">
          Registers callback.  Throws InvalidObjectException if callback
          object is null.</div>
<a id="L2227" name="L2227"></a>2227         <strong class="reserved">void</strong> <a href="../R/25749.html" title="Multiple referred from 136 places.">register</a>(<a href="../S/1373.html#L38" title="Defined at 38 in src/java/io/ObjectInputValidation.java.">ObjectInputValidation</a> obj, <strong class="reserved">int</strong> priority)
<a id="L2228" name="L2228"></a>2228             <strong class="reserved">throws</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>
<a id="L2229" name="L2229"></a>2229         <em class="brace">{</em>
<a id="L2230" name="L2230"></a>2230             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2231" name="L2231"></a>2231                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>("null callback");
<a id="L2232" name="L2232"></a>2232             <em class="brace">}</em>
<a id="L2233" name="L2233"></a>2233 
<a id="L2234" name="L2234"></a>2234             <a href="../D/1261.html" title="Multiple defined in 2 places.">Callback</a> prev = <strong class="reserved">null</strong>, cur = <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>;
<a id="L2235" name="L2235"></a>2235             <strong class="reserved">while</strong> (cur != <strong class="reserved">null</strong> &amp;&amp; priority &lt; cur.priority) <em class="brace">{</em>
<a id="L2236" name="L2236"></a>2236                 prev = cur;
<a id="L2237" name="L2237"></a>2237                 cur = cur.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2238" name="L2238"></a>2238             <em class="brace">}</em>
<a id="L2239" name="L2239"></a>2239             <a href="../S/1212.html#L77" title="Defined at 77 in src/java/security/AccessControlContext.java.">AccessControlContext</a> acc = <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/17976.html" title="Multiple defined in 99 places.">getContext</a>();
<a id="L2240" name="L2240"></a>2240             <strong class="reserved">if</strong> (prev != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2241" name="L2241"></a>2241                 prev.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <strong class="reserved">new</strong> <a href="../D/1261.html" title="Multiple defined in 2 places.">Callback</a>(obj, priority, cur, acc);
<a id="L2242" name="L2242"></a>2242             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2243" name="L2243"></a>2243                 <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> = <strong class="reserved">new</strong> <a href="../D/1261.html" title="Multiple defined in 2 places.">Callback</a>(obj, priority, <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>, acc);
<a id="L2244" name="L2244"></a>2244             <em class="brace">}</em>
<a id="L2245" name="L2245"></a>2245         <em class="brace">}</em>
<a id="L2246" name="L2246"></a>2246 
<div class="comment">
          Invokes all registered callbacks and clears the callback list.
          Callbacks with higher priorities are called first; those with equal
          priorities may be called in any order.  If any of the callbacks
          throws an InvalidObjectException, the callback process is terminated
          and the exception propagated upwards.</div>
<a id="L2254" name="L2254"></a>2254         <strong class="reserved">void</strong> <a href="../R/13384.html" title="Multiple referred from 2 places.">doCallbacks</a>() <strong class="reserved">throws</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a> <em class="brace">{</em>
<a id="L2255" name="L2255"></a>2255             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2256" name="L2256"></a>2256                 <strong class="reserved">while</strong> (<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2257" name="L2257"></a>2257                     <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L2258" name="L2258"></a>2258                         <strong class="reserved">new</strong> <a href="../S/1263.html#L45" title="Defined at 45 in src/java/security/PrivilegedExceptionAction.java.">PrivilegedExceptionAction</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;()
<a id="L2259" name="L2259"></a>2259                     <em class="brace">{</em>
<a id="L2260" name="L2260"></a>2260                         <strong class="reserved">public</strong> <a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <strong class="reserved">throws</strong> <a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a> <em class="brace">{</em>
<a id="L2261" name="L2261"></a>2261                             <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>.obj.<a href="../D/36340.html" title="Multiple defined in 2 places.">validateObject</a>();
<a id="L2262" name="L2262"></a>2262                             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2263" name="L2263"></a>2263                         <em class="brace">}</em>
<a id="L2264" name="L2264"></a>2264                     <em class="brace">}</em>, <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>.acc);
<a id="L2265" name="L2265"></a>2265                     <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> = <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L2266" name="L2266"></a>2266                 <em class="brace">}</em>
<a id="L2267" name="L2267"></a>2267             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1259.html#L50" title="Defined at 50 in src/java/security/PrivilegedActionException.java.">PrivilegedActionException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L2268" name="L2268"></a>2268                 <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> = <strong class="reserved">null</strong>;
<a id="L2269" name="L2269"></a>2269                 <strong class="reserved">throw</strong> (<a href="../S/1428.html#L38" title="Defined at 38 in src/java/io/InvalidObjectException.java.">InvalidObjectException</a>) <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/18894.html" title="Multiple defined in 26 places.">getException</a>();
<a id="L2270" name="L2270"></a>2270             <em class="brace">}</em>
<a id="L2271" name="L2271"></a>2271         <em class="brace">}</em>
<a id="L2272" name="L2272"></a>2272 
<div class="comment">
          Resets the callback list to its initial (empty) state.</div>
<a id="L2276" name="L2276"></a>2276         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L2277" name="L2277"></a>2277             <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> = <strong class="reserved">null</strong>;
<a id="L2278" name="L2278"></a>2278         <em class="brace">}</em>
<a id="L2279" name="L2279"></a>2279     <em class="brace">}</em>
<a id="L2280" name="L2280"></a>2280 
<div class="comment">
      Input stream supporting single-byte peek operations.</div>
<a id="L2284" name="L2284"></a>2284     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/6087.html" title="Multiple referred from 2 places.">PeekInputStream</a> <strong class="reserved">extends</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <em class="brace">{</em>
<a id="L2285" name="L2285"></a>2285 
<div class="comment">
         /** underlying stream */</div>
<a id="L2287" name="L2287"></a>2287         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<div class="comment">
         /** peeked byte */</div>
<a id="L2289" name="L2289"></a>2289         <strong class="reserved">private</strong> <strong class="reserved">int</strong> peekb = -1;
<a id="L2290" name="L2290"></a>2290 
<div class="comment">
          Creates new PeekInputStream on top of given underlying stream.</div>
<a id="L2294" name="L2294"></a>2294         PeekInputStream(<a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <em class="brace">{</em>
<a id="L2295" name="L2295"></a>2295             <strong class="reserved">this</strong>.<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L2296" name="L2296"></a>2296         <em class="brace">}</em>
<a id="L2297" name="L2297"></a>2297 
<div class="comment">
          Peeks at next byte value in stream.  Similar to read(), except
          that it does not consume the read value.</div>
<a id="L2302" name="L2302"></a>2302         <strong class="reserved">int</strong> <a href="../R/24689.html" title="Multiple referred from 168 places.">peek</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2303" name="L2303"></a>2303             <strong class="reserved">return</strong> (peekb &gt;= 0) ? peekb : (peekb = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>());
<a id="L2304" name="L2304"></a>2304         <em class="brace">}</em>
<a id="L2305" name="L2305"></a>2305 
<a id="L2306" name="L2306"></a>2306         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2307" name="L2307"></a>2307             <strong class="reserved">if</strong> (peekb &gt;= 0) <em class="brace">{</em>
<a id="L2308" name="L2308"></a>2308                 <strong class="reserved">int</strong> v = peekb;
<a id="L2309" name="L2309"></a>2309                 peekb = -1;
<a id="L2310" name="L2310"></a>2310                 <strong class="reserved">return</strong> v;
<a id="L2311" name="L2311"></a>2311             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2312" name="L2312"></a>2312                 <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L2313" name="L2313"></a>2313             <em class="brace">}</em>
<a id="L2314" name="L2314"></a>2314         <em class="brace">}</em>
<a id="L2315" name="L2315"></a>2315 
<a id="L2316" name="L2316"></a>2316         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2317" name="L2317"></a>2317             <strong class="reserved">if</strong> (len == 0) <em class="brace">{</em>
<a id="L2318" name="L2318"></a>2318                 <strong class="reserved">return</strong> 0;
<a id="L2319" name="L2319"></a>2319             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (peekb &lt; 0) <em class="brace">{</em>
<a id="L2320" name="L2320"></a>2320                 <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(b, off, len);
<a id="L2321" name="L2321"></a>2321             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2322" name="L2322"></a>2322                 b[off++] = (<strong class="reserved">byte</strong>) peekb;
<a id="L2323" name="L2323"></a>2323                 len--;
<a id="L2324" name="L2324"></a>2324                 peekb = -1;
<a id="L2325" name="L2325"></a>2325                 <strong class="reserved">int</strong> n = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(b, off, len);
<a id="L2326" name="L2326"></a>2326                 <strong class="reserved">return</strong> (n &gt;= 0) ? (n + 1) : 1;
<a id="L2327" name="L2327"></a>2327             <em class="brace">}</em>
<a id="L2328" name="L2328"></a>2328         <em class="brace">}</em>
<a id="L2329" name="L2329"></a>2329 
<a id="L2330" name="L2330"></a>2330         <strong class="reserved">void</strong> <a href="../R/25479.html" title="Multiple referred from 96 places.">readFully</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2331" name="L2331"></a>2331             <strong class="reserved">int</strong> n = 0;
<a id="L2332" name="L2332"></a>2332             <strong class="reserved">while</strong> (n &lt; len) <em class="brace">{</em>
<a id="L2333" name="L2333"></a>2333                 <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(b, off + n, len - n);
<a id="L2334" name="L2334"></a>2334                 <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; 0) <em class="brace">{</em>
<a id="L2335" name="L2335"></a>2335                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a>();
<a id="L2336" name="L2336"></a>2336                 <em class="brace">}</em>
<a id="L2337" name="L2337"></a>2337                 n += <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L2338" name="L2338"></a>2338             <em class="brace">}</em>
<a id="L2339" name="L2339"></a>2339         <em class="brace">}</em>
<a id="L2340" name="L2340"></a>2340 
<a id="L2341" name="L2341"></a>2341         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/28643.html" title="Multiple referred from 174 places.">skip</a>(<strong class="reserved">long</strong> n) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2342" name="L2342"></a>2342             <strong class="reserved">if</strong> (n &lt;= 0) <em class="brace">{</em>
<a id="L2343" name="L2343"></a>2343                 <strong class="reserved">return</strong> 0;
<a id="L2344" name="L2344"></a>2344             <em class="brace">}</em>
<a id="L2345" name="L2345"></a>2345             <strong class="reserved">int</strong> <a href="../S/1947.html#L101" title="Defined at 101 in src/java/nio/file/FileTreeWalker.java.">skipped</a> = 0;
<a id="L2346" name="L2346"></a>2346             <strong class="reserved">if</strong> (peekb &gt;= 0) <em class="brace">{</em>
<a id="L2347" name="L2347"></a>2347                 peekb = -1;
<a id="L2348" name="L2348"></a>2348                 <a href="../S/1947.html#L101" title="Defined at 101 in src/java/nio/file/FileTreeWalker.java.">skipped</a>++;
<a id="L2349" name="L2349"></a>2349                 n--;
<a id="L2350" name="L2350"></a>2350             <em class="brace">}</em>
<a id="L2351" name="L2351"></a>2351             <strong class="reserved">return</strong> <a href="../S/1947.html#L101" title="Defined at 101 in src/java/nio/file/FileTreeWalker.java.">skipped</a> + <a href="../D/34598.html" title="Multiple defined in 46 places.">skip</a>(n);
<a id="L2352" name="L2352"></a>2352         <em class="brace">}</em>
<a id="L2353" name="L2353"></a>2353 
<a id="L2354" name="L2354"></a>2354         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/10425.html" title="Multiple referred from 160 places.">available</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2355" name="L2355"></a>2355             <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>() + ((peekb &gt;= 0) ? 1 : 0);
<a id="L2356" name="L2356"></a>2356         <em class="brace">}</em>
<a id="L2357" name="L2357"></a>2357 
<a id="L2358" name="L2358"></a>2358         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2359" name="L2359"></a>2359             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L2360" name="L2360"></a>2360         <em class="brace">}</em>
<a id="L2361" name="L2361"></a>2361     <em class="brace">}</em>
<a id="L2362" name="L2362"></a>2362 
<div class="comment">
      Input stream with two modes: in default mode, inputs data written in the
      same format as DataOutputStream; in "block data" mode, inputs data
      bracketed by block data markers (see object serialization specification
      for details).  Buffering depends on block data mode: when in default
      mode, no data is buffered in advance; when in block data mode, all data
      for the current data block is read in at once (and buffered).</div>
<a id="L2371" name="L2371"></a>2371     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/832.html" title="Multiple referred from 2 places.">BlockDataInputStream</a>
<a id="L2372" name="L2372"></a>2372         <strong class="reserved">extends</strong> <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <strong class="reserved">implements</strong> <a href="../S/1438.html#L149" title="Defined at 149 in src/java/io/DataInput.java.">DataInput</a>
<a id="L2373" name="L2373"></a>2373     <em class="brace">{</em>
<div class="comment">
         /** maximum data block length */</div>
<a id="L2375" name="L2375"></a>2375         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_BLOCK_SIZE = 1024;
<div class="comment">
         /** maximum data block header length */</div>
<a id="L2377" name="L2377"></a>2377         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_HEADER_SIZE = 5;
<div class="comment">
         /** (tunable) length of char buffer (for reading strings) */</div>
<a id="L2379" name="L2379"></a>2379         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CHAR_BUF_SIZE = 256;
<div class="comment">
         /** readBlockHeader() return value indicating header read may block */</div>
<a id="L2381" name="L2381"></a>2381         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> HEADER_BLOCKED = -2;
<a id="L2382" name="L2382"></a>2382 
<div class="comment">
         /** buffer for reading general/block data */</div>
<a id="L2384" name="L2384"></a>2384         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a> = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[MAX_BLOCK_SIZE];
<div class="comment">
         /** buffer for reading block data headers */</div>
<a id="L2386" name="L2386"></a>2386         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] hbuf = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[MAX_HEADER_SIZE];
<div class="comment">
         /** char buffer for fast string reads */</div>
<a id="L2388" name="L2388"></a>2388         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>[] cbuf = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[CHAR_BUF_SIZE];
<a id="L2389" name="L2389"></a>2389 
<div class="comment">
         /** block data mode */</div>
<a id="L2391" name="L2391"></a>2391         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> blkmode = <strong class="reserved">false</strong>;
<a id="L2392" name="L2392"></a>2392 
<a id="L2393" name="L2393"></a>2393         <em class="comment">// block data state fields; values meaningful only when blkmode true</em>
<div class="comment">
         /** current offset into buf */</div>
<a id="L2395" name="L2395"></a>2395         <strong class="reserved">private</strong> <strong class="reserved">int</strong> pos = 0;
<div class="comment">
         /** end offset of valid data in buf, or -1 if no more block data */</div>
<a id="L2397" name="L2397"></a>2397         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = -1;
<div class="comment">
         /** number of bytes in current block yet to be read from stream */</div>
<a id="L2399" name="L2399"></a>2399         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = 0;
<a id="L2400" name="L2400"></a>2400 
<div class="comment">
         /** underlying stream (wrapped in peekable filter stream) */</div>
<a id="L2402" name="L2402"></a>2402         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1378.html#L2284" title="Defined at 2284 in src/java/io/ObjectInputStream.java.">PeekInputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<div class="comment">
         /** loopback stream (for data reads that span data blocks) */</div>
<a id="L2404" name="L2404"></a>2404         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/2185.html" title="Multiple defined in 2 places.">DataInputStream</a> din;
<a id="L2405" name="L2405"></a>2405 
<div class="comment">
          Creates new BlockDataInputStream on top of given underlying stream.
          Block data mode is turned off by default.</div>
<a id="L2410" name="L2410"></a>2410         BlockDataInputStream(<a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <em class="brace">{</em>
<a id="L2411" name="L2411"></a>2411             <strong class="reserved">this</strong>.<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <strong class="reserved">new</strong> <a href="../S/1378.html#L2284" title="Defined at 2284 in src/java/io/ObjectInputStream.java.">PeekInputStream</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>);
<a id="L2412" name="L2412"></a>2412             din = <strong class="reserved">new</strong> <a href="../D/2185.html" title="Multiple defined in 2 places.">DataInputStream</a>(<strong class="reserved">this</strong>);
<a id="L2413" name="L2413"></a>2413         <em class="brace">}</em>
<a id="L2414" name="L2414"></a>2414 
<div class="comment">
          Sets block data mode to the given mode (true == on, false == off)
          and returns the previous mode value.  If the new mode is the same as
          the old mode, no action is taken.  Throws IllegalStateException if
          block data mode is being switched from on to off while unconsumed
          block data is still present in the stream.</div>
<a id="L2422" name="L2422"></a>2422         <strong class="reserved">boolean</strong> <a href="../R/26952.html" title="Multiple referred from 34 places.">setBlockDataMode</a>(<strong class="reserved">boolean</strong> newmode) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2423" name="L2423"></a>2423             <strong class="reserved">if</strong> (blkmode == newmode) <em class="brace">{</em>
<a id="L2424" name="L2424"></a>2424                 <strong class="reserved">return</strong> blkmode;
<a id="L2425" name="L2425"></a>2425             <em class="brace">}</em>
<a id="L2426" name="L2426"></a>2426             <strong class="reserved">if</strong> (newmode) <em class="brace">{</em>
<a id="L2427" name="L2427"></a>2427                 pos = 0;
<a id="L2428" name="L2428"></a>2428                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = 0;
<a id="L2429" name="L2429"></a>2429                 <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = 0;
<a id="L2430" name="L2430"></a>2430             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pos &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L2431" name="L2431"></a>2431                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("unread block data");
<a id="L2432" name="L2432"></a>2432             <em class="brace">}</em>
<a id="L2433" name="L2433"></a>2433             blkmode = newmode;
<a id="L2434" name="L2434"></a>2434             <strong class="reserved">return</strong> !blkmode;
<a id="L2435" name="L2435"></a>2435         <em class="brace">}</em>
<a id="L2436" name="L2436"></a>2436 
<div class="comment">
          Returns true if the stream is currently in block data mode, false
          otherwise.</div>
<a id="L2441" name="L2441"></a>2441         <strong class="reserved">boolean</strong> <a href="../R/15286.html" title="Multiple referred from 2 places.">getBlockDataMode</a>() <em class="brace">{</em>
<a id="L2442" name="L2442"></a>2442             <strong class="reserved">return</strong> blkmode;
<a id="L2443" name="L2443"></a>2443         <em class="brace">}</em>
<a id="L2444" name="L2444"></a>2444 
<div class="comment">
          If in block data mode, skips to the end of the current group of data
          blocks (but does not unset block data mode).  If not in block data
          mode, throws an IllegalStateException.</div>
<a id="L2450" name="L2450"></a>2450         <strong class="reserved">void</strong> <a href="../S/1378.html#L1951" title="Referred from 1951 in src/java/io/ObjectInputStream.java.">skipBlockData</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2451" name="L2451"></a>2451             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2452" name="L2452"></a>2452                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("not in block data mode");
<a id="L2453" name="L2453"></a>2453             <em class="brace">}</em>
<a id="L2454" name="L2454"></a>2454             <strong class="reserved">while</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt;= 0) <em class="brace">{</em>
<a id="L2455" name="L2455"></a>2455                 <a href="../S/1378.html#L2538" title="Defined at 2538 in src/java/io/ObjectInputStream.java.">refill</a>();
<a id="L2456" name="L2456"></a>2456             <em class="brace">}</em>
<a id="L2457" name="L2457"></a>2457         <em class="brace">}</em>
<a id="L2458" name="L2458"></a>2458 
<div class="comment">
          Attempts to read in the next block data header (if any).  If
          canBlock is false and a full header cannot be read without possibly
          blocking, returns HEADER_BLOCKED, else if the next element in the
          stream is a block data header, returns the block data length
          specified by the header, else returns -1.</div>
<a id="L2466" name="L2466"></a>2466         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/25429.html" title="Multiple referred from 2 places.">readBlockHeader</a>(<strong class="reserved">boolean</strong> canBlock) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2467" name="L2467"></a>2467             <strong class="reserved">if</strong> (defaultDataEnd) <em class="brace">{</em>
<div class="comment">
                  Fix for 4360508: stream is currently at the end of a field
                  value block written via default serialization; since there
                  is no terminating TC_ENDBLOCKDATA tag, simulate
                  end-of-custom-data behavior explicitly.</div>
<a id="L2474" name="L2474"></a>2474                 <strong class="reserved">return</strong> -1;
<a id="L2475" name="L2475"></a>2475             <em class="brace">}</em>
<a id="L2476" name="L2476"></a>2476             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2477" name="L2477"></a>2477                 <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L2478" name="L2478"></a>2478                     <strong class="reserved">int</strong> avail = canBlock ? <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE : <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>();
<a id="L2479" name="L2479"></a>2479                     <strong class="reserved">if</strong> (avail == 0) <em class="brace">{</em>
<a id="L2480" name="L2480"></a>2480                         <strong class="reserved">return</strong> HEADER_BLOCKED;
<a id="L2481" name="L2481"></a>2481                     <em class="brace">}</em>
<a id="L2482" name="L2482"></a>2482 
<a id="L2483" name="L2483"></a>2483                     <strong class="reserved">int</strong> tc = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L2484" name="L2484"></a>2484                     <strong class="reserved">switch</strong> (tc) <em class="brace">{</em>
<a id="L2485" name="L2485"></a>2485                         <strong class="reserved">case</strong> TC_BLOCKDATA:
<a id="L2486" name="L2486"></a>2486                             <strong class="reserved">if</strong> (avail &lt; 2) <em class="brace">{</em>
<a id="L2487" name="L2487"></a>2487                                 <strong class="reserved">return</strong> HEADER_BLOCKED;
<a id="L2488" name="L2488"></a>2488                             <em class="brace">}</em>
<a id="L2489" name="L2489"></a>2489                             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(hbuf, 0, 2);
<a id="L2490" name="L2490"></a>2490                             <strong class="reserved">return</strong> hbuf[1] &amp; 0xFF;
<a id="L2491" name="L2491"></a>2491 
<a id="L2492" name="L2492"></a>2492                         <strong class="reserved">case</strong> TC_BLOCKDATALONG:
<a id="L2493" name="L2493"></a>2493                             <strong class="reserved">if</strong> (avail &lt; 5) <em class="brace">{</em>
<a id="L2494" name="L2494"></a>2494                                 <strong class="reserved">return</strong> HEADER_BLOCKED;
<a id="L2495" name="L2495"></a>2495                             <em class="brace">}</em>
<a id="L2496" name="L2496"></a>2496                             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(hbuf, 0, 5);
<a id="L2497" name="L2497"></a>2497                             <strong class="reserved">int</strong> len = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/19781.html" title="Multiple defined in 33 places.">getInt</a>(hbuf, 1);
<a id="L2498" name="L2498"></a>2498                             <strong class="reserved">if</strong> (len &lt; 0) <em class="brace">{</em>
<a id="L2499" name="L2499"></a>2499                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L2500" name="L2500"></a>2500                                     "illegal block data header length: " +
<a id="L2501" name="L2501"></a>2501                                     len);
<a id="L2502" name="L2502"></a>2502                             <em class="brace">}</em>
<a id="L2503" name="L2503"></a>2503                             <strong class="reserved">return</strong> len;
<a id="L2504" name="L2504"></a>2504 
<div class="comment">
                          TC_RESETs may occur in between data blocks.
                          Unfortunately, this case must be parsed at a lower
                          level than other typecodes, since primitive data
                          reads may span data blocks separated by a TC_RESET.</div>
<a id="L2511" name="L2511"></a>2511                         <strong class="reserved">case</strong> TC_RESET:
<a id="L2512" name="L2512"></a>2512                             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L2513" name="L2513"></a>2513                             <a href="../S/1378.html#L2029" title="Defined at 2029 in src/java/io/ObjectInputStream.java.">handleReset</a>();
<a id="L2514" name="L2514"></a>2514                             <strong class="reserved">break</strong>;
<a id="L2515" name="L2515"></a>2515 
<a id="L2516" name="L2516"></a>2516                         <strong class="reserved">default</strong>:
<a id="L2517" name="L2517"></a>2517                             <strong class="reserved">if</strong> (tc &gt;= 0 &amp;&amp; (tc &lt; TC_BASE || tc &gt; TC_MAX)) <em class="brace">{</em>
<a id="L2518" name="L2518"></a>2518                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L2519" name="L2519"></a>2519                                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>("invalid type code: %02X",
<a id="L2520" name="L2520"></a>2520                                     tc));
<a id="L2521" name="L2521"></a>2521                             <em class="brace">}</em>
<a id="L2522" name="L2522"></a>2522                             <strong class="reserved">return</strong> -1;
<a id="L2523" name="L2523"></a>2523                     <em class="brace">}</em>
<a id="L2524" name="L2524"></a>2524                 <em class="brace">}</em>
<a id="L2525" name="L2525"></a>2525             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L2526" name="L2526"></a>2526                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L2527" name="L2527"></a>2527                     "unexpected EOF while reading block data header");
<a id="L2528" name="L2528"></a>2528             <em class="brace">}</em>
<a id="L2529" name="L2529"></a>2529         <em class="brace">}</em>
<a id="L2530" name="L2530"></a>2530 
<div class="comment">
          Refills internal buffer buf with block data.  Any data in buf at the
          time of the call is considered consumed.  Sets the pos, end, and
          unread fields to reflect the new amount of available block data; if
          the next element in the stream is not a data block, sets pos and
          unread to 0 and end to -1.</div>
<a id="L2538" name="L2538"></a>2538         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25734.html" title="Multiple referred from 5 places.">refill</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2539" name="L2539"></a>2539             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2540" name="L2540"></a>2540                 <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L2541" name="L2541"></a>2541                     pos = 0;
<a id="L2542" name="L2542"></a>2542                     <strong class="reserved">if</strong> (<a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> &gt; 0) <em class="brace">{</em>
<a id="L2543" name="L2543"></a>2543                         <strong class="reserved">int</strong> n =
<a id="L2544" name="L2544"></a>2544                             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a>, MAX_BLOCK_SIZE));
<a id="L2545" name="L2545"></a>2545                         <strong class="reserved">if</strong> (n &gt;= 0) <em class="brace">{</em>
<a id="L2546" name="L2546"></a>2546                             <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = n;
<a id="L2547" name="L2547"></a>2547                             <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> -= n;
<a id="L2548" name="L2548"></a>2548                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2549" name="L2549"></a>2549                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1414.html#L35" title="Defined at 35 in src/java/io/StreamCorruptedException.java.">StreamCorruptedException</a>(
<a id="L2550" name="L2550"></a>2550                                 "unexpected EOF in middle of data block");
<a id="L2551" name="L2551"></a>2551                         <em class="brace">}</em>
<a id="L2552" name="L2552"></a>2552                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2553" name="L2553"></a>2553                         <strong class="reserved">int</strong> n = <a href="../S/1378.html#L2466" title="Defined at 2466 in src/java/io/ObjectInputStream.java.">readBlockHeader</a>(<strong class="reserved">true</strong>);
<a id="L2554" name="L2554"></a>2554                         <strong class="reserved">if</strong> (n &gt;= 0) <em class="brace">{</em>
<a id="L2555" name="L2555"></a>2555                             <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = 0;
<a id="L2556" name="L2556"></a>2556                             <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = n;
<a id="L2557" name="L2557"></a>2557                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2558" name="L2558"></a>2558                             <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = -1;
<a id="L2559" name="L2559"></a>2559                             <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = 0;
<a id="L2560" name="L2560"></a>2560                         <em class="brace">}</em>
<a id="L2561" name="L2561"></a>2561                     <em class="brace">}</em>
<a id="L2562" name="L2562"></a>2562                 <em class="brace">}</em> <strong class="reserved">while</strong> (pos == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>);
<a id="L2563" name="L2563"></a>2563             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L2564" name="L2564"></a>2564                 pos = 0;
<a id="L2565" name="L2565"></a>2565                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = -1;
<a id="L2566" name="L2566"></a>2566                 <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = 0;
<a id="L2567" name="L2567"></a>2567                 <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L2568" name="L2568"></a>2568             <em class="brace">}</em>
<a id="L2569" name="L2569"></a>2569         <em class="brace">}</em>
<a id="L2570" name="L2570"></a>2570 
<div class="comment">
          If in block data mode, returns the number of unconsumed bytes
          remaining in the current data block.  If not in block data mode,
          throws an IllegalStateException.</div>
<a id="L2576" name="L2576"></a>2576         <strong class="reserved">int</strong> <a href="../R/12859.html" title="Multiple referred from 2 places.">currentBlockRemaining</a>() <em class="brace">{</em>
<a id="L2577" name="L2577"></a>2577             <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2578" name="L2578"></a>2578                 <strong class="reserved">return</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt;= 0) ? (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) + <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> : 0;
<a id="L2579" name="L2579"></a>2579             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2580" name="L2580"></a>2580                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>();
<a id="L2581" name="L2581"></a>2581             <em class="brace">}</em>
<a id="L2582" name="L2582"></a>2582         <em class="brace">}</em>
<a id="L2583" name="L2583"></a>2583 
<div class="comment">
          Peeks at (but does not consume) and returns the next byte value in
          the stream, or -1 if the end of the stream/block data (if in block
          data mode) has been reached.</div>
<a id="L2589" name="L2589"></a>2589         <strong class="reserved">int</strong> <a href="../R/24689.html" title="Multiple referred from 168 places.">peek</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2590" name="L2590"></a>2590             <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2591" name="L2591"></a>2591                 <strong class="reserved">if</strong> (pos == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L2592" name="L2592"></a>2592                     <a href="../S/1378.html#L2538" title="Defined at 2538 in src/java/io/ObjectInputStream.java.">refill</a>();
<a id="L2593" name="L2593"></a>2593                 <em class="brace">}</em>
<a id="L2594" name="L2594"></a>2594                 <strong class="reserved">return</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt;= 0) ? (<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos] &amp; 0xFF) : -1;
<a id="L2595" name="L2595"></a>2595             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2596" name="L2596"></a>2596                 <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L2597" name="L2597"></a>2597             <em class="brace">}</em>
<a id="L2598" name="L2598"></a>2598         <em class="brace">}</em>
<a id="L2599" name="L2599"></a>2599 
<div class="comment">
          Peeks at (but does not consume) and returns the next byte value in
          the stream, or throws EOFException if end of stream/block data has
          been reached.</div>
<a id="L2605" name="L2605"></a>2605         <strong class="reserved">byte</strong> <a href="../R/24690.html" title="Multiple referred from 5 places.">peekByte</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2606" name="L2606"></a>2606             <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = <a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L2607" name="L2607"></a>2607             <strong class="reserved">if</strong> (<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> &lt; 0) <em class="brace">{</em>
<a id="L2608" name="L2608"></a>2608                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a>();
<a id="L2609" name="L2609"></a>2609             <em class="brace">}</em>
<a id="L2610" name="L2610"></a>2610             <strong class="reserved">return</strong> (<strong class="reserved">byte</strong>) <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>;
<a id="L2611" name="L2611"></a>2611         <em class="brace">}</em>
<a id="L2612" name="L2612"></a>2612 
<a id="L2613" name="L2613"></a>2613 
<div class="comment">
         /* ----------------- generic input stream methods ------------------ */</div>
<div class="comment">
          The following methods are equivalent to their counterparts in
          InputStream, except that they interpret data block boundaries and
          read the requested data from within data blocks when in block data
          mode.</div>
<a id="L2621" name="L2621"></a>2621 
<a id="L2622" name="L2622"></a>2622         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2623" name="L2623"></a>2623             <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2624" name="L2624"></a>2624                 <strong class="reserved">if</strong> (pos == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L2625" name="L2625"></a>2625                     <a href="../S/1378.html#L2538" title="Defined at 2538 in src/java/io/ObjectInputStream.java.">refill</a>();
<a id="L2626" name="L2626"></a>2626                 <em class="brace">}</em>
<a id="L2627" name="L2627"></a>2627                 <strong class="reserved">return</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt;= 0) ? (<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++] &amp; 0xFF) : -1;
<a id="L2628" name="L2628"></a>2628             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2629" name="L2629"></a>2629                 <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L2630" name="L2630"></a>2630             <em class="brace">}</em>
<a id="L2631" name="L2631"></a>2631         <em class="brace">}</em>
<a id="L2632" name="L2632"></a>2632 
<a id="L2633" name="L2633"></a>2633         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2634" name="L2634"></a>2634             <strong class="reserved">return</strong> <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(b, off, len, <strong class="reserved">false</strong>);
<a id="L2635" name="L2635"></a>2635         <em class="brace">}</em>
<a id="L2636" name="L2636"></a>2636 
<a id="L2637" name="L2637"></a>2637         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/28643.html" title="Multiple referred from 174 places.">skip</a>(<strong class="reserved">long</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2638" name="L2638"></a>2638             <strong class="reserved">long</strong> remain = len;
<a id="L2639" name="L2639"></a>2639             <strong class="reserved">while</strong> (remain &gt; 0) <em class="brace">{</em>
<a id="L2640" name="L2640"></a>2640                 <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2641" name="L2641"></a>2641                     <strong class="reserved">if</strong> (pos == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L2642" name="L2642"></a>2642                         <a href="../S/1378.html#L2538" title="Defined at 2538 in src/java/io/ObjectInputStream.java.">refill</a>();
<a id="L2643" name="L2643"></a>2643                     <em class="brace">}</em>
<a id="L2644" name="L2644"></a>2644                     <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &lt; 0) <em class="brace">{</em>
<a id="L2645" name="L2645"></a>2645                         <strong class="reserved">break</strong>;
<a id="L2646" name="L2646"></a>2646                     <em class="brace">}</em>
<a id="L2647" name="L2647"></a>2647                     <strong class="reserved">int</strong> nread = (<strong class="reserved">int</strong>) <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(remain, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos);
<a id="L2648" name="L2648"></a>2648                     remain -= nread;
<a id="L2649" name="L2649"></a>2649                     pos += nread;
<a id="L2650" name="L2650"></a>2650                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2651" name="L2651"></a>2651                     <strong class="reserved">int</strong> nread = (<strong class="reserved">int</strong>) <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(remain, MAX_BLOCK_SIZE);
<a id="L2652" name="L2652"></a>2652                     <strong class="reserved">if</strong> ((nread = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, nread)) &lt; 0) <em class="brace">{</em>
<a id="L2653" name="L2653"></a>2653                         <strong class="reserved">break</strong>;
<a id="L2654" name="L2654"></a>2654                     <em class="brace">}</em>
<a id="L2655" name="L2655"></a>2655                     remain -= nread;
<a id="L2656" name="L2656"></a>2656                 <em class="brace">}</em>
<a id="L2657" name="L2657"></a>2657             <em class="brace">}</em>
<a id="L2658" name="L2658"></a>2658             <strong class="reserved">return</strong> len - remain;
<a id="L2659" name="L2659"></a>2659         <em class="brace">}</em>
<a id="L2660" name="L2660"></a>2660 
<a id="L2661" name="L2661"></a>2661         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/10425.html" title="Multiple referred from 160 places.">available</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2662" name="L2662"></a>2662             <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2663" name="L2663"></a>2663                 <strong class="reserved">if</strong> ((pos == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) &amp;&amp; (<a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> == 0)) <em class="brace">{</em>
<a id="L2664" name="L2664"></a>2664                     <strong class="reserved">int</strong> n;
<a id="L2665" name="L2665"></a>2665                     <strong class="reserved">while</strong> ((n = <a href="../S/1378.html#L2466" title="Defined at 2466 in src/java/io/ObjectInputStream.java.">readBlockHeader</a>(<strong class="reserved">false</strong>)) == 0) ;
<a id="L2666" name="L2666"></a>2666                     <strong class="reserved">switch</strong> (n) <em class="brace">{</em>
<a id="L2667" name="L2667"></a>2667                         <strong class="reserved">case</strong> HEADER_BLOCKED:
<a id="L2668" name="L2668"></a>2668                             <strong class="reserved">break</strong>;
<a id="L2669" name="L2669"></a>2669 
<a id="L2670" name="L2670"></a>2670                         <strong class="reserved">case</strong> -1:
<a id="L2671" name="L2671"></a>2671                             pos = 0;
<a id="L2672" name="L2672"></a>2672                             <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = -1;
<a id="L2673" name="L2673"></a>2673                             <strong class="reserved">break</strong>;
<a id="L2674" name="L2674"></a>2674 
<a id="L2675" name="L2675"></a>2675                         <strong class="reserved">default</strong>:
<a id="L2676" name="L2676"></a>2676                             pos = 0;
<a id="L2677" name="L2677"></a>2677                             <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = 0;
<a id="L2678" name="L2678"></a>2678                             <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = n;
<a id="L2679" name="L2679"></a>2679                             <strong class="reserved">break</strong>;
<a id="L2680" name="L2680"></a>2680                     <em class="brace">}</em>
<a id="L2681" name="L2681"></a>2681                 <em class="brace">}</em>
<a id="L2682" name="L2682"></a>2682                 <em class="comment">// avoid unnecessary call to in.available() if possible</em>
<a id="L2683" name="L2683"></a>2683                 <strong class="reserved">int</strong> unreadAvail = (<a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> &gt; 0) ?
<a id="L2684" name="L2684"></a>2684                     <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>(), <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a>) : 0;
<a id="L2685" name="L2685"></a>2685                 <strong class="reserved">return</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &gt;= 0) ? (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) + unreadAvail : 0;
<a id="L2686" name="L2686"></a>2686             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2687" name="L2687"></a>2687                 <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>();
<a id="L2688" name="L2688"></a>2688             <em class="brace">}</em>
<a id="L2689" name="L2689"></a>2689         <em class="brace">}</em>
<a id="L2690" name="L2690"></a>2690 
<a id="L2691" name="L2691"></a>2691         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2692" name="L2692"></a>2692             <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2693" name="L2693"></a>2693                 pos = 0;
<a id="L2694" name="L2694"></a>2694                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = -1;
<a id="L2695" name="L2695"></a>2695                 <a href="../D/35957.html" title="Multiple defined in 8 places.">unread</a> = 0;
<a id="L2696" name="L2696"></a>2696             <em class="brace">}</em>
<a id="L2697" name="L2697"></a>2697             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L2698" name="L2698"></a>2698         <em class="brace">}</em>
<a id="L2699" name="L2699"></a>2699 
<div class="comment">
          Attempts to read len bytes into byte array b at offset off.  Returns
          the number of bytes read, or -1 if the end of stream/block data has
          been reached.  If copy is true, reads values into an intermediate
          buffer before copying them to b (to avoid exposing a reference to
          b).</div>
<a id="L2707" name="L2707"></a>2707         <strong class="reserved">int</strong> <a href="../R/25407.html" title="Multiple referred from 1300 places.">read</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len, <strong class="reserved">boolean</strong> <a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2708" name="L2708"></a>2708             <strong class="reserved">if</strong> (len == 0) <em class="brace">{</em>
<a id="L2709" name="L2709"></a>2709                 <strong class="reserved">return</strong> 0;
<a id="L2710" name="L2710"></a>2710             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L2711" name="L2711"></a>2711                 <strong class="reserved">if</strong> (pos == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L2712" name="L2712"></a>2712                     <a href="../S/1378.html#L2538" title="Defined at 2538 in src/java/io/ObjectInputStream.java.">refill</a>();
<a id="L2713" name="L2713"></a>2713                 <em class="brace">}</em>
<a id="L2714" name="L2714"></a>2714                 <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &lt; 0) <em class="brace">{</em>
<a id="L2715" name="L2715"></a>2715                     <strong class="reserved">return</strong> -1;
<a id="L2716" name="L2716"></a>2716                 <em class="brace">}</em>
<a id="L2717" name="L2717"></a>2717                 <strong class="reserved">int</strong> nread = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(len, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos);
<a id="L2718" name="L2718"></a>2718                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, b, off, nread);
<a id="L2719" name="L2719"></a>2719                 pos += nread;
<a id="L2720" name="L2720"></a>2720                 <strong class="reserved">return</strong> nread;
<a id="L2721" name="L2721"></a>2721             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>) <em class="brace">{</em>
<a id="L2722" name="L2722"></a>2722                 <strong class="reserved">int</strong> nread = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(len, MAX_BLOCK_SIZE));
<a id="L2723" name="L2723"></a>2723                 <strong class="reserved">if</strong> (nread &gt; 0) <em class="brace">{</em>
<a id="L2724" name="L2724"></a>2724                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, b, off, nread);
<a id="L2725" name="L2725"></a>2725                 <em class="brace">}</em>
<a id="L2726" name="L2726"></a>2726                 <strong class="reserved">return</strong> nread;
<a id="L2727" name="L2727"></a>2727             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2728" name="L2728"></a>2728                 <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(b, off, len);
<a id="L2729" name="L2729"></a>2729             <em class="brace">}</em>
<a id="L2730" name="L2730"></a>2730         <em class="brace">}</em>
<a id="L2731" name="L2731"></a>2731 
<div class="comment">
         /* ----------------- primitive data input methods ------------------ */</div>
<div class="comment">
          The following methods are equivalent to their counterparts in
          DataInputStream, except that they interpret data block boundaries
          and read the requested data from within data blocks when in block
          data mode.</div>
<a id="L2739" name="L2739"></a>2739 
<a id="L2740" name="L2740"></a>2740         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25479.html" title="Multiple referred from 96 places.">readFully</a>(<strong class="reserved">byte</strong>[] b) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2741" name="L2741"></a>2741             <a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(b, 0, b.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <strong class="reserved">false</strong>);
<a id="L2742" name="L2742"></a>2742         <em class="brace">}</em>
<a id="L2743" name="L2743"></a>2743 
<a id="L2744" name="L2744"></a>2744         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25479.html" title="Multiple referred from 96 places.">readFully</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2745" name="L2745"></a>2745             <a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(b, off, len, <strong class="reserved">false</strong>);
<a id="L2746" name="L2746"></a>2746         <em class="brace">}</em>
<a id="L2747" name="L2747"></a>2747 
<a id="L2748" name="L2748"></a>2748         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25479.html" title="Multiple referred from 96 places.">readFully</a>(<strong class="reserved">byte</strong>[] b, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len, <strong class="reserved">boolean</strong> <a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>)
<a id="L2749" name="L2749"></a>2749             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L2750" name="L2750"></a>2750         <em class="brace">{</em>
<a id="L2751" name="L2751"></a>2751             <strong class="reserved">while</strong> (len &gt; 0) <em class="brace">{</em>
<a id="L2752" name="L2752"></a>2752                 <strong class="reserved">int</strong> n = <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>(b, off, len, <a href="../D/13475.html" title="Multiple defined in 92 places.">copy</a>);
<a id="L2753" name="L2753"></a>2753                 <strong class="reserved">if</strong> (n &lt; 0) <em class="brace">{</em>
<a id="L2754" name="L2754"></a>2754                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a>();
<a id="L2755" name="L2755"></a>2755                 <em class="brace">}</em>
<a id="L2756" name="L2756"></a>2756                 off += n;
<a id="L2757" name="L2757"></a>2757                 len -= n;
<a id="L2758" name="L2758"></a>2758             <em class="brace">}</em>
<a id="L2759" name="L2759"></a>2759         <em class="brace">}</em>
<a id="L2760" name="L2760"></a>2760 
<a id="L2761" name="L2761"></a>2761         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28645.html" title="Multiple referred from 54 places.">skipBytes</a>(<strong class="reserved">int</strong> n) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2762" name="L2762"></a>2762             <strong class="reserved">return</strong> din.<a href="../D/34600.html" title="Multiple defined in 12 places.">skipBytes</a>(n);
<a id="L2763" name="L2763"></a>2763         <em class="brace">}</em>
<a id="L2764" name="L2764"></a>2764 
<a id="L2765" name="L2765"></a>2765         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/25430.html" title="Multiple referred from 16 places.">readBoolean</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2766" name="L2766"></a>2766             <strong class="reserved">int</strong> v = <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L2767" name="L2767"></a>2767             <strong class="reserved">if</strong> (v &lt; 0) <em class="brace">{</em>
<a id="L2768" name="L2768"></a>2768                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a>();
<a id="L2769" name="L2769"></a>2769             <em class="brace">}</em>
<a id="L2770" name="L2770"></a>2770             <strong class="reserved">return</strong> (v != 0);
<a id="L2771" name="L2771"></a>2771         <em class="brace">}</em>
<a id="L2772" name="L2772"></a>2772 
<a id="L2773" name="L2773"></a>2773         <strong class="reserved">public</strong> <strong class="reserved">byte</strong> <a href="../R/25433.html" title="Multiple referred from 91 places.">readByte</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2774" name="L2774"></a>2774             <strong class="reserved">int</strong> v = <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L2775" name="L2775"></a>2775             <strong class="reserved">if</strong> (v &lt; 0) <em class="brace">{</em>
<a id="L2776" name="L2776"></a>2776                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a>();
<a id="L2777" name="L2777"></a>2777             <em class="brace">}</em>
<a id="L2778" name="L2778"></a>2778             <strong class="reserved">return</strong> (<strong class="reserved">byte</strong>) v;
<a id="L2779" name="L2779"></a>2779         <em class="brace">}</em>
<a id="L2780" name="L2780"></a>2780 
<a id="L2781" name="L2781"></a>2781         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25567.html" title="Multiple referred from 72 places.">readUnsignedByte</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2782" name="L2782"></a>2782             <strong class="reserved">int</strong> v = <a href="../D/30105.html" title="Multiple defined in 434 places.">read</a>();
<a id="L2783" name="L2783"></a>2783             <strong class="reserved">if</strong> (v &lt; 0) <em class="brace">{</em>
<a id="L2784" name="L2784"></a>2784                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1440.html#L42" title="Defined at 42 in src/java/io/EOFException.java.">EOFException</a>();
<a id="L2785" name="L2785"></a>2785             <em class="brace">}</em>
<a id="L2786" name="L2786"></a>2786             <strong class="reserved">return</strong> v;
<a id="L2787" name="L2787"></a>2787         <em class="brace">}</em>
<a id="L2788" name="L2788"></a>2788 
<a id="L2789" name="L2789"></a>2789         <strong class="reserved">public</strong> <strong class="reserved">char</strong> <a href="../R/25439.html" title="Multiple referred from 30 places.">readChar</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2790" name="L2790"></a>2790             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2791" name="L2791"></a>2791                 pos = 0;
<a id="L2792" name="L2792"></a>2792                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 2);
<a id="L2793" name="L2793"></a>2793             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 2) <em class="brace">{</em>
<a id="L2794" name="L2794"></a>2794                 <strong class="reserved">return</strong> din.<a href="../D/30144.html" title="Multiple defined in 10 places.">readChar</a>();
<a id="L2795" name="L2795"></a>2795             <em class="brace">}</em>
<a id="L2796" name="L2796"></a>2796             <strong class="reserved">char</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/17574.html" title="Multiple defined in 21 places.">getChar</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2797" name="L2797"></a>2797             pos += 2;
<a id="L2798" name="L2798"></a>2798             <strong class="reserved">return</strong> v;
<a id="L2799" name="L2799"></a>2799         <em class="brace">}</em>
<a id="L2800" name="L2800"></a>2800 
<a id="L2801" name="L2801"></a>2801         <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/25541.html" title="Multiple referred from 52 places.">readShort</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2802" name="L2802"></a>2802             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2803" name="L2803"></a>2803                 pos = 0;
<a id="L2804" name="L2804"></a>2804                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 2);
<a id="L2805" name="L2805"></a>2805             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 2) <em class="brace">{</em>
<a id="L2806" name="L2806"></a>2806                 <strong class="reserved">return</strong> din.<a href="../D/30259.html" title="Multiple defined in 10 places.">readShort</a>();
<a id="L2807" name="L2807"></a>2807             <em class="brace">}</em>
<a id="L2808" name="L2808"></a>2808             <strong class="reserved">short</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/22477.html" title="Multiple defined in 18 places.">getShort</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2809" name="L2809"></a>2809             pos += 2;
<a id="L2810" name="L2810"></a>2810             <strong class="reserved">return</strong> v;
<a id="L2811" name="L2811"></a>2811         <em class="brace">}</em>
<a id="L2812" name="L2812"></a>2812 
<a id="L2813" name="L2813"></a>2813         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25569.html" title="Multiple referred from 87 places.">readUnsignedShort</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2814" name="L2814"></a>2814             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2815" name="L2815"></a>2815                 pos = 0;
<a id="L2816" name="L2816"></a>2816                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 2);
<a id="L2817" name="L2817"></a>2817             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 2) <em class="brace">{</em>
<a id="L2818" name="L2818"></a>2818                 <strong class="reserved">return</strong> din.<a href="../D/30293.html" title="Multiple defined in 8 places.">readUnsignedShort</a>();
<a id="L2819" name="L2819"></a>2819             <em class="brace">}</em>
<a id="L2820" name="L2820"></a>2820             <strong class="reserved">int</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/22477.html" title="Multiple defined in 18 places.">getShort</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos) &amp; 0xFFFF;
<a id="L2821" name="L2821"></a>2821             pos += 2;
<a id="L2822" name="L2822"></a>2822             <strong class="reserved">return</strong> v;
<a id="L2823" name="L2823"></a>2823         <em class="brace">}</em>
<a id="L2824" name="L2824"></a>2824 
<a id="L2825" name="L2825"></a>2825         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/25495.html" title="Multiple referred from 180 places.">readInt</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2826" name="L2826"></a>2826             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2827" name="L2827"></a>2827                 pos = 0;
<a id="L2828" name="L2828"></a>2828                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 4);
<a id="L2829" name="L2829"></a>2829             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 4) <em class="brace">{</em>
<a id="L2830" name="L2830"></a>2830                 <strong class="reserved">return</strong> din.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L2831" name="L2831"></a>2831             <em class="brace">}</em>
<a id="L2832" name="L2832"></a>2832             <strong class="reserved">int</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/19781.html" title="Multiple defined in 33 places.">getInt</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2833" name="L2833"></a>2833             pos += 4;
<a id="L2834" name="L2834"></a>2834             <strong class="reserved">return</strong> v;
<a id="L2835" name="L2835"></a>2835         <em class="brace">}</em>
<a id="L2836" name="L2836"></a>2836 
<a id="L2837" name="L2837"></a>2837         <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/25473.html" title="Multiple referred from 7 places.">readFloat</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2838" name="L2838"></a>2838             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2839" name="L2839"></a>2839                 pos = 0;
<a id="L2840" name="L2840"></a>2840                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 4);
<a id="L2841" name="L2841"></a>2841             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 4) <em class="brace">{</em>
<a id="L2842" name="L2842"></a>2842                 <strong class="reserved">return</strong> din.<a href="../D/30182.html" title="Multiple defined in 10 places.">readFloat</a>();
<a id="L2843" name="L2843"></a>2843             <em class="brace">}</em>
<a id="L2844" name="L2844"></a>2844             <strong class="reserved">float</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/19143.html" title="Multiple defined in 18 places.">getFloat</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2845" name="L2845"></a>2845             pos += 4;
<a id="L2846" name="L2846"></a>2846             <strong class="reserved">return</strong> v;
<a id="L2847" name="L2847"></a>2847         <em class="brace">}</em>
<a id="L2848" name="L2848"></a>2848 
<a id="L2849" name="L2849"></a>2849         <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/25505.html" title="Multiple referred from 17 places.">readLong</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2850" name="L2850"></a>2850             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2851" name="L2851"></a>2851                 pos = 0;
<a id="L2852" name="L2852"></a>2852                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 8);
<a id="L2853" name="L2853"></a>2853             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 8) <em class="brace">{</em>
<a id="L2854" name="L2854"></a>2854                 <strong class="reserved">return</strong> din.<a href="../D/30217.html" title="Multiple defined in 10 places.">readLong</a>();
<a id="L2855" name="L2855"></a>2855             <em class="brace">}</em>
<a id="L2856" name="L2856"></a>2856             <strong class="reserved">long</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/20280.html" title="Multiple defined in 48 places.">getLong</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2857" name="L2857"></a>2857             pos += 8;
<a id="L2858" name="L2858"></a>2858             <strong class="reserved">return</strong> v;
<a id="L2859" name="L2859"></a>2859         <em class="brace">}</em>
<a id="L2860" name="L2860"></a>2860 
<a id="L2861" name="L2861"></a>2861         <strong class="reserved">public</strong> <strong class="reserved">double</strong> <a href="../R/25458.html" title="Multiple referred from 6 places.">readDouble</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2862" name="L2862"></a>2862             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2863" name="L2863"></a>2863                 pos = 0;
<a id="L2864" name="L2864"></a>2864                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, 8);
<a id="L2865" name="L2865"></a>2865             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 8) <em class="brace">{</em>
<a id="L2866" name="L2866"></a>2866                 <strong class="reserved">return</strong> din.<a href="../D/30166.html" title="Multiple defined in 10 places.">readDouble</a>();
<a id="L2867" name="L2867"></a>2867             <em class="brace">}</em>
<a id="L2868" name="L2868"></a>2868             <strong class="reserved">double</strong> v = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/18583.html" title="Multiple defined in 19 places.">getDouble</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2869" name="L2869"></a>2869             pos += 8;
<a id="L2870" name="L2870"></a>2870             <strong class="reserved">return</strong> v;
<a id="L2871" name="L2871"></a>2871         <em class="brace">}</em>
<a id="L2872" name="L2872"></a>2872 
<a id="L2873" name="L2873"></a>2873         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25561.html" title="Multiple referred from 54 places.">readUTF</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2874" name="L2874"></a>2874             <strong class="reserved">return</strong> <a href="../S/1378.html#L3053" title="Defined at 3053 in src/java/io/ObjectInputStream.java.">readUTFBody</a>(<a href="../D/30293.html" title="Multiple defined in 8 places.">readUnsignedShort</a>());
<a id="L2875" name="L2875"></a>2875         <em class="brace">}</em>
<a id="L2876" name="L2876"></a>2876 
<a id="L2877" name="L2877"></a>2877         @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("deprecation")
<a id="L2878" name="L2878"></a>2878         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25502.html" title="Multiple referred from 43 places.">readLine</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2879" name="L2879"></a>2879             <strong class="reserved">return</strong> din.<a href="../D/30213.html" title="Multiple defined in 17 places.">readLine</a>();      <em class="comment">// deprecated, not worth optimizing</em>
<a id="L2880" name="L2880"></a>2880         <em class="brace">}</em>
<a id="L2881" name="L2881"></a>2881 
<div class="comment">
         /* -------------- primitive data array input methods --------------- */</div>
<div class="comment">
          The following methods read in spans of primitive data values.
          Though equivalent to calling the corresponding primitive read
          methods repeatedly, these methods are optimized for reading groups
          of primitive data values more efficiently.</div>
<a id="L2889" name="L2889"></a>2889 
<a id="L2890" name="L2890"></a>2890         <strong class="reserved">void</strong> <a href="../S/1378.html#L1700" title="Referred from 1700 in src/java/io/ObjectInputStream.java.">readBooleans</a>(<strong class="reserved">boolean</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2891" name="L2891"></a>2891             <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>, endoff = off + len;
<a id="L2892" name="L2892"></a>2892             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2893" name="L2893"></a>2893                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2894" name="L2894"></a>2894                     <strong class="reserved">int</strong> span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE);
<a id="L2895" name="L2895"></a>2895                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span);
<a id="L2896" name="L2896"></a>2896                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = off + span;
<a id="L2897" name="L2897"></a>2897                     pos = 0;
<a id="L2898" name="L2898"></a>2898                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 1) <em class="brace">{</em>
<a id="L2899" name="L2899"></a>2899                     v[off++] = din.<a href="../D/30135.html" title="Multiple defined in 10 places.">readBoolean</a>();
<a id="L2900" name="L2900"></a>2900                     <strong class="reserved">continue</strong>;
<a id="L2901" name="L2901"></a>2901                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2902" name="L2902"></a>2902                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos);
<a id="L2903" name="L2903"></a>2903                 <em class="brace">}</em>
<a id="L2904" name="L2904"></a>2904 
<a id="L2905" name="L2905"></a>2905                 <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2906" name="L2906"></a>2906                     v[off++] = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/17286.html" title="Multiple defined in 18 places.">getBoolean</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos++);
<a id="L2907" name="L2907"></a>2907                 <em class="brace">}</em>
<a id="L2908" name="L2908"></a>2908             <em class="brace">}</em>
<a id="L2909" name="L2909"></a>2909         <em class="brace">}</em>
<a id="L2910" name="L2910"></a>2910 
<a id="L2911" name="L2911"></a>2911         <strong class="reserved">void</strong> <a href="../S/1378.html#L1698" title="Referred from 1698 in src/java/io/ObjectInputStream.java.">readChars</a>(<strong class="reserved">char</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2912" name="L2912"></a>2912             <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>, endoff = off + len;
<a id="L2913" name="L2913"></a>2913             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2914" name="L2914"></a>2914                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2915" name="L2915"></a>2915                     <strong class="reserved">int</strong> span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE &gt;&gt; 1);
<a id="L2916" name="L2916"></a>2916                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span &lt;&lt; 1);
<a id="L2917" name="L2917"></a>2917                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = off + span;
<a id="L2918" name="L2918"></a>2918                     pos = 0;
<a id="L2919" name="L2919"></a>2919                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 2) <em class="brace">{</em>
<a id="L2920" name="L2920"></a>2920                     v[off++] = din.<a href="../D/30144.html" title="Multiple defined in 10 places.">readChar</a>();
<a id="L2921" name="L2921"></a>2921                     <strong class="reserved">continue</strong>;
<a id="L2922" name="L2922"></a>2922                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2923" name="L2923"></a>2923                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + ((<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) &gt;&gt; 1));
<a id="L2924" name="L2924"></a>2924                 <em class="brace">}</em>
<a id="L2925" name="L2925"></a>2925 
<a id="L2926" name="L2926"></a>2926                 <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2927" name="L2927"></a>2927                     v[off++] = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/17574.html" title="Multiple defined in 21 places.">getChar</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2928" name="L2928"></a>2928                     pos += 2;
<a id="L2929" name="L2929"></a>2929                 <em class="brace">}</em>
<a id="L2930" name="L2930"></a>2930             <em class="brace">}</em>
<a id="L2931" name="L2931"></a>2931         <em class="brace">}</em>
<a id="L2932" name="L2932"></a>2932 
<a id="L2933" name="L2933"></a>2933         <strong class="reserved">void</strong> <a href="../S/1378.html#L1696" title="Referred from 1696 in src/java/io/ObjectInputStream.java.">readShorts</a>(<strong class="reserved">short</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2934" name="L2934"></a>2934             <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>, endoff = off + len;
<a id="L2935" name="L2935"></a>2935             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2936" name="L2936"></a>2936                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2937" name="L2937"></a>2937                     <strong class="reserved">int</strong> span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE &gt;&gt; 1);
<a id="L2938" name="L2938"></a>2938                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span &lt;&lt; 1);
<a id="L2939" name="L2939"></a>2939                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = off + span;
<a id="L2940" name="L2940"></a>2940                     pos = 0;
<a id="L2941" name="L2941"></a>2941                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 2) <em class="brace">{</em>
<a id="L2942" name="L2942"></a>2942                     v[off++] = din.<a href="../D/30259.html" title="Multiple defined in 10 places.">readShort</a>();
<a id="L2943" name="L2943"></a>2943                     <strong class="reserved">continue</strong>;
<a id="L2944" name="L2944"></a>2944                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2945" name="L2945"></a>2945                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + ((<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) &gt;&gt; 1));
<a id="L2946" name="L2946"></a>2946                 <em class="brace">}</em>
<a id="L2947" name="L2947"></a>2947 
<a id="L2948" name="L2948"></a>2948                 <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2949" name="L2949"></a>2949                     v[off++] = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/22477.html" title="Multiple defined in 18 places.">getShort</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2950" name="L2950"></a>2950                     pos += 2;
<a id="L2951" name="L2951"></a>2951                 <em class="brace">}</em>
<a id="L2952" name="L2952"></a>2952             <em class="brace">}</em>
<a id="L2953" name="L2953"></a>2953         <em class="brace">}</em>
<a id="L2954" name="L2954"></a>2954 
<a id="L2955" name="L2955"></a>2955         <strong class="reserved">void</strong> <a href="../S/1378.html#L1686" title="Referred from 1686 in src/java/io/ObjectInputStream.java.">readInts</a>(<strong class="reserved">int</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2956" name="L2956"></a>2956             <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>, endoff = off + len;
<a id="L2957" name="L2957"></a>2957             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2958" name="L2958"></a>2958                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2959" name="L2959"></a>2959                     <strong class="reserved">int</strong> span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE &gt;&gt; 2);
<a id="L2960" name="L2960"></a>2960                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span &lt;&lt; 2);
<a id="L2961" name="L2961"></a>2961                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = off + span;
<a id="L2962" name="L2962"></a>2962                     pos = 0;
<a id="L2963" name="L2963"></a>2963                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 4) <em class="brace">{</em>
<a id="L2964" name="L2964"></a>2964                     v[off++] = din.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L2965" name="L2965"></a>2965                     <strong class="reserved">continue</strong>;
<a id="L2966" name="L2966"></a>2966                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2967" name="L2967"></a>2967                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + ((<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) &gt;&gt; 2));
<a id="L2968" name="L2968"></a>2968                 <em class="brace">}</em>
<a id="L2969" name="L2969"></a>2969 
<a id="L2970" name="L2970"></a>2970                 <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L2971" name="L2971"></a>2971                     v[off++] = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/19781.html" title="Multiple defined in 33 places.">getInt</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L2972" name="L2972"></a>2972                     pos += 4;
<a id="L2973" name="L2973"></a>2973                 <em class="brace">}</em>
<a id="L2974" name="L2974"></a>2974             <em class="brace">}</em>
<a id="L2975" name="L2975"></a>2975         <em class="brace">}</em>
<a id="L2976" name="L2976"></a>2976 
<a id="L2977" name="L2977"></a>2977         <strong class="reserved">void</strong> <a href="../S/1378.html#L1692" title="Referred from 1692 in src/java/io/ObjectInputStream.java.">readFloats</a>(<strong class="reserved">float</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2978" name="L2978"></a>2978             <strong class="reserved">int</strong> span, endoff = off + len;
<a id="L2979" name="L2979"></a>2979             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L2980" name="L2980"></a>2980                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L2981" name="L2981"></a>2981                     span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE &gt;&gt; 2);
<a id="L2982" name="L2982"></a>2982                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span &lt;&lt; 2);
<a id="L2983" name="L2983"></a>2983                     pos = 0;
<a id="L2984" name="L2984"></a>2984                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 4) <em class="brace">{</em>
<a id="L2985" name="L2985"></a>2985                     v[off++] = din.<a href="../D/30182.html" title="Multiple defined in 10 places.">readFloat</a>();
<a id="L2986" name="L2986"></a>2986                     <strong class="reserved">continue</strong>;
<a id="L2987" name="L2987"></a>2987                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2988" name="L2988"></a>2988                     span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, ((<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) &gt;&gt; 2));
<a id="L2989" name="L2989"></a>2989                 <em class="brace">}</em>
<a id="L2990" name="L2990"></a>2990 
<a id="L2991" name="L2991"></a>2991                 <a href="../S/1378.html#L2041" title="Defined at 2041 in src/java/io/ObjectInputStream.java.">bytesToFloats</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v, off, span);
<a id="L2992" name="L2992"></a>2992                 off += span;
<a id="L2993" name="L2993"></a>2993                 pos += span &lt;&lt; 2;
<a id="L2994" name="L2994"></a>2994             <em class="brace">}</em>
<a id="L2995" name="L2995"></a>2995         <em class="brace">}</em>
<a id="L2996" name="L2996"></a>2996 
<a id="L2997" name="L2997"></a>2997         <strong class="reserved">void</strong> <a href="../S/1378.html#L1690" title="Referred from 1690 in src/java/io/ObjectInputStream.java.">readLongs</a>(<strong class="reserved">long</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2998" name="L2998"></a>2998             <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>, endoff = off + len;
<a id="L2999" name="L2999"></a>2999             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L3000" name="L3000"></a>3000                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L3001" name="L3001"></a>3001                     <strong class="reserved">int</strong> span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE &gt;&gt; 3);
<a id="L3002" name="L3002"></a>3002                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span &lt;&lt; 3);
<a id="L3003" name="L3003"></a>3003                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = off + span;
<a id="L3004" name="L3004"></a>3004                     pos = 0;
<a id="L3005" name="L3005"></a>3005                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 8) <em class="brace">{</em>
<a id="L3006" name="L3006"></a>3006                     v[off++] = din.<a href="../D/30217.html" title="Multiple defined in 10 places.">readLong</a>();
<a id="L3007" name="L3007"></a>3007                     <strong class="reserved">continue</strong>;
<a id="L3008" name="L3008"></a>3008                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3009" name="L3009"></a>3009                     <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff, off + ((<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) &gt;&gt; 3));
<a id="L3010" name="L3010"></a>3010                 <em class="brace">}</em>
<a id="L3011" name="L3011"></a>3011 
<a id="L3012" name="L3012"></a>3012                 <strong class="reserved">while</strong> (off &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L3013" name="L3013"></a>3013                     v[off++] = <a href="../D/908.html" title="Multiple defined in 2 places.">Bits</a>.<a href="../D/20280.html" title="Multiple defined in 48 places.">getLong</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos);
<a id="L3014" name="L3014"></a>3014                     pos += 8;
<a id="L3015" name="L3015"></a>3015                 <em class="brace">}</em>
<a id="L3016" name="L3016"></a>3016             <em class="brace">}</em>
<a id="L3017" name="L3017"></a>3017         <em class="brace">}</em>
<a id="L3018" name="L3018"></a>3018 
<a id="L3019" name="L3019"></a>3019         <strong class="reserved">void</strong> <a href="../S/1378.html#L1694" title="Referred from 1694 in src/java/io/ObjectInputStream.java.">readDoubles</a>(<strong class="reserved">double</strong>[] v, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> len) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L3020" name="L3020"></a>3020             <strong class="reserved">int</strong> span, endoff = off + len;
<a id="L3021" name="L3021"></a>3021             <strong class="reserved">while</strong> (off &lt; endoff) <em class="brace">{</em>
<a id="L3022" name="L3022"></a>3022                 <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L3023" name="L3023"></a>3023                     span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, MAX_BLOCK_SIZE &gt;&gt; 3);
<a id="L3024" name="L3024"></a>3024                     <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, span &lt;&lt; 3);
<a id="L3025" name="L3025"></a>3025                     pos = 0;
<a id="L3026" name="L3026"></a>3026                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos &lt; 8) <em class="brace">{</em>
<a id="L3027" name="L3027"></a>3027                     v[off++] = din.<a href="../D/30166.html" title="Multiple defined in 10 places.">readDouble</a>();
<a id="L3028" name="L3028"></a>3028                     <strong class="reserved">continue</strong>;
<a id="L3029" name="L3029"></a>3029                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3030" name="L3030"></a>3030                     span = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(endoff - off, ((<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos) &gt;&gt; 3));
<a id="L3031" name="L3031"></a>3031                 <em class="brace">}</em>
<a id="L3032" name="L3032"></a>3032 
<a id="L3033" name="L3033"></a>3033                 <a href="../S/1378.html#L2049" title="Defined at 2049 in src/java/io/ObjectInputStream.java.">bytesToDoubles</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, v, off, span);
<a id="L3034" name="L3034"></a>3034                 off += span;
<a id="L3035" name="L3035"></a>3035                 pos += span &lt;&lt; 3;
<a id="L3036" name="L3036"></a>3036             <em class="brace">}</em>
<a id="L3037" name="L3037"></a>3037         <em class="brace">}</em>
<a id="L3038" name="L3038"></a>3038 
<div class="comment">
          Reads in string written in "long" UTF format.  "Long" UTF format is
          identical to standard UTF, except that it uses an 8 byte header
          (instead of the standard 2 bytes) to convey the UTF encoding length.</div>
<a id="L3044" name="L3044"></a>3044         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1378.html#L1643" title="Referred from 1643 in src/java/io/ObjectInputStream.java.">readLongUTF</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L3045" name="L3045"></a>3045             <strong class="reserved">return</strong> <a href="../S/1378.html#L3053" title="Defined at 3053 in src/java/io/ObjectInputStream.java.">readUTFBody</a>(<a href="../D/30217.html" title="Multiple defined in 10 places.">readLong</a>());
<a id="L3046" name="L3046"></a>3046         <em class="brace">}</em>
<a id="L3047" name="L3047"></a>3047 
<div class="comment">
          Reads in the "body" (i.e., the UTF representation minus the 2-byte
          or 8-byte length header) of a UTF encoding, which occupies the next
          utflen bytes.</div>
<a id="L3053" name="L3053"></a>3053         <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25562.html" title="Multiple referred from 2 places.">readUTFBody</a>(<strong class="reserved">long</strong> utflen) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L3054" name="L3054"></a>3054             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sbuf = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L3055" name="L3055"></a>3055             <strong class="reserved">if</strong> (!blkmode) <em class="brace">{</em>
<a id="L3056" name="L3056"></a>3056                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = pos = 0;
<a id="L3057" name="L3057"></a>3057             <em class="brace">}</em>
<a id="L3058" name="L3058"></a>3058 
<a id="L3059" name="L3059"></a>3059             <strong class="reserved">while</strong> (utflen &gt; 0) <em class="brace">{</em>
<a id="L3060" name="L3060"></a>3060                 <strong class="reserved">int</strong> avail = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos;
<a id="L3061" name="L3061"></a>3061                 <strong class="reserved">if</strong> (avail &gt;= 3 || (<strong class="reserved">long</strong>) avail == utflen) <em class="brace">{</em>
<a id="L3062" name="L3062"></a>3062                     utflen -= <a href="../S/1378.html#L3088" title="Defined at 3088 in src/java/io/ObjectInputStream.java.">readUTFSpan</a>(sbuf, utflen);
<a id="L3063" name="L3063"></a>3063                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3064" name="L3064"></a>3064                     <strong class="reserved">if</strong> (blkmode) <em class="brace">{</em>
<a id="L3065" name="L3065"></a>3065                         <em class="comment">// near block boundary, read one byte at a time</em>
<a id="L3066" name="L3066"></a>3066                         utflen -= <a href="../S/1378.html#L3165" title="Defined at 3165 in src/java/io/ObjectInputStream.java.">readUTFChar</a>(sbuf, utflen);
<a id="L3067" name="L3067"></a>3067                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3068" name="L3068"></a>3068                         <em class="comment">// shift and refill buffer manually</em>
<a id="L3069" name="L3069"></a>3069                         <strong class="reserved">if</strong> (avail &gt; 0) <em class="brace">{</em>
<a id="L3070" name="L3070"></a>3070                             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, pos, <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, 0, avail);
<a id="L3071" name="L3071"></a>3071                         <em class="brace">}</em>
<a id="L3072" name="L3072"></a>3072                         pos = 0;
<a id="L3073" name="L3073"></a>3073                         <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = (<strong class="reserved">int</strong>) <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(MAX_BLOCK_SIZE, utflen);
<a id="L3074" name="L3074"></a>3074                         <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(<a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>, avail, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - avail);
<a id="L3075" name="L3075"></a>3075                     <em class="brace">}</em>
<a id="L3076" name="L3076"></a>3076                 <em class="brace">}</em>
<a id="L3077" name="L3077"></a>3077             <em class="brace">}</em>
<a id="L3078" name="L3078"></a>3078 
<a id="L3079" name="L3079"></a>3079             <strong class="reserved">return</strong> sbuf.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L3080" name="L3080"></a>3080         <em class="brace">}</em>
<a id="L3081" name="L3081"></a>3081 
<div class="comment">
          Reads span of UTF-encoded characters out of internal buffer
          (starting at offset pos and ending at or before offset end),
          consuming no more than utflen bytes.  Appends read characters to
          sbuf.  Returns the number of bytes consumed.</div>
<a id="L3088" name="L3088"></a>3088         <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../S/1378.html#L3062" title="Referred from 3062 in src/java/io/ObjectInputStream.java.">readUTFSpan</a>(<a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sbuf, <strong class="reserved">long</strong> utflen)
<a id="L3089" name="L3089"></a>3089             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L3090" name="L3090"></a>3090         <em class="brace">{</em>
<a id="L3091" name="L3091"></a>3091             <strong class="reserved">int</strong> cpos = 0;
<a id="L3092" name="L3092"></a>3092             <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = pos;
<a id="L3093" name="L3093"></a>3093             <strong class="reserved">int</strong> avail = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - pos, CHAR_BUF_SIZE);
<a id="L3094" name="L3094"></a>3094             <em class="comment">// stop short of last char unless all of utf bytes in buffer</em>
<a id="L3095" name="L3095"></a>3095             <strong class="reserved">int</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = pos + ((utflen &gt; avail) ? avail - 2 : (<strong class="reserved">int</strong>) utflen);
<a id="L3096" name="L3096"></a>3096             <strong class="reserved">boolean</strong> outOfBounds = <strong class="reserved">false</strong>;
<a id="L3097" name="L3097"></a>3097 
<a id="L3098" name="L3098"></a>3098             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L3099" name="L3099"></a>3099                 <strong class="reserved">while</strong> (pos &lt; <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L3100" name="L3100"></a>3100                     <strong class="reserved">int</strong> b1, b2, b3;
<a id="L3101" name="L3101"></a>3101                     b1 = <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++] &amp; 0xFF;
<a id="L3102" name="L3102"></a>3102                     <strong class="reserved">switch</strong> (b1 &gt;&gt; 4) <em class="brace">{</em>
<a id="L3103" name="L3103"></a>3103                         <strong class="reserved">case</strong> 0:
<a id="L3104" name="L3104"></a>3104                         <strong class="reserved">case</strong> 1:
<a id="L3105" name="L3105"></a>3105                         <strong class="reserved">case</strong> 2:
<a id="L3106" name="L3106"></a>3106                         <strong class="reserved">case</strong> 3:
<a id="L3107" name="L3107"></a>3107                         <strong class="reserved">case</strong> 4:
<a id="L3108" name="L3108"></a>3108                         <strong class="reserved">case</strong> 5:
<a id="L3109" name="L3109"></a>3109                         <strong class="reserved">case</strong> 6:
<a id="L3110" name="L3110"></a>3110                         <strong class="reserved">case</strong> 7:   <em class="comment">// 1 byte format: 0xxxxxxx</em>
<a id="L3111" name="L3111"></a>3111                             cbuf[cpos++] = (<strong class="reserved">char</strong>) b1;
<a id="L3112" name="L3112"></a>3112                             <strong class="reserved">break</strong>;
<a id="L3113" name="L3113"></a>3113 
<a id="L3114" name="L3114"></a>3114                         <strong class="reserved">case</strong> 12:
<a id="L3115" name="L3115"></a>3115                         <strong class="reserved">case</strong> 13:  <em class="comment">// 2 byte format: 110xxxxx 10xxxxxx</em>
<a id="L3116" name="L3116"></a>3116                             b2 = <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos++];
<a id="L3117" name="L3117"></a>3117                             <strong class="reserved">if</strong> ((b2 &amp; 0xC0) != 0x80) <em class="brace">{</em>
<a id="L3118" name="L3118"></a>3118                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3119" name="L3119"></a>3119                             <em class="brace">}</em>
<a id="L3120" name="L3120"></a>3120                             cbuf[cpos++] = (<strong class="reserved">char</strong>) (((b1 &amp; 0x1F) &lt;&lt; 6) |
<a id="L3121" name="L3121"></a>3121                                                    ((b2 &amp; 0x3F) &lt;&lt; 0));
<a id="L3122" name="L3122"></a>3122                             <strong class="reserved">break</strong>;
<a id="L3123" name="L3123"></a>3123 
<a id="L3124" name="L3124"></a>3124                         <strong class="reserved">case</strong> 14:  <em class="comment">// 3 byte format: 1110xxxx 10xxxxxx 10xxxxxx</em>
<a id="L3125" name="L3125"></a>3125                             b3 = <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 1];
<a id="L3126" name="L3126"></a>3126                             b2 = <a href="../D/11927.html" title="Multiple defined in 8 places.">buf</a>[pos + 0];
<a id="L3127" name="L3127"></a>3127                             pos += 2;
<a id="L3128" name="L3128"></a>3128                             <strong class="reserved">if</strong> ((b2 &amp; 0xC0) != 0x80 || (b3 &amp; 0xC0) != 0x80) <em class="brace">{</em>
<a id="L3129" name="L3129"></a>3129                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3130" name="L3130"></a>3130                             <em class="brace">}</em>
<a id="L3131" name="L3131"></a>3131                             cbuf[cpos++] = (<strong class="reserved">char</strong>) (((b1 &amp; 0x0F) &lt;&lt; 12) |
<a id="L3132" name="L3132"></a>3132                                                    ((b2 &amp; 0x3F) &lt;&lt; 6) |
<a id="L3133" name="L3133"></a>3133                                                    ((b3 &amp; 0x3F) &lt;&lt; 0));
<a id="L3134" name="L3134"></a>3134                             <strong class="reserved">break</strong>;
<a id="L3135" name="L3135"></a>3135 
<a id="L3136" name="L3136"></a>3136                         <strong class="reserved">default</strong>:  <em class="comment">// 10xx xxxx, 1111 xxxx</em>
<a id="L3137" name="L3137"></a>3137                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3138" name="L3138"></a>3138                     <em class="brace">}</em>
<a id="L3139" name="L3139"></a>3139                 <em class="brace">}</em>
<a id="L3140" name="L3140"></a>3140             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L3141" name="L3141"></a>3141                 outOfBounds = <strong class="reserved">true</strong>;
<a id="L3142" name="L3142"></a>3142             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L3143" name="L3143"></a>3143                 <strong class="reserved">if</strong> (outOfBounds || (pos - <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) &gt; utflen) <em class="brace">{</em>
<div class="comment">
                      Fix for 4450867: if a malformed utf char causes the
                      conversion loop to scan past the expected end of the utf
                      string, only consume the expected number of utf bytes.</div>
<a id="L3149" name="L3149"></a>3149                     pos = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> + (<strong class="reserved">int</strong>) utflen;
<a id="L3150" name="L3150"></a>3150                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3151" name="L3151"></a>3151                 <em class="brace">}</em>
<a id="L3152" name="L3152"></a>3152             <em class="brace">}</em>
<a id="L3153" name="L3153"></a>3153 
<a id="L3154" name="L3154"></a>3154             sbuf.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(cbuf, 0, cpos);
<a id="L3155" name="L3155"></a>3155             <strong class="reserved">return</strong> pos - <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L3156" name="L3156"></a>3156         <em class="brace">}</em>
<a id="L3157" name="L3157"></a>3157 
<div class="comment">
          Reads in single UTF-encoded character one byte at a time, appends
          the character to sbuf, and returns the number of bytes consumed.
          This method is used when reading in UTF strings written in block
          data mode to handle UTF-encoded characters which (potentially)
          straddle block-data boundaries.</div>
<a id="L3165" name="L3165"></a>3165         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../S/1378.html#L3066" title="Referred from 3066 in src/java/io/ObjectInputStream.java.">readUTFChar</a>(<a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sbuf, <strong class="reserved">long</strong> utflen)
<a id="L3166" name="L3166"></a>3166             <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L3167" name="L3167"></a>3167         <em class="brace">{</em>
<a id="L3168" name="L3168"></a>3168             <strong class="reserved">int</strong> b1, b2, b3;
<a id="L3169" name="L3169"></a>3169             b1 = <a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>() &amp; 0xFF;
<a id="L3170" name="L3170"></a>3170             <strong class="reserved">switch</strong> (b1 &gt;&gt; 4) <em class="brace">{</em>
<a id="L3171" name="L3171"></a>3171                 <strong class="reserved">case</strong> 0:
<a id="L3172" name="L3172"></a>3172                 <strong class="reserved">case</strong> 1:
<a id="L3173" name="L3173"></a>3173                 <strong class="reserved">case</strong> 2:
<a id="L3174" name="L3174"></a>3174                 <strong class="reserved">case</strong> 3:
<a id="L3175" name="L3175"></a>3175                 <strong class="reserved">case</strong> 4:
<a id="L3176" name="L3176"></a>3176                 <strong class="reserved">case</strong> 5:
<a id="L3177" name="L3177"></a>3177                 <strong class="reserved">case</strong> 6:
<a id="L3178" name="L3178"></a>3178                 <strong class="reserved">case</strong> 7:     <em class="comment">// 1 byte format: 0xxxxxxx</em>
<a id="L3179" name="L3179"></a>3179                     sbuf.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>) b1);
<a id="L3180" name="L3180"></a>3180                     <strong class="reserved">return</strong> 1;
<a id="L3181" name="L3181"></a>3181 
<a id="L3182" name="L3182"></a>3182                 <strong class="reserved">case</strong> 12:
<a id="L3183" name="L3183"></a>3183                 <strong class="reserved">case</strong> 13:    <em class="comment">// 2 byte format: 110xxxxx 10xxxxxx</em>
<a id="L3184" name="L3184"></a>3184                     <strong class="reserved">if</strong> (utflen &lt; 2) <em class="brace">{</em>
<a id="L3185" name="L3185"></a>3185                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3186" name="L3186"></a>3186                     <em class="brace">}</em>
<a id="L3187" name="L3187"></a>3187                     b2 = <a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L3188" name="L3188"></a>3188                     <strong class="reserved">if</strong> ((b2 &amp; 0xC0) != 0x80) <em class="brace">{</em>
<a id="L3189" name="L3189"></a>3189                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3190" name="L3190"></a>3190                     <em class="brace">}</em>
<a id="L3191" name="L3191"></a>3191                     sbuf.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>) (((b1 &amp; 0x1F) &lt;&lt; 6) |
<a id="L3192" name="L3192"></a>3192                                         ((b2 &amp; 0x3F) &lt;&lt; 0)));
<a id="L3193" name="L3193"></a>3193                     <strong class="reserved">return</strong> 2;
<a id="L3194" name="L3194"></a>3194 
<a id="L3195" name="L3195"></a>3195                 <strong class="reserved">case</strong> 14:    <em class="comment">// 3 byte format: 1110xxxx 10xxxxxx 10xxxxxx</em>
<a id="L3196" name="L3196"></a>3196                     <strong class="reserved">if</strong> (utflen &lt; 3) <em class="brace">{</em>
<a id="L3197" name="L3197"></a>3197                         <strong class="reserved">if</strong> (utflen == 2) <em class="brace">{</em>
<a id="L3198" name="L3198"></a>3198                             <a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();         <em class="comment">// consume remaining byte</em>
<a id="L3199" name="L3199"></a>3199                         <em class="brace">}</em>
<a id="L3200" name="L3200"></a>3200                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3201" name="L3201"></a>3201                     <em class="brace">}</em>
<a id="L3202" name="L3202"></a>3202                     b2 = <a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L3203" name="L3203"></a>3203                     b3 = <a href="../D/30138.html" title="Multiple defined in 10 places.">readByte</a>();
<a id="L3204" name="L3204"></a>3204                     <strong class="reserved">if</strong> ((b2 &amp; 0xC0) != 0x80 || (b3 &amp; 0xC0) != 0x80) <em class="brace">{</em>
<a id="L3205" name="L3205"></a>3205                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3206" name="L3206"></a>3206                     <em class="brace">}</em>
<a id="L3207" name="L3207"></a>3207                     sbuf.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>) (((b1 &amp; 0x0F) &lt;&lt; 12) |
<a id="L3208" name="L3208"></a>3208                                         ((b2 &amp; 0x3F) &lt;&lt; 6) |
<a id="L3209" name="L3209"></a>3209                                         ((b3 &amp; 0x3F) &lt;&lt; 0)));
<a id="L3210" name="L3210"></a>3210                     <strong class="reserved">return</strong> 3;
<a id="L3211" name="L3211"></a>3211 
<a id="L3212" name="L3212"></a>3212                 <strong class="reserved">default</strong>:   <em class="comment">// 10xx xxxx, 1111 xxxx</em>
<a id="L3213" name="L3213"></a>3213                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1397.html#L46" title="Defined at 46 in src/java/io/UTFDataFormatException.java.">UTFDataFormatException</a>();
<a id="L3214" name="L3214"></a>3214             <em class="brace">}</em>
<a id="L3215" name="L3215"></a>3215         <em class="brace">}</em>
<a id="L3216" name="L3216"></a>3216     <em class="brace">}</em>
<a id="L3217" name="L3217"></a>3217 
<div class="comment">
      Unsynchronized table which tracks wire handle to object mappings, as
      well as ClassNotFoundExceptions associated with deserialized objects.
      This class implements an exception-propagation algorithm for
      determining which objects should have ClassNotFoundExceptions associated
      with them, taking into account cycles and discontinuities (e.g., skipped
      fields) in the object graph.
      <p>General use of the table is as follows: during deserialization, a
      given object is first assigned a handle by calling the assign method.
      This method leaves the assigned handle in an "open" state, wherein
      dependencies on the exception status of other handles can be registered
      by calling the markDependency method, or an exception can be directly
      associated with the handle by calling markException.  When a handle is
      tagged with an exception, the HandleTable assumes responsibility for
      propagating the exception to any other objects which depend
      (transitively) on the exception-tagged object.
      </p><p>Once all exception information/dependencies for the handle have been
      registered, the handle should be "closed" by calling the finish method
      on it.  The act of finishing a handle allows the exception propagation
      algorithm to aggressively prune dependency links, lessening the
      performance/memory impact of exception tracking.
      </p><p>Note that the exception propagation algorithm used depends on handles
      being assigned/finished in LIFO order; however, for simplicity as well
      as memory conservation, it does not enforce this constraint.</p></div>
<a id="L3246" name="L3246"></a>3246     <em class="comment">// REMIND: add full description of exception propagation algorithm?</em>
<a id="L3247" name="L3247"></a>3247     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/3375.html" title="Multiple referred from 6 places.">HandleTable</a> <em class="brace">{</em>
<a id="L3248" name="L3248"></a>3248 
<div class="comment">
         /* status codes indicating whether object has associated exception */</div>
<a id="L3250" name="L3250"></a>3250         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong> STATUS_OK = 1;
<a id="L3251" name="L3251"></a>3251         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong> STATUS_UNKNOWN = 2;
<a id="L3252" name="L3252"></a>3252         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong> STATUS_EXCEPTION = 3;
<a id="L3253" name="L3253"></a>3253 
<div class="comment">
         /** array mapping handle -&gt; object status */</div>
<a id="L3255" name="L3255"></a>3255         <strong class="reserved">byte</strong>[] <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>;
<div class="comment">
         /** array mapping handle -&gt; object/exception (depending on status) */</div>
<a id="L3257" name="L3257"></a>3257         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>;
<div class="comment">
         /** array mapping handle -&gt; list of dependent handles (if any) */</div>
<a id="L3259" name="L3259"></a>3259         <a href="../S/1378.html#L3490" title="Defined at 3490 in src/java/io/ObjectInputStream.java.">HandleList</a>[] deps;
<div class="comment">
         /** lowest unresolved dependency */</div>
<a id="L3261" name="L3261"></a>3261         <strong class="reserved">int</strong> lowDep = -1;
<div class="comment">
         /** number of handles in table */</div>
<a id="L3263" name="L3263"></a>3263         <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L3264" name="L3264"></a>3264 
<div class="comment">
          Creates handle table with the given initial capacity.</div>
<a id="L3268" name="L3268"></a>3268         HandleTable(<strong class="reserved">int</strong> initialCapacity) <em class="brace">{</em>
<a id="L3269" name="L3269"></a>3269             <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a> = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[initialCapacity];
<a id="L3270" name="L3270"></a>3270             <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a> = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[initialCapacity];
<a id="L3271" name="L3271"></a>3271             deps = <strong class="reserved">new</strong> <a href="../S/1378.html#L3490" title="Defined at 3490 in src/java/io/ObjectInputStream.java.">HandleList</a>[initialCapacity];
<a id="L3272" name="L3272"></a>3272         <em class="brace">}</em>
<a id="L3273" name="L3273"></a>3273 
<div class="comment">
          Assigns next available handle to given object, and returns assigned
          handle.  Once object has been completely deserialized (and all
          dependencies on other objects identified), the handle should be
          "closed" by passing it to finish().</div>
<a id="L3280" name="L3280"></a>3280         <strong class="reserved">int</strong> <a href="../R/10378.html" title="Multiple referred from 38 places.">assign</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L3281" name="L3281"></a>3281             <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3282" name="L3282"></a>3282                 <a href="../D/23921.html" title="Multiple defined in 19 places.">grow</a>();
<a id="L3283" name="L3283"></a>3283             <em class="brace">}</em>
<a id="L3284" name="L3284"></a>3284             <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>] = STATUS_UNKNOWN;
<a id="L3285" name="L3285"></a>3285             <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>] = obj;
<a id="L3286" name="L3286"></a>3286             <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>++;
<a id="L3287" name="L3287"></a>3287         <em class="brace">}</em>
<a id="L3288" name="L3288"></a>3288 
<div class="comment">
          Registers a dependency (in exception status) of one handle on
          another.  The dependent handle must be "open" (i.e., assigned, but
          not finished yet).  No action is taken if either dependent or target
          handle is NULL_HANDLE.</div>
<a id="L3295" name="L3295"></a>3295         <strong class="reserved">void</strong> <a href="../R/23098.html" title="Multiple referred from 5 places.">markDependency</a>(<strong class="reserved">int</strong> dependent, <strong class="reserved">int</strong> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>) <em class="brace">{</em>
<a id="L3296" name="L3296"></a>3296             <strong class="reserved">if</strong> (dependent == NULL_HANDLE || <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> == NULL_HANDLE) <em class="brace">{</em>
<a id="L3297" name="L3297"></a>3297                 <strong class="reserved">return</strong>;
<a id="L3298" name="L3298"></a>3298             <em class="brace">}</em>
<a id="L3299" name="L3299"></a>3299             <strong class="reserved">switch</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[dependent]) <em class="brace">{</em>
<a id="L3300" name="L3300"></a>3300 
<a id="L3301" name="L3301"></a>3301                 <strong class="reserved">case</strong> STATUS_UNKNOWN:
<a id="L3302" name="L3302"></a>3302                     <strong class="reserved">switch</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>]) <em class="brace">{</em>
<a id="L3303" name="L3303"></a>3303                         <strong class="reserved">case</strong> STATUS_OK:
<a id="L3304" name="L3304"></a>3304                             <em class="comment">// ignore dependencies on objs with no exception</em>
<a id="L3305" name="L3305"></a>3305                             <strong class="reserved">break</strong>;
<a id="L3306" name="L3306"></a>3306 
<a id="L3307" name="L3307"></a>3307                         <strong class="reserved">case</strong> STATUS_EXCEPTION:
<a id="L3308" name="L3308"></a>3308                             <em class="comment">// eagerly propagate exception</em>
<a id="L3309" name="L3309"></a>3309                             <a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(dependent,
<a id="L3310" name="L3310"></a>3310                                 (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>) <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>[<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>]);
<a id="L3311" name="L3311"></a>3311                             <strong class="reserved">break</strong>;
<a id="L3312" name="L3312"></a>3312 
<a id="L3313" name="L3313"></a>3313                         <strong class="reserved">case</strong> STATUS_UNKNOWN:
<a id="L3314" name="L3314"></a>3314                             <em class="comment">// add to dependency list of target</em>
<a id="L3315" name="L3315"></a>3315                             <strong class="reserved">if</strong> (deps[<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>] == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3316" name="L3316"></a>3316                                 deps[<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>] = <strong class="reserved">new</strong> <a href="../S/1378.html#L3490" title="Defined at 3490 in src/java/io/ObjectInputStream.java.">HandleList</a>();
<a id="L3317" name="L3317"></a>3317                             <em class="brace">}</em>
<a id="L3318" name="L3318"></a>3318                             deps[<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>].<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(dependent);
<a id="L3319" name="L3319"></a>3319 
<a id="L3320" name="L3320"></a>3320                             <em class="comment">// remember lowest unresolved target seen</em>
<a id="L3321" name="L3321"></a>3321                             <strong class="reserved">if</strong> (lowDep &lt; 0 || lowDep &gt; <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>) <em class="brace">{</em>
<a id="L3322" name="L3322"></a>3322                                 lowDep = <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>;
<a id="L3323" name="L3323"></a>3323                             <em class="brace">}</em>
<a id="L3324" name="L3324"></a>3324                             <strong class="reserved">break</strong>;
<a id="L3325" name="L3325"></a>3325 
<a id="L3326" name="L3326"></a>3326                         <strong class="reserved">default</strong>:
<a id="L3327" name="L3327"></a>3327                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L3328" name="L3328"></a>3328                     <em class="brace">}</em>
<a id="L3329" name="L3329"></a>3329                     <strong class="reserved">break</strong>;
<a id="L3330" name="L3330"></a>3330 
<a id="L3331" name="L3331"></a>3331                 <strong class="reserved">case</strong> STATUS_EXCEPTION:
<a id="L3332" name="L3332"></a>3332                     <strong class="reserved">break</strong>;
<a id="L3333" name="L3333"></a>3333 
<a id="L3334" name="L3334"></a>3334                 <strong class="reserved">default</strong>:
<a id="L3335" name="L3335"></a>3335                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L3336" name="L3336"></a>3336             <em class="brace">}</em>
<a id="L3337" name="L3337"></a>3337         <em class="brace">}</em>
<a id="L3338" name="L3338"></a>3338 
<div class="comment">
          Associates a ClassNotFoundException (if one not already associated)
          with the currently active handle and propagates it to other
          referencing objects as appropriate.  The specified handle must be
          "open" (i.e., assigned, but not finished yet).</div>
<a id="L3345" name="L3345"></a>3345         <strong class="reserved">void</strong> <a href="../R/23099.html" title="Multiple referred from 8 places.">markException</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L3346" name="L3346"></a>3346             <strong class="reserved">switch</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>]) <em class="brace">{</em>
<a id="L3347" name="L3347"></a>3347                 <strong class="reserved">case</strong> STATUS_UNKNOWN:
<a id="L3348" name="L3348"></a>3348                     <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] = STATUS_EXCEPTION;
<a id="L3349" name="L3349"></a>3349                     <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L3350" name="L3350"></a>3350 
<a id="L3351" name="L3351"></a>3351                     <em class="comment">// propagate exception to dependents</em>
<a id="L3352" name="L3352"></a>3352                     <a href="../S/1378.html#L3490" title="Defined at 3490 in src/java/io/ObjectInputStream.java.">HandleList</a> dlist = deps[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>];
<a id="L3353" name="L3353"></a>3353                     <strong class="reserved">if</strong> (dlist != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3354" name="L3354"></a>3354                         <strong class="reserved">int</strong> ndeps = dlist.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L3355" name="L3355"></a>3355                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ndeps; i++) <em class="brace">{</em>
<a id="L3356" name="L3356"></a>3356                             <a href="../S/1378.html#L3345" title="Defined at 3345 in src/java/io/ObjectInputStream.java.">markException</a>(dlist.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i), <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L3357" name="L3357"></a>3357                         <em class="brace">}</em>
<a id="L3358" name="L3358"></a>3358                         deps[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] = <strong class="reserved">null</strong>;
<a id="L3359" name="L3359"></a>3359                     <em class="brace">}</em>
<a id="L3360" name="L3360"></a>3360                     <strong class="reserved">break</strong>;
<a id="L3361" name="L3361"></a>3361 
<a id="L3362" name="L3362"></a>3362                 <strong class="reserved">case</strong> STATUS_EXCEPTION:
<a id="L3363" name="L3363"></a>3363                     <strong class="reserved">break</strong>;
<a id="L3364" name="L3364"></a>3364 
<a id="L3365" name="L3365"></a>3365                 <strong class="reserved">default</strong>:
<a id="L3366" name="L3366"></a>3366                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L3367" name="L3367"></a>3367             <em class="brace">}</em>
<a id="L3368" name="L3368"></a>3368         <em class="brace">}</em>
<a id="L3369" name="L3369"></a>3369 
<div class="comment">
          Marks given handle as finished, meaning that no new dependencies
          will be marked for handle.  Calls to the assign and finish methods
          must occur in LIFO order.</div>
<a id="L3375" name="L3375"></a>3375         <strong class="reserved">void</strong> <a href="../R/14519.html" title="Multiple referred from 38 places.">finish</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <em class="brace">{</em>
<a id="L3376" name="L3376"></a>3376             <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L3377" name="L3377"></a>3377             <strong class="reserved">if</strong> (lowDep &lt; 0) <em class="brace">{</em>
<a id="L3378" name="L3378"></a>3378                 <em class="comment">// no pending unknowns, only resolve current handle</em>
<a id="L3379" name="L3379"></a>3379                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> + 1;
<a id="L3380" name="L3380"></a>3380             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (lowDep &gt;= <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <em class="brace">{</em>
<a id="L3381" name="L3381"></a>3381                 <em class="comment">// pending unknowns now clearable, resolve all upward handles</em>
<a id="L3382" name="L3382"></a>3382                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L3383" name="L3383"></a>3383                 lowDep = -1;
<a id="L3384" name="L3384"></a>3384             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3385" name="L3385"></a>3385                 <em class="comment">// unresolved backrefs present, can't resolve anything yet</em>
<a id="L3386" name="L3386"></a>3386                 <strong class="reserved">return</strong>;
<a id="L3387" name="L3387"></a>3387             <em class="brace">}</em>
<a id="L3388" name="L3388"></a>3388 
<a id="L3389" name="L3389"></a>3389             <em class="comment">// change STATUS_UNKNOWN -&gt; STATUS_OK in selected span of handles</em>
<a id="L3390" name="L3390"></a>3390             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>; i &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>; i++) <em class="brace">{</em>
<a id="L3391" name="L3391"></a>3391                 <strong class="reserved">switch</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[i]) <em class="brace">{</em>
<a id="L3392" name="L3392"></a>3392                     <strong class="reserved">case</strong> STATUS_UNKNOWN:
<a id="L3393" name="L3393"></a>3393                         <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[i] = STATUS_OK;
<a id="L3394" name="L3394"></a>3394                         deps[i] = <strong class="reserved">null</strong>;
<a id="L3395" name="L3395"></a>3395                         <strong class="reserved">break</strong>;
<a id="L3396" name="L3396"></a>3396 
<a id="L3397" name="L3397"></a>3397                     <strong class="reserved">case</strong> STATUS_OK:
<a id="L3398" name="L3398"></a>3398                     <strong class="reserved">case</strong> STATUS_EXCEPTION:
<a id="L3399" name="L3399"></a>3399                         <strong class="reserved">break</strong>;
<a id="L3400" name="L3400"></a>3400 
<a id="L3401" name="L3401"></a>3401                     <strong class="reserved">default</strong>:
<a id="L3402" name="L3402"></a>3402                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L3403" name="L3403"></a>3403                 <em class="brace">}</em>
<a id="L3404" name="L3404"></a>3404             <em class="brace">}</em>
<a id="L3405" name="L3405"></a>3405         <em class="brace">}</em>
<a id="L3406" name="L3406"></a>3406 
<div class="comment">
          Assigns a new object to the given handle.  The object previously
          associated with the handle is forgotten.  This method has no effect
          if the given handle already has an exception associated with it.
          This method may be called at any time after the handle is assigned.</div>
<a id="L3413" name="L3413"></a>3413         <strong class="reserved">void</strong> <a href="../R/27844.html" title="Multiple referred from 22 places.">setObject</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L3414" name="L3414"></a>3414             <strong class="reserved">switch</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>]) <em class="brace">{</em>
<a id="L3415" name="L3415"></a>3415                 <strong class="reserved">case</strong> STATUS_UNKNOWN:
<a id="L3416" name="L3416"></a>3416                 <strong class="reserved">case</strong> STATUS_OK:
<a id="L3417" name="L3417"></a>3417                     <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] = obj;
<a id="L3418" name="L3418"></a>3418                     <strong class="reserved">break</strong>;
<a id="L3419" name="L3419"></a>3419 
<a id="L3420" name="L3420"></a>3420                 <strong class="reserved">case</strong> STATUS_EXCEPTION:
<a id="L3421" name="L3421"></a>3421                     <strong class="reserved">break</strong>;
<a id="L3422" name="L3422"></a>3422 
<a id="L3423" name="L3423"></a>3423                 <strong class="reserved">default</strong>:
<a id="L3424" name="L3424"></a>3424                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>();
<a id="L3425" name="L3425"></a>3425             <em class="brace">}</em>
<a id="L3426" name="L3426"></a>3426         <em class="brace">}</em>
<a id="L3427" name="L3427"></a>3427 
<div class="comment">
          Looks up and returns object associated with the given handle.
          Returns null if the given handle is NULL_HANDLE, or if it has an
          associated ClassNotFoundException.</div>
<a id="L3433" name="L3433"></a>3433         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1378.html#L1465" title="Referred from 1465 in src/java/io/ObjectInputStream.java.">lookupObject</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <em class="brace">{</em>
<a id="L3434" name="L3434"></a>3434             <strong class="reserved">return</strong> (<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> != NULL_HANDLE &amp;&amp;
<a id="L3435" name="L3435"></a>3435                     <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] != STATUS_EXCEPTION) ?
<a id="L3436" name="L3436"></a>3436                 <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] : <strong class="reserved">null</strong>;
<a id="L3437" name="L3437"></a>3437         <em class="brace">}</em>
<a id="L3438" name="L3438"></a>3438 
<div class="comment">
          Looks up and returns ClassNotFoundException associated with the
          given handle.  Returns null if the given handle is NULL_HANDLE, or
          if there is no ClassNotFoundException associated with the handle.</div>
<a id="L3444" name="L3444"></a>3444         <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <a href="../R/22739.html" title="Multiple referred from 8 places.">lookupException</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <em class="brace">{</em>
<a id="L3445" name="L3445"></a>3445             <strong class="reserved">return</strong> (<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> != NULL_HANDLE &amp;&amp;
<a id="L3446" name="L3446"></a>3446                     <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] == STATUS_EXCEPTION) ?
<a id="L3447" name="L3447"></a>3447                 (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>) <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>[<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>] : <strong class="reserved">null</strong>;
<a id="L3448" name="L3448"></a>3448         <em class="brace">}</em>
<a id="L3449" name="L3449"></a>3449 
<div class="comment">
          Resets table to its initial state.</div>
<a id="L3453" name="L3453"></a>3453         <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L3454" name="L3454"></a>3454             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, (<strong class="reserved">byte</strong>) 0);
<a id="L3455" name="L3455"></a>3455             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(<a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">null</strong>);
<a id="L3456" name="L3456"></a>3456             <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(deps, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, <strong class="reserved">null</strong>);
<a id="L3457" name="L3457"></a>3457             lowDep = -1;
<a id="L3458" name="L3458"></a>3458             <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L3459" name="L3459"></a>3459         <em class="brace">}</em>
<a id="L3460" name="L3460"></a>3460 
<div class="comment">
          Returns number of handles registered in table.</div>
<a id="L3464" name="L3464"></a>3464         <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L3465" name="L3465"></a>3465             <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L3466" name="L3466"></a>3466         <em class="brace">}</em>
<a id="L3467" name="L3467"></a>3467 
<div class="comment">
          Expands capacity of internal arrays.</div>
<a id="L3471" name="L3471"></a>3471         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20041.html" title="Multiple referred from 53 places.">grow</a>() <em class="brace">{</em>
<a id="L3472" name="L3472"></a>3472             <strong class="reserved">int</strong> newCapacity = (<a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;&lt; 1) + 1;
<a id="L3473" name="L3473"></a>3473 
<a id="L3474" name="L3474"></a>3474             <strong class="reserved">byte</strong>[] newStatus = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[newCapacity];
<a id="L3475" name="L3475"></a>3475             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] newEntries = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[newCapacity];
<a id="L3476" name="L3476"></a>3476             <a href="../S/1378.html#L3490" title="Defined at 3490 in src/java/io/ObjectInputStream.java.">HandleList</a>[] newDeps = <strong class="reserved">new</strong> <a href="../S/1378.html#L3490" title="Defined at 3490 in src/java/io/ObjectInputStream.java.">HandleList</a>[newCapacity];
<a id="L3477" name="L3477"></a>3477 
<a id="L3478" name="L3478"></a>3478             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>, 0, newStatus, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L3479" name="L3479"></a>3479             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a>, 0, newEntries, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L3480" name="L3480"></a>3480             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(deps, 0, newDeps, 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L3481" name="L3481"></a>3481 
<a id="L3482" name="L3482"></a>3482             <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a> = newStatus;
<a id="L3483" name="L3483"></a>3483             <a href="../D/15643.html" title="Multiple defined in 6 places.">entries</a> = newEntries;
<a id="L3484" name="L3484"></a>3484             deps = newDeps;
<a id="L3485" name="L3485"></a>3485         <em class="brace">}</em>
<a id="L3486" name="L3486"></a>3486 
<div class="comment">
          Simple growable list of (integer) handles.</div>
<a id="L3490" name="L3490"></a>3490         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/3374.html" title="Multiple referred from 5 places.">HandleList</a> <em class="brace">{</em>
<a id="L3491" name="L3491"></a>3491             <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[4];
<a id="L3492" name="L3492"></a>3492             <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L3493" name="L3493"></a>3493 
<a id="L3494" name="L3494"></a>3494             <strong class="reserved">public</strong> HandleList() <em class="brace">{</em>
<a id="L3495" name="L3495"></a>3495             <em class="brace">}</em>
<a id="L3496" name="L3496"></a>3496 
<a id="L3497" name="L3497"></a>3497             <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>) <em class="brace">{</em>
<a id="L3498" name="L3498"></a>3498                 <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L3499" name="L3499"></a>3499                     <strong class="reserved">int</strong>[] <a href="../D/28034.html" title="Multiple defined in 2 places.">newList</a> = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;&lt; 1];
<a id="L3500" name="L3500"></a>3500                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>, 0, <a href="../D/28034.html" title="Multiple defined in 2 places.">newList</a>, 0, <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L3501" name="L3501"></a>3501                     <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> = <a href="../D/28034.html" title="Multiple defined in 2 places.">newList</a>;
<a id="L3502" name="L3502"></a>3502                 <em class="brace">}</em>
<a id="L3503" name="L3503"></a>3503                 <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>++] = <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>;
<a id="L3504" name="L3504"></a>3504             <em class="brace">}</em>
<a id="L3505" name="L3505"></a>3505 
<a id="L3506" name="L3506"></a>3506             <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L3507" name="L3507"></a>3507                 <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>) <em class="brace">{</em>
<a id="L3508" name="L3508"></a>3508                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a>();
<a id="L3509" name="L3509"></a>3509                 <em class="brace">}</em>
<a id="L3510" name="L3510"></a>3510                 <strong class="reserved">return</strong> <a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>[<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>];
<a id="L3511" name="L3511"></a>3511             <em class="brace">}</em>
<a id="L3512" name="L3512"></a>3512 
<a id="L3513" name="L3513"></a>3513             <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28639.html" title="Multiple referred from 5617 places.">size</a>() <em class="brace">{</em>
<a id="L3514" name="L3514"></a>3514                 <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L3515" name="L3515"></a>3515             <em class="brace">}</em>
<a id="L3516" name="L3516"></a>3516         <em class="brace">}</em>
<a id="L3517" name="L3517"></a>3517     <em class="brace">}</em>
<a id="L3518" name="L3518"></a>3518 
<div class="comment">
      Method for cloning arrays in case of using unsharing reading</div>
<a id="L3522" name="L3522"></a>3522     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1378.html#L1812" title="Referred from 1812 in src/java/io/ObjectInputStream.java.">cloneArray</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L3523" name="L3523"></a>3523         <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]) <em class="brace">{</em>
<a id="L3524" name="L3524"></a>3524             <strong class="reserved">return</strong> ((<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3525" name="L3525"></a>3525         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">boolean</strong>[]) <em class="brace">{</em>
<a id="L3526" name="L3526"></a>3526             <strong class="reserved">return</strong> ((<strong class="reserved">boolean</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3527" name="L3527"></a>3527         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">byte</strong>[]) <em class="brace">{</em>
<a id="L3528" name="L3528"></a>3528             <strong class="reserved">return</strong> ((<strong class="reserved">byte</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3529" name="L3529"></a>3529         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">char</strong>[]) <em class="brace">{</em>
<a id="L3530" name="L3530"></a>3530             <strong class="reserved">return</strong> ((<strong class="reserved">char</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3531" name="L3531"></a>3531         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">double</strong>[]) <em class="brace">{</em>
<a id="L3532" name="L3532"></a>3532             <strong class="reserved">return</strong> ((<strong class="reserved">double</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3533" name="L3533"></a>3533         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">float</strong>[]) <em class="brace">{</em>
<a id="L3534" name="L3534"></a>3534             <strong class="reserved">return</strong> ((<strong class="reserved">float</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3535" name="L3535"></a>3535         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">int</strong>[]) <em class="brace">{</em>
<a id="L3536" name="L3536"></a>3536             <strong class="reserved">return</strong> ((<strong class="reserved">int</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3537" name="L3537"></a>3537         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">long</strong>[]) <em class="brace">{</em>
<a id="L3538" name="L3538"></a>3538             <strong class="reserved">return</strong> ((<strong class="reserved">long</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3539" name="L3539"></a>3539         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> <strong class="reserved">instanceof</strong> <strong class="reserved">short</strong>[]) <em class="brace">{</em>
<a id="L3540" name="L3540"></a>3540             <strong class="reserved">return</strong> ((<strong class="reserved">short</strong>[]) <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>).<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L3541" name="L3541"></a>3541         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3542" name="L3542"></a>3542             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1575.html#L43" title="Defined at 43 in src/java/lang/AssertionError.java.">AssertionError</a>();
<a id="L3543" name="L3543"></a>3543         <em class="brace">}</em>
<a id="L3544" name="L3544"></a>3544     <em class="brace">}</em>
<a id="L3545" name="L3545"></a>3545 
<a id="L3546" name="L3546"></a>3546 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L361">[^]</a><a href="#L3522">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
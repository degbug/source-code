<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/GlyphView.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L92">[^]</a><a href="#L1264">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L92" title="Defined at 92.">clone</a></li>
<li><a href="#L107" title="Defined at 107.">getGlyphPainter</a></li>
<li><a href="#L114" title="Defined at 114.">setGlyphPainter</a></li>
<li><a href="#L128" title="Defined at 128.">getText</a></li>
<li><a href="#L149" title="Defined at 149.">getBackground</a></li>
<li><a href="#L170" title="Defined at 170.">getForeground</a></li>
<li><a href="#L192" title="Defined at 192.">getFont</a></li>
<li><a href="#L209" title="Defined at 209.">isUnderline</a></li>
<li><a href="#L219" title="Defined at 219.">isStrikeThrough</a></li>
<li><a href="#L227" title="Defined at 227.">isSubscript</a></li>
<li><a href="#L235" title="Defined at 235.">isSuperscript</a></li>
<li><a href="#L243" title="Defined at 243.">getTabExpander</a></li>
<li><a href="#L251" title="Defined at 251.">checkPainter</a></li>
<li><a href="#L290" title="Defined at 290.">getTabbedSpan</a></li>
<li><a href="#L328" title="Defined at 328.">getPartialSpan</a></li>
<li><a href="#L342" title="Defined at 342.">getStartOffset</a></li>
<li><a href="#L353" title="Defined at 353.">getEndOffset</a></li>
<li><a href="#L361" title="Defined at 361.">initSelections</a></li>
<li><a href="#L376" title="Defined at 376.">paint</a></li>
<li><a href="#L488" title="Defined at 488.">paintTextUsingColor</a></li>
<li><a href="#L543" title="Defined at 543.">getMinimumSpan</a></li>
<li><a href="#L580" title="Defined at 580.">getPreferredSpan</a></li>
<li><a href="#L617" title="Defined at 617.">getAlignment</a></li>
<li><a href="#L651" title="Defined at 651.">modelToView</a></li>
<li><a href="#L670" title="Defined at 670.">viewToModel</a></li>
<li><a href="#L718" title="Defined at 718.">getBreakWeight</a></li>
<li><a href="#L751" title="Defined at 751.">breakView</a></li>
<li><a href="#L777" title="Defined at 777.">getBreakSpot</a></li>
<li><a href="#L832" title="Defined at 832.">getBreaker</a></li>
<li><a href="#L865" title="Defined at 865.">createFragment</a></li>
<li><a href="#L899" title="Defined at 899.">getNextVisualPositionFrom</a></li>
<li><a href="#L921" title="Defined at 921.">insertUpdate</a></li>
<li><a href="#L940" title="Defined at 940.">removeUpdate</a></li>
<li><a href="#L959" title="Defined at 959.">changedUpdate</a></li>
<li><a href="#L967" title="Defined at 967.">syncCR</a></li>
<li><a href="#L976" title="Defined at 976.">updateAfterChange</a></li>
<li><a href="#L1013" title="Defined at 1013.">getJustificationInfo</a></li>
<li><a href="#L1153" title="Defined at 1153.">getSpan</a></li>
<li><a href="#L1155" title="Defined at 1155.">getHeight</a></li>
<li><a href="#L1157" title="Defined at 1157.">getAscent</a></li>
<li><a href="#L1159" title="Defined at 1159.">getDescent</a></li>
<li><a href="#L1164" title="Defined at 1164.">paint</a></li>
<li><a href="#L1182" title="Defined at 1182.">modelToView</a></li>
<li><a href="#L1201" title="Defined at 1201.">viewToModel</a></li>
<li><a href="#L1224" title="Defined at 1224.">getBoundedPosition</a></li>
<li><a href="#L1236" title="Defined at 1236.">getPainter</a></li>
<li><a href="#L1264" title="Defined at 1264.">getNextVisualPositionFrom</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1999, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.awt.*;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.text.BreakIterator;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> javax.swing.event.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.BitSet;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.Locale;
<a id="L32" name="L32"></a>  32 
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> javax.swing.UIManager;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> sun.swing.SwingUtilities2;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> static sun.swing.SwingUtilities2.IMPLIED_CR;
<a id="L36" name="L36"></a>  36 
<div class="comment">
  A GlyphView is a styled chunk of text that represents a view
  mapped over an element in the text model. This view is generally
  responsible for displaying text glyphs using character level
  attributes in some way.
  An implementation of the GlyphPainter class is used to do the
  actual rendering and model/view translations.  This separates
  rendering from layout and management of the association with
  the model.
  <p>
  The view supports breaking for the purpose of formatting.
  The fragments produced by breaking share the view that has
  primary responsibility for the element (i.e. they are nested
  classes and carry only a small amount of state of their own)
  so they can share its resources.
  </p><p>
  Since this view
  represents text that may have tabs embedded in it, it implements the
  <code>TabableView</code> interface.  Tabs will only be
  expanded if this view is embedded in a container that does
  tab expansion.  ParagraphView is an example of a container
  that does tab expansion.
  </p><p>
  @since 1.3
  @author  Timothy Prinzing</p></div>
<a id="L65" name="L65"></a>  65 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/3298.html" title="Multiple referred from 51 places.">GlyphView</a> <strong class="reserved">extends</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <strong class="reserved">implements</strong> <a href="../S/3250.html#L37" title="Defined at 37 in src/javax/swing/text/TabableView.java.">TabableView</a>, <a href="../S/1744.html#L53" title="Defined at 53 in src/java/lang/Cloneable.java.">Cloneable</a> <em class="brace">{</em>
<a id="L66" name="L66"></a>  66 
<div class="comment">
      Constructs a new view wrapped on an element.
      @param elem the element</div>
<a id="L72" name="L72"></a>  72     <strong class="reserved">public</strong> GlyphView(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L73" name="L73"></a>  73         <strong class="reserved">super</strong>(elem);
<a id="L74" name="L74"></a>  74         <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = 0;
<a id="L75" name="L75"></a>  75         <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = 0;
<a id="L76" name="L76"></a>  76         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = elem.<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L77" name="L77"></a>  77         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = elem.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L78" name="L78"></a>  78 
<a id="L79" name="L79"></a>  79         <em class="comment">//         if there was an implied CR</em>
<a id="L80" name="L80"></a>  80         impliedCR = (<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(IMPLIED_CR) != <strong class="reserved">null</strong> &amp;&amp;
<a id="L81" name="L81"></a>  81         <em class="comment">//         if this is non-empty paragraph</em>
<a id="L82" name="L82"></a>  82                    <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() &gt; 1);
<a id="L83" name="L83"></a>  83         skipWidth = elem.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("br");
<a id="L84" name="L84"></a>  84     <em class="brace">}</em>
<a id="L85" name="L85"></a>  85 
<div class="comment">
      Creates a shallow copy.  This is used by the
      createFragment and breakView methods.
      @return the copy</div>
<a id="L92" name="L92"></a>  92     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <em class="brace">{</em>
<a id="L93" name="L93"></a>  93         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>;
<a id="L94" name="L94"></a>  94         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L95" name="L95"></a>  95             <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L96" name="L96"></a>  96         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a> cnse) <em class="brace">{</em>
<a id="L97" name="L97"></a>  97             <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <strong class="reserved">null</strong>;
<a id="L98" name="L98"></a>  98         <em class="brace">}</em>
<a id="L99" name="L99"></a>  99         <strong class="reserved">return</strong> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>;
<a id="L100" name="L100"></a> 100     <em class="brace">}</em>
<a id="L101" name="L101"></a> 101 
<div class="comment">
      Fetch the currently installed glyph painter.
      If a painter has not yet been installed, and
      a default was not yet needed, null is returned.</div>
<a id="L107" name="L107"></a> 107     <strong class="reserved">public</strong> <a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> <a href="../R/16796.html" title="Multiple referred from 2 places.">getGlyphPainter</a>() <em class="brace">{</em>
<a id="L108" name="L108"></a> 108         <strong class="reserved">return</strong> painter;
<a id="L109" name="L109"></a> 109     <em class="brace">}</em>
<a id="L110" name="L110"></a> 110 
<div class="comment">
      Sets the painter to use for rendering glyphs.</div>
<a id="L114" name="L114"></a> 114     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27476.html" title="Multiple referred from 3 places.">setGlyphPainter</a>(<a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> p) <em class="brace">{</em>
<a id="L115" name="L115"></a> 115         painter = p;
<a id="L116" name="L116"></a> 116     <em class="brace">}</em>
<a id="L117" name="L117"></a> 117 
<div class="comment">
      Fetch a reference to the text that occupies
      the given range.  This is normally used by
      the GlyphPainter to determine what characters
      it should render glyphs for.
      @param p0  the starting document offset &gt;= 0
      @param p1  the ending document offset &gt;= p0
      @return    the <code>Segment</code> containing the text</div>
<a id="L128" name="L128"></a> 128      <strong class="reserved">public</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> <a href="../R/19424.html" title="Multiple referred from 339 places.">getText</a>(<strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L129" name="L129"></a> 129          <em class="comment">// When done with the returned Segment it should be released by</em>
<a id="L130" name="L130"></a> 130          <em class="comment">// invoking:</em>
<a id="L131" name="L131"></a> 131          <em class="comment">//    SegmentCache.releaseSharedSegment(segment);</em>
<a id="L132" name="L132"></a> 132          <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L65" title="Defined at 65 in src/javax/swing/text/SegmentCache.java.">getSharedSegment</a>();
<a id="L133" name="L133"></a> 133          <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L134" name="L134"></a> 134              <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L135" name="L135"></a> 135              doc.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, p1 - p0, <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>);
<a id="L136" name="L136"></a> 136          <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L137" name="L137"></a> 137              <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>("GlyphView: Stale view: " + bl);
<a id="L138" name="L138"></a> 138          <em class="brace">}</em>
<a id="L139" name="L139"></a> 139          <strong class="reserved">return</strong> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L140" name="L140"></a> 140      <em class="brace">}</em>
<a id="L141" name="L141"></a> 141 
<div class="comment">
      Fetch the background color to use to render the
      glyphs.  If there is no background color, null should
      be returned.  This is implemented to call
      <code>StyledDocument.getBackground</code> if the associated
      document is a styled document, otherwise it returns null.</div>
<a id="L149" name="L149"></a> 149     <strong class="reserved">public</strong> <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> <a href="../R/15211.html" title="Multiple referred from 180 places.">getBackground</a>() <em class="brace">{</em>
<a id="L150" name="L150"></a> 150         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L151" name="L151"></a> 151         <strong class="reserved">if</strong> (doc <strong class="reserved">instanceof</strong> <a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a>) <em class="brace">{</em>
<a id="L152" name="L152"></a> 152             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L153" name="L153"></a> 153             <strong class="reserved">if</strong> (<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>.<a href="../D/25416.html" title="Multiple defined in 13 places.">isDefined</a>(<a href="../S/3337.html#L49" title="Defined at 49 in src/javax/swing/text/StyleConstants.java.">StyleConstants</a>.Background)) <em class="brace">{</em>
<a id="L154" name="L154"></a> 154                 <strong class="reserved">return</strong> ((<a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a>)doc).<a href="../D/17172.html" title="Multiple defined in 24 places.">getBackground</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L155" name="L155"></a> 155             <em class="brace">}</em>
<a id="L156" name="L156"></a> 156         <em class="brace">}</em>
<a id="L157" name="L157"></a> 157         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L158" name="L158"></a> 158     <em class="brace">}</em>
<a id="L159" name="L159"></a> 159 
<div class="comment">
      Fetch the foreground color to use to render the
      glyphs.  If there is no foreground color, null should
      be returned.  This is implemented to call
      <code>StyledDocument.getBackground</code> if the associated
      document is a StyledDocument.  If the associated document
      is not a StyledDocument, the associated components foreground
      color is used.  If there is no associated component, null
      is returned.</div>
<a id="L170" name="L170"></a> 170     <strong class="reserved">public</strong> <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> <a href="../R/16690.html" title="Multiple referred from 127 places.">getForeground</a>() <em class="brace">{</em>
<a id="L171" name="L171"></a> 171         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L172" name="L172"></a> 172         <strong class="reserved">if</strong> (doc <strong class="reserved">instanceof</strong> <a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a>) <em class="brace">{</em>
<a id="L173" name="L173"></a> 173             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L174" name="L174"></a> 174             <strong class="reserved">return</strong> ((<a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a>)doc).<a href="../D/19200.html" title="Multiple defined in 21 places.">getForeground</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L175" name="L175"></a> 175         <em class="brace">}</em>
<a id="L176" name="L176"></a> 176         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L177" name="L177"></a> 177         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L178" name="L178"></a> 178             <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/19200.html" title="Multiple defined in 21 places.">getForeground</a>();
<a id="L179" name="L179"></a> 179         <em class="brace">}</em>
<a id="L180" name="L180"></a> 180         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L181" name="L181"></a> 181     <em class="brace">}</em>
<a id="L182" name="L182"></a> 182 
<div class="comment">
      Fetch the font that the glyphs should be based
      upon.  This is implemented to call
      <code>StyledDocument.getFont</code> if the associated
      document is a StyledDocument.  If the associated document
      is not a StyledDocument, the associated components font
      is used.  If there is no associated component, null
      is returned.</div>
<a id="L192" name="L192"></a> 192     <strong class="reserved">public</strong> <a href="../S/2176.html#L224" title="Defined at 224 in src/java/awt/Font.java.">Font</a> <a href="../R/16676.html" title="Multiple referred from 256 places.">getFont</a>() <em class="brace">{</em>
<a id="L193" name="L193"></a> 193         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L194" name="L194"></a> 194         <strong class="reserved">if</strong> (doc <strong class="reserved">instanceof</strong> <a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a>) <em class="brace">{</em>
<a id="L195" name="L195"></a> 195             <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L196" name="L196"></a> 196             <strong class="reserved">return</strong> ((<a href="../S/3252.html#L35" title="Defined at 35 in src/javax/swing/text/StyledDocument.java.">StyledDocument</a>)doc).<a href="../D/19178.html" title="Multiple defined in 44 places.">getFont</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L197" name="L197"></a> 197         <em class="brace">}</em>
<a id="L198" name="L198"></a> 198         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L199" name="L199"></a> 199         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200             <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/19178.html" title="Multiple defined in 44 places.">getFont</a>();
<a id="L201" name="L201"></a> 201         <em class="brace">}</em>
<a id="L202" name="L202"></a> 202         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L203" name="L203"></a> 203     <em class="brace">}</em>
<a id="L204" name="L204"></a> 204 
<div class="comment">
      Determine if the glyphs should be underlined.  If true,
      an underline should be drawn through the baseline.</div>
<a id="L209" name="L209"></a> 209     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22139.html" title="Multiple referred from 6 places.">isUnderline</a>() <em class="brace">{</em>
<a id="L210" name="L210"></a> 210         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L211" name="L211"></a> 211         <strong class="reserved">return</strong> <a href="../S/3337.html#L49" title="Defined at 49 in src/javax/swing/text/StyleConstants.java.">StyleConstants</a>.<a href="../D/26395.html" title="Multiple defined in 4 places.">isUnderline</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L212" name="L212"></a> 212     <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 
<div class="comment">
      Determine if the glyphs should have a strikethrough
      line.  If true, a line should be drawn through the center
      of the glyphs.</div>
<a id="L219" name="L219"></a> 219     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22060.html" title="Multiple referred from 4 places.">isStrikeThrough</a>() <em class="brace">{</em>
<a id="L220" name="L220"></a> 220         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L221" name="L221"></a> 221         <strong class="reserved">return</strong> <a href="../S/3337.html#L49" title="Defined at 49 in src/javax/swing/text/StyleConstants.java.">StyleConstants</a>.<a href="../D/26289.html" title="Multiple defined in 3 places.">isStrikeThrough</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<div class="comment">
      Determine if the glyphs should be rendered as superscript.</div>
<a id="L227" name="L227"></a> 227     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22072.html" title="Multiple referred from 5 places.">isSubscript</a>() <em class="brace">{</em>
<a id="L228" name="L228"></a> 228         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L229" name="L229"></a> 229         <strong class="reserved">return</strong> <a href="../S/3337.html#L49" title="Defined at 49 in src/javax/swing/text/StyleConstants.java.">StyleConstants</a>.<a href="../D/26303.html" title="Multiple defined in 3 places.">isSubscript</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L230" name="L230"></a> 230     <em class="brace">}</em>
<a id="L231" name="L231"></a> 231 
<div class="comment">
      Determine if the glyphs should be rendered as subscript.</div>
<a id="L235" name="L235"></a> 235     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22077.html" title="Multiple referred from 6 places.">isSuperscript</a>() <em class="brace">{</em>
<a id="L236" name="L236"></a> 236         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = <a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L237" name="L237"></a> 237         <strong class="reserved">return</strong> <a href="../S/3337.html#L49" title="Defined at 49 in src/javax/swing/text/StyleConstants.java.">StyleConstants</a>.<a href="../D/26312.html" title="Multiple defined in 3 places.">isSuperscript</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>);
<a id="L238" name="L238"></a> 238     <em class="brace">}</em>
<a id="L239" name="L239"></a> 239 
<div class="comment">
      Fetch the TabExpander to use if tabs are present in this view.</div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">public</strong> <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> <a href="../R/19352.html" title="Multiple referred from 6 places.">getTabExpander</a>() <em class="brace">{</em>
<a id="L244" name="L244"></a> 244         <strong class="reserved">return</strong> expander;
<a id="L245" name="L245"></a> 245     <em class="brace">}</em>
<a id="L246" name="L246"></a> 246 
<div class="comment">
      Check to see that a glyph painter exists.  If a painter
      doesn't exist, a default glyph painter will be installed.</div>
<a id="L251" name="L251"></a> 251     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11282.html" title="Multiple referred from 10 places.">checkPainter</a>() <em class="brace">{</em>
<a id="L252" name="L252"></a> 252         <strong class="reserved">if</strong> (painter == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253             <strong class="reserved">if</strong> (defaultPainter == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                 <em class="comment">// the classname should probably come from a property file.</em>
<a id="L255" name="L255"></a> 255                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> classname = "javax.swing.text.GlyphPainter1";
<a id="L256" name="L256"></a> 256                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L257" name="L257"></a> 257                     <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L258" name="L258"></a> 258                     <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> loader = <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>();
<a id="L259" name="L259"></a> 259                     <strong class="reserved">if</strong> (loader != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L260" name="L260"></a> 260                         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = loader.<a href="../D/26901.html" title="Multiple defined in 49 places.">loadClass</a>(classname);
<a id="L261" name="L261"></a> 261                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L262" name="L262"></a> 262                         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(classname);
<a id="L263" name="L263"></a> 263                     <em class="brace">}</em>
<a id="L264" name="L264"></a> 264                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L265" name="L265"></a> 265                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a>) <em class="brace">{</em>
<a id="L266" name="L266"></a> 266                         defaultPainter = (<a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a>) <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>;
<a id="L267" name="L267"></a> 267                     <em class="brace">}</em>
<a id="L268" name="L268"></a> 268                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> e) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>("GlyphView: Can't load glyph painter: "
<a id="L270" name="L270"></a> 270                                                   + classname);
<a id="L271" name="L271"></a> 271                 <em class="brace">}</em>
<a id="L272" name="L272"></a> 272             <em class="brace">}</em>
<a id="L273" name="L273"></a> 273             <a href="../S/3275.html#L114" title="Defined at 114 in src/javax/swing/text/GlyphView.java.">setGlyphPainter</a>(defaultPainter.<a href="../D/21351.html" title="Multiple defined in 12 places.">getPainter</a>(<strong class="reserved">this</strong>, <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L274" name="L274"></a> 274                                                       <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()));
<a id="L275" name="L275"></a> 275         <em class="brace">}</em>
<a id="L276" name="L276"></a> 276     <em class="brace">}</em>
<a id="L277" name="L277"></a> 277 
<a id="L278" name="L278"></a> 278     <em class="comment">// --- TabableView methods --------------------------------------</em>
<a id="L279" name="L279"></a> 279 
<div class="comment">
      Determines the desired span when using the given
      tab expansion implementation.
      @param x the position the view would be located
       at for the purpose of tab expansion &gt;= 0.
      @param e how to expand the tabs when encountered.
      @return the desired span &gt;= 0
      @see TabableView#getTabbedSpan</div>
<a id="L290" name="L290"></a> 290     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../S/3273.html#L545" title="Referred from 545 in src/javax/swing/text/FlowView.java.">getTabbedSpan</a>(<strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> e) <em class="brace">{</em>
<a id="L291" name="L291"></a> 291         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L292" name="L292"></a> 292 
<a id="L293" name="L293"></a> 293         <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> old = expander;
<a id="L294" name="L294"></a> 294         expander = e;
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296         <strong class="reserved">if</strong> (expander != old) <em class="brace">{</em>
<a id="L297" name="L297"></a> 297             <em class="comment">// setting expander can change horizontal span of the view,</em>
<a id="L298" name="L298"></a> 298             <em class="comment">// so we have to call preferenceChanged()</em>
<a id="L299" name="L299"></a> 299             <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L300" name="L300"></a> 300         <em class="brace">}</em>
<a id="L301" name="L301"></a> 301 
<a id="L302" name="L302"></a> 302         <strong class="reserved">this</strong>.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (<strong class="reserved">int</strong>) <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L303" name="L303"></a> 303         <strong class="reserved">int</strong> p0 = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L304" name="L304"></a> 304         <strong class="reserved">int</strong> p1 = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L305" name="L305"></a> 305         <strong class="reserved">float</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = painter.<a href="../D/22646.html" title="Multiple defined in 8 places.">getSpan</a>(<strong class="reserved">this</strong>, p0, p1, expander, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L306" name="L306"></a> 306         <strong class="reserved">return</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>;
<a id="L307" name="L307"></a> 307     <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<div class="comment">
      Determines the span along the same axis as tab
      expansion for a portion of the view.  This is
      intended for use by the TabExpander for cases
      where the tab expansion involves aligning the
      portion of text that doesn't have whitespace
      relative to the tab stop.  There is therefore
      an assumption that the range given does not
      contain tabs.
      <p>
      This method can be called while servicing the
      getTabbedSpan or getPreferredSize.  It has to
      arrange for its own text buffer to make the
      measurements.
      @param p0 the starting document offset &gt;= 0
      @param p1 the ending document offset &gt;= p0
      @return the span &gt;= 0</p></div>
<a id="L328" name="L328"></a> 328     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/18291.html" title="Multiple referred from 2 places.">getPartialSpan</a>(<strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L329" name="L329"></a> 329         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L330" name="L330"></a> 330         <strong class="reserved">float</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = painter.<a href="../D/22646.html" title="Multiple defined in 8 places.">getSpan</a>(<strong class="reserved">this</strong>, p0, p1, expander, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L331" name="L331"></a> 331         <strong class="reserved">return</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>;
<a id="L332" name="L332"></a> 332     <em class="brace">}</em>
<a id="L333" name="L333"></a> 333 
<a id="L334" name="L334"></a> 334     <em class="comment">// --- View methods ---------------------------------------------</em>
<a id="L335" name="L335"></a> 335 
<div class="comment">
      Fetches the portion of the model that this view is responsible for.
      @return the starting offset into the model
      @see View#getStartOffset</div>
<a id="L342" name="L342"></a> 342     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19172.html" title="Multiple referred from 263 places.">getStartOffset</a>() <em class="brace">{</em>
<a id="L343" name="L343"></a> 343         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L344" name="L344"></a> 344         <strong class="reserved">return</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0) ? e.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() + <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> : e.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L345" name="L345"></a> 345     <em class="brace">}</em>
<a id="L346" name="L346"></a> 346 
<div class="comment">
      Fetches the portion of the model that this view is responsible for.
      @return the ending offset into the model
      @see View#getEndOffset</div>
<a id="L353" name="L353"></a> 353     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16369.html" title="Multiple referred from 229 places.">getEndOffset</a>() <em class="brace">{</em>
<a id="L354" name="L354"></a> 354         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L355" name="L355"></a> 355         <strong class="reserved">return</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0) ? e.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() + <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> : e.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L356" name="L356"></a> 356     <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<div class="comment">
      Lazily initializes the selections field</div>
<a id="L361" name="L361"></a> 361     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/3275.html#L441" title="Referred from 441 in src/javax/swing/text/GlyphView.java.">initSelections</a>(<strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362         <strong class="reserved">int</strong> viewPosCount = p1 - p0 + 1;
<a id="L363" name="L363"></a> 363         <strong class="reserved">if</strong> (selections == <strong class="reserved">null</strong> || viewPosCount &gt; selections.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L364" name="L364"></a> 364             selections = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[viewPosCount];
<a id="L365" name="L365"></a> 365             <strong class="reserved">return</strong>;
<a id="L366" name="L366"></a> 366         <em class="brace">}</em>
<a id="L367" name="L367"></a> 367         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; viewPosCount; selections[i++] = 0);
<a id="L368" name="L368"></a> 368     <em class="brace">}</em>
<a id="L369" name="L369"></a> 369 
<div class="comment">
      Renders a portion of a text style run.
      @param g the rendering surface to use
      @param a the allocated region to render into</div>
<a id="L376" name="L376"></a> 376     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24094.html" title="Multiple referred from 414 places.">paint</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L378" name="L378"></a> 378 
<a id="L379" name="L379"></a> 379         <strong class="reserved">boolean</strong> paintedText = <strong class="reserved">false</strong>;
<a id="L380" name="L380"></a> 380         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L381" name="L381"></a> 381         <strong class="reserved">int</strong> p0 = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L382" name="L382"></a> 382         <strong class="reserved">int</strong> p1 = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L383" name="L383"></a> 383         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> alloc = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> <strong class="reserved">instanceof</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) ? (<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> : <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L384" name="L384"></a> 384         <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> bg = <a href="../D/17172.html" title="Multiple defined in 24 places.">getBackground</a>();
<a id="L385" name="L385"></a> 385         <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> fg = <a href="../D/19200.html" title="Multiple defined in 21 places.">getForeground</a>();
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong> &amp;&amp; ! <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>()) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             fg = (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> <strong class="reserved">instanceof</strong> <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> ?
<a id="L389" name="L389"></a> 389                 ((<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>)<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>).<a href="../D/18507.html" title="Multiple defined in 4 places.">getDisabledTextColor</a>() :
<a id="L390" name="L390"></a> 390                 <a href="../S/3125.html#L177" title="Defined at 177 in src/javax/swing/UIManager.java.">UIManager</a>.<a href="../D/17779.html" title="Multiple defined in 33 places.">getColor</a>("textInactiveText"));
<a id="L391" name="L391"></a> 391         <em class="brace">}</em>
<a id="L392" name="L392"></a> 392         <strong class="reserved">if</strong> (bg != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L393" name="L393"></a> 393             g.<a href="../D/32183.html" title="Multiple defined in 19 places.">setColor</a>(bg);
<a id="L394" name="L394"></a> 394             g.<a href="../D/16053.html" title="Multiple defined in 2 places.">fillRect</a>(alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, alloc.y, alloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, alloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L395" name="L395"></a> 395         <em class="brace">}</em>
<a id="L396" name="L396"></a> 396         <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> <strong class="reserved">instanceof</strong> <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) <em class="brace">{</em>
<a id="L397" name="L397"></a> 397             <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> tc = (<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L398" name="L398"></a> 398             <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a> h = tc.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>();
<a id="L399" name="L399"></a> 399             <strong class="reserved">if</strong> (h <strong class="reserved">instanceof</strong> <a href="../S/3241.html#L36" title="Defined at 36 in src/javax/swing/text/LayeredHighlighter.java.">LayeredHighlighter</a>) <em class="brace">{</em>
<a id="L400" name="L400"></a> 400                 ((<a href="../S/3241.html#L36" title="Defined at 36 in src/javax/swing/text/LayeredHighlighter.java.">LayeredHighlighter</a>)h).<a href="../D/28848.html" title="Multiple defined in 3 places.">paintLayeredHighlights</a>
<a id="L401" name="L401"></a> 401                     (g, p0, p1, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, tc, <strong class="reserved">this</strong>);
<a id="L402" name="L402"></a> 402             <em class="brace">}</em>
<a id="L403" name="L403"></a> 403         <em class="brace">}</em>
<a id="L404" name="L404"></a> 404 
<a id="L405" name="L405"></a> 405         <strong class="reserved">if</strong> (<a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/25345.html" title="Multiple defined in 2 places.">isComposedTextElement</a>(<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>())) <em class="brace">{</em>
<a id="L406" name="L406"></a> 406             <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../S/3270.html#L910" title="Defined at 910 in src/javax/swing/text/Utilities.java.">paintComposedText</a>(g, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>(), <strong class="reserved">this</strong>);
<a id="L407" name="L407"></a> 407             paintedText = <strong class="reserved">true</strong>;
<a id="L408" name="L408"></a> 408         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> <strong class="reserved">instanceof</strong> <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) <em class="brace">{</em>
<a id="L409" name="L409"></a> 409             <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> tc = (<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L410" name="L410"></a> 410             <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> selFG = tc.<a href="../S/3351.html#L1256" title="Defined at 1256 in src/javax/swing/text/JTextComponent.java.">getSelectedTextColor</a>();
<a id="L411" name="L411"></a> 411 
<a id="L412" name="L412"></a> 412             <strong class="reserved">if</strong> (<em class="comment">// there's a highlighter (bug 4532590), and</em>
<a id="L413" name="L413"></a> 413                 (tc.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>() != <strong class="reserved">null</strong>) &amp;&amp;
<a id="L414" name="L414"></a> 414                 <em class="comment">// selected text color is different from regular foreground</em>
<a id="L415" name="L415"></a> 415                 (selFG != <strong class="reserved">null</strong>) &amp;&amp; !selFG.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(fg)) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416 
<a id="L417" name="L417"></a> 417                 <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a>.<a href="../S/3239.html#L127" title="Defined at 127 in src/javax/swing/text/Highlighter.java.">Highlight</a>[] h = tc.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>().<a href="../D/19471.html" title="Multiple defined in 2 places.">getHighlights</a>();
<a id="L418" name="L418"></a> 418                 <strong class="reserved">if</strong>(h.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> != 0) <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                     <strong class="reserved">boolean</strong> <a href="../D/24697.html" title="Multiple defined in 4 places.">initialized</a> = <strong class="reserved">false</strong>;
<a id="L420" name="L420"></a> 420                     <strong class="reserved">int</strong> viewSelectionCount = 0;
<a id="L421" name="L421"></a> 421                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; h.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L422" name="L422"></a> 422                         <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a>.<a href="../S/3239.html#L127" title="Defined at 127 in src/javax/swing/text/Highlighter.java.">Highlight</a> highlight = h[i];
<a id="L423" name="L423"></a> 423                         <strong class="reserved">int</strong> hStart = highlight.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L424" name="L424"></a> 424                         <strong class="reserved">int</strong> hEnd = highlight.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L425" name="L425"></a> 425                         <strong class="reserved">if</strong> (hStart &gt; p1 || hEnd &lt; p0) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426                             <em class="comment">// the selection is out of this view</em>
<a id="L427" name="L427"></a> 427                             <strong class="reserved">continue</strong>;
<a id="L428" name="L428"></a> 428                         <em class="brace">}</em>
<a id="L429" name="L429"></a> 429                         <strong class="reserved">if</strong> (!SwingUtilities2.useSelectedTextColor(highlight, tc)) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430                             <strong class="reserved">continue</strong>;
<a id="L431" name="L431"></a> 431                         <em class="brace">}</em>
<a id="L432" name="L432"></a> 432                         <strong class="reserved">if</strong> (hStart &lt;= p0 &amp;&amp; hEnd &gt;= p1)<em class="brace">{</em>
<a id="L433" name="L433"></a> 433                             <em class="comment">// the whole view is selected</em>
<a id="L434" name="L434"></a> 434                             <a href="../S/3275.html#L488" title="Defined at 488 in src/javax/swing/text/GlyphView.java.">paintTextUsingColor</a>(g, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, selFG, p0, p1);
<a id="L435" name="L435"></a> 435                             paintedText = <strong class="reserved">true</strong>;
<a id="L436" name="L436"></a> 436                             <strong class="reserved">break</strong>;
<a id="L437" name="L437"></a> 437                         <em class="brace">}</em>
<a id="L438" name="L438"></a> 438                         <em class="comment">// the array is lazily created only when the view</em>
<a id="L439" name="L439"></a> 439                         <em class="comment">// is partially selected</em>
<a id="L440" name="L440"></a> 440                         <strong class="reserved">if</strong> (!<a href="../D/24697.html" title="Multiple defined in 4 places.">initialized</a>) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441                             <a href="../S/3275.html#L361" title="Defined at 361 in src/javax/swing/text/GlyphView.java.">initSelections</a>(p0, p1);
<a id="L442" name="L442"></a> 442                             <a href="../D/24697.html" title="Multiple defined in 4 places.">initialized</a> = <strong class="reserved">true</strong>;
<a id="L443" name="L443"></a> 443                         <em class="brace">}</em>
<a id="L444" name="L444"></a> 444                         hStart = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(p0, hStart);
<a id="L445" name="L445"></a> 445                         hEnd = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(p1, hEnd);
<a id="L446" name="L446"></a> 446                         <a href="../S/3275.html#L488" title="Defined at 488 in src/javax/swing/text/GlyphView.java.">paintTextUsingColor</a>(g, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, selFG, hStart, hEnd);
<a id="L447" name="L447"></a> 447                         <em class="comment">// the array represents view positions [0, p1-p0+1]</em>
<a id="L448" name="L448"></a> 448                         <em class="comment">// later will iterate this array and sum its</em>
<a id="L449" name="L449"></a> 449                         <em class="comment">// elements. Positions with sum == 0 are not selected.</em>
<a id="L450" name="L450"></a> 450                         selections[hStart-p0]++;
<a id="L451" name="L451"></a> 451                         selections[hEnd-p0]--;
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453                         viewSelectionCount++;
<a id="L454" name="L454"></a> 454                     <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<a id="L456" name="L456"></a> 456                     <strong class="reserved">if</strong> (!paintedText &amp;&amp; viewSelectionCount &gt; 0) <em class="brace">{</em>
<a id="L457" name="L457"></a> 457                         <em class="comment">// the view is partially selected</em>
<a id="L458" name="L458"></a> 458                         <strong class="reserved">int</strong> curPos = -1;
<a id="L459" name="L459"></a> 459                         <strong class="reserved">int</strong> startPos = 0;
<a id="L460" name="L460"></a> 460                         <strong class="reserved">int</strong> viewLen = p1 - p0;
<a id="L461" name="L461"></a> 461                         <strong class="reserved">while</strong> (curPos++ &lt; viewLen) <em class="brace">{</em>
<a id="L462" name="L462"></a> 462                             <em class="comment">// searching for the next selection start</em>
<a id="L463" name="L463"></a> 463                             <strong class="reserved">while</strong>(curPos &lt; viewLen &amp;&amp;
<a id="L464" name="L464"></a> 464                                     selections[curPos] == 0) curPos++;
<a id="L465" name="L465"></a> 465                             <strong class="reserved">if</strong> (startPos != curPos) <em class="brace">{</em>
<a id="L466" name="L466"></a> 466                                 <em class="comment">// paint unselected text</em>
<a id="L467" name="L467"></a> 467                                 <a href="../S/3275.html#L488" title="Defined at 488 in src/javax/swing/text/GlyphView.java.">paintTextUsingColor</a>(g, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, fg,
<a id="L468" name="L468"></a> 468                                         p0 + startPos, p0 + curPos);
<a id="L469" name="L469"></a> 469                             <em class="brace">}</em>
<a id="L470" name="L470"></a> 470                             <strong class="reserved">int</strong> checkSum = 0;
<a id="L471" name="L471"></a> 471                             <em class="comment">// searching for next start position of unselected text</em>
<a id="L472" name="L472"></a> 472                             <strong class="reserved">while</strong> (curPos &lt; viewLen &amp;&amp;
<a id="L473" name="L473"></a> 473                                     (checkSum += selections[curPos]) != 0) curPos++;
<a id="L474" name="L474"></a> 474                             startPos = curPos;
<a id="L475" name="L475"></a> 475                         <em class="brace">}</em>
<a id="L476" name="L476"></a> 476                         paintedText = <strong class="reserved">true</strong>;
<a id="L477" name="L477"></a> 477                     <em class="brace">}</em>
<a id="L478" name="L478"></a> 478                 <em class="brace">}</em>
<a id="L479" name="L479"></a> 479             <em class="brace">}</em>
<a id="L480" name="L480"></a> 480         <em class="brace">}</em>
<a id="L481" name="L481"></a> 481         <strong class="reserved">if</strong>(!paintedText)
<a id="L482" name="L482"></a> 482             <a href="../S/3275.html#L488" title="Defined at 488 in src/javax/swing/text/GlyphView.java.">paintTextUsingColor</a>(g, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, fg, p0, p1);
<a id="L483" name="L483"></a> 483     <em class="brace">}</em>
<a id="L484" name="L484"></a> 484 
<div class="comment">
      Paints the specified region of text in the specified color.</div>
<a id="L488" name="L488"></a> 488     <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/24380.html" title="Multiple referred from 4 places.">paintTextUsingColor</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L489" name="L489"></a> 489         <em class="comment">// render the glyphs</em>
<a id="L490" name="L490"></a> 490         g.<a href="../D/32183.html" title="Multiple defined in 19 places.">setColor</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L491" name="L491"></a> 491         painter.<a href="../D/28657.html" title="Multiple defined in 228 places.">paint</a>(<strong class="reserved">this</strong>, g, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, p0, p1);
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493         <em class="comment">// render underline or strikethrough if set.</em>
<a id="L494" name="L494"></a> 494         <strong class="reserved">boolean</strong> underline = <a href="../D/26395.html" title="Multiple defined in 4 places.">isUnderline</a>();
<a id="L495" name="L495"></a> 495         <strong class="reserved">boolean</strong> strike = <a href="../D/26289.html" title="Multiple defined in 3 places.">isStrikeThrough</a>();
<a id="L496" name="L496"></a> 496         <strong class="reserved">if</strong> (underline || strike) <em class="brace">{</em>
<a id="L497" name="L497"></a> 497             <em class="comment">// calculate x coordinates</em>
<a id="L498" name="L498"></a> 498             <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> alloc = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> <strong class="reserved">instanceof</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) ? (<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> : <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L499" name="L499"></a> 499             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L500" name="L500"></a> 500             <strong class="reserved">if</strong> ((<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong>) &amp;&amp; (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() == p1)) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501                 <em class="comment">// strip whitespace on end</em>
<a id="L502" name="L502"></a> 502                 <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, p1);
<a id="L503" name="L503"></a> 503                 <strong class="reserved">while</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/26507.html" title="Multiple defined in 18 places.">isWhitespace</a>(s.<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>())) <em class="brace">{</em>
<a id="L504" name="L504"></a> 504                     p1 -= 1;
<a id="L505" name="L505"></a> 505                     s.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> -= 1;
<a id="L506" name="L506"></a> 506                 <em class="brace">}</em>
<a id="L507" name="L507"></a> 507                 <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L508" name="L508"></a> 508             <em class="brace">}</em>
<a id="L509" name="L509"></a> 509             <strong class="reserved">int</strong> x0 = alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L510" name="L510"></a> 510             <strong class="reserved">int</strong> p = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L511" name="L511"></a> 511             <strong class="reserved">if</strong> (p != p0) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512                 x0 += (<strong class="reserved">int</strong>) painter.<a href="../D/22646.html" title="Multiple defined in 8 places.">getSpan</a>(<strong class="reserved">this</strong>, p, p0, <a href="../S/3275.html#L243" title="Defined at 243 in src/javax/swing/text/GlyphView.java.">getTabExpander</a>(), x0);
<a id="L513" name="L513"></a> 513             <em class="brace">}</em>
<a id="L514" name="L514"></a> 514             <strong class="reserved">int</strong> x1 = x0 + (<strong class="reserved">int</strong>) painter.<a href="../D/22646.html" title="Multiple defined in 8 places.">getSpan</a>(<strong class="reserved">this</strong>, p0, p1, <a href="../S/3275.html#L243" title="Defined at 243 in src/javax/swing/text/GlyphView.java.">getTabExpander</a>(), x0);
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516             <em class="comment">// calculate y coordinate</em>
<a id="L517" name="L517"></a> 517             <strong class="reserved">int</strong> y = alloc.y + (<strong class="reserved">int</strong>)(painter.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(<strong class="reserved">this</strong>) - painter.<a href="../D/18428.html" title="Multiple defined in 9 places.">getDescent</a>(<strong class="reserved">this</strong>));
<a id="L518" name="L518"></a> 518             <strong class="reserved">if</strong> (underline) <em class="brace">{</em>
<a id="L519" name="L519"></a> 519                 <strong class="reserved">int</strong> yTmp = y + 1;
<a id="L520" name="L520"></a> 520                 g.<a href="../D/15201.html" title="Multiple defined in 7 places.">drawLine</a>(x0, yTmp, x1, yTmp);
<a id="L521" name="L521"></a> 521             <em class="brace">}</em>
<a id="L522" name="L522"></a> 522             <strong class="reserved">if</strong> (strike) <em class="brace">{</em>
<a id="L523" name="L523"></a> 523                 <em class="comment">// move y coordinate above baseline</em>
<a id="L524" name="L524"></a> 524                 <strong class="reserved">int</strong> yTmp = y - (<strong class="reserved">int</strong>) (painter.<a href="../D/17040.html" title="Multiple defined in 9 places.">getAscent</a>(<strong class="reserved">this</strong>) * 0.3f);
<a id="L525" name="L525"></a> 525                 g.<a href="../D/15201.html" title="Multiple defined in 7 places.">drawLine</a>(x0, yTmp, x1, yTmp);
<a id="L526" name="L526"></a> 526             <em class="brace">}</em>
<a id="L527" name="L527"></a> 527 
<a id="L528" name="L528"></a> 528         <em class="brace">}</em>
<a id="L529" name="L529"></a> 529     <em class="brace">}</em>
<a id="L530" name="L530"></a> 530 
<div class="comment">
      Determines the minimum span for this view along an axis.
      <p>This implementation returns the longest non-breakable area within
      the view as a minimum span for <code>View.X_AXIS</code>.</p>
      @param axis  may be either <code>View.X_AXIS</code> or <code>View.Y_AXIS</code>
      @return      the minimum span the view can be rendered into
      @throws IllegalArgumentException if the <code>axis</code> parameter is invalid
      @see         javax.swing.text.View#getMinimumSpan</div>
<a id="L542" name="L542"></a> 542     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L543" name="L543"></a> 543     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17741.html" title="Multiple referred from 44 places.">getMinimumSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">switch</strong> (axis) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.X_AXIS:
<a id="L546" name="L546"></a> 546                 <strong class="reserved">if</strong> (minimumSpan &lt; 0) <em class="brace">{</em>
<a id="L547" name="L547"></a> 547                     minimumSpan = 0;
<a id="L548" name="L548"></a> 548                     <strong class="reserved">int</strong> p0 = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L549" name="L549"></a> 549                     <strong class="reserved">int</strong> p1 = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L550" name="L550"></a> 550                     <strong class="reserved">while</strong> (p1 &gt; p0) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551                         <strong class="reserved">int</strong> breakSpot = <a href="../S/3275.html#L777" title="Defined at 777 in src/javax/swing/text/GlyphView.java.">getBreakSpot</a>(p0, p1);
<a id="L552" name="L552"></a> 552                         <strong class="reserved">if</strong> (breakSpot == <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a>.DONE) <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                             <em class="comment">// the rest of the view is non-breakable</em>
<a id="L554" name="L554"></a> 554                             breakSpot = p0;
<a id="L555" name="L555"></a> 555                         <em class="brace">}</em>
<a id="L556" name="L556"></a> 556                         minimumSpan = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(minimumSpan,
<a id="L557" name="L557"></a> 557                                 <a href="../D/21422.html" title="Multiple defined in 2 places.">getPartialSpan</a>(breakSpot, p1));
<a id="L558" name="L558"></a> 558                         <em class="comment">// Note: getBreakSpot returns the *last* breakspot</em>
<a id="L559" name="L559"></a> 559                         p1 = breakSpot - 1;
<a id="L560" name="L560"></a> 560                     <em class="brace">}</em>
<a id="L561" name="L561"></a> 561                 <em class="brace">}</em>
<a id="L562" name="L562"></a> 562                 <strong class="reserved">return</strong> minimumSpan;
<a id="L563" name="L563"></a> 563             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.Y_AXIS:
<a id="L564" name="L564"></a> 564                 <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/20667.html" title="Multiple defined in 20 places.">getMinimumSpan</a>(axis);
<a id="L565" name="L565"></a> 565             <strong class="reserved">default</strong>:
<a id="L566" name="L566"></a> 566                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Invalid axis: " + axis);
<a id="L567" name="L567"></a> 567         <em class="brace">}</em>
<a id="L568" name="L568"></a> 568     <em class="brace">}</em>
<a id="L569" name="L569"></a> 569 
<div class="comment">
      Determines the preferred span for this view along an
      axis.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @return   the span the view would like to be rendered into &gt;= 0.
                Typically the view is told to render into the span
                that is returned, although there is no guarantee.
                The parent may choose to resize or break the view.</div>
<a id="L580" name="L580"></a> 580     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/18413.html" title="Multiple referred from 96 places.">getPreferredSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581         <strong class="reserved">if</strong> (impliedCR) <em class="brace">{</em>
<a id="L582" name="L582"></a> 582             <strong class="reserved">return</strong> 0;
<a id="L583" name="L583"></a> 583         <em class="brace">}</em>
<a id="L584" name="L584"></a> 584         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L585" name="L585"></a> 585         <strong class="reserved">int</strong> p0 = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L586" name="L586"></a> 586         <strong class="reserved">int</strong> p1 = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L587" name="L587"></a> 587         <strong class="reserved">switch</strong> (axis) <em class="brace">{</em>
<a id="L588" name="L588"></a> 588         <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.X_AXIS:
<a id="L589" name="L589"></a> 589             <strong class="reserved">if</strong> (skipWidth) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590                 <strong class="reserved">return</strong> 0;
<a id="L591" name="L591"></a> 591             <em class="brace">}</em>
<a id="L592" name="L592"></a> 592             <strong class="reserved">return</strong> painter.<a href="../D/22646.html" title="Multiple defined in 8 places.">getSpan</a>(<strong class="reserved">this</strong>, p0, p1, expander, <strong class="reserved">this</strong>.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L593" name="L593"></a> 593         <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.Y_AXIS:
<a id="L594" name="L594"></a> 594             <strong class="reserved">float</strong> h = painter.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(<strong class="reserved">this</strong>);
<a id="L595" name="L595"></a> 595             <strong class="reserved">if</strong> (<a href="../D/26312.html" title="Multiple defined in 3 places.">isSuperscript</a>()) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596                 h += h/3;
<a id="L597" name="L597"></a> 597             <em class="brace">}</em>
<a id="L598" name="L598"></a> 598             <strong class="reserved">return</strong> h;
<a id="L599" name="L599"></a> 599         <strong class="reserved">default</strong>:
<a id="L600" name="L600"></a> 600             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Invalid axis: " + axis);
<a id="L601" name="L601"></a> 601         <em class="brace">}</em>
<a id="L602" name="L602"></a> 602     <em class="brace">}</em>
<a id="L603" name="L603"></a> 603 
<div class="comment">
      Determines the desired alignment for this view along an
      axis.  For the label, the alignment is along the font
      baseline for the y axis, and the superclasses alignment
      along the x axis.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @return the desired alignment.  This should be a value
        between 0.0 and 1.0 inclusive, where 0 indicates alignment at the
        origin and 1.0 indicates alignment to the full span
        away from the origin.  An alignment of 0.5 would be the
        center of the view.</div>
<a id="L617" name="L617"></a> 617     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/15009.html" title="Multiple referred from 36 places.">getAlignment</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L618" name="L618"></a> 618         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L619" name="L619"></a> 619         <strong class="reserved">if</strong> (axis == <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.Y_AXIS) <em class="brace">{</em>
<a id="L620" name="L620"></a> 620             <strong class="reserved">boolean</strong> sup = <a href="../D/26312.html" title="Multiple defined in 3 places.">isSuperscript</a>();
<a id="L621" name="L621"></a> 621             <strong class="reserved">boolean</strong> sub = <a href="../D/26303.html" title="Multiple defined in 3 places.">isSubscript</a>();
<a id="L622" name="L622"></a> 622             <strong class="reserved">float</strong> h = painter.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(<strong class="reserved">this</strong>);
<a id="L623" name="L623"></a> 623             <strong class="reserved">float</strong> d = painter.<a href="../D/18428.html" title="Multiple defined in 9 places.">getDescent</a>(<strong class="reserved">this</strong>);
<a id="L624" name="L624"></a> 624             <strong class="reserved">float</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = painter.<a href="../D/17040.html" title="Multiple defined in 9 places.">getAscent</a>(<strong class="reserved">this</strong>);
<a id="L625" name="L625"></a> 625             <strong class="reserved">float</strong> <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a>;
<a id="L626" name="L626"></a> 626             <strong class="reserved">if</strong> (sup) <em class="brace">{</em>
<a id="L627" name="L627"></a> 627                 <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a> = 1.0f;
<a id="L628" name="L628"></a> 628             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sub) <em class="brace">{</em>
<a id="L629" name="L629"></a> 629                 <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a> = (h &gt; 0) ? (h - (d + (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> / 2))) / h : 0;
<a id="L630" name="L630"></a> 630             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L631" name="L631"></a> 631                 <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a> = (h &gt; 0) ? (h - d) / h : 0;
<a id="L632" name="L632"></a> 632             <em class="brace">}</em>
<a id="L633" name="L633"></a> 633             <strong class="reserved">return</strong> <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a>;
<a id="L634" name="L634"></a> 634         <em class="brace">}</em>
<a id="L635" name="L635"></a> 635         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/16863.html" title="Multiple defined in 22 places.">getAlignment</a>(axis);
<a id="L636" name="L636"></a> 636     <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<div class="comment">
      Provides a mapping from the document model coordinate space
      to the coordinate space of the view mapped to it.
      @param pos the position to convert &gt;= 0
      @param a   the allocated region to render into
      @param b   either <code>Position.Bias.Forward</code>
                     or <code>Position.Bias.Backward</code>
      @return the bounding box of the given position
      @exception BadLocationException  if the given position does not represent a
        valid location in the associated document
      @see View#modelToView</div>
<a id="L651" name="L651"></a> 651     <strong class="reserved">public</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/23332.html" title="Multiple referred from 109 places.">modelToView</a>(<strong class="reserved">int</strong> pos, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L652" name="L652"></a> 652         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L653" name="L653"></a> 653         <strong class="reserved">return</strong> painter.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(<strong class="reserved">this</strong>, pos, b, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L654" name="L654"></a> 654     <em class="brace">}</em>
<a id="L655" name="L655"></a> 655 
<div class="comment">
      Provides a mapping from the view coordinate space to the logical
      coordinate space of the model.
      @param x the X coordinate &gt;= 0
      @param y the Y coordinate &gt;= 0
      @param a the allocated region to render into
      @param biasReturn either <code>Position.Bias.Forward</code>
       or <code>Position.Bias.Backward</code> is returned as the
       zero-th element of this array
      @return the location within the model that best represents the
       given point of view &gt;= 0
      @see View#viewToModel</div>
<a id="L670" name="L670"></a> 670     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/30138.html" title="Multiple referred from 99 places.">viewToModel</a>(<strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> y, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasReturn) <em class="brace">{</em>
<a id="L671" name="L671"></a> 671         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L672" name="L672"></a> 672         <strong class="reserved">return</strong> painter.<a href="../D/36416.html" title="Multiple defined in 28 places.">viewToModel</a>(<strong class="reserved">this</strong>, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, biasReturn);
<a id="L673" name="L673"></a> 673     <em class="brace">}</em>
<a id="L674" name="L674"></a> 674 
<div class="comment">
      Determines how attractive a break opportunity in
      this view is.  This can be used for determining which
      view is the most attractive to call <code>breakView</code>
      on in the process of formatting.  The
      higher the weight, the more attractive the break.  A
      value equal to or lower than <code>View.BadBreakWeight</code>
      should not be considered for a break.  A value greater
      than or equal to <code>View.ForcedBreakWeight</code> should
      be broken.
      <p>
      This is implemented to forward to the superclass for
      the Y_AXIS.  Along the X_AXIS the following values
      may be returned.
      </p><dl>
      <dt><b>View.ExcellentBreakWeight</b>
      </dt><dd>if there is whitespace proceeding the desired break
        location.
      </dd><dt><b>View.BadBreakWeight</b>
      </dt><dd>if the desired break location results in a break
        location of the starting offset.
      </dd><dt><b>View.GoodBreakWeight</b>
      </dt><dd>if the other conditions don't occur.
      </dd></dl>
      This will normally result in the behavior of breaking
      on a whitespace location if one can be found, otherwise
      breaking between characters.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @param pos the potential location of the start of the
        broken view &gt;= 0.  This may be useful for calculating tab
        positions.
      @param len specifies the relative length from <em>pos</em>
        where a potential break is desired &gt;= 0.
      @return the weight, which should be a value between
        View.ForcedBreakWeight and View.BadBreakWeight.
      @see LabelView
      @see ParagraphView
      @see View#BadBreakWeight
      @see View#GoodBreakWeight
      @see View#ExcellentBreakWeight
      @see View#ForcedBreakWeight</div>
<a id="L718" name="L718"></a> 718     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15335.html" title="Multiple referred from 10 places.">getBreakWeight</a>(<strong class="reserved">int</strong> axis, <strong class="reserved">float</strong> pos, <strong class="reserved">float</strong> len) <em class="brace">{</em>
<a id="L719" name="L719"></a> 719         <strong class="reserved">if</strong> (axis == <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.X_AXIS) <em class="brace">{</em>
<a id="L720" name="L720"></a> 720             <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L721" name="L721"></a> 721             <strong class="reserved">int</strong> p0 = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L722" name="L722"></a> 722             <strong class="reserved">int</strong> p1 = painter.<a href="../D/17333.html" title="Multiple defined in 3 places.">getBoundedPosition</a>(<strong class="reserved">this</strong>, p0, pos, len);
<a id="L723" name="L723"></a> 723             <strong class="reserved">return</strong> p1 == p0 ? <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.BadBreakWeight :
<a id="L724" name="L724"></a> 724                    <a href="../S/3275.html#L777" title="Defined at 777 in src/javax/swing/text/GlyphView.java.">getBreakSpot</a>(p0, p1) != <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a>.DONE ?
<a id="L725" name="L725"></a> 725                             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.ExcellentBreakWeight : <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.GoodBreakWeight;
<a id="L726" name="L726"></a> 726         <em class="brace">}</em>
<a id="L727" name="L727"></a> 727         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/17349.html" title="Multiple defined in 6 places.">getBreakWeight</a>(axis, pos, len);
<a id="L728" name="L728"></a> 728     <em class="brace">}</em>
<a id="L729" name="L729"></a> 729 
<div class="comment">
      Breaks this view on the given axis at the given length.
      This is implemented to attempt to break on a whitespace
      location, and returns a fragment with the whitespace at
      the end.  If a whitespace location can't be found, the
      nearest character is used.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @param p0 the location in the model where the
       fragment should start it's representation &gt;= 0.
      @param pos the position along the axis that the
       broken view would occupy &gt;= 0.  This may be useful for
       things like tab calculations.
      @param len specifies the distance along the axis
       where a potential break is desired &gt;= 0.
      @return the fragment of the view that represents the
       given span, if the view can be broken.  If the view
       doesn't support breaking behavior, the view itself is
       returned.
      @see View#breakView</div>
<a id="L751" name="L751"></a> 751     <strong class="reserved">public</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../R/10671.html" title="Multiple referred from 4 places.">breakView</a>(<strong class="reserved">int</strong> axis, <strong class="reserved">int</strong> p0, <strong class="reserved">float</strong> pos, <strong class="reserved">float</strong> len) <em class="brace">{</em>
<a id="L752" name="L752"></a> 752         <strong class="reserved">if</strong> (axis == <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.X_AXIS) <em class="brace">{</em>
<a id="L753" name="L753"></a> 753             <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L754" name="L754"></a> 754             <strong class="reserved">int</strong> p1 = painter.<a href="../D/17333.html" title="Multiple defined in 3 places.">getBoundedPosition</a>(<strong class="reserved">this</strong>, p0, pos, len);
<a id="L755" name="L755"></a> 755             <strong class="reserved">int</strong> breakSpot = <a href="../S/3275.html#L777" title="Defined at 777 in src/javax/swing/text/GlyphView.java.">getBreakSpot</a>(p0, p1);
<a id="L756" name="L756"></a> 756 
<a id="L757" name="L757"></a> 757             <strong class="reserved">if</strong> (breakSpot != -1) <em class="brace">{</em>
<a id="L758" name="L758"></a> 758                 p1 = breakSpot;
<a id="L759" name="L759"></a> 759             <em class="brace">}</em>
<a id="L760" name="L760"></a> 760             <em class="comment">// else, no break in the region, return a fragment of the</em>
<a id="L761" name="L761"></a> 761             <em class="comment">// bounded region.</em>
<a id="L762" name="L762"></a> 762             <strong class="reserved">if</strong> (p0 == <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &amp;&amp; p1 == <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) <em class="brace">{</em>
<a id="L763" name="L763"></a> 763                 <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L764" name="L764"></a> 764             <em class="brace">}</em>
<a id="L765" name="L765"></a> 765             <a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v = (<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a>) <a href="../D/13897.html" title="Multiple defined in 2 places.">createFragment</a>(p0, p1);
<a id="L766" name="L766"></a> 766             v.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (<strong class="reserved">int</strong>) pos;
<a id="L767" name="L767"></a> 767             <strong class="reserved">return</strong> v;
<a id="L768" name="L768"></a> 768         <em class="brace">}</em>
<a id="L769" name="L769"></a> 769         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L770" name="L770"></a> 770     <em class="brace">}</em>
<a id="L771" name="L771"></a> 771 
<div class="comment">
      Returns a location to break at in the passed in region, or
      BreakIterator.DONE if there isn't a good location to break at
      in the specified region.</div>
<a id="L777" name="L777"></a> 777     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/15334.html" title="Multiple referred from 3 places.">getBreakSpot</a>(<strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L778" name="L778"></a> 778         <strong class="reserved">if</strong> (breakSpots == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L779" name="L779"></a> 779             <em class="comment">// Re-calculate breakpoints for the whole view</em>
<a id="L780" name="L780"></a> 780             <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L781" name="L781"></a> 781             <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L782" name="L782"></a> 782             <strong class="reserved">int</strong>[] bs = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> + 1 - <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>];
<a id="L783" name="L783"></a> 783             <strong class="reserved">int</strong> <a href="../D/26595.html" title="Multiple defined in 32 places.">ix</a> = 0;
<a id="L784" name="L784"></a> 784 
<a id="L785" name="L785"></a> 785             <em class="comment">// Breaker should work on the parent element because there may be</em>
<a id="L786" name="L786"></a> 786             <em class="comment">// a valid breakpoint at the end edge of the view (space, etc.)</em>
<a id="L787" name="L787"></a> 787             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>().<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L788" name="L788"></a> 788             <strong class="reserved">int</strong> pstart = (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == <strong class="reserved">null</strong> ? <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> : <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>());
<a id="L789" name="L789"></a> 789             <strong class="reserved">int</strong> pend = (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> == <strong class="reserved">null</strong> ? <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> : <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>());
<a id="L790" name="L790"></a> 790 
<a id="L791" name="L791"></a> 791             <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(pstart, pend);
<a id="L792" name="L792"></a> 792             s.<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>();
<a id="L793" name="L793"></a> 793             <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a> breaker = <a href="../S/3275.html#L832" title="Defined at 832 in src/javax/swing/text/GlyphView.java.">getBreaker</a>();
<a id="L794" name="L794"></a> 794             breaker.<a href="../D/34097.html" title="Multiple defined in 21 places.">setText</a>(s);
<a id="L795" name="L795"></a> 795 
<a id="L796" name="L796"></a> 796             <em class="comment">// Backward search should start from end+1 unless there's NO end+1</em>
<a id="L797" name="L797"></a> 797             <strong class="reserved">int</strong> startFrom = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> + (pend &gt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ? 1 : 0);
<a id="L798" name="L798"></a> 798             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L799" name="L799"></a> 799                 startFrom = breaker.<a href="../D/29531.html" title="Multiple defined in 2 places.">preceding</a>(s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + (startFrom - pstart))
<a id="L800" name="L800"></a> 800                           + (pstart - s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L801" name="L801"></a> 801                 <strong class="reserved">if</strong> (startFrom &gt; <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) <em class="brace">{</em>
<a id="L802" name="L802"></a> 802                     <em class="comment">// The break spot is within the view</em>
<a id="L803" name="L803"></a> 803                     bs[<a href="../D/26595.html" title="Multiple defined in 32 places.">ix</a>++] = startFrom;
<a id="L804" name="L804"></a> 804                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L805" name="L805"></a> 805                     <strong class="reserved">break</strong>;
<a id="L806" name="L806"></a> 806                 <em class="brace">}</em>
<a id="L807" name="L807"></a> 807             <em class="brace">}</em>
<a id="L808" name="L808"></a> 808 
<a id="L809" name="L809"></a> 809             <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L810" name="L810"></a> 810             breakSpots = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/26595.html" title="Multiple defined in 32 places.">ix</a>];
<a id="L811" name="L811"></a> 811             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(bs, 0, breakSpots, 0, <a href="../D/26595.html" title="Multiple defined in 32 places.">ix</a>);
<a id="L812" name="L812"></a> 812         <em class="brace">}</em>
<a id="L813" name="L813"></a> 813 
<a id="L814" name="L814"></a> 814         <strong class="reserved">int</strong> breakSpot = <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a>.DONE;
<a id="L815" name="L815"></a> 815         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; breakSpots.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L816" name="L816"></a> 816             <strong class="reserved">int</strong> bsp = breakSpots[i];
<a id="L817" name="L817"></a> 817             <strong class="reserved">if</strong> (bsp &lt;= p1) <em class="brace">{</em>
<a id="L818" name="L818"></a> 818                 <strong class="reserved">if</strong> (bsp &gt; p0) <em class="brace">{</em>
<a id="L819" name="L819"></a> 819                     breakSpot = bsp;
<a id="L820" name="L820"></a> 820                 <em class="brace">}</em>
<a id="L821" name="L821"></a> 821                 <strong class="reserved">break</strong>;
<a id="L822" name="L822"></a> 822             <em class="brace">}</em>
<a id="L823" name="L823"></a> 823         <em class="brace">}</em>
<a id="L824" name="L824"></a> 824         <strong class="reserved">return</strong> breakSpot;
<a id="L825" name="L825"></a> 825     <em class="brace">}</em>
<a id="L826" name="L826"></a> 826 
<div class="comment">
      Return break iterator appropriate for the current document.
      For non-i18n documents a fast whitespace-based break iterator is used.</div>
<a id="L832" name="L832"></a> 832     <strong class="reserved">private</strong> <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a> <a href="../S/3275.html#L793" title="Referred from 793 in src/javax/swing/text/GlyphView.java.">getBreaker</a>() <em class="brace">{</em>
<a id="L833" name="L833"></a> 833         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L834" name="L834"></a> 834         <strong class="reserved">if</strong> ((doc != <strong class="reserved">null</strong>) &amp;&amp; <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(
<a id="L835" name="L835"></a> 835                     doc.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.MultiByteProperty))) <em class="brace">{</em>
<a id="L836" name="L836"></a> 836             <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L837" name="L837"></a> 837             <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a> <a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a> = (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == <strong class="reserved">null</strong> ? <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>() : <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/20224.html" title="Multiple defined in 51 places.">getLocale</a>());
<a id="L838" name="L838"></a> 838             <strong class="reserved">return</strong> <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a>.<a href="../D/20117.html" title="Multiple defined in 3 places.">getLineInstance</a>(<a href="../D/27010.html" title="Multiple defined in 2 places.">locale</a>);
<a id="L839" name="L839"></a> 839         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L840" name="L840"></a> 840             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3246.html#L38" title="Defined at 38 in src/javax/swing/text/WhitespaceBasedBreakIterator.java.">WhitespaceBasedBreakIterator</a>();
<a id="L841" name="L841"></a> 841         <em class="brace">}</em>
<a id="L842" name="L842"></a> 842     <em class="brace">}</em>
<a id="L843" name="L843"></a> 843 
<div class="comment">
      Creates a view that represents a portion of the element.
      This is potentially useful during formatting operations
      for taking measurements of fragments of the view.  If
      the view doesn't support fragmenting (the default), it
      should return itself.
      <p>
      This view does support fragmenting.  It is implemented
      to return a nested class that shares state in this view
      representing only a portion of the view.
      @param p0 the starting offset &gt;= 0.  This should be a value
        greater or equal to the element starting offset and
        less than the element ending offset.
      @param p1 the ending offset &gt; p0.  This should be a value
        less than or equal to the elements end offset and
        greater than the elements starting offset.
      @return the view fragment, or itself if the view doesn't
        support breaking into fragments
      @see LabelView</p></div>
<a id="L865" name="L865"></a> 865     <strong class="reserved">public</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../R/12449.html" title="Multiple referred from 4 places.">createFragment</a>(<strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L866" name="L866"></a> 866         <a href="../S/3275.html#L251" title="Defined at 251 in src/javax/swing/text/GlyphView.java.">checkPainter</a>();
<a id="L867" name="L867"></a> 867         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L868" name="L868"></a> 868         <a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v = (<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a>) <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L869" name="L869"></a> 869         v.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = p0 - elem.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L870" name="L870"></a> 870         v.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = p1 - p0;
<a id="L871" name="L871"></a> 871         v.painter = painter.<a href="../D/21351.html" title="Multiple defined in 12 places.">getPainter</a>(v, p0, p1);
<a id="L872" name="L872"></a> 872         v.justificationInfo = <strong class="reserved">null</strong>;
<a id="L873" name="L873"></a> 873         <strong class="reserved">return</strong> v;
<a id="L874" name="L874"></a> 874     <em class="brace">}</em>
<a id="L875" name="L875"></a> 875 
<div class="comment">
      Provides a way to determine the next visually represented model
      location that one might place a caret.  Some views may not be
      visible, they might not be in the same order found in the model, or
      they just might not allow access to some of the locations in the
      model.
      This method enables specifying a position to convert
      within the range of &gt;=0.  If the value is -1, a position
      will be calculated automatically.  If the value &lt; -1,
      the <code>BadLocationException</code> will be thrown.
      @param pos the position to convert
      @param a the allocated region to render into
      @param direction the direction from the current position that can
       be thought of as the arrow keys typically found on a keyboard.
       This may be SwingConstants.WEST, SwingConstants.EAST,
       SwingConstants.NORTH, or SwingConstants.SOUTH.
      @return the location within the model that best represents the next
       location visual position.
      @exception BadLocationException the given position is not a valid
                                      position within the document
      @exception IllegalArgumentException for an invalid direction</div>
<a id="L899" name="L899"></a> 899     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17962.html" title="Multiple referred from 24 places.">getNextVisualPositionFrom</a>(<strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>,
<a id="L900" name="L900"></a> 900                                          <strong class="reserved">int</strong> direction,
<a id="L901" name="L901"></a> 901                                          <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasRet)
<a id="L902" name="L902"></a> 902         <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L903" name="L903"></a> 903 
<a id="L904" name="L904"></a> 904         <strong class="reserved">if</strong> (pos &lt; -1) <em class="brace">{</em>
<a id="L905" name="L905"></a> 905             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>("invalid position", pos);
<a id="L906" name="L906"></a> 906         <em class="brace">}</em>
<a id="L907" name="L907"></a> 907         <strong class="reserved">return</strong> painter.<a href="../D/20952.html" title="Multiple defined in 14 places.">getNextVisualPositionFrom</a>(<strong class="reserved">this</strong>, pos, b, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, direction, biasRet);
<a id="L908" name="L908"></a> 908     <em class="brace">}</em>
<a id="L909" name="L909"></a> 909 
<div class="comment">
      Gives notification that something was inserted into
      the document in a location that this view is responsible for.
      This is implemented to call preferenceChanged along the
      axis the glyphs are rendered.
      @param e the change information from the associated document
      @param a the current allocation of the view
      @param f the factory to use to rebuild if the view has children
      @see View#insertUpdate</div>
<a id="L921" name="L921"></a> 921     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20799.html" title="Multiple referred from 23 places.">insertUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L922" name="L922"></a> 922         justificationInfo = <strong class="reserved">null</strong>;
<a id="L923" name="L923"></a> 923         breakSpots = <strong class="reserved">null</strong>;
<a id="L924" name="L924"></a> 924         minimumSpan = -1;
<a id="L925" name="L925"></a> 925         <a href="../S/3275.html#L967" title="Defined at 967 in src/javax/swing/text/GlyphView.java.">syncCR</a>();
<a id="L926" name="L926"></a> 926         <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L927" name="L927"></a> 927     <em class="brace">}</em>
<a id="L928" name="L928"></a> 928 
<div class="comment">
      Gives notification that something was removed from the document
      in a location that this view is responsible for.
      This is implemented to call preferenceChanged along the
      axis the glyphs are rendered.
      @param e the change information from the associated document
      @param a the current allocation of the view
      @param f the factory to use to rebuild if the view has children
      @see View#removeUpdate</div>
<a id="L940" name="L940"></a> 940     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26095.html" title="Multiple referred from 20 places.">removeUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L941" name="L941"></a> 941         justificationInfo = <strong class="reserved">null</strong>;
<a id="L942" name="L942"></a> 942         breakSpots = <strong class="reserved">null</strong>;
<a id="L943" name="L943"></a> 943         minimumSpan = -1;
<a id="L944" name="L944"></a> 944         <a href="../S/3275.html#L967" title="Defined at 967 in src/javax/swing/text/GlyphView.java.">syncCR</a>();
<a id="L945" name="L945"></a> 945         <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L946" name="L946"></a> 946     <em class="brace">}</em>
<a id="L947" name="L947"></a> 947 
<div class="comment">
      Gives notification from the document that attributes were changed
      in a location that this view is responsible for.
      This is implemented to call preferenceChanged along both the
      horizontal and vertical axis.
      @param e the change information from the associated document
      @param a the current allocation of the view
      @param f the factory to use to rebuild if the view has children
      @see View#changedUpdate</div>
<a id="L959" name="L959"></a> 959     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11034.html" title="Multiple referred from 17 places.">changedUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L960" name="L960"></a> 960         minimumSpan = -1;
<a id="L961" name="L961"></a> 961         <a href="../S/3275.html#L967" title="Defined at 967 in src/javax/swing/text/GlyphView.java.">syncCR</a>();
<a id="L962" name="L962"></a> 962         <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">true</strong>);
<a id="L963" name="L963"></a> 963     <em class="brace">}</em>
<a id="L964" name="L964"></a> 964 
<a id="L965" name="L965"></a> 965     <em class="comment">// checks if the paragraph is empty and updates impliedCR flag</em>
<a id="L966" name="L966"></a> 966     <em class="comment">// accordingly</em>
<a id="L967" name="L967"></a> 967     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/29071.html" title="Multiple referred from 3 places.">syncCR</a>() <em class="brace">{</em>
<a id="L968" name="L968"></a> 968         <strong class="reserved">if</strong> (impliedCR) <em class="brace">{</em>
<a id="L969" name="L969"></a> 969             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>().<a href="../D/21398.html" title="Multiple defined in 3 places.">getParentElement</a>();
<a id="L970" name="L970"></a> 970             impliedCR = (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() &gt; 1);
<a id="L971" name="L971"></a> 971         <em class="brace">}</em>
<a id="L972" name="L972"></a> 972     <em class="brace">}</em>
<a id="L973" name="L973"></a> 973 
<div class="comment">
     /** {@inheritDoc} */</div>
<a id="L975" name="L975"></a> 975     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L976" name="L976"></a> 976     <strong class="reserved">void</strong> <a href="../S/3273.html#L817" title="Referred from 817 in src/javax/swing/text/FlowView.java.">updateAfterChange</a>() <em class="brace">{</em>
<a id="L977" name="L977"></a> 977         <em class="comment">// Drop the break spots. They will be re-calculated during</em>
<a id="L978" name="L978"></a> 978         <em class="comment">// layout. It is necessary for proper line break calculation.</em>
<a id="L979" name="L979"></a> 979         breakSpots = <strong class="reserved">null</strong>;
<a id="L980" name="L980"></a> 980     <em class="brace">}</em>
<a id="L981" name="L981"></a> 981 
<div class="comment">
      Class to hold data needed to justify this GlyphView in a PargraphView.Row</div>
<a id="L985" name="L985"></a> 985     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/4335.html" title="Multiple referred from 4 places.">JustificationInfo</a> <em class="brace">{</em>
<a id="L986" name="L986"></a> 986         <em class="comment">//justifiable content start</em>
<a id="L987" name="L987"></a> 987         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L988" name="L988"></a> 988         <em class="comment">//justifiable content end</em>
<a id="L989" name="L989"></a> 989         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L990" name="L990"></a> 990         <strong class="reserved">final</strong> <strong class="reserved">int</strong> leadingSpaces;
<a id="L991" name="L991"></a> 991         <strong class="reserved">final</strong> <strong class="reserved">int</strong> contentSpaces;
<a id="L992" name="L992"></a> 992         <strong class="reserved">final</strong> <strong class="reserved">int</strong> trailingSpaces;
<a id="L993" name="L993"></a> 993         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> hasTab;
<a id="L994" name="L994"></a> 994         <strong class="reserved">final</strong> <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a> spaceMap;
<a id="L995" name="L995"></a> 995         JustificationInfo(<strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>,
<a id="L996" name="L996"></a> 996                           <strong class="reserved">int</strong> leadingSpaces,
<a id="L997" name="L997"></a> 997                           <strong class="reserved">int</strong> contentSpaces,
<a id="L998" name="L998"></a> 998                           <strong class="reserved">int</strong> trailingSpaces,
<a id="L999" name="L999"></a> 999                           <strong class="reserved">boolean</strong> hasTab,
<a id="L1000" name="L1000"></a>1000                           <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a> spaceMap) <em class="brace">{</em>
<a id="L1001" name="L1001"></a>1001             <strong class="reserved">this</strong>.<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L1002" name="L1002"></a>1002             <strong class="reserved">this</strong>.<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L1003" name="L1003"></a>1003             <strong class="reserved">this</strong>.leadingSpaces = leadingSpaces;
<a id="L1004" name="L1004"></a>1004             <strong class="reserved">this</strong>.contentSpaces = contentSpaces;
<a id="L1005" name="L1005"></a>1005             <strong class="reserved">this</strong>.trailingSpaces = trailingSpaces;
<a id="L1006" name="L1006"></a>1006             <strong class="reserved">this</strong>.hasTab = hasTab;
<a id="L1007" name="L1007"></a>1007             <strong class="reserved">this</strong>.spaceMap = spaceMap;
<a id="L1008" name="L1008"></a>1008         <em class="brace">}</em>
<a id="L1009" name="L1009"></a>1009     <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010 
<a id="L1011" name="L1011"></a>1011 
<a id="L1012" name="L1012"></a>1012 
<a id="L1013" name="L1013"></a>1013     <a href="../S/3275.html#L985" title="Defined at 985 in src/javax/swing/text/GlyphView.java.">JustificationInfo</a> <a href="../S/3255.html#L1063" title="Referred from 1063 in src/javax/swing/text/ParagraphView.java.">getJustificationInfo</a>(<strong class="reserved">int</strong> rowStartOffset) <em class="brace">{</em>
<a id="L1014" name="L1014"></a>1014         <strong class="reserved">if</strong> (justificationInfo != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1015" name="L1015"></a>1015             <strong class="reserved">return</strong> justificationInfo;
<a id="L1016" name="L1016"></a>1016         <em class="brace">}</em>
<a id="L1017" name="L1017"></a>1017         <em class="comment">//states for the parsing</em>
<a id="L1018" name="L1018"></a>1018         <strong class="reserved">final</strong> <strong class="reserved">int</strong> TRAILING = 0;
<a id="L1019" name="L1019"></a>1019         <strong class="reserved">final</strong> <strong class="reserved">int</strong> CONTENT  = 1;
<a id="L1020" name="L1020"></a>1020         <strong class="reserved">final</strong> <strong class="reserved">int</strong> SPACES   = 2;
<a id="L1021" name="L1021"></a>1021         <strong class="reserved">int</strong> startOffset = <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L1022" name="L1022"></a>1022         <strong class="reserved">int</strong> endOffset = <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L1023" name="L1023"></a>1023         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> segment = <a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(startOffset, endOffset);
<a id="L1024" name="L1024"></a>1024         <strong class="reserved">int</strong> txtOffset = segment.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L1025" name="L1025"></a>1025         <strong class="reserved">int</strong> txtEnd = segment.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + segment.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> - 1;
<a id="L1026" name="L1026"></a>1026         <strong class="reserved">int</strong> startContentPosition = txtEnd + 1;
<a id="L1027" name="L1027"></a>1027         <strong class="reserved">int</strong> endContentPosition = txtOffset - 1;
<a id="L1028" name="L1028"></a>1028         <strong class="reserved">int</strong> lastTabPosition = txtOffset - 1;
<a id="L1029" name="L1029"></a>1029         <strong class="reserved">int</strong> trailingSpaces = 0;
<a id="L1030" name="L1030"></a>1030         <strong class="reserved">int</strong> contentSpaces = 0;
<a id="L1031" name="L1031"></a>1031         <strong class="reserved">int</strong> leadingSpaces = 0;
<a id="L1032" name="L1032"></a>1032         <strong class="reserved">boolean</strong> hasTab = <strong class="reserved">false</strong>;
<a id="L1033" name="L1033"></a>1033         <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a> spaceMap = <strong class="reserved">new</strong> <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a>(endOffset - startOffset + 1);
<a id="L1034" name="L1034"></a>1034 
<a id="L1035" name="L1035"></a>1035         <em class="comment">//we parse conent to the right of the rightmost TAB only.</em>
<a id="L1036" name="L1036"></a>1036         <em class="comment">//we are looking for the trailing and leading spaces.</em>
<a id="L1037" name="L1037"></a>1037         <em class="comment">//position after the leading spaces (startContentPosition)</em>
<a id="L1038" name="L1038"></a>1038         <em class="comment">//position before the trailing spaces (endContentPosition)</em>
<a id="L1039" name="L1039"></a>1039         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = txtEnd, <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = TRAILING; i &gt;= txtOffset; i--) <em class="brace">{</em>
<a id="L1040" name="L1040"></a>1040             <strong class="reserved">if</strong> (' ' == segment.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]) <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041                 spaceMap.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(i - txtOffset);
<a id="L1042" name="L1042"></a>1042                 <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == TRAILING) <em class="brace">{</em>
<a id="L1043" name="L1043"></a>1043                     trailingSpaces++;
<a id="L1044" name="L1044"></a>1044                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == CONTENT) <em class="brace">{</em>
<a id="L1045" name="L1045"></a>1045                     <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = SPACES;
<a id="L1046" name="L1046"></a>1046                     leadingSpaces = 1;
<a id="L1047" name="L1047"></a>1047                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == SPACES) <em class="brace">{</em>
<a id="L1048" name="L1048"></a>1048                     leadingSpaces++;
<a id="L1049" name="L1049"></a>1049                 <em class="brace">}</em>
<a id="L1050" name="L1050"></a>1050             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ('\t' == segment.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]) <em class="brace">{</em>
<a id="L1051" name="L1051"></a>1051                 hasTab = <strong class="reserved">true</strong>;
<a id="L1052" name="L1052"></a>1052                 <strong class="reserved">break</strong>;
<a id="L1053" name="L1053"></a>1053             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1054" name="L1054"></a>1054                 <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == TRAILING) <em class="brace">{</em>
<a id="L1055" name="L1055"></a>1055                     <strong class="reserved">if</strong> ('\n' != segment.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]
<a id="L1056" name="L1056"></a>1056                           &amp;&amp; '\r' != segment.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]) <em class="brace">{</em>
<a id="L1057" name="L1057"></a>1057                         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = CONTENT;
<a id="L1058" name="L1058"></a>1058                         endContentPosition = i;
<a id="L1059" name="L1059"></a>1059                     <em class="brace">}</em>
<a id="L1060" name="L1060"></a>1060                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == CONTENT) <em class="brace">{</em>
<a id="L1061" name="L1061"></a>1061                     <em class="comment">//do nothing</em>
<a id="L1062" name="L1062"></a>1062                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == SPACES) <em class="brace">{</em>
<a id="L1063" name="L1063"></a>1063                     contentSpaces += leadingSpaces;
<a id="L1064" name="L1064"></a>1064                     leadingSpaces = 0;
<a id="L1065" name="L1065"></a>1065                 <em class="brace">}</em>
<a id="L1066" name="L1066"></a>1066                 startContentPosition = i;
<a id="L1067" name="L1067"></a>1067             <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068         <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069 
<a id="L1070" name="L1070"></a>1070         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(segment);
<a id="L1071" name="L1071"></a>1071 
<a id="L1072" name="L1072"></a>1072         <strong class="reserved">int</strong> startJustifiableContent = -1;
<a id="L1073" name="L1073"></a>1073         <strong class="reserved">if</strong> (startContentPosition &lt; txtEnd) <em class="brace">{</em>
<a id="L1074" name="L1074"></a>1074             startJustifiableContent =
<a id="L1075" name="L1075"></a>1075                 startContentPosition - txtOffset;
<a id="L1076" name="L1076"></a>1076         <em class="brace">}</em>
<a id="L1077" name="L1077"></a>1077         <strong class="reserved">int</strong> endJustifiableContent = -1;
<a id="L1078" name="L1078"></a>1078         <strong class="reserved">if</strong> (endContentPosition &gt; txtOffset) <em class="brace">{</em>
<a id="L1079" name="L1079"></a>1079             endJustifiableContent =
<a id="L1080" name="L1080"></a>1080                 endContentPosition - txtOffset;
<a id="L1081" name="L1081"></a>1081         <em class="brace">}</em>
<a id="L1082" name="L1082"></a>1082         justificationInfo =
<a id="L1083" name="L1083"></a>1083             <strong class="reserved">new</strong> <a href="../S/3275.html#L985" title="Defined at 985 in src/javax/swing/text/GlyphView.java.">JustificationInfo</a>(startJustifiableContent,
<a id="L1084" name="L1084"></a>1084                                   endJustifiableContent,
<a id="L1085" name="L1085"></a>1085                                   leadingSpaces,
<a id="L1086" name="L1086"></a>1086                                   contentSpaces,
<a id="L1087" name="L1087"></a>1087                                   trailingSpaces,
<a id="L1088" name="L1088"></a>1088                                   hasTab,
<a id="L1089" name="L1089"></a>1089                                   spaceMap);
<a id="L1090" name="L1090"></a>1090         <strong class="reserved">return</strong> justificationInfo;
<a id="L1091" name="L1091"></a>1091     <em class="brace">}</em>
<a id="L1092" name="L1092"></a>1092 
<a id="L1093" name="L1093"></a>1093     <em class="comment">// --- variables ------------------------------------------------</em>
<a id="L1094" name="L1094"></a>1094 
<div class="comment">
     Used by paint() to store highlighted view positions</div>
<a id="L1098" name="L1098"></a>1098     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] selections = <strong class="reserved">null</strong>;
<a id="L1099" name="L1099"></a>1099 
<a id="L1100" name="L1100"></a>1100     <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L1101" name="L1101"></a>1101     <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1102" name="L1102"></a>1102     <em class="comment">// if it is an implied newline character</em>
<a id="L1103" name="L1103"></a>1103     <strong class="reserved">boolean</strong> impliedCR;
<a id="L1104" name="L1104"></a>1104     <strong class="reserved">boolean</strong> skipWidth;
<a id="L1105" name="L1105"></a>1105 
<div class="comment">
      how to expand tabs</div>
<a id="L1109" name="L1109"></a>1109     <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> expander;
<a id="L1110" name="L1110"></a>1110 
<div class="comment">
     /** Cached minimum x-span value  */</div>
<a id="L1112" name="L1112"></a>1112     <strong class="reserved">private</strong> <strong class="reserved">float</strong> minimumSpan = -1;
<a id="L1113" name="L1113"></a>1113 
<div class="comment">
     /** Cached breakpoints within the view  */</div>
<a id="L1115" name="L1115"></a>1115     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] breakSpots = <strong class="reserved">null</strong>;
<a id="L1116" name="L1116"></a>1116 
<div class="comment">
      location for determining tab expansion against.</div>
<a id="L1120" name="L1120"></a>1120     <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L1121" name="L1121"></a>1121 
<div class="comment">
      Glyph rendering functionality.</div>
<a id="L1125" name="L1125"></a>1125     <a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> painter;
<a id="L1126" name="L1126"></a>1126 
<div class="comment">
      The prototype painter used by default.</div>
<a id="L1130" name="L1130"></a>1130     <strong class="reserved">static</strong> <a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> defaultPainter;
<a id="L1131" name="L1131"></a>1131 
<a id="L1132" name="L1132"></a>1132     <strong class="reserved">private</strong> <a href="../S/3275.html#L985" title="Defined at 985 in src/javax/swing/text/GlyphView.java.">JustificationInfo</a> justificationInfo = <strong class="reserved">null</strong>;
<a id="L1133" name="L1133"></a>1133 
<div class="comment">
      A class to perform rendering of the glyphs.
      This can be implemented to be stateless, or
      to hold some information as a cache to
      facilitate faster rendering and model/view
      translation.  At a minimum, the GlyphPainter
      allows a View implementation to perform its
      duties independant of a particular version
      of JVM and selection of capabilities (i.e.
      shaping for i18n, etc).
      @since 1.3</div>
<a id="L1147" name="L1147"></a>1147     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/3295.html" title="Multiple referred from 11 places.">GlyphPainter</a> <em class="brace">{</em>
<a id="L1148" name="L1148"></a>1148 
<div class="comment">
          Determine the span the glyphs given a start location
          (for tab expansion).</div>
<a id="L1153" name="L1153"></a>1153         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">float</strong> <a href="../R/19117.html" title="Multiple referred from 19 places.">getSpan</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1, <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> e, <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L1154" name="L1154"></a>1154 
<a id="L1155" name="L1155"></a>1155         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">float</strong> <a href="../R/16875.html" title="Multiple referred from 1014 places.">getHeight</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v);
<a id="L1156" name="L1156"></a>1156 
<a id="L1157" name="L1157"></a>1157         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">float</strong> <a href="../R/15126.html" title="Multiple referred from 80 places.">getAscent</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v);
<a id="L1158" name="L1158"></a>1158 
<a id="L1159" name="L1159"></a>1159         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">float</strong> <a href="../R/16120.html" title="Multiple referred from 35 places.">getDescent</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v);
<a id="L1160" name="L1160"></a>1160 
<div class="comment">
          Paint the glyphs representing the given range.</div>
<a id="L1164" name="L1164"></a>1164         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/24094.html" title="Multiple referred from 414 places.">paint</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1);
<a id="L1165" name="L1165"></a>1165 
<div class="comment">
          Provides a mapping from the document model coordinate space
          to the coordinate space of the view mapped to it.
          This is shared by the broken views.
          @param v     the <code>GlyphView</code> containing the
                       destination coordinate space
          @param pos   the position to convert
          @param bias  either <code>Position.Bias.Forward</code>
                           or <code>Position.Bias.Backward</code>
          @param a     Bounds of the View
          @return      the bounding box of the given position
          @exception BadLocationException  if the given position does not represent a
            valid location in the associated document
          @see View#modelToView</div>
<a id="L1182" name="L1182"></a>1182         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/23332.html" title="Multiple referred from 109 places.">modelToView</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v,
<a id="L1183" name="L1183"></a>1183                                           <strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> bias,
<a id="L1184" name="L1184"></a>1184                                           <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>;
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
          Provides a mapping from the view coordinate space to the logical
          coordinate space of the model.
          @param v          the <code>GlyphView</code> to provide a mapping for
          @param x          the X coordinate
          @param y          the Y coordinate
          @param a          the allocated region to render into
          @param biasReturn either <code>Position.Bias.Forward</code>
                            or <code>Position.Bias.Backward</code>
                            is returned as the zero-th element of this array
          @return the location within the model that best represents the
                  given point of view
          @see View#viewToModel</div>
<a id="L1201" name="L1201"></a>1201         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/30138.html" title="Multiple referred from 99 places.">viewToModel</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v,
<a id="L1202" name="L1202"></a>1202                                         <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> y, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>,
<a id="L1203" name="L1203"></a>1203                                         <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasReturn);
<a id="L1204" name="L1204"></a>1204 
<div class="comment">
          Determines the model location that represents the
          maximum advance that fits within the given span.
          This could be used to break the given view.  The result
          should be a location just shy of the given advance.  This
          differs from viewToModel which returns the closest
          position which might be proud of the maximum advance.
          @param v the view to find the model location to break at.
          @param p0 the location in the model where the
           fragment should start it's representation &gt;= 0.
          @param x  the graphic location along the axis that the
           broken view would occupy &gt;= 0.  This may be useful for
           things like tab calculations.
          @param len specifies the distance into the view
           where a potential break is desired &gt;= 0.
          @return the maximum model location possible for a break.
          @see View#breakView</div>
<a id="L1224" name="L1224"></a>1224         <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">int</strong> <a href="../R/15320.html" title="Multiple referred from 2 places.">getBoundedPosition</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> p0, <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> len);
<a id="L1225" name="L1225"></a>1225 
<div class="comment">
          Create a painter to use for the given GlyphView.  If
          the painter carries state it can create another painter
          to represent a new GlyphView that is being created.  If
          the painter doesn't hold any significant state, it can
          return itself.  The default behavior is to return itself.
          @param v  the <code>GlyphView</code> to provide a painter for
          @param p0 the starting document offset &gt;= 0
          @param p1 the ending document offset &gt;= p0</div>
<a id="L1236" name="L1236"></a>1236         <strong class="reserved">public</strong> <a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> <a href="../R/18240.html" title="Multiple referred from 260 places.">getPainter</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L1237" name="L1237"></a>1237             <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L1238" name="L1238"></a>1238         <em class="brace">}</em>
<a id="L1239" name="L1239"></a>1239 
<div class="comment">
          Provides a way to determine the next visually represented model
          location that one might place a caret.  Some views may not be
          visible, they might not be in the same order found in the model, or
          they just might not allow access to some of the locations in the
          model.
          @param v the view to use
          @param pos the position to convert &gt;= 0
          @param b   either <code>Position.Bias.Forward</code>
                         or <code>Position.Bias.Backward</code>
          @param a the allocated region to render into
          @param direction the direction from the current position that can
           be thought of as the arrow keys typically found on a keyboard.
           This may be SwingConstants.WEST, SwingConstants.EAST,
           SwingConstants.NORTH, or SwingConstants.SOUTH.
          @param biasRet  either <code>Position.Bias.Forward</code>
                          or <code>Position.Bias.Backward</code>
                          is returned as the zero-th element of this array
          @return the location within the model that best represents the next
           location visual position.
          @exception BadLocationException
          @exception IllegalArgumentException for an invalid direction</div>
<a id="L1264" name="L1264"></a>1264         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17962.html" title="Multiple referred from 24 places.">getNextVisualPositionFrom</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>,
<a id="L1265" name="L1265"></a>1265                                              <strong class="reserved">int</strong> direction,
<a id="L1266" name="L1266"></a>1266                                              <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasRet)
<a id="L1267" name="L1267"></a>1267             <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L1268" name="L1268"></a>1268 
<a id="L1269" name="L1269"></a>1269             <strong class="reserved">int</strong> startOffset = v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L1270" name="L1270"></a>1270             <strong class="reserved">int</strong> endOffset = v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L1271" name="L1271"></a>1271             <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L1272" name="L1272"></a>1272 
<a id="L1273" name="L1273"></a>1273             <strong class="reserved">switch</strong> (direction) <em class="brace">{</em>
<a id="L1274" name="L1274"></a>1274             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.NORTH:
<a id="L1275" name="L1275"></a>1275             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.SOUTH:
<a id="L1276" name="L1276"></a>1276                 <strong class="reserved">if</strong> (pos != -1) <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277                     <em class="comment">// Presumably pos is between startOffset and endOffset,</em>
<a id="L1278" name="L1278"></a>1278                     <em class="comment">// since GlyphView is only one line, we won't contain</em>
<a id="L1279" name="L1279"></a>1279                     <em class="comment">// the position to the nort/south, therefore return -1.</em>
<a id="L1280" name="L1280"></a>1280                     <strong class="reserved">return</strong> -1;
<a id="L1281" name="L1281"></a>1281                 <em class="brace">}</em>
<a id="L1282" name="L1282"></a>1282                 <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> container = v.<a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L1283" name="L1283"></a>1283 
<a id="L1284" name="L1284"></a>1284                 <strong class="reserved">if</strong> (container <strong class="reserved">instanceof</strong> <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) <em class="brace">{</em>
<a id="L1285" name="L1285"></a>1285                     <a href="../D/1302.html" title="Multiple defined in 2 places.">Caret</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = ((<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>)container).<a href="../D/17495.html" title="Multiple defined in 4 places.">getCaret</a>();
<a id="L1286" name="L1286"></a>1286                     <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a> magicPoint;
<a id="L1287" name="L1287"></a>1287                     magicPoint = (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>) ? <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/20343.html" title="Multiple defined in 2 places.">getMagicCaretPosition</a>() :<strong class="reserved">null</strong>;
<a id="L1288" name="L1288"></a>1288 
<a id="L1289" name="L1289"></a>1289                     <strong class="reserved">if</strong> (magicPoint == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1291" name="L1291"></a>1291                         <strong class="reserved">return</strong> startOffset;
<a id="L1292" name="L1292"></a>1292                     <em class="brace">}</em>
<a id="L1293" name="L1293"></a>1293                     <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = v.<a href="../D/36416.html" title="Multiple defined in 28 places.">viewToModel</a>(magicPoint.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, 0f, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, biasRet);
<a id="L1294" name="L1294"></a>1294                     <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L1295" name="L1295"></a>1295                 <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296                 <strong class="reserved">break</strong>;
<a id="L1297" name="L1297"></a>1297             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.EAST:
<a id="L1298" name="L1298"></a>1298                 <strong class="reserved">if</strong>(startOffset == v.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>()) <em class="brace">{</em>
<a id="L1299" name="L1299"></a>1299                     <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L1300" name="L1300"></a>1300                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1301" name="L1301"></a>1301                         <strong class="reserved">return</strong> startOffset;
<a id="L1302" name="L1302"></a>1302                     <em class="brace">}</em>
<a id="L1303" name="L1303"></a>1303                     <em class="comment">// End case for bidi text where newline is at beginning</em>
<a id="L1304" name="L1304"></a>1304                     <em class="comment">// of line.</em>
<a id="L1305" name="L1305"></a>1305                     <strong class="reserved">return</strong> -1;
<a id="L1306" name="L1306"></a>1306                 <em class="brace">}</em>
<a id="L1307" name="L1307"></a>1307                 <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L1308" name="L1308"></a>1308                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1309" name="L1309"></a>1309                     <strong class="reserved">return</strong> startOffset;
<a id="L1310" name="L1310"></a>1310                 <em class="brace">}</em>
<a id="L1311" name="L1311"></a>1311                 <strong class="reserved">if</strong>(pos == endOffset) <em class="brace">{</em>
<a id="L1312" name="L1312"></a>1312                     <strong class="reserved">return</strong> -1;
<a id="L1313" name="L1313"></a>1313                 <em class="brace">}</em>
<a id="L1314" name="L1314"></a>1314                 <strong class="reserved">if</strong>(++pos == endOffset) <em class="brace">{</em>
<a id="L1315" name="L1315"></a>1315                     <em class="comment">// Assumed not used in bidi text, GlyphPainter2 will</em>
<a id="L1316" name="L1316"></a>1316                     <em class="comment">// override as necessary, therefore return -1.</em>
<a id="L1317" name="L1317"></a>1317                     <strong class="reserved">return</strong> -1;
<a id="L1318" name="L1318"></a>1318                 <em class="brace">}</em>
<a id="L1319" name="L1319"></a>1319                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1320" name="L1320"></a>1320                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1321" name="L1321"></a>1321                 <em class="brace">}</em>
<a id="L1322" name="L1322"></a>1322                 <strong class="reserved">return</strong> pos;
<a id="L1323" name="L1323"></a>1323             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.WEST:
<a id="L1324" name="L1324"></a>1324                 <strong class="reserved">if</strong>(startOffset == v.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>()) <em class="brace">{</em>
<a id="L1325" name="L1325"></a>1325                     <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L1326" name="L1326"></a>1326                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1327" name="L1327"></a>1327                         <strong class="reserved">return</strong> startOffset;
<a id="L1328" name="L1328"></a>1328                     <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329                     <em class="comment">// End case for bidi text where newline is at beginning</em>
<a id="L1330" name="L1330"></a>1330                     <em class="comment">// of line.</em>
<a id="L1331" name="L1331"></a>1331                     <strong class="reserved">return</strong> -1;
<a id="L1332" name="L1332"></a>1332                 <em class="brace">}</em>
<a id="L1333" name="L1333"></a>1333                 <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L1334" name="L1334"></a>1334                     <em class="comment">// Assumed not used in bidi text, GlyphPainter2 will</em>
<a id="L1335" name="L1335"></a>1335                     <em class="comment">// override as necessary, therefore return -1.</em>
<a id="L1336" name="L1336"></a>1336                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1337" name="L1337"></a>1337                     <strong class="reserved">return</strong> endOffset - 1;
<a id="L1338" name="L1338"></a>1338                 <em class="brace">}</em>
<a id="L1339" name="L1339"></a>1339                 <strong class="reserved">if</strong>(pos == startOffset) <em class="brace">{</em>
<a id="L1340" name="L1340"></a>1340                     <strong class="reserved">return</strong> -1;
<a id="L1341" name="L1341"></a>1341                 <em class="brace">}</em>
<a id="L1342" name="L1342"></a>1342                 biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1343" name="L1343"></a>1343                 <strong class="reserved">return</strong> (pos - 1);
<a id="L1344" name="L1344"></a>1344             <strong class="reserved">default</strong>:
<a id="L1345" name="L1345"></a>1345                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Bad direction: " + direction);
<a id="L1346" name="L1346"></a>1346             <em class="brace">}</em>
<a id="L1347" name="L1347"></a>1347             <strong class="reserved">return</strong> pos;
<a id="L1348" name="L1348"></a>1348 
<a id="L1349" name="L1349"></a>1349         <em class="brace">}</em>
<a id="L1350" name="L1350"></a>1350     <em class="brace">}</em>
<a id="L1351" name="L1351"></a>1351 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L92">[^]</a><a href="#L1264">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
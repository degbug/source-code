<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/launcher/wildcard.c</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L104">[^]</a><a href="#L468">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L104" title="Defined at 104.">exists</a></li>
<li><a href="#L135" title="Defined at 135.">WildcardIterator_for</a></li>
<li><a href="#L149" title="Defined at 149.">WildcardIterator_next</a></li>
<li><a href="#L161" title="Defined at 161.">WildcardIterator_close</a></li>
<li><a href="#L177" title="Defined at 177.">WildcardIterator_for</a></li>
<li><a href="#L199" title="Defined at 199.">WildcardIterator_next</a></li>
<li><a href="#L206" title="Defined at 206.">WildcardIterator_close</a></li>
<li><a href="#L216" title="Defined at 216.">equal</a></li>
<li><a href="#L233" title="Defined at 233.">FileList_new</a></li>
<li><a href="#L245" title="Defined at 245.">FileList_free</a></li>
<li><a href="#L259" title="Defined at 259.">FileList_ensureCapacity</a></li>
<li><a href="#L270" title="Defined at 270.">FileList_add</a></li>
<li><a href="#L277" title="Defined at 277.">FileList_addSubstring</a></li>
<li><a href="#L287" title="Defined at 287.">FileList_join</a></li>
<li><a href="#L310" title="Defined at 310.">FileList_split</a></li>
<li><a href="#L332" title="Defined at 332.">isJarFileName</a></li>
<li><a href="#L344" title="Defined at 344.">wildcardConcat</a></li>
<li><a href="#L356" title="Defined at 356.">wildcardFileList</a></li>
<li><a href="#L376" title="Defined at 376.">isWildcard</a></li>
<li><a href="#L386" title="Defined at 386.">FileList_expandWildcards</a></li>
<li><a href="#L410" title="Defined at 410.">JLI_WildcardExpandClasspath</a></li>
<li><a href="#L431" title="Defined at 431.">FileList_print</a></li>
<li><a href="#L443" title="Defined at 443.">wildcardExpandArgv</a></li>
<li><a href="#L456" title="Defined at 456.">debugPrintArgv</a></li>
<li><a href="#L468" title="Defined at 468.">main</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2005, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  Class-Path Wildcards
  The syntax for wildcards is a single asterisk. The class path
  foo/"*", e.g., loads all jar files in the directory named foo.
  (This requires careful quotation when used in shell scripts.)
  Only files whose names end in .jar or .JAR are matched.
  Files whose names end in .zip, or which have a particular
  magic number, regardless of filename extension, are not
  matched.
  Files are considered regardless of whether or not they are
  "hidden" in the UNIX sense, i.e., have names beginning with '.'.
  A wildcard only matches jar files, not class files in the same
  directory.  If you want to load both class files and jar files from
  a single directory foo then you can say foo:foo/"*", or foo/"*":foo
  if you want the jar files to take precedence.
  Subdirectories are not searched recursively, i.e., foo/"*" only
  looks for jar files in foo, not in foo/bar, foo/baz, etc.
  Expansion of wildcards is done early, prior to the invocation of a
  program's main method, rather than late, during the class-loading
  process itself.  Each element of the input class path containing a
  wildcard is replaced by the (possibly empty) sequence of elements
  generated by enumerating the jar files in the named directory.  If
  the directory foo contains a.jar, b.jar, and c.jar,
  e.g., then the class path foo/"*" is expanded into
  foo/a.jar:foo/b.jar:foo/c.jar, and that string would be the value
  of the system property java.class.path.
  The order in which the jar files in a directory are enumerated in
  the expanded class path is not specified and may vary from platform
  to platform and even from moment to moment on the same machine.  A
  well-constructed application should not depend upon any particular
  order.  If a specific order is required then the jar files can be
  enumerated explicitly in the class path.
  The CLASSPATH environment variable is not treated any differently
  from the -classpath (equiv. -cp) command-line option,
  i.e. wildcards are honored in all these cases.
  Class-path wildcards are not honored in the Class-Path jar-manifest
  header.
  Class-path wildcards are honored not only by the Java launcher but
  also by most other command-line tools that accept class paths, and
  in particular by javac and javadoc.
  Class-path wildcards are not honored in any other kind of path, and
  especially not in the bootstrap class path, which is a mere
  artifact of our implementation and not something that developers
  should use.
  Classpath wildcards are only expanded in the Java launcher code,
  supporting the use of wildcards on the command line and in the
  CLASSPATH environment variable.  We do not support the use of
  wildcards by applications that embed the JVM.</div>
<a id="L87" name="L87"></a>  87 
<a id="L88" name="L88"></a>  88 <em class="sharp">#include</em> &lt;stddef.h&gt;
<a id="L89" name="L89"></a>  89 <em class="sharp">#include</em> &lt;stdio.h&gt;
<a id="L90" name="L90"></a>  90 <em class="sharp">#include</em> &lt;stdlib.h&gt;
<a id="L91" name="L91"></a>  91 <em class="sharp">#include</em> &lt;string.h&gt;
<a id="L92" name="L92"></a>  92 <em class="sharp">#include</em> &lt;sys/types.h&gt;
<a id="L93" name="L93"></a>  93 <em class="sharp">#include</em> "<div class="comment">
/* Strictly for PATH_SEPARATOR/FILE_SEPARATOR */</div>
<a id="L94" name="L94"></a>  94 <em class="sharp">#include</em> "<a href="9.html">jli_util.h</a>"
<a id="L95" name="L95"></a>  95 
<a id="L96" name="L96"></a>  96 <em class="sharp">#ifdef</em> _WIN32
<a id="L97" name="L97"></a>  97 <em class="sharp">#include</em> &lt;windows.h&gt;
<a id="L98" name="L98"></a>  98 <div class="comment">
/* Unix */</div>
<a id="L99" name="L99"></a>  99 <em class="sharp">#include</em> &lt;unistd.h&gt;
<a id="L100" name="L100"></a> 100 <em class="sharp">#include</em> &lt;dirent.h&gt;
<a id="L101" name="L101"></a> 101 <div class="comment">
/* Unix */</div>
<a id="L102" name="L102"></a> 102 
<a id="L103" name="L103"></a> 103 <strong class="reserved">static</strong> <strong class="reserved">int</strong>
<a id="L104" name="L104"></a> 104 <a href="../R/14103.html" title="Multiple referred from 77 places.">exists</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong>* filename)
<a id="L105" name="L105"></a> 105 <em class="brace">{</em>
<a id="L106" name="L106"></a> 106 <em class="sharp">#ifdef</em> _WIN32
<a id="L107" name="L107"></a> 107     <strong class="reserved">return</strong> _access(filename, 0) == 0;
<a id="L108" name="L108"></a> 108 <em class="sharp">#else</em>
<a id="L109" name="L109"></a> 109     <strong class="reserved">return</strong> <a href="../S/1421.html#L608" title="Defined at 608 in src/java/io/WinNTFileSystem.java.">access</a>(filename, F_OK) == 0;
<a id="L110" name="L110"></a> 110 <em class="sharp">#endif</em>
<a id="L111" name="L111"></a> 111 <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<a id="L113" name="L113"></a> 113 <em class="sharp">#define</em> <a href="../R/5369.html" title="Multiple referred from 3 places.">NEW_</a>(TYPE) ((TYPE) <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<strong class="reserved">sizeof</strong>(<strong class="reserved">struct</strong> TYPE##_)))
<a id="L114" name="L114"></a> 114 
<div class="comment">
  Wildcard directory iteration.
  WildcardIterator_for(wildcard) returns an iterator.
  Each call to that iterator's next() method returns the basename
  of an entry in the wildcard's directory.  The basename's memory
  belongs to the iterator.  The caller is responsible for prepending
  the directory name and file separator, if necessary.
  When done with the iterator, call the close method to clean up.</div>
<a id="L124" name="L124"></a> 124 <strong class="reserved">typedef</strong> <strong class="reserved">struct</strong> <a href="../D/9651.html" title="Multiple defined in 2 places.">WildcardIterator_</a>* <a href="../R/8760.html" title="Multiple referred from 9 places.">WildcardIterator</a>;
<a id="L125" name="L125"></a> 125 
<a id="L126" name="L126"></a> 126 <em class="sharp">#ifdef</em> _WIN32
<a id="L127" name="L127"></a> 127 <strong class="reserved">struct</strong> <a href="../S/17.html#L124" title="Referred from 124 in src/launcher/wildcard.c.">WildcardIterator_</a>
<a id="L128" name="L128"></a> 128 <em class="brace">{</em>
<a id="L129" name="L129"></a> 129     HANDLE <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>;
<a id="L130" name="L130"></a> 130     <div class="comment">
/* Stupid FindFirstFile...FindNextFile */</div>
<a id="L131" name="L131"></a> 131 <em class="brace">}</em>;
<a id="L132" name="L132"></a> 132 <em class="comment">// since this is used repeatedly we keep it here.</em>
<a id="L133" name="L133"></a> 133 <strong class="reserved">static</strong> WIN32_FIND_DATA find_data;
<a id="L134" name="L134"></a> 134 <strong class="reserved">static</strong> <a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a>
<a id="L135" name="L135"></a> 135 <a href="../S/17.html#L360" title="Referred from 360 in src/launcher/wildcard.c.">WildcardIterator_for</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>)
<a id="L136" name="L136"></a> 136 <em class="brace">{</em>
<a id="L137" name="L137"></a> 137     <a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it = <a href="../S/17.html#L113" title="Defined at 113 in src/launcher/wildcard.c.">NEW_</a>(<a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a>);
<a id="L138" name="L138"></a> 138     HANDLE <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = FindFirstFile(<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>, &amp;find_data);
<a id="L139" name="L139"></a> 139     <strong class="reserved">if</strong> (<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> == INVALID_HANDLE_VALUE) <em class="brace">{</em>
<a id="L140" name="L140"></a> 140         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(it);
<a id="L141" name="L141"></a> 141         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L142" name="L142"></a> 142     <em class="brace">}</em>
<a id="L143" name="L143"></a> 143     it-&gt;<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>;
<a id="L144" name="L144"></a> 144     it-&gt;firstFile = find_data.cFileName;
<a id="L145" name="L145"></a> 145     <strong class="reserved">return</strong> it;
<a id="L146" name="L146"></a> 146 <em class="brace">}</em>
<a id="L147" name="L147"></a> 147 
<a id="L148" name="L148"></a> 148 <strong class="reserved">static</strong> <strong class="reserved">char</strong> *
<a id="L149" name="L149"></a> 149 <a href="../S/17.html#L368" title="Referred from 368 in src/launcher/wildcard.c.">WildcardIterator_next</a>(<a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it)
<a id="L150" name="L150"></a> 150 <em class="brace">{</em>
<a id="L151" name="L151"></a> 151     <strong class="reserved">if</strong> (it-&gt;firstFile != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L152" name="L152"></a> 152         <strong class="reserved">char</strong> *firstFile = it-&gt;firstFile;
<a id="L153" name="L153"></a> 153         it-&gt;firstFile = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L154" name="L154"></a> 154         <strong class="reserved">return</strong> firstFile;
<a id="L155" name="L155"></a> 155     <em class="brace">}</em>
<a id="L156" name="L156"></a> 156     <strong class="reserved">return</strong> FindNextFile(it-&gt;<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>, &amp;find_data)
<a id="L157" name="L157"></a> 157         ? find_data.cFileName : <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L158" name="L158"></a> 158 <em class="brace">}</em>
<a id="L159" name="L159"></a> 159 
<a id="L160" name="L160"></a> 160 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L161" name="L161"></a> 161 <a href="../S/17.html#L371" title="Referred from 371 in src/launcher/wildcard.c.">WildcardIterator_close</a>(<a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it)
<a id="L162" name="L162"></a> 162 <em class="brace">{</em>
<a id="L163" name="L163"></a> 163     <strong class="reserved">if</strong> (it) <em class="brace">{</em>
<a id="L164" name="L164"></a> 164         FindClose(it-&gt;<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>);
<a id="L165" name="L165"></a> 165         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(it-&gt;firstFile);
<a id="L166" name="L166"></a> 166         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(it);
<a id="L167" name="L167"></a> 167     <em class="brace">}</em>
<a id="L168" name="L168"></a> 168 <em class="brace">}</em>
<a id="L169" name="L169"></a> 169 
<a id="L170" name="L170"></a> 170 <div class="comment">
/* Unix */</div>
<a id="L171" name="L171"></a> 171 <strong class="reserved">struct</strong> <a href="../S/17.html#L124" title="Referred from 124 in src/launcher/wildcard.c.">WildcardIterator_</a>
<a id="L172" name="L172"></a> 172 <em class="brace">{</em>
<a id="L173" name="L173"></a> 173     DIR *dir;
<a id="L174" name="L174"></a> 174 <em class="brace">}</em>;
<a id="L175" name="L175"></a> 175 
<a id="L176" name="L176"></a> 176 <strong class="reserved">static</strong> <a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a>
<a id="L177" name="L177"></a> 177 <a href="../S/17.html#L360" title="Referred from 360 in src/launcher/wildcard.c.">WildcardIterator_for</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>)
<a id="L178" name="L178"></a> 178 <em class="brace">{</em>
<a id="L179" name="L179"></a> 179     DIR *dir;
<a id="L180" name="L180"></a> 180     <strong class="reserved">int</strong> wildlen = <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>);
<a id="L181" name="L181"></a> 181     <strong class="reserved">if</strong> (wildlen &lt; 2) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182         dir = opendir(".");
<a id="L183" name="L183"></a> 183     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L184" name="L184"></a> 184         <strong class="reserved">char</strong> *dirname = <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>);
<a id="L185" name="L185"></a> 185         dirname[wildlen - 1] = '\0';
<a id="L186" name="L186"></a> 186         dir = opendir(dirname);
<a id="L187" name="L187"></a> 187         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(dirname);
<a id="L188" name="L188"></a> 188     <em class="brace">}</em>
<a id="L189" name="L189"></a> 189     <strong class="reserved">if</strong> (dir == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L190" name="L190"></a> 190         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L191" name="L191"></a> 191     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L192" name="L192"></a> 192         <a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it = <a href="../S/17.html#L113" title="Defined at 113 in src/launcher/wildcard.c.">NEW_</a>(<a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a>);
<a id="L193" name="L193"></a> 193         it-&gt;dir = dir;
<a id="L194" name="L194"></a> 194         <strong class="reserved">return</strong> it;
<a id="L195" name="L195"></a> 195     <em class="brace">}</em>
<a id="L196" name="L196"></a> 196 <em class="brace">}</em>
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198 <strong class="reserved">static</strong> <strong class="reserved">char</strong> *
<a id="L199" name="L199"></a> 199 <a href="../S/17.html#L368" title="Referred from 368 in src/launcher/wildcard.c.">WildcardIterator_next</a>(<a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it)
<a id="L200" name="L200"></a> 200 <em class="brace">{</em>
<a id="L201" name="L201"></a> 201     <strong class="reserved">struct</strong> dirent* dirp = readdir(it-&gt;dir);
<a id="L202" name="L202"></a> 202     <strong class="reserved">return</strong> dirp ? dirp-&gt;d_name : <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L203" name="L203"></a> 203 <em class="brace">}</em>
<a id="L204" name="L204"></a> 204 
<a id="L205" name="L205"></a> 205 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L206" name="L206"></a> 206 <a href="../S/17.html#L371" title="Referred from 371 in src/launcher/wildcard.c.">WildcardIterator_close</a>(<a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it)
<a id="L207" name="L207"></a> 207 <em class="brace">{</em>
<a id="L208" name="L208"></a> 208     <strong class="reserved">if</strong> (it) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209         closedir(it-&gt;dir);
<a id="L210" name="L210"></a> 210         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(it);
<a id="L211" name="L211"></a> 211     <em class="brace">}</em>
<a id="L212" name="L212"></a> 212 <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 <div class="comment">
/* Unix */</div>
<a id="L214" name="L214"></a> 214 
<a id="L215" name="L215"></a> 215 <strong class="reserved">static</strong> <strong class="reserved">int</strong>
<a id="L216" name="L216"></a> 216 <a href="../R/13983.html" title="Multiple referred from 70 places.">equal</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *s1, <strong class="reserved">const</strong> <strong class="reserved">char</strong> *s2)
<a id="L217" name="L217"></a> 217 <em class="brace">{</em>
<a id="L218" name="L218"></a> 218     <strong class="reserved">return</strong> <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(s1, s2) == 0;
<a id="L219" name="L219"></a> 219 <em class="brace">}</em>
<a id="L220" name="L220"></a> 220 
<div class="comment">
  FileList ADT - a dynamic list of C filenames</div>
<a id="L224" name="L224"></a> 224 <strong class="reserved">struct</strong> <a href="../S/17.html#L230" title="Referred from 230 in src/launcher/wildcard.c.">FileList_</a>
<a id="L225" name="L225"></a> 225 <em class="brace">{</em>
<a id="L226" name="L226"></a> 226     <strong class="reserved">char</strong> **files;
<a id="L227" name="L227"></a> 227     <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L228" name="L228"></a> 228     <strong class="reserved">int</strong> <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>;
<a id="L229" name="L229"></a> 229 <em class="brace">}</em>;
<a id="L230" name="L230"></a> 230 <strong class="reserved">typedef</strong> <strong class="reserved">struct</strong> <a href="../S/17.html#L224" title="Defined at 224 in src/launcher/wildcard.c.">FileList_</a> *<a href="../R/2922.html" title="Multiple referred from 15 places.">FileList</a>;
<a id="L231" name="L231"></a> 231 
<a id="L232" name="L232"></a> 232 <strong class="reserved">static</strong> <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a>
<a id="L233" name="L233"></a> 233 <a href="../R/2930.html" title="Multiple referred from 2 places.">FileList_new</a>(<strong class="reserved">int</strong> <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>)
<a id="L234" name="L234"></a> 234 <em class="brace">{</em>
<a id="L235" name="L235"></a> 235     <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl = <a href="../S/17.html#L113" title="Defined at 113 in src/launcher/wildcard.c.">NEW_</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a>);
<a id="L236" name="L236"></a> 236     fl-&gt;<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> = <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>;
<a id="L237" name="L237"></a> 237     fl-&gt;files = (<strong class="reserved">char</strong> **) <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> * <strong class="reserved">sizeof</strong>(fl-&gt;files[0]));
<a id="L238" name="L238"></a> 238     fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L239" name="L239"></a> 239     <strong class="reserved">return</strong> fl;
<a id="L240" name="L240"></a> 240 <em class="brace">}</em>
<a id="L241" name="L241"></a> 241 
<a id="L242" name="L242"></a> 242 
<a id="L243" name="L243"></a> 243 
<a id="L244" name="L244"></a> 244 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L245" name="L245"></a> 245 <a href="../R/2928.html" title="Multiple referred from 3 places.">FileList_free</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl)
<a id="L246" name="L246"></a> 246 <em class="brace">{</em>
<a id="L247" name="L247"></a> 247     <strong class="reserved">if</strong> (fl) <em class="brace">{</em>
<a id="L248" name="L248"></a> 248         <strong class="reserved">if</strong> (fl-&gt;files) <em class="brace">{</em>
<a id="L249" name="L249"></a> 249             <strong class="reserved">int</strong> i;
<a id="L250" name="L250"></a> 250             <strong class="reserved">for</strong> (i = 0; i &lt; fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++)
<a id="L251" name="L251"></a> 251                 <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(fl-&gt;files[i]);
<a id="L252" name="L252"></a> 252             <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(fl-&gt;files);
<a id="L253" name="L253"></a> 253         <em class="brace">}</em>
<a id="L254" name="L254"></a> 254         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(fl);
<a id="L255" name="L255"></a> 255     <em class="brace">}</em>
<a id="L256" name="L256"></a> 256 <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<a id="L258" name="L258"></a> 258 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L259" name="L259"></a> 259 <a href="../R/2926.html" title="Multiple referred from 3 places.">FileList_ensureCapacity</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl, <strong class="reserved">int</strong> <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>)
<a id="L260" name="L260"></a> 260 <em class="brace">{</em>
<a id="L261" name="L261"></a> 261     <strong class="reserved">if</strong> (fl-&gt;<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> &lt; <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>) <em class="brace">{</em>
<a id="L262" name="L262"></a> 262         <strong class="reserved">while</strong> (fl-&gt;<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> &lt; <a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a>)
<a id="L263" name="L263"></a> 263             fl-&gt;<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> *= 2;
<a id="L264" name="L264"></a> 264         fl-&gt;files = <a href="../S/16.html#L52" title="Defined at 52 in src/launcher/jli_util.c.">JLI_MemRealloc</a>(fl-&gt;files,
<a id="L265" name="L265"></a> 265                                fl-&gt;<a href="../D/12244.html" title="Multiple defined in 10 places.">capacity</a> * <strong class="reserved">sizeof</strong>(fl-&gt;files[0]));
<a id="L266" name="L266"></a> 266     <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 <em class="brace">}</em>
<a id="L268" name="L268"></a> 268 
<a id="L269" name="L269"></a> 269 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L270" name="L270"></a> 270 <a href="../S/17.html#L370" title="Referred from 370 in src/launcher/wildcard.c.">FileList_add</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl, <strong class="reserved">char</strong> *<a href="../D/16022.html" title="Multiple defined in 3 places.">file</a>)
<a id="L271" name="L271"></a> 271 <em class="brace">{</em>
<a id="L272" name="L272"></a> 272     <a href="../S/17.html#L259" title="Defined at 259 in src/launcher/wildcard.c.">FileList_ensureCapacity</a>(fl, fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>+1);
<a id="L273" name="L273"></a> 273     fl-&gt;files[fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>++] = <a href="../D/16022.html" title="Multiple defined in 3 places.">file</a>;
<a id="L274" name="L274"></a> 274 <em class="brace">}</em>
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L277" name="L277"></a> 277 <a href="../S/17.html#L322" title="Referred from 322 in src/launcher/wildcard.c.">FileList_addSubstring</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl, <strong class="reserved">const</strong> <strong class="reserved">char</strong> *beg, <strong class="reserved">int</strong> len)
<a id="L278" name="L278"></a> 278 <em class="brace">{</em>
<a id="L279" name="L279"></a> 279     <strong class="reserved">char</strong> *filename = (<strong class="reserved">char</strong> *) <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(len+1);
<a id="L280" name="L280"></a> 280     memcpy(filename, beg, len);
<a id="L281" name="L281"></a> 281     filename[len] = '\0';
<a id="L282" name="L282"></a> 282     <a href="../S/17.html#L259" title="Defined at 259 in src/launcher/wildcard.c.">FileList_ensureCapacity</a>(fl, fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>+1);
<a id="L283" name="L283"></a> 283     fl-&gt;files[fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>++] = filename;
<a id="L284" name="L284"></a> 284 <em class="brace">}</em>
<a id="L285" name="L285"></a> 285 
<a id="L286" name="L286"></a> 286 <strong class="reserved">static</strong> <strong class="reserved">char</strong> *
<a id="L287" name="L287"></a> 287 <a href="../S/17.html#L419" title="Referred from 419 in src/launcher/wildcard.c.">FileList_join</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl, <strong class="reserved">char</strong> sep)
<a id="L288" name="L288"></a> 288 <em class="brace">{</em>
<a id="L289" name="L289"></a> 289     <strong class="reserved">int</strong> i;
<a id="L290" name="L290"></a> 290     <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L291" name="L291"></a> 291     <strong class="reserved">char</strong> *path;
<a id="L292" name="L292"></a> 292     <strong class="reserved">char</strong> *p;
<a id="L293" name="L293"></a> 293     <strong class="reserved">for</strong> (i = 0, <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 1; i &lt; fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++)
<a id="L294" name="L294"></a> 294         <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> += (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(fl-&gt;files[i]) + 1;
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296     path = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L297" name="L297"></a> 297 
<a id="L298" name="L298"></a> 298     <strong class="reserved">for</strong> (i = 0, p = path; i &lt; fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L299" name="L299"></a> 299         <strong class="reserved">int</strong> len = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(fl-&gt;files[i]);
<a id="L300" name="L300"></a> 300         <strong class="reserved">if</strong> (i &gt; 0) *p++ = sep;
<a id="L301" name="L301"></a> 301         memcpy(p, fl-&gt;files[i], len);
<a id="L302" name="L302"></a> 302         p += len;
<a id="L303" name="L303"></a> 303     <em class="brace">}</em>
<a id="L304" name="L304"></a> 304     *p = '\0';
<a id="L305" name="L305"></a> 305 
<a id="L306" name="L306"></a> 306     <strong class="reserved">return</strong> path;
<a id="L307" name="L307"></a> 307 <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<a id="L309" name="L309"></a> 309 <strong class="reserved">static</strong> <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a>
<a id="L310" name="L310"></a> 310 <a href="../S/17.html#L417" title="Referred from 417 in src/launcher/wildcard.c.">FileList_split</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *path, <strong class="reserved">char</strong> sep)
<a id="L311" name="L311"></a> 311 <em class="brace">{</em>
<a id="L312" name="L312"></a> 312     <strong class="reserved">const</strong> <strong class="reserved">char</strong> *p, *q;
<a id="L313" name="L313"></a> 313     <strong class="reserved">int</strong> len = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(path);
<a id="L314" name="L314"></a> 314     <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L315" name="L315"></a> 315     <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl;
<a id="L316" name="L316"></a> 316     <strong class="reserved">for</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 1, p = path; p &lt; path + len; p++)
<a id="L317" name="L317"></a> 317         <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> += (*p == sep);
<a id="L318" name="L318"></a> 318     fl = <a href="../S/17.html#L233" title="Defined at 233 in src/launcher/wildcard.c.">FileList_new</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L319" name="L319"></a> 319     <strong class="reserved">for</strong> (p = path;;) <em class="brace">{</em>
<a id="L320" name="L320"></a> 320         <strong class="reserved">for</strong> (q = p; q &lt;= path + len; q++) <em class="brace">{</em>
<a id="L321" name="L321"></a> 321             <strong class="reserved">if</strong> (*q == sep || *q == '\0') <em class="brace">{</em>
<a id="L322" name="L322"></a> 322                 <a href="../S/17.html#L277" title="Defined at 277 in src/launcher/wildcard.c.">FileList_addSubstring</a>(fl, p, q - p);
<a id="L323" name="L323"></a> 323                 <strong class="reserved">if</strong> (*q == '\0')
<a id="L324" name="L324"></a> 324                     <strong class="reserved">return</strong> fl;
<a id="L325" name="L325"></a> 325                 p = q + 1;
<a id="L326" name="L326"></a> 326             <em class="brace">}</em>
<a id="L327" name="L327"></a> 327         <em class="brace">}</em>
<a id="L328" name="L328"></a> 328     <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<a id="L331" name="L331"></a> 331 <strong class="reserved">static</strong> <strong class="reserved">int</strong>
<a id="L332" name="L332"></a> 332 <a href="../S/17.html#L369" title="Referred from 369 in src/launcher/wildcard.c.">isJarFileName</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *filename)
<a id="L333" name="L333"></a> 333 <em class="brace">{</em>
<a id="L334" name="L334"></a> 334     <strong class="reserved">int</strong> len = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(filename);
<a id="L335" name="L335"></a> 335     <strong class="reserved">return</strong> (len &gt;= 4) &amp;&amp;
<a id="L336" name="L336"></a> 336         (filename[len - 4] == '.') &amp;&amp;
<a id="L337" name="L337"></a> 337         (<a href="../D/15675.html" title="Multiple defined in 20 places.">equal</a>(filename + len - 3, "jar") ||
<a id="L338" name="L338"></a> 338          <a href="../D/15675.html" title="Multiple defined in 20 places.">equal</a>(filename + len - 3, "JAR")) &amp;&amp;
<div class="comment">
         /* Paranoia: Maybe filename is "DIR:foo.jar" */</div>
<a id="L340" name="L340"></a> 340         (<a href="../S/9.html#L50" title="Defined at 50 in src/launcher/jli_util.h.">JLI_StrChr</a>(filename, <a href="../S/10.html#L35" title="Defined at 35 in src/launcher/java_md.h.">PATH_SEPARATOR</a>) == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L341" name="L341"></a> 341 <em class="brace">}</em>
<a id="L342" name="L342"></a> 342 
<a id="L343" name="L343"></a> 343 <strong class="reserved">static</strong> <strong class="reserved">char</strong> *
<a id="L344" name="L344"></a> 344 <a href="../S/17.html#L370" title="Referred from 370 in src/launcher/wildcard.c.">wildcardConcat</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>, <strong class="reserved">const</strong> <strong class="reserved">char</strong> *basename)
<a id="L345" name="L345"></a> 345 <em class="brace">{</em>
<a id="L346" name="L346"></a> 346     <strong class="reserved">int</strong> wildlen = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>);
<a id="L347" name="L347"></a> 347     <strong class="reserved">int</strong> baselen = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(basename);
<a id="L348" name="L348"></a> 348     <strong class="reserved">char</strong> *filename = (<strong class="reserved">char</strong> *) <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(wildlen + baselen);
<div class="comment">
     /* Replace the trailing '*' with basename */</div>
<a id="L350" name="L350"></a> 350     memcpy(filename, <a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>, wildlen-1);
<a id="L351" name="L351"></a> 351     memcpy(filename+wildlen-1, basename, baselen+1);
<a id="L352" name="L352"></a> 352     <strong class="reserved">return</strong> filename;
<a id="L353" name="L353"></a> 353 <em class="brace">}</em>
<a id="L354" name="L354"></a> 354 
<a id="L355" name="L355"></a> 355 <strong class="reserved">static</strong> <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a>
<a id="L356" name="L356"></a> 356 <a href="../S/17.html#L391" title="Referred from 391 in src/launcher/wildcard.c.">wildcardFileList</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>)
<a id="L357" name="L357"></a> 357 <em class="brace">{</em>
<a id="L358" name="L358"></a> 358     <strong class="reserved">const</strong> <strong class="reserved">char</strong> *basename;
<a id="L359" name="L359"></a> 359     <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl = <a href="../S/17.html#L233" title="Defined at 233 in src/launcher/wildcard.c.">FileList_new</a>(16);
<a id="L360" name="L360"></a> 360     <a href="../S/17.html#L124" title="Defined at 124 in src/launcher/wildcard.c.">WildcardIterator</a> it = <a href="../D/9653.html" title="Multiple defined in 2 places.">WildcardIterator_for</a>(<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>);
<a id="L361" name="L361"></a> 361 
<a id="L362" name="L362"></a> 362     <strong class="reserved">if</strong> (it == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L363" name="L363"></a> 363     <em class="brace">{</em>
<a id="L364" name="L364"></a> 364         <a href="../S/17.html#L245" title="Defined at 245 in src/launcher/wildcard.c.">FileList_free</a>(fl);
<a id="L365" name="L365"></a> 365         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<a id="L368" name="L368"></a> 368     <strong class="reserved">while</strong> ((basename = <a href="../D/9654.html" title="Multiple defined in 2 places.">WildcardIterator_next</a>(it)) != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L369" name="L369"></a> 369         <strong class="reserved">if</strong> (<a href="../S/17.html#L332" title="Defined at 332 in src/launcher/wildcard.c.">isJarFileName</a>(basename))
<a id="L370" name="L370"></a> 370             <a href="../S/17.html#L270" title="Defined at 270 in src/launcher/wildcard.c.">FileList_add</a>(fl, <a href="../S/17.html#L344" title="Defined at 344 in src/launcher/wildcard.c.">wildcardConcat</a>(<a href="../S/766.html#L223" title="Defined at 223 in src/java/net/HostPortrange.java.">wildcard</a>, basename));
<a id="L371" name="L371"></a> 371     <a href="../D/9652.html" title="Multiple defined in 2 places.">WildcardIterator_close</a>(it);
<a id="L372" name="L372"></a> 372     <strong class="reserved">return</strong> fl;
<a id="L373" name="L373"></a> 373 <em class="brace">}</em>
<a id="L374" name="L374"></a> 374 
<a id="L375" name="L375"></a> 375 <strong class="reserved">static</strong> <strong class="reserved">int</strong>
<a id="L376" name="L376"></a> 376 <a href="../R/22240.html" title="Multiple referred from 4 places.">isWildcard</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *filename)
<a id="L377" name="L377"></a> 377 <em class="brace">{</em>
<a id="L378" name="L378"></a> 378     <strong class="reserved">int</strong> len = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(filename);
<a id="L379" name="L379"></a> 379     <strong class="reserved">return</strong> (len &gt; 0) &amp;&amp;
<a id="L380" name="L380"></a> 380         (filename[len - 1] == '*') &amp;&amp;
<a id="L381" name="L381"></a> 381         (len == 1 || <a href="../S/10.html#L38" title="Defined at 38 in src/launcher/java_md.h.">IS_FILE_SEPARATOR</a>(filename[len - 2])) &amp;&amp;
<a id="L382" name="L382"></a> 382         (! <a href="../D/15817.html" title="Multiple defined in 5 places.">exists</a>(filename));
<a id="L383" name="L383"></a> 383 <em class="brace">}</em>
<a id="L384" name="L384"></a> 384 
<a id="L385" name="L385"></a> 385 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L386" name="L386"></a> 386 <a href="../S/17.html#L418" title="Referred from 418 in src/launcher/wildcard.c.">FileList_expandWildcards</a>(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl)
<a id="L387" name="L387"></a> 387 <em class="brace">{</em>
<a id="L388" name="L388"></a> 388     <strong class="reserved">int</strong> i, j;
<a id="L389" name="L389"></a> 389     <strong class="reserved">for</strong> (i = 0; i &lt; fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L390" name="L390"></a> 390         <strong class="reserved">if</strong> (<a href="../D/26510.html" title="Multiple defined in 8 places.">isWildcard</a>(fl-&gt;files[i])) <em class="brace">{</em>
<a id="L391" name="L391"></a> 391             <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> expanded = <a href="../S/17.html#L356" title="Defined at 356 in src/launcher/wildcard.c.">wildcardFileList</a>(fl-&gt;files[i]);
<a id="L392" name="L392"></a> 392             <strong class="reserved">if</strong> (expanded != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> &amp;&amp; expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt; 0) <em class="brace">{</em>
<a id="L393" name="L393"></a> 393                 <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(fl-&gt;files[i]);
<a id="L394" name="L394"></a> 394                 <a href="../S/17.html#L259" title="Defined at 259 in src/launcher/wildcard.c.">FileList_ensureCapacity</a>(fl, fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> + expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>);
<a id="L395" name="L395"></a> 395                 <strong class="reserved">for</strong> (j = fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1; j &gt;= i+1; j--)
<a id="L396" name="L396"></a> 396                     fl-&gt;files[j+expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>-1] = fl-&gt;files[j];
<a id="L397" name="L397"></a> 397                 <strong class="reserved">for</strong> (j = 0; j &lt; expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; j++)
<a id="L398" name="L398"></a> 398                     fl-&gt;files[i+j] = expanded-&gt;files[j];
<a id="L399" name="L399"></a> 399                 i += expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1;
<a id="L400" name="L400"></a> 400                 fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> += expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1;
<div class="comment">
                 /* fl expropriates expanded's elements. */</div>
<a id="L402" name="L402"></a> 402                 expanded-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = 0;
<a id="L403" name="L403"></a> 403             <em class="brace">}</em>
<a id="L404" name="L404"></a> 404             <a href="../S/17.html#L245" title="Defined at 245 in src/launcher/wildcard.c.">FileList_free</a>(expanded);
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406     <em class="brace">}</em>
<a id="L407" name="L407"></a> 407 <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<a id="L409" name="L409"></a> 409 <strong class="reserved">const</strong> <strong class="reserved">char</strong> *
<a id="L410" name="L410"></a> 410 <a href="../R/4181.html" title="Multiple referred from 4 places.">JLI_WildcardExpandClasspath</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *classpath)
<a id="L411" name="L411"></a> 411 <em class="brace">{</em>
<a id="L412" name="L412"></a> 412     <strong class="reserved">char</strong> *expanded;
<a id="L413" name="L413"></a> 413     <a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl;
<a id="L414" name="L414"></a> 414 
<a id="L415" name="L415"></a> 415     <strong class="reserved">if</strong> (<a href="../S/9.html#L50" title="Defined at 50 in src/launcher/jli_util.h.">JLI_StrChr</a>(classpath, '*') == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L416" name="L416"></a> 416         <strong class="reserved">return</strong> classpath;
<a id="L417" name="L417"></a> 417     fl = <a href="../S/17.html#L310" title="Defined at 310 in src/launcher/wildcard.c.">FileList_split</a>(classpath, <a href="../S/10.html#L35" title="Defined at 35 in src/launcher/java_md.h.">PATH_SEPARATOR</a>);
<a id="L418" name="L418"></a> 418     <a href="../S/17.html#L386" title="Defined at 386 in src/launcher/wildcard.c.">FileList_expandWildcards</a>(fl);
<a id="L419" name="L419"></a> 419     expanded = <a href="../S/17.html#L287" title="Defined at 287 in src/launcher/wildcard.c.">FileList_join</a>(fl, <a href="../S/10.html#L35" title="Defined at 35 in src/launcher/java_md.h.">PATH_SEPARATOR</a>);
<a id="L420" name="L420"></a> 420     <a href="../S/17.html#L245" title="Defined at 245 in src/launcher/wildcard.c.">FileList_free</a>(fl);
<a id="L421" name="L421"></a> 421     <strong class="reserved">if</strong> (<a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>(<a href="../S/9.html#L33" title="Defined at 33 in src/launcher/jli_util.h.">JLDEBUG_ENV_ENTRY</a>) != 0)
<a id="L422" name="L422"></a> 422         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("Expanded wildcards:\n"
<a id="L423" name="L423"></a> 423                "    before: \"%s\"\n"
<a id="L424" name="L424"></a> 424                "    after : \"%s\"\n",
<a id="L425" name="L425"></a> 425                classpath, expanded);
<a id="L426" name="L426"></a> 426     <strong class="reserved">return</strong> expanded;
<a id="L427" name="L427"></a> 427 <em class="brace">}</em>
<a id="L428" name="L428"></a> 428 
<a id="L429" name="L429"></a> 429 <em class="sharp">#ifdef</em> DEBUG_WILDCARD
<a id="L430" name="L430"></a> 430 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L431" name="L431"></a> 431 FileList_print(<a href="../S/17.html#L230" title="Defined at 230 in src/launcher/wildcard.c.">FileList</a> fl)
<a id="L432" name="L432"></a> 432 <em class="brace">{</em>
<a id="L433" name="L433"></a> 433     <strong class="reserved">int</strong> i;
<a id="L434" name="L434"></a> 434     putchar('[');
<a id="L435" name="L435"></a> 435     <strong class="reserved">for</strong> (i = 0; i &lt; fl-&gt;<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L436" name="L436"></a> 436         <strong class="reserved">if</strong> (i &gt; 0) <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>(", ");
<a id="L437" name="L437"></a> 437         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\"%s\"",fl-&gt;files[i]);
<a id="L438" name="L438"></a> 438     <em class="brace">}</em>
<a id="L439" name="L439"></a> 439     putchar(']');
<a id="L440" name="L440"></a> 440 <em class="brace">}</em>
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L443" name="L443"></a> 443 <a href="../S/17.html#L471" title="Referred from 471 in src/launcher/wildcard.c.">wildcardExpandArgv</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> ***argv)
<a id="L444" name="L444"></a> 444 <em class="brace">{</em>
<a id="L445" name="L445"></a> 445     <strong class="reserved">int</strong> i;
<a id="L446" name="L446"></a> 446     <strong class="reserved">for</strong> (i = 0; (*argv)[i]; i++) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447         <strong class="reserved">if</strong> (<a href="../D/15675.html" title="Multiple defined in 20 places.">equal</a>((*argv)[i], "-cp") ||
<a id="L448" name="L448"></a> 448             <a href="../D/15675.html" title="Multiple defined in 20 places.">equal</a>((*argv)[i], "-classpath")) <em class="brace">{</em>
<a id="L449" name="L449"></a> 449             i++;
<a id="L450" name="L450"></a> 450             (*argv)[i] = wildcardExpandClasspath((*argv)[i]);
<a id="L451" name="L451"></a> 451         <em class="brace">}</em>
<a id="L452" name="L452"></a> 452     <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<a id="L455" name="L455"></a> 455 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L456" name="L456"></a> 456 <a href="../S/17.html#L472" title="Referred from 472 in src/launcher/wildcard.c.">debugPrintArgv</a>(<strong class="reserved">char</strong> *argv[])
<a id="L457" name="L457"></a> 457 <em class="brace">{</em>
<a id="L458" name="L458"></a> 458     <strong class="reserved">int</strong> i;
<a id="L459" name="L459"></a> 459     putchar('[');
<a id="L460" name="L460"></a> 460     <strong class="reserved">for</strong> (i = 0; argv[i]; i++) <em class="brace">{</em>
<a id="L461" name="L461"></a> 461         <strong class="reserved">if</strong> (i &gt; 0) <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>(", ");
<a id="L462" name="L462"></a> 462         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\"%s\"", argv[i]);
<a id="L463" name="L463"></a> 463     <em class="brace">}</em>
<a id="L464" name="L464"></a> 464     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("]\n");
<a id="L465" name="L465"></a> 465 <em class="brace">}</em>
<a id="L466" name="L466"></a> 466 
<a id="L467" name="L467"></a> 467 <strong class="reserved">int</strong>
<a id="L468" name="L468"></a> 468 <a href="../R/22809.html" title="Multiple referred from 3 places.">main</a>(<strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> *argv[])
<a id="L469" name="L469"></a> 469 <em class="brace">{</em>
<a id="L470" name="L470"></a> 470     argv[0] = "java";
<a id="L471" name="L471"></a> 471     <a href="../S/17.html#L443" title="Defined at 443 in src/launcher/wildcard.c.">wildcardExpandArgv</a>((<strong class="reserved">const</strong> <strong class="reserved">char</strong>***)&amp;argv);
<a id="L472" name="L472"></a> 472     <a href="../S/17.html#L456" title="Defined at 456 in src/launcher/wildcard.c.">debugPrintArgv</a>(argv);
<div class="comment">
     /* execvp("java", argv); */</div>
<a id="L474" name="L474"></a> 474     <strong class="reserved">return</strong> 0;
<a id="L475" name="L475"></a> 475 <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 <div class="comment">
/* DEBUG_WILDCARD */</div>
<a id="L477" name="L477"></a> 477 
<div class="comment">
 Cute little perl prototype implementation....
my $sep = ($^O =~ /^(Windows|cygwin)/) ? ";" : ":";
sub expand($) {
  opendir DIR, $_[0] or return $_[0];
  join $sep, map {"$_[0]/$_"} grep {/\.(jar|JAR)$/} readdir DIR;
}
sub munge($) {
  join $sep,
    map {(! -r $_ and s/[\/\\]+\*$//) ? expand $_ : $_} split $sep, $_[0];
}
for (my $i = 0; $i &lt; @ARGV - 1; $i++) {
  $ARGV[$i+1] = munge $ARGV[$i+1] if $ARGV[$i] =~ /^-c(p|lasspath)$/;
}
$ENV{CLASSPATH} = munge $ENV{CLASSPATH} if exists $ENV{CLASSPATH};
@ARGV = ("java", @ARGV);
print "@ARGV\n";
exec @ARGV;</div>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L104">[^]</a><a href="#L468">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
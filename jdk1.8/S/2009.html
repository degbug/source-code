<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/nio/charset/CharsetEncoder.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L243">[^]</a><a href="#L991">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L243" title="Defined at 243.">charset</a></li>
<li><a href="#L253" title="Defined at 253.">replacement</a></li>
<li><a href="#L287" title="Defined at 287.">replaceWith</a></li>
<li><a href="#L316" title="Defined at 316.">implReplaceWith</a></li>
<li><a href="#L339" title="Defined at 339.">isLegalReplacement</a></li>
<li><a href="#L364" title="Defined at 364.">malformedInputAction</a></li>
<li><a href="#L381" title="Defined at 381.">onMalformedInput</a></li>
<li><a href="#L398" title="Defined at 398.">implOnMalformedInput</a></li>
<li><a href="#L406" title="Defined at 406.">unmappableCharacterAction</a></li>
<li><a href="#L423" title="Defined at 423.">onUnmappableCharacter</a></li>
<li><a href="#L442" title="Defined at 442.">implOnUnmappableCharacter</a></li>
<li><a href="#L452" title="Defined at 452.">averageBytesPerChar</a></li>
<li><a href="#L464" title="Defined at 464.">maxBytesPerChar</a></li>
<li><a href="#L566" title="Defined at 566.">encode</a></li>
<li><a href="#L666" title="Defined at 666.">flush</a></li>
<li><a href="#L694" title="Defined at 694.">implFlush</a></li>
<li><a href="#L708" title="Defined at 708.">reset</a></li>
<li><a href="#L720" title="Defined at 720.">implReset</a></li>
<li><a href="#L757" title="Defined at 757.">encodeLoop</a></li>
<li><a href="#L791" title="Defined at 791.">encode</a></li>
<li><a href="#L900" title="Defined at 900.">canEncode</a></li>
<li><a href="#L947" title="Defined at 947.">canEncode</a></li>
<li><a href="#L979" title="Defined at 979.">canEncode</a></li>
<li><a href="#L991" title="Defined at 991.">throwIllegalStateException</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <em class="comment">// -- This file was mechanically generated: Do not edit! -- //</em>
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.nio.<a href="../D/12344.html" title="Multiple defined in 2 places.">charset</a>;
<a id="L29" name="L29"></a>  29 
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.nio.Buffer;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.nio.ByteBuffer;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.nio.CharBuffer;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.nio.BufferOverflowException;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.nio.BufferUnderflowException;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.lang.ref.WeakReference;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.nio.charset.CoderMalfunctionError;                  <em class="comment">// javadoc</em>
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 
<div class="comment">
  An engine that can transform a sequence of sixteen-bit Unicode characters into a sequence of
  bytes in a specific charset.
  <a name="steps"></a>
  <p> The input character sequence is provided in a character buffer or a series
  of such buffers.  The output byte sequence is written to a byte buffer
  or a series of such buffers.  An encoder should always be used by making
  the following sequence of method invocations, hereinafter referred to as an
  <i>encoding operation</i>:
  </p><ol>
    <li><p> Reset the encoder via the <a href="#L708" title="Defined at 708.">reset</a> method, unless it
    has not been used before; </p></li><li><p> Invoke the <a href="#L566" title="Defined at 566.">encode</a> method zero or more times, as
    long as additional input may be available, passing <tt>false</tt> for the
    <tt>endOfInput</tt> argument and filling the input buffer and flushing the
    output buffer between invocations; </p></li><li><p> Invoke the <a href="#L566" title="Defined at 566.">encode</a> method one final time, passing
    <tt>true</tt> for the <tt>endOfInput</tt> argument; and then </p></li><li><p> Invoke the <a href="#L666" title="Defined at 666.">flush</a> method so that the encoder can
    flush any internal state to the output buffer. </p></li>
  </ol>
  Each invocation of the <a href="#L566" title="Defined at 566.">encode</a> method will encode as many
  characters as possible from the input buffer, writing the resulting bytes
  to the output buffer.  The <a href="#L566" title="Defined at 566.">encode</a> method returns when more
  input is required, when there is not enough room in the output buffer, or
  when an encoding error has occurred.  In each case a <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>
  object is returned to describe the reason for termination.  An invoker can
  examine this object and fill the input buffer, flush the output buffer, or
  attempt to recover from an encoding error, as appropriate, and try again.
  <a name="ce"></a>
  <p> There are two general types of encoding errors.  If the input character
  sequence is not a legal sixteen-bit Unicode sequence then the input is considered <i>malformed</i>.  If
  the input character sequence is legal but cannot be mapped to a valid
  byte sequence in the given charset then an <i>unmappable character</i> has been encountered.
  <a name="cae"></a>
  </p><p> How an encoding error is handled depends upon the action requested for
  that type of error, which is described by an instance of the {@link
  CodingErrorAction} class.  The possible error actions are to {@linkplain
  CodingErrorAction#IGNORE ignore} the erroneous input, {@linkplain
  CodingErrorAction#REPORT report} the error to the invoker via
  the returned <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> object, or {@linkplain CodingErrorAction#REPLACE
  replace} the erroneous input with the current value of the
  replacement byte array.  The replacement
  is initially set to the encoder's default replacement, which often
  (but not always) has the initial value&nbsp;<tt>{</tt>&nbsp;<tt>(byte)'?'</tt>&nbsp;<tt>}</tt>;
  its value may be changed via the {@link #replaceWith(byte[])
  replaceWith} method.
  </p><p> The default action for malformed-input and unmappable-character errors
  is to {@linkplain CodingErrorAction#REPORT report} them.  The
  malformed-input error action may be changed via the {@link
  #onMalformedInput(CodingErrorAction) onMalformedInput} method; the
  unmappable-character action may be changed via the {@link
  #onUnmappableCharacter(CodingErrorAction) onUnmappableCharacter} method.
  </p><p> This class is designed to handle many of the details of the encoding
  process, including the implementation of error actions.  An encoder for a
  specific charset, which is a concrete subclass of this class, need only
  implement the abstract <a href="#L757" title="Defined at 757.">encodeLoop</a> method, which
  encapsulates the basic encoding loop.  A subclass that maintains internal
  state should, additionally, override the <a href="#L694" title="Defined at 694.">implFlush</a> and
  <a href="#L720" title="Defined at 720.">implReset</a> methods.
  </p><p> Instances of this class are not safe for use by multiple concurrent
  threads.  </p>
  @author Mark Reinhold
  @author JSR-51 Expert Group
  @since 1.4
  @see ByteBuffer
  @see CharBuffer
  @see Charset
  @see CharsetDecoder</div>
<a id="L136" name="L136"></a> 136 
<a id="L137" name="L137"></a> 137 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/1301.html" title="Multiple referred from 28 places.">CharsetEncoder</a> <em class="brace">{</em>
<a id="L138" name="L138"></a> 138 
<a id="L139" name="L139"></a> 139     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a> <a href="../D/12344.html" title="Multiple defined in 2 places.">charset</a>;
<a id="L140" name="L140"></a> 140     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>;
<a id="L141" name="L141"></a> 141     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>;
<a id="L142" name="L142"></a> 142 
<a id="L143" name="L143"></a> 143     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>;
<a id="L144" name="L144"></a> 144     <strong class="reserved">private</strong> <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> <a href="../D/27428.html" title="Multiple defined in 2 places.">malformedInputAction</a>
<a id="L145" name="L145"></a> 145         = <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT;
<a id="L146" name="L146"></a> 146     <strong class="reserved">private</strong> <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> <a href="../D/35924.html" title="Multiple defined in 2 places.">unmappableCharacterAction</a>
<a id="L147" name="L147"></a> 147         = <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT;
<a id="L148" name="L148"></a> 148 
<a id="L149" name="L149"></a> 149     <em class="comment">// Internal states</em>
<a id="L150" name="L150"></a> 150     <em class="comment">//</em>
<a id="L151" name="L151"></a> 151     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_RESET   = 0;
<a id="L152" name="L152"></a> 152     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_CODING  = 1;
<a id="L153" name="L153"></a> 153     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_END     = 2;
<a id="L154" name="L154"></a> 154     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_FLUSHED = 3;
<a id="L155" name="L155"></a> 155 
<a id="L156" name="L156"></a> 156     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = ST_RESET;
<a id="L157" name="L157"></a> 157 
<a id="L158" name="L158"></a> 158     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> stateNames[]
<a id="L159" name="L159"></a> 159         = <em class="brace">{</em> "RESET", "CODING", "CODING_END", "FLUSHED" <em class="brace">}</em>;
<a id="L160" name="L160"></a> 160 
<a id="L161" name="L161"></a> 161 
<div class="comment">
      Initializes a new encoder.  The new encoder will have the given
      bytes-per-char and replacement values.
      @param  cs
              The charset that created this encoder
      @param  averageBytesPerChar
              A positive float value indicating the expected number of
              bytes that will be produced for each input character
      @param  maxBytesPerChar
              A positive float value indicating the maximum number of
              bytes that will be produced for each input character
      @param  replacement
              The initial replacement; must not be <tt>null</tt>, must have
              non-zero length, must not be longer than maxBytesPerChar,
              and must be {@linkplain #isLegalReplacement legal}
      @throws  IllegalArgumentException
               If the preconditions on the parameters do not hold</div>
<a id="L185" name="L185"></a> 185     <strong class="reserved">protected</strong>
<a id="L186" name="L186"></a> 186     CharsetEncoder(<a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a> cs,
<a id="L187" name="L187"></a> 187                    <strong class="reserved">float</strong> <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>,
<a id="L188" name="L188"></a> 188                    <strong class="reserved">float</strong> <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>,
<a id="L189" name="L189"></a> 189                    <strong class="reserved">byte</strong>[] <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>)
<a id="L190" name="L190"></a> 190     <em class="brace">{</em>
<a id="L191" name="L191"></a> 191         <strong class="reserved">this</strong>.<a href="../D/12344.html" title="Multiple defined in 2 places.">charset</a> = cs;
<a id="L192" name="L192"></a> 192         <strong class="reserved">if</strong> (<a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a> &lt;= 0.0f)
<a id="L193" name="L193"></a> 193             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Non-positive "
<a id="L194" name="L194"></a> 194                                                + "averageBytesPerChar");
<a id="L195" name="L195"></a> 195         <strong class="reserved">if</strong> (<a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a> &lt;= 0.0f)
<a id="L196" name="L196"></a> 196             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Non-positive "
<a id="L197" name="L197"></a> 197                                                + "maxBytesPerChar");
<a id="L198" name="L198"></a> 198         <strong class="reserved">if</strong> (!<a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a>.<a href="../S/2005.html#L279" title="Defined at 279 in src/java/nio/charset/Charset.java.">atBugLevel</a>("1.4")) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199             <strong class="reserved">if</strong> (<a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a> &gt; <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>)
<a id="L200" name="L200"></a> 200                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("averageBytesPerChar"
<a id="L201" name="L201"></a> 201                                                    + " exceeds "
<a id="L202" name="L202"></a> 202                                                    + "maxBytesPerChar");
<a id="L203" name="L203"></a> 203         <em class="brace">}</em>
<a id="L204" name="L204"></a> 204         <strong class="reserved">this</strong>.<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>;
<a id="L205" name="L205"></a> 205         <strong class="reserved">this</strong>.<a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a> = <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>;
<a id="L206" name="L206"></a> 206         <strong class="reserved">this</strong>.<a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a> = <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>;
<a id="L207" name="L207"></a> 207         <a href="../D/31073.html" title="Multiple defined in 2 places.">replaceWith</a>(<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>);
<a id="L208" name="L208"></a> 208     <em class="brace">}</em>
<a id="L209" name="L209"></a> 209 
<div class="comment">
      Initializes a new encoder.  The new encoder will have the given
      bytes-per-char values and its replacement will be the
      byte array <tt>{</tt>&nbsp;<tt>(byte)'?'</tt>&nbsp;<tt>}</tt>.
      @param  cs
              The charset that created this encoder
      @param  averageBytesPerChar
              A positive float value indicating the expected number of
              bytes that will be produced for each input character
      @param  maxBytesPerChar
              A positive float value indicating the maximum number of
              bytes that will be produced for each input character
      @throws  IllegalArgumentException
               If the preconditions on the parameters do not hold</div>
<a id="L229" name="L229"></a> 229     <strong class="reserved">protected</strong> CharsetEncoder(<a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a> cs,
<a id="L230" name="L230"></a> 230                              <strong class="reserved">float</strong> <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>,
<a id="L231" name="L231"></a> 231                              <strong class="reserved">float</strong> <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>)
<a id="L232" name="L232"></a> 232     <em class="brace">{</em>
<a id="L233" name="L233"></a> 233         <strong class="reserved">this</strong>(cs,
<a id="L234" name="L234"></a> 234              <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>, <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>,
<a id="L235" name="L235"></a> 235              <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[] <em class="brace">{</em> (<strong class="reserved">byte</strong>)'?' <em class="brace">}</em>);
<a id="L236" name="L236"></a> 236     <em class="brace">}</em>
<a id="L237" name="L237"></a> 237 
<div class="comment">
      Returns the charset that created this encoder.
      @return  This encoder's charset</div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2005.html#L271" title="Defined at 271 in src/java/nio/charset/Charset.java.">Charset</a> <a href="../R/11061.html" title="Multiple referred from 213 places.">charset</a>() <em class="brace">{</em>
<a id="L244" name="L244"></a> 244         <strong class="reserved">return</strong> <a href="../D/12344.html" title="Multiple defined in 2 places.">charset</a>;
<a id="L245" name="L245"></a> 245     <em class="brace">}</em>
<a id="L246" name="L246"></a> 246 
<div class="comment">
      Returns this encoder's replacement value.
      @return  This encoder's current replacement,
               which is never <tt>null</tt> and is never empty</div>
<a id="L253" name="L253"></a> 253     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] <a href="../R/26174.html" title="Multiple referred from 85 places.">replacement</a>() <em class="brace">{</em>
<a id="L254" name="L254"></a> 254 
<a id="L255" name="L255"></a> 255 
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257 
<a id="L258" name="L258"></a> 258         <strong class="reserved">return</strong> <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>, <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L259" name="L259"></a> 259 
<a id="L260" name="L260"></a> 260     <em class="brace">}</em>
<a id="L261" name="L261"></a> 261 
<div class="comment">
      Changes this encoder's replacement value.
      <p> This method invokes the <a href="#L316" title="Defined at 316.">implReplaceWith</a>
      method, passing the new replacement, after checking that the new
      replacement is acceptable.  </p>
      @param  newReplacement  The replacement value
              The new replacement; must not be <tt>null</tt>, must have
              non-zero length, must not be longer than the value returned by
              the {@link #maxBytesPerChar() maxBytesPerChar} method, and
              must be <a href="#L339" title="Defined at 339.">isLegalReplacement</a>
      @return  This encoder
      @throws  IllegalArgumentException
               If the preconditions on the parameter do not hold</div>
<a id="L287" name="L287"></a> 287     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2009.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetEncoder.java.">CharsetEncoder</a> <a href="../R/26170.html" title="Multiple referred from 2 places.">replaceWith</a>(<strong class="reserved">byte</strong>[] newReplacement) <em class="brace">{</em>
<a id="L288" name="L288"></a> 288         <strong class="reserved">if</strong> (newReplacement == <strong class="reserved">null</strong>)
<a id="L289" name="L289"></a> 289             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Null replacement");
<a id="L290" name="L290"></a> 290         <strong class="reserved">int</strong> len = newReplacement.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L291" name="L291"></a> 291         <strong class="reserved">if</strong> (len == 0)
<a id="L292" name="L292"></a> 292             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Empty replacement");
<a id="L293" name="L293"></a> 293         <strong class="reserved">if</strong> (len &gt; <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>)
<a id="L294" name="L294"></a> 294             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Replacement too long");
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296 
<a id="L297" name="L297"></a> 297 
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299         <strong class="reserved">if</strong> (!<a href="../S/2009.html#L339" title="Defined at 339 in src/java/nio/charset/CharsetEncoder.java.">isLegalReplacement</a>(newReplacement))
<a id="L300" name="L300"></a> 300             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Illegal replacement");
<a id="L301" name="L301"></a> 301         <strong class="reserved">this</strong>.<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a> = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(newReplacement, newReplacement.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L302" name="L302"></a> 302 
<a id="L303" name="L303"></a> 303         <a href="../D/24369.html" title="Multiple defined in 2 places.">implReplaceWith</a>(<strong class="reserved">this</strong>.<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>);
<a id="L304" name="L304"></a> 304         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L305" name="L305"></a> 305     <em class="brace">}</em>
<a id="L306" name="L306"></a> 306 
<div class="comment">
      Reports a change to this encoder's replacement value.
      <p> The default implementation of this method does nothing.  This method
      should be overridden by encoders that require notification of changes to
      the replacement.  </p>
      @param  newReplacement    The replacement value</div>
<a id="L316" name="L316"></a> 316     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20425.html" title="Multiple referred from 2 places.">implReplaceWith</a>(<strong class="reserved">byte</strong>[] newReplacement) <em class="brace">{</em>
<a id="L317" name="L317"></a> 317     <em class="brace">}</em>
<a id="L318" name="L318"></a> 318 
<a id="L319" name="L319"></a> 319 
<a id="L320" name="L320"></a> 320 
<a id="L321" name="L321"></a> 321     <strong class="reserved">private</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2001.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetDecoder.java.">CharsetDecoder</a>&gt; cachedDecoder = <strong class="reserved">null</strong>;
<a id="L322" name="L322"></a> 322 
<div class="comment">
      Tells whether or not the given byte array is a legal replacement value
      for this encoder.
      <p> A replacement is legal if, and only if, it is a legal sequence of
      bytes in this encoder's charset; that is, it must be possible to decode
      the replacement into one or more sixteen-bit Unicode characters.
      </p><p> The default implementation of this method is not very efficient; it
      should generally be overridden to improve performance.  </p>
      @param  repl  The byte array to be tested
      @return  <tt>true</tt> if, and only if, the given byte array
               is a legal replacement value for this encoder</div>
<a id="L339" name="L339"></a> 339     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/2009.html#L299" title="Referred from 299 in src/java/nio/charset/CharsetEncoder.java.">isLegalReplacement</a>(<strong class="reserved">byte</strong>[] repl) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340         <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2001.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetDecoder.java.">CharsetDecoder</a>&gt; wr = cachedDecoder;
<a id="L341" name="L341"></a> 341         <a href="../S/2001.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetDecoder.java.">CharsetDecoder</a> <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a> = <strong class="reserved">null</strong>;
<a id="L342" name="L342"></a> 342         <strong class="reserved">if</strong> ((wr == <strong class="reserved">null</strong>) || ((<a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a> = wr.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>()) == <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L343" name="L343"></a> 343             <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a> = <a href="../D/12344.html" title="Multiple defined in 2 places.">charset</a>().<a href="../S/2005.html#L748" title="Defined at 748 in src/java/nio/charset/Charset.java.">newDecoder</a>();
<a id="L344" name="L344"></a> 344             <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>.<a href="../D/28491.html" title="Multiple defined in 2 places.">onMalformedInput</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT);
<a id="L345" name="L345"></a> 345             <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>.<a href="../D/28496.html" title="Multiple defined in 2 places.">onUnmappableCharacter</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT);
<a id="L346" name="L346"></a> 346             cachedDecoder = <strong class="reserved">new</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2001.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetDecoder.java.">CharsetDecoder</a>&gt;(<a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>);
<a id="L347" name="L347"></a> 347         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L348" name="L348"></a> 348             <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L349" name="L349"></a> 349         <em class="brace">}</em>
<a id="L350" name="L350"></a> 350         <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> bb = <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a>.<a href="../D/36957.html" title="Multiple defined in 35 places.">wrap</a>(repl);
<a id="L351" name="L351"></a> 351         <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> cb = <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a>.<a href="../D/11296.html" title="Multiple defined in 10 places.">allocate</a>((<strong class="reserved">int</strong>)(bb.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>()
<a id="L352" name="L352"></a> 352                                                   * <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>.<a href="../S/2001.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetDecoder.java.">maxCharsPerByte</a>()));
<a id="L353" name="L353"></a> 353         <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> cr = <a href="../S/1118.html#L131" title="Defined at 131 in src/java/util/concurrent/ArrayBlockingQueue.java.">dec</a>.<a href="../D/14516.html" title="Multiple defined in 39 places.">decode</a>(bb, cb, <strong class="reserved">true</strong>);
<a id="L354" name="L354"></a> 354         <strong class="reserved">return</strong> !cr.<a href="../D/25516.html" title="Multiple defined in 2 places.">isError</a>();
<a id="L355" name="L355"></a> 355     <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358 
<div class="comment">
      Returns this encoder's current action for malformed-input errors.
      @return The current malformed-input action, which is never <tt>null</tt></div>
<a id="L364" name="L364"></a> 364     <strong class="reserved">public</strong> <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> <a href="../R/23030.html" title="Multiple referred from 9 places.">malformedInputAction</a>() <em class="brace">{</em>
<a id="L365" name="L365"></a> 365         <strong class="reserved">return</strong> <a href="../D/27428.html" title="Multiple defined in 2 places.">malformedInputAction</a>;
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<div class="comment">
      Changes this encoder's action for malformed-input errors.
      <p> This method invokes the {@link #implOnMalformedInput
      implOnMalformedInput} method, passing the new action.  </p>
      @param  newAction  The new action; must not be <tt>null</tt>
      @return  This encoder
      @throws IllegalArgumentException
              If the precondition on the parameter does not hold</div>
<a id="L381" name="L381"></a> 381     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2009.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetEncoder.java.">CharsetEncoder</a> <a href="../R/23952.html" title="Multiple referred from 12 places.">onMalformedInput</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> newAction) <em class="brace">{</em>
<a id="L382" name="L382"></a> 382         <strong class="reserved">if</strong> (newAction == <strong class="reserved">null</strong>)
<a id="L383" name="L383"></a> 383             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Null action");
<a id="L384" name="L384"></a> 384         <a href="../D/27428.html" title="Multiple defined in 2 places.">malformedInputAction</a> = newAction;
<a id="L385" name="L385"></a> 385         <a href="../D/24360.html" title="Multiple defined in 2 places.">implOnMalformedInput</a>(newAction);
<a id="L386" name="L386"></a> 386         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L387" name="L387"></a> 387     <em class="brace">}</em>
<a id="L388" name="L388"></a> 388 
<div class="comment">
      Reports a change to this encoder's malformed-input action.
      <p> The default implementation of this method does nothing.  This method
      should be overridden by encoders that require notification of changes to
      the malformed-input action.  </p>
      @param  newAction  The new action</div>
<a id="L398" name="L398"></a> 398     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20416.html" title="Multiple referred from 2 places.">implOnMalformedInput</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> newAction) <em class="brace">{</em> <em class="brace">}</em>
<a id="L399" name="L399"></a> 399 
<div class="comment">
      Returns this encoder's current action for unmappable-character errors.
      @return The current unmappable-character action, which is never
              <tt>null</tt></div>
<a id="L406" name="L406"></a> 406     <strong class="reserved">public</strong> <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> <a href="../R/29718.html" title="Multiple referred from 9 places.">unmappableCharacterAction</a>() <em class="brace">{</em>
<a id="L407" name="L407"></a> 407         <strong class="reserved">return</strong> <a href="../D/35924.html" title="Multiple defined in 2 places.">unmappableCharacterAction</a>;
<a id="L408" name="L408"></a> 408     <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<div class="comment">
      Changes this encoder's action for unmappable-character errors.
      <p> This method invokes the {@link #implOnUnmappableCharacter
      implOnUnmappableCharacter} method, passing the new action.  </p>
      @param  newAction  The new action; must not be <tt>null</tt>
      @return  This encoder
      @throws IllegalArgumentException
              If the precondition on the parameter does not hold</div>
<a id="L423" name="L423"></a> 423     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2009.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetEncoder.java.">CharsetEncoder</a> <a href="../R/23957.html" title="Multiple referred from 12 places.">onUnmappableCharacter</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>
<a id="L424" name="L424"></a> 424                                                       newAction)
<a id="L425" name="L425"></a> 425     <em class="brace">{</em>
<a id="L426" name="L426"></a> 426         <strong class="reserved">if</strong> (newAction == <strong class="reserved">null</strong>)
<a id="L427" name="L427"></a> 427             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Null action");
<a id="L428" name="L428"></a> 428         <a href="../D/35924.html" title="Multiple defined in 2 places.">unmappableCharacterAction</a> = newAction;
<a id="L429" name="L429"></a> 429         <a href="../D/24361.html" title="Multiple defined in 2 places.">implOnUnmappableCharacter</a>(newAction);
<a id="L430" name="L430"></a> 430         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L431" name="L431"></a> 431     <em class="brace">}</em>
<a id="L432" name="L432"></a> 432 
<div class="comment">
      Reports a change to this encoder's unmappable-character action.
      <p> The default implementation of this method does nothing.  This method
      should be overridden by encoders that require notification of changes to
      the unmappable-character action.  </p>
      @param  newAction  The new action</div>
<a id="L442" name="L442"></a> 442     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20417.html" title="Multiple referred from 2 places.">implOnUnmappableCharacter</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> newAction) <em class="brace">{</em> <em class="brace">}</em>
<a id="L443" name="L443"></a> 443 
<div class="comment">
      Returns the average number of bytes that will be produced for each
      character of input.  This heuristic value may be used to estimate the size
      of the output buffer required for a given input sequence.
      @return  The average number of bytes produced
               per character of input</div>
<a id="L452" name="L452"></a> 452     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> <a href="../R/10428.html" title="Multiple referred from 9 places.">averageBytesPerChar</a>() <em class="brace">{</em>
<a id="L453" name="L453"></a> 453         <strong class="reserved">return</strong> <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>;
<a id="L454" name="L454"></a> 454     <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Returns the maximum number of bytes that will be produced for each
      character of input.  This value may be used to compute the worst-case size
      of the output buffer required for a given input sequence.
      @return  The maximum number of bytes that will be produced per
               character of input</div>
<a id="L464" name="L464"></a> 464     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">float</strong> <a href="../R/23168.html" title="Multiple referred from 18 places.">maxBytesPerChar</a>() <em class="brace">{</em>
<a id="L465" name="L465"></a> 465         <strong class="reserved">return</strong> <a href="../S/2009.html#L464" title="Defined at 464 in src/java/nio/charset/CharsetEncoder.java.">maxBytesPerChar</a>;
<a id="L466" name="L466"></a> 466     <em class="brace">}</em>
<a id="L467" name="L467"></a> 467 
<div class="comment">
      Encodes as many characters as possible from the given input buffer,
      writing the results to the given output buffer.
      <p> The buffers are read from, and written to, starting at their current
      positions.  At most {@link Buffer#remaining in.remaining()} characters
      will be read and at most {@link Buffer#remaining out.remaining()}
      bytes will be written.  The buffers' positions will be advanced to
      reflect the characters read and the bytes written, but their marks and
      limits will not be modified.
      </p><p> In addition to reading characters from the input buffer and writing
      bytes to the output buffer, this method returns a <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>
      object to describe its reason for termination:
      </p><ul><li><p> {@link CoderResult#UNDERFLOW} indicates that as much of the
        input buffer as possible has been encoded.  If there is no further
        input then the invoker can proceed to the next step of the
        <a href="#steps">encoding operation</a>.  Otherwise this method
        should be invoked again with further input.  </p></li><li><p> {@link CoderResult#OVERFLOW} indicates that there is
        insufficient space in the output buffer to encode any more characters.
        This method should be invoked again with an output buffer that has
        more {@linkplain Buffer#remaining remaining} bytes. This is
        typically done by draining any encoded bytes from the output
        buffer.  </p></li><li><p> A {@linkplain CoderResult#malformedForLength
        malformed-input} result indicates that a malformed-input
        error has been detected.  The malformed characters begin at the input
        buffer's (possibly incremented) position; the number of malformed
        characters may be determined by invoking the result object's {@link
        CoderResult#length() length} method.  This case applies only if the
        {@linkplain #onMalformedInput malformed action} of this encoder
        is {@link CodingErrorAction#REPORT}; otherwise the malformed input
        will be ignored or replaced, as requested.  </p></li><li><p> An {@linkplain CoderResult#unmappableForLength
        unmappable-character} result indicates that an
        unmappable-character error has been detected.  The characters that
        encode the unmappable character begin at the input buffer's (possibly
        incremented) position; the number of such characters may be determined
        by invoking the result object's {@link CoderResult#length() length}
        method.  This case applies only if the {@linkplain #onUnmappableCharacter
        unmappable action} of this encoder is {@link
        CodingErrorAction#REPORT}; otherwise the unmappable character will be
        ignored or replaced, as requested.  </p></li>
      </ul>
      In any case, if this method is to be reinvoked in the same encoding
      operation then care should be taken to preserve any characters remaining
      in the input buffer so that they are available to the next invocation.
      <p> The <tt>endOfInput</tt> parameter advises this method as to whether
      the invoker can provide further input beyond that contained in the given
      input buffer.  If there is a possibility of providing additional input
      then the invoker should pass <tt>false</tt> for this parameter; if there
      is no possibility of providing further input then the invoker should
      pass <tt>true</tt>.  It is not erroneous, and in fact it is quite
      common, to pass <tt>false</tt> in one invocation and later discover that
      no further input was actually available.  It is critical, however, that
      the final invocation of this method in a sequence of invocations always
      pass <tt>true</tt> so that any remaining unencoded input will be treated
      as being malformed.
      </p><p> This method works by invoking the <a href="#L757" title="Defined at 757.">encodeLoop</a>
      method, interpreting its results, handling error conditions, and
      reinvoking it as necessary.  </p>
      @param  in
              The input character buffer
      @param  out
              The output byte buffer
      @param  endOfInput
              <tt>true</tt> if, and only if, the invoker can provide no
              additional input characters beyond those in the given buffer
      @return  A coder-result object describing the reason for termination
      @throws  IllegalStateException
               If an encoding operation is already in progress and the previous
               step was an invocation neither of the <a href="#L708" title="Defined at 708.">reset</a>
               method, nor of this method with a value of <tt>false</tt> for
               the <tt>endOfInput</tt> parameter, nor of this method with a
               value of <tt>true</tt> for the <tt>endOfInput</tt> parameter
               but a return value indicating an incomplete encoding operation
      @throws  CoderMalfunctionError
               If an invocation of the encodeLoop method threw
               an unexpected exception</div>
<a id="L566" name="L566"></a> 566     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> <a href="../R/13718.html" title="Multiple referred from 69 places.">encode</a>(<a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>,
<a id="L567" name="L567"></a> 567                                     <strong class="reserved">boolean</strong> endOfInput)
<a id="L568" name="L568"></a> 568     <em class="brace">{</em>
<a id="L569" name="L569"></a> 569         <strong class="reserved">int</strong> newState = endOfInput ? ST_END : ST_CODING;
<a id="L570" name="L570"></a> 570         <strong class="reserved">if</strong> ((<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> != ST_RESET) &amp;&amp; (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> != ST_CODING)
<a id="L571" name="L571"></a> 571             &amp;&amp; !(endOfInput &amp;&amp; (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == ST_END)))
<a id="L572" name="L572"></a> 572             <a href="../D/35298.html" title="Multiple defined in 2 places.">throwIllegalStateException</a>(<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>, newState);
<a id="L573" name="L573"></a> 573         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = newState;
<a id="L574" name="L574"></a> 574 
<a id="L575" name="L575"></a> 575         <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L576" name="L576"></a> 576 
<a id="L577" name="L577"></a> 577             <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> cr;
<a id="L578" name="L578"></a> 578             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L579" name="L579"></a> 579                 cr = <a href="../S/2009.html#L757" title="Defined at 757 in src/java/nio/charset/CharsetEncoder.java.">encodeLoop</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L580" name="L580"></a> 580             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1983.html#L40" title="Defined at 40 in src/java/nio/BufferUnderflowException.java.">BufferUnderflowException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/2004.html#L38" title="Defined at 38 in src/java/nio/charset/CoderMalfunctionError.java.">CoderMalfunctionError</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L582" name="L582"></a> 582             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/2015.html#L40" title="Defined at 40 in src/java/nio/BufferOverflowException.java.">BufferOverflowException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L583" name="L583"></a> 583                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/2004.html#L38" title="Defined at 38 in src/java/nio/charset/CoderMalfunctionError.java.">CoderMalfunctionError</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L584" name="L584"></a> 584             <em class="brace">}</em>
<a id="L585" name="L585"></a> 585 
<a id="L586" name="L586"></a> 586             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L128" title="Defined at 128 in src/java/nio/charset/CoderResult.java.">isOverflow</a>())
<a id="L587" name="L587"></a> 587                 <strong class="reserved">return</strong> cr;
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L119" title="Defined at 119 in src/java/nio/charset/CoderResult.java.">isUnderflow</a>()) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590                 <strong class="reserved">if</strong> (endOfInput &amp;&amp; <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../S/1990.html#L401" title="Defined at 401 in src/java/nio/Buffer.java.">hasRemaining</a>()) <em class="brace">{</em>
<a id="L591" name="L591"></a> 591                     cr = <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>.<a href="../S/2007.html#L235" title="Defined at 235 in src/java/nio/charset/CoderResult.java.">malformedForLength</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>());
<a id="L592" name="L592"></a> 592                     <em class="comment">// Fall through to malformed-input case</em>
<a id="L593" name="L593"></a> 593                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L594" name="L594"></a> 594                     <strong class="reserved">return</strong> cr;
<a id="L595" name="L595"></a> 595                 <em class="brace">}</em>
<a id="L596" name="L596"></a> 596             <em class="brace">}</em>
<a id="L597" name="L597"></a> 597 
<a id="L598" name="L598"></a> 598             <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <strong class="reserved">null</strong>;
<a id="L599" name="L599"></a> 599             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L148" title="Defined at 148 in src/java/nio/charset/CoderResult.java.">isMalformed</a>())
<a id="L600" name="L600"></a> 600                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/27428.html" title="Multiple defined in 2 places.">malformedInputAction</a>;
<a id="L601" name="L601"></a> 601             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L159" title="Defined at 159 in src/java/nio/charset/CoderResult.java.">isUnmappable</a>())
<a id="L602" name="L602"></a> 602                 <a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> = <a href="../D/35924.html" title="Multiple defined in 2 places.">unmappableCharacterAction</a>;
<a id="L603" name="L603"></a> 603             <strong class="reserved">else</strong>
<a id="L604" name="L604"></a> 604                 <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <strong class="reserved">false</strong> : cr.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L605" name="L605"></a> 605 
<a id="L606" name="L606"></a> 606             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT)
<a id="L607" name="L607"></a> 607                 <strong class="reserved">return</strong> cr;
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609             <strong class="reserved">if</strong> (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPLACE) <em class="brace">{</em>
<a id="L610" name="L610"></a> 610                 <strong class="reserved">if</strong> (<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>() &lt; <a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L611" name="L611"></a> 611                     <strong class="reserved">return</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>.OVERFLOW;
<a id="L612" name="L612"></a> 612                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/31077.html" title="Multiple defined in 2 places.">replacement</a>);
<a id="L613" name="L613"></a> 613             <em class="brace">}</em>
<a id="L614" name="L614"></a> 614 
<a id="L615" name="L615"></a> 615             <strong class="reserved">if</strong> ((<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.IGNORE)
<a id="L616" name="L616"></a> 616                 || (<a href="../D/10591.html" title="Multiple defined in 3 places.">action</a> == <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPLACE)) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617                 <em class="comment">// Skip erroneous input either way</em>
<a id="L618" name="L618"></a> 618                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>() + cr.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L619" name="L619"></a> 619                 <strong class="reserved">continue</strong>;
<a id="L620" name="L620"></a> 620             <em class="brace">}</em>
<a id="L621" name="L621"></a> 621 
<a id="L622" name="L622"></a> 622             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> <strong class="reserved">false</strong>;
<a id="L623" name="L623"></a> 623         <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<a id="L625" name="L625"></a> 625     <em class="brace">}</em>
<a id="L626" name="L626"></a> 626 
<div class="comment">
      Flushes this encoder.
      <p> Some encoders maintain internal state and may need to write some
      final bytes to the output buffer once the overall input sequence has
      been read.
      </p><p> Any additional output is written to the output buffer beginning at
      its current position.  At most {@link Buffer#remaining out.remaining()}
      bytes will be written.  The buffer's position will be advanced
      appropriately, but its mark and limit will not be modified.
      </p><p> If this method completes successfully then it returns {@link
      CoderResult#UNDERFLOW}.  If there is insufficient room in the output
      buffer then it returns {@link CoderResult#OVERFLOW}.  If this happens
      then this method must be invoked again, with an output buffer that has
      more room, in order to complete the current <a href="#steps">encoding
      operation</a>.
      </p><p> If this encoder has already been flushed then invoking this method
      has no effect.
      </p><p> This method invokes the <a href="#L694" title="Defined at 694.">implFlush</a> method to
      perform the actual flushing operation.  </p>
      @param  out
              The output byte buffer
      @return  A coder-result object, either {@link CoderResult#UNDERFLOW} or
               {@link CoderResult#OVERFLOW}
      @throws  IllegalStateException
               If the previous step of the current encoding operation was an
               invocation neither of the <a href="#L666" title="Defined at 666.">flush</a> method nor of
               the three-argument {@link
               #encode(CharBuffer,ByteBuffer,boolean) encode} method
               with a value of <tt>true</tt> for the <tt>endOfInput</tt>
               parameter</div>
<a id="L666" name="L666"></a> 666     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> <a href="../R/14697.html" title="Multiple referred from 199 places.">flush</a>(<a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667         <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == ST_END) <em class="brace">{</em>
<a id="L668" name="L668"></a> 668             <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> cr = <a href="../D/24358.html" title="Multiple defined in 2 places.">implFlush</a>(<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L669" name="L669"></a> 669             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L119" title="Defined at 119 in src/java/nio/charset/CoderResult.java.">isUnderflow</a>())
<a id="L670" name="L670"></a> 670                 <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = ST_FLUSHED;
<a id="L671" name="L671"></a> 671             <strong class="reserved">return</strong> cr;
<a id="L672" name="L672"></a> 672         <em class="brace">}</em>
<a id="L673" name="L673"></a> 673 
<a id="L674" name="L674"></a> 674         <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> != ST_FLUSHED)
<a id="L675" name="L675"></a> 675             <a href="../D/35298.html" title="Multiple defined in 2 places.">throwIllegalStateException</a>(<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>, ST_FLUSHED);
<a id="L676" name="L676"></a> 676 
<a id="L677" name="L677"></a> 677         <strong class="reserved">return</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>.UNDERFLOW; <em class="comment">// Already flushed</em>
<a id="L678" name="L678"></a> 678     <em class="brace">}</em>
<a id="L679" name="L679"></a> 679 
<div class="comment">
      Flushes this encoder.
      <p> The default implementation of this method does nothing, and always
      returns {@link CoderResult#UNDERFLOW}.  This method should be overridden
      by encoders that may need to write final bytes to the output buffer
      once the entire input sequence has been read. </p>
      @param  out
              The output byte buffer
      @return  A coder-result object, either {@link CoderResult#UNDERFLOW} or
               {@link CoderResult#OVERFLOW}</div>
<a id="L694" name="L694"></a> 694     <strong class="reserved">protected</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> <a href="../R/20414.html" title="Multiple referred from 2 places.">implFlush</a>(<a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695         <strong class="reserved">return</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>.UNDERFLOW;
<a id="L696" name="L696"></a> 696     <em class="brace">}</em>
<a id="L697" name="L697"></a> 697 
<div class="comment">
      Resets this encoder, clearing any internal state.
      <p> This method resets charset-independent state and also invokes the
      {@link #implReset() implReset} method in order to perform any
      charset-specific reset actions.  </p>
      @return  This encoder</div>
<a id="L708" name="L708"></a> 708     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2009.html#L137" title="Defined at 137 in src/java/nio/charset/CharsetEncoder.java.">CharsetEncoder</a> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <em class="brace">{</em>
<a id="L709" name="L709"></a> 709         <a href="../D/24370.html" title="Multiple defined in 2 places.">implReset</a>();
<a id="L710" name="L710"></a> 710         <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = ST_RESET;
<a id="L711" name="L711"></a> 711         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L712" name="L712"></a> 712     <em class="brace">}</em>
<a id="L713" name="L713"></a> 713 
<div class="comment">
      Resets this encoder, clearing any charset-specific internal state.
      <p> The default implementation of this method does nothing.  This method
      should be overridden by encoders that maintain internal state.  </p></div>
<a id="L720" name="L720"></a> 720     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20426.html" title="Multiple referred from 2 places.">implReset</a>() <em class="brace">{</em> <em class="brace">}</em>
<a id="L721" name="L721"></a> 721 
<div class="comment">
      Encodes one or more characters into one or more bytes.
      <p> This method encapsulates the basic encoding loop, encoding as many
      characters as possible until it either runs out of input, runs out of room
      in the output buffer, or encounters an encoding error.  This method is
      invoked by the <a href="#L566" title="Defined at 566.">encode</a> method, which handles result
      interpretation and error recovery.
      </p><p> The buffers are read from, and written to, starting at their current
      positions.  At most {@link Buffer#remaining in.remaining()} characters
      will be read, and at most {@link Buffer#remaining out.remaining()}
      bytes will be written.  The buffers' positions will be advanced to
      reflect the characters read and the bytes written, but their marks and
      limits will not be modified.
      </p><p> This method returns a <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> object to describe its
      reason for termination, in the same manner as the <a href="#L566" title="Defined at 566.">encode</a>
      method.  Most implementations of this method will handle encoding errors
      by returning an appropriate result object for interpretation by the
      <a href="#L566" title="Defined at 566.">encode</a> method.  An optimized implementation may instead
      examine the relevant error action and implement that action itself.
      </p><p> An implementation of this method may perform arbitrary lookahead by
      returning {@link CoderResult#UNDERFLOW} until it receives sufficient
      input.  </p>
      @param  in
              The input character buffer
      @param  out
              The output byte buffer
      @return  A coder-result object describing the reason for termination</div>
<a id="L757" name="L757"></a> 757     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> <a href="../S/2009.html#L579" title="Referred from 579 in src/java/nio/charset/CharsetEncoder.java.">encodeLoop</a>(<a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>,
<a id="L758" name="L758"></a> 758                                               <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L759" name="L759"></a> 759 
<div class="comment">
      Convenience method that encodes the remaining content of a single input
      character buffer into a newly-allocated byte buffer.
      <p> This method implements an entire <a href="#steps">encoding
      operation</a>; that is, it resets this encoder, then it encodes the
      characters in the given character buffer, and finally it flushes this
      encoder.  This method should therefore not be invoked if an encoding
      operation is already in progress.  </p>
      @param  in
              The input character buffer
      @return A newly-allocated byte buffer containing the result of the
              encoding operation.  The buffer's position will be zero and its
              limit will follow the last byte written.
      @throws  IllegalStateException
               If an encoding operation is already in progress
      @throws  MalformedInputException
               If the character sequence starting at the input buffer's current
               position is not a legal sixteen-bit Unicode sequence and the current malformed-input action
               is {@link CodingErrorAction#REPORT}
      @throws  UnmappableCharacterException
               If the character sequence starting at the input buffer's current
               position cannot be mapped to an equivalent byte sequence and
               the current unmappable-character action is {@link
               CodingErrorAction#REPORT}</div>
<a id="L791" name="L791"></a> 791     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../R/13718.html" title="Multiple referred from 69 places.">encode</a>(<a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>)
<a id="L792" name="L792"></a> 792         <strong class="reserved">throws</strong> <a href="../S/2003.html#L40" title="Defined at 40 in src/java/nio/charset/CharacterCodingException.java.">CharacterCodingException</a>
<a id="L793" name="L793"></a> 793     <em class="brace">{</em>
<a id="L794" name="L794"></a> 794         <strong class="reserved">int</strong> n = (<strong class="reserved">int</strong>)(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>() * <a href="../S/2009.html#L452" title="Defined at 452 in src/java/nio/charset/CharsetEncoder.java.">averageBytesPerChar</a>());
<a id="L795" name="L795"></a> 795         <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a> = <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a>.<a href="../D/11296.html" title="Multiple defined in 10 places.">allocate</a>(n);
<a id="L796" name="L796"></a> 796 
<a id="L797" name="L797"></a> 797         <strong class="reserved">if</strong> ((n == 0) &amp;&amp; (<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>() == 0))
<a id="L798" name="L798"></a> 798             <strong class="reserved">return</strong> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>;
<a id="L799" name="L799"></a> 799         <a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L800" name="L800"></a> 800         <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801             <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a> cr = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../S/1990.html#L401" title="Defined at 401 in src/java/nio/Buffer.java.">hasRemaining</a>() ?
<a id="L802" name="L802"></a> 802                 <a href="../D/15393.html" title="Multiple defined in 39 places.">encode</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>, <strong class="reserved">true</strong>) : <a href="../S/2007.html#L85" title="Defined at 85 in src/java/nio/charset/CoderResult.java.">CoderResult</a>.UNDERFLOW;
<a id="L803" name="L803"></a> 803             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L119" title="Defined at 119 in src/java/nio/charset/CoderResult.java.">isUnderflow</a>())
<a id="L804" name="L804"></a> 804                 cr = <a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>(<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L805" name="L805"></a> 805 
<a id="L806" name="L806"></a> 806             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L119" title="Defined at 119 in src/java/nio/charset/CoderResult.java.">isUnderflow</a>())
<a id="L807" name="L807"></a> 807                 <strong class="reserved">break</strong>;
<a id="L808" name="L808"></a> 808             <strong class="reserved">if</strong> (cr.<a href="../S/2007.html#L128" title="Defined at 128 in src/java/nio/charset/CoderResult.java.">isOverflow</a>()) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809                 n = 2*n + 1;    <em class="comment">// Ensure progress; n might be 0!</em>
<a id="L810" name="L810"></a> 810                 <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/1042.html" title="Multiple defined in 2 places.">ByteBuffer</a>.<a href="../D/11296.html" title="Multiple defined in 10 places.">allocate</a>(n);
<a id="L811" name="L811"></a> 811                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/16458.html" title="Multiple defined in 3 places.">flip</a>();
<a id="L812" name="L812"></a> 812                 <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>);
<a id="L813" name="L813"></a> 813                 <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a> = <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>;
<a id="L814" name="L814"></a> 814                 <strong class="reserved">continue</strong>;
<a id="L815" name="L815"></a> 815             <em class="brace">}</em>
<a id="L816" name="L816"></a> 816             cr.<a href="../D/35296.html" title="Multiple defined in 6 places.">throwException</a>();
<a id="L817" name="L817"></a> 817         <em class="brace">}</em>
<a id="L818" name="L818"></a> 818         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/16458.html" title="Multiple defined in 3 places.">flip</a>();
<a id="L819" name="L819"></a> 819         <strong class="reserved">return</strong> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>;
<a id="L820" name="L820"></a> 820     <em class="brace">}</em>
<a id="L821" name="L821"></a> 821 
<a id="L822" name="L822"></a> 822 
<a id="L823" name="L823"></a> 823 
<a id="L824" name="L824"></a> 824 
<a id="L825" name="L825"></a> 825 
<a id="L826" name="L826"></a> 826 
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828 
<a id="L829" name="L829"></a> 829 
<a id="L830" name="L830"></a> 830 
<a id="L831" name="L831"></a> 831 
<a id="L832" name="L832"></a> 832 
<a id="L833" name="L833"></a> 833 
<a id="L834" name="L834"></a> 834 
<a id="L835" name="L835"></a> 835 
<a id="L836" name="L836"></a> 836 
<a id="L837" name="L837"></a> 837 
<a id="L838" name="L838"></a> 838 
<a id="L839" name="L839"></a> 839 
<a id="L840" name="L840"></a> 840 
<a id="L841" name="L841"></a> 841 
<a id="L842" name="L842"></a> 842 
<a id="L843" name="L843"></a> 843 
<a id="L844" name="L844"></a> 844 
<a id="L845" name="L845"></a> 845 
<a id="L846" name="L846"></a> 846 
<a id="L847" name="L847"></a> 847 
<a id="L848" name="L848"></a> 848 
<a id="L849" name="L849"></a> 849 
<a id="L850" name="L850"></a> 850 
<a id="L851" name="L851"></a> 851 
<a id="L852" name="L852"></a> 852 
<a id="L853" name="L853"></a> 853 
<a id="L854" name="L854"></a> 854 
<a id="L855" name="L855"></a> 855 
<a id="L856" name="L856"></a> 856 
<a id="L857" name="L857"></a> 857 
<a id="L858" name="L858"></a> 858 
<a id="L859" name="L859"></a> 859 
<a id="L860" name="L860"></a> 860 
<a id="L861" name="L861"></a> 861 
<a id="L862" name="L862"></a> 862 
<a id="L863" name="L863"></a> 863 
<a id="L864" name="L864"></a> 864 
<a id="L865" name="L865"></a> 865 
<a id="L866" name="L866"></a> 866 
<a id="L867" name="L867"></a> 867 
<a id="L868" name="L868"></a> 868 
<a id="L869" name="L869"></a> 869 
<a id="L870" name="L870"></a> 870 
<a id="L871" name="L871"></a> 871 
<a id="L872" name="L872"></a> 872 
<a id="L873" name="L873"></a> 873 
<a id="L874" name="L874"></a> 874 
<a id="L875" name="L875"></a> 875 
<a id="L876" name="L876"></a> 876 
<a id="L877" name="L877"></a> 877 
<a id="L878" name="L878"></a> 878 
<a id="L879" name="L879"></a> 879 
<a id="L880" name="L880"></a> 880 
<a id="L881" name="L881"></a> 881 
<a id="L882" name="L882"></a> 882 
<a id="L883" name="L883"></a> 883 
<a id="L884" name="L884"></a> 884 
<a id="L885" name="L885"></a> 885 
<a id="L886" name="L886"></a> 886 
<a id="L887" name="L887"></a> 887 
<a id="L888" name="L888"></a> 888 
<a id="L889" name="L889"></a> 889 
<a id="L890" name="L890"></a> 890 
<a id="L891" name="L891"></a> 891 
<a id="L892" name="L892"></a> 892 
<a id="L893" name="L893"></a> 893 
<a id="L894" name="L894"></a> 894 
<a id="L895" name="L895"></a> 895 
<a id="L896" name="L896"></a> 896 
<a id="L897" name="L897"></a> 897 
<a id="L898" name="L898"></a> 898 
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/10883.html" title="Multiple referred from 5 places.">canEncode</a>(<a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> cb) <em class="brace">{</em>
<a id="L901" name="L901"></a> 901         <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> == ST_FLUSHED)
<a id="L902" name="L902"></a> 902             <a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L903" name="L903"></a> 903         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> != ST_RESET)
<a id="L904" name="L904"></a> 904             <a href="../D/35298.html" title="Multiple defined in 2 places.">throwIllegalStateException</a>(<a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>, ST_CODING);
<a id="L905" name="L905"></a> 905         <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> ma = <a href="../D/27428.html" title="Multiple defined in 2 places.">malformedInputAction</a>();
<a id="L906" name="L906"></a> 906         <a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a> ua = <a href="../D/35924.html" title="Multiple defined in 2 places.">unmappableCharacterAction</a>();
<a id="L907" name="L907"></a> 907         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L908" name="L908"></a> 908             <a href="../D/28491.html" title="Multiple defined in 2 places.">onMalformedInput</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT);
<a id="L909" name="L909"></a> 909             <a href="../D/28496.html" title="Multiple defined in 2 places.">onUnmappableCharacter</a>(<a href="../S/2013.html#L43" title="Defined at 43 in src/java/nio/charset/CodingErrorAction.java.">CodingErrorAction</a>.REPORT);
<a id="L910" name="L910"></a> 910             <a href="../D/15393.html" title="Multiple defined in 39 places.">encode</a>(cb);
<a id="L911" name="L911"></a> 911         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/2003.html#L40" title="Defined at 40 in src/java/nio/charset/CharacterCodingException.java.">CharacterCodingException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L912" name="L912"></a> 912             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L913" name="L913"></a> 913         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L914" name="L914"></a> 914             <a href="../D/28491.html" title="Multiple defined in 2 places.">onMalformedInput</a>(ma);
<a id="L915" name="L915"></a> 915             <a href="../D/28496.html" title="Multiple defined in 2 places.">onUnmappableCharacter</a>(ua);
<a id="L916" name="L916"></a> 916             <a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L917" name="L917"></a> 917         <em class="brace">}</em>
<a id="L918" name="L918"></a> 918         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L919" name="L919"></a> 919     <em class="brace">}</em>
<a id="L920" name="L920"></a> 920 
<div class="comment">
      Tells whether or not this encoder can encode the given character.
      <p> This method returns <tt>false</tt> if the given character is a
      surrogate character; such characters can be interpreted only when they
      are members of a pair consisting of a high surrogate followed by a low
      surrogate.  The {@link #canEncode(java.lang.CharSequence)
      canEncode(CharSequence)} method may be used to test whether or not a
      character sequence can be encoded.
      </p><p> This method may modify this encoder's state; it should therefore not
      be invoked if an <a href="#steps">encoding operation</a> is already in
      progress.
      </p><p> The default implementation of this method is not very efficient; it
      should generally be overridden to improve performance.  </p>
      @param   c
               The given character
      @return  <tt>true</tt> if, and only if, this encoder can encode
               the given character
      @throws  IllegalStateException
               If an encoding operation is already in progress</div>
<a id="L947" name="L947"></a> 947     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/10883.html" title="Multiple referred from 5 places.">canEncode</a>(<strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L948" name="L948"></a> 948         <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> cb = <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a>.<a href="../D/11296.html" title="Multiple defined in 10 places.">allocate</a>(1);
<a id="L949" name="L949"></a> 949         cb.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L950" name="L950"></a> 950         cb.<a href="../D/16458.html" title="Multiple defined in 3 places.">flip</a>();
<a id="L951" name="L951"></a> 951         <strong class="reserved">return</strong> <a href="../D/12141.html" title="Multiple defined in 4 places.">canEncode</a>(cb);
<a id="L952" name="L952"></a> 952     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953 
<div class="comment">
      Tells whether or not this encoder can encode the given character
      sequence.
      <p> If this method returns <tt>false</tt> for a particular character
      sequence then more information about why the sequence cannot be encoded
      may be obtained by performing a full <a href="#steps">encoding
      operation</a>.
      </p><p> This method may modify this encoder's state; it should therefore not
      be invoked if an encoding operation is already in progress.
      </p><p> The default implementation of this method is not very efficient; it
      should generally be overridden to improve performance.  </p>
      @param   cs
               The given character sequence
      @return  <tt>true</tt> if, and only if, this encoder can encode
               the given character without throwing any exceptions and without
               performing any replacements
      @throws  IllegalStateException
               If an encoding operation is already in progress</div>
<a id="L979" name="L979"></a> 979     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/10883.html" title="Multiple referred from 5 places.">canEncode</a>(<a href="../S/1675.html#L59" title="Defined at 59 in src/java/lang/CharSequence.java.">CharSequence</a> cs) <em class="brace">{</em>
<a id="L980" name="L980"></a> 980         <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a> cb;
<a id="L981" name="L981"></a> 981         <strong class="reserved">if</strong> (cs <strong class="reserved">instanceof</strong> <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a>)
<a id="L982" name="L982"></a> 982             cb = ((<a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a>)cs).<a href="../D/15264.html" title="Multiple defined in 80 places.">duplicate</a>();
<a id="L983" name="L983"></a> 983         <strong class="reserved">else</strong>
<a id="L984" name="L984"></a> 984             cb = <a href="../S/1855.html#L262" title="Defined at 262 in src/java/nio/CharBuffer.java.">CharBuffer</a>.<a href="../D/36957.html" title="Multiple defined in 35 places.">wrap</a>(cs.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L985" name="L985"></a> 985         <strong class="reserved">return</strong> <a href="../D/12141.html" title="Multiple defined in 4 places.">canEncode</a>(cb);
<a id="L986" name="L986"></a> 986     <em class="brace">}</em>
<a id="L987" name="L987"></a> 987 
<a id="L988" name="L988"></a> 988 
<a id="L989" name="L989"></a> 989 
<a id="L990" name="L990"></a> 990 
<a id="L991" name="L991"></a> 991     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/29174.html" title="Multiple referred from 5 places.">throwIllegalStateException</a>(<strong class="reserved">int</strong> <a href="../D/16586.html" title="Multiple defined in 37 places.">from</a>, <strong class="reserved">int</strong> <a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Current state = " + stateNames[<a href="../D/16586.html" title="Multiple defined in 37 places.">from</a>]
<a id="L993" name="L993"></a> 993                                         + ", new state = " + stateNames[<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>]);
<a id="L994" name="L994"></a> 994     <em class="brace">}</em>
<a id="L995" name="L995"></a> 995 
<a id="L996" name="L996"></a> 996 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L243">[^]</a><a href="#L991">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
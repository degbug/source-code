<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/lang/invoke/MethodType.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L125">[^]</a><a href="#L1298">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L125" title="Defined at 125.">form</a></li>
<li><a href="#L126" title="Defined at 126.">rtype</a></li>
<li><a href="#L127" title="Defined at 127.">ptypes</a></li>
<li><a href="#L129" title="Defined at 129.">setForm</a></li>
<li><a href="#L161" title="Defined at 161.">checkRtype</a></li>
<li><a href="#L164" title="Defined at 164.">checkPtype</a></li>
<li><a href="#L170" title="Defined at 170.">checkPtypes</a></li>
<li><a href="#L181" title="Defined at 181.">checkSlotCount</a></li>
<li><a href="#L187" title="Defined at 187.">newIndexOutOfBoundsException</a></li>
<li><a href="#L205" title="Defined at 205.">methodType</a></li>
<li><a href="#L219" title="Defined at 219.">methodType</a></li>
<li><a href="#L224" title="Defined at 224.">listToArray</a></li>
<li><a href="#L242" title="Defined at 242.">methodType</a></li>
<li><a href="#L258" title="Defined at 258.">methodType</a></li>
<li><a href="#L273" title="Defined at 273.">methodType</a></li>
<li><a href="#L288" title="Defined at 288.">methodType</a></li>
<li><a href="#L300" title="Defined at 300.">makeImpl</a></li>
<li><a href="#L326" title="Defined at 326.">genericMethodType</a></li>
<li><a href="#L355" title="Defined at 355.">genericMethodType</a></li>
<li><a href="#L369" title="Defined at 369.">changeParameterType</a></li>
<li><a href="#L388" title="Defined at 388.">insertParameterTypes</a></li>
<li><a href="#L411" title="Defined at 411.">appendParameterTypes</a></li>
<li><a href="#L426" title="Defined at 426.">insertParameterTypes</a></li>
<li><a href="#L439" title="Defined at 439.">appendParameterTypes</a></li>
<li><a href="#L457" title="Defined at 457.">replaceParameterTypes</a></li>
<li><a href="#L474" title="Defined at 474.">asSpreaderType</a></li>
<li><a href="#L490" title="Defined at 490.">assert</a></li>
<li><a href="#L504" title="Defined at 504.">leadingReferenceParameter</a></li>
<li><a href="#L517" title="Defined at 517.">asCollectorType</a></li>
<li><a href="#L548" title="Defined at 548.">dropParameterTypes</a></li>
<li><a href="#L582" title="Defined at 582.">changeReturnType</a></li>
<li><a href="#L592" title="Defined at 592.">hasPrimitives</a></li>
<li><a href="#L603" title="Defined at 603.">hasWrappers</a></li>
<li><a href="#L613" title="Defined at 613.">erase</a></li>
<li><a href="#L623" title="Defined at 623.">basicType</a></li>
<li><a href="#L630" title="Defined at 630.">invokerType</a></li>
<li><a href="#L641" title="Defined at 641.">generic</a></li>
<li><a href="#L645" title="Defined at 645.">isGeneric</a></li>
<li><a href="#L658" title="Defined at 658.">wrap</a></li>
<li><a href="#L669" title="Defined at 669.">unwrap</a></li>
<li><a href="#L674" title="Defined at 674.">wrapWithPrims</a></li>
<li><a href="#L686" title="Defined at 686.">unwrapWithNoPrims</a></li>
<li><a href="#L705" title="Defined at 705.">parameterType</a></li>
<li><a href="#L712" title="Defined at 712.">parameterCount</a></li>
<li><a href="#L719" title="Defined at 719.">returnType</a></li>
<li><a href="#L728" title="Defined at 728.">parameterList</a></li>
<li><a href="#L732" title="Defined at 732.">lastParameterType</a></li>
<li><a href="#L742" title="Defined at 742.">parameterArray</a></li>
<li><a href="#L754" title="Defined at 754.">equals</a></li>
<li><a href="#L758" title="Defined at 758.">equals</a></li>
<li><a href="#L774" title="Defined at 774.">hashCode</a></li>
<li><a href="#L792" title="Defined at 792.">toString</a></li>
<li><a href="#L808" title="Defined at 808.">isViewableAs</a></li>
<li><a href="#L815" title="Defined at 815.">parametersAreViewableAs</a></li>
<li><a href="#L830" title="Defined at 830.">isConvertibleTo</a></li>
<li><a href="#L864" title="Defined at 864.">explicitCastEquivalentToAsType</a></li>
<li><a href="#L897" title="Defined at 897.">explicitCastEquivalentToAsType</a></li>
<li><a href="#L912" title="Defined at 912.">canConvertParameters</a></li>
<li><a href="#L922" title="Defined at 922.">canConvert</a></li>
<li><a href="#L986" title="Defined at 986.">parameterSlotCount</a></li>
<li><a href="#L990" title="Defined at 990.">invokers</a></li>
<li><a href="#L1020" title="Defined at 1020.">parameterSlotDepth</a></li>
<li><a href="#L1036" title="Defined at 1036.">returnSlotCount</a></li>
<li><a href="#L1060" title="Defined at 1060.">fromMethodDescriptorString</a></li>
<li><a href="#L1087" title="Defined at 1087.">toMethodDescriptorString</a></li>
<li><a href="#L1096" title="Defined at 1096.">toFieldDescriptorString</a></li>
<li><a href="#L1127" title="Defined at 1127.">writeObject</a></li>
<li><a href="#L1147" title="Defined at 1147.">readObject</a></li>
<li><a href="#L1166" title="Defined at 1166.">MethodType</a></li>
<li><a href="#L1170" title="Defined at 1170.">MethodType_init</a></li>
<li><a href="#L1197" title="Defined at 1197.">readResolve</a></li>
<li><a href="#L1226" title="Defined at 1226.">get</a></li>
<li><a href="#L1249" title="Defined at 1249.">add</a></li>
<li><a href="#L1266" title="Defined at 1266.">expungeStaleElements</a></li>
<li><a href="#L1288" title="Defined at 1288.">equals</a></li>
<li><a href="#L1298" title="Defined at 1298.">hashCode</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2008, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> sun.invoke.util.Wrapper;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.lang.ref.WeakReference;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.lang.ref.Reference;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.lang.ref.ReferenceQueue;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.Arrays;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.Collections;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.List;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Objects;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentMap;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.concurrent.ConcurrentHashMap;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> sun.invoke.util.BytecodeDescriptor;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> static java.lang.invoke.MethodHandleStatics.*;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> sun.invoke.util.VerifyType;
<a id="L41" name="L41"></a>  41 
<div class="comment">
  A method type represents the arguments and return type accepted and
  returned by a method handle, or the arguments and return type passed
  and expected  by a method handle caller.  Method types must be properly
  matched between a method handle and all its callers,
  and the JVM's operations enforce this matching at, specifically
  during calls to {@link MethodHandle#invokeExact MethodHandle.invokeExact}
  and {@link MethodHandle#invoke MethodHandle.invoke}, and during execution
  of <code>invokedynamic</code> instructions.
  <p>
  The structure is a return type accompanied by any number of parameter types.
  The types (primitive, <code>void</code>, and reference) are represented by {@link Class} objects.
  (For ease of exposition, we treat <code>void</code> as if it were a type.
  In fact, it denotes the absence of a return type.)
  </p><p>
  All instances of <code>MethodType</code> are immutable.
  Two instances are completely interchangeable if they compare equal.
  Equality depends on pairwise correspondence of the return and parameter types and on nothing else.
  </p><p>
  This type can be created only by factory methods.
  All factory methods may cache values, though caching is not guaranteed.
  Some factory methods are static, while others are virtual methods which
  modify precursor method types, e.g., by changing a selected parameter.
  </p><p>
  Factory methods which operate on groups of parameter types
  are systematically presented in two versions, so that both Java arrays and
  Java lists can be used to work with groups of parameter types.
  The query methods <code>parameterArray</code> and <code>parameterList</code>
  also provide a choice between arrays and lists.
  </p><p>
  <code>MethodType</code> objects are sometimes derived from bytecode instructions
  such as <code>invokedynamic</code>, specifically from the type descriptor strings associated
  with the instructions in a class file's constant pool.
  </p><p>
  Like classes and strings, method types can also be represented directly
  in a class file's constant pool as constants.
  A method type may be loaded by an <code>ldc</code> instruction which refers
  to a suitable <code>CONSTANT_MethodType</code> constant pool entry.
  The entry refers to a <code>CONSTANT_Utf8</code> spelling for the descriptor string.
  (For full details on method type constants,
  see sections 4.4.8 and 5.4.3.5 of the Java Virtual Machine Specification.)
  </p><p>
  When the JVM materializes a <code>MethodType</code> from a descriptor string,
  all classes named in the descriptor must be accessible, and will be loaded.
  (But the classes need not be initialized, as is the case with a <code>CONSTANT_Class</code>.)
  This loading may occur at any time before the <code>MethodType</code> object is first derived.
  @author John Rose, JSR 292 EG</p></div>
<a id="L90" name="L90"></a>  90 <strong class="reserved">public</strong> <strong class="reserved">final</strong>
<a id="L91" name="L91"></a>  91 <strong class="reserved">class</strong> <a href="../R/5129.html" title="Multiple referred from 496 places.">MethodType</a> <strong class="reserved">implements</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L92" name="L92"></a>  92     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 292L;  <em class="comment">// {rtype, {ptype...}}</em>
<a id="L93" name="L93"></a>  93 
<a id="L94" name="L94"></a>  94     <em class="comment">// The rtype and ptypes fields define the structural identity of the method type:</em>
<a id="L95" name="L95"></a>  95     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;   <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>;
<a id="L96" name="L96"></a>  96     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>;
<a id="L97" name="L97"></a>  97 
<a id="L98" name="L98"></a>  98     <em class="comment">// The remaining fields are caches of various sorts:</em>
<a id="L99" name="L99"></a>  99     <strong class="reserved">private</strong> @<a href="../S/1628.html#L72" title="Defined at 72 in src/java/lang/invoke/Stable.java.">Stable</a> <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>; <em class="comment">// erased form, plus cached data about primitives</em>
<a id="L100" name="L100"></a> 100     <strong class="reserved">private</strong> @<a href="../S/1628.html#L72" title="Defined at 72 in src/java/lang/invoke/Stable.java.">Stable</a> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> wrapAlt;  <em class="comment">// alternative wrapped/unwrapped version</em>
<a id="L101" name="L101"></a> 101     <strong class="reserved">private</strong> @<a href="../S/1628.html#L72" title="Defined at 72 in src/java/lang/invoke/Stable.java.">Stable</a> <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a> <a href="../S/1616.html#L990" title="Defined at 990 in src/java/lang/invoke/MethodType.java.">invokers</a>;   <em class="comment">// cache of handy higher-order adapters</em>
<a id="L102" name="L102"></a> 102     <strong class="reserved">private</strong> @<a href="../S/1628.html#L72" title="Defined at 72 in src/java/lang/invoke/Stable.java.">Stable</a> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> methodDescriptor;  <em class="comment">// cache for toMethodDescriptorString</em>
<a id="L103" name="L103"></a> 103 
<div class="comment">
      Check the given parameters for validity and store them into the final fields.</div>
<a id="L107" name="L107"></a> 107     <strong class="reserved">private</strong> MethodType(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">boolean</strong> trusted) <em class="brace">{</em>
<a id="L108" name="L108"></a> 108         <a href="../S/1616.html#L161" title="Defined at 161 in src/java/lang/invoke/MethodType.java.">checkRtype</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>);
<a id="L109" name="L109"></a> 109         <a href="../S/1616.html#L170" title="Defined at 170 in src/java/lang/invoke/MethodType.java.">checkPtypes</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>);
<a id="L110" name="L110"></a> 110         <strong class="reserved">this</strong>.<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> = <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>;
<a id="L111" name="L111"></a> 111         <em class="comment">// defensively copy the array passed in by the user</em>
<a id="L112" name="L112"></a> 112         <strong class="reserved">this</strong>.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> = trusted ? <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> : <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13512.html" title="Multiple defined in 12 places.">copyOf</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L113" name="L113"></a> 113     <em class="brace">}</em>
<a id="L114" name="L114"></a> 114 
<div class="comment">
      Construct a temporary unchecked instance of MethodType for use only as a key to the intern table.
      Does not check the given parameters for validity, and must be discarded after it is used as a searching key.
      The parameters are reversed for this constructor, so that is is not accidentally used.</div>
<a id="L120" name="L120"></a> 120     <strong class="reserved">private</strong> MethodType(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>) <em class="brace">{</em>
<a id="L121" name="L121"></a> 121         <strong class="reserved">this</strong>.<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> = <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>;
<a id="L122" name="L122"></a> 122         <strong class="reserved">this</strong>.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>;
<a id="L123" name="L123"></a> 123     <em class="brace">}</em>
<a id="L124" name="L124"></a> 124 
<div class="comment">
     /*trusted*/</div> <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a> <a href="../R/14746.html" title="Multiple referred from 317 places.">form</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>; <em class="brace">}</em>
<div class="comment">
     /*trusted*/</div> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/26538.html" title="Multiple referred from 109 places.">rtype</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>; <em class="brace">}</em>
<div class="comment">
     /*trusted*/</div> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>() <em class="brace">{</em> <strong class="reserved">return</strong> <a href="../R/25241.html" title="Multiple referred from 95 places.">ptypes</a>; <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129     <strong class="reserved">void</strong> setForm(<a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a> f) <em class="brace">{</em> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a> = f; <em class="brace">}</em>
<a id="L130" name="L130"></a> 130 
<div class="comment">
 This number, mandated by the JVM spec as 255,
       is the maximum number of <em>slots</em>
       that any Java method can receive in its argument list.
       It limits both JVM signatures and method type objects.
       The longest possible invocation will look like
       <code>staticMethod(arg1, arg2, ..., arg255)</code> or
       <code>x.virtualMethod(arg1, arg2, ..., arg254)</code>.</div>
<div class="comment">
     /*non-public*/</div> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_JVM_ARITY = 255;  <em class="comment">// this is mandated by the JVM spec.</em>
<a id="L140" name="L140"></a> 140 
<div class="comment">
 This number is the maximum arity of a method handle, 254.
       It is derived from the absolute JVM-imposed arity by subtracting one,
       which is the slot occupied by the method handle itself at the
       beginning of the argument list used to invoke the method handle.
       The longest possible invocation will look like
       <code>mh.invoke(arg1, arg2, ..., arg254)</code>.</div>
<a id="L148" name="L148"></a> 148     <em class="comment">// Issue:  Should we allow MH.invokeWithArguments to go to the full 255?</em>
<div class="comment">
     /*non-public*/</div> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_MH_ARITY = MAX_JVM_ARITY-1;  <em class="comment">// deduct one for mh receiver</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
 This number is the maximum arity of a method handle invoker, 253.
       It is derived from the absolute JVM-imposed arity by subtracting two,
       which are the slots occupied by invoke method handle, and the
       target method handle, which are both at the beginning of the argument
       list used to invoke the target method handle.
       The longest possible invocation will look like
       <code>invokermh.invoke(targetmh, arg1, arg2, ..., arg253)</code>.</div>
<div class="comment">
     /*non-public*/</div> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_MH_INVOKER_ARITY = MAX_MH_ARITY-1;  <em class="comment">// deduct one more for invoker</em>
<a id="L160" name="L160"></a> 160 
<a id="L161" name="L161"></a> 161     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11339.html" title="Multiple referred from 3 places.">checkRtype</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>) <em class="brace">{</em>
<a id="L162" name="L162"></a> 162         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>);
<a id="L163" name="L163"></a> 163     <em class="brace">}</em>
<a id="L164" name="L164"></a> 164     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11310.html" title="Multiple referred from 2 places.">checkPtype</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ptype) <em class="brace">{</em>
<a id="L165" name="L165"></a> 165         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(ptype);
<a id="L166" name="L166"></a> 166         <strong class="reserved">if</strong> (ptype == <strong class="reserved">void</strong>.<strong class="reserved">class</strong>)
<a id="L167" name="L167"></a> 167             <strong class="reserved">throw</strong> <a href="../D/28010.html" title="Multiple defined in 3 places.">newIllegalArgumentException</a>("parameter type cannot be void");
<a id="L168" name="L168"></a> 168     <em class="brace">}</em>
<div class="comment">
     /** Return number of extra slots (count of long/double args). */</div>
<a id="L170" name="L170"></a> 170     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11311.html" title="Multiple referred from 4 places.">checkPtypes</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L171" name="L171"></a> 171         <strong class="reserved">int</strong> slots = 0;
<a id="L172" name="L172"></a> 172         <strong class="reserved">for</strong> (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ptype : <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L173" name="L173"></a> 173             <a href="../S/1616.html#L164" title="Defined at 164 in src/java/lang/invoke/MethodType.java.">checkPtype</a>(ptype);
<a id="L174" name="L174"></a> 174             <strong class="reserved">if</strong> (ptype == <strong class="reserved">double</strong>.<strong class="reserved">class</strong> || ptype == <strong class="reserved">long</strong>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L175" name="L175"></a> 175                 slots++;
<a id="L176" name="L176"></a> 176             <em class="brace">}</em>
<a id="L177" name="L177"></a> 177         <em class="brace">}</em>
<a id="L178" name="L178"></a> 178         <a href="../S/1616.html#L181" title="Defined at 181 in src/java/lang/invoke/MethodType.java.">checkSlotCount</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> + slots);
<a id="L179" name="L179"></a> 179         <strong class="reserved">return</strong> slots;
<a id="L180" name="L180"></a> 180     <em class="brace">}</em>
<a id="L181" name="L181"></a> 181     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11365.html" title="Multiple referred from 6 places.">checkSlotCount</a>(<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>((MAX_JVM_ARITY &amp; (MAX_JVM_ARITY+1)) == 0);
<a id="L183" name="L183"></a> 183         <em class="comment">// MAX_JVM_ARITY must be power of 2 minus 1 for following code trick to work:</em>
<a id="L184" name="L184"></a> 184         <strong class="reserved">if</strong> ((<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &amp; MAX_JVM_ARITY) != <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>)
<a id="L185" name="L185"></a> 185             <strong class="reserved">throw</strong> <a href="../D/28010.html" title="Multiple defined in 3 places.">newIllegalArgumentException</a>("bad parameter count "+<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L186" name="L186"></a> 186     <em class="brace">}</em>
<a id="L187" name="L187"></a> 187     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a> <a href="../R/23564.html" title="Multiple referred from 3 places.">newIndexOutOfBoundsException</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>) <em class="brace">{</em>
<a id="L188" name="L188"></a> 188         <strong class="reserved">if</strong> (<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)  <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> = "bad index: "+<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>;
<a id="L189" name="L189"></a> 189         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1778.html#L38" title="Defined at 38 in src/java/lang/IndexOutOfBoundsException.java.">IndexOutOfBoundsException</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L190" name="L190"></a> 190     <em class="brace">}</em>
<a id="L191" name="L191"></a> 191 
<a id="L192" name="L192"></a> 192     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1616.html#L1209" title="Defined at 1209 in src/java/lang/invoke/MethodType.java.">ConcurrentWeakInternSet</a>&lt;<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>&gt; internTable = <strong class="reserved">new</strong> <a href="../S/1616.html#L1209" title="Defined at 1209 in src/java/lang/invoke/MethodType.java.">ConcurrentWeakInternSet</a>&lt;&gt;();
<a id="L193" name="L193"></a> 193 
<a id="L194" name="L194"></a> 194     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] NO_PTYPES = <em class="brace">{</em><em class="brace">}</em>;
<a id="L195" name="L195"></a> 195 
<div class="comment">
      Finds or creates an instance of the given method type.
      @param rtype  the return type
      @param ptypes the parameter types
      @return a method type with the given components
      @throws NullPointerException if <code>rtype</code> or <code>ptypes</code> or any element of <code>ptypes</code> is null
      @throws IllegalArgumentException if any element of <code>ptypes</code> is <code>void.class</code></div>
<a id="L204" name="L204"></a> 204     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L205" name="L205"></a> 205     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/23282.html" title="Multiple referred from 67 places.">methodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">false</strong>);
<a id="L207" name="L207"></a> 207     <em class="brace">}</em>
<a id="L208" name="L208"></a> 208 
<div class="comment">
      Finds or creates a method type with the given components.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param rtype  the return type
      @param ptypes the parameter types
      @return a method type with the given components
      @throws NullPointerException if <code>rtype</code> or <code>ptypes</code> or any element of <code>ptypes</code> is null
      @throws IllegalArgumentException if any element of <code>ptypes</code> is <code>void.class</code></div>
<a id="L218" name="L218"></a> 218     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L219" name="L219"></a> 219     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/23282.html" title="Multiple referred from 67 places.">methodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L220" name="L220"></a> 220         <strong class="reserved">boolean</strong> notrust = <strong class="reserved">false</strong>;  <em class="comment">// random List impl. could return evil ptypes array</em>
<a id="L221" name="L221"></a> 221         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L224" title="Defined at 224 in src/java/lang/invoke/MethodType.java.">listToArray</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>), notrust);
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../R/22537.html" title="Multiple referred from 3 places.">listToArray</a>(<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L225" name="L225"></a> 225         <em class="comment">// sanity check the size before the toArray call, since size might be huge</em>
<a id="L226" name="L226"></a> 226         <a href="../S/1616.html#L181" title="Defined at 181 in src/java/lang/invoke/MethodType.java.">checkSlotCount</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());
<a id="L227" name="L227"></a> 227         <strong class="reserved">return</strong> <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(NO_PTYPES);
<a id="L228" name="L228"></a> 228     <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<div class="comment">
      Finds or creates a method type with the given components.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      The leading parameter type is prepended to the remaining array.
      @param rtype  the return type
      @param ptype0 the first parameter type
      @param ptypes the remaining parameter types
      @return a method type with the given components
      @throws NullPointerException if <code>rtype</code> or <code>ptype0</code> or <code>ptypes</code> or any element of <code>ptypes</code> is null
      @throws IllegalArgumentException if <code>ptype0</code> or <code>ptypes</code> or any element of <code>ptypes</code> is <code>void.class</code></div>
<a id="L241" name="L241"></a> 241     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L242" name="L242"></a> 242     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/23282.html" title="Multiple referred from 67 places.">methodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ptype0, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;... <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] ptypes1 = <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[1+<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L244" name="L244"></a> 244         ptypes1[0] = ptype0;
<a id="L245" name="L245"></a> 245         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, 0, ptypes1, 1, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L246" name="L246"></a> 246         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, ptypes1, <strong class="reserved">true</strong>);
<a id="L247" name="L247"></a> 247     <em class="brace">}</em>
<a id="L248" name="L248"></a> 248 
<div class="comment">
      Finds or creates a method type with the given components.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      The resulting method has no parameter types.
      @param rtype  the return type
      @return a method type with the given return value
      @throws NullPointerException if <code>rtype</code> is null</div>
<a id="L257" name="L257"></a> 257     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L258" name="L258"></a> 258     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/23282.html" title="Multiple referred from 67 places.">methodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>) <em class="brace">{</em>
<a id="L259" name="L259"></a> 259         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, NO_PTYPES, <strong class="reserved">true</strong>);
<a id="L260" name="L260"></a> 260     <em class="brace">}</em>
<a id="L261" name="L261"></a> 261 
<div class="comment">
      Finds or creates a method type with the given components.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      The resulting method has the single given parameter type.
      @param rtype  the return type
      @param ptype0 the parameter type
      @return a method type with the given return value and parameter type
      @throws NullPointerException if <code>rtype</code> or <code>ptype0</code> is null
      @throws IllegalArgumentException if <code>ptype0</code> is <code>void.class</code></div>
<a id="L272" name="L272"></a> 272     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L273" name="L273"></a> 273     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/23282.html" title="Multiple referred from 67 places.">methodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ptype0) <em class="brace">{</em>
<a id="L274" name="L274"></a> 274         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[]<em class="brace">{</em> ptype0 <em class="brace">}</em>, <strong class="reserved">true</strong>);
<a id="L275" name="L275"></a> 275     <em class="brace">}</em>
<a id="L276" name="L276"></a> 276 
<div class="comment">
      Finds or creates a method type with the given components.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      The resulting method has the same parameter types as <code>ptypes</code>,
      and the specified return type.
      @param rtype  the return type
      @param ptypes the method type which supplies the parameter types
      @return a method type with the given components
      @throws NullPointerException if <code>rtype</code> or <code>ptypes</code> is null</div>
<a id="L287" name="L287"></a> 287     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L288" name="L288"></a> 288     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/23282.html" title="Multiple referred from 67 places.">methodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">true</strong>);
<a id="L290" name="L290"></a> 290     <em class="brace">}</em>
<a id="L291" name="L291"></a> 291 
<div class="comment">
      Sole factory method to find or create an interned method type.
      @param rtype desired return type
      @param ptypes desired parameter types
      @param trusted whether the ptypes can be used without cloning
      @return the unique method type of the desired structure</div>
<div class="comment">
     /*trusted*/</div> <strong class="reserved">static</strong>
<a id="L300" name="L300"></a> 300     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/22916.html" title="Multiple referred from 15 places.">makeImpl</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">boolean</strong> trusted) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> mt = internTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<strong class="reserved">new</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>));
<a id="L302" name="L302"></a> 302         <strong class="reserved">if</strong> (mt != <strong class="reserved">null</strong>)
<a id="L303" name="L303"></a> 303             <strong class="reserved">return</strong> mt;
<a id="L304" name="L304"></a> 304         <strong class="reserved">if</strong> (<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0) <em class="brace">{</em>
<a id="L305" name="L305"></a> 305             <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> = NO_PTYPES; trusted = <strong class="reserved">true</strong>;
<a id="L306" name="L306"></a> 306         <em class="brace">}</em>
<a id="L307" name="L307"></a> 307         mt = <strong class="reserved">new</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, trusted);
<a id="L308" name="L308"></a> 308         <em class="comment">// promote the object to the Real Thing, and reprobe</em>
<a id="L309" name="L309"></a> 309         mt.<a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a> = <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.<a href="../S/1614.html#L310" title="Defined at 310 in src/java/lang/invoke/MethodTypeForm.java.">findForm</a>(mt);
<a id="L310" name="L310"></a> 310         <strong class="reserved">return</strong> internTable.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(mt);
<a id="L311" name="L311"></a> 311     <em class="brace">}</em>
<a id="L312" name="L312"></a> 312     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>[] objectOnlyTypes = <strong class="reserved">new</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>[20];
<a id="L313" name="L313"></a> 313 
<div class="comment">
      Finds or creates a method type whose components are <code>Object</code> with an optional trailing <code>Object[]</code> array.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      All parameters and the return type will be <code>Object</code>,
      except the final array parameter if any, which will be <code>Object[]</code>.
      @param objectArgCount number of parameters (excluding the final array parameter if any)
      @param finalArray whether there will be a trailing array parameter, of type <code>Object[]</code>
      @return a generally applicable method type, for all calls of the given fixed argument count and a collected array of further arguments
      @throws IllegalArgumentException if <code>objectArgCount</code> is negative or greater than 255 (or 254, if <code>finalArray</code> is true)
      @see #genericMethodType(int)</div>
<a id="L325" name="L325"></a> 325     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L326" name="L326"></a> 326     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/14871.html" title="Multiple referred from 11 places.">genericMethodType</a>(<strong class="reserved">int</strong> objectArgCount, <strong class="reserved">boolean</strong> finalArray) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> mt;
<a id="L328" name="L328"></a> 328         <a href="../S/1616.html#L181" title="Defined at 181 in src/java/lang/invoke/MethodType.java.">checkSlotCount</a>(objectArgCount);
<a id="L329" name="L329"></a> 329         <strong class="reserved">int</strong> ivarargs = (!finalArray ? 0 : 1);
<a id="L330" name="L330"></a> 330         <strong class="reserved">int</strong> ootIndex = objectArgCount*2 + ivarargs;
<a id="L331" name="L331"></a> 331         <strong class="reserved">if</strong> (ootIndex &lt; objectOnlyTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332             mt = objectOnlyTypes[ootIndex];
<a id="L333" name="L333"></a> 333             <strong class="reserved">if</strong> (mt != <strong class="reserved">null</strong>)  <strong class="reserved">return</strong> mt;
<a id="L334" name="L334"></a> 334         <em class="brace">}</em>
<a id="L335" name="L335"></a> 335         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> = <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[objectArgCount + ivarargs];
<a id="L336" name="L336"></a> 336         <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>);
<a id="L337" name="L337"></a> 337         <strong class="reserved">if</strong> (ivarargs != 0)  <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>[objectArgCount] = <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[].<strong class="reserved">class</strong>;
<a id="L338" name="L338"></a> 338         mt = <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">true</strong>);
<a id="L339" name="L339"></a> 339         <strong class="reserved">if</strong> (ootIndex &lt; objectOnlyTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340             objectOnlyTypes[ootIndex] = mt;     <em class="comment">// cache it here also!</em>
<a id="L341" name="L341"></a> 341         <em class="brace">}</em>
<a id="L342" name="L342"></a> 342         <strong class="reserved">return</strong> mt;
<a id="L343" name="L343"></a> 343     <em class="brace">}</em>
<a id="L344" name="L344"></a> 344 
<div class="comment">
      Finds or creates a method type whose components are all <code>Object</code>.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      All parameters and the return type will be Object.
      @param objectArgCount number of parameters
      @return a generally applicable method type, for all calls of the given argument count
      @throws IllegalArgumentException if <code>objectArgCount</code> is negative or greater than 255
      @see #genericMethodType(int, boolean)</div>
<a id="L354" name="L354"></a> 354     <strong class="reserved">public</strong> <strong class="reserved">static</strong>
<a id="L355" name="L355"></a> 355     <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/14871.html" title="Multiple referred from 11 places.">genericMethodType</a>(<strong class="reserved">int</strong> objectArgCount) <em class="brace">{</em>
<a id="L356" name="L356"></a> 356         <strong class="reserved">return</strong> <a href="../D/16672.html" title="Multiple defined in 2 places.">genericMethodType</a>(objectArgCount, <strong class="reserved">false</strong>);
<a id="L357" name="L357"></a> 357     <em class="brace">}</em>
<a id="L358" name="L358"></a> 358 
<div class="comment">
      Finds or creates a method type with a single different parameter type.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param num    the index (zero-based) of the parameter type to change
      @param nptype a new parameter type to replace the old one with
      @return the same type, except with the selected parameter changed
      @throws IndexOutOfBoundsException if <code>num</code> is not a valid index into <code>parameterArray()</code>
      @throws IllegalArgumentException if <code>nptype</code> is <code>void.class</code>
      @throws NullPointerException if <code>nptype</code> is null</div>
<a id="L369" name="L369"></a> 369     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/11021.html" title="Multiple referred from 6 places.">changeParameterType</a>(<strong class="reserved">int</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; nptype) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370         <strong class="reserved">if</strong> (<a href="../D/29061.html" title="Multiple defined in 3 places.">parameterType</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>) == nptype)  <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L371" name="L371"></a> 371         <a href="../S/1616.html#L164" title="Defined at 164 in src/java/lang/invoke/MethodType.java.">checkPtype</a>(nptype);
<a id="L372" name="L372"></a> 372         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] nptypes = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L373" name="L373"></a> 373         nptypes[<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>] = nptype;
<a id="L374" name="L374"></a> 374         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, nptypes, <strong class="reserved">true</strong>);
<a id="L375" name="L375"></a> 375     <em class="brace">}</em>
<a id="L376" name="L376"></a> 376 
<div class="comment">
      Finds or creates a method type with additional parameter types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param num    the position (zero-based) of the inserted parameter type(s)
      @param ptypesToInsert zero or more new parameter types to insert into the parameter list
      @return the same type, except with the selected parameter(s) inserted
      @throws IndexOutOfBoundsException if <code>num</code> is negative or greater than <code>parameterCount()</code>
      @throws IllegalArgumentException if any element of <code>ptypesToInsert</code> is <code>void.class</code>
                                       or if the resulting method type would have more than 255 parameter slots
      @throws NullPointerException if <code>ptypesToInsert</code> or any of its elements is null</div>
<a id="L388" name="L388"></a> 388     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/20788.html" title="Multiple referred from 18 places.">insertParameterTypes</a>(<strong class="reserved">int</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;... ptypesToInsert) <em class="brace">{</em>
<a id="L389" name="L389"></a> 389         <strong class="reserved">int</strong> len = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L390" name="L390"></a> 390         <strong class="reserved">if</strong> (<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> &lt; 0 || <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> &gt; len)
<a id="L391" name="L391"></a> 391             <strong class="reserved">throw</strong> <a href="../S/1616.html#L187" title="Defined at 187 in src/java/lang/invoke/MethodType.java.">newIndexOutOfBoundsException</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>);
<a id="L392" name="L392"></a> 392         <strong class="reserved">int</strong> ins = <a href="../S/1616.html#L170" title="Defined at 170 in src/java/lang/invoke/MethodType.java.">checkPtypes</a>(ptypesToInsert);
<a id="L393" name="L393"></a> 393         <a href="../S/1616.html#L181" title="Defined at 181 in src/java/lang/invoke/MethodType.java.">checkSlotCount</a>(<a href="../D/29058.html" title="Multiple defined in 2 places.">parameterSlotCount</a>() + ptypesToInsert.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> + ins);
<a id="L394" name="L394"></a> 394         <strong class="reserved">int</strong> ilen = ptypesToInsert.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L395" name="L395"></a> 395         <strong class="reserved">if</strong> (ilen == 0)  <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L396" name="L396"></a> 396         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] nptypes = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13513.html" title="Multiple defined in 10 places.">copyOfRange</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, 0, len+ilen);
<a id="L397" name="L397"></a> 397         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(nptypes, <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>, nptypes, <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>+ilen, len-<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>);
<a id="L398" name="L398"></a> 398         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(ptypesToInsert, 0, nptypes, <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>, ilen);
<a id="L399" name="L399"></a> 399         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, nptypes, <strong class="reserved">true</strong>);
<a id="L400" name="L400"></a> 400     <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<div class="comment">
      Finds or creates a method type with additional parameter types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param ptypesToInsert zero or more new parameter types to insert after the end of the parameter list
      @return the same type, except with the selected parameter(s) appended
      @throws IllegalArgumentException if any element of <code>ptypesToInsert</code> is <code>void.class</code>
                                       or if the resulting method type would have more than 255 parameter slots
      @throws NullPointerException if <code>ptypesToInsert</code> or any of its elements is null</div>
<a id="L411" name="L411"></a> 411     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/10230.html" title="Multiple referred from 4 places.">appendParameterTypes</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;... ptypesToInsert) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412         <strong class="reserved">return</strong> <a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(<a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>(), ptypesToInsert);
<a id="L413" name="L413"></a> 413     <em class="brace">}</em>
<a id="L414" name="L414"></a> 414 
<div class="comment">
      Finds or creates a method type with additional parameter types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param num    the position (zero-based) of the inserted parameter type(s)
      @param ptypesToInsert zero or more new parameter types to insert into the parameter list
      @return the same type, except with the selected parameter(s) inserted
      @throws IndexOutOfBoundsException if <code>num</code> is negative or greater than <code>parameterCount()</code>
      @throws IllegalArgumentException if any element of <code>ptypesToInsert</code> is <code>void.class</code>
                                       or if the resulting method type would have more than 255 parameter slots
      @throws NullPointerException if <code>ptypesToInsert</code> or any of its elements is null</div>
<a id="L426" name="L426"></a> 426     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/20788.html" title="Multiple referred from 18 places.">insertParameterTypes</a>(<strong class="reserved">int</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>, <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; ptypesToInsert) <em class="brace">{</em>
<a id="L427" name="L427"></a> 427         <strong class="reserved">return</strong> <a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>, <a href="../S/1616.html#L224" title="Defined at 224 in src/java/lang/invoke/MethodType.java.">listToArray</a>(ptypesToInsert));
<a id="L428" name="L428"></a> 428     <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<div class="comment">
      Finds or creates a method type with additional parameter types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param ptypesToInsert zero or more new parameter types to insert after the end of the parameter list
      @return the same type, except with the selected parameter(s) appended
      @throws IllegalArgumentException if any element of <code>ptypesToInsert</code> is <code>void.class</code>
                                       or if the resulting method type would have more than 255 parameter slots
      @throws NullPointerException if <code>ptypesToInsert</code> or any of its elements is null</div>
<a id="L439" name="L439"></a> 439     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/10230.html" title="Multiple referred from 4 places.">appendParameterTypes</a>(<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; ptypesToInsert) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440         <strong class="reserved">return</strong> <a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(<a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>(), ptypesToInsert);
<a id="L441" name="L441"></a> 441     <em class="brace">}</em>
<a id="L442" name="L442"></a> 442 
<div class="comment">
      Finds or creates a method type with modified parameter types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param start  the position (zero-based) of the first replaced parameter type(s)
      @param end    the position (zero-based) after the last replaced parameter type(s)
      @param ptypesToInsert zero or more new parameter types to insert into the parameter list
      @return the same type, except with the selected parameter(s) replaced
      @throws IndexOutOfBoundsException if <code>start</code> is negative or greater than <code>parameterCount()</code>
                                       or if <code>end</code> is negative or greater than <code>parameterCount()</code>
                                       or if <code>start</code> is greater than <code>end</code>
      @throws IllegalArgumentException if any element of <code>ptypesToInsert</code> is <code>void.class</code>
                                       or if the resulting method type would have more than 255 parameter slots
      @throws NullPointerException if <code>ptypesToInsert</code> or any of its elements is null</div>
<div class="comment">
     /*non-public*/</div> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/26162.html" title="Multiple referred from 3 places.">replaceParameterTypes</a>(<strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;... ptypesToInsert) <em class="brace">{</em>
<a id="L458" name="L458"></a> 458         <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>)
<a id="L459" name="L459"></a> 459             <strong class="reserved">return</strong> <a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, ptypesToInsert);
<a id="L460" name="L460"></a> 460         <strong class="reserved">int</strong> len = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L461" name="L461"></a> 461         <strong class="reserved">if</strong> (!(0 &lt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &amp;&amp; <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &amp;&amp; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &lt;= len))
<a id="L462" name="L462"></a> 462             <strong class="reserved">throw</strong> <a href="../S/1616.html#L187" title="Defined at 187 in src/java/lang/invoke/MethodType.java.">newIndexOutOfBoundsException</a>("start="+<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>+" end="+<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>);
<a id="L463" name="L463"></a> 463         <strong class="reserved">int</strong> ilen = ptypesToInsert.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L464" name="L464"></a> 464         <strong class="reserved">if</strong> (ilen == 0)
<a id="L465" name="L465"></a> 465             <strong class="reserved">return</strong> <a href="../S/1616.html#L548" title="Defined at 548 in src/java/lang/invoke/MethodType.java.">dropParameterTypes</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>);
<a id="L466" name="L466"></a> 466         <strong class="reserved">return</strong> <a href="../S/1616.html#L548" title="Defined at 548 in src/java/lang/invoke/MethodType.java.">dropParameterTypes</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>).<a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, ptypesToInsert);
<a id="L467" name="L467"></a> 467     <em class="brace">}</em>
<a id="L468" name="L468"></a> 468 
<div class="comment">
 Replace the last arrayLength parameter types with the component type of arrayType.
      @param arrayType any array type
      @param arrayLength the number of parameter types to change
      @return the resulting type</div>
<div class="comment">
     /*non-public*/</div> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/10353.html" title="Multiple referred from 2 places.">asSpreaderType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; arrayType, <strong class="reserved">int</strong> <a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>) <em class="brace">{</em>
<a id="L475" name="L475"></a> 475         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>() &gt;= <a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>);
<a id="L476" name="L476"></a> 476         <strong class="reserved">int</strong> spreadPos = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - <a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>;
<a id="L477" name="L477"></a> 477         <strong class="reserved">if</strong> (<a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a> == 0)  <strong class="reserved">return</strong> <strong class="reserved">this</strong>;  <em class="comment">// nothing to change</em>
<a id="L478" name="L478"></a> 478         <strong class="reserved">if</strong> (arrayType == <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[].<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L479" name="L479"></a> 479             <strong class="reserved">if</strong> (<a href="../S/1616.html#L645" title="Defined at 645 in src/java/lang/invoke/MethodType.java.">isGeneric</a>())  <strong class="reserved">return</strong> <strong class="reserved">this</strong>;  <em class="comment">// nothing to change</em>
<a id="L480" name="L480"></a> 480             <strong class="reserved">if</strong> (spreadPos == 0) <em class="brace">{</em>
<a id="L481" name="L481"></a> 481                 <em class="comment">// no leading arguments to preserve; go generic</em>
<a id="L482" name="L482"></a> 482                 <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> res = <a href="../D/16672.html" title="Multiple defined in 2 places.">genericMethodType</a>(<a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>);
<a id="L483" name="L483"></a> 483                 <strong class="reserved">if</strong> (<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> != <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L484" name="L484"></a> 484                     res = res.<a href="../S/1616.html#L582" title="Defined at 582 in src/java/lang/invoke/MethodType.java.">changeReturnType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>);
<a id="L485" name="L485"></a> 485                 <em class="brace">}</em>
<a id="L486" name="L486"></a> 486                 <strong class="reserved">return</strong> res;
<a id="L487" name="L487"></a> 487             <em class="brace">}</em>
<a id="L488" name="L488"></a> 488         <em class="brace">}</em>
<a id="L489" name="L489"></a> 489         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; elemType = arrayType.<a href="../D/17880.html" title="Multiple defined in 2 places.">getComponentType</a>();
<a id="L490" name="L490"></a> 490         <a href="../R/10368.html" title="Multiple referred from 1094 places.">assert</a>(elemType != <strong class="reserved">null</strong>);
<a id="L491" name="L491"></a> 491         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = spreadPos; i &lt; <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L492" name="L492"></a> 492             <strong class="reserved">if</strong> (<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>[i] != elemType) <em class="brace">{</em>
<a id="L493" name="L493"></a> 493                 <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] fixedPtypes = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L494" name="L494"></a> 494                 <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(fixedPtypes, i, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, elemType);
<a id="L495" name="L495"></a> 495                 <strong class="reserved">return</strong> <a href="../D/27690.html" title="Multiple defined in 8 places.">methodType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, fixedPtypes);
<a id="L496" name="L496"></a> 496             <em class="brace">}</em>
<a id="L497" name="L497"></a> 497         <em class="brace">}</em>
<a id="L498" name="L498"></a> 498         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;  <em class="comment">// arguments check out; no change</em>
<a id="L499" name="L499"></a> 499     <em class="brace">}</em>
<a id="L500" name="L500"></a> 500 
<div class="comment">
 Return the leading parameter type, which must exist and be a reference.
       @return the leading parameter type, after error checks</div>
<div class="comment">
     /*non-public*/</div> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1623.html#L1276" title="Referred from 1276 in src/java/lang/invoke/MethodHandle.java.">leadingReferenceParameter</a>() <em class="brace">{</em>
<a id="L505" name="L505"></a> 505         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ptype;
<a id="L506" name="L506"></a> 506         <strong class="reserved">if</strong> (<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0 ||
<a id="L507" name="L507"></a> 507             (ptype = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>[0]).<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>())
<a id="L508" name="L508"></a> 508             <strong class="reserved">throw</strong> <a href="../D/28010.html" title="Multiple defined in 3 places.">newIllegalArgumentException</a>("no leading reference parameter");
<a id="L509" name="L509"></a> 509         <strong class="reserved">return</strong> ptype;
<a id="L510" name="L510"></a> 510     <em class="brace">}</em>
<a id="L511" name="L511"></a> 511 
<div class="comment">
 Delete the last parameter type and replace it with arrayLength copies of the component type of arrayType.
      @param arrayType any array type
      @param arrayLength the number of parameter types to insert
      @return the resulting type</div>
<div class="comment">
     /*non-public*/</div> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/10336.html" title="Multiple referred from 2 places.">asCollectorType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; arrayType, <strong class="reserved">int</strong> <a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>() &gt;= 1);
<a id="L519" name="L519"></a> 519         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1616.html#L732" title="Defined at 732 in src/java/lang/invoke/MethodType.java.">lastParameterType</a>().<a href="../D/25213.html" title="Multiple defined in 7 places.">isAssignableFrom</a>(arrayType));
<a id="L520" name="L520"></a> 520         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> res;
<a id="L521" name="L521"></a> 521         <strong class="reserved">if</strong> (arrayType == <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[].<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522             res = <a href="../D/16672.html" title="Multiple defined in 2 places.">genericMethodType</a>(<a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>);
<a id="L523" name="L523"></a> 523             <strong class="reserved">if</strong> (<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> != <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524                 res = res.<a href="../S/1616.html#L582" title="Defined at 582 in src/java/lang/invoke/MethodType.java.">changeReturnType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>);
<a id="L525" name="L525"></a> 525             <em class="brace">}</em>
<a id="L526" name="L526"></a> 526         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L527" name="L527"></a> 527             <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; elemType = arrayType.<a href="../D/17880.html" title="Multiple defined in 2 places.">getComponentType</a>();
<a id="L528" name="L528"></a> 528             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(elemType != <strong class="reserved">null</strong>);
<a id="L529" name="L529"></a> 529             res = <a href="../D/27690.html" title="Multiple defined in 8 places.">methodType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L4982" title="Defined at 4982 in src/java/util/Collections.java.">nCopies</a>(<a href="../D/11507.html" title="Multiple defined in 4 places.">arrayLength</a>, elemType));
<a id="L530" name="L530"></a> 530         <em class="brace">}</em>
<a id="L531" name="L531"></a> 531         <strong class="reserved">if</strong> (<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 1) <em class="brace">{</em>
<a id="L532" name="L532"></a> 532             <strong class="reserved">return</strong> res;
<a id="L533" name="L533"></a> 533         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L534" name="L534"></a> 534             <strong class="reserved">return</strong> res.<a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(0, <a href="../S/1616.html#L728" title="Defined at 728 in src/java/lang/invoke/MethodType.java.">parameterList</a>().<a href="../D/34984.html" title="Multiple defined in 17 places.">subList</a>(0, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>-1));
<a id="L535" name="L535"></a> 535         <em class="brace">}</em>
<a id="L536" name="L536"></a> 536     <em class="brace">}</em>
<a id="L537" name="L537"></a> 537 
<div class="comment">
      Finds or creates a method type with some parameter types omitted.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param start  the index (zero-based) of the first parameter type to remove
      @param end    the index (greater than <code>start</code>) of the first parameter type after not to remove
      @return the same type, except with the selected parameter(s) removed
      @throws IndexOutOfBoundsException if <code>start</code> is negative or greater than <code>parameterCount()</code>
                                       or if <code>end</code> is negative or greater than <code>parameterCount()</code>
                                       or if <code>start</code> is greater than <code>end</code></div>
<a id="L548" name="L548"></a> 548     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/13592.html" title="Multiple referred from 11 places.">dropParameterTypes</a>(<strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549         <strong class="reserved">int</strong> len = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L550" name="L550"></a> 550         <strong class="reserved">if</strong> (!(0 &lt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &amp;&amp; <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &amp;&amp; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &lt;= len))
<a id="L551" name="L551"></a> 551             <strong class="reserved">throw</strong> <a href="../S/1616.html#L187" title="Defined at 187 in src/java/lang/invoke/MethodType.java.">newIndexOutOfBoundsException</a>("start="+<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>+" end="+<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>);
<a id="L552" name="L552"></a> 552         <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>)  <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L553" name="L553"></a> 553         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] nptypes;
<a id="L554" name="L554"></a> 554         <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> == 0) <em class="brace">{</em>
<a id="L555" name="L555"></a> 555             <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> == len) <em class="brace">{</em>
<a id="L556" name="L556"></a> 556                 <em class="comment">// drop all parameters</em>
<a id="L557" name="L557"></a> 557                 nptypes = NO_PTYPES;
<a id="L558" name="L558"></a> 558             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L559" name="L559"></a> 559                 <em class="comment">// drop initial parameter(s)</em>
<a id="L560" name="L560"></a> 560                 nptypes = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13513.html" title="Multiple defined in 10 places.">copyOfRange</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, len);
<a id="L561" name="L561"></a> 561             <em class="brace">}</em>
<a id="L562" name="L562"></a> 562         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L563" name="L563"></a> 563             <strong class="reserved">if</strong> (<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> == len) <em class="brace">{</em>
<a id="L564" name="L564"></a> 564                 <em class="comment">// drop trailing parameter(s)</em>
<a id="L565" name="L565"></a> 565                 nptypes = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13513.html" title="Multiple defined in 10 places.">copyOfRange</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, 0, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>);
<a id="L566" name="L566"></a> 566             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L567" name="L567"></a> 567                 <strong class="reserved">int</strong> tail = len - <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L568" name="L568"></a> 568                 nptypes = <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/13513.html" title="Multiple defined in 10 places.">copyOfRange</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, 0, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> + tail);
<a id="L569" name="L569"></a> 569                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, nptypes, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, tail);
<a id="L570" name="L570"></a> 570             <em class="brace">}</em>
<a id="L571" name="L571"></a> 571         <em class="brace">}</em>
<a id="L572" name="L572"></a> 572         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, nptypes, <strong class="reserved">true</strong>);
<a id="L573" name="L573"></a> 573     <em class="brace">}</em>
<a id="L574" name="L574"></a> 574 
<div class="comment">
      Finds or creates a method type with a different return type.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      @param nrtype a return parameter type to replace the old one with
      @return the same type, except with the return type change
      @throws NullPointerException if <code>nrtype</code> is null</div>
<a id="L582" name="L582"></a> 582     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/11024.html" title="Multiple referred from 17 places.">changeReturnType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; nrtype) <em class="brace">{</em>
<a id="L583" name="L583"></a> 583         <strong class="reserved">if</strong> (<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>() == nrtype)  <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L584" name="L584"></a> 584         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(nrtype, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">true</strong>);
<a id="L585" name="L585"></a> 585     <em class="brace">}</em>
<a id="L586" name="L586"></a> 586 
<div class="comment">
      Reports if this type contains a primitive argument or return value.
      The return type <code>void</code> counts as a primitive.
      @return true if any of the types are primitives</div>
<a id="L592" name="L592"></a> 592     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20255.html" title="Multiple referred from 6 places.">hasPrimitives</a>() <em class="brace">{</em>
<a id="L593" name="L593"></a> 593         <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../D/24163.html" title="Multiple defined in 2 places.">hasPrimitives</a>();
<a id="L594" name="L594"></a> 594     <em class="brace">}</em>
<a id="L595" name="L595"></a> 595 
<div class="comment">
      Reports if this type contains a wrapper argument or return value.
      Wrappers are types which box primitive values, such as {@link Integer}.
      The reference type <code>java.lang.Void</code> counts as a wrapper,
      if it occurs as a return type.
      @return true if any of the types are wrappers</div>
<a id="L603" name="L603"></a> 603     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> hasWrappers() <em class="brace">{</em>
<a id="L604" name="L604"></a> 604         <strong class="reserved">return</strong> <a href="../D/36022.html" title="Multiple defined in 10 places.">unwrap</a>() != <strong class="reserved">this</strong>;
<a id="L605" name="L605"></a> 605     <em class="brace">}</em>
<a id="L606" name="L606"></a> 606 
<div class="comment">
      Erases all reference types to <code>Object</code>.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      All primitive types (including <code>void</code>) will remain unchanged.
      @return a version of the original type with all reference types replaced</div>
<a id="L613" name="L613"></a> 613     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/14000.html" title="Multiple referred from 9 places.">erase</a>() <em class="brace">{</em>
<a id="L614" name="L614"></a> 614         <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../S/1614.html#L88" title="Defined at 88 in src/java/lang/invoke/MethodTypeForm.java.">erasedType</a>();
<a id="L615" name="L615"></a> 615     <em class="brace">}</em>
<a id="L616" name="L616"></a> 616 
<div class="comment">
      Erases all reference types to <code>Object</code>, and all subword types to <code>int</code>.
      This is the reduced type polymorphism used by private methods
      such as {@link MethodHandle#invokeBasic invokeBasic}.
      @return a version of the original type with all reference and subword types replaced</div>
<div class="comment">
     /*non-public*/</div> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/10543.html" title="Multiple referred from 107 places.">basicType</a>() <em class="brace">{</em>
<a id="L624" name="L624"></a> 624         <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../D/11785.html" title="Multiple defined in 6 places.">basicType</a>();
<a id="L625" name="L625"></a> 625     <em class="brace">}</em>
<a id="L626" name="L626"></a> 626 
<div class="comment">
      @return a version of the original type with MethodHandle prepended as the first argument</div>
<div class="comment">
     /*non-public*/</div> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/21101.html" title="Multiple referred from 40 places.">invokerType</a>() <em class="brace">{</em>
<a id="L631" name="L631"></a> 631         <strong class="reserved">return</strong> <a href="../D/24768.html" title="Multiple defined in 2 places.">insertParameterTypes</a>(0, <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a>.<strong class="reserved">class</strong>);
<a id="L632" name="L632"></a> 632     <em class="brace">}</em>
<a id="L633" name="L633"></a> 633 
<div class="comment">
      Converts all types, both reference and primitive, to <code>Object</code>.
      Convenience method for {@link #genericMethodType(int) genericMethodType}.
      The expression <code>type.wrap().erase()</code> produces the same value
      as <code>type.generic()</code>.
      @return a version of the original type with all types replaced</div>
<a id="L641" name="L641"></a> 641     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/14869.html" title="Multiple referred from 1167 places.">generic</a>() <em class="brace">{</em>
<a id="L642" name="L642"></a> 642         <strong class="reserved">return</strong> <a href="../D/16672.html" title="Multiple defined in 2 places.">genericMethodType</a>(<a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>());
<a id="L643" name="L643"></a> 643     <em class="brace">}</em>
<a id="L644" name="L644"></a> 644 
<div class="comment">
     /*non-public*/</div> <strong class="reserved">boolean</strong> <a href="../R/21507.html" title="Multiple referred from 8 places.">isGeneric</a>() <em class="brace">{</em>
<a id="L646" name="L646"></a> 646         <strong class="reserved">return</strong> <strong class="reserved">this</strong> == <a href="../S/1616.html#L613" title="Defined at 613 in src/java/lang/invoke/MethodType.java.">erase</a>() &amp;&amp; !<a href="../D/24163.html" title="Multiple defined in 2 places.">hasPrimitives</a>();
<a id="L647" name="L647"></a> 647     <em class="brace">}</em>
<a id="L648" name="L648"></a> 648 
<div class="comment">
      Converts all primitive types to their corresponding wrapper types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      All reference types (including wrapper types) will remain unchanged.
      A <code>void</code> return type is changed to the type <code>java.lang.Void</code>.
      The expression <code>type.wrap().erase()</code> produces the same value
      as <code>type.generic()</code>.
      @return a version of the original type with all primitive types replaced</div>
<a id="L658" name="L658"></a> 658     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/30535.html" title="Multiple referred from 76 places.">wrap</a>() <em class="brace">{</em>
<a id="L659" name="L659"></a> 659         <strong class="reserved">return</strong> <a href="../D/24163.html" title="Multiple defined in 2 places.">hasPrimitives</a>() ? <a href="../S/1616.html#L674" title="Defined at 674 in src/java/lang/invoke/MethodType.java.">wrapWithPrims</a>(<strong class="reserved">this</strong>) : <strong class="reserved">this</strong>;
<a id="L660" name="L660"></a> 660     <em class="brace">}</em>
<a id="L661" name="L661"></a> 661 
<div class="comment">
      Converts all wrapper types to their corresponding primitive types.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      All primitive types (including <code>void</code>) will remain unchanged.
      A return type of <code>java.lang.Void</code> is changed to <code>void</code>.
      @return a version of the original type with all wrapper types replaced</div>
<a id="L669" name="L669"></a> 669     <strong class="reserved">public</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/29794.html" title="Multiple referred from 19 places.">unwrap</a>() <em class="brace">{</em>
<a id="L670" name="L670"></a> 670         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> noprims = !<a href="../D/24163.html" title="Multiple defined in 2 places.">hasPrimitives</a>() ? <strong class="reserved">this</strong> : <a href="../S/1616.html#L674" title="Defined at 674 in src/java/lang/invoke/MethodType.java.">wrapWithPrims</a>(<strong class="reserved">this</strong>);
<a id="L671" name="L671"></a> 671         <strong class="reserved">return</strong> <a href="../S/1616.html#L686" title="Defined at 686 in src/java/lang/invoke/MethodType.java.">unwrapWithNoPrims</a>(noprims);
<a id="L672" name="L672"></a> 672     <em class="brace">}</em>
<a id="L673" name="L673"></a> 673 
<a id="L674" name="L674"></a> 674     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/30541.html" title="Multiple referred from 2 places.">wrapWithPrims</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> pt) <em class="brace">{</em>
<a id="L675" name="L675"></a> 675         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(pt.<a href="../D/24163.html" title="Multiple defined in 2 places.">hasPrimitives</a>());
<a id="L676" name="L676"></a> 676         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> wt = pt.wrapAlt;
<a id="L677" name="L677"></a> 677         <strong class="reserved">if</strong> (wt == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L678" name="L678"></a> 678             <em class="comment">// fill in lazily</em>
<a id="L679" name="L679"></a> 679             wt = <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.<a href="../D/12232.html" title="Multiple defined in 6 places.">canonicalize</a>(pt, <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.WRAP, <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.WRAP);
<a id="L680" name="L680"></a> 680             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(wt != <strong class="reserved">null</strong>);
<a id="L681" name="L681"></a> 681             pt.wrapAlt = wt;
<a id="L682" name="L682"></a> 682         <em class="brace">}</em>
<a id="L683" name="L683"></a> 683         <strong class="reserved">return</strong> wt;
<a id="L684" name="L684"></a> 684     <em class="brace">}</em>
<a id="L685" name="L685"></a> 685 
<a id="L686" name="L686"></a> 686     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../S/1616.html#L671" title="Referred from 671 in src/java/lang/invoke/MethodType.java.">unwrapWithNoPrims</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> wt) <em class="brace">{</em>
<a id="L687" name="L687"></a> 687         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(!wt.<a href="../D/24163.html" title="Multiple defined in 2 places.">hasPrimitives</a>());
<a id="L688" name="L688"></a> 688         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> uwt = wt.wrapAlt;
<a id="L689" name="L689"></a> 689         <strong class="reserved">if</strong> (uwt == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L690" name="L690"></a> 690             <em class="comment">// fill in lazily</em>
<a id="L691" name="L691"></a> 691             uwt = <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.<a href="../D/12232.html" title="Multiple defined in 6 places.">canonicalize</a>(wt, <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.UNWRAP, <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a>.UNWRAP);
<a id="L692" name="L692"></a> 692             <strong class="reserved">if</strong> (uwt == <strong class="reserved">null</strong>)
<a id="L693" name="L693"></a> 693                 uwt = wt;    <em class="comment">// type has no wrappers or prims at all</em>
<a id="L694" name="L694"></a> 694             wt.wrapAlt = uwt;
<a id="L695" name="L695"></a> 695         <em class="brace">}</em>
<a id="L696" name="L696"></a> 696         <strong class="reserved">return</strong> uwt;
<a id="L697" name="L697"></a> 697     <em class="brace">}</em>
<a id="L698" name="L698"></a> 698 
<div class="comment">
      Returns the parameter type at the specified index, within this method type.
      @param num the index (zero-based) of the desired parameter type
      @return the selected parameter type
      @throws IndexOutOfBoundsException if <code>num</code> is not a valid index into <code>parameterArray()</code></div>
<a id="L705" name="L705"></a> 705     <strong class="reserved">public</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/24479.html" title="Multiple referred from 68 places.">parameterType</a>(<strong class="reserved">int</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>) <em class="brace">{</em>
<a id="L706" name="L706"></a> 706         <strong class="reserved">return</strong> <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>[<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>];
<a id="L707" name="L707"></a> 707     <em class="brace">}</em>
<div class="comment">
      Returns the number of parameter types in this method type.
      @return the number of parameter types</div>
<a id="L712" name="L712"></a> 712     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/24473.html" title="Multiple referred from 105 places.">parameterCount</a>() <em class="brace">{</em>
<a id="L713" name="L713"></a> 713         <strong class="reserved">return</strong> <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L714" name="L714"></a> 714     <em class="brace">}</em>
<div class="comment">
      Returns the return type of this method type.
      @return the return type</div>
<a id="L719" name="L719"></a> 719     <strong class="reserved">public</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/26473.html" title="Multiple referred from 193 places.">returnType</a>() <em class="brace">{</em>
<a id="L720" name="L720"></a> 720         <strong class="reserved">return</strong> <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>;
<a id="L721" name="L721"></a> 721     <em class="brace">}</em>
<a id="L722" name="L722"></a> 722 
<div class="comment">
      Presents the parameter types as a list (a convenience method).
      The list will be immutable.
      @return the parameter types (as an immutable list)</div>
<a id="L728" name="L728"></a> 728     <strong class="reserved">public</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; <a href="../R/24474.html" title="Multiple referred from 14 places.">parameterList</a>() <em class="brace">{</em>
<a id="L729" name="L729"></a> 729         <strong class="reserved">return</strong> <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L1286" title="Defined at 1286 in src/java/util/Collections.java.">unmodifiableList</a>(<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/11544.html" title="Multiple defined in 4 places.">asList</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>()));
<a id="L730" name="L730"></a> 730     <em class="brace">}</em>
<a id="L731" name="L731"></a> 731 
<div class="comment">
     /*non-public*/</div> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../R/22423.html" title="Multiple referred from 4 places.">lastParameterType</a>() <em class="brace">{</em>
<a id="L733" name="L733"></a> 733         <strong class="reserved">int</strong> len = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L734" name="L734"></a> 734         <strong class="reserved">return</strong> len == 0 ? <strong class="reserved">void</strong>.<strong class="reserved">class</strong> : <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>[len-1];
<a id="L735" name="L735"></a> 735     <em class="brace">}</em>
<a id="L736" name="L736"></a> 736 
<div class="comment">
      Presents the parameter types as an array (a convenience method).
      Changes to the array will not result in changes to the type.
      @return the parameter types (as a fresh copy if necessary)</div>
<a id="L742" name="L742"></a> 742     <strong class="reserved">public</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../R/24471.html" title="Multiple referred from 11 places.">parameterArray</a>() <em class="brace">{</em>
<a id="L743" name="L743"></a> 743         <strong class="reserved">return</strong> <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L744" name="L744"></a> 744     <em class="brace">}</em>
<a id="L745" name="L745"></a> 745 
<div class="comment">
      Compares the specified object with this type for equality.
      That is, it returns <tt>true</tt> if and only if the specified object
      is also a method type with exactly the same parameters and return type.
      @param x object to compare
      @see Object#equals(Object)</div>
<a id="L753" name="L753"></a> 753     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L754" name="L754"></a> 754     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L755" name="L755"></a> 755         <strong class="reserved">return</strong> <strong class="reserved">this</strong> == <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> || <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> <strong class="reserved">instanceof</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> &amp;&amp; <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>((<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>)<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L756" name="L756"></a> 756     <em class="brace">}</em>
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> that) <em class="brace">{</em>
<a id="L759" name="L759"></a> 759         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> == that.<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>
<a id="L760" name="L760"></a> 760             &amp;&amp; <a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<strong class="reserved">this</strong>.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, that.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>);
<a id="L761" name="L761"></a> 761     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762 
<div class="comment">
      Returns the hash code value for this method type.
      It is defined to be the same as the hashcode of a List
      whose elements are the return type followed by the
      parameter types.
      @return the hash code value for this method type
      @see Object#hashCode()
      @see #equals(Object)
      @see List#hashCode()</div>
<a id="L773" name="L773"></a> 773     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L774" name="L774"></a> 774     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L775" name="L775"></a> 775       <strong class="reserved">int</strong> <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a> = 31 + <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L776" name="L776"></a> 776       <strong class="reserved">for</strong> (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; ptype : <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>)
<a id="L777" name="L777"></a> 777           <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a> = 31*<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a> + ptype.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L778" name="L778"></a> 778       <strong class="reserved">return</strong> <a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>;
<a id="L779" name="L779"></a> 779     <em class="brace">}</em>
<a id="L780" name="L780"></a> 780 
<div class="comment">
      Returns a string representation of the method type,
      of the form <code>"(PT0,PT1...)RT"</code>.
      The string representation of a method type is a
      parenthesis enclosed, comma separated list of type names,
      followed immediately by the return type.
      <p>
      Each type is represented by its
      {@link java.lang.Class#getSimpleName simple name}.</p></div>
<a id="L791" name="L791"></a> 791     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L792" name="L792"></a> 792     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L793" name="L793"></a> 793         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L794" name="L794"></a> 794         sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("(");
<a id="L795" name="L795"></a> 795         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L796" name="L796"></a> 796             <strong class="reserved">if</strong> (i &gt; 0)  sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(",");
<a id="L797" name="L797"></a> 797             sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>[i].<a href="../D/22519.html" title="Multiple defined in 7 places.">getSimpleName</a>());
<a id="L798" name="L798"></a> 798         <em class="brace">}</em>
<a id="L799" name="L799"></a> 799         sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(")");
<a id="L800" name="L800"></a> 800         sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>.<a href="../D/22519.html" title="Multiple defined in 7 places.">getSimpleName</a>());
<a id="L801" name="L801"></a> 801         <strong class="reserved">return</strong> sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L802" name="L802"></a> 802     <em class="brace">}</em>
<a id="L803" name="L803"></a> 803 
<div class="comment">
 True if the old return type can always be viewed (w/o casting) under new return type,
       and the new parameters can be viewed (w/o casting) under the old parameter types.</div>
<div class="comment">
     /*non-public*/</div>
<a id="L808" name="L808"></a> 808     <strong class="reserved">boolean</strong> <a href="../R/22217.html" title="Multiple referred from 2 places.">isViewableAs</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> newType, <strong class="reserved">boolean</strong> keepInterfaces) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809         <strong class="reserved">if</strong> (!VerifyType.isNullConversion(<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>(), newType.<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>(), keepInterfaces))
<a id="L810" name="L810"></a> 810             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L811" name="L811"></a> 811         <strong class="reserved">return</strong> <a href="../S/1616.html#L815" title="Defined at 815 in src/java/lang/invoke/MethodType.java.">parametersAreViewableAs</a>(newType, keepInterfaces);
<a id="L812" name="L812"></a> 812     <em class="brace">}</em>
<div class="comment">
     /** True if the new parameters can be viewed (w/o casting) under the old parameter types. */</div>
<div class="comment">
     /*non-public*/</div>
<a id="L815" name="L815"></a> 815     <strong class="reserved">boolean</strong> <a href="../S/1616.html#L811" title="Referred from 811 in src/java/lang/invoke/MethodType.java.">parametersAreViewableAs</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> newType, <strong class="reserved">boolean</strong> keepInterfaces) <em class="brace">{</em>
<a id="L816" name="L816"></a> 816         <strong class="reserved">if</strong> (<a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a> == newType.<a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a> &amp;&amp; <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../S/1614.html#L88" title="Defined at 88 in src/java/lang/invoke/MethodTypeForm.java.">erasedType</a> == <strong class="reserved">this</strong>)
<a id="L817" name="L817"></a> 817             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;  <em class="comment">// my reference parameters are all Object</em>
<a id="L818" name="L818"></a> 818         <strong class="reserved">if</strong> (<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> == newType.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>)
<a id="L819" name="L819"></a> 819             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L820" name="L820"></a> 820         <strong class="reserved">int</strong> argc = <a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>();
<a id="L821" name="L821"></a> 821         <strong class="reserved">if</strong> (argc != newType.<a href="../D/29054.html" title="Multiple defined in 2 places.">parameterCount</a>())
<a id="L822" name="L822"></a> 822             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L823" name="L823"></a> 823         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; argc; i++) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824             <strong class="reserved">if</strong> (!VerifyType.isNullConversion(newType.<a href="../D/29061.html" title="Multiple defined in 3 places.">parameterType</a>(i), <a href="../D/29061.html" title="Multiple defined in 3 places.">parameterType</a>(i), keepInterfaces))
<a id="L825" name="L825"></a> 825                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L826" name="L826"></a> 826         <em class="brace">}</em>
<a id="L827" name="L827"></a> 827         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L828" name="L828"></a> 828     <em class="brace">}</em>
<div class="comment">
     /*non-public*/</div>
<a id="L830" name="L830"></a> 830     <strong class="reserved">boolean</strong> <a href="../R/21303.html" title="Multiple referred from 2 places.">isConvertibleTo</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> newType) <em class="brace">{</em>
<a id="L831" name="L831"></a> 831         <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a> oldForm = <strong class="reserved">this</strong>.<a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>();
<a id="L832" name="L832"></a> 832         <a href="../S/1614.html#L45" title="Defined at 45 in src/java/lang/invoke/MethodTypeForm.java.">MethodTypeForm</a> newForm = newType.<a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>();
<a id="L833" name="L833"></a> 833         <strong class="reserved">if</strong> (oldForm == newForm)
<a id="L834" name="L834"></a> 834             <em class="comment">// same parameter count, same primitive/object mix</em>
<a id="L835" name="L835"></a> 835             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L836" name="L836"></a> 836         <strong class="reserved">if</strong> (!<a href="../S/1616.html#L922" title="Defined at 922 in src/java/lang/invoke/MethodType.java.">canConvert</a>(<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>(), newType.<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>()))
<a id="L837" name="L837"></a> 837             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L838" name="L838"></a> 838         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] srcTypes = newType.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>;
<a id="L839" name="L839"></a> 839         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] dstTypes = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>;
<a id="L840" name="L840"></a> 840         <strong class="reserved">if</strong> (srcTypes == dstTypes)
<a id="L841" name="L841"></a> 841             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L842" name="L842"></a> 842         <strong class="reserved">int</strong> argc;
<a id="L843" name="L843"></a> 843         <strong class="reserved">if</strong> ((argc = srcTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) != dstTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L844" name="L844"></a> 844             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L845" name="L845"></a> 845         <strong class="reserved">if</strong> (argc &lt;= 1) <em class="brace">{</em>
<a id="L846" name="L846"></a> 846             <strong class="reserved">if</strong> (argc == 1 &amp;&amp; !<a href="../S/1616.html#L922" title="Defined at 922 in src/java/lang/invoke/MethodType.java.">canConvert</a>(srcTypes[0], dstTypes[0]))
<a id="L847" name="L847"></a> 847                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L848" name="L848"></a> 848             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L849" name="L849"></a> 849         <em class="brace">}</em>
<a id="L850" name="L850"></a> 850         <strong class="reserved">if</strong> ((oldForm.<a href="../S/1614.html#L277" title="Defined at 277 in src/java/lang/invoke/MethodTypeForm.java.">primitiveParameterCount</a>() == 0 &amp;&amp; oldForm.<a href="../S/1614.html#L88" title="Defined at 88 in src/java/lang/invoke/MethodTypeForm.java.">erasedType</a> == <strong class="reserved">this</strong>) ||
<a id="L851" name="L851"></a> 851             (newForm.<a href="../S/1614.html#L277" title="Defined at 277 in src/java/lang/invoke/MethodTypeForm.java.">primitiveParameterCount</a>() == 0 &amp;&amp; newForm.<a href="../S/1614.html#L88" title="Defined at 88 in src/java/lang/invoke/MethodTypeForm.java.">erasedType</a> == newType)) <em class="brace">{</em>
<a id="L852" name="L852"></a> 852             <em class="comment">// Somewhat complicated test to avoid a loop of 2 or more trips.</em>
<a id="L853" name="L853"></a> 853             <em class="comment">// If either type has only Object parameters, we know we can convert.</em>
<a id="L854" name="L854"></a> 854             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1616.html#L912" title="Defined at 912 in src/java/lang/invoke/MethodType.java.">canConvertParameters</a>(srcTypes, dstTypes));
<a id="L855" name="L855"></a> 855             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L856" name="L856"></a> 856         <em class="brace">}</em>
<a id="L857" name="L857"></a> 857         <strong class="reserved">return</strong> <a href="../S/1616.html#L912" title="Defined at 912 in src/java/lang/invoke/MethodType.java.">canConvertParameters</a>(srcTypes, dstTypes);
<a id="L858" name="L858"></a> 858     <em class="brace">}</em>
<a id="L859" name="L859"></a> 859 
<div class="comment">
 Returns true if MHs.explicitCastArguments produces the same result as MH.asType.
       If the type conversion is impossible for either, the result should be false.</div>
<div class="comment">
     /*non-public*/</div>
<a id="L864" name="L864"></a> 864     <strong class="reserved">boolean</strong> <a href="../R/14155.html" title="Multiple referred from 3 places.">explicitCastEquivalentToAsType</a>(<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> newType) <em class="brace">{</em>
<a id="L865" name="L865"></a> 865         <strong class="reserved">if</strong> (<strong class="reserved">this</strong> == newType)  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L866" name="L866"></a> 866         <strong class="reserved">if</strong> (!<a href="../D/15872.html" title="Multiple defined in 2 places.">explicitCastEquivalentToAsType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, newType.<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>)) <em class="brace">{</em>
<a id="L867" name="L867"></a> 867             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L868" name="L868"></a> 868         <em class="brace">}</em>
<a id="L869" name="L869"></a> 869         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] srcTypes = newType.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>;
<a id="L870" name="L870"></a> 870         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] dstTypes = <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>;
<a id="L871" name="L871"></a> 871         <strong class="reserved">if</strong> (dstTypes == srcTypes) <em class="brace">{</em>
<a id="L872" name="L872"></a> 872             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L873" name="L873"></a> 873         <em class="brace">}</em>
<a id="L874" name="L874"></a> 874         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(dstTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == srcTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L875" name="L875"></a> 875         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; dstTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L876" name="L876"></a> 876             <strong class="reserved">if</strong> (!<a href="../D/15872.html" title="Multiple defined in 2 places.">explicitCastEquivalentToAsType</a>(srcTypes[i], dstTypes[i])) <em class="brace">{</em>
<a id="L877" name="L877"></a> 877                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L878" name="L878"></a> 878             <em class="brace">}</em>
<a id="L879" name="L879"></a> 879         <em class="brace">}</em>
<a id="L880" name="L880"></a> 880         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L881" name="L881"></a> 881     <em class="brace">}</em>
<a id="L882" name="L882"></a> 882 
<div class="comment">
 Reports true if the src can be converted to the dst, by both asType and MHs.eCE,
       and with the same effect.
       MHs.eCA has the following "upgrades" to MH.asType:
       1. interfaces are unchecked (that is, treated as if aliased to Object)
          Therefore, <code>Object-&gt;CharSequence</code> is possible in both cases but has different semantics
       2. the full matrix of primitive-to-primitive conversions is supported
          Narrowing like <code>long-&gt;byte</code> and basic-typing like <code>boolean-&gt;int</code>
          are not supported by asType, but anything supported by asType is equivalent
          with MHs.eCE.
       3a. unboxing conversions can be followed by the full matrix of primitive conversions
       3b. unboxing of null is permitted (creates a zero primitive value)
      Other than interfaces, reference-to-reference conversions are the same.
      Boxing primitives to references is the same for both operators.</div>
<a id="L897" name="L897"></a> 897     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/14155.html" title="Multiple referred from 3 places.">explicitCastEquivalentToAsType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; src, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; dst) <em class="brace">{</em>
<a id="L898" name="L898"></a> 898         <strong class="reserved">if</strong> (src == dst || dst == <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong> || dst == <strong class="reserved">void</strong>.<strong class="reserved">class</strong>)  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L899" name="L899"></a> 899         <strong class="reserved">if</strong> (src.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L900" name="L900"></a> 900             <em class="comment">// Could be a prim/prim conversion, where casting is a strict superset.</em>
<a id="L901" name="L901"></a> 901             <em class="comment">// Or a boxing conversion, which is always to an exact wrapper class.</em>
<a id="L902" name="L902"></a> 902             <strong class="reserved">return</strong> <a href="../S/1616.html#L922" title="Defined at 922 in src/java/lang/invoke/MethodType.java.">canConvert</a>(src, dst);
<a id="L903" name="L903"></a> 903         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (dst.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L904" name="L904"></a> 904             <em class="comment">// Unboxing behavior is different between MHs.eCA &amp; MH.asType (see 3b).</em>
<a id="L905" name="L905"></a> 905             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L906" name="L906"></a> 906         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L907" name="L907"></a> 907             <em class="comment">// R-&gt;R always works, but we have to avoid a check-cast to an interface.</em>
<a id="L908" name="L908"></a> 908             <strong class="reserved">return</strong> !dst.<a href="../D/25735.html" title="Multiple defined in 6 places.">isInterface</a>() || dst.<a href="../D/25213.html" title="Multiple defined in 7 places.">isAssignableFrom</a>(src);
<a id="L909" name="L909"></a> 909         <em class="brace">}</em>
<a id="L910" name="L910"></a> 910     <em class="brace">}</em>
<a id="L911" name="L911"></a> 911 
<a id="L912" name="L912"></a> 912     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/10874.html" title="Multiple referred from 2 places.">canConvertParameters</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] srcTypes, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] dstTypes) <em class="brace">{</em>
<a id="L913" name="L913"></a> 913         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; srcTypes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L914" name="L914"></a> 914             <strong class="reserved">if</strong> (!<a href="../S/1616.html#L922" title="Defined at 922 in src/java/lang/invoke/MethodType.java.">canConvert</a>(srcTypes[i], dstTypes[i])) <em class="brace">{</em>
<a id="L915" name="L915"></a> 915                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L916" name="L916"></a> 916             <em class="brace">}</em>
<a id="L917" name="L917"></a> 917         <em class="brace">}</em>
<a id="L918" name="L918"></a> 918         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L919" name="L919"></a> 919     <em class="brace">}</em>
<a id="L920" name="L920"></a> 920 
<div class="comment">
     /*non-public*/</div>
<a id="L922" name="L922"></a> 922     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/10873.html" title="Multiple referred from 5 places.">canConvert</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; src, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; dst) <em class="brace">{</em>
<a id="L923" name="L923"></a> 923         <em class="comment">// short-circuit a few cases:</em>
<a id="L924" name="L924"></a> 924         <strong class="reserved">if</strong> (src == dst || src == <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong> || dst == <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>.<strong class="reserved">class</strong>)  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L925" name="L925"></a> 925         <em class="comment">// the remainder of this logic is documented in MethodHandle.asType</em>
<a id="L926" name="L926"></a> 926         <strong class="reserved">if</strong> (src.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L927" name="L927"></a> 927             <em class="comment">// can force void to an explicit null, a la reflect.Method.invoke</em>
<a id="L928" name="L928"></a> 928             <em class="comment">// can also force void to a primitive zero, by analogy</em>
<a id="L929" name="L929"></a> 929             <strong class="reserved">if</strong> (src == <strong class="reserved">void</strong>.<strong class="reserved">class</strong>)  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;  <em class="comment">//or !dst.isPrimitive()?</em>
<a id="L930" name="L930"></a> 930             <a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a> sw = <a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a>.forPrimitiveType(src);
<a id="L931" name="L931"></a> 931             <strong class="reserved">if</strong> (dst.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L932" name="L932"></a> 932                 <em class="comment">// P-&gt;P must widen</em>
<a id="L933" name="L933"></a> 933                 <strong class="reserved">return</strong> <a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a>.forPrimitiveType(dst).isConvertibleFrom(sw);
<a id="L934" name="L934"></a> 934             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L935" name="L935"></a> 935                 <em class="comment">// P-&gt;R must box and widen</em>
<a id="L936" name="L936"></a> 936                 <strong class="reserved">return</strong> dst.<a href="../D/25213.html" title="Multiple defined in 7 places.">isAssignableFrom</a>(sw.wrapperType());
<a id="L937" name="L937"></a> 937             <em class="brace">}</em>
<a id="L938" name="L938"></a> 938         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (dst.<a href="../D/26086.html" title="Multiple defined in 8 places.">isPrimitive</a>()) <em class="brace">{</em>
<a id="L939" name="L939"></a> 939             <em class="comment">// any value can be dropped</em>
<a id="L940" name="L940"></a> 940             <strong class="reserved">if</strong> (dst == <strong class="reserved">void</strong>.<strong class="reserved">class</strong>)  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L941" name="L941"></a> 941             <a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a> dw = <a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a>.forPrimitiveType(dst);
<a id="L942" name="L942"></a> 942             <em class="comment">// R-&gt;P must be able to unbox (from a dynamically chosen type) and widen</em>
<a id="L943" name="L943"></a> 943             <em class="comment">// For example:</em>
<a id="L944" name="L944"></a> 944             <em class="comment">//   Byte/Number/Comparable/Object -&gt; dw:Byte -&gt; byte.</em>
<a id="L945" name="L945"></a> 945             <em class="comment">//   Character/Comparable/Object -&gt; dw:Character -&gt; char</em>
<a id="L946" name="L946"></a> 946             <em class="comment">//   Boolean/Comparable/Object -&gt; dw:Boolean -&gt; boolean</em>
<a id="L947" name="L947"></a> 947             <em class="comment">// This means that dw must be cast-compatible with src.</em>
<a id="L948" name="L948"></a> 948             <strong class="reserved">if</strong> (src.<a href="../D/25213.html" title="Multiple defined in 7 places.">isAssignableFrom</a>(dw.wrapperType())) <em class="brace">{</em>
<a id="L949" name="L949"></a> 949                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L950" name="L950"></a> 950             <em class="brace">}</em>
<a id="L951" name="L951"></a> 951             <em class="comment">// The above does not work if the source reference is strongly typed</em>
<a id="L952" name="L952"></a> 952             <em class="comment">// to a wrapper whose primitive must be widened.  For example:</em>
<a id="L953" name="L953"></a> 953             <em class="comment">//   Byte -&gt; unbox:byte -&gt; short/int/long/float/double</em>
<a id="L954" name="L954"></a> 954             <em class="comment">//   Character -&gt; unbox:char -&gt; int/long/float/double</em>
<a id="L955" name="L955"></a> 955             <strong class="reserved">if</strong> (<a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a>.isWrapperType(src) &amp;&amp;
<a id="L956" name="L956"></a> 956                 dw.isConvertibleFrom(<a href="../S/2566.html#L42" title="Defined at 42 in src/java/sql/Wrapper.java.">Wrapper</a>.forWrapperType(src))) <em class="brace">{</em>
<a id="L957" name="L957"></a> 957                 <em class="comment">// can unbox from src and then widen to dst</em>
<a id="L958" name="L958"></a> 958                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L959" name="L959"></a> 959             <em class="brace">}</em>
<a id="L960" name="L960"></a> 960             <em class="comment">// We have already covered cases which arise due to runtime unboxing</em>
<a id="L961" name="L961"></a> 961             <em class="comment">// of a reference type which covers several wrapper types:</em>
<a id="L962" name="L962"></a> 962             <em class="comment">//   Object -&gt; cast:Integer -&gt; unbox:int -&gt; long/float/double</em>
<a id="L963" name="L963"></a> 963             <em class="comment">//   Serializable -&gt; cast:Byte -&gt; unbox:byte -&gt; byte/short/int/long/float/double</em>
<a id="L964" name="L964"></a> 964             <em class="comment">// An marginal case is Number -&gt; dw:Character -&gt; char, which would be OK if there were a</em>
<a id="L965" name="L965"></a> 965             <em class="comment">// subclass of Number which wraps a value that can convert to char.</em>
<a id="L966" name="L966"></a> 966             <em class="comment">// Since there is none, we don't need an extra check here to cover char or boolean.</em>
<a id="L967" name="L967"></a> 967             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L968" name="L968"></a> 968         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L969" name="L969"></a> 969             <em class="comment">// R-&gt;R always works, since null is always valid dynamically</em>
<a id="L970" name="L970"></a> 970             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L971" name="L971"></a> 971         <em class="brace">}</em>
<a id="L972" name="L972"></a> 972     <em class="brace">}</em>
<a id="L973" name="L973"></a> 973 
<a id="L974" name="L974"></a> 974     <em class="comment">/// Queries which have to do with the bytecode architecture</em>
<a id="L975" name="L975"></a> 975 
<div class="comment">
 Reports the number of JVM stack slots required to invoke a method
      of this type.  Note that (for historical reasons) the JVM requires
      a second stack slot to pass long and double arguments.
      So this method returns {@link #parameterCount() parameterCount} plus the
      number of long and double parameters (if any).
      <p>
      This method is included for the benefit of applications that must
      generate bytecodes that process method handles and invokedynamic.
      @return the number of JVM stack slots for this type's parameters</p></div>
<div class="comment">
     /*non-public*/</div> <strong class="reserved">int</strong> <a href="../R/24476.html" title="Multiple referred from 7 places.">parameterSlotCount</a>() <em class="brace">{</em>
<a id="L987" name="L987"></a> 987         <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../D/29058.html" title="Multiple defined in 2 places.">parameterSlotCount</a>();
<a id="L988" name="L988"></a> 988     <em class="brace">}</em>
<a id="L989" name="L989"></a> 989 
<div class="comment">
     /*non-public*/</div> <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a> <a href="../R/21102.html" title="Multiple referred from 15 places.">invokers</a>() <em class="brace">{</em>
<a id="L991" name="L991"></a> 991         <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a> <a href="../S/3196.html#L392" title="Defined at 392 in src/javax/swing/Spring.java.">inv</a> = <a href="../S/1616.html#L990" title="Defined at 990 in src/java/lang/invoke/MethodType.java.">invokers</a>;
<a id="L992" name="L992"></a> 992         <strong class="reserved">if</strong> (<a href="../S/3196.html#L392" title="Defined at 392 in src/javax/swing/Spring.java.">inv</a> != <strong class="reserved">null</strong>)  <strong class="reserved">return</strong> <a href="../S/3196.html#L392" title="Defined at 392 in src/javax/swing/Spring.java.">inv</a>;
<a id="L993" name="L993"></a> 993         <a href="../S/1616.html#L990" title="Defined at 990 in src/java/lang/invoke/MethodType.java.">invokers</a> = <a href="../S/3196.html#L392" title="Defined at 392 in src/javax/swing/Spring.java.">inv</a> = <strong class="reserved">new</strong> <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a>(<strong class="reserved">this</strong>);
<a id="L994" name="L994"></a> 994         <strong class="reserved">return</strong> <a href="../S/3196.html#L392" title="Defined at 392 in src/javax/swing/Spring.java.">inv</a>;
<a id="L995" name="L995"></a> 995     <em class="brace">}</em>
<a id="L996" name="L996"></a> 996 
<div class="comment">
 Reports the number of JVM stack slots which carry all parameters including and after
      the given position, which must be in the range of 0 to
      <code>parameterCount</code> inclusive.  Successive parameters are
      more shallowly stacked, and parameters are indexed in the bytecodes
      according to their trailing edge.  Thus, to obtain the depth
      in the outgoing call stack of parameter <code>N</code>, obtain
      the <code>parameterSlotDepth</code> of its trailing edge
      at position <code>N+1</code>.
      <p>
      Parameters of type <code>long</code> and <code>double</code> occupy
      two stack slots (for historical reasons) and all others occupy one.
      Therefore, the number returned is the number of arguments
      <em>including</em> and <em>after</em> the given parameter,
      <em>plus</em> the number of long or double arguments
      at or after after the argument for the given parameter.
      </p><p>
      This method is included for the benefit of applications that must
      generate bytecodes that process method handles and invokedynamic.
      @param num an index (zero-based, inclusive) within the parameter types
      @return the index of the (shallowest) JVM stack slot transmitting the
              given parameter
      @throws IllegalArgumentException if <code>num</code> is negative or greater than <code>parameterCount()</code></p></div>
<div class="comment">
     /*non-public*/</div> <strong class="reserved">int</strong> <a href="../S/1627.html#L120" title="Referred from 120 in src/java/lang/invoke/InvokerBytecodeGenerator.java.">parameterSlotDepth</a>(<strong class="reserved">int</strong> <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>) <em class="brace">{</em>
<a id="L1021" name="L1021"></a>1021         <strong class="reserved">if</strong> (<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> &lt; 0 || <a href="../D/28365.html" title="Multiple defined in 17 places.">num</a> &gt; <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1022" name="L1022"></a>1022             <a href="../D/29061.html" title="Multiple defined in 3 places.">parameterType</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>);  <em class="comment">// force a range check</em>
<a id="L1023" name="L1023"></a>1023         <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../S/1614.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodTypeForm.java.">parameterToArgSlot</a>(<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>-1);
<a id="L1024" name="L1024"></a>1024     <em class="brace">}</em>
<a id="L1025" name="L1025"></a>1025 
<div class="comment">
 Reports the number of JVM stack slots required to receive a return value
      from a method of this type.
      If the {@link #returnType() return type} is void, it will be zero,
      else if the return type is long or double, it will be two, else one.
      <p>
      This method is included for the benefit of applications that must
      generate bytecodes that process method handles and invokedynamic.
      @return the number of JVM stack slots (0, 1, or 2) for this type's return value
      Will be removed for PFD.</p></div>
<div class="comment">
     /*non-public*/</div> <strong class="reserved">int</strong> <a href="../S/1616.html#L1037" title="Referred from 1037 in src/java/lang/invoke/MethodType.java.">returnSlotCount</a>() <em class="brace">{</em>
<a id="L1037" name="L1037"></a>1037         <strong class="reserved">return</strong> <a href="../S/1616.html#L125" title="Defined at 125 in src/java/lang/invoke/MethodType.java.">form</a>.<a href="../D/31401.html" title="Multiple defined in 2 places.">returnSlotCount</a>();
<a id="L1038" name="L1038"></a>1038     <em class="brace">}</em>
<a id="L1039" name="L1039"></a>1039 
<div class="comment">
      Finds or creates an instance of a method type, given the spelling of its bytecode descriptor.
      Convenience method for {@link #methodType(java.lang.Class, java.lang.Class[]) methodType}.
      Any class or interface name embedded in the descriptor string
      will be resolved by calling {@link ClassLoader#loadClass(java.lang.String)}
      on the given loader (or if it is null, on the system class loader).
      <p>
      Note that it is possible to encounter method types which cannot be
      constructed by this method, because their component types are
      not all reachable from a common class loader.
      </p><p>
      This method is included for the benefit of applications that must
      generate bytecodes that process method handles and <code>invokedynamic</code>.
      @param descriptor a bytecode-level type descriptor string "(T...)T"
      @param loader the class loader in which to look up the types
      @return a method type matching the bytecode-level type descriptor
      @throws NullPointerException if the string is null
      @throws IllegalArgumentException if the string is not well-formed
      @throws TypeNotPresentException if a named type cannot be found</p></div>
<a id="L1060" name="L1060"></a>1060     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../R/14806.html" title="Multiple referred from 4 places.">fromMethodDescriptorString</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> descriptor, <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> loader)
<a id="L1061" name="L1061"></a>1061         <strong class="reserved">throws</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>, <a href="../S/1676.html#L46" title="Defined at 46 in src/java/lang/TypeNotPresentException.java.">TypeNotPresentException</a>
<a id="L1062" name="L1062"></a>1062     <em class="brace">{</em>
<a id="L1063" name="L1063"></a>1063         <strong class="reserved">if</strong> (!descriptor.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("(") ||  <em class="comment">// also generates NPE if needed</em>
<a id="L1064" name="L1064"></a>1064             descriptor.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(')') &lt; 0 ||
<a id="L1065" name="L1065"></a>1065             descriptor.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('.') &gt;= 0)
<a id="L1066" name="L1066"></a>1066             <strong class="reserved">throw</strong> <a href="../D/28010.html" title="Multiple defined in 3 places.">newIllegalArgumentException</a>("not a method descriptor: "+descriptor);
<a id="L1067" name="L1067"></a>1067         <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;&gt; types = BytecodeDescriptor.parseMethod(descriptor, loader);
<a id="L1068" name="L1068"></a>1068         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> = types.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(types.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - 1);
<a id="L1069" name="L1069"></a>1069         <a href="../S/1616.html#L181" title="Defined at 181 in src/java/lang/invoke/MethodType.java.">checkSlotCount</a>(types.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());
<a id="L1070" name="L1070"></a>1070         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> = <a href="../S/1616.html#L224" title="Defined at 224 in src/java/lang/invoke/MethodType.java.">listToArray</a>(types);
<a id="L1071" name="L1071"></a>1071         <strong class="reserved">return</strong> <a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">true</strong>);
<a id="L1072" name="L1072"></a>1072     <em class="brace">}</em>
<a id="L1073" name="L1073"></a>1073 
<div class="comment">
      Produces a bytecode descriptor representation of the method type.
      <p>
      Note that this is not a strict inverse of {@link #fromMethodDescriptorString fromMethodDescriptorString}.
      Two distinct classes which share a common name but have different class loaders
      will appear identical when viewed within descriptor strings.
      </p><p>
      This method is included for the benefit of applications that must
      generate bytecodes that process method handles and <code>invokedynamic</code>.
      {@link #fromMethodDescriptorString(java.lang.String, java.lang.ClassLoader) fromMethodDescriptorString},
      because the latter requires a suitable class loader argument.
      @return the bytecode type descriptor representation</p></div>
<a id="L1087" name="L1087"></a>1087     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29294.html" title="Multiple referred from 16 places.">toMethodDescriptorString</a>() <em class="brace">{</em>
<a id="L1088" name="L1088"></a>1088         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> desc = methodDescriptor;
<a id="L1089" name="L1089"></a>1089         <strong class="reserved">if</strong> (desc == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1090" name="L1090"></a>1090             desc = BytecodeDescriptor.unparse(<strong class="reserved">this</strong>);
<a id="L1091" name="L1091"></a>1091             methodDescriptor = desc;
<a id="L1092" name="L1092"></a>1092         <em class="brace">}</em>
<a id="L1093" name="L1093"></a>1093         <strong class="reserved">return</strong> desc;
<a id="L1094" name="L1094"></a>1094     <em class="brace">}</em>
<a id="L1095" name="L1095"></a>1095 
<div class="comment">
     /*non-public*/</div> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1627.html#L870" title="Referred from 870 in src/java/lang/invoke/InvokerBytecodeGenerator.java.">toFieldDescriptorString</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; cls) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097         <strong class="reserved">return</strong> BytecodeDescriptor.unparse(cls);
<a id="L1098" name="L1098"></a>1098     <em class="brace">}</em>
<a id="L1099" name="L1099"></a>1099 
<a id="L1100" name="L1100"></a>1100     <em class="comment">/// Serialization.</em>
<a id="L1101" name="L1101"></a>1101 
<div class="comment">
      There are no serializable fields for <code>MethodType</code>.</div>
<a id="L1105" name="L1105"></a>1105     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] serialPersistentFields = <em class="brace">{</em> <em class="brace">}</em>;
<a id="L1106" name="L1106"></a>1106 
<div class="comment">
      Save the <code>MethodType</code> instance to a stream.
      @serialData
      For portability, the serialized format does not refer to named fields.
      Instead, the return type and parameter type arrays are written directly
      from the <code>writeObject</code> method, using two calls to <code>s.writeObject</code>
      as follows:
      <blockquote><pre>{@code
s.writeObject(this.returnType());
s.writeObject(this.parameterArray());
      }</pre></blockquote>
      <p>
      The deserialized field values are checked as if they were
      provided to the factory method {@link #methodType(Class,Class[]) methodType}.
      For example, null values, or <code>void</code> parameter types,
      will lead to exceptions during deserialization.
      @param s the stream to write the object to
      @throws java.io.IOException if there is a problem writing the object</p></div>
<a id="L1127" name="L1127"></a>1127     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> s) <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1128" name="L1128"></a>1128         s.<a href="../D/14752.html" title="Multiple defined in 6 places.">defaultWriteObject</a>();  <em class="comment">// requires serialPersistentFields to be an empty array</em>
<a id="L1129" name="L1129"></a>1129         s.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>());
<a id="L1130" name="L1130"></a>1130         s.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(<a href="../S/1616.html#L742" title="Defined at 742 in src/java/lang/invoke/MethodType.java.">parameterArray</a>());
<a id="L1131" name="L1131"></a>1131     <em class="brace">}</em>
<a id="L1132" name="L1132"></a>1132 
<div class="comment">
      Reconstitute the <code>MethodType</code> instance from a stream (that is,
      deserialize it).
      This instance is a scratch object with bogus final fields.
      It provides the parameters to the factory method called by
      {@link #readResolve readResolve}.
      After that call it is discarded.
      @param s the stream to read the object from
      @throws java.io.IOException if there is a problem reading the object
      @throws ClassNotFoundException if one of the component classes cannot be resolved
      @see #MethodType()
      @see #readResolve
      @see #writeObject</div>
<a id="L1147" name="L1147"></a>1147     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s) <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L1148" name="L1148"></a>1148         s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();  <em class="comment">// requires serialPersistentFields to be an empty array</em>
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;   <a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>     = (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;)   s.<a href="../D/30232.html" title="Multiple defined in 322 places.">readObject</a>();
<a id="L1151" name="L1151"></a>1151         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L742" title="Defined at 742 in src/java/lang/invoke/MethodType.java.">parameterArray</a> = (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[]) s.<a href="../D/30232.html" title="Multiple defined in 322 places.">readObject</a>();
<a id="L1152" name="L1152"></a>1152 
<a id="L1153" name="L1153"></a>1153         <em class="comment">// Probably this object will never escape, but let's check</em>
<a id="L1154" name="L1154"></a>1154         <em class="comment">// the field values now, just to be sure.</em>
<a id="L1155" name="L1155"></a>1155         <a href="../S/1616.html#L161" title="Defined at 161 in src/java/lang/invoke/MethodType.java.">checkRtype</a>(<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>);
<a id="L1156" name="L1156"></a>1156         <a href="../S/1616.html#L170" title="Defined at 170 in src/java/lang/invoke/MethodType.java.">checkPtypes</a>(<a href="../S/1616.html#L742" title="Defined at 742 in src/java/lang/invoke/MethodType.java.">parameterArray</a>);
<a id="L1157" name="L1157"></a>1157 
<a id="L1158" name="L1158"></a>1158         <a href="../S/1616.html#L742" title="Defined at 742 in src/java/lang/invoke/MethodType.java.">parameterArray</a> = <a href="../S/1616.html#L742" title="Defined at 742 in src/java/lang/invoke/MethodType.java.">parameterArray</a>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();  <em class="comment">// make sure it is unshared</em>
<a id="L1159" name="L1159"></a>1159         <a href="../S/1616.html#L1170" title="Defined at 1170 in src/java/lang/invoke/MethodType.java.">MethodType_init</a>(<a href="../D/31403.html" title="Multiple defined in 4 places.">returnType</a>, <a href="../S/1616.html#L742" title="Defined at 742 in src/java/lang/invoke/MethodType.java.">parameterArray</a>);
<a id="L1160" name="L1160"></a>1160     <em class="brace">}</em>
<a id="L1161" name="L1161"></a>1161 
<div class="comment">
      For serialization only.
      Sets the final fields to null, pending <code>Unsafe.putObject</code>.</div>
<a id="L1166" name="L1166"></a>1166     <strong class="reserved">private</strong> <a href="../R/5129.html" title="Multiple referred from 496 places.">MethodType</a>() <em class="brace">{</em>
<a id="L1167" name="L1167"></a>1167         <strong class="reserved">this</strong>.<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a> = <strong class="reserved">null</strong>;
<a id="L1168" name="L1168"></a>1168         <strong class="reserved">this</strong>.<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a> = <strong class="reserved">null</strong>;
<a id="L1169" name="L1169"></a>1169     <em class="brace">}</em>
<a id="L1170" name="L1170"></a>1170     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/1616.html#L1159" title="Referred from 1159 in src/java/lang/invoke/MethodType.java.">MethodType_init</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L1171" name="L1171"></a>1171         <em class="comment">// In order to communicate these values to readResolve, we must</em>
<a id="L1172" name="L1172"></a>1172         <em class="comment">// store them into the implementation-specific final fields.</em>
<a id="L1173" name="L1173"></a>1173         <a href="../S/1616.html#L161" title="Defined at 161 in src/java/lang/invoke/MethodType.java.">checkRtype</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>);
<a id="L1174" name="L1174"></a>1174         <a href="../S/1616.html#L170" title="Defined at 170 in src/java/lang/invoke/MethodType.java.">checkPtypes</a>(<a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>);
<a id="L1175" name="L1175"></a>1175         UNSAFE.putObject(<strong class="reserved">this</strong>, rtypeOffset, <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>);
<a id="L1176" name="L1176"></a>1176         UNSAFE.putObject(<strong class="reserved">this</strong>, ptypesOffset, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>);
<a id="L1177" name="L1177"></a>1177     <em class="brace">}</em>
<a id="L1178" name="L1178"></a>1178 
<a id="L1179" name="L1179"></a>1179     <em class="comment">// Support for resetting final fields while deserializing</em>
<a id="L1180" name="L1180"></a>1180     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> rtypeOffset, ptypesOffset;
<a id="L1181" name="L1181"></a>1181     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L1182" name="L1182"></a>1182         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1183" name="L1183"></a>1183             rtypeOffset = UNSAFE.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L1184" name="L1184"></a>1184                 (<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>.<strong class="reserved">class</strong>.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("rtype"));
<a id="L1185" name="L1185"></a>1185             ptypesOffset = UNSAFE.<a href="../D/28395.html" title="Multiple defined in 5 places.">objectFieldOffset</a>
<a id="L1186" name="L1186"></a>1186                 (<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>.<strong class="reserved">class</strong>.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("ptypes"));
<a id="L1187" name="L1187"></a>1187         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1188" name="L1188"></a>1188             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L1189" name="L1189"></a>1189         <em class="brace">}</em>
<a id="L1190" name="L1190"></a>1190     <em class="brace">}</em>
<a id="L1191" name="L1191"></a>1191 
<div class="comment">
      Resolves and initializes a <code>MethodType</code> object
      after serialization.
      @return the fully initialized <code>MethodType</code> object</div>
<a id="L1197" name="L1197"></a>1197     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/6954.html#L419" title="Referred from 419 in src/com/sun/corba/se/impl/io/IIOPInputStream.java.">readResolve</a>() <em class="brace">{</em>
<a id="L1198" name="L1198"></a>1198         <em class="comment">// Do not use a trusted path for deserialization:</em>
<a id="L1199" name="L1199"></a>1199         <em class="comment">//return makeImpl(rtype, ptypes, true);</em>
<a id="L1200" name="L1200"></a>1200         <em class="comment">// Verify all operands, and make sure ptypes is unshared:</em>
<a id="L1201" name="L1201"></a>1201         <strong class="reserved">return</strong> <a href="../D/27690.html" title="Multiple defined in 8 places.">methodType</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>);
<a id="L1202" name="L1202"></a>1202     <em class="brace">}</em>
<a id="L1203" name="L1203"></a>1203 
<div class="comment">
      Simple implementation of weak concurrent intern set.
      @param <t> interned type</t></div>
<a id="L1209" name="L1209"></a>1209     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/1616.html#L192" title="Referred from 192 in src/java/lang/invoke/MethodType.java.">ConcurrentWeakInternSet</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <em class="brace">{</em>
<a id="L1210" name="L1210"></a>1210 
<a id="L1211" name="L1211"></a>1211         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1110.html#L63" title="Defined at 63 in src/java/util/concurrent/ConcurrentMap.java.">ConcurrentMap</a>&lt;<a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;, <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt;&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L1212" name="L1212"></a>1212         <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; stale;
<a id="L1213" name="L1213"></a>1213 
<a id="L1214" name="L1214"></a>1214         <strong class="reserved">public</strong> ConcurrentWeakInternSet() <em class="brace">{</em>
<a id="L1215" name="L1215"></a>1215             <strong class="reserved">this</strong>.<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <strong class="reserved">new</strong> <a href="../S/1074.html#L267" title="Defined at 267 in src/java/util/concurrent/ConcurrentHashMap.java.">ConcurrentHashMap</a>&lt;&gt;();
<a id="L1216" name="L1216"></a>1216             <strong class="reserved">this</strong>.stale = <strong class="reserved">new</strong> <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;&gt;();
<a id="L1217" name="L1217"></a>1217         <em class="brace">}</em>
<a id="L1218" name="L1218"></a>1218 
<div class="comment">
          Get the existing interned element.
          This method returns null if no element is interned.
          @param elem element to look up
          @return the interned element</div>
<a id="L1226" name="L1226"></a>1226         <strong class="reserved">public</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> elem) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227             <strong class="reserved">if</strong> (elem == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1228" name="L1228"></a>1228             <a href="../S/1616.html#L1266" title="Defined at 1266 in src/java/lang/invoke/MethodType.java.">expungeStaleElements</a>();
<a id="L1229" name="L1229"></a>1229 
<a id="L1230" name="L1230"></a>1230             <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<strong class="reserved">new</strong> <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;&gt;(elem));
<a id="L1231" name="L1231"></a>1231             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1232" name="L1232"></a>1232                 <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> res = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L1233" name="L1233"></a>1233                 <strong class="reserved">if</strong> (res != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1234" name="L1234"></a>1234                     <strong class="reserved">return</strong> res;
<a id="L1235" name="L1235"></a>1235                 <em class="brace">}</em>
<a id="L1236" name="L1236"></a>1236             <em class="brace">}</em>
<a id="L1237" name="L1237"></a>1237             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1238" name="L1238"></a>1238         <em class="brace">}</em>
<a id="L1239" name="L1239"></a>1239 
<div class="comment">
          Interns the element.
          Always returns non-null element, matching the one in the intern set.
          Under the race against another add(), it can return <i>different</i>
          element, if another thread beats us to interning it.
          @param elem element to add
          @return element that was actually added</div>
<a id="L1249" name="L1249"></a>1249         <strong class="reserved">public</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> elem) <em class="brace">{</em>
<a id="L1250" name="L1250"></a>1250             <strong class="reserved">if</strong> (elem == <strong class="reserved">null</strong>) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L1251" name="L1251"></a>1251 
<a id="L1252" name="L1252"></a>1252             <em class="comment">// Playing double race here, and so spinloop is required.</em>
<a id="L1253" name="L1253"></a>1253             <em class="comment">// First race is with two concurrent updaters.</em>
<a id="L1254" name="L1254"></a>1254             <em class="comment">// Second race is with GC purging weak ref under our feet.</em>
<a id="L1255" name="L1255"></a>1255             <em class="comment">// Hopefully, we almost always end up with a single pass.</em>
<a id="L1256" name="L1256"></a>1256             <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> interned;
<a id="L1257" name="L1257"></a>1257             <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; e = <strong class="reserved">new</strong> <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;&gt;(elem, stale);
<a id="L1258" name="L1258"></a>1258             <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L1259" name="L1259"></a>1259                 <a href="../S/1616.html#L1266" title="Defined at 1266 in src/java/lang/invoke/MethodType.java.">expungeStaleElements</a>();
<a id="L1260" name="L1260"></a>1260                 <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; exist = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30006.html" title="Multiple defined in 13 places.">putIfAbsent</a>(e, e);
<a id="L1261" name="L1261"></a>1261                 interned = (exist == <strong class="reserved">null</strong>) ? elem : exist.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L1262" name="L1262"></a>1262             <em class="brace">}</em> <strong class="reserved">while</strong> (interned == <strong class="reserved">null</strong>);
<a id="L1263" name="L1263"></a>1263             <strong class="reserved">return</strong> interned;
<a id="L1264" name="L1264"></a>1264         <em class="brace">}</em>
<a id="L1265" name="L1265"></a>1265 
<a id="L1266" name="L1266"></a>1266         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/14173.html" title="Multiple referred from 2 places.">expungeStaleElements</a>() <em class="brace">{</em>
<a id="L1267" name="L1267"></a>1267             <a href="../D/7176.html" title="Multiple defined in 5 places.">Reference</a>&lt;? <strong class="reserved">extends</strong> <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; reference;
<a id="L1268" name="L1268"></a>1268             <strong class="reserved">while</strong> ((reference = stale.<a href="../D/29402.html" title="Multiple defined in 36 places.">poll</a>()) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1269" name="L1269"></a>1269                 <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(reference);
<a id="L1270" name="L1270"></a>1270             <em class="brace">}</em>
<a id="L1271" name="L1271"></a>1271         <em class="brace">}</em>
<a id="L1272" name="L1272"></a>1272 
<a id="L1273" name="L1273"></a>1273         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/8733.html" title="Multiple referred from 6 places.">WeakEntry</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <strong class="reserved">extends</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; <em class="brace">{</em>
<a id="L1274" name="L1274"></a>1274 
<a id="L1275" name="L1275"></a>1275             <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> hashcode;
<a id="L1276" name="L1276"></a>1276 
<a id="L1277" name="L1277"></a>1277             <strong class="reserved">public</strong> WeakEntry(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1565.html#L36" title="Defined at 36 in src/java/lang/ref/ReferenceQueue.java.">ReferenceQueue</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; queue) <em class="brace">{</em>
<a id="L1278" name="L1278"></a>1278                 <strong class="reserved">super</strong>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, queue);
<a id="L1279" name="L1279"></a>1279                 hashcode = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L1280" name="L1280"></a>1280             <em class="brace">}</em>
<a id="L1281" name="L1281"></a>1281 
<a id="L1282" name="L1282"></a>1282             <strong class="reserved">public</strong> WeakEntry(<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L1283" name="L1283"></a>1283                 <strong class="reserved">super</strong>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1284" name="L1284"></a>1284                 hashcode = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>();
<a id="L1285" name="L1285"></a>1285             <em class="brace">}</em>
<a id="L1286" name="L1286"></a>1286 
<a id="L1287" name="L1287"></a>1287             @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L1288" name="L1288"></a>1288             <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L1289" name="L1289"></a>1289                 <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> that = ((<a href="../S/1616.html#L1273" title="Defined at 1273 in src/java/lang/invoke/MethodType.java.">WeakEntry</a>) obj).<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L1291" name="L1291"></a>1291                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> mine = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L1292" name="L1292"></a>1292                     <strong class="reserved">return</strong> (that == <strong class="reserved">null</strong> || mine == <strong class="reserved">null</strong>) ? (<strong class="reserved">this</strong> == obj) : mine.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(that);
<a id="L1293" name="L1293"></a>1293                 <em class="brace">}</em>
<a id="L1294" name="L1294"></a>1294                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1295" name="L1295"></a>1295             <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296 
<a id="L1297" name="L1297"></a>1297             @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L1298" name="L1298"></a>1298             <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L1299" name="L1299"></a>1299                 <strong class="reserved">return</strong> hashcode;
<a id="L1300" name="L1300"></a>1300             <em class="brace">}</em>
<a id="L1301" name="L1301"></a>1301 
<a id="L1302" name="L1302"></a>1302         <em class="brace">}</em>
<a id="L1303" name="L1303"></a>1303     <em class="brace">}</em>
<a id="L1304" name="L1304"></a>1304 
<a id="L1305" name="L1305"></a>1305 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L125">[^]</a><a href="#L1298">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/locks/ReentrantLock.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L123">[^]</a><a href="#L756">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L123" title="Defined at 123.">lock</a></li>
<li><a href="#L129" title="Defined at 129.">nonfairTryAcquire</a></li>
<li><a href="#L148" title="Defined at 148.">tryRelease</a></li>
<li><a href="#L161" title="Defined at 161.">isHeldExclusively</a></li>
<li><a href="#L167" title="Defined at 167.">newCondition</a></li>
<li><a href="#L173" title="Defined at 173.">getOwner</a></li>
<li><a href="#L177" title="Defined at 177.">getHoldCount</a></li>
<li><a href="#L181" title="Defined at 181.">isLocked</a></li>
<li><a href="#L188" title="Defined at 188.">readObject</a></li>
<li><a href="#L205" title="Defined at 205.">lock</a></li>
<li><a href="#L212" title="Defined at 212.">tryAcquire</a></li>
<li><a href="#L223" title="Defined at 223.">lock</a></li>
<li><a href="#L231" title="Defined at 231.">tryAcquire</a></li>
<li><a href="#L284" title="Defined at 284.">lock</a></li>
<li><a href="#L334" title="Defined at 334.">lockInterruptibly</a></li>
<li><a href="#L364" title="Defined at 364.">tryLock</a></li>
<li><a href="#L440" title="Defined at 440.">tryLock</a></li>
<li><a href="#L456" title="Defined at 456.">unlock</a></li>
<li><a href="#L499" title="Defined at 499.">newCondition</a></li>
<li><a href="#L532" title="Defined at 532.">getHoldCount</a></li>
<li><a href="#L577" title="Defined at 577.">isHeldByCurrentThread</a></li>
<li><a href="#L589" title="Defined at 589.">isLocked</a></li>
<li><a href="#L598" title="Defined at 598.">isFair</a></li>
<li><a href="#L615" title="Defined at 615.">getOwner</a></li>
<li><a href="#L629" title="Defined at 629.">hasQueuedThreads</a></li>
<li><a href="#L644" title="Defined at 644.">hasQueuedThread</a></li>
<li><a href="#L658" title="Defined at 658.">getQueueLength</a></li>
<li><a href="#L673" title="Defined at 673.">getQueuedThreads</a></li>
<li><a href="#L692" title="Defined at 692.">hasWaiters</a></li>
<li><a href="#L715" title="Defined at 715.">getWaitQueueLength</a></li>
<li><a href="#L740" title="Defined at 740.">getWaitingThreads</a></li>
<li><a href="#L756" title="Defined at 756.">toString</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent.locks;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.concurrent.TimeUnit;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.Collection;
<a id="L39" name="L39"></a>  39 
<div class="comment">
  A reentrant mutual exclusion <a href="../D/5200.html" title="Multiple defined in 4 places.">Lock</a> with the same basic
  behavior and semantics as the implicit monitor lock accessed using
  <code>synchronized</code> methods and statements, but with extended
  capabilities.
  <p>A <code>ReentrantLock</code> is <em>owned</em> by the thread last
  successfully locking, but not yet unlocking it. A thread invoking
  <code>lock</code> will return, successfully acquiring the lock, when
  the lock is not owned by another thread. The method will return
  immediately if the current thread already owns the lock. This can
  be checked using methods <a href="#L577" title="Defined at 577.">isHeldByCurrentThread</a>, and {@link
  #getHoldCount}.
  </p><p>The constructor for this class accepts an optional
  <em>fairness</em> parameter.  When set <code>true</code>, under
  contention, locks favor granting access to the longest-waiting
  thread.  Otherwise this lock does not guarantee any particular
  access order.  Programs using fair locks accessed by many threads
  may display lower overall throughput (i.e., are slower; often much
  slower) than those using the default setting, but have smaller
  variances in times to obtain locks and guarantee lack of
  starvation. Note however, that fairness of locks does not guarantee
  fairness of thread scheduling. Thus, one of many threads using a
  fair lock may obtain it multiple times in succession while other
  active threads are not progressing and not currently holding the
  lock.
  Also note that the untimed {@link #tryLock()} method does not
  honor the fairness setting. It will succeed if the lock
  is available even if other threads are waiting.
  </p><p>It is recommended practice to <em>always</em> immediately
  follow a call to <code>lock</code> with a <code>try</code> block, most
  typically in a before/after construction such as:
   </p><pre> {@code
  class X {
    private final ReentrantLock lock = new ReentrantLock();
    // ...
    public void m() {
      lock.lock();  // block until condition holds
      try {
        // ... method body
      } finally {
        lock.unlock()
      }
    }
  }}</pre>
  <p>In addition to implementing the <a href="../D/5200.html" title="Multiple defined in 4 places.">Lock</a> interface, this
  class defines a number of <code>public</code> and <code>protected</code>
  methods for inspecting the state of the lock.  Some of these
  methods are only useful for instrumentation and monitoring.
  </p><p>Serialization of this class behaves in the same way as built-in
  locks: a deserialized lock is in the unlocked state, regardless of
  its state when serialized.
  </p><p>This lock supports a maximum of 2147483647 recursive locks by
  the same thread. Attempts to exceed this limit result in
  <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> throws from locking methods.
  @since 1.5
  @author Doug Lea</p></div>
<a id="L106" name="L106"></a> 106 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6530.html" title="Multiple referred from 196 places.">ReentrantLock</a> <strong class="reserved">implements</strong> <a href="../D/5200.html" title="Multiple defined in 4 places.">Lock</a>, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L107" name="L107"></a> 107     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7373984872572414699L;
<div class="comment">
     /** Synchronizer providing all implementation mechanics */</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/8573.html" title="Multiple defined in 5 places.">Sync</a> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>;
<a id="L110" name="L110"></a> 110 
<div class="comment">
      Base of synchronization control for this lock. Subclassed
      into fair and nonfair versions below. Uses AQS state to
      represent the number of holds on the lock.</div>
<a id="L116" name="L116"></a> 116     <strong class="reserved">abstract</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/7786.html" title="Multiple referred from 25 places.">Sync</a> <strong class="reserved">extends</strong> <a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a> <em class="brace">{</em>
<a id="L117" name="L117"></a> 117         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -5179523762034025860L;
<a id="L118" name="L118"></a> 118 
<div class="comment">
          Performs {@link Lock#lock}. The main reason for subclassing
          is to allow fast path for nonfair version.</div>
<a id="L123" name="L123"></a> 123         <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/22669.html" title="Multiple referred from 810 places.">lock</a>();
<a id="L124" name="L124"></a> 124 
<div class="comment">
          Performs non-fair tryLock.  tryAcquire is implemented in
          subclasses, but both need nonfair try for trylock method.</div>
<a id="L129" name="L129"></a> 129         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/23779.html" title="Multiple referred from 2 places.">nonfairTryAcquire</a>(<strong class="reserved">int</strong> acquires) <em class="brace">{</em>
<a id="L130" name="L130"></a> 130             <strong class="reserved">final</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L131" name="L131"></a> 131             <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L132" name="L132"></a> 132             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 0) <em class="brace">{</em>
<a id="L133" name="L133"></a> 133                 <strong class="reserved">if</strong> (<a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(0, acquires)) <em class="brace">{</em>
<a id="L134" name="L134"></a> 134                     <a href="../S/1048.html#L73" title="Defined at 73 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">setExclusiveOwnerThread</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>);
<a id="L135" name="L135"></a> 135                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L136" name="L136"></a> 136                 <em class="brace">}</em>
<a id="L137" name="L137"></a> 137             <em class="brace">}</em>
<a id="L138" name="L138"></a> 138             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> == <a href="../S/1048.html#L83" title="Defined at 83 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">getExclusiveOwnerThread</a>()) <em class="brace">{</em>
<a id="L139" name="L139"></a> 139                 <strong class="reserved">int</strong> nextc = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> + acquires;
<a id="L140" name="L140"></a> 140                 <strong class="reserved">if</strong> (nextc &lt; 0) <em class="comment">// overflow</em>
<a id="L141" name="L141"></a> 141                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("Maximum lock count exceeded");
<a id="L142" name="L142"></a> 142                 <a href="../D/34006.html" title="Multiple defined in 21 places.">setState</a>(nextc);
<a id="L143" name="L143"></a> 143                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L144" name="L144"></a> 144             <em class="brace">}</em>
<a id="L145" name="L145"></a> 145             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L146" name="L146"></a> 146         <em class="brace">}</em>
<a id="L147" name="L147"></a> 147 
<a id="L148" name="L148"></a> 148         <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/29560.html" title="Multiple referred from 7 places.">tryRelease</a>(<strong class="reserved">int</strong> releases) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149             <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>() - releases;
<a id="L150" name="L150"></a> 150             <strong class="reserved">if</strong> (<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>() != <a href="../S/1048.html#L83" title="Defined at 83 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">getExclusiveOwnerThread</a>())
<a id="L151" name="L151"></a> 151                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1703.html#L42" title="Defined at 42 in src/java/lang/IllegalMonitorStateException.java.">IllegalMonitorStateException</a>();
<a id="L152" name="L152"></a> 152             <strong class="reserved">boolean</strong> <a href="../D/16577.html" title="Multiple defined in 8 places.">free</a> = <strong class="reserved">false</strong>;
<a id="L153" name="L153"></a> 153             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 0) <em class="brace">{</em>
<a id="L154" name="L154"></a> 154                 <a href="../D/16577.html" title="Multiple defined in 8 places.">free</a> = <strong class="reserved">true</strong>;
<a id="L155" name="L155"></a> 155                 <a href="../S/1048.html#L73" title="Defined at 73 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">setExclusiveOwnerThread</a>(<strong class="reserved">null</strong>);
<a id="L156" name="L156"></a> 156             <em class="brace">}</em>
<a id="L157" name="L157"></a> 157             <a href="../D/34006.html" title="Multiple defined in 21 places.">setState</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L158" name="L158"></a> 158             <strong class="reserved">return</strong> <a href="../D/16577.html" title="Multiple defined in 8 places.">free</a>;
<a id="L159" name="L159"></a> 159         <em class="brace">}</em>
<a id="L160" name="L160"></a> 160 
<a id="L161" name="L161"></a> 161         <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/21524.html" title="Multiple referred from 17 places.">isHeldExclusively</a>() <em class="brace">{</em>
<a id="L162" name="L162"></a> 162             <em class="comment">// While we must in general read state before owner,</em>
<a id="L163" name="L163"></a> 163             <em class="comment">// we don't need to do so to check if current thread is owner</em>
<a id="L164" name="L164"></a> 164             <strong class="reserved">return</strong> <a href="../S/1048.html#L83" title="Defined at 83 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">getExclusiveOwnerThread</a>() == <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L165" name="L165"></a> 165         <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167         <strong class="reserved">final</strong> <a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a> <a href="../R/23534.html" title="Multiple referred from 15 places.">newCondition</a>() <em class="brace">{</em>
<a id="L168" name="L168"></a> 168             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>();
<a id="L169" name="L169"></a> 169         <em class="brace">}</em>
<a id="L170" name="L170"></a> 170 
<a id="L171" name="L171"></a> 171         <em class="comment">// Methods relayed from outer class</em>
<a id="L172" name="L172"></a> 172 
<a id="L173" name="L173"></a> 173         <strong class="reserved">final</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> <a href="../R/18200.html" title="Multiple referred from 29 places.">getOwner</a>() <em class="brace">{</em>
<a id="L174" name="L174"></a> 174             <strong class="reserved">return</strong> <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>() == 0 ? <strong class="reserved">null</strong> : <a href="../S/1048.html#L83" title="Defined at 83 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">getExclusiveOwnerThread</a>();
<a id="L175" name="L175"></a> 175         <em class="brace">}</em>
<a id="L176" name="L176"></a> 176 
<a id="L177" name="L177"></a> 177         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/1047.html#L533" title="Referred from 533 in src/java/util/concurrent/locks/ReentrantLock.java.">getHoldCount</a>() <em class="brace">{</em>
<a id="L178" name="L178"></a> 178             <strong class="reserved">return</strong> <a href="../D/25649.html" title="Multiple defined in 5 places.">isHeldExclusively</a>() ? <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>() : 0;
<a id="L179" name="L179"></a> 179         <em class="brace">}</em>
<a id="L180" name="L180"></a> 180 
<a id="L181" name="L181"></a> 181         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/21692.html" title="Multiple referred from 4 places.">isLocked</a>() <em class="brace">{</em>
<a id="L182" name="L182"></a> 182             <strong class="reserved">return</strong> <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>() != 0;
<a id="L183" name="L183"></a> 183         <em class="brace">}</em>
<a id="L184" name="L184"></a> 184 
<div class="comment">
          Reconstitutes the instance from a stream (that is, deserializes it).</div>
<a id="L188" name="L188"></a> 188         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L189" name="L189"></a> 189             <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L190" name="L190"></a> 190             s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L191" name="L191"></a> 191             <a href="../D/34006.html" title="Multiple defined in 21 places.">setState</a>(0); <em class="comment">// reset to unlocked state</em>
<a id="L192" name="L192"></a> 192         <em class="brace">}</em>
<a id="L193" name="L193"></a> 193     <em class="brace">}</em>
<a id="L194" name="L194"></a> 194 
<div class="comment">
      Sync object for non-fair locks</div>
<a id="L198" name="L198"></a> 198     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5578.html" title="Multiple referred from 5 places.">NonfairSync</a> <strong class="reserved">extends</strong> <a href="../D/8573.html" title="Multiple defined in 5 places.">Sync</a> <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 7316153563782823691L;
<a id="L200" name="L200"></a> 200 
<div class="comment">
          Performs lock.  Try immediate barge, backing up to normal
          acquire on failure.</div>
<a id="L205" name="L205"></a> 205         <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/22669.html" title="Multiple referred from 810 places.">lock</a>() <em class="brace">{</em>
<a id="L206" name="L206"></a> 206             <strong class="reserved">if</strong> (<a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(0, 1))
<a id="L207" name="L207"></a> 207                 <a href="../S/1048.html#L73" title="Defined at 73 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">setExclusiveOwnerThread</a>(<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>());
<a id="L208" name="L208"></a> 208             <strong class="reserved">else</strong>
<a id="L209" name="L209"></a> 209                 <a href="../D/10575.html" title="Multiple defined in 9 places.">acquire</a>(1);
<a id="L210" name="L210"></a> 210         <em class="brace">}</em>
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212         <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/29536.html" title="Multiple referred from 13 places.">tryAcquire</a>(<strong class="reserved">int</strong> acquires) <em class="brace">{</em>
<a id="L213" name="L213"></a> 213             <strong class="reserved">return</strong> <a href="../S/1047.html#L129" title="Defined at 129 in src/java/util/concurrent/locks/ReentrantLock.java.">nonfairTryAcquire</a>(acquires);
<a id="L214" name="L214"></a> 214         <em class="brace">}</em>
<a id="L215" name="L215"></a> 215     <em class="brace">}</em>
<a id="L216" name="L216"></a> 216 
<div class="comment">
      Sync object for fair locks</div>
<a id="L220" name="L220"></a> 220     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2866.html" title="Multiple referred from 6 places.">FairSync</a> <strong class="reserved">extends</strong> <a href="../D/8573.html" title="Multiple defined in 5 places.">Sync</a> <em class="brace">{</em>
<a id="L221" name="L221"></a> 221         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -3000897897090466540L;
<a id="L222" name="L222"></a> 222 
<a id="L223" name="L223"></a> 223         <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/22669.html" title="Multiple referred from 810 places.">lock</a>() <em class="brace">{</em>
<a id="L224" name="L224"></a> 224             <a href="../D/10575.html" title="Multiple defined in 9 places.">acquire</a>(1);
<a id="L225" name="L225"></a> 225         <em class="brace">}</em>
<a id="L226" name="L226"></a> 226 
<div class="comment">
          Fair version of tryAcquire.  Don't grant access unless
          recursive call or no waiters or is first.</div>
<a id="L231" name="L231"></a> 231         <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/29536.html" title="Multiple referred from 13 places.">tryAcquire</a>(<strong class="reserved">int</strong> acquires) <em class="brace">{</em>
<a id="L232" name="L232"></a> 232             <strong class="reserved">final</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../S/1769.html#L264" title="Defined at 264 in src/java/lang/Thread.java.">currentThread</a>();
<a id="L233" name="L233"></a> 233             <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L234" name="L234"></a> 234             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == 0) <em class="brace">{</em>
<a id="L235" name="L235"></a> 235                 <strong class="reserved">if</strong> (!<a href="../D/24165.html" title="Multiple defined in 2 places.">hasQueuedPredecessors</a>() &amp;&amp;
<a id="L236" name="L236"></a> 236                     <a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(0, acquires)) <em class="brace">{</em>
<a id="L237" name="L237"></a> 237                     <a href="../S/1048.html#L73" title="Defined at 73 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">setExclusiveOwnerThread</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>);
<a id="L238" name="L238"></a> 238                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L239" name="L239"></a> 239                 <em class="brace">}</em>
<a id="L240" name="L240"></a> 240             <em class="brace">}</em>
<a id="L241" name="L241"></a> 241             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> == <a href="../S/1048.html#L83" title="Defined at 83 in src/java/util/concurrent/locks/AbstractOwnableSynchronizer.java.">getExclusiveOwnerThread</a>()) <em class="brace">{</em>
<a id="L242" name="L242"></a> 242                 <strong class="reserved">int</strong> nextc = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> + acquires;
<a id="L243" name="L243"></a> 243                 <strong class="reserved">if</strong> (nextc &lt; 0)
<a id="L244" name="L244"></a> 244                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("Maximum lock count exceeded");
<a id="L245" name="L245"></a> 245                 <a href="../D/34006.html" title="Multiple defined in 21 places.">setState</a>(nextc);
<a id="L246" name="L246"></a> 246                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L247" name="L247"></a> 247             <em class="brace">}</em>
<a id="L248" name="L248"></a> 248             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L249" name="L249"></a> 249         <em class="brace">}</em>
<a id="L250" name="L250"></a> 250     <em class="brace">}</em>
<a id="L251" name="L251"></a> 251 
<div class="comment">
      Creates an instance of <code>ReentrantLock</code>.
      This is equivalent to using <code>ReentrantLock(false)</code>.</div>
<a id="L256" name="L256"></a> 256     <strong class="reserved">public</strong> ReentrantLock() <em class="brace">{</em>
<a id="L257" name="L257"></a> 257         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a> = <strong class="reserved">new</strong> <a href="../D/6119.html" title="Multiple defined in 3 places.">NonfairSync</a>();
<a id="L258" name="L258"></a> 258     <em class="brace">}</em>
<a id="L259" name="L259"></a> 259 
<div class="comment">
      Creates an instance of <code>ReentrantLock</code> with the
      given fairness policy.
      @param fair <code>true</code> if this lock should use a fair ordering policy</div>
<a id="L266" name="L266"></a> 266     <strong class="reserved">public</strong> ReentrantLock(<strong class="reserved">boolean</strong> fair) <em class="brace">{</em>
<a id="L267" name="L267"></a> 267         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a> = fair ? <strong class="reserved">new</strong> <a href="../D/3129.html" title="Multiple defined in 3 places.">FairSync</a>() : <strong class="reserved">new</strong> <a href="../D/6119.html" title="Multiple defined in 3 places.">NonfairSync</a>();
<a id="L268" name="L268"></a> 268     <em class="brace">}</em>
<a id="L269" name="L269"></a> 269 
<div class="comment">
      Acquires the lock.
      <p>Acquires the lock if it is not held by another thread and returns
      immediately, setting the lock hold count to one.
      </p><p>If the current thread already holds the lock then the hold
      count is incremented by one and the method returns immediately.
      </p><p>If the lock is held by another thread then the
      current thread becomes disabled for thread scheduling
      purposes and lies dormant until the lock has been acquired,
      at which time the lock hold count is set to one.</p></div>
<a id="L284" name="L284"></a> 284     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/22669.html" title="Multiple referred from 810 places.">lock</a>() <em class="brace">{</em>
<a id="L285" name="L285"></a> 285         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>();
<a id="L286" name="L286"></a> 286     <em class="brace">}</em>
<a id="L287" name="L287"></a> 287 
<div class="comment">
      Acquires the lock unless the current thread is
      {@linkplain Thread#interrupt interrupted}.
      <p>Acquires the lock if it is not held by another thread and returns
      immediately, setting the lock hold count to one.
      </p><p>If the current thread already holds this lock then the hold count
      is incremented by one and the method returns immediately.
      </p><p>If the lock is held by another thread then the
      current thread becomes disabled for thread scheduling
      purposes and lies dormant until one of two things happens:
      </p><ul><li>The lock is acquired by the current thread; or
      </li><li>Some other thread {@linkplain Thread#interrupt interrupts} the
      current thread.
      </li></ul>
      <p>If the lock is acquired by the current thread then the lock hold
      count is set to one.
      </p><p>If the current thread:
      </p><ul><li>has its interrupted status set on entry to this method; or
      </li><li>is {@linkplain Thread#interrupt interrupted} while acquiring
      the lock,
      </li></ul>
      then <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> is thrown and the current thread's
      interrupted status is cleared.
      <p>In this implementation, as this method is an explicit
      interruption point, preference is given to responding to the
      interrupt over normal or reentrant acquisition of the lock.
      @throws InterruptedException if the current thread is interrupted</p></div>
<a id="L334" name="L334"></a> 334     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/22670.html" title="Multiple referred from 18 places.">lockInterruptibly</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L335" name="L335"></a> 335         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/10580.html" title="Multiple defined in 2 places.">acquireInterruptibly</a>(1);
<a id="L336" name="L336"></a> 336     <em class="brace">}</em>
<a id="L337" name="L337"></a> 337 
<div class="comment">
      Acquires the lock only if it is not held by another thread at the time
      of invocation.
      <p>Acquires the lock if it is not held by another thread and
      returns immediately with the value <code>true</code>, setting the
      lock hold count to one. Even when this lock has been set to use a
      fair ordering policy, a call to <code>tryLock()</code> <em>will</em>
      immediately acquire the lock if it is available, whether or not
      other threads are currently waiting for the lock.
      This "barging" behavior can be useful in certain
      circumstances, even though it breaks fairness. If you want to honor
      the fairness setting for this lock, then use
      {@link #tryLock(long, TimeUnit) tryLock(0, TimeUnit.SECONDS) }
      which is almost equivalent (it also detects interruption).
      </p><p>If the current thread already holds this lock then the hold
      count is incremented by one and the method returns <code>true</code>.
      </p><p>If the lock is held by another thread then this method will return
      immediately with the value <code>false</code>.
      @return <code>true</code> if the lock was free and was acquired by the
              current thread, or the lock was already held by the current
              thread; and <code>false</code> otherwise</p></div>
<a id="L364" name="L364"></a> 364     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29552.html" title="Multiple referred from 5 places.">tryLock</a>() <em class="brace">{</em>
<a id="L365" name="L365"></a> 365         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../S/1047.html#L129" title="Defined at 129 in src/java/util/concurrent/locks/ReentrantLock.java.">nonfairTryAcquire</a>(1);
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<div class="comment">
      Acquires the lock if it is not held by another thread within the given
      waiting time and the current thread has not been
      {@linkplain Thread#interrupt interrupted}.
      <p>Acquires the lock if it is not held by another thread and returns
      immediately with the value <code>true</code>, setting the lock hold count
      to one. If this lock has been set to use a fair ordering policy then
      an available lock <em>will not</em> be acquired if any other threads
      are waiting for the lock. This is in contrast to the {@link #tryLock()}
      method. If you want a timed <code>tryLock</code> that does permit barging on
      a fair lock then combine the timed and un-timed forms together:
       </p><pre> {@code
      if (lock.tryLock() ||
          lock.tryLock(timeout, unit)) {
        ...
      }}</pre>
      <p>If the current thread
      already holds this lock then the hold count is incremented by one and
      the method returns <code>true</code>.
      </p><p>If the lock is held by another thread then the
      current thread becomes disabled for thread scheduling
      purposes and lies dormant until one of three things happens:
      </p><ul><li>The lock is acquired by the current thread; or
      </li><li>Some other thread {@linkplain Thread#interrupt interrupts}
      the current thread; or
      </li><li>The specified waiting time elapses
      </li></ul>
      <p>If the lock is acquired then the value <code>true</code> is returned and
      the lock hold count is set to one.
      </p><p>If the current thread:
      </p><ul><li>has its interrupted status set on entry to this method; or
      </li><li>is {@linkplain Thread#interrupt interrupted} while
      acquiring the lock,
      </li></ul>
      then <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> is thrown and the current thread's
      interrupted status is cleared.
      <p>If the specified waiting time elapses then the value <code>false</code>
      is returned.  If the time is less than or equal to zero, the method
      will not wait at all.
      </p><p>In this implementation, as this method is an explicit
      interruption point, preference is given to responding to the
      interrupt over normal or reentrant acquisition of the lock, and
      over reporting the elapse of the waiting time.
      @param timeout the time to wait for the lock
      @param unit the time unit of the timeout argument
      @return <code>true</code> if the lock was free and was acquired by the
              current thread, or the lock was already held by the current
              thread; and <code>false</code> if the waiting time elapsed before
              the lock could be acquired
      @throws InterruptedException if the current thread is interrupted
      @throws NullPointerException if the time unit is null</p></div>
<a id="L440" name="L440"></a> 440     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29552.html" title="Multiple referred from 5 places.">tryLock</a>(<strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit)
<a id="L441" name="L441"></a> 441             <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L442" name="L442"></a> 442         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/35708.html" title="Multiple defined in 2 places.">tryAcquireNanos</a>(1, unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout));
<a id="L443" name="L443"></a> 443     <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<div class="comment">
      Attempts to release this lock.
      <p>If the current thread is the holder of this lock then the hold
      count is decremented.  If the hold count is now zero then the lock
      is released.  If the current thread is not the holder of this
      lock then <a href="../S/1703.html#L42" title="Defined at 42 in src/java/lang/IllegalMonitorStateException.java.">IllegalMonitorStateException</a> is thrown.
      @throws IllegalMonitorStateException if the current thread does not
              hold this lock</p></div>
<a id="L456" name="L456"></a> 456     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29713.html" title="Multiple referred from 276 places.">unlock</a>() <em class="brace">{</em>
<a id="L457" name="L457"></a> 457         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/30632.html" title="Multiple defined in 19 places.">release</a>(1);
<a id="L458" name="L458"></a> 458     <em class="brace">}</em>
<a id="L459" name="L459"></a> 459 
<div class="comment">
      Returns a <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> instance for use with this
      <a href="../D/5200.html" title="Multiple defined in 4 places.">Lock</a> instance.
      <p>The returned <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> instance supports the same
      usages as do the {@link Object} monitor methods ({@link
      Object#wait() wait}, {@link Object#notify notify}, and {@link
      Object#notifyAll notifyAll}) when used with the built-in
      monitor lock.
      </p><ul><li>If this lock is not held when any of the <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a>
      {@linkplain Condition#await() waiting} or {@linkplain
      Condition#signal signalling} methods are called, then an {@link
      IllegalMonitorStateException} is thrown.
      </li><li>When the condition {@linkplain Condition#await() waiting}
      methods are called the lock is released and, before they
      return, the lock is reacquired and the lock hold count restored
      to what it was when the method was called.
      </li><li>If a thread is {@linkplain Thread#interrupt interrupted}
      while waiting then the wait will terminate, an {@link
      InterruptedException} will be thrown, and the thread's
      interrupted status will be cleared.
      </li><li> Waiting threads are signalled in FIFO order.
      </li><li>The ordering of lock reacquisition for threads returning
      from waiting methods is the same as for threads initially
      acquiring the lock, which is in the default case not specified,
      but for <em>fair</em> locks favors those threads that have been
      waiting the longest.
      </li></ul>
      @return the Condition object</div>
<a id="L499" name="L499"></a> 499     <strong class="reserved">public</strong> <a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> <a href="../R/23534.html" title="Multiple referred from 15 places.">newCondition</a>() <em class="brace">{</em>
<a id="L500" name="L500"></a> 500         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/27977.html" title="Multiple defined in 8 places.">newCondition</a>();
<a id="L501" name="L501"></a> 501     <em class="brace">}</em>
<a id="L502" name="L502"></a> 502 
<div class="comment">
      Queries the number of holds on this lock by the current thread.
      <p>A thread has a hold on a lock for each lock action that is not
      matched by an unlock action.
      </p><p>The hold count information is typically only used for testing and
      debugging purposes. For example, if a certain section of code should
      not be entered with the lock already held then we can assert that
      fact:
       </p><pre> {@code
      class X {
        ReentrantLock lock = new ReentrantLock();
        // ...
        public void m() {
          assert lock.getHoldCount() == 0;
          lock.lock();
          try {
            // ... method body
          } finally {
            lock.unlock();
          }
        }
      }}</pre>
      @return the number of holds on this lock by the current thread,
              or zero if this lock is not held by the current thread</div>
<a id="L532" name="L532"></a> 532     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/1047.html#L533" title="Referred from 533 in src/java/util/concurrent/locks/ReentrantLock.java.">getHoldCount</a>() <em class="brace">{</em>
<a id="L533" name="L533"></a> 533         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/19474.html" title="Multiple defined in 3 places.">getHoldCount</a>();
<a id="L534" name="L534"></a> 534     <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<div class="comment">
      Queries if this lock is held by the current thread.
      <p>Analogous to the {@link Thread#holdsLock(Object)} method for
      built-in monitor locks, this method is typically used for
      debugging and testing. For example, a method that should only be
      called while a lock is held can assert that this is the case:
       </p><pre> {@code
      class X {
        ReentrantLock lock = new ReentrantLock();
        // ...
        public void m() {
            assert lock.isHeldByCurrentThread();
            // ... method body
        }
      }}</pre>
      <p>It can also be used to ensure that a reentrant lock is used
      in a non-reentrant manner, for example:
       </p><pre> {@code
      class X {
        ReentrantLock lock = new ReentrantLock();
        // ...
        public void m() {
            assert !lock.isHeldByCurrentThread();
            lock.lock();
            try {
                // ... method body
            } finally {
                lock.unlock();
            }
        }
      }}</pre>
      @return <code>true</code> if current thread holds this lock and
              <code>false</code> otherwise</div>
<a id="L577" name="L577"></a> 577     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isHeldByCurrentThread() <em class="brace">{</em>
<a id="L578" name="L578"></a> 578         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/25649.html" title="Multiple defined in 5 places.">isHeldExclusively</a>();
<a id="L579" name="L579"></a> 579     <em class="brace">}</em>
<a id="L580" name="L580"></a> 580 
<div class="comment">
      Queries if this lock is held by any thread. This method is
      designed for use in monitoring of the system state,
      not for synchronization control.
      @return <code>true</code> if any thread holds this lock and
              <code>false</code> otherwise</div>
<a id="L589" name="L589"></a> 589     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21692.html" title="Multiple referred from 4 places.">isLocked</a>() <em class="brace">{</em>
<a id="L590" name="L590"></a> 590         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/25832.html" title="Multiple defined in 3 places.">isLocked</a>();
<a id="L591" name="L591"></a> 591     <em class="brace">}</em>
<a id="L592" name="L592"></a> 592 
<div class="comment">
      Returns <code>true</code> if this lock has fairness set true.
      @return <code>true</code> if this lock has fairness set true</div>
<a id="L598" name="L598"></a> 598     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> isFair() <em class="brace">{</em>
<a id="L599" name="L599"></a> 599         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a> <strong class="reserved">instanceof</strong> <a href="../D/3129.html" title="Multiple defined in 3 places.">FairSync</a>;
<a id="L600" name="L600"></a> 600     <em class="brace">}</em>
<a id="L601" name="L601"></a> 601 
<div class="comment">
      Returns the thread that currently owns this lock, or
      <code>null</code> if not owned. When this method is called by a
      thread that is not the owner, the return value reflects a
      best-effort approximation of current lock status. For example,
      the owner may be momentarily <code>null</code> even if there are
      threads trying to acquire the lock but have not yet done so.
      This method is designed to facilitate construction of
      subclasses that provide more extensive lock monitoring
      facilities.
      @return the owner, or <code>null</code> if not owned</div>
<a id="L615" name="L615"></a> 615     <strong class="reserved">protected</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> <a href="../R/18200.html" title="Multiple referred from 29 places.">getOwner</a>() <em class="brace">{</em>
<a id="L616" name="L616"></a> 616         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/21291.html" title="Multiple defined in 12 places.">getOwner</a>();
<a id="L617" name="L617"></a> 617     <em class="brace">}</em>
<a id="L618" name="L618"></a> 618 
<div class="comment">
      Queries whether any threads are waiting to acquire this lock. Note that
      because cancellations may occur at any time, a <code>true</code>
      return does not guarantee that any other thread will ever
      acquire this lock.  This method is designed primarily for use in
      monitoring of the system state.
      @return <code>true</code> if there may be other threads waiting to
              acquire the lock</div>
<a id="L629" name="L629"></a> 629     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/20258.html" title="Multiple referred from 5 places.">hasQueuedThreads</a>() <em class="brace">{</em>
<a id="L630" name="L630"></a> 630         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/24168.html" title="Multiple defined in 5 places.">hasQueuedThreads</a>();
<a id="L631" name="L631"></a> 631     <em class="brace">}</em>
<a id="L632" name="L632"></a> 632 
<div class="comment">
      Queries whether the given thread is waiting to acquire this
      lock. Note that because cancellations may occur at any time, a
      <code>true</code> return does not guarantee that this thread
      will ever acquire this lock.  This method is designed primarily for use
      in monitoring of the system state.
      @param thread the thread
      @return <code>true</code> if the given thread is queued waiting for this lock
      @throws NullPointerException if the thread is null</div>
<a id="L644" name="L644"></a> 644     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> hasQueuedThread(<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> thread) <em class="brace">{</em>
<a id="L645" name="L645"></a> 645         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/26120.html" title="Multiple defined in 2 places.">isQueued</a>(thread);
<a id="L646" name="L646"></a> 646     <em class="brace">}</em>
<a id="L647" name="L647"></a> 647 
<div class="comment">
      Returns an estimate of the number of threads waiting to
      acquire this lock.  The value is only an estimate because the number of
      threads may change dynamically while this method traverses
      internal data structures.  This method is designed for use in
      monitoring of the system state, not for synchronization
      control.
      @return the estimated number of threads waiting for this lock</div>
<a id="L658" name="L658"></a> 658     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/18572.html" title="Multiple referred from 3 places.">getQueueLength</a>() <em class="brace">{</em>
<a id="L659" name="L659"></a> 659         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/21806.html" title="Multiple defined in 5 places.">getQueueLength</a>();
<a id="L660" name="L660"></a> 660     <em class="brace">}</em>
<a id="L661" name="L661"></a> 661 
<div class="comment">
      Returns a collection containing threads that may be waiting to
      acquire this lock.  Because the actual set of threads may change
      dynamically while constructing this result, the returned
      collection is only a best-effort estimate.  The elements of the
      returned collection are in no particular order.  This method is
      designed to facilitate construction of subclasses that provide
      more extensive monitoring facilities.
      @return the collection of threads</div>
<a id="L673" name="L673"></a> 673     <strong class="reserved">protected</strong> <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>&gt; <a href="../R/18573.html" title="Multiple referred from 3 places.">getQueuedThreads</a>() <em class="brace">{</em>
<a id="L674" name="L674"></a> 674         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/21810.html" title="Multiple defined in 5 places.">getQueuedThreads</a>();
<a id="L675" name="L675"></a> 675     <em class="brace">}</em>
<a id="L676" name="L676"></a> 676 
<div class="comment">
      Queries whether any threads are waiting on the given condition
      associated with this lock. Note that because timeouts and
      interrupts may occur at any time, a <code>true</code> return does
      not guarantee that a future <code>signal</code> will awaken any
      threads.  This method is designed primarily for use in
      monitoring of the system state.
      @param condition the condition
      @return <code>true</code> if there are any waiting threads
      @throws IllegalMonitorStateException if this lock is not held
      @throws IllegalArgumentException if the given condition is
              not associated with this lock
      @throws NullPointerException if the condition is null</div>
<a id="L692" name="L692"></a> 692     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20290.html" title="Multiple referred from 6 places.">hasWaiters</a>(<a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> condition) <em class="brace">{</em>
<a id="L693" name="L693"></a> 693         <strong class="reserved">if</strong> (condition == <strong class="reserved">null</strong>)
<a id="L694" name="L694"></a> 694             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L695" name="L695"></a> 695         <strong class="reserved">if</strong> (!(condition <strong class="reserved">instanceof</strong> <a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a>.<a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>))
<a id="L696" name="L696"></a> 696             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("not owner");
<a id="L697" name="L697"></a> 697         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/24209.html" title="Multiple defined in 6 places.">hasWaiters</a>((<a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a>.<a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>)condition);
<a id="L698" name="L698"></a> 698     <em class="brace">}</em>
<a id="L699" name="L699"></a> 699 
<div class="comment">
      Returns an estimate of the number of threads waiting on the
      given condition associated with this lock. Note that because
      timeouts and interrupts may occur at any time, the estimate
      serves only as an upper bound on the actual number of waiters.
      This method is designed for use in monitoring of the system
      state, not for synchronization control.
      @param condition the condition
      @return the estimated number of waiting threads
      @throws IllegalMonitorStateException if this lock is not held
      @throws IllegalArgumentException if the given condition is
              not associated with this lock
      @throws NullPointerException if the condition is null</div>
<a id="L715" name="L715"></a> 715     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19840.html" title="Multiple referred from 4 places.">getWaitQueueLength</a>(<a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> condition) <em class="brace">{</em>
<a id="L716" name="L716"></a> 716         <strong class="reserved">if</strong> (condition == <strong class="reserved">null</strong>)
<a id="L717" name="L717"></a> 717             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L718" name="L718"></a> 718         <strong class="reserved">if</strong> (!(condition <strong class="reserved">instanceof</strong> <a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a>.<a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>))
<a id="L719" name="L719"></a> 719             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("not owner");
<a id="L720" name="L720"></a> 720         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/23651.html" title="Multiple defined in 6 places.">getWaitQueueLength</a>((<a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a>.<a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>)condition);
<a id="L721" name="L721"></a> 721     <em class="brace">}</em>
<a id="L722" name="L722"></a> 722 
<div class="comment">
      Returns a collection containing those threads that may be
      waiting on the given condition associated with this lock.
      Because the actual set of threads may change dynamically while
      constructing this result, the returned collection is only a
      best-effort estimate. The elements of the returned collection
      are in no particular order.  This method is designed to
      facilitate construction of subclasses that provide more
      extensive condition monitoring facilities.
      @param condition the condition
      @return the collection of threads
      @throws IllegalMonitorStateException if this lock is not held
      @throws IllegalArgumentException if the given condition is
              not associated with this lock
      @throws NullPointerException if the condition is null</div>
<a id="L740" name="L740"></a> 740     <strong class="reserved">protected</strong> <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>&gt; <a href="../R/19841.html" title="Multiple referred from 4 places.">getWaitingThreads</a>(<a href="../S/1049.html#L179" title="Defined at 179 in src/java/util/concurrent/locks/Condition.java.">Condition</a> condition) <em class="brace">{</em>
<a id="L741" name="L741"></a> 741         <strong class="reserved">if</strong> (condition == <strong class="reserved">null</strong>)
<a id="L742" name="L742"></a> 742             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L743" name="L743"></a> 743         <strong class="reserved">if</strong> (!(condition <strong class="reserved">instanceof</strong> <a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a>.<a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>))
<a id="L744" name="L744"></a> 744             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("not owner");
<a id="L745" name="L745"></a> 745         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/23655.html" title="Multiple defined in 6 places.">getWaitingThreads</a>((<a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a>.<a href="../D/1784.html" title="Multiple defined in 2 places.">ConditionObject</a>)condition);
<a id="L746" name="L746"></a> 746     <em class="brace">}</em>
<a id="L747" name="L747"></a> 747 
<div class="comment">
      Returns a string identifying this lock, as well as its lock state.
      The state, in brackets, includes either the String <code>"Unlocked"</code>
      or the String <code>"Locked by"</code> followed by the
      {@linkplain Thread#getName name} of the owning thread.
      @return a string identifying this lock, as well as its lock state</div>
<a id="L756" name="L756"></a> 756     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L757" name="L757"></a> 757         <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/21291.html" title="Multiple defined in 12 places.">getOwner</a>();
<a id="L758" name="L758"></a> 758         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>() + ((<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> == <strong class="reserved">null</strong>) ?
<a id="L759" name="L759"></a> 759                                    "[Unlocked]" :
<a id="L760" name="L760"></a> 760                                    "[Locked by thread " + <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() + "]");
<a id="L761" name="L761"></a> 761     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L123">[^]</a><a href="#L756">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
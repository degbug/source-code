<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/compiler/Compiler.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L116">[^]</a><a href="#L1254">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L116" title="Defined at 116.">compile</a></li>
<li><a href="#L211" title="Defined at 211.">compileOperation</a></li>
<li><a href="#L233" title="Defined at 233.">compileUnary</a></li>
<li><a href="#L253" title="Defined at 253.">or</a></li>
<li><a href="#L267" title="Defined at 267.">and</a></li>
<li><a href="#L281" title="Defined at 281.">notequals</a></li>
<li><a href="#L295" title="Defined at 295.">equals</a></li>
<li><a href="#L309" title="Defined at 309.">lte</a></li>
<li><a href="#L323" title="Defined at 323.">lt</a></li>
<li><a href="#L337" title="Defined at 337.">gte</a></li>
<li><a href="#L351" title="Defined at 351.">gt</a></li>
<li><a href="#L365" title="Defined at 365.">plus</a></li>
<li><a href="#L379" title="Defined at 379.">minus</a></li>
<li><a href="#L393" title="Defined at 393.">mult</a></li>
<li><a href="#L407" title="Defined at 407.">div</a></li>
<li><a href="#L421" title="Defined at 421.">mod</a></li>
<li><a href="#L449" title="Defined at 449.">neg</a></li>
<li><a href="#L463" title="Defined at 463.">string</a></li>
<li><a href="#L477" title="Defined at 477.">bool</a></li>
<li><a href="#L491" title="Defined at 491.">number</a></li>
<li><a href="#L505" title="Defined at 505.">literal</a></li>
<li><a href="#L522" title="Defined at 522.">numberlit</a></li>
<li><a href="#L539" title="Defined at 539.">variable</a></li>
<li><a href="#L568" title="Defined at 568.">group</a></li>
<li><a href="#L584" title="Defined at 584.">arg</a></li>
<li><a href="#L620" title="Defined at 620.">getLocationPathDepth</a></li>
<li><a href="#L628" title="Defined at 628.">getFunctionTable</a></li>
<li><a href="#L643" title="Defined at 643.">locationPath</a></li>
<li><a href="#L666" title="Defined at 666.">predicate</a></li>
<li><a href="#L680" title="Defined at 680.">matchPattern</a></li>
<li><a href="#L726" title="Defined at 726.">locationPathPattern</a></li>
<li><a href="#L744" title="Defined at 744.">getWhatToShow</a></li>
<li><a href="#L823" title="Defined at 823.">stepPattern</a></li>
<li><a href="#L949" title="Defined at 949.">getCompiledPredicates</a></li>
<li><a href="#L976" title="Defined at 976.">countPredicates</a></li>
<li><a href="#L1000" title="Defined at 1000.">compilePredicates</a></li>
<li><a href="#L1020" title="Defined at 1020.">compileFunction</a></li>
<li><a href="#L1085" title="Defined at 1085.">getNextMethodId</a></li>
<li><a href="#L1102" title="Defined at 1102.">compileExtension</a></li>
<li><a href="#L1160" title="Defined at 1160.">warn</a></li>
<li><a href="#L1187" title="Defined at 1187.">assertion</a></li>
<li><a href="#L1213" title="Defined at 1213.">error</a></li>
<li><a href="#L1244" title="Defined at 1244.">getNamespaceContext</a></li>
<li><a href="#L1254" title="Defined at 1254.">setNamespaceContext</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: Compiler.java,v 1.2.4.1 2005/09/14 19:47:10 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal.compiler;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> javax.xml.transform.ErrorListener;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> javax.xml.transform.SourceLocator;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> javax.xml.transform.TransformerException;
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.res.XSLMessages;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.Axis;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMFilter;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMIterator;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.PrefixResolver;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.QName;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.SAXSourceLocator;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.Expression;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.axes.UnionPathIterator;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.axes.WalkerFactory;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.functions.FuncExtFunction;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.functions.FuncExtFunctionAvailable;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.functions.Function;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.functions.WrongNumberArgsException;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XNumber;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XString;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.And;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Div;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Equals;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Gt;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Gte;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Lt;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Lte;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Minus;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Mod;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Mult;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Neg;
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.NotEquals;
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Operation;
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Or;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Plus;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.UnaryOperation;
<a id="L61" name="L61"></a>  61 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.operations.Variable;
<a id="L62" name="L62"></a>  62 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.patterns.FunctionPattern;
<a id="L63" name="L63"></a>  63 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.patterns.NodeTest;
<a id="L64" name="L64"></a>  64 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.patterns.StepPattern;
<a id="L65" name="L65"></a>  65 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.patterns.UnionPattern;
<a id="L66" name="L66"></a>  66 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
<a id="L67" name="L67"></a>  67 
<div class="comment">
  An instance of this class compiles an XPath string expression into
  a Expression object.  This class compiles the string into a sequence
  of operation codes (op map) and then builds from that into an Expression
  tree.
  @xsl.usage advanced</div>
<a id="L75" name="L75"></a>  75 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1559.html" title="Multiple referred from 66 places.">Compiler</a> <strong class="reserved">extends</strong> <a href="../S/4996.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">OpMap</a>
<a id="L76" name="L76"></a>  76 <em class="brace">{</em>
<a id="L77" name="L77"></a>  77 
<div class="comment">
    Construct a Compiler object with a specific ErrorListener and
    SourceLocator where the expression is located.
    @param errorHandler Error listener where messages will be sent, or null
                        if messages should be sent to System err.
    @param locator The location object where the expression lives, which
                   may be null, but which, if not null, must be valid over
                   the long haul, in other words, it will not be cloned.
    @param fTable  The FunctionTable object where the xpath build-in
                   functions are stored.</div>
<a id="L90" name="L90"></a>  90   <strong class="reserved">public</strong> Compiler(<a href="../S/4030.html#L53" title="Defined at 53 in src/javax/xml/transform/ErrorListener.java.">ErrorListener</a> errorHandler, <a href="../S/4044.html#L32" title="Defined at 32 in src/javax/xml/transform/SourceLocator.java.">SourceLocator</a> locator,
<a id="L91" name="L91"></a>  91             <a href="../S/4995.html#L33" title="Defined at 33 in src/com/sun/org/apache/xpath/internal/compiler/FunctionTable.java.">FunctionTable</a> fTable)
<a id="L92" name="L92"></a>  92   <em class="brace">{</em>
<a id="L93" name="L93"></a>  93     m_errorHandler = errorHandler;
<a id="L94" name="L94"></a>  94     m_locator = locator;
<a id="L95" name="L95"></a>  95     m_functionTable = fTable;
<a id="L96" name="L96"></a>  96   <em class="brace">}</em>
<a id="L97" name="L97"></a>  97 
<div class="comment">
    Construct a Compiler instance that has a null error listener and a
    null source locator.</div>
<a id="L102" name="L102"></a> 102   <strong class="reserved">public</strong> Compiler()
<a id="L103" name="L103"></a> 103   <em class="brace">{</em>
<a id="L104" name="L104"></a> 104     m_errorHandler = <strong class="reserved">null</strong>;
<a id="L105" name="L105"></a> 105     m_locator = <strong class="reserved">null</strong>;
<a id="L106" name="L106"></a> 106   <em class="brace">}</em>
<a id="L107" name="L107"></a> 107 
<div class="comment">
    Execute the XPath object from a given opcode position.
    @param opPos The current position in the xpath.m_opMap array.
    @return The result of the XPath.
    @throws TransformerException if there is a syntax or other error.
    @xsl.usage advanced</div>
<a id="L116" name="L116"></a> 116   <strong class="reserved">public</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/11734.html" title="Multiple referred from 113 places.">compile</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L117" name="L117"></a> 117   <em class="brace">{</em>
<a id="L118" name="L118"></a> 118 
<a id="L119" name="L119"></a> 119     <strong class="reserved">int</strong> <a href="../D/28500.html" title="Multiple defined in 3 places.">op</a> = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos);
<a id="L120" name="L120"></a> 120 
<a id="L121" name="L121"></a> 121     <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <strong class="reserved">null</strong>;
<a id="L122" name="L122"></a> 122     <em class="comment">// System.out.println(getPatternString()+"op: "+op);</em>
<a id="L123" name="L123"></a> 123     <strong class="reserved">switch</strong> (<a href="../D/28500.html" title="Multiple defined in 3 places.">op</a>)
<a id="L124" name="L124"></a> 124     <em class="brace">{</em>
<a id="L125" name="L125"></a> 125     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_XPATH :
<a id="L126" name="L126"></a> 126       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos + 2); <strong class="reserved">break</strong>;
<a id="L127" name="L127"></a> 127     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_OR :
<a id="L128" name="L128"></a> 128       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/28550.html" title="Multiple defined in 8 places.">or</a>(opPos); <strong class="reserved">break</strong>;
<a id="L129" name="L129"></a> 129     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_AND :
<a id="L130" name="L130"></a> 130       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/11334.html" title="Multiple defined in 8 places.">and</a>(opPos); <strong class="reserved">break</strong>;
<a id="L131" name="L131"></a> 131     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_NOTEQUALS :
<a id="L132" name="L132"></a> 132       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L281" title="Defined at 281 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">notequals</a>(opPos); <strong class="reserved">break</strong>;
<a id="L133" name="L133"></a> 133     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_EQUALS :
<a id="L134" name="L134"></a> 134       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(opPos); <strong class="reserved">break</strong>;
<a id="L135" name="L135"></a> 135     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LTE :
<a id="L136" name="L136"></a> 136       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L309" title="Defined at 309 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">lte</a>(opPos); <strong class="reserved">break</strong>;
<a id="L137" name="L137"></a> 137     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LT :
<a id="L138" name="L138"></a> 138       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/27185.html" title="Multiple defined in 3 places.">lt</a>(opPos); <strong class="reserved">break</strong>;
<a id="L139" name="L139"></a> 139     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_GTE :
<a id="L140" name="L140"></a> 140       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L337" title="Defined at 337 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">gte</a>(opPos); <strong class="reserved">break</strong>;
<a id="L141" name="L141"></a> 141     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_GT :
<a id="L142" name="L142"></a> 142       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/23928.html" title="Multiple defined in 2 places.">gt</a>(opPos); <strong class="reserved">break</strong>;
<a id="L143" name="L143"></a> 143     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_PLUS :
<a id="L144" name="L144"></a> 144       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/29361.html" title="Multiple defined in 51 places.">plus</a>(opPos); <strong class="reserved">break</strong>;
<a id="L145" name="L145"></a> 145     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_MINUS :
<a id="L146" name="L146"></a> 146       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/27709.html" title="Multiple defined in 46 places.">minus</a>(opPos); <strong class="reserved">break</strong>;
<a id="L147" name="L147"></a> 147     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_MULT :
<a id="L148" name="L148"></a> 148       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L393" title="Defined at 393 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">mult</a>(opPos); <strong class="reserved">break</strong>;
<a id="L149" name="L149"></a> 149     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_DIV :
<a id="L150" name="L150"></a> 150       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/14980.html" title="Multiple defined in 2 places.">div</a>(opPos); <strong class="reserved">break</strong>;
<a id="L151" name="L151"></a> 151     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_MOD :
<a id="L152" name="L152"></a> 152       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/27733.html" title="Multiple defined in 4 places.">mod</a>(opPos); <strong class="reserved">break</strong>;
<a id="L153" name="L153"></a> 153 <em class="comment">//    case OpCodes.OP_QUO :</em>
<a id="L154" name="L154"></a> 154 <em class="comment">//      expr = quo(opPos); break;</em>
<a id="L155" name="L155"></a> 155     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_NEG :
<a id="L156" name="L156"></a> 156       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L449" title="Defined at 449 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">neg</a>(opPos); <strong class="reserved">break</strong>;
<a id="L157" name="L157"></a> 157     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_STRING :
<a id="L158" name="L158"></a> 158       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>(opPos); <strong class="reserved">break</strong>;
<a id="L159" name="L159"></a> 159     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_BOOL :
<a id="L160" name="L160"></a> 160       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/11887.html" title="Multiple defined in 15 places.">bool</a>(opPos); <strong class="reserved">break</strong>;
<a id="L161" name="L161"></a> 161     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_NUMBER :
<a id="L162" name="L162"></a> 162       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L491" title="Defined at 491 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">number</a>(opPos); <strong class="reserved">break</strong>;
<a id="L163" name="L163"></a> 163     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_UNION :
<a id="L164" name="L164"></a> 164       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <strong class="reserved">union</strong>(opPos); <strong class="reserved">break</strong>;
<a id="L165" name="L165"></a> 165     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LITERAL :
<a id="L166" name="L166"></a> 166       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/26885.html" title="Multiple defined in 4 places.">literal</a>(opPos); <strong class="reserved">break</strong>;
<a id="L167" name="L167"></a> 167     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_VARIABLE :
<a id="L168" name="L168"></a> 168       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L539" title="Defined at 539 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">variable</a>(opPos); <strong class="reserved">break</strong>;
<a id="L169" name="L169"></a> 169     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_GROUP :
<a id="L170" name="L170"></a> 170       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>(opPos); <strong class="reserved">break</strong>;
<a id="L171" name="L171"></a> 171     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_NUMBERLIT :
<a id="L172" name="L172"></a> 172       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L522" title="Defined at 522 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">numberlit</a>(opPos); <strong class="reserved">break</strong>;
<a id="L173" name="L173"></a> 173     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_ARGUMENT :
<a id="L174" name="L174"></a> 174       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>(opPos); <strong class="reserved">break</strong>;
<a id="L175" name="L175"></a> 175     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_EXTFUNCTION :
<a id="L176" name="L176"></a> 176       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L1102" title="Defined at 1102 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileExtension</a>(opPos); <strong class="reserved">break</strong>;
<a id="L177" name="L177"></a> 177     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_FUNCTION :
<a id="L178" name="L178"></a> 178       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L1020" title="Defined at 1020 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileFunction</a>(opPos); <strong class="reserved">break</strong>;
<a id="L179" name="L179"></a> 179     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LOCATIONPATH :
<a id="L180" name="L180"></a> 180       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L643" title="Defined at 643 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">locationPath</a>(opPos); <strong class="reserved">break</strong>;
<a id="L181" name="L181"></a> 181     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_PREDICATE :
<a id="L182" name="L182"></a> 182       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <strong class="reserved">null</strong>; <strong class="reserved">break</strong>;  <em class="comment">// should never hit this here.</em>
<a id="L183" name="L183"></a> 183     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_MATCHPATTERN :
<a id="L184" name="L184"></a> 184       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L680" title="Defined at 680 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">matchPattern</a>(opPos + 2); <strong class="reserved">break</strong>;
<a id="L185" name="L185"></a> 185     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LOCATIONPATHPATTERN :
<a id="L186" name="L186"></a> 186       <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a> = <a href="../S/4997.html#L726" title="Defined at 726 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">locationPathPattern</a>(opPos); <strong class="reserved">break</strong>;
<a id="L187" name="L187"></a> 187     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_QUO:
<a id="L188" name="L188"></a> 188       <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_UNKNOWN_OPCODE,
<a id="L189" name="L189"></a> 189             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> "quo" <em class="brace">}</em>);  <em class="comment">//"ERROR! Unknown op code: "+m_opMap[opPos]);</em>
<a id="L190" name="L190"></a> 190       <strong class="reserved">break</strong>;
<a id="L191" name="L191"></a> 191     <strong class="reserved">default</strong> :
<a id="L192" name="L192"></a> 192       <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_UNKNOWN_OPCODE,
<a id="L193" name="L193"></a> 193             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos)) <em class="brace">}</em>);  <em class="comment">//"ERROR! Unknown op code: "+m_opMap[opPos]);</em>
<a id="L194" name="L194"></a> 194     <em class="brace">}</em>
<a id="L195" name="L195"></a> 195 <em class="comment">//    if(null != expr)</em>
<a id="L196" name="L196"></a> 196 <em class="comment">//      expr.setSourceLocator(m_locator);</em>
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198     <strong class="reserved">return</strong> <a href="../D/15885.html" title="Multiple defined in 2 places.">expr</a>;
<a id="L199" name="L199"></a> 199   <em class="brace">}</em>
<a id="L200" name="L200"></a> 200 
<div class="comment">
    Bottle-neck compilation of an operation with left and right operands.
    @param operation non-null reference to parent operation.
    @param opPos The op map position of the parent operation.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Operation} instance.
    @throws TransformerException if there is a syntax or other error.</div>
<a id="L211" name="L211"></a> 211   <strong class="reserved">private</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/11752.html" title="Multiple referred from 13 places.">compileOperation</a>(<a href="../D/6392.html" title="Multiple defined in 3 places.">Operation</a> <a href="../D/28537.html" title="Multiple defined in 8 places.">operation</a>, <strong class="reserved">int</strong> opPos)
<a id="L212" name="L212"></a> 212           <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L213" name="L213"></a> 213   <em class="brace">{</em>
<a id="L214" name="L214"></a> 214 
<a id="L215" name="L215"></a> 215     <strong class="reserved">int</strong> leftPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L216" name="L216"></a> 216     <strong class="reserved">int</strong> rightPos = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(leftPos);
<a id="L217" name="L217"></a> 217 
<a id="L218" name="L218"></a> 218     <a href="../D/28537.html" title="Multiple defined in 8 places.">operation</a>.<a href="../S/4915.html#L88" title="Defined at 88 in src/com/sun/org/apache/xpath/internal/operations/Operation.java.">setLeftRight</a>(<a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(leftPos), <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(rightPos));
<a id="L219" name="L219"></a> 219 
<a id="L220" name="L220"></a> 220     <strong class="reserved">return</strong> <a href="../D/28537.html" title="Multiple defined in 8 places.">operation</a>;
<a id="L221" name="L221"></a> 221   <em class="brace">}</em>
<a id="L222" name="L222"></a> 222 
<div class="comment">
    Bottle-neck compilation of a unary operation.
    @param unary The parent unary operation.
    @param opPos The position in the op map of the parent operation.
    @return The unary argument.
    @throws TransformerException if syntax or other error occurs.</div>
<a id="L233" name="L233"></a> 233   <strong class="reserved">private</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/11768.html" title="Multiple referred from 4 places.">compileUnary</a>(<a href="../S/4912.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/operations/UnaryOperation.java.">UnaryOperation</a> unary, <strong class="reserved">int</strong> opPos)
<a id="L234" name="L234"></a> 234           <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L235" name="L235"></a> 235   <em class="brace">{</em>
<a id="L236" name="L236"></a> 236 
<a id="L237" name="L237"></a> 237     <strong class="reserved">int</strong> rightPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L238" name="L238"></a> 238 
<a id="L239" name="L239"></a> 239     unary.<a href="../D/33745.html" title="Multiple defined in 2 places.">setRight</a>(<a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(rightPos));
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241     <strong class="reserved">return</strong> unary;
<a id="L242" name="L242"></a> 242   <em class="brace">}</em>
<a id="L243" name="L243"></a> 243 
<div class="comment">
    Compile an 'or' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Or} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L253" name="L253"></a> 253   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/24008.html" title="Multiple referred from 9 places.">or</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L254" name="L254"></a> 254   <em class="brace">{</em>
<a id="L255" name="L255"></a> 255     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4933.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Or.java.">Or</a>(), opPos);
<a id="L256" name="L256"></a> 256   <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<div class="comment">
    Compile an 'and' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.And} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L267" name="L267"></a> 267   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/10171.html" title="Multiple referred from 5 places.">and</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L268" name="L268"></a> 268   <em class="brace">{</em>
<a id="L269" name="L269"></a> 269     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4924.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/And.java.">And</a>(), opPos);
<a id="L270" name="L270"></a> 270   <em class="brace">}</em>
<a id="L271" name="L271"></a> 271 
<div class="comment">
    Compile a '!=' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.NotEquals} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L281" name="L281"></a> 281   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L132" title="Referred from 132 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">notequals</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L282" name="L282"></a> 282   <em class="brace">{</em>
<a id="L283" name="L283"></a> 283     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4930.html#L31" title="Defined at 31 in src/com/sun/org/apache/xpath/internal/operations/NotEquals.java.">NotEquals</a>(), opPos);
<a id="L284" name="L284"></a> 284   <em class="brace">}</em>
<a id="L285" name="L285"></a> 285 
<div class="comment">
    Compile a '=' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Equals} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L295" name="L295"></a> 295   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L296" name="L296"></a> 296   <em class="brace">{</em>
<a id="L297" name="L297"></a> 297     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4926.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Equals.java.">Equals</a>(), opPos);
<a id="L298" name="L298"></a> 298   <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<div class="comment">
    Compile a '&lt;=' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Lte} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L309" name="L309"></a> 309   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L136" title="Referred from 136 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">lte</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L310" name="L310"></a> 310   <em class="brace">{</em>
<a id="L311" name="L311"></a> 311     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4916.html#L31" title="Defined at 31 in src/com/sun/org/apache/xpath/internal/operations/Lte.java.">Lte</a>(), opPos);
<a id="L312" name="L312"></a> 312   <em class="brace">}</em>
<a id="L313" name="L313"></a> 313 
<div class="comment">
    Compile a '&lt;' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Lt} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L323" name="L323"></a> 323   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/22802.html" title="Multiple referred from 53 places.">lt</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L324" name="L324"></a> 324   <em class="brace">{</em>
<a id="L325" name="L325"></a> 325     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4932.html#L31" title="Defined at 31 in src/com/sun/org/apache/xpath/internal/operations/Lt.java.">Lt</a>(), opPos);
<a id="L326" name="L326"></a> 326   <em class="brace">}</em>
<a id="L327" name="L327"></a> 327 
<div class="comment">
    Compile a '&gt;=' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Gte} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L337" name="L337"></a> 337   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L140" title="Referred from 140 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">gte</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L338" name="L338"></a> 338   <em class="brace">{</em>
<a id="L339" name="L339"></a> 339     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4925.html#L31" title="Defined at 31 in src/com/sun/org/apache/xpath/internal/operations/Gte.java.">Gte</a>(), opPos);
<a id="L340" name="L340"></a> 340   <em class="brace">}</em>
<a id="L341" name="L341"></a> 341 
<div class="comment">
    Compile a '&gt;' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Gt} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L351" name="L351"></a> 351   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L142" title="Referred from 142 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">gt</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L352" name="L352"></a> 352   <em class="brace">{</em>
<a id="L353" name="L353"></a> 353     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4918.html#L31" title="Defined at 31 in src/com/sun/org/apache/xpath/internal/operations/Gt.java.">Gt</a>(), opPos);
<a id="L354" name="L354"></a> 354   <em class="brace">}</em>
<a id="L355" name="L355"></a> 355 
<div class="comment">
    Compile a '+' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Plus} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L365" name="L365"></a> 365   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/24754.html" title="Multiple referred from 106 places.">plus</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L366" name="L366"></a> 366   <em class="brace">{</em>
<a id="L367" name="L367"></a> 367     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4931.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Plus.java.">Plus</a>(), opPos);
<a id="L368" name="L368"></a> 368   <em class="brace">}</em>
<a id="L369" name="L369"></a> 369 
<div class="comment">
    Compile a '-' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Minus} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L379" name="L379"></a> 379   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/23298.html" title="Multiple referred from 38 places.">minus</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L380" name="L380"></a> 380   <em class="brace">{</em>
<a id="L381" name="L381"></a> 381     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4927.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Minus.java.">Minus</a>(), opPos);
<a id="L382" name="L382"></a> 382   <em class="brace">}</em>
<a id="L383" name="L383"></a> 383 
<div class="comment">
    Compile a '*' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Mult} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L393" name="L393"></a> 393   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/23400.html" title="Multiple referred from 16 places.">mult</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L394" name="L394"></a> 394   <em class="brace">{</em>
<a id="L395" name="L395"></a> 395     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4913.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Mult.java.">Mult</a>(), opPos);
<a id="L396" name="L396"></a> 396   <em class="brace">}</em>
<a id="L397" name="L397"></a> 397 
<div class="comment">
    Compile a 'div' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Div} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L407" name="L407"></a> 407   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/13346.html" title="Multiple referred from 12 places.">div</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L408" name="L408"></a> 408   <em class="brace">{</em>
<a id="L409" name="L409"></a> 409     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4919.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Div.java.">Div</a>(), opPos);
<a id="L410" name="L410"></a> 410   <em class="brace">}</em>
<a id="L411" name="L411"></a> 411 
<div class="comment">
    Compile a 'mod' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Mod} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L421" name="L421"></a> 421   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/23319.html" title="Multiple referred from 147 places.">mod</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L422" name="L422"></a> 422   <em class="brace">{</em>
<a id="L423" name="L423"></a> 423     <strong class="reserved">return</strong> <a href="../S/4997.html#L211" title="Defined at 211 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileOperation</a>(<strong class="reserved">new</strong> <a href="../S/4928.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Mod.java.">Mod</a>(), opPos);
<a id="L424" name="L424"></a> 424   <em class="brace">}</em>
<a id="L425" name="L425"></a> 425 
<div class="comment">
    Compile a 'quo' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Quo} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L435" name="L435"></a> 435 <em class="comment">//  protected Expression quo(int opPos) throws TransformerException</em>
<a id="L436" name="L436"></a> 436 <em class="comment">//  {</em>
<a id="L437" name="L437"></a> 437 <em class="comment">//    return compileOperation(new Quo(), opPos);</em>
<a id="L438" name="L438"></a> 438 <em class="comment">//  }</em>
<a id="L439" name="L439"></a> 439 
<div class="comment">
    Compile a unary '-' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Neg} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L449" name="L449"></a> 449   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/23509.html" title="Multiple referred from 49 places.">neg</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L450" name="L450"></a> 450   <em class="brace">{</em>
<a id="L451" name="L451"></a> 451     <strong class="reserved">return</strong> <a href="../S/4997.html#L233" title="Defined at 233 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileUnary</a>(<strong class="reserved">new</strong> <a href="../D/6018.html" title="Multiple defined in 2 places.">Neg</a>(), opPos);
<a id="L452" name="L452"></a> 452   <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<div class="comment">
    Compile a 'string(...)' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.String} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L463" name="L463"></a> 463   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/28943.html" title="Multiple referred from 369 places.">string</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L464" name="L464"></a> 464   <em class="brace">{</em>
<a id="L465" name="L465"></a> 465     <strong class="reserved">return</strong> <a href="../S/4997.html#L233" title="Defined at 233 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileUnary</a>(<strong class="reserved">new</strong> com.sun.org.apache.xpath.internal.operations.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>(), opPos);
<a id="L466" name="L466"></a> 466   <em class="brace">}</em>
<a id="L467" name="L467"></a> 467 
<div class="comment">
    Compile a 'boolean(...)' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Bool} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L477" name="L477"></a> 477   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/10641.html" title="Multiple referred from 37 places.">bool</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L478" name="L478"></a> 478   <em class="brace">{</em>
<a id="L479" name="L479"></a> 479     <strong class="reserved">return</strong> <a href="../S/4997.html#L233" title="Defined at 233 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileUnary</a>(<strong class="reserved">new</strong> com.sun.org.apache.xpath.internal.operations.<a href="../S/4929.html#L32" title="Defined at 32 in src/com/sun/org/apache/xpath/internal/operations/Bool.java.">Bool</a>(), opPos);
<a id="L480" name="L480"></a> 480   <em class="brace">}</em>
<a id="L481" name="L481"></a> 481 
<div class="comment">
    Compile a 'number(...)' operation.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Number} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L491" name="L491"></a> 491   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/23852.html" title="Multiple referred from 185 places.">number</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L492" name="L492"></a> 492   <em class="brace">{</em>
<a id="L493" name="L493"></a> 493     <strong class="reserved">return</strong> <a href="../S/4997.html#L233" title="Defined at 233 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileUnary</a>(<strong class="reserved">new</strong> com.sun.org.apache.xpath.internal.operations.<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>(), opPos);
<a id="L494" name="L494"></a> 494   <em class="brace">}</em>
<a id="L495" name="L495"></a> 495 
<div class="comment">
    Compile a literal string value.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.objects.XString} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L505" name="L505"></a> 505   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/22540.html" title="Multiple referred from 94 places.">literal</a>(<strong class="reserved">int</strong> opPos)
<a id="L506" name="L506"></a> 506   <em class="brace">{</em>
<a id="L507" name="L507"></a> 507 
<a id="L508" name="L508"></a> 508     opPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510     <strong class="reserved">return</strong> (<a href="../S/4898.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/objects/XString.java.">XString</a>) <a href="../S/4996.html#L84" title="Defined at 84 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getTokenQueue</a>().<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos));
<a id="L511" name="L511"></a> 511   <em class="brace">}</em>
<a id="L512" name="L512"></a> 512 
<div class="comment">
    Compile a literal number value.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.objects.XNumber} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L522" name="L522"></a> 522   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L172" title="Referred from 172 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">numberlit</a>(<strong class="reserved">int</strong> opPos)
<a id="L523" name="L523"></a> 523   <em class="brace">{</em>
<a id="L524" name="L524"></a> 524 
<a id="L525" name="L525"></a> 525     opPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527     <strong class="reserved">return</strong> (<a href="../S/4902.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/objects/XNumber.java.">XNumber</a>) <a href="../S/4996.html#L84" title="Defined at 84 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getTokenQueue</a>().<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos));
<a id="L528" name="L528"></a> 528   <em class="brace">}</em>
<a id="L529" name="L529"></a> 529 
<div class="comment">
    Compile a variable reference.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.operations.Variable} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L539" name="L539"></a> 539   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/30111.html" title="Multiple referred from 9 places.">variable</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L540" name="L540"></a> 540   <em class="brace">{</em>
<a id="L541" name="L541"></a> 541 
<a id="L542" name="L542"></a> 542     <a href="../D/9517.html" title="Multiple defined in 2 places.">Variable</a> var = <strong class="reserved">new</strong> <a href="../D/9517.html" title="Multiple defined in 2 places.">Variable</a>();
<a id="L543" name="L543"></a> 543 
<a id="L544" name="L544"></a> 544     opPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L545" name="L545"></a> 545 
<a id="L546" name="L546"></a> 546     <strong class="reserved">int</strong> nsPos = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos);
<a id="L547" name="L547"></a> 547     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a>
<a id="L548" name="L548"></a> 548       = (<a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.EMPTY == nsPos) ? <strong class="reserved">null</strong>
<a id="L549" name="L549"></a> 549                                    : (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/4996.html#L84" title="Defined at 84 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getTokenQueue</a>().<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(nsPos);
<a id="L550" name="L550"></a> 550     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> localname
<a id="L551" name="L551"></a> 551       = (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/4996.html#L84" title="Defined at 84 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getTokenQueue</a>().<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos+1));
<a id="L552" name="L552"></a> 552     <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> qname = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>(<a href="../D/27870.html" title="Multiple defined in 10 places.">namespace</a>, localname);
<a id="L553" name="L553"></a> 553 
<a id="L554" name="L554"></a> 554     var.<a href="../D/33638.html" title="Multiple defined in 5 places.">setQName</a>(qname);
<a id="L555" name="L555"></a> 555 
<a id="L556" name="L556"></a> 556     <strong class="reserved">return</strong> var;
<a id="L557" name="L557"></a> 557   <em class="brace">}</em>
<a id="L558" name="L558"></a> 558 
<div class="comment">
    Compile an expression group.
    @param opPos The current position in the m_opMap array.
    @return reference to the contained expression.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L568" name="L568"></a> 568   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/20034.html" title="Multiple referred from 340 places.">group</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L569" name="L569"></a> 569   <em class="brace">{</em>
<a id="L570" name="L570"></a> 570 
<a id="L571" name="L571"></a> 571     <em class="comment">// no-op</em>
<a id="L572" name="L572"></a> 572     <strong class="reserved">return</strong> <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos + 2);
<a id="L573" name="L573"></a> 573   <em class="brace">}</em>
<a id="L574" name="L574"></a> 574 
<div class="comment">
    Compile a function argument.
    @param opPos The current position in the m_opMap array.
    @return reference to the argument expression.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L584" name="L584"></a> 584   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/10297.html" title="Multiple referred from 714 places.">arg</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L585" name="L585"></a> 585   <em class="brace">{</em>
<a id="L586" name="L586"></a> 586 
<a id="L587" name="L587"></a> 587     <em class="comment">// no-op</em>
<a id="L588" name="L588"></a> 588     <strong class="reserved">return</strong> <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos + 2);
<a id="L589" name="L589"></a> 589   <em class="brace">}</em>
<a id="L590" name="L590"></a> 590 
<div class="comment">
    Compile a location path union. The UnionPathIterator itself may create
    {@link com.sun.org.apache.xpath.internal.axes.LocPathIterator} children.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.axes.LocPathIterator} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L601" name="L601"></a> 601   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <strong class="reserved">union</strong>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L602" name="L602"></a> 602   <em class="brace">{</em>
<a id="L603" name="L603"></a> 603     locPathDepth++;
<a id="L604" name="L604"></a> 604     <strong class="reserved">try</strong>
<a id="L605" name="L605"></a> 605     <em class="brace">{</em>
<a id="L606" name="L606"></a> 606       <strong class="reserved">return</strong> <a href="../S/4873.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">UnionPathIterator</a>.<a href="../S/4873.html#L181" title="Defined at 181 in src/com/sun/org/apache/xpath/internal/axes/UnionPathIterator.java.">createUnionIterator</a>(<strong class="reserved">this</strong>, opPos);
<a id="L607" name="L607"></a> 607     <em class="brace">}</em>
<a id="L608" name="L608"></a> 608     <strong class="reserved">finally</strong>
<a id="L609" name="L609"></a> 609     <em class="brace">{</em>
<a id="L610" name="L610"></a> 610       locPathDepth--;
<a id="L611" name="L611"></a> 611     <em class="brace">}</em>
<a id="L612" name="L612"></a> 612   <em class="brace">}</em>
<a id="L613" name="L613"></a> 613 
<a id="L614" name="L614"></a> 614   <strong class="reserved">private</strong> <strong class="reserved">int</strong> locPathDepth = -1;
<a id="L615" name="L615"></a> 615 
<div class="comment">
    Get the level of the location path or union being constructed.
    @return 0 if it is a top-level path.</div>
<a id="L620" name="L620"></a> 620   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17455.html" title="Multiple referred from 4 places.">getLocationPathDepth</a>()
<a id="L621" name="L621"></a> 621   <em class="brace">{</em>
<a id="L622" name="L622"></a> 622     <strong class="reserved">return</strong> locPathDepth;
<a id="L623" name="L623"></a> 623   <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<div class="comment">
    Get the function table</div>
<a id="L628" name="L628"></a> 628   <a href="../S/4995.html#L33" title="Defined at 33 in src/com/sun/org/apache/xpath/internal/compiler/FunctionTable.java.">FunctionTable</a> <a href="../R/16742.html" title="Multiple referred from 2 places.">getFunctionTable</a>()
<a id="L629" name="L629"></a> 629   <em class="brace">{</em>
<a id="L630" name="L630"></a> 630     <strong class="reserved">return</strong> m_functionTable;
<a id="L631" name="L631"></a> 631   <em class="brace">}</em>
<a id="L632" name="L632"></a> 632 
<div class="comment">
    Compile a location path.  The LocPathIterator itself may create
    {@link com.sun.org.apache.xpath.internal.axes.AxesWalker} children.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.axes.LocPathIterator} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L643" name="L643"></a> 643   <strong class="reserved">public</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L180" title="Referred from 180 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">locationPath</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L644" name="L644"></a> 644   <em class="brace">{</em>
<a id="L645" name="L645"></a> 645     locPathDepth++;
<a id="L646" name="L646"></a> 646     <strong class="reserved">try</strong>
<a id="L647" name="L647"></a> 647     <em class="brace">{</em>
<a id="L648" name="L648"></a> 648       <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = <a href="../S/4868.html#L46" title="Defined at 46 in src/com/sun/org/apache/xpath/internal/axes/WalkerFactory.java.">WalkerFactory</a>.<a href="../S/4868.html#L160" title="Defined at 160 in src/com/sun/org/apache/xpath/internal/axes/WalkerFactory.java.">newDTMIterator</a>(<strong class="reserved">this</strong>, opPos, (locPathDepth == 0));
<a id="L649" name="L649"></a> 649       <strong class="reserved">return</strong> (<a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>)<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>; <em class="comment">// cast OK, I guess.</em>
<a id="L650" name="L650"></a> 650     <em class="brace">}</em>
<a id="L651" name="L651"></a> 651     <strong class="reserved">finally</strong>
<a id="L652" name="L652"></a> 652     <em class="brace">{</em>
<a id="L653" name="L653"></a> 653       locPathDepth--;
<a id="L654" name="L654"></a> 654     <em class="brace">}</em>
<a id="L655" name="L655"></a> 655   <em class="brace">}</em>
<a id="L656" name="L656"></a> 656 
<div class="comment">
    Compile a location step predicate expression.
    @param opPos The current position in the m_opMap array.
    @return the contained predicate expression.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L666" name="L666"></a> 666   <strong class="reserved">public</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/24907.html" title="Multiple referred from 86 places.">predicate</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L667" name="L667"></a> 667   <em class="brace">{</em>
<a id="L668" name="L668"></a> 668     <strong class="reserved">return</strong> <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos + 2);
<a id="L669" name="L669"></a> 669   <em class="brace">}</em>
<a id="L670" name="L670"></a> 670 
<div class="comment">
    Compile an entire match pattern expression.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.patterns.UnionPattern} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L680" name="L680"></a> 680   <strong class="reserved">protected</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L184" title="Referred from 184 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">matchPattern</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L681" name="L681"></a> 681   <em class="brace">{</em>
<a id="L682" name="L682"></a> 682     locPathDepth++;
<a id="L683" name="L683"></a> 683     <strong class="reserved">try</strong>
<a id="L684" name="L684"></a> 684     <em class="brace">{</em>
<a id="L685" name="L685"></a> 685       <em class="comment">// First, count...</em>
<a id="L686" name="L686"></a> 686       <strong class="reserved">int</strong> nextOpPos = opPos;
<a id="L687" name="L687"></a> 687       <strong class="reserved">int</strong> i;
<a id="L688" name="L688"></a> 688 
<a id="L689" name="L689"></a> 689       <strong class="reserved">for</strong> (i = 0; <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(nextOpPos) == <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LOCATIONPATHPATTERN; i++)
<a id="L690" name="L690"></a> 690       <em class="brace">{</em>
<a id="L691" name="L691"></a> 691         nextOpPos = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(nextOpPos);
<a id="L692" name="L692"></a> 692       <em class="brace">}</em>
<a id="L693" name="L693"></a> 693 
<a id="L694" name="L694"></a> 694       <strong class="reserved">if</strong> (i == 1)
<a id="L695" name="L695"></a> 695         <strong class="reserved">return</strong> <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos);
<a id="L696" name="L696"></a> 696 
<a id="L697" name="L697"></a> 697       <a href="../S/4863.html#L36" title="Defined at 36 in src/com/sun/org/apache/xpath/internal/patterns/UnionPattern.java.">UnionPattern</a> up = <strong class="reserved">new</strong> <a href="../S/4863.html#L36" title="Defined at 36 in src/com/sun/org/apache/xpath/internal/patterns/UnionPattern.java.">UnionPattern</a>();
<a id="L698" name="L698"></a> 698       <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>[] patterns = <strong class="reserved">new</strong> <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>[i];
<a id="L699" name="L699"></a> 699 
<a id="L700" name="L700"></a> 700       <strong class="reserved">for</strong> (i = 0; <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos) == <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_LOCATIONPATHPATTERN; i++)
<a id="L701" name="L701"></a> 701       <em class="brace">{</em>
<a id="L702" name="L702"></a> 702         nextOpPos = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos);
<a id="L703" name="L703"></a> 703         patterns[i] = (<a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>) <a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos);
<a id="L704" name="L704"></a> 704         opPos = nextOpPos;
<a id="L705" name="L705"></a> 705       <em class="brace">}</em>
<a id="L706" name="L706"></a> 706 
<a id="L707" name="L707"></a> 707       up.<a href="../S/4863.html#L82" title="Defined at 82 in src/com/sun/org/apache/xpath/internal/patterns/UnionPattern.java.">setPatterns</a>(patterns);
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709       <strong class="reserved">return</strong> up;
<a id="L710" name="L710"></a> 710     <em class="brace">}</em>
<a id="L711" name="L711"></a> 711     <strong class="reserved">finally</strong>
<a id="L712" name="L712"></a> 712     <em class="brace">{</em>
<a id="L713" name="L713"></a> 713       locPathDepth--;
<a id="L714" name="L714"></a> 714     <em class="brace">}</em>
<a id="L715" name="L715"></a> 715   <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<div class="comment">
    Compile a location match pattern unit expression.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.patterns.StepPattern} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L726" name="L726"></a> 726   <strong class="reserved">public</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L186" title="Referred from 186 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">locationPathPattern</a>(<strong class="reserved">int</strong> opPos)
<a id="L727" name="L727"></a> 727           <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L728" name="L728"></a> 728   <em class="brace">{</em>
<a id="L729" name="L729"></a> 729 
<a id="L730" name="L730"></a> 730     opPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L731" name="L731"></a> 731 
<a id="L732" name="L732"></a> 732     <strong class="reserved">return</strong> <a href="../S/4997.html#L823" title="Defined at 823 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">stepPattern</a>(opPos, 0, <strong class="reserved">null</strong>);
<a id="L733" name="L733"></a> 733   <em class="brace">}</em>
<a id="L734" name="L734"></a> 734 
<div class="comment">
    Get a {@link org.w3c.dom.traversal.NodeFilter} bit set that tells what
    to show for a given node test.
    @param opPos the op map position for the location step.
    @return {@link org.w3c.dom.traversal.NodeFilter} bit set that tells what
            to show for a given node test.</div>
<a id="L744" name="L744"></a> 744   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19853.html" title="Multiple referred from 27 places.">getWhatToShow</a>(<strong class="reserved">int</strong> opPos)
<a id="L745" name="L745"></a> 745   <em class="brace">{</em>
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747     <strong class="reserved">int</strong> axesType = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos);
<a id="L748" name="L748"></a> 748     <strong class="reserved">int</strong> testType = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos + 3);
<a id="L749" name="L749"></a> 749 
<a id="L750" name="L750"></a> 750     <em class="comment">// System.out.println("testType: "+testType);</em>
<a id="L751" name="L751"></a> 751     <strong class="reserved">switch</strong> (testType)
<a id="L752" name="L752"></a> 752     <em class="brace">{</em>
<a id="L753" name="L753"></a> 753     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODETYPE_COMMENT :
<a id="L754" name="L754"></a> 754       <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_COMMENT;
<a id="L755" name="L755"></a> 755     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODETYPE_TEXT :
<a id="L756" name="L756"></a> 756 <em class="comment">//      return DTMFilter.SHOW_TEXT | DTMFilter.SHOW_COMMENT;</em>
<a id="L757" name="L757"></a> 757       <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_TEXT | <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_CDATA_SECTION ;
<a id="L758" name="L758"></a> 758     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODETYPE_PI :
<a id="L759" name="L759"></a> 759       <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_PROCESSING_INSTRUCTION;
<a id="L760" name="L760"></a> 760     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODETYPE_NODE :
<a id="L761" name="L761"></a> 761 <em class="comment">//      return DTMFilter.SHOW_ALL;</em>
<a id="L762" name="L762"></a> 762       <strong class="reserved">switch</strong> (axesType)
<a id="L763" name="L763"></a> 763       <em class="brace">{</em>
<a id="L764" name="L764"></a> 764       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_NAMESPACE:
<a id="L765" name="L765"></a> 765         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_NAMESPACE;
<a id="L766" name="L766"></a> 766       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_ATTRIBUTES :
<a id="L767" name="L767"></a> 767       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_ATTRIBUTE :
<a id="L768" name="L768"></a> 768         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ATTRIBUTE;
<a id="L769" name="L769"></a> 769       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_SELF:
<a id="L770" name="L770"></a> 770       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_ANCESTORS_OR_SELF:
<a id="L771" name="L771"></a> 771       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_DESCENDANTS_OR_SELF:
<a id="L772" name="L772"></a> 772         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ALL;
<a id="L773" name="L773"></a> 773       <strong class="reserved">default</strong>:
<a id="L774" name="L774"></a> 774         <strong class="reserved">if</strong> (<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(0) == <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_MATCHPATTERN)
<a id="L775" name="L775"></a> 775           <strong class="reserved">return</strong> ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ATTRIBUTE
<a id="L776" name="L776"></a> 776                   &amp; ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_DOCUMENT
<a id="L777" name="L777"></a> 777                   &amp; ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_DOCUMENT_FRAGMENT;
<a id="L778" name="L778"></a> 778         <strong class="reserved">else</strong>
<a id="L779" name="L779"></a> 779           <strong class="reserved">return</strong> ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ATTRIBUTE;
<a id="L780" name="L780"></a> 780       <em class="brace">}</em>
<a id="L781" name="L781"></a> 781     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODETYPE_ROOT :
<a id="L782" name="L782"></a> 782       <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_DOCUMENT | <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_DOCUMENT_FRAGMENT;
<a id="L783" name="L783"></a> 783     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODETYPE_FUNCTEST :
<a id="L784" name="L784"></a> 784       <strong class="reserved">return</strong> <a href="../D/6106.html" title="Multiple defined in 4 places.">NodeTest</a>.SHOW_BYFUNCTION;
<a id="L785" name="L785"></a> 785     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.NODENAME :
<a id="L786" name="L786"></a> 786       <strong class="reserved">switch</strong> (axesType)
<a id="L787" name="L787"></a> 787       <em class="brace">{</em>
<a id="L788" name="L788"></a> 788       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_NAMESPACE :
<a id="L789" name="L789"></a> 789         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_NAMESPACE;
<a id="L790" name="L790"></a> 790       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_ATTRIBUTES :
<a id="L791" name="L791"></a> 791       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_ATTRIBUTE :
<a id="L792" name="L792"></a> 792         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ATTRIBUTE;
<a id="L793" name="L793"></a> 793 
<a id="L794" name="L794"></a> 794       <em class="comment">// break;</em>
<a id="L795" name="L795"></a> 795       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_ANY_ANCESTOR :
<a id="L796" name="L796"></a> 796       <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_IMMEDIATE_ANCESTOR :
<a id="L797" name="L797"></a> 797         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ELEMENT;
<a id="L798" name="L798"></a> 798 
<a id="L799" name="L799"></a> 799       <em class="comment">// break;</em>
<a id="L800" name="L800"></a> 800       <strong class="reserved">default</strong> :
<a id="L801" name="L801"></a> 801         <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ELEMENT;
<a id="L802" name="L802"></a> 802       <em class="brace">}</em>
<a id="L803" name="L803"></a> 803     <strong class="reserved">default</strong> :
<a id="L804" name="L804"></a> 804       <em class="comment">// System.err.println("We should never reach here.");</em>
<a id="L805" name="L805"></a> 805       <strong class="reserved">return</strong> <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ALL;
<a id="L806" name="L806"></a> 806     <em class="brace">}</em>
<a id="L807" name="L807"></a> 807   <em class="brace">}</em>
<a id="L808" name="L808"></a> 808 
<a id="L809" name="L809"></a> 809 <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG = <strong class="reserved">false</strong>;
<a id="L810" name="L810"></a> 810 
<div class="comment">
    Compile a step pattern unit expression, used for both location paths
    and match patterns.
    @param opPos The current position in the m_opMap array.
    @param stepCount The number of steps to expect.
    @param ancestorPattern The owning StepPattern, which may be null.
    @return reference to {@link com.sun.org.apache.xpath.internal.patterns.StepPattern} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L823" name="L823"></a> 823   <strong class="reserved">protected</strong> <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a> <a href="../R/28898.html" title="Multiple referred from 2 places.">stepPattern</a>(
<a id="L824" name="L824"></a> 824           <strong class="reserved">int</strong> opPos, <strong class="reserved">int</strong> stepCount, <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a> ancestorPattern)
<a id="L825" name="L825"></a> 825             <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L826" name="L826"></a> 826   <em class="brace">{</em>
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828     <strong class="reserved">int</strong> startOpPos = opPos;
<a id="L829" name="L829"></a> 829     <strong class="reserved">int</strong> stepType = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos);
<a id="L830" name="L830"></a> 830 
<a id="L831" name="L831"></a> 831     <strong class="reserved">if</strong> (<a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.ENDOP == stepType)
<a id="L832" name="L832"></a> 832     <em class="brace">{</em>
<a id="L833" name="L833"></a> 833       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L834" name="L834"></a> 834     <em class="brace">}</em>
<a id="L835" name="L835"></a> 835 
<a id="L836" name="L836"></a> 836     <strong class="reserved">boolean</strong> addMagicSelf = <strong class="reserved">true</strong>;
<a id="L837" name="L837"></a> 837 
<a id="L838" name="L838"></a> 838     <strong class="reserved">int</strong> endStep = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos);
<a id="L839" name="L839"></a> 839 
<a id="L840" name="L840"></a> 840     <em class="comment">// int nextStepType = getOpMap()[endStep];</em>
<a id="L841" name="L841"></a> 841     <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>;
<a id="L842" name="L842"></a> 842 
<a id="L843" name="L843"></a> 843     <em class="comment">// boolean isSimple = ((OpCodes.ENDOP == nextStepType) &amp;&amp; (stepCount == 0));</em>
<a id="L844" name="L844"></a> 844     <strong class="reserved">int</strong> argLen;
<a id="L845" name="L845"></a> 845 
<a id="L846" name="L846"></a> 846     <strong class="reserved">switch</strong> (stepType)
<a id="L847" name="L847"></a> 847     <em class="brace">{</em>
<a id="L848" name="L848"></a> 848     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_FUNCTION :
<a id="L849" name="L849"></a> 849       <strong class="reserved">if</strong>(DEBUG)
<a id="L850" name="L850"></a> 850         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("MATCH_FUNCTION: "+m_currentPattern);
<a id="L851" name="L851"></a> 851       addMagicSelf = <strong class="reserved">false</strong>;
<a id="L852" name="L852"></a> 852       argLen = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos + <a href="../S/4996.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">OpMap</a>.MAPINDEX_LENGTH);
<a id="L853" name="L853"></a> 853       <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> = <strong class="reserved">new</strong> <a href="../S/4862.html#L38" title="Defined at 38 in src/com/sun/org/apache/xpath/internal/patterns/FunctionPattern.java.">FunctionPattern</a>(<a href="../S/4997.html#L1020" title="Defined at 1020 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileFunction</a>(opPos), <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.PARENT, <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD);
<a id="L854" name="L854"></a> 854       <strong class="reserved">break</strong>;
<a id="L855" name="L855"></a> 855     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.FROM_ROOT :
<a id="L856" name="L856"></a> 856       <strong class="reserved">if</strong>(DEBUG)
<a id="L857" name="L857"></a> 857         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("FROM_ROOT, "+m_currentPattern);
<a id="L858" name="L858"></a> 858       addMagicSelf = <strong class="reserved">false</strong>;
<a id="L859" name="L859"></a> 859       argLen = <a href="../S/4996.html#L357" title="Defined at 357 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getArgLengthOfStep</a>(opPos);
<a id="L860" name="L860"></a> 860       opPos = <a href="../S/4996.html#L369" title="Defined at 369 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPosOfStep</a>(opPos);
<a id="L861" name="L861"></a> 861       <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> = <strong class="reserved">new</strong> <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>(<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_DOCUMENT |
<a id="L862" name="L862"></a> 862                                 <a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_DOCUMENT_FRAGMENT,
<a id="L863" name="L863"></a> 863                                 <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.PARENT, <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD);
<a id="L864" name="L864"></a> 864       <strong class="reserved">break</strong>;
<a id="L865" name="L865"></a> 865     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_ATTRIBUTE :
<a id="L866" name="L866"></a> 866      <strong class="reserved">if</strong>(DEBUG)
<a id="L867" name="L867"></a> 867         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("MATCH_ATTRIBUTE: "+<a href="../S/4996.html#L420" title="Defined at 420 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepLocalName</a>(startOpPos)+", "+m_currentPattern);
<a id="L868" name="L868"></a> 868       argLen = <a href="../S/4996.html#L357" title="Defined at 357 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getArgLengthOfStep</a>(opPos);
<a id="L869" name="L869"></a> 869       opPos = <a href="../S/4996.html#L369" title="Defined at 369 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPosOfStep</a>(opPos);
<a id="L870" name="L870"></a> 870       <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> = <strong class="reserved">new</strong> <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>(<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ATTRIBUTE,
<a id="L871" name="L871"></a> 871                                 <a href="../S/4996.html#L393" title="Defined at 393 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepNS</a>(startOpPos),
<a id="L872" name="L872"></a> 872                                 <a href="../S/4996.html#L420" title="Defined at 420 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepLocalName</a>(startOpPos),
<a id="L873" name="L873"></a> 873                                 <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.PARENT, <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.ATTRIBUTE);
<a id="L874" name="L874"></a> 874       <strong class="reserved">break</strong>;
<a id="L875" name="L875"></a> 875     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_ANY_ANCESTOR :
<a id="L876" name="L876"></a> 876       <strong class="reserved">if</strong>(DEBUG)
<a id="L877" name="L877"></a> 877         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("MATCH_ANY_ANCESTOR: "+<a href="../S/4996.html#L420" title="Defined at 420 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepLocalName</a>(startOpPos)+", "+m_currentPattern);
<a id="L878" name="L878"></a> 878       argLen = <a href="../S/4996.html#L357" title="Defined at 357 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getArgLengthOfStep</a>(opPos);
<a id="L879" name="L879"></a> 879       opPos = <a href="../S/4996.html#L369" title="Defined at 369 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPosOfStep</a>(opPos);
<a id="L880" name="L880"></a> 880       <strong class="reserved">int</strong> what = <a href="../D/23670.html" title="Multiple defined in 14 places.">getWhatToShow</a>(startOpPos);
<a id="L881" name="L881"></a> 881       <em class="comment">// bit-o-hackery, but this code is due for the morgue anyway...</em>
<a id="L882" name="L882"></a> 882       <strong class="reserved">if</strong>(0x00000500 == what)
<a id="L883" name="L883"></a> 883         addMagicSelf = <strong class="reserved">false</strong>;
<a id="L884" name="L884"></a> 884       <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> = <strong class="reserved">new</strong> <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>(<a href="../D/23670.html" title="Multiple defined in 14 places.">getWhatToShow</a>(startOpPos),
<a id="L885" name="L885"></a> 885                                         <a href="../S/4996.html#L393" title="Defined at 393 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepNS</a>(startOpPos),
<a id="L886" name="L886"></a> 886                                         <a href="../S/4996.html#L420" title="Defined at 420 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepLocalName</a>(startOpPos),
<a id="L887" name="L887"></a> 887                                         <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.ANCESTOR, <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD);
<a id="L888" name="L888"></a> 888       <strong class="reserved">break</strong>;
<a id="L889" name="L889"></a> 889     <strong class="reserved">case</strong> <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.MATCH_IMMEDIATE_ANCESTOR :
<a id="L890" name="L890"></a> 890       <strong class="reserved">if</strong>(DEBUG)
<a id="L891" name="L891"></a> 891         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("MATCH_IMMEDIATE_ANCESTOR: "+<a href="../S/4996.html#L420" title="Defined at 420 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepLocalName</a>(startOpPos)+", "+m_currentPattern);
<a id="L892" name="L892"></a> 892       argLen = <a href="../S/4996.html#L357" title="Defined at 357 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getArgLengthOfStep</a>(opPos);
<a id="L893" name="L893"></a> 893       opPos = <a href="../S/4996.html#L369" title="Defined at 369 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPosOfStep</a>(opPos);
<a id="L894" name="L894"></a> 894       <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a> = <strong class="reserved">new</strong> <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a>(<a href="../D/23670.html" title="Multiple defined in 14 places.">getWhatToShow</a>(startOpPos),
<a id="L895" name="L895"></a> 895                                 <a href="../S/4996.html#L393" title="Defined at 393 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepNS</a>(startOpPos),
<a id="L896" name="L896"></a> 896                                 <a href="../S/4996.html#L420" title="Defined at 420 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getStepLocalName</a>(startOpPos),
<a id="L897" name="L897"></a> 897                                 <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.PARENT, <a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD);
<a id="L898" name="L898"></a> 898       <strong class="reserved">break</strong>;
<a id="L899" name="L899"></a> 899     <strong class="reserved">default</strong> :
<a id="L900" name="L900"></a> 900       <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_UNKNOWN_MATCH_OPERATION, <strong class="reserved">null</strong>);  <em class="comment">//"unknown match operation!");</em>
<a id="L901" name="L901"></a> 901 
<a id="L902" name="L902"></a> 902       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L903" name="L903"></a> 903     <em class="brace">}</em>
<a id="L904" name="L904"></a> 904 
<a id="L905" name="L905"></a> 905     <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/33576.html" title="Multiple defined in 2 places.">setPredicates</a>(<a href="../S/4997.html#L949" title="Defined at 949 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">getCompiledPredicates</a>(opPos + argLen));
<a id="L906" name="L906"></a> 906     <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == ancestorPattern)
<a id="L907" name="L907"></a> 907     <em class="brace">{</em>
<a id="L908" name="L908"></a> 908       <em class="comment">// This is the magic and invisible "." at the head of every</em>
<a id="L909" name="L909"></a> 909       <em class="comment">// match pattern, and corresponds to the current node in the context</em>
<a id="L910" name="L910"></a> 910       <em class="comment">// list, from where predicates are counted.</em>
<a id="L911" name="L911"></a> 911       <em class="comment">// So, in order to calculate "foo[3]", it has to count from the</em>
<a id="L912" name="L912"></a> 912       <em class="comment">// current node in the context list, so, from that current node,</em>
<a id="L913" name="L913"></a> 913       <em class="comment">// the full pattern is really "self::node()/child::foo[3]".  If you</em>
<a id="L914" name="L914"></a> 914       <em class="comment">// translate this to a select pattern from the node being tested,</em>
<a id="L915" name="L915"></a> 915       <em class="comment">// which is really how we're treating match patterns, it works out to</em>
<a id="L916" name="L916"></a> 916       <em class="comment">// self::foo/parent::node[child::foo[3]]", or close enough.</em>
<div class="comment">
      if(addMagicSelf &amp;&amp; pattern.getPredicateCount() &gt; 0)
      {
        StepPattern selfPattern = new StepPattern(DTMFilter.SHOW_ALL,
                                                  Axis.PARENT, Axis.CHILD);
        // We need to keep the new nodetest from affecting the score...
        XNumber score = pattern.getStaticScore();
        pattern.setRelativePathPattern(selfPattern);
        pattern.setStaticScore(score);
        selfPattern.setStaticScore(score);
        }</div>
<a id="L927" name="L927"></a> 927     <em class="brace">}</em>
<a id="L928" name="L928"></a> 928     <strong class="reserved">else</strong>
<a id="L929" name="L929"></a> 929     <em class="brace">{</em>
<a id="L930" name="L930"></a> 930       <em class="comment">// System.out.println("Setting "+ancestorPattern+" as relative to "+pattern);</em>
<a id="L931" name="L931"></a> 931       <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../S/4858.html#L186" title="Defined at 186 in src/com/sun/org/apache/xpath/internal/patterns/StepPattern.java.">setRelativePathPattern</a>(ancestorPattern);
<a id="L932" name="L932"></a> 932     <em class="brace">}</em>
<a id="L933" name="L933"></a> 933 
<a id="L934" name="L934"></a> 934     <a href="../D/8385.html" title="Multiple defined in 3 places.">StepPattern</a> relativePathPattern = <a href="../S/4997.html#L823" title="Defined at 823 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">stepPattern</a>(endStep, stepCount + 1,
<a id="L935" name="L935"></a> 935                                         <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>);
<a id="L936" name="L936"></a> 936 
<a id="L937" name="L937"></a> 937     <strong class="reserved">return</strong> (<strong class="reserved">null</strong> != relativePathPattern) ? relativePathPattern : <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>;
<a id="L938" name="L938"></a> 938   <em class="brace">}</em>
<a id="L939" name="L939"></a> 939 
<div class="comment">
    Compile a zero or more predicates for a given match pattern.
    @param opPos The position of the first predicate the m_opMap array.
    @return reference to array of {@link com.sun.org.apache.xpath.internal.Expression} instances.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L949" name="L949"></a> 949   <strong class="reserved">public</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>[] <a href="../R/15708.html" title="Multiple referred from 3 places.">getCompiledPredicates</a>(<strong class="reserved">int</strong> opPos)
<a id="L950" name="L950"></a> 950           <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L951" name="L951"></a> 951   <em class="brace">{</em>
<a id="L952" name="L952"></a> 952 
<a id="L953" name="L953"></a> 953     <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <a href="../S/4997.html#L976" title="Defined at 976 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">countPredicates</a>(opPos);
<a id="L954" name="L954"></a> 954 
<a id="L955" name="L955"></a> 955     <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; 0)
<a id="L956" name="L956"></a> 956     <em class="brace">{</em>
<a id="L957" name="L957"></a> 957       <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>[] predicates = <strong class="reserved">new</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>];
<a id="L958" name="L958"></a> 958 
<a id="L959" name="L959"></a> 959       <a href="../S/4997.html#L1000" title="Defined at 1000 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compilePredicates</a>(opPos, predicates);
<a id="L960" name="L960"></a> 960 
<a id="L961" name="L961"></a> 961       <strong class="reserved">return</strong> predicates;
<a id="L962" name="L962"></a> 962     <em class="brace">}</em>
<a id="L963" name="L963"></a> 963 
<a id="L964" name="L964"></a> 964     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L965" name="L965"></a> 965   <em class="brace">}</em>
<a id="L966" name="L966"></a> 966 
<div class="comment">
    Count the number of predicates in the step.
    @param opPos The position of the first predicate the m_opMap array.
    @return The number of predicates for this step.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L976" name="L976"></a> 976   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/12181.html" title="Multiple referred from 3 places.">countPredicates</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L977" name="L977"></a> 977   <em class="brace">{</em>
<a id="L978" name="L978"></a> 978 
<a id="L979" name="L979"></a> 979     <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0;
<a id="L980" name="L980"></a> 980 
<a id="L981" name="L981"></a> 981     <strong class="reserved">while</strong> (<a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_PREDICATE == <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos))
<a id="L982" name="L982"></a> 982     <em class="brace">{</em>
<a id="L983" name="L983"></a> 983       <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++;
<a id="L984" name="L984"></a> 984 
<a id="L985" name="L985"></a> 985       opPos = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos);
<a id="L986" name="L986"></a> 986     <em class="brace">}</em>
<a id="L987" name="L987"></a> 987 
<a id="L988" name="L988"></a> 988     <strong class="reserved">return</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>;
<a id="L989" name="L989"></a> 989   <em class="brace">}</em>
<a id="L990" name="L990"></a> 990 
<div class="comment">
    Compiles predicates in the step.
    @param opPos The position of the first predicate the m_opMap array.
    @param predicates An empty pre-determined array of
               {@link com.sun.org.apache.xpath.internal.Expression}s, that will be filled in.
    @throws TransformerException</div>
<a id="L1000" name="L1000"></a>1000   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/4997.html#L959" title="Referred from 959 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compilePredicates</a>(<strong class="reserved">int</strong> opPos, <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a>[] predicates)
<a id="L1001" name="L1001"></a>1001           <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L1002" name="L1002"></a>1002   <em class="brace">{</em>
<a id="L1003" name="L1003"></a>1003 
<a id="L1004" name="L1004"></a>1004     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; <a href="../S/5001.html#L43" title="Defined at 43 in src/com/sun/org/apache/xpath/internal/compiler/OpCodes.java.">OpCodes</a>.OP_PREDICATE == <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos); i++)
<a id="L1005" name="L1005"></a>1005     <em class="brace">{</em>
<a id="L1006" name="L1006"></a>1006       predicates[i] = <a href="../S/4997.html#L666" title="Defined at 666 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">predicate</a>(opPos);
<a id="L1007" name="L1007"></a>1007       opPos = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos);
<a id="L1008" name="L1008"></a>1008     <em class="brace">}</em>
<a id="L1009" name="L1009"></a>1009   <em class="brace">}</em>
<a id="L1010" name="L1010"></a>1010 
<div class="comment">
    Compile a built-in XPath function.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.functions.Function} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L1020" name="L1020"></a>1020   <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../R/11745.html" title="Multiple referred from 2 places.">compileFunction</a>(<strong class="reserved">int</strong> opPos) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L1021" name="L1021"></a>1021   <em class="brace">{</em>
<a id="L1022" name="L1022"></a>1022 
<a id="L1023" name="L1023"></a>1023     <strong class="reserved">int</strong> endFunc = opPos + <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos + 1) - 1;
<a id="L1024" name="L1024"></a>1024 
<a id="L1025" name="L1025"></a>1025     opPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L1026" name="L1026"></a>1026 
<a id="L1027" name="L1027"></a>1027     <strong class="reserved">int</strong> funcID = <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos);
<a id="L1028" name="L1028"></a>1028 
<a id="L1029" name="L1029"></a>1029     opPos++;
<a id="L1030" name="L1030"></a>1030 
<a id="L1031" name="L1031"></a>1031     <strong class="reserved">if</strong> (-1 != funcID)
<a id="L1032" name="L1032"></a>1032     <em class="brace">{</em>
<a id="L1033" name="L1033"></a>1033       <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a> func = m_functionTable.<a href="../D/19263.html" title="Multiple defined in 2 places.">getFunction</a>(funcID);
<a id="L1034" name="L1034"></a>1034 
<div class="comment">
        It is a trick for function-available. Since the function table is an
        instance field, insert this table at compilation time for later usage</div>
<a id="L1039" name="L1039"></a>1039 
<a id="L1040" name="L1040"></a>1040       <strong class="reserved">if</strong> (func <strong class="reserved">instanceof</strong> <a href="../S/4986.html#L36" title="Defined at 36 in src/com/sun/org/apache/xpath/internal/functions/FuncExtFunctionAvailable.java.">FuncExtFunctionAvailable</a>)
<a id="L1041" name="L1041"></a>1041           ((<a href="../S/4986.html#L36" title="Defined at 36 in src/com/sun/org/apache/xpath/internal/functions/FuncExtFunctionAvailable.java.">FuncExtFunctionAvailable</a>) func).<a href="../S/4986.html#L103" title="Defined at 103 in src/com/sun/org/apache/xpath/internal/functions/FuncExtFunctionAvailable.java.">setFunctionTable</a>(m_functionTable);
<a id="L1042" name="L1042"></a>1042 
<a id="L1043" name="L1043"></a>1043       func.<a href="../D/29477.html" title="Multiple defined in 3 places.">postCompileStep</a>(<strong class="reserved">this</strong>);
<a id="L1044" name="L1044"></a>1044 
<a id="L1045" name="L1045"></a>1045       <strong class="reserved">try</strong>
<a id="L1046" name="L1046"></a>1046       <em class="brace">{</em>
<a id="L1047" name="L1047"></a>1047         <strong class="reserved">int</strong> i = 0;
<a id="L1048" name="L1048"></a>1048 
<a id="L1049" name="L1049"></a>1049         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> p = opPos; p &lt; endFunc; p = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(p), i++)
<a id="L1050" name="L1050"></a>1050         <em class="brace">{</em>
<a id="L1051" name="L1051"></a>1051 
<a id="L1052" name="L1052"></a>1052           <em class="comment">// System.out.println("argPos: "+ p);</em>
<a id="L1053" name="L1053"></a>1053           <em class="comment">// System.out.println("argCode: "+ m_opMap[p]);</em>
<a id="L1054" name="L1054"></a>1054           func.<a href="../D/31923.html" title="Multiple defined in 7 places.">setArg</a>(<a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(p), i);
<a id="L1055" name="L1055"></a>1055         <em class="brace">}</em>
<a id="L1056" name="L1056"></a>1056 
<a id="L1057" name="L1057"></a>1057         func.<a href="../D/12568.html" title="Multiple defined in 9 places.">checkNumberArgs</a>(i);
<a id="L1058" name="L1058"></a>1058       <em class="brace">}</em>
<a id="L1059" name="L1059"></a>1059       <strong class="reserved">catch</strong> (<a href="../S/4957.html#L30" title="Defined at 30 in src/com/sun/org/apache/xpath/internal/functions/WrongNumberArgsException.java.">WrongNumberArgsException</a> wnae)
<a id="L1060" name="L1060"></a>1060       <em class="brace">{</em>
<a id="L1061" name="L1061"></a>1061         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = m_functionTable.<a href="../D/19266.html" title="Multiple defined in 2 places.">getFunctionName</a>(funcID);
<a id="L1062" name="L1062"></a>1062 
<a id="L1063" name="L1063"></a>1063         m_errorHandler.<a href="../D/15986.html" title="Multiple defined in 31 places.">fatalError</a>( <strong class="reserved">new</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(
<a id="L1064" name="L1064"></a>1064                   <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_ONLY_ALLOWS,
<a id="L1065" name="L1065"></a>1065                       <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, wnae.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>()<em class="brace">}</em>), m_locator));
<a id="L1066" name="L1066"></a>1066               <em class="comment">//"name + " only allows " + wnae.getMessage() + " arguments", m_locator));</em>
<a id="L1067" name="L1067"></a>1067       <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068 
<a id="L1069" name="L1069"></a>1069       <strong class="reserved">return</strong> func;
<a id="L1070" name="L1070"></a>1070     <em class="brace">}</em>
<a id="L1071" name="L1071"></a>1071     <strong class="reserved">else</strong>
<a id="L1072" name="L1072"></a>1072     <em class="brace">{</em>
<a id="L1073" name="L1073"></a>1073       <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_FUNCTION_TOKEN_NOT_FOUND, <strong class="reserved">null</strong>);  <em class="comment">//"function token not found.");</em>
<a id="L1074" name="L1074"></a>1074 
<a id="L1075" name="L1075"></a>1075       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1076" name="L1076"></a>1076     <em class="brace">}</em>
<a id="L1077" name="L1077"></a>1077   <em class="brace">}</em>
<a id="L1078" name="L1078"></a>1078 
<a id="L1079" name="L1079"></a>1079   <em class="comment">// The current id for extension functions.</em>
<a id="L1080" name="L1080"></a>1080   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">long</strong> s_nextMethodId = 0;
<a id="L1081" name="L1081"></a>1081 
<div class="comment">
    Get the next available method id</div>
<a id="L1085" name="L1085"></a>1085   <strong class="reserved">synchronized</strong> <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../S/4997.html#L1123" title="Referred from 1123 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">getNextMethodId</a>()
<a id="L1086" name="L1086"></a>1086   <em class="brace">{</em>
<a id="L1087" name="L1087"></a>1087     <strong class="reserved">if</strong> (s_nextMethodId == <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.MAX_VALUE)
<a id="L1088" name="L1088"></a>1088       s_nextMethodId = 0;
<a id="L1089" name="L1089"></a>1089 
<a id="L1090" name="L1090"></a>1090     <strong class="reserved">return</strong> s_nextMethodId++;
<a id="L1091" name="L1091"></a>1091   <em class="brace">}</em>
<a id="L1092" name="L1092"></a>1092 
<div class="comment">
    Compile an extension function.
    @param opPos The current position in the m_opMap array.
    @return reference to {@link com.sun.org.apache.xpath.internal.functions.FuncExtFunction} instance.
    @throws TransformerException if a error occurs creating the Expression.</div>
<a id="L1102" name="L1102"></a>1102   <strong class="reserved">private</strong> <a href="../D/3045.html" title="Multiple defined in 3 places.">Expression</a> <a href="../S/4997.html#L176" title="Referred from 176 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">compileExtension</a>(<strong class="reserved">int</strong> opPos)
<a id="L1103" name="L1103"></a>1103           <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L1104" name="L1104"></a>1104   <em class="brace">{</em>
<a id="L1105" name="L1105"></a>1105 
<a id="L1106" name="L1106"></a>1106     <strong class="reserved">int</strong> endExtFunc = opPos + <a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos + 1) - 1;
<a id="L1107" name="L1107"></a>1107 
<a id="L1108" name="L1108"></a>1108     opPos = <a href="../S/4996.html#L333" title="Defined at 333 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getFirstChildPos</a>(opPos);
<a id="L1109" name="L1109"></a>1109 
<a id="L1110" name="L1110"></a>1110     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ns = (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/4996.html#L84" title="Defined at 84 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getTokenQueue</a>().<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos));
<a id="L1111" name="L1111"></a>1111 
<a id="L1112" name="L1112"></a>1112     opPos++;
<a id="L1113" name="L1113"></a>1113 
<a id="L1114" name="L1114"></a>1114     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> funcName =
<a id="L1115" name="L1115"></a>1115       (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/4996.html#L84" title="Defined at 84 in src/com/sun/org/apache/xpath/internal/compiler/OpMap.java.">getTokenQueue</a>().<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/21202.html" title="Multiple defined in 3 places.">getOp</a>(opPos));
<a id="L1116" name="L1116"></a>1116 
<a id="L1117" name="L1117"></a>1117     opPos++;
<a id="L1118" name="L1118"></a>1118 
<a id="L1119" name="L1119"></a>1119     <em class="comment">// We create a method key to uniquely identify this function so that we</em>
<a id="L1120" name="L1120"></a>1120     <em class="comment">// can cache the object needed to invoke it.  This way, we only pay the</em>
<a id="L1121" name="L1121"></a>1121     <em class="comment">// reflection overhead on the first call.</em>
<a id="L1122" name="L1122"></a>1122 
<a id="L1123" name="L1123"></a>1123     <a href="../D/3453.html" title="Multiple defined in 3 places.">Function</a> extension = <strong class="reserved">new</strong> <a href="../S/4961.html#L45" title="Defined at 45 in src/com/sun/org/apache/xpath/internal/functions/FuncExtFunction.java.">FuncExtFunction</a>(ns, funcName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../S/4997.html#L1085" title="Defined at 1085 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">getNextMethodId</a>()));
<a id="L1124" name="L1124"></a>1124 
<a id="L1125" name="L1125"></a>1125     <strong class="reserved">try</strong>
<a id="L1126" name="L1126"></a>1126     <em class="brace">{</em>
<a id="L1127" name="L1127"></a>1127       <strong class="reserved">int</strong> i = 0;
<a id="L1128" name="L1128"></a>1128 
<a id="L1129" name="L1129"></a>1129       <strong class="reserved">while</strong> (opPos &lt; endExtFunc)
<a id="L1130" name="L1130"></a>1130       <em class="brace">{</em>
<a id="L1131" name="L1131"></a>1131         <strong class="reserved">int</strong> nextOpPos = <a href="../D/20927.html" title="Multiple defined in 2 places.">getNextOpPos</a>(opPos);
<a id="L1132" name="L1132"></a>1132 
<a id="L1133" name="L1133"></a>1133         extension.<a href="../D/31923.html" title="Multiple defined in 7 places.">setArg</a>(<strong class="reserved">this</strong>.<a href="../D/13080.html" title="Multiple defined in 22 places.">compile</a>(opPos), i);
<a id="L1134" name="L1134"></a>1134 
<a id="L1135" name="L1135"></a>1135         opPos = nextOpPos;
<a id="L1136" name="L1136"></a>1136 
<a id="L1137" name="L1137"></a>1137         i++;
<a id="L1138" name="L1138"></a>1138       <em class="brace">}</em>
<a id="L1139" name="L1139"></a>1139     <em class="brace">}</em>
<a id="L1140" name="L1140"></a>1140     <strong class="reserved">catch</strong> (<a href="../S/4957.html#L30" title="Defined at 30 in src/com/sun/org/apache/xpath/internal/functions/WrongNumberArgsException.java.">WrongNumberArgsException</a> wnae)
<a id="L1141" name="L1141"></a>1141     <em class="brace">{</em>
<a id="L1142" name="L1142"></a>1142       ;  <em class="comment">// should never happen</em>
<a id="L1143" name="L1143"></a>1143     <em class="brace">}</em>
<a id="L1144" name="L1144"></a>1144 
<a id="L1145" name="L1145"></a>1145     <strong class="reserved">return</strong> extension;
<a id="L1146" name="L1146"></a>1146   <em class="brace">}</em>
<a id="L1147" name="L1147"></a>1147 
<div class="comment">
    Warn the user of an problem.
    @param msg An error msgkey that corresponds to one of the constants found
               in {@link com.sun.org.apache.xpath.internal.res.XPATHErrorResources}, which is
               a key for a format string.
    @param args An array of arguments represented in the format string, which
                may be null.
    @throws TransformerException if the current ErrorListoner determines to
                                 throw an exception.</div>
<a id="L1160" name="L1160"></a>1160   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30451.html" title="Multiple referred from 5 places.">warn</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L1161" name="L1161"></a>1161   <em class="brace">{</em>
<a id="L1162" name="L1162"></a>1162 
<a id="L1163" name="L1163"></a>1163     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L79" title="Defined at 79 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHWarning</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, args);
<a id="L1164" name="L1164"></a>1164 
<a id="L1165" name="L1165"></a>1165     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_errorHandler)
<a id="L1166" name="L1166"></a>1166     <em class="brace">{</em>
<a id="L1167" name="L1167"></a>1167       m_errorHandler.<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<strong class="reserved">new</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(fmsg, m_locator));
<a id="L1168" name="L1168"></a>1168     <em class="brace">}</em>
<a id="L1169" name="L1169"></a>1169     <strong class="reserved">else</strong>
<a id="L1170" name="L1170"></a>1170     <em class="brace">{</em>
<a id="L1171" name="L1171"></a>1171       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(fmsg
<a id="L1172" name="L1172"></a>1172                           +"; file "+m_locator.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>()
<a id="L1173" name="L1173"></a>1173                           +"; line "+m_locator.<a href="../D/20122.html" title="Multiple defined in 41 places.">getLineNumber</a>()
<a id="L1174" name="L1174"></a>1174                           +"; column "+m_locator.<a href="../D/17813.html" title="Multiple defined in 33 places.">getColumnNumber</a>());
<a id="L1175" name="L1175"></a>1175     <em class="brace">}</em>
<a id="L1176" name="L1176"></a>1176   <em class="brace">}</em>
<a id="L1177" name="L1177"></a>1177 
<div class="comment">
    Tell the user of an assertion error, and probably throw an
    exception.
    @param b  If false, a runtime exception will be thrown.
    @param msg The assertion message, which should be informative.
    @throws RuntimeException if the b argument is false.</div>
<a id="L1187" name="L1187"></a>1187   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10376.html" title="Multiple referred from 16 places.">assertion</a>(<strong class="reserved">boolean</strong> b, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>)
<a id="L1188" name="L1188"></a>1188   <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189 
<a id="L1190" name="L1190"></a>1190     <strong class="reserved">if</strong> (!b)
<a id="L1191" name="L1191"></a>1191     <em class="brace">{</em>
<a id="L1192" name="L1192"></a>1192       <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fMsg = <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(
<a id="L1193" name="L1193"></a>1193         <a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_INCORRECT_PROGRAMMER_ASSERTION,
<a id="L1194" name="L1194"></a>1194         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> <em class="brace">}</em>);
<a id="L1195" name="L1195"></a>1195 
<a id="L1196" name="L1196"></a>1196       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(fMsg);
<a id="L1197" name="L1197"></a>1197     <em class="brace">}</em>
<a id="L1198" name="L1198"></a>1198   <em class="brace">}</em>
<a id="L1199" name="L1199"></a>1199 
<div class="comment">
    Tell the user of an error, and probably throw an
    exception.
    @param msg An error msgkey that corresponds to one of the constants found
               in {@link com.sun.org.apache.xpath.internal.res.XPATHErrorResources}, which is
               a key for a format string.
    @param args An array of arguments represented in the format string, which
                may be null.
    @throws TransformerException if the current ErrorListoner determines to
                                 throw an exception.</div>
<a id="L1213" name="L1213"></a>1213   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14003.html" title="Multiple referred from 408 places.">error</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args) <strong class="reserved">throws</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>
<a id="L1214" name="L1214"></a>1214   <em class="brace">{</em>
<a id="L1215" name="L1215"></a>1215 
<a id="L1216" name="L1216"></a>1216     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/5961.html#L36" title="Defined at 36 in src/com/sun/org/apache/xalan/internal/res/XSLMessages.java.">XSLMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>, args);
<a id="L1217" name="L1217"></a>1217 
<a id="L1218" name="L1218"></a>1218 
<a id="L1219" name="L1219"></a>1219     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_errorHandler)
<a id="L1220" name="L1220"></a>1220     <em class="brace">{</em>
<a id="L1221" name="L1221"></a>1221       m_errorHandler.<a href="../D/15986.html" title="Multiple defined in 31 places.">fatalError</a>(<strong class="reserved">new</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(fmsg, m_locator));
<a id="L1222" name="L1222"></a>1222     <em class="brace">}</em>
<a id="L1223" name="L1223"></a>1223     <strong class="reserved">else</strong>
<a id="L1224" name="L1224"></a>1224     <em class="brace">{</em>
<a id="L1225" name="L1225"></a>1225 
<a id="L1226" name="L1226"></a>1226       <em class="comment">// System.out.println(te.getMessage()</em>
<a id="L1227" name="L1227"></a>1227       <em class="comment">//                    +"; file "+te.getSystemId()</em>
<a id="L1228" name="L1228"></a>1228       <em class="comment">//                    +"; line "+te.getLineNumber()</em>
<a id="L1229" name="L1229"></a>1229       <em class="comment">//                    +"; column "+te.getColumnNumber());</em>
<a id="L1230" name="L1230"></a>1230       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a>(fmsg, (<a href="../S/5852.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/utils/SAXSourceLocator.java.">SAXSourceLocator</a>)m_locator);
<a id="L1231" name="L1231"></a>1231     <em class="brace">}</em>
<a id="L1232" name="L1232"></a>1232   <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233 
<div class="comment">
    The current prefixResolver for the execution context.</div>
<a id="L1237" name="L1237"></a>1237   <strong class="reserved">private</strong> <a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a> m_currentPrefixResolver = <strong class="reserved">null</strong>;
<a id="L1238" name="L1238"></a>1238 
<div class="comment">
    Get the current namespace context for the xpath.
    @return The current prefix resolver, *may* be null, though hopefully not.</div>
<a id="L1244" name="L1244"></a>1244   <strong class="reserved">public</strong> <a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a> <a href="../R/17850.html" title="Multiple referred from 30 places.">getNamespaceContext</a>()
<a id="L1245" name="L1245"></a>1245   <em class="brace">{</em>
<a id="L1246" name="L1246"></a>1246     <strong class="reserved">return</strong> m_currentPrefixResolver;
<a id="L1247" name="L1247"></a>1247   <em class="brace">}</em>
<a id="L1248" name="L1248"></a>1248 
<div class="comment">
    Set the current namespace context for the xpath.
    @param pr The resolver for prefixes in the XPath expression.</div>
<a id="L1254" name="L1254"></a>1254   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27801.html" title="Multiple referred from 9 places.">setNamespaceContext</a>(<a href="../S/5879.html#L32" title="Defined at 32 in src/com/sun/org/apache/xml/internal/utils/PrefixResolver.java.">PrefixResolver</a> <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>)
<a id="L1255" name="L1255"></a>1255   <em class="brace">{</em>
<a id="L1256" name="L1256"></a>1256     m_currentPrefixResolver = <a href="../D/29507.html" title="Multiple defined in 2 places.">pr</a>;
<a id="L1257" name="L1257"></a>1257   <em class="brace">}</em>
<a id="L1258" name="L1258"></a>1258 
<div class="comment">
 The error listener where errors will be sent.  If this is null, errors
   *  and warnings will be sent to System.err.  May be null.    </div>
<a id="L1261" name="L1261"></a>1261   <a href="../S/4030.html#L53" title="Defined at 53 in src/javax/xml/transform/ErrorListener.java.">ErrorListener</a> m_errorHandler;
<a id="L1262" name="L1262"></a>1262 
<div class="comment">
   /** The source locator for the expression being compiled.  May be null. */</div>
<a id="L1264" name="L1264"></a>1264   <a href="../S/4044.html#L32" title="Defined at 32 in src/javax/xml/transform/SourceLocator.java.">SourceLocator</a> m_locator;
<a id="L1265" name="L1265"></a>1265 
<div class="comment">
    The FunctionTable for all xpath build-in functions</div>
<a id="L1269" name="L1269"></a>1269   <strong class="reserved">private</strong> <a href="../S/4995.html#L33" title="Defined at 33 in src/com/sun/org/apache/xpath/internal/compiler/FunctionTable.java.">FunctionTable</a> m_functionTable;
<a id="L1270" name="L1270"></a>1270 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L116">[^]</a><a href="#L1254">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
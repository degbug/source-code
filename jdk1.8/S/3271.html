<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/TableView.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L89">[^]</a><a href="#L903">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L89" title="Defined at 89.">createTableRow</a></li>
<li><a href="#L102" title="Defined at 102.">createTableCell</a></li>
<li><a href="#L109" title="Defined at 109.">getColumnCount</a></li>
<li><a href="#L118" title="Defined at 118.">getColumnSpan</a></li>
<li><a href="#L125" title="Defined at 125.">getRowCount</a></li>
<li><a href="#L132" title="Defined at 132.">getRowSpan</a></li>
<li><a href="#L140" title="Defined at 140.">getRow</a></li>
<li><a href="#L151" title="Defined at 151.">getColumnsOccupied</a></li>
<li><a href="#L171" title="Defined at 171.">getRowsOccupied</a></li>
<li><a href="#L187" title="Defined at 187.">invalidateGrid</a></li>
<li><a href="#L191" title="Defined at 191.">forwardUpdate</a></li>
<li><a href="#L211" title="Defined at 211.">replace</a></li>
<li><a href="#L221" title="Defined at 221.">updateGrid</a></li>
<li><a href="#L281" title="Defined at 281.">addFill</a></li>
<li><a href="#L302" title="Defined at 302.">layoutColumns</a></li>
<li><a href="#L331" title="Defined at 331.">layoutMinorAxis</a></li>
<li><a href="#L357" title="Defined at 357.">calculateMinorAxisRequirements</a></li>
<li><a href="#L408" title="Defined at 408.">calculateColumnRequirements</a></li>
<li><a href="#L461" title="Defined at 461.">checkSingleColumnCell</a></li>
<li><a href="#L472" title="Defined at 472.">checkMultiColumnCell</a></li>
<li><a href="#L551" title="Defined at 551.">getViewAtPosition</a></li>
<li><a href="#L600" title="Defined at 600.">clearFilledColumns</a></li>
<li><a href="#L604" title="Defined at 604.">fillColumn</a></li>
<li><a href="#L608" title="Defined at 608.">isFilled</a></li>
<li><a href="#L613" title="Defined at 613.">getRow</a></li>
<li><a href="#L621" title="Defined at 621.">setRow</a></li>
<li><a href="#L628" title="Defined at 628.">getColumnCount</a></li>
<li><a href="#L644" title="Defined at 644.">replace</a></li>
<li><a href="#L668" title="Defined at 668.">layoutMajorAxis</a></li>
<li><a href="#L712" title="Defined at 712.">layoutMinorAxis</a></li>
<li><a href="#L747" title="Defined at 747.">getResizeWeight</a></li>
<li><a href="#L764" title="Defined at 764.">getViewAtPosition</a></li>
<li><a href="#L818" title="Defined at 818.">getColumnCount</a></li>
<li><a href="#L828" title="Defined at 828.">getRowCount</a></li>
<li><a href="#L839" title="Defined at 839.">setGridLocation</a></li>
<li><a href="#L847" title="Defined at 847.">getGridRow</a></li>
<li><a href="#L854" title="Defined at 854.">getGridColumn</a></li>
<li><a href="#L877" title="Defined at 877.">setGridLocation</a></li>
<li><a href="#L882" title="Defined at 882.">getGridRow</a></li>
<li><a href="#L887" title="Defined at 887.">getGridColumn</a></li>
<li><a href="#L895" title="Defined at 895.">getColumnCount</a></li>
<li><a href="#L903" title="Defined at 903.">getRowCount</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.awt.*;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.BitSet;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Vector;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> javax.swing.SizeRequirements;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> javax.swing.event.DocumentEvent;
<a id="L32" name="L32"></a>  32 
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> javax.swing.text.html.HTML;
<a id="L34" name="L34"></a>  34 
<div class="comment">
  <p>
  Implements View interface for a table, that is composed of an
  element structure where the child elements of the element
  this view is responsible for represent rows and the child
  elements of the row elements are cells.  The cell elements can
  have an arbitrary element structure under them, which will
  be built with the ViewFactory returned by the getViewFactory
  method.
  </p><pre>  &nbsp;  TABLE
  &nbsp;    ROW
  &nbsp;      CELL
  &nbsp;      CELL
  &nbsp;    ROW
  &nbsp;      CELL
  &nbsp;      CELL
  </pre>
  <p>
  This is implemented as a hierarchy of boxes, the table itself
  is a vertical box, the rows are horizontal boxes, and the cells
  are vertical boxes.  The cells are allowed to span multiple
  columns and rows.  By default, the table can be thought of as
  being formed over a grid (i.e. somewhat like one would find in
  gridbag layout), where table cells can request to span more
  than one grid cell.  The default horizontal span of table cells
  will be based upon this grid, but can be changed by reimplementing
  the requested span of the cell (i.e. table cells can have independant
  spans if desired).
  @author  Timothy Prinzing
  @see     View</p></div>
<a id="L70" name="L70"></a>  70 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/8006.html" title="Multiple referred from 6 places.">TableView</a> <strong class="reserved">extends</strong> <a href="../S/3355.html#L61" title="Defined at 61 in src/javax/swing/text/BoxView.java.">BoxView</a> <em class="brace">{</em>
<a id="L71" name="L71"></a>  71 
<div class="comment">
      Constructs a TableView for the given element.
      @param elem the element that this view is responsible for</div>
<a id="L77" name="L77"></a>  77     <strong class="reserved">public</strong> TableView(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L78" name="L78"></a>  78         <strong class="reserved">super</strong>(elem, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.Y_AXIS);
<a id="L79" name="L79"></a>  79         rows = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a>&gt;();
<a id="L80" name="L80"></a>  80         gridValid = <strong class="reserved">false</strong>;
<a id="L81" name="L81"></a>  81     <em class="brace">}</em>
<a id="L82" name="L82"></a>  82 
<div class="comment">
      Creates a new table row.
      @param elem an element
      @return the row</div>
<a id="L89" name="L89"></a>  89     <strong class="reserved">protected</strong> <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> <a href="../S/3296.html#L930" title="Referred from 930 in src/javax/swing/text/html/TableView.java.">createTableRow</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L90" name="L90"></a>  90         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a>(elem);
<a id="L91" name="L91"></a>  91     <em class="brace">}</em>
<a id="L92" name="L92"></a>  92 
<div class="comment">
      @deprecated Table cells can now be any arbitrary
      View implementation and should be produced by the
      ViewFactory rather than the table.
      @param elem an element
      @return the cell</div>
<a id="L101" name="L101"></a> 101     @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L102" name="L102"></a> 102     <strong class="reserved">protected</strong> <a href="../S/3271.html#L798" title="Defined at 798 in src/javax/swing/text/TableView.java.">TableCell</a> createTableCell(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L103" name="L103"></a> 103         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3271.html#L798" title="Defined at 798 in src/javax/swing/text/TableView.java.">TableCell</a>(elem);
<a id="L104" name="L104"></a> 104     <em class="brace">}</em>
<a id="L105" name="L105"></a> 105 
<div class="comment">
      The number of columns in the table.</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">int</strong> <a href="../R/15671.html" title="Multiple referred from 91 places.">getColumnCount</a>() <em class="brace">{</em>
<a id="L110" name="L110"></a> 110         <strong class="reserved">return</strong> columnSpans.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L111" name="L111"></a> 111     <em class="brace">}</em>
<a id="L112" name="L112"></a> 112 
<div class="comment">
      Fetches the span (width) of the given column.
      This is used by the nested cells to query the
      sizes of grid locations outside of themselves.</div>
<a id="L118" name="L118"></a> 118     <strong class="reserved">int</strong> getColumnSpan(<strong class="reserved">int</strong> col) <em class="brace">{</em>
<a id="L119" name="L119"></a> 119         <strong class="reserved">return</strong> columnSpans[col];
<a id="L120" name="L120"></a> 120     <em class="brace">}</em>
<a id="L121" name="L121"></a> 121 
<div class="comment">
      The number of rows in the table.</div>
<a id="L125" name="L125"></a> 125     <strong class="reserved">int</strong> <a href="../R/18787.html" title="Multiple referred from 152 places.">getRowCount</a>() <em class="brace">{</em>
<a id="L126" name="L126"></a> 126         <strong class="reserved">return</strong> rows.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L127" name="L127"></a> 127     <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<div class="comment">
      Fetches the span (height) of the given row.</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">int</strong> getRowSpan(<strong class="reserved">int</strong> row) <em class="brace">{</em>
<a id="L133" name="L133"></a> 133         <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> rv = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>(row);
<a id="L134" name="L134"></a> 134         <strong class="reserved">if</strong> (rv != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L135" name="L135"></a> 135             <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) rv.<a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(Y_AXIS);
<a id="L136" name="L136"></a> 136         <em class="brace">}</em>
<a id="L137" name="L137"></a> 137         <strong class="reserved">return</strong> 0;
<a id="L138" name="L138"></a> 138     <em class="brace">}</em>
<a id="L139" name="L139"></a> 139 
<a id="L140" name="L140"></a> 140     <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> <a href="../R/18783.html" title="Multiple referred from 71 places.">getRow</a>(<strong class="reserved">int</strong> row) <em class="brace">{</em>
<a id="L141" name="L141"></a> 141         <strong class="reserved">if</strong> (row &lt; rows.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142             <strong class="reserved">return</strong> rows.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(row);
<a id="L143" name="L143"></a> 143         <em class="brace">}</em>
<a id="L144" name="L144"></a> 144         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L145" name="L145"></a> 145     <em class="brace">}</em>
<a id="L146" name="L146"></a> 146 
<div class="comment">
      Determines the number of columns occupied by
      the table cell represented by given element.</div>
<div class="comment">
     /*protected*/</div> <strong class="reserved">int</strong> <a href="../R/15684.html" title="Multiple referred from 11 places.">getColumnsOccupied</a>(<a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v) <em class="brace">{</em>
<a id="L152" name="L152"></a> 152         <em class="comment">// PENDING(prinz) this code should be in the html</em>
<a id="L153" name="L153"></a> 153         <em class="comment">// paragraph, but we can't add api to enable it.</em>
<a id="L154" name="L154"></a> 154         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = v.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>().<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L155" name="L155"></a> 155         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>.<a href="../D/567.html" title="Multiple defined in 12 places.">Attribute</a>.COLSPAN);
<a id="L156" name="L156"></a> 156         <strong class="reserved">if</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L157" name="L157"></a> 157             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L158" name="L158"></a> 158                 <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(s);
<a id="L159" name="L159"></a> 159             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> nfe) <em class="brace">{</em>
<a id="L160" name="L160"></a> 160                 <em class="comment">// fall through to one column</em>
<a id="L161" name="L161"></a> 161             <em class="brace">}</em>
<a id="L162" name="L162"></a> 162         <em class="brace">}</em>
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164         <strong class="reserved">return</strong> 1;
<a id="L165" name="L165"></a> 165     <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<div class="comment">
      Determines the number of rows occupied by
      the table cell represented by given element.</div>
<div class="comment">
     /*protected*/</div> <strong class="reserved">int</strong> <a href="../R/18807.html" title="Multiple referred from 9 places.">getRowsOccupied</a>(<a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v) <em class="brace">{</em>
<a id="L172" name="L172"></a> 172         <em class="comment">// PENDING(prinz) this code should be in the html</em>
<a id="L173" name="L173"></a> 173         <em class="comment">// paragraph, but we can't add api to enable it.</em>
<a id="L174" name="L174"></a> 174         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = v.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>().<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L175" name="L175"></a> 175         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17064.html" title="Multiple defined in 72 places.">getAttribute</a>(<a href="../D/3655.html" title="Multiple defined in 2 places.">HTML</a>.<a href="../D/567.html" title="Multiple defined in 12 places.">Attribute</a>.ROWSPAN);
<a id="L176" name="L176"></a> 176         <strong class="reserved">if</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L177" name="L177"></a> 177             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L178" name="L178"></a> 178                 <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(s);
<a id="L179" name="L179"></a> 179             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> nfe) <em class="brace">{</em>
<a id="L180" name="L180"></a> 180                 <em class="comment">// fall through to one row</em>
<a id="L181" name="L181"></a> 181             <em class="brace">}</em>
<a id="L182" name="L182"></a> 182         <em class="brace">}</em>
<a id="L183" name="L183"></a> 183 
<a id="L184" name="L184"></a> 184         <strong class="reserved">return</strong> 1;
<a id="L185" name="L185"></a> 185     <em class="brace">}</em>
<a id="L186" name="L186"></a> 186 
<div class="comment">
     /*protected*/</div> <strong class="reserved">void</strong> <a href="../R/21033.html" title="Multiple referred from 4 places.">invalidateGrid</a>() <em class="brace">{</em>
<a id="L188" name="L188"></a> 188         gridValid = <strong class="reserved">false</strong>;
<a id="L189" name="L189"></a> 189     <em class="brace">}</em>
<a id="L190" name="L190"></a> 190 
<a id="L191" name="L191"></a> 191     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14775.html" title="Multiple referred from 7 places.">forwardUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../S/3381.html#L143" title="Defined at 143 in src/javax/swing/event/DocumentEvent.java.">ElementChange</a> ec,
<a id="L192" name="L192"></a> 192                                      <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L193" name="L193"></a> 193         <strong class="reserved">super</strong>.<a href="../D/16560.html" title="Multiple defined in 5 places.">forwardUpdate</a>(ec, e, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, f);
<a id="L194" name="L194"></a> 194         <em class="comment">// A change in any of the table cells usually effects the whole table,</em>
<a id="L195" name="L195"></a> 195         <em class="comment">// so redraw it all!</em>
<a id="L196" name="L196"></a> 196         <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L197" name="L197"></a> 197             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L198" name="L198"></a> 198             <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199                 <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> alloc = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> <strong class="reserved">instanceof</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) ? (<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> :
<a id="L200" name="L200"></a> 200                                    <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L201" name="L201"></a> 201                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>(alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, alloc.y, alloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, alloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L202" name="L202"></a> 202             <em class="brace">}</em>
<a id="L203" name="L203"></a> 203         <em class="brace">}</em>
<a id="L204" name="L204"></a> 204     <em class="brace">}</em>
<a id="L205" name="L205"></a> 205 
<div class="comment">
      Change the child views.  This is implemented to
      provide the superclass behavior and invalidate the
      grid so that rows and columns will be recalculated.</div>
<a id="L211" name="L211"></a> 211     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26140.html" title="Multiple referred from 310 places.">replace</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>[] views) <em class="brace">{</em>
<a id="L212" name="L212"></a> 212         <strong class="reserved">super</strong>.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, views);
<a id="L213" name="L213"></a> 213         <a href="../D/25030.html" title="Multiple defined in 2 places.">invalidateGrid</a>();
<a id="L214" name="L214"></a> 214     <em class="brace">}</em>
<a id="L215" name="L215"></a> 215 
<div class="comment">
      Fill in the grid locations that are placeholders
      for multi-column, multi-row, and missing grid
      locations.</div>
<a id="L221" name="L221"></a> 221     <strong class="reserved">void</strong> <a href="../R/29876.html" title="Multiple referred from 6 places.">updateGrid</a>() <em class="brace">{</em>
<a id="L222" name="L222"></a> 222         <strong class="reserved">if</strong> (! gridValid) <em class="brace">{</em>
<a id="L223" name="L223"></a> 223             <em class="comment">// determine which views are table rows and clear out</em>
<a id="L224" name="L224"></a> 224             <em class="comment">// grid points marked filled.</em>
<a id="L225" name="L225"></a> 225             rows.<a href="../D/30689.html" title="Multiple defined in 14 places.">removeAllElements</a>();
<a id="L226" name="L226"></a> 226             <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L227" name="L227"></a> 227             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L228" name="L228"></a> 228                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(i);
<a id="L229" name="L229"></a> 229                 <strong class="reserved">if</strong> (v <strong class="reserved">instanceof</strong> <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a>) <em class="brace">{</em>
<a id="L230" name="L230"></a> 230                     rows.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>((<a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a>) v);
<a id="L231" name="L231"></a> 231                     <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> rv = (<a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a>) v;
<a id="L232" name="L232"></a> 232                     rv.<a href="../D/12840.html" title="Multiple defined in 2 places.">clearFilledColumns</a>();
<a id="L233" name="L233"></a> 233                     rv.<a href="../S/3271.html#L621" title="Defined at 621 in src/javax/swing/text/TableView.java.">setRow</a>(i);
<a id="L234" name="L234"></a> 234                 <em class="brace">}</em>
<a id="L235" name="L235"></a> 235             <em class="brace">}</em>
<a id="L236" name="L236"></a> 236 
<a id="L237" name="L237"></a> 237             <strong class="reserved">int</strong> maxColumns = 0;
<a id="L238" name="L238"></a> 238             <strong class="reserved">int</strong> nrows = rows.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L239" name="L239"></a> 239             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> row = 0; row &lt; nrows; row++) <em class="brace">{</em>
<a id="L240" name="L240"></a> 240                 <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> rv = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>(row);
<a id="L241" name="L241"></a> 241                 <strong class="reserved">int</strong> col = 0;
<a id="L242" name="L242"></a> 242                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cell = 0; cell &lt; rv.<a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>(); cell++, col++) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243                     <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = rv.<a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(cell);
<a id="L244" name="L244"></a> 244                     <em class="comment">// advance to a free column</em>
<a id="L245" name="L245"></a> 245                     <strong class="reserved">for</strong> (; rv.<a href="../D/25553.html" title="Multiple defined in 2 places.">isFilled</a>(col); col++);
<a id="L246" name="L246"></a> 246                     <strong class="reserved">int</strong> rowSpan = <a href="../D/22185.html" title="Multiple defined in 2 places.">getRowsOccupied</a>(cv);
<a id="L247" name="L247"></a> 247                     <strong class="reserved">int</strong> colSpan = <a href="../D/17821.html" title="Multiple defined in 2 places.">getColumnsOccupied</a>(cv);
<a id="L248" name="L248"></a> 248                     <strong class="reserved">if</strong> ((colSpan &gt; 1) || (rowSpan &gt; 1)) <em class="brace">{</em>
<a id="L249" name="L249"></a> 249                         <em class="comment">// fill in the overflow entries for this cell</em>
<a id="L250" name="L250"></a> 250                         <strong class="reserved">int</strong> rowLimit = row + rowSpan;
<a id="L251" name="L251"></a> 251                         <strong class="reserved">int</strong> colLimit = col + colSpan;
<a id="L252" name="L252"></a> 252                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = row; i &lt; rowLimit; i++) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253                             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = col; j &lt; colLimit; j++) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                                 <strong class="reserved">if</strong> (i != row || j != col) <em class="brace">{</em>
<a id="L255" name="L255"></a> 255                                     <a href="../D/10806.html" title="Multiple defined in 2 places.">addFill</a>(i, j);
<a id="L256" name="L256"></a> 256                                 <em class="brace">}</em>
<a id="L257" name="L257"></a> 257                             <em class="brace">}</em>
<a id="L258" name="L258"></a> 258                         <em class="brace">}</em>
<a id="L259" name="L259"></a> 259                         <strong class="reserved">if</strong> (colSpan &gt; 1) <em class="brace">{</em>
<a id="L260" name="L260"></a> 260                             col += colSpan - 1;
<a id="L261" name="L261"></a> 261                         <em class="brace">}</em>
<a id="L262" name="L262"></a> 262                     <em class="brace">}</em>
<a id="L263" name="L263"></a> 263                 <em class="brace">}</em>
<a id="L264" name="L264"></a> 264                 maxColumns = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(maxColumns, col);
<a id="L265" name="L265"></a> 265             <em class="brace">}</em>
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267             <em class="comment">// setup the column layout/requirements</em>
<a id="L268" name="L268"></a> 268             columnSpans = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[maxColumns];
<a id="L269" name="L269"></a> 269             columnOffsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[maxColumns];
<a id="L270" name="L270"></a> 270             columnRequirements = <strong class="reserved">new</strong> <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[maxColumns];
<a id="L271" name="L271"></a> 271             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; maxColumns; i++) <em class="brace">{</em>
<a id="L272" name="L272"></a> 272                 columnRequirements[i] = <strong class="reserved">new</strong> <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>();
<a id="L273" name="L273"></a> 273             <em class="brace">}</em>
<a id="L274" name="L274"></a> 274             gridValid = <strong class="reserved">true</strong>;
<a id="L275" name="L275"></a> 275         <em class="brace">}</em>
<a id="L276" name="L276"></a> 276     <em class="brace">}</em>
<a id="L277" name="L277"></a> 277 
<div class="comment">
      Mark a grid location as filled in for a cells overflow.</div>
<a id="L281" name="L281"></a> 281     <strong class="reserved">void</strong> <a href="../R/9733.html" title="Multiple referred from 2 places.">addFill</a>(<strong class="reserved">int</strong> row, <strong class="reserved">int</strong> col) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282         <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> rv = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>(row);
<a id="L283" name="L283"></a> 283         <strong class="reserved">if</strong> (rv != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L284" name="L284"></a> 284             rv.<a href="../D/16035.html" title="Multiple defined in 2 places.">fillColumn</a>(col);
<a id="L285" name="L285"></a> 285         <em class="brace">}</em>
<a id="L286" name="L286"></a> 286     <em class="brace">}</em>
<a id="L287" name="L287"></a> 287 
<div class="comment">
      Lays out the columns to fit within the given target span.
      Returns the results through <code>offsets</code> and <code>spans</code>.
      @param targetSpan the given span for total of all the table
       columns
      @param reqs the requirements desired for each column.  This
       is the column maximum of the cells minimum, preferred, and
       maximum requested span
      @param spans the return value of how much to allocated to
       each column
      @param offsets the return value of the offset from the
       origin for each column</div>
<a id="L302" name="L302"></a> 302     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/22434.html" title="Multiple referred from 2 places.">layoutColumns</a>(<strong class="reserved">int</strong> targetSpan, <strong class="reserved">int</strong>[] offsets, <strong class="reserved">int</strong>[] spans,
<a id="L303" name="L303"></a> 303                                  <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[] reqs) <em class="brace">{</em>
<a id="L304" name="L304"></a> 304         <em class="comment">// allocate using the convenience method on SizeRequirements</em>
<a id="L305" name="L305"></a> 305         <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>.<a href="../D/12099.html" title="Multiple defined in 2 places.">calculateTiledPositions</a>(targetSpan, <strong class="reserved">null</strong>, reqs,
<a id="L306" name="L306"></a> 306                                                  offsets, spans);
<a id="L307" name="L307"></a> 307     <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<div class="comment">
      Perform layout for the minor axis of the box (i.e. the
      axis orthogonal to the axis that it represents).  The results
      of the layout should be placed in the given arrays which represent
      the allocations to the children along the minor axis.  This
      is called by the superclass whenever the layout needs to be
      updated along the minor axis.
      <p>
      This is implemented to call the
      {@link #layoutColumns layoutColumns} method, and then
      forward to the superclass to actually carry out the layout
      of the tables rows.
      @param targetSpan the total span given to the view, which
       would be used to layout the children.
      @param axis the axis being layed out.
      @param offsets the offsets from the origin of the view for
       each of the child views.  This is a return value and is
       filled in by the implementation of this method.
      @param spans the span of each child view.  This is a return
       value and is filled in by the implementation of this method.</p></div>
<a id="L331" name="L331"></a> 331     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/22444.html" title="Multiple referred from 6 places.">layoutMinorAxis</a>(<strong class="reserved">int</strong> targetSpan, <strong class="reserved">int</strong> axis, <strong class="reserved">int</strong>[] offsets, <strong class="reserved">int</strong>[] spans) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332         <em class="comment">// make grid is properly represented</em>
<a id="L333" name="L333"></a> 333         <a href="../D/36117.html" title="Multiple defined in 4 places.">updateGrid</a>();
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335         <em class="comment">// all of the row layouts are invalid, so mark them that way</em>
<a id="L336" name="L336"></a> 336         <strong class="reserved">int</strong> n = <a href="../D/22156.html" title="Multiple defined in 20 places.">getRowCount</a>();
<a id="L337" name="L337"></a> 337         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L338" name="L338"></a> 338             <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> row = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>(i);
<a id="L339" name="L339"></a> 339             row.<a href="../S/3355.html#L127" title="Defined at 127 in src/javax/swing/text/BoxView.java.">layoutChanged</a>(axis);
<a id="L340" name="L340"></a> 340         <em class="brace">}</em>
<a id="L341" name="L341"></a> 341 
<a id="L342" name="L342"></a> 342         <em class="comment">// calculate column spans</em>
<a id="L343" name="L343"></a> 343         <a href="../D/26768.html" title="Multiple defined in 2 places.">layoutColumns</a>(targetSpan, columnOffsets, columnSpans, columnRequirements);
<a id="L344" name="L344"></a> 344 
<a id="L345" name="L345"></a> 345         <em class="comment">// continue normal layout</em>
<a id="L346" name="L346"></a> 346         <strong class="reserved">super</strong>.<a href="../D/26780.html" title="Multiple defined in 8 places.">layoutMinorAxis</a>(targetSpan, axis, offsets, spans);
<a id="L347" name="L347"></a> 347     <em class="brace">}</em>
<a id="L348" name="L348"></a> 348 
<div class="comment">
      Calculate the requirements for the minor axis.  This is called by
      the superclass whenever the requirements need to be updated (i.e.
      a preferenceChanged was messaged through this view).
      <p>
      This is implemented to calculate the requirements as the sum of the
      requirements of the columns.</p></div>
<a id="L357" name="L357"></a> 357     <strong class="reserved">protected</strong> <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> <a href="../R/10822.html" title="Multiple referred from 8 places.">calculateMinorAxisRequirements</a>(<strong class="reserved">int</strong> axis, <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> r) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358         <a href="../D/36117.html" title="Multiple defined in 4 places.">updateGrid</a>();
<a id="L359" name="L359"></a> 359 
<a id="L360" name="L360"></a> 360         <em class="comment">// calculate column requirements for each column</em>
<a id="L361" name="L361"></a> 361         <a href="../D/12049.html" title="Multiple defined in 2 places.">calculateColumnRequirements</a>(axis);
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363 
<a id="L364" name="L364"></a> 364         <em class="comment">// the requirements are the sum of the columns.</em>
<a id="L365" name="L365"></a> 365         <strong class="reserved">if</strong> (r == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L366" name="L366"></a> 366             r = <strong class="reserved">new</strong> <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>();
<a id="L367" name="L367"></a> 367         <em class="brace">}</em>
<a id="L368" name="L368"></a> 368         <strong class="reserved">long</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = 0;
<a id="L369" name="L369"></a> 369         <strong class="reserved">long</strong> pref = 0;
<a id="L370" name="L370"></a> 370         <strong class="reserved">long</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = 0;
<a id="L371" name="L371"></a> 371         <strong class="reserved">for</strong> (<a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> req : columnRequirements) <em class="brace">{</em>
<a id="L372" name="L372"></a> 372             <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> += req.minimum;
<a id="L373" name="L373"></a> 373             pref += req.preferred;
<a id="L374" name="L374"></a> 374             <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> += req.maximum;
<a id="L375" name="L375"></a> 375         <em class="brace">}</em>
<a id="L376" name="L376"></a> 376         r.minimum = (<strong class="reserved">int</strong>) <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>;
<a id="L377" name="L377"></a> 377         r.preferred = (<strong class="reserved">int</strong>) pref;
<a id="L378" name="L378"></a> 378         r.maximum = (<strong class="reserved">int</strong>) <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>;
<a id="L379" name="L379"></a> 379         r.alignment = 0;
<a id="L380" name="L380"></a> 380         <strong class="reserved">return</strong> r;
<a id="L381" name="L381"></a> 381     <em class="brace">}</em>
<a id="L382" name="L382"></a> 382 
<div class="comment">
    boolean shouldTrace() {
        AttributeSet a = getElement().getAttributes();
        Object o = a.getAttribute(HTML.Attribute.ID);
        if ((o != null) &amp;&amp; o.equals("debug")) {
            return true;
        }
        return false;
    }</div>
<a id="L393" name="L393"></a> 393 
<div class="comment">
      Calculate the requirements for each column.  The calculation
      is done as two passes over the table.  The table cells that
      occupy a single column are scanned first to determine the
      maximum of minimum, preferred, and maximum spans along the
      give axis.  Table cells that span multiple columns are excluded
      from the first pass.  A second pass is made to determine if
      the cells that span multiple columns are satisfied.  If the
      column requirements are not satisified, the needs of the
      multi-column cell is mixed into the existing column requirements.
      The calculation of the multi-column distribution is based upon
      the proportions of the existing column requirements and taking
      into consideration any constraining maximums.</div>
<a id="L408" name="L408"></a> 408     <strong class="reserved">void</strong> <a href="../R/10795.html" title="Multiple referred from 2 places.">calculateColumnRequirements</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L409" name="L409"></a> 409         <em class="comment">// pass 1 - single column cells</em>
<a id="L410" name="L410"></a> 410         <strong class="reserved">boolean</strong> hasMultiColumn = <strong class="reserved">false</strong>;
<a id="L411" name="L411"></a> 411         <strong class="reserved">int</strong> nrows = <a href="../D/22156.html" title="Multiple defined in 20 places.">getRowCount</a>();
<a id="L412" name="L412"></a> 412         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nrows; i++) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413             <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> row = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>(i);
<a id="L414" name="L414"></a> 414             <strong class="reserved">int</strong> col = 0;
<a id="L415" name="L415"></a> 415             <strong class="reserved">int</strong> ncells = row.<a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L416" name="L416"></a> 416             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cell = 0; cell &lt; ncells; cell++, col++) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = row.<a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(cell);
<a id="L418" name="L418"></a> 418                 <strong class="reserved">for</strong> (; row.<a href="../D/25553.html" title="Multiple defined in 2 places.">isFilled</a>(col); col++); <em class="comment">// advance to a free column</em>
<a id="L419" name="L419"></a> 419                 <strong class="reserved">int</strong> rowSpan = <a href="../D/22185.html" title="Multiple defined in 2 places.">getRowsOccupied</a>(cv);
<a id="L420" name="L420"></a> 420                 <strong class="reserved">int</strong> colSpan = <a href="../D/17821.html" title="Multiple defined in 2 places.">getColumnsOccupied</a>(cv);
<a id="L421" name="L421"></a> 421                 <strong class="reserved">if</strong> (colSpan == 1) <em class="brace">{</em>
<a id="L422" name="L422"></a> 422                     <a href="../D/12663.html" title="Multiple defined in 2 places.">checkSingleColumnCell</a>(axis, col, cv);
<a id="L423" name="L423"></a> 423                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L424" name="L424"></a> 424                     hasMultiColumn = <strong class="reserved">true</strong>;
<a id="L425" name="L425"></a> 425                     col += colSpan - 1;
<a id="L426" name="L426"></a> 426                 <em class="brace">}</em>
<a id="L427" name="L427"></a> 427             <em class="brace">}</em>
<a id="L428" name="L428"></a> 428         <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<a id="L430" name="L430"></a> 430         <em class="comment">// pass 2 - multi-column cells</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">if</strong> (hasMultiColumn) <em class="brace">{</em>
<a id="L432" name="L432"></a> 432             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; nrows; i++) <em class="brace">{</em>
<a id="L433" name="L433"></a> 433                 <a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a> row = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>(i);
<a id="L434" name="L434"></a> 434                 <strong class="reserved">int</strong> col = 0;
<a id="L435" name="L435"></a> 435                 <strong class="reserved">int</strong> ncells = row.<a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L436" name="L436"></a> 436                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cell = 0; cell &lt; ncells; cell++, col++) <em class="brace">{</em>
<a id="L437" name="L437"></a> 437                     <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = row.<a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(cell);
<a id="L438" name="L438"></a> 438                     <strong class="reserved">for</strong> (; row.<a href="../D/25553.html" title="Multiple defined in 2 places.">isFilled</a>(col); col++); <em class="comment">// advance to a free column</em>
<a id="L439" name="L439"></a> 439                     <strong class="reserved">int</strong> colSpan = <a href="../D/17821.html" title="Multiple defined in 2 places.">getColumnsOccupied</a>(cv);
<a id="L440" name="L440"></a> 440                     <strong class="reserved">if</strong> (colSpan &gt; 1) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441                         <a href="../D/12541.html" title="Multiple defined in 2 places.">checkMultiColumnCell</a>(axis, col, colSpan, cv);
<a id="L442" name="L442"></a> 442                         col += colSpan - 1;
<a id="L443" name="L443"></a> 443                     <em class="brace">}</em>
<a id="L444" name="L444"></a> 444                 <em class="brace">}</em>
<a id="L445" name="L445"></a> 445             <em class="brace">}</em>
<a id="L446" name="L446"></a> 446         <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<div class="comment">
        if (shouldTrace()) {
            System.err.println("calc:");
            for (int i = 0; i &lt; columnRequirements.length; i++) {
                System.err.println(" " + i + ": " + columnRequirements[i]);
            }
        }</div>
<a id="L456" name="L456"></a> 456     <em class="brace">}</em>
<a id="L457" name="L457"></a> 457 
<div class="comment">
      check the requirements of a table cell that spans a single column.</div>
<a id="L461" name="L461"></a> 461     <strong class="reserved">void</strong> <a href="../R/11363.html" title="Multiple referred from 2 places.">checkSingleColumnCell</a>(<strong class="reserved">int</strong> axis, <strong class="reserved">int</strong> col, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v) <em class="brace">{</em>
<a id="L462" name="L462"></a> 462         <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> req = columnRequirements[col];
<a id="L463" name="L463"></a> 463         req.minimum = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>((<strong class="reserved">int</strong>) v.<a href="../D/20667.html" title="Multiple defined in 20 places.">getMinimumSpan</a>(axis), req.minimum);
<a id="L464" name="L464"></a> 464         req.preferred = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>((<strong class="reserved">int</strong>) v.<a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(axis), req.preferred);
<a id="L465" name="L465"></a> 465         req.maximum = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>((<strong class="reserved">int</strong>) v.<a href="../D/20504.html" title="Multiple defined in 19 places.">getMaximumSpan</a>(axis), req.maximum);
<a id="L466" name="L466"></a> 466     <em class="brace">}</em>
<a id="L467" name="L467"></a> 467 
<div class="comment">
      check the requirements of a table cell that spans multiple
      columns.</div>
<a id="L472" name="L472"></a> 472     <strong class="reserved">void</strong> <a href="../R/11246.html" title="Multiple referred from 2 places.">checkMultiColumnCell</a>(<strong class="reserved">int</strong> axis, <strong class="reserved">int</strong> col, <strong class="reserved">int</strong> ncols, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v) <em class="brace">{</em>
<a id="L473" name="L473"></a> 473         <em class="comment">// calculate the totals</em>
<a id="L474" name="L474"></a> 474         <strong class="reserved">long</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = 0;
<a id="L475" name="L475"></a> 475         <strong class="reserved">long</strong> pref = 0;
<a id="L476" name="L476"></a> 476         <strong class="reserved">long</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = 0;
<a id="L477" name="L477"></a> 477         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ncols; i++) <em class="brace">{</em>
<a id="L478" name="L478"></a> 478             <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> req = columnRequirements[col + i];
<a id="L479" name="L479"></a> 479             <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> += req.minimum;
<a id="L480" name="L480"></a> 480             pref += req.preferred;
<a id="L481" name="L481"></a> 481             <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> += req.maximum;
<a id="L482" name="L482"></a> 482         <em class="brace">}</em>
<a id="L483" name="L483"></a> 483 
<a id="L484" name="L484"></a> 484         <em class="comment">// check if the minimum size needs adjustment.</em>
<a id="L485" name="L485"></a> 485         <strong class="reserved">int</strong> cmin = (<strong class="reserved">int</strong>) v.<a href="../D/20667.html" title="Multiple defined in 20 places.">getMinimumSpan</a>(axis);
<a id="L486" name="L486"></a> 486         <strong class="reserved">if</strong> (cmin &gt; <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>) <em class="brace">{</em>
<div class="comment">
              the columns that this cell spans need adjustment to fit
              this table cell.... calculate the adjustments.  The
              maximum for each cell is the maximum of the existing
              maximum or the amount needed by the cell.</div>
<a id="L493" name="L493"></a> 493             <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[] reqs = <strong class="reserved">new</strong> <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[ncols];
<a id="L494" name="L494"></a> 494             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ncols; i++) <em class="brace">{</em>
<a id="L495" name="L495"></a> 495                 <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> r = reqs[i] = columnRequirements[col + i];
<a id="L496" name="L496"></a> 496                 r.maximum = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(r.maximum, (<strong class="reserved">int</strong>) v.<a href="../D/20504.html" title="Multiple defined in 19 places.">getMaximumSpan</a>(axis));
<a id="L497" name="L497"></a> 497             <em class="brace">}</em>
<a id="L498" name="L498"></a> 498             <strong class="reserved">int</strong>[] spans = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[ncols];
<a id="L499" name="L499"></a> 499             <strong class="reserved">int</strong>[] offsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[ncols];
<a id="L500" name="L500"></a> 500             <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>.<a href="../D/12099.html" title="Multiple defined in 2 places.">calculateTiledPositions</a>(cmin, <strong class="reserved">null</strong>, reqs,
<a id="L501" name="L501"></a> 501                                                      offsets, spans);
<a id="L502" name="L502"></a> 502             <em class="comment">// apply the adjustments</em>
<a id="L503" name="L503"></a> 503             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ncols; i++) <em class="brace">{</em>
<a id="L504" name="L504"></a> 504                 <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> req = reqs[i];
<a id="L505" name="L505"></a> 505                 req.minimum = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(spans[i], req.minimum);
<a id="L506" name="L506"></a> 506                 req.preferred = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(req.minimum, req.preferred);
<a id="L507" name="L507"></a> 507                 req.maximum = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(req.preferred, req.maximum);
<a id="L508" name="L508"></a> 508             <em class="brace">}</em>
<a id="L509" name="L509"></a> 509         <em class="brace">}</em>
<a id="L510" name="L510"></a> 510 
<a id="L511" name="L511"></a> 511         <em class="comment">// check if the preferred size needs adjustment.</em>
<a id="L512" name="L512"></a> 512         <strong class="reserved">int</strong> cpref = (<strong class="reserved">int</strong>) v.<a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(axis);
<a id="L513" name="L513"></a> 513         <strong class="reserved">if</strong> (cpref &gt; pref) <em class="brace">{</em>
<div class="comment">
              the columns that this cell spans need adjustment to fit
              this table cell.... calculate the adjustments.  The
              maximum for each cell is the maximum of the existing
              maximum or the amount needed by the cell.</div>
<a id="L520" name="L520"></a> 520             <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[] reqs = <strong class="reserved">new</strong> <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[ncols];
<a id="L521" name="L521"></a> 521             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ncols; i++) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522                 <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> r = reqs[i] = columnRequirements[col + i];
<a id="L523" name="L523"></a> 523             <em class="brace">}</em>
<a id="L524" name="L524"></a> 524             <strong class="reserved">int</strong>[] spans = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[ncols];
<a id="L525" name="L525"></a> 525             <strong class="reserved">int</strong>[] offsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[ncols];
<a id="L526" name="L526"></a> 526             <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>.<a href="../D/12099.html" title="Multiple defined in 2 places.">calculateTiledPositions</a>(cpref, <strong class="reserved">null</strong>, reqs,
<a id="L527" name="L527"></a> 527                                                      offsets, spans);
<a id="L528" name="L528"></a> 528             <em class="comment">// apply the adjustments</em>
<a id="L529" name="L529"></a> 529             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ncols; i++) <em class="brace">{</em>
<a id="L530" name="L530"></a> 530                 <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a> req = reqs[i];
<a id="L531" name="L531"></a> 531                 req.preferred = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(spans[i], req.preferred);
<a id="L532" name="L532"></a> 532                 req.maximum = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(req.preferred, req.maximum);
<a id="L533" name="L533"></a> 533             <em class="brace">}</em>
<a id="L534" name="L534"></a> 534         <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<a id="L536" name="L536"></a> 536     <em class="brace">}</em>
<a id="L537" name="L537"></a> 537 
<div class="comment">
      Fetches the child view that represents the given position in
      the model.  This is implemented to walk through the children
      looking for a range that contains the given position.  In this
      view the children do not necessarily have a one to one mapping
      with the child elements.
      @param pos  the search position &gt;= 0
      @param a  the allocation to the table on entry, and the
        allocation of the view containing the position on exit
      @return  the view representing the given position, or
        <code>null</code> if there isn't one</div>
<a id="L551" name="L551"></a> 551     <strong class="reserved">protected</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../R/19803.html" title="Multiple referred from 6 places.">getViewAtPosition</a>(<strong class="reserved">int</strong> pos, <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552         <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L553" name="L553"></a> 553         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(i);
<a id="L555" name="L555"></a> 555             <strong class="reserved">int</strong> p0 = v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L556" name="L556"></a> 556             <strong class="reserved">int</strong> p1 = v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L557" name="L557"></a> 557             <strong class="reserved">if</strong> ((pos &gt;= p0) &amp;&amp; (pos &lt; p1)) <em class="brace">{</em>
<a id="L558" name="L558"></a> 558                 <em class="comment">// it's in this view.</em>
<a id="L559" name="L559"></a> 559                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560                     <a href="../D/12734.html" title="Multiple defined in 5 places.">childAllocation</a>(i, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L561" name="L561"></a> 561                 <em class="brace">}</em>
<a id="L562" name="L562"></a> 562                 <strong class="reserved">return</strong> v;
<a id="L563" name="L563"></a> 563             <em class="brace">}</em>
<a id="L564" name="L564"></a> 564         <em class="brace">}</em>
<a id="L565" name="L565"></a> 565         <strong class="reserved">if</strong> (pos == <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(n - 1);
<a id="L567" name="L567"></a> 567             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L568" name="L568"></a> 568                 <strong class="reserved">this</strong>.<a href="../D/12734.html" title="Multiple defined in 5 places.">childAllocation</a>(n - 1, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L569" name="L569"></a> 569             <em class="brace">}</em>
<a id="L570" name="L570"></a> 570             <strong class="reserved">return</strong> v;
<a id="L571" name="L571"></a> 571         <em class="brace">}</em>
<a id="L572" name="L572"></a> 572         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L573" name="L573"></a> 573     <em class="brace">}</em>
<a id="L574" name="L574"></a> 574 
<a id="L575" name="L575"></a> 575     <em class="comment">// ---- variables ----------------------------------------------------</em>
<a id="L576" name="L576"></a> 576 
<a id="L577" name="L577"></a> 577     <strong class="reserved">int</strong>[] columnSpans;
<a id="L578" name="L578"></a> 578     <strong class="reserved">int</strong>[] columnOffsets;
<a id="L579" name="L579"></a> 579     <a href="../S/3121.html#L96" title="Defined at 96 in src/javax/swing/SizeRequirements.java.">SizeRequirements</a>[] columnRequirements;
<a id="L580" name="L580"></a> 580     <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../S/3271.html#L587" title="Defined at 587 in src/javax/swing/text/TableView.java.">TableRow</a>&gt; rows;
<a id="L581" name="L581"></a> 581     <strong class="reserved">boolean</strong> gridValid;
<a id="L582" name="L582"></a> 582     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">private</strong> <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a> EMPTY = <strong class="reserved">new</strong> <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a>();
<a id="L583" name="L583"></a> 583 
<div class="comment">
      View of a row in a row-centric table.</div>
<a id="L587" name="L587"></a> 587     <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/7997.html" title="Multiple referred from 13 places.">TableRow</a> <strong class="reserved">extends</strong> <a href="../S/3355.html#L61" title="Defined at 61 in src/javax/swing/text/BoxView.java.">BoxView</a> <em class="brace">{</em>
<a id="L588" name="L588"></a> 588 
<div class="comment">
          Constructs a TableView for the given element.
          @param elem the element that this view is responsible for
          @since 1.4</div>
<a id="L595" name="L595"></a> 595         <strong class="reserved">public</strong> TableRow(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596             <strong class="reserved">super</strong>(elem, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.X_AXIS);
<a id="L597" name="L597"></a> 597             fillColumns = <strong class="reserved">new</strong> <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a>();
<a id="L598" name="L598"></a> 598         <em class="brace">}</em>
<a id="L599" name="L599"></a> 599 
<a id="L600" name="L600"></a> 600         <strong class="reserved">void</strong> <a href="../R/11516.html" title="Multiple referred from 2 places.">clearFilledColumns</a>() <em class="brace">{</em>
<a id="L601" name="L601"></a> 601             fillColumns.<a href="../D/11334.html" title="Multiple defined in 8 places.">and</a>(EMPTY);
<a id="L602" name="L602"></a> 602         <em class="brace">}</em>
<a id="L603" name="L603"></a> 603 
<a id="L604" name="L604"></a> 604         <strong class="reserved">void</strong> <a href="../R/14297.html" title="Multiple referred from 2 places.">fillColumn</a>(<strong class="reserved">int</strong> col) <em class="brace">{</em>
<a id="L605" name="L605"></a> 605             fillColumns.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(col);
<a id="L606" name="L606"></a> 606         <em class="brace">}</em>
<a id="L607" name="L607"></a> 607 
<a id="L608" name="L608"></a> 608         <strong class="reserved">boolean</strong> <a href="../R/21449.html" title="Multiple referred from 11 places.">isFilled</a>(<strong class="reserved">int</strong> col) <em class="brace">{</em>
<a id="L609" name="L609"></a> 609             <strong class="reserved">return</strong> fillColumns.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(col);
<a id="L610" name="L610"></a> 610         <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<div class="comment">
         /** get location in the overall set of rows */</div>
<a id="L613" name="L613"></a> 613         <strong class="reserved">int</strong> <a href="../R/18783.html" title="Multiple referred from 71 places.">getRow</a>() <em class="brace">{</em>
<a id="L614" name="L614"></a> 614             <strong class="reserved">return</strong> row;
<a id="L615" name="L615"></a> 615         <em class="brace">}</em>
<a id="L616" name="L616"></a> 616 
<div class="comment">
          set location in the overall set of rows, this is
          set by the TableView.updateGrid() method.</div>
<a id="L621" name="L621"></a> 621         <strong class="reserved">void</strong> <a href="../S/3271.html#L233" title="Referred from 233 in src/javax/swing/text/TableView.java.">setRow</a>(<strong class="reserved">int</strong> row) <em class="brace">{</em>
<a id="L622" name="L622"></a> 622             <strong class="reserved">this</strong>.row = row;
<a id="L623" name="L623"></a> 623         <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<div class="comment">
          The number of columns present in this row.</div>
<a id="L628" name="L628"></a> 628         <strong class="reserved">int</strong> <a href="../R/15671.html" title="Multiple referred from 91 places.">getColumnCount</a>() <em class="brace">{</em>
<a id="L629" name="L629"></a> 629             <strong class="reserved">int</strong> nfill = 0;
<a id="L630" name="L630"></a> 630             <strong class="reserved">int</strong> n = fillColumns.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L631" name="L631"></a> 631             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632                 <strong class="reserved">if</strong> (fillColumns.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i)) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633                     nfill ++;
<a id="L634" name="L634"></a> 634                 <em class="brace">}</em>
<a id="L635" name="L635"></a> 635             <em class="brace">}</em>
<a id="L636" name="L636"></a> 636             <strong class="reserved">return</strong> <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>() + nfill;
<a id="L637" name="L637"></a> 637         <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<div class="comment">
          Change the child views.  This is implemented to
          provide the superclass behavior and invalidate the
          grid so that rows and columns will be recalculated.</div>
<a id="L644" name="L644"></a> 644         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26140.html" title="Multiple referred from 310 places.">replace</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>[] views) <em class="brace">{</em>
<a id="L645" name="L645"></a> 645             <strong class="reserved">super</strong>.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, views);
<a id="L646" name="L646"></a> 646             <a href="../D/25030.html" title="Multiple defined in 2 places.">invalidateGrid</a>();
<a id="L647" name="L647"></a> 647         <em class="brace">}</em>
<a id="L648" name="L648"></a> 648 
<div class="comment">
          Perform layout for the major axis of the box (i.e. the
          axis that it represents).  The results of the layout should
          be placed in the given arrays which represent the allocations
          to the children along the major axis.
          <p>
          This is re-implemented to give each child the span of the column
          width for the table, and to give cells that span multiple columns
          the multi-column span.
          @param targetSpan the total span given to the view, which
           would be used to layout the children.
          @param axis the axis being layed out.
          @param offsets the offsets from the origin of the view for
           each of the child views.  This is a return value and is
           filled in by the implementation of this method.
          @param spans the span of each child view.  This is a return
           value and is filled in by the implementation of this method.</p></div>
<a id="L668" name="L668"></a> 668         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/22442.html" title="Multiple referred from 4 places.">layoutMajorAxis</a>(<strong class="reserved">int</strong> targetSpan, <strong class="reserved">int</strong> axis, <strong class="reserved">int</strong>[] offsets, <strong class="reserved">int</strong>[] spans) <em class="brace">{</em>
<a id="L669" name="L669"></a> 669             <strong class="reserved">int</strong> col = 0;
<a id="L670" name="L670"></a> 670             <strong class="reserved">int</strong> ncells = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L671" name="L671"></a> 671             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cell = 0; cell &lt; ncells; cell++, col++) <em class="brace">{</em>
<a id="L672" name="L672"></a> 672                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(cell);
<a id="L673" name="L673"></a> 673                 <strong class="reserved">for</strong> (; <a href="../D/25553.html" title="Multiple defined in 2 places.">isFilled</a>(col); col++); <em class="comment">// advance to a free column</em>
<a id="L674" name="L674"></a> 674                 <strong class="reserved">int</strong> colSpan = <a href="../D/17821.html" title="Multiple defined in 2 places.">getColumnsOccupied</a>(cv);
<a id="L675" name="L675"></a> 675                 spans[cell] = columnSpans[col];
<a id="L676" name="L676"></a> 676                 offsets[cell] = columnOffsets[col];
<a id="L677" name="L677"></a> 677                 <strong class="reserved">if</strong> (colSpan &gt; 1) <em class="brace">{</em>
<a id="L678" name="L678"></a> 678                     <strong class="reserved">int</strong> n = columnSpans.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L679" name="L679"></a> 679                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 1; j &lt; colSpan; j++) <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                         <em class="comment">// Because the table may be only partially formed, some</em>
<a id="L681" name="L681"></a> 681                         <em class="comment">// of the columns may not yet exist.  Therefore we check</em>
<a id="L682" name="L682"></a> 682                         <em class="comment">// the bounds.</em>
<a id="L683" name="L683"></a> 683                         <strong class="reserved">if</strong> ((col+j) &lt; n) <em class="brace">{</em>
<a id="L684" name="L684"></a> 684                             spans[cell] += columnSpans[col+j];
<a id="L685" name="L685"></a> 685                         <em class="brace">}</em>
<a id="L686" name="L686"></a> 686                     <em class="brace">}</em>
<a id="L687" name="L687"></a> 687                     col += colSpan - 1;
<a id="L688" name="L688"></a> 688                 <em class="brace">}</em>
<a id="L689" name="L689"></a> 689             <em class="brace">}</em>
<a id="L690" name="L690"></a> 690         <em class="brace">}</em>
<a id="L691" name="L691"></a> 691 
<div class="comment">
          Perform layout for the minor axis of the box (i.e. the
          axis orthogonal to the axis that it represents).  The results
          of the layout should be placed in the given arrays which represent
          the allocations to the children along the minor axis.  This
          is called by the superclass whenever the layout needs to be
          updated along the minor axis.
          <p>
          This is implemented to delegate to the superclass, then adjust
          the span for any cell that spans multiple rows.
          @param targetSpan the total span given to the view, which
           would be used to layout the children.
          @param axis the axis being layed out.
          @param offsets the offsets from the origin of the view for
           each of the child views.  This is a return value and is
           filled in by the implementation of this method.
          @param spans the span of each child view.  This is a return
           value and is filled in by the implementation of this method.</p></div>
<a id="L712" name="L712"></a> 712         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/22444.html" title="Multiple referred from 6 places.">layoutMinorAxis</a>(<strong class="reserved">int</strong> targetSpan, <strong class="reserved">int</strong> axis, <strong class="reserved">int</strong>[] offsets, <strong class="reserved">int</strong>[] spans) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713             <strong class="reserved">super</strong>.<a href="../D/26780.html" title="Multiple defined in 8 places.">layoutMinorAxis</a>(targetSpan, axis, offsets, spans);
<a id="L714" name="L714"></a> 714             <strong class="reserved">int</strong> col = 0;
<a id="L715" name="L715"></a> 715             <strong class="reserved">int</strong> ncells = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L716" name="L716"></a> 716             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> cell = 0; cell &lt; ncells; cell++, col++) <em class="brace">{</em>
<a id="L717" name="L717"></a> 717                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(cell);
<a id="L718" name="L718"></a> 718                 <strong class="reserved">for</strong> (; <a href="../D/25553.html" title="Multiple defined in 2 places.">isFilled</a>(col); col++); <em class="comment">// advance to a free column</em>
<a id="L719" name="L719"></a> 719                 <strong class="reserved">int</strong> colSpan = <a href="../D/17821.html" title="Multiple defined in 2 places.">getColumnsOccupied</a>(cv);
<a id="L720" name="L720"></a> 720                 <strong class="reserved">int</strong> rowSpan = <a href="../D/22185.html" title="Multiple defined in 2 places.">getRowsOccupied</a>(cv);
<a id="L721" name="L721"></a> 721                 <strong class="reserved">if</strong> (rowSpan &gt; 1) <em class="brace">{</em>
<a id="L722" name="L722"></a> 722                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 1; j &lt; rowSpan; j++) <em class="brace">{</em>
<a id="L723" name="L723"></a> 723                         <em class="comment">// test bounds of each row because it may not exist</em>
<a id="L724" name="L724"></a> 724                         <em class="comment">// either because of error or because the table isn't</em>
<a id="L725" name="L725"></a> 725                         <em class="comment">// fully loaded yet.</em>
<a id="L726" name="L726"></a> 726                         <strong class="reserved">int</strong> row = <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>() + j;
<a id="L727" name="L727"></a> 727                         <strong class="reserved">if</strong> (row &lt; <a href="../D/8818.html" title="Multiple defined in 2 places.">TableView</a>.<strong class="reserved">this</strong>.<a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>()) <em class="brace">{</em>
<a id="L728" name="L728"></a> 728                             <strong class="reserved">int</strong> span = <a href="../D/8818.html" title="Multiple defined in 2 places.">TableView</a>.<strong class="reserved">this</strong>.<a href="../D/22646.html" title="Multiple defined in 8 places.">getSpan</a>(Y_AXIS, <a href="../D/22152.html" title="Multiple defined in 8 places.">getRow</a>()+j);
<a id="L729" name="L729"></a> 729                             spans[cell] += span;
<a id="L730" name="L730"></a> 730                         <em class="brace">}</em>
<a id="L731" name="L731"></a> 731                     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732                 <em class="brace">}</em>
<a id="L733" name="L733"></a> 733                 <strong class="reserved">if</strong> (colSpan &gt; 1) <em class="brace">{</em>
<a id="L734" name="L734"></a> 734                     col += colSpan - 1;
<a id="L735" name="L735"></a> 735                 <em class="brace">}</em>
<a id="L736" name="L736"></a> 736             <em class="brace">}</em>
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738 
<div class="comment">
          Determines the resizability of the view along the
          given axis.  A value of 0 or less is not resizable.
          @param axis may be either View.X_AXIS or View.Y_AXIS
          @return the resize weight
          @exception IllegalArgumentException for an invalid axis</div>
<a id="L747" name="L747"></a> 747         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18700.html" title="Multiple referred from 6 places.">getResizeWeight</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L748" name="L748"></a> 748             <strong class="reserved">return</strong> 1;
<a id="L749" name="L749"></a> 749         <em class="brace">}</em>
<a id="L750" name="L750"></a> 750 
<div class="comment">
          Fetches the child view that represents the given position in
          the model.  This is implemented to walk through the children
          looking for a range that contains the given position.  In this
          view the children do not necessarily have a one to one mapping
          with the child elements.
          @param pos  the search position &gt;= 0
          @param a  the allocation to the table on entry, and the
            allocation of the view containing the position on exit
          @return  the view representing the given position, or
            <code>null</code> if there isn't one</div>
<a id="L764" name="L764"></a> 764         <strong class="reserved">protected</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../R/19803.html" title="Multiple referred from 6 places.">getViewAtPosition</a>(<strong class="reserved">int</strong> pos, <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L765" name="L765"></a> 765             <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L766" name="L766"></a> 766             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L767" name="L767"></a> 767                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(i);
<a id="L768" name="L768"></a> 768                 <strong class="reserved">int</strong> p0 = v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L769" name="L769"></a> 769                 <strong class="reserved">int</strong> p1 = v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L770" name="L770"></a> 770                 <strong class="reserved">if</strong> ((pos &gt;= p0) &amp;&amp; (pos &lt; p1)) <em class="brace">{</em>
<a id="L771" name="L771"></a> 771                     <em class="comment">// it's in this view.</em>
<a id="L772" name="L772"></a> 772                     <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L773" name="L773"></a> 773                         <a href="../D/12734.html" title="Multiple defined in 5 places.">childAllocation</a>(i, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L774" name="L774"></a> 774                     <em class="brace">}</em>
<a id="L775" name="L775"></a> 775                     <strong class="reserved">return</strong> v;
<a id="L776" name="L776"></a> 776                 <em class="brace">}</em>
<a id="L777" name="L777"></a> 777             <em class="brace">}</em>
<a id="L778" name="L778"></a> 778             <strong class="reserved">if</strong> (pos == <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) <em class="brace">{</em>
<a id="L779" name="L779"></a> 779                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = <a href="../D/23597.html" title="Multiple defined in 13 places.">getView</a>(n - 1);
<a id="L780" name="L780"></a> 780                 <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781                     <strong class="reserved">this</strong>.<a href="../D/12734.html" title="Multiple defined in 5 places.">childAllocation</a>(n - 1, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L782" name="L782"></a> 782                 <em class="brace">}</em>
<a id="L783" name="L783"></a> 783                 <strong class="reserved">return</strong> v;
<a id="L784" name="L784"></a> 784             <em class="brace">}</em>
<a id="L785" name="L785"></a> 785             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L786" name="L786"></a> 786         <em class="brace">}</em>
<a id="L787" name="L787"></a> 787 
<div class="comment">
         /** columns filled by multi-column or multi-row cells */</div>
<a id="L789" name="L789"></a> 789         <a href="../S/856.html#L65" title="Defined at 65 in src/java/util/BitSet.java.">BitSet</a> fillColumns;
<div class="comment">
         /** the row within the overall grid */</div>
<a id="L791" name="L791"></a> 791         <strong class="reserved">int</strong> row;
<a id="L792" name="L792"></a> 792     <em class="brace">}</em>
<a id="L793" name="L793"></a> 793 
<div class="comment">
      @deprecated  A table cell can now be any View implementation.</div>
<a id="L797" name="L797"></a> 797     @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L798" name="L798"></a> 798     <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/7979.html" title="Multiple referred from 2 places.">TableCell</a> <strong class="reserved">extends</strong> <a href="../S/3355.html#L61" title="Defined at 61 in src/javax/swing/text/BoxView.java.">BoxView</a> <strong class="reserved">implements</strong> <a href="../S/3271.html#L869" title="Defined at 869 in src/javax/swing/text/TableView.java.">GridCell</a> <em class="brace">{</em>
<a id="L799" name="L799"></a> 799 
<div class="comment">
          Constructs a TableCell for the given element.
          @param elem the element that this view is responsible for
          @since 1.4</div>
<a id="L806" name="L806"></a> 806         <strong class="reserved">public</strong> TableCell(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L807" name="L807"></a> 807             <strong class="reserved">super</strong>(elem, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.Y_AXIS);
<a id="L808" name="L808"></a> 808         <em class="brace">}</em>
<a id="L809" name="L809"></a> 809 
<a id="L810" name="L810"></a> 810         <em class="comment">// --- GridCell methods -------------------------------------</em>
<a id="L811" name="L811"></a> 811 
<div class="comment">
          Gets the number of columns this cell spans (e.g. the
          grid width).
          @return the number of columns</div>
<a id="L818" name="L818"></a> 818         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15671.html" title="Multiple referred from 91 places.">getColumnCount</a>() <em class="brace">{</em>
<a id="L819" name="L819"></a> 819             <strong class="reserved">return</strong> 1;
<a id="L820" name="L820"></a> 820         <em class="brace">}</em>
<a id="L821" name="L821"></a> 821 
<div class="comment">
          Gets the number of rows this cell spans (that is, the
          grid height).
          @return the number of rows</div>
<a id="L828" name="L828"></a> 828         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18787.html" title="Multiple referred from 152 places.">getRowCount</a>() <em class="brace">{</em>
<a id="L829" name="L829"></a> 829             <strong class="reserved">return</strong> 1;
<a id="L830" name="L830"></a> 830         <em class="brace">}</em>
<a id="L831" name="L831"></a> 831 
<a id="L832" name="L832"></a> 832 
<div class="comment">
          Sets the grid location.
          @param row the row &gt;= 0
          @param col the column &gt;= 0</div>
<a id="L839" name="L839"></a> 839         <strong class="reserved">public</strong> <strong class="reserved">void</strong> setGridLocation(<strong class="reserved">int</strong> row, <strong class="reserved">int</strong> col) <em class="brace">{</em>
<a id="L840" name="L840"></a> 840             <strong class="reserved">this</strong>.row = row;
<a id="L841" name="L841"></a> 841             <strong class="reserved">this</strong>.col = col;
<a id="L842" name="L842"></a> 842         <em class="brace">}</em>
<a id="L843" name="L843"></a> 843 
<div class="comment">
          Gets the row of the grid location</div>
<a id="L847" name="L847"></a> 847         <strong class="reserved">public</strong> <strong class="reserved">int</strong> getGridRow() <em class="brace">{</em>
<a id="L848" name="L848"></a> 848             <strong class="reserved">return</strong> row;
<a id="L849" name="L849"></a> 849         <em class="brace">}</em>
<a id="L850" name="L850"></a> 850 
<div class="comment">
          Gets the column of the grid location</div>
<a id="L854" name="L854"></a> 854         <strong class="reserved">public</strong> <strong class="reserved">int</strong> getGridColumn() <em class="brace">{</em>
<a id="L855" name="L855"></a> 855             <strong class="reserved">return</strong> col;
<a id="L856" name="L856"></a> 856         <em class="brace">}</em>
<a id="L857" name="L857"></a> 857 
<a id="L858" name="L858"></a> 858         <strong class="reserved">int</strong> row;
<a id="L859" name="L859"></a> 859         <strong class="reserved">int</strong> col;
<a id="L860" name="L860"></a> 860     <em class="brace">}</em>
<a id="L861" name="L861"></a> 861 
<div class="comment">
      <em>
      THIS IS NO LONGER USED, AND WILL BE REMOVED IN THE
      NEXT RELEASE.  THE JCK SIGNATURE TEST THINKS THIS INTERFACE
      SHOULD EXIST
      </em></div>
<a id="L869" name="L869"></a> 869     <strong class="reserved">interface</strong> <a href="../S/3271.html#L798" title="Referred from 798 in src/javax/swing/text/TableView.java.">GridCell</a> <em class="brace">{</em>
<a id="L870" name="L870"></a> 870 
<div class="comment">
          Sets the grid location.
          @param row the row &gt;= 0
          @param col the column &gt;= 0</div>
<a id="L877" name="L877"></a> 877         <strong class="reserved">public</strong> <strong class="reserved">void</strong> setGridLocation(<strong class="reserved">int</strong> row, <strong class="reserved">int</strong> col);
<a id="L878" name="L878"></a> 878 
<div class="comment">
          Gets the row of the grid location</div>
<a id="L882" name="L882"></a> 882         <strong class="reserved">public</strong> <strong class="reserved">int</strong> getGridRow();
<a id="L883" name="L883"></a> 883 
<div class="comment">
          Gets the column of the grid location</div>
<a id="L887" name="L887"></a> 887         <strong class="reserved">public</strong> <strong class="reserved">int</strong> getGridColumn();
<a id="L888" name="L888"></a> 888 
<div class="comment">
          Gets the number of columns this cell spans (e.g. the
          grid width).
          @return the number of columns</div>
<a id="L895" name="L895"></a> 895         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15671.html" title="Multiple referred from 91 places.">getColumnCount</a>();
<a id="L896" name="L896"></a> 896 
<div class="comment">
          Gets the number of rows this cell spans (that is, the
          grid height).
          @return the number of rows</div>
<a id="L903" name="L903"></a> 903         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18787.html" title="Multiple referred from 152 places.">getRowCount</a>();
<a id="L904" name="L904"></a> 904 
<a id="L905" name="L905"></a> 905     <em class="brace">}</em>
<a id="L906" name="L906"></a> 906 
<a id="L907" name="L907"></a> 907 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L89">[^]</a><a href="#L903">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
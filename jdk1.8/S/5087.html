<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L60">[^]</a><a href="#L367">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L60" title="Defined at 60.">traverseAll</a></li>
<li><a href="#L154" title="Defined at 154.">traverseSequence</a></li>
<li><a href="#L178" title="Defined at 178.">traverseChoice</a></li>
<li><a href="#L196" title="Defined at 196.">traverseSeqChoice</a></li>
<li><a href="#L304" title="Defined at 304.">hasAllContent</a></li>
<li><a href="#L334" title="Defined at 334.">pushContext</a></li>
<li><a href="#L350" title="Defined at 350.">getParticleCount</a></li>
<li><a href="#L355" title="Defined at 355.">addParticle</a></li>
<li><a href="#L367" title="Defined at 367.">popContext</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.xs.traversers;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.SchemaGrammar;
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.SchemaSymbols;
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.XSAnnotationImpl;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.XSModelGroupImpl;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.XSParticleDecl;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.util.XInt;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xs.util.XSObjectListImpl;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.DOMUtil;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.XSObject;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.XSObjectList;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> org.w3c.dom.Element;
<a id="L34" name="L34"></a>  34 
<div class="comment">
  @xerces.internal
  @author Elena Litani, IBM
  @author Sandy Gao, IBM
  @version $Id: XSDAbstractParticleTraverser.java,v 1.7 2010-11-01 04:40:02 joehw Exp $</div>
<a id="L42" name="L42"></a>  42 <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/9187.html" title="Multiple referred from 2 places.">XSDAbstractParticleTraverser</a> <strong class="reserved">extends</strong> <a href="../S/5097.html#L63" title="Defined at 63 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">XSDAbstractTraverser</a> <em class="brace">{</em>
<a id="L43" name="L43"></a>  43 
<a id="L44" name="L44"></a>  44     XSDAbstractParticleTraverser (<a href="../S/5082.html#L136" title="Defined at 136 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDHandler.java.">XSDHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>,
<a id="L45" name="L45"></a>  45             <a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a> gAttrCheck) <em class="brace">{</em>
<a id="L46" name="L46"></a>  46         <strong class="reserved">super</strong>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>, gAttrCheck);
<a id="L47" name="L47"></a>  47     <em class="brace">}</em>
<a id="L48" name="L48"></a>  48 
<div class="comment">
      Traverse the "All" declaration
      &lt;all
        id = ID
        maxOccurs = 1 : 1
        minOccurs = (0 | 1) : 1&gt;
        Content: (annotation? , element*)
      &lt;/all&gt;
     *</div>
<a id="L60" name="L60"></a>  60     <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> <a href="../R/29476.html" title="Multiple referred from 2 places.">traverseAll</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> allDecl,
<a id="L61" name="L61"></a>  61             <a href="../S/5083.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDocumentInfo.java.">XSDocumentInfo</a> schemaDoc,
<a id="L62" name="L62"></a>  62             <a href="../S/5045.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaGrammar.java.">SchemaGrammar</a> grammar,
<a id="L63" name="L63"></a>  63             <strong class="reserved">int</strong> allContextFlags,
<a id="L64" name="L64"></a>  64             <a href="../S/5366.html#L27" title="Defined at 27 in src/com/sun/org/apache/xerces/internal/xs/XSObject.java.">XSObject</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L65" name="L65"></a>  65 
<a id="L66" name="L66"></a>  66         <em class="comment">// General Attribute Checking</em>
<a id="L67" name="L67"></a>  67 
<a id="L68" name="L68"></a>  68         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] attrValues = fAttrChecker.<a href="../D/12371.html" title="Multiple defined in 5 places.">checkAttributes</a>(allDecl, <strong class="reserved">false</strong>, schemaDoc);
<a id="L69" name="L69"></a>  69 
<a id="L70" name="L70"></a>  70         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/19089.html" title="Multiple defined in 4 places.">getFirstChildElement</a>(allDecl);
<a id="L71" name="L71"></a>  71 
<a id="L72" name="L72"></a>  72         <a href="../S/5101.html#L43" title="Defined at 43 in src/com/sun/org/apache/xerces/internal/impl/xs/XSAnnotationImpl.java.">XSAnnotationImpl</a> annotation = <strong class="reserved">null</strong>;
<a id="L73" name="L73"></a>  73         <strong class="reserved">if</strong> (child !=<strong class="reserved">null</strong> &amp;&amp; <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_ANNOTATION)) <em class="brace">{</em>
<a id="L74" name="L74"></a>  74             annotation = <a href="../S/5097.html#L108" title="Defined at 108 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">traverseAnnotationDecl</a>(child, attrValues, <strong class="reserved">false</strong>, schemaDoc);
<a id="L75" name="L75"></a>  75             child = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20936.html" title="Multiple defined in 4 places.">getNextSiblingElement</a>(child);
<a id="L76" name="L76"></a>  76         <em class="brace">}</em>
<a id="L77" name="L77"></a>  77         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L78" name="L78"></a>  78             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/22891.html" title="Multiple defined in 2 places.">getSyntheticAnnotation</a>(allDecl);
<a id="L79" name="L79"></a>  79             <strong class="reserved">if</strong> (<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L80" name="L80"></a>  80                 annotation = <a href="../S/5097.html#L200" title="Defined at 200 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">traverseSyntheticAnnotation</a>(allDecl, <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, attrValues, <strong class="reserved">false</strong>, schemaDoc);
<a id="L81" name="L81"></a>  81             <em class="brace">}</em>
<a id="L82" name="L82"></a>  82         <em class="brace">}</em>
<a id="L83" name="L83"></a>  83         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> childName = <strong class="reserved">null</strong>;
<a id="L84" name="L84"></a>  84         <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> particle;
<a id="L85" name="L85"></a>  85         fPArray.<a href="../D/29939.html" title="Multiple defined in 10 places.">pushContext</a>();
<a id="L86" name="L86"></a>  86 
<a id="L87" name="L87"></a>  87         <strong class="reserved">for</strong> (; child != <strong class="reserved">null</strong>; child = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20936.html" title="Multiple defined in 4 places.">getNextSiblingElement</a>(child)) <em class="brace">{</em>
<a id="L88" name="L88"></a>  88 
<a id="L89" name="L89"></a>  89             particle = <strong class="reserved">null</strong>;
<a id="L90" name="L90"></a>  90             childName = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child);
<a id="L91" name="L91"></a>  91 
<a id="L92" name="L92"></a>  92             <em class="comment">// Only elements are allowed in &lt;all&gt;</em>
<a id="L93" name="L93"></a>  93             <strong class="reserved">if</strong> (childName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_ELEMENT)) <em class="brace">{</em>
<a id="L94" name="L94"></a>  94                 particle = fSchemaHandler.fElementTraverser.<a href="../D/35667.html" title="Multiple defined in 7 places.">traverseLocal</a>(child, schemaDoc, grammar, PROCESSING_ALL_EL, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L95" name="L95"></a>  95             <em class="brace">}</em>
<a id="L96" name="L96"></a>  96             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L97" name="L97"></a>  97                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args = <em class="brace">{</em>"all", "(annotation?, element*)", <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child)<em class="brace">}</em>;
<a id="L98" name="L98"></a>  98                 <a href="../D/31098.html" title="Multiple defined in 6 places.">reportSchemaError</a>("s4s-elt-must-match.1", args, child);
<a id="L99" name="L99"></a>  99             <em class="brace">}</em>
<a id="L100" name="L100"></a> 100 
<a id="L101" name="L101"></a> 101             <strong class="reserved">if</strong> (particle != <strong class="reserved">null</strong>)
<a id="L102" name="L102"></a> 102                 fPArray.<a href="../S/5087.html#L355" title="Defined at 355 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">addParticle</a>(particle);
<a id="L103" name="L103"></a> 103         <em class="brace">}</em>
<a id="L104" name="L104"></a> 104 
<a id="L105" name="L105"></a> 105         particle = <strong class="reserved">null</strong>;
<a id="L106" name="L106"></a> 106         <a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a> minAtt = (<a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a>)attrValues[<a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a>.ATTIDX_MINOCCURS];
<a id="L107" name="L107"></a> 107         <a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a> maxAtt = (<a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a>)attrValues[<a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a>.ATTIDX_MAXOCCURS];
<a id="L108" name="L108"></a> 108         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> defaultVals = (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)attrValues[<a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a>.ATTIDX_FROMDEFAULT];
<a id="L109" name="L109"></a> 109 
<a id="L110" name="L110"></a> 110         <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a> <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a> = <strong class="reserved">new</strong> <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>();
<a id="L111" name="L111"></a> 111         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fCompositor = <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>.MODELGROUP_ALL;
<a id="L112" name="L112"></a> 112         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fParticleCount = fPArray.<a href="../S/5087.html#L350" title="Defined at 350 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">getParticleCount</a>();
<a id="L113" name="L113"></a> 113         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fParticles = fPArray.<a href="../D/29421.html" title="Multiple defined in 9 places.">popContext</a>();
<a id="L114" name="L114"></a> 114         <a href="../S/5373.html#L30" title="Defined at 30 in src/com/sun/org/apache/xerces/internal/xs/XSObjectList.java.">XSObjectList</a> <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>;
<a id="L115" name="L115"></a> 115         <strong class="reserved">if</strong> (annotation != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L116" name="L116"></a> 116             <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a> = <strong class="reserved">new</strong> <a href="../S/5058.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XSObjectListImpl.java.">XSObjectListImpl</a>();
<a id="L117" name="L117"></a> 117             ((<a href="../S/5058.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XSObjectListImpl.java.">XSObjectListImpl</a>)<a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>).<a href="../D/11178.html" title="Multiple defined in 2 places.">addXSObject</a> (annotation);
<a id="L118" name="L118"></a> 118         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L119" name="L119"></a> 119             <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a> = <a href="../S/5058.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XSObjectListImpl.java.">XSObjectListImpl</a>.EMPTY_LIST;
<a id="L120" name="L120"></a> 120         <em class="brace">}</em>
<a id="L121" name="L121"></a> 121         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fAnnotations = <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>;
<a id="L122" name="L122"></a> 122         particle = <strong class="reserved">new</strong> <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>();
<a id="L123" name="L123"></a> 123         particle.fType = <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>.PARTICLE_MODELGROUP;
<a id="L124" name="L124"></a> 124         particle.fMinOccurs = minAtt.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L125" name="L125"></a> 125         particle.fMaxOccurs = maxAtt.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L126" name="L126"></a> 126         particle.fValue = <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>;
<a id="L127" name="L127"></a> 127         particle.fAnnotations = <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>;
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129         particle = <a href="../S/5097.html#L739" title="Defined at 739 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">checkOccurrences</a>(particle,
<a id="L130" name="L130"></a> 130                 <a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_ALL,
<a id="L131" name="L131"></a> 131                 (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)allDecl.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>(),
<a id="L132" name="L132"></a> 132                 allContextFlags,
<a id="L133" name="L133"></a> 133                 defaultVals.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>());
<a id="L134" name="L134"></a> 134         fAttrChecker.<a href="../S/5092.html#L1710" title="Defined at 1710 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">returnAttrArray</a>(attrValues, schemaDoc);
<a id="L135" name="L135"></a> 135 
<a id="L136" name="L136"></a> 136         <strong class="reserved">return</strong> particle;
<a id="L137" name="L137"></a> 137     <em class="brace">}</em>
<a id="L138" name="L138"></a> 138 
<div class="comment">
      Traverse the Sequence declaration
      <sequence id="ID" maxoccurs="string" minoccurs="nonNegativeInteger">
        Content: (annotation? , (element | group | choice | sequence | any)*)
      </sequence>
      @param seqDecl
      @param schemaDoc
      @param grammar
      @return</div>
<a id="L154" name="L154"></a> 154     <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> <a href="../R/29508.html" title="Multiple referred from 3 places.">traverseSequence</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> seqDecl,
<a id="L155" name="L155"></a> 155             <a href="../S/5083.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDocumentInfo.java.">XSDocumentInfo</a> schemaDoc,
<a id="L156" name="L156"></a> 156             <a href="../S/5045.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaGrammar.java.">SchemaGrammar</a> grammar,
<a id="L157" name="L157"></a> 157             <strong class="reserved">int</strong> allContextFlags,
<a id="L158" name="L158"></a> 158             <a href="../S/5366.html#L27" title="Defined at 27 in src/com/sun/org/apache/xerces/internal/xs/XSObject.java.">XSObject</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159 
<a id="L160" name="L160"></a> 160         <strong class="reserved">return</strong> <a href="../S/5087.html#L196" title="Defined at 196 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">traverseSeqChoice</a>(seqDecl, schemaDoc, grammar, allContextFlags, <strong class="reserved">false</strong>, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L161" name="L161"></a> 161     <em class="brace">}</em>
<a id="L162" name="L162"></a> 162 
<div class="comment">
      Traverse the Choice declaration
      <choice id="ID" maxoccurs="string" minoccurs="nonNegativeInteger">
        Content: (annotation? , (element | group | choice | sequence | any)*)
      </choice>
      @param choiceDecl
      @param schemaDoc
      @param grammar
      @return</div>
<a id="L178" name="L178"></a> 178     <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> <a href="../R/29482.html" title="Multiple referred from 3 places.">traverseChoice</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> choiceDecl,
<a id="L179" name="L179"></a> 179             <a href="../S/5083.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDocumentInfo.java.">XSDocumentInfo</a> schemaDoc,
<a id="L180" name="L180"></a> 180             <a href="../S/5045.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaGrammar.java.">SchemaGrammar</a> grammar,
<a id="L181" name="L181"></a> 181             <strong class="reserved">int</strong> allContextFlags,
<a id="L182" name="L182"></a> 182             <a href="../S/5366.html#L27" title="Defined at 27 in src/com/sun/org/apache/xerces/internal/xs/XSObject.java.">XSObject</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L183" name="L183"></a> 183 
<a id="L184" name="L184"></a> 184         <strong class="reserved">return</strong> <a href="../S/5087.html#L196" title="Defined at 196 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">traverseSeqChoice</a> (choiceDecl, schemaDoc, grammar, allContextFlags, <strong class="reserved">true</strong>, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L185" name="L185"></a> 185     <em class="brace">}</em>
<a id="L186" name="L186"></a> 186 
<div class="comment">
      Common traversal for <choice> and <sequence>
      @param decl
      @param schemaDoc
      @param grammar
      @param choice    If traversing <choice> this parameter is true.
      @return</choice></sequence></choice></div>
<a id="L196" name="L196"></a> 196     <strong class="reserved">private</strong> <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> <a href="../R/29507.html" title="Multiple referred from 2 places.">traverseSeqChoice</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> decl,
<a id="L197" name="L197"></a> 197             <a href="../S/5083.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDocumentInfo.java.">XSDocumentInfo</a> schemaDoc,
<a id="L198" name="L198"></a> 198             <a href="../S/5045.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaGrammar.java.">SchemaGrammar</a> grammar,
<a id="L199" name="L199"></a> 199             <strong class="reserved">int</strong> allContextFlags,
<a id="L200" name="L200"></a> 200             <strong class="reserved">boolean</strong> choice,
<a id="L201" name="L201"></a> 201             <a href="../S/5366.html#L27" title="Defined at 27 in src/com/sun/org/apache/xerces/internal/xs/XSObject.java.">XSObject</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L202" name="L202"></a> 202 
<a id="L203" name="L203"></a> 203         <em class="comment">// General Attribute Checking</em>
<a id="L204" name="L204"></a> 204         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] attrValues = fAttrChecker.<a href="../D/12371.html" title="Multiple defined in 5 places.">checkAttributes</a>(decl, <strong class="reserved">false</strong>, schemaDoc);
<a id="L205" name="L205"></a> 205 
<a id="L206" name="L206"></a> 206         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> child = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/19089.html" title="Multiple defined in 4 places.">getFirstChildElement</a>(decl);
<a id="L207" name="L207"></a> 207         <a href="../S/5101.html#L43" title="Defined at 43 in src/com/sun/org/apache/xerces/internal/impl/xs/XSAnnotationImpl.java.">XSAnnotationImpl</a> annotation = <strong class="reserved">null</strong>;
<a id="L208" name="L208"></a> 208         <strong class="reserved">if</strong> (child !=<strong class="reserved">null</strong> &amp;&amp; <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_ANNOTATION)) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209             annotation = <a href="../S/5097.html#L108" title="Defined at 108 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">traverseAnnotationDecl</a>(child, attrValues, <strong class="reserved">false</strong>, schemaDoc);
<a id="L210" name="L210"></a> 210             child = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20936.html" title="Multiple defined in 4 places.">getNextSiblingElement</a>(child);
<a id="L211" name="L211"></a> 211         <em class="brace">}</em>
<a id="L212" name="L212"></a> 212         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L213" name="L213"></a> 213             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/22891.html" title="Multiple defined in 2 places.">getSyntheticAnnotation</a>(decl);
<a id="L214" name="L214"></a> 214             <strong class="reserved">if</strong> (<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L215" name="L215"></a> 215                 annotation = <a href="../S/5097.html#L200" title="Defined at 200 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">traverseSyntheticAnnotation</a>(decl, <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, attrValues, <strong class="reserved">false</strong>, schemaDoc);
<a id="L216" name="L216"></a> 216             <em class="brace">}</em>
<a id="L217" name="L217"></a> 217         <em class="brace">}</em>
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> childName = <strong class="reserved">null</strong>;
<a id="L220" name="L220"></a> 220         <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> particle;
<a id="L221" name="L221"></a> 221         fPArray.<a href="../D/29939.html" title="Multiple defined in 10 places.">pushContext</a>();
<a id="L222" name="L222"></a> 222 
<a id="L223" name="L223"></a> 223         <strong class="reserved">for</strong> (;child != <strong class="reserved">null</strong>;child = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20936.html" title="Multiple defined in 4 places.">getNextSiblingElement</a>(child)) <em class="brace">{</em>
<a id="L224" name="L224"></a> 224 
<a id="L225" name="L225"></a> 225             particle = <strong class="reserved">null</strong>;
<a id="L226" name="L226"></a> 226 
<a id="L227" name="L227"></a> 227             childName = <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child);
<a id="L228" name="L228"></a> 228             <strong class="reserved">if</strong> (childName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_ELEMENT)) <em class="brace">{</em>
<a id="L229" name="L229"></a> 229                 particle = fSchemaHandler.fElementTraverser.<a href="../D/35667.html" title="Multiple defined in 7 places.">traverseLocal</a>(child, schemaDoc, grammar, NOT_ALL_CONTEXT, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L230" name="L230"></a> 230             <em class="brace">}</em>
<a id="L231" name="L231"></a> 231             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (childName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_GROUP)) <em class="brace">{</em>
<a id="L232" name="L232"></a> 232                 particle = fSchemaHandler.fGroupTraverser.<a href="../D/35667.html" title="Multiple defined in 7 places.">traverseLocal</a>(child, schemaDoc, grammar);
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234                 <em class="comment">// A content type of all can only appear</em>
<a id="L235" name="L235"></a> 235                 <em class="comment">// as the content type of a complex type definition.</em>
<a id="L236" name="L236"></a> 236                 <strong class="reserved">if</strong> (<a href="../S/5087.html#L304" title="Defined at 304 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">hasAllContent</a>(particle)) <em class="brace">{</em>
<a id="L237" name="L237"></a> 237                     <em class="comment">// don't insert the "all" particle, otherwise we won't be</em>
<a id="L238" name="L238"></a> 238                     <em class="comment">// able to create DFA from this content model</em>
<a id="L239" name="L239"></a> 239                     particle = <strong class="reserved">null</strong>;
<a id="L240" name="L240"></a> 240                     <a href="../D/31098.html" title="Multiple defined in 6 places.">reportSchemaError</a>("cos-all-limited.1.2", <strong class="reserved">null</strong>, child);
<a id="L241" name="L241"></a> 241                 <em class="brace">}</em>
<a id="L242" name="L242"></a> 242 
<a id="L243" name="L243"></a> 243             <em class="brace">}</em>
<a id="L244" name="L244"></a> 244             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (childName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_CHOICE)) <em class="brace">{</em>
<a id="L245" name="L245"></a> 245                 particle = <a href="../S/5087.html#L178" title="Defined at 178 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">traverseChoice</a>(child, schemaDoc, grammar, NOT_ALL_CONTEXT, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L246" name="L246"></a> 246             <em class="brace">}</em>
<a id="L247" name="L247"></a> 247             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (childName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_SEQUENCE)) <em class="brace">{</em>
<a id="L248" name="L248"></a> 248                 particle = <a href="../S/5087.html#L154" title="Defined at 154 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">traverseSequence</a>(child, schemaDoc, grammar, NOT_ALL_CONTEXT, <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L249" name="L249"></a> 249             <em class="brace">}</em>
<a id="L250" name="L250"></a> 250             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (childName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_ANY)) <em class="brace">{</em>
<a id="L251" name="L251"></a> 251                 particle = fSchemaHandler.fWildCardTraverser.<a href="../S/5100.html#L85" title="Defined at 85 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDWildcardTraverser.java.">traverseAny</a>(child, schemaDoc, grammar);
<a id="L252" name="L252"></a> 252             <em class="brace">}</em>
<a id="L253" name="L253"></a> 253             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                 <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> [] args;
<a id="L255" name="L255"></a> 255                 <strong class="reserved">if</strong> (choice) <em class="brace">{</em>
<a id="L256" name="L256"></a> 256                     args = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>"choice", "(annotation?, (element | group | choice | sequence | any)*)", <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child)<em class="brace">}</em>;
<a id="L257" name="L257"></a> 257                 <em class="brace">}</em>
<a id="L258" name="L258"></a> 258                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                     args = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>"sequence", "(annotation?, (element | group | choice | sequence | any)*)", <a href="../S/5319.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/util/DOMUtil.java.">DOMUtil</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(child)<em class="brace">}</em>;
<a id="L260" name="L260"></a> 260                 <em class="brace">}</em>
<a id="L261" name="L261"></a> 261                 <a href="../D/31098.html" title="Multiple defined in 6 places.">reportSchemaError</a>("s4s-elt-must-match.1", args, child);
<a id="L262" name="L262"></a> 262             <em class="brace">}</em>
<a id="L263" name="L263"></a> 263 
<a id="L264" name="L264"></a> 264             <strong class="reserved">if</strong> (particle != <strong class="reserved">null</strong>)
<a id="L265" name="L265"></a> 265                 fPArray.<a href="../S/5087.html#L355" title="Defined at 355 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">addParticle</a>(particle);
<a id="L266" name="L266"></a> 266         <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 
<a id="L268" name="L268"></a> 268         particle = <strong class="reserved">null</strong>;
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270         <a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a> minAtt = (<a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a>)attrValues[<a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a>.ATTIDX_MINOCCURS];
<a id="L271" name="L271"></a> 271         <a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a> maxAtt = (<a href="../S/5059.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XInt.java.">XInt</a>)attrValues[<a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a>.ATTIDX_MAXOCCURS];
<a id="L272" name="L272"></a> 272         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> defaultVals = (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)attrValues[<a href="../S/5092.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">XSAttributeChecker</a>.ATTIDX_FROMDEFAULT];
<a id="L273" name="L273"></a> 273 
<a id="L274" name="L274"></a> 274         <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a> <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a> = <strong class="reserved">new</strong> <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>();
<a id="L275" name="L275"></a> 275         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fCompositor = choice ? <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>.MODELGROUP_CHOICE : <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>.MODELGROUP_SEQUENCE;
<a id="L276" name="L276"></a> 276         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fParticleCount = fPArray.<a href="../S/5087.html#L350" title="Defined at 350 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">getParticleCount</a>();
<a id="L277" name="L277"></a> 277         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fParticles = fPArray.<a href="../D/29421.html" title="Multiple defined in 9 places.">popContext</a>();
<a id="L278" name="L278"></a> 278         <a href="../S/5373.html#L30" title="Defined at 30 in src/com/sun/org/apache/xerces/internal/xs/XSObjectList.java.">XSObjectList</a> <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>;
<a id="L279" name="L279"></a> 279         <strong class="reserved">if</strong> (annotation != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L280" name="L280"></a> 280             <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a> = <strong class="reserved">new</strong> <a href="../S/5058.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XSObjectListImpl.java.">XSObjectListImpl</a>();
<a id="L281" name="L281"></a> 281             ((<a href="../S/5058.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XSObjectListImpl.java.">XSObjectListImpl</a>)<a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>).<a href="../D/11178.html" title="Multiple defined in 2 places.">addXSObject</a> (annotation);
<a id="L282" name="L282"></a> 282         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L283" name="L283"></a> 283             <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a> = <a href="../S/5058.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/impl/xs/util/XSObjectListImpl.java.">XSObjectListImpl</a>.EMPTY_LIST;
<a id="L284" name="L284"></a> 284         <em class="brace">}</em>
<a id="L285" name="L285"></a> 285         <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>.fAnnotations = <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>;
<a id="L286" name="L286"></a> 286         particle = <strong class="reserved">new</strong> <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>();
<a id="L287" name="L287"></a> 287         particle.fType = <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>.PARTICLE_MODELGROUP;
<a id="L288" name="L288"></a> 288         particle.fMinOccurs = minAtt.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L289" name="L289"></a> 289         particle.fMaxOccurs = maxAtt.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L290" name="L290"></a> 290         particle.fValue = <a href="../D/23914.html" title="Multiple defined in 8 places.">group</a>;
<a id="L291" name="L291"></a> 291         particle.fAnnotations = <a href="../D/11345.html" title="Multiple defined in 5 places.">annotations</a>;
<a id="L292" name="L292"></a> 292 
<a id="L293" name="L293"></a> 293         particle = <a href="../S/5097.html#L739" title="Defined at 739 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractTraverser.java.">checkOccurrences</a>(particle,
<a id="L294" name="L294"></a> 294                 choice ? <a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_CHOICE : <a href="../S/5043.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/impl/xs/SchemaSymbols.java.">SchemaSymbols</a>.ELT_SEQUENCE,
<a id="L295" name="L295"></a> 295                         (<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>)decl.<a href="../D/21403.html" title="Multiple defined in 15 places.">getParentNode</a>(),
<a id="L296" name="L296"></a> 296                         allContextFlags,
<a id="L297" name="L297"></a> 297                         defaultVals.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>());
<a id="L298" name="L298"></a> 298         fAttrChecker.<a href="../S/5092.html#L1710" title="Defined at 1710 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSAttributeChecker.java.">returnAttrArray</a>(attrValues, schemaDoc);
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300         <strong class="reserved">return</strong> particle;
<a id="L301" name="L301"></a> 301     <em class="brace">}</em>
<a id="L302" name="L302"></a> 302 
<a id="L303" name="L303"></a> 303     <em class="comment">// Determines whether a content spec tree represents an "all" content model</em>
<a id="L304" name="L304"></a> 304     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../S/5087.html#L236" title="Referred from 236 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">hasAllContent</a>(<a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> particle) <em class="brace">{</em>
<a id="L305" name="L305"></a> 305         <em class="comment">// If the content is not empty, is the top node ALL?</em>
<a id="L306" name="L306"></a> 306         <strong class="reserved">if</strong> (particle != <strong class="reserved">null</strong> &amp;&amp; particle.fType == <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>.PARTICLE_MODELGROUP) <em class="brace">{</em>
<a id="L307" name="L307"></a> 307             <strong class="reserved">return</strong> ((<a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>)particle.fValue).fCompositor == <a href="../S/5131.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSModelGroupImpl.java.">XSModelGroupImpl</a>.MODELGROUP_ALL;
<a id="L308" name="L308"></a> 308         <em class="brace">}</em>
<a id="L309" name="L309"></a> 309 
<a id="L310" name="L310"></a> 310         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L311" name="L311"></a> 311     <em class="brace">}</em>
<a id="L312" name="L312"></a> 312 
<a id="L313" name="L313"></a> 313     <em class="comment">// the inner class: used to store particles for model groups</em>
<a id="L314" name="L314"></a> 314     <em class="comment">// to avoid creating a new Vector in each model group, or when traversing</em>
<a id="L315" name="L315"></a> 315     <em class="comment">// each model group, we use this one big array to store all particles</em>
<a id="L316" name="L316"></a> 316     <em class="comment">// for model groups. when the traversal finishes, this class returns an</em>
<a id="L317" name="L317"></a> 317     <em class="comment">// XSParticleDecl[] containing all particles for the current model group.</em>
<a id="L318" name="L318"></a> 318     <em class="comment">// it's possible that we need to traverse another model group while</em>
<a id="L319" name="L319"></a> 319     <em class="comment">// traversing one (one inside another one; referring to a global group,</em>
<a id="L320" name="L320"></a> 320     <em class="comment">// etc.), so we have push/pos context methods to save the same of the</em>
<a id="L321" name="L321"></a> 321     <em class="comment">// current traversal before starting the traversal of another model group.</em>
<a id="L322" name="L322"></a> 322     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/5087.html#L384" title="Referred from 384 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">ParticleArray</a> <em class="brace">{</em>
<a id="L323" name="L323"></a> 323         <em class="comment">// big array to contain all particles</em>
<a id="L324" name="L324"></a> 324         <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[] fParticles = <strong class="reserved">new</strong> <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[10];
<a id="L325" name="L325"></a> 325         <em class="comment">// the ending position of particles in the array for each context</em>
<a id="L326" name="L326"></a> 326         <em class="comment">// index 0 is reserved, with value 0. index 1 is used for the fist</em>
<a id="L327" name="L327"></a> 327         <em class="comment">// context. so that the number of particles for context 'i' can be</em>
<a id="L328" name="L328"></a> 328         <em class="comment">// computed simply by fPos[i] - fPos[i-1].</em>
<a id="L329" name="L329"></a> 329         <strong class="reserved">int</strong>[] fPos = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[5];
<a id="L330" name="L330"></a> 330         <em class="comment">// number of contexts</em>
<a id="L331" name="L331"></a> 331         <strong class="reserved">int</strong> fContextCount = 0;
<a id="L332" name="L332"></a> 332 
<a id="L333" name="L333"></a> 333         <em class="comment">// start a new context (start traversing a new model group)</em>
<a id="L334" name="L334"></a> 334         <strong class="reserved">void</strong> <a href="../R/25262.html" title="Multiple referred from 29 places.">pushContext</a>() <em class="brace">{</em>
<a id="L335" name="L335"></a> 335             fContextCount++;
<a id="L336" name="L336"></a> 336             <em class="comment">// resize position array if necessary</em>
<a id="L337" name="L337"></a> 337             <strong class="reserved">if</strong> (fContextCount == fPos.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L338" name="L338"></a> 338                 <strong class="reserved">int</strong> newSize = fContextCount * 2;
<a id="L339" name="L339"></a> 339                 <strong class="reserved">int</strong>[] <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[newSize];
<a id="L340" name="L340"></a> 340                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fPos, 0, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>, 0, fContextCount);
<a id="L341" name="L341"></a> 341                 fPos = <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>;
<a id="L342" name="L342"></a> 342             <em class="brace">}</em>
<a id="L343" name="L343"></a> 343             <em class="comment">// the initial ending position of the current context is the</em>
<a id="L344" name="L344"></a> 344             <em class="comment">// ending position of the previsous context. which means there is</em>
<a id="L345" name="L345"></a> 345             <em class="comment">// no particle for the current context yet.</em>
<a id="L346" name="L346"></a> 346             fPos[fContextCount] = fPos[fContextCount-1];
<a id="L347" name="L347"></a> 347         <em class="brace">}</em>
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349         <em class="comment">// get the number of particles of this context (model group)</em>
<a id="L350" name="L350"></a> 350         <strong class="reserved">int</strong> <a href="../R/18293.html" title="Multiple referred from 2 places.">getParticleCount</a>() <em class="brace">{</em>
<a id="L351" name="L351"></a> 351             <strong class="reserved">return</strong> fPos[fContextCount] - fPos[fContextCount-1];
<a id="L352" name="L352"></a> 352         <em class="brace">}</em>
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354         <em class="comment">// add a particle to the current context</em>
<a id="L355" name="L355"></a> 355         <strong class="reserved">void</strong> <a href="../R/9896.html" title="Multiple referred from 2 places.">addParticle</a>(<a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a> particle) <em class="brace">{</em>
<a id="L356" name="L356"></a> 356             <em class="comment">// resize the particle array if necessary</em>
<a id="L357" name="L357"></a> 357             <strong class="reserved">if</strong> (fPos[fContextCount] == fParticles.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358                 <strong class="reserved">int</strong> newSize = fPos[fContextCount] * 2;
<a id="L359" name="L359"></a> 359                 <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[] <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a> = <strong class="reserved">new</strong> <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[newSize];
<a id="L360" name="L360"></a> 360                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fParticles, 0, <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>, 0, fPos[fContextCount]);
<a id="L361" name="L361"></a> 361                 fParticles = <a href="../D/27956.html" title="Multiple defined in 13 places.">newArray</a>;
<a id="L362" name="L362"></a> 362             <em class="brace">}</em>
<a id="L363" name="L363"></a> 363             fParticles[fPos[fContextCount]++] = particle;
<a id="L364" name="L364"></a> 364         <em class="brace">}</em>
<a id="L365" name="L365"></a> 365 
<a id="L366" name="L366"></a> 366         <em class="comment">// end the current context, and return an array of particles</em>
<a id="L367" name="L367"></a> 367         <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[] <a href="../R/24809.html" title="Multiple referred from 23 places.">popContext</a>() <em class="brace">{</em>
<a id="L368" name="L368"></a> 368             <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = fPos[fContextCount] - fPos[fContextCount-1];
<a id="L369" name="L369"></a> 369             <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <strong class="reserved">null</strong>;
<a id="L370" name="L370"></a> 370             <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> != 0) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371                 <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a> = <strong class="reserved">new</strong> <a href="../S/5110.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/xs/XSParticleDecl.java.">XSParticleDecl</a>[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>];
<a id="L372" name="L372"></a> 372                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fParticles, fPos[fContextCount-1], <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>, 0, <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L373" name="L373"></a> 373                 <em class="comment">// clear the particle array, to release memory</em>
<a id="L374" name="L374"></a> 374                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = fPos[fContextCount-1]; i &lt; fPos[fContextCount]; i++)
<a id="L375" name="L375"></a> 375                     fParticles[i] = <strong class="reserved">null</strong>;
<a id="L376" name="L376"></a> 376             <em class="brace">}</em>
<a id="L377" name="L377"></a> 377             fContextCount--;
<a id="L378" name="L378"></a> 378             <strong class="reserved">return</strong> <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>;
<a id="L379" name="L379"></a> 379         <em class="brace">}</em>
<a id="L380" name="L380"></a> 380 
<a id="L381" name="L381"></a> 381     <em class="brace">}</em>
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383     <em class="comment">// the big particle array to hold all particles in model groups</em>
<a id="L384" name="L384"></a> 384     <a href="../S/5087.html#L322" title="Defined at 322 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">ParticleArray</a> fPArray = <strong class="reserved">new</strong> <a href="../S/5087.html#L322" title="Defined at 322 in src/com/sun/org/apache/xerces/internal/impl/xs/traversers/XSDAbstractParticleTraverser.java.">ParticleArray</a>();
<a id="L385" name="L385"></a> 385 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L60">[^]</a><a href="#L367">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
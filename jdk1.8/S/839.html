<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/prefs/AbstractPreferences.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L239">[^]</a><a href="#L1614">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L239" title="Defined at 239.">put</a></li>
<li><a href="#L278" title="Defined at 278.">get</a></li>
<li><a href="#L310" title="Defined at 310.">remove</a></li>
<li><a href="#L335" title="Defined at 335.">clear</a></li>
<li><a href="#L359" title="Defined at 359.">putInt</a></li>
<li><a href="#L385" title="Defined at 385.">getInt</a></li>
<li><a href="#L414" title="Defined at 414.">putLong</a></li>
<li><a href="#L440" title="Defined at 440.">getLong</a></li>
<li><a href="#L469" title="Defined at 469.">putBoolean</a></li>
<li><a href="#L498" title="Defined at 498.">getBoolean</a></li>
<li><a href="#L527" title="Defined at 527.">putFloat</a></li>
<li><a href="#L553" title="Defined at 553.">getFloat</a></li>
<li><a href="#L582" title="Defined at 582.">putDouble</a></li>
<li><a href="#L608" title="Defined at 608.">getDouble</a></li>
<li><a href="#L633" title="Defined at 633.">putByteArray</a></li>
<li><a href="#L654" title="Defined at 654.">getByteArray</a></li>
<li><a href="#L683" title="Defined at 683.">keys</a></li>
<li><a href="#L712" title="Defined at 712.">childrenNames</a></li>
<li><a href="#L731" title="Defined at 731.">cachedChildren</a></li>
<li><a href="#L750" title="Defined at 750.">parent</a></li>
<li><a href="#L804" title="Defined at 804.">node</a></li>
<li><a href="#L823" title="Defined at 823.">node</a></li>
<li><a href="#L867" title="Defined at 867.">nodeExists</a></li>
<li><a href="#L889" title="Defined at 889.">nodeExists</a></li>
<li><a href="#L942" title="Defined at 942.">removeNode</a></li>
<li><a href="#L955" title="Defined at 955.">removeNode2</a></li>
<li><a href="#L991" title="Defined at 991.">name</a></li>
<li><a href="#L1006" title="Defined at 1006.">absolutePath</a></li>
<li><a href="#L1023" title="Defined at 1023.">isUserNode</a></li>
<li><a href="#L1032" title="Defined at 1032.">addPreferenceChangeListener</a></li>
<li><a href="#L1048" title="Defined at 1048.">removePreferenceChangeListener</a></li>
<li><a href="#L1070" title="Defined at 1070.">addNodeChangeListener</a></li>
<li><a href="#L1091" title="Defined at 1091.">removeNodeChangeListener</a></li>
<li><a href="#L1127" title="Defined at 1127.">putSpi</a></li>
<li><a href="#L1149" title="Defined at 1149.">getSpi</a></li>
<li><a href="#L1160" title="Defined at 1160.">removeSpi</a></li>
<li><a href="#L1184" title="Defined at 1184.">removeNodeSpi</a></li>
<li><a href="#L1203" title="Defined at 1203.">keysSpi</a></li>
<li><a href="#L1223" title="Defined at 1223.">childrenNamesSpi</a></li>
<li><a href="#L1255" title="Defined at 1255.">getChild</a></li>
<li><a href="#L1298" title="Defined at 1298.">childSpi</a></li>
<li><a href="#L1303" title="Defined at 1303.">toString</a></li>
<li><a href="#L1328" title="Defined at 1328.">sync</a></li>
<li><a href="#L1332" title="Defined at 1332.">sync2</a></li>
<li><a href="#L1364" title="Defined at 1364.">syncSpi</a></li>
<li><a href="#L1388" title="Defined at 1388.">flush</a></li>
<li><a href="#L1392" title="Defined at 1392.">flush2</a></li>
<li><a href="#L1425" title="Defined at 1425.">flushSpi</a></li>
<li><a href="#L1436" title="Defined at 1436.">isRemoved</a></li>
<li><a href="#L1475" title="Defined at 1475.">run</a></li>
<li><a href="#L1520" title="Defined at 1520.">startEventDispatchThreadIfNecessary</a></li>
<li><a href="#L1535" title="Defined at 1535.">prefListeners</a></li>
<li><a href="#L1540" title="Defined at 1540.">nodeListeners</a></li>
<li><a href="#L1551" title="Defined at 1551.">enqueuePreferenceChangeEvent</a></li>
<li><a href="#L1565" title="Defined at 1565.">enqueueNodeAddedEvent</a></li>
<li><a href="#L1579" title="Defined at 1579.">enqueueNodeRemovedEvent</a></li>
<li><a href="#L1598" title="Defined at 1598.">exportNode</a></li>
<li><a href="#L1614" title="Defined at 1614.">exportSubtree</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.prefs;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.*;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.security.PrivilegedAction;
<a id="L32" name="L32"></a>  32 <em class="comment">// These imports needed only as a workaround for a JavaDoc bug</em>
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.lang.Integer;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.lang.Long;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.lang.Float;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.lang.Double;
<a id="L37" name="L37"></a>  37 
<div class="comment">
  This class provides a skeletal implementation of the {@link Preferences}
  class, greatly easing the task of implementing it.
  <p><strong>This class is for <tt>Preferences</tt> implementers only.
  Normal users of the <tt>Preferences</tt> facility should have no need to
  consult this documentation.  The {@link Preferences} documentation
  should suffice.</strong>
  </p><p>Implementors must override the nine abstract service-provider interface
  (SPI) methods: {@link #getSpi(String)}, {@link #putSpi(String,String)},
  {@link #removeSpi(String)}, {@link #childSpi(String)}, {@link
  #removeNodeSpi()}, {@link #keysSpi()}, {@link #childrenNamesSpi()}, {@link
  #syncSpi()} and {@link #flushSpi()}.  All of the concrete methods specify
  precisely how they are implemented atop these SPI methods.  The implementor
  may, at his discretion, override one or more of the concrete methods if the
  default implementation is unsatisfactory for any reason, such as
  performance.
  </p><p>The SPI methods fall into three groups concerning exception
  behavior. The <tt>getSpi</tt> method should never throw exceptions, but it
  doesn't really matter, as any exception thrown by this method will be
  intercepted by {@link #get(String,String)}, which will return the specified
  default value to the caller.  The <tt>removeNodeSpi, keysSpi,
  childrenNamesSpi, syncSpi</tt> and <tt>flushSpi</tt> methods are specified
  to throw {@link BackingStoreException}, and the implementation is required
  to throw this checked exception if it is unable to perform the operation.
  The exception propagates outward, causing the corresponding API method
  to fail.
  </p><p>The remaining SPI methods {@link #putSpi(String,String)}, {@link
  #removeSpi(String)} and {@link #childSpi(String)} have more complicated
  exception behavior.  They are not specified to throw
  <tt>BackingStoreException</tt>, as they can generally obey their contracts
  even if the backing store is unavailable.  This is true because they return
  no information and their effects are not required to become permanent until
  a subsequent call to {@link Preferences#flush()} or
  {@link Preferences#sync()}. Generally speaking, these SPI methods should not
  throw exceptions.  In some implementations, there may be circumstances
  under which these calls cannot even enqueue the requested operation for
  later processing.  Even under these circumstances it is generally better to
  simply ignore the invocation and return, rather than throwing an
  exception.  Under these circumstances, however, all subsequent invocations
  of <tt>flush()</tt> and <tt>sync</tt> should return <tt>false</tt>, as
  returning <tt>true</tt> would imply that all previous operations had
  successfully been made permanent.
  </p><p>There is one circumstance under which <tt>putSpi, removeSpi and
  childSpi</tt> <i>should</i> throw an exception: if the caller lacks
  sufficient privileges on the underlying operating system to perform the
  requested operation.  This will, for instance, occur on most systems
  if a non-privileged user attempts to modify system preferences.
  (The required privileges will vary from implementation to
  implementation.  On some implementations, they are the right to modify the
  contents of some directory in the file system; on others they are the right
  to modify contents of some key in a registry.)  Under any of these
  circumstances, it would generally be undesirable to let the program
  continue executing as if these operations would become permanent at a later
  time.  While implementations are not required to throw an exception under
  these circumstances, they are encouraged to do so.  A {@link
  SecurityException} would be appropriate.
  </p><p>Most of the SPI methods require the implementation to read or write
  information at a preferences node.  The implementor should beware of the
  fact that another VM may have concurrently deleted this node from the
  backing store.  It is the implementation's responsibility to recreate the
  node if it has been deleted.
  </p><p>Implementation note: In Sun's default <tt>Preferences</tt>
  implementations, the user's identity is inherited from the underlying
  operating system and does not change for the lifetime of the virtual
  machine.  It is recognized that server-side <tt>Preferences</tt>
  implementations may have the user identity change from request to request,
  implicitly passed to <tt>Preferences</tt> methods via the use of a
  static {@link ThreadLocal} instance.  Authors of such implementations are
  <i>strongly</i> encouraged to determine the user at the time preferences
  are accessed (for example by the {@link #get(String,String)} or {@link
  #put(String,String)} method) rather than permanently associating a user
  with each <tt>Preferences</tt> instance.  The latter behavior conflicts
  with normal <tt>Preferences</tt> usage and would lead to great confusion.
  @author  Josh Bloch
  @see     Preferences
  @since   1.4</p></div>
<a id="L123" name="L123"></a> 123 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/102.html" title="Multiple referred from 22 places.">AbstractPreferences</a> <strong class="reserved">extends</strong> <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <em class="brace">{</em>
<div class="comment">
      Our name relative to parent.</div>
<a id="L127" name="L127"></a> 127     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L128" name="L128"></a> 128 
<div class="comment">
      Our absolute path name.</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a>;
<a id="L133" name="L133"></a> 133 
<div class="comment">
      Our parent node.</div>
<a id="L137" name="L137"></a> 137     <strong class="reserved">final</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L138" name="L138"></a> 138 
<div class="comment">
      Our root node.</div>
<a id="L142" name="L142"></a> 142     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>; <em class="comment">// Relative to this node</em>
<a id="L143" name="L143"></a> 143 
<div class="comment">
      This field should be <tt>true</tt> if this node did not exist in the
      backing store prior to the creation of this object.  The field
      is initialized to false, but may be set to true by a subclass
      constructor (and should not be modified thereafter).  This field
      indicates whether a node change event should be fired when
      creation is complete.</div>
<a id="L152" name="L152"></a> 152     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a> = <strong class="reserved">false</strong>;
<a id="L153" name="L153"></a> 153 
<div class="comment">
      All known unremoved children of this node.  (This "cache" is consulted
      prior to calling childSpi() or getChild().</div>
<a id="L158" name="L158"></a> 158     <strong class="reserved">private</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>, <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>&gt; kidCache = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;&gt;();
<a id="L159" name="L159"></a> 159 
<div class="comment">
      This field is used to keep track of whether or not this node has
      been removed.  Once it's set to true, it will never be reset to false.</div>
<a id="L164" name="L164"></a> 164     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> removed = <strong class="reserved">false</strong>;
<a id="L165" name="L165"></a> 165 
<div class="comment">
      Registered preference change listeners.</div>
<a id="L169" name="L169"></a> 169     <strong class="reserved">private</strong> <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[] <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a> =
<a id="L170" name="L170"></a> 170         <strong class="reserved">new</strong> <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[0];
<a id="L171" name="L171"></a> 171 
<div class="comment">
      Registered node change listeners.</div>
<a id="L175" name="L175"></a> 175     <strong class="reserved">private</strong> <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[] <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a> = <strong class="reserved">new</strong> <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[0];
<a id="L176" name="L176"></a> 176 
<div class="comment">
      An object whose monitor is used to lock this node.  This object
      is used in preference to the node itself to reduce the likelihood of
      intentional or unintentional denial of service due to a locked node.
      To avoid deadlock, a node is <i>never</i> locked by a thread that
      holds a lock on a descendant of that node.</div>
<a id="L184" name="L184"></a> 184     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a> = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L185" name="L185"></a> 185 
<div class="comment">
      Creates a preference node with the specified parent and the specified
      name relative to its parent.
      @param parent the parent of this preference node, or null if this
                    is the root.
      @param name the name of this preference node, relative to its parent,
                  or <tt>""</tt> if this is the root.
      @throws IllegalArgumentException if <tt>name</tt> contains a slash
               (<tt>'/'</tt>),  or <tt>parent</tt> is <tt>null</tt> and
               name isn't <tt>""</tt>.</div>
<a id="L198" name="L198"></a> 198     <strong class="reserved">protected</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>(AbstractPreferences <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>==<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200             <strong class="reserved">if</strong> (!<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(""))
<a id="L201" name="L201"></a> 201                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Root name '"+<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+
<a id="L202" name="L202"></a> 202                                                    "' must be \"\"");
<a id="L203" name="L203"></a> 203             <strong class="reserved">this</strong>.<a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a> = "/";
<a id="L204" name="L204"></a> 204             <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <strong class="reserved">this</strong>;
<a id="L205" name="L205"></a> 205         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L206" name="L206"></a> 206             <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('/') != -1)
<a id="L207" name="L207"></a> 207                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Name '" + <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> +
<a id="L208" name="L208"></a> 208                                                  "' contains '/'");
<a id="L209" name="L209"></a> 209             <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(""))
<a id="L210" name="L210"></a> 210               <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Illegal name: empty string");
<a id="L211" name="L211"></a> 211 
<a id="L212" name="L212"></a> 212             <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L213" name="L213"></a> 213             <a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a> = (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>==<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> ? "/" + <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>
<a id="L214" name="L214"></a> 214                                          : <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a>() + "/" + <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L215" name="L215"></a> 215         <em class="brace">}</em>
<a id="L216" name="L216"></a> 216         <strong class="reserved">this</strong>.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L217" name="L217"></a> 217         <strong class="reserved">this</strong>.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L218" name="L218"></a> 218     <em class="brace">}</em>
<a id="L219" name="L219"></a> 219 
<div class="comment">
      Implements the <tt>put</tt> method as per the specification in
      {@link Preferences#put(String,String)}.
      <p>This implementation checks that the key and value are legal,
      obtains this preference node's lock, checks that the node
      has not been removed, invokes {@link #putSpi(String,String)}, and if
      there are any preference change listeners, enqueues a notification
      event for processing by the event dispatch thread.
      @param key key with which the specified value is to be associated.
      @param value value to be associated with the specified key.
      @throws NullPointerException if key or value is <tt>null</tt>.
      @throws IllegalArgumentException if <tt>key.length()</tt> exceeds
            <tt>MAX_KEY_LENGTH</tt> or if <tt>value.length</tt> exceeds
            <tt>MAX_VALUE_LENGTH</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L239" name="L239"></a> 239     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25285.html" title="Multiple referred from 5173 places.">put</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L240" name="L240"></a> 240         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>==<strong class="reserved">null</strong> || <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>==<strong class="reserved">null</strong>)
<a id="L241" name="L241"></a> 241             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L242" name="L242"></a> 242         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; MAX_KEY_LENGTH)
<a id="L243" name="L243"></a> 243             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Key too long: "+<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L244" name="L244"></a> 244         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; MAX_VALUE_LENGTH)
<a id="L245" name="L245"></a> 245             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Value too long: "+<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L246" name="L246"></a> 246 
<a id="L247" name="L247"></a> 247         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L248" name="L248"></a> 248             <strong class="reserved">if</strong> (removed)
<a id="L249" name="L249"></a> 249                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L250" name="L250"></a> 250 
<a id="L251" name="L251"></a> 251             <a href="../D/30045.html" title="Multiple defined in 2 places.">putSpi</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L252" name="L252"></a> 252             <a href="../S/839.html#L1551" title="Defined at 1551 in src/java/util/prefs/AbstractPreferences.java.">enqueuePreferenceChangeEvent</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L253" name="L253"></a> 253         <em class="brace">}</em>
<a id="L254" name="L254"></a> 254     <em class="brace">}</em>
<a id="L255" name="L255"></a> 255 
<div class="comment">
      Implements the <tt>get</tt> method as per the specification in
      {@link Preferences#get(String,String)}.
      <p>This implementation first checks to see if <tt>key</tt> is
      <tt>null</tt> throwing a <tt>NullPointerException</tt> if this is
      the case.  Then it obtains this preference node's lock,
      checks that the node has not been removed, invokes {@link
      #getSpi(String)}, and returns the result, unless the <tt>getSpi</tt>
      invocation returns <tt>null</tt> or throws an exception, in which case
      this invocation returns <tt>def</tt>.
      @param key key whose associated value is to be returned.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>.
      @return the value associated with <tt>key</tt>, or <tt>def</tt>
              if no value is associated with <tt>key</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if key is <tt>null</tt>.  (A
              <tt>null</tt> default <i>is</i> permitted.)</p></div>
<a id="L278" name="L278"></a> 278     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> def) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279         <strong class="reserved">if</strong> (<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>==<strong class="reserved">null</strong>)
<a id="L280" name="L280"></a> 280             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>("Null key");
<a id="L281" name="L281"></a> 281         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282             <strong class="reserved">if</strong> (removed)
<a id="L283" name="L283"></a> 283                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong>;
<a id="L286" name="L286"></a> 286             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L287" name="L287"></a> 287                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/22669.html" title="Multiple defined in 2 places.">getSpi</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L288" name="L288"></a> 288             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289                 <em class="comment">// Ignoring exception causes default to be returned</em>
<a id="L290" name="L290"></a> 290             <em class="brace">}</em>
<a id="L291" name="L291"></a> 291             <strong class="reserved">return</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>==<strong class="reserved">null</strong> ? def : <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L292" name="L292"></a> 292         <em class="brace">}</em>
<a id="L293" name="L293"></a> 293     <em class="brace">}</em>
<a id="L294" name="L294"></a> 294 
<div class="comment">
      Implements the <tt>remove(String)</tt> method as per the specification
      in {@link Preferences#remove(String)}.
      <p>This implementation obtains this preference node's lock,
      checks that the node has not been removed, invokes
      {@link #removeSpi(String)} and if there are any preference
      change listeners, enqueues a notification event for processing by the
      event dispatch thread.
      @param key key whose mapping is to be removed from the preference node.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException {@inheritDoc}.</p></div>
<a id="L310" name="L310"></a> 310     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25882.html" title="Multiple referred from 1115 places.">remove</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L311" name="L311"></a> 311         <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/31141.html" title="Multiple defined in 4 places.">requireNonNull</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, "Specified key cannot be null");
<a id="L312" name="L312"></a> 312         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L313" name="L313"></a> 313             <strong class="reserved">if</strong> (removed)
<a id="L314" name="L314"></a> 314                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L315" name="L315"></a> 315 
<a id="L316" name="L316"></a> 316             <a href="../D/30955.html" title="Multiple defined in 2 places.">removeSpi</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L317" name="L317"></a> 317             <a href="../S/839.html#L1551" title="Defined at 1551 in src/java/util/prefs/AbstractPreferences.java.">enqueuePreferenceChangeEvent</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L318" name="L318"></a> 318         <em class="brace">}</em>
<a id="L319" name="L319"></a> 319     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320 
<div class="comment">
      Implements the <tt>clear</tt> method as per the specification in
      {@link Preferences#clear()}.
      <p>This implementation obtains this preference node's lock,
      invokes {@link #keys()} to obtain an array of keys, and
      iterates over the array invoking {@link #remove(String)} on each key.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L335" name="L335"></a> 335     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L336" name="L336"></a> 336         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a> = <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>();
<a id="L338" name="L338"></a> 338             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L339" name="L339"></a> 339                 <a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>[i]);
<a id="L340" name="L340"></a> 340         <em class="brace">}</em>
<a id="L341" name="L341"></a> 341     <em class="brace">}</em>
<a id="L342" name="L342"></a> 342 
<div class="comment">
      Implements the <tt>putInt</tt> method as per the specification in
      {@link Preferences#putInt(String,int)}.
      <p>This implementation translates <tt>value</tt> to a string with
      {@link Integer#toString(int)} and invokes {@link #put(String,String)}
      on the result.
      @param key key with which the string form of value is to be associated.
      @param value value whose string form is to be associated with key.
      @throws NullPointerException if key is <tt>null</tt>.
      @throws IllegalArgumentException if <tt>key.length()</tt> exceeds
              <tt>MAX_KEY_LENGTH</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L359" name="L359"></a> 359     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25319.html" title="Multiple referred from 28 places.">putInt</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L360" name="L360"></a> 360         <a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L361" name="L361"></a> 361     <em class="brace">}</em>
<a id="L362" name="L362"></a> 362 
<div class="comment">
      Implements the <tt>getInt</tt> method as per the specification in
      {@link Preferences#getInt(String,int)}.
      <p>This implementation invokes {@link #get(String,String) <tt>get(key,
      null)</tt>}.  If the return value is non-null, the implementation
      attempts to translate it to an <tt>int</tt> with
      {@link Integer#parseInt(String)}.  If the attempt succeeds, the return
      value is returned by this method.  Otherwise, <tt>def</tt> is returned.
      @param key key whose associated value is to be returned as an int.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>
             or the associated value cannot be interpreted as an int.
      @return the int value represented by the string associated with
              <tt>key</tt> in this preference node, or <tt>def</tt> if the
              associated value does not exist or cannot be interpreted as
              an int.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if <tt>key</tt> is <tt>null</tt>.</p></div>
<a id="L385" name="L385"></a> 385     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17126.html" title="Multiple referred from 178 places.">getInt</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">int</strong> def) <em class="brace">{</em>
<a id="L386" name="L386"></a> 386         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = def;
<a id="L387" name="L387"></a> 387         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L389" name="L389"></a> 389             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L390" name="L390"></a> 390                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L391" name="L391"></a> 391         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> e) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <em class="comment">// Ignoring exception causes specified default to be returned</em>
<a id="L393" name="L393"></a> 393         <em class="brace">}</em>
<a id="L394" name="L394"></a> 394 
<a id="L395" name="L395"></a> 395         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L396" name="L396"></a> 396     <em class="brace">}</em>
<a id="L397" name="L397"></a> 397 
<div class="comment">
      Implements the <tt>putLong</tt> method as per the specification in
      {@link Preferences#putLong(String,long)}.
      <p>This implementation translates <tt>value</tt> to a string with
      {@link Long#toString(long)} and invokes {@link #put(String,String)}
      on the result.
      @param key key with which the string form of value is to be associated.
      @param value value whose string form is to be associated with key.
      @throws NullPointerException if key is <tt>null</tt>.
      @throws IllegalArgumentException if <tt>key.length()</tt> exceeds
              <tt>MAX_KEY_LENGTH</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L414" name="L414"></a> 414     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25329.html" title="Multiple referred from 27 places.">putLong</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">long</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415         <a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L416" name="L416"></a> 416     <em class="brace">}</em>
<a id="L417" name="L417"></a> 417 
<div class="comment">
      Implements the <tt>getLong</tt> method as per the specification in
      {@link Preferences#getLong(String,long)}.
      <p>This implementation invokes {@link #get(String,String) <tt>get(key,
      null)</tt>}.  If the return value is non-null, the implementation
      attempts to translate it to a <tt>long</tt> with
      {@link Long#parseLong(String)}.  If the attempt succeeds, the return
      value is returned by this method.  Otherwise, <tt>def</tt> is returned.
      @param key key whose associated value is to be returned as a long.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>
             or the associated value cannot be interpreted as a long.
      @return the long value represented by the string associated with
              <tt>key</tt> in this preference node, or <tt>def</tt> if the
              associated value does not exist or cannot be interpreted as
              a long.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if <tt>key</tt> is <tt>null</tt>.</p></div>
<a id="L440" name="L440"></a> 440     <strong class="reserved">public</strong> <strong class="reserved">long</strong> <a href="../R/17480.html" title="Multiple referred from 112 places.">getLong</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">long</strong> def) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441         <strong class="reserved">long</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = def;
<a id="L442" name="L442"></a> 442         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L443" name="L443"></a> 443             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L444" name="L444"></a> 444             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L445" name="L445"></a> 445                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/29161.html" title="Multiple defined in 5 places.">parseLong</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L446" name="L446"></a> 446         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> e) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447             <em class="comment">// Ignoring exception causes specified default to be returned</em>
<a id="L448" name="L448"></a> 448         <em class="brace">}</em>
<a id="L449" name="L449"></a> 449 
<a id="L450" name="L450"></a> 450         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L451" name="L451"></a> 451     <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<div class="comment">
      Implements the <tt>putBoolean</tt> method as per the specification in
      {@link Preferences#putBoolean(String,boolean)}.
      <p>This implementation translates <tt>value</tt> to a string with
      {@link String#valueOf(boolean)} and invokes {@link #put(String,String)}
      on the result.
      @param key key with which the string form of value is to be associated.
      @param value value whose string form is to be associated with key.
      @throws NullPointerException if key is <tt>null</tt>.
      @throws IllegalArgumentException if <tt>key.length()</tt> exceeds
              <tt>MAX_KEY_LENGTH</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L469" name="L469"></a> 469     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25289.html" title="Multiple referred from 7 places.">putBoolean</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">boolean</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L470" name="L470"></a> 470         <a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L471" name="L471"></a> 471     <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<div class="comment">
      Implements the <tt>getBoolean</tt> method as per the specification in
      {@link Preferences#getBoolean(String,boolean)}.
      <p>This implementation invokes {@link #get(String,String) <tt>get(key,
      null)</tt>}.  If the return value is non-null, it is compared with
      <tt>"true"</tt> using {@link String#equalsIgnoreCase(String)}.  If the
      comparison returns <tt>true</tt>, this invocation returns
      <tt>true</tt>.  Otherwise, the original return value is compared with
      <tt>"false"</tt>, again using {@link String#equalsIgnoreCase(String)}.
      If the comparison returns <tt>true</tt>, this invocation returns
      <tt>false</tt>.  Otherwise, this invocation returns <tt>def</tt>.
      @param key key whose associated value is to be returned as a boolean.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>
             or the associated value cannot be interpreted as a boolean.
      @return the boolean value represented by the string associated with
              <tt>key</tt> in this preference node, or <tt>def</tt> if the
              associated value does not exist or cannot be interpreted as
              a boolean.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if <tt>key</tt> is <tt>null</tt>.</p></div>
<a id="L498" name="L498"></a> 498     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/15295.html" title="Multiple referred from 136 places.">getBoolean</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">boolean</strong> def) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499         <strong class="reserved">boolean</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = def;
<a id="L500" name="L500"></a> 500         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L501" name="L501"></a> 501         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L502" name="L502"></a> 502             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("true"))
<a id="L503" name="L503"></a> 503                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">true</strong>;
<a id="L504" name="L504"></a> 504             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("false"))
<a id="L505" name="L505"></a> 505                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">false</strong>;
<a id="L506" name="L506"></a> 506         <em class="brace">}</em>
<a id="L507" name="L507"></a> 507 
<a id="L508" name="L508"></a> 508         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L509" name="L509"></a> 509     <em class="brace">}</em>
<a id="L510" name="L510"></a> 510 
<div class="comment">
      Implements the <tt>putFloat</tt> method as per the specification in
      {@link Preferences#putFloat(String,float)}.
      <p>This implementation translates <tt>value</tt> to a string with
      {@link Float#toString(float)} and invokes {@link #put(String,String)}
      on the result.
      @param key key with which the string form of value is to be associated.
      @param value value whose string form is to be associated with key.
      @throws NullPointerException if key is <tt>null</tt>.
      @throws IllegalArgumentException if <tt>key.length()</tt> exceeds
              <tt>MAX_KEY_LENGTH</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L527" name="L527"></a> 527     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25308.html" title="Multiple referred from 13 places.">putFloat</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">float</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528         <a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L529" name="L529"></a> 529     <em class="brace">}</em>
<a id="L530" name="L530"></a> 530 
<div class="comment">
      Implements the <tt>getFloat</tt> method as per the specification in
      {@link Preferences#getFloat(String,float)}.
      <p>This implementation invokes {@link #get(String,String) <tt>get(key,
      null)</tt>}.  If the return value is non-null, the implementation
      attempts to translate it to an <tt>float</tt> with
      {@link Float#parseFloat(String)}.  If the attempt succeeds, the return
      value is returned by this method.  Otherwise, <tt>def</tt> is returned.
      @param key key whose associated value is to be returned as a float.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>
             or the associated value cannot be interpreted as a float.
      @return the float value represented by the string associated with
              <tt>key</tt> in this preference node, or <tt>def</tt> if the
              associated value does not exist or cannot be interpreted as
              a float.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if <tt>key</tt> is <tt>null</tt>.</p></div>
<a id="L553" name="L553"></a> 553     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/16648.html" title="Multiple referred from 13 places.">getFloat</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">float</strong> def) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554         <strong class="reserved">float</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = def;
<a id="L555" name="L555"></a> 555         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L556" name="L556"></a> 556             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L557" name="L557"></a> 557             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L558" name="L558"></a> 558                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/3293.html" title="Multiple defined in 10 places.">Float</a>.<a href="../D/29135.html" title="Multiple defined in 4 places.">parseFloat</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L559" name="L559"></a> 559         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> e) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560             <em class="comment">// Ignoring exception causes specified default to be returned</em>
<a id="L561" name="L561"></a> 561         <em class="brace">}</em>
<a id="L562" name="L562"></a> 562 
<a id="L563" name="L563"></a> 563         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L564" name="L564"></a> 564     <em class="brace">}</em>
<a id="L565" name="L565"></a> 565 
<div class="comment">
      Implements the <tt>putDouble</tt> method as per the specification in
      {@link Preferences#putDouble(String,double)}.
      <p>This implementation translates <tt>value</tt> to a string with
      {@link Double#toString(double)} and invokes {@link #put(String,String)}
      on the result.
      @param key key with which the string form of value is to be associated.
      @param value value whose string form is to be associated with key.
      @throws NullPointerException if key is <tt>null</tt>.
      @throws IllegalArgumentException if <tt>key.length()</tt> exceeds
              <tt>MAX_KEY_LENGTH</tt>.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L582" name="L582"></a> 582     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25301.html" title="Multiple referred from 13 places.">putDouble</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">double</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L583" name="L583"></a> 583         <a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L584" name="L584"></a> 584     <em class="brace">}</em>
<a id="L585" name="L585"></a> 585 
<div class="comment">
      Implements the <tt>getDouble</tt> method as per the specification in
      {@link Preferences#getDouble(String,double)}.
      <p>This implementation invokes {@link #get(String,String) <tt>get(key,
      null)</tt>}.  If the return value is non-null, the implementation
      attempts to translate it to an <tt>double</tt> with
      {@link Double#parseDouble(String)}.  If the attempt succeeds, the return
      value is returned by this method.  Otherwise, <tt>def</tt> is returned.
      @param key key whose associated value is to be returned as a double.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>
             or the associated value cannot be interpreted as a double.
      @return the double value represented by the string associated with
              <tt>key</tt> in this preference node, or <tt>def</tt> if the
              associated value does not exist or cannot be interpreted as
              a double.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if <tt>key</tt> is <tt>null</tt>.</p></div>
<a id="L608" name="L608"></a> 608     <strong class="reserved">public</strong> <strong class="reserved">double</strong> <a href="../R/16242.html" title="Multiple referred from 14 places.">getDouble</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">double</strong> def) <em class="brace">{</em>
<a id="L609" name="L609"></a> 609         <strong class="reserved">double</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = def;
<a id="L610" name="L610"></a> 610         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L611" name="L611"></a> 611             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L612" name="L612"></a> 612             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L613" name="L613"></a> 613                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.<a href="../D/29129.html" title="Multiple defined in 4 places.">parseDouble</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L614" name="L614"></a> 614         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> e) <em class="brace">{</em>
<a id="L615" name="L615"></a> 615             <em class="comment">// Ignoring exception causes specified default to be returned</em>
<a id="L616" name="L616"></a> 616         <em class="brace">}</em>
<a id="L617" name="L617"></a> 617 
<a id="L618" name="L618"></a> 618         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L619" name="L619"></a> 619     <em class="brace">}</em>
<a id="L620" name="L620"></a> 620 
<div class="comment">
      Implements the <tt>putByteArray</tt> method as per the specification in
      {@link Preferences#putByteArray(String,byte[])}.
      @param key key with which the string form of value is to be associated.
      @param value value whose string form is to be associated with key.
      @throws NullPointerException if key or value is <tt>null</tt>.
      @throws IllegalArgumentException if key.length() exceeds MAX_KEY_LENGTH
              or if value.length exceeds MAX_VALUE_LENGTH*3/4.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</div>
<a id="L633" name="L633"></a> 633     <strong class="reserved">public</strong> <strong class="reserved">void</strong> putByteArray(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">byte</strong>[] <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L634" name="L634"></a> 634         <a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/720.html" title="Multiple defined in 4 places.">Base64</a>.<a href="../D/11985.html" title="Multiple defined in 3 places.">byteArrayToBase64</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L635" name="L635"></a> 635     <em class="brace">}</em>
<a id="L636" name="L636"></a> 636 
<div class="comment">
      Implements the <tt>getByteArray</tt> method as per the specification in
      {@link Preferences#getByteArray(String,byte[])}.
      @param key key whose associated value is to be returned as a byte array.
      @param def the value to be returned in the event that this
             preference node has no value associated with <tt>key</tt>
             or the associated value cannot be interpreted as a byte array.
      @return the byte array value represented by the string associated with
              <tt>key</tt> in this preference node, or <tt>def</tt> if the
              associated value does not exist or cannot be interpreted as
              a byte array.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @throws NullPointerException if <tt>key</tt> is <tt>null</tt>.  (A
              <tt>null</tt> value for <tt>def</tt> <i>is</i> permitted.)</div>
<a id="L654" name="L654"></a> 654     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../S/6987.html#L630" title="Referred from 630 in src/com/sun/corba/se/impl/encoding/IDLJavaSerializationOutputStream.java.">getByteArray</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">byte</strong>[] def) <em class="brace">{</em>
<a id="L655" name="L655"></a> 655         <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = def;
<a id="L656" name="L656"></a> 656         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <strong class="reserved">null</strong>);
<a id="L657" name="L657"></a> 657         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L658" name="L658"></a> 658             <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>)
<a id="L659" name="L659"></a> 659                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/720.html" title="Multiple defined in 4 places.">Base64</a>.<a href="../D/11776.html" title="Multiple defined in 3 places.">base64ToByteArray</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L660" name="L660"></a> 660         <em class="brace">}</em>
<a id="L661" name="L661"></a> 661         <strong class="reserved">catch</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a> e) <em class="brace">{</em>
<a id="L662" name="L662"></a> 662             <em class="comment">// Ignoring exception causes specified default to be returned</em>
<a id="L663" name="L663"></a> 663         <em class="brace">}</em>
<a id="L664" name="L664"></a> 664 
<a id="L665" name="L665"></a> 665         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L666" name="L666"></a> 666     <em class="brace">}</em>
<a id="L667" name="L667"></a> 667 
<div class="comment">
      Implements the <tt>keys</tt> method as per the specification in
      {@link Preferences#keys()}.
      <p>This implementation obtains this preference node's lock, checks that
      the node has not been removed and invokes {@link #keysSpi()}.
      @return an array of the keys that have an associated value in this
              preference node.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L683" name="L683"></a> 683     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/22399.html" title="Multiple referred from 606 places.">keys</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L684" name="L684"></a> 684         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L685" name="L685"></a> 685             <strong class="reserved">if</strong> (removed)
<a id="L686" name="L686"></a> 686                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L687" name="L687"></a> 687 
<a id="L688" name="L688"></a> 688             <strong class="reserved">return</strong> <a href="../D/26727.html" title="Multiple defined in 2 places.">keysSpi</a>();
<a id="L689" name="L689"></a> 689         <em class="brace">}</em>
<a id="L690" name="L690"></a> 690     <em class="brace">}</em>
<a id="L691" name="L691"></a> 691 
<div class="comment">
      Implements the <tt>children</tt> method as per the specification in
      {@link Preferences#childrenNames()}.
      <p>This implementation obtains this preference node's lock, checks that
      the node has not been removed, constructs a <tt>TreeSet</tt> initialized
      to the names of children already cached (the children in this node's
      "child-cache"), invokes {@link #childrenNamesSpi()}, and adds all of the
      returned child-names into the set.  The elements of the tree set are
      dumped into a <tt>String</tt> array using the <tt>toArray</tt> method,
      and this array is returned.
      @return the names of the children of this preference node.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @see #cachedChildren()</p></div>
<a id="L712" name="L712"></a> 712     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/11435.html" title="Multiple referred from 2 places.">childrenNames</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L713" name="L713"></a> 713         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L714" name="L714"></a> 714             <strong class="reserved">if</strong> (removed)
<a id="L715" name="L715"></a> 715                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L716" name="L716"></a> 716 
<a id="L717" name="L717"></a> 717             <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>&gt; s = <strong class="reserved">new</strong> <a href="../S/1161.html#L92" title="Defined at 92 in src/java/util/TreeSet.java.">TreeSet</a>&lt;&gt;(kidCache.<a href="../D/26719.html" title="Multiple defined in 33 places.">keySet</a>());
<a id="L718" name="L718"></a> 718             <strong class="reserved">for</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> kid : <a href="../D/12749.html" title="Multiple defined in 2 places.">childrenNamesSpi</a>())
<a id="L719" name="L719"></a> 719                 s.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(kid);
<a id="L720" name="L720"></a> 720             <strong class="reserved">return</strong> s.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(EMPTY_STRING_ARRAY);
<a id="L721" name="L721"></a> 721         <em class="brace">}</em>
<a id="L722" name="L722"></a> 722     <em class="brace">}</em>
<a id="L723" name="L723"></a> 723 
<a id="L724" name="L724"></a> 724     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] EMPTY_STRING_ARRAY = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[0];
<a id="L725" name="L725"></a> 725 
<div class="comment">
      Returns all known unremoved children of this node.
      @return all known unremoved children of this node.</div>
<a id="L731" name="L731"></a> 731     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>[] <a href="../R/10766.html" title="Multiple referred from 2 places.">cachedChildren</a>() <em class="brace">{</em>
<a id="L732" name="L732"></a> 732         <strong class="reserved">return</strong> kidCache.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>().<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(EMPTY_ABSTRACT_PREFS_ARRAY);
<a id="L733" name="L733"></a> 733     <em class="brace">}</em>
<a id="L734" name="L734"></a> 734 
<a id="L735" name="L735"></a> 735     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>[] EMPTY_ABSTRACT_PREFS_ARRAY
<a id="L736" name="L736"></a> 736         = <strong class="reserved">new</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>[0];
<a id="L737" name="L737"></a> 737 
<div class="comment">
      Implements the <tt>parent</tt> method as per the specification in
      {@link Preferences#parent()}.
      <p>This implementation obtains this preference node's lock, checks that
      the node has not been removed and returns the parent value that was
      passed to this node's constructor.
      @return the parent of this preference node.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L750" name="L750"></a> 750     <strong class="reserved">public</strong> <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../R/24485.html" title="Multiple referred from 2863 places.">parent</a>() <em class="brace">{</em>
<a id="L751" name="L751"></a> 751         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L752" name="L752"></a> 752             <strong class="reserved">if</strong> (removed)
<a id="L753" name="L753"></a> 753                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L754" name="L754"></a> 754 
<a id="L755" name="L755"></a> 755             <strong class="reserved">return</strong> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L756" name="L756"></a> 756         <em class="brace">}</em>
<a id="L757" name="L757"></a> 757     <em class="brace">}</em>
<a id="L758" name="L758"></a> 758 
<div class="comment">
      Implements the <tt>node</tt> method as per the specification in
      {@link Preferences#node(String)}.
      <p>This implementation obtains this preference node's lock and checks
      that the node has not been removed.  If <tt>path</tt> is <tt>""</tt>,
      this node is returned; if <tt>path</tt> is <tt>"/"</tt>, this node's
      root is returned.  If the first character in <tt>path</tt> is
      not <tt>'/'</tt>, the implementation breaks <tt>path</tt> into
      tokens and recursively traverses the path from this node to the
      named node, "consuming" a name and a slash from <tt>path</tt> at
      each step of the traversal.  At each step, the current node is locked
      and the node's child-cache is checked for the named node.  If it is
      not found, the name is checked to make sure its length does not
      exceed <tt>MAX_NAME_LENGTH</tt>.  Then the {@link #childSpi(String)}
      method is invoked, and the result stored in this node's child-cache.
      If the newly created <tt>Preferences</tt> object's {@link #newNode}
      field is <tt>true</tt> and there are any node change listeners,
      a notification event is enqueued for processing by the event dispatch
      thread.
      </p><p>When there are no more tokens, the last value found in the
      child-cache or returned by <tt>childSpi</tt> is returned by this
      method.  If during the traversal, two <tt>"/"</tt> tokens occur
      consecutively, or the final token is <tt>"/"</tt> (rather than a name),
      an appropriate <tt>IllegalArgumentException</tt> is thrown.
      </p><p> If the first character of <tt>path</tt> is <tt>'/'</tt>
      (indicating an absolute path name) this preference node's
      lock is dropped prior to breaking <tt>path</tt> into tokens, and
      this method recursively traverses the path starting from the root
      (rather than starting from this node).  The traversal is otherwise
      identical to the one described for relative path names.  Dropping
      the lock on this node prior to commencing the traversal at the root
      node is essential to avoid the possibility of deadlock, as per the
      {@link #lock locking invariant}.
      @param path the path name of the preference node to return.
      @return the specified preference node.
      @throws IllegalArgumentException if the path name is invalid (i.e.,
              it contains multiple consecutive slash characters, or ends
              with a slash character and is more than one character long).
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.</p></div>
<a id="L804" name="L804"></a> 804     <strong class="reserved">public</strong> <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../R/23742.html" title="Multiple referred from 4966 places.">node</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> path) <em class="brace">{</em>
<a id="L805" name="L805"></a> 805         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L806" name="L806"></a> 806             <strong class="reserved">if</strong> (removed)
<a id="L807" name="L807"></a> 807                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L808" name="L808"></a> 808             <strong class="reserved">if</strong> (path.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(""))
<a id="L809" name="L809"></a> 809                 <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L810" name="L810"></a> 810             <strong class="reserved">if</strong> (path.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("/"))
<a id="L811" name="L811"></a> 811                 <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L812" name="L812"></a> 812             <strong class="reserved">if</strong> (path.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0) != '/')
<a id="L813" name="L813"></a> 813                 <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>(<strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(path, "/", <strong class="reserved">true</strong>));
<a id="L814" name="L814"></a> 814         <em class="brace">}</em>
<a id="L815" name="L815"></a> 815 
<a id="L816" name="L816"></a> 816         <em class="comment">// Absolute path.  Note that we've dropped our lock to avoid deadlock</em>
<a id="L817" name="L817"></a> 817         <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>.<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>(<strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(1), "/", <strong class="reserved">true</strong>));
<a id="L818" name="L818"></a> 818     <em class="brace">}</em>
<a id="L819" name="L819"></a> 819 
<div class="comment">
      tokenizer contains <name> {'/' <name>}*</name></name></div>
<a id="L823" name="L823"></a> 823     <strong class="reserved">private</strong> <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../R/23742.html" title="Multiple referred from 4966 places.">node</a>(<a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> path) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> token = path.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>();
<a id="L825" name="L825"></a> 825         <strong class="reserved">if</strong> (token.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("/"))  <em class="comment">// Check for consecutive slashes</em>
<a id="L826" name="L826"></a> 826             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Consecutive slashes in path");
<a id="L827" name="L827"></a> 827         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L828" name="L828"></a> 828             <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> child = kidCache.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(token);
<a id="L829" name="L829"></a> 829             <strong class="reserved">if</strong> (child == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L830" name="L830"></a> 830                 <strong class="reserved">if</strong> (token.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; MAX_NAME_LENGTH)
<a id="L831" name="L831"></a> 831                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L832" name="L832"></a> 832                         "Node name " + token + " too long");
<a id="L833" name="L833"></a> 833                 child = <a href="../D/12742.html" title="Multiple defined in 2 places.">childSpi</a>(token);
<a id="L834" name="L834"></a> 834                 <strong class="reserved">if</strong> (child.<a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a>)
<a id="L835" name="L835"></a> 835                     <a href="../S/839.html#L1565" title="Defined at 1565 in src/java/util/prefs/AbstractPreferences.java.">enqueueNodeAddedEvent</a>(child);
<a id="L836" name="L836"></a> 836                 kidCache.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(token, child);
<a id="L837" name="L837"></a> 837             <em class="brace">}</em>
<a id="L838" name="L838"></a> 838             <strong class="reserved">if</strong> (!path.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>())
<a id="L839" name="L839"></a> 839                 <strong class="reserved">return</strong> child;
<a id="L840" name="L840"></a> 840             path.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>();  <em class="comment">// Consume slash</em>
<a id="L841" name="L841"></a> 841             <strong class="reserved">if</strong> (!path.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>())
<a id="L842" name="L842"></a> 842                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Path ends with slash");
<a id="L843" name="L843"></a> 843             <strong class="reserved">return</strong> child.<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>(path);
<a id="L844" name="L844"></a> 844         <em class="brace">}</em>
<a id="L845" name="L845"></a> 845     <em class="brace">}</em>
<a id="L846" name="L846"></a> 846 
<div class="comment">
      Implements the <tt>nodeExists</tt> method as per the specification in
      {@link Preferences#nodeExists(String)}.
      <p>This implementation is very similar to {@link #node(String)},
      except that {@link #getChild(String)} is used instead of {@link
      #childSpi(String)}.
      @param path the path name of the node whose existence is to be checked.
      @return true if the specified node exists.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.
      @throws IllegalArgumentException if the path name is invalid (i.e.,
              it contains multiple consecutive slash characters, or ends
              with a slash character and is more than one character long).
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method and
              <tt>pathname</tt> is not the empty string (<tt>""</tt>).</p></div>
<a id="L867" name="L867"></a> 867     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23746.html" title="Multiple referred from 3 places.">nodeExists</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> path)
<a id="L868" name="L868"></a> 868         <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>
<a id="L869" name="L869"></a> 869     <em class="brace">{</em>
<a id="L870" name="L870"></a> 870         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L871" name="L871"></a> 871             <strong class="reserved">if</strong> (path.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(""))
<a id="L872" name="L872"></a> 872                 <strong class="reserved">return</strong> !removed;
<a id="L873" name="L873"></a> 873             <strong class="reserved">if</strong> (removed)
<a id="L874" name="L874"></a> 874                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L875" name="L875"></a> 875             <strong class="reserved">if</strong> (path.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("/"))
<a id="L876" name="L876"></a> 876                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L877" name="L877"></a> 877             <strong class="reserved">if</strong> (path.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0) != '/')
<a id="L878" name="L878"></a> 878                 <strong class="reserved">return</strong> <a href="../D/28241.html" title="Multiple defined in 3 places.">nodeExists</a>(<strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(path, "/", <strong class="reserved">true</strong>));
<a id="L879" name="L879"></a> 879         <em class="brace">}</em>
<a id="L880" name="L880"></a> 880 
<a id="L881" name="L881"></a> 881         <em class="comment">// Absolute path.  Note that we've dropped our lock to avoid deadlock</em>
<a id="L882" name="L882"></a> 882         <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>.<a href="../D/28241.html" title="Multiple defined in 3 places.">nodeExists</a>(<strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(1), "/",
<a id="L883" name="L883"></a> 883                                                    <strong class="reserved">true</strong>));
<a id="L884" name="L884"></a> 884     <em class="brace">}</em>
<a id="L885" name="L885"></a> 885 
<div class="comment">
      tokenizer contains <name> {'/' <name>}*</name></name></div>
<a id="L889" name="L889"></a> 889     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/23746.html" title="Multiple referred from 3 places.">nodeExists</a>(<a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> path)
<a id="L890" name="L890"></a> 890         <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>
<a id="L891" name="L891"></a> 891     <em class="brace">{</em>
<a id="L892" name="L892"></a> 892         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> token = path.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>();
<a id="L893" name="L893"></a> 893         <strong class="reserved">if</strong> (token.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("/"))  <em class="comment">// Check for consecutive slashes</em>
<a id="L894" name="L894"></a> 894             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Consecutive slashes in path");
<a id="L895" name="L895"></a> 895         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L896" name="L896"></a> 896             <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> child = kidCache.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(token);
<a id="L897" name="L897"></a> 897             <strong class="reserved">if</strong> (child == <strong class="reserved">null</strong>)
<a id="L898" name="L898"></a> 898                 child = <a href="../D/17626.html" title="Multiple defined in 28 places.">getChild</a>(token);
<a id="L899" name="L899"></a> 899             <strong class="reserved">if</strong> (child==<strong class="reserved">null</strong>)
<a id="L900" name="L900"></a> 900                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L901" name="L901"></a> 901             <strong class="reserved">if</strong> (!path.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>())
<a id="L902" name="L902"></a> 902                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L903" name="L903"></a> 903             path.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>();  <em class="comment">// Consume slash</em>
<a id="L904" name="L904"></a> 904             <strong class="reserved">if</strong> (!path.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>())
<a id="L905" name="L905"></a> 905                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Path ends with slash");
<a id="L906" name="L906"></a> 906             <strong class="reserved">return</strong> child.<a href="../D/28241.html" title="Multiple defined in 3 places.">nodeExists</a>(path);
<a id="L907" name="L907"></a> 907         <em class="brace">}</em>
<a id="L908" name="L908"></a> 908     <em class="brace">}</em>
<a id="L909" name="L909"></a> 909 
<div class="comment">
      Implements the <tt>removeNode()</tt> method as per the specification in
      {@link Preferences#removeNode()}.
      <p>This implementation checks to see that this node is the root; if so,
      it throws an appropriate exception.  Then, it locks this node's parent,
      and calls a recursive helper method that traverses the subtree rooted at
      this node.  The recursive method locks the node on which it was called,
      checks that it has not already been removed, and then ensures that all
      of its children are cached: The {@link #childrenNamesSpi()} method is
      invoked and each returned child name is checked for containment in the
      child-cache.  If a child is not already cached, the {@link
      #childSpi(String)} method is invoked to create a <tt>Preferences</tt>
      instance for it, and this instance is put into the child-cache.  Then
      the helper method calls itself recursively on each node contained in its
      child-cache.  Next, it invokes {@link #removeNodeSpi()}, marks itself
      as removed, and removes itself from its parent's child-cache.  Finally,
      if there are any node change listeners, it enqueues a notification
      event for processing by the event dispatch thread.
      </p><p>Note that the helper method is always invoked with all ancestors up
      to the "closest non-removed ancestor" locked.
      @throws IllegalStateException if this node (or an ancestor) has already
              been removed with the {@link #removeNode()} method.
      @throws UnsupportedOperationException if this method is invoked on
              the root node.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L942" name="L942"></a> 942     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26030.html" title="Multiple referred from 14 places.">removeNode</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L943" name="L943"></a> 943         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>==<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>)
<a id="L944" name="L944"></a> 944             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("Can't remove the root!");
<a id="L945" name="L945"></a> 945         <strong class="reserved">synchronized</strong>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L946" name="L946"></a> 946             <a href="../S/839.html#L955" title="Defined at 955 in src/java/util/prefs/AbstractPreferences.java.">removeNode2</a>();
<a id="L947" name="L947"></a> 947             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.kidCache.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L948" name="L948"></a> 948         <em class="brace">}</em>
<a id="L949" name="L949"></a> 949     <em class="brace">}</em>
<a id="L950" name="L950"></a> 950 
<div class="comment">
      Called with locks on all nodes on path from parent of "removal root"
      to this (including the former but excluding the latter).</div>
<a id="L955" name="L955"></a> 955     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/26031.html" title="Multiple referred from 2 places.">removeNode2</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L956" name="L956"></a> 956         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L957" name="L957"></a> 957             <strong class="reserved">if</strong> (removed)
<a id="L958" name="L958"></a> 958                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node already removed.");
<a id="L959" name="L959"></a> 959 
<a id="L960" name="L960"></a> 960             <em class="comment">// Ensure that all children are cached</em>
<a id="L961" name="L961"></a> 961             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] kidNames = <a href="../D/12749.html" title="Multiple defined in 2 places.">childrenNamesSpi</a>();
<a id="L962" name="L962"></a> 962             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;kidNames.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L963" name="L963"></a> 963                 <strong class="reserved">if</strong> (!kidCache.<a href="../D/13333.html" title="Multiple defined in 42 places.">containsKey</a>(kidNames[i]))
<a id="L964" name="L964"></a> 964                     kidCache.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(kidNames[i], <a href="../D/12742.html" title="Multiple defined in 2 places.">childSpi</a>(kidNames[i]));
<a id="L965" name="L965"></a> 965 
<a id="L966" name="L966"></a> 966             <em class="comment">// Recursively remove all cached children</em>
<a id="L967" name="L967"></a> 967             <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>&gt; i = kidCache.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>().<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L968" name="L968"></a> 968                  i.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>();) <em class="brace">{</em>
<a id="L969" name="L969"></a> 969                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L970" name="L970"></a> 970                     i.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().<a href="../S/839.html#L955" title="Defined at 955 in src/java/util/prefs/AbstractPreferences.java.">removeNode2</a>();
<a id="L971" name="L971"></a> 971                     i.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>();
<a id="L972" name="L972"></a> 972                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em> <em class="brace">}</em>
<a id="L973" name="L973"></a> 973             <em class="brace">}</em>
<a id="L974" name="L974"></a> 974 
<a id="L975" name="L975"></a> 975             <em class="comment">// Now we have no descendants - it's time to die!</em>
<a id="L976" name="L976"></a> 976             <a href="../D/30897.html" title="Multiple defined in 2 places.">removeNodeSpi</a>();
<a id="L977" name="L977"></a> 977             removed = <strong class="reserved">true</strong>;
<a id="L978" name="L978"></a> 978             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../S/839.html#L1579" title="Defined at 1579 in src/java/util/prefs/AbstractPreferences.java.">enqueueNodeRemovedEvent</a>(<strong class="reserved">this</strong>);
<a id="L979" name="L979"></a> 979         <em class="brace">}</em>
<a id="L980" name="L980"></a> 980     <em class="brace">}</em>
<a id="L981" name="L981"></a> 981 
<div class="comment">
      Implements the <tt>name</tt> method as per the specification in
      {@link Preferences#name()}.
      <p>This implementation merely returns the name that was
      passed to this node's constructor.
      @return this preference node's name, relative to its parent.</p></div>
<a id="L991" name="L991"></a> 991     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/23424.html" title="Multiple referred from 9102 places.">name</a>() <em class="brace">{</em>
<a id="L992" name="L992"></a> 992         <strong class="reserved">return</strong> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L993" name="L993"></a> 993     <em class="brace">}</em>
<a id="L994" name="L994"></a> 994 
<div class="comment">
      Implements the <tt>absolutePath</tt> method as per the specification in
      {@link Preferences#absolutePath()}.
      <p>This implementation merely returns the absolute path name that
      was computed at the time that this node was constructed (based on
      the name that was passed to this node's constructor, and the names
      that were passed to this node's ancestors' constructors).
      @return this preference node's absolute path name.</p></div>
<a id="L1006" name="L1006"></a>1006     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/9510.html" title="Multiple referred from 19 places.">absolutePath</a>() <em class="brace">{</em>
<a id="L1007" name="L1007"></a>1007         <strong class="reserved">return</strong> <a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a>;
<a id="L1008" name="L1008"></a>1008     <em class="brace">}</em>
<a id="L1009" name="L1009"></a>1009 
<div class="comment">
      Implements the <tt>isUserNode</tt> method as per the specification in
      {@link Preferences#isUserNode()}.
      <p>This implementation compares this node's root node (which is stored
      in a private field) with the value returned by
      {@link Preferences#userRoot()}.  If the two object references are
      identical, this method returns true.
      @return <tt>true</tt> if this preference node is in the user
              preference tree, <tt>false</tt> if it's in the system
              preference tree.</p></div>
<a id="L1023" name="L1023"></a>1023     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22160.html" title="Multiple referred from 3 places.">isUserNode</a>() <em class="brace">{</em>
<a id="L1024" name="L1024"></a>1024         <strong class="reserved">return</strong> <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L1025" name="L1025"></a>1025             <strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>&gt;() <em class="brace">{</em>
<a id="L1026" name="L1026"></a>1026                 <strong class="reserved">public</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L1027" name="L1027"></a>1027                     <strong class="reserved">return</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> == <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a>.<a href="../D/36293.html" title="Multiple defined in 3 places.">userRoot</a>();
<a id="L1028" name="L1028"></a>1028             <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029             <em class="brace">}</em>).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L1030" name="L1030"></a>1030     <em class="brace">}</em>
<a id="L1031" name="L1031"></a>1031 
<a id="L1032" name="L1032"></a>1032     <strong class="reserved">public</strong> <strong class="reserved">void</strong> addPreferenceChangeListener(<a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a> pcl) <em class="brace">{</em>
<a id="L1033" name="L1033"></a>1033         <strong class="reserved">if</strong> (pcl==<strong class="reserved">null</strong>)
<a id="L1034" name="L1034"></a>1034             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>("Change listener is null.");
<a id="L1035" name="L1035"></a>1035         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036             <strong class="reserved">if</strong> (removed)
<a id="L1037" name="L1037"></a>1037                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L1038" name="L1038"></a>1038 
<a id="L1039" name="L1039"></a>1039             <em class="comment">// Copy-on-write</em>
<a id="L1040" name="L1040"></a>1040             <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[] old = <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>;
<a id="L1041" name="L1041"></a>1041             <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a> = <strong class="reserved">new</strong> <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[old.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> + 1];
<a id="L1042" name="L1042"></a>1042             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(old, 0, <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>, 0, old.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1043" name="L1043"></a>1043             <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>[old.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>] = pcl;
<a id="L1044" name="L1044"></a>1044         <em class="brace">}</em>
<a id="L1045" name="L1045"></a>1045         <a href="../S/839.html#L1520" title="Defined at 1520 in src/java/util/prefs/AbstractPreferences.java.">startEventDispatchThreadIfNecessary</a>();
<a id="L1046" name="L1046"></a>1046     <em class="brace">}</em>
<a id="L1047" name="L1047"></a>1047 
<a id="L1048" name="L1048"></a>1048     <strong class="reserved">public</strong> <strong class="reserved">void</strong> removePreferenceChangeListener(<a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a> pcl) <em class="brace">{</em>
<a id="L1049" name="L1049"></a>1049         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1050" name="L1050"></a>1050             <strong class="reserved">if</strong> (removed)
<a id="L1051" name="L1051"></a>1051                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L1052" name="L1052"></a>1052             <strong class="reserved">if</strong> ((<a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a> == <strong class="reserved">null</strong>) || (<a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0))
<a id="L1053" name="L1053"></a>1053                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Listener not registered.");
<a id="L1054" name="L1054"></a>1054 
<a id="L1055" name="L1055"></a>1055             <em class="comment">// Copy-on-write</em>
<a id="L1056" name="L1056"></a>1056             <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[] newPl =
<a id="L1057" name="L1057"></a>1057                 <strong class="reserved">new</strong> <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[<a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1];
<a id="L1058" name="L1058"></a>1058             <strong class="reserved">int</strong> i = 0;
<a id="L1059" name="L1059"></a>1059             <strong class="reserved">while</strong> (i &lt; newPl.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp; <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>[i] != pcl)
<a id="L1060" name="L1060"></a>1060                 newPl[i] = <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>[i++];
<a id="L1061" name="L1061"></a>1061 
<a id="L1062" name="L1062"></a>1062             <strong class="reserved">if</strong> (i == newPl.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp;  <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>[i] != pcl)
<a id="L1063" name="L1063"></a>1063                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Listener not registered.");
<a id="L1064" name="L1064"></a>1064             <strong class="reserved">while</strong> (i &lt; newPl.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1065" name="L1065"></a>1065                 newPl[i] = <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>[++i];
<a id="L1066" name="L1066"></a>1066             <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a> = newPl;
<a id="L1067" name="L1067"></a>1067         <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068     <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069 
<a id="L1070" name="L1070"></a>1070     <strong class="reserved">public</strong> <strong class="reserved">void</strong> addNodeChangeListener(<a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a> ncl) <em class="brace">{</em>
<a id="L1071" name="L1071"></a>1071         <strong class="reserved">if</strong> (ncl==<strong class="reserved">null</strong>)
<a id="L1072" name="L1072"></a>1072             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>("Change listener is null.");
<a id="L1073" name="L1073"></a>1073         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1074" name="L1074"></a>1074             <strong class="reserved">if</strong> (removed)
<a id="L1075" name="L1075"></a>1075                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L1076" name="L1076"></a>1076 
<a id="L1077" name="L1077"></a>1077             <em class="comment">// Copy-on-write</em>
<a id="L1078" name="L1078"></a>1078             <strong class="reserved">if</strong> (<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1079" name="L1079"></a>1079                 <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a> = <strong class="reserved">new</strong> <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[1];
<a id="L1080" name="L1080"></a>1080                 <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>[0] = ncl;
<a id="L1081" name="L1081"></a>1081             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082                 <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[] old = <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>;
<a id="L1083" name="L1083"></a>1083                 <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a> = <strong class="reserved">new</strong> <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[old.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> + 1];
<a id="L1084" name="L1084"></a>1084                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(old, 0, <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>, 0, old.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1085" name="L1085"></a>1085                 <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>[old.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>] = ncl;
<a id="L1086" name="L1086"></a>1086             <em class="brace">}</em>
<a id="L1087" name="L1087"></a>1087         <em class="brace">}</em>
<a id="L1088" name="L1088"></a>1088         <a href="../S/839.html#L1520" title="Defined at 1520 in src/java/util/prefs/AbstractPreferences.java.">startEventDispatchThreadIfNecessary</a>();
<a id="L1089" name="L1089"></a>1089     <em class="brace">}</em>
<a id="L1090" name="L1090"></a>1090 
<a id="L1091" name="L1091"></a>1091     <strong class="reserved">public</strong> <strong class="reserved">void</strong> removeNodeChangeListener(<a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a> ncl) <em class="brace">{</em>
<a id="L1092" name="L1092"></a>1092         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1093" name="L1093"></a>1093             <strong class="reserved">if</strong> (removed)
<a id="L1094" name="L1094"></a>1094                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed.");
<a id="L1095" name="L1095"></a>1095             <strong class="reserved">if</strong> ((<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a> == <strong class="reserved">null</strong>) || (<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> == 0))
<a id="L1096" name="L1096"></a>1096                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Listener not registered.");
<a id="L1097" name="L1097"></a>1097 
<a id="L1098" name="L1098"></a>1098             <em class="comment">// Copy-on-write</em>
<a id="L1099" name="L1099"></a>1099             <strong class="reserved">int</strong> i = 0;
<a id="L1100" name="L1100"></a>1100             <strong class="reserved">while</strong> (i &lt; <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp; <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>[i] != ncl)
<a id="L1101" name="L1101"></a>1101                 i++;
<a id="L1102" name="L1102"></a>1102             <strong class="reserved">if</strong> (i == <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1103" name="L1103"></a>1103                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Listener not registered.");
<a id="L1104" name="L1104"></a>1104             <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[] newNl =
<a id="L1105" name="L1105"></a>1105                 <strong class="reserved">new</strong> <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1];
<a id="L1106" name="L1106"></a>1106             <strong class="reserved">if</strong> (i != 0)
<a id="L1107" name="L1107"></a>1107                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>, 0, newNl, 0, i);
<a id="L1108" name="L1108"></a>1108             <strong class="reserved">if</strong> (i != newNl.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L1109" name="L1109"></a>1109                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>, i + 1,
<a id="L1110" name="L1110"></a>1110                                  newNl, i, newNl.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - i);
<a id="L1111" name="L1111"></a>1111             <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a> = newNl;
<a id="L1112" name="L1112"></a>1112         <em class="brace">}</em>
<a id="L1113" name="L1113"></a>1113     <em class="brace">}</em>
<a id="L1114" name="L1114"></a>1114 
<a id="L1115" name="L1115"></a>1115     <em class="comment">// "SPI" METHODS</em>
<a id="L1116" name="L1116"></a>1116 
<div class="comment">
      Put the given key-value association into this preference node.  It is
      guaranteed that <tt>key</tt> and <tt>value</tt> are non-null and of
      legal length.  Also, it is guaranteed that this node has not been
      removed.  (The implementor needn't check for any of these things.)
      <p>This method is invoked with the lock on this node held.
      @param key the key
      @param value the value</p></div>
<a id="L1127" name="L1127"></a>1127     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L251" title="Referred from 251 in src/java/util/prefs/AbstractPreferences.java.">putSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L1128" name="L1128"></a>1128 
<div class="comment">
      Return the value associated with the specified key at this preference
      node, or <tt>null</tt> if there is no association for this key, or the
      association cannot be determined at this time.  It is guaranteed that
      <tt>key</tt> is non-null.  Also, it is guaranteed that this node has
      not been removed.  (The implementor needn't check for either of these
      things.)
      <p> Generally speaking, this method should not throw an exception
      under any circumstances.  If, however, if it does throw an exception,
      the exception will be intercepted and treated as a <tt>null</tt>
      return value.
      </p><p>This method is invoked with the lock on this node held.
      @param key the key
      @return the value associated with the specified key at this preference
               node, or <tt>null</tt> if there is no association for this
               key, or the association cannot be determined at this time.</p></div>
<a id="L1149" name="L1149"></a>1149     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/839.html#L287" title="Referred from 287 in src/java/util/prefs/AbstractPreferences.java.">getSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1150" name="L1150"></a>1150 
<div class="comment">
      Remove the association (if any) for the specified key at this
      preference node.  It is guaranteed that <tt>key</tt> is non-null.
      Also, it is guaranteed that this node has not been removed.
      (The implementor needn't check for either of these things.)
      <p>This method is invoked with the lock on this node held.
      @param key the key</p></div>
<a id="L1160" name="L1160"></a>1160     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L316" title="Referred from 316 in src/java/util/prefs/AbstractPreferences.java.">removeSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>);
<a id="L1161" name="L1161"></a>1161 
<div class="comment">
      Removes this preference node, invalidating it and any preferences that
      it contains.  The named child will have no descendants at the time this
      invocation is made (i.e., the {@link Preferences#removeNode()} method
      invokes this method repeatedly in a bottom-up fashion, removing each of
      a node's descendants before removing the node itself).
      <p>This method is invoked with the lock held on this node and its
      parent (and all ancestors that are being removed as a
      result of a single invocation to {@link Preferences#removeNode()}).
      </p><p>The removal of a node needn't become persistent until the
      <tt>flush</tt> method is invoked on this node (or an ancestor).
      </p><p>If this node throws a <tt>BackingStoreException</tt>, the exception
      will propagate out beyond the enclosing {@link #removeNode()}
      invocation.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L1184" name="L1184"></a>1184     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L976" title="Referred from 976 in src/java/util/prefs/AbstractPreferences.java.">removeNodeSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>;
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
      Returns all of the keys that have an associated value in this
      preference node.  (The returned array will be of size zero if
      this node has no preferences.)  It is guaranteed that this node has not
      been removed.
      <p>This method is invoked with the lock on this node held.
      </p><p>If this node throws a <tt>BackingStoreException</tt>, the exception
      will propagate out beyond the enclosing {@link #keys()} invocation.
      @return an array of the keys that have an associated value in this
              preference node.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L1203" name="L1203"></a>1203     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../S/839.html#L688" title="Referred from 688 in src/java/util/prefs/AbstractPreferences.java.">keysSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>;
<a id="L1204" name="L1204"></a>1204 
<div class="comment">
      Returns the names of the children of this preference node.  (The
      returned array will be of size zero if this node has no children.)
      This method need not return the names of any nodes already cached,
      but may do so without harm.
      <p>This method is invoked with the lock on this node held.
      </p><p>If this node throws a <tt>BackingStoreException</tt>, the exception
      will propagate out beyond the enclosing {@link #childrenNames()}
      invocation.
      @return an array containing the names of the children of this
              preference node.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L1223" name="L1223"></a>1223     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/11436.html" title="Multiple referred from 2 places.">childrenNamesSpi</a>()
<a id="L1224" name="L1224"></a>1224         <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>;
<a id="L1225" name="L1225"></a>1225 
<div class="comment">
      Returns the named child if it exists, or <tt>null</tt> if it does not.
      It is guaranteed that <tt>nodeName</tt> is non-null, non-empty,
      does not contain the slash character ('/'), and is no longer than
      {@link #MAX_NAME_LENGTH} characters.  Also, it is guaranteed
      that this node has not been removed.  (The implementor needn't check
      for any of these things if he chooses to override this method.)
      <p>Finally, it is guaranteed that the named node has not been returned
      by a previous invocation of this method or {@link #childSpi} after the
      last time that it was removed.  In other words, a cached value will
      always be used in preference to invoking this method.  (The implementor
      needn't maintain his own cache of previously returned children if he
      chooses to override this method.)
      </p><p>This implementation obtains this preference node's lock, invokes
      {@link #childrenNames()} to get an array of the names of this node's
      children, and iterates over the array comparing the name of each child
      with the specified node name.  If a child node has the correct name,
      the {@link #childSpi(String)} method is invoked and the resulting
      node is returned.  If the iteration completes without finding the
      specified name, <tt>null</tt> is returned.
      @param nodeName name of the child to be searched for.
      @return the named child if it exists, or null if it does not.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L1255" name="L1255"></a>1255     <strong class="reserved">protected</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> <a href="../R/15535.html" title="Multiple referred from 151 places.">getChild</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/833.html#L422" title="Defined at 422 in src/java/util/prefs/Preferences.java.">nodeName</a>)
<a id="L1256" name="L1256"></a>1256             <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1257" name="L1257"></a>1257         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1258" name="L1258"></a>1258             <em class="comment">// assert kidCache.get(nodeName)==null;</em>
<a id="L1259" name="L1259"></a>1259             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] kidNames = <a href="../D/12748.html" title="Multiple defined in 2 places.">childrenNames</a>();
<a id="L1260" name="L1260"></a>1260             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;kidNames.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1261" name="L1261"></a>1261                 <strong class="reserved">if</strong> (kidNames[i].<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/833.html#L422" title="Defined at 422 in src/java/util/prefs/Preferences.java.">nodeName</a>))
<a id="L1262" name="L1262"></a>1262                     <strong class="reserved">return</strong> <a href="../D/12742.html" title="Multiple defined in 2 places.">childSpi</a>(kidNames[i]);
<a id="L1263" name="L1263"></a>1263         <em class="brace">}</em>
<a id="L1264" name="L1264"></a>1264         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1265" name="L1265"></a>1265     <em class="brace">}</em>
<a id="L1266" name="L1266"></a>1266 
<div class="comment">
      Returns the named child of this preference node, creating it if it does
      not already exist.  It is guaranteed that <tt>name</tt> is non-null,
      non-empty, does not contain the slash character ('/'), and is no longer
      than {@link #MAX_NAME_LENGTH} characters.  Also, it is guaranteed that
      this node has not been removed.  (The implementor needn't check for any
      of these things.)
      <p>Finally, it is guaranteed that the named node has not been returned
      by a previous invocation of this method or {@link #getChild(String)}
      after the last time that it was removed.  In other words, a cached
      value will always be used in preference to invoking this method.
      Subclasses need not maintain their own cache of previously returned
      children.
      </p><p>The implementer must ensure that the returned node has not been
      removed.  If a like-named child of this node was previously removed, the
      implementer must return a newly constructed <tt>AbstractPreferences</tt>
      node; once removed, an <tt>AbstractPreferences</tt> node
      cannot be "resuscitated."
      </p><p>If this method causes a node to be created, this node is not
      guaranteed to be persistent until the <tt>flush</tt> method is
      invoked on this node or one of its ancestors (or descendants).
      </p><p>This method is invoked with the lock on this node held.
      @param name The name of the child node to return, relative to
             this preference node.
      @return The named child node.</p></div>
<a id="L1298" name="L1298"></a>1298     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> <a href="../R/11431.html" title="Multiple referred from 3 places.">childSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1299" name="L1299"></a>1299 
<div class="comment">
      Returns the absolute path name of this preferences node.</div>
<a id="L1303" name="L1303"></a>1303     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L1304" name="L1304"></a>1304         <strong class="reserved">return</strong> (<strong class="reserved">this</strong>.<a href="../D/26425.html" title="Multiple defined in 2 places.">isUserNode</a>() ? "User" : "System") +
<a id="L1305" name="L1305"></a>1305                " Preference Node: " + <strong class="reserved">this</strong>.<a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a>();
<a id="L1306" name="L1306"></a>1306     <em class="brace">}</em>
<a id="L1307" name="L1307"></a>1307 
<div class="comment">
      Implements the <tt>sync</tt> method as per the specification in
      {@link Preferences#sync()}.
      <p>This implementation calls a recursive helper method that locks this
      node, invokes syncSpi() on it, unlocks this node, and recursively
      invokes this method on each "cached child."  A cached child is a child
      of this node that has been created in this VM and not subsequently
      removed.  In effect, this method does a depth first traversal of the
      "cached subtree" rooted at this node, calling syncSpi() on each node in
      the subTree while only that node is locked. Note that syncSpi() is
      invoked top-down.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.
      @throws IllegalStateException if this node (or an ancestor) has been
              removed with the {@link #removeNode()} method.
      @see #flush()</p></div>
<a id="L1328" name="L1328"></a>1328     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29068.html" title="Multiple referred from 150 places.">sync</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1329" name="L1329"></a>1329         <a href="../S/839.html#L1332" title="Defined at 1332 in src/java/util/prefs/AbstractPreferences.java.">sync2</a>();
<a id="L1330" name="L1330"></a>1330     <em class="brace">}</em>
<a id="L1331" name="L1331"></a>1331 
<a id="L1332" name="L1332"></a>1332     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/29069.html" title="Multiple referred from 2 places.">sync2</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1333" name="L1333"></a>1333         <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>[] cachedKids;
<a id="L1334" name="L1334"></a>1334 
<a id="L1335" name="L1335"></a>1335         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1336" name="L1336"></a>1336             <strong class="reserved">if</strong> (removed)
<a id="L1337" name="L1337"></a>1337                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed");
<a id="L1338" name="L1338"></a>1338             <a href="../D/35164.html" title="Multiple defined in 2 places.">syncSpi</a>();
<a id="L1339" name="L1339"></a>1339             cachedKids = <a href="../S/839.html#L731" title="Defined at 731 in src/java/util/prefs/AbstractPreferences.java.">cachedChildren</a>();
<a id="L1340" name="L1340"></a>1340         <em class="brace">}</em>
<a id="L1341" name="L1341"></a>1341 
<a id="L1342" name="L1342"></a>1342         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;cachedKids.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1343" name="L1343"></a>1343             cachedKids[i].<a href="../S/839.html#L1332" title="Defined at 1332 in src/java/util/prefs/AbstractPreferences.java.">sync2</a>();
<a id="L1344" name="L1344"></a>1344     <em class="brace">}</em>
<a id="L1345" name="L1345"></a>1345 
<div class="comment">
      This method is invoked with this node locked.  The contract of this
      method is to synchronize any cached preferences stored at this node
      with any stored in the backing store.  (It is perfectly possible that
      this node does not exist on the backing store, either because it has
      been deleted by another VM, or because it has not yet been created.)
      Note that this method should <i>not</i> synchronize the preferences in
      any subnodes of this node.  If the backing store naturally syncs an
      entire subtree at once, the implementer is encouraged to override
      sync(), rather than merely overriding this method.
      <p>If this node throws a <tt>BackingStoreException</tt>, the exception
      will propagate out beyond the enclosing {@link #sync()} invocation.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L1364" name="L1364"></a>1364     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L1338" title="Referred from 1338 in src/java/util/prefs/AbstractPreferences.java.">syncSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>;
<a id="L1365" name="L1365"></a>1365 
<div class="comment">
      Implements the <tt>flush</tt> method as per the specification in
      {@link Preferences#flush()}.
      <p>This implementation calls a recursive helper method that locks this
      node, invokes flushSpi() on it, unlocks this node, and recursively
      invokes this method on each "cached child."  A cached child is a child
      of this node that has been created in this VM and not subsequently
      removed.  In effect, this method does a depth first traversal of the
      "cached subtree" rooted at this node, calling flushSpi() on each node in
      the subTree while only that node is locked. Note that flushSpi() is
      invoked top-down.
      </p><p> If this method is invoked on a node that has been removed with
      the {@link #removeNode()} method, flushSpi() is invoked on this node,
      but not on others.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.
      @see #flush()</p></div>
<a id="L1388" name="L1388"></a>1388     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14697.html" title="Multiple referred from 199 places.">flush</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1389" name="L1389"></a>1389         <a href="../S/839.html#L1392" title="Defined at 1392 in src/java/util/prefs/AbstractPreferences.java.">flush2</a>();
<a id="L1390" name="L1390"></a>1390     <em class="brace">}</em>
<a id="L1391" name="L1391"></a>1391 
<a id="L1392" name="L1392"></a>1392     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/14698.html" title="Multiple referred from 2 places.">flush2</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1393" name="L1393"></a>1393         <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>[] cachedKids;
<a id="L1394" name="L1394"></a>1394 
<a id="L1395" name="L1395"></a>1395         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1396" name="L1396"></a>1396             <a href="../D/16488.html" title="Multiple defined in 2 places.">flushSpi</a>();
<a id="L1397" name="L1397"></a>1397             <strong class="reserved">if</strong>(removed)
<a id="L1398" name="L1398"></a>1398                 <strong class="reserved">return</strong>;
<a id="L1399" name="L1399"></a>1399             cachedKids = <a href="../S/839.html#L731" title="Defined at 731 in src/java/util/prefs/AbstractPreferences.java.">cachedChildren</a>();
<a id="L1400" name="L1400"></a>1400         <em class="brace">}</em>
<a id="L1401" name="L1401"></a>1401 
<a id="L1402" name="L1402"></a>1402         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; cachedKids.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1403" name="L1403"></a>1403             cachedKids[i].<a href="../S/839.html#L1392" title="Defined at 1392 in src/java/util/prefs/AbstractPreferences.java.">flush2</a>();
<a id="L1404" name="L1404"></a>1404     <em class="brace">}</em>
<a id="L1405" name="L1405"></a>1405 
<div class="comment">
      This method is invoked with this node locked.  The contract of this
      method is to force any cached changes in the contents of this
      preference node to the backing store, guaranteeing their persistence.
      (It is perfectly possible that this node does not exist on the backing
      store, either because it has been deleted by another VM, or because it
      has not yet been created.)  Note that this method should <i>not</i>
      flush the preferences in any subnodes of this node.  If the backing
      store naturally flushes an entire subtree at once, the implementer is
      encouraged to override flush(), rather than merely overriding this
      method.
      <p>If this node throws a <tt>BackingStoreException</tt>, the exception
      will propagate out beyond the enclosing {@link #flush()} invocation.
      @throws BackingStoreException if this operation cannot be completed
              due to a failure in the backing store, or inability to
              communicate with it.</p></div>
<a id="L1425" name="L1425"></a>1425     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L1396" title="Referred from 1396 in src/java/util/prefs/AbstractPreferences.java.">flushSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>;
<a id="L1426" name="L1426"></a>1426 
<div class="comment">
      Returns <tt>true</tt> iff this node (or an ancestor) has been
      removed with the {@link #removeNode()} method.  This method
      locks this node prior to returning the contents of the private
      field used to track this state.
      @return <tt>true</tt> iff this node (or an ancestor) has been
            removed with the {@link #removeNode()} method.</div>
<a id="L1436" name="L1436"></a>1436     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/21948.html" title="Multiple referred from 5 places.">isRemoved</a>() <em class="brace">{</em>
<a id="L1437" name="L1437"></a>1437         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1438" name="L1438"></a>1438             <strong class="reserved">return</strong> removed;
<a id="L1439" name="L1439"></a>1439         <em class="brace">}</em>
<a id="L1440" name="L1440"></a>1440     <em class="brace">}</em>
<a id="L1441" name="L1441"></a>1441 
<div class="comment">
      Queue of pending notification events.  When a preference or node
      change event for which there are one or more listeners occurs,
      it is placed on this queue and the queue is notified.  A background
      thread waits on this queue and delivers the events.  This decouples
      event delivery from preference activity, greatly simplifying
      locking and reducing opportunity for deadlock.</div>
<a id="L1450" name="L1450"></a>1450     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/938.html#L39" title="Defined at 39 in src/java/util/EventObject.java.">EventObject</a>&gt; eventQueue = <strong class="reserved">new</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;&gt;();
<a id="L1451" name="L1451"></a>1451 
<div class="comment">
      These two classes are used to distinguish NodeChangeEvents on
      eventQueue so the event dispatch thread knows whether to call
      childAdded or childRemoved.</div>
<a id="L1457" name="L1457"></a>1457     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/5543.html" title="Multiple referred from 2 places.">NodeAddedEvent</a> <strong class="reserved">extends</strong> <a href="../S/831.html#L46" title="Defined at 46 in src/java/util/prefs/NodeChangeEvent.java.">NodeChangeEvent</a> <em class="brace">{</em>
<a id="L1458" name="L1458"></a>1458         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -6743557530157328528L;
<a id="L1459" name="L1459"></a>1459         NodeAddedEvent(<a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> child) <em class="brace">{</em>
<a id="L1460" name="L1460"></a>1460             <strong class="reserved">super</strong>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child);
<a id="L1461" name="L1461"></a>1461         <em class="brace">}</em>
<a id="L1462" name="L1462"></a>1462     <em class="brace">}</em>
<a id="L1463" name="L1463"></a>1463     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../S/839.html#L1582" title="Referred from 1582 in src/java/util/prefs/AbstractPreferences.java.">NodeRemovedEvent</a> <strong class="reserved">extends</strong> <a href="../S/831.html#L46" title="Defined at 46 in src/java/util/prefs/NodeChangeEvent.java.">NodeChangeEvent</a> <em class="brace">{</em>
<a id="L1464" name="L1464"></a>1464         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 8735497392918824837L;
<a id="L1465" name="L1465"></a>1465         NodeRemovedEvent(<a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> child) <em class="brace">{</em>
<a id="L1466" name="L1466"></a>1466             <strong class="reserved">super</strong>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, child);
<a id="L1467" name="L1467"></a>1467         <em class="brace">}</em>
<a id="L1468" name="L1468"></a>1468     <em class="brace">}</em>
<a id="L1469" name="L1469"></a>1469 
<div class="comment">
      A single background thread ("the event notification thread") monitors
      the event queue and delivers events that are placed on the queue.</div>
<a id="L1474" name="L1474"></a>1474     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/2739.html" title="Multiple referred from 18 places.">EventDispatchThread</a> <strong class="reserved">extends</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> <em class="brace">{</em>
<a id="L1475" name="L1475"></a>1475         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26539.html" title="Multiple referred from 715 places.">run</a>() <em class="brace">{</em>
<a id="L1476" name="L1476"></a>1476             <strong class="reserved">while</strong>(<strong class="reserved">true</strong>) <em class="brace">{</em>
<a id="L1477" name="L1477"></a>1477                 <em class="comment">// Wait on eventQueue till an event is present</em>
<a id="L1478" name="L1478"></a>1478                 <a href="../S/938.html#L39" title="Defined at 39 in src/java/util/EventObject.java.">EventObject</a> event = <strong class="reserved">null</strong>;
<a id="L1479" name="L1479"></a>1479                 <strong class="reserved">synchronized</strong>(eventQueue) <em class="brace">{</em>
<a id="L1480" name="L1480"></a>1480                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1481" name="L1481"></a>1481                         <strong class="reserved">while</strong> (eventQueue.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>())
<a id="L1482" name="L1482"></a>1482                             eventQueue.<a href="../D/36778.html" title="Multiple defined in 3 places.">wait</a>();
<a id="L1483" name="L1483"></a>1483                         event = eventQueue.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(0);
<a id="L1484" name="L1484"></a>1484                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L1485" name="L1485"></a>1485                         <em class="comment">// XXX Log "Event dispatch thread interrupted. Exiting"</em>
<a id="L1486" name="L1486"></a>1486                         <strong class="reserved">return</strong>;
<a id="L1487" name="L1487"></a>1487                     <em class="brace">}</em>
<a id="L1488" name="L1488"></a>1488                 <em class="brace">}</em>
<a id="L1489" name="L1489"></a>1489 
<a id="L1490" name="L1490"></a>1490                 <em class="comment">// Now we have event &amp; hold no locks; deliver evt to listeners</em>
<a id="L1491" name="L1491"></a>1491                 <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> src=(<a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a>)event.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>();
<a id="L1492" name="L1492"></a>1492                 <strong class="reserved">if</strong> (event <strong class="reserved">instanceof</strong> <a href="../S/840.html#L45" title="Defined at 45 in src/java/util/prefs/PreferenceChangeEvent.java.">PreferenceChangeEvent</a>) <em class="brace">{</em>
<a id="L1493" name="L1493"></a>1493                     <a href="../S/840.html#L45" title="Defined at 45 in src/java/util/prefs/PreferenceChangeEvent.java.">PreferenceChangeEvent</a> pce = (<a href="../S/840.html#L45" title="Defined at 45 in src/java/util/prefs/PreferenceChangeEvent.java.">PreferenceChangeEvent</a>)event;
<a id="L1494" name="L1494"></a>1494                     <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[] listeners = src.<a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>();
<a id="L1495" name="L1495"></a>1495                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;listeners.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1496" name="L1496"></a>1496                         listeners[i].<a href="../S/838.html#L46" title="Defined at 46 in src/java/util/prefs/PreferenceChangeListener.java.">preferenceChange</a>(pce);
<a id="L1497" name="L1497"></a>1497                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1498" name="L1498"></a>1498                     <a href="../S/831.html#L46" title="Defined at 46 in src/java/util/prefs/NodeChangeEvent.java.">NodeChangeEvent</a> nce = (<a href="../S/831.html#L46" title="Defined at 46 in src/java/util/prefs/NodeChangeEvent.java.">NodeChangeEvent</a>)event;
<a id="L1499" name="L1499"></a>1499                     <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[] listeners = src.<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>();
<a id="L1500" name="L1500"></a>1500                     <strong class="reserved">if</strong> (nce <strong class="reserved">instanceof</strong> <a href="../S/839.html#L1457" title="Defined at 1457 in src/java/util/prefs/AbstractPreferences.java.">NodeAddedEvent</a>) <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;listeners.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1502" name="L1502"></a>1502                             listeners[i].<a href="../S/843.html#L45" title="Defined at 45 in src/java/util/prefs/NodeChangeListener.java.">childAdded</a>(nce);
<a id="L1503" name="L1503"></a>1503                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1504" name="L1504"></a>1504                         <em class="comment">// assert nce instanceof NodeRemovedEvent;</em>
<a id="L1505" name="L1505"></a>1505                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;listeners.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1506" name="L1506"></a>1506                             listeners[i].<a href="../S/843.html#L53" title="Defined at 53 in src/java/util/prefs/NodeChangeListener.java.">childRemoved</a>(nce);
<a id="L1507" name="L1507"></a>1507                     <em class="brace">}</em>
<a id="L1508" name="L1508"></a>1508                 <em class="brace">}</em>
<a id="L1509" name="L1509"></a>1509             <em class="brace">}</em>
<a id="L1510" name="L1510"></a>1510         <em class="brace">}</em>
<a id="L1511" name="L1511"></a>1511     <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512 
<a id="L1513" name="L1513"></a>1513     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a> eventDispatchThread = <strong class="reserved">null</strong>;
<a id="L1514" name="L1514"></a>1514 
<div class="comment">
      This method starts the event dispatch thread the first time it
      is called.  The event dispatch thread will be started only
      if someone registers a listener.</div>
<a id="L1520" name="L1520"></a>1520     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/28817.html" title="Multiple referred from 2 places.">startEventDispatchThreadIfNecessary</a>() <em class="brace">{</em>
<a id="L1521" name="L1521"></a>1521         <strong class="reserved">if</strong> (eventDispatchThread == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1522" name="L1522"></a>1522             <em class="comment">// XXX Log "Starting event dispatch thread"</em>
<a id="L1523" name="L1523"></a>1523             eventDispatchThread = <strong class="reserved">new</strong> <a href="../D/2988.html" title="Multiple defined in 2 places.">EventDispatchThread</a>();
<a id="L1524" name="L1524"></a>1524             eventDispatchThread.<a href="../D/32347.html" title="Multiple defined in 2 places.">setDaemon</a>(<strong class="reserved">true</strong>);
<a id="L1525" name="L1525"></a>1525             eventDispatchThread.<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>();
<a id="L1526" name="L1526"></a>1526         <em class="brace">}</em>
<a id="L1527" name="L1527"></a>1527     <em class="brace">}</em>
<a id="L1528" name="L1528"></a>1528 
<div class="comment">
      Return this node's preference/node change listeners.  Even though
      we're using a copy-on-write lists, we use synchronized accessors to
      ensure information transmission from the writing thread to the
      reading thread.</div>
<a id="L1535" name="L1535"></a>1535     <a href="../S/838.html#L38" title="Defined at 38 in src/java/util/prefs/PreferenceChangeListener.java.">PreferenceChangeListener</a>[] <a href="../R/24908.html" title="Multiple referred from 15 places.">prefListeners</a>() <em class="brace">{</em>
<a id="L1536" name="L1536"></a>1536         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1537" name="L1537"></a>1537             <strong class="reserved">return</strong> <a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>;
<a id="L1538" name="L1538"></a>1538         <em class="brace">}</em>
<a id="L1539" name="L1539"></a>1539     <em class="brace">}</em>
<a id="L1540" name="L1540"></a>1540     <a href="../S/843.html#L38" title="Defined at 38 in src/java/util/prefs/NodeChangeListener.java.">NodeChangeListener</a>[] <a href="../R/23751.html" title="Multiple referred from 45 places.">nodeListeners</a>() <em class="brace">{</em>
<a id="L1541" name="L1541"></a>1541         <strong class="reserved">synchronized</strong>(<a href="../D/27034.html" title="Multiple defined in 25 places.">lock</a>) <em class="brace">{</em>
<a id="L1542" name="L1542"></a>1542             <strong class="reserved">return</strong> <a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>;
<a id="L1543" name="L1543"></a>1543         <em class="brace">}</em>
<a id="L1544" name="L1544"></a>1544     <em class="brace">}</em>
<a id="L1545" name="L1545"></a>1545 
<div class="comment">
      Enqueue a preference change event for delivery to registered
      preference change listeners unless there are no registered
      listeners.  Invoked with this.lock held.</div>
<a id="L1551" name="L1551"></a>1551     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13897.html" title="Multiple referred from 2 places.">enqueuePreferenceChangeEvent</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newValue) <em class="brace">{</em>
<a id="L1552" name="L1552"></a>1552         <strong class="reserved">if</strong> (<a href="../S/839.html#L1535" title="Defined at 1535 in src/java/util/prefs/AbstractPreferences.java.">prefListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> != 0) <em class="brace">{</em>
<a id="L1553" name="L1553"></a>1553             <strong class="reserved">synchronized</strong>(eventQueue) <em class="brace">{</em>
<a id="L1554" name="L1554"></a>1554                 eventQueue.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">new</strong> <a href="../S/840.html#L45" title="Defined at 45 in src/java/util/prefs/PreferenceChangeEvent.java.">PreferenceChangeEvent</a>(<strong class="reserved">this</strong>, <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>, newValue));
<a id="L1555" name="L1555"></a>1555                 eventQueue.<a href="../D/28321.html" title="Multiple defined in 5 places.">notify</a>();
<a id="L1556" name="L1556"></a>1556             <em class="brace">}</em>
<a id="L1557" name="L1557"></a>1557         <em class="brace">}</em>
<a id="L1558" name="L1558"></a>1558     <em class="brace">}</em>
<a id="L1559" name="L1559"></a>1559 
<div class="comment">
      Enqueue a "node added" event for delivery to registered node change
      listeners unless there are no registered listeners.  Invoked with
      this.lock held.</div>
<a id="L1565" name="L1565"></a>1565     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L835" title="Referred from 835 in src/java/util/prefs/AbstractPreferences.java.">enqueueNodeAddedEvent</a>(<a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> child) <em class="brace">{</em>
<a id="L1566" name="L1566"></a>1566         <strong class="reserved">if</strong> (<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> != 0) <em class="brace">{</em>
<a id="L1567" name="L1567"></a>1567             <strong class="reserved">synchronized</strong>(eventQueue) <em class="brace">{</em>
<a id="L1568" name="L1568"></a>1568                 eventQueue.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">new</strong> <a href="../S/839.html#L1457" title="Defined at 1457 in src/java/util/prefs/AbstractPreferences.java.">NodeAddedEvent</a>(<strong class="reserved">this</strong>, child));
<a id="L1569" name="L1569"></a>1569                 eventQueue.<a href="../D/28321.html" title="Multiple defined in 5 places.">notify</a>();
<a id="L1570" name="L1570"></a>1570             <em class="brace">}</em>
<a id="L1571" name="L1571"></a>1571         <em class="brace">}</em>
<a id="L1572" name="L1572"></a>1572     <em class="brace">}</em>
<a id="L1573" name="L1573"></a>1573 
<div class="comment">
      Enqueue a "node removed" event for delivery to registered node change
      listeners unless there are no registered listeners.  Invoked with
      this.lock held.</div>
<a id="L1579" name="L1579"></a>1579     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L978" title="Referred from 978 in src/java/util/prefs/AbstractPreferences.java.">enqueueNodeRemovedEvent</a>(<a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> child) <em class="brace">{</em>
<a id="L1580" name="L1580"></a>1580         <strong class="reserved">if</strong> (<a href="../S/839.html#L1540" title="Defined at 1540 in src/java/util/prefs/AbstractPreferences.java.">nodeListeners</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> != 0) <em class="brace">{</em>
<a id="L1581" name="L1581"></a>1581             <strong class="reserved">synchronized</strong>(eventQueue) <em class="brace">{</em>
<a id="L1582" name="L1582"></a>1582                 eventQueue.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">new</strong> <a href="../S/839.html#L1463" title="Defined at 1463 in src/java/util/prefs/AbstractPreferences.java.">NodeRemovedEvent</a>(<strong class="reserved">this</strong>, child));
<a id="L1583" name="L1583"></a>1583                 eventQueue.<a href="../D/28321.html" title="Multiple defined in 5 places.">notify</a>();
<a id="L1584" name="L1584"></a>1584             <em class="brace">}</em>
<a id="L1585" name="L1585"></a>1585         <em class="brace">}</em>
<a id="L1586" name="L1586"></a>1586     <em class="brace">}</em>
<a id="L1587" name="L1587"></a>1587 
<div class="comment">
      Implements the <tt>exportNode</tt> method as per the specification in
      {@link Preferences#exportNode(OutputStream)}.
      @param os the output stream on which to emit the XML document.
      @throws IOException if writing to the specified output stream
              results in an <tt>IOException</tt>.
      @throws BackingStoreException if preference data cannot be read from
              backing store.</div>
<a id="L1598" name="L1598"></a>1598     <strong class="reserved">public</strong> <strong class="reserved">void</strong> exportNode(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> os)
<a id="L1599" name="L1599"></a>1599         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>
<a id="L1600" name="L1600"></a>1600     <em class="brace">{</em>
<a id="L1601" name="L1601"></a>1601         <a href="../D/10299.html" title="Multiple defined in 2 places.">XmlSupport</a>.<a href="../D/15875.html" title="Multiple defined in 7 places.">export</a>(os, <strong class="reserved">this</strong>, <strong class="reserved">false</strong>);
<a id="L1602" name="L1602"></a>1602     <em class="brace">}</em>
<a id="L1603" name="L1603"></a>1603 
<div class="comment">
      Implements the <tt>exportSubtree</tt> method as per the specification in
      {@link Preferences#exportSubtree(OutputStream)}.
      @param os the output stream on which to emit the XML document.
      @throws IOException if writing to the specified output stream
              results in an <tt>IOException</tt>.
      @throws BackingStoreException if preference data cannot be read from
              backing store.</div>
<a id="L1614" name="L1614"></a>1614     <strong class="reserved">public</strong> <strong class="reserved">void</strong> exportSubtree(<a href="../D/6445.html" title="Multiple defined in 3 places.">OutputStream</a> os)
<a id="L1615" name="L1615"></a>1615         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>
<a id="L1616" name="L1616"></a>1616     <em class="brace">{</em>
<a id="L1617" name="L1617"></a>1617         <a href="../D/10299.html" title="Multiple defined in 2 places.">XmlSupport</a>.<a href="../D/15875.html" title="Multiple defined in 7 places.">export</a>(os, <strong class="reserved">this</strong>, <strong class="reserved">true</strong>);
<a id="L1618" name="L1618"></a>1618     <em class="brace">}</em>
<a id="L1619" name="L1619"></a>1619 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L239">[^]</a><a href="#L1614">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
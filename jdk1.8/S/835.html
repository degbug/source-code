<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/prefs/WindowsPreferences.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L140">[^]</a><a href="#L1128">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L140" title="Defined at 140.">WindowsRegOpenKey</a></li>
<li><a href="#L145" title="Defined at 145.">WindowsRegOpenKey1</a></li>
<li><a href="#L179" title="Defined at 179.">WindowsRegCloseKey</a></li>
<li><a href="#L184" title="Defined at 184.">WindowsRegCreateKeyEx</a></li>
<li><a href="#L189" title="Defined at 189.">WindowsRegCreateKeyEx1</a></li>
<li><a href="#L213" title="Defined at 213.">WindowsRegDeleteKey</a></li>
<li><a href="#L218" title="Defined at 218.">WindowsRegFlushKey</a></li>
<li><a href="#L223" title="Defined at 223.">WindowsRegFlushKey1</a></li>
<li><a href="#L248" title="Defined at 248.">WindowsRegQueryValueEx</a></li>
<li><a href="#L253" title="Defined at 253.">WindowsRegSetValueEx</a></li>
<li><a href="#L258" title="Defined at 258.">WindowsRegSetValueEx1</a></li>
<li><a href="#L284" title="Defined at 284.">WindowsRegDeleteValue</a></li>
<li><a href="#L289" title="Defined at 289.">WindowsRegQueryInfoKey</a></li>
<li><a href="#L294" title="Defined at 294.">WindowsRegQueryInfoKey1</a></li>
<li><a href="#L319" title="Defined at 319.">WindowsRegEnumKeyEx</a></li>
<li><a href="#L325" title="Defined at 325.">WindowsRegEnumKeyEx1</a></li>
<li><a href="#L351" title="Defined at 351.">WindowsRegEnumValue</a></li>
<li><a href="#L356" title="Defined at 356.">WindowsRegEnumValue1</a></li>
<li><a href="#L442" title="Defined at 442.">windowsAbsolutePath</a></li>
<li><a href="#L465" title="Defined at 465.">openKey</a></li>
<li><a href="#L479" title="Defined at 479.">openKey</a></li>
<li><a href="#L495" title="Defined at 495.">openKey</a></li>
<li><a href="#L541" title="Defined at 541.">openKey</a></li>
<li><a href="#L598" title="Defined at 598.">closeKey</a></li>
<li><a href="#L616" title="Defined at 616.">putSpi</a></li>
<li><a href="#L644" title="Defined at 644.">getSpi</a></li>
<li><a href="#L666" title="Defined at 666.">removeSpi</a></li>
<li><a href="#L691" title="Defined at 691.">keysSpi</a></li>
<li><a href="#L743" title="Defined at 743.">childrenNamesSpi</a></li>
<li><a href="#L797" title="Defined at 797.">flush</a></li>
<li><a href="#L835" title="Defined at 835.">sync</a></li>
<li><a href="#L848" title="Defined at 848.">childSpi</a></li>
<li><a href="#L858" title="Defined at 858.">removeNodeSpi</a></li>
<li><a href="#L889" title="Defined at 889.">toJavaName</a></li>
<li><a href="#L927" title="Defined at 927.">toJavaAlt64Name</a></li>
<li><a href="#L959" title="Defined at 959.">toWindowsName</a></li>
<li><a href="#L986" title="Defined at 986.">toWindowsAlt64Name</a></li>
<li><a href="#L1006" title="Defined at 1006.">toJavaValueString</a></li>
<li><a href="#L1052" title="Defined at 1052.">toWindowsValueString</a></li>
<li><a href="#L1085" title="Defined at 1085.">rootNativeHandle</a></li>
<li><a href="#L1094" title="Defined at 1094.">stringToByteArray</a></li>
<li><a href="#L1106" title="Defined at 1106.">byteArrayToString</a></li>
<li><a href="#L1117" title="Defined at 1117.">flushSpi</a></li>
<li><a href="#L1124" title="Defined at 1124.">syncSpi</a></li>
<li><a href="#L1128" title="Defined at 1128.">logger</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2002, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.prefs;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Map;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.TreeMap;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.StringTokenizer;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.io.ByteArrayOutputStream;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> sun.util.logging.PlatformLogger;
<a id="L33" name="L33"></a>  33 
<div class="comment">
  Windows registry based implementation of  <tt>Preferences</tt>.
  <tt>Preferences</tt>' <tt>systemRoot</tt> and <tt>userRoot</tt> are stored in
  <tt>HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Prefs</tt> and
  <tt>HKEY_CURRENT_USER\Software\JavaSoft\Prefs</tt> correspondingly.
  @author  Konstantin Kladko
  @see Preferences
  @see PreferencesFactory
  @since 1.4</div>
<a id="L45" name="L45"></a>  45 
<a id="L46" name="L46"></a>  46 <strong class="reserved">class</strong> <a href="../R/8820.html" title="Multiple referred from 7 places.">WindowsPreferences</a> <strong class="reserved">extends</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a><em class="brace">{</em>
<a id="L47" name="L47"></a>  47 
<div class="comment">
      Logger for error messages</div>
<a id="L51" name="L51"></a>  51     <strong class="reserved">private</strong> <strong class="reserved">static</strong> PlatformLogger <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>;
<a id="L52" name="L52"></a>  52 
<div class="comment">
      Windows registry path to <tt>Preferences</tt>'s root nodes.</div>
<a id="L56" name="L56"></a>  56     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>[] WINDOWS_ROOT_PATH =
<a id="L57" name="L57"></a>  57         <a href="../S/835.html#L1094" title="Defined at 1094 in src/java/util/prefs/WindowsPreferences.java.">stringToByteArray</a>("Software\\JavaSoft\\Prefs");
<a id="L58" name="L58"></a>  58 
<div class="comment">
      Windows handles to <tt>HKEY_CURRENT_USER</tt> and
      <tt>HKEY_LOCAL_MACHINE</tt> hives.</div>
<a id="L63" name="L63"></a>  63     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> HKEY_CURRENT_USER = 0x80000001;
<a id="L64" name="L64"></a>  64     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> HKEY_LOCAL_MACHINE = 0x80000002;
<a id="L65" name="L65"></a>  65 
<div class="comment">
      Mount point for <tt>Preferences</tt>'  user root.</div>
<a id="L69" name="L69"></a>  69     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> USER_ROOT_NATIVE_HANDLE = HKEY_CURRENT_USER;
<a id="L70" name="L70"></a>  70 
<div class="comment">
      Mount point for <tt>Preferences</tt>'  system root.</div>
<a id="L74" name="L74"></a>  74     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SYSTEM_ROOT_NATIVE_HANDLE = HKEY_LOCAL_MACHINE;
<a id="L75" name="L75"></a>  75 
<div class="comment">
      Maximum byte-encoded path length for Windows native functions,
      ending <tt>null</tt> character not included.</div>
<a id="L80" name="L80"></a>  80     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_WINDOWS_PATH_LENGTH = 256;
<a id="L81" name="L81"></a>  81 
<div class="comment">
      User root node.</div>
<a id="L85" name="L85"></a>  85     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../D/36293.html" title="Multiple defined in 3 places.">userRoot</a> =
<a id="L86" name="L86"></a>  86          <strong class="reserved">new</strong> <a href="../S/835.html#L46" title="Defined at 46 in src/java/util/prefs/WindowsPreferences.java.">WindowsPreferences</a>(USER_ROOT_NATIVE_HANDLE, WINDOWS_ROOT_PATH);
<a id="L87" name="L87"></a>  87 
<div class="comment">
      System root node.</div>
<a id="L91" name="L91"></a>  91     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/833.html#L224" title="Defined at 224 in src/java/util/prefs/Preferences.java.">Preferences</a> <a href="../D/35194.html" title="Multiple defined in 3 places.">systemRoot</a> =
<a id="L92" name="L92"></a>  92         <strong class="reserved">new</strong> <a href="../S/835.html#L46" title="Defined at 46 in src/java/util/prefs/WindowsPreferences.java.">WindowsPreferences</a>(SYSTEM_ROOT_NATIVE_HANDLE, WINDOWS_ROOT_PATH);
<a id="L93" name="L93"></a>  93 
<div class="comment">
     /*  Windows error codes. */</div>
<a id="L95" name="L95"></a>  95     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ERROR_SUCCESS = 0;
<a id="L96" name="L96"></a>  96     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ERROR_FILE_NOT_FOUND = 2;
<a id="L97" name="L97"></a>  97     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ERROR_ACCESS_DENIED = 5;
<a id="L98" name="L98"></a>  98 
<div class="comment">
     /* Constants used to interpret returns of native functions    */</div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NATIVE_HANDLE = 0;
<a id="L101" name="L101"></a> 101     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ERROR_CODE = 1;
<a id="L102" name="L102"></a> 102     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SUBKEYS_NUMBER = 0;
<a id="L103" name="L103"></a> 103     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> VALUES_NUMBER = 2;
<a id="L104" name="L104"></a> 104     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_KEY_LENGTH = 3;
<a id="L105" name="L105"></a> 105     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MAX_VALUE_NAME_LENGTH = 4;
<a id="L106" name="L106"></a> 106     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DISPOSITION = 2;
<a id="L107" name="L107"></a> 107     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REG_CREATED_NEW_KEY = 1;
<a id="L108" name="L108"></a> 108     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REG_OPENED_EXISTING_KEY = 2;
<a id="L109" name="L109"></a> 109     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NULL_NATIVE_HANDLE = 0;
<a id="L110" name="L110"></a> 110 
<div class="comment">
     /* Windows security masks */</div>
<a id="L112" name="L112"></a> 112     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DELETE = 0x10000;
<a id="L113" name="L113"></a> 113     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_QUERY_VALUE = 1;
<a id="L114" name="L114"></a> 114     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_SET_VALUE = 2;
<a id="L115" name="L115"></a> 115     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_CREATE_SUB_KEY = 4;
<a id="L116" name="L116"></a> 116     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_ENUMERATE_SUB_KEYS = 8;
<a id="L117" name="L117"></a> 117     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_READ = 0x20019;
<a id="L118" name="L118"></a> 118     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_WRITE = 0x20006;
<a id="L119" name="L119"></a> 119     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> KEY_ALL_ACCESS = 0xf003f;
<a id="L120" name="L120"></a> 120 
<div class="comment">
      Initial time between registry access attempts, in ms. The time is doubled
      after each failing attempt (except the first).</div>
<a id="L125" name="L125"></a> 125     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> INIT_SLEEP_TIME = 50;
<a id="L126" name="L126"></a> 126 
<div class="comment">
      Maximum number of registry access attempts.</div>
<a id="L130" name="L130"></a> 130     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> MAX_ATTEMPTS = 5;
<a id="L131" name="L131"></a> 131 
<div class="comment">
      BackingStore availability flag.</div>
<a id="L135" name="L135"></a> 135     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> isBackingStoreAvailable = <strong class="reserved">true</strong>;
<a id="L136" name="L136"></a> 136 
<div class="comment">
      Java wrapper for Windows registry API RegOpenKey()</div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong>[] <a href="../R/8836.html" title="Multiple referred from 3 places.">WindowsRegOpenKey</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] subKey,
<a id="L141" name="L141"></a> 141                                                   <strong class="reserved">int</strong> securityMask);
<div class="comment">
      Retries RegOpenKey() MAX_ATTEMPTS times before giving up.</div>
<a id="L145" name="L145"></a> 145     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong>[] <a href="../R/8837.html" title="Multiple referred from 4 places.">WindowsRegOpenKey1</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] subKey,
<a id="L146" name="L146"></a> 146                                             <strong class="reserved">int</strong> securityMask) <em class="brace">{</em>
<a id="L147" name="L147"></a> 147         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L140" title="Defined at 140 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey</a>(hKey, subKey, securityMask);
<a id="L148" name="L148"></a> 148         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L150" name="L150"></a> 150         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_FILE_NOT_FOUND) <em class="brace">{</em>
<a id="L151" name="L151"></a> 151             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Trying to recreate Windows registry node " +
<a id="L152" name="L152"></a> 152             <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(subKey) + " at root 0x" +
<a id="L153" name="L153"></a> 153             <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(hKey) + ".");
<a id="L154" name="L154"></a> 154             <em class="comment">// Try recreation</em>
<a id="L155" name="L155"></a> 155             <strong class="reserved">int</strong> <a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a> = <a href="../S/835.html#L184" title="Defined at 184 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCreateKeyEx</a>(hKey, subKey)[NATIVE_HANDLE];
<a id="L156" name="L156"></a> 156             <a href="../S/835.html#L179" title="Defined at 179 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCloseKey</a>(<a href="../D/23942.html" title="Multiple defined in 13 places.">handle</a>);
<a id="L157" name="L157"></a> 157             <strong class="reserved">return</strong> <a href="../S/835.html#L140" title="Defined at 140 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey</a>(hKey, subKey, securityMask);
<a id="L158" name="L158"></a> 158         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_ACCESS_DENIED) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L160" name="L160"></a> 160             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L161" name="L161"></a> 161                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L162" name="L162"></a> 162                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L163" name="L163"></a> 163                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L164" name="L164"></a> 164                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L165" name="L165"></a> 165                 <em class="brace">}</em>
<a id="L166" name="L166"></a> 166                 sleepTime *= 2;
<a id="L167" name="L167"></a> 167                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L140" title="Defined at 140 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey</a>(hKey, subKey, securityMask);
<a id="L168" name="L168"></a> 168                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L169" name="L169"></a> 169                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L170" name="L170"></a> 170                 <em class="brace">}</em>
<a id="L171" name="L171"></a> 171             <em class="brace">}</em>
<a id="L172" name="L172"></a> 172         <em class="brace">}</em>
<a id="L173" name="L173"></a> 173         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L174" name="L174"></a> 174     <em class="brace">}</em>
<a id="L175" name="L175"></a> 175 
<div class="comment">
      Java wrapper for Windows registry API RegCloseKey()</div>
<a id="L179" name="L179"></a> 179     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../R/8825.html" title="Multiple referred from 2 places.">WindowsRegCloseKey</a>(<strong class="reserved">int</strong> hKey);
<a id="L180" name="L180"></a> 180 
<div class="comment">
      Java wrapper for Windows registry API RegCreateKeyEx()</div>
<a id="L184" name="L184"></a> 184     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong>[] <a href="../R/8826.html" title="Multiple referred from 3 places.">WindowsRegCreateKeyEx</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] subKey);
<a id="L185" name="L185"></a> 185 
<div class="comment">
      Retries RegCreateKeyEx() MAX_ATTEMPTS times before giving up.</div>
<a id="L189" name="L189"></a> 189     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong>[] <a href="../R/8827.html" title="Multiple referred from 2 places.">WindowsRegCreateKeyEx1</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] subKey) <em class="brace">{</em>
<a id="L190" name="L190"></a> 190         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L184" title="Defined at 184 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCreateKeyEx</a>(hKey, subKey);
<a id="L191" name="L191"></a> 191         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L192" name="L192"></a> 192             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L193" name="L193"></a> 193         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L194" name="L194"></a> 194             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L195" name="L195"></a> 195             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L196" name="L196"></a> 196                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L197" name="L197"></a> 197                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L198" name="L198"></a> 198                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L200" name="L200"></a> 200                 <em class="brace">}</em>
<a id="L201" name="L201"></a> 201                 sleepTime *= 2;
<a id="L202" name="L202"></a> 202                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L184" title="Defined at 184 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCreateKeyEx</a>(hKey, subKey);
<a id="L203" name="L203"></a> 203                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L204" name="L204"></a> 204                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L205" name="L205"></a> 205                 <em class="brace">}</em>
<a id="L206" name="L206"></a> 206             <em class="brace">}</em>
<a id="L207" name="L207"></a> 207         <em class="brace">}</em>
<a id="L208" name="L208"></a> 208         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L209" name="L209"></a> 209     <em class="brace">}</em>
<div class="comment">
      Java wrapper for Windows registry API RegDeleteKey()</div>
<a id="L213" name="L213"></a> 213     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../S/835.html#L869" title="Referred from 869 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegDeleteKey</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] subKey);
<a id="L214" name="L214"></a> 214 
<div class="comment">
      Java wrapper for Windows registry API RegFlushKey()</div>
<a id="L218" name="L218"></a> 218     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../R/8834.html" title="Multiple referred from 2 places.">WindowsRegFlushKey</a>(<strong class="reserved">int</strong> hKey);
<a id="L219" name="L219"></a> 219 
<div class="comment">
      Retries RegFlushKey() MAX_ATTEMPTS times before giving up.</div>
<a id="L223" name="L223"></a> 223     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../S/835.html#L815" title="Referred from 815 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegFlushKey1</a>(<strong class="reserved">int</strong> hKey) <em class="brace">{</em>
<a id="L224" name="L224"></a> 224         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L218" title="Defined at 218 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegFlushKey</a>(hKey);
<a id="L225" name="L225"></a> 225         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L226" name="L226"></a> 226             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L227" name="L227"></a> 227         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L228" name="L228"></a> 228             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L229" name="L229"></a> 229             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L230" name="L230"></a> 230                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L231" name="L231"></a> 231                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L232" name="L232"></a> 232                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L233" name="L233"></a> 233                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L234" name="L234"></a> 234                 <em class="brace">}</em>
<a id="L235" name="L235"></a> 235                 sleepTime *= 2;
<a id="L236" name="L236"></a> 236                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L218" title="Defined at 218 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegFlushKey</a>(hKey);
<a id="L237" name="L237"></a> 237                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L238" name="L238"></a> 238                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L239" name="L239"></a> 239                 <em class="brace">}</em>
<a id="L240" name="L240"></a> 240             <em class="brace">}</em>
<a id="L241" name="L241"></a> 241         <em class="brace">}</em>
<a id="L242" name="L242"></a> 242         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L243" name="L243"></a> 243     <em class="brace">}</em>
<a id="L244" name="L244"></a> 244 
<div class="comment">
      Java wrapper for Windows registry API RegQueryValueEx()</div>
<a id="L248" name="L248"></a> 248     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">byte</strong>[] <a href="../S/835.html#L649" title="Referred from 649 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegQueryValueEx</a>(<strong class="reserved">int</strong> hKey,
<a id="L249" name="L249"></a> 249                                                         <strong class="reserved">byte</strong>[] valueName);
<div class="comment">
      Java wrapper for Windows registry API RegSetValueEx()</div>
<a id="L253" name="L253"></a> 253     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../R/8841.html" title="Multiple referred from 2 places.">WindowsRegSetValueEx</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] valueName,
<a id="L254" name="L254"></a> 254                                                    <strong class="reserved">byte</strong>[] <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<div class="comment">
      Retries RegSetValueEx() MAX_ATTEMPTS times before giving up.</div>
<a id="L258" name="L258"></a> 258     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../S/835.html#L622" title="Referred from 622 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegSetValueEx1</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] valueName,
<a id="L259" name="L259"></a> 259                                              <strong class="reserved">byte</strong>[] <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L260" name="L260"></a> 260         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L253" title="Defined at 253 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegSetValueEx</a>(hKey, valueName, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L261" name="L261"></a> 261         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L262" name="L262"></a> 262             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L263" name="L263"></a> 263         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L264" name="L264"></a> 264             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L265" name="L265"></a> 265             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L266" name="L266"></a> 266                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L267" name="L267"></a> 267                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L268" name="L268"></a> 268                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L270" name="L270"></a> 270                 <em class="brace">}</em>
<a id="L271" name="L271"></a> 271                 sleepTime *= 2;
<a id="L272" name="L272"></a> 272                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L253" title="Defined at 253 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegSetValueEx</a>(hKey, valueName, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L273" name="L273"></a> 273                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L274" name="L274"></a> 274                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L275" name="L275"></a> 275                 <em class="brace">}</em>
<a id="L276" name="L276"></a> 276             <em class="brace">}</em>
<a id="L277" name="L277"></a> 277         <em class="brace">}</em>
<a id="L278" name="L278"></a> 278         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L279" name="L279"></a> 279     <em class="brace">}</em>
<a id="L280" name="L280"></a> 280 
<div class="comment">
      Java wrapper for Windows registry API RegDeleteValue()</div>
<a id="L284" name="L284"></a> 284     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../S/835.html#L672" title="Referred from 672 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegDeleteValue</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">byte</strong>[] valueName);
<a id="L285" name="L285"></a> 285 
<div class="comment">
      Java wrapper for Windows registry API RegQueryInfoKey()</div>
<a id="L289" name="L289"></a> 289     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong>[] <a href="../R/8838.html" title="Multiple referred from 2 places.">WindowsRegQueryInfoKey</a>(<strong class="reserved">int</strong> hKey);
<a id="L290" name="L290"></a> 290 
<div class="comment">
      Retries RegQueryInfoKey() MAX_ATTEMPTS times before giving up.</div>
<a id="L294" name="L294"></a> 294     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong>[] <a href="../R/8839.html" title="Multiple referred from 2 places.">WindowsRegQueryInfoKey1</a>(<strong class="reserved">int</strong> hKey) <em class="brace">{</em>
<a id="L295" name="L295"></a> 295         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L289" title="Defined at 289 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegQueryInfoKey</a>(hKey);
<a id="L296" name="L296"></a> 296         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L297" name="L297"></a> 297             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L298" name="L298"></a> 298         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L299" name="L299"></a> 299             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L300" name="L300"></a> 300             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L302" name="L302"></a> 302                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L303" name="L303"></a> 303                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L304" name="L304"></a> 304                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L305" name="L305"></a> 305                 <em class="brace">}</em>
<a id="L306" name="L306"></a> 306                 sleepTime *= 2;
<a id="L307" name="L307"></a> 307                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L289" title="Defined at 289 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegQueryInfoKey</a>(hKey);
<a id="L308" name="L308"></a> 308                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_SUCCESS) <em class="brace">{</em>
<a id="L309" name="L309"></a> 309                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L310" name="L310"></a> 310                 <em class="brace">}</em>
<a id="L311" name="L311"></a> 311             <em class="brace">}</em>
<a id="L312" name="L312"></a> 312         <em class="brace">}</em>
<a id="L313" name="L313"></a> 313         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L314" name="L314"></a> 314     <em class="brace">}</em>
<a id="L315" name="L315"></a> 315 
<div class="comment">
      Java wrapper for Windows registry API RegEnumKeyEx()</div>
<a id="L319" name="L319"></a> 319     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">byte</strong>[] <a href="../R/8830.html" title="Multiple referred from 2 places.">WindowsRegEnumKeyEx</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">int</strong> subKeyIndex,
<a id="L320" name="L320"></a> 320                                                      <strong class="reserved">int</strong> maxKeyLength);
<a id="L321" name="L321"></a> 321 
<div class="comment">
      Retries RegEnumKeyEx() MAX_ATTEMPTS times before giving up.</div>
<a id="L325" name="L325"></a> 325     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong>[] <a href="../S/835.html#L774" title="Referred from 774 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumKeyEx1</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">int</strong> subKeyIndex,
<a id="L326" name="L326"></a> 326                                                <strong class="reserved">int</strong> maxKeyLength) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327         <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L319" title="Defined at 319 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumKeyEx</a>(hKey, subKeyIndex, maxKeyLength);
<a id="L328" name="L328"></a> 328         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L329" name="L329"></a> 329             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L330" name="L330"></a> 330         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L331" name="L331"></a> 331             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L332" name="L332"></a> 332             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L333" name="L333"></a> 333                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L334" name="L334"></a> 334                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L335" name="L335"></a> 335                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L337" name="L337"></a> 337                 <em class="brace">}</em>
<a id="L338" name="L338"></a> 338                 sleepTime *= 2;
<a id="L339" name="L339"></a> 339                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L319" title="Defined at 319 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumKeyEx</a>(hKey, subKeyIndex, maxKeyLength);
<a id="L340" name="L340"></a> 340                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L341" name="L341"></a> 341                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L342" name="L342"></a> 342                 <em class="brace">}</em>
<a id="L343" name="L343"></a> 343             <em class="brace">}</em>
<a id="L344" name="L344"></a> 344         <em class="brace">}</em>
<a id="L345" name="L345"></a> 345         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L346" name="L346"></a> 346     <em class="brace">}</em>
<a id="L347" name="L347"></a> 347 
<div class="comment">
      Java wrapper for Windows registry API RegEnumValue()</div>
<a id="L351" name="L351"></a> 351     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">byte</strong>[] <a href="../R/8832.html" title="Multiple referred from 2 places.">WindowsRegEnumValue</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">int</strong> valueIndex,
<a id="L352" name="L352"></a> 352                                                      <strong class="reserved">int</strong> maxValueNameLength);
<div class="comment">
      Retries RegEnumValueEx() MAX_ATTEMPTS times before giving up.</div>
<a id="L356" name="L356"></a> 356     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong>[] <a href="../S/835.html#L721" title="Referred from 721 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumValue1</a>(<strong class="reserved">int</strong> hKey, <strong class="reserved">int</strong> valueIndex,
<a id="L357" name="L357"></a> 357                                                <strong class="reserved">int</strong> maxValueNameLength) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358         <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L351" title="Defined at 351 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumValue</a>(hKey, valueIndex,
<a id="L359" name="L359"></a> 359                                             maxValueNameLength);
<a id="L360" name="L360"></a> 360         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L361" name="L361"></a> 361             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L362" name="L362"></a> 362         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L363" name="L363"></a> 363             <strong class="reserved">long</strong> sleepTime = INIT_SLEEP_TIME;
<a id="L364" name="L364"></a> 364             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; MAX_ATTEMPTS; i++) <em class="brace">{</em>
<a id="L365" name="L365"></a> 365                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L366" name="L366"></a> 366                     <a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<a href="../D/34632.html" title="Multiple defined in 4 places.">sleep</a>(sleepTime);
<a id="L367" name="L367"></a> 367                 <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> e) <em class="brace">{</em>
<a id="L368" name="L368"></a> 368                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L369" name="L369"></a> 369                 <em class="brace">}</em>
<a id="L370" name="L370"></a> 370                 sleepTime *= 2;
<a id="L371" name="L371"></a> 371                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L351" title="Defined at 351 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumValue</a>(hKey, valueIndex,
<a id="L372" name="L372"></a> 372                                              maxValueNameLength);
<a id="L373" name="L373"></a> 373                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374                     <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L375" name="L375"></a> 375                 <em class="brace">}</em>
<a id="L376" name="L376"></a> 376             <em class="brace">}</em>
<a id="L377" name="L377"></a> 377         <em class="brace">}</em>
<a id="L378" name="L378"></a> 378         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L379" name="L379"></a> 379     <em class="brace">}</em>
<a id="L380" name="L380"></a> 380 
<div class="comment">
      Constructs a <tt>WindowsPreferences</tt> node, creating underlying
      Windows registry node and all its Windows parents, if they are not yet
      created.
      Logs a warning message, if Windows Registry is unavailable.</div>
<a id="L387" name="L387"></a> 387     <strong class="reserved">private</strong> <a href="../S/835.html#L46" title="Defined at 46 in src/java/util/prefs/WindowsPreferences.java.">WindowsPreferences</a>(WindowsPreferences <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388         <strong class="reserved">super</strong>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L389" name="L389"></a> 389         <strong class="reserved">int</strong> parentNativeHandle = <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_CREATE_SUB_KEY, KEY_READ);
<a id="L390" name="L390"></a> 390         <strong class="reserved">if</strong> (parentNativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L391" name="L391"></a> 391             <em class="comment">// if here, openKey failed and logged</em>
<a id="L392" name="L392"></a> 392             isBackingStoreAvailable = <strong class="reserved">false</strong>;
<a id="L393" name="L393"></a> 393             <strong class="reserved">return</strong>;
<a id="L394" name="L394"></a> 394         <em class="brace">}</em>
<a id="L395" name="L395"></a> 395         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> =
<a id="L396" name="L396"></a> 396                <a href="../S/835.html#L189" title="Defined at 189 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCreateKeyEx1</a>(parentNativeHandle, <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>));
<a id="L397" name="L397"></a> 397         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L398" name="L398"></a> 398             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not create windows registry node " +
<a id="L399" name="L399"></a> 399                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L400" name="L400"></a> 400                     " at root 0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L401" name="L401"></a> 401                     ". Windows RegCreateKeyEx(...) returned error code " +
<a id="L402" name="L402"></a> 402                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] + ".");
<a id="L403" name="L403"></a> 403             isBackingStoreAvailable = <strong class="reserved">false</strong>;
<a id="L404" name="L404"></a> 404             <strong class="reserved">return</strong>;
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406         <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a> = (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[DISPOSITION] == REG_CREATED_NEW_KEY);
<a id="L407" name="L407"></a> 407         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(parentNativeHandle);
<a id="L408" name="L408"></a> 408         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[NATIVE_HANDLE]);
<a id="L409" name="L409"></a> 409     <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<div class="comment">
      Constructs a root node creating the underlying
      Windows registry node and all of its parents, if they have not yet been
      created.
      Logs a warning message, if Windows Registry is unavailable.
      @param rootNativeHandle Native handle to one of Windows top level keys.
      @param rootDirectory Path to root directory, as a byte-encoded string.</div>
<a id="L419" name="L419"></a> 419     <strong class="reserved">private</strong>  WindowsPreferences(<strong class="reserved">int</strong> <a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>, <strong class="reserved">byte</strong>[] rootDirectory) <em class="brace">{</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">super</strong>(<strong class="reserved">null</strong>, "");
<a id="L421" name="L421"></a> 421         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> =
<a id="L422" name="L422"></a> 422                 <a href="../S/835.html#L189" title="Defined at 189 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCreateKeyEx1</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>, rootDirectory);
<a id="L423" name="L423"></a> 423         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L424" name="L424"></a> 424             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not open/create prefs root node " +
<a id="L425" name="L425"></a> 425                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L426" name="L426"></a> 426                     " at root 0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L427" name="L427"></a> 427                     ". Windows RegCreateKeyEx(...) returned error code " +
<a id="L428" name="L428"></a> 428                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] + ".");
<a id="L429" name="L429"></a> 429             isBackingStoreAvailable = <strong class="reserved">false</strong>;
<a id="L430" name="L430"></a> 430             <strong class="reserved">return</strong>;
<a id="L431" name="L431"></a> 431         <em class="brace">}</em>
<a id="L432" name="L432"></a> 432         <em class="comment">// Check if a new node</em>
<a id="L433" name="L433"></a> 433         <a href="../D/28045.html" title="Multiple defined in 5 places.">newNode</a> = (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[DISPOSITION] == REG_CREATED_NEW_KEY);
<a id="L434" name="L434"></a> 434         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[NATIVE_HANDLE]);
<a id="L435" name="L435"></a> 435     <em class="brace">}</em>
<a id="L436" name="L436"></a> 436 
<div class="comment">
      Returns Windows absolute path of the current node as a byte array.
      Java "/" separator is transformed into Windows "\".
      @see Preferences#absolutePath()</div>
<a id="L442" name="L442"></a> 442     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] <a href="../R/30499.html" title="Multiple referred from 24 places.">windowsAbsolutePath</a>() <em class="brace">{</em>
<a id="L443" name="L443"></a> 443         <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a> bstream = <strong class="reserved">new</strong> <a href="../S/1448.html#L45" title="Defined at 45 in src/java/io/ByteArrayOutputStream.java.">ByteArrayOutputStream</a>();
<a id="L444" name="L444"></a> 444         bstream.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(WINDOWS_ROOT_PATH, 0, WINDOWS_ROOT_PATH.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>-1);
<a id="L445" name="L445"></a> 445         <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> tokenizer = <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(<a href="../D/10533.html" title="Multiple defined in 2 places.">absolutePath</a>(), "/");
<a id="L446" name="L446"></a> 446         <strong class="reserved">while</strong> (tokenizer.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>()) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447             bstream.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>((<strong class="reserved">byte</strong>)'\\');
<a id="L448" name="L448"></a> 448             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nextName = tokenizer.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>();
<a id="L449" name="L449"></a> 449             <strong class="reserved">byte</strong>[] windowsNextName = <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(nextName);
<a id="L450" name="L450"></a> 450             bstream.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(windowsNextName, 0, windowsNextName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>-1);
<a id="L451" name="L451"></a> 451         <em class="brace">}</em>
<a id="L452" name="L452"></a> 452         bstream.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(0);
<a id="L453" name="L453"></a> 453         <strong class="reserved">return</strong> bstream.<a href="../D/35362.html" title="Multiple defined in 10 places.">toByteArray</a>();
<a id="L454" name="L454"></a> 454     <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Opens current node's underlying Windows registry key using a
      given security mask.
      @param securityMask Windows security mask.
      @return Windows registry key's handle.
      @see #openKey(byte[], int)
      @see #openKey(int, byte[], int)
      @see #closeKey(int)</div>
<a id="L465" name="L465"></a> 465     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/23983.html" title="Multiple referred from 15 places.">openKey</a>(<strong class="reserved">int</strong> securityMask) <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <strong class="reserved">return</strong> <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(securityMask, securityMask);
<a id="L467" name="L467"></a> 467     <em class="brace">}</em>
<a id="L468" name="L468"></a> 468 
<div class="comment">
      Opens current node's underlying Windows registry key using a
      given security mask.
      @param mask1 Preferred Windows security mask.
      @param mask2 Alternate Windows security mask.
      @return Windows registry key's handle.
      @see #openKey(byte[], int)
      @see #openKey(int, byte[], int)
      @see #closeKey(int)</div>
<a id="L479" name="L479"></a> 479     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/23983.html" title="Multiple referred from 15 places.">openKey</a>(<strong class="reserved">int</strong> mask1, <strong class="reserved">int</strong> mask2) <em class="brace">{</em>
<a id="L480" name="L480"></a> 480         <strong class="reserved">return</strong> <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>(), mask1,  mask2);
<a id="L481" name="L481"></a> 481     <em class="brace">}</em>
<a id="L482" name="L482"></a> 482 
<div class="comment">
      Opens Windows registry key at a given absolute path using a given
      security mask.
      @param windowsAbsolutePath Windows absolute path of the
             key as a byte-encoded string.
      @param mask1 Preferred Windows security mask.
      @param mask2 Alternate Windows security mask.
      @return Windows registry key's handle.
      @see #openKey(int)
      @see #openKey(int, byte[],int)
      @see #closeKey(int)</div>
<a id="L495" name="L495"></a> 495     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/23983.html" title="Multiple referred from 15 places.">openKey</a>(<strong class="reserved">byte</strong>[] <a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>, <strong class="reserved">int</strong> mask1, <strong class="reserved">int</strong> mask2) <em class="brace">{</em>
<div class="comment">
  Check if key's path is short enough be opened at once
            otherwise use a path-splitting procedure </div>
<a id="L498" name="L498"></a> 498         <strong class="reserved">if</strong> (<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= MAX_WINDOWS_PATH_LENGTH + 1) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499             <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L145" title="Defined at 145 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey1</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>(),
<a id="L500" name="L500"></a> 500                                               <a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>, mask1);
<a id="L501" name="L501"></a> 501             <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_ACCESS_DENIED &amp;&amp; mask2 != mask1)
<a id="L502" name="L502"></a> 502                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L145" title="Defined at 145 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey1</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>(),
<a id="L503" name="L503"></a> 503                                             <a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>, mask2);
<a id="L504" name="L504"></a> 504 
<a id="L505" name="L505"></a> 505             <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506                 <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not open windows registry node " +
<a id="L507" name="L507"></a> 507                         <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L508" name="L508"></a> 508                         " at root 0x" +
<a id="L509" name="L509"></a> 509                         <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L510" name="L510"></a> 510                         ". Windows RegOpenKey(...) returned error code " +
<a id="L511" name="L511"></a> 511                         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] + ".");
<a id="L512" name="L512"></a> 512                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[NATIVE_HANDLE] = NULL_NATIVE_HANDLE;
<a id="L513" name="L513"></a> 513                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_ACCESS_DENIED) <em class="brace">{</em>
<a id="L514" name="L514"></a> 514                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>(
<a id="L515" name="L515"></a> 515                             "Could not open windows registry node " +
<a id="L516" name="L516"></a> 516                             <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L517" name="L517"></a> 517                             " at root 0x" +
<a id="L518" name="L518"></a> 518                             <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L519" name="L519"></a> 519                             ": Access denied");
<a id="L520" name="L520"></a> 520                 <em class="brace">}</em>
<a id="L521" name="L521"></a> 521             <em class="brace">}</em>
<a id="L522" name="L522"></a> 522             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[NATIVE_HANDLE];
<a id="L523" name="L523"></a> 523         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L524" name="L524"></a> 524             <strong class="reserved">return</strong> <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>(), <a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>, mask1, mask2);
<a id="L525" name="L525"></a> 525         <em class="brace">}</em>
<a id="L526" name="L526"></a> 526     <em class="brace">}</em>
<a id="L527" name="L527"></a> 527 
<div class="comment">
      Opens Windows registry key at a given relative path
      with respect to a given Windows registry key.
      @param windowsAbsolutePath Windows relative path of the
             key as a byte-encoded string.
      @param nativeHandle handle to the base Windows key.
      @param mask1 Preferred Windows security mask.
      @param mask2 Alternate Windows security mask.
      @return Windows registry key's handle.
      @see #openKey(int)
      @see #openKey(byte[],int)
      @see #closeKey(int)</div>
<a id="L541" name="L541"></a> 541     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/23983.html" title="Multiple referred from 15 places.">openKey</a>(<strong class="reserved">int</strong> nativeHandle, <strong class="reserved">byte</strong>[] windowsRelativePath,
<a id="L542" name="L542"></a> 542                         <strong class="reserved">int</strong> mask1, <strong class="reserved">int</strong> mask2) <em class="brace">{</em>
<div class="comment">
     /* If the path is short enough open at once. Otherwise split the path */</div>
<a id="L544" name="L544"></a> 544         <strong class="reserved">if</strong> (windowsRelativePath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= MAX_WINDOWS_PATH_LENGTH + 1 ) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545             <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L145" title="Defined at 145 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey1</a>(nativeHandle,
<a id="L546" name="L546"></a> 546                                               windowsRelativePath, mask1);
<a id="L547" name="L547"></a> 547             <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] == ERROR_ACCESS_DENIED &amp;&amp; mask2 != mask1)
<a id="L548" name="L548"></a> 548                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L145" title="Defined at 145 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegOpenKey1</a>(nativeHandle,
<a id="L549" name="L549"></a> 549                                             windowsRelativePath, mask2);
<a id="L550" name="L550"></a> 550 
<a id="L551" name="L551"></a> 551             <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552                 <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not open windows registry node " +
<a id="L553" name="L553"></a> 553                         <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L554" name="L554"></a> 554                         " at root 0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(nativeHandle) +
<a id="L555" name="L555"></a> 555                         ". Windows RegOpenKey(...) returned error code " +
<a id="L556" name="L556"></a> 556                         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] + ".");
<a id="L557" name="L557"></a> 557                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[NATIVE_HANDLE] = NULL_NATIVE_HANDLE;
<a id="L558" name="L558"></a> 558             <em class="brace">}</em>
<a id="L559" name="L559"></a> 559             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[NATIVE_HANDLE];
<a id="L560" name="L560"></a> 560         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L561" name="L561"></a> 561             <strong class="reserved">int</strong> separatorPosition = -1;
<a id="L562" name="L562"></a> 562             <em class="comment">// Be greedy - open the longest possible path</em>
<a id="L563" name="L563"></a> 563             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = MAX_WINDOWS_PATH_LENGTH; i &gt; 0; i--) <em class="brace">{</em>
<a id="L564" name="L564"></a> 564                 <strong class="reserved">if</strong> (windowsRelativePath[i] == ((<strong class="reserved">byte</strong>)'\\')) <em class="brace">{</em>
<a id="L565" name="L565"></a> 565                     separatorPosition = i;
<a id="L566" name="L566"></a> 566                     <strong class="reserved">break</strong>;
<a id="L567" name="L567"></a> 567                 <em class="brace">}</em>
<a id="L568" name="L568"></a> 568             <em class="brace">}</em>
<a id="L569" name="L569"></a> 569             <em class="comment">// Split the path and do the recursion</em>
<a id="L570" name="L570"></a> 570             <strong class="reserved">byte</strong>[] nextRelativeRoot = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[separatorPosition+1];
<a id="L571" name="L571"></a> 571             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(windowsRelativePath, 0, nextRelativeRoot,0,
<a id="L572" name="L572"></a> 572                                                       separatorPosition);
<a id="L573" name="L573"></a> 573             nextRelativeRoot[separatorPosition] = 0;
<a id="L574" name="L574"></a> 574             <strong class="reserved">byte</strong>[] nextRelativePath = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[windowsRelativePath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> -
<a id="L575" name="L575"></a> 575                                       separatorPosition - 1];
<a id="L576" name="L576"></a> 576             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(windowsRelativePath, separatorPosition+1,
<a id="L577" name="L577"></a> 577                              nextRelativePath, 0, nextRelativePath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L578" name="L578"></a> 578             <strong class="reserved">int</strong> nextNativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(nativeHandle, nextRelativeRoot,
<a id="L579" name="L579"></a> 579                                            mask1, mask2);
<a id="L580" name="L580"></a> 580             <strong class="reserved">if</strong> (nextNativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L581" name="L581"></a> 581                 <strong class="reserved">return</strong> NULL_NATIVE_HANDLE;
<a id="L582" name="L582"></a> 582             <em class="brace">}</em>
<a id="L583" name="L583"></a> 583             <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(nextNativeHandle, nextRelativePath,
<a id="L584" name="L584"></a> 584                                  mask1,mask2);
<a id="L585" name="L585"></a> 585             <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nextNativeHandle);
<a id="L586" name="L586"></a> 586             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L587" name="L587"></a> 587         <em class="brace">}</em>
<a id="L588" name="L588"></a> 588     <em class="brace">}</em>
<a id="L589" name="L589"></a> 589 
<div class="comment">
      Closes Windows registry key.
      Logs a warning if Windows registry is unavailable.
      @param key's Windows registry handle.
      @see #openKey(int)
      @see #openKey(byte[],int)
      @see #openKey(int, byte[],int)</div>
<a id="L598" name="L598"></a> 598     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11598.html" title="Multiple referred from 15 places.">closeKey</a>(<strong class="reserved">int</strong> nativeHandle) <em class="brace">{</em>
<a id="L599" name="L599"></a> 599         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L179" title="Defined at 179 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegCloseKey</a>(nativeHandle);
<a id="L600" name="L600"></a> 600         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L601" name="L601"></a> 601             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not close windows registry node " +
<a id="L602" name="L602"></a> 602                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L603" name="L603"></a> 603                     " at root 0x" +
<a id="L604" name="L604"></a> 604                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L605" name="L605"></a> 605                     ". Windows RegCloseKey(...) returned error code " +
<a id="L606" name="L606"></a> 606                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> + ".");
<a id="L607" name="L607"></a> 607         <em class="brace">}</em>
<a id="L608" name="L608"></a> 608     <em class="brace">}</em>
<a id="L609" name="L609"></a> 609 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>putSpi()</tt> method.
      Puts name-value pair into the underlying Windows registry node.
      Logs a warning, if Windows registry is unavailable.
      @see #getSpi(String)</div>
<a id="L616" name="L616"></a> 616     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L251" title="Referred from 251 in src/java/util/prefs/AbstractPreferences.java.">putSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> javaName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617         <strong class="reserved">int</strong> nativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_SET_VALUE);
<a id="L618" name="L618"></a> 618         <strong class="reserved">if</strong> (nativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L619" name="L619"></a> 619             isBackingStoreAvailable = <strong class="reserved">false</strong>;
<a id="L620" name="L620"></a> 620             <strong class="reserved">return</strong>;
<a id="L621" name="L621"></a> 621         <em class="brace">}</em>
<a id="L622" name="L622"></a> 622         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L258" title="Defined at 258 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegSetValueEx1</a>(nativeHandle,
<a id="L623" name="L623"></a> 623                 <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(javaName), <a href="../S/835.html#L1052" title="Defined at 1052 in src/java/util/prefs/WindowsPreferences.java.">toWindowsValueString</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>));
<a id="L624" name="L624"></a> 624         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L625" name="L625"></a> 625             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not assign value to key " +
<a id="L626" name="L626"></a> 626                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(javaName)) +
<a id="L627" name="L627"></a> 627                     " at Windows registry node " +
<a id="L628" name="L628"></a> 628                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L629" name="L629"></a> 629                     " at root 0x" +
<a id="L630" name="L630"></a> 630                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L631" name="L631"></a> 631                     ". Windows RegSetValueEx(...) returned error code " +
<a id="L632" name="L632"></a> 632                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> + ".");
<a id="L633" name="L633"></a> 633             isBackingStoreAvailable = <strong class="reserved">false</strong>;
<a id="L634" name="L634"></a> 634         <em class="brace">}</em>
<a id="L635" name="L635"></a> 635         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L636" name="L636"></a> 636     <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>getSpi()</tt> method.
      Gets a string value from the underlying Windows registry node.
      Logs a warning, if Windows registry is unavailable.
      @see #putSpi(String, String)</div>
<a id="L644" name="L644"></a> 644     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/839.html#L287" title="Referred from 287 in src/java/util/prefs/AbstractPreferences.java.">getSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> javaName) <em class="brace">{</em>
<a id="L645" name="L645"></a> 645     <strong class="reserved">int</strong> nativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_QUERY_VALUE);
<a id="L646" name="L646"></a> 646     <strong class="reserved">if</strong> (nativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L647" name="L647"></a> 647         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L648" name="L648"></a> 648     <em class="brace">}</em>
<a id="L649" name="L649"></a> 649     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> resultObject =  <a href="../S/835.html#L248" title="Defined at 248 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegQueryValueEx</a>(nativeHandle,
<a id="L650" name="L650"></a> 650                                                   <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(javaName));
<a id="L651" name="L651"></a> 651     <strong class="reserved">if</strong> (resultObject == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L652" name="L652"></a> 652         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L653" name="L653"></a> 653         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L654" name="L654"></a> 654     <em class="brace">}</em>
<a id="L655" name="L655"></a> 655     <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L656" name="L656"></a> 656     <strong class="reserved">return</strong> <a href="../S/835.html#L1006" title="Defined at 1006 in src/java/util/prefs/WindowsPreferences.java.">toJavaValueString</a>((<strong class="reserved">byte</strong>[]) resultObject);
<a id="L657" name="L657"></a> 657     <em class="brace">}</em>
<a id="L658" name="L658"></a> 658 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>removeSpi()</tt> method.
      Deletes a string name-value pair from the underlying Windows registry
      node, if this value still exists.
      Logs a warning, if Windows registry is unavailable or key has already
      been deleted.</div>
<a id="L666" name="L666"></a> 666     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L316" title="Referred from 316 in src/java/util/prefs/AbstractPreferences.java.">removeSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667         <strong class="reserved">int</strong> nativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_SET_VALUE);
<a id="L668" name="L668"></a> 668         <strong class="reserved">if</strong> (nativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L669" name="L669"></a> 669         <strong class="reserved">return</strong>;
<a id="L670" name="L670"></a> 670         <em class="brace">}</em>
<a id="L671" name="L671"></a> 671         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> =
<a id="L672" name="L672"></a> 672             <a href="../S/835.html#L284" title="Defined at 284 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegDeleteValue</a>(nativeHandle, <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>));
<a id="L673" name="L673"></a> 673         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != ERROR_SUCCESS &amp;&amp; <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != ERROR_FILE_NOT_FOUND) <em class="brace">{</em>
<a id="L674" name="L674"></a> 674             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>("Could not delete windows registry value " +
<a id="L675" name="L675"></a> 675                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) + "\\" +
<a id="L676" name="L676"></a> 676                     <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(<a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>) + " at root 0x" +
<a id="L677" name="L677"></a> 677                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L678" name="L678"></a> 678                     ". Windows RegDeleteValue(...) returned error code " +
<a id="L679" name="L679"></a> 679                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> + ".");
<a id="L680" name="L680"></a> 680             isBackingStoreAvailable = <strong class="reserved">false</strong>;
<a id="L681" name="L681"></a> 681         <em class="brace">}</em>
<a id="L682" name="L682"></a> 682         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L683" name="L683"></a> 683     <em class="brace">}</em>
<a id="L684" name="L684"></a> 684 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>keysSpi()</tt> method.
      Gets value names from the underlying Windows registry node.
      Throws a BackingStoreException and logs a warning, if
      Windows registry is unavailable.</div>
<a id="L691" name="L691"></a> 691     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../S/839.html#L688" title="Referred from 688 in src/java/util/prefs/AbstractPreferences.java.">keysSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a><em class="brace">{</em>
<a id="L692" name="L692"></a> 692         <em class="comment">// Find out the number of values</em>
<a id="L693" name="L693"></a> 693         <strong class="reserved">int</strong> nativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_QUERY_VALUE);
<a id="L694" name="L694"></a> 694         <strong class="reserved">if</strong> (nativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(
<a id="L696" name="L696"></a> 696                     "Could not open windows registry node " +
<a id="L697" name="L697"></a> 697                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L698" name="L698"></a> 698                     " at root 0x" +
<a id="L699" name="L699"></a> 699                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) + ".");
<a id="L700" name="L700"></a> 700         <em class="brace">}</em>
<a id="L701" name="L701"></a> 701         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> =  <a href="../S/835.html#L294" title="Defined at 294 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegQueryInfoKey1</a>(nativeHandle);
<a id="L702" name="L702"></a> 702         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = "Could not query windows registry node " +
<a id="L704" name="L704"></a> 704                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L705" name="L705"></a> 705                     " at root 0x" +
<a id="L706" name="L706"></a> 706                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L707" name="L707"></a> 707                     ". Windows RegQueryInfoKeyEx(...) returned error code " +
<a id="L708" name="L708"></a> 708                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] + ".";
<a id="L709" name="L709"></a> 709             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L710" name="L710"></a> 710             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L711" name="L711"></a> 711         <em class="brace">}</em>
<a id="L712" name="L712"></a> 712         <strong class="reserved">int</strong> maxValueNameLength = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[MAX_VALUE_NAME_LENGTH];
<a id="L713" name="L713"></a> 713         <strong class="reserved">int</strong> valuesNumber = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[VALUES_NUMBER];
<a id="L714" name="L714"></a> 714         <strong class="reserved">if</strong> (valuesNumber == 0) <em class="brace">{</em>
<a id="L715" name="L715"></a> 715             <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L716" name="L716"></a> 716             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[0];
<a id="L717" name="L717"></a> 717         <em class="brace">}</em>
<a id="L718" name="L718"></a> 718         <em class="comment">// Get the values</em>
<a id="L719" name="L719"></a> 719         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] valueNames = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[valuesNumber];
<a id="L720" name="L720"></a> 720         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; valuesNumber; i++) <em class="brace">{</em>
<a id="L721" name="L721"></a> 721             <strong class="reserved">byte</strong>[] windowsName = <a href="../S/835.html#L356" title="Defined at 356 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumValue1</a>(nativeHandle, i,
<a id="L722" name="L722"></a> 722                                                       maxValueNameLength+1);
<a id="L723" name="L723"></a> 723             <strong class="reserved">if</strong> (windowsName == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L724" name="L724"></a> 724                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> =
<a id="L725" name="L725"></a> 725                     "Could not enumerate value #" + i + "  of windows node " +
<a id="L726" name="L726"></a> 726                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) + " at root 0x" +
<a id="L727" name="L727"></a> 727                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) + ".";
<a id="L728" name="L728"></a> 728                 <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L729" name="L729"></a> 729                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L730" name="L730"></a> 730             <em class="brace">}</em>
<a id="L731" name="L731"></a> 731             valueNames[i] = <a href="../D/35424.html" title="Multiple defined in 3 places.">toJavaName</a>(windowsName);
<a id="L732" name="L732"></a> 732         <em class="brace">}</em>
<a id="L733" name="L733"></a> 733         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L734" name="L734"></a> 734         <strong class="reserved">return</strong> valueNames;
<a id="L735" name="L735"></a> 735     <em class="brace">}</em>
<a id="L736" name="L736"></a> 736 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>childrenNamesSpi()</tt> method.
      Calls Windows registry to retrive children of this node.
      Throws a BackingStoreException and logs a warning message,
      if Windows registry is not available.</div>
<a id="L743" name="L743"></a> 743     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/11436.html" title="Multiple referred from 2 places.">childrenNamesSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L744" name="L744"></a> 744         <em class="comment">// Open key</em>
<a id="L745" name="L745"></a> 745         <strong class="reserved">int</strong> nativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_ENUMERATE_SUB_KEYS | KEY_QUERY_VALUE);
<a id="L746" name="L746"></a> 746         <strong class="reserved">if</strong> (nativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L747" name="L747"></a> 747             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(
<a id="L748" name="L748"></a> 748                     "Could not open windows registry node " +
<a id="L749" name="L749"></a> 749                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L750" name="L750"></a> 750                     " at root 0x" +
<a id="L751" name="L751"></a> 751                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) + ".");
<a id="L752" name="L752"></a> 752         <em class="brace">}</em>
<a id="L753" name="L753"></a> 753         <em class="comment">// Get number of children</em>
<a id="L754" name="L754"></a> 754         <strong class="reserved">int</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> =  <a href="../S/835.html#L294" title="Defined at 294 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegQueryInfoKey1</a>(nativeHandle);
<a id="L755" name="L755"></a> 755         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L756" name="L756"></a> 756             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = "Could not query windows registry node " +
<a id="L757" name="L757"></a> 757                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L758" name="L758"></a> 758                     " at root 0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L759" name="L759"></a> 759                     ". Windows RegQueryInfoKeyEx(...) returned error code " +
<a id="L760" name="L760"></a> 760                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[ERROR_CODE] + ".";
<a id="L761" name="L761"></a> 761             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L762" name="L762"></a> 762             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L763" name="L763"></a> 763         <em class="brace">}</em>
<a id="L764" name="L764"></a> 764         <strong class="reserved">int</strong> maxKeyLength = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[MAX_KEY_LENGTH];
<a id="L765" name="L765"></a> 765         <strong class="reserved">int</strong> subKeysNumber = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[SUBKEYS_NUMBER];
<a id="L766" name="L766"></a> 766         <strong class="reserved">if</strong> (subKeysNumber == 0) <em class="brace">{</em>
<a id="L767" name="L767"></a> 767             <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L768" name="L768"></a> 768             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[0];
<a id="L769" name="L769"></a> 769         <em class="brace">}</em>
<a id="L770" name="L770"></a> 770         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] subkeys = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[subKeysNumber];
<a id="L771" name="L771"></a> 771         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a> = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[subKeysNumber];
<a id="L772" name="L772"></a> 772         <em class="comment">// Get children</em>
<a id="L773" name="L773"></a> 773         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; subKeysNumber; i++) <em class="brace">{</em>
<a id="L774" name="L774"></a> 774             <strong class="reserved">byte</strong>[] windowsName = <a href="../S/835.html#L325" title="Defined at 325 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegEnumKeyEx1</a>(nativeHandle, i,
<a id="L775" name="L775"></a> 775                                                       maxKeyLength+1);
<a id="L776" name="L776"></a> 776             <strong class="reserved">if</strong> (windowsName == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L777" name="L777"></a> 777                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> =
<a id="L778" name="L778"></a> 778                     "Could not enumerate key #" + i + "  of windows node " +
<a id="L779" name="L779"></a> 779                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) + " at root 0x" +
<a id="L780" name="L780"></a> 780                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) + ". ";
<a id="L781" name="L781"></a> 781                 <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L782" name="L782"></a> 782                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L783" name="L783"></a> 783             <em class="brace">}</em>
<a id="L784" name="L784"></a> 784             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> javaName = <a href="../D/35424.html" title="Multiple defined in 3 places.">toJavaName</a>(windowsName);
<a id="L785" name="L785"></a> 785             <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>[i] = javaName;
<a id="L786" name="L786"></a> 786         <em class="brace">}</em>
<a id="L787" name="L787"></a> 787         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L788" name="L788"></a> 788         <strong class="reserved">return</strong> <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>;
<a id="L789" name="L789"></a> 789     <em class="brace">}</em>
<a id="L790" name="L790"></a> 790 
<div class="comment">
      Implements <tt>Preferences</tt> <tt>flush()</tt> method.
      Flushes Windows registry changes to disk.
      Throws a BackingStoreException and logs a warning message if Windows
      registry is not available.</div>
<a id="L797" name="L797"></a> 797     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14697.html" title="Multiple referred from 199 places.">flush</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a><em class="brace">{</em>
<a id="L798" name="L798"></a> 798 
<a id="L799" name="L799"></a> 799         <strong class="reserved">if</strong> (<a href="../S/839.html#L1436" title="Defined at 1436 in src/java/util/prefs/AbstractPreferences.java.">isRemoved</a>()) <em class="brace">{</em>
<a id="L800" name="L800"></a> 800             <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L801" name="L801"></a> 801             <strong class="reserved">return</strong>;
<a id="L802" name="L802"></a> 802         <em class="brace">}</em>
<a id="L803" name="L803"></a> 803         <strong class="reserved">if</strong> (!isBackingStoreAvailable) <em class="brace">{</em>
<a id="L804" name="L804"></a> 804             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(
<a id="L805" name="L805"></a> 805                     "flush(): Backing store not available.");
<a id="L806" name="L806"></a> 806         <em class="brace">}</em>
<a id="L807" name="L807"></a> 807         <strong class="reserved">int</strong> nativeHandle = <a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(KEY_READ);
<a id="L808" name="L808"></a> 808         <strong class="reserved">if</strong> (nativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(
<a id="L810" name="L810"></a> 810                     "Could not open windows registry node " +
<a id="L811" name="L811"></a> 811                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L812" name="L812"></a> 812                     " at root 0x" +
<a id="L813" name="L813"></a> 813                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) + ".");
<a id="L814" name="L814"></a> 814         <em class="brace">}</em>
<a id="L815" name="L815"></a> 815         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/835.html#L223" title="Defined at 223 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegFlushKey1</a>(nativeHandle);
<a id="L816" name="L816"></a> 816         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L817" name="L817"></a> 817             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = "Could not flush windows registry node " +
<a id="L818" name="L818"></a> 818                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L819" name="L819"></a> 819                     " at root 0x" +
<a id="L820" name="L820"></a> 820                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L821" name="L821"></a> 821                     ". Windows RegFlushKey(...) returned error code " +
<a id="L822" name="L822"></a> 822                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> + ".";
<a id="L823" name="L823"></a> 823             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L824" name="L824"></a> 824             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L825" name="L825"></a> 825         <em class="brace">}</em>
<a id="L826" name="L826"></a> 826         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(nativeHandle);
<a id="L827" name="L827"></a> 827     <em class="brace">}</em>
<a id="L828" name="L828"></a> 828 
<a id="L829" name="L829"></a> 829 
<div class="comment">
      Implements <tt>Preferences</tt> <tt>sync()</tt> method.
      Flushes Windows registry changes to disk. Equivalent to flush().
      @see flush()</div>
<a id="L835" name="L835"></a> 835     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29068.html" title="Multiple referred from 150 places.">sync</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a><em class="brace">{</em>
<a id="L836" name="L836"></a> 836         <strong class="reserved">if</strong> (<a href="../S/839.html#L1436" title="Defined at 1436 in src/java/util/prefs/AbstractPreferences.java.">isRemoved</a>())
<a id="L837" name="L837"></a> 837             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a>("Node has been removed");
<a id="L838" name="L838"></a> 838         <a href="../D/16474.html" title="Multiple defined in 60 places.">flush</a>();
<a id="L839" name="L839"></a> 839     <em class="brace">}</em>
<a id="L840" name="L840"></a> 840 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>childSpi()</tt> method.
      Constructs a child node with a
      given name and creates its underlying Windows registry node,
      if it does not exist.
      Logs a warning message, if Windows Registry is unavailable.</div>
<a id="L848" name="L848"></a> 848     <strong class="reserved">protected</strong> <a href="../S/839.html#L123" title="Defined at 123 in src/java/util/prefs/AbstractPreferences.java.">AbstractPreferences</a> <a href="../R/11431.html" title="Multiple referred from 3 places.">childSpi</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L849" name="L849"></a> 849         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/835.html#L46" title="Defined at 46 in src/java/util/prefs/WindowsPreferences.java.">WindowsPreferences</a>(<strong class="reserved">this</strong>, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L850" name="L850"></a> 850     <em class="brace">}</em>
<a id="L851" name="L851"></a> 851 
<div class="comment">
      Implements <tt>AbstractPreferences</tt> <tt>removeNodeSpi()</tt> method.
      Deletes underlying Windows registry node.
      Throws a BackingStoreException and logs a warning, if Windows registry
      is not available.</div>
<a id="L858" name="L858"></a> 858     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L976" title="Referred from 976 in src/java/util/prefs/AbstractPreferences.java.">removeNodeSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L859" name="L859"></a> 859         <strong class="reserved">int</strong> parentNativeHandle =
<a id="L860" name="L860"></a> 860                 ((<a href="../S/835.html#L46" title="Defined at 46 in src/java/util/prefs/WindowsPreferences.java.">WindowsPreferences</a>)<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>()).<a href="../D/28523.html" title="Multiple defined in 4 places.">openKey</a>(DELETE);
<a id="L861" name="L861"></a> 861         <strong class="reserved">if</strong> (parentNativeHandle == NULL_NATIVE_HANDLE) <em class="brace">{</em>
<a id="L862" name="L862"></a> 862             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(
<a id="L863" name="L863"></a> 863                     "Could not open parent windows registry node of " +
<a id="L864" name="L864"></a> 864                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L865" name="L865"></a> 865                     " at root 0x" +
<a id="L866" name="L866"></a> 866                     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) + ".");
<a id="L867" name="L867"></a> 867         <em class="brace">}</em>
<a id="L868" name="L868"></a> 868         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> =
<a id="L869" name="L869"></a> 869                 <a href="../S/835.html#L213" title="Defined at 213 in src/java/util/prefs/WindowsPreferences.java.">WindowsRegDeleteKey</a>(parentNativeHandle, <a href="../S/835.html#L959" title="Defined at 959 in src/java/util/prefs/WindowsPreferences.java.">toWindowsName</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>()));
<a id="L870" name="L870"></a> 870         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != ERROR_SUCCESS) <em class="brace">{</em>
<a id="L871" name="L871"></a> 871             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a> = "Could not delete windows registry node " +
<a id="L872" name="L872"></a> 872                     <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(<a href="../S/835.html#L442" title="Defined at 442 in src/java/util/prefs/WindowsPreferences.java.">windowsAbsolutePath</a>()) +
<a id="L873" name="L873"></a> 873                     " at root 0x" + <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(<a href="../S/835.html#L1085" title="Defined at 1085 in src/java/util/prefs/WindowsPreferences.java.">rootNativeHandle</a>()) +
<a id="L874" name="L874"></a> 874                     ". Windows RegDeleteKeyEx(...) returned error code " +
<a id="L875" name="L875"></a> 875                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> + ".";
<a id="L876" name="L876"></a> 876             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>().<a href="../D/36831.html" title="Multiple defined in 36 places.">warning</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L877" name="L877"></a> 877             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L878" name="L878"></a> 878         <em class="brace">}</em>
<a id="L879" name="L879"></a> 879         <a href="../S/835.html#L598" title="Defined at 598 in src/java/util/prefs/WindowsPreferences.java.">closeKey</a>(parentNativeHandle);
<a id="L880" name="L880"></a> 880     <em class="brace">}</em>
<a id="L881" name="L881"></a> 881 
<div class="comment">
      Converts value's or node's name from its byte array representation to
      java string. Two encodings, simple and altBase64 are used. See
      {@link #toWindowsName(String) toWindowsName()} for a detailed
      description of encoding conventions.
      @param windowsNameArray Null-terminated byte array.</div>
<a id="L889" name="L889"></a> 889     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29279.html" title="Multiple referred from 5 places.">toJavaName</a>(<strong class="reserved">byte</strong>[] windowsNameArray) <em class="brace">{</em>
<a id="L890" name="L890"></a> 890         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> windowsName = <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(windowsNameArray);
<a id="L891" name="L891"></a> 891         <em class="comment">// check if Alt64</em>
<a id="L892" name="L892"></a> 892         <strong class="reserved">if</strong> ((windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 1) &amp;&amp;
<a id="L893" name="L893"></a> 893                 (windowsName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, 2).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("/!"))) <em class="brace">{</em>
<a id="L894" name="L894"></a> 894             <strong class="reserved">return</strong> <a href="../S/835.html#L927" title="Defined at 927 in src/java/util/prefs/WindowsPreferences.java.">toJavaAlt64Name</a>(windowsName);
<a id="L895" name="L895"></a> 895         <em class="brace">}</em>
<a id="L896" name="L896"></a> 896         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> javaName = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L897" name="L897"></a> 897         <strong class="reserved">char</strong> ch;
<a id="L898" name="L898"></a> 898         <em class="comment">// Decode from simple encoding</em>
<a id="L899" name="L899"></a> 899         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); i++) <em class="brace">{</em>
<a id="L900" name="L900"></a> 900             <strong class="reserved">if</strong> ((ch = windowsName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i)) == '/') <em class="brace">{</em>
<a id="L901" name="L901"></a> 901                 <strong class="reserved">char</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = ' ';
<a id="L902" name="L902"></a> 902                 <strong class="reserved">if</strong> ((windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; i + 1) &amp;&amp;
<a id="L903" name="L903"></a> 903                         ((<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = windowsName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i+1)) &gt;= 'A') &amp;&amp;
<a id="L904" name="L904"></a> 904                         (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> &lt;= 'Z')) <em class="brace">{</em>
<a id="L905" name="L905"></a> 905                     ch = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L906" name="L906"></a> 906                     i++;
<a id="L907" name="L907"></a> 907                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; i + 1) &amp;&amp;
<a id="L908" name="L908"></a> 908                            (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> == '/')) <em class="brace">{</em>
<a id="L909" name="L909"></a> 909                     ch = '\\';
<a id="L910" name="L910"></a> 910                     i++;
<a id="L911" name="L911"></a> 911                 <em class="brace">}</em>
<a id="L912" name="L912"></a> 912             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == '\\') <em class="brace">{</em>
<a id="L913" name="L913"></a> 913                 ch = '/';
<a id="L914" name="L914"></a> 914             <em class="brace">}</em>
<a id="L915" name="L915"></a> 915             javaName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L916" name="L916"></a> 916         <em class="brace">}</em>
<a id="L917" name="L917"></a> 917         <strong class="reserved">return</strong> javaName.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L918" name="L918"></a> 918     <em class="brace">}</em>
<a id="L919" name="L919"></a> 919 
<div class="comment">
      Converts value's or node's name from its Windows representation to java
      string, using altBase64 encoding. See
      {@link #toWindowsName(String) toWindowsName()} for a detailed
      description of encoding conventions.</div>
<a id="L926" name="L926"></a> 926 
<a id="L927" name="L927"></a> 927     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/835.html#L894" title="Referred from 894 in src/java/util/prefs/WindowsPreferences.java.">toJavaAlt64Name</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> windowsName) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928         <strong class="reserved">byte</strong>[] byteBuffer =
<a id="L929" name="L929"></a> 929                 <a href="../D/720.html" title="Multiple defined in 4 places.">Base64</a>.<a href="../S/834.html#L142" title="Defined at 142 in src/java/util/prefs/Base64.java.">altBase64ToByteArray</a>(windowsName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(2));
<a id="L930" name="L930"></a> 930         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L931" name="L931"></a> 931         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; byteBuffer.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L932" name="L932"></a> 932             <strong class="reserved">int</strong> firstbyte = (byteBuffer[i++] &amp; 0xff);
<a id="L933" name="L933"></a> 933             <strong class="reserved">int</strong> secondbyte =  (byteBuffer[i] &amp; 0xff);
<a id="L934" name="L934"></a> 934             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>)((firstbyte &lt;&lt; 8) + secondbyte));
<a id="L935" name="L935"></a> 935         <em class="brace">}</em>
<a id="L936" name="L936"></a> 936         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L937" name="L937"></a> 937     <em class="brace">}</em>
<a id="L938" name="L938"></a> 938 
<div class="comment">
      Converts value's or node's name to its Windows representation
      as a byte-encoded string.
      Two encodings, simple and altBase64 are used.
      <p>
      <i>Simple</i> encoding is used, if java string does not contain
      any characters less, than 0x0020, or greater, than 0x007f.
      Simple encoding adds "/" character to capital letters, i.e.
      "A" is encoded as "/A". Character '\' is encoded as '//',
      '/' is encoded as '\'.
      The constructed string is converted to byte array by truncating the
      highest byte and adding the terminating <tt>null</tt> character.
      </p><p>
      <i>altBase64</i>  encoding is used, if java string does contain at least
      one character less, than 0x0020, or greater, than 0x007f.
      This encoding is marked by setting first two bytes of the
      Windows string to '/!'. The java name is then encoded using
      byteArrayToAltBase64() method from
      Base64 class.</p></div>
<a id="L959" name="L959"></a> 959     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong>[] <a href="../R/29366.html" title="Multiple referred from 8 places.">toWindowsName</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> javaName) <em class="brace">{</em>
<a id="L960" name="L960"></a> 960         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> windowsName = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L961" name="L961"></a> 961         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; javaName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); i++) <em class="brace">{</em>
<a id="L962" name="L962"></a> 962             <strong class="reserved">char</strong> ch = javaName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L963" name="L963"></a> 963             <strong class="reserved">if</strong> ((ch &lt; 0x0020) || (ch &gt; 0x007f)) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964                 <em class="comment">// If a non-trivial character encountered, use altBase64</em>
<a id="L965" name="L965"></a> 965                 <strong class="reserved">return</strong> <a href="../S/835.html#L986" title="Defined at 986 in src/java/util/prefs/WindowsPreferences.java.">toWindowsAlt64Name</a>(javaName);
<a id="L966" name="L966"></a> 966             <em class="brace">}</em>
<a id="L967" name="L967"></a> 967             <strong class="reserved">if</strong> (ch == '\\') <em class="brace">{</em>
<a id="L968" name="L968"></a> 968                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("//");
<a id="L969" name="L969"></a> 969             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == '/') <em class="brace">{</em>
<a id="L970" name="L970"></a> 970                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('\\');
<a id="L971" name="L971"></a> 971             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((ch &gt;= 'A') &amp;&amp; (ch &lt;='Z')) <em class="brace">{</em>
<a id="L972" name="L972"></a> 972                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('/').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L973" name="L973"></a> 973             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L974" name="L974"></a> 974                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L975" name="L975"></a> 975             <em class="brace">}</em>
<a id="L976" name="L976"></a> 976         <em class="brace">}</em>
<a id="L977" name="L977"></a> 977         <strong class="reserved">return</strong> <a href="../S/835.html#L1094" title="Defined at 1094 in src/java/util/prefs/WindowsPreferences.java.">stringToByteArray</a>(windowsName.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L978" name="L978"></a> 978     <em class="brace">}</em>
<a id="L979" name="L979"></a> 979 
<div class="comment">
      Converts value's or node's name to its Windows representation
      as a byte-encoded string, using altBase64 encoding. See
      {@link #toWindowsName(String) toWindowsName()} for a detailed
      description of encoding conventions.</div>
<a id="L986" name="L986"></a> 986     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong>[] <a href="../S/835.html#L965" title="Referred from 965 in src/java/util/prefs/WindowsPreferences.java.">toWindowsAlt64Name</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> javaName) <em class="brace">{</em>
<a id="L987" name="L987"></a> 987         <strong class="reserved">byte</strong>[] javaNameArray = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[2*javaName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()];
<a id="L988" name="L988"></a> 988         <em class="comment">// Convert to byte pairs</em>
<a id="L989" name="L989"></a> 989         <strong class="reserved">int</strong> counter = 0;
<a id="L990" name="L990"></a> 990         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; javaName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();i++) <em class="brace">{</em>
<a id="L991" name="L991"></a> 991             <strong class="reserved">int</strong> ch = javaName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L992" name="L992"></a> 992             javaNameArray[counter++] = (<strong class="reserved">byte</strong>)(ch &gt;&gt;&gt; 8);
<a id="L993" name="L993"></a> 993             javaNameArray[counter++] = (<strong class="reserved">byte</strong>)ch;
<a id="L994" name="L994"></a> 994         <em class="brace">}</em>
<a id="L995" name="L995"></a> 995 
<a id="L996" name="L996"></a> 996         <strong class="reserved">return</strong> <a href="../S/835.html#L1094" title="Defined at 1094 in src/java/util/prefs/WindowsPreferences.java.">stringToByteArray</a>("/!" +
<a id="L997" name="L997"></a> 997                 <a href="../D/720.html" title="Multiple defined in 4 places.">Base64</a>.<a href="../S/834.html#L51" title="Defined at 51 in src/java/util/prefs/Base64.java.">byteArrayToAltBase64</a>(javaNameArray));
<a id="L998" name="L998"></a> 998     <em class="brace">}</em>
<a id="L999" name="L999"></a> 999 
<div class="comment">
      Converts value string from its Windows representation
      to java string.  See
      {@link #toWindowsValueString(String) toWindowsValueString()} for the
      description of the encoding algorithm.</div>
<a id="L1006" name="L1006"></a>1006      <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/835.html#L656" title="Referred from 656 in src/java/util/prefs/WindowsPreferences.java.">toJavaValueString</a>(<strong class="reserved">byte</strong>[] windowsNameArray) <em class="brace">{</em>
<a id="L1007" name="L1007"></a>1007         <em class="comment">// Use modified native2ascii algorithm</em>
<a id="L1008" name="L1008"></a>1008         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> windowsName = <a href="../S/835.html#L1106" title="Defined at 1106 in src/java/util/prefs/WindowsPreferences.java.">byteArrayToString</a>(windowsNameArray);
<a id="L1009" name="L1009"></a>1009         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> javaName = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1010" name="L1010"></a>1010         <strong class="reserved">char</strong> ch;
<a id="L1011" name="L1011"></a>1011         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); i++)<em class="brace">{</em>
<a id="L1012" name="L1012"></a>1012             <strong class="reserved">if</strong> ((ch = windowsName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i)) == '/') <em class="brace">{</em>
<a id="L1013" name="L1013"></a>1013                 <strong class="reserved">char</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = ' ';
<a id="L1014" name="L1014"></a>1014 
<a id="L1015" name="L1015"></a>1015                 <strong class="reserved">if</strong> (windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; i + 1 &amp;&amp;
<a id="L1016" name="L1016"></a>1016                         (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = windowsName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i + 1)) == 'u') <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017                     <strong class="reserved">if</strong> (windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt; i + 6) <em class="brace">{</em>
<a id="L1018" name="L1018"></a>1018                         <strong class="reserved">break</strong>;
<a id="L1019" name="L1019"></a>1019                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1020" name="L1020"></a>1020                         ch = (<strong class="reserved">char</strong>)<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(
<a id="L1021" name="L1021"></a>1021                                 windowsName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(i + 2, i + 6), 16);
<a id="L1022" name="L1022"></a>1022                         i += 5;
<a id="L1023" name="L1023"></a>1023                     <em class="brace">}</em>
<a id="L1024" name="L1024"></a>1024                 <em class="brace">}</em> <strong class="reserved">else</strong>
<a id="L1025" name="L1025"></a>1025                 <strong class="reserved">if</strong> ((windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; i + 1) &amp;&amp;
<a id="L1026" name="L1026"></a>1026                         ((windowsName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i+1)) &gt;= 'A') &amp;&amp;
<a id="L1027" name="L1027"></a>1027                         (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> &lt;= 'Z')) <em class="brace">{</em>
<a id="L1028" name="L1028"></a>1028                     ch = <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L1029" name="L1029"></a>1029                     i++;
<a id="L1030" name="L1030"></a>1030                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((windowsName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; i + 1) &amp;&amp;
<a id="L1031" name="L1031"></a>1031                         (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> == '/')) <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032                     ch = '\\';
<a id="L1033" name="L1033"></a>1033                     i++;
<a id="L1034" name="L1034"></a>1034                 <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == '\\') <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036                 ch = '/';
<a id="L1037" name="L1037"></a>1037             <em class="brace">}</em>
<a id="L1038" name="L1038"></a>1038             javaName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L1039" name="L1039"></a>1039         <em class="brace">}</em>
<a id="L1040" name="L1040"></a>1040         <strong class="reserved">return</strong> javaName.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1041" name="L1041"></a>1041     <em class="brace">}</em>
<a id="L1042" name="L1042"></a>1042 
<div class="comment">
      Converts value string to it Windows representation.
      as a byte-encoded string.
      Encoding algorithm adds "/" character to capital letters, i.e.
      "A" is encoded as "/A". Character '\' is encoded as '//',
      '/' is encoded as  '\'.
      Then encoding scheme similar to jdk's native2ascii converter is used
      to convert java string to a byte array of ASCII characters.</div>
<a id="L1052" name="L1052"></a>1052     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong>[] <a href="../S/835.html#L623" title="Referred from 623 in src/java/util/prefs/WindowsPreferences.java.">toWindowsValueString</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> javaName) <em class="brace">{</em>
<a id="L1053" name="L1053"></a>1053         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> windowsName = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1054" name="L1054"></a>1054         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; javaName.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); i++) <em class="brace">{</em>
<a id="L1055" name="L1055"></a>1055             <strong class="reserved">char</strong> ch = javaName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1056" name="L1056"></a>1056             <strong class="reserved">if</strong> ((ch &lt; 0x0020) || (ch &gt; 0x007f))<em class="brace">{</em>
<a id="L1057" name="L1057"></a>1057                 <em class="comment">// write \udddd</em>
<a id="L1058" name="L1058"></a>1058                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("/u");
<a id="L1059" name="L1059"></a>1059                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> hex = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(javaName.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i));
<a id="L1060" name="L1060"></a>1060                 <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> hex4 = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(hex);
<a id="L1061" name="L1061"></a>1061                 hex4.<a href="../D/31410.html" title="Multiple defined in 8 places.">reverse</a>();
<a id="L1062" name="L1062"></a>1062                 <strong class="reserved">int</strong> len = 4 - hex4.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1063" name="L1063"></a>1063                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; len; j++)<em class="brace">{</em>
<a id="L1064" name="L1064"></a>1064                     hex4.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('0');
<a id="L1065" name="L1065"></a>1065                 <em class="brace">}</em>
<a id="L1066" name="L1066"></a>1066                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; 4; j++)<em class="brace">{</em>
<a id="L1067" name="L1067"></a>1067                     windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(hex4.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(3 - j));
<a id="L1068" name="L1068"></a>1068                 <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == '\\') <em class="brace">{</em>
<a id="L1070" name="L1070"></a>1070                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("//");
<a id="L1071" name="L1071"></a>1071             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (ch == '/') <em class="brace">{</em>
<a id="L1072" name="L1072"></a>1072                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('\\');
<a id="L1073" name="L1073"></a>1073             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((ch &gt;= 'A') &amp;&amp; (ch &lt;='Z')) <em class="brace">{</em>
<a id="L1074" name="L1074"></a>1074                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('/').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L1075" name="L1075"></a>1075             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1076" name="L1076"></a>1076                 windowsName.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L1077" name="L1077"></a>1077             <em class="brace">}</em>
<a id="L1078" name="L1078"></a>1078         <em class="brace">}</em>
<a id="L1079" name="L1079"></a>1079         <strong class="reserved">return</strong> <a href="../S/835.html#L1094" title="Defined at 1094 in src/java/util/prefs/WindowsPreferences.java.">stringToByteArray</a>(windowsName.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1080" name="L1080"></a>1080     <em class="brace">}</em>
<a id="L1081" name="L1081"></a>1081 
<div class="comment">
      Returns native handle for the top Windows node for this node.</div>
<a id="L1085" name="L1085"></a>1085     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/26508.html" title="Multiple referred from 22 places.">rootNativeHandle</a>() <em class="brace">{</em>
<a id="L1086" name="L1086"></a>1086         <strong class="reserved">return</strong> (<a href="../D/26425.html" title="Multiple defined in 2 places.">isUserNode</a>()
<a id="L1087" name="L1087"></a>1087                 ? USER_ROOT_NATIVE_HANDLE
<a id="L1088" name="L1088"></a>1088                 : SYSTEM_ROOT_NATIVE_HANDLE);
<a id="L1089" name="L1089"></a>1089     <em class="brace">}</em>
<a id="L1090" name="L1090"></a>1090 
<div class="comment">
      Returns this java string as a null-terminated byte array</div>
<a id="L1094" name="L1094"></a>1094     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong>[] <a href="../R/28950.html" title="Multiple referred from 4 places.">stringToByteArray</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>) <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095         <strong class="reserved">byte</strong>[] <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()+1];
<a id="L1096" name="L1096"></a>1096         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(); i++) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[i] = (<strong class="reserved">byte</strong>) <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1098" name="L1098"></a>1098         <em class="brace">}</em>
<a id="L1099" name="L1099"></a>1099         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>[<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()] = 0;
<a id="L1100" name="L1100"></a>1100         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1101" name="L1101"></a>1101     <em class="brace">}</em>
<a id="L1102" name="L1102"></a>1102 
<div class="comment">
      Converts a null-terminated byte array to java string</div>
<a id="L1106" name="L1106"></a>1106     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/10737.html" title="Multiple referred from 22 places.">byteArrayToString</a>(<strong class="reserved">byte</strong>[] <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>) <em class="brace">{</em>
<a id="L1107" name="L1107"></a>1107         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1108" name="L1108"></a>1108         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1; i++) <em class="brace">{</em>
<a id="L1109" name="L1109"></a>1109             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>)<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[i]);
<a id="L1110" name="L1110"></a>1110         <em class="brace">}</em>
<a id="L1111" name="L1111"></a>1111         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1112" name="L1112"></a>1112     <em class="brace">}</em>
<a id="L1113" name="L1113"></a>1113 
<div class="comment">
     Empty, never used implementation  of AbstractPreferences.flushSpi().</div>
<a id="L1117" name="L1117"></a>1117     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L1396" title="Referred from 1396 in src/java/util/prefs/AbstractPreferences.java.">flushSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1118" name="L1118"></a>1118         <em class="comment">// assert false;</em>
<a id="L1119" name="L1119"></a>1119     <em class="brace">}</em>
<a id="L1120" name="L1120"></a>1120 
<div class="comment">
     Empty, never used implementation  of AbstractPreferences.flushSpi().</div>
<a id="L1124" name="L1124"></a>1124     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/839.html#L1338" title="Referred from 1338 in src/java/util/prefs/AbstractPreferences.java.">syncSpi</a>() <strong class="reserved">throws</strong> <a href="../S/836.html#L38" title="Defined at 38 in src/java/util/prefs/BackingStoreException.java.">BackingStoreException</a> <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125         <em class="comment">// assert false;</em>
<a id="L1126" name="L1126"></a>1126     <em class="brace">}</em>
<a id="L1127" name="L1127"></a>1127 
<a id="L1128" name="L1128"></a>1128     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">synchronized</strong> PlatformLogger <a href="../R/22687.html" title="Multiple referred from 1292 places.">logger</a>() <em class="brace">{</em>
<a id="L1129" name="L1129"></a>1129         <strong class="reserved">if</strong> (<a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1130" name="L1130"></a>1130             <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a> = PlatformLogger.<a href="../D/20268.html" title="Multiple defined in 6 places.">getLogger</a>("java.util.prefs");
<a id="L1131" name="L1131"></a>1131         <em class="brace">}</em>
<a id="L1132" name="L1132"></a>1132         <strong class="reserved">return</strong> <a href="../S/835.html#L1128" title="Defined at 1128 in src/java/util/prefs/WindowsPreferences.java.">logger</a>;
<a id="L1133" name="L1133"></a>1133     <em class="brace">}</em>
<a id="L1134" name="L1134"></a>1134 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L140">[^]</a><a href="#L1128">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/domapi/XPathResultImpl.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L174">[^]</a><a href="#L507">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L174" title="Defined at 174.">getResultType</a></li>
<li><a href="#L185" title="Defined at 185.">getNumberValue</a></li>
<li><a href="#L208" title="Defined at 208.">getStringValue</a></li>
<li><a href="#L226" title="Defined at 226.">getBooleanValue</a></li>
<li><a href="#L250" title="Defined at 250.">getSingleNodeValue</a></li>
<li><a href="#L282" title="Defined at 282.">getInvalidIteratorState</a></li>
<li><a href="#L297" title="Defined at 297.">getSnapshotLength</a></li>
<li><a href="#L322" title="Defined at 322.">iterateNext</a></li>
<li><a href="#L364" title="Defined at 364.">snapshotItem</a></li>
<li><a href="#L391" title="Defined at 391.">isValidType</a></li>
<li><a href="#L410" title="Defined at 410.">handleEvent</a></li>
<li><a href="#L427" title="Defined at 427.">getTypeString</a></li>
<li><a href="#L449" title="Defined at 449.">getTypeFromXObject</a></li>
<li><a href="#L481" title="Defined at 481.">isNamespaceNode</a></li>
<li><a href="#L496" title="Defined at 496.">addEventListener</a></li>
<li><a href="#L507" title="Defined at 507.">removeEventListener</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2002-2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: XPathResultImpl.java,v 1.2.4.1 2005/09/10 04:18:54 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal.domapi;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> javax.xml.transform.TransformerException;
<a id="L28" name="L28"></a>  28 
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPath;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XObject;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.res.XPATHErrorResources;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.res.XPATHMessages;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> org.w3c.dom.DOMException;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> org.w3c.dom.events.Event;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> org.w3c.dom.events.EventListener;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> org.w3c.dom.events.EventTarget;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> org.w3c.dom.traversal.NodeIterator;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> org.w3c.dom.xpath.XPathException;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> org.w3c.dom.xpath.XPathResult;
<a id="L42" name="L42"></a>  42 
<div class="comment">
  The class provides an implementation XPathResult according
  to the DOM L3 XPath Specification, Working Group Note 26 February 2004.
  <p>See also the <a href="http://www.w3.org/TR/2004/NOTE-DOM-Level-3-XPath-20040226">Document Object Model (DOM) Level 3 XPath Specification</a>.</p>
  <p>The <code>XPathResult</code> interface represents the result of the
  evaluation of an XPath expression within the context of a particular
  node. Since evaluation of an XPath expression can result in various
  result types, this object makes it possible to discover and manipulate
  the type and value of the result.</p>
  <p>This implementation wraps an <code>XObject</code>.
  @see com.sun.org.apache.xpath.internal.objects.XObject
  @see org.w3c.dom.xpath.XPathResult
  @xsl.usage internal</p></div>
<a id="L63" name="L63"></a>  63 <strong class="reserved">class</strong> <a href="../R/9147.html" title="Multiple referred from 2 places.">XPathResultImpl</a> <strong class="reserved">implements</strong> <a href="../S/27.html#L56" title="Defined at 56 in src/org/w3c/dom/xpath/XPathResult.java.">XPathResult</a>, <a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a> <em class="brace">{</em>
<a id="L64" name="L64"></a>  64 
<div class="comment">
       The wrapped XObject</div>
<a id="L68" name="L68"></a>  68         <strong class="reserved">final</strong> <strong class="reserved">private</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> m_resultObj;
<a id="L69" name="L69"></a>  69 
<div class="comment">
          The xpath object that wraps the expression used for this result.</div>
<a id="L73" name="L73"></a>  73         <strong class="reserved">final</strong> <strong class="reserved">private</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> m_xpath;
<a id="L74" name="L74"></a>  74 
<div class="comment">
       This the type specified by the user during construction.  Typically
           the constructor will be called by com.sun.org.apache.xpath.internal.XPath.evaluate().</div>
<a id="L79" name="L79"></a>  79         <strong class="reserved">final</strong> <strong class="reserved">private</strong> <strong class="reserved">short</strong> m_resultType;
<a id="L80" name="L80"></a>  80 
<a id="L81" name="L81"></a>  81         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> m_isInvalidIteratorState = <strong class="reserved">false</strong>;
<a id="L82" name="L82"></a>  82 
<div class="comment">
      Only used to attach a mutation event handler when specified
      type is an iterator type.</div>
<a id="L87" name="L87"></a>  87         <strong class="reserved">final</strong> <strong class="reserved">private</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> m_contextNode;
<a id="L88" name="L88"></a>  88 
<div class="comment">
       The iterator, if this is an iterator type.</div>
<a id="L92" name="L92"></a>  92         <strong class="reserved">private</strong> <a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> m_iterator = <strong class="reserved">null</strong>;;
<a id="L93" name="L93"></a>  93 
<div class="comment">
       The list, if this is a snapshot type.</div>
<a id="L97" name="L97"></a>  97         <strong class="reserved">private</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> m_list = <strong class="reserved">null</strong>;
<a id="L98" name="L98"></a>  98 
<a id="L99" name="L99"></a>  99 
<div class="comment">
          Constructor for XPathResultImpl.
      For internal use only.</div>
<a id="L105" name="L105"></a> 105          XPathResultImpl(<strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>, <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> contextNode, <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> xpath) <em class="brace">{</em>
<a id="L106" name="L106"></a> 106                 <em class="comment">// Check that the type is valid</em>
<a id="L107" name="L107"></a> 107                 <strong class="reserved">if</strong> (!<a href="../S/4850.html#L391" title="Defined at 391 in src/com/sun/org/apache/xpath/internal/domapi/XPathResultImpl.java.">isValidType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)) <em class="brace">{</em>
<a id="L108" name="L108"></a> 108             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_INVALID_XPATH_TYPE, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em><strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)<em class="brace">}</em>);
<a id="L109" name="L109"></a> 109             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,fmsg); <em class="comment">// Invalid XPath type argument: {0}</em>
<a id="L110" name="L110"></a> 110                 <em class="brace">}</em>
<a id="L111" name="L111"></a> 111 
<a id="L112" name="L112"></a> 112         <em class="comment">// Result object should never be null!</em>
<a id="L113" name="L113"></a> 113         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L114" name="L114"></a> 114             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_EMPTY_XPATH_RESULT, <strong class="reserved">null</strong>);
<a id="L115" name="L115"></a> 115             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.INVALID_EXPRESSION_ERR,fmsg); <em class="comment">// Empty XPath result object</em>
<a id="L116" name="L116"></a> 116         <em class="brace">}</em>
<a id="L117" name="L117"></a> 117 
<a id="L118" name="L118"></a> 118         <strong class="reserved">this</strong>.m_resultObj = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L119" name="L119"></a> 119         <strong class="reserved">this</strong>.m_contextNode = contextNode;
<a id="L120" name="L120"></a> 120         <strong class="reserved">this</strong>.m_xpath = xpath;
<a id="L121" name="L121"></a> 121 
<a id="L122" name="L122"></a> 122         <em class="comment">// If specified result was ANY_TYPE, determine XObject type</em>
<a id="L123" name="L123"></a> 123         <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == ANY_TYPE) <em class="brace">{</em>
<a id="L124" name="L124"></a> 124             <strong class="reserved">this</strong>.m_resultType = <a href="../S/4850.html#L449" title="Defined at 449 in src/com/sun/org/apache/xpath/internal/domapi/XPathResultImpl.java.">getTypeFromXObject</a>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L125" name="L125"></a> 125         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L126" name="L126"></a> 126             <strong class="reserved">this</strong>.m_resultType = <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L127" name="L127"></a> 127         <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129         <em class="comment">// If the context node supports DOM Events and the type is one of the iterator</em>
<a id="L130" name="L130"></a> 130         <em class="comment">// types register this result as an event listener</em>
<a id="L131" name="L131"></a> 131         <strong class="reserved">if</strong> (((m_resultType == <a href="../S/27.html#L56" title="Defined at 56 in src/org/w3c/dom/xpath/XPathResult.java.">XPathResult</a>.ORDERED_NODE_ITERATOR_TYPE) ||
<a id="L132" name="L132"></a> 132             (m_resultType == <a href="../S/27.html#L56" title="Defined at 56 in src/org/w3c/dom/xpath/XPathResult.java.">XPathResult</a>.UNORDERED_NODE_ITERATOR_TYPE))) <em class="brace">{</em>
<a id="L133" name="L133"></a> 133                 <a href="../D/10791.html" title="Multiple defined in 5 places.">addEventListener</a>();
<a id="L134" name="L134"></a> 134 
<a id="L135" name="L135"></a> 135         <em class="brace">}</em><em class="comment">// else can we handle iterator types if contextNode doesn't support EventTarget??</em>
<a id="L136" name="L136"></a> 136 
<a id="L137" name="L137"></a> 137         <em class="comment">// If this is an iterator type get the iterator</em>
<a id="L138" name="L138"></a> 138         <strong class="reserved">if</strong> ((m_resultType == ORDERED_NODE_ITERATOR_TYPE) ||
<a id="L139" name="L139"></a> 139             (m_resultType == UNORDERED_NODE_ITERATOR_TYPE) ||
<a id="L140" name="L140"></a> 140             (m_resultType == ANY_UNORDERED_NODE_TYPE) ||
<a id="L141" name="L141"></a> 141             (m_resultType == FIRST_ORDERED_NODE_TYPE))  <em class="brace">{</em>
<a id="L142" name="L142"></a> 142 
<a id="L143" name="L143"></a> 143             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L144" name="L144"></a> 144                 m_iterator = m_resultObj.<a href="../D/28257.html" title="Multiple defined in 4 places.">nodeset</a>();
<a id="L145" name="L145"></a> 145             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> te) <em class="brace">{</em>
<a id="L146" name="L146"></a> 146                 <em class="comment">// probably not a node type</em>
<a id="L147" name="L147"></a> 147                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_INCOMPATIBLE_TYPES, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(<a href="../S/4850.html#L449" title="Defined at 449 in src/com/sun/org/apache/xpath/internal/domapi/XPathResultImpl.java.">getTypeFromXObject</a>(m_resultObj)),<a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L148" name="L148"></a> 148                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR, fmsg);  <em class="comment">// "The XPathResult of XPath expression {0} has an XPathResultType of {1} which cannot be coerced into the specified XPathResultType of {2}."},</em>
<a id="L149" name="L149"></a> 149            <em class="brace">}</em>
<a id="L150" name="L150"></a> 150 
<a id="L151" name="L151"></a> 151                 <em class="comment">// If user requested ordered nodeset and result is unordered</em>
<a id="L152" name="L152"></a> 152                 <em class="comment">// need to sort...TODO</em>
<a id="L153" name="L153"></a> 153     <em class="comment">//            if ((m_resultType == ORDERED_NODE_ITERATOR_TYPE) &amp;&amp;</em>
<a id="L154" name="L154"></a> 154     <em class="comment">//                (!(((DTMNodeIterator)m_iterator).getDTMIterator().isDocOrdered()))) {</em>
<a id="L155" name="L155"></a> 155     <em class="comment">//</em>
<a id="L156" name="L156"></a> 156     <em class="comment">//            }</em>
<a id="L157" name="L157"></a> 157 
<a id="L158" name="L158"></a> 158         <em class="comment">// If it's a snapshot type, get the nodelist</em>
<a id="L159" name="L159"></a> 159         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((m_resultType == UNORDERED_NODE_SNAPSHOT_TYPE) ||
<a id="L160" name="L160"></a> 160                    (m_resultType == ORDERED_NODE_SNAPSHOT_TYPE)) <em class="brace">{</em>
<a id="L161" name="L161"></a> 161             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L162" name="L162"></a> 162                    m_list = m_resultObj.<a href="../D/28253.html" title="Multiple defined in 3 places.">nodelist</a>();
<a id="L163" name="L163"></a> 163             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> te) <em class="brace">{</em>
<a id="L164" name="L164"></a> 164                         <em class="comment">// probably not a node type</em>
<a id="L165" name="L165"></a> 165                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_INCOMPATIBLE_TYPES, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(<a href="../S/4850.html#L449" title="Defined at 449 in src/com/sun/org/apache/xpath/internal/domapi/XPathResultImpl.java.">getTypeFromXObject</a>(m_resultObj)),<a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L166" name="L166"></a> 166                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR, fmsg); <em class="comment">// "The XPathResult of XPath expression {0} has an XPathResultType of {1} which cannot be coerced into the specified XPathResultType of {2}."},</em>
<a id="L167" name="L167"></a> 167             <em class="brace">}</em>
<a id="L168" name="L168"></a> 168         <em class="brace">}</em>
<a id="L169" name="L169"></a> 169         <em class="brace">}</em>
<a id="L170" name="L170"></a> 170 
<div class="comment">
          @see org.w3c.dom.xpath.XPathResult#getResultType()</div>
<a id="L174" name="L174"></a> 174         <strong class="reserved">public</strong> <strong class="reserved">short</strong> <a href="../R/18726.html" title="Multiple referred from 3 places.">getResultType</a>() <em class="brace">{</em>
<a id="L175" name="L175"></a> 175                 <strong class="reserved">return</strong> m_resultType;
<a id="L176" name="L176"></a> 176         <em class="brace">}</em>
<a id="L177" name="L177"></a> 177 
<div class="comment">
           The value of this number result.
      @exception XPathException
        TYPE_ERR: raised if <code>resultType</code> is not
        <code>NUMBER_TYPE</code>.
          @see org.w3c.dom.xpath.XPathResult#getNumberValue()</div>
<a id="L185" name="L185"></a> 185         <strong class="reserved">public</strong> <strong class="reserved">double</strong> getNumberValue() <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a> <em class="brace">{</em>
<a id="L186" name="L186"></a> 186                 <strong class="reserved">if</strong> (<a href="../D/22076.html" title="Multiple defined in 2 places.">getResultType</a>() != NUMBER_TYPE) <em class="brace">{</em>
<a id="L187" name="L187"></a> 187                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANT_CONVERT_XPATHRESULTTYPE_TO_NUMBER, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L188" name="L188"></a> 188                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,fmsg);
<a id="L189" name="L189"></a> 189 <em class="comment">//              "The XPathResult of XPath expression {0} has an XPathResultType of {1} which cannot be converted to a number"</em>
<a id="L190" name="L190"></a> 190                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L191" name="L191"></a> 191                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L192" name="L192"></a> 192                            <strong class="reserved">return</strong> m_resultObj.<a href="../D/28365.html" title="Multiple defined in 17 places.">num</a>();
<a id="L193" name="L193"></a> 193                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L194" name="L194"></a> 194                                 <em class="comment">// Type check above should prevent this exception from occurring.</em>
<a id="L195" name="L195"></a> 195                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L196" name="L196"></a> 196                         <em class="brace">}</em>
<a id="L197" name="L197"></a> 197                 <em class="brace">}</em>
<a id="L198" name="L198"></a> 198         <em class="brace">}</em>
<a id="L199" name="L199"></a> 199 
<div class="comment">
          The value of this string result.
      @exception XPathException
        TYPE_ERR: raised if <code>resultType</code> is not
        <code>STRING_TYPE</code>.
          @see org.w3c.dom.xpath.XPathResult#getStringValue()</div>
<a id="L208" name="L208"></a> 208         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19227.html" title="Multiple referred from 38 places.">getStringValue</a>() <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a> <em class="brace">{</em>
<a id="L209" name="L209"></a> 209                 <strong class="reserved">if</strong> (<a href="../D/22076.html" title="Multiple defined in 2 places.">getResultType</a>() != STRING_TYPE) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANT_CONVERT_TO_STRING, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), m_resultObj.<a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>()<em class="brace">}</em>);
<a id="L211" name="L211"></a> 211                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,fmsg);
<a id="L212" name="L212"></a> 212 <em class="comment">//              "The XPathResult of XPath expression {0} has an XPathResultType of {1} which cannot be converted to a string."</em>
<a id="L213" name="L213"></a> 213                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L214" name="L214"></a> 214                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L215" name="L215"></a> 215                            <strong class="reserved">return</strong> m_resultObj.<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>();
<a id="L216" name="L216"></a> 216                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L217" name="L217"></a> 217                                 <em class="comment">// Type check above should prevent this exception from occurring.</em>
<a id="L218" name="L218"></a> 218                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L219" name="L219"></a> 219                         <em class="brace">}</em>
<a id="L220" name="L220"></a> 220                 <em class="brace">}</em>
<a id="L221" name="L221"></a> 221         <em class="brace">}</em>
<a id="L222" name="L222"></a> 222 
<div class="comment">
          @see org.w3c.dom.xpath.XPathResult#getBooleanValue()</div>
<a id="L226" name="L226"></a> 226         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getBooleanValue() <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a> <em class="brace">{</em>
<a id="L227" name="L227"></a> 227                 <strong class="reserved">if</strong> (<a href="../D/22076.html" title="Multiple defined in 2 places.">getResultType</a>() != BOOLEAN_TYPE) <em class="brace">{</em>
<a id="L228" name="L228"></a> 228                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANT_CONVERT_TO_BOOLEAN, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L229" name="L229"></a> 229                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,fmsg);
<a id="L230" name="L230"></a> 230 <em class="comment">//              "The XPathResult of XPath expression {0} has an XPathResultType of {1} which cannot be converted to a boolean."</em>
<a id="L231" name="L231"></a> 231                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L232" name="L232"></a> 232                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L233" name="L233"></a> 233                            <strong class="reserved">return</strong> m_resultObj.<a href="../D/11887.html" title="Multiple defined in 15 places.">bool</a>();
<a id="L234" name="L234"></a> 234                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> e) <em class="brace">{</em>
<a id="L235" name="L235"></a> 235                                 <em class="comment">// Type check above should prevent this exception from occurring.</em>
<a id="L236" name="L236"></a> 236                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L237" name="L237"></a> 237                         <em class="brace">}</em>
<a id="L238" name="L238"></a> 238                 <em class="brace">}</em>
<a id="L239" name="L239"></a> 239         <em class="brace">}</em>
<a id="L240" name="L240"></a> 240 
<div class="comment">
          The value of this single node result, which may be <code>null</code>.
      @exception XPathException
        TYPE_ERR: raised if <code>resultType</code> is not
        <code>ANY_UNORDERED_NODE_TYPE</code> or
        <code>FIRST_ORDERED_NODE_TYPE</code>.
          @see org.w3c.dom.xpath.XPathResult#getSingleNodeValue()</div>
<a id="L250" name="L250"></a> 250         <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> getSingleNodeValue() <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a> <em class="brace">{</em>
<a id="L251" name="L251"></a> 251 
<a id="L252" name="L252"></a> 252                 <strong class="reserved">if</strong> ((m_resultType != ANY_UNORDERED_NODE_TYPE) &amp;&amp;
<a id="L253" name="L253"></a> 253                     (m_resultType != FIRST_ORDERED_NODE_TYPE)) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANT_CONVERT_TO_SINGLENODE, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L255" name="L255"></a> 255                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,fmsg);
<a id="L256" name="L256"></a> 256 <em class="comment">//                              "The XPathResult of XPath expression {0} has an XPathResultType of {1} which cannot be converted to a single node.</em>
<a id="L257" name="L257"></a> 257 <em class="comment">//                               This method applies only to types ANY_UNORDERED_NODE_TYPE and FIRST_ORDERED_NODE_TYPE."</em>
<a id="L258" name="L258"></a> 258             <em class="brace">}</em>
<a id="L259" name="L259"></a> 259 
<a id="L260" name="L260"></a> 260                 <a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong>;
<a id="L261" name="L261"></a> 261                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L262" name="L262"></a> 262                         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = m_resultObj.<a href="../D/28257.html" title="Multiple defined in 4 places.">nodeset</a>();
<a id="L263" name="L263"></a> 263                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> te) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,te.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L265" name="L265"></a> 265                 <em class="brace">}</em>
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L268" name="L268"></a> 268 
<a id="L269" name="L269"></a> 269         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L270" name="L270"></a> 270 
<a id="L271" name="L271"></a> 271         <em class="comment">// Wrap "namespace node" in an XPathNamespace</em>
<a id="L272" name="L272"></a> 272         <strong class="reserved">if</strong> (<a href="../D/25923.html" title="Multiple defined in 2 places.">isNamespaceNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)) <em class="brace">{</em>
<a id="L273" name="L273"></a> 273             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4852.html#L76" title="Defined at 76 in src/com/sun/org/apache/xpath/internal/domapi/XPathNamespaceImpl.java.">XPathNamespaceImpl</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L274" name="L274"></a> 274         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L275" name="L275"></a> 275             <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L276" name="L276"></a> 276         <em class="brace">}</em>
<a id="L277" name="L277"></a> 277         <em class="brace">}</em>
<a id="L278" name="L278"></a> 278 
<div class="comment">
          @see org.w3c.dom.xpath.XPathResult#getInvalidIteratorState()</div>
<a id="L282" name="L282"></a> 282         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4850.html#L331" title="Referred from 331 in src/com/sun/org/apache/xpath/internal/domapi/XPathResultImpl.java.">getInvalidIteratorState</a>() <em class="brace">{</em>
<a id="L283" name="L283"></a> 283                 <strong class="reserved">return</strong> m_isInvalidIteratorState;
<a id="L284" name="L284"></a> 284         <em class="brace">}</em>
<a id="L285" name="L285"></a> 285 
<div class="comment">
          The number of nodes in the result snapshot. Valid values for
      snapshotItem indices are <code>0</code> to
      <code>snapshotLength-1</code> inclusive.
      @exception XPathException
        TYPE_ERR: raised if <code>resultType</code> is not
        <code>UNORDERED_NODE_SNAPSHOT_TYPE</code> or
        <code>ORDERED_NODE_SNAPSHOT_TYPE</code>.
          @see org.w3c.dom.xpath.XPathResult#getSnapshotLength()</div>
<a id="L297" name="L297"></a> 297         <strong class="reserved">public</strong> <strong class="reserved">int</strong> getSnapshotLength() <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a> <em class="brace">{</em>
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299                 <strong class="reserved">if</strong> ((m_resultType != UNORDERED_NODE_SNAPSHOT_TYPE) &amp;&amp;
<a id="L300" name="L300"></a> 300                     (m_resultType != ORDERED_NODE_SNAPSHOT_TYPE)) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_CANT_GET_SNAPSHOT_LENGTH, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L302" name="L302"></a> 302                                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR,fmsg);
<a id="L303" name="L303"></a> 303 <em class="comment">//                              "The method getSnapshotLength cannot be called on the XPathResult of XPath expression {0} because its XPathResultType is {1}.</em>
<a id="L304" name="L304"></a> 304             <em class="brace">}</em>
<a id="L305" name="L305"></a> 305 
<a id="L306" name="L306"></a> 306                 <strong class="reserved">return</strong> m_list.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L307" name="L307"></a> 307         <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<div class="comment">
          Iterates and returns the next node from the node set or
      <code>null</code>if there are no more nodes.
      @return Returns the next node.
      @exception XPathException
        TYPE_ERR: raised if <code>resultType</code> is not
        <code>UNORDERED_NODE_ITERATOR_TYPE</code> or
        <code>ORDERED_NODE_ITERATOR_TYPE</code>.
      @exception DOMException
        INVALID_STATE_ERR: The document has been mutated since the result was
        returned.
          @see org.w3c.dom.xpath.XPathResult#iterateNext()</div>
<a id="L322" name="L322"></a> 322         <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> iterateNext() <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>, <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a> <em class="brace">{</em>
<a id="L323" name="L323"></a> 323                 <strong class="reserved">if</strong> ((m_resultType != UNORDERED_NODE_ITERATOR_TYPE) &amp;&amp;
<a id="L324" name="L324"></a> 324                     (m_resultType != ORDERED_NODE_ITERATOR_TYPE)) <em class="brace">{</em>
<a id="L325" name="L325"></a> 325           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NON_ITERATOR_TYPE, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L326" name="L326"></a> 326                   <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR, fmsg);
<a id="L327" name="L327"></a> 327 <em class="comment">//                "The method iterateNext cannot be called on the XPathResult of XPath expression {0} because its XPathResultType is {1}.</em>
<a id="L328" name="L328"></a> 328 <em class="comment">//                This method applies only to types UNORDERED_NODE_ITERATOR_TYPE and ORDERED_NODE_ITERATOR_TYPE."},</em>
<a id="L329" name="L329"></a> 329             <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<a id="L331" name="L331"></a> 331                 <strong class="reserved">if</strong> (<a href="../D/19824.html" title="Multiple defined in 2 places.">getInvalidIteratorState</a>()) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_DOC_MUTATED, <strong class="reserved">null</strong>);
<a id="L333" name="L333"></a> 333                   <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>(<a href="../S/55.html#L62" title="Defined at 62 in src/org/w3c/dom/DOMException.java.">DOMException</a>.INVALID_STATE_ERR,fmsg);  <em class="comment">// Document mutated since result was returned. Iterator is invalid.</em>
<a id="L334" name="L334"></a> 334                 <em class="brace">}</em>
<a id="L335" name="L335"></a> 335 
<a id="L336" name="L336"></a> 336         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_iterator.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L337" name="L337"></a> 337         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L338" name="L338"></a> 338                 <a href="../D/30788.html" title="Multiple defined in 5 places.">removeEventListener</a>(); <em class="comment">// JIRA 1673</em>
<a id="L339" name="L339"></a> 339         <em class="comment">// Wrap "namespace node" in an XPathNamespace</em>
<a id="L340" name="L340"></a> 340         <strong class="reserved">if</strong> (<a href="../D/25923.html" title="Multiple defined in 2 places.">isNamespaceNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)) <em class="brace">{</em>
<a id="L341" name="L341"></a> 341             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4852.html#L76" title="Defined at 76 in src/com/sun/org/apache/xpath/internal/domapi/XPathNamespaceImpl.java.">XPathNamespaceImpl</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L342" name="L342"></a> 342         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L343" name="L343"></a> 343             <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L344" name="L344"></a> 344         <em class="brace">}</em>
<a id="L345" name="L345"></a> 345         <em class="brace">}</em>
<a id="L346" name="L346"></a> 346 
<div class="comment">
      Returns the <code>index</code>th item in the snapshot collection. If
      <code>index</code> is greater than or equal to the number of nodes in
      the list, this method returns <code>null</code>. Unlike the iterator
      result, the snapshot does not become invalid, but may not correspond
      to the current document if it is mutated.
      @param index Index into the snapshot collection.
      @return The node at the <code>index</code>th position in the
        <code>NodeList</code>, or <code>null</code> if that is not a valid
        index.
      @exception XPathException
        TYPE_ERR: raised if <code>resultType</code> is not
        <code>UNORDERED_NODE_SNAPSHOT_TYPE</code> or
        <code>ORDERED_NODE_SNAPSHOT_TYPE</code>.
          @see org.w3c.dom.xpath.XPathResult#snapshotItem(int)</div>
<a id="L364" name="L364"></a> 364         <strong class="reserved">public</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> snapshotItem(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <strong class="reserved">throws</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a> <em class="brace">{</em>
<a id="L365" name="L365"></a> 365 
<a id="L366" name="L366"></a> 366                 <strong class="reserved">if</strong> ((m_resultType != UNORDERED_NODE_SNAPSHOT_TYPE) &amp;&amp;
<a id="L367" name="L367"></a> 367                     (m_resultType != ORDERED_NODE_SNAPSHOT_TYPE)) <em class="brace">{</em>
<a id="L368" name="L368"></a> 368            <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fmsg = <a href="../S/4842.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">XPATHMessages</a>.<a href="../S/4842.html#L56" title="Defined at 56 in src/com/sun/org/apache/xpath/internal/res/XPATHMessages.java.">createXPATHMessage</a>(<a href="../S/4836.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/res/XPATHErrorResources.java.">XPATHErrorResources</a>.ER_NON_SNAPSHOT_TYPE, <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>m_xpath.<a href="../D/21455.html" title="Multiple defined in 2 places.">getPatternString</a>(), <a href="../D/23342.html" title="Multiple defined in 12 places.">getTypeString</a>(m_resultType)<em class="brace">}</em>);
<a id="L369" name="L369"></a> 369            <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>(<a href="../D/10082.html" title="Multiple defined in 4 places.">XPathException</a>.TYPE_ERR, fmsg);
<a id="L370" name="L370"></a> 370 <em class="comment">//              "The method snapshotItem cannot be called on the XPathResult of XPath expression {0} because its XPathResultType is {1}.</em>
<a id="L371" name="L371"></a> 371 <em class="comment">//              This method applies only to types UNORDERED_NODE_SNAPSHOT_TYPE and ORDERED_NODE_SNAPSHOT_TYPE."},</em>
<a id="L372" name="L372"></a> 372             <em class="brace">}</em>
<a id="L373" name="L373"></a> 373 
<a id="L374" name="L374"></a> 374         <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = m_list.<a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L375" name="L375"></a> 375 
<a id="L376" name="L376"></a> 376         <em class="comment">// Wrap "namespace node" in an XPathNamespace</em>
<a id="L377" name="L377"></a> 377         <strong class="reserved">if</strong> (<a href="../D/25923.html" title="Multiple defined in 2 places.">isNamespaceNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)) <em class="brace">{</em>
<a id="L378" name="L378"></a> 378             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4852.html#L76" title="Defined at 76 in src/com/sun/org/apache/xpath/internal/domapi/XPathNamespaceImpl.java.">XPathNamespaceImpl</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L379" name="L379"></a> 379         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L380" name="L380"></a> 380             <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L381" name="L381"></a> 381         <em class="brace">}</em>
<a id="L382" name="L382"></a> 382         <em class="brace">}</em>
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384 
<div class="comment">
          Check if the specified type is one of the supported types.
          @param type The specified type
          @return true If the specified type is supported; otherwise, returns false.</div>
<a id="L391" name="L391"></a> 391         <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22199.html" title="Multiple referred from 2 places.">isValidType</a>( <strong class="reserved">short</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> ) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392                 <strong class="reserved">switch</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L393" name="L393"></a> 393                         <strong class="reserved">case</strong> ANY_TYPE:
<a id="L394" name="L394"></a> 394                         <strong class="reserved">case</strong> NUMBER_TYPE:
<a id="L395" name="L395"></a> 395                         <strong class="reserved">case</strong> STRING_TYPE:
<a id="L396" name="L396"></a> 396                         <strong class="reserved">case</strong> BOOLEAN_TYPE:
<a id="L397" name="L397"></a> 397                         <strong class="reserved">case</strong> UNORDERED_NODE_ITERATOR_TYPE:
<a id="L398" name="L398"></a> 398                         <strong class="reserved">case</strong> ORDERED_NODE_ITERATOR_TYPE:
<a id="L399" name="L399"></a> 399                         <strong class="reserved">case</strong> UNORDERED_NODE_SNAPSHOT_TYPE:
<a id="L400" name="L400"></a> 400                         <strong class="reserved">case</strong> ORDERED_NODE_SNAPSHOT_TYPE:
<a id="L401" name="L401"></a> 401                         <strong class="reserved">case</strong> ANY_UNORDERED_NODE_TYPE:
<a id="L402" name="L402"></a> 402                         <strong class="reserved">case</strong> FIRST_ORDERED_NODE_TYPE: <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L403" name="L403"></a> 403                         <strong class="reserved">default</strong>: <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L404" name="L404"></a> 404                 <em class="brace">}</em>
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<div class="comment">
          @see org.w3c.dom.events.EventListener#handleEvent(Event)</div>
<a id="L410" name="L410"></a> 410         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20093.html" title="Multiple referred from 10 places.">handleEvent</a>(<a href="../D/2985.html" title="Multiple defined in 3 places.">Event</a> event) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411 
<a id="L412" name="L412"></a> 412                 <strong class="reserved">if</strong> (event.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("DOMSubtreeModified")) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                         <em class="comment">// invalidate the iterator</em>
<a id="L414" name="L414"></a> 414                         m_isInvalidIteratorState = <strong class="reserved">true</strong>;
<a id="L415" name="L415"></a> 415 
<a id="L416" name="L416"></a> 416                         <em class="comment">// deregister as a listener to reduce computational load</em>
<a id="L417" name="L417"></a> 417                         <a href="../D/30788.html" title="Multiple defined in 5 places.">removeEventListener</a>();
<a id="L418" name="L418"></a> 418                 <em class="brace">}</em>
<a id="L419" name="L419"></a> 419         <em class="brace">}</em>
<a id="L420" name="L420"></a> 420 
<div class="comment">
    Given a request type, return the equivalent string.
    For diagnostic purposes.
    @return type string</div>
<a id="L427" name="L427"></a> 427   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19635.html" title="Multiple referred from 19 places.">getTypeString</a>(<strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L428" name="L428"></a> 428   <em class="brace">{</em>
<a id="L429" name="L429"></a> 429      <strong class="reserved">switch</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430       <strong class="reserved">case</strong> ANY_TYPE: <strong class="reserved">return</strong> "ANY_TYPE";
<a id="L431" name="L431"></a> 431       <strong class="reserved">case</strong> ANY_UNORDERED_NODE_TYPE: <strong class="reserved">return</strong> "ANY_UNORDERED_NODE_TYPE";
<a id="L432" name="L432"></a> 432       <strong class="reserved">case</strong> BOOLEAN_TYPE: <strong class="reserved">return</strong> "BOOLEAN";
<a id="L433" name="L433"></a> 433       <strong class="reserved">case</strong> FIRST_ORDERED_NODE_TYPE: <strong class="reserved">return</strong> "FIRST_ORDERED_NODE_TYPE";
<a id="L434" name="L434"></a> 434       <strong class="reserved">case</strong> NUMBER_TYPE: <strong class="reserved">return</strong> "NUMBER_TYPE";
<a id="L435" name="L435"></a> 435       <strong class="reserved">case</strong> ORDERED_NODE_ITERATOR_TYPE: <strong class="reserved">return</strong> "ORDERED_NODE_ITERATOR_TYPE";
<a id="L436" name="L436"></a> 436       <strong class="reserved">case</strong> ORDERED_NODE_SNAPSHOT_TYPE: <strong class="reserved">return</strong> "ORDERED_NODE_SNAPSHOT_TYPE";
<a id="L437" name="L437"></a> 437       <strong class="reserved">case</strong> STRING_TYPE: <strong class="reserved">return</strong> "STRING_TYPE";
<a id="L438" name="L438"></a> 438       <strong class="reserved">case</strong> UNORDERED_NODE_ITERATOR_TYPE: <strong class="reserved">return</strong> "UNORDERED_NODE_ITERATOR_TYPE";
<a id="L439" name="L439"></a> 439       <strong class="reserved">case</strong> UNORDERED_NODE_SNAPSHOT_TYPE: <strong class="reserved">return</strong> "UNORDERED_NODE_SNAPSHOT_TYPE";
<a id="L440" name="L440"></a> 440       <strong class="reserved">default</strong>: <strong class="reserved">return</strong> "#UNKNOWN";
<a id="L441" name="L441"></a> 441     <em class="brace">}</em>
<a id="L442" name="L442"></a> 442   <em class="brace">}</em>
<a id="L443" name="L443"></a> 443 
<div class="comment">
    Given an XObject, determine the corresponding DOM XPath type
    @return type string</div>
<a id="L449" name="L449"></a> 449   <strong class="reserved">private</strong> <strong class="reserved">short</strong> <a href="../R/19625.html" title="Multiple referred from 3 places.">getTypeFromXObject</a>(<a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../D/28389.html" title="Multiple defined in 8 places.">object</a>) <em class="brace">{</em>
<a id="L450" name="L450"></a> 450       <strong class="reserved">switch</strong> (<a href="../D/28389.html" title="Multiple defined in 8 places.">object</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>()) <em class="brace">{</em>
<a id="L451" name="L451"></a> 451         <strong class="reserved">case</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>.CLASS_BOOLEAN: <strong class="reserved">return</strong> BOOLEAN_TYPE;
<a id="L452" name="L452"></a> 452         <strong class="reserved">case</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>.CLASS_NODESET: <strong class="reserved">return</strong> UNORDERED_NODE_ITERATOR_TYPE;
<a id="L453" name="L453"></a> 453         <strong class="reserved">case</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>.CLASS_NUMBER: <strong class="reserved">return</strong> NUMBER_TYPE;
<a id="L454" name="L454"></a> 454         <strong class="reserved">case</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>.CLASS_STRING: <strong class="reserved">return</strong> STRING_TYPE;
<a id="L455" name="L455"></a> 455         <em class="comment">// XPath 2.0 types</em>
<a id="L456" name="L456"></a> 456 <em class="comment">//          case XObject.CLASS_DATE:</em>
<a id="L457" name="L457"></a> 457 <em class="comment">//          case XObject.CLASS_DATETIME:</em>
<a id="L458" name="L458"></a> 458 <em class="comment">//          case XObject.CLASS_DTDURATION:</em>
<a id="L459" name="L459"></a> 459 <em class="comment">//          case XObject.CLASS_GDAY:</em>
<a id="L460" name="L460"></a> 460 <em class="comment">//          case XObject.CLASS_GMONTH:</em>
<a id="L461" name="L461"></a> 461 <em class="comment">//          case XObject.CLASS_GMONTHDAY:</em>
<a id="L462" name="L462"></a> 462 <em class="comment">//          case XObject.CLASS_GYEAR:</em>
<a id="L463" name="L463"></a> 463 <em class="comment">//          case XObject.CLASS_GYEARMONTH:</em>
<a id="L464" name="L464"></a> 464 <em class="comment">//          case XObject.CLASS_TIME:</em>
<a id="L465" name="L465"></a> 465 <em class="comment">//          case XObject.CLASS_YMDURATION: return STRING_TYPE; // treat all date types as strings?</em>
<a id="L466" name="L466"></a> 466 
<a id="L467" name="L467"></a> 467         <strong class="reserved">case</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>.CLASS_RTREEFRAG: <strong class="reserved">return</strong> UNORDERED_NODE_ITERATOR_TYPE;
<a id="L468" name="L468"></a> 468         <strong class="reserved">case</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>.CLASS_NULL: <strong class="reserved">return</strong> ANY_TYPE; <em class="comment">// throw exception ?</em>
<a id="L469" name="L469"></a> 469         <strong class="reserved">default</strong>: <strong class="reserved">return</strong> ANY_TYPE; <em class="comment">// throw exception ?</em>
<a id="L470" name="L470"></a> 470     <em class="brace">}</em>
<a id="L471" name="L471"></a> 471 
<a id="L472" name="L472"></a> 472   <em class="brace">}</em>
<a id="L473" name="L473"></a> 473 
<div class="comment">
  Given a node, determine if it is a namespace node.
  @param node
  @return boolean Returns true if this is a namespace node; otherwise, returns false.</div>
<a id="L481" name="L481"></a> 481   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21765.html" title="Multiple referred from 3 places.">isNamespaceNode</a>(<a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L482" name="L482"></a> 482 
<a id="L483" name="L483"></a> 483      <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &amp;&amp;
<a id="L484" name="L484"></a> 484          (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>() == <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a>.ATTRIBUTE_NODE) &amp;&amp;
<a id="L485" name="L485"></a> 485          (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>().<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("xmlns:") || <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>.<a href="../D/20983.html" title="Multiple defined in 37 places.">getNodeName</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xmlns"))) <em class="brace">{</em>
<a id="L486" name="L486"></a> 486         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L487" name="L487"></a> 487      <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L488" name="L488"></a> 488         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L489" name="L489"></a> 489      <em class="brace">}</em>
<a id="L490" name="L490"></a> 490   <em class="brace">}</em>
<a id="L491" name="L491"></a> 491 
<div class="comment">
  Add m_contextNode to Event Listner to listen for Mutations Events</div>
<a id="L496" name="L496"></a> 496   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/9721.html" title="Multiple referred from 3 places.">addEventListener</a>()<em class="brace">{</em>
<a id="L497" name="L497"></a> 497         <strong class="reserved">if</strong>(m_contextNode <strong class="reserved">instanceof</strong> <a href="../S/150.html#L55" title="Defined at 55 in src/org/w3c/dom/events/EventTarget.java.">EventTarget</a>)
<a id="L498" name="L498"></a> 498                 ((<a href="../S/150.html#L55" title="Defined at 55 in src/org/w3c/dom/events/EventTarget.java.">EventTarget</a>)m_contextNode).<a href="../D/10791.html" title="Multiple defined in 5 places.">addEventListener</a>("DOMSubtreeModified",<strong class="reserved">this</strong>,<strong class="reserved">true</strong>);
<a id="L499" name="L499"></a> 499 
<a id="L500" name="L500"></a> 500   <em class="brace">}</em>
<a id="L501" name="L501"></a> 501 
<a id="L502" name="L502"></a> 502 
<div class="comment">
  Remove m_contextNode to Event Listner to listen for Mutations Events</div>
<a id="L507" name="L507"></a> 507 <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25961.html" title="Multiple referred from 5 places.">removeEventListener</a>()<em class="brace">{</em>
<a id="L508" name="L508"></a> 508         <strong class="reserved">if</strong>(m_contextNode <strong class="reserved">instanceof</strong> <a href="../S/150.html#L55" title="Defined at 55 in src/org/w3c/dom/events/EventTarget.java.">EventTarget</a>)
<a id="L509" name="L509"></a> 509                 ((<a href="../S/150.html#L55" title="Defined at 55 in src/org/w3c/dom/events/EventTarget.java.">EventTarget</a>)m_contextNode).<a href="../D/30788.html" title="Multiple defined in 5 places.">removeEventListener</a>("DOMSubtreeModified",<strong class="reserved">this</strong>,<strong class="reserved">true</strong>);
<a id="L510" name="L510"></a> 510 <em class="brace">}</em>
<a id="L511" name="L511"></a> 511 
<a id="L512" name="L512"></a> 512 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L174">[^]</a><a href="#L507">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
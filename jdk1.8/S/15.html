<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/launcher/java.c</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L175">[^]</a><a href="#L2073">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L175" title="Defined at 175.">JLI_Launch</a></li>
<li><a href="#L354" title="Defined at 354.">JavaMain</a></li>
<li><a href="#L495" title="Defined at 495.">CheckJvmType</a></li>
<li><a href="#L649" title="Defined at 649.">SetJvmEnvironment</a></li>
<li><a href="#L704" title="Defined at 704.">parse_size</a></li>
<li><a href="#L743" title="Defined at 743.">AddOption</a></li>
<li><a href="#L788" title="Defined at 788.">SetClassPath</a></li>
<li><a href="#L822" title="Defined at 822.">SelectVersion</a></li>
<li><a href="#L1061" title="Defined at 1061.">ParseArguments</a></li>
<li><a href="#L1191" title="Defined at 1191.">InitializeJVM</a></li>
<li><a href="#L1222" title="Defined at 1222.">GetLauncherHelperClass</a></li>
<li><a href="#L1236" title="Defined at 1236.">NewPlatformString</a></li>
<li><a href="#L1270" title="Defined at 1270.">NewPlatformStringArray</a></li>
<li><a href="#L1292" title="Defined at 1292.">LoadMainClass</a></li>
<li><a href="#L1323" title="Defined at 1323.">GetApplicationClass</a></li>
<li><a href="#L1344" title="Defined at 1344.">TranslateApplicationArgs</a></li>
<li><a href="#L1415" title="Defined at 1415.">AddApplicationOptions</a></li>
<li><a href="#L1472" title="Defined at 1472.">SetJavaCommandLineProp</a></li>
<li><a href="#L1522" title="Defined at 1522.">SetJavaLauncherProp</a></li>
<li><a href="#L1530" title="Defined at 1530.">PrintJavaVersion</a></li>
<li><a href="#L1550" title="Defined at 1550.">ShowSettings</a></li>
<li><a href="#L1572" title="Defined at 1572.">PrintUsage</a></li>
<li><a href="#L1698" title="Defined at 1698.">ReadKnownVMs</a></li>
<li><a href="#L1823" title="Defined at 1823.">GrowKnownVMs</a></li>
<li><a href="#L1844" title="Defined at 1844.">KnownVMIndex</a></li>
<li><a href="#L1857" title="Defined at 1857.">FreeKnownVMs</a></li>
<li><a href="#L1872" title="Defined at 1872.">ShowSplashScreen</a></li>
<li><a href="#L1935" title="Defined at 1935.">GetDotVersion</a></li>
<li><a href="#L1941" title="Defined at 1941.">GetFullVersion</a></li>
<li><a href="#L1947" title="Defined at 1947.">GetProgramName</a></li>
<li><a href="#L1953" title="Defined at 1953.">GetLauncherName</a></li>
<li><a href="#L1959" title="Defined at 1959.">GetErgoPolicy</a></li>
<li><a href="#L1965" title="Defined at 1965.">IsJavaArgs</a></li>
<li><a href="#L1971" title="Defined at 1971.">IsWildCardEnabled</a></li>
<li><a href="#L1977" title="Defined at 1977.">ContinueInNewThread</a></li>
<li><a href="#L2017" title="Defined at 2017.">DumpState</a></li>
<li><a href="#L2052" title="Defined at 2052.">RemovableOption</a></li>
<li><a href="#L2073" title="Defined at 2073.">JLI_ReportMessage</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1995, 2014, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  Shared source for 'java' command line tool.
  If JAVA_ARGS is defined, then acts as a launcher for applications. For
  instance, the JDK command line tools such as javac and javadoc (see
  makefiles for more details) are built with this program.  Any arguments
  prefixed with '-J' will be passed directly to the 'java' command.</div>
<a id="L34" name="L34"></a>  34 
<div class="comment">
  One job of the launcher is to remove command line options which the
  vm does not understand and will not process.  These options include
  options which select which style of vm is run (e.g. -client and
  -server) as well as options which select the data model to use.
  Additionally, for tools which invoke an underlying vm "-J-foo"
  options are turned into "-foo" options to the vm.  This option
  filtering is handled in a number of places in the launcher, some of
  it in machine-dependent code.  In this file, the function
  CheckJvmType removes vm style options and TranslateApplicationArgs
  removes "-J" prefixes.  The CreateExecutionEnvironment function processes
  and removes -d<n> options. On unix, there is a possibility that the running
  data model may not match to the desired data model, in this case an exec is
  required to start the desired model. If the data models match, then
  ParseArguments will remove the -d<n> flags. If the data models do not match
  the CreateExecutionEnviroment will remove the -d<n> flags.</n></n></n></div>
<a id="L52" name="L52"></a>  52 
<a id="L53" name="L53"></a>  53 
<a id="L54" name="L54"></a>  54 <em class="sharp">#include</em> "<a href="5.html">java.h</a>"
<a id="L55" name="L55"></a>  55 
<div class="comment">
  A NOTE TO DEVELOPERS: For performance reasons it is important that
  the program image remain relatively small until after SelectVersion
  CreateExecutionEnvironment have finished their possibly recursive
  processing. Watch everything, but resist all temptations to use Java
  interfaces.</div>
<a id="L63" name="L63"></a>  63 
<div class="comment">
 /* we always print to stderr */</div>
<a id="L65" name="L65"></a>  65 <em class="sharp">#define</em> <a href="../R/8418.html" title="Multiple referred from 5 places.">USE_STDERR</a> JNI_TRUE
<a id="L66" name="L66"></a>  66 
<a id="L67" name="L67"></a>  67 <div class="comment">
/* print and exit */</div>
<a id="L68" name="L68"></a>  68 <div class="comment">
/* print but continue */</div>
<a id="L69" name="L69"></a>  69 <strong class="reserved">static</strong> jboolean <div class="comment">
/* print and exit*/</div>
<a id="L70" name="L70"></a>  70 <div class="comment">
/* print and exit*/</div>
<a id="L71" name="L71"></a>  71 <strong class="reserved">static</strong> <strong class="reserved">char</strong>     *showSettings = <div class="comment">
/* print but continue */</div>
<a id="L72" name="L72"></a>  72 
<a id="L73" name="L73"></a>  73 <strong class="reserved">static</strong> <strong class="reserved">const</strong> <strong class="reserved">char</strong> *_program_name;
<a id="L74" name="L74"></a>  74 <strong class="reserved">static</strong> <strong class="reserved">const</strong> <strong class="reserved">char</strong> *_launcher_name;
<a id="L75" name="L75"></a>  75 <strong class="reserved">static</strong> jboolean _is_java_args = JNI_FALSE;
<a id="L76" name="L76"></a>  76 <strong class="reserved">static</strong> <strong class="reserved">const</strong> <strong class="reserved">char</strong> *_fVersion;
<a id="L77" name="L77"></a>  77 <strong class="reserved">static</strong> <strong class="reserved">const</strong> <strong class="reserved">char</strong> *_dVersion;
<a id="L78" name="L78"></a>  78 <strong class="reserved">static</strong> jboolean _wc_enabled = JNI_FALSE;
<a id="L79" name="L79"></a>  79 <strong class="reserved">static</strong> jint _ergo_policy = <a href="../S/5.html#L170" title="Defined at 170 in src/launcher/java.h.">DEFAULT_POLICY</a>;
<a id="L80" name="L80"></a>  80 
<div class="comment">
  Entries for splash screen environment variables.
  putenv is performed in SelectVersion. We need
  them in memory until UnsetEnv, so they are made static
  global instead of auto local.</div>
<a id="L87" name="L87"></a>  87 <strong class="reserved">static</strong> <strong class="reserved">char</strong>* splash_file_entry = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L88" name="L88"></a>  88 <strong class="reserved">static</strong> <strong class="reserved">char</strong>* splash_jar_entry = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L89" name="L89"></a>  89 
<div class="comment">
  List of VM options to be specified when the VM is created.</div>
<a id="L93" name="L93"></a>  93 <strong class="reserved">static</strong> JavaVMOption *<a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>;
<a id="L94" name="L94"></a>  94 <strong class="reserved">static</strong> <strong class="reserved">int</strong> numOptions, maxOptions;
<a id="L95" name="L95"></a>  95 
<div class="comment">
  Prototypes for functions internal to launcher.</div>
<a id="L99" name="L99"></a>  99 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L788" title="Defined at 788 in src/launcher/java.c.">SetClassPath</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *s);
<a id="L100" name="L100"></a> 100 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L822" title="Defined at 822 in src/launcher/java.c.">SelectVersion</a>(<strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv, <strong class="reserved">char</strong> **main_class);
<a id="L101" name="L101"></a> 101 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L649" title="Defined at 649 in src/launcher/java.c.">SetJvmEnvironment</a>(<strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv);
<a id="L102" name="L102"></a> 102 <strong class="reserved">static</strong> jboolean <a href="../S/15.html#L1061" title="Defined at 1061 in src/launcher/java.c.">ParseArguments</a>(<strong class="reserved">int</strong> *pargc, <strong class="reserved">char</strong> ***pargv,
<a id="L103" name="L103"></a> 103                                <strong class="reserved">int</strong> *pmode, <strong class="reserved">char</strong> **pwhat,
<a id="L104" name="L104"></a> 104                                <strong class="reserved">int</strong> *pret, <strong class="reserved">const</strong> <strong class="reserved">char</strong> *jrepath);
<a id="L105" name="L105"></a> 105 <strong class="reserved">static</strong> jboolean <a href="../S/15.html#L1191" title="Defined at 1191 in src/launcher/java.c.">InitializeJVM</a>(JavaVM **pvm, JNIEnv **penv,
<a id="L106" name="L106"></a> 106                               <a href="../S/5.html#L88" title="Defined at 88 in src/launcher/java.h.">InvocationFunctions</a> *ifn);
<a id="L107" name="L107"></a> 107 <strong class="reserved">static</strong> jstring <a href="../S/15.html#L1236" title="Defined at 1236 in src/launcher/java.c.">NewPlatformString</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">char</strong> *s);
<a id="L108" name="L108"></a> 108 <strong class="reserved">static</strong> jclass <a href="../S/15.html#L1292" title="Defined at 1292 in src/launcher/java.c.">LoadMainClass</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">int</strong> mode, <strong class="reserved">char</strong> *<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L109" name="L109"></a> 109 <strong class="reserved">static</strong> jclass <a href="../S/15.html#L1323" title="Defined at 1323 in src/launcher/java.c.">GetApplicationClass</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L110" name="L110"></a> 110 
<a id="L111" name="L111"></a> 111 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L1344" title="Defined at 1344 in src/launcher/java.c.">TranslateApplicationArgs</a>(<strong class="reserved">int</strong> jargc, <strong class="reserved">const</strong> <strong class="reserved">char</strong> **jargv, <strong class="reserved">int</strong> *pargc, <strong class="reserved">char</strong> ***pargv);
<a id="L112" name="L112"></a> 112 <strong class="reserved">static</strong> jboolean <a href="../S/15.html#L1415" title="Defined at 1415 in src/launcher/java.c.">AddApplicationOptions</a>(<strong class="reserved">int</strong> cpathc, <strong class="reserved">const</strong> <strong class="reserved">char</strong> **cpathv);
<a id="L113" name="L113"></a> 113 <strong class="reserved">static</strong> <strong class="reserved">void</strong> SetApplicationClassPath(<strong class="reserved">const</strong> <strong class="reserved">char</strong>**);
<a id="L114" name="L114"></a> 114 
<a id="L115" name="L115"></a> 115 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L1530" title="Defined at 1530 in src/launcher/java.c.">PrintJavaVersion</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, jboolean extraLF);
<a id="L116" name="L116"></a> 116 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L1572" title="Defined at 1572 in src/launcher/java.c.">PrintUsage</a>(JNIEnv* <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, jboolean doXUsage);
<a id="L117" name="L117"></a> 117 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L1550" title="Defined at 1550 in src/launcher/java.c.">ShowSettings</a>(JNIEnv* <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">char</strong> *optString);
<a id="L118" name="L118"></a> 118 
<a id="L119" name="L119"></a> 119 <strong class="reserved">static</strong> <strong class="reserved">void</strong> SetPaths(<strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv);
<a id="L120" name="L120"></a> 120 
<a id="L121" name="L121"></a> 121 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L2017" title="Defined at 2017 in src/launcher/java.c.">DumpState</a>();
<a id="L122" name="L122"></a> 122 <strong class="reserved">static</strong> jboolean <a href="../S/15.html#L2052" title="Defined at 2052 in src/launcher/java.c.">RemovableOption</a>(<strong class="reserved">char</strong> *option);
<a id="L123" name="L123"></a> 123 
<div class="comment">
 /* Maximum supported entries from jvm.cfg. */</div>
<a id="L125" name="L125"></a> 125 <em class="sharp">#define</em> <a href="../S/15.html#L1828" title="Referred from 1828 in src/launcher/java.c.">INIT_MAX_KNOWN_VMS</a>      10
<a id="L126" name="L126"></a> 126 
<div class="comment">
 /* Values for vmdesc.flag */</div>
<a id="L128" name="L128"></a> 128 <strong class="reserved">enum</strong> vmdesc_flag <em class="brace">{</em>
<a id="L129" name="L129"></a> 129     <a href="../R/8596.html" title="Multiple referred from 2 places.">VM_UNKNOWN</a> = -1,
<a id="L130" name="L130"></a> 130     <a href="../R/8593.html" title="Multiple referred from 5 places.">VM_KNOWN</a>,
<a id="L131" name="L131"></a> 131     <a href="../R/8588.html" title="Multiple referred from 4 places.">VM_ALIASED_TO</a>,
<a id="L132" name="L132"></a> 132     <a href="../R/8597.html" title="Multiple referred from 2 places.">VM_WARN</a>,
<a id="L133" name="L133"></a> 133     <a href="../R/8590.html" title="Multiple referred from 2 places.">VM_ERROR</a>,
<a id="L134" name="L134"></a> 134     <a href="../R/8591.html" title="Multiple referred from 5 places.">VM_IF_SERVER_CLASS</a>,
<a id="L135" name="L135"></a> 135     <a href="../R/8592.html" title="Multiple referred from 2 places.">VM_IGNORE</a>
<a id="L136" name="L136"></a> 136 <em class="brace">}</em>;
<a id="L137" name="L137"></a> 137 
<a id="L138" name="L138"></a> 138 <strong class="reserved">struct</strong> <a href="../R/30401.html" title="Multiple referred from 4 places.">vmdesc</a> <em class="brace">{</em>
<a id="L139" name="L139"></a> 139     <strong class="reserved">char</strong> *<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L140" name="L140"></a> 140     <strong class="reserved">int</strong> flag;
<a id="L141" name="L141"></a> 141     <strong class="reserved">char</strong> *alias;
<a id="L142" name="L142"></a> 142     <strong class="reserved">char</strong> *server_class;
<a id="L143" name="L143"></a> 143 <em class="brace">}</em>;
<a id="L144" name="L144"></a> 144 <strong class="reserved">static</strong> <strong class="reserved">struct</strong> <a href="../S/15.html#L138" title="Defined at 138 in src/launcher/java.c.">vmdesc</a> *knownVMs = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L145" name="L145"></a> 145 <strong class="reserved">static</strong> <strong class="reserved">int</strong> knownVMsCount = 0;
<a id="L146" name="L146"></a> 146 <strong class="reserved">static</strong> <strong class="reserved">int</strong> knownVMsLimit = 0;
<a id="L147" name="L147"></a> 147 
<a id="L148" name="L148"></a> 148 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L1823" title="Defined at 1823 in src/launcher/java.c.">GrowKnownVMs</a>();
<a id="L149" name="L149"></a> 149 <strong class="reserved">static</strong> <strong class="reserved">int</strong>  <a href="../S/15.html#L1844" title="Defined at 1844 in src/launcher/java.c.">KnownVMIndex</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong>* <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L150" name="L150"></a> 150 <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/15.html#L1857" title="Defined at 1857 in src/launcher/java.c.">FreeKnownVMs</a>();
<a id="L151" name="L151"></a> 151 <strong class="reserved">static</strong> jboolean <a href="../S/15.html#L1971" title="Defined at 1971 in src/launcher/java.c.">IsWildCardEnabled</a>();
<a id="L152" name="L152"></a> 152 
<a id="L153" name="L153"></a> 153 <em class="sharp">#define</em> <a href="../R/31.html" title="Multiple referred from 2 places.">ARG_CHECK</a>(AC_arg_count, AC_failure_message, AC_questionable_arg) \
<a id="L154" name="L154"></a> 154     <strong class="reserved">do</strong> <em class="brace">{</em> \
<a id="L155" name="L155"></a> 155         <strong class="reserved">if</strong> (AC_arg_count &lt; 1) <em class="brace">{</em> \
<a id="L156" name="L156"></a> 156             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(AC_failure_message, AC_questionable_arg); \
<a id="L157" name="L157"></a> 157             <a href="../D/29718.html" title="Multiple defined in 2 places.">printUsage</a> = JNI_TRUE; \
<a id="L158" name="L158"></a> 158             *pret = 1; \
<a id="L159" name="L159"></a> 159             <strong class="reserved">return</strong> JNI_TRUE; \
<a id="L160" name="L160"></a> 160         <em class="brace">}</em> \
<a id="L161" name="L161"></a> 161     <em class="brace">}</em> <strong class="reserved">while</strong> (JNI_FALSE)
<a id="L162" name="L162"></a> 162 
<div class="comment">
  Running Java code in primordial thread caused many problems. We will
  create a new thread to invoke JVM. See 6316197 for more information.</div>
<a id="L167" name="L167"></a> 167 <div class="comment">
;  /* stack size of the new thread */</div>
<a id="L168" name="L168"></a> 168 <div class="comment">
;  /* max heap size */</div>
<a id="L169" name="L169"></a> 169 <div class="comment">
;  /* inital heap size */</div>
<a id="L170" name="L170"></a> 170 
<div class="comment">
  Entry point.</div>
<a id="L174" name="L174"></a> 174 <strong class="reserved">int</strong>
<a id="L175" name="L175"></a> 175 <a href="../R/4150.html" title="Multiple referred from 2 places.">JLI_Launch</a>(<strong class="reserved">int</strong> argc, <div class="comment">
/* main argc, argc */</div>
<a id="L176" name="L176"></a> 176         <strong class="reserved">int</strong> jargc, <strong class="reserved">const</strong> <div class="comment">
/* java args */</div>
<a id="L177" name="L177"></a> 177         <strong class="reserved">int</strong> appclassc, <strong class="reserved">const</strong> <div class="comment">
/* app classpath */</div>
<a id="L178" name="L178"></a> 178         <strong class="reserved">const</strong> <div class="comment">
/* full version defined */</div>
<a id="L179" name="L179"></a> 179         <strong class="reserved">const</strong> <div class="comment">
/* dot version defined */</div>
<a id="L180" name="L180"></a> 180         <strong class="reserved">const</strong> <div class="comment">
/* program name */</div>
<a id="L181" name="L181"></a> 181         <strong class="reserved">const</strong> <div class="comment">
/* launcher name */</div>
<div class="comment">
         jboolean javaargs,                      /* JAVA_ARGS */</div>
<div class="comment">
         jboolean cpwildcard,                    /* classpath wildcard*/</div>
<div class="comment">
         jboolean javaw,                         /* windows-only javaw */</div>
<div class="comment">
         jint ergo                               /* ergonomics class policy */</div>
<a id="L186" name="L186"></a> 186 )
<a id="L187" name="L187"></a> 187 <em class="brace">{</em>
<a id="L188" name="L188"></a> 188     <strong class="reserved">int</strong> mode = <a href="../S/5.html#L229" title="Defined at 229 in src/launcher/java.h.">LM_UNKNOWN</a>;
<a id="L189" name="L189"></a> 189     <strong class="reserved">char</strong> *what = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L190" name="L190"></a> 190     <strong class="reserved">char</strong> *cpath = 0;
<a id="L191" name="L191"></a> 191     <strong class="reserved">char</strong> *main_class = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L192" name="L192"></a> 192     <strong class="reserved">int</strong> ret;
<a id="L193" name="L193"></a> 193     <a href="../S/5.html#L88" title="Defined at 88 in src/launcher/java.h.">InvocationFunctions</a> ifn;
<a id="L194" name="L194"></a> 194     jlong <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L195" name="L195"></a> 195     <strong class="reserved">char</strong> jvmpath[<a href="../S/10.html#L39" title="Defined at 39 in src/launcher/java_md.h.">MAXPATHLEN</a>];
<a id="L196" name="L196"></a> 196     <strong class="reserved">char</strong> jrepath[<a href="../S/10.html#L39" title="Defined at 39 in src/launcher/java_md.h.">MAXPATHLEN</a>];
<a id="L197" name="L197"></a> 197     <strong class="reserved">char</strong> jvmcfg[<a href="../S/10.html#L39" title="Defined at 39 in src/launcher/java_md.h.">MAXPATHLEN</a>];
<a id="L198" name="L198"></a> 198 
<a id="L199" name="L199"></a> 199     _fVersion = fullversion;
<a id="L200" name="L200"></a> 200     _dVersion = dotversion;
<a id="L201" name="L201"></a> 201     _launcher_name = lname;
<a id="L202" name="L202"></a> 202     _program_name = pname;
<a id="L203" name="L203"></a> 203     _is_java_args = javaargs;
<a id="L204" name="L204"></a> 204     _wc_enabled = cpwildcard;
<a id="L205" name="L205"></a> 205     _ergo_policy = ergo;
<a id="L206" name="L206"></a> 206 
<a id="L207" name="L207"></a> 207     <a href="../S/1.html#L1261" title="Defined at 1261 in src/launcher/java_md.c.">InitLauncher</a>(javaw);
<a id="L208" name="L208"></a> 208     <a href="../S/15.html#L2017" title="Defined at 2017 in src/launcher/java.c.">DumpState</a>();
<a id="L209" name="L209"></a> 209     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210         <strong class="reserved">int</strong> i;
<a id="L211" name="L211"></a> 211         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("Command line args:\n");
<a id="L212" name="L212"></a> 212         <strong class="reserved">for</strong> (i = 0; i &lt; argc ; i++) <em class="brace">{</em>
<a id="L213" name="L213"></a> 213             <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("argv[%d] = %s\n", i, argv[i]);
<a id="L214" name="L214"></a> 214         <em class="brace">}</em>
<a id="L215" name="L215"></a> 215         <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Dsun.java.launcher.diag=true", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L216" name="L216"></a> 216     <em class="brace">}</em>
<a id="L217" name="L217"></a> 217 
<div class="comment">
      Make sure the specified version of the JRE is running.
      There are three things to note about the SelectVersion() routine:
       1) If the version running isn't correct, this routine doesn't
          return (either the correct version has been exec'd or an error
          was issued).
       2) Argc and Argv in this scope are *not* altered by this routine.
          It is the responsibility of subsequent code to ignore the
          arguments handled by this routine.
       3) As a side-effect, the variable "main_class" is guaranteed to
          be set (if it should ever be set).  This isn't exactly the
          poster child for structured programming, but it is a small
          price to pay for not processing a jar file operand twice.
          (Note: This side effect has been disabled.  See comment on
          bugid 5030265 below.)</div>
<a id="L235" name="L235"></a> 235     <a href="../S/15.html#L822" title="Defined at 822 in src/launcher/java.c.">SelectVersion</a>(argc, argv, &amp;main_class);
<a id="L236" name="L236"></a> 236 
<a id="L237" name="L237"></a> 237     <a href="../S/1.html#L171" title="Defined at 171 in src/launcher/java_md.c.">CreateExecutionEnvironment</a>(&amp;argc, &amp;argv,
<a id="L238" name="L238"></a> 238                                jrepath, <strong class="reserved">sizeof</strong>(jrepath),
<a id="L239" name="L239"></a> 239                                jvmpath, <strong class="reserved">sizeof</strong>(jvmpath),
<a id="L240" name="L240"></a> 240                                jvmcfg,  <strong class="reserved">sizeof</strong>(jvmcfg));
<a id="L241" name="L241"></a> 241 
<a id="L242" name="L242"></a> 242     <strong class="reserved">if</strong> (!<a href="../S/15.html#L1965" title="Defined at 1965 in src/launcher/java.c.">IsJavaArgs</a>()) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243         <a href="../S/15.html#L649" title="Defined at 649 in src/launcher/java.c.">SetJvmEnvironment</a>(argc,argv);
<a id="L244" name="L244"></a> 244     <em class="brace">}</em>
<a id="L245" name="L245"></a> 245 
<a id="L246" name="L246"></a> 246     ifn.CreateJavaVM = 0;
<a id="L247" name="L247"></a> 247     ifn.GetDefaultJavaVMInitArgs = 0;
<a id="L248" name="L248"></a> 248 
<a id="L249" name="L249"></a> 249     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L250" name="L250"></a> 250         <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L251" name="L251"></a> 251     <em class="brace">}</em>
<a id="L252" name="L252"></a> 252 
<a id="L253" name="L253"></a> 253     <strong class="reserved">if</strong> (!<a href="../S/1.html#L373" title="Defined at 373 in src/launcher/java_md.c.">LoadJavaVM</a>(jvmpath, &amp;ifn)) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254         <strong class="reserved">return</strong>(6);
<a id="L255" name="L255"></a> 255     <em class="brace">}</em>
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258         <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>   = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L259" name="L259"></a> 259     <em class="brace">}</em>
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261     <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("%ld micro seconds to LoadJavaVM\n",
<a id="L262" name="L262"></a> 262              (<strong class="reserved">long</strong>)(jint)<a href="../S/1.html#L531" title="Defined at 531 in src/launcher/java_md.c.">Counter2Micros</a>(<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>-<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>));
<a id="L263" name="L263"></a> 263 
<a id="L264" name="L264"></a> 264     ++argv;
<a id="L265" name="L265"></a> 265     --argc;
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267     <strong class="reserved">if</strong> (<a href="../S/15.html#L1965" title="Defined at 1965 in src/launcher/java.c.">IsJavaArgs</a>()) <em class="brace">{</em>
<div class="comment">
         /* Preprocess wrapper arguments */</div>
<a id="L269" name="L269"></a> 269         <a href="../S/15.html#L1344" title="Defined at 1344 in src/launcher/java.c.">TranslateApplicationArgs</a>(jargc, jargv, &amp;argc, &amp;argv);
<a id="L270" name="L270"></a> 270         <strong class="reserved">if</strong> (!<a href="../S/15.html#L1415" title="Defined at 1415 in src/launcher/java.c.">AddApplicationOptions</a>(appclassc, appclassv)) <em class="brace">{</em>
<a id="L271" name="L271"></a> 271             <strong class="reserved">return</strong>(1);
<a id="L272" name="L272"></a> 272         <em class="brace">}</em>
<a id="L273" name="L273"></a> 273     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
         /* Set default CLASSPATH */</div>
<a id="L275" name="L275"></a> 275         cpath = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>("CLASSPATH");
<a id="L276" name="L276"></a> 276         <strong class="reserved">if</strong> (cpath == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L277" name="L277"></a> 277             cpath = ".";
<a id="L278" name="L278"></a> 278         <em class="brace">}</em>
<a id="L279" name="L279"></a> 279         <a href="../S/15.html#L788" title="Defined at 788 in src/launcher/java.c.">SetClassPath</a>(cpath);
<a id="L280" name="L280"></a> 280     <em class="brace">}</em>
<a id="L281" name="L281"></a> 281 
<div class="comment">
 Parse command line options; if the return value of
      ParseArguments is false, the program should exit.</div>
<a id="L285" name="L285"></a> 285     <strong class="reserved">if</strong> (!<a href="../S/15.html#L1061" title="Defined at 1061 in src/launcher/java.c.">ParseArguments</a>(&amp;argc, &amp;argv, &amp;mode, &amp;what, &amp;ret, jrepath))
<a id="L286" name="L286"></a> 286     <em class="brace">{</em>
<a id="L287" name="L287"></a> 287         <strong class="reserved">return</strong>(ret);
<a id="L288" name="L288"></a> 288     <em class="brace">}</em>
<a id="L289" name="L289"></a> 289 
<div class="comment">
     /* Override class path if -jar flag was specified */</div>
<a id="L291" name="L291"></a> 291     <strong class="reserved">if</strong> (mode == <a href="../S/5.html#L231" title="Defined at 231 in src/launcher/java.h.">LM_JAR</a>) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292         <div class="comment">
/* Override class path */</div>
<a id="L293" name="L293"></a> 293     <em class="brace">}</em>
<a id="L294" name="L294"></a> 294 
<div class="comment">
     /* set the -Dsun.java.command pseudo property */</div>
<a id="L296" name="L296"></a> 296     <a href="../S/15.html#L1472" title="Defined at 1472 in src/launcher/java.c.">SetJavaCommandLineProp</a>(what, argc, argv);
<a id="L297" name="L297"></a> 297 
<div class="comment">
     /* Set the -Dsun.java.launcher pseudo property */</div>
<a id="L299" name="L299"></a> 299     <a href="../S/15.html#L1522" title="Defined at 1522 in src/launcher/java.c.">SetJavaLauncherProp</a>();
<a id="L300" name="L300"></a> 300 
<div class="comment">
     /* set the -Dsun.java.launcher.* platform properties */</div>
<a id="L302" name="L302"></a> 302     <a href="../S/1.html#L1234" title="Defined at 1234 in src/launcher/java_md.c.">SetJavaLauncherPlatformProps</a>();
<a id="L303" name="L303"></a> 303 
<a id="L304" name="L304"></a> 304     <strong class="reserved">return</strong> <a href="../S/1.html#L1381" title="Defined at 1381 in src/launcher/java_md.c.">JVMInit</a>(&amp;ifn, threadStackSize, argc, argv, mode, what, ret);
<a id="L305" name="L305"></a> 305 <em class="brace">}</em>
<div class="comment">
  Always detach the main thread so that it appears to have ended when
  the application's main method exits.  This will invoke the
  uncaught exception handler machinery if main threw an
  exception.  An uncaught exception handler cannot change the
  launcher's return code except by calling System.exit.
  Wait for all non-daemon threads to end, then destroy the VM.
  This will actually create a trivial new Java waiter thread
  named "DestroyJavaVM", but this will be seen as a different
  thread from the one that executed main, even though they are
  the same C thread.  This allows mainThread.join() and
  mainThread.isAlive() to work as expected.</div>
<a id="L320" name="L320"></a> 320 <em class="sharp">#define</em> <a href="../R/4442.html" title="Multiple referred from 6 places.">LEAVE</a>() \
<a id="L321" name="L321"></a> 321     <strong class="reserved">do</strong> <em class="brace">{</em> \
<a id="L322" name="L322"></a> 322         <strong class="reserved">if</strong> ((*vm)-&gt;DetachCurrentThread(vm) != JNI_OK) <em class="brace">{</em> \
<a id="L323" name="L323"></a> 323             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L46" title="Defined at 46 in src/launcher/emessages.h.">JVM_ERROR2</a>); \
<a id="L324" name="L324"></a> 324             ret = 1; \
<a id="L325" name="L325"></a> 325         <em class="brace">}</em> \
<a id="L326" name="L326"></a> 326         <strong class="reserved">if</strong> (JNI_TRUE) <em class="brace">{</em> \
<a id="L327" name="L327"></a> 327             (*vm)-&gt;DestroyJavaVM(vm); \
<a id="L328" name="L328"></a> 328             <strong class="reserved">return</strong> ret; \
<a id="L329" name="L329"></a> 329         <em class="brace">}</em> \
<a id="L330" name="L330"></a> 330     <em class="brace">}</em> <strong class="reserved">while</strong> (JNI_FALSE)
<a id="L331" name="L331"></a> 331 
<a id="L332" name="L332"></a> 332 <em class="sharp">#define</em> <a href="../R/1052.html" title="Multiple referred from 3 places.">CHECK_EXCEPTION_NULL_LEAVE</a>(CENL_exception) \
<a id="L333" name="L333"></a> 333     <strong class="reserved">do</strong> <em class="brace">{</em> \
<a id="L334" name="L334"></a> 334         <strong class="reserved">if</strong> ((*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;ExceptionOccurred(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)) <em class="brace">{</em> \
<a id="L335" name="L335"></a> 335             <a href="../S/1.html#L663" title="Defined at 663 in src/launcher/java_md.c.">JLI_ReportExceptionDescription</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>); \
<a id="L336" name="L336"></a> 336             <a href="../S/15.html#L320" title="Defined at 320 in src/launcher/java.c.">LEAVE</a>(); \
<a id="L337" name="L337"></a> 337         <em class="brace">}</em> \
<a id="L338" name="L338"></a> 338         <strong class="reserved">if</strong> ((CENL_exception) == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em> \
<a id="L339" name="L339"></a> 339             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L36" title="Defined at 36 in src/launcher/emessages.h.">JNI_ERROR</a>); \
<a id="L340" name="L340"></a> 340             <a href="../S/15.html#L320" title="Defined at 320 in src/launcher/java.c.">LEAVE</a>(); \
<a id="L341" name="L341"></a> 341         <em class="brace">}</em> \
<a id="L342" name="L342"></a> 342     <em class="brace">}</em> <strong class="reserved">while</strong> (JNI_FALSE)
<a id="L343" name="L343"></a> 343 
<a id="L344" name="L344"></a> 344 <em class="sharp">#define</em> <a href="../R/1051.html" title="Multiple referred from 3 places.">CHECK_EXCEPTION_LEAVE</a>(CEL_return_value) \
<a id="L345" name="L345"></a> 345     <strong class="reserved">do</strong> <em class="brace">{</em> \
<a id="L346" name="L346"></a> 346         <strong class="reserved">if</strong> ((*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;ExceptionOccurred(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)) <em class="brace">{</em> \
<a id="L347" name="L347"></a> 347             <a href="../S/1.html#L663" title="Defined at 663 in src/launcher/java_md.c.">JLI_ReportExceptionDescription</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>); \
<a id="L348" name="L348"></a> 348             ret = (CEL_return_value); \
<a id="L349" name="L349"></a> 349             <a href="../S/15.html#L320" title="Defined at 320 in src/launcher/java.c.">LEAVE</a>(); \
<a id="L350" name="L350"></a> 350         <em class="brace">}</em> \
<a id="L351" name="L351"></a> 351     <em class="brace">}</em> <strong class="reserved">while</strong> (JNI_FALSE)
<a id="L352" name="L352"></a> 352 
<a id="L353" name="L353"></a> 353 <strong class="reserved">int</strong> JNICALL
<a id="L354" name="L354"></a> 354 <a href="../R/4295.html" title="Multiple referred from 2 places.">JavaMain</a>(<strong class="reserved">void</strong> * _args)
<a id="L355" name="L355"></a> 355 <em class="brace">{</em>
<a id="L356" name="L356"></a> 356     <a href="../S/5.html#L243" title="Defined at 243 in src/launcher/java.h.">JavaMainArgs</a> *args = (<a href="../S/5.html#L243" title="Defined at 243 in src/launcher/java.h.">JavaMainArgs</a> *)_args;
<a id="L357" name="L357"></a> 357     <strong class="reserved">int</strong> argc = args-&gt;argc;
<a id="L358" name="L358"></a> 358     <strong class="reserved">char</strong> **argv = args-&gt;argv;
<a id="L359" name="L359"></a> 359     <strong class="reserved">int</strong> mode = args-&gt;mode;
<a id="L360" name="L360"></a> 360     <strong class="reserved">char</strong> *what = args-&gt;what;
<a id="L361" name="L361"></a> 361     <a href="../S/5.html#L88" title="Defined at 88 in src/launcher/java.h.">InvocationFunctions</a> ifn = args-&gt;ifn;
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363     JavaVM *vm = 0;
<a id="L364" name="L364"></a> 364     JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a> = 0;
<a id="L365" name="L365"></a> 365     jclass mainClass = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L366" name="L366"></a> 366     jclass appClass = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>; <em class="comment">// actual application class being launched</em>
<a id="L367" name="L367"></a> 367     jmethodID mainID;
<a id="L368" name="L368"></a> 368     jobjectArray mainArgs;
<a id="L369" name="L369"></a> 369     <strong class="reserved">int</strong> ret = 0;
<a id="L370" name="L370"></a> 370     jlong <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L371" name="L371"></a> 371 
<a id="L372" name="L372"></a> 372     <a href="../S/1.html#L1396" title="Defined at 1396 in src/launcher/java_md.c.">RegisterThread</a>();
<a id="L373" name="L373"></a> 373 
<div class="comment">
     /* Initialize the virtual machine */</div>
<a id="L375" name="L375"></a> 375     <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L376" name="L376"></a> 376     <strong class="reserved">if</strong> (!<a href="../S/15.html#L1191" title="Defined at 1191 in src/launcher/java.c.">InitializeJVM</a>(&amp;vm, &amp;<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, &amp;ifn)) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377         <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L45" title="Defined at 45 in src/launcher/emessages.h.">JVM_ERROR1</a>);
<a id="L378" name="L378"></a> 378         <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L379" name="L379"></a> 379     <em class="brace">}</em>
<a id="L380" name="L380"></a> 380 
<a id="L381" name="L381"></a> 381     <strong class="reserved">if</strong> (showSettings != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L382" name="L382"></a> 382         <a href="../S/15.html#L1550" title="Defined at 1550 in src/launcher/java.c.">ShowSettings</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, showSettings);
<a id="L383" name="L383"></a> 383         <a href="../S/15.html#L344" title="Defined at 344 in src/launcher/java.c.">CHECK_EXCEPTION_LEAVE</a>(1);
<a id="L384" name="L384"></a> 384     <em class="brace">}</em>
<a id="L385" name="L385"></a> 385 
<a id="L386" name="L386"></a> 386     <strong class="reserved">if</strong> (printVersion || showVersion) <em class="brace">{</em>
<a id="L387" name="L387"></a> 387         <a href="../S/15.html#L1530" title="Defined at 1530 in src/launcher/java.c.">PrintJavaVersion</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, showVersion);
<a id="L388" name="L388"></a> 388         <a href="../S/15.html#L344" title="Defined at 344 in src/launcher/java.c.">CHECK_EXCEPTION_LEAVE</a>(0);
<a id="L389" name="L389"></a> 389         <strong class="reserved">if</strong> (printVersion) <em class="brace">{</em>
<a id="L390" name="L390"></a> 390             <a href="../S/15.html#L320" title="Defined at 320 in src/launcher/java.c.">LEAVE</a>();
<a id="L391" name="L391"></a> 391         <em class="brace">}</em>
<a id="L392" name="L392"></a> 392     <em class="brace">}</em>
<a id="L393" name="L393"></a> 393 
<div class="comment">
     /* If the user specified neither a class name nor a JAR file */</div>
<a id="L395" name="L395"></a> 395     <strong class="reserved">if</strong> (printXUsage || <a href="../D/29718.html" title="Multiple defined in 2 places.">printUsage</a> || what == 0 || mode == <a href="../S/5.html#L229" title="Defined at 229 in src/launcher/java.h.">LM_UNKNOWN</a>) <em class="brace">{</em>
<a id="L396" name="L396"></a> 396         <a href="../S/15.html#L1572" title="Defined at 1572 in src/launcher/java.c.">PrintUsage</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, printXUsage);
<a id="L397" name="L397"></a> 397         <a href="../S/15.html#L344" title="Defined at 344 in src/launcher/java.c.">CHECK_EXCEPTION_LEAVE</a>(1);
<a id="L398" name="L398"></a> 398         <a href="../S/15.html#L320" title="Defined at 320 in src/launcher/java.c.">LEAVE</a>();
<a id="L399" name="L399"></a> 399     <em class="brace">}</em>
<a id="L400" name="L400"></a> 400 
<a id="L401" name="L401"></a> 401     <div class="comment">
/* after last possible PrintUsage() */</div>
<a id="L402" name="L402"></a> 402 
<a id="L403" name="L403"></a> 403     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L404" name="L404"></a> 404         <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L405" name="L405"></a> 405         <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("%ld micro seconds to InitializeJVM\n",
<a id="L406" name="L406"></a> 406                (<strong class="reserved">long</strong>)(jint)<a href="../S/1.html#L531" title="Defined at 531 in src/launcher/java_md.c.">Counter2Micros</a>(<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>-<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>));
<a id="L407" name="L407"></a> 407     <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<div class="comment">
     /* At this stage, argc/argv have the application's arguments */</div>
<a id="L410" name="L410"></a> 410     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>())<em class="brace">{</em>
<a id="L411" name="L411"></a> 411         <strong class="reserved">int</strong> i;
<a id="L412" name="L412"></a> 412         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("%s is '%s'\n", launchModeNames[mode], what);
<a id="L413" name="L413"></a> 413         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("App's argc is %d\n", argc);
<a id="L414" name="L414"></a> 414         <strong class="reserved">for</strong> (i=0; i &lt; argc; i++) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("    argv[%2d] = '%s'\n", i, argv[i]);
<a id="L416" name="L416"></a> 416         <em class="brace">}</em>
<a id="L417" name="L417"></a> 417     <em class="brace">}</em>
<a id="L418" name="L418"></a> 418 
<a id="L419" name="L419"></a> 419     ret = 1;
<a id="L420" name="L420"></a> 420 
<div class="comment">
      Get the application's main class.
      See bugid 5030265.  The Main-Class name has already been parsed
      from the manifest, but not parsed properly for UTF-8 support.
      Hence the code here ignores the value previously extracted and
      uses the pre-existing code to reextract the value.  This is
      possibly an end of release cycle expedient.  However, it has
      also been discovered that passing some character sets through
      the environment has "strange" behavior on some variants of
      Windows.  Hence, maybe the manifest parsing code local to the
      launcher should never be enhanced.
      Hence, future work should either:
          1)   Correct the local parsing code and verify that the
               Main-Class attribute gets properly passed through
               all environments,
          2)   Remove the vestages of maintaining main_class through
               the environment (and remove these comments).
      This method also correctly handles launching existing JavaFX
      applications that may or may not have a Main-Class manifest entry.</div>
<a id="L444" name="L444"></a> 444     mainClass = <a href="../S/15.html#L1292" title="Defined at 1292 in src/launcher/java.c.">LoadMainClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, mode, what);
<a id="L445" name="L445"></a> 445     <a href="../S/15.html#L332" title="Defined at 332 in src/launcher/java.c.">CHECK_EXCEPTION_NULL_LEAVE</a>(mainClass);
<div class="comment">
      In some cases when launching an application that needs a helper, e.g., a
      JavaFX application with no main method, the mainClass will not be the
      applications own main class but rather a helper class. To keep things
      consistent in the UI we need to track and report the application main class.</div>
<a id="L452" name="L452"></a> 452     appClass = <a href="../S/15.html#L1323" title="Defined at 1323 in src/launcher/java.c.">GetApplicationClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L453" name="L453"></a> 453     <a href="../S/5.html#L245" title="Defined at 245 in src/launcher/java.h.">NULL_CHECK_RETURN_VALUE</a>(appClass, -1);
<div class="comment">
      PostJVMInit uses the class name as the application name for GUI purposes,
      for example, on OSX this sets the application name in the menu bar for
      both SWT and JavaFX. So we'll pass the actual application class here
      instead of mainClass as that may be a launcher or helper class instead
      of the application class.</div>
<a id="L461" name="L461"></a> 461     <a href="../S/1.html#L1390" title="Defined at 1390 in src/launcher/java_md.c.">PostJVMInit</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, appClass, vm);
<div class="comment">
      The LoadMainClass not only loads the main class, it will also ensure
      that the main method's signature is correct, therefore further checking
      is not required. The main method is invoked here so that extraneous java
      stacks are not in the application stack trace.</div>
<a id="L468" name="L468"></a> 468     mainID = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, mainClass, "main",
<a id="L469" name="L469"></a> 469                                        "([Ljava/lang/String;)V");
<a id="L470" name="L470"></a> 470     <a href="../S/15.html#L332" title="Defined at 332 in src/launcher/java.c.">CHECK_EXCEPTION_NULL_LEAVE</a>(mainID);
<a id="L471" name="L471"></a> 471 
<div class="comment">
     /* Build platform specific argument array */</div>
<a id="L473" name="L473"></a> 473     mainArgs = <a href="../S/1.html#L1437" title="Defined at 1437 in src/launcher/java_md.c.">CreateApplicationArgs</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, argv, argc);
<a id="L474" name="L474"></a> 474     <a href="../S/15.html#L332" title="Defined at 332 in src/launcher/java.c.">CHECK_EXCEPTION_NULL_LEAVE</a>(mainArgs);
<a id="L475" name="L475"></a> 475 
<div class="comment">
     /* Invoke main method. */</div>
<a id="L477" name="L477"></a> 477     (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, mainClass, mainID, mainArgs);
<a id="L478" name="L478"></a> 478 
<div class="comment">
      The launcher's exit code (in the absence of calls to
      System.exit) will be non-zero if main threw an exception.</div>
<a id="L483" name="L483"></a> 483     ret = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;ExceptionOccurred(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>) == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> ? 0 : 1;
<a id="L484" name="L484"></a> 484     <a href="../S/15.html#L320" title="Defined at 320 in src/launcher/java.c.">LEAVE</a>();
<a id="L485" name="L485"></a> 485 <em class="brace">}</em>
<a id="L486" name="L486"></a> 486 
<div class="comment">
  Checks the command line options to find which JVM type was
  specified.  If no command line option was given for the JVM type,
  the default type is used.  The environment variable
  JDK_ALTERNATE_VM and the command line option -XXaltjvm= are also
  checked as ways of specifying which JVM type to invoke.</div>
<a id="L494" name="L494"></a> 494 <strong class="reserved">char</strong> *
<a id="L495" name="L495"></a> 495 <a href="../R/1308.html" title="Multiple referred from 2 places.">CheckJvmType</a>(<strong class="reserved">int</strong> *pargc, <strong class="reserved">char</strong> ***argv, jboolean speculative) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496     <strong class="reserved">int</strong> i, argi;
<a id="L497" name="L497"></a> 497     <strong class="reserved">int</strong> argc;
<a id="L498" name="L498"></a> 498     <strong class="reserved">char</strong> **newArgv;
<a id="L499" name="L499"></a> 499     <strong class="reserved">int</strong> newArgvIdx = 0;
<a id="L500" name="L500"></a> 500     <strong class="reserved">int</strong> isVMType;
<a id="L501" name="L501"></a> 501     <strong class="reserved">int</strong> jvmidx = -1;
<a id="L502" name="L502"></a> 502     <strong class="reserved">char</strong> *jvmtype = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>("JDK_ALTERNATE_VM");
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504     argc = *pargc;
<a id="L505" name="L505"></a> 505 
<div class="comment">
     /* To make things simpler we always copy the argv array */</div>
<a id="L507" name="L507"></a> 507     newArgv = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>((argc + 1) * <strong class="reserved">sizeof</strong>(<strong class="reserved">char</strong> *));
<a id="L508" name="L508"></a> 508 
<div class="comment">
     /* The program name is always present */</div>
<a id="L510" name="L510"></a> 510     newArgv[newArgvIdx++] = (*argv)[0];
<a id="L511" name="L511"></a> 511 
<a id="L512" name="L512"></a> 512     <strong class="reserved">for</strong> (argi = 1; argi &lt; argc; argi++) <em class="brace">{</em>
<a id="L513" name="L513"></a> 513         <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = (*argv)[argi];
<a id="L514" name="L514"></a> 514         isVMType = 0;
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516         <strong class="reserved">if</strong> (<a href="../S/15.html#L1965" title="Defined at 1965 in src/launcher/java.c.">IsJavaArgs</a>()) <em class="brace">{</em>
<a id="L517" name="L517"></a> 517             <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0] != '-') <em class="brace">{</em>
<a id="L518" name="L518"></a> 518                 newArgv[newArgvIdx++] = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L519" name="L519"></a> 519                 <strong class="reserved">continue</strong>;
<a id="L520" name="L520"></a> 520             <em class="brace">}</em>
<a id="L521" name="L521"></a> 521         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L522" name="L522"></a> 522             <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-classpath") == 0 ||
<a id="L523" name="L523"></a> 523                 <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-cp") == 0) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524                 newArgv[newArgvIdx++] = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L525" name="L525"></a> 525                 argi++;
<a id="L526" name="L526"></a> 526                 <strong class="reserved">if</strong> (argi &lt; argc) <em class="brace">{</em>
<a id="L527" name="L527"></a> 527                     newArgv[newArgvIdx++] = (*argv)[argi];
<a id="L528" name="L528"></a> 528                 <em class="brace">}</em>
<a id="L529" name="L529"></a> 529                 <strong class="reserved">continue</strong>;
<a id="L530" name="L530"></a> 530             <em class="brace">}</em>
<a id="L531" name="L531"></a> 531             <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0] != '-') <strong class="reserved">break</strong>;
<a id="L532" name="L532"></a> 532         <em class="brace">}</em>
<a id="L533" name="L533"></a> 533 
<div class="comment">
         /* Did the user pass an explicit VM type? */</div>
<a id="L535" name="L535"></a> 535         i = <a href="../S/15.html#L1844" title="Defined at 1844 in src/launcher/java.c.">KnownVMIndex</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>);
<a id="L536" name="L536"></a> 536         <strong class="reserved">if</strong> (i &gt;= 0) <em class="brace">{</em>
<a id="L537" name="L537"></a> 537             jvmtype = knownVMs[jvmidx = i].<div class="comment">
; /* skip the - */</div>
<a id="L538" name="L538"></a> 538             isVMType = 1;
<a id="L539" name="L539"></a> 539             *pargc = *pargc - 1;
<a id="L540" name="L540"></a> 540         <em class="brace">}</em>
<a id="L541" name="L541"></a> 541 
<div class="comment">
         /* Did the user specify an "alternate" VM? */</div>
<a id="L543" name="L543"></a> 543         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-XXaltjvm=") == 0 || <a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-J-XXaltjvm=") == 0) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544             isVMType = 1;
<a id="L545" name="L545"></a> 545             jvmtype = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>+((<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1]=='X')? 10 : 12);
<a id="L546" name="L546"></a> 546             jvmidx = -1;
<a id="L547" name="L547"></a> 547         <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<a id="L549" name="L549"></a> 549         <strong class="reserved">if</strong> (!isVMType) <em class="brace">{</em>
<a id="L550" name="L550"></a> 550             newArgv[newArgvIdx++] = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L551" name="L551"></a> 551         <em class="brace">}</em>
<a id="L552" name="L552"></a> 552     <em class="brace">}</em>
<a id="L553" name="L553"></a> 553 
<div class="comment">
      Finish copying the arguments if we aborted the above loop.
      NOTE that if we aborted via "break" then we did NOT copy the
      last argument above, and in addition argi will be less than
      argc.</div>
<a id="L560" name="L560"></a> 560     <strong class="reserved">while</strong> (argi &lt; argc) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561         newArgv[newArgvIdx++] = (*argv)[argi];
<a id="L562" name="L562"></a> 562         argi++;
<a id="L563" name="L563"></a> 563     <em class="brace">}</em>
<a id="L564" name="L564"></a> 564 
<div class="comment">
     /* argv is null-terminated */</div>
<a id="L566" name="L566"></a> 566     newArgv[newArgvIdx] = 0;
<a id="L567" name="L567"></a> 567 
<div class="comment">
     /* Copy back argv */</div>
<a id="L569" name="L569"></a> 569     *argv = newArgv;
<a id="L570" name="L570"></a> 570     *pargc = newArgvIdx;
<a id="L571" name="L571"></a> 571 
<div class="comment">
     /* use the default VM type if not specified (no alias processing) */</div>
<a id="L573" name="L573"></a> 573     <strong class="reserved">if</strong> (jvmtype == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574       <strong class="reserved">char</strong>* <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = knownVMs[0].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+1;
<div class="comment">
       /* Use a different VM type if we are on a server class machine? */</div>
<a id="L576" name="L576"></a> 576       <strong class="reserved">if</strong> ((knownVMs[0].flag == <a href="../S/15.html#L134" title="Defined at 134 in src/launcher/java.c.">VM_IF_SERVER_CLASS</a>) &amp;&amp;
<a id="L577" name="L577"></a> 577           (<a href="../S/1.html#L677" title="Defined at 677 in src/launcher/java_md.c.">ServerClassMachine</a>() == JNI_TRUE)) <em class="brace">{</em>
<a id="L578" name="L578"></a> 578         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = knownVMs[0].server_class+1;
<a id="L579" name="L579"></a> 579       <em class="brace">}</em>
<a id="L580" name="L580"></a> 580       <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("Default VM: %s\n", <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L581" name="L581"></a> 581       <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L582" name="L582"></a> 582     <em class="brace">}</em>
<a id="L583" name="L583"></a> 583 
<div class="comment">
     /* if using an alternate VM, no alias processing */</div>
<a id="L585" name="L585"></a> 585     <strong class="reserved">if</strong> (jvmidx &lt; 0)
<a id="L586" name="L586"></a> 586       <strong class="reserved">return</strong> jvmtype;
<a id="L587" name="L587"></a> 587 
<div class="comment">
     /* Resolve aliases first */</div>
<a id="L589" name="L589"></a> 589     <em class="brace">{</em>
<a id="L590" name="L590"></a> 590       <strong class="reserved">int</strong> loopCount = 0;
<a id="L591" name="L591"></a> 591       <strong class="reserved">while</strong> (knownVMs[jvmidx].flag == <a href="../S/15.html#L131" title="Defined at 131 in src/launcher/java.c.">VM_ALIASED_TO</a>) <em class="brace">{</em>
<a id="L592" name="L592"></a> 592         <strong class="reserved">int</strong> nextIdx = <a href="../S/15.html#L1844" title="Defined at 1844 in src/launcher/java.c.">KnownVMIndex</a>(knownVMs[jvmidx].alias);
<a id="L593" name="L593"></a> 593 
<a id="L594" name="L594"></a> 594         <strong class="reserved">if</strong> (loopCount &gt; knownVMsCount) <em class="brace">{</em>
<a id="L595" name="L595"></a> 595           <strong class="reserved">if</strong> (!speculative) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L65" title="Defined at 65 in src/launcher/emessages.h.">CFG_ERROR1</a>);
<a id="L597" name="L597"></a> 597             <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L598" name="L598"></a> 598           <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L599" name="L599"></a> 599             <strong class="reserved">return</strong> "ERROR";
<div class="comment">
             /* break; */</div>
<a id="L601" name="L601"></a> 601           <em class="brace">}</em>
<a id="L602" name="L602"></a> 602         <em class="brace">}</em>
<a id="L603" name="L603"></a> 603 
<a id="L604" name="L604"></a> 604         <strong class="reserved">if</strong> (nextIdx &lt; 0) <em class="brace">{</em>
<a id="L605" name="L605"></a> 605           <strong class="reserved">if</strong> (!speculative) <em class="brace">{</em>
<a id="L606" name="L606"></a> 606             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L66" title="Defined at 66 in src/launcher/emessages.h.">CFG_ERROR2</a>, knownVMs[jvmidx].alias);
<a id="L607" name="L607"></a> 607             <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L608" name="L608"></a> 608           <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L609" name="L609"></a> 609             <strong class="reserved">return</strong> "ERROR";
<a id="L610" name="L610"></a> 610           <em class="brace">}</em>
<a id="L611" name="L611"></a> 611         <em class="brace">}</em>
<a id="L612" name="L612"></a> 612         jvmidx = nextIdx;
<a id="L613" name="L613"></a> 613         jvmtype = knownVMs[jvmidx].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+1;
<a id="L614" name="L614"></a> 614         loopCount++;
<a id="L615" name="L615"></a> 615       <em class="brace">}</em>
<a id="L616" name="L616"></a> 616     <em class="brace">}</em>
<a id="L617" name="L617"></a> 617 
<a id="L618" name="L618"></a> 618     <strong class="reserved">switch</strong> (knownVMs[jvmidx].flag) <em class="brace">{</em>
<a id="L619" name="L619"></a> 619     <strong class="reserved">case</strong> <a href="../S/15.html#L132" title="Defined at 132 in src/launcher/java.c.">VM_WARN</a>:
<a id="L620" name="L620"></a> 620         <strong class="reserved">if</strong> (!speculative) <em class="brace">{</em>
<a id="L621" name="L621"></a> 621             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L59" title="Defined at 59 in src/launcher/emessages.h.">CFG_WARN1</a>, jvmtype, knownVMs[0].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> + 1);
<a id="L622" name="L622"></a> 622         <em class="brace">}</em>
<div class="comment">
         /* fall through */</div>
<a id="L624" name="L624"></a> 624     <strong class="reserved">case</strong> <a href="../S/15.html#L135" title="Defined at 135 in src/launcher/java.c.">VM_IGNORE</a>:
<a id="L625" name="L625"></a> 625         jvmtype = knownVMs[jvmidx=0].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> + 1;
<div class="comment">
         /* fall through */</div>
<a id="L627" name="L627"></a> 627     <strong class="reserved">case</strong> <a href="../S/15.html#L130" title="Defined at 130 in src/launcher/java.c.">VM_KNOWN</a>:
<a id="L628" name="L628"></a> 628         <strong class="reserved">break</strong>;
<a id="L629" name="L629"></a> 629     <strong class="reserved">case</strong> <a href="../S/15.html#L133" title="Defined at 133 in src/launcher/java.c.">VM_ERROR</a>:
<a id="L630" name="L630"></a> 630         <strong class="reserved">if</strong> (!speculative) <em class="brace">{</em>
<a id="L631" name="L631"></a> 631             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L67" title="Defined at 67 in src/launcher/emessages.h.">CFG_ERROR3</a>, jvmtype);
<a id="L632" name="L632"></a> 632             <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L633" name="L633"></a> 633         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L634" name="L634"></a> 634             <strong class="reserved">return</strong> "ERROR";
<a id="L635" name="L635"></a> 635         <em class="brace">}</em>
<a id="L636" name="L636"></a> 636     <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638     <strong class="reserved">return</strong> jvmtype;
<a id="L639" name="L639"></a> 639 <em class="brace">}</em>
<a id="L640" name="L640"></a> 640 
<div class="comment">
  static void SetJvmEnvironment(int argc, char **argv);
    Is called just before the JVM is loaded.  We can set env variables
    that are consumed by the JVM.  This function is non-destructive,
    leaving the arg list intact.  The first use is for the JVM flag
    -XX:NativeMemoryTracking=value.</div>
<a id="L648" name="L648"></a> 648 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L649" name="L649"></a> 649 <a href="../R/7170.html" title="Multiple referred from 2 places.">SetJvmEnvironment</a>(<strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv) <em class="brace">{</em>
<a id="L650" name="L650"></a> 650 
<a id="L651" name="L651"></a> 651     <strong class="reserved">static</strong> <strong class="reserved">const</strong> <strong class="reserved">char</strong>*  NMT_Env_Name    = "NMT_LEVEL_";
<a id="L652" name="L652"></a> 652 
<a id="L653" name="L653"></a> 653     <strong class="reserved">int</strong> i;
<a id="L654" name="L654"></a> 654     <strong class="reserved">for</strong> (i = 0; i &lt; argc; i++) <em class="brace">{</em>
<div class="comment">
          The following case checks for "-XX:NativeMemoryTracking=value".
          If value is non null, an environmental variable set to this value
          will be created to be used by the JVM.
          The argument is passed to the JVM, which will check validity.
          The JVM is responsible for removing the env variable.</div>
<a id="L662" name="L662"></a> 662         <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = argv[i];
<a id="L663" name="L663"></a> 663         <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-XX:NativeMemoryTracking=") == 0) <em class="brace">{</em>
<a id="L664" name="L664"></a> 664             <strong class="reserved">int</strong> retval;
<a id="L665" name="L665"></a> 665             <em class="comment">// get what follows this parameter, include "="</em>
<a id="L666" name="L666"></a> 666             size_t pnlen = <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>("-XX:NativeMemoryTracking=");
<a id="L667" name="L667"></a> 667             <strong class="reserved">if</strong> (<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>) &gt; pnlen) <em class="brace">{</em>
<a id="L668" name="L668"></a> 668                 <strong class="reserved">char</strong>* <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> + pnlen;
<a id="L669" name="L669"></a> 669                 size_t pbuflen = pnlen + <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) + 10; <em class="comment">// 10 max pid digits</em>
<a id="L670" name="L670"></a> 670 
<div class="comment">
                  ensures that malloc successful
                  DONT JLI_MemFree() pbuf.  JLI_PutEnv() uses system call
                    that could store the address.</div>
<a id="L676" name="L676"></a> 676                 <strong class="reserved">char</strong> * pbuf = (<strong class="reserved">char</strong>*)<a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(pbuflen);
<a id="L677" name="L677"></a> 677 
<a id="L678" name="L678"></a> 678                 <a href="../D/4578.html" title="Multiple defined in 2 places.">JLI_Snprintf</a>(pbuf, pbuflen, "%s%d=%s", NMT_Env_Name, <a href="../D/4561.html" title="Multiple defined in 2 places.">JLI_GetPid</a>(), <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L679" name="L679"></a> 679                 retval = <a href="../D/4572.html" title="Multiple defined in 2 places.">JLI_PutEnv</a>(pbuf);
<a id="L680" name="L680"></a> 680                 <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L681" name="L681"></a> 681                     <strong class="reserved">char</strong>* envName;
<a id="L682" name="L682"></a> 682                     <strong class="reserved">char</strong>* envBuf;
<a id="L683" name="L683"></a> 683 
<a id="L684" name="L684"></a> 684                     <em class="comment">// ensures that malloc successful</em>
<a id="L685" name="L685"></a> 685                     envName = (<strong class="reserved">char</strong>*)<a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(pbuflen);
<a id="L686" name="L686"></a> 686                     <a href="../D/4578.html" title="Multiple defined in 2 places.">JLI_Snprintf</a>(envName, pbuflen, "%s%d", NMT_Env_Name, <a href="../D/4561.html" title="Multiple defined in 2 places.">JLI_GetPid</a>());
<a id="L687" name="L687"></a> 687 
<a id="L688" name="L688"></a> 688                     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("TRACER_MARKER: NativeMemoryTracking: env var is %s\n",envName);
<a id="L689" name="L689"></a> 689                     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("TRACER_MARKER: NativeMemoryTracking: putenv arg %s\n",pbuf);
<a id="L690" name="L690"></a> 690                     envBuf = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>(envName);
<a id="L691" name="L691"></a> 691                     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("TRACER_MARKER: NativeMemoryTracking: got value %s\n",envBuf);
<a id="L692" name="L692"></a> 692                     <a href="../D/16577.html" title="Multiple defined in 8 places.">free</a>(envName);
<a id="L693" name="L693"></a> 693                 <em class="brace">}</em>
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695             <em class="brace">}</em>
<a id="L696" name="L696"></a> 696 
<a id="L697" name="L697"></a> 697         <em class="brace">}</em>
<a id="L698" name="L698"></a> 698 
<a id="L699" name="L699"></a> 699     <em class="brace">}</em>
<a id="L700" name="L700"></a> 700 <em class="brace">}</em>
<a id="L701" name="L701"></a> 701 
<div class="comment">
 /* copied from HotSpot function "atomll()" */</div>
<a id="L703" name="L703"></a> 703 <strong class="reserved">static</strong> <strong class="reserved">int</strong>
<a id="L704" name="L704"></a> 704 <a href="../R/24661.html" title="Multiple referred from 3 places.">parse_size</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *s, jlong *<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>) <em class="brace">{</em>
<a id="L705" name="L705"></a> 705   jlong n = 0;
<a id="L706" name="L706"></a> 706   <strong class="reserved">int</strong> args_read = sscanf(s, <a href="../S/1.html#L1144" title="Defined at 1144 in src/launcher/java_md.c.">jlong_format_specifier</a>(), &amp;n);
<a id="L707" name="L707"></a> 707   <strong class="reserved">if</strong> (args_read != 1) <em class="brace">{</em>
<a id="L708" name="L708"></a> 708     <strong class="reserved">return</strong> 0;
<a id="L709" name="L709"></a> 709   <em class="brace">}</em>
<a id="L710" name="L710"></a> 710   <strong class="reserved">while</strong> (*s != '\0' &amp;&amp; *s &gt;= '0' &amp;&amp; *s &lt;= '9') <em class="brace">{</em>
<a id="L711" name="L711"></a> 711     s++;
<a id="L712" name="L712"></a> 712   <em class="brace">}</em>
<a id="L713" name="L713"></a> 713   <em class="comment">// 4705540: illegal if more characters are found after the first non-digit</em>
<a id="L714" name="L714"></a> 714   <strong class="reserved">if</strong> (<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s) &gt; 1) <em class="brace">{</em>
<a id="L715" name="L715"></a> 715     <strong class="reserved">return</strong> 0;
<a id="L716" name="L716"></a> 716   <em class="brace">}</em>
<a id="L717" name="L717"></a> 717   <strong class="reserved">switch</strong> (*s) <em class="brace">{</em>
<a id="L718" name="L718"></a> 718     <strong class="reserved">case</strong> 'T': <strong class="reserved">case</strong> 't':
<a id="L719" name="L719"></a> 719       *<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = n * <a href="../S/5.html#L51" title="Defined at 51 in src/launcher/java.h.">GB</a> * <a href="../S/5.html#L49" title="Defined at 49 in src/launcher/java.h.">KB</a>;
<a id="L720" name="L720"></a> 720       <strong class="reserved">return</strong> 1;
<a id="L721" name="L721"></a> 721     <strong class="reserved">case</strong> 'G': <strong class="reserved">case</strong> 'g':
<a id="L722" name="L722"></a> 722       *<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = n * <a href="../S/5.html#L51" title="Defined at 51 in src/launcher/java.h.">GB</a>;
<a id="L723" name="L723"></a> 723       <strong class="reserved">return</strong> 1;
<a id="L724" name="L724"></a> 724     <strong class="reserved">case</strong> 'M': <strong class="reserved">case</strong> 'm':
<a id="L725" name="L725"></a> 725       *<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = n * <a href="../S/5.html#L50" title="Defined at 50 in src/launcher/java.h.">MB</a>;
<a id="L726" name="L726"></a> 726       <strong class="reserved">return</strong> 1;
<a id="L727" name="L727"></a> 727     <strong class="reserved">case</strong> 'K': <strong class="reserved">case</strong> 'k':
<a id="L728" name="L728"></a> 728       *<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = n * <a href="../S/5.html#L49" title="Defined at 49 in src/launcher/java.h.">KB</a>;
<a id="L729" name="L729"></a> 729       <strong class="reserved">return</strong> 1;
<a id="L730" name="L730"></a> 730     <strong class="reserved">case</strong> '\0':
<a id="L731" name="L731"></a> 731       *<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = n;
<a id="L732" name="L732"></a> 732       <strong class="reserved">return</strong> 1;
<a id="L733" name="L733"></a> 733     <strong class="reserved">default</strong>:
<div class="comment">
       /* Create JVM with default stack and let VM handle malformed -Xss string*/</div>
<a id="L735" name="L735"></a> 735       <strong class="reserved">return</strong> 0;
<a id="L736" name="L736"></a> 736   <em class="brace">}</em>
<a id="L737" name="L737"></a> 737 <em class="brace">}</em>
<a id="L738" name="L738"></a> 738 
<div class="comment">
  Adds a new VM option with the given given name and value.</div>
<a id="L742" name="L742"></a> 742 <strong class="reserved">void</strong>
<a id="L743" name="L743"></a> 743 <a href="../R/323.html" title="Multiple referred from 21 places.">AddOption</a>(<strong class="reserved">char</strong> *<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, <strong class="reserved">void</strong> *<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>)
<a id="L744" name="L744"></a> 744 <em class="brace">{</em>
<div class="comment">
      Expand options array if needed to accommodate at least one more
      VM option.</div>
<a id="L749" name="L749"></a> 749     <strong class="reserved">if</strong> (numOptions &gt;= maxOptions) <em class="brace">{</em>
<a id="L750" name="L750"></a> 750         <strong class="reserved">if</strong> (<a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a> == 0) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751             maxOptions = 4;
<a id="L752" name="L752"></a> 752             <a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a> = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(maxOptions * <strong class="reserved">sizeof</strong>(JavaVMOption));
<a id="L753" name="L753"></a> 753         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L754" name="L754"></a> 754             JavaVMOption *tmp;
<a id="L755" name="L755"></a> 755             maxOptions *= 2;
<a id="L756" name="L756"></a> 756             tmp = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(maxOptions * <strong class="reserved">sizeof</strong>(JavaVMOption));
<a id="L757" name="L757"></a> 757             memcpy(tmp, <a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>, numOptions * <strong class="reserved">sizeof</strong>(JavaVMOption));
<a id="L758" name="L758"></a> 758             <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(<a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>);
<a id="L759" name="L759"></a> 759             <a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a> = tmp;
<a id="L760" name="L760"></a> 760         <em class="brace">}</em>
<a id="L761" name="L761"></a> 761     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762     <a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>[numOptions].optionString = <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>;
<a id="L763" name="L763"></a> 763     <a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>[numOptions++].extraInfo = <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>;
<a id="L764" name="L764"></a> 764 
<a id="L765" name="L765"></a> 765     <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, "-Xss") == 0) <em class="brace">{</em>
<a id="L766" name="L766"></a> 766         jlong tmp;
<a id="L767" name="L767"></a> 767         <strong class="reserved">if</strong> (<a href="../S/15.html#L704" title="Defined at 704 in src/launcher/java.c.">parse_size</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> + 4, &amp;tmp)) <em class="brace">{</em>
<a id="L768" name="L768"></a> 768             threadStackSize = tmp;
<a id="L769" name="L769"></a> 769         <em class="brace">}</em>
<a id="L770" name="L770"></a> 770     <em class="brace">}</em>
<a id="L771" name="L771"></a> 771 
<a id="L772" name="L772"></a> 772     <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, "-Xmx") == 0) <em class="brace">{</em>
<a id="L773" name="L773"></a> 773         jlong tmp;
<a id="L774" name="L774"></a> 774         <strong class="reserved">if</strong> (<a href="../S/15.html#L704" title="Defined at 704 in src/launcher/java.c.">parse_size</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> + 4, &amp;tmp)) <em class="brace">{</em>
<a id="L775" name="L775"></a> 775             maxHeapSize = tmp;
<a id="L776" name="L776"></a> 776         <em class="brace">}</em>
<a id="L777" name="L777"></a> 777     <em class="brace">}</em>
<a id="L778" name="L778"></a> 778 
<a id="L779" name="L779"></a> 779     <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>, "-Xms") == 0) <em class="brace">{</em>
<a id="L780" name="L780"></a> 780         jlong tmp;
<a id="L781" name="L781"></a> 781         <strong class="reserved">if</strong> (<a href="../S/15.html#L704" title="Defined at 704 in src/launcher/java.c.">parse_size</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> + 4, &amp;tmp)) <em class="brace">{</em>
<a id="L782" name="L782"></a> 782            initialHeapSize = tmp;
<a id="L783" name="L783"></a> 783         <em class="brace">}</em>
<a id="L784" name="L784"></a> 784     <em class="brace">}</em>
<a id="L785" name="L785"></a> 785 <em class="brace">}</em>
<a id="L786" name="L786"></a> 786 
<a id="L787" name="L787"></a> 787 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L788" name="L788"></a> 788 <a href="../R/7163.html" title="Multiple referred from 4 places.">SetClassPath</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *s)
<a id="L789" name="L789"></a> 789 <em class="brace">{</em>
<a id="L790" name="L790"></a> 790     <strong class="reserved">char</strong> *def;
<a id="L791" name="L791"></a> 791     <strong class="reserved">const</strong> <strong class="reserved">char</strong> *orig = s;
<a id="L792" name="L792"></a> 792     <strong class="reserved">static</strong> <strong class="reserved">const</strong> <strong class="reserved">char</strong> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>[] = "-Djava.class.path=%s";
<div class="comment">
      usually we should not get a null pointer, but there are cases where
      we might just get one, in which case we simply ignore it, and let the
      caller deal with it</div>
<a id="L798" name="L798"></a> 798     <strong class="reserved">if</strong> (s == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L799" name="L799"></a> 799         <strong class="reserved">return</strong>;
<a id="L800" name="L800"></a> 800     s = <a href="../S/17.html#L410" title="Defined at 410 in src/launcher/wildcard.c.">JLI_WildcardExpandClasspath</a>(s);
<a id="L801" name="L801"></a> 801     <strong class="reserved">if</strong> (<strong class="reserved">sizeof</strong>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>) - 2 + <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s) &lt; <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s))
<a id="L802" name="L802"></a> 802         <em class="comment">// s is corrupted after wildcard expansion</em>
<a id="L803" name="L803"></a> 803         <strong class="reserved">return</strong>;
<a id="L804" name="L804"></a> 804     def = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<strong class="reserved">sizeof</strong>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>)
<div class="comment">
                        - 2 /* strlen("%s") */</div>
<a id="L806" name="L806"></a> 806                        + <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s));
<a id="L807" name="L807"></a> 807     sprintf(def, <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>, s);
<a id="L808" name="L808"></a> 808     <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(def, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L809" name="L809"></a> 809     <strong class="reserved">if</strong> (s != orig)
<a id="L810" name="L810"></a> 810         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>((<strong class="reserved">char</strong> *) s);
<a id="L811" name="L811"></a> 811 <em class="brace">}</em>
<a id="L812" name="L812"></a> 812 
<div class="comment">
  The SelectVersion() routine ensures that an appropriate version of
  the JRE is running.  The specification for the appropriate version
  is obtained from either the manifest of a jar file (preferred) or
  from command line options.
  The routine also parses splash screen command line options and
  passes on their values in private environment variables.</div>
<a id="L821" name="L821"></a> 821 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L822" name="L822"></a> 822 <a href="../R/7006.html" title="Multiple referred from 2 places.">SelectVersion</a>(<strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv, <strong class="reserved">char</strong> **main_class)
<a id="L823" name="L823"></a> 823 <em class="brace">{</em>
<a id="L824" name="L824"></a> 824     <strong class="reserved">char</strong>    *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L825" name="L825"></a> 825     <strong class="reserved">char</strong>    **new_argv;
<a id="L826" name="L826"></a> 826     <strong class="reserved">char</strong>    **new_argp;
<a id="L827" name="L827"></a> 827     <strong class="reserved">char</strong>    *operand;
<a id="L828" name="L828"></a> 828     <strong class="reserved">char</strong>    *<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a> = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L829" name="L829"></a> 829     <strong class="reserved">char</strong>    *jre = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L830" name="L830"></a> 830     <strong class="reserved">int</strong>     jarflag = 0;
<a id="L831" name="L831"></a> 831     <strong class="reserved">int</strong>     headlessflag = 0;
<a id="L832" name="L832"></a> 832     <div class="comment">
;               /* -1 implies not known */</div>
<a id="L833" name="L833"></a> 833     <a href="../D/27439.html" title="Multiple defined in 2 places.">manifest_info</a> <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>;
<a id="L834" name="L834"></a> 834     <strong class="reserved">char</strong>    env_entry[<a href="../S/10.html#L40" title="Defined at 40 in src/launcher/java_md.h.">MAXNAMELEN</a> + 24] = <a href="../S/5.html#L72" title="Defined at 72 in src/launcher/java.h.">ENV_ENTRY</a> "=";
<a id="L835" name="L835"></a> 835     <strong class="reserved">char</strong>    *splash_file_name = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L836" name="L836"></a> 836     <strong class="reserved">char</strong>    *splash_jar_name = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L837" name="L837"></a> 837     <strong class="reserved">char</strong>    *env_in;
<a id="L838" name="L838"></a> 838     <strong class="reserved">int</strong>     res;
<a id="L839" name="L839"></a> 839 
<div class="comment">
      If the version has already been selected, set *main_class
      with the value passed through the environment (if any) and
      simply return.</div>
<a id="L845" name="L845"></a> 845     <strong class="reserved">if</strong> ((env_in = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>(<a href="../S/5.html#L72" title="Defined at 72 in src/launcher/java.h.">ENV_ENTRY</a>)) != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L846" name="L846"></a> 846         <strong class="reserved">if</strong> (*env_in != '\0')
<a id="L847" name="L847"></a> 847             *main_class = <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(env_in);
<a id="L848" name="L848"></a> 848         <strong class="reserved">return</strong>;
<a id="L849" name="L849"></a> 849     <em class="brace">}</em>
<a id="L850" name="L850"></a> 850 
<div class="comment">
      Scan through the arguments for options relevant to multiple JRE
      support.  For reference, the command line syntax is defined as:
      SYNOPSIS
           java [options] class [argument...]
           java [options] -jar file.jar [argument...]
      As the scan is performed, make a copy of the argument list with
      the version specification options (new to 1.5) removed, so that
      a version less than 1.5 can be exec'd.
      Note that due to the syntax of the native Windows interface
      CreateProcess(), processing similar to the following exists in
      the Windows platform specific routine ExecJRE (in java_md.c).
      Changes here should be reproduced there.</div>
<a id="L869" name="L869"></a> 869     new_argv = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>((argc + 1) * <strong class="reserved">sizeof</strong>(<strong class="reserved">char</strong>*));
<a id="L870" name="L870"></a> 870     new_argv[0] = argv[0];
<a id="L871" name="L871"></a> 871     new_argp = &amp;new_argv[1];
<a id="L872" name="L872"></a> 872     argc--;
<a id="L873" name="L873"></a> 873     argv++;
<a id="L874" name="L874"></a> 874     <strong class="reserved">while</strong> ((<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = *argv) != 0 &amp;&amp; *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> == '-') <em class="brace">{</em>
<a id="L875" name="L875"></a> 875         <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-version:") == 0) <em class="brace">{</em>
<a id="L876" name="L876"></a> 876             <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a> = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> + 9;
<a id="L877" name="L877"></a> 877         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-jre-restrict-search") == 0) <em class="brace">{</em>
<a id="L878" name="L878"></a> 878             restrict_search = 1;
<a id="L879" name="L879"></a> 879         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-no-jre-restrict-search") == 0) <em class="brace">{</em>
<a id="L880" name="L880"></a> 880             restrict_search = 0;
<a id="L881" name="L881"></a> 881         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L882" name="L882"></a> 882             <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-jar") == 0)
<a id="L883" name="L883"></a> 883                 jarflag = 1;
<div class="comment">
             /* deal with "unfortunate" classpath syntax */</div>
<a id="L885" name="L885"></a> 885             <strong class="reserved">if</strong> ((<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-classpath") == 0 || <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-cp") == 0) &amp;&amp;
<a id="L886" name="L886"></a> 886               (argc &gt;= 2)) <em class="brace">{</em>
<a id="L887" name="L887"></a> 887                 *new_argp++ = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L888" name="L888"></a> 888                 argc--;
<a id="L889" name="L889"></a> 889                 argv++;
<a id="L890" name="L890"></a> 890                 <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = *argv;
<a id="L891" name="L891"></a> 891             <em class="brace">}</em>
<a id="L892" name="L892"></a> 892 
<div class="comment">
              Checking for headless toolkit option in the some way as AWT does:
              "true" means true and any other value means false</div>
<a id="L897" name="L897"></a> 897             <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-Djava.awt.headless=true") == 0) <em class="brace">{</em>
<a id="L898" name="L898"></a> 898                 headlessflag = 1;
<a id="L899" name="L899"></a> 899             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-Djava.awt.headless=") == 0) <em class="brace">{</em>
<a id="L900" name="L900"></a> 900                 headlessflag = 0;
<a id="L901" name="L901"></a> 901             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-splash:") == 0) <em class="brace">{</em>
<a id="L902" name="L902"></a> 902                 splash_file_name = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>+8;
<a id="L903" name="L903"></a> 903             <em class="brace">}</em>
<a id="L904" name="L904"></a> 904             *new_argp++ = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L905" name="L905"></a> 905         <em class="brace">}</em>
<a id="L906" name="L906"></a> 906         argc--;
<a id="L907" name="L907"></a> 907         argv++;
<a id="L908" name="L908"></a> 908     <em class="brace">}</em>
<a id="L909" name="L909"></a> 909     <strong class="reserved">if</strong> (argc &lt;= 0) <div class="comment">
/* No operand? Possibly legit with -[full]version */</div>
<a id="L910" name="L910"></a> 910         operand = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L911" name="L911"></a> 911     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L912" name="L912"></a> 912         argc--;
<a id="L913" name="L913"></a> 913         *new_argp++ = operand = *argv++;
<a id="L914" name="L914"></a> 914     <em class="brace">}</em>
<a id="L915" name="L915"></a> 915     <div class="comment">
)  /* Copy over [argument...] */</div>
<a id="L916" name="L916"></a> 916         *new_argp++ = *argv++;
<a id="L917" name="L917"></a> 917     *new_argp = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L918" name="L918"></a> 918 
<div class="comment">
      If there is a jar file, read the manifest. If the jarfile can't be
      read, the manifest can't be read from the jar file, or the manifest
      is corrupt, issue the appropriate error messages and exit.
      Even if there isn't a jar file, construct a manifest_info structure
      containing the command line information.  It's a convenient way to carry
      this data around.</div>
<a id="L928" name="L928"></a> 928     <strong class="reserved">if</strong> (jarflag &amp;&amp; operand) <em class="brace">{</em>
<a id="L929" name="L929"></a> 929         <strong class="reserved">if</strong> ((res = <a href="../S/13.html#L555" title="Defined at 555 in src/launcher/parse_manifest.c.">JLI_ParseManifest</a>(operand, &amp;<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>)) != 0) <em class="brace">{</em>
<a id="L930" name="L930"></a> 930             <strong class="reserved">if</strong> (res == -1)
<a id="L931" name="L931"></a> 931                 <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L50" title="Defined at 50 in src/launcher/emessages.h.">JAR_ERROR2</a>, operand);
<a id="L932" name="L932"></a> 932             <strong class="reserved">else</strong>
<a id="L933" name="L933"></a> 933                 <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L51" title="Defined at 51 in src/launcher/emessages.h.">JAR_ERROR3</a>, operand);
<a id="L934" name="L934"></a> 934             <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L935" name="L935"></a> 935         <em class="brace">}</em>
<a id="L936" name="L936"></a> 936 
<div class="comment">
          Command line splash screen option should have precedence
          over the manifest, so the manifest data is used only if
          splash_file_name has not been initialized above during command
          line parsing</div>
<a id="L943" name="L943"></a> 943         <strong class="reserved">if</strong> (!headlessflag &amp;&amp; !splash_file_name &amp;&amp; <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.splashscreen_image_file_name) <em class="brace">{</em>
<a id="L944" name="L944"></a> 944             splash_file_name = <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.splashscreen_image_file_name;
<a id="L945" name="L945"></a> 945             splash_jar_name = operand;
<a id="L946" name="L946"></a> 946         <em class="brace">}</em>
<a id="L947" name="L947"></a> 947     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L948" name="L948"></a> 948         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.manifest_version = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L949" name="L949"></a> 949         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.main_class = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L950" name="L950"></a> 950         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L951" name="L951"></a> 951         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_restrict_search = 0;
<a id="L952" name="L952"></a> 952     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953 
<div class="comment">
      Passing on splash screen info in environment variables</div>
<a id="L957" name="L957"></a> 957     <strong class="reserved">if</strong> (splash_file_name &amp;&amp; !headlessflag) <em class="brace">{</em>
<a id="L958" name="L958"></a> 958         <strong class="reserved">char</strong>* splash_file_entry = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../S/5.html#L74" title="Defined at 74 in src/launcher/java.h.">SPLASH_FILE_ENV_ENTRY</a> "=")+<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(splash_file_name)+1);
<a id="L959" name="L959"></a> 959         <a href="../S/9.html#L55" title="Defined at 55 in src/launcher/jli_util.h.">JLI_StrCpy</a>(splash_file_entry, <a href="../S/5.html#L74" title="Defined at 74 in src/launcher/java.h.">SPLASH_FILE_ENV_ENTRY</a> "=");
<a id="L960" name="L960"></a> 960         <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(splash_file_entry, splash_file_name);
<a id="L961" name="L961"></a> 961         putenv(splash_file_entry);
<a id="L962" name="L962"></a> 962     <em class="brace">}</em>
<a id="L963" name="L963"></a> 963     <strong class="reserved">if</strong> (splash_jar_name &amp;&amp; !headlessflag) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964         <strong class="reserved">char</strong>* splash_jar_entry = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../S/5.html#L75" title="Defined at 75 in src/launcher/java.h.">SPLASH_JAR_ENV_ENTRY</a> "=")+<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(splash_jar_name)+1);
<a id="L965" name="L965"></a> 965         <a href="../S/9.html#L55" title="Defined at 55 in src/launcher/jli_util.h.">JLI_StrCpy</a>(splash_jar_entry, <a href="../S/5.html#L75" title="Defined at 75 in src/launcher/java.h.">SPLASH_JAR_ENV_ENTRY</a> "=");
<a id="L966" name="L966"></a> 966         <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(splash_jar_entry, splash_jar_name);
<a id="L967" name="L967"></a> 967         putenv(splash_jar_entry);
<a id="L968" name="L968"></a> 968     <em class="brace">}</em>
<a id="L969" name="L969"></a> 969 
<div class="comment">
      The JRE-Version and JRE-Restrict-Search values (if any) from the
      manifest are overwritten by any specified on the command line.</div>
<a id="L974" name="L974"></a> 974     <strong class="reserved">if</strong> (<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a> != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L975" name="L975"></a> 975         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version = <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>;
<a id="L976" name="L976"></a> 976     <strong class="reserved">if</strong> (restrict_search != -1)
<a id="L977" name="L977"></a> 977         <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_restrict_search = restrict_search;
<a id="L978" name="L978"></a> 978 
<div class="comment">
      "Valid" returns (other than unrecoverable errors) follow.  Set
      main_class as a side-effect of this routine.</div>
<a id="L983" name="L983"></a> 983     <strong class="reserved">if</strong> (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.main_class != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L984" name="L984"></a> 984         *main_class = <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.main_class);
<a id="L985" name="L985"></a> 985 
<div class="comment">
      If no version selection information is found either on the command
      line or in the manifest, simply return.</div>
<a id="L990" name="L990"></a> 990     <strong class="reserved">if</strong> (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L991" name="L991"></a> 991         <a href="../S/13.html#L642" title="Defined at 642 in src/launcher/parse_manifest.c.">JLI_FreeManifest</a>();
<a id="L992" name="L992"></a> 992         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(new_argv);
<a id="L993" name="L993"></a> 993         <strong class="reserved">return</strong>;
<a id="L994" name="L994"></a> 994     <em class="brace">}</em>
<a id="L995" name="L995"></a> 995 
<div class="comment">
      Check for correct syntax of the version specification (JSR 56).</div>
<a id="L999" name="L999"></a> 999     <strong class="reserved">if</strong> (!<a href="../S/14.html#L337" title="Defined at 337 in src/launcher/version_comp.c.">JLI_ValidVersionString</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version)) <em class="brace">{</em>
<a id="L1000" name="L1000"></a>1000         <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L76" title="Defined at 76 in src/launcher/emessages.h.">SPC_ERROR1</a>, <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version);
<a id="L1001" name="L1001"></a>1001         <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L1002" name="L1002"></a>1002     <em class="brace">}</em>
<a id="L1003" name="L1003"></a>1003 
<div class="comment">
      Find the appropriate JVM on the system. Just to be as forgiving as
      possible, if the standard algorithms don't locate an appropriate
      jre, check to see if the one running will satisfy the requirements.
      This can happen on systems which haven't been set-up for multiple
      JRE support.</div>
<a id="L1011" name="L1011"></a>1011     jre = <a href="../S/1.html#L753" title="Defined at 753 in src/launcher/java_md.c.">LocateJRE</a>(&amp;<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>);
<a id="L1012" name="L1012"></a>1012     <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("JRE-Version = %s, JRE-Restrict-Search = %s Selected = %s\n",
<a id="L1013" name="L1013"></a>1013         (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version?<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version:"null"),
<a id="L1014" name="L1014"></a>1014         (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_restrict_search?"true":"false"), (jre?jre:"null"));
<a id="L1015" name="L1015"></a>1015 
<a id="L1016" name="L1016"></a>1016     <strong class="reserved">if</strong> (jre == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017         <strong class="reserved">if</strong> (<a href="../S/14.html#L239" title="Defined at 239 in src/launcher/version_comp.c.">JLI_AcceptableRelease</a>(<a href="../S/15.html#L1941" title="Defined at 1941 in src/launcher/java.c.">GetFullVersion</a>(), <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version)) <em class="brace">{</em>
<a id="L1018" name="L1018"></a>1018             <a href="../S/13.html#L642" title="Defined at 642 in src/launcher/parse_manifest.c.">JLI_FreeManifest</a>();
<a id="L1019" name="L1019"></a>1019             <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(new_argv);
<a id="L1020" name="L1020"></a>1020             <strong class="reserved">return</strong>;
<a id="L1021" name="L1021"></a>1021         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1022" name="L1022"></a>1022             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L68" title="Defined at 68 in src/launcher/emessages.h.">CFG_ERROR4</a>, <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.jre_version);
<a id="L1023" name="L1023"></a>1023             <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L1024" name="L1024"></a>1024         <em class="brace">}</em>
<a id="L1025" name="L1025"></a>1025     <em class="brace">}</em>
<a id="L1026" name="L1026"></a>1026 
<div class="comment">
      If I'm not the chosen one, exec the chosen one.  Returning from
      ExecJRE indicates that I am indeed the chosen one.
      The private environment variable _JAVA_VERSION_SET is used to
      prevent the chosen one from re-reading the manifest file and
      using the values found within to override the (potential) command
      line flags stripped from argv (because the target may not
      understand them).  Passing the MainClass value is an optimization
      to avoid locating, expanding and parsing the manifest extra
      times.</div>
<a id="L1039" name="L1039"></a>1039     <strong class="reserved">if</strong> (<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.main_class != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1040" name="L1040"></a>1040         <strong class="reserved">if</strong> (<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.main_class) &lt;= <a href="../S/10.html#L40" title="Defined at 40 in src/launcher/java_md.h.">MAXNAMELEN</a>) <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041             (<strong class="reserved">void</strong>)<a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(env_entry, <a href="../D/24493.html" title="Multiple defined in 8 places.">info</a>.main_class);
<a id="L1042" name="L1042"></a>1042         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1043" name="L1043"></a>1043             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L57" title="Defined at 57 in src/launcher/emessages.h.">CLS_ERROR5</a>, <a href="../S/10.html#L40" title="Defined at 40 in src/launcher/java_md.h.">MAXNAMELEN</a>);
<a id="L1044" name="L1044"></a>1044             <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L1045" name="L1045"></a>1045         <em class="brace">}</em>
<a id="L1046" name="L1046"></a>1046     <em class="brace">}</em>
<a id="L1047" name="L1047"></a>1047     (<strong class="reserved">void</strong>)putenv(env_entry);
<a id="L1048" name="L1048"></a>1048     <a href="../S/1.html#L923" title="Defined at 923 in src/launcher/java_md.c.">ExecJRE</a>(jre, new_argv);
<a id="L1049" name="L1049"></a>1049     <a href="../S/13.html#L642" title="Defined at 642 in src/launcher/parse_manifest.c.">JLI_FreeManifest</a>();
<a id="L1050" name="L1050"></a>1050     <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(new_argv);
<a id="L1051" name="L1051"></a>1051     <strong class="reserved">return</strong>;
<a id="L1052" name="L1052"></a>1052 <em class="brace">}</em>
<a id="L1053" name="L1053"></a>1053 
<div class="comment">
  Parses command line arguments.  Returns JNI_FALSE if launcher
  should exit without starting vm, returns JNI_TRUE if vm needs
  to be started to process given options.  *pret (the launcher
  process return value) is set to 0 for a normal exit.</div>
<a id="L1060" name="L1060"></a>1060 <strong class="reserved">static</strong> jboolean
<a id="L1061" name="L1061"></a>1061 <a href="../R/6029.html" title="Multiple referred from 2 places.">ParseArguments</a>(<strong class="reserved">int</strong> *pargc, <strong class="reserved">char</strong> ***pargv,
<a id="L1062" name="L1062"></a>1062                <strong class="reserved">int</strong> *pmode, <strong class="reserved">char</strong> **pwhat,
<a id="L1063" name="L1063"></a>1063                <strong class="reserved">int</strong> *pret, <strong class="reserved">const</strong> <strong class="reserved">char</strong> *jrepath)
<a id="L1064" name="L1064"></a>1064 <em class="brace">{</em>
<a id="L1065" name="L1065"></a>1065     <strong class="reserved">int</strong> argc = *pargc;
<a id="L1066" name="L1066"></a>1066     <strong class="reserved">char</strong> **argv = *pargv;
<a id="L1067" name="L1067"></a>1067     <strong class="reserved">int</strong> mode = <a href="../S/5.html#L229" title="Defined at 229 in src/launcher/java.h.">LM_UNKNOWN</a>;
<a id="L1068" name="L1068"></a>1068     <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L1069" name="L1069"></a>1069 
<a id="L1070" name="L1070"></a>1070     *pret = 0;
<a id="L1071" name="L1071"></a>1071 
<a id="L1072" name="L1072"></a>1072     <strong class="reserved">while</strong> ((<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = *argv) != 0 &amp;&amp; *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> == '-') <em class="brace">{</em>
<a id="L1073" name="L1073"></a>1073         argv++; --argc;
<a id="L1074" name="L1074"></a>1074         <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-classpath") == 0 || <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-cp") == 0) <em class="brace">{</em>
<a id="L1075" name="L1075"></a>1075             <a href="../S/15.html#L153" title="Defined at 153 in src/launcher/java.c.">ARG_CHECK</a> (argc, <a href="../S/7.html#L41" title="Defined at 41 in src/launcher/emessages.h.">ARG_ERROR1</a>, <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>);
<a id="L1076" name="L1076"></a>1076             <a href="../S/15.html#L788" title="Defined at 788 in src/launcher/java.c.">SetClassPath</a>(*argv);
<a id="L1077" name="L1077"></a>1077             mode = <a href="../S/5.html#L230" title="Defined at 230 in src/launcher/java.h.">LM_CLASS</a>;
<a id="L1078" name="L1078"></a>1078             argv++; --argc;
<a id="L1079" name="L1079"></a>1079         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-jar") == 0) <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080             <a href="../S/15.html#L153" title="Defined at 153 in src/launcher/java.c.">ARG_CHECK</a> (argc, <a href="../S/7.html#L42" title="Defined at 42 in src/launcher/emessages.h.">ARG_ERROR2</a>, <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>);
<a id="L1081" name="L1081"></a>1081             mode = <a href="../S/5.html#L231" title="Defined at 231 in src/launcher/java.h.">LM_JAR</a>;
<a id="L1082" name="L1082"></a>1082         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-help") == 0 ||
<a id="L1083" name="L1083"></a>1083                    <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-h") == 0 ||
<a id="L1084" name="L1084"></a>1084                    <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-?") == 0) <em class="brace">{</em>
<a id="L1085" name="L1085"></a>1085             <a href="../D/29718.html" title="Multiple defined in 2 places.">printUsage</a> = JNI_TRUE;
<a id="L1086" name="L1086"></a>1086             <strong class="reserved">return</strong> JNI_TRUE;
<a id="L1087" name="L1087"></a>1087         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-version") == 0) <em class="brace">{</em>
<a id="L1088" name="L1088"></a>1088             printVersion = JNI_TRUE;
<a id="L1089" name="L1089"></a>1089             <strong class="reserved">return</strong> JNI_TRUE;
<a id="L1090" name="L1090"></a>1090         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-showversion") == 0) <em class="brace">{</em>
<a id="L1091" name="L1091"></a>1091             showVersion = JNI_TRUE;
<a id="L1092" name="L1092"></a>1092         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-X") == 0) <em class="brace">{</em>
<a id="L1093" name="L1093"></a>1093             printXUsage = JNI_TRUE;
<a id="L1094" name="L1094"></a>1094             <strong class="reserved">return</strong> JNI_TRUE;
<div class="comment">
  The following case checks for -XshowSettings OR -XshowSetting:SUBOPT.
  In the latter case, any SUBOPT value not recognized will default to "all"</div>
<a id="L1099" name="L1099"></a>1099         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-XshowSettings") == 0 ||
<a id="L1100" name="L1100"></a>1100                 <a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-XshowSettings:") == 0) <em class="brace">{</em>
<a id="L1101" name="L1101"></a>1101             showSettings = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L1102" name="L1102"></a>1102         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-Xdiag") == 0) <em class="brace">{</em>
<a id="L1103" name="L1103"></a>1103             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Dsun.java.launcher.diag=true", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<div class="comment">
  The following case provide backward compatibility with old-style
  command line options.</div>
<a id="L1108" name="L1108"></a>1108         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-fullversion") == 0) <em class="brace">{</em>
<a id="L1109" name="L1109"></a>1109             <a href="../S/15.html#L2073" title="Defined at 2073 in src/launcher/java.c.">JLI_ReportMessage</a>("%s full version \"%s\"", _launcher_name, <a href="../S/15.html#L1941" title="Defined at 1941 in src/launcher/java.c.">GetFullVersion</a>());
<a id="L1110" name="L1110"></a>1110             <strong class="reserved">return</strong> JNI_FALSE;
<a id="L1111" name="L1111"></a>1111         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-verbosegc") == 0) <em class="brace">{</em>
<a id="L1112" name="L1112"></a>1112             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-verbose:gc", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1113" name="L1113"></a>1113         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-t") == 0) <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xt", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1115" name="L1115"></a>1115         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-tm") == 0) <em class="brace">{</em>
<a id="L1116" name="L1116"></a>1116             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xtm", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1117" name="L1117"></a>1117         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-debug") == 0) <em class="brace">{</em>
<a id="L1118" name="L1118"></a>1118             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xdebug", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1119" name="L1119"></a>1119         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-noclassgc") == 0) <em class="brace">{</em>
<a id="L1120" name="L1120"></a>1120             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xnoclassgc", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1121" name="L1121"></a>1121         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-Xfuture") == 0) <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xverify:all", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1123" name="L1123"></a>1123         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-verify") == 0) <em class="brace">{</em>
<a id="L1124" name="L1124"></a>1124             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xverify:all", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1125" name="L1125"></a>1125         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-verifyremote") == 0) <em class="brace">{</em>
<a id="L1126" name="L1126"></a>1126             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xverify:remote", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1127" name="L1127"></a>1127         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-noverify") == 0) <em class="brace">{</em>
<a id="L1128" name="L1128"></a>1128             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Xverify:none", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1129" name="L1129"></a>1129         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-prof") == 0) <em class="brace">{</em>
<a id="L1130" name="L1130"></a>1130             <strong class="reserved">char</strong> *p = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> + 5;
<a id="L1131" name="L1131"></a>1131             <strong class="reserved">char</strong> *tmp = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>) + 50);
<a id="L1132" name="L1132"></a>1132             <strong class="reserved">if</strong> (*p) <em class="brace">{</em>
<a id="L1133" name="L1133"></a>1133                 sprintf(tmp, "-Xrunhprof:cpu=old,file=%s", p + 1);
<a id="L1134" name="L1134"></a>1134             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1135" name="L1135"></a>1135                 sprintf(tmp, "-Xrunhprof:cpu=old,file=java.prof");
<a id="L1136" name="L1136"></a>1136             <em class="brace">}</em>
<a id="L1137" name="L1137"></a>1137             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(tmp, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1138" name="L1138"></a>1138         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-ss") == 0 ||
<a id="L1139" name="L1139"></a>1139                    <a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-oss") == 0 ||
<a id="L1140" name="L1140"></a>1140                    <a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-ms") == 0 ||
<a id="L1141" name="L1141"></a>1141                    <a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-mx") == 0) <em class="brace">{</em>
<a id="L1142" name="L1142"></a>1142             <strong class="reserved">char</strong> *tmp = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>) + 6);
<a id="L1143" name="L1143"></a>1143             sprintf(tmp, "-X%s", <div class="comment">
); /* skip '-' */</div>
<a id="L1144" name="L1144"></a>1144             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(tmp, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1145" name="L1145"></a>1145         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-checksource") == 0 ||
<a id="L1146" name="L1146"></a>1146                    <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-cs") == 0 ||
<a id="L1147" name="L1147"></a>1147                    <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-noasyncgc") == 0) <em class="brace">{</em>
<div class="comment">
             /* No longer supported */</div>
<a id="L1149" name="L1149"></a>1149             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L39" title="Defined at 39 in src/launcher/emessages.h.">ARG_WARN</a>, <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>);
<a id="L1150" name="L1150"></a>1150         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-version:") == 0 ||
<a id="L1151" name="L1151"></a>1151                    <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-no-jre-restrict-search") == 0 ||
<a id="L1152" name="L1152"></a>1152                    <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-jre-restrict-search") == 0 ||
<a id="L1153" name="L1153"></a>1153                    <a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-splash:") == 0) <em class="brace">{</em>
<div class="comment">
             ; /* Ignore machine independent options already handled */</div>
<a id="L1155" name="L1155"></a>1155         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1.html#L1405" title="Defined at 1405 in src/launcher/java_md.c.">ProcessPlatformOption</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>)) <em class="brace">{</em>
<div class="comment">
             ; /* Processing of platform dependent options */</div>
<a id="L1157" name="L1157"></a>1157         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/15.html#L2052" title="Defined at 2052 in src/launcher/java.c.">RemovableOption</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>)) <em class="brace">{</em>
<div class="comment">
             ; /* Do not pass option to vm. */</div>
<a id="L1159" name="L1159"></a>1159         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1160" name="L1160"></a>1160             <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1161" name="L1161"></a>1161         <em class="brace">}</em>
<a id="L1162" name="L1162"></a>1162     <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163 
<a id="L1164" name="L1164"></a>1164     <strong class="reserved">if</strong> (--argc &gt;= 0) <em class="brace">{</em>
<a id="L1165" name="L1165"></a>1165         *pwhat = *argv++;
<a id="L1166" name="L1166"></a>1166     <em class="brace">}</em>
<a id="L1167" name="L1167"></a>1167 
<a id="L1168" name="L1168"></a>1168     <strong class="reserved">if</strong> (*pwhat == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1169" name="L1169"></a>1169         *pret = 1;
<a id="L1170" name="L1170"></a>1170     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (mode == <a href="../S/5.html#L229" title="Defined at 229 in src/launcher/java.h.">LM_UNKNOWN</a>) <em class="brace">{</em>
<div class="comment">
 default to LM_CLASS if -jar and -cp option are
         * not specified </div>
<a id="L1173" name="L1173"></a>1173         mode = <a href="../S/5.html#L230" title="Defined at 230 in src/launcher/java.h.">LM_CLASS</a>;
<a id="L1174" name="L1174"></a>1174     <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175 
<a id="L1176" name="L1176"></a>1176     <strong class="reserved">if</strong> (argc &gt;= 0) <em class="brace">{</em>
<a id="L1177" name="L1177"></a>1177         *pargc = argc;
<a id="L1178" name="L1178"></a>1178         *pargv = argv;
<a id="L1179" name="L1179"></a>1179     <em class="brace">}</em>
<a id="L1180" name="L1180"></a>1180 
<a id="L1181" name="L1181"></a>1181     *pmode = mode;
<a id="L1182" name="L1182"></a>1182 
<a id="L1183" name="L1183"></a>1183     <strong class="reserved">return</strong> JNI_TRUE;
<a id="L1184" name="L1184"></a>1184 <em class="brace">}</em>
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
  Initializes the Java Virtual Machine. Also frees options array when
  finished.</div>
<a id="L1190" name="L1190"></a>1190 <strong class="reserved">static</strong> jboolean
<a id="L1191" name="L1191"></a>1191 <a href="../R/3823.html" title="Multiple referred from 2 places.">InitializeJVM</a>(JavaVM **pvm, JNIEnv **penv, <a href="../S/5.html#L88" title="Defined at 88 in src/launcher/java.h.">InvocationFunctions</a> *ifn)
<a id="L1192" name="L1192"></a>1192 <em class="brace">{</em>
<a id="L1193" name="L1193"></a>1193     JavaVMInitArgs args;
<a id="L1194" name="L1194"></a>1194     jint r;
<a id="L1195" name="L1195"></a>1195 
<a id="L1196" name="L1196"></a>1196     memset(&amp;args, 0, <strong class="reserved">sizeof</strong>(args));
<a id="L1197" name="L1197"></a>1197     args.<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>  = JNI_VERSION_1_2;
<a id="L1198" name="L1198"></a>1198     args.nOptions = numOptions;
<a id="L1199" name="L1199"></a>1199     args.<a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>  = <a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>;
<a id="L1200" name="L1200"></a>1200     args.ignoreUnrecognized = JNI_FALSE;
<a id="L1201" name="L1201"></a>1201 
<a id="L1202" name="L1202"></a>1202     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L1203" name="L1203"></a>1203         <strong class="reserved">int</strong> i = 0;
<a id="L1204" name="L1204"></a>1204         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("JavaVM args:\n    ");
<a id="L1205" name="L1205"></a>1205         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("version 0x%08lx, ", (<strong class="reserved">long</strong>)args.<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>);
<a id="L1206" name="L1206"></a>1206         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("ignoreUnrecognized is %s, ",
<a id="L1207" name="L1207"></a>1207                args.ignoreUnrecognized ? "JNI_TRUE" : "JNI_FALSE");
<a id="L1208" name="L1208"></a>1208         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("nOptions is %ld\n", (<strong class="reserved">long</strong>)args.nOptions);
<a id="L1209" name="L1209"></a>1209         <strong class="reserved">for</strong> (i = 0; i &lt; numOptions; i++)
<a id="L1210" name="L1210"></a>1210             <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("    option[%2d] = '%s'\n",
<a id="L1211" name="L1211"></a>1211                    i, args.<a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>[i].optionString);
<a id="L1212" name="L1212"></a>1212     <em class="brace">}</em>
<a id="L1213" name="L1213"></a>1213 
<a id="L1214" name="L1214"></a>1214     r = ifn-&gt;CreateJavaVM(pvm, (<strong class="reserved">void</strong> **)penv, &amp;args);
<a id="L1215" name="L1215"></a>1215     <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(<a href="../S/7709.html#L57" title="Defined at 57 in src/com/sun/javadoc/RootDoc.java.">options</a>);
<a id="L1216" name="L1216"></a>1216     <strong class="reserved">return</strong> r == JNI_OK;
<a id="L1217" name="L1217"></a>1217 <em class="brace">}</em>
<a id="L1218" name="L1218"></a>1218 
<a id="L1219" name="L1219"></a>1219 <strong class="reserved">static</strong> jclass helperClass = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1220" name="L1220"></a>1220 
<a id="L1221" name="L1221"></a>1221 jclass
<a id="L1222" name="L1222"></a>1222 <a href="../R/3277.html" title="Multiple referred from 7 places.">GetLauncherHelperClass</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L1223" name="L1223"></a>1223 <em class="brace">{</em>
<a id="L1224" name="L1224"></a>1224     <strong class="reserved">if</strong> (helperClass == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1225" name="L1225"></a>1225         <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(helperClass = <a href="../S/1.html#L1242" title="Defined at 1242 in src/launcher/java_md.c.">FindBootStrapClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>,
<a id="L1226" name="L1226"></a>1226                 "sun/launcher/LauncherHelper"));
<a id="L1227" name="L1227"></a>1227     <em class="brace">}</em>
<a id="L1228" name="L1228"></a>1228     <strong class="reserved">return</strong> helperClass;
<a id="L1229" name="L1229"></a>1229 <em class="brace">}</em>
<a id="L1230" name="L1230"></a>1230 
<a id="L1231" name="L1231"></a>1231 <strong class="reserved">static</strong> jmethodID makePlatformStringMID = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<div class="comment">
  Returns a new Java string object for the specified platform string.</div>
<a id="L1235" name="L1235"></a>1235 <strong class="reserved">static</strong> jstring
<a id="L1236" name="L1236"></a>1236 <a href="../R/5505.html" title="Multiple referred from 3 places.">NewPlatformString</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">char</strong> *s)
<a id="L1237" name="L1237"></a>1237 <em class="brace">{</em>
<a id="L1238" name="L1238"></a>1238     <strong class="reserved">int</strong> len = (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s);
<a id="L1239" name="L1239"></a>1239     jbyteArray ary;
<a id="L1240" name="L1240"></a>1240     jclass cls = <a href="../S/15.html#L1222" title="Defined at 1222 in src/launcher/java.c.">GetLauncherHelperClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L1241" name="L1241"></a>1241     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(cls);
<a id="L1242" name="L1242"></a>1242     <strong class="reserved">if</strong> (s == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L1243" name="L1243"></a>1243         <strong class="reserved">return</strong> 0;
<a id="L1244" name="L1244"></a>1244 
<a id="L1245" name="L1245"></a>1245     ary = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewByteArray(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, len);
<a id="L1246" name="L1246"></a>1246     <strong class="reserved">if</strong> (ary != 0) <em class="brace">{</em>
<a id="L1247" name="L1247"></a>1247         jstring <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = 0;
<a id="L1248" name="L1248"></a>1248         (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;SetByteArrayRegion(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, ary, 0, len, (jbyte *)s);
<a id="L1249" name="L1249"></a>1249         <strong class="reserved">if</strong> (!(*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;ExceptionOccurred(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)) <em class="brace">{</em>
<a id="L1250" name="L1250"></a>1250             <strong class="reserved">if</strong> (makePlatformStringMID == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1251" name="L1251"></a>1251                 <a href="../S/5.html#L289" title="Defined at 289 in src/launcher/java.h.">CHECK_JNI_RETURN_0</a>(
<a id="L1252" name="L1252"></a>1252                     makePlatformStringMID = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>,
<a id="L1253" name="L1253"></a>1253                         cls, "makePlatformString", "(Z[B)Ljava/lang/String;"));
<a id="L1254" name="L1254"></a>1254             <em class="brace">}</em>
<a id="L1255" name="L1255"></a>1255             <a href="../S/5.html#L289" title="Defined at 289 in src/launcher/java.h.">CHECK_JNI_RETURN_0</a>(
<a id="L1256" name="L1256"></a>1256                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticObjectMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1257" name="L1257"></a>1257                     makePlatformStringMID, <a href="../S/15.html#L65" title="Defined at 65 in src/launcher/java.c.">USE_STDERR</a>, ary));
<a id="L1258" name="L1258"></a>1258             (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;DeleteLocalRef(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, ary);
<a id="L1259" name="L1259"></a>1259             <strong class="reserved">return</strong> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>;
<a id="L1260" name="L1260"></a>1260         <em class="brace">}</em>
<a id="L1261" name="L1261"></a>1261     <em class="brace">}</em>
<a id="L1262" name="L1262"></a>1262     <strong class="reserved">return</strong> 0;
<a id="L1263" name="L1263"></a>1263 <em class="brace">}</em>
<a id="L1264" name="L1264"></a>1264 
<div class="comment">
  Returns a new array of Java string objects for the specified
  array of platform strings.</div>
<a id="L1269" name="L1269"></a>1269 jobjectArray
<a id="L1270" name="L1270"></a>1270 <a href="../R/5506.html" title="Multiple referred from 6 places.">NewPlatformStringArray</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">char</strong> **strv, <strong class="reserved">int</strong> strc)
<a id="L1271" name="L1271"></a>1271 <em class="brace">{</em>
<a id="L1272" name="L1272"></a>1272     jarray cls;
<a id="L1273" name="L1273"></a>1273     jarray ary;
<a id="L1274" name="L1274"></a>1274     <strong class="reserved">int</strong> i;
<a id="L1275" name="L1275"></a>1275 
<a id="L1276" name="L1276"></a>1276     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(cls = <a href="../S/1.html#L1242" title="Defined at 1242 in src/launcher/java_md.c.">FindBootStrapClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, "java/lang/String"));
<a id="L1277" name="L1277"></a>1277     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(ary = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewObjectArray(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, strc, cls, 0));
<a id="L1278" name="L1278"></a>1278     <strong class="reserved">for</strong> (i = 0; i &lt; strc; i++) <em class="brace">{</em>
<a id="L1279" name="L1279"></a>1279         jstring <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = <a href="../S/15.html#L1236" title="Defined at 1236 in src/launcher/java.c.">NewPlatformString</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, *strv++);
<a id="L1280" name="L1280"></a>1280         <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L1281" name="L1281"></a>1281         (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;SetObjectArrayElement(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, ary, i, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L1282" name="L1282"></a>1282         (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;DeleteLocalRef(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>);
<a id="L1283" name="L1283"></a>1283     <em class="brace">}</em>
<a id="L1284" name="L1284"></a>1284     <strong class="reserved">return</strong> ary;
<a id="L1285" name="L1285"></a>1285 <em class="brace">}</em>
<a id="L1286" name="L1286"></a>1286 
<div class="comment">
  Loads a class and verifies that the main class is present and it is ok to
  call it for more details refer to the java implementation.</div>
<a id="L1291" name="L1291"></a>1291 <strong class="reserved">static</strong> jclass
<a id="L1292" name="L1292"></a>1292 <a href="../R/4671.html" title="Multiple referred from 2 places.">LoadMainClass</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">int</strong> mode, <strong class="reserved">char</strong> *<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)
<a id="L1293" name="L1293"></a>1293 <em class="brace">{</em>
<a id="L1294" name="L1294"></a>1294     jmethodID mid;
<a id="L1295" name="L1295"></a>1295     jstring <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>;
<a id="L1296" name="L1296"></a>1296     jobject <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1297" name="L1297"></a>1297     jlong <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L1298" name="L1298"></a>1298     jclass cls = <a href="../S/15.html#L1222" title="Defined at 1222 in src/launcher/java.c.">GetLauncherHelperClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L1299" name="L1299"></a>1299     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(cls);
<a id="L1300" name="L1300"></a>1300     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301         <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L1302" name="L1302"></a>1302     <em class="brace">}</em>
<a id="L1303" name="L1303"></a>1303     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(mid = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1304" name="L1304"></a>1304                 "checkAndLoadMain",
<a id="L1305" name="L1305"></a>1305                 "(ZILjava/lang/String;)Ljava/lang/Class;"));
<a id="L1306" name="L1306"></a>1306 
<a id="L1307" name="L1307"></a>1307     <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = <a href="../S/15.html#L1236" title="Defined at 1236 in src/launcher/java.c.">NewPlatformString</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1308" name="L1308"></a>1308     <a href="../S/5.html#L289" title="Defined at 289 in src/launcher/java.h.">CHECK_JNI_RETURN_0</a>(
<a id="L1309" name="L1309"></a>1309         <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticObjectMethod(
<a id="L1310" name="L1310"></a>1310             <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, mid, <a href="../S/15.html#L65" title="Defined at 65 in src/launcher/java.c.">USE_STDERR</a>, mode, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>));
<a id="L1311" name="L1311"></a>1311 
<a id="L1312" name="L1312"></a>1312     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L1313" name="L1313"></a>1313         <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>   = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L1314" name="L1314"></a>1314         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("%ld micro seconds to load main class\n",
<a id="L1315" name="L1315"></a>1315                (<strong class="reserved">long</strong>)(jint)<a href="../S/1.html#L531" title="Defined at 531 in src/launcher/java_md.c.">Counter2Micros</a>(<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>-<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>));
<a id="L1316" name="L1316"></a>1316         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("----%s----\n", <a href="../S/9.html#L33" title="Defined at 33 in src/launcher/jli_util.h.">JLDEBUG_ENV_ENTRY</a>);
<a id="L1317" name="L1317"></a>1317     <em class="brace">}</em>
<a id="L1318" name="L1318"></a>1318 
<a id="L1319" name="L1319"></a>1319     <strong class="reserved">return</strong> (jclass)<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1320" name="L1320"></a>1320 <em class="brace">}</em>
<a id="L1321" name="L1321"></a>1321 
<a id="L1322" name="L1322"></a>1322 <strong class="reserved">static</strong> jclass
<a id="L1323" name="L1323"></a>1323 <a href="../R/3261.html" title="Multiple referred from 2 places.">GetApplicationClass</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L1324" name="L1324"></a>1324 <em class="brace">{</em>
<a id="L1325" name="L1325"></a>1325     jmethodID mid;
<a id="L1326" name="L1326"></a>1326     jobject <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1327" name="L1327"></a>1327     jclass cls = <a href="../S/15.html#L1222" title="Defined at 1222 in src/launcher/java.c.">GetLauncherHelperClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L1328" name="L1328"></a>1328     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(cls);
<a id="L1329" name="L1329"></a>1329     <a href="../S/5.html#L253" title="Defined at 253 in src/launcher/java.h.">NULL_CHECK0</a>(mid = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1330" name="L1330"></a>1330                 "getApplicationClass",
<a id="L1331" name="L1331"></a>1331                 "()Ljava/lang/Class;"));
<a id="L1332" name="L1332"></a>1332 
<a id="L1333" name="L1333"></a>1333     <strong class="reserved">return</strong> (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticObjectMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, mid);
<a id="L1334" name="L1334"></a>1334 <em class="brace">}</em>
<a id="L1335" name="L1335"></a>1335 
<div class="comment">
  For tools, convert command line args thus:
    javac -cp foo:foo/"*" -J-ms32m ...
    java -ms32m -cp JLI_WildcardExpandClasspath(foo:foo/"*") ...
  Takes 4 parameters, and returns the populated arguments</div>
<a id="L1343" name="L1343"></a>1343 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L1344" name="L1344"></a>1344 <a href="../R/8277.html" title="Multiple referred from 2 places.">TranslateApplicationArgs</a>(<strong class="reserved">int</strong> jargc, <strong class="reserved">const</strong> <strong class="reserved">char</strong> **jargv, <strong class="reserved">int</strong> *pargc, <strong class="reserved">char</strong> ***pargv)
<a id="L1345" name="L1345"></a>1345 <em class="brace">{</em>
<a id="L1346" name="L1346"></a>1346     <strong class="reserved">int</strong> argc = *pargc;
<a id="L1347" name="L1347"></a>1347     <strong class="reserved">char</strong> **argv = *pargv;
<a id="L1348" name="L1348"></a>1348     <strong class="reserved">int</strong> nargc = argc + jargc;
<a id="L1349" name="L1349"></a>1349     <strong class="reserved">char</strong> **nargv = <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>((nargc + 1) * <strong class="reserved">sizeof</strong>(<strong class="reserved">char</strong> *));
<a id="L1350" name="L1350"></a>1350     <strong class="reserved">int</strong> i;
<a id="L1351" name="L1351"></a>1351 
<a id="L1352" name="L1352"></a>1352     *pargc = nargc;
<a id="L1353" name="L1353"></a>1353     *pargv = nargv;
<a id="L1354" name="L1354"></a>1354 
<div class="comment">
     /* Copy the VM arguments (i.e. prefixed with -J) */</div>
<a id="L1356" name="L1356"></a>1356     <strong class="reserved">for</strong> (i = 0; i &lt; jargc; i++) <em class="brace">{</em>
<a id="L1357" name="L1357"></a>1357         <strong class="reserved">const</strong> <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = jargv[i];
<a id="L1358" name="L1358"></a>1358         <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0] == '-' &amp;&amp; <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1] == 'J') <em class="brace">{</em>
<a id="L1359" name="L1359"></a>1359             *nargv++ = ((<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> + 2) == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) ? <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> : <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> + 2);
<a id="L1360" name="L1360"></a>1360         <em class="brace">}</em>
<a id="L1361" name="L1361"></a>1361     <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362 
<a id="L1363" name="L1363"></a>1363     <strong class="reserved">for</strong> (i = 0; i &lt; argc; i++) <em class="brace">{</em>
<a id="L1364" name="L1364"></a>1364         <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = argv[i];
<a id="L1365" name="L1365"></a>1365         <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0] == '-' &amp;&amp; <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1] == 'J') <em class="brace">{</em>
<a id="L1366" name="L1366"></a>1366             <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[2] == '\0') <em class="brace">{</em>
<a id="L1367" name="L1367"></a>1367                 <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L43" title="Defined at 43 in src/launcher/emessages.h.">ARG_ERROR3</a>);
<a id="L1368" name="L1368"></a>1368                 <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L1369" name="L1369"></a>1369             <em class="brace">}</em>
<a id="L1370" name="L1370"></a>1370             *nargv++ = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> + 2;
<a id="L1371" name="L1371"></a>1371         <em class="brace">}</em>
<a id="L1372" name="L1372"></a>1372     <em class="brace">}</em>
<a id="L1373" name="L1373"></a>1373 
<div class="comment">
     /* Copy the rest of the arguments */</div>
<a id="L1375" name="L1375"></a>1375     <strong class="reserved">for</strong> (i = 0; i &lt; jargc ; i++) <em class="brace">{</em>
<a id="L1376" name="L1376"></a>1376         <strong class="reserved">const</strong> <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = jargv[i];
<a id="L1377" name="L1377"></a>1377         <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0] != '-' || <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1] != 'J') <em class="brace">{</em>
<a id="L1378" name="L1378"></a>1378             *nargv++ = (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) ? <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> : <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>);
<a id="L1379" name="L1379"></a>1379         <em class="brace">}</em>
<a id="L1380" name="L1380"></a>1380     <em class="brace">}</em>
<a id="L1381" name="L1381"></a>1381     <strong class="reserved">for</strong> (i = 0; i &lt; argc; i++) <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382         <strong class="reserved">char</strong> *<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = argv[i];
<a id="L1383" name="L1383"></a>1383         <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[0] == '-') <em class="brace">{</em>
<a id="L1384" name="L1384"></a>1384             <strong class="reserved">if</strong> (<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1] == 'J')
<a id="L1385" name="L1385"></a>1385                 <strong class="reserved">continue</strong>;
<a id="L1386" name="L1386"></a>1386             <strong class="reserved">if</strong> (<a href="../S/15.html#L1971" title="Defined at 1971 in src/launcher/java.c.">IsWildCardEnabled</a>() &amp;&amp; <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>[1] == 'c'
<a id="L1387" name="L1387"></a>1387                 &amp;&amp; (<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-cp") == 0 ||
<a id="L1388" name="L1388"></a>1388                     <a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>, "-classpath") == 0)
<a id="L1389" name="L1389"></a>1389                 &amp;&amp; i &lt; argc - 1) <em class="brace">{</em>
<a id="L1390" name="L1390"></a>1390                 *nargv++ = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L1391" name="L1391"></a>1391                 *nargv++ = (<strong class="reserved">char</strong> *) <a href="../S/17.html#L410" title="Defined at 410 in src/launcher/wildcard.c.">JLI_WildcardExpandClasspath</a>(argv[i+1]);
<a id="L1392" name="L1392"></a>1392                 i++;
<a id="L1393" name="L1393"></a>1393                 <strong class="reserved">continue</strong>;
<a id="L1394" name="L1394"></a>1394             <em class="brace">}</em>
<a id="L1395" name="L1395"></a>1395         <em class="brace">}</em>
<a id="L1396" name="L1396"></a>1396         *nargv++ = <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L1397" name="L1397"></a>1397     <em class="brace">}</em>
<a id="L1398" name="L1398"></a>1398     *nargv = 0;
<a id="L1399" name="L1399"></a>1399 <em class="brace">}</em>
<a id="L1400" name="L1400"></a>1400 
<div class="comment">
  For our tools, we try to add 3 VM options:
       -Denv.class.path=<envcp>
       -Dapplication.home=<apphome>
       -Djava.class.path=<appcp>
  <envcp>   is the user's setting of CLASSPATH -- for instance the user
            tells javac where to find binary classes through this environment
            variable.  Notice that users will be able to compile against our
            tools classes (sun.tools.javac.Main) only if they explicitly add
            tools.jar to CLASSPATH.
  <apphome> is the directory where the application is installed.
  <appcp>   is the classpath to where our apps' classfiles are.</appcp></apphome></envcp></appcp></apphome></envcp></div>
<a id="L1414" name="L1414"></a>1414 <strong class="reserved">static</strong> jboolean
<a id="L1415" name="L1415"></a>1415 <a href="../R/322.html" title="Multiple referred from 2 places.">AddApplicationOptions</a>(<strong class="reserved">int</strong> cpathc, <strong class="reserved">const</strong> <strong class="reserved">char</strong> **cpathv)
<a id="L1416" name="L1416"></a>1416 <em class="brace">{</em>
<a id="L1417" name="L1417"></a>1417     <strong class="reserved">char</strong> *envcp, *appcp, *apphome;
<a id="L1418" name="L1418"></a>1418     <strong class="reserved">char</strong> <a href="../S/2912.html#L4518" title="Defined at 4518 in src/javax/swing/plaf/basic/BasicTreeUI.java.">home</a>[<div class="comment">
/* application home */</div>
<a id="L1419" name="L1419"></a>1419     <strong class="reserved">char</strong> <a href="../D/31774.html" title="Multiple defined in 7 places.">separator</a>[] = <em class="brace">{</em> <a href="../S/10.html#L35" title="Defined at 35 in src/launcher/java_md.h.">PATH_SEPARATOR</a>, '\0' <em class="brace">}</em>;
<a id="L1420" name="L1420"></a>1420     <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>, i;
<a id="L1421" name="L1421"></a>1421 
<a id="L1422" name="L1422"></a>1422     <em class="brace">{</em>
<a id="L1423" name="L1423"></a>1423         <strong class="reserved">const</strong> <strong class="reserved">char</strong> *s = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>("CLASSPATH");
<a id="L1424" name="L1424"></a>1424         <strong class="reserved">if</strong> (s) <em class="brace">{</em>
<a id="L1425" name="L1425"></a>1425             s = (<strong class="reserved">char</strong> *) <a href="../S/17.html#L410" title="Defined at 410 in src/launcher/wildcard.c.">JLI_WildcardExpandClasspath</a>(s);
<div class="comment">
             /* 40 for -Denv.class.path= */</div>
<a id="L1427" name="L1427"></a>1427             <strong class="reserved">if</strong> (<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s) + 40 &gt; <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s)) <em class="brace">{</em> <em class="comment">// Safeguard from overflow</em>
<a id="L1428" name="L1428"></a>1428                 envcp = (<strong class="reserved">char</strong> *)<a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(s) + 40);
<a id="L1429" name="L1429"></a>1429                 sprintf(envcp, "-Denv.class.path=%s", s);
<a id="L1430" name="L1430"></a>1430                 <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(envcp, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1431" name="L1431"></a>1431             <em class="brace">}</em>
<a id="L1432" name="L1432"></a>1432         <em class="brace">}</em>
<a id="L1433" name="L1433"></a>1433     <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434 
<a id="L1435" name="L1435"></a>1435     <strong class="reserved">if</strong> (!<a href="../S/1.html#L411" title="Defined at 411 in src/launcher/java_md.c.">GetApplicationHome</a>(<a href="../S/2912.html#L4518" title="Defined at 4518 in src/javax/swing/plaf/basic/BasicTreeUI.java.">home</a>, <strong class="reserved">sizeof</strong>(<a href="../S/2912.html#L4518" title="Defined at 4518 in src/javax/swing/plaf/basic/BasicTreeUI.java.">home</a>))) <em class="brace">{</em>
<a id="L1436" name="L1436"></a>1436         <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L69" title="Defined at 69 in src/launcher/emessages.h.">CFG_ERROR5</a>);
<a id="L1437" name="L1437"></a>1437         <strong class="reserved">return</strong> JNI_FALSE;
<a id="L1438" name="L1438"></a>1438     <em class="brace">}</em>
<a id="L1439" name="L1439"></a>1439 
<div class="comment">
     /* 40 for '-Dapplication.home=' */</div>
<a id="L1441" name="L1441"></a>1441     apphome = (<strong class="reserved">char</strong> *)<a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../S/2912.html#L4518" title="Defined at 4518 in src/javax/swing/plaf/basic/BasicTreeUI.java.">home</a>) + 40);
<a id="L1442" name="L1442"></a>1442     sprintf(apphome, "-Dapplication.home=%s", <a href="../S/2912.html#L4518" title="Defined at 4518 in src/javax/swing/plaf/basic/BasicTreeUI.java.">home</a>);
<a id="L1443" name="L1443"></a>1443     <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(apphome, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1444" name="L1444"></a>1444 
<div class="comment">
     /* How big is the application's classpath? */</div>
<a id="L1446" name="L1446"></a>1446     <div class="comment">
;                                 /* 40: "-Djava.class.path=" */</div>
<a id="L1447" name="L1447"></a>1447     <strong class="reserved">for</strong> (i = 0; i &lt; cpathc; i++) <em class="brace">{</em>
<a id="L1448" name="L1448"></a>1448         <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> += (<strong class="reserved">int</strong>)<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<a href="../S/2912.html#L4518" title="Defined at 4518 in src/javax/swing/plaf/basic/BasicTreeUI.java.">home</a>) + (<strong class="reserved">int</strong>)<div class="comment">
; /* 1: separator */</div>
<a id="L1449" name="L1449"></a>1449     <em class="brace">}</em>
<a id="L1450" name="L1450"></a>1450     appcp = (<strong class="reserved">char</strong> *)<a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> + 1);
<a id="L1451" name="L1451"></a>1451     <a href="../S/9.html#L55" title="Defined at 55 in src/launcher/jli_util.h.">JLI_StrCpy</a>(appcp, "-Djava.class.path=");
<a id="L1452" name="L1452"></a>1452     <strong class="reserved">for</strong> (i = 0; i &lt; cpathc; i++) <em class="brace">{</em>
<a id="L1453" name="L1453"></a>1453         <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(appcp, <div class="comment">
/* c:\program files\myapp */</div>
<a id="L1454" name="L1454"></a>1454         <div class="comment">
/* \lib\myapp.jar         */</div>
<a id="L1455" name="L1455"></a>1455         <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(appcp, <div class="comment">
/* ;                      */</div>
<a id="L1456" name="L1456"></a>1456     <em class="brace">}</em>
<a id="L1457" name="L1457"></a>1457     appcp[<div class="comment">
] = '\0';  /* remove trailing path separator */</div>
<a id="L1458" name="L1458"></a>1458     <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(appcp, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1459" name="L1459"></a>1459     <strong class="reserved">return</strong> JNI_TRUE;
<a id="L1460" name="L1460"></a>1460 <em class="brace">}</em>
<a id="L1461" name="L1461"></a>1461 
<div class="comment">
  inject the -Dsun.java.command pseudo property into the args structure
  this pseudo property is used in the HotSpot VM to expose the
  Java class name and arguments to the main method to the VM. The
  HotSpot VM uses this pseudo property to store the Java class name
  (or jar file name) and the arguments to the class's main method
  to the instrumentation memory region. The sun.java.command pseudo
  property is not exported by HotSpot to the Java layer.</div>
<a id="L1471" name="L1471"></a>1471 <strong class="reserved">void</strong>
<a id="L1472" name="L1472"></a>1472 <a href="../R/7167.html" title="Multiple referred from 2 places.">SetJavaCommandLineProp</a>(<strong class="reserved">char</strong> *what, <strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv)
<a id="L1473" name="L1473"></a>1473 <em class="brace">{</em>
<a id="L1474" name="L1474"></a>1474 
<a id="L1475" name="L1475"></a>1475     <strong class="reserved">int</strong> i = 0;
<a id="L1476" name="L1476"></a>1476     size_t len = 0;
<a id="L1477" name="L1477"></a>1477     <strong class="reserved">char</strong>* javaCommand = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1478" name="L1478"></a>1478     <strong class="reserved">char</strong>* dashDstr = "-Dsun.java.command=";
<a id="L1479" name="L1479"></a>1479 
<a id="L1480" name="L1480"></a>1480     <strong class="reserved">if</strong> (what == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<div class="comment">
 unexpected, one of these should be set. just return without
          setting the property</div>
<a id="L1484" name="L1484"></a>1484         <strong class="reserved">return</strong>;
<a id="L1485" name="L1485"></a>1485     <em class="brace">}</em>
<a id="L1486" name="L1486"></a>1486 
<div class="comment">
 determine the amount of memory to allocate assuming
      the individual components will be space separated</div>
<a id="L1490" name="L1490"></a>1490     len = <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(what);
<a id="L1491" name="L1491"></a>1491     <strong class="reserved">for</strong> (i = 0; i &lt; argc; i++) <em class="brace">{</em>
<a id="L1492" name="L1492"></a>1492         len += <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(argv[i]) + 1;
<a id="L1493" name="L1493"></a>1493     <em class="brace">}</em>
<a id="L1494" name="L1494"></a>1494 
<div class="comment">
     /* allocate the memory */</div>
<a id="L1496" name="L1496"></a>1496     javaCommand = (<strong class="reserved">char</strong>*) <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(len + <a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(dashDstr) + 1);
<a id="L1497" name="L1497"></a>1497 
<div class="comment">
     /* build the -D string */</div>
<a id="L1499" name="L1499"></a>1499     *javaCommand = '\0';
<a id="L1500" name="L1500"></a>1500     <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(javaCommand, dashDstr);
<a id="L1501" name="L1501"></a>1501     <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(javaCommand, what);
<a id="L1502" name="L1502"></a>1502 
<a id="L1503" name="L1503"></a>1503     <strong class="reserved">for</strong> (i = 0; i &lt; argc; i++) <em class="brace">{</em>
<div class="comment">
 the components of the string are space separated. In
          the case of embedded white space, the relationship of
          the white space separated components to their true
          positional arguments will be ambiguous. This issue may
          be addressed in a future release.</div>
<a id="L1510" name="L1510"></a>1510         <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(javaCommand, " ");
<a id="L1511" name="L1511"></a>1511         <a href="../S/9.html#L54" title="Defined at 54 in src/launcher/jli_util.h.">JLI_StrCat</a>(javaCommand, argv[i]);
<a id="L1512" name="L1512"></a>1512     <em class="brace">}</em>
<a id="L1513" name="L1513"></a>1513 
<a id="L1514" name="L1514"></a>1514     <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>(javaCommand, <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1515" name="L1515"></a>1515 <em class="brace">}</em>
<a id="L1516" name="L1516"></a>1516 
<div class="comment">
  JVM would like to know if it's created by a standard Sun launcher, or by
  user native application, the following property indicates the former.</div>
<a id="L1521" name="L1521"></a>1521 <strong class="reserved">void</strong>
<a id="L1522" name="L1522"></a>1522 <a href="../R/7169.html" title="Multiple referred from 2 places.">SetJavaLauncherProp</a>() <em class="brace">{</em>
<a id="L1523" name="L1523"></a>1523   <a href="../S/15.html#L743" title="Defined at 743 in src/launcher/java.c.">AddOption</a>("-Dsun.java.launcher=SUN_STANDARD", <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L1524" name="L1524"></a>1524 <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525 
<div class="comment">
  Prints the version information from the java.version and other properties.</div>
<a id="L1529" name="L1529"></a>1529 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L1530" name="L1530"></a>1530 <a href="../R/6220.html" title="Multiple referred from 2 places.">PrintJavaVersion</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, jboolean extraLF)
<a id="L1531" name="L1531"></a>1531 <em class="brace">{</em>
<a id="L1532" name="L1532"></a>1532     jclass ver;
<a id="L1533" name="L1533"></a>1533     jmethodID <a href="../D/29620.html" title="Multiple defined in 86 places.">print</a>;
<a id="L1534" name="L1534"></a>1534 
<a id="L1535" name="L1535"></a>1535     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(ver = <a href="../S/1.html#L1242" title="Defined at 1242 in src/launcher/java_md.c.">FindBootStrapClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, "sun/misc/Version"));
<a id="L1536" name="L1536"></a>1536     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(<a href="../D/29620.html" title="Multiple defined in 86 places.">print</a> = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>,
<a id="L1537" name="L1537"></a>1537                                                  ver,
<a id="L1538" name="L1538"></a>1538                                                  (extraLF == JNI_TRUE) ? "println" : "print",
<a id="L1539" name="L1539"></a>1539                                                  "()V"
<a id="L1540" name="L1540"></a>1540                                                  )
<a id="L1541" name="L1541"></a>1541               );
<a id="L1542" name="L1542"></a>1542 
<a id="L1543" name="L1543"></a>1543     (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, ver, <a href="../D/29620.html" title="Multiple defined in 86 places.">print</a>);
<a id="L1544" name="L1544"></a>1544 <em class="brace">}</em>
<a id="L1545" name="L1545"></a>1545 
<div class="comment">
  Prints all the Java settings, see the java implementation for more details.</div>
<a id="L1549" name="L1549"></a>1549 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L1550" name="L1550"></a>1550 <a href="../R/7205.html" title="Multiple referred from 2 places.">ShowSettings</a>(JNIEnv *<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">char</strong> *optString)
<a id="L1551" name="L1551"></a>1551 <em class="brace">{</em>
<a id="L1552" name="L1552"></a>1552     jmethodID showSettingsID;
<a id="L1553" name="L1553"></a>1553     jstring joptString;
<a id="L1554" name="L1554"></a>1554     jclass cls = <a href="../S/15.html#L1222" title="Defined at 1222 in src/launcher/java.c.">GetLauncherHelperClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L1555" name="L1555"></a>1555     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(cls);
<a id="L1556" name="L1556"></a>1556     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(showSettingsID = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1557" name="L1557"></a>1557             "showSettings", "(ZLjava/lang/String;JJJZ)V"));
<a id="L1558" name="L1558"></a>1558     joptString = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, optString);
<a id="L1559" name="L1559"></a>1559     (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, showSettingsID,
<a id="L1560" name="L1560"></a>1560                                  <a href="../S/15.html#L65" title="Defined at 65 in src/launcher/java.c.">USE_STDERR</a>,
<a id="L1561" name="L1561"></a>1561                                  joptString,
<a id="L1562" name="L1562"></a>1562                                  (jlong)initialHeapSize,
<a id="L1563" name="L1563"></a>1563                                  (jlong)maxHeapSize,
<a id="L1564" name="L1564"></a>1564                                  (jlong)threadStackSize,
<a id="L1565" name="L1565"></a>1565                                  <a href="../S/1.html#L677" title="Defined at 677 in src/launcher/java_md.c.">ServerClassMachine</a>());
<a id="L1566" name="L1566"></a>1566 <em class="brace">}</em>
<a id="L1567" name="L1567"></a>1567 
<div class="comment">
  Prints default usage or the Xusage message, see sun.launcher.LauncherHelper.java</div>
<a id="L1571" name="L1571"></a>1571 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L1572" name="L1572"></a>1572 <a href="../R/6241.html" title="Multiple referred from 2 places.">PrintUsage</a>(JNIEnv* <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, jboolean doXUsage)
<a id="L1573" name="L1573"></a>1573 <em class="brace">{</em>
<a id="L1574" name="L1574"></a>1574   jmethodID initHelp, vmSelect, vmSynonym, vmErgo, printHelp, printXUsageMessage;
<a id="L1575" name="L1575"></a>1575   jstring jprogname, vm1, vm2;
<a id="L1576" name="L1576"></a>1576   <strong class="reserved">int</strong> i;
<a id="L1577" name="L1577"></a>1577   jclass cls = <a href="../S/15.html#L1222" title="Defined at 1222 in src/launcher/java.c.">GetLauncherHelperClass</a>(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L1578" name="L1578"></a>1578   <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(cls);
<a id="L1579" name="L1579"></a>1579   <strong class="reserved">if</strong> (doXUsage) <em class="brace">{</em>
<a id="L1580" name="L1580"></a>1580     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(printXUsageMessage = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1581" name="L1581"></a>1581                                         "printXUsageMessage", "(Z)V"));
<a id="L1582" name="L1582"></a>1582     (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, printXUsageMessage, <a href="../S/15.html#L65" title="Defined at 65 in src/launcher/java.c.">USE_STDERR</a>);
<a id="L1583" name="L1583"></a>1583   <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1584" name="L1584"></a>1584     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(initHelp = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1585" name="L1585"></a>1585                                         "initHelpMessage", "(Ljava/lang/String;)V"));
<a id="L1586" name="L1586"></a>1586 
<a id="L1587" name="L1587"></a>1587     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(vmSelect = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, "appendVmSelectMessage",
<a id="L1588" name="L1588"></a>1588                                         "(Ljava/lang/String;Ljava/lang/String;)V"));
<a id="L1589" name="L1589"></a>1589 
<a id="L1590" name="L1590"></a>1590     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(vmSynonym = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1591" name="L1591"></a>1591                                         "appendVmSynonymMessage",
<a id="L1592" name="L1592"></a>1592                                         "(Ljava/lang/String;Ljava/lang/String;)V"));
<a id="L1593" name="L1593"></a>1593     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(vmErgo = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1594" name="L1594"></a>1594                                         "appendVmErgoMessage", "(ZLjava/lang/String;)V"));
<a id="L1595" name="L1595"></a>1595 
<a id="L1596" name="L1596"></a>1596     <a href="../S/5.html#L256" title="Defined at 256 in src/launcher/java.h.">NULL_CHECK</a>(printHelp = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;GetStaticMethodID(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls,
<a id="L1597" name="L1597"></a>1597                                         "printHelpMessage", "(Z)V"));
<a id="L1598" name="L1598"></a>1598 
<a id="L1599" name="L1599"></a>1599     jprogname = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, _program_name);
<a id="L1600" name="L1600"></a>1600 
<div class="comment">
     /* Initialize the usage message with the usual preamble */</div>
<a id="L1602" name="L1602"></a>1602     (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, initHelp, jprogname);
<a id="L1603" name="L1603"></a>1603 
<a id="L1604" name="L1604"></a>1604 
<div class="comment">
     /* Assemble the other variant part of the usage */</div>
<a id="L1606" name="L1606"></a>1606     <strong class="reserved">if</strong> ((knownVMs[0].flag == <a href="../S/15.html#L130" title="Defined at 130 in src/launcher/java.c.">VM_KNOWN</a>) ||
<a id="L1607" name="L1607"></a>1607         (knownVMs[0].flag == <a href="../S/15.html#L134" title="Defined at 134 in src/launcher/java.c.">VM_IF_SERVER_CLASS</a>)) <em class="brace">{</em>
<a id="L1608" name="L1608"></a>1608       vm1 = (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, knownVMs[0].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1609" name="L1609"></a>1609       vm2 =  (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, knownVMs[0].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+1);
<a id="L1610" name="L1610"></a>1610       (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, vmSelect, vm1, vm2);
<a id="L1611" name="L1611"></a>1611     <em class="brace">}</em>
<a id="L1612" name="L1612"></a>1612     <strong class="reserved">for</strong> (i=1; i&lt;knownVMsCount; i++) <em class="brace">{</em>
<a id="L1613" name="L1613"></a>1613       <strong class="reserved">if</strong> (knownVMs[i].flag == <a href="../S/15.html#L130" title="Defined at 130 in src/launcher/java.c.">VM_KNOWN</a>) <em class="brace">{</em>
<a id="L1614" name="L1614"></a>1614         vm1 =  (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, knownVMs[i].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1615" name="L1615"></a>1615         vm2 =  (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, knownVMs[i].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+1);
<a id="L1616" name="L1616"></a>1616         (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, vmSelect, vm1, vm2);
<a id="L1617" name="L1617"></a>1617       <em class="brace">}</em>
<a id="L1618" name="L1618"></a>1618     <em class="brace">}</em>
<a id="L1619" name="L1619"></a>1619     <strong class="reserved">for</strong> (i=1; i&lt;knownVMsCount; i++) <em class="brace">{</em>
<a id="L1620" name="L1620"></a>1620       <strong class="reserved">if</strong> (knownVMs[i].flag == <a href="../S/15.html#L131" title="Defined at 131 in src/launcher/java.c.">VM_ALIASED_TO</a>) <em class="brace">{</em>
<a id="L1621" name="L1621"></a>1621         vm1 =  (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, knownVMs[i].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1622" name="L1622"></a>1622         vm2 =  (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, knownVMs[i].alias+1);
<a id="L1623" name="L1623"></a>1623         (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, vmSynonym, vm1, vm2);
<a id="L1624" name="L1624"></a>1624       <em class="brace">}</em>
<a id="L1625" name="L1625"></a>1625     <em class="brace">}</em>
<a id="L1626" name="L1626"></a>1626 
<div class="comment">
     /* The first known VM is the default */</div>
<a id="L1628" name="L1628"></a>1628     <em class="brace">{</em>
<a id="L1629" name="L1629"></a>1629       jboolean isServerClassMachine = <a href="../S/1.html#L677" title="Defined at 677 in src/launcher/java_md.c.">ServerClassMachine</a>();
<a id="L1630" name="L1630"></a>1630 
<a id="L1631" name="L1631"></a>1631       <strong class="reserved">const</strong> <strong class="reserved">char</strong>* defaultVM  =  knownVMs[0].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+1;
<a id="L1632" name="L1632"></a>1632       <strong class="reserved">if</strong> ((knownVMs[0].flag == <a href="../S/15.html#L134" title="Defined at 134 in src/launcher/java.c.">VM_IF_SERVER_CLASS</a>) &amp;&amp; isServerClassMachine) <em class="brace">{</em>
<a id="L1633" name="L1633"></a>1633         defaultVM = knownVMs[0].server_class+1;
<a id="L1634" name="L1634"></a>1634       <em class="brace">}</em>
<a id="L1635" name="L1635"></a>1635 
<a id="L1636" name="L1636"></a>1636       vm1 =  (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;NewStringUTF(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, defaultVM);
<a id="L1637" name="L1637"></a>1637       (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, vmErgo, isServerClassMachine,  vm1);
<a id="L1638" name="L1638"></a>1638     <em class="brace">}</em>
<a id="L1639" name="L1639"></a>1639 
<div class="comment">
     /* Complete the usage message and print to stderr*/</div>
<a id="L1641" name="L1641"></a>1641     (*<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)-&gt;CallStaticVoidMethod(<a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, cls, printHelp, <a href="../S/15.html#L65" title="Defined at 65 in src/launcher/java.c.">USE_STDERR</a>);
<a id="L1642" name="L1642"></a>1642   <em class="brace">}</em>
<a id="L1643" name="L1643"></a>1643   <strong class="reserved">return</strong>;
<a id="L1644" name="L1644"></a>1644 <em class="brace">}</em>
<a id="L1645" name="L1645"></a>1645 
<div class="comment">
  Read the jvm.cfg file and fill the knownJVMs[] array.
  The functionality of the jvm.cfg file is subject to change without
  notice and the mechanism will be removed in the future.
  The lexical structure of the jvm.cfg file is as follows:
      jvmcfg         :=  { vmLine }
      vmLine         :=  knownLine
                     |   aliasLine
                     |   warnLine
                     |   ignoreLine
                     |   errorLine
                     |   predicateLine
                     |   commentLine
      knownLine      :=  flag  "KNOWN"                  EOL
      warnLine       :=  flag  "WARN"                   EOL
      ignoreLine     :=  flag  "IGNORE"                 EOL
      errorLine      :=  flag  "ERROR"                  EOL
      aliasLine      :=  flag  "ALIASED_TO"       flag  EOL
      predicateLine  :=  flag  "IF_SERVER_CLASS"  flag  EOL
      commentLine    :=  "#" text                       EOL
      flag           :=  "-" identifier
  The semantics are that when someone specifies a flag on the command line:
  - if the flag appears on a knownLine, then the identifier is used as
    the name of the directory holding the JVM library (the name of the JVM).
  - if the flag appears as the first flag on an aliasLine, the identifier
    of the second flag is used as the name of the JVM.
  - if the flag appears on a warnLine, the identifier is used as the
    name of the JVM, but a warning is generated.
  - if the flag appears on an ignoreLine, the identifier is recognized as the
    name of a JVM, but the identifier is ignored and the default vm used
  - if the flag appears on an errorLine, an error is generated.
  - if the flag appears as the first flag on a predicateLine, and
    the machine on which you are running passes the predicate indicated,
    then the identifier of the second flag is used as the name of the JVM,
    otherwise the identifier of the first flag is used as the name of the JVM.
  If no flag is given on the command line, the first vmLine of the jvm.cfg
  file determines the name of the JVM.
  PredicateLines are only interpreted on first vmLine of a jvm.cfg file,
  since they only make sense if someone hasn't specified the name of the
  JVM on the command line.
  The intent of the jvm.cfg file is to allow several JVM libraries to
  be installed in different subdirectories of a single JRE installation,
  for space-savings and convenience in testing.
  The intent is explicitly not to provide a full aliasing or predicate
  mechanism.</div>
<a id="L1697" name="L1697"></a>1697 jint
<a id="L1698" name="L1698"></a>1698 <a href="../R/6484.html" title="Multiple referred from 2 places.">ReadKnownVMs</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong> *jvmCfgName, jboolean speculative)
<a id="L1699" name="L1699"></a>1699 <em class="brace">{</em>
<a id="L1700" name="L1700"></a>1700     FILE *jvmCfg;
<a id="L1701" name="L1701"></a>1701     <strong class="reserved">char</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>[<a href="../S/10.html#L39" title="Defined at 39 in src/launcher/java_md.h.">MAXPATHLEN</a>+20];
<a id="L1702" name="L1702"></a>1702     <strong class="reserved">int</strong> cnt = 0;
<a id="L1703" name="L1703"></a>1703     <strong class="reserved">int</strong> <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a> = 0;
<a id="L1704" name="L1704"></a>1704     jlong <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L1705" name="L1705"></a>1705     <strong class="reserved">int</strong> vmType;
<a id="L1706" name="L1706"></a>1706     <strong class="reserved">char</strong> *tmpPtr;
<a id="L1707" name="L1707"></a>1707     <strong class="reserved">char</strong> *altVMName = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1708" name="L1708"></a>1708     <strong class="reserved">char</strong> *serverClassVMName = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1709" name="L1709"></a>1709     <strong class="reserved">static</strong> <strong class="reserved">char</strong> *whiteSpace = " \t";
<a id="L1710" name="L1710"></a>1710     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L1711" name="L1711"></a>1711         <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L1712" name="L1712"></a>1712     <em class="brace">}</em>
<a id="L1713" name="L1713"></a>1713 
<a id="L1714" name="L1714"></a>1714     jvmCfg = fopen(jvmCfgName, "r");
<a id="L1715" name="L1715"></a>1715     <strong class="reserved">if</strong> (jvmCfg == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1716" name="L1716"></a>1716       <strong class="reserved">if</strong> (!speculative) <em class="brace">{</em>
<a id="L1717" name="L1717"></a>1717         <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L70" title="Defined at 70 in src/launcher/emessages.h.">CFG_ERROR6</a>, jvmCfgName);
<a id="L1718" name="L1718"></a>1718         <a href="../D/15818.html" title="Multiple defined in 12 places.">exit</a>(1);
<a id="L1719" name="L1719"></a>1719       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1720" name="L1720"></a>1720         <strong class="reserved">return</strong> -1;
<a id="L1721" name="L1721"></a>1721       <em class="brace">}</em>
<a id="L1722" name="L1722"></a>1722     <em class="brace">}</em>
<a id="L1723" name="L1723"></a>1723     <strong class="reserved">while</strong> (fgets(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>, <strong class="reserved">sizeof</strong>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>), jvmCfg) != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1724" name="L1724"></a>1724         vmType = <a href="../S/15.html#L129" title="Defined at 129 in src/launcher/java.c.">VM_UNKNOWN</a>;
<a id="L1725" name="L1725"></a>1725         <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>++;
<a id="L1726" name="L1726"></a>1726         <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>[0] == '#')
<a id="L1727" name="L1727"></a>1727             <strong class="reserved">continue</strong>;
<a id="L1728" name="L1728"></a>1728         <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>[0] != '-') <em class="brace">{</em>
<a id="L1729" name="L1729"></a>1729             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L60" title="Defined at 60 in src/launcher/emessages.h.">CFG_WARN2</a>, <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>, jvmCfgName);
<a id="L1730" name="L1730"></a>1730         <em class="brace">}</em>
<a id="L1731" name="L1731"></a>1731         <strong class="reserved">if</strong> (cnt &gt;= knownVMsLimit) <em class="brace">{</em>
<a id="L1732" name="L1732"></a>1732             <a href="../S/15.html#L1823" title="Defined at 1823 in src/launcher/java.c.">GrowKnownVMs</a>(cnt);
<a id="L1733" name="L1733"></a>1733         <em class="brace">}</em>
<a id="L1734" name="L1734"></a>1734         <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>[<a href="../S/9.html#L49" title="Defined at 49 in src/launcher/jli_util.h.">JLI_StrLen</a>(<div class="comment">
] = '\0'; /* remove trailing newline */</div>
<a id="L1735" name="L1735"></a>1735         tmpPtr = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> + <a href="../S/9.html#L59" title="Defined at 59 in src/launcher/jli_util.h.">JLI_StrCSpn</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>, whiteSpace);
<a id="L1736" name="L1736"></a>1736         <strong class="reserved">if</strong> (*tmpPtr == 0) <em class="brace">{</em>
<a id="L1737" name="L1737"></a>1737             <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L61" title="Defined at 61 in src/launcher/emessages.h.">CFG_WARN3</a>, <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>, jvmCfgName);
<a id="L1738" name="L1738"></a>1738         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
             /* Null-terminate this string for JLI_StringDup below */</div>
<a id="L1740" name="L1740"></a>1740             *tmpPtr++ = 0;
<a id="L1741" name="L1741"></a>1741             tmpPtr += <a href="../S/9.html#L58" title="Defined at 58 in src/launcher/jli_util.h.">JLI_StrSpn</a>(tmpPtr, whiteSpace);
<a id="L1742" name="L1742"></a>1742             <strong class="reserved">if</strong> (*tmpPtr == 0) <em class="brace">{</em>
<a id="L1743" name="L1743"></a>1743                 <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L61" title="Defined at 61 in src/launcher/emessages.h.">CFG_WARN3</a>, <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>, jvmCfgName);
<a id="L1744" name="L1744"></a>1744             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1745" name="L1745"></a>1745                 <strong class="reserved">if</strong> (!<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(tmpPtr, "KNOWN")) <em class="brace">{</em>
<a id="L1746" name="L1746"></a>1746                     vmType = <a href="../S/15.html#L130" title="Defined at 130 in src/launcher/java.c.">VM_KNOWN</a>;
<a id="L1747" name="L1747"></a>1747                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(tmpPtr, "ALIASED_TO")) <em class="brace">{</em>
<a id="L1748" name="L1748"></a>1748                     tmpPtr += <a href="../S/9.html#L59" title="Defined at 59 in src/launcher/jli_util.h.">JLI_StrCSpn</a>(tmpPtr, whiteSpace);
<a id="L1749" name="L1749"></a>1749                     <strong class="reserved">if</strong> (*tmpPtr != 0) <em class="brace">{</em>
<a id="L1750" name="L1750"></a>1750                         tmpPtr += <a href="../S/9.html#L58" title="Defined at 58 in src/launcher/jli_util.h.">JLI_StrSpn</a>(tmpPtr, whiteSpace);
<a id="L1751" name="L1751"></a>1751                     <em class="brace">}</em>
<a id="L1752" name="L1752"></a>1752                     <strong class="reserved">if</strong> (*tmpPtr == 0) <em class="brace">{</em>
<a id="L1753" name="L1753"></a>1753                         <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L61" title="Defined at 61 in src/launcher/emessages.h.">CFG_WARN3</a>, <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>, jvmCfgName);
<a id="L1754" name="L1754"></a>1754                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
                         /* Null terminate altVMName */</div>
<a id="L1756" name="L1756"></a>1756                         altVMName = tmpPtr;
<a id="L1757" name="L1757"></a>1757                         tmpPtr += <a href="../S/9.html#L59" title="Defined at 59 in src/launcher/jli_util.h.">JLI_StrCSpn</a>(tmpPtr, whiteSpace);
<a id="L1758" name="L1758"></a>1758                         *tmpPtr = 0;
<a id="L1759" name="L1759"></a>1759                         vmType = <a href="../S/15.html#L131" title="Defined at 131 in src/launcher/java.c.">VM_ALIASED_TO</a>;
<a id="L1760" name="L1760"></a>1760                     <em class="brace">}</em>
<a id="L1761" name="L1761"></a>1761                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(tmpPtr, "WARN")) <em class="brace">{</em>
<a id="L1762" name="L1762"></a>1762                     vmType = <a href="../S/15.html#L132" title="Defined at 132 in src/launcher/java.c.">VM_WARN</a>;
<a id="L1763" name="L1763"></a>1763                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(tmpPtr, "IGNORE")) <em class="brace">{</em>
<a id="L1764" name="L1764"></a>1764                     vmType = <a href="../S/15.html#L135" title="Defined at 135 in src/launcher/java.c.">VM_IGNORE</a>;
<a id="L1765" name="L1765"></a>1765                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(tmpPtr, "ERROR")) <em class="brace">{</em>
<a id="L1766" name="L1766"></a>1766                     vmType = <a href="../S/15.html#L133" title="Defined at 133 in src/launcher/java.c.">VM_ERROR</a>;
<a id="L1767" name="L1767"></a>1767                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(tmpPtr, "IF_SERVER_CLASS")) <em class="brace">{</em>
<a id="L1768" name="L1768"></a>1768                     tmpPtr += <a href="../S/9.html#L59" title="Defined at 59 in src/launcher/jli_util.h.">JLI_StrCSpn</a>(tmpPtr, whiteSpace);
<a id="L1769" name="L1769"></a>1769                     <strong class="reserved">if</strong> (*tmpPtr != 0) <em class="brace">{</em>
<a id="L1770" name="L1770"></a>1770                         tmpPtr += <a href="../S/9.html#L58" title="Defined at 58 in src/launcher/jli_util.h.">JLI_StrSpn</a>(tmpPtr, whiteSpace);
<a id="L1771" name="L1771"></a>1771                     <em class="brace">}</em>
<a id="L1772" name="L1772"></a>1772                     <strong class="reserved">if</strong> (*tmpPtr == 0) <em class="brace">{</em>
<a id="L1773" name="L1773"></a>1773                         <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L62" title="Defined at 62 in src/launcher/emessages.h.">CFG_WARN4</a>, <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>, jvmCfgName);
<a id="L1774" name="L1774"></a>1774                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<div class="comment">
                         /* Null terminate server class VM name */</div>
<a id="L1776" name="L1776"></a>1776                         serverClassVMName = tmpPtr;
<a id="L1777" name="L1777"></a>1777                         tmpPtr += <a href="../S/9.html#L59" title="Defined at 59 in src/launcher/jli_util.h.">JLI_StrCSpn</a>(tmpPtr, whiteSpace);
<a id="L1778" name="L1778"></a>1778                         *tmpPtr = 0;
<a id="L1779" name="L1779"></a>1779                         vmType = <a href="../S/15.html#L134" title="Defined at 134 in src/launcher/java.c.">VM_IF_SERVER_CLASS</a>;
<a id="L1780" name="L1780"></a>1780                     <em class="brace">}</em>
<a id="L1781" name="L1781"></a>1781                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1782" name="L1782"></a>1782                     <a href="../S/1.html#L571" title="Defined at 571 in src/launcher/java_md.c.">JLI_ReportErrorMessage</a>(<a href="../S/7.html#L63" title="Defined at 63 in src/launcher/emessages.h.">CFG_WARN5</a>, <a href="../S/1429.html#L775" title="Defined at 775 in src/java/io/StreamTokenizer.java.">lineno</a>, &amp;jvmCfgName[0]);
<a id="L1783" name="L1783"></a>1783                     vmType = <a href="../S/15.html#L130" title="Defined at 130 in src/launcher/java.c.">VM_KNOWN</a>;
<a id="L1784" name="L1784"></a>1784                 <em class="brace">}</em>
<a id="L1785" name="L1785"></a>1785             <em class="brace">}</em>
<a id="L1786" name="L1786"></a>1786         <em class="brace">}</em>
<a id="L1787" name="L1787"></a>1787 
<a id="L1788" name="L1788"></a>1788         <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("jvm.cfg[%d] = -&gt;%s&lt;-\n", cnt, <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>);
<a id="L1789" name="L1789"></a>1789         <strong class="reserved">if</strong> (vmType != <a href="../S/15.html#L129" title="Defined at 129 in src/launcher/java.c.">VM_UNKNOWN</a>) <em class="brace">{</em>
<a id="L1790" name="L1790"></a>1790             knownVMs[cnt].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>);
<a id="L1791" name="L1791"></a>1791             knownVMs[cnt].flag = vmType;
<a id="L1792" name="L1792"></a>1792             <strong class="reserved">switch</strong> (vmType) <em class="brace">{</em>
<a id="L1793" name="L1793"></a>1793             <strong class="reserved">default</strong>:
<a id="L1794" name="L1794"></a>1794                 <strong class="reserved">break</strong>;
<a id="L1795" name="L1795"></a>1795             <strong class="reserved">case</strong> <a href="../S/15.html#L131" title="Defined at 131 in src/launcher/java.c.">VM_ALIASED_TO</a>:
<a id="L1796" name="L1796"></a>1796                 knownVMs[cnt].alias = <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(altVMName);
<a id="L1797" name="L1797"></a>1797                 <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("    name: %s  vmType: %s  alias: %s\n",
<a id="L1798" name="L1798"></a>1798                    knownVMs[cnt].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, "VM_ALIASED_TO", knownVMs[cnt].alias);
<a id="L1799" name="L1799"></a>1799                 <strong class="reserved">break</strong>;
<a id="L1800" name="L1800"></a>1800             <strong class="reserved">case</strong> <a href="../S/15.html#L134" title="Defined at 134 in src/launcher/java.c.">VM_IF_SERVER_CLASS</a>:
<a id="L1801" name="L1801"></a>1801                 knownVMs[cnt].server_class = <a href="../S/16.html#L67" title="Defined at 67 in src/launcher/jli_util.c.">JLI_StringDup</a>(serverClassVMName);
<a id="L1802" name="L1802"></a>1802                 <a href="../S/16.html#L93" title="Defined at 93 in src/launcher/jli_util.c.">JLI_TraceLauncher</a>("    name: %s  vmType: %s  server_class: %s\n",
<a id="L1803" name="L1803"></a>1803                     knownVMs[cnt].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, "VM_IF_SERVER_CLASS", knownVMs[cnt].server_class);
<a id="L1804" name="L1804"></a>1804                 <strong class="reserved">break</strong>;
<a id="L1805" name="L1805"></a>1805             <em class="brace">}</em>
<a id="L1806" name="L1806"></a>1806             cnt++;
<a id="L1807" name="L1807"></a>1807         <em class="brace">}</em>
<a id="L1808" name="L1808"></a>1808     <em class="brace">}</em>
<a id="L1809" name="L1809"></a>1809     fclose(jvmCfg);
<a id="L1810" name="L1810"></a>1810     knownVMsCount = cnt;
<a id="L1811" name="L1811"></a>1811 
<a id="L1812" name="L1812"></a>1812     <strong class="reserved">if</strong> (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <em class="brace">{</em>
<a id="L1813" name="L1813"></a>1813         <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>   = <a href="../S/1.html#L516" title="Defined at 516 in src/launcher/java_md.c.">CounterGet</a>();
<a id="L1814" name="L1814"></a>1814         <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("%ld micro seconds to parse jvm.cfg\n",
<a id="L1815" name="L1815"></a>1815                (<strong class="reserved">long</strong>)(jint)<a href="../S/1.html#L531" title="Defined at 531 in src/launcher/java_md.c.">Counter2Micros</a>(<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>-<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>));
<a id="L1816" name="L1816"></a>1816     <em class="brace">}</em>
<a id="L1817" name="L1817"></a>1817 
<a id="L1818" name="L1818"></a>1818     <strong class="reserved">return</strong> cnt;
<a id="L1819" name="L1819"></a>1819 <em class="brace">}</em>
<a id="L1820" name="L1820"></a>1820 
<a id="L1821" name="L1821"></a>1821 
<a id="L1822" name="L1822"></a>1822 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L1823" name="L1823"></a>1823 <a href="../R/3335.html" title="Multiple referred from 2 places.">GrowKnownVMs</a>(<strong class="reserved">int</strong> minimum)
<a id="L1824" name="L1824"></a>1824 <em class="brace">{</em>
<a id="L1825" name="L1825"></a>1825     <strong class="reserved">struct</strong> <a href="../S/15.html#L138" title="Defined at 138 in src/launcher/java.c.">vmdesc</a>* newKnownVMs;
<a id="L1826" name="L1826"></a>1826     <strong class="reserved">int</strong> newMax;
<a id="L1827" name="L1827"></a>1827 
<a id="L1828" name="L1828"></a>1828     newMax = (knownVMsLimit == 0 ? <a href="../S/15.html#L125" title="Defined at 125 in src/launcher/java.c.">INIT_MAX_KNOWN_VMS</a> : (2 * knownVMsLimit));
<a id="L1829" name="L1829"></a>1829     <strong class="reserved">if</strong> (newMax &lt;= minimum) <em class="brace">{</em>
<a id="L1830" name="L1830"></a>1830         newMax = minimum;
<a id="L1831" name="L1831"></a>1831     <em class="brace">}</em>
<a id="L1832" name="L1832"></a>1832     newKnownVMs = (<strong class="reserved">struct</strong> <a href="../S/15.html#L138" title="Defined at 138 in src/launcher/java.c.">vmdesc</a>*) <a href="../S/16.html#L37" title="Defined at 37 in src/launcher/jli_util.c.">JLI_MemAlloc</a>(newMax * <strong class="reserved">sizeof</strong>(<strong class="reserved">struct</strong> <a href="../S/15.html#L138" title="Defined at 138 in src/launcher/java.c.">vmdesc</a>));
<a id="L1833" name="L1833"></a>1833     <strong class="reserved">if</strong> (knownVMs != <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L1834" name="L1834"></a>1834         memcpy(newKnownVMs, knownVMs, knownVMsLimit * <strong class="reserved">sizeof</strong>(<strong class="reserved">struct</strong> <a href="../S/15.html#L138" title="Defined at 138 in src/launcher/java.c.">vmdesc</a>));
<a id="L1835" name="L1835"></a>1835     <em class="brace">}</em>
<a id="L1836" name="L1836"></a>1836     <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(knownVMs);
<a id="L1837" name="L1837"></a>1837     knownVMs = newKnownVMs;
<a id="L1838" name="L1838"></a>1838     knownVMsLimit = newMax;
<a id="L1839" name="L1839"></a>1839 <em class="brace">}</em>
<a id="L1840" name="L1840"></a>1840 
<a id="L1841" name="L1841"></a>1841 
<div class="comment">
 /* Returns index of VM or -1 if not found */</div>
<a id="L1843" name="L1843"></a>1843 <strong class="reserved">static</strong> <strong class="reserved">int</strong>
<a id="L1844" name="L1844"></a>1844 <a href="../R/4419.html" title="Multiple referred from 3 places.">KnownVMIndex</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong>* <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)
<a id="L1845" name="L1845"></a>1845 <em class="brace">{</em>
<a id="L1846" name="L1846"></a>1846     <strong class="reserved">int</strong> i;
<a id="L1847" name="L1847"></a>1847     <strong class="reserved">if</strong> (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, "-J") == 0) <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> += 2;
<a id="L1848" name="L1848"></a>1848     <strong class="reserved">for</strong> (i = 0; i &lt; knownVMsCount; i++) <em class="brace">{</em>
<a id="L1849" name="L1849"></a>1849         <strong class="reserved">if</strong> (!<a href="../S/9.html#L52" title="Defined at 52 in src/launcher/jli_util.h.">JLI_StrCmp</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, knownVMs[i].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)) <em class="brace">{</em>
<a id="L1850" name="L1850"></a>1850             <strong class="reserved">return</strong> i;
<a id="L1851" name="L1851"></a>1851         <em class="brace">}</em>
<a id="L1852" name="L1852"></a>1852     <em class="brace">}</em>
<a id="L1853" name="L1853"></a>1853     <strong class="reserved">return</strong> -1;
<a id="L1854" name="L1854"></a>1854 <em class="brace">}</em>
<a id="L1855" name="L1855"></a>1855 
<a id="L1856" name="L1856"></a>1856 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L1857" name="L1857"></a>1857 <a href="../R/3129.html" title="Multiple referred from 2 places.">FreeKnownVMs</a>()
<a id="L1858" name="L1858"></a>1858 <em class="brace">{</em>
<a id="L1859" name="L1859"></a>1859     <strong class="reserved">int</strong> i;
<a id="L1860" name="L1860"></a>1860     <strong class="reserved">for</strong> (i = 0; i &lt; knownVMsCount; i++) <em class="brace">{</em>
<a id="L1861" name="L1861"></a>1861         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(knownVMs[i].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1862" name="L1862"></a>1862         knownVMs[i].<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1863" name="L1863"></a>1863     <em class="brace">}</em>
<a id="L1864" name="L1864"></a>1864     <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(knownVMs);
<a id="L1865" name="L1865"></a>1865 <em class="brace">}</em>
<a id="L1866" name="L1866"></a>1866 
<div class="comment">
  Displays the splash screen according to the jar file name
  and image file names stored in environment variables</div>
<a id="L1871" name="L1871"></a>1871 <strong class="reserved">void</strong>
<a id="L1872" name="L1872"></a>1872 <a href="../R/7206.html" title="Multiple referred from 2 places.">ShowSplashScreen</a>()
<a id="L1873" name="L1873"></a>1873 <em class="brace">{</em>
<a id="L1874" name="L1874"></a>1874     <strong class="reserved">const</strong> <strong class="reserved">char</strong> *jar_name = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>(<a href="../S/5.html#L75" title="Defined at 75 in src/launcher/java.h.">SPLASH_JAR_ENV_ENTRY</a>);
<a id="L1875" name="L1875"></a>1875     <strong class="reserved">const</strong> <strong class="reserved">char</strong> *file_name = <a href="../D/23892.html" title="Multiple defined in 4 places.">getenv</a>(<a href="../S/5.html#L74" title="Defined at 74 in src/launcher/java.h.">SPLASH_FILE_ENV_ENTRY</a>);
<a id="L1876" name="L1876"></a>1876     <strong class="reserved">int</strong> data_size;
<a id="L1877" name="L1877"></a>1877     <strong class="reserved">void</strong> *image_data = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1878" name="L1878"></a>1878     <strong class="reserved">float</strong> scale_factor = 1;
<a id="L1879" name="L1879"></a>1879     <strong class="reserved">char</strong> *scaled_splash_name = <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1880" name="L1880"></a>1880 
<a id="L1881" name="L1881"></a>1881     <strong class="reserved">if</strong> (file_name == <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)<em class="brace">{</em>
<a id="L1882" name="L1882"></a>1882         <strong class="reserved">return</strong>;
<a id="L1883" name="L1883"></a>1883     <em class="brace">}</em>
<a id="L1884" name="L1884"></a>1884 
<a id="L1885" name="L1885"></a>1885     scaled_splash_name = <a href="../S/2.html#L87" title="Defined at 87 in src/launcher/splashscreen_stubs.c.">DoSplashGetScaledImageName</a>(
<a id="L1886" name="L1886"></a>1886                         jar_name, file_name, &amp;scale_factor);
<a id="L1887" name="L1887"></a>1887     <strong class="reserved">if</strong> (jar_name) <em class="brace">{</em>
<a id="L1888" name="L1888"></a>1888 
<a id="L1889" name="L1889"></a>1889         <strong class="reserved">if</strong> (scaled_splash_name) <em class="brace">{</em>
<a id="L1890" name="L1890"></a>1890             image_data = <a href="../S/13.html#L616" title="Defined at 616 in src/launcher/parse_manifest.c.">JLI_JarUnpackFile</a>(
<a id="L1891" name="L1891"></a>1891                     jar_name, scaled_splash_name, &amp;data_size);
<a id="L1892" name="L1892"></a>1892         <em class="brace">}</em>
<a id="L1893" name="L1893"></a>1893 
<a id="L1894" name="L1894"></a>1894         <strong class="reserved">if</strong> (!image_data) <em class="brace">{</em>
<a id="L1895" name="L1895"></a>1895             scale_factor = 1;
<a id="L1896" name="L1896"></a>1896             image_data = <a href="../S/13.html#L616" title="Defined at 616 in src/launcher/parse_manifest.c.">JLI_JarUnpackFile</a>(
<a id="L1897" name="L1897"></a>1897                             jar_name, file_name, &amp;data_size);
<a id="L1898" name="L1898"></a>1898         <em class="brace">}</em>
<a id="L1899" name="L1899"></a>1899         <strong class="reserved">if</strong> (image_data) <em class="brace">{</em>
<a id="L1900" name="L1900"></a>1900             <a href="../S/2.html#L71" title="Defined at 71 in src/launcher/splashscreen_stubs.c.">DoSplashInit</a>();
<a id="L1901" name="L1901"></a>1901             <a href="../S/2.html#L83" title="Defined at 83 in src/launcher/splashscreen_stubs.c.">DoSplashSetScaleFactor</a>(scale_factor);
<a id="L1902" name="L1902"></a>1902             <a href="../S/2.html#L63" title="Defined at 63 in src/launcher/splashscreen_stubs.c.">DoSplashLoadMemory</a>(image_data, data_size);
<a id="L1903" name="L1903"></a>1903             <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(image_data);
<a id="L1904" name="L1904"></a>1904         <em class="brace">}</em>
<a id="L1905" name="L1905"></a>1905     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1906" name="L1906"></a>1906         <a href="../S/2.html#L71" title="Defined at 71 in src/launcher/splashscreen_stubs.c.">DoSplashInit</a>();
<a id="L1907" name="L1907"></a>1907         <strong class="reserved">if</strong> (scaled_splash_name) <em class="brace">{</em>
<a id="L1908" name="L1908"></a>1908             <a href="../S/2.html#L83" title="Defined at 83 in src/launcher/splashscreen_stubs.c.">DoSplashSetScaleFactor</a>(scale_factor);
<a id="L1909" name="L1909"></a>1909             <a href="../S/2.html#L67" title="Defined at 67 in src/launcher/splashscreen_stubs.c.">DoSplashLoadFile</a>(scaled_splash_name);
<a id="L1910" name="L1910"></a>1910         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1911" name="L1911"></a>1911             <a href="../S/2.html#L67" title="Defined at 67 in src/launcher/splashscreen_stubs.c.">DoSplashLoadFile</a>(file_name);
<a id="L1912" name="L1912"></a>1912         <em class="brace">}</em>
<a id="L1913" name="L1913"></a>1913     <em class="brace">}</em>
<a id="L1914" name="L1914"></a>1914 
<a id="L1915" name="L1915"></a>1915     <strong class="reserved">if</strong> (scaled_splash_name) <em class="brace">{</em>
<a id="L1916" name="L1916"></a>1916         <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(scaled_splash_name);
<a id="L1917" name="L1917"></a>1917     <em class="brace">}</em>
<a id="L1918" name="L1918"></a>1918 
<a id="L1919" name="L1919"></a>1919     <a href="../S/2.html#L79" title="Defined at 79 in src/launcher/splashscreen_stubs.c.">DoSplashSetFileJarName</a>(file_name, jar_name);
<a id="L1920" name="L1920"></a>1920 
<div class="comment">
      Done with all command line processing and potential re-execs so
      clean up the environment.</div>
<a id="L1925" name="L1925"></a>1925     (<strong class="reserved">void</strong>)<a href="../S/1.html#L1099" title="Defined at 1099 in src/launcher/java_md.c.">UnsetEnv</a>(<a href="../S/5.html#L72" title="Defined at 72 in src/launcher/java.h.">ENV_ENTRY</a>);
<a id="L1926" name="L1926"></a>1926     (<strong class="reserved">void</strong>)<a href="../S/1.html#L1099" title="Defined at 1099 in src/launcher/java_md.c.">UnsetEnv</a>(<a href="../S/5.html#L74" title="Defined at 74 in src/launcher/java.h.">SPLASH_FILE_ENV_ENTRY</a>);
<a id="L1927" name="L1927"></a>1927     (<strong class="reserved">void</strong>)<a href="../S/1.html#L1099" title="Defined at 1099 in src/launcher/java_md.c.">UnsetEnv</a>(<a href="../S/5.html#L75" title="Defined at 75 in src/launcher/java.h.">SPLASH_JAR_ENV_ENTRY</a>);
<a id="L1928" name="L1928"></a>1928 
<a id="L1929" name="L1929"></a>1929     <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(splash_jar_entry);
<a id="L1930" name="L1930"></a>1930     <a href="../S/16.html#L82" title="Defined at 82 in src/launcher/jli_util.c.">JLI_MemFree</a>(splash_file_entry);
<a id="L1931" name="L1931"></a>1931 
<a id="L1932" name="L1932"></a>1932 <em class="brace">}</em>
<a id="L1933" name="L1933"></a>1933 
<a id="L1934" name="L1934"></a>1934 <strong class="reserved">const</strong> <strong class="reserved">char</strong>*
<a id="L1935" name="L1935"></a>1935 <a href="../R/3266.html" title="Multiple referred from 4 places.">GetDotVersion</a>()
<a id="L1936" name="L1936"></a>1936 <em class="brace">{</em>
<a id="L1937" name="L1937"></a>1937     <strong class="reserved">return</strong> _dVersion;
<a id="L1938" name="L1938"></a>1938 <em class="brace">}</em>
<a id="L1939" name="L1939"></a>1939 
<a id="L1940" name="L1940"></a>1940 <strong class="reserved">const</strong> <strong class="reserved">char</strong>*
<a id="L1941" name="L1941"></a>1941 <a href="../R/3271.html" title="Multiple referred from 4 places.">GetFullVersion</a>()
<a id="L1942" name="L1942"></a>1942 <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943     <strong class="reserved">return</strong> _fVersion;
<a id="L1944" name="L1944"></a>1944 <em class="brace">}</em>
<a id="L1945" name="L1945"></a>1945 
<a id="L1946" name="L1946"></a>1946 <strong class="reserved">const</strong> <strong class="reserved">char</strong>*
<a id="L1947" name="L1947"></a>1947 <a href="../R/3285.html" title="Multiple referred from 3 places.">GetProgramName</a>()
<a id="L1948" name="L1948"></a>1948 <em class="brace">{</em>
<a id="L1949" name="L1949"></a>1949     <strong class="reserved">return</strong> _program_name;
<a id="L1950" name="L1950"></a>1950 <em class="brace">}</em>
<a id="L1951" name="L1951"></a>1951 
<a id="L1952" name="L1952"></a>1952 <strong class="reserved">const</strong> <strong class="reserved">char</strong>*
<a id="L1953" name="L1953"></a>1953 <a href="../S/15.html#L2024" title="Referred from 2024 in src/launcher/java.c.">GetLauncherName</a>()
<a id="L1954" name="L1954"></a>1954 <em class="brace">{</em>
<a id="L1955" name="L1955"></a>1955     <strong class="reserved">return</strong> _launcher_name;
<a id="L1956" name="L1956"></a>1956 <em class="brace">}</em>
<a id="L1957" name="L1957"></a>1957 
<a id="L1958" name="L1958"></a>1958 jint
<a id="L1959" name="L1959"></a>1959 <a href="../R/3268.html" title="Multiple referred from 3 places.">GetErgoPolicy</a>()
<a id="L1960" name="L1960"></a>1960 <em class="brace">{</em>
<a id="L1961" name="L1961"></a>1961     <strong class="reserved">return</strong> _ergo_policy;
<a id="L1962" name="L1962"></a>1962 <em class="brace">}</em>
<a id="L1963" name="L1963"></a>1963 
<a id="L1964" name="L1964"></a>1964 jboolean
<a id="L1965" name="L1965"></a>1965 <a href="../R/4035.html" title="Multiple referred from 5 places.">IsJavaArgs</a>()
<a id="L1966" name="L1966"></a>1966 <em class="brace">{</em>
<a id="L1967" name="L1967"></a>1967     <strong class="reserved">return</strong> _is_java_args;
<a id="L1968" name="L1968"></a>1968 <em class="brace">}</em>
<a id="L1969" name="L1969"></a>1969 
<a id="L1970" name="L1970"></a>1970 <strong class="reserved">static</strong> jboolean
<a id="L1971" name="L1971"></a>1971 <a href="../R/4037.html" title="Multiple referred from 2 places.">IsWildCardEnabled</a>()
<a id="L1972" name="L1972"></a>1972 <em class="brace">{</em>
<a id="L1973" name="L1973"></a>1973     <strong class="reserved">return</strong> _wc_enabled;
<a id="L1974" name="L1974"></a>1974 <em class="brace">}</em>
<a id="L1975" name="L1975"></a>1975 
<a id="L1976" name="L1976"></a>1976 <strong class="reserved">int</strong>
<a id="L1977" name="L1977"></a>1977 <a href="../R/1719.html" title="Multiple referred from 2 places.">ContinueInNewThread</a>(<a href="../S/5.html#L88" title="Defined at 88 in src/launcher/java.h.">InvocationFunctions</a>* ifn, jlong threadStackSize,
<a id="L1978" name="L1978"></a>1978                     <strong class="reserved">int</strong> argc, <strong class="reserved">char</strong> **argv,
<a id="L1979" name="L1979"></a>1979                     <strong class="reserved">int</strong> mode, <strong class="reserved">char</strong> *what, <strong class="reserved">int</strong> ret)
<a id="L1980" name="L1980"></a>1980 <em class="brace">{</em>
<a id="L1981" name="L1981"></a>1981 
<div class="comment">
      If user doesn't specify stack size, check if VM has a preference.
      Note that HotSpot no longer supports JNI_VERSION_1_1 but it will
      return its default stack size through the init args structure.</div>
<a id="L1987" name="L1987"></a>1987     <strong class="reserved">if</strong> (threadStackSize == 0) <em class="brace">{</em>
<a id="L1988" name="L1988"></a>1988       <strong class="reserved">struct</strong> JDK1_1InitArgs args1_1;
<a id="L1989" name="L1989"></a>1989       memset((<strong class="reserved">void</strong>*)&amp;args1_1, 0, <strong class="reserved">sizeof</strong>(args1_1));
<a id="L1990" name="L1990"></a>1990       args1_1.<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a> = JNI_VERSION_1_1;
<div class="comment">
       ifn-&gt;GetDefaultJavaVMInitArgs(&amp;args1_1);  /* ignore return value */</div>
<a id="L1992" name="L1992"></a>1992       <strong class="reserved">if</strong> (args1_1.javaStackSize &gt; 0) <em class="brace">{</em>
<a id="L1993" name="L1993"></a>1993          threadStackSize = args1_1.javaStackSize;
<a id="L1994" name="L1994"></a>1994       <em class="brace">}</em>
<a id="L1995" name="L1995"></a>1995     <em class="brace">}</em>
<a id="L1996" name="L1996"></a>1996 
<a id="L1997" name="L1997"></a>1997     <div class="comment">
/* Create a new thread to create JVM and invoke main method */</div>
<a id="L1998" name="L1998"></a>1998       <a href="../S/5.html#L243" title="Defined at 243 in src/launcher/java.h.">JavaMainArgs</a> args;
<a id="L1999" name="L1999"></a>1999       <strong class="reserved">int</strong> rslt;
<a id="L2000" name="L2000"></a>2000 
<a id="L2001" name="L2001"></a>2001       args.argc = argc;
<a id="L2002" name="L2002"></a>2002       args.argv = argv;
<a id="L2003" name="L2003"></a>2003       args.mode = mode;
<a id="L2004" name="L2004"></a>2004       args.what = what;
<a id="L2005" name="L2005"></a>2005       args.ifn = *ifn;
<a id="L2006" name="L2006"></a>2006 
<a id="L2007" name="L2007"></a>2007       rslt = <a href="../S/1.html#L1152" title="Defined at 1152 in src/launcher/java_md.c.">ContinueInNewThread0</a>(<a href="../S/15.html#L354" title="Defined at 354 in src/launcher/java.c.">JavaMain</a>, threadStackSize, (<strong class="reserved">void</strong>*)&amp;args);
<div class="comment">
 If the caller has deemed there is an error we
        simply return that, otherwise we return the value of
        the callee</div>
<a id="L2012" name="L2012"></a>2012       <strong class="reserved">return</strong> (ret != 0) ? ret : rslt;
<a id="L2013" name="L2013"></a>2013     <em class="brace">}</em>
<a id="L2014" name="L2014"></a>2014 <em class="brace">}</em>
<a id="L2015" name="L2015"></a>2015 
<a id="L2016" name="L2016"></a>2016 <strong class="reserved">static</strong> <strong class="reserved">void</strong>
<a id="L2017" name="L2017"></a>2017 <a href="../R/2454.html" title="Multiple referred from 2 places.">DumpState</a>()
<a id="L2018" name="L2018"></a>2018 <em class="brace">{</em>
<a id="L2019" name="L2019"></a>2019     <strong class="reserved">if</strong> (!<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>()) <strong class="reserved">return</strong> ;
<a id="L2020" name="L2020"></a>2020     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("Launcher state:\n");
<a id="L2021" name="L2021"></a>2021     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tdebug:%s\n", (<a href="../S/16.html#L112" title="Defined at 112 in src/launcher/jli_util.c.">JLI_IsTraceLauncher</a>() == JNI_TRUE) ? "on" : "off");
<a id="L2022" name="L2022"></a>2022     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tjavargs:%s\n", (_is_java_args == JNI_TRUE) ? "on" : "off");
<a id="L2023" name="L2023"></a>2023     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tprogram name:%s\n", <a href="../S/15.html#L1947" title="Defined at 1947 in src/launcher/java.c.">GetProgramName</a>());
<a id="L2024" name="L2024"></a>2024     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tlauncher name:%s\n", <a href="../S/15.html#L1953" title="Defined at 1953 in src/launcher/java.c.">GetLauncherName</a>());
<a id="L2025" name="L2025"></a>2025     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tjavaw:%s\n", (<a href="../S/1.html#L146" title="Defined at 146 in src/launcher/java_md.c.">IsJavaw</a>() == JNI_TRUE) ? "on" : "off");
<a id="L2026" name="L2026"></a>2026     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tfullversion:%s\n", <a href="../S/15.html#L1941" title="Defined at 1941 in src/launcher/java.c.">GetFullVersion</a>());
<a id="L2027" name="L2027"></a>2027     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tdotversion:%s\n", <a href="../S/15.html#L1935" title="Defined at 1935 in src/launcher/java.c.">GetDotVersion</a>());
<a id="L2028" name="L2028"></a>2028     <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("\tergo_policy:");
<a id="L2029" name="L2029"></a>2029     <strong class="reserved">switch</strong>(<a href="../S/15.html#L1959" title="Defined at 1959 in src/launcher/java.c.">GetErgoPolicy</a>()) <em class="brace">{</em>
<a id="L2030" name="L2030"></a>2030         <strong class="reserved">case</strong> <a href="../S/5.html#L171" title="Defined at 171 in src/launcher/java.h.">NEVER_SERVER_CLASS</a>:
<a id="L2031" name="L2031"></a>2031             <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("NEVER_ACT_AS_A_SERVER_CLASS_MACHINE\n");
<a id="L2032" name="L2032"></a>2032             <strong class="reserved">break</strong>;
<a id="L2033" name="L2033"></a>2033         <strong class="reserved">case</strong> <a href="../S/5.html#L172" title="Defined at 172 in src/launcher/java.h.">ALWAYS_SERVER_CLASS</a>:
<a id="L2034" name="L2034"></a>2034             <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("ALWAYS_ACT_AS_A_SERVER_CLASS_MACHINE\n");
<a id="L2035" name="L2035"></a>2035             <strong class="reserved">break</strong>;
<a id="L2036" name="L2036"></a>2036         <strong class="reserved">default</strong>:
<a id="L2037" name="L2037"></a>2037             <a href="../D/29724.html" title="Multiple defined in 5 places.">printf</a>("DEFAULT_ERGONOMICS_POLICY\n");
<a id="L2038" name="L2038"></a>2038     <em class="brace">}</em>
<a id="L2039" name="L2039"></a>2039 <em class="brace">}</em>
<a id="L2040" name="L2040"></a>2040 
<div class="comment">
  Return JNI_TRUE for an option string that has no effect but should
  _not_ be passed on to the vm; return JNI_FALSE otherwise.  On
  Solaris SPARC, this screening needs to be done if:
     -d32 or -d64 is passed to a binary with an unmatched data model
     (the exec in CreateExecutionEnvironment removes -d<n> options and points the
     exec to the proper binary).  In the case of when the data model and the
     requested version is matched, an exec would not occur, and these options
     were erroneously passed to the vm.</n></div>
<a id="L2051" name="L2051"></a>2051 jboolean
<a id="L2052" name="L2052"></a>2052 <a href="../R/6607.html" title="Multiple referred from 2 places.">RemovableOption</a>(<strong class="reserved">char</strong> * option)
<a id="L2053" name="L2053"></a>2053 <em class="brace">{</em>
<div class="comment">
    Unconditionally remove both -d32 and -d64 options since only
    the last such options has an effect; e.g.
    java -d32 -d64 -d32 -version
    is equivalent to
    java -d32 -version</div>
<a id="L2061" name="L2061"></a>2061 
<a id="L2062" name="L2062"></a>2062   <strong class="reserved">if</strong>( (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(option, "-d32")  == 0 ) ||
<a id="L2063" name="L2063"></a>2063       (<a href="../S/16.html#L118" title="Defined at 118 in src/launcher/jli_util.c.">JLI_StrCCmp</a>(option, "-d64")  == 0 ) )
<a id="L2064" name="L2064"></a>2064     <strong class="reserved">return</strong> JNI_TRUE;
<a id="L2065" name="L2065"></a>2065   <strong class="reserved">else</strong>
<a id="L2066" name="L2066"></a>2066     <strong class="reserved">return</strong> JNI_FALSE;
<a id="L2067" name="L2067"></a>2067 <em class="brace">}</em>
<a id="L2068" name="L2068"></a>2068 
<div class="comment">
  A utility procedure to always print to stderr</div>
<a id="L2072" name="L2072"></a>2072 <strong class="reserved">void</strong>
<a id="L2073" name="L2073"></a>2073 <a href="../R/4162.html" title="Multiple referred from 2 places.">JLI_ReportMessage</a>(<strong class="reserved">const</strong> <strong class="reserved">char</strong>* fmt, ...)
<a id="L2074" name="L2074"></a>2074 <em class="brace">{</em>
<a id="L2075" name="L2075"></a>2075     va_list vl;
<a id="L2076" name="L2076"></a>2076     va_start(vl, fmt);
<a id="L2077" name="L2077"></a>2077     vfprintf(stderr, fmt, vl);
<a id="L2078" name="L2078"></a>2078     fprintf(stderr, "\n");
<a id="L2079" name="L2079"></a>2079     va_end(vl);
<a id="L2080" name="L2080"></a>2080 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L175">[^]</a><a href="#L2073">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
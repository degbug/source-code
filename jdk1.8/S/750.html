<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/net/DatagramSocket.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L123">[^]</a><a href="#L1302">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L123" title="Defined at 123.">connectInternal</a></li>
<li><a href="#L302" title="Defined at 302.">checkOldImpl</a></li>
<li><a href="#L324" title="Defined at 324.">createImpl</a></li>
<li><a href="#L351" title="Defined at 351.">getImpl</a></li>
<li><a href="#L372" title="Defined at 372.">bind</a></li>
<li><a href="#L400" title="Defined at 400.">checkAddress</a></li>
<li><a href="#L456" title="Defined at 456.">connect</a></li>
<li><a href="#L486" title="Defined at 486.">connect</a></li>
<li><a href="#L503" title="Defined at 503.">disconnect</a></li>
<li><a href="#L527" title="Defined at 527.">isBound</a></li>
<li><a href="#L541" title="Defined at 541.">isConnected</a></li>
<li><a href="#L555" title="Defined at 555.">getInetAddress</a></li>
<li><a href="#L569" title="Defined at 569.">getPort</a></li>
<li><a href="#L589" title="Defined at 589.">getRemoteSocketAddress</a></li>
<li><a href="#L606" title="Defined at 606.">getLocalSocketAddress</a></li>
<li><a href="#L654" title="Defined at 654.">send</a></li>
<li><a href="#L728" title="Defined at 728.">receive</a></li>
<li><a href="#L820" title="Defined at 820.">checkFiltering</a></li>
<li><a href="#L847" title="Defined at 847.">getLocalAddress</a></li>
<li><a href="#L874" title="Defined at 874.">getLocalPort</a></li>
<li><a href="#L899" title="Defined at 899.">setSoTimeout</a></li>
<li><a href="#L914" title="Defined at 914.">getSoTimeout</a></li>
<li><a href="#L957" title="Defined at 957.">setSendBufferSize</a></li>
<li><a href="#L976" title="Defined at 976.">getSendBufferSize</a></li>
<li><a href="#L1015" title="Defined at 1015.">setReceiveBufferSize</a></li>
<li><a href="#L1033" title="Defined at 1033.">getReceiveBufferSize</a></li>
<li><a href="#L1079" title="Defined at 1079.">setReuseAddress</a></li>
<li><a href="#L1098" title="Defined at 1098.">getReuseAddress</a></li>
<li><a href="#L1122" title="Defined at 1122.">setBroadcast</a></li>
<li><a href="#L1136" title="Defined at 1136.">getBroadcast</a></li>
<li><a href="#L1179" title="Defined at 1179.">setTrafficClass</a></li>
<li><a href="#L1211" title="Defined at 1211.">getTrafficClass</a></li>
<li><a href="#L1229" title="Defined at 1229.">close</a></li>
<li><a href="#L1244" title="Defined at 1244.">isClosed</a></li>
<li><a href="#L1264" title="Defined at 1264.">getChannel</a></li>
<li><a href="#L1302" title="Defined at 1302.">setDatagramSocketImplFactory</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1995, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.net;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.IOException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.nio.channels.DatagramChannel;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.security.PrivilegedExceptionAction;
<a id="L32" name="L32"></a>  32 
<div class="comment">
  This class represents a socket for sending and receiving datagram packets.
  <p>A datagram socket is the sending or receiving point for a packet
  delivery service. Each packet sent or received on a datagram socket
  is individually addressed and routed. Multiple packets sent from
  one machine to another may be routed differently, and may arrive in
  any order.
  </p><p> Where possible, a newly constructed <code>DatagramSocket</code> has the
  {@link SocketOptions#SO_BROADCAST SO_BROADCAST} socket option enabled so as
  to allow the transmission of broadcast datagrams. In order to receive
  broadcast packets a DatagramSocket should be bound to the wildcard address.
  In some implementations, broadcast packets may also be received when
  a DatagramSocket is bound to a more specific address.
  </p><p>
  Example:
  {@code
               DatagramSocket s = new DatagramSocket(null);
               s.bind(new InetSocketAddress(8888));
  }
  Which is equivalent to:
  {@code
               DatagramSocket s = new DatagramSocket(8888);
  }
  Both cases will create a DatagramSocket able to receive broadcasts on
  UDP port 8888.
  @author  Pavani Diwanji
  @see     java.net.DatagramPacket
  @see     java.nio.channels.DatagramChannel
  @since JDK1.0</p></div>
<a id="L66" name="L66"></a>  66 <strong class="reserved">public</strong>
<a id="L67" name="L67"></a>  67 <strong class="reserved">class</strong> <a href="../R/2009.html" title="Multiple referred from 22 places.">DatagramSocket</a> <strong class="reserved">implements</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1405.html#L37" title="Defined at 37 in src/java/io/Closeable.java.">Closeable</a> <em class="brace">{</em>
<div class="comment">
      Various states of this socket.</div>
<a id="L71" name="L71"></a>  71     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> created = <strong class="reserved">false</strong>;
<a id="L72" name="L72"></a>  72     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> bound = <strong class="reserved">false</strong>;
<a id="L73" name="L73"></a>  73     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> closed = <strong class="reserved">false</strong>;
<a id="L74" name="L74"></a>  74     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> closeLock = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L75" name="L75"></a>  75 
<div class="comment">
      The implementation of this DatagramSocket.</div>
<a id="L79" name="L79"></a>  79     <a href="../S/790.html#L38" title="Defined at 38 in src/java/net/DatagramSocketImpl.java.">DatagramSocketImpl</a> <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L80" name="L80"></a>  80 
<div class="comment">
      Are we using an older DatagramSocketImpl?</div>
<a id="L84" name="L84"></a>  84     <strong class="reserved">boolean</strong> oldImpl = <strong class="reserved">false</strong>;
<a id="L85" name="L85"></a>  85 
<div class="comment">
      Set when a socket is ST_CONNECTED until we are certain
      that any packets which might have been received prior
      to calling connect() but not read by the application
      have been read. During this time we check the source
      address of all packets received to be sure they are from
      the connected destination. Other packets are read but
      silently dropped.</div>
<a id="L95" name="L95"></a>  95     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> explicitFilter = <strong class="reserved">false</strong>;
<a id="L96" name="L96"></a>  96     <strong class="reserved">private</strong> <strong class="reserved">int</strong> bytesLeftToFilter;
<div class="comment">
      Connection state:
      ST_NOT_CONNECTED = socket not connected
      ST_CONNECTED = socket connected
      ST_CONNECTED_NO_IMPL = socket connected but not at impl level</div>
<a id="L103" name="L103"></a> 103     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_NOT_CONNECTED = 0;
<a id="L104" name="L104"></a> 104     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_CONNECTED = 1;
<a id="L105" name="L105"></a> 105     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ST_CONNECTED_NO_IMPL = 2;
<a id="L106" name="L106"></a> 106 
<a id="L107" name="L107"></a> 107     <strong class="reserved">int</strong> connectState = ST_NOT_CONNECTED;
<a id="L108" name="L108"></a> 108 
<div class="comment">
      Connected address &amp; port</div>
<a id="L112" name="L112"></a> 112     <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> connectedAddress = <strong class="reserved">null</strong>;
<a id="L113" name="L113"></a> 113     <strong class="reserved">int</strong> connectedPort = -1;
<a id="L114" name="L114"></a> 114 
<div class="comment">
      Connects this socket to a remote socket address (IP address + port number).
      Binds socket if not already bound.
      <p>
      @param   address The remote address.
      @param   port    The remote port
      @throws  SocketException if binding the socket fails.</p></div>
<a id="L123" name="L123"></a> 123     <strong class="reserved">private</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/11892.html" title="Multiple referred from 2 places.">connectInternal</a>(<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, <strong class="reserved">int</strong> port) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L124" name="L124"></a> 124         <strong class="reserved">if</strong> (port &lt; 0 || port &gt; 0xFFFF) <em class="brace">{</em>
<a id="L125" name="L125"></a> 125             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("connect: " + port);
<a id="L126" name="L126"></a> 126         <em class="brace">}</em>
<a id="L127" name="L127"></a> 127         <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L128" name="L128"></a> 128             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("connect: null address");
<a id="L129" name="L129"></a> 129         <em class="brace">}</em>
<a id="L130" name="L130"></a> 130         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, "connect");
<a id="L131" name="L131"></a> 131         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L132" name="L132"></a> 132             <strong class="reserved">return</strong>;
<a id="L133" name="L133"></a> 133         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L134" name="L134"></a> 134         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L135" name="L135"></a> 135             <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L136" name="L136"></a> 136                 security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>);
<a id="L137" name="L137"></a> 137             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L138" name="L138"></a> 138                 security.<a href="../D/12411.html" title="Multiple defined in 2 places.">checkConnect</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(), port);
<a id="L139" name="L139"></a> 139                 security.<a href="../S/1785.html#L1160" title="Defined at 1160 in src/java/lang/SecurityManager.java.">checkAccept</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(), port);
<a id="L140" name="L140"></a> 140             <em class="brace">}</em>
<a id="L141" name="L141"></a> 141         <em class="brace">}</em>
<a id="L142" name="L142"></a> 142 
<a id="L143" name="L143"></a> 143         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L144" name="L144"></a> 144           <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0));
<a id="L145" name="L145"></a> 145 
<a id="L146" name="L146"></a> 146         <em class="comment">// old impls do not support connect/disconnect</em>
<a id="L147" name="L147"></a> 147         <strong class="reserved">if</strong> (oldImpl || (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> <strong class="reserved">instanceof</strong> <a href="../S/819.html#L42" title="Defined at 42 in src/java/net/AbstractPlainDatagramSocketImpl.java.">AbstractPlainDatagramSocketImpl</a> &amp;&amp;
<a id="L148" name="L148"></a> 148              ((<a href="../S/819.html#L42" title="Defined at 42 in src/java/net/AbstractPlainDatagramSocketImpl.java.">AbstractPlainDatagramSocketImpl</a>)<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>).<a href="../S/819.html#L363" title="Defined at 363 in src/java/net/AbstractPlainDatagramSocketImpl.java.">nativeConnectDisabled</a>())) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149             connectState = ST_CONNECTED_NO_IMPL;
<a id="L150" name="L150"></a> 150         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L151" name="L151"></a> 151             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L152" name="L152"></a> 152                 <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/13242.html" title="Multiple defined in 53 places.">connect</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, port);
<a id="L153" name="L153"></a> 153 
<a id="L154" name="L154"></a> 154                 <em class="comment">// socket is now connected by the impl</em>
<a id="L155" name="L155"></a> 155                 connectState = ST_CONNECTED;
<a id="L156" name="L156"></a> 156                 <em class="comment">// Do we need to filter some packets?</em>
<a id="L157" name="L157"></a> 157                 <strong class="reserved">int</strong> avail = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/14457.html" title="Multiple defined in 2 places.">dataAvailable</a>();
<a id="L158" name="L158"></a> 158                 <strong class="reserved">if</strong> (avail == -1) <em class="brace">{</em>
<a id="L159" name="L159"></a> 159                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>();
<a id="L160" name="L160"></a> 160                 <em class="brace">}</em>
<a id="L161" name="L161"></a> 161                 explicitFilter = avail &gt; 0;
<a id="L162" name="L162"></a> 162                 <strong class="reserved">if</strong> (explicitFilter) <em class="brace">{</em>
<a id="L163" name="L163"></a> 163                     bytesLeftToFilter = <a href="../D/21888.html" title="Multiple defined in 3 places.">getReceiveBufferSize</a>();
<a id="L164" name="L164"></a> 164                 <em class="brace">}</em>
<a id="L165" name="L165"></a> 165             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> se) <em class="brace">{</em>
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167                 <em class="comment">// connection will be emulated by DatagramSocket</em>
<a id="L168" name="L168"></a> 168                 connectState = ST_CONNECTED_NO_IMPL;
<a id="L169" name="L169"></a> 169             <em class="brace">}</em>
<a id="L170" name="L170"></a> 170         <em class="brace">}</em>
<a id="L171" name="L171"></a> 171 
<a id="L172" name="L172"></a> 172         connectedAddress = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>;
<a id="L173" name="L173"></a> 173         connectedPort = port;
<a id="L174" name="L174"></a> 174     <em class="brace">}</em>
<a id="L175" name="L175"></a> 175 
<a id="L176" name="L176"></a> 176 
<div class="comment">
      Constructs a datagram socket and binds it to any available port
      on the local host machine.  The socket will be bound to the
      {@link InetAddress#isAnyLocalAddress wildcard} address,
      an IP address chosen by the kernel.
      <p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with 0 as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      @exception  SocketException  if the socket could not be opened,
                    or the socket could not bind to the specified local port.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen</p></div>
<a id="L195" name="L195"></a> 195     <strong class="reserved">public</strong> DatagramSocket() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L196" name="L196"></a> 196         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0));
<a id="L197" name="L197"></a> 197     <em class="brace">}</em>
<a id="L198" name="L198"></a> 198 
<div class="comment">
      Creates an unbound datagram socket with the specified
      DatagramSocketImpl.
      @param impl an instance of a <b>DatagramSocketImpl</b>
             the subclass wishes to use on the DatagramSocket.
      @since   1.4</div>
<a id="L207" name="L207"></a> 207     <strong class="reserved">protected</strong> DatagramSocket(<a href="../S/790.html#L38" title="Defined at 38 in src/java/net/DatagramSocketImpl.java.">DatagramSocketImpl</a> <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>) <em class="brace">{</em>
<a id="L208" name="L208"></a> 208         <strong class="reserved">if</strong> (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> == <strong class="reserved">null</strong>)
<a id="L209" name="L209"></a> 209             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L210" name="L210"></a> 210         <strong class="reserved">this</strong>.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L211" name="L211"></a> 211         <a href="../D/12574.html" title="Multiple defined in 3 places.">checkOldImpl</a>();
<a id="L212" name="L212"></a> 212     <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 
<div class="comment">
      Creates a datagram socket, bound to the specified local
      socket address.
      <p>
      If, if the address is <code>null</code>, creates an unbound socket.
      </p><p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with the port from the socket address
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      @param bindaddr local socket address to bind, or <code>null</code>
                      for an unbound socket.
      @exception  SocketException  if the socket could not be opened,
                    or the socket could not bind to the specified local port.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen
      @since   1.4</p></div>
<a id="L237" name="L237"></a> 237     <strong class="reserved">public</strong> DatagramSocket(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> bindaddr) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L238" name="L238"></a> 238         <em class="comment">// create a datagram socket.</em>
<a id="L239" name="L239"></a> 239         <a href="../D/13947.html" title="Multiple defined in 3 places.">createImpl</a>();
<a id="L240" name="L240"></a> 240         <strong class="reserved">if</strong> (bindaddr != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L242" name="L242"></a> 242                 <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(bindaddr);
<a id="L243" name="L243"></a> 243             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L244" name="L244"></a> 244                 <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L245" name="L245"></a> 245                     <a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L246" name="L246"></a> 246             <em class="brace">}</em>
<a id="L247" name="L247"></a> 247         <em class="brace">}</em>
<a id="L248" name="L248"></a> 248     <em class="brace">}</em>
<a id="L249" name="L249"></a> 249 
<div class="comment">
      Constructs a datagram socket and binds it to the specified port
      on the local host machine.  The socket will be bound to the
      {@link InetAddress#isAnyLocalAddress wildcard} address,
      an IP address chosen by the kernel.
      <p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with the <code>port</code> argument
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      @param      port port to use.
      @exception  SocketException  if the socket could not be opened,
                    or the socket could not bind to the specified local port.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen</p></div>
<a id="L270" name="L270"></a> 270     <strong class="reserved">public</strong> DatagramSocket(<strong class="reserved">int</strong> port) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L271" name="L271"></a> 271         <strong class="reserved">this</strong>(port, <strong class="reserved">null</strong>);
<a id="L272" name="L272"></a> 272     <em class="brace">}</em>
<a id="L273" name="L273"></a> 273 
<div class="comment">
      Creates a datagram socket, bound to the specified local
      address.  The local port must be between 0 and 65535 inclusive.
      If the IP address is 0.0.0.0, the socket will be bound to the
      {@link InetAddress#isAnyLocalAddress wildcard} address,
      an IP address chosen by the kernel.
      <p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with the <code>port</code> argument
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      @param port local port to use
      @param laddr local address to bind
      @exception  SocketException  if the socket could not be opened,
                    or the socket could not bind to the specified local port.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen
      @since   JDK1.1</p></div>
<a id="L298" name="L298"></a> 298     <strong class="reserved">public</strong> DatagramSocket(<strong class="reserved">int</strong> port, <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> laddr) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L299" name="L299"></a> 299         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(laddr, port));
<a id="L300" name="L300"></a> 300     <em class="brace">}</em>
<a id="L301" name="L301"></a> 301 
<a id="L302" name="L302"></a> 302     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11277.html" title="Multiple referred from 6 places.">checkOldImpl</a>() <em class="brace">{</em>
<a id="L303" name="L303"></a> 303         <strong class="reserved">if</strong> (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> == <strong class="reserved">null</strong>)
<a id="L304" name="L304"></a> 304             <strong class="reserved">return</strong>;
<a id="L305" name="L305"></a> 305         <em class="comment">// DatagramSocketImpl.peekdata() is a protected method, therefore we need to use</em>
<a id="L306" name="L306"></a> 306         <em class="comment">// getDeclaredMethod, therefore we need permission to access the member</em>
<a id="L307" name="L307"></a> 307         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L308" name="L308"></a> 308             <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L309" name="L309"></a> 309                 <strong class="reserved">new</strong> <a href="../S/1263.html#L45" title="Defined at 45 in src/java/security/PrivilegedExceptionAction.java.">PrivilegedExceptionAction</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;() <em class="brace">{</em>
<a id="L310" name="L310"></a> 310                     <strong class="reserved">public</strong> <a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <strong class="reserved">throws</strong> <a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <em class="brace">{</em>
<a id="L311" name="L311"></a> 311                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] cl = <strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[1];
<a id="L312" name="L312"></a> 312                         cl[0] = <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a>.<strong class="reserved">class</strong>;
<a id="L313" name="L313"></a> 313                         <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/18255.html" title="Multiple defined in 2 places.">getDeclaredMethod</a>("peekData", cl);
<a id="L314" name="L314"></a> 314                         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L315" name="L315"></a> 315                     <em class="brace">}</em>
<a id="L316" name="L316"></a> 316                 <em class="brace">}</em>);
<a id="L317" name="L317"></a> 317         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.<a href="../S/1259.html#L50" title="Defined at 50 in src/java/security/PrivilegedActionException.java.">PrivilegedActionException</a> e) <em class="brace">{</em>
<a id="L318" name="L318"></a> 318             oldImpl = <strong class="reserved">true</strong>;
<a id="L319" name="L319"></a> 319         <em class="brace">}</em>
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321 
<a id="L322" name="L322"></a> 322     <strong class="reserved">static</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; implClass = <strong class="reserved">null</strong>;
<a id="L323" name="L323"></a> 323 
<a id="L324" name="L324"></a> 324     <strong class="reserved">void</strong> <a href="../R/12490.html" title="Multiple referred from 6 places.">createImpl</a>() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L325" name="L325"></a> 325         <strong class="reserved">if</strong> (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326             <strong class="reserved">if</strong> (<a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327                 <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../D/13751.html" title="Multiple defined in 2 places.">createDatagramSocketImpl</a>();
<a id="L328" name="L328"></a> 328                 <a href="../D/12574.html" title="Multiple defined in 3 places.">checkOldImpl</a>();
<a id="L329" name="L329"></a> 329             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L330" name="L330"></a> 330                 <strong class="reserved">boolean</strong> isMulticast = (<strong class="reserved">this</strong> <strong class="reserved">instanceof</strong> <a href="../S/744.html#L83" title="Defined at 83 in src/java/net/MulticastSocket.java.">MulticastSocket</a>) ? <strong class="reserved">true</strong> : <strong class="reserved">false</strong>;
<a id="L331" name="L331"></a> 331                 <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <a href="../S/764.html#L46" title="Defined at 46 in src/java/net/DefaultDatagramSocketImplFactory.java.">DefaultDatagramSocketImplFactory</a>.<a href="../D/13751.html" title="Multiple defined in 2 places.">createDatagramSocketImpl</a>(isMulticast);
<a id="L332" name="L332"></a> 332 
<a id="L333" name="L333"></a> 333                 <a href="../D/12574.html" title="Multiple defined in 3 places.">checkOldImpl</a>();
<a id="L334" name="L334"></a> 334             <em class="brace">}</em>
<a id="L335" name="L335"></a> 335         <em class="brace">}</em>
<a id="L336" name="L336"></a> 336         <em class="comment">// creates a udp socket</em>
<a id="L337" name="L337"></a> 337         <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>();
<a id="L338" name="L338"></a> 338         <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../S/790.html#L62" title="Defined at 62 in src/java/net/DatagramSocketImpl.java.">setDatagramSocket</a>(<strong class="reserved">this</strong>);
<a id="L339" name="L339"></a> 339         created = <strong class="reserved">true</strong>;
<a id="L340" name="L340"></a> 340     <em class="brace">}</em>
<a id="L341" name="L341"></a> 341 
<div class="comment">
      Get the <code>DatagramSocketImpl</code> attached to this socket,
      creating it if necessary.
      @return  the <code>DatagramSocketImpl</code> attached to that
               DatagramSocket
      @throws SocketException if creation fails.
      @since 1.4</div>
<a id="L351" name="L351"></a> 351     <a href="../S/790.html#L38" title="Defined at 38 in src/java/net/DatagramSocketImpl.java.">DatagramSocketImpl</a> <a href="../R/17001.html" title="Multiple referred from 114 places.">getImpl</a>() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L352" name="L352"></a> 352         <strong class="reserved">if</strong> (!created)
<a id="L353" name="L353"></a> 353             <a href="../D/13947.html" title="Multiple defined in 3 places.">createImpl</a>();
<a id="L354" name="L354"></a> 354         <strong class="reserved">return</strong> <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L355" name="L355"></a> 355     <em class="brace">}</em>
<a id="L356" name="L356"></a> 356 
<div class="comment">
      Binds this DatagramSocket to a specific address and port.
      <p>
      If the address is <code>null</code>, then the system will pick up
      an ephemeral port and a valid local address to bind the socket.
     </p><p>
      @param   addr The address and port to bind to.
      @throws  SocketException if any error happens during the bind, or if the
               socket is already bound.
      @throws  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @throws IllegalArgumentException if addr is a SocketAddress subclass
              not supported by this socket.
      @since 1.4</p></div>
<a id="L372" name="L372"></a> 372     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/10598.html" title="Multiple referred from 221 places.">bind</a>(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> addr) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L373" name="L373"></a> 373         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L374" name="L374"></a> 374             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L375" name="L375"></a> 375         <strong class="reserved">if</strong> (<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L376" name="L376"></a> 376             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("already bound");
<a id="L377" name="L377"></a> 377         <strong class="reserved">if</strong> (addr == <strong class="reserved">null</strong>)
<a id="L378" name="L378"></a> 378             addr = <strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0);
<a id="L379" name="L379"></a> 379         <strong class="reserved">if</strong> (!(addr <strong class="reserved">instanceof</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>))
<a id="L380" name="L380"></a> 380             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unsupported address type!");
<a id="L381" name="L381"></a> 381         <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a> epoint = (<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>) addr;
<a id="L382" name="L382"></a> 382         <strong class="reserved">if</strong> (epoint.<a href="../D/26409.html" title="Multiple defined in 2 places.">isUnresolved</a>())
<a id="L383" name="L383"></a> 383             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Unresolved address");
<a id="L384" name="L384"></a> 384         <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> iaddr = epoint.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>();
<a id="L385" name="L385"></a> 385         <strong class="reserved">int</strong> port = epoint.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>();
<a id="L386" name="L386"></a> 386         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(iaddr, "bind");
<a id="L387" name="L387"></a> 387         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sec = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L388" name="L388"></a> 388         <strong class="reserved">if</strong> (sec != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L389" name="L389"></a> 389             sec.<a href="../S/1785.html#L1130" title="Defined at 1130 in src/java/lang/SecurityManager.java.">checkListen</a>(port);
<a id="L390" name="L390"></a> 390         <em class="brace">}</em>
<a id="L391" name="L391"></a> 391         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(port, iaddr);
<a id="L393" name="L393"></a> 393         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> e) <em class="brace">{</em>
<a id="L394" name="L394"></a> 394             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L395" name="L395"></a> 395             <strong class="reserved">throw</strong> e;
<a id="L396" name="L396"></a> 396         <em class="brace">}</em>
<a id="L397" name="L397"></a> 397         bound = <strong class="reserved">true</strong>;
<a id="L398" name="L398"></a> 398     <em class="brace">}</em>
<a id="L399" name="L399"></a> 399 
<a id="L400" name="L400"></a> 400     <strong class="reserved">void</strong> <a href="../R/11074.html" title="Multiple referred from 12 places.">checkAddress</a> (<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> addr, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/28500.html" title="Multiple defined in 3 places.">op</a>) <em class="brace">{</em>
<a id="L401" name="L401"></a> 401         <strong class="reserved">if</strong> (addr == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L402" name="L402"></a> 402             <strong class="reserved">return</strong>;
<a id="L403" name="L403"></a> 403         <em class="brace">}</em>
<a id="L404" name="L404"></a> 404         <strong class="reserved">if</strong> (!(addr <strong class="reserved">instanceof</strong> <a href="../S/745.html#L86" title="Defined at 86 in src/java/net/Inet4Address.java.">Inet4Address</a> || addr <strong class="reserved">instanceof</strong> <a href="../S/810.html#L175" title="Defined at 175 in src/java/net/Inet6Address.java.">Inet6Address</a>)) <em class="brace">{</em>
<a id="L405" name="L405"></a> 405             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(<a href="../D/28500.html" title="Multiple defined in 3 places.">op</a> + ": invalid address type");
<a id="L406" name="L406"></a> 406         <em class="brace">}</em>
<a id="L407" name="L407"></a> 407     <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<div class="comment">
      Connects the socket to a remote address for this socket. When a
      socket is connected to a remote address, packets may only be
      sent to or received from that address. By default a datagram
      socket is not connected.
      <p>If the remote destination to which the socket is connected does not
      exist, or is otherwise unreachable, and if an ICMP destination unreachable
      packet has been received for that address, then a subsequent call to
      send or receive may throw a PortUnreachableException. Note, there is no
      guarantee that the exception will be thrown.
      </p><p> If a security manager has been installed then it is invoked to check
      access to the remote address. Specifically, if the given <code>address</code>
      is a {@link InetAddress#isMulticastAddress multicast address},
      the security manager's {@link
      java.lang.SecurityManager#checkMulticast(InetAddress)
      checkMulticast} method is invoked with the given <code>address</code>.
      Otherwise, the security manager's {@link
      java.lang.SecurityManager#checkConnect(String,int) checkConnect}
      and {@link java.lang.SecurityManager#checkAccept checkAccept} methods
      are invoked, with the given <code>address</code> and <code>port</code>, to
      verify that datagrams are permitted to be sent and received
      respectively.
      </p><p> When a socket is connected, {@link #receive receive} and
      {@link #send send} <b>will not perform any security checks</b>
      on incoming and outgoing packets, other than matching the packet's
      and the socket's address and port. On a send operation, if the
      packet's address is set and the packet's address and the socket's
      address do not match, an <code>IllegalArgumentException</code> will be
      thrown. A socket connected to a multicast address may only be used
      to send packets.
      @param address the remote address for the socket
      @param port the remote port for the socket.
      @throws IllegalArgumentException
              if the address is null, or the port is out of range.
      @throws SecurityException
              if a security manager has been installed and it does
              not permit access to the given remote address
      @see #disconnect</p></div>
<a id="L456" name="L456"></a> 456     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11887.html" title="Multiple referred from 67 places.">connect</a>(<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, <strong class="reserved">int</strong> port) <em class="brace">{</em>
<a id="L457" name="L457"></a> 457         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L458" name="L458"></a> 458             <a href="../S/750.html#L123" title="Defined at 123 in src/java/net/DatagramSocket.java.">connectInternal</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, port);
<a id="L459" name="L459"></a> 459         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> se) <em class="brace">{</em>
<a id="L460" name="L460"></a> 460             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("connect failed", se);
<a id="L461" name="L461"></a> 461         <em class="brace">}</em>
<a id="L462" name="L462"></a> 462     <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 
<div class="comment">
      Connects this socket to a remote socket address (IP address + port number).
      <p> If given an {@link InetSocketAddress InetSocketAddress}, this method
      behaves as if invoking {@link #connect(InetAddress,int) connect(InetAddress,int)}
      with the the given socket addresses IP address and port number.
      @param   addr    The remote address.
      @throws  SocketException
               if the connect fails
      @throws IllegalArgumentException
              if <code>addr</code> is <code>null</code>, or <code>addr</code> is a SocketAddress
              subclass not supported by this socket
      @throws SecurityException
              if a security manager has been installed and it does
              not permit access to the given remote address
      @since 1.4</p></div>
<a id="L486" name="L486"></a> 486     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11887.html" title="Multiple referred from 67 places.">connect</a>(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> addr) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L487" name="L487"></a> 487         <strong class="reserved">if</strong> (addr == <strong class="reserved">null</strong>)
<a id="L488" name="L488"></a> 488             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Address can't be null");
<a id="L489" name="L489"></a> 489         <strong class="reserved">if</strong> (!(addr <strong class="reserved">instanceof</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>))
<a id="L490" name="L490"></a> 490             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unsupported address type");
<a id="L491" name="L491"></a> 491         <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a> epoint = (<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>) addr;
<a id="L492" name="L492"></a> 492         <strong class="reserved">if</strong> (epoint.<a href="../D/26409.html" title="Multiple defined in 2 places.">isUnresolved</a>())
<a id="L493" name="L493"></a> 493             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Unresolved address");
<a id="L494" name="L494"></a> 494         <a href="../S/750.html#L123" title="Defined at 123 in src/java/net/DatagramSocket.java.">connectInternal</a>(epoint.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), epoint.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L495" name="L495"></a> 495     <em class="brace">}</em>
<a id="L496" name="L496"></a> 496 
<div class="comment">
      Disconnects the socket. If the socket is closed or not connected,
      then this method has no effect.
      @see #connect</div>
<a id="L503" name="L503"></a> 503     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13306.html" title="Multiple referred from 2 places.">disconnect</a>() <em class="brace">{</em>
<a id="L504" name="L504"></a> 504         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L505" name="L505"></a> 505             <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L506" name="L506"></a> 506                 <strong class="reserved">return</strong>;
<a id="L507" name="L507"></a> 507             <strong class="reserved">if</strong> (connectState == ST_CONNECTED) <em class="brace">{</em>
<a id="L508" name="L508"></a> 508                 <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/14936.html" title="Multiple defined in 10 places.">disconnect</a> ();
<a id="L509" name="L509"></a> 509             <em class="brace">}</em>
<a id="L510" name="L510"></a> 510             connectedAddress = <strong class="reserved">null</strong>;
<a id="L511" name="L511"></a> 511             connectedPort = -1;
<a id="L512" name="L512"></a> 512             connectState = ST_NOT_CONNECTED;
<a id="L513" name="L513"></a> 513             explicitFilter = <strong class="reserved">false</strong>;
<a id="L514" name="L514"></a> 514         <em class="brace">}</em>
<a id="L515" name="L515"></a> 515     <em class="brace">}</em>
<a id="L516" name="L516"></a> 516 
<div class="comment">
      Returns the binding state of the socket.
      <p>
      If the socket was bound prior to being {@link #close closed},
      then this method will continue to return <code>true</code>
      after the socket is closed.
      @return true if the socket successfully bound to an address
      @since 1.4</p></div>
<a id="L527" name="L527"></a> 527     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21218.html" title="Multiple referred from 20 places.">isBound</a>() <em class="brace">{</em>
<a id="L528" name="L528"></a> 528         <strong class="reserved">return</strong> bound;
<a id="L529" name="L529"></a> 529     <em class="brace">}</em>
<a id="L530" name="L530"></a> 530 
<div class="comment">
      Returns the connection state of the socket.
      <p>
      If the socket was connected prior to being {@link #close closed},
      then this method will continue to return <code>true</code>
      after the socket is closed.
      @return true if the socket successfully connected to a server
      @since 1.4</p></div>
<a id="L541" name="L541"></a> 541     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21283.html" title="Multiple referred from 13 places.">isConnected</a>() <em class="brace">{</em>
<a id="L542" name="L542"></a> 542         <strong class="reserved">return</strong> connectState != ST_NOT_CONNECTED;
<a id="L543" name="L543"></a> 543     <em class="brace">}</em>
<a id="L544" name="L544"></a> 544 
<div class="comment">
      Returns the address to which this socket is connected. Returns
      <code>null</code> if the socket is not connected.
      <p>
      If the socket was connected prior to being {@link #close closed},
      then this method will continue to return the connected address
      after the socket is closed.
      @return the address to which this socket is connected.</p></div>
<a id="L555" name="L555"></a> 555     <strong class="reserved">public</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../R/17055.html" title="Multiple referred from 14 places.">getInetAddress</a>() <em class="brace">{</em>
<a id="L556" name="L556"></a> 556         <strong class="reserved">return</strong> connectedAddress;
<a id="L557" name="L557"></a> 557     <em class="brace">}</em>
<a id="L558" name="L558"></a> 558 
<div class="comment">
      Returns the port number to which this socket is connected.
      Returns <code>-1</code> if the socket is not connected.
      <p>
      If the socket was connected prior to being {@link #close closed},
      then this method will continue to return the connected port number
      after the socket is closed.
      @return the port number to which this socket is connected.</p></div>
<a id="L569" name="L569"></a> 569     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18374.html" title="Multiple referred from 119 places.">getPort</a>() <em class="brace">{</em>
<a id="L570" name="L570"></a> 570         <strong class="reserved">return</strong> connectedPort;
<a id="L571" name="L571"></a> 571     <em class="brace">}</em>
<a id="L572" name="L572"></a> 572 
<div class="comment">
      Returns the address of the endpoint this socket is connected to, or
      <code>null</code> if it is unconnected.
      <p>
      If the socket was connected prior to being {@link #close closed},
      then this method will continue to return the connected address
      after the socket is closed.
      @return a <code>SocketAddress</code> representing the remote
              endpoint of this socket, or <code>null</code> if it is
              not connected yet.
      @see #getInetAddress()
      @see #getPort()
      @see #connect(SocketAddress)
      @since 1.4</p></div>
<a id="L589" name="L589"></a> 589     <strong class="reserved">public</strong> <a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> getRemoteSocketAddress() <em class="brace">{</em>
<a id="L590" name="L590"></a> 590         <strong class="reserved">if</strong> (!<a href="../D/25352.html" title="Multiple defined in 4 places.">isConnected</a>())
<a id="L591" name="L591"></a> 591             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L592" name="L592"></a> 592         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(<a href="../D/19686.html" title="Multiple defined in 7 places.">getInetAddress</a>(), <a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L593" name="L593"></a> 593     <em class="brace">}</em>
<a id="L594" name="L594"></a> 594 
<div class="comment">
      Returns the address of the endpoint this socket is bound to.
      @return a <code>SocketAddress</code> representing the local endpoint of this
              socket, or <code>null</code> if it is closed or not bound yet.
      @see #getLocalAddress()
      @see #getLocalPort()
      @see #bind(SocketAddress)
      @since 1.4</div>
<a id="L605" name="L605"></a> 605 
<a id="L606" name="L606"></a> 606     <strong class="reserved">public</strong> <a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> getLocalSocketAddress() <em class="brace">{</em>
<a id="L607" name="L607"></a> 607         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L608" name="L608"></a> 608             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L609" name="L609"></a> 609         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L610" name="L610"></a> 610             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L611" name="L611"></a> 611         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(<a href="../D/20187.html" title="Multiple defined in 9 places.">getLocalAddress</a>(), <a href="../D/20210.html" title="Multiple defined in 8 places.">getLocalPort</a>());
<a id="L612" name="L612"></a> 612     <em class="brace">}</em>
<a id="L613" name="L613"></a> 613 
<div class="comment">
      Sends a datagram packet from this socket. The
      <code>DatagramPacket</code> includes information indicating the
      data to be sent, its length, the IP address of the remote host,
      and the port number on the remote host.
      <p>If there is a security manager, and the socket is not currently
      connected to a remote address, this method first performs some
      security checks. First, if <code>p.getAddress().isMulticastAddress()</code>
      is true, this method calls the
      security manager's <code>checkMulticast</code> method
      with <code>p.getAddress()</code> as its argument.
      If the evaluation of that expression is false,
      this method instead calls the security manager's
      <code>checkConnect</code> method with arguments
      <code>p.getAddress().getHostAddress()</code> and
      <code>p.getPort()</code>. Each call to a security manager method
      could result in a SecurityException if the operation is not allowed.
      @param      p   the <code>DatagramPacket</code> to be sent.
      @exception  IOException  if an I/O error occurs.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkMulticast</code> or <code>checkConnect</code>
                  method doesn't allow the send.
      @exception  PortUnreachableException may be thrown if the socket is connected
                  to a currently unreachable destination. Note, there is no
                  guarantee that the exception will be thrown.
      @exception  java.nio.channels.IllegalBlockingModeException
                  if this socket has an associated channel,
                  and the channel is in non-blocking mode.
      @exception  IllegalArgumentException if the socket is connected,
                  and connected address and packet address differ.
      @see        java.net.DatagramPacket
      @see        SecurityManager#checkMulticast(InetAddress)
      @see        SecurityManager#checkConnect
      @revised 1.4
      @spec JSR-51</p></div>
<a id="L654" name="L654"></a> 654     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26758.html" title="Multiple referred from 7 places.">send</a>(<a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> p) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>  <em class="brace">{</em>
<a id="L655" name="L655"></a> 655         <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> packetAddress = <strong class="reserved">null</strong>;
<a id="L656" name="L656"></a> 656         <strong class="reserved">synchronized</strong> (p) <em class="brace">{</em>
<a id="L657" name="L657"></a> 657             <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L658" name="L658"></a> 658                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L659" name="L659"></a> 659             <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a> (p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), "send");
<a id="L660" name="L660"></a> 660             <strong class="reserved">if</strong> (connectState == ST_NOT_CONNECTED) <em class="brace">{</em>
<a id="L661" name="L661"></a> 661                 <em class="comment">// check the address is ok wiht the security manager on every send.</em>
<a id="L662" name="L662"></a> 662                 <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L663" name="L663"></a> 663 
<a id="L664" name="L664"></a> 664                 <em class="comment">// The reason you want to synchronize on datagram packet</em>
<a id="L665" name="L665"></a> 665                 <em class="comment">// is because you don't want an applet to change the address</em>
<a id="L666" name="L666"></a> 666                 <em class="comment">// while you are trying to send the packet for example</em>
<a id="L667" name="L667"></a> 667                 <em class="comment">// after the security check but before the send.</em>
<a id="L668" name="L668"></a> 668                 <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L669" name="L669"></a> 669                     <strong class="reserved">if</strong> (p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L670" name="L670"></a> 670                         security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>());
<a id="L671" name="L671"></a> 671                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L672" name="L672"></a> 672                         security.<a href="../D/12411.html" title="Multiple defined in 2 places.">checkConnect</a>(p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(),
<a id="L673" name="L673"></a> 673                                               p.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L674" name="L674"></a> 674                     <em class="brace">}</em>
<a id="L675" name="L675"></a> 675                 <em class="brace">}</em>
<a id="L676" name="L676"></a> 676             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L677" name="L677"></a> 677                 <em class="comment">// we're connected</em>
<a id="L678" name="L678"></a> 678                 packetAddress = p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>();
<a id="L679" name="L679"></a> 679                 <strong class="reserved">if</strong> (packetAddress == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                     p.<a href="../D/31877.html" title="Multiple defined in 3 places.">setAddress</a>(connectedAddress);
<a id="L681" name="L681"></a> 681                     p.<a href="../D/33565.html" title="Multiple defined in 9 places.">setPort</a>(connectedPort);
<a id="L682" name="L682"></a> 682                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((!packetAddress.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(connectedAddress)) ||
<a id="L683" name="L683"></a> 683                            p.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>() != connectedPort) <em class="brace">{</em>
<a id="L684" name="L684"></a> 684                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("connected address " +
<a id="L685" name="L685"></a> 685                                                        "and packet address" +
<a id="L686" name="L686"></a> 686                                                        " differ");
<a id="L687" name="L687"></a> 687                 <em class="brace">}</em>
<a id="L688" name="L688"></a> 688             <em class="brace">}</em>
<a id="L689" name="L689"></a> 689             <em class="comment">// Check whether the socket is bound</em>
<a id="L690" name="L690"></a> 690             <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L691" name="L691"></a> 691                 <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0));
<a id="L692" name="L692"></a> 692             <em class="comment">// call the  method to send</em>
<a id="L693" name="L693"></a> 693             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/31727.html" title="Multiple defined in 8 places.">send</a>(p);
<a id="L694" name="L694"></a> 694         <em class="brace">}</em>
<a id="L695" name="L695"></a> 695     <em class="brace">}</em>
<a id="L696" name="L696"></a> 696 
<div class="comment">
      Receives a datagram packet from this socket. When this method
      returns, the <code>DatagramPacket</code>'s buffer is filled with
      the data received. The datagram packet also contains the sender's
      IP address, and the port number on the sender's machine.
      <p>
      This method blocks until a datagram is received. The
      <code>length</code> field of the datagram packet object contains
      the length of the received message. If the message is longer than
      the packet's length, the message is truncated.
      </p><p>
      If there is a security manager, a packet cannot be received if the
      security manager's <code>checkAccept</code> method
      does not allow it.
      @param      p   the <code>DatagramPacket</code> into which to place
                      the incoming data.
      @exception  IOException  if an I/O error occurs.
      @exception  SocketTimeoutException  if setSoTimeout was previously called
                      and the timeout has expired.
      @exception  PortUnreachableException may be thrown if the socket is connected
                  to a currently unreachable destination. Note, there is no guarantee that the
                  exception will be thrown.
      @exception  java.nio.channels.IllegalBlockingModeException
                  if this socket has an associated channel,
                  and the channel is in non-blocking mode.
      @see        java.net.DatagramPacket
      @see        java.net.DatagramSocket
      @revised 1.4
      @spec JSR-51</p></div>
<a id="L728" name="L728"></a> 728     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/25641.html" title="Multiple referred from 10 places.">receive</a>(<a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> p) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L729" name="L729"></a> 729         <strong class="reserved">synchronized</strong> (p) <em class="brace">{</em>
<a id="L730" name="L730"></a> 730             <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L731" name="L731"></a> 731                 <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0));
<a id="L732" name="L732"></a> 732             <strong class="reserved">if</strong> (connectState == ST_NOT_CONNECTED) <em class="brace">{</em>
<a id="L733" name="L733"></a> 733                 <em class="comment">// check the address is ok with the security manager before every recv.</em>
<a id="L734" name="L734"></a> 734                 <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L735" name="L735"></a> 735                 <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L736" name="L736"></a> 736                     <strong class="reserved">while</strong>(<strong class="reserved">true</strong>) <em class="brace">{</em>
<a id="L737" name="L737"></a> 737                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> peekAd = <strong class="reserved">null</strong>;
<a id="L738" name="L738"></a> 738                         <strong class="reserved">int</strong> peekPort = 0;
<a id="L739" name="L739"></a> 739                         <em class="comment">// peek at the packet to see who it is from.</em>
<a id="L740" name="L740"></a> 740                         <strong class="reserved">if</strong> (!oldImpl) <em class="brace">{</em>
<a id="L741" name="L741"></a> 741                             <em class="comment">// We can use the new peekData() API</em>
<a id="L742" name="L742"></a> 742                             <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> peekPacket = <strong class="reserved">new</strong> <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a>(<strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1], 1);
<a id="L743" name="L743"></a> 743                             peekPort = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/29291.html" title="Multiple defined in 4 places.">peekData</a>(peekPacket);
<a id="L744" name="L744"></a> 744                             peekAd = peekPacket.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>();
<a id="L745" name="L745"></a> 745                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L746" name="L746"></a> 746                             <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> adr = <strong class="reserved">new</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>();
<a id="L747" name="L747"></a> 747                             peekPort = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>(adr);
<a id="L748" name="L748"></a> 748                             peekAd = adr.<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>();
<a id="L749" name="L749"></a> 749                         <em class="brace">}</em>
<a id="L750" name="L750"></a> 750                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L751" name="L751"></a> 751                             security.<a href="../S/1785.html#L1160" title="Defined at 1160 in src/java/lang/SecurityManager.java.">checkAccept</a>(peekAd, peekPort);
<a id="L752" name="L752"></a> 752                             <em class="comment">// security check succeeded - so now break</em>
<a id="L753" name="L753"></a> 753                             <em class="comment">// and recv the packet.</em>
<a id="L754" name="L754"></a> 754                             <strong class="reserved">break</strong>;
<a id="L755" name="L755"></a> 755                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> se) <em class="brace">{</em>
<a id="L756" name="L756"></a> 756                             <em class="comment">// Throw away the offending packet by consuming</em>
<a id="L757" name="L757"></a> 757                             <em class="comment">// it in a tmp buffer.</em>
<a id="L758" name="L758"></a> 758                             <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> tmp = <strong class="reserved">new</strong> <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a>(<strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1], 1);
<a id="L759" name="L759"></a> 759                             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/30371.html" title="Multiple defined in 9 places.">receive</a>(tmp);
<a id="L760" name="L760"></a> 760 
<a id="L761" name="L761"></a> 761                             <em class="comment">// silently discard the offending packet</em>
<a id="L762" name="L762"></a> 762                             <em class="comment">// and continue: unknown/malicious</em>
<a id="L763" name="L763"></a> 763                             <em class="comment">// entities on nets should not make</em>
<a id="L764" name="L764"></a> 764                             <em class="comment">// runtime throw security exception and</em>
<a id="L765" name="L765"></a> 765                             <em class="comment">// disrupt the applet by sending random</em>
<a id="L766" name="L766"></a> 766                             <em class="comment">// datagram packets.</em>
<a id="L767" name="L767"></a> 767                             <strong class="reserved">continue</strong>;
<a id="L768" name="L768"></a> 768                         <em class="brace">}</em>
<a id="L769" name="L769"></a> 769                     <em class="brace">}</em> <em class="comment">// end of while</em>
<a id="L770" name="L770"></a> 770                 <em class="brace">}</em>
<a id="L771" name="L771"></a> 771             <em class="brace">}</em>
<a id="L772" name="L772"></a> 772             <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> tmp = <strong class="reserved">null</strong>;
<a id="L773" name="L773"></a> 773             <strong class="reserved">if</strong> ((connectState == ST_CONNECTED_NO_IMPL) || explicitFilter) <em class="brace">{</em>
<a id="L774" name="L774"></a> 774                 <em class="comment">// We have to do the filtering the old fashioned way since</em>
<a id="L775" name="L775"></a> 775                 <em class="comment">// the native impl doesn't support connect or the connect</em>
<a id="L776" name="L776"></a> 776                 <em class="comment">// via the impl failed, or .. "explicitFilter" may be set when</em>
<a id="L777" name="L777"></a> 777                 <em class="comment">// a socket is connected via the impl, for a period of time</em>
<a id="L778" name="L778"></a> 778                 <em class="comment">// when packets from other sources might be queued on socket.</em>
<a id="L779" name="L779"></a> 779                 <strong class="reserved">boolean</strong> <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <strong class="reserved">false</strong>;
<a id="L780" name="L780"></a> 780                 <strong class="reserved">while</strong> (!<a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781                     <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> peekAddress = <strong class="reserved">null</strong>;
<a id="L782" name="L782"></a> 782                     <strong class="reserved">int</strong> peekPort = -1;
<a id="L783" name="L783"></a> 783                     <em class="comment">// peek at the packet to see who it is from.</em>
<a id="L784" name="L784"></a> 784                     <strong class="reserved">if</strong> (!oldImpl) <em class="brace">{</em>
<a id="L785" name="L785"></a> 785                         <em class="comment">// We can use the new peekData() API</em>
<a id="L786" name="L786"></a> 786                         <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> peekPacket = <strong class="reserved">new</strong> <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a>(<strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1], 1);
<a id="L787" name="L787"></a> 787                         peekPort = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/29291.html" title="Multiple defined in 4 places.">peekData</a>(peekPacket);
<a id="L788" name="L788"></a> 788                         peekAddress = peekPacket.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>();
<a id="L789" name="L789"></a> 789                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L790" name="L790"></a> 790                         <em class="comment">// this api only works for IPv4</em>
<a id="L791" name="L791"></a> 791                         peekAddress = <strong class="reserved">new</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>();
<a id="L792" name="L792"></a> 792                         peekPort = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>(peekAddress);
<a id="L793" name="L793"></a> 793                     <em class="brace">}</em>
<a id="L794" name="L794"></a> 794                     <strong class="reserved">if</strong> ((!connectedAddress.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(peekAddress)) ||
<a id="L795" name="L795"></a> 795                         (connectedPort != peekPort)) <em class="brace">{</em>
<a id="L796" name="L796"></a> 796                         <em class="comment">// throw the packet away and silently continue</em>
<a id="L797" name="L797"></a> 797                         tmp = <strong class="reserved">new</strong> <a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a>(
<a id="L798" name="L798"></a> 798                                                 <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1024], 1024);
<a id="L799" name="L799"></a> 799                         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/30371.html" title="Multiple defined in 9 places.">receive</a>(tmp);
<a id="L800" name="L800"></a> 800                         <strong class="reserved">if</strong> (explicitFilter) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801                             <strong class="reserved">if</strong> (<a href="../S/750.html#L820" title="Defined at 820 in src/java/net/DatagramSocket.java.">checkFiltering</a>(tmp)) <em class="brace">{</em>
<a id="L802" name="L802"></a> 802                                 <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <strong class="reserved">true</strong>;
<a id="L803" name="L803"></a> 803                             <em class="brace">}</em>
<a id="L804" name="L804"></a> 804                         <em class="brace">}</em>
<a id="L805" name="L805"></a> 805                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L806" name="L806"></a> 806                         <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a> = <strong class="reserved">true</strong>;
<a id="L807" name="L807"></a> 807                     <em class="brace">}</em>
<a id="L808" name="L808"></a> 808                 <em class="brace">}</em>
<a id="L809" name="L809"></a> 809             <em class="brace">}</em>
<a id="L810" name="L810"></a> 810             <em class="comment">// If the security check succeeds, or the datagram is</em>
<a id="L811" name="L811"></a> 811             <em class="comment">// connected then receive the packet</em>
<a id="L812" name="L812"></a> 812             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/30371.html" title="Multiple defined in 9 places.">receive</a>(p);
<a id="L813" name="L813"></a> 813             <strong class="reserved">if</strong> (explicitFilter &amp;&amp; tmp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L814" name="L814"></a> 814                 <em class="comment">// packet was not filtered, account for it here</em>
<a id="L815" name="L815"></a> 815                 <a href="../S/750.html#L820" title="Defined at 820 in src/java/net/DatagramSocket.java.">checkFiltering</a>(p);
<a id="L816" name="L816"></a> 816             <em class="brace">}</em>
<a id="L817" name="L817"></a> 817         <em class="brace">}</em>
<a id="L818" name="L818"></a> 818     <em class="brace">}</em>
<a id="L819" name="L819"></a> 819 
<a id="L820" name="L820"></a> 820     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/11165.html" title="Multiple referred from 2 places.">checkFiltering</a>(<a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> p) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L821" name="L821"></a> 821         bytesLeftToFilter -= p.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L822" name="L822"></a> 822         <strong class="reserved">if</strong> (bytesLeftToFilter &lt;= 0 || <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/14457.html" title="Multiple defined in 2 places.">dataAvailable</a>() &lt;= 0) <em class="brace">{</em>
<a id="L823" name="L823"></a> 823             explicitFilter = <strong class="reserved">false</strong>;
<a id="L824" name="L824"></a> 824             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L825" name="L825"></a> 825         <em class="brace">}</em>
<a id="L826" name="L826"></a> 826         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L827" name="L827"></a> 827     <em class="brace">}</em>
<a id="L828" name="L828"></a> 828 
<div class="comment">
      Gets the local address to which the socket is bound.
      <p>If there is a security manager, its
      <code>checkConnect</code> method is first called
      with the host address and <code>-1</code>
      as its arguments to see if the operation is allowed.
      @see SecurityManager#checkConnect
      @return  the local address to which the socket is bound,
               <code>null</code> if the socket is closed, or
               an <code>InetAddress</code> representing
               {@link InetAddress#isAnyLocalAddress wildcard}
               address if either the socket is not bound, or
               the security manager <code>checkConnect</code>
               method does not allow the operation
      @since   1.1</p></div>
<a id="L847" name="L847"></a> 847     <strong class="reserved">public</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../R/17408.html" title="Multiple referred from 3 places.">getLocalAddress</a>() <em class="brace">{</em>
<a id="L848" name="L848"></a> 848         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L849" name="L849"></a> 849             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L850" name="L850"></a> 850         <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <strong class="reserved">null</strong>;
<a id="L851" name="L851"></a> 851         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L852" name="L852"></a> 852             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = (<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>) <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_BINDADDR);
<a id="L853" name="L853"></a> 853             <strong class="reserved">if</strong> (<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/25198.html" title="Multiple defined in 4 places.">isAnyLocalAddress</a>()) <em class="brace">{</em>
<a id="L854" name="L854"></a> 854                 <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>.<a href="../D/11347.html" title="Multiple defined in 4 places.">anyLocalAddress</a>();
<a id="L855" name="L855"></a> 855             <em class="brace">}</em>
<a id="L856" name="L856"></a> 856             <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> s = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L857" name="L857"></a> 857             <strong class="reserved">if</strong> (s != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L858" name="L858"></a> 858                 s.<a href="../D/12411.html" title="Multiple defined in 2 places.">checkConnect</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(), -1);
<a id="L859" name="L859"></a> 859             <em class="brace">}</em>
<a id="L860" name="L860"></a> 860         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L861" name="L861"></a> 861             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>.<a href="../D/11347.html" title="Multiple defined in 4 places.">anyLocalAddress</a>(); <em class="comment">// "0.0.0.0"</em>
<a id="L862" name="L862"></a> 862         <em class="brace">}</em>
<a id="L863" name="L863"></a> 863         <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L864" name="L864"></a> 864     <em class="brace">}</em>
<a id="L865" name="L865"></a> 865 
<div class="comment">
      Returns the port number on the local host to which this socket
      is bound.
      @return  the port number on the local host to which this socket is bound,
                <code>-1</code> if the socket is closed, or
                <code>0</code> if it is not bound yet.</div>
<a id="L874" name="L874"></a> 874     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17427.html" title="Multiple referred from 23 places.">getLocalPort</a>() <em class="brace">{</em>
<a id="L875" name="L875"></a> 875         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L876" name="L876"></a> 876             <strong class="reserved">return</strong> -1;
<a id="L877" name="L877"></a> 877         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L878" name="L878"></a> 878             <strong class="reserved">return</strong> <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/20210.html" title="Multiple defined in 8 places.">getLocalPort</a>();
<a id="L879" name="L879"></a> 879         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L880" name="L880"></a> 880             <strong class="reserved">return</strong> 0;
<a id="L881" name="L881"></a> 881         <em class="brace">}</em>
<a id="L882" name="L882"></a> 882     <em class="brace">}</em>
<a id="L883" name="L883"></a> 883 
<div class="comment">
 Enable/disable SO_TIMEOUT with the specified timeout, in
       milliseconds. With this option set to a non-zero timeout,
       a call to receive() for this DatagramSocket
       will block for only this amount of time.  If the timeout expires,
       a <b>java.net.SocketTimeoutException</b> is raised, though the
       DatagramSocket is still valid.  The option <b>must</b> be enabled
       prior to entering the blocking operation to have effect.  The
       timeout must be <code>&gt; 0</code>.
       A timeout of zero is interpreted as an infinite timeout.
      @param timeout the specified timeout in milliseconds.
      @throws SocketException if there is an error in the underlying protocol, such as an UDP error.
      @since   JDK1.1
      @see #getSoTimeout()</div>
<a id="L899" name="L899"></a> 899     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setSoTimeout(<strong class="reserved">int</strong> timeout) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L900" name="L900"></a> 900         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L901" name="L901"></a> 901             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L902" name="L902"></a> 902         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_TIMEOUT, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(timeout));
<a id="L903" name="L903"></a> 903     <em class="brace">}</em>
<a id="L904" name="L904"></a> 904 
<div class="comment">
      Retrieve setting for SO_TIMEOUT.  0 returns implies that the
      option is disabled (i.e., timeout of infinity).
      @return the setting for SO_TIMEOUT
      @throws SocketException if there is an error in the underlying protocol, such as an UDP error.
      @since   JDK1.1
      @see #setSoTimeout(int)</div>
<a id="L914" name="L914"></a> 914     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> getSoTimeout() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L915" name="L915"></a> 915         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L916" name="L916"></a> 916             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L917" name="L917"></a> 917         <strong class="reserved">if</strong> (<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>() == <strong class="reserved">null</strong>)
<a id="L918" name="L918"></a> 918             <strong class="reserved">return</strong> 0;
<a id="L919" name="L919"></a> 919         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_TIMEOUT);
<div class="comment">
         /* extra type safety */</div>
<a id="L921" name="L921"></a> 921         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <em class="brace">{</em>
<a id="L922" name="L922"></a> 922             <strong class="reserved">return</strong> ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L923" name="L923"></a> 923         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L924" name="L924"></a> 924             <strong class="reserved">return</strong> 0;
<a id="L925" name="L925"></a> 925         <em class="brace">}</em>
<a id="L926" name="L926"></a> 926     <em class="brace">}</em>
<a id="L927" name="L927"></a> 927 
<div class="comment">
      Sets the SO_SNDBUF option to the specified value for this
      <code>DatagramSocket</code>. The SO_SNDBUF option is used by the
      network implementation as a hint to size the underlying
      network I/O buffers. The SO_SNDBUF setting may also be used
      by the network implementation to determine the maximum size
      of the packet that can be sent on this socket.
      <p>
      As SO_SNDBUF is a hint, applications that want to verify
      what size the buffer is should call {@link #getSendBufferSize()}.
      </p><p>
      Increasing the buffer size may allow multiple outgoing packets
      to be queued by the network implementation when the send rate
      is high.
      </p><p>
      Note: If {@link #send(DatagramPacket)} is used to send a
      <code>DatagramPacket</code> that is larger than the setting
      of SO_SNDBUF then it is implementation specific if the
      packet is sent or discarded.
      @param size the size to which to set the send buffer
      size. This value must be greater than 0.
      @exception SocketException if there is an error
      in the underlying protocol, such as an UDP error.
      @exception IllegalArgumentException if the value is 0 or is
      negative.
      @see #getSendBufferSize()</p></div>
<a id="L957" name="L957"></a> 957     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setSendBufferSize(<strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>)
<a id="L958" name="L958"></a> 958     <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a><em class="brace">{</em>
<a id="L959" name="L959"></a> 959         <strong class="reserved">if</strong> (!(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt; 0)) <em class="brace">{</em>
<a id="L960" name="L960"></a> 960             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("negative send size");
<a id="L961" name="L961"></a> 961         <em class="brace">}</em>
<a id="L962" name="L962"></a> 962         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L963" name="L963"></a> 963             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L964" name="L964"></a> 964         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_SNDBUF, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L965" name="L965"></a> 965     <em class="brace">}</em>
<a id="L966" name="L966"></a> 966 
<div class="comment">
      Get value of the SO_SNDBUF option for this <code>DatagramSocket</code>, that is the
      buffer size used by the platform for output on this <code>DatagramSocket</code>.
      @return the value of the SO_SNDBUF option for this <code>DatagramSocket</code>
      @exception SocketException if there is an error in
      the underlying protocol, such as an UDP error.
      @see #setSendBufferSize</div>
<a id="L976" name="L976"></a> 976     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> getSendBufferSize() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L977" name="L977"></a> 977         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L978" name="L978"></a> 978             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L979" name="L979"></a> 979         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = 0;
<a id="L980" name="L980"></a> 980         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_SNDBUF);
<a id="L981" name="L981"></a> 981         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <em class="brace">{</em>
<a id="L982" name="L982"></a> 982             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L983" name="L983"></a> 983         <em class="brace">}</em>
<a id="L984" name="L984"></a> 984         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L985" name="L985"></a> 985     <em class="brace">}</em>
<a id="L986" name="L986"></a> 986 
<div class="comment">
      Sets the SO_RCVBUF option to the specified value for this
      <code>DatagramSocket</code>. The SO_RCVBUF option is used by the
      the network implementation as a hint to size the underlying
      network I/O buffers. The SO_RCVBUF setting may also be used
      by the network implementation to determine the maximum size
      of the packet that can be received on this socket.
      <p>
      Because SO_RCVBUF is a hint, applications that want to
      verify what size the buffers were set to should call
      {@link #getReceiveBufferSize()}.
      </p><p>
      Increasing SO_RCVBUF may allow the network implementation
      to buffer multiple packets when packets arrive faster than
      are being received using {@link #receive(DatagramPacket)}.
      </p><p>
      Note: It is implementation specific if a packet larger
      than SO_RCVBUF can be received.
      @param size the size to which to set the receive buffer
      size. This value must be greater than 0.
      @exception SocketException if there is an error in
      the underlying protocol, such as an UDP error.
      @exception IllegalArgumentException if the value is 0 or is
      negative.
      @see #getReceiveBufferSize()</p></div>
<a id="L1015" name="L1015"></a>1015     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setReceiveBufferSize(<strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>)
<a id="L1016" name="L1016"></a>1016     <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a><em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017         <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &lt;= 0) <em class="brace">{</em>
<a id="L1018" name="L1018"></a>1018             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("invalid receive size");
<a id="L1019" name="L1019"></a>1019         <em class="brace">}</em>
<a id="L1020" name="L1020"></a>1020         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1021" name="L1021"></a>1021             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1022" name="L1022"></a>1022         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_RCVBUF, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L1023" name="L1023"></a>1023     <em class="brace">}</em>
<a id="L1024" name="L1024"></a>1024 
<div class="comment">
      Get value of the SO_RCVBUF option for this <code>DatagramSocket</code>, that is the
      buffer size used by the platform for input on this <code>DatagramSocket</code>.
      @return the value of the SO_RCVBUF option for this <code>DatagramSocket</code>
      @exception SocketException if there is an error in the underlying protocol, such as an UDP error.
      @see #setReceiveBufferSize(int)</div>
<a id="L1033" name="L1033"></a>1033     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../S/750.html#L163" title="Referred from 163 in src/java/net/DatagramSocket.java.">getReceiveBufferSize</a>()
<a id="L1034" name="L1034"></a>1034     <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a><em class="brace">{</em>
<a id="L1035" name="L1035"></a>1035         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1036" name="L1036"></a>1036             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1037" name="L1037"></a>1037         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = 0;
<a id="L1038" name="L1038"></a>1038         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_RCVBUF);
<a id="L1039" name="L1039"></a>1039         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <em class="brace">{</em>
<a id="L1040" name="L1040"></a>1040             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L1041" name="L1041"></a>1041         <em class="brace">}</em>
<a id="L1042" name="L1042"></a>1042         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1043" name="L1043"></a>1043     <em class="brace">}</em>
<a id="L1044" name="L1044"></a>1044 
<div class="comment">
      Enable/disable the SO_REUSEADDR socket option.
      <p>
      For UDP sockets it may be necessary to bind more than one
      socket to the same socket address. This is typically for the
      purpose of receiving multicast packets
      (See {@link java.net.MulticastSocket}). The
      <code>SO_REUSEADDR</code> socket option allows multiple
      sockets to be bound to the same socket address if the
      <code>SO_REUSEADDR</code> socket option is enabled prior
      to binding the socket using {@link #bind(SocketAddress)}.
      </p><p>
      Note: This functionality is not supported by all existing platforms,
      so it is implementation specific whether this option will be ignored
      or not. However, if it is not supported then
      {@link #getReuseAddress()} will always return <code>false</code>.
      </p><p>
      When a <code>DatagramSocket</code> is created the initial setting
      of <code>SO_REUSEADDR</code> is disabled.
      </p><p>
      The behaviour when <code>SO_REUSEADDR</code> is enabled or
      disabled after a socket is bound (See {@link #isBound()})
      is not defined.
      @param on  whether to enable or disable the
      @exception SocketException if an error occurs enabling or
                 disabling the <code>SO_RESUEADDR</code> socket option,
                 or the socket is closed.
      @since 1.4
      @see #getReuseAddress()
      @see #bind(SocketAddress)
      @see #isBound()
      @see #isClosed()</p></div>
<a id="L1079" name="L1079"></a>1079     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L168" title="Referred from 168 in src/java/net/MulticastSocket.java.">setReuseAddress</a>(<strong class="reserved">boolean</strong> <a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1081" name="L1081"></a>1081             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1082" name="L1082"></a>1082         <em class="comment">// Integer instead of Boolean for compatibility with older DatagramSocketImpl</em>
<a id="L1083" name="L1083"></a>1083         <strong class="reserved">if</strong> (oldImpl)
<a id="L1084" name="L1084"></a>1084             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_REUSEADDR, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>?-1:0));
<a id="L1085" name="L1085"></a>1085         <strong class="reserved">else</strong>
<a id="L1086" name="L1086"></a>1086             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_REUSEADDR, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>));
<a id="L1087" name="L1087"></a>1087     <em class="brace">}</em>
<a id="L1088" name="L1088"></a>1088 
<div class="comment">
      Tests if SO_REUSEADDR is enabled.
      @return a <code>boolean</code> indicating whether or not SO_REUSEADDR is enabled.
      @exception SocketException if there is an error
      in the underlying protocol, such as an UDP error.
      @since   1.4
      @see #setReuseAddress(boolean)</div>
<a id="L1098" name="L1098"></a>1098     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">boolean</strong> getReuseAddress() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L1099" name="L1099"></a>1099         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1100" name="L1100"></a>1100             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1101" name="L1101"></a>1101         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_REUSEADDR);
<a id="L1102" name="L1102"></a>1102         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L1103" name="L1103"></a>1103     <em class="brace">}</em>
<a id="L1104" name="L1104"></a>1104 
<div class="comment">
      Enable/disable SO_BROADCAST.
      <p> Some operating systems may require that the Java virtual machine be
      started with implementation specific privileges to enable this option or
      send broadcast datagrams.
      @param  on
              whether or not to have broadcast turned on.
      @throws  SocketException
               if there is an error in the underlying protocol, such as an UDP
               error.
      @since 1.4
      @see #getBroadcast()</p></div>
<a id="L1122" name="L1122"></a>1122     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setBroadcast(<strong class="reserved">boolean</strong> <a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L1123" name="L1123"></a>1123         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1124" name="L1124"></a>1124             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1125" name="L1125"></a>1125         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_BROADCAST, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>));
<a id="L1126" name="L1126"></a>1126     <em class="brace">}</em>
<a id="L1127" name="L1127"></a>1127 
<div class="comment">
      Tests if SO_BROADCAST is enabled.
      @return a <code>boolean</code> indicating whether or not SO_BROADCAST is enabled.
      @exception SocketException if there is an error
      in the underlying protocol, such as an UDP error.
      @since 1.4
      @see #setBroadcast(boolean)</div>
<a id="L1136" name="L1136"></a>1136     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">boolean</strong> getBroadcast() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L1137" name="L1137"></a>1137         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1138" name="L1138"></a>1138             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1139" name="L1139"></a>1139         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)(<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_BROADCAST))).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L1140" name="L1140"></a>1140     <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141 
<div class="comment">
      Sets traffic class or type-of-service octet in the IP
      datagram header for datagrams sent from this DatagramSocket.
      As the underlying network implementation may ignore this
      value applications should consider it a hint.
      <p> The tc <b>must</b> be in the range {@code 0 &lt;= tc &lt;=
      255} or an IllegalArgumentException will be thrown.
      </p><p>Notes:
      </p><p>For Internet Protocol v4 the value consists of an
      <code>integer</code>, the least significant 8 bits of which
      represent the value of the TOS octet in IP packets sent by
      the socket.
      RFC 1349 defines the TOS values as follows:
      </p><ul>
      <li><code>IPTOS_LOWCOST (0x02)</code></li>
      <li><code>IPTOS_RELIABILITY (0x04)</code></li>
      <li><code>IPTOS_THROUGHPUT (0x08)</code></li>
      <li><code>IPTOS_LOWDELAY (0x10)</code></li>
      </ul>
      The last low order bit is always ignored as this
      corresponds to the MBZ (must be zero) bit.
      <p>
      Setting bits in the precedence field may result in a
      SocketException indicating that the operation is not
      permitted.
      </p><p>
      for Internet Protocol v6 <code>tc</code> is the value that
      would be placed into the sin6_flowinfo field of the IP header.
      @param tc        an <code>int</code> value for the bitset.
      @throws SocketException if there is an error setting the
      traffic class or type-of-service
      @since 1.4
      @see #getTrafficClass</p></div>
<a id="L1179" name="L1179"></a>1179     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setTrafficClass(<strong class="reserved">int</strong> tc) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L1180" name="L1180"></a>1180         <strong class="reserved">if</strong> (tc &lt; 0 || tc &gt; 255)
<a id="L1181" name="L1181"></a>1181             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("tc is not in range 0 -- 255");
<a id="L1182" name="L1182"></a>1182 
<a id="L1183" name="L1183"></a>1183         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1184" name="L1184"></a>1184             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1185" name="L1185"></a>1185         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1186" name="L1186"></a>1186             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_TOS, tc);
<a id="L1187" name="L1187"></a>1187         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> se) <em class="brace">{</em>
<a id="L1188" name="L1188"></a>1188             <em class="comment">// not supported if socket already connected</em>
<a id="L1189" name="L1189"></a>1189             <em class="comment">// Solaris returns error in such cases</em>
<a id="L1190" name="L1190"></a>1190             <strong class="reserved">if</strong>(!<a href="../D/25352.html" title="Multiple defined in 4 places.">isConnected</a>())
<a id="L1191" name="L1191"></a>1191                 <strong class="reserved">throw</strong> se;
<a id="L1192" name="L1192"></a>1192         <em class="brace">}</em>
<a id="L1193" name="L1193"></a>1193     <em class="brace">}</em>
<a id="L1194" name="L1194"></a>1194 
<div class="comment">
      Gets traffic class or type-of-service in the IP datagram
      header for packets sent from this DatagramSocket.
      <p>
      As the underlying network implementation may ignore the
      traffic class or type-of-service set using {@link #setTrafficClass(int)}
      this method may return a different value than was previously
      set using the {@link #setTrafficClass(int)} method on this
      DatagramSocket.
      @return the traffic class or type-of-service already set
      @throws SocketException if there is an error obtaining the
      traffic class or type-of-service value.
      @since 1.4
      @see #setTrafficClass(int)</p></div>
<a id="L1211" name="L1211"></a>1211     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> getTrafficClass() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1213" name="L1213"></a>1213             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L1214" name="L1214"></a>1214         <strong class="reserved">return</strong> ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)(<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_TOS))).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L1215" name="L1215"></a>1215     <em class="brace">}</em>
<a id="L1216" name="L1216"></a>1216 
<div class="comment">
      Closes this datagram socket.
      <p>
      Any thread currently blocked in {@link #receive} upon this socket
      will throw a {@link SocketException}.
      </p><p> If this socket has an associated channel then the channel is closed
      as well.
      @revised 1.4
      @spec JSR-51</p></div>
<a id="L1229" name="L1229"></a>1229     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <em class="brace">{</em>
<a id="L1230" name="L1230"></a>1230         <strong class="reserved">synchronized</strong>(closeLock) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231             <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L1232" name="L1232"></a>1232                 <strong class="reserved">return</strong>;
<a id="L1233" name="L1233"></a>1233             <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L1234" name="L1234"></a>1234             closed = <strong class="reserved">true</strong>;
<a id="L1235" name="L1235"></a>1235         <em class="brace">}</em>
<a id="L1236" name="L1236"></a>1236     <em class="brace">}</em>
<a id="L1237" name="L1237"></a>1237 
<div class="comment">
      Returns whether the socket is closed or not.
      @return true if the socket has been closed
      @since 1.4</div>
<a id="L1244" name="L1244"></a>1244     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21256.html" title="Multiple referred from 88 places.">isClosed</a>() <em class="brace">{</em>
<a id="L1245" name="L1245"></a>1245         <strong class="reserved">synchronized</strong>(closeLock) <em class="brace">{</em>
<a id="L1246" name="L1246"></a>1246             <strong class="reserved">return</strong> closed;
<a id="L1247" name="L1247"></a>1247         <em class="brace">}</em>
<a id="L1248" name="L1248"></a>1248     <em class="brace">}</em>
<a id="L1249" name="L1249"></a>1249 
<div class="comment">
      Returns the unique {@link java.nio.channels.DatagramChannel} object
      associated with this datagram socket, if any.
      <p> A datagram socket will have a channel if, and only if, the channel
      itself was created via the {@link java.nio.channels.DatagramChannel#open
      DatagramChannel.open} method.
      @return  the datagram channel associated with this datagram socket,
               or <code>null</code> if this socket was not created for a channel
      @since 1.4
      @spec JSR-51</p></div>
<a id="L1264" name="L1264"></a>1264     <strong class="reserved">public</strong> <a href="../S/2069.html#L113" title="Defined at 113 in src/java/nio/channels/DatagramChannel.java.">DatagramChannel</a> <a href="../R/15494.html" title="Multiple referred from 11 places.">getChannel</a>() <em class="brace">{</em>
<a id="L1265" name="L1265"></a>1265         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1266" name="L1266"></a>1266     <em class="brace">}</em>
<a id="L1267" name="L1267"></a>1267 
<div class="comment">
      User defined factory for all datagram sockets.</div>
<a id="L1271" name="L1271"></a>1271     <strong class="reserved">static</strong> <a href="../S/743.html#L38" title="Defined at 38 in src/java/net/DatagramSocketImplFactory.java.">DatagramSocketImplFactory</a> <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>;
<a id="L1272" name="L1272"></a>1272 
<div class="comment">
      Sets the datagram socket implementation factory for the
      application. The factory can be specified only once.
      <p>
      When an application creates a new datagram socket, the socket
      implementation factory's <code>createDatagramSocketImpl</code> method is
      called to create the actual datagram socket implementation.
      </p><p>
      Passing <code>null</code> to the method is a no-op unless the factory
      was already set.
      </p><p>If there is a security manager, this method first calls
      the security manager's <code>checkSetFactory</code> method
      to ensure the operation is allowed.
      This could result in a SecurityException.
      @param      fac   the desired factory.
      @exception  IOException  if an I/O error occurs when setting the
                   datagram socket factory.
      @exception  SocketException  if the factory is already defined.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkSetFactory</code> method doesn't allow the
     operation.
      @see
     java.net.DatagramSocketImplFactory#createDatagramSocketImpl()
      @see       SecurityManager#checkSetFactory
      @since 1.3</p></div>
<a id="L1301" name="L1301"></a>1301     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong>
<a id="L1302" name="L1302"></a>1302     setDatagramSocketImplFactory(<a href="../S/743.html#L38" title="Defined at 38 in src/java/net/DatagramSocketImplFactory.java.">DatagramSocketImplFactory</a> fac)
<a id="L1303" name="L1303"></a>1303        <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1304" name="L1304"></a>1304     <em class="brace">{</em>
<a id="L1305" name="L1305"></a>1305         <strong class="reserved">if</strong> (<a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1306" name="L1306"></a>1306             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("factory already defined");
<a id="L1307" name="L1307"></a>1307         <em class="brace">}</em>
<a id="L1308" name="L1308"></a>1308         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L1309" name="L1309"></a>1309         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1310" name="L1310"></a>1310             security.<a href="../S/1785.html#L1663" title="Defined at 1663 in src/java/lang/SecurityManager.java.">checkSetFactory</a>();
<a id="L1311" name="L1311"></a>1311         <em class="brace">}</em>
<a id="L1312" name="L1312"></a>1312         <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> = fac;
<a id="L1313" name="L1313"></a>1313     <em class="brace">}</em>
<a id="L1314" name="L1314"></a>1314 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L123">[^]</a><a href="#L1302">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/net/MulticastSocket.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L214">[^]</a><a href="#L659">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L214" title="Defined at 214.">setTTL</a></li>
<li><a href="#L239" title="Defined at 239.">setTimeToLive</a></li>
<li><a href="#L260" title="Defined at 260.">getTTL</a></li>
<li><a href="#L274" title="Defined at 274.">getTimeToLive</a></li>
<li><a href="#L298" title="Defined at 298.">joinGroup</a></li>
<li><a href="#L343" title="Defined at 343.">leaveGroup</a></li>
<li><a href="#L385" title="Defined at 385.">joinGroup</a></li>
<li><a href="#L432" title="Defined at 432.">leaveGroup</a></li>
<li><a href="#L465" title="Defined at 465.">setInterface</a></li>
<li><a href="#L490" title="Defined at 490.">getInterface</a></li>
<li><a href="#L550" title="Defined at 550.">setNetworkInterface</a></li>
<li><a href="#L569" title="Defined at 569.">getNetworkInterface</a></li>
<li><a href="#L595" title="Defined at 595.">setLoopbackMode</a></li>
<li><a href="#L607" title="Defined at 607.">getLoopbackMode</a></li>
<li><a href="#L659" title="Defined at 659.">send</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1995, 2014, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.net;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.IOException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L30" name="L30"></a>  30 
<div class="comment">
  The multicast datagram socket class is useful for sending
  and receiving IP multicast packets.  A MulticastSocket is
  a (UDP) DatagramSocket, with additional capabilities for
  joining "groups" of other multicast hosts on the internet.
  <p>
  A multicast group is specified by a class D IP address
  and by a standard UDP port number. Class D IP addresses
  are in the range <code>224.0.0.0</code> to <code>239.255.255.255</code>,
  inclusive. The address 224.0.0.0 is reserved and should not be used.
  </p><p>
  One would join a multicast group by first creating a MulticastSocket
  with the desired port, then invoking the
  <code>joinGroup(InetAddress groupAddr)</code>
  method:
  </p><pre>  // join a Multicast group and send the group salutations
  ...
  String msg = "Hello";
  InetAddress group = InetAddress.getByName("228.5.6.7");
  MulticastSocket s = new MulticastSocket(6789);
  s.joinGroup(group);
  DatagramPacket hi = new DatagramPacket(msg.getBytes(), msg.length(),
                              group, 6789);
  s.send(hi);
  // get their responses!
  byte[] buf = new byte[1000];
  DatagramPacket recv = new DatagramPacket(buf, buf.length);
  s.receive(recv);
  ...
  // OK, I'm done talking - leave the group...
  s.leaveGroup(group);
  </pre>
  When one sends a message to a multicast group, <b>all</b> subscribing
  recipients to that host and port receive the message (within the
  time-to-live range of the packet, see below).  The socket needn't
  be a member of the multicast group to send messages to it.
  <p>
  When a socket subscribes to a multicast group/port, it receives
  datagrams sent by other hosts to the group/port, as do all other
  members of the group and port.  A socket relinquishes membership
  in a group by the leaveGroup(InetAddress addr) method.  <b>
  Multiple MulticastSocket's</b> may subscribe to a multicast group
  and port concurrently, and they will all receive group datagrams.
  </p><p>
  Currently applets are not allowed to use multicast sockets.
  @author Pavani Diwanji
  @since  JDK1.1</p></div>
<a id="L82" name="L82"></a>  82 <strong class="reserved">public</strong>
<a id="L83" name="L83"></a>  83 <strong class="reserved">class</strong> <a href="../R/5332.html" title="Multiple referred from 7 places.">MulticastSocket</a> <strong class="reserved">extends</strong> <a href="../S/750.html#L67" title="Defined at 67 in src/java/net/DatagramSocket.java.">DatagramSocket</a> <em class="brace">{</em>
<a id="L84" name="L84"></a>  84 
<div class="comment">
      Used on some platforms to record if an outgoing interface
      has been set for this socket.</div>
<a id="L89" name="L89"></a>  89     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> interfaceSet;
<a id="L90" name="L90"></a>  90 
<div class="comment">
      Create a multicast socket.
      <p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with 0 as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      </p><p>
      When the socket is created the
      {@link DatagramSocket#setReuseAddress(boolean)} method is
      called to enable the SO_REUSEADDR socket option.
      @exception IOException if an I/O exception occurs
      while creating the MulticastSocket
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen
      @see java.net.DatagramSocket#setReuseAddress(boolean)</p></div>
<a id="L110" name="L110"></a> 110     <strong class="reserved">public</strong> MulticastSocket() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L111" name="L111"></a> 111         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0));
<a id="L112" name="L112"></a> 112     <em class="brace">}</em>
<a id="L113" name="L113"></a> 113 
<div class="comment">
      Create a multicast socket and bind it to a specific port.
      <p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with the <code>port</code> argument
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      </p><p>
      When the socket is created the
      {@link DatagramSocket#setReuseAddress(boolean)} method is
      called to enable the SO_REUSEADDR socket option.
      @param port port to use
      @exception IOException if an I/O exception occurs
      while creating the MulticastSocket
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen
      @see java.net.DatagramSocket#setReuseAddress(boolean)</p></div>
<a id="L135" name="L135"></a> 135     <strong class="reserved">public</strong> MulticastSocket(<strong class="reserved">int</strong> port) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L136" name="L136"></a> 136         <strong class="reserved">this</strong>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(port));
<a id="L137" name="L137"></a> 137     <em class="brace">}</em>
<a id="L138" name="L138"></a> 138 
<div class="comment">
      Create a MulticastSocket bound to the specified socket address.
      <p>
      Or, if the address is <code>null</code>, create an unbound socket.
      </p><p>If there is a security manager,
      its <code>checkListen</code> method is first called
      with the SocketAddress port as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      </p><p>
      When the socket is created the
      {@link DatagramSocket#setReuseAddress(boolean)} method is
      called to enable the SO_REUSEADDR socket option.
      @param bindaddr Socket address to bind to, or <code>null</code> for
                      an unbound socket.
      @exception IOException if an I/O exception occurs
      while creating the MulticastSocket
      @exception  SecurityException  if a security manager exists and its
                  <code>checkListen</code> method doesn't allow the operation.
      @see SecurityManager#checkListen
      @see java.net.DatagramSocket#setReuseAddress(boolean)
      @since 1.4</p></div>
<a id="L164" name="L164"></a> 164     <strong class="reserved">public</strong> MulticastSocket(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> bindaddr) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L165" name="L165"></a> 165         <strong class="reserved">super</strong>((<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a>) <strong class="reserved">null</strong>);
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167         <em class="comment">// Enable SO_REUSEADDR before binding</em>
<a id="L168" name="L168"></a> 168         <a href="../D/33741.html" title="Multiple defined in 3 places.">setReuseAddress</a>(<strong class="reserved">true</strong>);
<a id="L169" name="L169"></a> 169 
<a id="L170" name="L170"></a> 170         <strong class="reserved">if</strong> (bindaddr != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L171" name="L171"></a> 171             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L172" name="L172"></a> 172                 <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(bindaddr);
<a id="L173" name="L173"></a> 173             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L174" name="L174"></a> 174                 <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L175" name="L175"></a> 175                     <a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L176" name="L176"></a> 176             <em class="brace">}</em>
<a id="L177" name="L177"></a> 177         <em class="brace">}</em>
<a id="L178" name="L178"></a> 178     <em class="brace">}</em>
<a id="L179" name="L179"></a> 179 
<div class="comment">
      The lock on the socket's TTL. This is for set/getTTL and
      send(packet,ttl).</div>
<a id="L184" name="L184"></a> 184     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ttlLock = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L185" name="L185"></a> 185 
<div class="comment">
      The lock on the socket's interface - used by setInterface
      and getInterface</div>
<a id="L190" name="L190"></a> 190     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> infLock = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L191" name="L191"></a> 191 
<div class="comment">
      The "last" interface set by setInterface on this MulticastSocket</div>
<a id="L195" name="L195"></a> 195     <strong class="reserved">private</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> infAddress = <strong class="reserved">null</strong>;
<a id="L196" name="L196"></a> 196 
<a id="L197" name="L197"></a> 197 
<div class="comment">
      Set the default time-to-live for multicast packets sent out
      on this <code>MulticastSocket</code> in order to control the
      scope of the multicasts.
      <p>The ttl is an <b>unsigned</b> 8-bit quantity, and so <b>must</b> be
      in the range <code>0 &lt;= ttl &lt;= 0xFF </code>.
      @param ttl the time-to-live
      @exception IOException if an I/O exception occurs
      while setting the default time-to-live value
      @deprecated use the setTimeToLive method instead, which uses
      <b>int</b> instead of <b>byte</b> as the type for ttl.
      @see #getTTL()</p></div>
<a id="L213" name="L213"></a> 213     @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L214" name="L214"></a> 214     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28253.html" title="Multiple referred from 3 places.">setTTL</a>(<strong class="reserved">byte</strong> ttl) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L215" name="L215"></a> 215         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L216" name="L216"></a> 216             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L217" name="L217"></a> 217         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/34063.html" title="Multiple defined in 5 places.">setTTL</a>(ttl);
<a id="L218" name="L218"></a> 218     <em class="brace">}</em>
<a id="L219" name="L219"></a> 219 
<div class="comment">
      Set the default time-to-live for multicast packets sent out
      on this <code>MulticastSocket</code> in order to control the
      scope of the multicasts.
      <p> The ttl <b>must</b> be in the range {@code  0 &lt;= ttl &lt;=
      255} or an <code>IllegalArgumentException</code> will be thrown.
      Multicast packets sent with a TTL of <code>0</code> are not transmitted
      on the network but may be delivered locally.
      @param  ttl
              the time-to-live
      @throws  IOException
               if an I/O exception occurs while setting the
               default time-to-live value
      @see #getTimeToLive()</p></div>
<a id="L239" name="L239"></a> 239     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28297.html" title="Multiple referred from 2 places.">setTimeToLive</a>(<strong class="reserved">int</strong> ttl) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L240" name="L240"></a> 240         <strong class="reserved">if</strong> (ttl &lt; 0 || ttl &gt; 255) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("ttl out of range");
<a id="L242" name="L242"></a> 242         <em class="brace">}</em>
<a id="L243" name="L243"></a> 243         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L244" name="L244"></a> 244             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L245" name="L245"></a> 245         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/34142.html" title="Multiple defined in 5 places.">setTimeToLive</a>(ttl);
<a id="L246" name="L246"></a> 246     <em class="brace">}</em>
<a id="L247" name="L247"></a> 247 
<div class="comment">
      Get the default time-to-live for multicast packets sent out on
      the socket.
      @exception IOException if an I/O exception occurs
      while getting the default time-to-live value
      @return the default time-to-live value
      @deprecated use the getTimeToLive method instead, which returns
      an <b>int</b> instead of a <b>byte</b>.
      @see #setTTL(byte)</div>
<a id="L259" name="L259"></a> 259     @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L260" name="L260"></a> 260     <strong class="reserved">public</strong> <strong class="reserved">byte</strong> <a href="../R/19344.html" title="Multiple referred from 2 places.">getTTL</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L261" name="L261"></a> 261         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L262" name="L262"></a> 262             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L263" name="L263"></a> 263         <strong class="reserved">return</strong> <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/22946.html" title="Multiple defined in 5 places.">getTTL</a>();
<a id="L264" name="L264"></a> 264     <em class="brace">}</em>
<a id="L265" name="L265"></a> 265 
<div class="comment">
      Get the default time-to-live for multicast packets sent out on
      the socket.
      @exception IOException if an I/O exception occurs while
      getting the default time-to-live value
      @return the default time-to-live value
      @see #setTimeToLive(int)</div>
<a id="L274" name="L274"></a> 274     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19498.html" title="Multiple referred from 3 places.">getTimeToLive</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L275" name="L275"></a> 275         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L276" name="L276"></a> 276             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L277" name="L277"></a> 277         <strong class="reserved">return</strong> <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/23151.html" title="Multiple defined in 6 places.">getTimeToLive</a>();
<a id="L278" name="L278"></a> 278     <em class="brace">}</em>
<a id="L279" name="L279"></a> 279 
<div class="comment">
      Joins a multicast group. Its behavior may be affected by
      <code>setInterface</code> or <code>setNetworkInterface</code>.
      <p>If there is a security manager, this method first
      calls its <code>checkMulticast</code> method
      with the <code>mcastaddr</code> argument
      as its argument.
      @param mcastaddr is the multicast address to join
      @exception IOException if there is an error joining
      or when the address is not a multicast address.
      @exception  SecurityException  if a security manager exists and its
      <code>checkMulticast</code> method doesn't allow the join.
      @see SecurityManager#checkMulticast(InetAddress)</p></div>
<a id="L298" name="L298"></a> 298     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L406" title="Referred from 406 in src/java/net/MulticastSocket.java.">joinGroup</a>(<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> mcastaddr) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L299" name="L299"></a> 299         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>()) <em class="brace">{</em>
<a id="L300" name="L300"></a> 300             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L301" name="L301"></a> 301         <em class="brace">}</em>
<a id="L302" name="L302"></a> 302 
<a id="L303" name="L303"></a> 303         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(mcastaddr, "joinGroup");
<a id="L304" name="L304"></a> 304         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L305" name="L305"></a> 305         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L306" name="L306"></a> 306             security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(mcastaddr);
<a id="L307" name="L307"></a> 307         <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<a id="L309" name="L309"></a> 309         <strong class="reserved">if</strong> (!mcastaddr.<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Not a multicast address");
<a id="L311" name="L311"></a> 311         <em class="brace">}</em>
<a id="L312" name="L312"></a> 312 
<div class="comment">
          required for some platforms where it's not possible to join
          a group without setting the interface first.</div>
<a id="L317" name="L317"></a> 317         <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> defaultInterface = <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>();
<a id="L318" name="L318"></a> 318 
<a id="L319" name="L319"></a> 319         <strong class="reserved">if</strong> (!interfaceSet &amp;&amp; defaultInterface != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L320" name="L320"></a> 320             <a href="../S/744.html#L550" title="Defined at 550 in src/java/net/MulticastSocket.java.">setNetworkInterface</a>(defaultInterface);
<a id="L321" name="L321"></a> 321         <em class="brace">}</em>
<a id="L322" name="L322"></a> 322 
<a id="L323" name="L323"></a> 323         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/26697.html" title="Multiple defined in 17 places.">join</a>(mcastaddr);
<a id="L324" name="L324"></a> 324     <em class="brace">}</em>
<a id="L325" name="L325"></a> 325 
<div class="comment">
      Leave a multicast group. Its behavior may be affected by
      <code>setInterface</code> or <code>setNetworkInterface</code>.
      <p>If there is a security manager, this method first
      calls its <code>checkMulticast</code> method
      with the <code>mcastaddr</code> argument
      as its argument.
      @param mcastaddr is the multicast address to leave
      @exception IOException if there is an error leaving
      or when the address is not a multicast address.
      @exception  SecurityException  if a security manager exists and its
      <code>checkMulticast</code> method doesn't allow the operation.
      @see SecurityManager#checkMulticast(InetAddress)</p></div>
<a id="L343" name="L343"></a> 343     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L453" title="Referred from 453 in src/java/net/MulticastSocket.java.">leaveGroup</a>(<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> mcastaddr) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L344" name="L344"></a> 344         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>()) <em class="brace">{</em>
<a id="L345" name="L345"></a> 345             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L346" name="L346"></a> 346         <em class="brace">}</em>
<a id="L347" name="L347"></a> 347 
<a id="L348" name="L348"></a> 348         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(mcastaddr, "leaveGroup");
<a id="L349" name="L349"></a> 349         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L350" name="L350"></a> 350         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L351" name="L351"></a> 351             security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(mcastaddr);
<a id="L352" name="L352"></a> 352         <em class="brace">}</em>
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354         <strong class="reserved">if</strong> (!mcastaddr.<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L355" name="L355"></a> 355             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Not a multicast address");
<a id="L356" name="L356"></a> 356         <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/26796.html" title="Multiple defined in 5 places.">leave</a>(mcastaddr);
<a id="L359" name="L359"></a> 359     <em class="brace">}</em>
<a id="L360" name="L360"></a> 360 
<div class="comment">
      Joins the specified multicast group at the specified interface.
      <p>If there is a security manager, this method first
      calls its <code>checkMulticast</code> method
      with the <code>mcastaddr</code> argument
      as its argument.
      @param mcastaddr is the multicast address to join
      @param netIf specifies the local interface to receive multicast
             datagram packets, or <i>null</i> to defer to the interface set by
            {@link MulticastSocket#setInterface(InetAddress)} or
            {@link MulticastSocket#setNetworkInterface(NetworkInterface)}
      @exception IOException if there is an error joining
      or when the address is not a multicast address.
      @exception  SecurityException  if a security manager exists and its
      <code>checkMulticast</code> method doesn't allow the join.
      @throws  IllegalArgumentException if mcastaddr is null or is a
               SocketAddress subclass not supported by this socket
      @see SecurityManager#checkMulticast(InetAddress)
      @since 1.4</p></div>
<a id="L385" name="L385"></a> 385     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L406" title="Referred from 406 in src/java/net/MulticastSocket.java.">joinGroup</a>(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> mcastaddr, <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> netIf)
<a id="L386" name="L386"></a> 386         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L387" name="L387"></a> 387         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L388" name="L388"></a> 388             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390         <strong class="reserved">if</strong> (mcastaddr == <strong class="reserved">null</strong> || !(mcastaddr <strong class="reserved">instanceof</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>))
<a id="L391" name="L391"></a> 391             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unsupported address type");
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393         <strong class="reserved">if</strong> (oldImpl)
<a id="L394" name="L394"></a> 394             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(((<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>)mcastaddr).<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), "joinGroup");
<a id="L397" name="L397"></a> 397         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L398" name="L398"></a> 398         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L399" name="L399"></a> 399             security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(((<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>)mcastaddr).<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>());
<a id="L400" name="L400"></a> 400         <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402         <strong class="reserved">if</strong> (!((<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>)mcastaddr).<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L403" name="L403"></a> 403             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Not a multicast address");
<a id="L404" name="L404"></a> 404         <em class="brace">}</em>
<a id="L405" name="L405"></a> 405 
<a id="L406" name="L406"></a> 406         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/26698.html" title="Multiple defined in 4 places.">joinGroup</a>(mcastaddr, netIf);
<a id="L407" name="L407"></a> 407     <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<div class="comment">
      Leave a multicast group on a specified local interface.
      <p>If there is a security manager, this method first
      calls its <code>checkMulticast</code> method
      with the <code>mcastaddr</code> argument
      as its argument.
      @param mcastaddr is the multicast address to leave
      @param netIf specifies the local interface or <i>null</i> to defer
                  to the interface set by
                  {@link MulticastSocket#setInterface(InetAddress)} or
                  {@link MulticastSocket#setNetworkInterface(NetworkInterface)}
      @exception IOException if there is an error leaving
      or when the address is not a multicast address.
      @exception  SecurityException  if a security manager exists and its
      <code>checkMulticast</code> method doesn't allow the operation.
      @throws  IllegalArgumentException if mcastaddr is null or is a
               SocketAddress subclass not supported by this socket
      @see SecurityManager#checkMulticast(InetAddress)
      @since 1.4</p></div>
<a id="L432" name="L432"></a> 432     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L453" title="Referred from 453 in src/java/net/MulticastSocket.java.">leaveGroup</a>(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> mcastaddr, <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> netIf)
<a id="L433" name="L433"></a> 433         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L434" name="L434"></a> 434         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L435" name="L435"></a> 435             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L436" name="L436"></a> 436 
<a id="L437" name="L437"></a> 437         <strong class="reserved">if</strong> (mcastaddr == <strong class="reserved">null</strong> || !(mcastaddr <strong class="reserved">instanceof</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>))
<a id="L438" name="L438"></a> 438             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unsupported address type");
<a id="L439" name="L439"></a> 439 
<a id="L440" name="L440"></a> 440         <strong class="reserved">if</strong> (oldImpl)
<a id="L441" name="L441"></a> 441             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>();
<a id="L442" name="L442"></a> 442 
<a id="L443" name="L443"></a> 443         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(((<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>)mcastaddr).<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), "leaveGroup");
<a id="L444" name="L444"></a> 444         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L445" name="L445"></a> 445         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446             security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(((<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>)mcastaddr).<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>());
<a id="L447" name="L447"></a> 447         <em class="brace">}</em>
<a id="L448" name="L448"></a> 448 
<a id="L449" name="L449"></a> 449         <strong class="reserved">if</strong> (!((<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>)mcastaddr).<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L450" name="L450"></a> 450             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Not a multicast address");
<a id="L451" name="L451"></a> 451         <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/26799.html" title="Multiple defined in 4 places.">leaveGroup</a>(mcastaddr, netIf);
<a id="L454" name="L454"></a> 454      <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Set the multicast network interface used by methods
      whose behavior would be affected by the value of the
      network interface. Useful for multihomed hosts.
      @param inf the InetAddress
      @exception SocketException if there is an error in
      the underlying protocol, such as a TCP error.
      @see #getInterface()</div>
<a id="L465" name="L465"></a> 465     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setInterface(<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> inf) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>()) <em class="brace">{</em>
<a id="L467" name="L467"></a> 467             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L468" name="L468"></a> 468         <em class="brace">}</em>
<a id="L469" name="L469"></a> 469         <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(inf, "setInterface");
<a id="L470" name="L470"></a> 470         <strong class="reserved">synchronized</strong> (infLock) <em class="brace">{</em>
<a id="L471" name="L471"></a> 471             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_MULTICAST_IF, inf);
<a id="L472" name="L472"></a> 472             infAddress = inf;
<a id="L473" name="L473"></a> 473             interfaceSet = <strong class="reserved">true</strong>;
<a id="L474" name="L474"></a> 474         <em class="brace">}</em>
<a id="L475" name="L475"></a> 475     <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<div class="comment">
      Retrieve the address of the network interface used for
      multicast packets.
      @return An <code>InetAddress</code> representing
       the address of the network interface used for
       multicast packets.
      @exception SocketException if there is an error in
      the underlying protocol, such as a TCP error.
      @see #setInterface(java.net.InetAddress)</div>
<a id="L490" name="L490"></a> 490     <strong class="reserved">public</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../S/7249.html#L232" title="Referred from 232 in src/com/sun/corba/se/impl/presentation/rmi/PresentationManagerImpl.java.">getInterface</a>() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L491" name="L491"></a> 491         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>()) <em class="brace">{</em>
<a id="L492" name="L492"></a> 492             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L493" name="L493"></a> 493         <em class="brace">}</em>
<a id="L494" name="L494"></a> 494         <strong class="reserved">synchronized</strong> (infLock) <em class="brace">{</em>
<a id="L495" name="L495"></a> 495             <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> ia =
<a id="L496" name="L496"></a> 496                 (<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>)<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_MULTICAST_IF);
<a id="L497" name="L497"></a> 497 
<div class="comment">
              No previous setInterface or interface can be
              set using setNetworkInterface</div>
<a id="L502" name="L502"></a> 502             <strong class="reserved">if</strong> (infAddress == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L503" name="L503"></a> 503                 <strong class="reserved">return</strong> ia;
<a id="L504" name="L504"></a> 504             <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<div class="comment">
              Same interface set with setInterface?</div>
<a id="L509" name="L509"></a> 509             <strong class="reserved">if</strong> (ia.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(infAddress)) <em class="brace">{</em>
<a id="L510" name="L510"></a> 510                 <strong class="reserved">return</strong> ia;
<a id="L511" name="L511"></a> 511             <em class="brace">}</em>
<a id="L512" name="L512"></a> 512 
<div class="comment">
              Different InetAddress from what we set with setInterface
              so enumerate the current interface to see if the
              address set by setInterface is bound to this interface.</div>
<a id="L518" name="L518"></a> 518             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L519" name="L519"></a> 519                 <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> ni = <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a>.<a href="../S/820.html#L318" title="Defined at 318 in src/java/net/NetworkInterface.java.">getByInetAddress</a>(ia);
<a id="L520" name="L520"></a> 520                 <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>&gt; addrs = ni.<a href="../S/820.html#L110" title="Defined at 110 in src/java/net/NetworkInterface.java.">getInetAddresses</a>();
<a id="L521" name="L521"></a> 521                 <strong class="reserved">while</strong> (addrs.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522                     <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> addr = addrs.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L523" name="L523"></a> 523                     <strong class="reserved">if</strong> (addr.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(infAddress)) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524                         <strong class="reserved">return</strong> infAddress;
<a id="L525" name="L525"></a> 525                     <em class="brace">}</em>
<a id="L526" name="L526"></a> 526                 <em class="brace">}</em>
<a id="L527" name="L527"></a> 527 
<div class="comment">
                  No match so reset infAddress to indicate that the
                  interface has changed via means</div>
<a id="L532" name="L532"></a> 532                 infAddress = <strong class="reserved">null</strong>;
<a id="L533" name="L533"></a> 533                 <strong class="reserved">return</strong> ia;
<a id="L534" name="L534"></a> 534             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L535" name="L535"></a> 535                 <strong class="reserved">return</strong> ia;
<a id="L536" name="L536"></a> 536             <em class="brace">}</em>
<a id="L537" name="L537"></a> 537         <em class="brace">}</em>
<a id="L538" name="L538"></a> 538     <em class="brace">}</em>
<a id="L539" name="L539"></a> 539 
<div class="comment">
      Specify the network interface for outgoing multicast datagrams
      sent on this socket.
      @param netIf the interface
      @exception SocketException if there is an error in
      the underlying protocol, such as a TCP error.
      @see #getNetworkInterface()
      @since 1.4</div>
<a id="L550" name="L550"></a> 550     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L320" title="Referred from 320 in src/java/net/MulticastSocket.java.">setNetworkInterface</a>(<a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> netIf)
<a id="L551" name="L551"></a> 551         <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L552" name="L552"></a> 552 
<a id="L553" name="L553"></a> 553         <strong class="reserved">synchronized</strong> (infLock) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_MULTICAST_IF2, netIf);
<a id="L555" name="L555"></a> 555             infAddress = <strong class="reserved">null</strong>;
<a id="L556" name="L556"></a> 556             interfaceSet = <strong class="reserved">true</strong>;
<a id="L557" name="L557"></a> 557         <em class="brace">}</em>
<a id="L558" name="L558"></a> 558     <em class="brace">}</em>
<a id="L559" name="L559"></a> 559 
<div class="comment">
      Get the multicast network interface set.
      @exception SocketException if there is an error in
      the underlying protocol, such as a TCP error.
      @return the multicast <code>NetworkInterface</code> currently set
      @see #setNetworkInterface(NetworkInterface)
      @since 1.4</div>
<a id="L569" name="L569"></a> 569     <strong class="reserved">public</strong> <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> getNetworkInterface() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L570" name="L570"></a> 570         <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a> ni
<a id="L571" name="L571"></a> 571             = (<a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a>)<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_MULTICAST_IF2);
<a id="L572" name="L572"></a> 572         <strong class="reserved">if</strong> ((ni.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>() == 0) || (ni.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>() == -1)) <em class="brace">{</em>
<a id="L573" name="L573"></a> 573             <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>[] addrs = <strong class="reserved">new</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>[1];
<a id="L574" name="L574"></a> 574             addrs[0] = <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>.<a href="../D/11347.html" title="Multiple defined in 4 places.">anyLocalAddress</a>();
<a id="L575" name="L575"></a> 575             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/820.html#L43" title="Defined at 43 in src/java/net/NetworkInterface.java.">NetworkInterface</a>(addrs[0].<a href="../D/19494.html" title="Multiple defined in 9 places.">getHostName</a>(), 0, addrs);
<a id="L576" name="L576"></a> 576         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L577" name="L577"></a> 577             <strong class="reserved">return</strong> ni;
<a id="L578" name="L578"></a> 578         <em class="brace">}</em>
<a id="L579" name="L579"></a> 579     <em class="brace">}</em>
<a id="L580" name="L580"></a> 580 
<div class="comment">
      Disable/Enable local loopback of multicast datagrams
      The option is used by the platform's networking code as a hint
      for setting whether multicast data will be looped back to
      the local socket.
      <p>Because this option is a hint, applications that want to
      verify what loopback mode is set to should call
      {@link #getLoopbackMode()}
      @param disable <code>true</code> to disable the LoopbackMode
      @throws SocketException if an error occurs while setting the value
      @since 1.4
      @see #getLoopbackMode</p></div>
<a id="L595" name="L595"></a> 595     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setLoopbackMode(<strong class="reserved">boolean</strong> <a href="../D/14911.html" title="Multiple defined in 8 places.">disable</a>) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L596" name="L596"></a> 596         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_MULTICAST_LOOP, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/14911.html" title="Multiple defined in 8 places.">disable</a>));
<a id="L597" name="L597"></a> 597     <em class="brace">}</em>
<a id="L598" name="L598"></a> 598 
<div class="comment">
      Get the setting for local loopback of multicast datagrams.
      @throws SocketException  if an error occurs while getting the value
      @return true if the LoopbackMode has been disabled
      @since 1.4
      @see #setLoopbackMode</div>
<a id="L607" name="L607"></a> 607     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getLoopbackMode() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L608" name="L608"></a> 608         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.IP_MULTICAST_LOOP)).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L609" name="L609"></a> 609     <em class="brace">}</em>
<a id="L610" name="L610"></a> 610 
<div class="comment">
      Sends a datagram packet to the destination, with a TTL (time-
      to-live) other than the default for the socket.  This method
      need only be used in instances where a particular TTL is desired;
      otherwise it is preferable to set a TTL once on the socket, and
      use that default TTL for all packets.  This method does <b>not
      </b> alter the default TTL for the socket. Its behavior may be
      affected by <code>setInterface</code>.
      <p>If there is a security manager, this method first performs some
      security checks. First, if <code>p.getAddress().isMulticastAddress()</code>
      is true, this method calls the
      security manager's <code>checkMulticast</code> method
      with <code>p.getAddress()</code> and <code>ttl</code> as its arguments.
      If the evaluation of that expression is false,
      this method instead calls the security manager's
      <code>checkConnect</code> method with arguments
      <code>p.getAddress().getHostAddress()</code> and
      <code>p.getPort()</code>. Each call to a security manager method
      could result in a SecurityException if the operation is not allowed.
      @param p is the packet to be sent. The packet should contain
      the destination multicast ip address and the data to be sent.
      One does not need to be the member of the group to send
      packets to a destination multicast address.
      @param ttl optional time to live for multicast packet.
      default ttl is 1.
      @exception IOException is raised if an error occurs i.e
      error while setting ttl.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkMulticast</code> or <code>checkConnect</code>
                  method doesn't allow the send.
      @deprecated Use the following code or its equivalent instead:
       ......
       int ttl = mcastSocket.getTimeToLive();
       mcastSocket.setTimeToLive(newttl);
       mcastSocket.send(p);
       mcastSocket.setTimeToLive(ttl);
       ......
      @see DatagramSocket#send
      @see DatagramSocket#receive
      @see SecurityManager#checkMulticast(java.net.InetAddress, byte)
      @see SecurityManager#checkConnect</p></div>
<a id="L658" name="L658"></a> 658     @<a href="../D/2383.html" title="Multiple defined in 2 places.">Deprecated</a>
<a id="L659" name="L659"></a> 659     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26758.html" title="Multiple referred from 7 places.">send</a>(<a href="../S/748.html#L43" title="Defined at 43 in src/java/net/DatagramPacket.java.">DatagramPacket</a> p, <strong class="reserved">byte</strong> ttl)
<a id="L660" name="L660"></a> 660         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L661" name="L661"></a> 661             <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L662" name="L662"></a> 662                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L663" name="L663"></a> 663             <a href="../D/12357.html" title="Multiple defined in 2 places.">checkAddress</a>(p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), "send");
<a id="L664" name="L664"></a> 664             <strong class="reserved">synchronized</strong>(ttlLock) <em class="brace">{</em>
<a id="L665" name="L665"></a> 665                 <strong class="reserved">synchronized</strong>(p) <em class="brace">{</em>
<a id="L666" name="L666"></a> 666                     <strong class="reserved">if</strong> (connectState == ST_NOT_CONNECTED) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667                         <em class="comment">// Security manager makes sure that the multicast address</em>
<a id="L668" name="L668"></a> 668                         <em class="comment">// is allowed one and that the ttl used is less</em>
<a id="L669" name="L669"></a> 669                         <em class="comment">// than the allowed maxttl.</em>
<a id="L670" name="L670"></a> 670                         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L671" name="L671"></a> 671                         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L672" name="L672"></a> 672                             <strong class="reserved">if</strong> (p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/25905.html" title="Multiple defined in 4 places.">isMulticastAddress</a>()) <em class="brace">{</em>
<a id="L673" name="L673"></a> 673                                 security.<a href="../D/12542.html" title="Multiple defined in 2 places.">checkMulticast</a>(p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), ttl);
<a id="L674" name="L674"></a> 674                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L675" name="L675"></a> 675                                 security.<a href="../D/12411.html" title="Multiple defined in 2 places.">checkConnect</a>(p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>().<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(),
<a id="L676" name="L676"></a> 676                                                       p.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L677" name="L677"></a> 677                             <em class="brace">}</em>
<a id="L678" name="L678"></a> 678                         <em class="brace">}</em>
<a id="L679" name="L679"></a> 679                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                         <em class="comment">// we're connected</em>
<a id="L681" name="L681"></a> 681                         <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> packetAddress = <strong class="reserved">null</strong>;
<a id="L682" name="L682"></a> 682                         packetAddress = p.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>();
<a id="L683" name="L683"></a> 683                         <strong class="reserved">if</strong> (packetAddress == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L684" name="L684"></a> 684                             p.<a href="../D/31877.html" title="Multiple defined in 3 places.">setAddress</a>(connectedAddress);
<a id="L685" name="L685"></a> 685                             p.<a href="../D/33565.html" title="Multiple defined in 9 places.">setPort</a>(connectedPort);
<a id="L686" name="L686"></a> 686                         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((!packetAddress.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(connectedAddress)) ||
<a id="L687" name="L687"></a> 687                                    p.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>() != connectedPort) <em class="brace">{</em>
<a id="L688" name="L688"></a> 688                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>("connected address and packet address" +
<a id="L689" name="L689"></a> 689                                                         " differ");
<a id="L690" name="L690"></a> 690                         <em class="brace">}</em>
<a id="L691" name="L691"></a> 691                     <em class="brace">}</em>
<a id="L692" name="L692"></a> 692                     <strong class="reserved">byte</strong> dttl = <a href="../D/22946.html" title="Multiple defined in 5 places.">getTTL</a>();
<a id="L693" name="L693"></a> 693                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L694" name="L694"></a> 694                         <strong class="reserved">if</strong> (ttl != dttl) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695                             <em class="comment">// set the ttl</em>
<a id="L696" name="L696"></a> 696                             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/34063.html" title="Multiple defined in 5 places.">setTTL</a>(ttl);
<a id="L697" name="L697"></a> 697                         <em class="brace">}</em>
<a id="L698" name="L698"></a> 698                         <em class="comment">// call the datagram method to send</em>
<a id="L699" name="L699"></a> 699                         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/31727.html" title="Multiple defined in 8 places.">send</a>(p);
<a id="L700" name="L700"></a> 700                     <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L701" name="L701"></a> 701                         <em class="comment">// set it back to default</em>
<a id="L702" name="L702"></a> 702                         <strong class="reserved">if</strong> (ttl != dttl) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703                             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/34063.html" title="Multiple defined in 5 places.">setTTL</a>(dttl);
<a id="L704" name="L704"></a> 704                         <em class="brace">}</em>
<a id="L705" name="L705"></a> 705                     <em class="brace">}</em>
<a id="L706" name="L706"></a> 706                 <em class="brace">}</em> <em class="comment">// synch p</em>
<a id="L707" name="L707"></a> 707             <em class="brace">}</em>  <em class="comment">//synch ttl</em>
<a id="L708" name="L708"></a> 708     <em class="brace">}</em> <em class="comment">//method</em>
<a id="L709" name="L709"></a> 709 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L214">[^]</a><a href="#L659">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/rmi/activation/Activatable.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L236">[^]</a><a href="#L569">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L236" title="Defined at 236.">getID</a></li>
<li><a href="#L254" title="Defined at 254.">register</a></li>
<li><a href="#L290" title="Defined at 290.">inactive</a></li>
<li><a href="#L309" title="Defined at 309.">unregister</a></li>
<li><a href="#L355" title="Defined at 355.">exportObject</a></li>
<li><a href="#L430" title="Defined at 430.">exportObject</a></li>
<li><a href="#L498" title="Defined at 498.">exportObject</a></li>
<li><a href="#L530" title="Defined at 530.">exportObject</a></li>
<li><a href="#L560" title="Defined at 560.">unexportObject</a></li>
<li><a href="#L569" title="Defined at 569.">exportObject</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.rmi.activation;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.rmi.MarshalledObject;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.rmi.NoSuchObjectException;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.rmi.Remote;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.rmi.RemoteException;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.rmi.activation.UnknownGroupException;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.rmi.activation.UnknownObjectException;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.rmi.server.RMIClientSocketFactory;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.rmi.server.RMIServerSocketFactory;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.rmi.server.RemoteServer;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> sun.rmi.server.ActivatableServerRef;
<a id="L38" name="L38"></a>  38 
<div class="comment">
  The <code>Activatable</code> class provides support for remote
  objects that require persistent access over time and that
  can be activated by the system.
  <p>For the constructors and static <code>exportObject</code> methods,
  the stub for a remote object being exported is obtained as described in
  {@link java.rmi.server.UnicastRemoteObject}.
  </p><p>An attempt to serialize explicitly an instance of this class will
  fail.
  @author      Ann Wollrath
  @since       1.2
  @serial      exclude</p></div>
<a id="L55" name="L55"></a>  55 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/286.html" title="Multiple referred from 3 places.">Activatable</a> <strong class="reserved">extends</strong> <a href="../S/2543.html#L42" title="Defined at 42 in src/java/rmi/server/RemoteServer.java.">RemoteServer</a> <em class="brace">{</em>
<a id="L56" name="L56"></a>  56 
<a id="L57" name="L57"></a>  57     <strong class="reserved">private</strong> <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>;
<div class="comment">
     /** indicate compatibility with the Java 2 SDK v1.2 version of class */</div>
<a id="L59" name="L59"></a>  59     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -3120617863591563455L;
<a id="L60" name="L60"></a>  60 
<div class="comment">
      Constructs an activatable remote object by registering
      an activation descriptor (with the specified location, data, and
      restart mode) for this object, and exporting the object with the
      specified port.
      <p><strong>Note:</strong> Using the <code>Activatable</code>
      constructors that both register and export an activatable remote
      object is strongly discouraged because the actions of registering
      and exporting the remote object are <i>not</i> guaranteed to be
      atomic.  Instead, an application should register an activation
      descriptor and export a remote object separately, so that exceptions
      can be handled properly.
      </p><p>This method invokes the {@link
      #exportObject(Remote,String,MarshalledObject,boolean,int)
      exportObject} method with this object, and the specified location,
      data, restart mode, and port.  Subsequent calls to <a href="#L236" title="Defined at 236.">getID</a>
      will return the activation identifier returned from the call to
      <code>exportObject</code>.
      @param location the location for classes for this object
      @param data the object's initialization data
      @param port the port on which the object is exported (an anonymous
      port is used if port=0)
      @param restart if true, the object is restarted (reactivated) when
      either the activator is restarted or the object's activation group
      is restarted after an unexpected crash; if false, the object is only
      activated on demand.  Specifying <code>restart</code> to be
      <code>true</code> does not force an initial immediate activation of
      a newly registered object;  initial activation is lazy.
      @exception ActivationException if object registration fails.
      @exception RemoteException if either of the following fails:
      a) registering the object with the activation system or b) exporting
      the object to the RMI runtime.
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation.
      @since 1.2
     *</p></div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">protected</strong> Activatable(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>,
<a id="L101" name="L101"></a> 101                           <a href="../S/2546.html#L71" title="Defined at 71 in src/java/rmi/MarshalledObject.java.">MarshalledObject</a>&lt;?&gt; <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>,
<a id="L102" name="L102"></a> 102                           <strong class="reserved">boolean</strong> <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>,
<a id="L103" name="L103"></a> 103                           <strong class="reserved">int</strong> port)
<a id="L104" name="L104"></a> 104         <strong class="reserved">throws</strong> <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L105" name="L105"></a> 105     <em class="brace">{</em>
<a id="L106" name="L106"></a> 106         <strong class="reserved">super</strong>();
<a id="L107" name="L107"></a> 107         <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(<strong class="reserved">this</strong>, <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>, port);
<a id="L108" name="L108"></a> 108     <em class="brace">}</em>
<a id="L109" name="L109"></a> 109 
<div class="comment">
      Constructs an activatable remote object by registering
      an activation descriptor (with the specified location, data, and
      restart mode) for this object, and exporting the object with the
      specified port, and specified client and server socket factories.
      <p><strong>Note:</strong> Using the <code>Activatable</code>
      constructors that both register and export an activatable remote
      object is strongly discouraged because the actions of registering
      and exporting the remote object are <i>not</i> guaranteed to be
      atomic.  Instead, an application should register an activation
      descriptor and export a remote object separately, so that exceptions
      can be handled properly.
      </p><p>This method invokes the {@link
      #exportObject(Remote,String,MarshalledObject,boolean,int,RMIClientSocketFactory,RMIServerSocketFactory)
      exportObject} method with this object, and the specified location,
      data, restart mode, port, and client and server socket factories.
      Subsequent calls to <a href="#L236" title="Defined at 236.">getID</a> will return the activation
      identifier returned from the call to <code>exportObject</code>.
      @param location the location for classes for this object
      @param data the object's initialization data
      @param restart if true, the object is restarted (reactivated) when
      either the activator is restarted or the object's activation group
      is restarted after an unexpected crash; if false, the object is only
      activated on demand.  Specifying <code>restart</code> to be
      <code>true</code> does not force an initial immediate activation of
      a newly registered object;  initial activation is lazy.
      @param port the port on which the object is exported (an anonymous
      port is used if port=0)
      @param csf the client-side socket factory for making calls to the
      remote object
      @param ssf the server-side socket factory for receiving remote calls
      @exception ActivationException if object registration fails.
      @exception RemoteException if either of the following fails:
      a) registering the object with the activation system or b) exporting
      the object to the RMI runtime.
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation.
      @since 1.2
     *</p></div>
<a id="L152" name="L152"></a> 152     <strong class="reserved">protected</strong> Activatable(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>,
<a id="L153" name="L153"></a> 153                           <a href="../S/2546.html#L71" title="Defined at 71 in src/java/rmi/MarshalledObject.java.">MarshalledObject</a>&lt;?&gt; <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>,
<a id="L154" name="L154"></a> 154                           <strong class="reserved">boolean</strong> <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>,
<a id="L155" name="L155"></a> 155                           <strong class="reserved">int</strong> port,
<a id="L156" name="L156"></a> 156                           <a href="../S/2531.html#L62" title="Defined at 62 in src/java/rmi/server/RMIClientSocketFactory.java.">RMIClientSocketFactory</a> csf,
<a id="L157" name="L157"></a> 157                           <a href="../S/2533.html#L61" title="Defined at 61 in src/java/rmi/server/RMIServerSocketFactory.java.">RMIServerSocketFactory</a> ssf)
<a id="L158" name="L158"></a> 158         <strong class="reserved">throws</strong> <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L159" name="L159"></a> 159     <em class="brace">{</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">super</strong>();
<a id="L161" name="L161"></a> 161         <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(<strong class="reserved">this</strong>, <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>, port, csf, ssf);
<a id="L162" name="L162"></a> 162     <em class="brace">}</em>
<a id="L163" name="L163"></a> 163 
<div class="comment">
      Constructor used to activate/export the object on a specified
      port. An "activatable" remote object must have a constructor that
      takes two arguments: <ul><li>the object's activation identifier (<code>ActivationID</code>), and
      </li><li>the object's initialization data (a <code>MarshalledObject</code>).
      </li></ul><p>
      A concrete subclass of this class must call this constructor when it is
      <i>activated</i> via the two parameter constructor described above. As
      a side-effect of construction, the remote object is "exported"
      to the RMI runtime (on the specified <code>port</code>) and is
      available to accept incoming calls from clients.
      @param id activation identifier for the object
      @param port the port number on which the object is exported
      @exception RemoteException if exporting the object to the RMI
      runtime fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</p></div>
<a id="L186" name="L186"></a> 186     <strong class="reserved">protected</strong> Activatable(<a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, <strong class="reserved">int</strong> port)
<a id="L187" name="L187"></a> 187         <strong class="reserved">throws</strong> <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L188" name="L188"></a> 188     <em class="brace">{</em>
<a id="L189" name="L189"></a> 189         <strong class="reserved">super</strong>();
<a id="L190" name="L190"></a> 190         <strong class="reserved">this</strong>.<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>;
<a id="L191" name="L191"></a> 191         <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(<strong class="reserved">this</strong>, <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, port);
<a id="L192" name="L192"></a> 192     <em class="brace">}</em>
<a id="L193" name="L193"></a> 193 
<div class="comment">
      Constructor used to activate/export the object on a specified
      port. An "activatable" remote object must have a constructor that
      takes two arguments: <ul><li>the object's activation identifier (<code>ActivationID</code>), and
      </li><li>the object's initialization data (a <code>MarshalledObject</code>).
      </li></ul><p>
      A concrete subclass of this class must call this constructor when it is
      <i>activated</i> via the two parameter constructor described above. As
      a side-effect of construction, the remote object is "exported"
      to the RMI runtime (on the specified <code>port</code>) and is
      available to accept incoming calls from clients.
      @param id activation identifier for the object
      @param port the port number on which the object is exported
      @param csf the client-side socket factory for making calls to the
      remote object
      @param ssf the server-side socket factory for receiving remote calls
      @exception RemoteException if exporting the object to the RMI
      runtime fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</p></div>
<a id="L219" name="L219"></a> 219     <strong class="reserved">protected</strong> Activatable(<a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, <strong class="reserved">int</strong> port,
<a id="L220" name="L220"></a> 220                           <a href="../S/2531.html#L62" title="Defined at 62 in src/java/rmi/server/RMIClientSocketFactory.java.">RMIClientSocketFactory</a> csf,
<a id="L221" name="L221"></a> 221                           <a href="../S/2533.html#L61" title="Defined at 61 in src/java/rmi/server/RMIServerSocketFactory.java.">RMIServerSocketFactory</a> ssf)
<a id="L222" name="L222"></a> 222         <strong class="reserved">throws</strong> <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L223" name="L223"></a> 223     <em class="brace">{</em>
<a id="L224" name="L224"></a> 224         <strong class="reserved">super</strong>();
<a id="L225" name="L225"></a> 225         <strong class="reserved">this</strong>.<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>;
<a id="L226" name="L226"></a> 226         <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(<strong class="reserved">this</strong>, <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, port, csf, ssf);
<a id="L227" name="L227"></a> 227     <em class="brace">}</em>
<a id="L228" name="L228"></a> 228 
<div class="comment">
      Returns the object's activation identifier.  The method is
      protected so that only subclasses can obtain an object's
      identifier.
      @return the object's activation identifier
      @since 1.2</div>
<a id="L236" name="L236"></a> 236     <strong class="reserved">protected</strong> <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../R/16925.html" title="Multiple referred from 153 places.">getID</a>() <em class="brace">{</em>
<a id="L237" name="L237"></a> 237         <strong class="reserved">return</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>;
<a id="L238" name="L238"></a> 238     <em class="brace">}</em>
<a id="L239" name="L239"></a> 239 
<div class="comment">
      Register an object descriptor for an activatable remote
      object so that is can be activated on demand.
      @param desc  the object's descriptor
      @return the stub for the activatable remote object
      @exception UnknownGroupException if group id in <code>desc</code>
      is not registered with the activation system
      @exception ActivationException if activation system is not running
      @exception RemoteException if remote call fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</div>
<a id="L254" name="L254"></a> 254     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> <a href="../R/25749.html" title="Multiple referred from 136 places.">register</a>(<a href="../S/2505.html#L52" title="Defined at 52 in src/java/rmi/activation/ActivationDesc.java.">ActivationDesc</a> desc)
<a id="L255" name="L255"></a> 255         <strong class="reserved">throws</strong> <a href="../S/2511.html#L45" title="Defined at 45 in src/java/rmi/activation/UnknownGroupException.java.">UnknownGroupException</a>, <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L256" name="L256"></a> 256     <em class="brace">{</em>
<a id="L257" name="L257"></a> 257         <em class="comment">// register object with activator.</em>
<a id="L258" name="L258"></a> 258         <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> =
<a id="L259" name="L259"></a> 259             <a href="../S/2502.html#L98" title="Defined at 98 in src/java/rmi/activation/ActivationGroup.java.">ActivationGroup</a>.<a href="../D/22894.html" title="Multiple defined in 2 places.">getSystem</a>().<a href="../D/30577.html" title="Multiple defined in 3 places.">registerObject</a>(desc);
<a id="L260" name="L260"></a> 260         <strong class="reserved">return</strong> sun.rmi.server.ActivatableRef.getStub(desc, <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L261" name="L261"></a> 261     <em class="brace">}</em>
<a id="L262" name="L262"></a> 262 
<div class="comment">
      Informs the system that the object with the corresponding activation
      <code>id</code> is currently inactive. If the object is currently
      active, the object is "unexported" from the RMI runtime (only if
      there are no pending or in-progress calls)
      so the that it can no longer receive incoming calls. This call
      informs this VM's ActivationGroup that the object is inactive,
      that, in turn, informs its ActivationMonitor. If this call
      completes successfully, a subsequent activate request to the activator
      will cause the object to reactivate. The operation may still
      succeed if the object is considered active but has already
      unexported itself.
      @param id the object's activation identifier
      @return true if the operation succeeds (the operation will
      succeed if the object in currently known to be active and is
      either already unexported or is currently exported and has no
      pending/executing calls); false is returned if the object has
      pending/executing calls in which case it cannot be deactivated
      @exception UnknownObjectException if object is not known (it may
      already be inactive)
      @exception ActivationException if group is not active
      @exception RemoteException if call informing monitor fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</div>
<a id="L290" name="L290"></a> 290     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> inactive(<a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>)
<a id="L291" name="L291"></a> 291         <strong class="reserved">throws</strong> <a href="../S/2506.html#L47" title="Defined at 47 in src/java/rmi/activation/UnknownObjectException.java.">UnknownObjectException</a>, <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L292" name="L292"></a> 292     <em class="brace">{</em>
<a id="L293" name="L293"></a> 293         <strong class="reserved">return</strong> <a href="../S/2502.html#L98" title="Defined at 98 in src/java/rmi/activation/ActivationGroup.java.">ActivationGroup</a>.<a href="../S/2502.html#L529" title="Defined at 529 in src/java/rmi/activation/ActivationGroup.java.">currentGroup</a>().<a href="../D/24418.html" title="Multiple defined in 2 places.">inactiveObject</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L294" name="L294"></a> 294     <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<div class="comment">
      Revokes previous registration for the activation descriptor
      associated with <code>id</code>. An object can no longer be
      activated via that <code>id</code>.
      @param id the object's activation identifier
      @exception UnknownObjectException if object (<code>id</code>) is unknown
      @exception ActivationException if activation system is not running
      @exception RemoteException if remote call to activation system fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</div>
<a id="L309" name="L309"></a> 309     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/29751.html" title="Multiple referred from 16 places.">unregister</a>(<a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>)
<a id="L310" name="L310"></a> 310         <strong class="reserved">throws</strong> <a href="../S/2506.html#L47" title="Defined at 47 in src/java/rmi/activation/UnknownObjectException.java.">UnknownObjectException</a>, <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L311" name="L311"></a> 311     <em class="brace">{</em>
<a id="L312" name="L312"></a> 312         <a href="../S/2502.html#L98" title="Defined at 98 in src/java/rmi/activation/ActivationGroup.java.">ActivationGroup</a>.<a href="../D/22894.html" title="Multiple defined in 2 places.">getSystem</a>().<a href="../S/2509.html#L90" title="Defined at 90 in src/java/rmi/activation/ActivationSystem.java.">unregisterObject</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L313" name="L313"></a> 313     <em class="brace">}</em>
<a id="L314" name="L314"></a> 314 
<div class="comment">
      Registers an activation descriptor (with the specified location,
      data, and restart mode) for the specified object, and exports that
      object with the specified port.
      <p><strong>Note:</strong> Using this method (as well as the
      <code>Activatable</code> constructors that both register and export
      an activatable remote object) is strongly discouraged because the
      actions of registering and exporting the remote object are
      <i>not</i> guaranteed to be atomic.  Instead, an application should
      register an activation descriptor and export a remote object
      separately, so that exceptions can be handled properly.
      </p><p>This method invokes the {@link
      #exportObject(Remote,String,MarshalledObject,boolean,int,RMIClientSocketFactory,RMIServerSocketFactory)
      exportObject} method with the specified object, location, data,
      restart mode, and port, and <code>null</code> for both client and
      server socket factories, and then returns the resulting activation
      identifier.
      @param obj the object being exported
      @param location the object's code location
      @param data the object's bootstrapping data
      @param restart if true, the object is restarted (reactivated) when
      either the activator is restarted or the object's activation group
      is restarted after an unexpected crash; if false, the object is only
      activated on demand.  Specifying <code>restart</code> to be
      <code>true</code> does not force an initial immediate activation of
      a newly registered object;  initial activation is lazy.
      @param port the port on which the object is exported (an anonymous
      port is used if port=0)
      @return the activation identifier obtained from registering the
      descriptor, <code>desc</code>, with the activation system
      the wrong group
      @exception ActivationException if activation group is not active
      @exception RemoteException if object registration or export fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2
     *</p></div>
<a id="L355" name="L355"></a> 355     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../R/14163.html" title="Multiple referred from 28 places.">exportObject</a>(<a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> obj,
<a id="L356" name="L356"></a> 356                                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>,
<a id="L357" name="L357"></a> 357                                             <a href="../S/2546.html#L71" title="Defined at 71 in src/java/rmi/MarshalledObject.java.">MarshalledObject</a>&lt;?&gt; <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>,
<a id="L358" name="L358"></a> 358                                             <strong class="reserved">boolean</strong> <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>,
<a id="L359" name="L359"></a> 359                                             <strong class="reserved">int</strong> port)
<a id="L360" name="L360"></a> 360         <strong class="reserved">throws</strong> <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L361" name="L361"></a> 361     <em class="brace">{</em>
<a id="L362" name="L362"></a> 362         <strong class="reserved">return</strong> <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(obj, <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>, port, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L363" name="L363"></a> 363     <em class="brace">}</em>
<a id="L364" name="L364"></a> 364 
<div class="comment">
      Registers an activation descriptor (with the specified location,
      data, and restart mode) for the specified object, and exports that
      object with the specified port, and the specified client and server
      socket factories.
      <p><strong>Note:</strong> Using this method (as well as the
      <code>Activatable</code> constructors that both register and export
      an activatable remote object) is strongly discouraged because the
      actions of registering and exporting the remote object are
      <i>not</i> guaranteed to be atomic.  Instead, an application should
      register an activation descriptor and export a remote object
      separately, so that exceptions can be handled properly.
      </p><p>This method first registers an activation descriptor for the
      specified object as follows. It obtains the activation system by
      invoking the method {@link ActivationGroup#getSystem
      ActivationGroup.getSystem}.  This method then obtains an {@link
      ActivationID} for the object by invoking the activation system's
      {@link ActivationSystem#registerObject registerObject} method with
      an <a href="../S/2505.html#L52" title="Defined at 52 in src/java/rmi/activation/ActivationDesc.java.">ActivationDesc</a> constructed with the specified object's
      class name, and the specified location, data, and restart mode.  If
      an exception occurs obtaining the activation system or registering
      the activation descriptor, that exception is thrown to the caller.
      </p><p>Next, this method exports the object by invoking the {@link
      #exportObject(Remote,ActivationID,int,RMIClientSocketFactory,RMIServerSocketFactory)
      exportObject} method with the specified remote object, the
      activation identifier obtained from registration, the specified
      port, and the specified client and server socket factories.  If an
      exception occurs exporting the object, this method attempts to
      unregister the activation identifier (obtained from registration) by
      invoking the activation system's {@link
      ActivationSystem#unregisterObject unregisterObject} method with the
      activation identifier.  If an exception occurs unregistering the
      identifier, that exception is ignored, and the original exception
      that occurred exporting the object is thrown to the caller.
      </p><p>Finally, this method invokes the {@link
      ActivationGroup#activeObject activeObject} method on the activation
      group in this VM with the activation identifier and the specified
      remote object, and returns the activation identifier to the caller.
      @param obj the object being exported
      @param location the object's code location
      @param data the object's bootstrapping data
      @param restart if true, the object is restarted (reactivated) when
      either the activator is restarted or the object's activation group
      is restarted after an unexpected crash; if false, the object is only
      activated on demand.  Specifying <code>restart</code> to be
      <code>true</code> does not force an initial immediate activation of
      a newly registered object;  initial activation is lazy.
      @param port the port on which the object is exported (an anonymous
      port is used if port=0)
      @param csf the client-side socket factory for making calls to the
      remote object
      @param ssf the server-side socket factory for receiving remote calls
      @return the activation identifier obtained from registering the
      descriptor with the activation system
      @exception ActivationException if activation group is not active
      @exception RemoteException if object registration or export fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2
     *</p></div>
<a id="L430" name="L430"></a> 430     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../R/14163.html" title="Multiple referred from 28 places.">exportObject</a>(<a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> obj,
<a id="L431" name="L431"></a> 431                                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>,
<a id="L432" name="L432"></a> 432                                             <a href="../S/2546.html#L71" title="Defined at 71 in src/java/rmi/MarshalledObject.java.">MarshalledObject</a>&lt;?&gt; <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>,
<a id="L433" name="L433"></a> 433                                             <strong class="reserved">boolean</strong> <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>,
<a id="L434" name="L434"></a> 434                                             <strong class="reserved">int</strong> port,
<a id="L435" name="L435"></a> 435                                             <a href="../S/2531.html#L62" title="Defined at 62 in src/java/rmi/server/RMIClientSocketFactory.java.">RMIClientSocketFactory</a> csf,
<a id="L436" name="L436"></a> 436                                             <a href="../S/2533.html#L61" title="Defined at 61 in src/java/rmi/server/RMIServerSocketFactory.java.">RMIServerSocketFactory</a> ssf)
<a id="L437" name="L437"></a> 437         <strong class="reserved">throws</strong> <a href="../S/2504.html#L45" title="Defined at 45 in src/java/rmi/activation/ActivationException.java.">ActivationException</a>, <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L438" name="L438"></a> 438     <em class="brace">{</em>
<a id="L439" name="L439"></a> 439         <a href="../S/2505.html#L52" title="Defined at 52 in src/java/rmi/activation/ActivationDesc.java.">ActivationDesc</a> desc = <strong class="reserved">new</strong> <a href="../S/2505.html#L52" title="Defined at 52 in src/java/rmi/activation/ActivationDesc.java.">ActivationDesc</a>(obj.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L440" name="L440"></a> 440                                                  <a href="../D/27026.html" title="Multiple defined in 4 places.">location</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>);
<div class="comment">
          Register descriptor.</div>
<a id="L444" name="L444"></a> 444         <a href="../S/2509.html#L47" title="Defined at 47 in src/java/rmi/activation/ActivationSystem.java.">ActivationSystem</a> <a href="../S/1552.html#L196" title="Defined at 196 in src/java/time/Clock.java.">system</a> =  <a href="../S/2502.html#L98" title="Defined at 98 in src/java/rmi/activation/ActivationGroup.java.">ActivationGroup</a>.<a href="../D/22894.html" title="Multiple defined in 2 places.">getSystem</a>();
<a id="L445" name="L445"></a> 445         <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> = <a href="../S/1552.html#L196" title="Defined at 196 in src/java/time/Clock.java.">system</a>.<a href="../D/30577.html" title="Multiple defined in 3 places.">registerObject</a>(desc);
<a id="L446" name="L446"></a> 446 
<div class="comment">
          Export object.</div>
<a id="L450" name="L450"></a> 450         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L451" name="L451"></a> 451             <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(obj, <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, port, csf, ssf);
<a id="L452" name="L452"></a> 452         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a> e) <em class="brace">{</em>
<div class="comment">
              Attempt to unregister activation descriptor because export
              failed and register/export should be atomic (see 4323621).</div>
<a id="L457" name="L457"></a> 457             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L458" name="L458"></a> 458                 <a href="../S/1552.html#L196" title="Defined at 196 in src/java/time/Clock.java.">system</a>.<a href="../S/2509.html#L90" title="Defined at 90 in src/java/rmi/activation/ActivationSystem.java.">unregisterObject</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L459" name="L459"></a> 459             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L460" name="L460"></a> 460             <em class="brace">}</em>
<div class="comment">
              Report original exception.</div>
<a id="L464" name="L464"></a> 464             <strong class="reserved">throw</strong> e;
<a id="L465" name="L465"></a> 465         <em class="brace">}</em>
<a id="L466" name="L466"></a> 466 
<div class="comment">
          This call can't fail (it is a local call, and the only possible
          exception, thrown if the group is inactive, will not be thrown
          because the group is not inactive).</div>
<a id="L472" name="L472"></a> 472         <a href="../S/2502.html#L98" title="Defined at 98 in src/java/rmi/activation/ActivationGroup.java.">ActivationGroup</a>.<a href="../S/2502.html#L529" title="Defined at 529 in src/java/rmi/activation/ActivationGroup.java.">currentGroup</a>().<a href="../D/10616.html" title="Multiple defined in 3 places.">activeObject</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, obj);
<a id="L473" name="L473"></a> 473 
<a id="L474" name="L474"></a> 474         <strong class="reserved">return</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>;
<a id="L475" name="L475"></a> 475     <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<div class="comment">
      Export the activatable remote object to the RMI runtime to make
      the object available to receive incoming calls. The object is
      exported on an anonymous port, if <code>port</code> is zero. <p>
      During activation, this <code>exportObject</code> method should
      be invoked explicitly by an "activatable" object, that does not
      extend the <code>Activatable</code> class. There is no need for objects
      that do extend the <code>Activatable</code> class to invoke this
      method directly because the object is exported during construction.
      @return the stub for the activatable remote object
      @param obj the remote object implementation
      @param id the object's  activation identifier
      @param port the port on which the object is exported (an anonymous
      port is used if port=0)
      @exception RemoteException if object export fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</p></div>
<a id="L498" name="L498"></a> 498     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> <a href="../R/14163.html" title="Multiple referred from 28 places.">exportObject</a>(<a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> obj,
<a id="L499" name="L499"></a> 499                                       <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>,
<a id="L500" name="L500"></a> 500                                       <strong class="reserved">int</strong> port)
<a id="L501" name="L501"></a> 501         <strong class="reserved">throws</strong> <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L502" name="L502"></a> 502     <em class="brace">{</em>
<a id="L503" name="L503"></a> 503         <strong class="reserved">return</strong> <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(obj, <strong class="reserved">new</strong> ActivatableServerRef(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, port));
<a id="L504" name="L504"></a> 504     <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<div class="comment">
      Export the activatable remote object to the RMI runtime to make
      the object available to receive incoming calls. The object is
      exported on an anonymous port, if <code>port</code> is zero. <p>
      During activation, this <code>exportObject</code> method should
      be invoked explicitly by an "activatable" object, that does not
      extend the <code>Activatable</code> class. There is no need for objects
      that do extend the <code>Activatable</code> class to invoke this
      method directly because the object is exported during construction.
      @return the stub for the activatable remote object
      @param obj the remote object implementation
      @param id the object's  activation identifier
      @param port the port on which the object is exported (an anonymous
      port is used if port=0)
      @param csf the client-side socket factory for making calls to the
      remote object
      @param ssf the server-side socket factory for receiving remote calls
      @exception RemoteException if object export fails
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</p></div>
<a id="L530" name="L530"></a> 530     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> <a href="../R/14163.html" title="Multiple referred from 28 places.">exportObject</a>(<a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> obj,
<a id="L531" name="L531"></a> 531                                       <a href="../S/2510.html#L70" title="Defined at 70 in src/java/rmi/activation/ActivationID.java.">ActivationID</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>,
<a id="L532" name="L532"></a> 532                                       <strong class="reserved">int</strong> port,
<a id="L533" name="L533"></a> 533                                       <a href="../S/2531.html#L62" title="Defined at 62 in src/java/rmi/server/RMIClientSocketFactory.java.">RMIClientSocketFactory</a> csf,
<a id="L534" name="L534"></a> 534                                       <a href="../S/2533.html#L61" title="Defined at 61 in src/java/rmi/server/RMIServerSocketFactory.java.">RMIServerSocketFactory</a> ssf)
<a id="L535" name="L535"></a> 535         <strong class="reserved">throws</strong> <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L536" name="L536"></a> 536     <em class="brace">{</em>
<a id="L537" name="L537"></a> 537         <strong class="reserved">return</strong> <a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(obj, <strong class="reserved">new</strong> ActivatableServerRef(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, port, csf, ssf));
<a id="L538" name="L538"></a> 538     <em class="brace">}</em>
<a id="L539" name="L539"></a> 539 
<div class="comment">
      Remove the remote object, obj, from the RMI runtime. If
      successful, the object can no longer accept incoming RMI calls.
      If the force parameter is true, the object is forcibly unexported
      even if there are pending calls to the remote object or the
      remote object still has calls in progress.  If the force
      parameter is false, the object is only unexported if there are
      no pending or in progress calls to the object.
      @param obj the remote object to be unexported
      @param force if true, unexports the object even if there are
      pending or in-progress calls; if false, only unexports the object
      if there are no pending or in-progress calls
      @return true if operation is successful, false otherwise
      @exception NoSuchObjectException if the remote object is not
      currently exported
      @exception UnsupportedOperationException if and only if activation is
      not supported by this implementation
      @since 1.2</div>
<a id="L560" name="L560"></a> 560     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/29640.html" title="Multiple referred from 13 places.">unexportObject</a>(<a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> obj, <strong class="reserved">boolean</strong> <a href="../D/16521.html" title="Multiple defined in 3 places.">force</a>)
<a id="L561" name="L561"></a> 561         <strong class="reserved">throws</strong> <a href="../S/2495.html#L47" title="Defined at 47 in src/java/rmi/NoSuchObjectException.java.">NoSuchObjectException</a>
<a id="L562" name="L562"></a> 562     <em class="brace">{</em>
<a id="L563" name="L563"></a> 563         <strong class="reserved">return</strong> sun.rmi.transport.ObjectTable.<a href="../D/35838.html" title="Multiple defined in 12 places.">unexportObject</a>(obj, <a href="../D/16521.html" title="Multiple defined in 3 places.">force</a>);
<a id="L564" name="L564"></a> 564     <em class="brace">}</em>
<a id="L565" name="L565"></a> 565 
<div class="comment">
      Exports the specified object using the specified server ref.</div>
<a id="L569" name="L569"></a> 569     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> <a href="../R/14163.html" title="Multiple referred from 28 places.">exportObject</a>(<a href="../S/2494.html#L50" title="Defined at 50 in src/java/rmi/Remote.java.">Remote</a> obj, ActivatableServerRef sref)
<a id="L570" name="L570"></a> 570         <strong class="reserved">throws</strong> <a href="../S/2551.html#L49" title="Defined at 49 in src/java/rmi/RemoteException.java.">RemoteException</a>
<a id="L571" name="L571"></a> 571     <em class="brace">{</em>
<a id="L572" name="L572"></a> 572         <em class="comment">// if obj extends Activatable, set its ref.</em>
<a id="L573" name="L573"></a> 573         <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/2514.html#L55" title="Defined at 55 in src/java/rmi/activation/Activatable.java.">Activatable</a>) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574             ((<a href="../S/2514.html#L55" title="Defined at 55 in src/java/rmi/activation/Activatable.java.">Activatable</a>) obj).<a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a> = sref;
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576         <em class="brace">}</em>
<a id="L577" name="L577"></a> 577         <strong class="reserved">return</strong> sref.<a href="../D/15882.html" title="Multiple defined in 17 places.">exportObject</a>(obj, <strong class="reserved">null</strong>, <strong class="reserved">false</strong>);
<a id="L578" name="L578"></a> 578     <em class="brace">}</em>
<a id="L579" name="L579"></a> 579 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L236">[^]</a><a href="#L569">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
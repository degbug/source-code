<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/font/LineBreakMeasurer.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L327">[^]</a><a href="#L522">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L327" title="Defined at 327.">nextOffset</a></li>
<li><a href="#L348" title="Defined at 348.">nextOffset</a></li>
<li><a href="#L412" title="Defined at 412.">nextLayout</a></li>
<li><a href="#L436" title="Defined at 436.">nextLayout</a></li>
<li><a href="#L460" title="Defined at 460.">getPosition</a></li>
<li><a href="#L474" title="Defined at 474.">setPosition</a></li>
<li><a href="#L496" title="Defined at 496.">insertChar</a></li>
<li><a href="#L522" title="Defined at 522.">deleteChar</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1998, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  (C) Copyright Taligent, Inc. 1996 - 1997, All Rights Reserved
  (C) Copyright IBM Corp. 1996 - 1998, All Rights Reserved
  The original version of this source code and documentation is
  copyrighted and owned by Taligent, Inc., a wholly-owned subsidiary
  of IBM. These materials are provided under terms of a License
  Agreement between Taligent and Sun. This technology is protected
  by multiple US and International patents.
  This notice and attribution to Taligent may not be removed.
  Taligent is a registered trademark of Taligent, Inc.</div>
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.font;
<a id="L42" name="L42"></a>  42 
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.text.BreakIterator;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> java.text.CharacterIterator;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.text.AttributedCharacterIterator;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> java.awt.font.FontRenderContext;
<a id="L47" name="L47"></a>  47 
<div class="comment">
  The <code>LineBreakMeasurer</code> class allows styled text to be
  broken into lines (or segments) that fit within a particular visual
  advance.  This is useful for clients who wish to display a paragraph of
  text that fits within a specific width, called the <b>wrapping
  width</b>.
  <p>
  <code>LineBreakMeasurer</code> is constructed with an iterator over
  styled text.  The iterator's range should be a single paragraph in the
  text.
  <code>LineBreakMeasurer</code> maintains a position in the text for the
  start of the next text segment.  Initially, this position is the
  start of text.  Paragraphs are assigned an overall direction (either
  left-to-right or right-to-left) according to the bidirectional
  formatting rules.  All segments obtained from a paragraph have the
  same direction as the paragraph.
  </p><p>
  Segments of text are obtained by calling the method
  <code>nextLayout</code>, which returns a {@link TextLayout}
  representing the text that fits within the wrapping width.
  The <code>nextLayout</code> method moves the current position
  to the end of the layout returned from <code>nextLayout</code>.
  </p><p>
  <code>LineBreakMeasurer</code> implements the most commonly used
  line-breaking policy: Every word that fits within the wrapping
  width is placed on the line. If the first word does not fit, then all
  of the characters that fit within the wrapping width are placed on the
  line.  At least one character is placed on each line.
  </p><p>
  The <code>TextLayout</code> instances returned by
  <code>LineBreakMeasurer</code> treat tabs like 0-width spaces.  Clients
  who wish to obtain tab-delimited segments for positioning should use
  the overload of <code>nextLayout</code> which takes a limiting offset
  in the text.
  The limiting offset should be the first character after the tab.
  The <code>TextLayout</code> objects returned from this method end
  at the limit provided (or before, if the text between the current
  position and the limit won't fit entirely within the  wrapping
  width).
  </p><p>
  Clients who are laying out tab-delimited text need a slightly
  different line-breaking policy after the first segment has been
  placed on a line.  Instead of fitting partial words in the
  remaining space, they should place words which don't fit in the
  remaining space entirely on the next line.  This change of policy
  can be requested in the overload of <code>nextLayout</code> which
  takes a <code>boolean</code> parameter.  If this parameter is
  <code>true</code>, <code>nextLayout</code> returns
  <code>null</code> if the first word won't fit in
  the given space.  See the tab sample below.
  </p><p>
  In general, if the text used to construct the
  <code>LineBreakMeasurer</code> changes, a new
  <code>LineBreakMeasurer</code> must be constructed to reflect
  the change.  (The old <code>LineBreakMeasurer</code> continues to
  function properly, but it won't be aware of the text change.)
  Nevertheless, if the text change is the insertion or deletion of a
  single character, an existing <code>LineBreakMeasurer</code> can be
  'updated' by calling <code>insertChar</code> or
  <code>deleteChar</code>. Updating an existing
  <code>LineBreakMeasurer</code> is much faster than creating a new one.
  Clients who modify text based on user typing should take advantage
  of these methods.
  </p><p>
  <strong>Examples</strong>:</p><p>
  Rendering a paragraph in a component
  </p><blockquote>
  <pre>{@code
  public void paint(Graphics graphics) {
      Point2D pen = new Point2D(10, 20);
      Graphics2D g2d = (Graphics2D)graphics;
      FontRenderContext frc = g2d.getFontRenderContext();
      // let styledText be an AttributedCharacterIterator containing at least
      // one character
      LineBreakMeasurer measurer = new LineBreakMeasurer(styledText, frc);
      float wrappingWidth = getSize().width - 15;
      while (measurer.getPosition() &lt; fStyledText.length()) {
          TextLayout layout = measurer.nextLayout(wrappingWidth);
          pen.y += (layout.getAscent());
          float dx = layout.isLeftToRight() ?
              0 : (wrappingWidth - layout.getAdvance());
          layout.draw(graphics, pen.x + dx, pen.y);
          pen.y += layout.getDescent() + layout.getLeading();
      }
  }
  }</pre>
  </blockquote>
  <p>
  Rendering text with tabs.  For simplicity, the overall text
  direction is assumed to be left-to-right
  </p><blockquote>
  <pre>{@code
  public void paint(Graphics graphics) {
      float leftMargin = 10, rightMargin = 310;
      float[] tabStops = { 100, 250 };
      // assume styledText is an AttributedCharacterIterator, and the number
      // of tabs in styledText is tabCount
      int[] tabLocations = new int[tabCount+1];
      int i = 0;
      for (char c = styledText.first(); c != styledText.DONE; c = styledText.next()) {
          if (c == '\t') {
              tabLocations[i++] = styledText.getIndex();
          }
      }
      tabLocations[tabCount] = styledText.getEndIndex() - 1;
      // Now tabLocations has an entry for every tab's offset in
      // the text.  For convenience, the last entry is tabLocations
      // is the offset of the last character in the text.
      LineBreakMeasurer measurer = new LineBreakMeasurer(styledText);
      int currentTab = 0;
      float verticalPos = 20;
      while (measurer.getPosition() &lt; styledText.getEndIndex()) {
          // Lay out and draw each line.  All segments on a line
          // must be computed before any drawing can occur, since
          // we must know the largest ascent on the line.
          // TextLayouts are computed and stored in a Vector;
          // their horizontal positions are stored in a parallel
          // Vector.
          // lineContainsText is true after first segment is drawn
          boolean lineContainsText = false;
          boolean lineComplete = false;
          float maxAscent = 0, maxDescent = 0;
          float horizontalPos = leftMargin;
          Vector layouts = new Vector(1);
          Vector penPositions = new Vector(1);
          while (!lineComplete) {
              float wrappingWidth = rightMargin - horizontalPos;
              TextLayout layout =
                      measurer.nextLayout(wrappingWidth,
                                          tabLocations[currentTab]+1,
                                          lineContainsText);
              // layout can be null if lineContainsText is true
              if (layout != null) {
                  layouts.addElement(layout);
                  penPositions.addElement(new Float(horizontalPos));
                  horizontalPos += layout.getAdvance();
                  maxAscent = Math.max(maxAscent, layout.getAscent());
                  maxDescent = Math.max(maxDescent,
                      layout.getDescent() + layout.getLeading());
              } else {
                  lineComplete = true;
              }
              lineContainsText = true;
              if (measurer.getPosition() == tabLocations[currentTab]+1) {
                  currentTab++;
              }
              if (measurer.getPosition() == styledText.getEndIndex())
                  lineComplete = true;
              else if (horizontalPos &gt;= tabStops[tabStops.length-1])
                  lineComplete = true;
              if (!lineComplete) {
                  // move to next tab stop
                  int j;
                  for (j=0; horizontalPos &gt;= tabStops[j]; j++) {}
                  horizontalPos = tabStops[j];
              }
          }
          verticalPos += maxAscent;
          Enumeration layoutEnum = layouts.elements();
          Enumeration positionEnum = penPositions.elements();
          // now iterate through layouts and draw them
          while (layoutEnum.hasMoreElements()) {
              TextLayout nextLayout = (TextLayout) layoutEnum.nextElement();
              Float nextPosition = (Float) positionEnum.nextElement();
              nextLayout.draw(graphics, nextPosition.floatValue(), verticalPos);
          }
          verticalPos += maxDescent;
      }
  }
  }</pre>
  </blockquote>
  @see TextLayout</div>
<a id="L247" name="L247"></a> 247 
<a id="L248" name="L248"></a> 248 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4585.html" title="Multiple referred from 2 places.">LineBreakMeasurer</a> <em class="brace">{</em>
<a id="L249" name="L249"></a> 249 
<a id="L250" name="L250"></a> 250     <strong class="reserved">private</strong> <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a> breakIter;
<a id="L251" name="L251"></a> 251     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L252" name="L252"></a> 252     <strong class="reserved">private</strong> <strong class="reserved">int</strong> pos;
<a id="L253" name="L253"></a> 253     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>;
<a id="L254" name="L254"></a> 254     <strong class="reserved">private</strong> <a href="../S/2365.html#L98" title="Defined at 98 in src/java/awt/font/TextMeasurer.java.">TextMeasurer</a> measurer;
<a id="L255" name="L255"></a> 255     <strong class="reserved">private</strong> <a href="../S/2360.html#L30" title="Defined at 30 in src/java/awt/font/CharArrayIterator.java.">CharArrayIterator</a> charIter;
<a id="L256" name="L256"></a> 256 
<div class="comment">
      Constructs a <code>LineBreakMeasurer</code> for the specified text.
      @param text the text for which this <code>LineBreakMeasurer</code>
            produces <code>TextLayout</code> objects; the text must contain
            at least one character; if the text available through
            <code>iter</code> changes, further calls to this
            <code>LineBreakMeasurer</code> instance are undefined (except,
            in some cases, when <code>insertChar</code> or
            <code>deleteChar</code> are invoked afterward - see below)
      @param frc contains information about a graphics device which is
            needed to measure the text correctly;
            text measurements can vary slightly depending on the
            device resolution, and attributes such as antialiasing; this
            parameter does not specify a translation between the
            <code>LineBreakMeasurer</code> and user space
      @see LineBreakMeasurer#insertChar
      @see LineBreakMeasurer#deleteChar</div>
<a id="L276" name="L276"></a> 276     <strong class="reserved">public</strong> LineBreakMeasurer(<a href="../S/2454.html#L79" title="Defined at 79 in src/java/text/AttributedCharacterIterator.java.">AttributedCharacterIterator</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/2376.html#L66" title="Defined at 66 in src/java/awt/font/FontRenderContext.java.">FontRenderContext</a> frc) <em class="brace">{</em>
<a id="L277" name="L277"></a> 277         <strong class="reserved">this</strong>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a>.<a href="../D/20117.html" title="Multiple defined in 3 places.">getLineInstance</a>(), frc);
<a id="L278" name="L278"></a> 278     <em class="brace">}</em>
<a id="L279" name="L279"></a> 279 
<div class="comment">
      Constructs a <code>LineBreakMeasurer</code> for the specified text.
      @param text the text for which this <code>LineBreakMeasurer</code>
          produces <code>TextLayout</code> objects; the text must contain
          at least one character; if the text available through
          <code>iter</code> changes, further calls to this
          <code>LineBreakMeasurer</code> instance are undefined (except,
          in some cases, when <code>insertChar</code> or
          <code>deleteChar</code> are invoked afterward - see below)
      @param breakIter the {@link BreakIterator} which defines line
          breaks
      @param frc contains information about a graphics device which is
            needed to measure the text correctly;
            text measurements can vary slightly depending on the
            device resolution, and attributes such as antialiasing; this
            parameter does not specify a translation between the
            <code>LineBreakMeasurer</code> and user space
      @throws IllegalArgumentException if the text has less than one character
      @see LineBreakMeasurer#insertChar
      @see LineBreakMeasurer#deleteChar</div>
<a id="L302" name="L302"></a> 302     <strong class="reserved">public</strong> LineBreakMeasurer(<a href="../S/2454.html#L79" title="Defined at 79 in src/java/text/AttributedCharacterIterator.java.">AttributedCharacterIterator</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>,
<a id="L303" name="L303"></a> 303                              <a href="../S/2468.html#L228" title="Defined at 228 in src/java/text/BreakIterator.java.">BreakIterator</a> breakIter,
<a id="L304" name="L304"></a> 304                              <a href="../S/2376.html#L66" title="Defined at 66 in src/java/awt/font/FontRenderContext.java.">FontRenderContext</a> frc) <em class="brace">{</em>
<a id="L305" name="L305"></a> 305         <strong class="reserved">if</strong> (<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/18768.html" title="Multiple defined in 8 places.">getEndIndex</a>() - <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/17233.html" title="Multiple defined in 6 places.">getBeginIndex</a>() &lt; 1) <em class="brace">{</em>
<a id="L306" name="L306"></a> 306             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Text must contain at least one character.");
<a id="L307" name="L307"></a> 307         <em class="brace">}</em>
<a id="L308" name="L308"></a> 308 
<a id="L309" name="L309"></a> 309         <strong class="reserved">this</strong>.breakIter = breakIter;
<a id="L310" name="L310"></a> 310         <strong class="reserved">this</strong>.measurer = <strong class="reserved">new</strong> <a href="../S/2365.html#L98" title="Defined at 98 in src/java/awt/font/TextMeasurer.java.">TextMeasurer</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, frc);
<a id="L311" name="L311"></a> 311         <strong class="reserved">this</strong>.<a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/18768.html" title="Multiple defined in 8 places.">getEndIndex</a>();
<a id="L312" name="L312"></a> 312         <strong class="reserved">this</strong>.pos = <strong class="reserved">this</strong>.<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/17233.html" title="Multiple defined in 6 places.">getBeginIndex</a>();
<a id="L313" name="L313"></a> 313 
<a id="L314" name="L314"></a> 314         charIter = <strong class="reserved">new</strong> <a href="../S/2360.html#L30" title="Defined at 30 in src/java/awt/font/CharArrayIterator.java.">CharArrayIterator</a>(measurer.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(), <strong class="reserved">this</strong>.<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>);
<a id="L315" name="L315"></a> 315         <strong class="reserved">this</strong>.breakIter.<a href="../D/34097.html" title="Multiple defined in 21 places.">setText</a>(charIter);
<a id="L316" name="L316"></a> 316     <em class="brace">}</em>
<a id="L317" name="L317"></a> 317 
<div class="comment">
      Returns the position at the end of the next layout.  Does NOT
      update the current position of this <code>LineBreakMeasurer</code>.
      @param wrappingWidth the maximum visible advance permitted for
         the text in the next layout
      @return an offset in the text representing the limit of the
         next <code>TextLayout</code>.</div>
<a id="L327" name="L327"></a> 327     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23683.html" title="Multiple referred from 41 places.">nextOffset</a>(<strong class="reserved">float</strong> wrappingWidth) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328         <strong class="reserved">return</strong> <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a>(wrappingWidth, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>, <strong class="reserved">false</strong>);
<a id="L329" name="L329"></a> 329     <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<div class="comment">
      Returns the position at the end of the next layout.  Does NOT
      update the current position of this <code>LineBreakMeasurer</code>.
      @param wrappingWidth the maximum visible advance permitted for
         the text in the next layout
      @param offsetLimit the first character that can not be included
         in the next layout, even if the text after the limit would fit
         within the wrapping width; <code>offsetLimit</code> must be
         greater than the current position
      @param requireNextWord if <code>true</code>, the current position
         that is returned if the entire next word does not fit within
         <code>wrappingWidth</code>; if <code>false</code>, the offset
         returned is at least one greater than the current position
      @return an offset in the text representing the limit of the
         next <code>TextLayout</code></div>
<a id="L348" name="L348"></a> 348     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23683.html" title="Multiple referred from 41 places.">nextOffset</a>(<strong class="reserved">float</strong> wrappingWidth, <strong class="reserved">int</strong> offsetLimit,
<a id="L349" name="L349"></a> 349                           <strong class="reserved">boolean</strong> requireNextWord) <em class="brace">{</em>
<a id="L350" name="L350"></a> 350 
<a id="L351" name="L351"></a> 351         <strong class="reserved">int</strong> <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = pos;
<a id="L352" name="L352"></a> 352 
<a id="L353" name="L353"></a> 353         <strong class="reserved">if</strong> (pos &lt; <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L354" name="L354"></a> 354             <strong class="reserved">if</strong> (offsetLimit &lt;= pos) <em class="brace">{</em>
<a id="L355" name="L355"></a> 355                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("offsetLimit must be after current position");
<a id="L356" name="L356"></a> 356             <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358             <strong class="reserved">int</strong> charAtMaxAdvance =
<a id="L359" name="L359"></a> 359                             measurer.<a href="../S/2365.html#L556" title="Defined at 556 in src/java/awt/font/TextMeasurer.java.">getLineBreakIndex</a>(pos, wrappingWidth);
<a id="L360" name="L360"></a> 360 
<a id="L361" name="L361"></a> 361             <strong class="reserved">if</strong> (charAtMaxAdvance == <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L362" name="L362"></a> 362                 <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>;
<a id="L363" name="L363"></a> 363             <em class="brace">}</em>
<a id="L364" name="L364"></a> 364             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/26507.html" title="Multiple defined in 18 places.">isWhitespace</a>(measurer.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>()[charAtMaxAdvance-<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>])) <em class="brace">{</em>
<a id="L365" name="L365"></a> 365                 <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = breakIter.<a href="../D/16506.html" title="Multiple defined in 2 places.">following</a>(charAtMaxAdvance);
<a id="L366" name="L366"></a> 366             <em class="brace">}</em>
<a id="L367" name="L367"></a> 367             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L368" name="L368"></a> 368             <em class="comment">// Break is in a word;  back up to previous break.</em>
<a id="L369" name="L369"></a> 369 
<a id="L370" name="L370"></a> 370                 <em class="comment">// NOTE:  I think that breakIter.preceding(limit) should be</em>
<a id="L371" name="L371"></a> 371                 <em class="comment">// equivalent to breakIter.last(), breakIter.previous() but</em>
<a id="L372" name="L372"></a> 372                 <em class="comment">// the authors of BreakIterator thought otherwise...</em>
<a id="L373" name="L373"></a> 373                 <em class="comment">// If they were equivalent then the first branch would be</em>
<a id="L374" name="L374"></a> 374                 <em class="comment">// unnecessary.</em>
<a id="L375" name="L375"></a> 375                 <strong class="reserved">int</strong> testPos = charAtMaxAdvance + 1;
<a id="L376" name="L376"></a> 376                 <strong class="reserved">if</strong> (testPos == <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377                     breakIter.<a href="../D/26739.html" title="Multiple defined in 19 places.">last</a>();
<a id="L378" name="L378"></a> 378                     <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = breakIter.<a href="../D/29600.html" title="Multiple defined in 22 places.">previous</a>();
<a id="L379" name="L379"></a> 379                 <em class="brace">}</em>
<a id="L380" name="L380"></a> 380                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L381" name="L381"></a> 381                     <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = breakIter.<a href="../D/29531.html" title="Multiple defined in 2 places.">preceding</a>(testPos);
<a id="L382" name="L382"></a> 382                 <em class="brace">}</em>
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384                 <strong class="reserved">if</strong> (<a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> &lt;= pos) <em class="brace">{</em>
<a id="L385" name="L385"></a> 385                     <em class="comment">// first word doesn't fit on line</em>
<a id="L386" name="L386"></a> 386                     <strong class="reserved">if</strong> (requireNextWord) <em class="brace">{</em>
<a id="L387" name="L387"></a> 387                         <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = pos;
<a id="L388" name="L388"></a> 388                     <em class="brace">}</em>
<a id="L389" name="L389"></a> 389                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L390" name="L390"></a> 390                         <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(pos+1, charAtMaxAdvance);
<a id="L391" name="L391"></a> 391                     <em class="brace">}</em>
<a id="L392" name="L392"></a> 392                 <em class="brace">}</em>
<a id="L393" name="L393"></a> 393             <em class="brace">}</em>
<a id="L394" name="L394"></a> 394         <em class="brace">}</em>
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396         <strong class="reserved">if</strong> (<a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> &gt; offsetLimit) <em class="brace">{</em>
<a id="L397" name="L397"></a> 397             <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a> = offsetLimit;
<a id="L398" name="L398"></a> 398         <em class="brace">}</em>
<a id="L399" name="L399"></a> 399 
<a id="L400" name="L400"></a> 400         <strong class="reserved">return</strong> <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a>;
<a id="L401" name="L401"></a> 401     <em class="brace">}</em>
<a id="L402" name="L402"></a> 402 
<div class="comment">
      Returns the next layout, and updates the current position.
      @param wrappingWidth the maximum visible advance permitted for
          the text in the next layout
      @return a <code>TextLayout</code>, beginning at the current
          position, which represents the next line fitting within
          <code>wrappingWidth</code></div>
<a id="L412" name="L412"></a> 412     <strong class="reserved">public</strong> <a href="../S/2375.html#L239" title="Defined at 239 in src/java/awt/font/TextLayout.java.">TextLayout</a> <a href="../R/23673.html" title="Multiple referred from 3 places.">nextLayout</a>(<strong class="reserved">float</strong> wrappingWidth) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413         <strong class="reserved">return</strong> <a href="../D/28160.html" title="Multiple defined in 2 places.">nextLayout</a>(wrappingWidth, <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>, <strong class="reserved">false</strong>);
<a id="L414" name="L414"></a> 414     <em class="brace">}</em>
<a id="L415" name="L415"></a> 415 
<div class="comment">
      Returns the next layout, and updates the current position.
      @param wrappingWidth the maximum visible advance permitted
         for the text in the next layout
      @param offsetLimit the first character that can not be
         included in the next layout, even if the text after the limit
         would fit within the wrapping width; <code>offsetLimit</code>
         must be greater than the current position
      @param requireNextWord if <code>true</code>, and if the entire word
         at the current position does not fit within the wrapping width,
         <code>null</code> is returned. If <code>false</code>, a valid
         layout is returned that includes at least the character at the
         current position
      @return a <code>TextLayout</code>, beginning at the current
         position, that represents the next line fitting within
         <code>wrappingWidth</code>.  If the current position is at the end
         of the text used by this <code>LineBreakMeasurer</code>,
         <code>null</code> is returned</div>
<a id="L436" name="L436"></a> 436     <strong class="reserved">public</strong> <a href="../S/2375.html#L239" title="Defined at 239 in src/java/awt/font/TextLayout.java.">TextLayout</a> <a href="../R/23673.html" title="Multiple referred from 3 places.">nextLayout</a>(<strong class="reserved">float</strong> wrappingWidth, <strong class="reserved">int</strong> offsetLimit,
<a id="L437" name="L437"></a> 437                                  <strong class="reserved">boolean</strong> requireNextWord) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438 
<a id="L439" name="L439"></a> 439         <strong class="reserved">if</strong> (pos &lt; <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440             <strong class="reserved">int</strong> layoutLimit = <a href="../D/28171.html" title="Multiple defined in 2 places.">nextOffset</a>(wrappingWidth, offsetLimit, requireNextWord);
<a id="L441" name="L441"></a> 441             <strong class="reserved">if</strong> (layoutLimit == pos) <em class="brace">{</em>
<a id="L442" name="L442"></a> 442                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L443" name="L443"></a> 443             <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445             <a href="../S/2375.html#L239" title="Defined at 239 in src/java/awt/font/TextLayout.java.">TextLayout</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = measurer.<a href="../D/20030.html" title="Multiple defined in 2 places.">getLayout</a>(pos, layoutLimit);
<a id="L446" name="L446"></a> 446             pos = layoutLimit;
<a id="L447" name="L447"></a> 447 
<a id="L448" name="L448"></a> 448             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L449" name="L449"></a> 449         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L450" name="L450"></a> 450             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L451" name="L451"></a> 451         <em class="brace">}</em>
<a id="L452" name="L452"></a> 452     <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<div class="comment">
      Returns the current position of this <code>LineBreakMeasurer</code>.
      @return the current position of this <code>LineBreakMeasurer</code>
      @see #setPosition</div>
<a id="L460" name="L460"></a> 460     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18378.html" title="Multiple referred from 92 places.">getPosition</a>() <em class="brace">{</em>
<a id="L461" name="L461"></a> 461         <strong class="reserved">return</strong> pos;
<a id="L462" name="L462"></a> 462     <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 
<div class="comment">
      Sets the current position of this <code>LineBreakMeasurer</code>.
      @param newPosition the current position of this
         <code>LineBreakMeasurer</code>; the position should be within the
         text used to construct this <code>LineBreakMeasurer</code> (or in
         the text most recently passed to <code>insertChar</code>
         or <code>deleteChar</code>
      @see #getPosition</div>
<a id="L474" name="L474"></a> 474     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27941.html" title="Multiple referred from 10 places.">setPosition</a>(<strong class="reserved">int</strong> newPosition) <em class="brace">{</em>
<a id="L475" name="L475"></a> 475         <strong class="reserved">if</strong> (newPosition &lt; <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> || newPosition &gt; <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a>) <em class="brace">{</em>
<a id="L476" name="L476"></a> 476             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("position is out of range");
<a id="L477" name="L477"></a> 477         <em class="brace">}</em>
<a id="L478" name="L478"></a> 478         pos = newPosition;
<a id="L479" name="L479"></a> 479     <em class="brace">}</em>
<a id="L480" name="L480"></a> 480 
<div class="comment">
      Updates this <code>LineBreakMeasurer</code> after a single
      character is inserted into the text, and sets the current
      position to the beginning of the paragraph.
      @param newParagraph the text after the insertion
      @param insertPos the position in the text at which the character
         is inserted
      @throws IndexOutOfBoundsException if <code>insertPos</code> is less
              than the start of <code>newParagraph</code> or greater than
              or equal to the end of <code>newParagraph</code>
      @throws NullPointerException if <code>newParagraph</code> is
              <code>null</code>
      @see #deleteChar</div>
<a id="L496" name="L496"></a> 496     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20763.html" title="Multiple referred from 2 places.">insertChar</a>(<a href="../S/2454.html#L79" title="Defined at 79 in src/java/text/AttributedCharacterIterator.java.">AttributedCharacterIterator</a> newParagraph,
<a id="L497" name="L497"></a> 497                            <strong class="reserved">int</strong> insertPos) <em class="brace">{</em>
<a id="L498" name="L498"></a> 498 
<a id="L499" name="L499"></a> 499         measurer.<a href="../D/24738.html" title="Multiple defined in 3 places.">insertChar</a>(newParagraph, insertPos);
<a id="L500" name="L500"></a> 500 
<a id="L501" name="L501"></a> 501         <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = newParagraph.<a href="../D/18768.html" title="Multiple defined in 8 places.">getEndIndex</a>();
<a id="L502" name="L502"></a> 502         pos = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = newParagraph.<a href="../D/17233.html" title="Multiple defined in 6 places.">getBeginIndex</a>();
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504         charIter.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>(measurer.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(), newParagraph.<a href="../D/17233.html" title="Multiple defined in 6 places.">getBeginIndex</a>());
<a id="L505" name="L505"></a> 505         breakIter.<a href="../D/34097.html" title="Multiple defined in 21 places.">setText</a>(charIter);
<a id="L506" name="L506"></a> 506     <em class="brace">}</em>
<a id="L507" name="L507"></a> 507 
<div class="comment">
      Updates this <code>LineBreakMeasurer</code> after a single
      character is deleted from the text, and sets the current
      position to the beginning of the paragraph.
      @param newParagraph the text after the deletion
      @param deletePos the position in the text at which the character
         is deleted
      @throws IndexOutOfBoundsException if <code>deletePos</code> is
              less than the start of <code>newParagraph</code> or greater
              than the end of <code>newParagraph</code>
      @throws NullPointerException if <code>newParagraph</code> is
              <code>null</code>
      @see #insertChar</div>
<a id="L522" name="L522"></a> 522     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13206.html" title="Multiple referred from 2 places.">deleteChar</a>(<a href="../S/2454.html#L79" title="Defined at 79 in src/java/text/AttributedCharacterIterator.java.">AttributedCharacterIterator</a> newParagraph,
<a id="L523" name="L523"></a> 523                            <strong class="reserved">int</strong> deletePos) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524 
<a id="L525" name="L525"></a> 525         measurer.<a href="../D/14797.html" title="Multiple defined in 3 places.">deleteChar</a>(newParagraph, deletePos);
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527         <a href="../D/26840.html" title="Multiple defined in 12 places.">limit</a> = newParagraph.<a href="../D/18768.html" title="Multiple defined in 8 places.">getEndIndex</a>();
<a id="L528" name="L528"></a> 528         pos = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = newParagraph.<a href="../D/17233.html" title="Multiple defined in 6 places.">getBeginIndex</a>();
<a id="L529" name="L529"></a> 529 
<a id="L530" name="L530"></a> 530         charIter.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>(measurer.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(), <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>);
<a id="L531" name="L531"></a> 531         breakIter.<a href="../D/34097.html" title="Multiple defined in 21 places.">setText</a>(charIter);
<a id="L532" name="L532"></a> 532     <em class="brace">}</em>
<a id="L533" name="L533"></a> 533 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L327">[^]</a><a href="#L522">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L87">[^]</a><a href="#L878">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L87" title="Defined at 87.">setRestartable</a></li>
<li><a href="#L94" title="Defined at 94.">add</a></li>
<li><a href="#L119" title="Defined at 119.">merge</a></li>
<li><a href="#L140" title="Defined at 140.">lookupId</a></li>
<li><a href="#L173" title="Defined at 173.">getDOMNodeById</a></li>
<li><a href="#L209" title="Defined at 209.">lookupKey</a></li>
<li><a href="#L221" title="Defined at 221.">next</a></li>
<li><a href="#L240" title="Defined at 240.">containsID</a></li>
<li><a href="#L292" title="Defined at 292.">containsKey</a></li>
<li><a href="#L317" title="Defined at 317.">reset</a></li>
<li><a href="#L328" title="Defined at 328.">getLast</a></li>
<li><a href="#L338" title="Defined at 338.">getPosition</a></li>
<li><a href="#L348" title="Defined at 348.">setMark</a></li>
<li><a href="#L358" title="Defined at 358.">gotoMark</a></li>
<li><a href="#L369" title="Defined at 369.">setStartNode</a></li>
<li><a href="#L386" title="Defined at 386.">getStartNode</a></li>
<li><a href="#L396" title="Defined at 396.">isReverse</a></li>
<li><a href="#L406" title="Defined at 406.">cloneIterator</a></li>
<li><a href="#L415" title="Defined at 415.">setDom</a></li>
<li><a href="#L446" title="Defined at 446.">getKeyIndexIterator</a></li>
<li><a href="#L467" title="Defined at 467.">getKeyIndexIterator</a></li>
<li><a href="#L483" title="Defined at 483.">getKeyIndexIterator</a></li>
<li><a href="#L575" title="Defined at 575.">step</a></li>
<li><a href="#L592" title="Defined at 592.">cloneHeapNode</a></li>
<li><a href="#L607" title="Defined at 607.">setMark</a></li>
<li><a href="#L614" title="Defined at 614.">gotoMark</a></li>
<li><a href="#L626" title="Defined at 626.">isLessThan</a></li>
<li><a href="#L638" title="Defined at 638.">setStartNode</a></li>
<li><a href="#L645" title="Defined at 645.">reset</a></li>
<li><a href="#L688" title="Defined at 688.">lookupNodes</a></li>
<li><a href="#L742" title="Defined at 742.">setStartNode</a></li>
<li><a href="#L761" title="Defined at 761.">next</a></li>
<li><a href="#L788" title="Defined at 788.">reset</a></li>
<li><a href="#L804" title="Defined at 804.">init</a></li>
<li><a href="#L865" title="Defined at 865.">getLast</a></li>
<li><a href="#L878" title="Defined at 878.">getNodeByPosition</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001-2006 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: KeyIndex.java,v 1.6 2006/06/19 19:49:02 spericas Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.xsltc.dom;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.util.StringTokenizer;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.DOM;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.DOMEnhancedForDTM;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.runtime.BasisLibrary;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.runtime.Hashtable;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.util.IntegerArray;
<a id="L33" name="L33"></a>  33 
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.Axis;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMAxisIterator;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.ref.DTMAxisIteratorBase;
<a id="L38" name="L38"></a>  38 
<div class="comment">
  Stores mappings of key values or IDs to DTM nodes.
  <em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
  <b>deprecated.</b></em>
  @author Morten Jorgensen
  @author Santiago Pericas-Geertsen</div>
<a id="L46" name="L46"></a>  46 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/4362.html" title="Multiple referred from 16 places.">KeyIndex</a> <strong class="reserved">extends</strong> <a href="../S/5888.html#L31" title="Defined at 31 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMAxisIteratorBase.java.">DTMAxisIteratorBase</a> <em class="brace">{</em>
<a id="L47" name="L47"></a>  47 
<div class="comment">
      A mapping between values and nodesets for the current document.  Used
      only while building keys.</div>
<a id="L52" name="L52"></a>  52     <strong class="reserved">private</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _index;
<a id="L53" name="L53"></a>  53 
<div class="comment">
      The document node currently being processed.  Used only while building
      keys.</div>
<a id="L58" name="L58"></a>  58     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _currentDocumentNode = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L59" name="L59"></a>  59 
<div class="comment">
      A mapping from a document node to the mapping between values and nodesets</div>
<a id="L63" name="L63"></a>  63     <strong class="reserved">private</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _rootToIndexMap = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L64" name="L64"></a>  64 
<div class="comment">
      The node set associated to the current value passed
      to lookupKey();</div>
<a id="L69" name="L69"></a>  69     <strong class="reserved">private</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> _nodes = <strong class="reserved">null</strong>;
<a id="L70" name="L70"></a>  70 
<div class="comment">
      The XSLTC DOM object if this KeyIndex is being used to implement the
      id() function.</div>
<a id="L75" name="L75"></a>  75     <strong class="reserved">private</strong> <a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a>        _dom;
<a id="L76" name="L76"></a>  76 
<a id="L77" name="L77"></a>  77     <strong class="reserved">private</strong> <a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>    _enhancedDOM;
<a id="L78" name="L78"></a>  78 
<div class="comment">
      Store position after call to setMark()</div>
<a id="L82" name="L82"></a>  82     <strong class="reserved">private</strong> <strong class="reserved">int</strong> _markedPosition = 0;
<a id="L83" name="L83"></a>  83 
<a id="L84" name="L84"></a>  84     <strong class="reserved">public</strong> KeyIndex(<strong class="reserved">int</strong> dummy) <em class="brace">{</em>
<a id="L85" name="L85"></a>  85     <em class="brace">}</em>
<a id="L86" name="L86"></a>  86 
<a id="L87" name="L87"></a>  87     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28042.html" title="Multiple referred from 16 places.">setRestartable</a>(<strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L88" name="L88"></a>  88     <em class="brace">}</em>
<a id="L89" name="L89"></a>  89 
<div class="comment">
      Adds a node to the node list for a given value. Nodes will
      always be added in document order.</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>) <em class="brace">{</em>
<a id="L95" name="L95"></a>  95         <strong class="reserved">if</strong> (_currentDocumentNode != <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>) <em class="brace">{</em>
<a id="L96" name="L96"></a>  96             _currentDocumentNode = <a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>;
<a id="L97" name="L97"></a>  97             _index = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L98" name="L98"></a>  98             _rootToIndexMap.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../S/6357.html#L63" title="Defined at 63 in src/com/sun/jmx/snmp/IPAcl/JJTParserState.java.">rootNode</a>), _index);
<a id="L99" name="L99"></a>  99         <em class="brace">}</em>
<a id="L100" name="L100"></a> 100 
<a id="L101" name="L101"></a> 101         <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) _index.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L102" name="L102"></a> 102 
<a id="L103" name="L103"></a> 103         <strong class="reserved">if</strong> (nodes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L104" name="L104"></a> 104              nodes = <strong class="reserved">new</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>();
<a id="L105" name="L105"></a> 105             _index.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, nodes);
<a id="L106" name="L106"></a> 106             nodes.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L107" name="L107"></a> 107 
<a id="L108" name="L108"></a> 108         <em class="comment">// Because nodes are added in document order,</em>
<a id="L109" name="L109"></a> 109         <em class="comment">// duplicates can be eliminated easily at this stage.</em>
<a id="L110" name="L110"></a> 110         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> != nodes.<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>(nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>() - 1)) <em class="brace">{</em>
<a id="L111" name="L111"></a> 111             nodes.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L112" name="L112"></a> 112         <em class="brace">}</em>
<a id="L113" name="L113"></a> 113     <em class="brace">}</em>
<a id="L114" name="L114"></a> 114 
<div class="comment">
      Merge the current value's nodeset set by lookupKey() with _nodes.
      @deprecated</div>
<a id="L119" name="L119"></a> 119     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23225.html" title="Multiple referred from 21 places.">merge</a>(<a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> other) <em class="brace">{</em>
<a id="L120" name="L120"></a> 120         <strong class="reserved">if</strong> (other == <strong class="reserved">null</strong>) <strong class="reserved">return</strong>;
<a id="L121" name="L121"></a> 121 
<a id="L122" name="L122"></a> 122         <strong class="reserved">if</strong> (other._nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L123" name="L123"></a> 123             <strong class="reserved">if</strong> (_nodes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L124" name="L124"></a> 124                 _nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>)other._nodes.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L125" name="L125"></a> 125             <em class="brace">}</em>
<a id="L126" name="L126"></a> 126             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L127" name="L127"></a> 127                 _nodes.<a href="../D/27630.html" title="Multiple defined in 17 places.">merge</a>(other._nodes);
<a id="L128" name="L128"></a> 128             <em class="brace">}</em>
<a id="L129" name="L129"></a> 129         <em class="brace">}</em>
<a id="L130" name="L130"></a> 130     <em class="brace">}</em>
<a id="L131" name="L131"></a> 131 
<div class="comment">
      This method must be called by the code generated by the id() function
      prior to returning the node iterator. The lookup code for key() and
      id() differ in the way the lookup value can be whitespace separated
      list of tokens for the id() function, but a single string for the
      key() function.
      @deprecated</div>
<a id="L140" name="L140"></a> 140     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/22746.html" title="Multiple referred from 2 places.">lookupId</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L141" name="L141"></a> 141         <em class="comment">// Clear _nodes array</em>
<a id="L142" name="L142"></a> 142         _nodes = <strong class="reserved">null</strong>;
<a id="L143" name="L143"></a> 143 
<a id="L144" name="L144"></a> 144         <strong class="reserved">final</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a> = <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>((<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>,
<a id="L145" name="L145"></a> 145                                                            " \n\t");
<a id="L146" name="L146"></a> 146         <strong class="reserved">while</strong> (<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L147" name="L147"></a> 147             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> token = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L148" name="L148"></a> 148             <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) _index.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(token);
<a id="L149" name="L149"></a> 149 
<a id="L150" name="L150"></a> 150             <strong class="reserved">if</strong> (nodes == <strong class="reserved">null</strong> &amp;&amp; _enhancedDOM != <strong class="reserved">null</strong>
<a id="L151" name="L151"></a> 151                 &amp;&amp; _enhancedDOM.<a href="../D/24084.html" title="Multiple defined in 2 places.">hasDOMSource</a>()) <em class="brace">{</em>
<a id="L152" name="L152"></a> 152                 nodes = <a href="../S/6034.html#L173" title="Defined at 173 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">getDOMNodeById</a>(token);
<a id="L153" name="L153"></a> 153             <em class="brace">}</em>
<a id="L154" name="L154"></a> 154 
<a id="L155" name="L155"></a> 155             <strong class="reserved">if</strong> (nodes == <strong class="reserved">null</strong>) <strong class="reserved">continue</strong>;
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157             <strong class="reserved">if</strong> (_nodes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L158" name="L158"></a> 158                  nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>)nodes.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L159" name="L159"></a> 159                 _nodes = nodes;
<a id="L160" name="L160"></a> 160             <em class="brace">}</em>
<a id="L161" name="L161"></a> 161             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L162" name="L162"></a> 162                 _nodes.<a href="../D/27630.html" title="Multiple defined in 17 places.">merge</a>(nodes);
<a id="L163" name="L163"></a> 163             <em class="brace">}</em>
<a id="L164" name="L164"></a> 164         <em class="brace">}</em>
<a id="L165" name="L165"></a> 165     <em class="brace">}</em>
<a id="L166" name="L166"></a> 166 
<div class="comment">
      Return an IntegerArray for the DOM Node which has the given id.
      @param id The id
      @return A IntegerArray representing the Node whose id is the given value.</div>
<a id="L173" name="L173"></a> 173     <strong class="reserved">public</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> <a href="../R/15924.html" title="Multiple referred from 3 places.">getDOMNodeById</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L174" name="L174"></a> 174         <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = <strong class="reserved">null</strong>;
<a id="L175" name="L175"></a> 175 
<a id="L176" name="L176"></a> 176         <strong class="reserved">if</strong> (_enhancedDOM != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L177" name="L177"></a> 177             <strong class="reserved">int</strong> ident = _enhancedDOM.<a href="../D/18671.html" title="Multiple defined in 16 places.">getElementById</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L178" name="L178"></a> 178 
<a id="L179" name="L179"></a> 179             <strong class="reserved">if</strong> (ident != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="brace">{</em>
<a id="L180" name="L180"></a> 180                 <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a> = <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(_enhancedDOM.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>());
<a id="L181" name="L181"></a> 181                 <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>) _rootToIndexMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>);
<a id="L182" name="L182"></a> 182 
<a id="L183" name="L183"></a> 183                 <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L184" name="L184"></a> 184                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L185" name="L185"></a> 185                     _rootToIndexMap.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L186" name="L186"></a> 186                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L187" name="L187"></a> 187                     nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L188" name="L188"></a> 188                 <em class="brace">}</em>
<a id="L189" name="L189"></a> 189 
<a id="L190" name="L190"></a> 190                 <strong class="reserved">if</strong> (nodes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L191" name="L191"></a> 191                     nodes = <strong class="reserved">new</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>();
<a id="L192" name="L192"></a> 192                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, nodes);
<a id="L193" name="L193"></a> 193                 <em class="brace">}</em>
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195                 nodes.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(_enhancedDOM.<a href="../D/20978.html" title="Multiple defined in 6 places.">getNodeHandle</a>(ident));
<a id="L196" name="L196"></a> 196             <em class="brace">}</em>
<a id="L197" name="L197"></a> 197         <em class="brace">}</em>
<a id="L198" name="L198"></a> 198 
<a id="L199" name="L199"></a> 199         <strong class="reserved">return</strong> nodes;
<a id="L200" name="L200"></a> 200     <em class="brace">}</em>
<a id="L201" name="L201"></a> 201 
<div class="comment">
      <p>This method must be called by the code generated by the key() function
      prior to returning the node iterator.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L209" name="L209"></a> 209     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/22751.html" title="Multiple referred from 2 places.">lookupKey</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210         <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) _index.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L211" name="L211"></a> 211         _nodes = (nodes != <strong class="reserved">null</strong>) ? (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) nodes.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>() : <strong class="reserved">null</strong>;
<a id="L212" name="L212"></a> 212         _position = 0;
<a id="L213" name="L213"></a> 213     <em class="brace">}</em>
<a id="L214" name="L214"></a> 214 
<div class="comment">
      <p>Callers should not call next() after it returns END.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L221" name="L221"></a> 221     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L222" name="L222"></a> 222         <strong class="reserved">if</strong> (_nodes == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END;
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224         <strong class="reserved">return</strong> (_position &lt; _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>()) ?
<a id="L225" name="L225"></a> 225             _dom.<a href="../D/20978.html" title="Multiple defined in 6 places.">getNodeHandle</a>(_nodes.<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>(_position++)) : <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END;
<a id="L226" name="L226"></a> 226     <em class="brace">}</em>
<a id="L227" name="L227"></a> 227 
<div class="comment">
      Given a context node and the argument to the XPath <code>id</code>
      function, checks whether the context node is in the set of nodes that
      results from that reference to the <code>id</code> function.  This is
      used in the implementation of <code>id</code> patterns.
      @param node The context node
      @param value The argument to the <code>id</code> function
      @return <code>1</code> if the context node is in the set of nodes
              returned by the reference to the <code>id</code> function;
              <code>0</code>, otherwise</div>
<a id="L240" name="L240"></a> 240     <strong class="reserved">public</strong> <strong class="reserved">int</strong> containsID(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L242" name="L242"></a> 242         <strong class="reserved">int</strong> rootHandle = _dom.<a href="../D/17164.html" title="Multiple defined in 9 places.">getAxisIterator</a>(<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.ROOT)
<a id="L243" name="L243"></a> 243                                  .<a href="../D/34000.html" title="Multiple defined in 66 places.">setStartNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>).<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L244" name="L244"></a> 244 
<a id="L245" name="L245"></a> 245         <em class="comment">// Get the mapping table for the document containing the context node</em>
<a id="L246" name="L246"></a> 246         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> =
<a id="L247" name="L247"></a> 247             (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>) _rootToIndexMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(rootHandle));
<a id="L248" name="L248"></a> 248 
<a id="L249" name="L249"></a> 249         <em class="comment">// Split argument to id function into XML whitespace separated tokens</em>
<a id="L250" name="L250"></a> 250         <strong class="reserved">final</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a> = <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>, " \n\t");
<a id="L251" name="L251"></a> 251 
<a id="L252" name="L252"></a> 252         <strong class="reserved">while</strong> (<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253             <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> token = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L254" name="L254"></a> 254             <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = <strong class="reserved">null</strong>;
<a id="L255" name="L255"></a> 255 
<a id="L256" name="L256"></a> 256             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L257" name="L257"></a> 257                 nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(token);
<a id="L258" name="L258"></a> 258             <em class="brace">}</em>
<a id="L259" name="L259"></a> 259 
<a id="L260" name="L260"></a> 260             <em class="comment">// If input was from W3C DOM, use DOM's getElementById to do</em>
<a id="L261" name="L261"></a> 261             <em class="comment">// the look-up.</em>
<a id="L262" name="L262"></a> 262             <strong class="reserved">if</strong> (nodes == <strong class="reserved">null</strong> &amp;&amp; _enhancedDOM != <strong class="reserved">null</strong>
<a id="L263" name="L263"></a> 263                 &amp;&amp; _enhancedDOM.<a href="../D/24084.html" title="Multiple defined in 2 places.">hasDOMSource</a>()) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264                 nodes = <a href="../S/6034.html#L173" title="Defined at 173 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">getDOMNodeById</a>(token);
<a id="L265" name="L265"></a> 265             <em class="brace">}</em>
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267             <em class="comment">// Did we find the context node in the set of nodes?</em>
<a id="L268" name="L268"></a> 268             <strong class="reserved">if</strong> (nodes != <strong class="reserved">null</strong> &amp;&amp; nodes.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &gt;= 0) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269                 <strong class="reserved">return</strong> 1;
<a id="L270" name="L270"></a> 270             <em class="brace">}</em>
<a id="L271" name="L271"></a> 271         <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273         <em class="comment">// Didn't find the context node in the set of nodes returned by id</em>
<a id="L274" name="L274"></a> 274         <strong class="reserved">return</strong> 0;
<a id="L275" name="L275"></a> 275     <em class="brace">}</em>
<a id="L276" name="L276"></a> 276 
<div class="comment">
      <p>Given a context node and the second argument to the XSLT
      <code>key</code> function, checks whether the context node is in the
      set of nodes that results from that reference to the <code>key</code>
      function.  This is used in the implementation of key patterns.</p>
      <p>This particular <a href="../R/4362.html" title="Multiple referred from 16 places.">KeyIndex</a> object is the result evaluating the
      first argument to the <code>key</code> function, so it's not taken into
      any further account.</p>
      @param node The context node
      @param value The second argument to the <code>key</code> function
      @return <code>1</code> if and only if the context node is in the set of
              nodes returned by the reference to the <code>key</code> function;
              <code>0</code>, otherwise</div>
<a id="L292" name="L292"></a> 292     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/11964.html" title="Multiple referred from 263 places.">containsKey</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L293" name="L293"></a> 293         <strong class="reserved">int</strong> rootHandle = _dom.<a href="../D/17164.html" title="Multiple defined in 9 places.">getAxisIterator</a>(<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.ROOT)
<a id="L294" name="L294"></a> 294                                  .<a href="../D/34000.html" title="Multiple defined in 66 places.">setStartNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>).<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296         <em class="comment">// Get the mapping table for the document containing the context node</em>
<a id="L297" name="L297"></a> 297         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> =
<a id="L298" name="L298"></a> 298                     (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>) _rootToIndexMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(rootHandle));
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300         <em class="comment">// Check whether the context node is present in the set of nodes</em>
<a id="L301" name="L301"></a> 301         <em class="comment">// returned by the key function</em>
<a id="L302" name="L302"></a> 302         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L303" name="L303"></a> 303             <strong class="reserved">final</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L304" name="L304"></a> 304             <strong class="reserved">return</strong> (nodes != <strong class="reserved">null</strong> &amp;&amp; nodes.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) &gt;= 0) ? 1 : 0;
<a id="L305" name="L305"></a> 305         <em class="brace">}</em>
<a id="L306" name="L306"></a> 306 
<a id="L307" name="L307"></a> 307         <em class="comment">// The particular key name identifies no nodes in this document</em>
<a id="L308" name="L308"></a> 308         <strong class="reserved">return</strong> 0;
<a id="L309" name="L309"></a> 309     <em class="brace">}</em>
<a id="L310" name="L310"></a> 310 
<div class="comment">
      <p>Resets the iterator to the last start node.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L317" name="L317"></a> 317     <strong class="reserved">public</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <em class="brace">{</em>
<a id="L318" name="L318"></a> 318         _position = 0;
<a id="L319" name="L319"></a> 319         <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321 
<div class="comment">
      <p>Returns the number of elements in this iterator.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L328" name="L328"></a> 328     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17269.html" title="Multiple referred from 11 places.">getLast</a>() <em class="brace">{</em>
<a id="L329" name="L329"></a> 329         <strong class="reserved">return</strong> (_nodes == <strong class="reserved">null</strong>) ? 0 : _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>();
<a id="L330" name="L330"></a> 330     <em class="brace">}</em>
<a id="L331" name="L331"></a> 331 
<div class="comment">
      <p>Returns the position of the current node in the set.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L338" name="L338"></a> 338     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18378.html" title="Multiple referred from 92 places.">getPosition</a>() <em class="brace">{</em>
<a id="L339" name="L339"></a> 339         <strong class="reserved">return</strong> _position;
<a id="L340" name="L340"></a> 340     <em class="brace">}</em>
<a id="L341" name="L341"></a> 341 
<div class="comment">
      <p>Remembers the current node for the next call to gotoMark().</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L348" name="L348"></a> 348     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27715.html" title="Multiple referred from 22 places.">setMark</a>() <em class="brace">{</em>
<a id="L349" name="L349"></a> 349         _markedPosition = _position;
<a id="L350" name="L350"></a> 350     <em class="brace">}</em>
<a id="L351" name="L351"></a> 351 
<div class="comment">
      <p>Restores the current node remembered by setMark().</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L358" name="L358"></a> 358     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20027.html" title="Multiple referred from 21 places.">gotoMark</a>() <em class="brace">{</em>
<a id="L359" name="L359"></a> 359         _position = _markedPosition;
<a id="L360" name="L360"></a> 360     <em class="brace">}</em>
<a id="L361" name="L361"></a> 361 
<div class="comment">
      <p>Set start to END should 'close' the iterator,
      i.e. subsequent call to next() should return END.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L369" name="L369"></a> 369     <strong class="reserved">public</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../R/28221.html" title="Multiple referred from 52 places.">setStartNode</a>(<strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370         <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> == <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371             _nodes = <strong class="reserved">null</strong>;
<a id="L372" name="L372"></a> 372         <em class="brace">}</em>
<a id="L373" name="L373"></a> 373         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (_nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374             _position = 0;
<a id="L375" name="L375"></a> 375         <em class="brace">}</em>
<a id="L376" name="L376"></a> 376         <strong class="reserved">return</strong> (<a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>) <strong class="reserved">this</strong>;
<a id="L377" name="L377"></a> 377     <em class="brace">}</em>
<a id="L378" name="L378"></a> 378 
<div class="comment">
      <p>Get start to END should 'close' the iterator,
      i.e. subsequent call to next() should return END.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L386" name="L386"></a> 386     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/4907.html#L128" title="Referred from 128 in src/com/sun/org/apache/xpath/internal/objects/XObjectFactory.java.">getStartNode</a>() <em class="brace">{</em>
<a id="L387" name="L387"></a> 387         <strong class="reserved">return</strong> 0;
<a id="L388" name="L388"></a> 388     <em class="brace">}</em>
<a id="L389" name="L389"></a> 389 
<div class="comment">
      <p>True if this iterator has a reversed axis.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L396" name="L396"></a> 396     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21968.html" title="Multiple referred from 12 places.">isReverse</a>() <em class="brace">{</em>
<a id="L397" name="L397"></a> 397         <strong class="reserved">return</strong>(<strong class="reserved">false</strong>);
<a id="L398" name="L398"></a> 398     <em class="brace">}</em>
<a id="L399" name="L399"></a> 399 
<div class="comment">
      <p>Returns a deep copy of this iterator.</p>
      <p><em>Use of an instance of this class as a <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> is
      <b>deprecated.</b></em></p>
      @deprecated</div>
<a id="L406" name="L406"></a> 406     <strong class="reserved">public</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../R/11571.html" title="Multiple referred from 19 places.">cloneIterator</a>() <em class="brace">{</em>
<a id="L407" name="L407"></a> 407         <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> other = <strong class="reserved">new</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>(0);
<a id="L408" name="L408"></a> 408         other._index = _index;
<a id="L409" name="L409"></a> 409         other._rootToIndexMap = _rootToIndexMap;
<a id="L410" name="L410"></a> 410         other._nodes = _nodes;
<a id="L411" name="L411"></a> 411         other._position = _position;
<a id="L412" name="L412"></a> 412         <strong class="reserved">return</strong> (<a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>) other;
<a id="L413" name="L413"></a> 413     <em class="brace">}</em>
<a id="L414" name="L414"></a> 414 
<a id="L415" name="L415"></a> 415     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27273.html" title="Multiple referred from 2 places.">setDom</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> dom, <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416         _dom = dom;
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418         <em class="comment">// If a MultiDOM, ensure _enhancedDOM is correctly set</em>
<a id="L419" name="L419"></a> 419         <em class="comment">// so that getElementById() works in lookupNodes below</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">if</strong> (dom <strong class="reserved">instanceof</strong> <a href="../S/6050.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiDOM.java.">MultiDOM</a>) <em class="brace">{</em>
<a id="L421" name="L421"></a> 421             dom = ((<a href="../S/6050.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiDOM.java.">MultiDOM</a>) dom).<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L422" name="L422"></a> 422         <em class="brace">}</em>
<a id="L423" name="L423"></a> 423 
<a id="L424" name="L424"></a> 424         <strong class="reserved">if</strong> (dom <strong class="reserved">instanceof</strong> <a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>) <em class="brace">{</em>
<a id="L425" name="L425"></a> 425             _enhancedDOM = (<a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>)dom;
<a id="L426" name="L426"></a> 426         <em class="brace">}</em>
<a id="L427" name="L427"></a> 427         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (dom <strong class="reserved">instanceof</strong> <a href="../S/6029.html#L42" title="Defined at 42 in src/com/sun/org/apache/xalan/internal/xsltc/dom/DOMAdapter.java.">DOMAdapter</a>) <em class="brace">{</em>
<a id="L428" name="L428"></a> 428             <a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> idom = ((<a href="../S/6029.html#L42" title="Defined at 42 in src/com/sun/org/apache/xalan/internal/xsltc/dom/DOMAdapter.java.">DOMAdapter</a>)dom).<a href="../S/6029.html#L104" title="Defined at 104 in src/com/sun/org/apache/xalan/internal/xsltc/dom/DOMAdapter.java.">getDOMImpl</a>();
<a id="L429" name="L429"></a> 429             <strong class="reserved">if</strong> (idom <strong class="reserved">instanceof</strong> <a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430                 _enhancedDOM = (<a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>)idom;
<a id="L431" name="L431"></a> 431             <em class="brace">}</em>
<a id="L432" name="L432"></a> 432         <em class="brace">}</em>
<a id="L433" name="L433"></a> 433     <em class="brace">}</em>
<a id="L434" name="L434"></a> 434 
<div class="comment">
      Create a <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a> that iterates over the nodes that
      result from a reference to the XSLT <code>key</code> function or
      XPath <code>id</code> function.
      @param keyValue A string or iterator representing the key values or id
                      references
      @param isKeyCall A <code>boolean</code> indicating whether the iterator
                      is being created for a reference <code>key</code> or
                      <code>id</code></div>
<a id="L446" name="L446"></a> 446     <strong class="reserved">public</strong> <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a> <a href="../R/17232.html" title="Multiple referred from 2 places.">getKeyIndexIterator</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> keyValue,
<a id="L447" name="L447"></a> 447                                                 <strong class="reserved">boolean</strong> isKeyCall) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448         <strong class="reserved">if</strong> (keyValue <strong class="reserved">instanceof</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>) <em class="brace">{</em>
<a id="L449" name="L449"></a> 449             <strong class="reserved">return</strong> <a href="../D/19932.html" title="Multiple defined in 3 places.">getKeyIndexIterator</a>((<a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>) keyValue, isKeyCall);
<a id="L450" name="L450"></a> 450         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L451" name="L451"></a> 451             <strong class="reserved">return</strong> <a href="../D/19932.html" title="Multiple defined in 3 places.">getKeyIndexIterator</a>(<a href="../S/5978.html#L65" title="Defined at 65 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">BasisLibrary</a>.<a href="../D/34932.html" title="Multiple defined in 3 places.">stringF</a>(keyValue, _dom),
<a id="L452" name="L452"></a> 452                                        isKeyCall);
<a id="L453" name="L453"></a> 453         <em class="brace">}</em>
<a id="L454" name="L454"></a> 454     <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<div class="comment">
      Create a <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a> that iterates over the nodes that
      result from a reference to the XSLT <code>key</code> function or
      XPath <code>id</code> function.
      @param keyValue A string representing the key values or id
                      references
      @param isKeyCall A <code>boolean</code> indicating whether the iterator
                      is being created for a reference <code>key</code> or
                      <code>id</code></div>
<a id="L467" name="L467"></a> 467     <strong class="reserved">public</strong> <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a> <a href="../R/17232.html" title="Multiple referred from 2 places.">getKeyIndexIterator</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keyValue,
<a id="L468" name="L468"></a> 468                                                 <strong class="reserved">boolean</strong> isKeyCall) <em class="brace">{</em>
<a id="L469" name="L469"></a> 469         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a>(keyValue, isKeyCall);
<a id="L470" name="L470"></a> 470     <em class="brace">}</em>
<a id="L471" name="L471"></a> 471 
<div class="comment">
      Create a <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a> that iterates over the nodes that
      result from a reference to the XSLT <code>key</code> function or
      XPath <code>id</code> function.
      @param keyValue An iterator representing the key values or id
                      references
      @param isKeyCall A <code>boolean</code> indicating whether the iterator
                      is being created for a reference <code>key</code> or
                      <code>id</code></div>
<a id="L483" name="L483"></a> 483     <strong class="reserved">public</strong> <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a> <a href="../R/17232.html" title="Multiple referred from 2 places.">getKeyIndexIterator</a>(<a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> keyValue,
<a id="L484" name="L484"></a> 484                                                 <strong class="reserved">boolean</strong> isKeyCall) <em class="brace">{</em>
<a id="L485" name="L485"></a> 485         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/6034.html#L498" title="Defined at 498 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexIterator</a>(keyValue, isKeyCall);
<a id="L486" name="L486"></a> 486     <em class="brace">}</em>
<a id="L487" name="L487"></a> 487 
<div class="comment">
      Used to represent an empty node set.</div>
<a id="L491" name="L491"></a> 491     <strong class="reserved">final</strong> <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> EMPTY_NODES = <strong class="reserved">new</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>(0);
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493 
<div class="comment">
      An iterator representing the result of a reference to either the
      XSLT <code>key</code> function or the XPath <code>id</code> function.</div>
<a id="L498" name="L498"></a> 498     <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/4364.html" title="Multiple referred from 5 places.">KeyIndexIterator</a> <strong class="reserved">extends</strong> <a href="../S/6047.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">MultiValuedNodeHeapIterator</a> <em class="brace">{</em>
<a id="L499" name="L499"></a> 499 
<div class="comment">
          <p>A reference to the <code>key</code> function that only has one
          key value or to the <code>id</code> function that has only one string
          argument can be optimized to ignore the multi-valued heap.  This
          field will be <code>null</code> otherwise.</p></div>
<a id="L506" name="L506"></a> 506         <strong class="reserved">private</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> _nodes;
<a id="L507" name="L507"></a> 507 
<div class="comment">
          <p>This field contains the iterator representing a node set key value
          argument to the <code>key</code> function or a node set argument
          to the <code>id</code> function.</p>
          <p>Exactly one of this field and {@link #_keyValue} must be
          <code>null</code>.</p></div>
<a id="L516" name="L516"></a> 516         <strong class="reserved">private</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> _keyValueIterator;
<a id="L517" name="L517"></a> 517 
<div class="comment">
          <p>This field contains the iterator representing a non-node-set key
          value argument to the <code>key</code> function or a non-node-set
          argument to the <code>id</code> function.</p>
          <p>Exactly one of this field and {@link #_keyValueIterator} must be
          <code>null</code>.</p></div>
<a id="L526" name="L526"></a> 526         <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _keyValue;
<a id="L527" name="L527"></a> 527 
<div class="comment">
          Indicates whether this object represents the result of a reference
          to the <code>key</code> function (<code>true</code>) or the
          <code>id</code> function (<code>false</code>).</div>
<a id="L533" name="L533"></a> 533         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _isKeyIterator;
<a id="L534" name="L534"></a> 534 
<div class="comment">
          Represents the DTM nodes retrieved for one key value or one string
          argument to <code>id</code> for use as one heap node in a
          <a href="../S/6047.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">MultiValuedNodeHeapIterator</a>.</div>
<a id="L540" name="L540"></a> 540         <strong class="reserved">protected</strong> <strong class="reserved">class</strong> <a href="../R/4363.html" title="Multiple referred from 4 places.">KeyIndexHeapNode</a>
<a id="L541" name="L541"></a> 541                 <strong class="reserved">extends</strong> <a href="../S/6047.html#L48" title="Defined at 48 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">MultiValuedNodeHeapIterator</a>.<a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a>
<a id="L542" name="L542"></a> 542         <em class="brace">{</em>
<div class="comment">
              <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> of DTM nodes retrieved for one key value.
              Must contain no duplicates and be stored in document order.</div>
<a id="L547" name="L547"></a> 547             <strong class="reserved">private</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> _nodes;
<a id="L548" name="L548"></a> 548 
<div class="comment">
              Position in {@link #_nodes} array of next node to return from
              this heap node.</div>
<a id="L553" name="L553"></a> 553             <strong class="reserved">private</strong> <strong class="reserved">int</strong> _position = 0;
<a id="L554" name="L554"></a> 554 
<div class="comment">
              Marked position.  Used by {@link #setMark()} and
              {@link #gotoMark()}</div>
<a id="L559" name="L559"></a> 559             <strong class="reserved">private</strong> <strong class="reserved">int</strong> _markPosition = -1;
<a id="L560" name="L560"></a> 560 
<div class="comment">
              Create a heap node representing DTM nodes retrieved for one
              key value in a reference to the <code>key</code> function
              or string argument to the <code>id</code> function.</div>
<a id="L566" name="L566"></a> 566             KeyIndexHeapNode(<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes) <em class="brace">{</em>
<a id="L567" name="L567"></a> 567                 _nodes = nodes;
<a id="L568" name="L568"></a> 568             <em class="brace">}</em>
<a id="L569" name="L569"></a> 569 
<div class="comment">
              Advance to the next node represented by this <a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a>
              @return the next DTM node.</div>
<a id="L575" name="L575"></a> 575             <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/28897.html" title="Multiple referred from 93 places.">step</a>() <em class="brace">{</em>
<a id="L576" name="L576"></a> 576                 <strong class="reserved">if</strong> (_position &lt; _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>()) <em class="brace">{</em>
<a id="L577" name="L577"></a> 577                     _node = _nodes.<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>(_position);
<a id="L578" name="L578"></a> 578                     _position++;
<a id="L579" name="L579"></a> 579                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L580" name="L580"></a> 580                     _node = <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END;
<a id="L581" name="L581"></a> 581                 <em class="brace">}</em>
<a id="L582" name="L582"></a> 582 
<a id="L583" name="L583"></a> 583                 <strong class="reserved">return</strong> _node;
<a id="L584" name="L584"></a> 584             <em class="brace">}</em>
<a id="L585" name="L585"></a> 585 
<div class="comment">
              Creates a deep copy of this <a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a>.  The clone is not
              reset from the current position of the original.
              @return the cloned heap node</div>
<a id="L592" name="L592"></a> 592             <strong class="reserved">public</strong> <a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a> <a href="../R/11568.html" title="Multiple referred from 3 places.">cloneHeapNode</a>() <em class="brace">{</em>
<a id="L593" name="L593"></a> 593                 <a href="../S/6034.html#L540" title="Defined at 540 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexHeapNode</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> =
<a id="L594" name="L594"></a> 594                         (<a href="../S/6034.html#L540" title="Defined at 540 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexHeapNode</a>) <strong class="reserved">super</strong>.<a href="../D/12902.html" title="Multiple defined in 3 places.">cloneHeapNode</a>();
<a id="L595" name="L595"></a> 595 
<a id="L596" name="L596"></a> 596                 <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>._nodes = _nodes;
<a id="L597" name="L597"></a> 597                 <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>._position = _position;
<a id="L598" name="L598"></a> 598                 <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>._markPosition = _markPosition;
<a id="L599" name="L599"></a> 599 
<a id="L600" name="L600"></a> 600                 <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L601" name="L601"></a> 601             <em class="brace">}</em>
<a id="L602" name="L602"></a> 602 
<div class="comment">
              Remembers the current node for the next call to
              {@link #gotoMark()}.</div>
<a id="L607" name="L607"></a> 607             <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27715.html" title="Multiple referred from 22 places.">setMark</a>() <em class="brace">{</em>
<a id="L608" name="L608"></a> 608                 _markPosition = _position;
<a id="L609" name="L609"></a> 609             <em class="brace">}</em>
<a id="L610" name="L610"></a> 610 
<div class="comment">
              Restores the current node remembered by {@link #setMark()}.</div>
<a id="L614" name="L614"></a> 614             <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20027.html" title="Multiple referred from 21 places.">gotoMark</a>() <em class="brace">{</em>
<a id="L615" name="L615"></a> 615                 _position = _markPosition;
<a id="L616" name="L616"></a> 616             <em class="brace">}</em>
<a id="L617" name="L617"></a> 617 
<div class="comment">
              Performs a comparison of the two heap nodes
              @param heapNode the heap node against which to compare
              @return <code>true</code> if and only if the current node for
                      this heap node is before the current node of the
                      argument heap node in document order.</div>
<a id="L626" name="L626"></a> 626             <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21657.html" title="Multiple referred from 2 places.">isLessThan</a>(<a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a> heapNode) <em class="brace">{</em>
<a id="L627" name="L627"></a> 627                 <strong class="reserved">return</strong> _node &lt; heapNode._node;
<a id="L628" name="L628"></a> 628             <em class="brace">}</em>
<a id="L629" name="L629"></a> 629 
<div class="comment">
              <p>Sets context with respect to which this heap node is
              evaluated.</p>
              <p>This has no real effect on this kind of heap node.  Instead,
              the {@link KeyIndexIterator#setStartNode(int)} method should
              create new instances of this class to represent the effect of
              changing the context.</p></div>
<a id="L638" name="L638"></a> 638             <strong class="reserved">public</strong> <a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a> <a href="../R/28221.html" title="Multiple referred from 52 places.">setStartNode</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L639" name="L639"></a> 639                 <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L640" name="L640"></a> 640             <em class="brace">}</em>
<a id="L641" name="L641"></a> 641 
<div class="comment">
              Reset the heap node back to its beginning.</div>
<a id="L645" name="L645"></a> 645             <strong class="reserved">public</strong> <a href="../S/6047.html#L57" title="Defined at 57 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">HeapNode</a> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <em class="brace">{</em>
<a id="L646" name="L646"></a> 646                 _position = 0;
<a id="L647" name="L647"></a> 647                 <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L648" name="L648"></a> 648             <em class="brace">}</em>
<a id="L649" name="L649"></a> 649         <em class="brace">}</em>
<a id="L650" name="L650"></a> 650 
<div class="comment">
          Constructor used when the argument to <code>key</code> or
          <code>id</code> is not a node set.
          @param keyValue the argument to <code>key</code> or <code>id</code>
                          cast to a <code>String</code>
          @param isKeyIterator indicates whether the constructed iterator
                         represents a reference to <code>key</code> or
                         <code>id</code>.</div>
<a id="L661" name="L661"></a> 661         KeyIndexIterator(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keyValue, <strong class="reserved">boolean</strong> isKeyIterator) <em class="brace">{</em>
<a id="L662" name="L662"></a> 662             _isKeyIterator = isKeyIterator;
<a id="L663" name="L663"></a> 663             _keyValue = keyValue;
<a id="L664" name="L664"></a> 664         <em class="brace">}</em>
<a id="L665" name="L665"></a> 665 
<div class="comment">
          Constructor used when the argument to <code>key</code> or
          <code>id</code> is a node set.
          @param keyValues the argument to <code>key</code> or <code>id</code>
          @param isKeyIterator indicates whether the constructed iterator
                         represents a reference to <code>key</code> or
                         <code>id</code>.</div>
<a id="L675" name="L675"></a> 675         KeyIndexIterator(<a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> keyValues, <strong class="reserved">boolean</strong> isKeyIterator) <em class="brace">{</em>
<a id="L676" name="L676"></a> 676             _keyValueIterator = keyValues;
<a id="L677" name="L677"></a> 677             _isKeyIterator = isKeyIterator;
<a id="L678" name="L678"></a> 678         <em class="brace">}</em>
<a id="L679" name="L679"></a> 679 
<div class="comment">
          Retrieve nodes for a particular key value or a particular id
          argument value.
          @param root The root node of the document containing the context node
          @param keyValue The key value of id string argument value
          @return an <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> of the resulting nodes</div>
<a id="L688" name="L688"></a> 688         <strong class="reserved">protected</strong> <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> <a href="../R/22763.html" title="Multiple referred from 2 places.">lookupNodes</a>(<strong class="reserved">int</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keyValue) <em class="brace">{</em>
<a id="L689" name="L689"></a> 689             <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong>;
<a id="L690" name="L690"></a> 690 
<a id="L691" name="L691"></a> 691             <em class="comment">// Get mapping from key values/IDs to DTM nodes for this document</em>
<a id="L692" name="L692"></a> 692             <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>)_rootToIndexMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>));
<a id="L693" name="L693"></a> 693 
<a id="L694" name="L694"></a> 694             <strong class="reserved">if</strong> (!_isKeyIterator) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695                 <em class="comment">// For id function, tokenize argument as whitespace separated</em>
<a id="L696" name="L696"></a> 696                 <em class="comment">// list of values and look up nodes identified by each ID.</em>
<a id="L697" name="L697"></a> 697                 <strong class="reserved">final</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a> =
<a id="L698" name="L698"></a> 698                         <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(keyValue, " \n\t");
<a id="L699" name="L699"></a> 699 
<a id="L700" name="L700"></a> 700                 <strong class="reserved">while</strong> (<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701                     <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> token = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L702" name="L702"></a> 702                     <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = <strong class="reserved">null</strong>;
<a id="L703" name="L703"></a> 703 
<a id="L704" name="L704"></a> 704                     <em class="comment">// Does the ID map to any node in the document?</em>
<a id="L705" name="L705"></a> 705                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L706" name="L706"></a> 706                         nodes = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(token);
<a id="L707" name="L707"></a> 707                     <em class="brace">}</em>
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709                     <em class="comment">// If input was from W3C DOM, use DOM's getElementById to do</em>
<a id="L710" name="L710"></a> 710                     <em class="comment">// the look-up.</em>
<a id="L711" name="L711"></a> 711                     <strong class="reserved">if</strong> (nodes == <strong class="reserved">null</strong> &amp;&amp; _enhancedDOM != <strong class="reserved">null</strong>
<a id="L712" name="L712"></a> 712                             &amp;&amp; _enhancedDOM.<a href="../D/24084.html" title="Multiple defined in 2 places.">hasDOMSource</a>()) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713                         nodes = <a href="../S/6034.html#L173" title="Defined at 173 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">getDOMNodeById</a>(token);
<a id="L714" name="L714"></a> 714                     <em class="brace">}</em>
<a id="L715" name="L715"></a> 715 
<a id="L716" name="L716"></a> 716                     <em class="comment">// If we found any nodes, merge them into the cumulative</em>
<a id="L717" name="L717"></a> 717                     <em class="comment">// result</em>
<a id="L718" name="L718"></a> 718                     <strong class="reserved">if</strong> (nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L719" name="L719"></a> 719                         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L720" name="L720"></a> 720                             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>)nodes.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L721" name="L721"></a> 721                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L722" name="L722"></a> 722                             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/27630.html" title="Multiple defined in 17 places.">merge</a>(nodes);
<a id="L723" name="L723"></a> 723                         <em class="brace">}</em>
<a id="L724" name="L724"></a> 724                     <em class="brace">}</em>
<a id="L725" name="L725"></a> 725                 <em class="brace">}</em>
<a id="L726" name="L726"></a> 726             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L727" name="L727"></a> 727                 <em class="comment">// For key function, map key value to nodes</em>
<a id="L728" name="L728"></a> 728                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = (<a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a>) <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(keyValue);
<a id="L729" name="L729"></a> 729             <em class="brace">}</em>
<a id="L730" name="L730"></a> 730 
<a id="L731" name="L731"></a> 731             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L732" name="L732"></a> 732         <em class="brace">}</em>
<a id="L733" name="L733"></a> 733 
<div class="comment">
          Set context node for the iterator.  This will cause the iterator
          to reset itself, reevaluate arguments to the function, look up
          nodes in the input and reinitialize its internal heap.
          @param node the context node
          @return A <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> set to the start of the iteration.</div>
<a id="L742" name="L742"></a> 742         <strong class="reserved">public</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../R/28221.html" title="Multiple referred from 52 places.">setStartNode</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>) <em class="brace">{</em>
<a id="L743" name="L743"></a> 743             _startNode = <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L744" name="L744"></a> 744 
<a id="L745" name="L745"></a> 745             <em class="comment">// If the arugment to the function is a node set, set the</em>
<a id="L746" name="L746"></a> 746             <em class="comment">// context node on it.</em>
<a id="L747" name="L747"></a> 747             <strong class="reserved">if</strong> (_keyValueIterator != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L748" name="L748"></a> 748                 _keyValueIterator = _keyValueIterator.<a href="../D/34000.html" title="Multiple defined in 66 places.">setStartNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L749" name="L749"></a> 749             <em class="brace">}</em>
<a id="L750" name="L750"></a> 750 
<a id="L751" name="L751"></a> 751             <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>();
<a id="L752" name="L752"></a> 752 
<a id="L753" name="L753"></a> 753             <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/34000.html" title="Multiple defined in 66 places.">setStartNode</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L754" name="L754"></a> 754         <em class="brace">}</em>
<a id="L755" name="L755"></a> 755 
<div class="comment">
          Get the next node in the iteration.
          @return The next node handle in the iteration, or END.</div>
<a id="L761" name="L761"></a> 761         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23650.html" title="Multiple referred from 3301 places.">next</a>() <em class="brace">{</em>
<a id="L762" name="L762"></a> 762             <strong class="reserved">int</strong> nodeHandle;
<a id="L763" name="L763"></a> 763 
<a id="L764" name="L764"></a> 764             <em class="comment">// If at most one key value or at most one string argument to id</em>
<a id="L765" name="L765"></a> 765             <em class="comment">// resulted in nodes being returned, use the IntegerArray</em>
<a id="L766" name="L766"></a> 766             <em class="comment">// stored at _nodes directly.  This relies on the fact that the</em>
<a id="L767" name="L767"></a> 767             <em class="comment">// IntegerArray never includes duplicate nodes and is always stored</em>
<a id="L768" name="L768"></a> 768             <em class="comment">// in document order.</em>
<a id="L769" name="L769"></a> 769             <strong class="reserved">if</strong> (_nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L770" name="L770"></a> 770                 <strong class="reserved">if</strong> (_position &lt; _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>()) <em class="brace">{</em>
<a id="L771" name="L771"></a> 771                     nodeHandle = <a href="../D/31398.html" title="Multiple defined in 2 places.">returnNode</a>(_nodes.<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>(_position));
<a id="L772" name="L772"></a> 772                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L773" name="L773"></a> 773                     nodeHandle = <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END;
<a id="L774" name="L774"></a> 774                 <em class="brace">}</em>
<a id="L775" name="L775"></a> 775             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L776" name="L776"></a> 776                 nodeHandle = <strong class="reserved">super</strong>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L777" name="L777"></a> 777             <em class="brace">}</em>
<a id="L778" name="L778"></a> 778 
<a id="L779" name="L779"></a> 779             <strong class="reserved">return</strong> nodeHandle;
<a id="L780" name="L780"></a> 780         <em class="brace">}</em>
<a id="L781" name="L781"></a> 781 
<div class="comment">
          Resets the iterator to the last start node.
          @return A DTMAxisIterator, which may or may not be the same as this
                  iterator.</div>
<a id="L788" name="L788"></a> 788         <strong class="reserved">public</strong> <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <em class="brace">{</em>
<a id="L789" name="L789"></a> 789             <strong class="reserved">if</strong> (_nodes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L790" name="L790"></a> 790                 <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>();
<a id="L791" name="L791"></a> 791             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L792" name="L792"></a> 792                 <strong class="reserved">super</strong>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L793" name="L793"></a> 793             <em class="brace">}</em>
<a id="L794" name="L794"></a> 794 
<a id="L795" name="L795"></a> 795             <strong class="reserved">return</strong> <a href="../D/31194.html" title="Multiple defined in 2 places.">resetPosition</a>();
<a id="L796" name="L796"></a> 796         <em class="brace">}</em>
<a id="L797" name="L797"></a> 797 
<div class="comment">
          Evaluate the reference to the <code>key</code> or <code>id</code>
          function with the context specified by {@link #setStartNode(int)}
          and set up this iterator to iterate over the DTM nodes that are
          to be returned.</div>
<a id="L804" name="L804"></a> 804         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20537.html" title="Multiple referred from 888 places.">init</a>() <em class="brace">{</em>
<a id="L805" name="L805"></a> 805             <strong class="reserved">super</strong>.<a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>();
<a id="L806" name="L806"></a> 806             _position = 0;
<a id="L807" name="L807"></a> 807 
<a id="L808" name="L808"></a> 808             <em class="comment">// All nodes retrieved are in the same document</em>
<a id="L809" name="L809"></a> 809             <strong class="reserved">int</strong> rootHandle = _dom.<a href="../D/17164.html" title="Multiple defined in 9 places.">getAxisIterator</a>(<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.ROOT)
<a id="L810" name="L810"></a> 810                                       .<a href="../D/34000.html" title="Multiple defined in 66 places.">setStartNode</a>(_startNode).<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L811" name="L811"></a> 811 
<a id="L812" name="L812"></a> 812             <em class="comment">// Is the argument not a node set?</em>
<a id="L813" name="L813"></a> 813             <strong class="reserved">if</strong> (_keyValueIterator == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L814" name="L814"></a> 814                 <em class="comment">// Look up nodes returned for the single string argument</em>
<a id="L815" name="L815"></a> 815                 _nodes = <a href="../S/6034.html#L688" title="Defined at 688 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">lookupNodes</a>(rootHandle, _keyValue);
<a id="L816" name="L816"></a> 816 
<a id="L817" name="L817"></a> 817                 <strong class="reserved">if</strong> (_nodes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L818" name="L818"></a> 818                     _nodes = EMPTY_NODES;
<a id="L819" name="L819"></a> 819                 <em class="brace">}</em>
<a id="L820" name="L820"></a> 820             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L821" name="L821"></a> 821                 <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> keyValues = _keyValueIterator.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L822" name="L822"></a> 822                 <strong class="reserved">int</strong> retrievedKeyValueIdx = 0;
<a id="L823" name="L823"></a> 823                 <strong class="reserved">boolean</strong> foundNodes = <strong class="reserved">false</strong>;
<a id="L824" name="L824"></a> 824 
<a id="L825" name="L825"></a> 825                 _nodes = <strong class="reserved">null</strong>;
<a id="L826" name="L826"></a> 826 
<a id="L827" name="L827"></a> 827                 <em class="comment">// For each node in the node set argument, get the string value</em>
<a id="L828" name="L828"></a> 828                 <em class="comment">// and look up the nodes returned by key or id for that string</em>
<a id="L829" name="L829"></a> 829                 <em class="comment">// value.  If at most one string value has nodes associated,</em>
<a id="L830" name="L830"></a> 830                 <em class="comment">// the nodes will be stored in _nodes; otherwise, the nodes</em>
<a id="L831" name="L831"></a> 831                 <em class="comment">// will be placed in a heap.</em>
<a id="L832" name="L832"></a> 832                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> keyValueNode = keyValues.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L833" name="L833"></a> 833                      keyValueNode != <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END;
<a id="L834" name="L834"></a> 834                      keyValueNode = keyValues.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>()) <em class="brace">{</em>
<a id="L835" name="L835"></a> 835 
<a id="L836" name="L836"></a> 836                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keyValue = <a href="../S/5978.html#L65" title="Defined at 65 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">BasisLibrary</a>.<a href="../D/34932.html" title="Multiple defined in 3 places.">stringF</a>(keyValueNode, _dom);
<a id="L837" name="L837"></a> 837 
<a id="L838" name="L838"></a> 838                     <a href="../S/5968.html#L29" title="Defined at 29 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">IntegerArray</a> nodes = <a href="../S/6034.html#L688" title="Defined at 688 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">lookupNodes</a>(rootHandle, keyValue);
<a id="L839" name="L839"></a> 839 
<a id="L840" name="L840"></a> 840                     <strong class="reserved">if</strong> (nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L841" name="L841"></a> 841                         <strong class="reserved">if</strong> (!foundNodes) <em class="brace">{</em>
<a id="L842" name="L842"></a> 842                             _nodes = nodes;
<a id="L843" name="L843"></a> 843                             foundNodes = <strong class="reserved">true</strong>;
<a id="L844" name="L844"></a> 844                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L845" name="L845"></a> 845                             <strong class="reserved">if</strong> (_nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L846" name="L846"></a> 846                                 <a href="../S/6047.html#L173" title="Defined at 173 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">addHeapNode</a>(<strong class="reserved">new</strong> <a href="../S/6034.html#L540" title="Defined at 540 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexHeapNode</a>(_nodes));
<a id="L847" name="L847"></a> 847                                 _nodes = <strong class="reserved">null</strong>;
<a id="L848" name="L848"></a> 848                             <em class="brace">}</em>
<a id="L849" name="L849"></a> 849                             <a href="../S/6047.html#L173" title="Defined at 173 in src/com/sun/org/apache/xalan/internal/xsltc/dom/MultiValuedNodeHeapIterator.java.">addHeapNode</a>(<strong class="reserved">new</strong> <a href="../S/6034.html#L540" title="Defined at 540 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndexHeapNode</a>(nodes));
<a id="L850" name="L850"></a> 850                         <em class="brace">}</em>
<a id="L851" name="L851"></a> 851                     <em class="brace">}</em>
<a id="L852" name="L852"></a> 852                 <em class="brace">}</em>
<a id="L853" name="L853"></a> 853 
<a id="L854" name="L854"></a> 854                 <strong class="reserved">if</strong> (!foundNodes) <em class="brace">{</em>
<a id="L855" name="L855"></a> 855                     _nodes = EMPTY_NODES;
<a id="L856" name="L856"></a> 856                 <em class="brace">}</em>
<a id="L857" name="L857"></a> 857             <em class="brace">}</em>
<a id="L858" name="L858"></a> 858         <em class="brace">}</em>
<a id="L859" name="L859"></a> 859 
<div class="comment">
          Returns the number of nodes in this iterator.
          @return the number of nodes</div>
<a id="L865" name="L865"></a> 865         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17269.html" title="Multiple referred from 11 places.">getLast</a>() <em class="brace">{</em>
<a id="L866" name="L866"></a> 866             <em class="comment">// If nodes are stored in _nodes, take advantage of the fact that</em>
<a id="L867" name="L867"></a> 867             <em class="comment">// there are no duplicates.  Otherwise, fall back to the base heap</em>
<a id="L868" name="L868"></a> 868             <em class="comment">// implementaiton and hope it does a good job with this.</em>
<a id="L869" name="L869"></a> 869             <strong class="reserved">return</strong> (_nodes != <strong class="reserved">null</strong>) ? _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>() : <strong class="reserved">super</strong>.<a href="../D/19990.html" title="Multiple defined in 23 places.">getLast</a>();
<a id="L870" name="L870"></a> 870         <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<div class="comment">
          Return the node at the given position.
          @param position The position
          @return The node at the given position.</div>
<a id="L878" name="L878"></a> 878         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17974.html" title="Multiple referred from 2 places.">getNodeByPosition</a>(<strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>) <em class="brace">{</em>
<a id="L879" name="L879"></a> 879             <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a>.END;
<a id="L880" name="L880"></a> 880 
<a id="L881" name="L881"></a> 881             <em class="comment">// If nodes are stored in _nodes, take advantage of the fact that</em>
<a id="L882" name="L882"></a> 882             <em class="comment">// there are no duplicates and they are stored in document order.</em>
<a id="L883" name="L883"></a> 883             <em class="comment">// Otherwise, fall back to the base heap implementation to do a</em>
<a id="L884" name="L884"></a> 884             <em class="comment">// good job with this.</em>
<a id="L885" name="L885"></a> 885             <strong class="reserved">if</strong> (_nodes != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L886" name="L886"></a> 886                 <strong class="reserved">if</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> &gt; 0) <em class="brace">{</em>
<a id="L887" name="L887"></a> 887                     <strong class="reserved">if</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> &lt;= _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>()) <em class="brace">{</em>
<a id="L888" name="L888"></a> 888                         _position = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L889" name="L889"></a> 889                         <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = _nodes.<a href="../D/11601.html" title="Multiple defined in 3 places.">at</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>-1);
<a id="L890" name="L890"></a> 890                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L891" name="L891"></a> 891                         _position = _nodes.<a href="../S/5968.html#L212" title="Defined at 212 in src/com/sun/org/apache/xalan/internal/xsltc/util/IntegerArray.java.">cardinality</a>();
<a id="L892" name="L892"></a> 892                     <em class="brace">}</em>
<a id="L893" name="L893"></a> 893                 <em class="brace">}</em>
<a id="L894" name="L894"></a> 894             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L895" name="L895"></a> 895                 <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <strong class="reserved">super</strong>.<a href="../D/20972.html" title="Multiple defined in 9 places.">getNodeByPosition</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>);
<a id="L896" name="L896"></a> 896             <em class="brace">}</em>
<a id="L897" name="L897"></a> 897 
<a id="L898" name="L898"></a> 898             <strong class="reserved">return</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>;
<a id="L899" name="L899"></a> 899         <em class="brace">}</em>
<a id="L900" name="L900"></a> 900     <em class="brace">}</em>
<a id="L901" name="L901"></a> 901 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L87">[^]</a><a href="#L878">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
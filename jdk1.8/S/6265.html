<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L78">[^]</a><a href="#L1087">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L78" title="Defined at 78.">dateTime</a></li>
<li><a href="#L110" title="Defined at 110.">formatDigits</a></li>
<li><a href="#L137" title="Defined at 137.">date</a></li>
<li><a href="#L165" title="Defined at 165.">date</a></li>
<li><a href="#L195" title="Defined at 195.">time</a></li>
<li><a href="#L216" title="Defined at 216.">time</a></li>
<li><a href="#L245" title="Defined at 245.">year</a></li>
<li><a href="#L265" title="Defined at 265.">year</a></li>
<li><a href="#L287" title="Defined at 287.">monthInYear</a></li>
<li><a href="#L302" title="Defined at 302.">monthInYear</a></li>
<li><a href="#L321" title="Defined at 321.">weekInYear</a></li>
<li><a href="#L336" title="Defined at 336.">weekInYear</a></li>
<li><a href="#L355" title="Defined at 355.">dayInYear</a></li>
<li><a href="#L370" title="Defined at 370.">dayInYear</a></li>
<li><a href="#L392" title="Defined at 392.">dayInMonth</a></li>
<li><a href="#L405" title="Defined at 405.">dayInMonth</a></li>
<li><a href="#L425" title="Defined at 425.">dayOfWeekInMonth</a></li>
<li><a href="#L440" title="Defined at 440.">dayOfWeekInMonth</a></li>
<li><a href="#L461" title="Defined at 461.">dayInWeek</a></li>
<li><a href="#L476" title="Defined at 476.">dayInWeek</a></li>
<li><a href="#L495" title="Defined at 495.">hourInDay</a></li>
<li><a href="#L510" title="Defined at 510.">hourInDay</a></li>
<li><a href="#L529" title="Defined at 529.">minuteInHour</a></li>
<li><a href="#L544" title="Defined at 544.">minuteInHour</a></li>
<li><a href="#L563" title="Defined at 563.">secondInMinute</a></li>
<li><a href="#L578" title="Defined at 578.">secondInMinute</a></li>
<li><a href="#L599" title="Defined at 599.">leapYear</a></li>
<li><a href="#L618" title="Defined at 618.">leapYear</a></li>
<li><a href="#L644" title="Defined at 644.">monthName</a></li>
<li><a href="#L660" title="Defined at 660.">monthName</a></li>
<li><a href="#L687" title="Defined at 687.">monthAbbreviation</a></li>
<li><a href="#L703" title="Defined at 703.">monthAbbreviation</a></li>
<li><a href="#L727" title="Defined at 727.">dayName</a></li>
<li><a href="#L743" title="Defined at 743.">dayName</a></li>
<li><a href="#L767" title="Defined at 767.">dayAbbreviation</a></li>
<li><a href="#L783" title="Defined at 783.">dayAbbreviation</a></li>
<li><a href="#L794" title="Defined at 794.">getEraDatetimeZone</a></li>
<li><a href="#L822" title="Defined at 822.">getZoneStart</a></li>
<li><a href="#L852" title="Defined at 852.">testFormats</a></li>
<li><a href="#L875" title="Defined at 875.">getNumber</a></li>
<li><a href="#L890" title="Defined at 890.">getNameOrAbbrev</a></li>
<li><a href="#L915" title="Defined at 915.">getNameOrAbbrev</a></li>
<li><a href="#L958" title="Defined at 958.">formatDate</a></li>
<li><a href="#L1087" title="Defined at 1087.">strip</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: ExsltDatetime.java,v 1.2.4.1 2005/09/10 18:50:49 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.lib;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.text.ParseException;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.text.SimpleDateFormat;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Calendar;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.Date;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.Locale;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.TimeZone;
<a id="L33" name="L33"></a>  33 
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XBoolean;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XNumber;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XObject;
<a id="L37" name="L37"></a>  37 
<div class="comment">
  This class contains EXSLT dates and times extension functions.
  It is accessed by specifying a namespace URI as follows:
  <pre>     xmlns:datetime="http://exslt.org/dates-and-times"
  </pre>
  The documentation for each function has been copied from the relevant
  EXSLT Implementer page.
  @see <a href="http://www.exslt.org/">EXSLT</a>
  @xsl.usage general</div>
<a id="L51" name="L51"></a>  51 
<a id="L52" name="L52"></a>  52 <strong class="reserved">public</strong> <strong class="reserved">class</strong> ExsltDatetime
<a id="L53" name="L53"></a>  53 <em class="brace">{</em>
<a id="L54" name="L54"></a>  54     <em class="comment">// Datetime formats (era and zone handled separately).</em>
<a id="L55" name="L55"></a>  55     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dt = "yyyy-MM-dd'T'HH:mm:ss";
<a id="L56" name="L56"></a>  56     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> d = "yyyy-MM-dd";
<a id="L57" name="L57"></a>  57     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> gym = "yyyy-MM";
<a id="L58" name="L58"></a>  58     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> gy = "yyyy";
<a id="L59" name="L59"></a>  59     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> gmd = "--MM-dd";
<a id="L60" name="L60"></a>  60     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> gm = "--MM--";
<a id="L61" name="L61"></a>  61     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> gd = "---dd";
<a id="L62" name="L62"></a>  62     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> t = "HH:mm:ss";
<a id="L63" name="L63"></a>  63     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> EMPTY_STR = "";
<a id="L64" name="L64"></a>  64 
<div class="comment">
      The date:date-time function returns the current date and time as a date/time string.
      The date/time string that's returned must be a string in the format defined as the
      lexical representation of xs:dateTime in
      <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">[3.2.7 dateTime]</a> of
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The date/time format is basically CCYY-MM-DDThh:mm:ss, although implementers should consult
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a> and
      <a href="http://www.iso.ch/markete/8601.pdf">[ISO 8601]</a> for details.
      The date/time string format must include a time zone, either a Z to indicate Coordinated
      Universal Time or a + or - followed by the difference between the difference from UTC
      represented as hh:mm.</div>
<a id="L78" name="L78"></a>  78     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/12901.html" title="Multiple referred from 172 places.">dateTime</a>()
<a id="L79" name="L79"></a>  79     <em class="brace">{</em>
<a id="L80" name="L80"></a>  80       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L81" name="L81"></a>  81       <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> datetime = cal.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>();
<a id="L82" name="L82"></a>  82       <em class="comment">// Format for date and time.</em>
<a id="L83" name="L83"></a>  83       <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(dt);
<a id="L84" name="L84"></a>  84 
<a id="L85" name="L85"></a>  85       <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> buff = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>(dateFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(datetime));
<a id="L86" name="L86"></a>  86       <em class="comment">// Must also include offset from UTF.</em>
<a id="L87" name="L87"></a>  87       <em class="comment">// Get the offset (in milliseconds).</em>
<a id="L88" name="L88"></a>  88       <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.ZONE_OFFSET) + cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.DST_OFFSET);
<a id="L89" name="L89"></a>  89       <em class="comment">// If there is no offset, we have "Coordinated</em>
<a id="L90" name="L90"></a>  90       <em class="comment">// Universal Time."</em>
<a id="L91" name="L91"></a>  91       <strong class="reserved">if</strong> (<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> == 0)
<a id="L92" name="L92"></a>  92         buff.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("Z");
<a id="L93" name="L93"></a>  93       <strong class="reserved">else</strong>
<a id="L94" name="L94"></a>  94       <em class="brace">{</em>
<a id="L95" name="L95"></a>  95         <em class="comment">// Convert milliseconds to hours and minutes</em>
<a id="L96" name="L96"></a>  96         <strong class="reserved">int</strong> hrs = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>/(60*60*1000);
<a id="L97" name="L97"></a>  97         <em class="comment">// In a few cases, the time zone may be +/-hh:30.</em>
<a id="L98" name="L98"></a>  98         <strong class="reserved">int</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>%(60*60*1000);
<a id="L99" name="L99"></a>  99         <strong class="reserved">char</strong> posneg = hrs &lt; 0? '-': '+';
<a id="L100" name="L100"></a> 100         buff.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(posneg).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/6265.html#L110" title="Defined at 110 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">formatDigits</a>(hrs)).<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(':').<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/6265.html#L110" title="Defined at 110 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">formatDigits</a>(<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>));
<a id="L101" name="L101"></a> 101       <em class="brace">}</em>
<a id="L102" name="L102"></a> 102       <strong class="reserved">return</strong> buff.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L103" name="L103"></a> 103     <em class="brace">}</em>
<a id="L104" name="L104"></a> 104 
<div class="comment">
      Represent the hours and minutes with two-digit strings.
      @param q hrs or minutes.
      @return two-digit String representation of hrs or minutes.</div>
<a id="L110" name="L110"></a> 110     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6265.html#L100" title="Referred from 100 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">formatDigits</a>(<strong class="reserved">int</strong> q)
<a id="L111" name="L111"></a> 111     <em class="brace">{</em>
<a id="L112" name="L112"></a> 112       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dd = <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>(q));
<a id="L113" name="L113"></a> 113       <strong class="reserved">return</strong> dd.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 1 ? '0' + dd : dd;
<a id="L114" name="L114"></a> 114     <em class="brace">}</em>
<a id="L115" name="L115"></a> 115 
<div class="comment">
      The date:date function returns the date specified in the date/time string given
      as the argument. If no argument is given, then the current local date/time, as
      returned by date:date-time is used as a default argument.
      The date/time string that's returned must be a string in the format defined as the
      lexical representation of xs:dateTime in
      <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">[3.2.7 dateTime]</a> of
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      If the argument is not in either of these formats, date:date returns an empty string ('').
      The date/time format is basically CCYY-MM-DDThh:mm:ss, although implementers should consult
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a> and
      <a href="http://www.iso.ch/markete/8601.pdf">[ISO 8601]</a> for details.
      The date is returned as a string with a lexical representation as defined for xs:date in
      [3.2.9 date] of [XML Schema Part 2: Datatypes]. The date format is basically CCYY-MM-DD,
      although implementers should consult [XML Schema Part 2: Datatypes] and [ISO 8601] for details.
      If no argument is given or the argument date/time specifies a time zone, then the date string
      format must include a time zone, either a Z to indicate Coordinated Universal Time or a + or -
      followed by the difference between the difference from UTC represented as hh:mm. If an argument
      is specified and it does not specify a time zone, then the date string format must not include
      a time zone.</div>
<a id="L137" name="L137"></a> 137     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/12898.html" title="Multiple referred from 780 places.">date</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L138" name="L138"></a> 138       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L139" name="L139"></a> 139     <em class="brace">{</em>
<a id="L140" name="L140"></a> 140       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L141" name="L141"></a> 141       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> leader = edz[0];
<a id="L142" name="L142"></a> 142       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L143" name="L143"></a> 143       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = edz[2];
<a id="L144" name="L144"></a> 144       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong> || <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> == <strong class="reserved">null</strong>)
<a id="L145" name="L145"></a> 145         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L146" name="L146"></a> 146 
<a id="L147" name="L147"></a> 147       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn = <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L148" name="L148"></a> 148       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut = d;
<a id="L149" name="L149"></a> 149       <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../S/6265.html#L852" title="Defined at 852 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">testFormats</a>(datetime, formatsIn);
<a id="L150" name="L150"></a> 150       <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> EMPTY_STR;
<a id="L151" name="L151"></a> 151 
<a id="L152" name="L152"></a> 152       <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(formatOut);
<a id="L153" name="L153"></a> 153       dateFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L154" name="L154"></a> 154       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dateOut = dateFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L155" name="L155"></a> 155       <strong class="reserved">if</strong> (dateOut.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0)
<a id="L156" name="L156"></a> 156           <strong class="reserved">return</strong> EMPTY_STR;
<a id="L157" name="L157"></a> 157       <strong class="reserved">else</strong>
<a id="L158" name="L158"></a> 158         <strong class="reserved">return</strong> (leader + dateOut + <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L159" name="L159"></a> 159     <em class="brace">}</em>
<a id="L160" name="L160"></a> 160 
<a id="L161" name="L161"></a> 161 
<div class="comment">
      See above.</div>
<a id="L165" name="L165"></a> 165     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/12898.html" title="Multiple referred from 780 places.">date</a>()
<a id="L166" name="L166"></a> 166     <em class="brace">{</em>
<a id="L167" name="L167"></a> 167       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>().<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L168" name="L168"></a> 168       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = datetime.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, datetime.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("T"));
<a id="L169" name="L169"></a> 169       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = datetime.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../S/6265.html#L822" title="Defined at 822 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getZoneStart</a>(datetime));
<a id="L170" name="L170"></a> 170       <strong class="reserved">return</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> + <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L171" name="L171"></a> 171     <em class="brace">}</em>
<a id="L172" name="L172"></a> 172 
<div class="comment">
      The date:time function returns the time specified in the date/time string given
      as the argument. If no argument is given, then the current local date/time, as
      returned by date:date-time is used as a default argument.
      The date/time string that's returned must be a string in the format defined as the
      lexical representation of xs:dateTime in
      <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">[3.2.7 dateTime]</a> of
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      If the argument string is not in this format, date:time returns an empty string ('').
      The date/time format is basically CCYY-MM-DDThh:mm:ss, although implementers should consult
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a> and
      <a href="http://www.iso.ch/markete/8601.pdf">[ISO 8601]</a> for details.
      The date is returned as a string with a lexical representation as defined for xs:time in
      <a href="http://www.w3.org/TR/xmlschema-2/#time">[3.2.8 time]</a> of [XML Schema Part 2: Datatypes].
      The time format is basically hh:mm:ss, although implementers should consult [XML Schema Part 2:
      Datatypes] and [ISO 8601] for details.
      If no argument is given or the argument date/time specifies a time zone, then the time string
      format must include a time zone, either a Z to indicate Coordinated Universal Time or a + or -
      followed by the difference between the difference from UTC represented as hh:mm. If an argument
      is specified and it does not specify a time zone, then the time string format must not include
      a time zone.</div>
<a id="L195" name="L195"></a> 195     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29199.html" title="Multiple referred from 1482 places.">time</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> timeIn)
<a id="L196" name="L196"></a> 196       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L197" name="L197"></a> 197     <em class="brace">{</em>
<a id="L198" name="L198"></a> 198       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(timeIn);
<a id="L199" name="L199"></a> 199       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = edz[1];
<a id="L200" name="L200"></a> 200       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = edz[2];
<a id="L201" name="L201"></a> 201       <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> == <strong class="reserved">null</strong> || <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> == <strong class="reserved">null</strong>)
<a id="L202" name="L202"></a> 202         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L203" name="L203"></a> 203 
<a id="L204" name="L204"></a> 204       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn = <em class="brace">{</em>dt, d, t<em class="brace">}</em>;
<a id="L205" name="L205"></a> 205       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut =  t;
<a id="L206" name="L206"></a> 206       <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../S/6265.html#L852" title="Defined at 852 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">testFormats</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, formatsIn);
<a id="L207" name="L207"></a> 207       <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> EMPTY_STR;
<a id="L208" name="L208"></a> 208       <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(formatOut);
<a id="L209" name="L209"></a> 209       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a> = dateFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L210" name="L210"></a> 210       <strong class="reserved">return</strong> (<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a> + <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L211" name="L211"></a> 211     <em class="brace">}</em>
<a id="L212" name="L212"></a> 212 
<div class="comment">
      See above.</div>
<a id="L216" name="L216"></a> 216     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29199.html" title="Multiple referred from 1482 places.">time</a>()
<a id="L217" name="L217"></a> 217     <em class="brace">{</em>
<a id="L218" name="L218"></a> 218       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>().<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L219" name="L219"></a> 219       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = datetime.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(datetime.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("T")+1);
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221           <em class="comment">// The datetime() function returns the zone on the datetime string.  If we</em>
<a id="L222" name="L222"></a> 222           <em class="comment">// append it, we get the zone substring duplicated.</em>
<a id="L223" name="L223"></a> 223           <em class="comment">// Fix for JIRA 2013</em>
<a id="L224" name="L224"></a> 224 
<a id="L225" name="L225"></a> 225       <em class="comment">// String zone = datetime.substring(getZoneStart(datetime));</em>
<a id="L226" name="L226"></a> 226       <em class="comment">// return (time + zone);</em>
<a id="L227" name="L227"></a> 227       <strong class="reserved">return</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L228" name="L228"></a> 228     <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<div class="comment">
      The date:year function returns the year of a date as a number. If no
      argument is given, then the current local date/time, as returned by
      date:date-time is used as a default argument.
      The date/time string specified as the first argument must be a right-truncated
      string in the format defined as the lexical representation of xs:dateTime in one
      of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
        xs:dateTime (CCYY-MM-DDThh:mm:ss)
        xs:date (CCYY-MM-DD)
        xs:gYearMonth (CCYY-MM)
        xs:gYear (CCYY)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L245" name="L245"></a> 245     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/30844.html" title="Multiple referred from 541 places.">year</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L246" name="L246"></a> 246       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L247" name="L247"></a> 247     <em class="brace">{</em>
<a id="L248" name="L248"></a> 248       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L249" name="L249"></a> 249       <strong class="reserved">boolean</strong> ad = edz[0].<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0; <em class="comment">// AD (Common Era -- empty leader)</em>
<a id="L250" name="L250"></a> 250       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L251" name="L251"></a> 251       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L252" name="L252"></a> 252         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L253" name="L253"></a> 253 
<a id="L254" name="L254"></a> 254       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d, gym, gy<em class="brace">}</em>;
<a id="L255" name="L255"></a> 255       <strong class="reserved">double</strong> yr = <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>);
<a id="L256" name="L256"></a> 256       <strong class="reserved">if</strong> (ad || yr == <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN)
<a id="L257" name="L257"></a> 257         <strong class="reserved">return</strong> yr;
<a id="L258" name="L258"></a> 258       <strong class="reserved">else</strong>
<a id="L259" name="L259"></a> 259         <strong class="reserved">return</strong> -yr;
<a id="L260" name="L260"></a> 260     <em class="brace">}</em>
<a id="L261" name="L261"></a> 261 
<div class="comment">
      See above.</div>
<a id="L265" name="L265"></a> 265     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/30844.html" title="Multiple referred from 541 places.">year</a>()
<a id="L266" name="L266"></a> 266     <em class="brace">{</em>
<a id="L267" name="L267"></a> 267       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L268" name="L268"></a> 268       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>);
<a id="L269" name="L269"></a> 269     <em class="brace">}</em>
<a id="L270" name="L270"></a> 270 
<div class="comment">
      The date:month-in-year function returns the month of a date as a number. If no argument
      is given, then the current local date/time, as returned by date:date-time is used
      as a default argument.
      The date/time string specified as the first argument is a left or right-truncated
      string in the format defined as the lexical representation of xs:dateTime in one of
      the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
         xs:dateTime (CCYY-MM-DDThh:mm:ss)
         xs:date (CCYY-MM-DD)
         xs:gYearMonth (CCYY-MM)
         xs:gMonth (--MM--)
         xs:gMonthDay (--MM-DD)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L287" name="L287"></a> 287     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> monthInYear(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L288" name="L288"></a> 288       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L289" name="L289"></a> 289     <em class="brace">{</em>
<a id="L290" name="L290"></a> 290       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L291" name="L291"></a> 291       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L292" name="L292"></a> 292       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L293" name="L293"></a> 293         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L294" name="L294"></a> 294 
<a id="L295" name="L295"></a> 295       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d, gym, gm, gmd<em class="brace">}</em>;
<a id="L296" name="L296"></a> 296       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.MONTH) + 1;
<a id="L297" name="L297"></a> 297     <em class="brace">}</em>
<a id="L298" name="L298"></a> 298 
<div class="comment">
      See above.</div>
<a id="L302" name="L302"></a> 302     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> monthInYear()
<a id="L303" name="L303"></a> 303     <em class="brace">{</em>
<a id="L304" name="L304"></a> 304       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L305" name="L305"></a> 305       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.MONTH) + 1;
<a id="L306" name="L306"></a> 306    <em class="brace">}</em>
<a id="L307" name="L307"></a> 307 
<div class="comment">
      The date:week-in-year function returns the week of the year as a number. If no argument
      is given, then the current local date/time, as returned by date:date-time is used as the
      default argument. For the purposes of numbering, counting follows ISO 8601: week 1 in a year
      is the week containing the first Thursday of the year, with new weeks beginning on a Monday.
      The date/time string specified as the argument is a right-truncated string in the format
      defined as the lexical representation of xs:dateTime in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>. The
      permitted formats are as follows:
         xs:dateTime (CCYY-MM-DDThh:mm:ss)
         xs:date (CCYY-MM-DD)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L321" name="L321"></a> 321     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> weekInYear(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L322" name="L322"></a> 322       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L323" name="L323"></a> 323     <em class="brace">{</em>
<a id="L324" name="L324"></a> 324       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L325" name="L325"></a> 325       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L326" name="L326"></a> 326       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L327" name="L327"></a> 327         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L328" name="L328"></a> 328 
<a id="L329" name="L329"></a> 329       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L330" name="L330"></a> 330       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.WEEK_OF_YEAR);
<a id="L331" name="L331"></a> 331     <em class="brace">}</em>
<a id="L332" name="L332"></a> 332 
<div class="comment">
      See above.</div>
<a id="L336" name="L336"></a> 336     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> weekInYear()
<a id="L337" name="L337"></a> 337     <em class="brace">{</em>
<a id="L338" name="L338"></a> 338        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L339" name="L339"></a> 339       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.WEEK_OF_YEAR);
<a id="L340" name="L340"></a> 340    <em class="brace">}</em>
<a id="L341" name="L341"></a> 341 
<div class="comment">
      The date:day-in-year function returns the day of a date in a year
      as a number. If no argument is given, then the current local
      date/time, as returned by date:date-time is used the default argument.
      The date/time string specified as the argument is a right-truncated
      string in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
          xs:dateTime (CCYY-MM-DDThh:mm:ss)
          xs:date (CCYY-MM-DD)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L355" name="L355"></a> 355     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> dayInYear(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L356" name="L356"></a> 356       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L357" name="L357"></a> 357     <em class="brace">{</em>
<a id="L358" name="L358"></a> 358       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L359" name="L359"></a> 359       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L360" name="L360"></a> 360       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L361" name="L361"></a> 361         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L364" name="L364"></a> 364       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>);
<a id="L365" name="L365"></a> 365     <em class="brace">}</em>
<a id="L366" name="L366"></a> 366 
<div class="comment">
      See above.</div>
<a id="L370" name="L370"></a> 370     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> dayInYear()
<a id="L371" name="L371"></a> 371     <em class="brace">{</em>
<a id="L372" name="L372"></a> 372        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L373" name="L373"></a> 373       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L413" title="Defined at 413 in src/java/time/temporal/ChronoField.java.">DAY_OF_YEAR</a>);
<a id="L374" name="L374"></a> 374    <em class="brace">}</em>
<a id="L375" name="L375"></a> 375 
<a id="L376" name="L376"></a> 376 
<div class="comment">
      The date:day-in-month function returns the day of a date as a number.
      If no argument is given, then the current local date/time, as returned
      by date:date-time is used the default argument.
      The date/time string specified as the argument is a left or right-truncated
      string in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
           xs:dateTime (CCYY-MM-DDThh:mm:ss)
           xs:date (CCYY-MM-DD)
           xs:gMonthDay (--MM-DD)
           xs:gDay (---DD)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L392" name="L392"></a> 392     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> dayInMonth(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L393" name="L393"></a> 393       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L394" name="L394"></a> 394     <em class="brace">{</em>
<a id="L395" name="L395"></a> 395       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L396" name="L396"></a> 396       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L397" name="L397"></a> 397       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d, gmd, gd<em class="brace">}</em>;
<a id="L398" name="L398"></a> 398       <strong class="reserved">double</strong> day = <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>);
<a id="L399" name="L399"></a> 399       <strong class="reserved">return</strong> day;
<a id="L400" name="L400"></a> 400     <em class="brace">}</em>
<a id="L401" name="L401"></a> 401 
<div class="comment">
      See above.</div>
<a id="L405" name="L405"></a> 405     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> dayInMonth()
<a id="L406" name="L406"></a> 406     <em class="brace">{</em>
<a id="L407" name="L407"></a> 407       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L408" name="L408"></a> 408       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L395" title="Defined at 395 in src/java/time/temporal/ChronoField.java.">DAY_OF_MONTH</a>);
<a id="L409" name="L409"></a> 409    <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<div class="comment">
      The date:day-of-week-in-month function returns the day-of-the-week
      in a month of a date as a number (e.g. 3 for the 3rd Tuesday in May).
      If no argument is given, then the current local date/time, as returned
      by date:date-time is used the default argument.
      The date/time string specified as the argument is a right-truncated string
      in the format defined as the lexical representation of xs:dateTime in one
      of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
           xs:dateTime (CCYY-MM-DDThh:mm:ss)
           xs:date (CCYY-MM-DD)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L425" name="L425"></a> 425     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/12905.html" title="Multiple referred from 2 places.">dayOfWeekInMonth</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L426" name="L426"></a> 426       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L427" name="L427"></a> 427     <em class="brace">{</em>
<a id="L428" name="L428"></a> 428       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L429" name="L429"></a> 429       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L430" name="L430"></a> 430       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L431" name="L431"></a> 431         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats =  <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L434" name="L434"></a> 434       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.DAY_OF_WEEK_IN_MONTH);
<a id="L435" name="L435"></a> 435     <em class="brace">}</em>
<a id="L436" name="L436"></a> 436 
<div class="comment">
      See above.</div>
<a id="L440" name="L440"></a> 440     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/12905.html" title="Multiple referred from 2 places.">dayOfWeekInMonth</a>()
<a id="L441" name="L441"></a> 441     <em class="brace">{</em>
<a id="L442" name="L442"></a> 442        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L443" name="L443"></a> 443       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.DAY_OF_WEEK_IN_MONTH);
<a id="L444" name="L444"></a> 444    <em class="brace">}</em>
<a id="L445" name="L445"></a> 445 
<a id="L446" name="L446"></a> 446 
<div class="comment">
      The date:day-in-week function returns the day of the week given in a
      date as a number. If no argument is given, then the current local date/time,
      as returned by date:date-time is used the default argument.
      The date/time string specified as the argument is a right-truncated string
      in the format defined as the lexical representation of xs:dateTime in one
      of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
           xs:dateTime (CCYY-MM-DDThh:mm:ss)
           xs:date (CCYY-MM-DD)
      If the date/time string is not in one of these formats, then NaN is returned.
                            The numbering of days of the week starts at 1 for Sunday, 2 for Monday and so on up to 7 for Saturday.</div>
<a id="L461" name="L461"></a> 461     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> dayInWeek(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L462" name="L462"></a> 462       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L463" name="L463"></a> 463     <em class="brace">{</em>
<a id="L464" name="L464"></a> 464       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L465" name="L465"></a> 465       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L466" name="L466"></a> 466       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L467" name="L467"></a> 467         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L468" name="L468"></a> 468 
<a id="L469" name="L469"></a> 469       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L470" name="L470"></a> 470       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>);
<a id="L471" name="L471"></a> 471     <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<div class="comment">
      See above.</div>
<a id="L476" name="L476"></a> 476     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> dayInWeek()
<a id="L477" name="L477"></a> 477     <em class="brace">{</em>
<a id="L478" name="L478"></a> 478        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L479" name="L479"></a> 479       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L346" title="Defined at 346 in src/java/time/temporal/ChronoField.java.">DAY_OF_WEEK</a>);
<a id="L480" name="L480"></a> 480    <em class="brace">}</em>
<a id="L481" name="L481"></a> 481 
<div class="comment">
      The date:hour-in-day function returns the hour of the day as a number.
      If no argument is given, then the current local date/time, as returned
      by date:date-time is used the default argument.
      The date/time string specified as the argument is a right-truncated
      string  in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
          xs:dateTime (CCYY-MM-DDThh:mm:ss)
          xs:time (hh:mm:ss)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L495" name="L495"></a> 495     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> hourInDay(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L496" name="L496"></a> 496       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L497" name="L497"></a> 497     <em class="brace">{</em>
<a id="L498" name="L498"></a> 498       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L499" name="L499"></a> 499       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L500" name="L500"></a> 500       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L501" name="L501"></a> 501         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L502" name="L502"></a> 502 
<a id="L503" name="L503"></a> 503       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, t<em class="brace">}</em>;
<a id="L504" name="L504"></a> 504       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>);
<a id="L505" name="L505"></a> 505     <em class="brace">}</em>
<a id="L506" name="L506"></a> 506 
<div class="comment">
      See above.</div>
<a id="L510" name="L510"></a> 510     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> hourInDay()
<a id="L511" name="L511"></a> 511     <em class="brace">{</em>
<a id="L512" name="L512"></a> 512        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L513" name="L513"></a> 513       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L303" title="Defined at 303 in src/java/time/temporal/ChronoField.java.">HOUR_OF_DAY</a>);
<a id="L514" name="L514"></a> 514    <em class="brace">}</em>
<a id="L515" name="L515"></a> 515 
<div class="comment">
      The date:minute-in-hour function returns the minute of the hour
      as a number. If no argument is given, then the current local
      date/time, as returned by date:date-time is used the default argument.
      The date/time string specified as the argument is a right-truncated
      string in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
           xs:dateTime (CCYY-MM-DDThh:mm:ss)
           xs:time (hh:mm:ss)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L529" name="L529"></a> 529     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> minuteInHour(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L530" name="L530"></a> 530       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L531" name="L531"></a> 531     <em class="brace">{</em>
<a id="L532" name="L532"></a> 532       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L533" name="L533"></a> 533       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L534" name="L534"></a> 534       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L535" name="L535"></a> 535         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L536" name="L536"></a> 536 
<a id="L537" name="L537"></a> 537       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt,t<em class="brace">}</em>;
<a id="L538" name="L538"></a> 538       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.MINUTE);
<a id="L539" name="L539"></a> 539     <em class="brace">}</em>
<a id="L540" name="L540"></a> 540 
<div class="comment">
      See above.</div>
<a id="L544" name="L544"></a> 544    <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> minuteInHour()
<a id="L545" name="L545"></a> 545     <em class="brace">{</em>
<a id="L546" name="L546"></a> 546        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L547" name="L547"></a> 547       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.MINUTE);
<a id="L548" name="L548"></a> 548    <em class="brace">}</em>
<a id="L549" name="L549"></a> 549 
<div class="comment">
      The date:second-in-minute function returns the second of the minute
      as a number. If no argument is given, then the current local
      date/time, as returned by date:date-time is used the default argument.
      The date/time string specified as the argument is a right-truncated
      string in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
           xs:dateTime (CCYY-MM-DDThh:mm:ss)
           xs:time (hh:mm:ss)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L563" name="L563"></a> 563     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> secondInMinute(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L564" name="L564"></a> 564       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L565" name="L565"></a> 565     <em class="brace">{</em>
<a id="L566" name="L566"></a> 566       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L567" name="L567"></a> 567       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L568" name="L568"></a> 568       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L569" name="L569"></a> 569         <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L570" name="L570"></a> 570 
<a id="L571" name="L571"></a> 571       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, t<em class="brace">}</em>;
<a id="L572" name="L572"></a> 572       <strong class="reserved">return</strong> <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SECOND);
<a id="L573" name="L573"></a> 573     <em class="brace">}</em>
<a id="L574" name="L574"></a> 574 
<div class="comment">
      See above.</div>
<a id="L578" name="L578"></a> 578     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> secondInMinute()
<a id="L579" name="L579"></a> 579     <em class="brace">{</em>
<a id="L580" name="L580"></a> 580        <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L581" name="L581"></a> 581       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SECOND);
<a id="L582" name="L582"></a> 582     <em class="brace">}</em>
<a id="L583" name="L583"></a> 583 
<div class="comment">
      The date:leap-year function returns true if the year given in a date
      is a leap year. If no argument is given, then the current local
      date/time, as returned by date:date-time is used as a default argument.
      The date/time string specified as the first argument must be a
      right-truncated string in the format defined as the lexical representation
      of xs:dateTime in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
         xs:dateTime (CCYY-MM-DDThh:mm:ss)
         xs:date (CCYY-MM-DD)
         xs:gYearMonth (CCYY-MM)
         xs:gYear (CCYY)
      If the date/time string is not in one of these formats, then NaN is returned.</div>
<a id="L599" name="L599"></a> 599     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../R/22459.html" title="Multiple referred from 4 places.">leapYear</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L600" name="L600"></a> 600       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L601" name="L601"></a> 601     <em class="brace">{</em>
<a id="L602" name="L602"></a> 602       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L603" name="L603"></a> 603       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L604" name="L604"></a> 604       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L605" name="L605"></a> 605         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4902.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/objects/XNumber.java.">XNumber</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN);
<a id="L606" name="L606"></a> 606 
<a id="L607" name="L607"></a> 607       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt, d, gym, gy<em class="brace">}</em>;
<a id="L608" name="L608"></a> 608       <strong class="reserved">double</strong> dbl = <a href="../D/21078.html" title="Multiple defined in 3 places.">getNumber</a>(datetime, formats, <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>);
<a id="L609" name="L609"></a> 609       <strong class="reserved">if</strong> (dbl == <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN)
<a id="L610" name="L610"></a> 610         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4902.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/objects/XNumber.java.">XNumber</a>(<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN);
<a id="L611" name="L611"></a> 611       <strong class="reserved">int</strong> yr = (<strong class="reserved">int</strong>)dbl;
<a id="L612" name="L612"></a> 612       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4908.html#L30" title="Defined at 30 in src/com/sun/org/apache/xpath/internal/objects/XBoolean.java.">XBoolean</a>(yr % 400 == 0 || (yr % 100 != 0 &amp;&amp; yr % 4 == 0));
<a id="L613" name="L613"></a> 613     <em class="brace">}</em>
<a id="L614" name="L614"></a> 614 
<div class="comment">
      See above.</div>
<a id="L618" name="L618"></a> 618     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22459.html" title="Multiple referred from 4 places.">leapYear</a>()
<a id="L619" name="L619"></a> 619     <em class="brace">{</em>
<a id="L620" name="L620"></a> 620       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L621" name="L621"></a> 621       <strong class="reserved">int</strong> yr = (<strong class="reserved">int</strong>)cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../S/1483.html#L545" title="Defined at 545 in src/java/time/temporal/ChronoField.java.">YEAR</a>);
<a id="L622" name="L622"></a> 622       <strong class="reserved">return</strong> (yr % 400 == 0 || (yr % 100 != 0 &amp;&amp; yr % 4 == 0));
<a id="L623" name="L623"></a> 623     <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<div class="comment">
      The date:month-name function returns the full name of the month of a date.
      If no argument is given, then the current local date/time, as returned by
      date:date-time is used the default argument.
      The date/time string specified as the argument is a left or right-truncated
      string in the format defined as the lexical representation of xs:dateTime in
       one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
         xs:dateTime (CCYY-MM-DDThh:mm:ss)
         xs:date (CCYY-MM-DD)
         xs:gYearMonth (CCYY-MM)
         xs:gMonth (--MM--)
      If the date/time string is not in one of these formats, then an empty string ('')
      is returned.
      The result is an English month name: one of 'January', 'February', 'March',
      'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November'
      or 'December'.</div>
<a id="L644" name="L644"></a> 644     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> monthName(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L645" name="L645"></a> 645       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L646" name="L646"></a> 646     <em class="brace">{</em>
<a id="L647" name="L647"></a> 647       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L648" name="L648"></a> 648       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L649" name="L649"></a> 649       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L650" name="L650"></a> 650         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L651" name="L651"></a> 651 
<a id="L652" name="L652"></a> 652       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn = <em class="brace">{</em>dt, d, gym, gm<em class="brace">}</em>;
<a id="L653" name="L653"></a> 653       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut = "MMMM";
<a id="L654" name="L654"></a> 654       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(datetimeIn, formatsIn, formatOut);
<a id="L655" name="L655"></a> 655     <em class="brace">}</em>
<a id="L656" name="L656"></a> 656 
<div class="comment">
      See above.</div>
<a id="L660" name="L660"></a> 660     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> monthName()
<a id="L661" name="L661"></a> 661     <em class="brace">{</em>
<a id="L662" name="L662"></a> 662       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L663" name="L663"></a> 663       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> = "MMMM";
<a id="L664" name="L664"></a> 664       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>);
<a id="L665" name="L665"></a> 665     <em class="brace">}</em>
<a id="L666" name="L666"></a> 666 
<div class="comment">
      The date:month-abbreviation function returns the abbreviation of the month of
      a date. If no argument is given, then the current local date/time, as returned
      by date:date-time is used the default argument.
      The date/time string specified as the argument is a left or right-truncated
      string in the format defined as the lexical representation of xs:dateTime in
      one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
         xs:dateTime (CCYY-MM-DDThh:mm:ss)
         xs:date (CCYY-MM-DD)
         xs:gYearMonth (CCYY-MM)
         xs:gMonth (--MM--)
      If the date/time string is not in one of these formats, then an empty string ('')
      is returned.
      The result is a three-letter English month abbreviation: one of 'Jan', 'Feb', 'Mar',
      'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov' or 'Dec'.
      An implementation of this extension function in the EXSLT date namespace must conform
      to the behaviour described in this document.</div>
<a id="L687" name="L687"></a> 687     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> monthAbbreviation(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L688" name="L688"></a> 688       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L689" name="L689"></a> 689     <em class="brace">{</em>
<a id="L690" name="L690"></a> 690       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L691" name="L691"></a> 691       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L692" name="L692"></a> 692       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L693" name="L693"></a> 693         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L694" name="L694"></a> 694 
<a id="L695" name="L695"></a> 695       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn = <em class="brace">{</em>dt, d, gym, gm<em class="brace">}</em>;
<a id="L696" name="L696"></a> 696       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut = "MMM";
<a id="L697" name="L697"></a> 697       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(datetimeIn, formatsIn, formatOut);
<a id="L698" name="L698"></a> 698     <em class="brace">}</em>
<a id="L699" name="L699"></a> 699 
<div class="comment">
      See above.</div>
<a id="L703" name="L703"></a> 703     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> monthAbbreviation()
<a id="L704" name="L704"></a> 704     <em class="brace">{</em>
<a id="L705" name="L705"></a> 705       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> = "MMM";
<a id="L706" name="L706"></a> 706       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>);
<a id="L707" name="L707"></a> 707     <em class="brace">}</em>
<a id="L708" name="L708"></a> 708 
<div class="comment">
      The date:day-name function returns the full name of the day of the week
      of a date.  If no argument is given, then the current local date/time,
      as returned by date:date-time is used the default argument.
      The date/time string specified as the argument is a left or right-truncated
      string in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
          xs:dateTime (CCYY-MM-DDThh:mm:ss)
          xs:date (CCYY-MM-DD)
      If the date/time string is not in one of these formats, then the empty string ('')
      is returned.
      The result is an English day name: one of 'Sunday', 'Monday', 'Tuesday', 'Wednesday',
      'Thursday' or 'Friday'.
      An implementation of this extension function in the EXSLT date namespace must conform
      to the behaviour described in this document.</div>
<a id="L727" name="L727"></a> 727     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dayName(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L728" name="L728"></a> 728       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L729" name="L729"></a> 729     <em class="brace">{</em>
<a id="L730" name="L730"></a> 730       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L731" name="L731"></a> 731       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L732" name="L732"></a> 732       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L733" name="L733"></a> 733         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L734" name="L734"></a> 734 
<a id="L735" name="L735"></a> 735       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn = <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L736" name="L736"></a> 736       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut = "EEEE";
<a id="L737" name="L737"></a> 737       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(datetimeIn, formatsIn, formatOut);
<a id="L738" name="L738"></a> 738     <em class="brace">}</em>
<a id="L739" name="L739"></a> 739 
<div class="comment">
      See above.</div>
<a id="L743" name="L743"></a> 743     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dayName()
<a id="L744" name="L744"></a> 744     <em class="brace">{</em>
<a id="L745" name="L745"></a> 745       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> = "EEEE";
<a id="L746" name="L746"></a> 746       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>);
<a id="L747" name="L747"></a> 747     <em class="brace">}</em>
<a id="L748" name="L748"></a> 748 
<div class="comment">
      The date:day-abbreviation function returns the abbreviation of the day
      of the week of a date. If no argument is given, then the current local
      date/time, as returned  by date:date-time is used the default argument.
      The date/time string specified as the argument is a left or right-truncated
      string in the format defined as the lexical representation of xs:dateTime
      in one of the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
          xs:dateTime (CCYY-MM-DDThh:mm:ss)
          xs:date (CCYY-MM-DD)
      If the date/time string is not in one of these formats, then the empty string
      ('') is returned.
      The result is a three-letter English day abbreviation: one of 'Sun', 'Mon', 'Tue',
      'Wed', 'Thu' or 'Fri'.
      An implementation of this extension function in the EXSLT date namespace must conform
      to the behaviour described in this document.</div>
<a id="L767" name="L767"></a> 767     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dayAbbreviation(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetimeIn)
<a id="L768" name="L768"></a> 768       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L769" name="L769"></a> 769     <em class="brace">{</em>
<a id="L770" name="L770"></a> 770       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] edz = <a href="../S/6265.html#L794" title="Defined at 794 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getEraDatetimeZone</a>(datetimeIn);
<a id="L771" name="L771"></a> 771       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = edz[1];
<a id="L772" name="L772"></a> 772       <strong class="reserved">if</strong> (datetime == <strong class="reserved">null</strong>)
<a id="L773" name="L773"></a> 773         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L774" name="L774"></a> 774 
<a id="L775" name="L775"></a> 775       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn = <em class="brace">{</em>dt, d<em class="brace">}</em>;
<a id="L776" name="L776"></a> 776       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut = "EEE";
<a id="L777" name="L777"></a> 777       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(datetimeIn, formatsIn, formatOut);
<a id="L778" name="L778"></a> 778     <em class="brace">}</em>
<a id="L779" name="L779"></a> 779 
<div class="comment">
      See above.</div>
<a id="L783" name="L783"></a> 783     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dayAbbreviation()
<a id="L784" name="L784"></a> 784     <em class="brace">{</em>
<a id="L785" name="L785"></a> 785       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a> = "EEE";
<a id="L786" name="L786"></a> 786       <strong class="reserved">return</strong> <a href="../D/20792.html" title="Multiple defined in 2 places.">getNameOrAbbrev</a>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>);
<a id="L787" name="L787"></a> 787     <em class="brace">}</em>
<a id="L788" name="L788"></a> 788 
<div class="comment">
      Returns an array with the 3 components that a datetime input string
      may contain: - (for BC era), datetime, and zone. If the zone is not
      valid, return null for that component.</div>
<a id="L794" name="L794"></a> 794     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/16425.html" title="Multiple referred from 17 places.">getEraDatetimeZone</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>)
<a id="L795" name="L795"></a> 795     <em class="brace">{</em>
<a id="L796" name="L796"></a> 796       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> leader = "";
<a id="L797" name="L797"></a> 797       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L798" name="L798"></a> 798       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = "";
<a id="L799" name="L799"></a> 799       <strong class="reserved">if</strong> (<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0)=='-' &amp;&amp; !<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("--"))
<a id="L800" name="L800"></a> 800       <em class="brace">{</em>
<a id="L801" name="L801"></a> 801         leader = "-"; <em class="comment">//  '+' is implicit , not allowed</em>
<a id="L802" name="L802"></a> 802         datetime = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(1);
<a id="L803" name="L803"></a> 803       <em class="brace">}</em>
<a id="L804" name="L804"></a> 804       <strong class="reserved">int</strong> z = <a href="../S/6265.html#L822" title="Defined at 822 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">getZoneStart</a>(datetime);
<a id="L805" name="L805"></a> 805       <strong class="reserved">if</strong> (z &gt; 0)
<a id="L806" name="L806"></a> 806       <em class="brace">{</em>
<a id="L807" name="L807"></a> 807         <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = datetime.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(z);
<a id="L808" name="L808"></a> 808         datetime = datetime.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, z);
<a id="L809" name="L809"></a> 809       <em class="brace">}</em>
<a id="L810" name="L810"></a> 810       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (z == -2)
<a id="L811" name="L811"></a> 811         <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = <strong class="reserved">null</strong>;
<a id="L812" name="L812"></a> 812       <em class="comment">//System.out.println("'" + leader + "' " + datetime + " " + zone);</em>
<a id="L813" name="L813"></a> 813       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[]<em class="brace">{</em>leader, datetime, <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a><em class="brace">}</em>;
<a id="L814" name="L814"></a> 814     <em class="brace">}</em>
<a id="L815" name="L815"></a> 815 
<div class="comment">
      Get the start of zone information if the input ends
      with 'Z' or +/-hh:mm. If a zone string is not
      found, return -1; if the zone string is invalid,
      return -2.</div>
<a id="L822" name="L822"></a> 822     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/19960.html" title="Multiple referred from 2 places.">getZoneStart</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> datetime)
<a id="L823" name="L823"></a> 823     <em class="brace">{</em>
<a id="L824" name="L824"></a> 824       <strong class="reserved">if</strong> (datetime.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("Z") == datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-1)
<a id="L825" name="L825"></a> 825         <strong class="reserved">return</strong> datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-1;
<a id="L826" name="L826"></a> 826       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt;=6
<a id="L827" name="L827"></a> 827                 &amp;&amp; datetime.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-3) == ':'
<a id="L828" name="L828"></a> 828                 &amp;&amp; (datetime.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6) == '+'
<a id="L829" name="L829"></a> 829                     || datetime.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6) == '-'))
<a id="L830" name="L830"></a> 830       <em class="brace">{</em>
<a id="L831" name="L831"></a> 831         <strong class="reserved">try</strong>
<a id="L832" name="L832"></a> 832         <em class="brace">{</em>
<a id="L833" name="L833"></a> 833           <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>("HH:mm");
<a id="L834" name="L834"></a> 834           dateFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L835" name="L835"></a> 835           <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = dateFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(datetime.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() -5));
<a id="L836" name="L836"></a> 836           <strong class="reserved">return</strong> datetime.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6;
<a id="L837" name="L837"></a> 837         <em class="brace">}</em>
<a id="L838" name="L838"></a> 838         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L839" name="L839"></a> 839         <em class="brace">{</em>
<a id="L840" name="L840"></a> 840           <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("ParseException " + pe.<a href="../S/2469.html#L72" title="Defined at 72 in src/java/text/ParseException.java.">getErrorOffset</a>());
<a id="L841" name="L841"></a> 841           <strong class="reserved">return</strong> -2; <em class="comment">// Invalid.</em>
<a id="L842" name="L842"></a> 842         <em class="brace">}</em>
<a id="L843" name="L843"></a> 843 
<a id="L844" name="L844"></a> 844       <em class="brace">}</em>
<a id="L845" name="L845"></a> 845         <strong class="reserved">return</strong> -1; <em class="comment">// No zone information.</em>
<a id="L846" name="L846"></a> 846     <em class="brace">}</em>
<a id="L847" name="L847"></a> 847 
<div class="comment">
      Attempt to parse an input string with the allowed formats, returning
      null if none of the formats work.</div>
<a id="L852" name="L852"></a> 852     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../R/29140.html" title="Multiple referred from 3 places.">testFormats</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats)
<a id="L853" name="L853"></a> 853       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L854" name="L854"></a> 854     <em class="brace">{</em>
<a id="L855" name="L855"></a> 855       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt;formats.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L856" name="L856"></a> 856       <em class="brace">{</em>
<a id="L857" name="L857"></a> 857         <strong class="reserved">try</strong>
<a id="L858" name="L858"></a> 858         <em class="brace">{</em>
<a id="L859" name="L859"></a> 859           <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(formats[i]);
<a id="L860" name="L860"></a> 860           dateFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L861" name="L861"></a> 861           <strong class="reserved">return</strong> dateFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>);
<a id="L862" name="L862"></a> 862         <em class="brace">}</em>
<a id="L863" name="L863"></a> 863         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L864" name="L864"></a> 864         <em class="brace">{</em>
<a id="L865" name="L865"></a> 865         <em class="brace">}</em>
<a id="L866" name="L866"></a> 866       <em class="brace">}</em>
<a id="L867" name="L867"></a> 867       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L868" name="L868"></a> 868     <em class="brace">}</em>
<a id="L869" name="L869"></a> 869 
<a id="L870" name="L870"></a> 870 
<div class="comment">
      Parse the input string and return the corresponding calendar field
      number.</div>
<a id="L875" name="L875"></a> 875     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">double</strong> <a href="../R/18050.html" title="Multiple referred from 22 places.">getNumber</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats, <strong class="reserved">int</strong> calField)
<a id="L876" name="L876"></a> 876       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L877" name="L877"></a> 877     <em class="brace">{</em>
<a id="L878" name="L878"></a> 878       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L879" name="L879"></a> 879       cal.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L880" name="L880"></a> 880       <em class="comment">// Try the allowed formats, from longest to shortest.</em>
<a id="L881" name="L881"></a> 881       <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = <a href="../S/6265.html#L852" title="Defined at 852 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">testFormats</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>, formats);
<a id="L882" name="L882"></a> 882       <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>.NaN;
<a id="L883" name="L883"></a> 883       cal.<a href="../D/34137.html" title="Multiple defined in 25 places.">setTime</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L884" name="L884"></a> 884       <strong class="reserved">return</strong> cal.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(calField);
<a id="L885" name="L885"></a> 885     <em class="brace">}</em>
<a id="L886" name="L886"></a> 886 
<div class="comment">
       Get the full name or abbreviation of the month or day.</div>
<a id="L890" name="L890"></a> 890     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17832.html" title="Multiple referred from 8 places.">getNameOrAbbrev</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>,
<a id="L891" name="L891"></a> 891                                          <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formatsIn,
<a id="L892" name="L892"></a> 892                                          <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatOut)
<a id="L893" name="L893"></a> 893       <strong class="reserved">throws</strong> <a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a>
<a id="L894" name="L894"></a> 894     <em class="brace">{</em>
<a id="L895" name="L895"></a> 895       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt;formatsIn.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="comment">// from longest to shortest.</em>
<a id="L896" name="L896"></a> 896       <em class="brace">{</em>
<a id="L897" name="L897"></a> 897         <strong class="reserved">try</strong>
<a id="L898" name="L898"></a> 898         <em class="brace">{</em>
<a id="L899" name="L899"></a> 899           <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(formatsIn[i], <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH);
<a id="L900" name="L900"></a> 900           dateFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L901" name="L901"></a> 901           <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> dt = dateFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>);
<a id="L902" name="L902"></a> 902           dateFormat.<a href="../D/11458.html" title="Multiple defined in 5 places.">applyPattern</a>(formatOut);
<a id="L903" name="L903"></a> 903           <strong class="reserved">return</strong> dateFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(dt);
<a id="L904" name="L904"></a> 904         <em class="brace">}</em>
<a id="L905" name="L905"></a> 905         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L906" name="L906"></a> 906         <em class="brace">{</em>
<a id="L907" name="L907"></a> 907         <em class="brace">}</em>
<a id="L908" name="L908"></a> 908       <em class="brace">}</em>
<a id="L909" name="L909"></a> 909       <strong class="reserved">return</strong> "";
<a id="L910" name="L910"></a> 910     <em class="brace">}</em>
<div class="comment">
      Get the full name or abbreviation for the current month or day
      (no input string).</div>
<a id="L915" name="L915"></a> 915     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17832.html" title="Multiple referred from 8 places.">getNameOrAbbrev</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>)
<a id="L916" name="L916"></a> 916     <em class="brace">{</em>
<a id="L917" name="L917"></a> 917       <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a> cal = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>();
<a id="L918" name="L918"></a> 918       <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> dateFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>, <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.ENGLISH);
<a id="L919" name="L919"></a> 919       <strong class="reserved">return</strong> dateFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(cal.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>());
<a id="L920" name="L920"></a> 920     <em class="brace">}</em>
<a id="L921" name="L921"></a> 921 
<div class="comment">
      The date:format-date function formats a date/time according to a pattern.
      <p>
      The first argument to date:format-date specifies the date/time to be
      formatted. It must be right or left-truncated date/time strings in one of
      the formats defined in
      <a href="http://www.w3.org/TR/xmlschema-2/">[XML Schema Part 2: Datatypes]</a>.
      The permitted formats are as follows:
      </p><ul><li>xs:dateTime (CCYY-MM-DDThh:mm:ss)
      </li><li>xs:date (CCYY-MM-DD)
      </li><li>xs:time (hh:mm:ss)
      </li><li>xs:gYearMonth (CCYY-MM)
      </li><li>xs:gYear (CCYY)
      </li><li>xs:gMonthDay (--MM-DD)
      </li><li>xs:gMonth (--MM--)
      </li><li>xs:gDay (---DD)
      </li></ul>
      The second argument is a string that gives the format pattern used to
      format the date. The format pattern must be in the syntax specified by
      the JDK 1.1 SimpleDateFormat class. The format pattern string is
      interpreted as described for the JDK 1.1 SimpleDateFormat class.
      <p>
      If the date/time format is right-truncated (i.e. in a format other than
      xs:time, or xs:dateTime) then any missing components are assumed to be as
      follows: if no month is specified, it is given a month of 01; if no day
      is specified, it is given a day of 01; if no time is specified, it is
      given a time of 00:00:00.
      </p><p>
      If the date/time format is left-truncated (i.e. xs:time, xs:gMonthDay,
      xs:gMonth or xs:gDay) and the format pattern has a token that uses a
      component that is missing from the date/time format used, then that token
      is replaced with an empty string ('') within the result.
      The author is Helg Bredow (helg.bredow@kalido.com)</p></div>
<a id="L958" name="L958"></a> 958     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> formatDate(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>)
<a id="L959" name="L959"></a> 959     <em class="brace">{</em>
<a id="L960" name="L960"></a> 960         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> yearSymbols = "Gy";
<a id="L961" name="L961"></a> 961         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> monthSymbols = "M";
<a id="L962" name="L962"></a> 962         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> daySymbols = "dDEFwW";
<a id="L963" name="L963"></a> 963         <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> timeZone;
<a id="L964" name="L964"></a> 964         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>;
<a id="L965" name="L965"></a> 965 
<a id="L966" name="L966"></a> 966         <em class="comment">// Get the timezone information if it was supplied and modify the</em>
<a id="L967" name="L967"></a> 967         <em class="comment">// dateTime so that SimpleDateFormat will understand it.</em>
<a id="L968" name="L968"></a> 968         <strong class="reserved">if</strong> (<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>("Z") || <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>("z"))
<a id="L969" name="L969"></a> 969         <em class="brace">{</em>
<a id="L970" name="L970"></a> 970             timeZone = <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.<a href="../D/23152.html" title="Multiple defined in 10 places.">getTimeZone</a>("GMT");
<a id="L971" name="L971"></a> 971             <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a> = <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-1) + "GMT";
<a id="L972" name="L972"></a> 972             <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = "z";
<a id="L973" name="L973"></a> 973         <em class="brace">}</em>
<a id="L974" name="L974"></a> 974         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt;= 6)
<a id="L975" name="L975"></a> 975                  &amp;&amp; (<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-3) == ':')
<a id="L976" name="L976"></a> 976                  &amp;&amp; ((<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6) == '+')
<a id="L977" name="L977"></a> 977                     || (<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6) == '-')))
<a id="L978" name="L978"></a> 978         <em class="brace">{</em>
<a id="L979" name="L979"></a> 979             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6);
<a id="L980" name="L980"></a> 980 
<a id="L981" name="L981"></a> 981             <strong class="reserved">if</strong> ("+00:00".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) || "-00:00".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>))
<a id="L982" name="L982"></a> 982             <em class="brace">{</em>
<a id="L983" name="L983"></a> 983                 timeZone = <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.<a href="../D/23152.html" title="Multiple defined in 10 places.">getTimeZone</a>("GMT");
<a id="L984" name="L984"></a> 984             <em class="brace">}</em>
<a id="L985" name="L985"></a> 985             <strong class="reserved">else</strong>
<a id="L986" name="L986"></a> 986             <em class="brace">{</em>
<a id="L987" name="L987"></a> 987                 timeZone = <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.<a href="../D/23152.html" title="Multiple defined in 10 places.">getTimeZone</a>("GMT" + <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L988" name="L988"></a> 988             <em class="brace">}</em>
<a id="L989" name="L989"></a> 989             <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = "z";
<a id="L990" name="L990"></a> 990             <em class="comment">// Need to adjust it since SimpleDateFormat requires GMT+hh:mm but</em>
<a id="L991" name="L991"></a> 991             <em class="comment">// we have +hh:mm.</em>
<a id="L992" name="L992"></a> 992             <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a> = <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-6) + "GMT" + <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L993" name="L993"></a> 993         <em class="brace">}</em>
<a id="L994" name="L994"></a> 994         <strong class="reserved">else</strong>
<a id="L995" name="L995"></a> 995         <em class="brace">{</em>
<a id="L996" name="L996"></a> 996             <em class="comment">// Assume local time.</em>
<a id="L997" name="L997"></a> 997             timeZone = <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>();
<a id="L998" name="L998"></a> 998             <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a> = "";
<a id="L999" name="L999"></a> 999             <em class="comment">// Leave off the timezone since SimpleDateFormat will assume local</em>
<a id="L1000" name="L1000"></a>1000             <em class="comment">// time if time zone is not included.</em>
<a id="L1001" name="L1001"></a>1001         <em class="brace">}</em>
<a id="L1002" name="L1002"></a>1002         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] formats = <em class="brace">{</em>dt + <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>, d, gym, gy<em class="brace">}</em>;
<a id="L1003" name="L1003"></a>1003 
<a id="L1004" name="L1004"></a>1004         <em class="comment">// Try the time format first. We need to do this to prevent</em>
<a id="L1005" name="L1005"></a>1005         <em class="comment">// SimpleDateFormat from interpreting a time as a year. i.e we just need</em>
<a id="L1006" name="L1006"></a>1006         <em class="comment">// to check if it's a time before we check it's a year.</em>
<a id="L1007" name="L1007"></a>1007         <strong class="reserved">try</strong>
<a id="L1008" name="L1008"></a>1008         <em class="brace">{</em>
<a id="L1009" name="L1009"></a>1009             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> inFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(t + <a href="../S/1481.html#L267" title="Defined at 267 in src/java/time/temporal/TemporalQueries.java.">zone</a>);
<a id="L1010" name="L1010"></a>1010             inFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L1011" name="L1011"></a>1011             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d= inFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>);
<a id="L1012" name="L1012"></a>1012             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> outFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(<a href="../S/6265.html#L1087" title="Defined at 1087 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">strip</a>
<a id="L1013" name="L1013"></a>1013                 (yearSymbols + monthSymbols + daySymbols, <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>));
<a id="L1014" name="L1014"></a>1014             outFormat.<a href="../D/34143.html" title="Multiple defined in 5 places.">setTimeZone</a>(timeZone);
<a id="L1015" name="L1015"></a>1015             <strong class="reserved">return</strong> outFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(d);
<a id="L1016" name="L1016"></a>1016         <em class="brace">}</em>
<a id="L1017" name="L1017"></a>1017         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L1018" name="L1018"></a>1018         <em class="brace">{</em>
<a id="L1019" name="L1019"></a>1019         <em class="brace">}</em>
<a id="L1020" name="L1020"></a>1020 
<a id="L1021" name="L1021"></a>1021         <em class="comment">// Try the right truncated formats.</em>
<a id="L1022" name="L1022"></a>1022         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; formats.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L1023" name="L1023"></a>1023         <em class="brace">{</em>
<a id="L1024" name="L1024"></a>1024             <strong class="reserved">try</strong>
<a id="L1025" name="L1025"></a>1025             <em class="brace">{</em>
<a id="L1026" name="L1026"></a>1026                 <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> inFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(formats[i]);
<a id="L1027" name="L1027"></a>1027                 inFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L1028" name="L1028"></a>1028                 <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = inFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>);
<a id="L1029" name="L1029"></a>1029                 <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> outFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>);
<a id="L1030" name="L1030"></a>1030                 outFormat.<a href="../D/34143.html" title="Multiple defined in 5 places.">setTimeZone</a>(timeZone);
<a id="L1031" name="L1031"></a>1031                 <strong class="reserved">return</strong> outFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(d);
<a id="L1032" name="L1032"></a>1032             <em class="brace">}</em>
<a id="L1033" name="L1033"></a>1033             <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L1034" name="L1034"></a>1034             <em class="brace">{</em>
<a id="L1035" name="L1035"></a>1035             <em class="brace">}</em>
<a id="L1036" name="L1036"></a>1036         <em class="brace">}</em>
<a id="L1037" name="L1037"></a>1037 
<a id="L1038" name="L1038"></a>1038         <em class="comment">// Now try the left truncated ones. The Java format() function doesn't</em>
<a id="L1039" name="L1039"></a>1039         <em class="comment">// return the correct strings in this case. We strip any pattern</em>
<a id="L1040" name="L1040"></a>1040         <em class="comment">// symbols that shouldn't be output so that they are not defaulted to</em>
<a id="L1041" name="L1041"></a>1041         <em class="comment">// inappropriate values in the output.</em>
<a id="L1042" name="L1042"></a>1042         <strong class="reserved">try</strong>
<a id="L1043" name="L1043"></a>1043         <em class="brace">{</em>
<a id="L1044" name="L1044"></a>1044             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> inFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(gmd);
<a id="L1045" name="L1045"></a>1045             inFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L1046" name="L1046"></a>1046             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = inFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>);
<a id="L1047" name="L1047"></a>1047             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> outFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(<a href="../S/6265.html#L1087" title="Defined at 1087 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">strip</a>(yearSymbols, <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>));
<a id="L1048" name="L1048"></a>1048             outFormat.<a href="../D/34143.html" title="Multiple defined in 5 places.">setTimeZone</a>(timeZone);
<a id="L1049" name="L1049"></a>1049             <strong class="reserved">return</strong> outFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(d);
<a id="L1050" name="L1050"></a>1050         <em class="brace">}</em>
<a id="L1051" name="L1051"></a>1051         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L1052" name="L1052"></a>1052         <em class="brace">{</em>
<a id="L1053" name="L1053"></a>1053         <em class="brace">}</em>
<a id="L1054" name="L1054"></a>1054         <strong class="reserved">try</strong>
<a id="L1055" name="L1055"></a>1055         <em class="brace">{</em>
<a id="L1056" name="L1056"></a>1056             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> inFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(gm);
<a id="L1057" name="L1057"></a>1057             inFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L1058" name="L1058"></a>1058             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = inFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>);
<a id="L1059" name="L1059"></a>1059             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> outFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(<a href="../S/6265.html#L1087" title="Defined at 1087 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">strip</a>(yearSymbols, <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>));
<a id="L1060" name="L1060"></a>1060             outFormat.<a href="../D/34143.html" title="Multiple defined in 5 places.">setTimeZone</a>(timeZone);
<a id="L1061" name="L1061"></a>1061             <strong class="reserved">return</strong> outFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(d);
<a id="L1062" name="L1062"></a>1062         <em class="brace">}</em>
<a id="L1063" name="L1063"></a>1063         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L1064" name="L1064"></a>1064         <em class="brace">{</em>
<a id="L1065" name="L1065"></a>1065         <em class="brace">}</em>
<a id="L1066" name="L1066"></a>1066         <strong class="reserved">try</strong>
<a id="L1067" name="L1067"></a>1067         <em class="brace">{</em>
<a id="L1068" name="L1068"></a>1068             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> inFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(gd);
<a id="L1069" name="L1069"></a>1069             inFormat.<a href="../D/33078.html" title="Multiple defined in 3 places.">setLenient</a>(<strong class="reserved">false</strong>);
<a id="L1070" name="L1070"></a>1070             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = inFormat.<a href="../D/29076.html" title="Multiple defined in 178 places.">parse</a>(<a href="../S/6265.html#L78" title="Defined at 78 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">dateTime</a>);
<a id="L1071" name="L1071"></a>1071             <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a> outFormat = <strong class="reserved">new</strong> <a href="../S/2465.html#L421" title="Defined at 421 in src/java/text/SimpleDateFormat.java.">SimpleDateFormat</a>(<a href="../S/6265.html#L1087" title="Defined at 1087 in src/com/sun/org/apache/xalan/internal/lib/ExsltDatetime.java.">strip</a>(yearSymbols + monthSymbols, <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>));
<a id="L1072" name="L1072"></a>1072             outFormat.<a href="../D/34143.html" title="Multiple defined in 5 places.">setTimeZone</a>(timeZone);
<a id="L1073" name="L1073"></a>1073             <strong class="reserved">return</strong> outFormat.<a href="../D/16531.html" title="Multiple defined in 87 places.">format</a>(d);
<a id="L1074" name="L1074"></a>1074         <em class="brace">}</em>
<a id="L1075" name="L1075"></a>1075         <strong class="reserved">catch</strong> (<a href="../D/6624.html" title="Multiple defined in 3 places.">ParseException</a> pe)
<a id="L1076" name="L1076"></a>1076         <em class="brace">{</em>
<a id="L1077" name="L1077"></a>1077         <em class="brace">}</em>
<a id="L1078" name="L1078"></a>1078         <strong class="reserved">return</strong> EMPTY_STR;
<a id="L1079" name="L1079"></a>1079     <em class="brace">}</em>
<a id="L1080" name="L1080"></a>1080 
<div class="comment">
      Strips occurrences of the given character from a date format pattern.
      @param symbols list of symbols to strip.
      @param pattern
      @return</div>
<a id="L1087" name="L1087"></a>1087     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/28964.html" title="Multiple referred from 14 places.">strip</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> symbols, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>)
<a id="L1088" name="L1088"></a>1088     <em class="brace">{</em>
<a id="L1089" name="L1089"></a>1089         <strong class="reserved">int</strong> quoteSemaphore = 0;
<a id="L1090" name="L1090"></a>1090         <strong class="reserved">int</strong> i = 0;
<a id="L1091" name="L1091"></a>1091         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L1092" name="L1092"></a>1092 
<a id="L1093" name="L1093"></a>1093         <strong class="reserved">while</strong> (i &lt; <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>())
<a id="L1094" name="L1094"></a>1094         <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095             <strong class="reserved">char</strong> ch = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1096" name="L1096"></a>1096             <strong class="reserved">if</strong> (ch == '\'')
<a id="L1097" name="L1097"></a>1097             <em class="brace">{</em>
<a id="L1098" name="L1098"></a>1098                 <em class="comment">// Assume it's an openening quote so simply copy the quoted</em>
<a id="L1099" name="L1099"></a>1099                 <em class="comment">// text to the result. There is nothing to strip here.</em>
<a id="L1100" name="L1100"></a>1100                 <strong class="reserved">int</strong> endQuote = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('\'', i + 1);
<a id="L1101" name="L1101"></a>1101                 <strong class="reserved">if</strong> (endQuote == -1)
<a id="L1102" name="L1102"></a>1102                 <em class="brace">{</em>
<a id="L1103" name="L1103"></a>1103                     endQuote = <a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1104" name="L1104"></a>1104                 <em class="brace">}</em>
<a id="L1105" name="L1105"></a>1105                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/29283.html" title="Multiple defined in 2 places.">pattern</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(i, endQuote));
<a id="L1106" name="L1106"></a>1106                 i = endQuote++;
<a id="L1107" name="L1107"></a>1107             <em class="brace">}</em>
<a id="L1108" name="L1108"></a>1108             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (symbols.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(ch) &gt; -1)
<a id="L1109" name="L1109"></a>1109             <em class="brace">{</em>
<a id="L1110" name="L1110"></a>1110                 <em class="comment">// The char needs to be stripped.</em>
<a id="L1111" name="L1111"></a>1111                 i++;
<a id="L1112" name="L1112"></a>1112             <em class="brace">}</em>
<a id="L1113" name="L1113"></a>1113             <strong class="reserved">else</strong>
<a id="L1114" name="L1114"></a>1114             <em class="brace">{</em>
<a id="L1115" name="L1115"></a>1115                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch);
<a id="L1116" name="L1116"></a>1116                 i++;
<a id="L1117" name="L1117"></a>1117             <em class="brace">}</em>
<a id="L1118" name="L1118"></a>1118         <em class="brace">}</em>
<a id="L1119" name="L1119"></a>1119         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1120" name="L1120"></a>1120     <em class="brace">}</em>
<a id="L1121" name="L1121"></a>1121 
<a id="L1122" name="L1122"></a>1122 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L78">[^]</a><a href="#L1087">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/lang/invoke/MethodHandleNatives.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L46">[^]</a><a href="#L533">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L46" title="Defined at 46.">init</a></li>
<li><a href="#L47" title="Defined at 47.">expand</a></li>
<li><a href="#L48" title="Defined at 48.">resolve</a></li>
<li><a href="#L49" title="Defined at 49.">getMembers</a></li>
<li><a href="#L53" title="Defined at 53.">objectFieldOffset</a></li>
<li><a href="#L54" title="Defined at 54.">staticFieldOffset</a></li>
<li><a href="#L55" title="Defined at 55.">staticFieldBase</a></li>
<li><a href="#L56" title="Defined at 56.">getMemberVMInfo</a></li>
<li><a href="#L64" title="Defined at 64.">getConstant</a></li>
<li><a href="#L71" title="Defined at 71.">setCallSiteTargetNormal</a></li>
<li><a href="#L72" title="Defined at 72.">setCallSiteTargetVolatile</a></li>
<li><a href="#L74" title="Defined at 74.">registerNatives</a></li>
<li><a href="#L191" title="Defined at 191.">refKindIsValid</a></li>
<li><a href="#L194" title="Defined at 194.">refKindIsField</a></li>
<li><a href="#L198" title="Defined at 198.">refKindIsGetter</a></li>
<li><a href="#L202" title="Defined at 202.">refKindIsSetter</a></li>
<li><a href="#L205" title="Defined at 205.">refKindIsMethod</a></li>
<li><a href="#L208" title="Defined at 208.">refKindIsConstructor</a></li>
<li><a href="#L211" title="Defined at 211.">refKindHasReceiver</a></li>
<li><a href="#L215" title="Defined at 215.">refKindIsStatic</a></li>
<li><a href="#L218" title="Defined at 218.">refKindDoesDispatch</a></li>
<li><a href="#L234" title="Defined at 234.">refKindName</a></li>
<li><a href="#L250" title="Defined at 250.">getNamedCon</a></li>
<li><a href="#L251" title="Defined at 251.">verifyConstants</a></li>
<li><a href="#L287" title="Defined at 287.">linkCallSite</a></li>
<li><a href="#L302" title="Defined at 302.">linkCallSiteImpl</a></li>
<li><a href="#L321" title="Defined at 321.">linkCallSiteTracing</a></li>
<li><a href="#L348" title="Defined at 348.">findMethodHandleType</a></li>
<li><a href="#L419" title="Defined at 419.">linkMethod</a></li>
<li><a href="#L426" title="Defined at 426.">linkMethodImpl</a></li>
<li><a href="#L441" title="Defined at 441.">fixMethodType</a></li>
<li><a href="#L448" title="Defined at 448.">linkMethodTracing</a></li>
<li><a href="#L472" title="Defined at 472.">linkMethodHandleConstant</a></li>
<li><a href="#L502" title="Defined at 502.">initCauseFrom</a></li>
<li><a href="#L515" title="Defined at 515.">isCallerSensitive</a></li>
<li><a href="#L521" title="Defined at 521.">canBeCalledVirtual</a></li>
<li><a href="#L533" title="Defined at 533.">canBeCalledVirtual</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2008, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.lang.invoke.MethodHandles.Lookup;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.lang.reflect.Field;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> static java.lang.invoke.MethodHandleNatives.Constants.*;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> static java.lang.invoke.MethodHandleStatics.*;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> static java.lang.invoke.MethodHandles.Lookup.IMPL_LOOKUP;
<a id="L33" name="L33"></a>  33 
<div class="comment">
  The JVM interface for the method handles package is all here.
  This is an interface internal and private to an implementation of JSR 292.
  <em>This class is not part of the JSR 292 standard.</em>
  @author jrose</div>
<a id="L40" name="L40"></a>  40 <strong class="reserved">class</strong> <a href="../R/5118.html" title="Multiple referred from 55 places.">MethodHandleNatives</a> <em class="brace">{</em>
<a id="L41" name="L41"></a>  41 
<a id="L42" name="L42"></a>  42     <strong class="reserved">private</strong> MethodHandleNatives() <em class="brace">{</em> <em class="brace">}</em> <em class="comment">// static only</em>
<a id="L43" name="L43"></a>  43 
<a id="L44" name="L44"></a>  44     <em class="comment">/// MemberName support</em>
<a id="L45" name="L45"></a>  45 
<a id="L46" name="L46"></a>  46     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../R/20537.html" title="Multiple referred from 888 places.">init</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>);
<a id="L47" name="L47"></a>  47     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../R/14109.html" title="Multiple referred from 22 places.">expand</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self);
<a id="L48" name="L48"></a>  48     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> <a href="../R/26316.html" title="Multiple referred from 78 places.">resolve</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; caller) <strong class="reserved">throws</strong> <a href="../S/1739.html#L38" title="Defined at 38 in src/java/lang/LinkageError.java.">LinkageError</a>;
<a id="L49" name="L49"></a>  49     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../R/17640.html" title="Multiple referred from 8 places.">getMembers</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; defc, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> matchName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> matchSig,
<a id="L50" name="L50"></a>  50             <strong class="reserved">int</strong> matchFlags, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; caller, <strong class="reserved">int</strong> <a href="../D/34598.html" title="Multiple defined in 46 places.">skip</a>, <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a>[] results);
<a id="L51" name="L51"></a>  51 
<a id="L52" name="L52"></a>  52     <em class="comment">/// Field layout queries parallel to sun.misc.Unsafe:</em>
<a id="L53" name="L53"></a>  53     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">long</strong> <a href="../R/23876.html" title="Multiple referred from 141 places.">objectFieldOffset</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self);  <em class="comment">// e.g., returns vmindex</em>
<a id="L54" name="L54"></a>  54     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">long</strong> <a href="../S/1620.html#L89" title="Referred from 89 in src/java/lang/invoke/DirectMethodHandle.java.">staticFieldOffset</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self);  <em class="comment">// e.g., returns vmindex</em>
<a id="L55" name="L55"></a>  55     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1620.html#L90" title="Referred from 90 in src/java/lang/invoke/DirectMethodHandle.java.">staticFieldBase</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self);  <em class="comment">// e.g., returns clazz</em>
<a id="L56" name="L56"></a>  56     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/1611.html#L309" title="Referred from 309 in src/java/lang/invoke/MemberName.java.">getMemberVMInfo</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> self);  <em class="comment">// returns {vmindex,vmtarget}</em>
<a id="L57" name="L57"></a>  57 
<a id="L58" name="L58"></a>  58     <em class="comment">/// MethodHandle support</em>
<a id="L59" name="L59"></a>  59 
<div class="comment">
 Fetch MH-related JVM parameter.
       which=0 retrieves MethodHandlePushLimit
       which=1 retrieves stack slot push size (in address units)</div>
<a id="L64" name="L64"></a>  64     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../R/15757.html" title="Multiple referred from 60 places.">getConstant</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>);
<a id="L65" name="L65"></a>  65 
<a id="L66" name="L66"></a>  66     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> COUNT_GWT;
<a id="L67" name="L67"></a>  67 
<a id="L68" name="L68"></a>  68     <em class="comment">/// CallSite support</em>
<a id="L69" name="L69"></a>  69 
<div class="comment">
     /** Tell the JVM that we need to change the target of a CallSite. */</div>
<a id="L71" name="L71"></a>  71     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../S/1601.html#L258" title="Referred from 258 in src/java/lang/invoke/CallSite.java.">setCallSiteTargetNormal</a>(<a href="../S/1601.html#L86" title="Defined at 86 in src/java/lang/invoke/CallSite.java.">CallSite</a> site, <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>);
<a id="L72" name="L72"></a>  72     <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../S/1601.html#L266" title="Referred from 266 in src/java/lang/invoke/CallSite.java.">setCallSiteTargetVolatile</a>(<a href="../S/1601.html#L86" title="Defined at 86 in src/java/lang/invoke/CallSite.java.">CallSite</a> site, <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>);
<a id="L73" name="L73"></a>  73 
<a id="L74" name="L74"></a>  74     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../R/25793.html" title="Multiple referred from 7 places.">registerNatives</a>();
<a id="L75" name="L75"></a>  75     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L76" name="L76"></a>  76         <a href="../D/30570.html" title="Multiple defined in 7 places.">registerNatives</a>();
<a id="L77" name="L77"></a>  77         COUNT_GWT                   = <a href="../D/17921.html" title="Multiple defined in 4 places.">getConstant</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.GC_COUNT_GWT) != 0;
<a id="L78" name="L78"></a>  78 
<a id="L79" name="L79"></a>  79         <em class="comment">// The JVM calls MethodHandleNatives.&lt;clinit&gt;.  Cascade the &lt;clinit&gt; calls as needed:</em>
<a id="L80" name="L80"></a>  80         <a href="../S/1634.html#L49" title="Defined at 49 in src/java/lang/invoke/MethodHandleImpl.java.">MethodHandleImpl</a>.<a href="../S/1634.html#L66" title="Defined at 66 in src/java/lang/invoke/MethodHandleImpl.java.">initStatics</a>();
<a id="L81" name="L81"></a>  81     <em class="brace">}</em>
<a id="L82" name="L82"></a>  82 
<a id="L83" name="L83"></a>  83     <em class="comment">// All compile-time constants go here.</em>
<a id="L84" name="L84"></a>  84     <em class="comment">// There is an opportunity to check them against the JVM's idea of them.</em>
<a id="L85" name="L85"></a>  85     <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/1680.html" title="Multiple referred from 3029 places.">Constants</a> <em class="brace">{</em>
<a id="L86" name="L86"></a>  86         Constants() <em class="brace">{</em> <em class="brace">}</em> <em class="comment">// static only</em>
<a id="L87" name="L87"></a>  87         <em class="comment">// MethodHandleImpl</em>
<a id="L88" name="L88"></a>  88         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <em class="comment">// for getConstant</em>
<a id="L89" name="L89"></a>  89                 GC_COUNT_GWT = 4,
<a id="L90" name="L90"></a>  90                 GC_LAMBDA_SUPPORT = 5;
<a id="L91" name="L91"></a>  91 
<a id="L92" name="L92"></a>  92         <em class="comment">// MemberName</em>
<a id="L93" name="L93"></a>  93         <em class="comment">// The JVM uses values of -2 and above for vtable indexes.</em>
<a id="L94" name="L94"></a>  94         <em class="comment">// Field values are simple positive offsets.</em>
<a id="L95" name="L95"></a>  95         <em class="comment">// Ref: src/share/vm/oops/methodOop.hpp</em>
<a id="L96" name="L96"></a>  96         <em class="comment">// This value is negative enough to avoid such numbers,</em>
<a id="L97" name="L97"></a>  97         <em class="comment">// but not too negative.</em>
<a id="L98" name="L98"></a>  98         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>
<a id="L99" name="L99"></a>  99                 MN_IS_METHOD           = 0x00010000, <em class="comment">// method (not constructor)</em>
<a id="L100" name="L100"></a> 100                 MN_IS_CONSTRUCTOR      = 0x00020000, <em class="comment">// constructor</em>
<a id="L101" name="L101"></a> 101                 MN_IS_FIELD            = 0x00040000, <em class="comment">// field</em>
<a id="L102" name="L102"></a> 102                 MN_IS_TYPE             = 0x00080000, <em class="comment">// nested type</em>
<a id="L103" name="L103"></a> 103                 MN_CALLER_SENSITIVE    = 0x00100000, <em class="comment">// @CallerSensitive annotation detected</em>
<a id="L104" name="L104"></a> 104                 MN_REFERENCE_KIND_SHIFT = 24, <em class="comment">// refKind</em>
<a id="L105" name="L105"></a> 105                 MN_REFERENCE_KIND_MASK = 0x0F000000 &gt;&gt; MN_REFERENCE_KIND_SHIFT,
<a id="L106" name="L106"></a> 106                 <em class="comment">// The SEARCH_* bits are not for MN.flags but for the matchFlags argument of MHN.getMembers:</em>
<a id="L107" name="L107"></a> 107                 MN_SEARCH_SUPERCLASSES = 0x00100000,
<a id="L108" name="L108"></a> 108                 MN_SEARCH_INTERFACES   = 0x00200000;
<a id="L109" name="L109"></a> 109 
<div class="comment">
          Basic types as encoded in the JVM.  These code values are not
          intended for use outside this class.  They are used as part of
          a private interface between the JVM and this class.</div>
<a id="L115" name="L115"></a> 115         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong>
<a id="L116" name="L116"></a> 116             T_BOOLEAN  =  4,
<a id="L117" name="L117"></a> 117             T_CHAR     =  5,
<a id="L118" name="L118"></a> 118             T_FLOAT    =  6,
<a id="L119" name="L119"></a> 119             T_DOUBLE   =  7,
<a id="L120" name="L120"></a> 120             T_BYTE     =  8,
<a id="L121" name="L121"></a> 121             T_SHORT    =  9,
<a id="L122" name="L122"></a> 122             T_INT      = 10,
<a id="L123" name="L123"></a> 123             T_LONG     = 11,
<a id="L124" name="L124"></a> 124             T_OBJECT   = 12,
<a id="L125" name="L125"></a> 125             <em class="comment">//T_ARRAY    = 13</em>
<a id="L126" name="L126"></a> 126             T_VOID     = 14,
<a id="L127" name="L127"></a> 127             <em class="comment">//T_ADDRESS  = 15</em>
<a id="L128" name="L128"></a> 128             T_ILLEGAL  = 99;
<a id="L129" name="L129"></a> 129 
<div class="comment">
          Constant pool entry types.</div>
<a id="L133" name="L133"></a> 133         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>
<a id="L134" name="L134"></a> 134             CONSTANT_Utf8                = 1,
<a id="L135" name="L135"></a> 135             CONSTANT_Integer             = 3,
<a id="L136" name="L136"></a> 136             CONSTANT_Float               = 4,
<a id="L137" name="L137"></a> 137             CONSTANT_Long                = 5,
<a id="L138" name="L138"></a> 138             CONSTANT_Double              = 6,
<a id="L139" name="L139"></a> 139             CONSTANT_Class               = 7,
<a id="L140" name="L140"></a> 140             CONSTANT_String              = 8,
<a id="L141" name="L141"></a> 141             CONSTANT_Fieldref            = 9,
<a id="L142" name="L142"></a> 142             CONSTANT_Methodref           = 10,
<a id="L143" name="L143"></a> 143             CONSTANT_InterfaceMethodref  = 11,
<a id="L144" name="L144"></a> 144             CONSTANT_NameAndType         = 12,
<a id="L145" name="L145"></a> 145             CONSTANT_MethodHandle        = 15,  <em class="comment">// JSR 292</em>
<a id="L146" name="L146"></a> 146             CONSTANT_MethodType          = 16,  <em class="comment">// JSR 292</em>
<a id="L147" name="L147"></a> 147             CONSTANT_InvokeDynamic       = 18,
<a id="L148" name="L148"></a> 148             CONSTANT_LIMIT               = 19;   <em class="comment">// Limit to tags found in classfiles</em>
<a id="L149" name="L149"></a> 149 
<div class="comment">
          Access modifier flags.</div>
<a id="L153" name="L153"></a> 153         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong>
<a id="L154" name="L154"></a> 154             ACC_PUBLIC                 = 0x0001,
<a id="L155" name="L155"></a> 155             ACC_PRIVATE                = 0x0002,
<a id="L156" name="L156"></a> 156             ACC_PROTECTED              = 0x0004,
<a id="L157" name="L157"></a> 157             ACC_STATIC                 = 0x0008,
<a id="L158" name="L158"></a> 158             ACC_FINAL                  = 0x0010,
<a id="L159" name="L159"></a> 159             ACC_SYNCHRONIZED           = 0x0020,
<a id="L160" name="L160"></a> 160             ACC_VOLATILE               = 0x0040,
<a id="L161" name="L161"></a> 161             ACC_TRANSIENT              = 0x0080,
<a id="L162" name="L162"></a> 162             ACC_NATIVE                 = 0x0100,
<a id="L163" name="L163"></a> 163             ACC_INTERFACE              = 0x0200,
<a id="L164" name="L164"></a> 164             ACC_ABSTRACT               = 0x0400,
<a id="L165" name="L165"></a> 165             ACC_STRICT                 = 0x0800,
<a id="L166" name="L166"></a> 166             ACC_SYNTHETIC              = 0x1000,
<a id="L167" name="L167"></a> 167             ACC_ANNOTATION             = 0x2000,
<a id="L168" name="L168"></a> 168             ACC_ENUM                   = 0x4000,
<a id="L169" name="L169"></a> 169             <em class="comment">// aliases:</em>
<a id="L170" name="L170"></a> 170             ACC_SUPER                  = ACC_SYNCHRONIZED,
<a id="L171" name="L171"></a> 171             ACC_BRIDGE                 = ACC_VOLATILE,
<a id="L172" name="L172"></a> 172             ACC_VARARGS                = ACC_TRANSIENT;
<a id="L173" name="L173"></a> 173 
<div class="comment">
          Constant pool reference-kind codes, as used by CONSTANT_MethodHandle CP entries.</div>
<a id="L177" name="L177"></a> 177         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong>
<a id="L178" name="L178"></a> 178             REF_NONE                    = 0,  <em class="comment">// null value</em>
<a id="L179" name="L179"></a> 179             REF_getField                = 1,
<a id="L180" name="L180"></a> 180             REF_getStatic               = 2,
<a id="L181" name="L181"></a> 181             REF_putField                = 3,
<a id="L182" name="L182"></a> 182             REF_putStatic               = 4,
<a id="L183" name="L183"></a> 183             REF_invokeVirtual           = 5,
<a id="L184" name="L184"></a> 184             REF_invokeStatic            = 6,
<a id="L185" name="L185"></a> 185             REF_invokeSpecial           = 7,
<a id="L186" name="L186"></a> 186             REF_newInvokeSpecial        = 8,
<a id="L187" name="L187"></a> 187             REF_invokeInterface         = 9,
<a id="L188" name="L188"></a> 188             REF_LIMIT                  = 10;
<a id="L189" name="L189"></a> 189     <em class="brace">}</em>
<a id="L190" name="L190"></a> 190 
<a id="L191" name="L191"></a> 191     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25715.html" title="Multiple referred from 10 places.">refKindIsValid</a>(<strong class="reserved">int</strong> refKind) <em class="brace">{</em>
<a id="L192" name="L192"></a> 192         <strong class="reserved">return</strong> (refKind &gt; REF_NONE &amp;&amp; refKind &lt; REF_LIMIT);
<a id="L193" name="L193"></a> 193     <em class="brace">}</em>
<a id="L194" name="L194"></a> 194     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25710.html" title="Multiple referred from 9 places.">refKindIsField</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L195" name="L195"></a> 195         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L191" title="Defined at 191 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsValid</a>(refKind));
<a id="L196" name="L196"></a> 196         <strong class="reserved">return</strong> (refKind &lt;= REF_putStatic);
<a id="L197" name="L197"></a> 197     <em class="brace">}</em>
<a id="L198" name="L198"></a> 198     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25711.html" title="Multiple referred from 4 places.">refKindIsGetter</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L191" title="Defined at 191 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsValid</a>(refKind));
<a id="L200" name="L200"></a> 200         <strong class="reserved">return</strong> (refKind &lt;= REF_getStatic);
<a id="L201" name="L201"></a> 201     <em class="brace">}</em>
<a id="L202" name="L202"></a> 202     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25713.html" title="Multiple referred from 3 places.">refKindIsSetter</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L203" name="L203"></a> 203         <strong class="reserved">return</strong> <a href="../S/1603.html#L194" title="Defined at 194 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsField</a>(refKind) &amp;&amp; !<a href="../S/1603.html#L198" title="Defined at 198 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsGetter</a>(refKind);
<a id="L204" name="L204"></a> 204     <em class="brace">}</em>
<a id="L205" name="L205"></a> 205     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25712.html" title="Multiple referred from 4 places.">refKindIsMethod</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L206" name="L206"></a> 206         <strong class="reserved">return</strong> !<a href="../S/1603.html#L194" title="Defined at 194 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsField</a>(refKind) &amp;&amp; (refKind != REF_newInvokeSpecial);
<a id="L207" name="L207"></a> 207     <em class="brace">}</em>
<a id="L208" name="L208"></a> 208     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/1636.html#L118" title="Referred from 118 in src/java/lang/invoke/InfoFromMemberName.java.">refKindIsConstructor</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L209" name="L209"></a> 209         <strong class="reserved">return</strong> (refKind == REF_newInvokeSpecial);
<a id="L210" name="L210"></a> 210     <em class="brace">}</em>
<a id="L211" name="L211"></a> 211     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25708.html" title="Multiple referred from 5 places.">refKindHasReceiver</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L212" name="L212"></a> 212         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L191" title="Defined at 191 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsValid</a>(refKind));
<a id="L213" name="L213"></a> 213         <strong class="reserved">return</strong> (refKind &amp; 1) != 0;
<a id="L214" name="L214"></a> 214     <em class="brace">}</em>
<a id="L215" name="L215"></a> 215     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/1611.html#L304" title="Referred from 304 in src/java/lang/invoke/MemberName.java.">refKindIsStatic</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L216" name="L216"></a> 216         <strong class="reserved">return</strong> !<a href="../S/1603.html#L211" title="Defined at 211 in src/java/lang/invoke/MethodHandleNatives.java.">refKindHasReceiver</a>(refKind) &amp;&amp; (refKind != REF_newInvokeSpecial);
<a id="L217" name="L217"></a> 217     <em class="brace">}</em>
<a id="L218" name="L218"></a> 218     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25707.html" title="Multiple referred from 2 places.">refKindDoesDispatch</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L219" name="L219"></a> 219         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L191" title="Defined at 191 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsValid</a>(refKind));
<a id="L220" name="L220"></a> 220         <strong class="reserved">return</strong> (refKind == REF_invokeVirtual ||
<a id="L221" name="L221"></a> 221                 refKind == REF_invokeInterface);
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L224" name="L224"></a> 224         <strong class="reserved">final</strong> <strong class="reserved">int</strong> HR_MASK = ((1 &lt;&lt; REF_getField) |
<a id="L225" name="L225"></a> 225                              (1 &lt;&lt; REF_putField) |
<a id="L226" name="L226"></a> 226                              (1 &lt;&lt; REF_invokeVirtual) |
<a id="L227" name="L227"></a> 227                              (1 &lt;&lt; REF_invokeSpecial) |
<a id="L228" name="L228"></a> 228                              (1 &lt;&lt; REF_invokeInterface)
<a id="L229" name="L229"></a> 229                             );
<a id="L230" name="L230"></a> 230         <strong class="reserved">for</strong> (<strong class="reserved">byte</strong> refKind = REF_NONE+1; refKind &lt; REF_LIMIT; refKind++) <em class="brace">{</em>
<a id="L231" name="L231"></a> 231             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L211" title="Defined at 211 in src/java/lang/invoke/MethodHandleNatives.java.">refKindHasReceiver</a>(refKind) == (((1&lt;&lt;refKind) &amp; HR_MASK) != 0)) : refKind;
<a id="L232" name="L232"></a> 232         <em class="brace">}</em>
<a id="L233" name="L233"></a> 233     <em class="brace">}</em>
<a id="L234" name="L234"></a> 234     <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/25716.html" title="Multiple referred from 3 places.">refKindName</a>(<strong class="reserved">byte</strong> refKind) <em class="brace">{</em>
<a id="L235" name="L235"></a> 235         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L191" title="Defined at 191 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsValid</a>(refKind));
<a id="L236" name="L236"></a> 236         <strong class="reserved">switch</strong> (refKind) <em class="brace">{</em>
<a id="L237" name="L237"></a> 237         <strong class="reserved">case</strong> REF_getField:          <strong class="reserved">return</strong> "getField";
<a id="L238" name="L238"></a> 238         <strong class="reserved">case</strong> REF_getStatic:         <strong class="reserved">return</strong> "getStatic";
<a id="L239" name="L239"></a> 239         <strong class="reserved">case</strong> REF_putField:          <strong class="reserved">return</strong> "putField";
<a id="L240" name="L240"></a> 240         <strong class="reserved">case</strong> REF_putStatic:         <strong class="reserved">return</strong> "putStatic";
<a id="L241" name="L241"></a> 241         <strong class="reserved">case</strong> REF_invokeVirtual:     <strong class="reserved">return</strong> "invokeVirtual";
<a id="L242" name="L242"></a> 242         <strong class="reserved">case</strong> REF_invokeStatic:      <strong class="reserved">return</strong> "invokeStatic";
<a id="L243" name="L243"></a> 243         <strong class="reserved">case</strong> REF_invokeSpecial:     <strong class="reserved">return</strong> "invokeSpecial";
<a id="L244" name="L244"></a> 244         <strong class="reserved">case</strong> REF_newInvokeSpecial:  <strong class="reserved">return</strong> "newInvokeSpecial";
<a id="L245" name="L245"></a> 245         <strong class="reserved">case</strong> REF_invokeInterface:   <strong class="reserved">return</strong> "invokeInterface";
<a id="L246" name="L246"></a> 246         <strong class="reserved">default</strong>:                    <strong class="reserved">return</strong> "REF_???";
<a id="L247" name="L247"></a> 247         <em class="brace">}</em>
<a id="L248" name="L248"></a> 248     <em class="brace">}</em>
<a id="L249" name="L249"></a> 249 
<a id="L250" name="L250"></a> 250     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">int</strong> <a href="../S/1603.html#L255" title="Referred from 255 in src/java/lang/invoke/MethodHandleNatives.java.">getNamedCon</a>(<strong class="reserved">int</strong> <a href="../D/36852.html" title="Multiple defined in 6 places.">which</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L251" name="L251"></a> 251     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/1603.html#L278" title="Referred from 278 in src/java/lang/invoke/MethodHandleNatives.java.">verifyConstants</a>() <em class="brace">{</em>
<a id="L252" name="L252"></a> 252         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <a href="../S/1625.html#L157" title="Defined at 157 in src/java/lang/invoke/TypeConvertingMethodAdapter.java.">box</a> = <em class="brace">{</em> <strong class="reserved">null</strong> <em class="brace">}</em>;
<a id="L253" name="L253"></a> 253         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; ; i++) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254             <a href="../S/1625.html#L157" title="Defined at 157 in src/java/lang/invoke/TypeConvertingMethodAdapter.java.">box</a>[0] = <strong class="reserved">null</strong>;
<a id="L255" name="L255"></a> 255             <strong class="reserved">int</strong> vmval = <a href="../S/1603.html#L250" title="Defined at 250 in src/java/lang/invoke/MethodHandleNatives.java.">getNamedCon</a>(i, <a href="../S/1625.html#L157" title="Defined at 157 in src/java/lang/invoke/TypeConvertingMethodAdapter.java.">box</a>);
<a id="L256" name="L256"></a> 256             <strong class="reserved">if</strong> (<a href="../S/1625.html#L157" title="Defined at 157 in src/java/lang/invoke/TypeConvertingMethodAdapter.java.">box</a>[0] == <strong class="reserved">null</strong>)  <strong class="reserved">break</strong>;
<a id="L257" name="L257"></a> 257             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/1625.html#L157" title="Defined at 157 in src/java/lang/invoke/TypeConvertingMethodAdapter.java.">box</a>[0];
<a id="L258" name="L258"></a> 258             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                 <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> con = <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.<strong class="reserved">class</strong>.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L260" name="L260"></a> 260                 <strong class="reserved">int</strong> jval = con.<a href="../D/19781.html" title="Multiple defined in 33 places.">getInt</a>(<strong class="reserved">null</strong>);
<a id="L261" name="L261"></a> 261                 <strong class="reserved">if</strong> (jval == vmval)  <strong class="reserved">continue</strong>;
<a id="L262" name="L262"></a> 262                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> err = (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+": JVM has "+vmval+" while Java has "+jval);
<a id="L263" name="L263"></a> 263                 <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("CONV_OP_LIMIT")) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("warning: "+err);
<a id="L265" name="L265"></a> 265                     <strong class="reserved">continue</strong>;
<a id="L266" name="L266"></a> 266                 <em class="brace">}</em>
<a id="L267" name="L267"></a> 267                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4325.html" title="Multiple defined in 2 places.">InternalError</a>(err);
<a id="L268" name="L268"></a> 268             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1573.html#L34" title="Defined at 34 in src/java/lang/NoSuchFieldException.java.">NoSuchFieldException</a> | <a href="../S/1574.html#L59" title="Defined at 59 in src/java/lang/IllegalAccessException.java.">IllegalAccessException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> err = (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+": JVM has "+vmval+" which Java does not define");
<a id="L270" name="L270"></a> 270                 <em class="comment">// ignore exotic ops the JVM cares about; we just wont issue them</em>
<a id="L271" name="L271"></a> 271                 <em class="comment">//System.err.println("warning: "+err);</em>
<a id="L272" name="L272"></a> 272                 <strong class="reserved">continue</strong>;
<a id="L273" name="L273"></a> 273             <em class="brace">}</em>
<a id="L274" name="L274"></a> 274         <em class="brace">}</em>
<a id="L275" name="L275"></a> 275         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L276" name="L276"></a> 276     <em class="brace">}</em>
<a id="L277" name="L277"></a> 277     <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L278" name="L278"></a> 278         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L251" title="Defined at 251 in src/java/lang/invoke/MethodHandleNatives.java.">verifyConstants</a>());
<a id="L279" name="L279"></a> 279     <em class="brace">}</em>
<a id="L280" name="L280"></a> 280 
<a id="L281" name="L281"></a> 281     <em class="comment">// Up-calls from the JVM.</em>
<a id="L282" name="L282"></a> 282     <em class="comment">// These must NOT be public.</em>
<a id="L283" name="L283"></a> 283 
<div class="comment">
      The JVM is linking an invokedynamic instruction.  Create a reified call site for it.</div>
<a id="L287" name="L287"></a> 287     <strong class="reserved">static</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> linkCallSite(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> callerObj,
<a id="L288" name="L288"></a> 288                                    <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> bootstrapMethodObj,
<a id="L289" name="L289"></a> 289                                    <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> nameObj, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> typeObj,
<a id="L290" name="L290"></a> 290                                    <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> staticArguments,
<a id="L291" name="L291"></a> 291                                    <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] appendixResult) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292         <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a> bootstrapMethod = (<a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a>)bootstrapMethodObj;
<a id="L293" name="L293"></a> 293         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; caller = (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;)callerObj;
<a id="L294" name="L294"></a> 294         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = nameObj.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>().<a href="../S/1729.html#L3167" title="Defined at 3167 in src/java/lang/String.java.">intern</a>();
<a id="L295" name="L295"></a> 295         <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = (<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>)typeObj;
<a id="L296" name="L296"></a> 296         <strong class="reserved">if</strong> (!TRACE_METHOD_LINKAGE)
<a id="L297" name="L297"></a> 297             <strong class="reserved">return</strong> <a href="../S/1603.html#L302" title="Defined at 302 in src/java/lang/invoke/MethodHandleNatives.java.">linkCallSiteImpl</a>(caller, bootstrapMethod, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L298" name="L298"></a> 298                                     staticArguments, appendixResult);
<a id="L299" name="L299"></a> 299         <strong class="reserved">return</strong> <a href="../S/1603.html#L321" title="Defined at 321 in src/java/lang/invoke/MethodHandleNatives.java.">linkCallSiteTracing</a>(caller, bootstrapMethod, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L300" name="L300"></a> 300                                    staticArguments, appendixResult);
<a id="L301" name="L301"></a> 301     <em class="brace">}</em>
<a id="L302" name="L302"></a> 302     <strong class="reserved">static</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> <a href="../R/22515.html" title="Multiple referred from 2 places.">linkCallSiteImpl</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; caller,
<a id="L303" name="L303"></a> 303                                        <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a> bootstrapMethod,
<a id="L304" name="L304"></a> 304                                        <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L305" name="L305"></a> 305                                        <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> staticArguments,
<a id="L306" name="L306"></a> 306                                        <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] appendixResult) <em class="brace">{</em>
<a id="L307" name="L307"></a> 307         <a href="../S/1601.html#L86" title="Defined at 86 in src/java/lang/invoke/CallSite.java.">CallSite</a> callSite = <a href="../S/1601.html#L86" title="Defined at 86 in src/java/lang/invoke/CallSite.java.">CallSite</a>.<a href="../S/1601.html#L270" title="Defined at 270 in src/java/lang/invoke/CallSite.java.">makeSite</a>(bootstrapMethod,
<a id="L308" name="L308"></a> 308                                               <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,
<a id="L309" name="L309"></a> 309                                               <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L310" name="L310"></a> 310                                               staticArguments,
<a id="L311" name="L311"></a> 311                                               caller);
<a id="L312" name="L312"></a> 312         <strong class="reserved">if</strong> (callSite <strong class="reserved">instanceof</strong> <a href="../S/1633.html#L34" title="Defined at 34 in src/java/lang/invoke/ConstantCallSite.java.">ConstantCallSite</a>) <em class="brace">{</em>
<a id="L313" name="L313"></a> 313             appendixResult[0] = callSite.<a href="../D/15272.html" title="Multiple defined in 4 places.">dynamicInvoker</a>();
<a id="L314" name="L314"></a> 314             <strong class="reserved">return</strong> <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a>.<a href="../S/1599.html#L346" title="Defined at 346 in src/java/lang/invoke/Invokers.java.">linkToTargetMethod</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L315" name="L315"></a> 315         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L316" name="L316"></a> 316             appendixResult[0] = callSite;
<a id="L317" name="L317"></a> 317             <strong class="reserved">return</strong> <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a>.<a href="../S/1599.html#L341" title="Defined at 341 in src/java/lang/invoke/Invokers.java.">linkToCallSiteMethod</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L318" name="L318"></a> 318         <em class="brace">}</em>
<a id="L319" name="L319"></a> 319     <em class="brace">}</em>
<a id="L320" name="L320"></a> 320     <em class="comment">// Tracing logic:</em>
<a id="L321" name="L321"></a> 321     <strong class="reserved">static</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> <a href="../S/1603.html#L299" title="Referred from 299 in src/java/lang/invoke/MethodHandleNatives.java.">linkCallSiteTracing</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; caller,
<a id="L322" name="L322"></a> 322                                           <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a> bootstrapMethod,
<a id="L323" name="L323"></a> 323                                           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L324" name="L324"></a> 324                                           <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> staticArguments,
<a id="L325" name="L325"></a> 325                                           <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] appendixResult) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> bsmReference = bootstrapMethod.<a href="../D/24941.html" title="Multiple defined in 5 places.">internalMemberName</a>();
<a id="L327" name="L327"></a> 327         <strong class="reserved">if</strong> (bsmReference == <strong class="reserved">null</strong>)  bsmReference = bootstrapMethod;
<a id="L328" name="L328"></a> 328         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> staticArglist = (staticArguments <strong class="reserved">instanceof</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] ?
<a id="L329" name="L329"></a> 329                                 <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/11544.html" title="Multiple defined in 4 places.">asList</a>((<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]) staticArguments) :
<a id="L330" name="L330"></a> 330                                 staticArguments);
<a id="L331" name="L331"></a> 331         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("linkCallSite "+caller.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>()+" "+
<a id="L332" name="L332"></a> 332                            bsmReference+" "+
<a id="L333" name="L333"></a> 333                            <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>+"/"+staticArglist);
<a id="L334" name="L334"></a> 334         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L335" name="L335"></a> 335             <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> res = <a href="../S/1603.html#L302" title="Defined at 302 in src/java/lang/invoke/MethodHandleNatives.java.">linkCallSiteImpl</a>(caller, bootstrapMethod, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L336" name="L336"></a> 336                                               staticArguments, appendixResult);
<a id="L337" name="L337"></a> 337             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("linkCallSite =&gt; "+res+" + "+appendixResult[0]);
<a id="L338" name="L338"></a> 338             <strong class="reserved">return</strong> res;
<a id="L339" name="L339"></a> 339         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L340" name="L340"></a> 340             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("linkCallSite =&gt; throw "+<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L341" name="L341"></a> 341             <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L342" name="L342"></a> 342         <em class="brace">}</em>
<a id="L343" name="L343"></a> 343     <em class="brace">}</em>
<a id="L344" name="L344"></a> 344 
<div class="comment">
      The JVM wants a pointer to a MethodType.  Oblige it by finding or creating one.</div>
<a id="L348" name="L348"></a> 348     <strong class="reserved">static</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> findMethodHandleType(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;[] <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>) <em class="brace">{</em>
<a id="L349" name="L349"></a> 349         <strong class="reserved">return</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>.<a href="../S/1616.html#L300" title="Defined at 300 in src/java/lang/invoke/MethodType.java.">makeImpl</a>(<a href="../S/1616.html#L126" title="Defined at 126 in src/java/lang/invoke/MethodType.java.">rtype</a>, <a href="../S/1616.html#L127" title="Defined at 127 in src/java/lang/invoke/MethodType.java.">ptypes</a>, <strong class="reserved">true</strong>);
<a id="L350" name="L350"></a> 350     <em class="brace">}</em>
<a id="L351" name="L351"></a> 351 
<div class="comment">
      The JVM wants to link a call site that requires a dynamic type check.
      Name is a type-checking invoker, invokeExact or invoke.
      Return a JVM method (MemberName) to handle the invoking.
      The method assumes the following arguments on the stack:
      0: the method handle being invoked
      1-N: the arguments to the method handle invocation
      N+1: an optional, implicitly added argument (typically the given MethodType)
      <p>
      The nominal method at such a call site is an instance of
      a signature-polymorphic method (see @PolymorphicSignature).
      Such method instances are user-visible entities which are
      "split" from the generic placeholder method in <code>MethodHandle</code>.
      (Note that the placeholder method is not identical with any of
      its instances.  If invoked reflectively, is guaranteed to throw an
      <code>UnsupportedOperationException</code>.)
      If the signature-polymorphic method instance is ever reified,
      it appears as a "copy" of the original placeholder
      (a native final member of <code>MethodHandle</code>) except
      that its type descriptor has shape required by the instance,
      and the method instance is <em>not</em> varargs.
      The method instance is also marked synthetic, since the
      method (by definition) does not appear in Java source code.
      </p><p>
      The JVM is allowed to reify this method as instance metadata.
      For example, <code>invokeBasic</code> is always reified.
      But the JVM may instead call <code>linkMethod</code>.
      If the result is an * ordered pair of a <code>(method, appendix)</code>,
      the method gets all the arguments (0..N inclusive)
      plus the appendix (N+1), and uses the appendix to complete the call.
      In this way, one reusable method (called a "linker method")
      can perform the function of any number of polymorphic instance
      methods.
      </p><p>
      Linker methods are allowed to be weakly typed, with any or
      all references rewritten to <code>Object</code> and any primitives
      (except <code>long</code>/<code>float</code>/<code>double</code>)
      rewritten to <code>int</code>.
      A linker method is trusted to return a strongly typed result,
      according to the specific method type descriptor of the
      signature-polymorphic instance it is emulating.
      This can involve (as necessary) a dynamic check using
      data extracted from the appendix argument.
      </p><p>
      The JVM does not inspect the appendix, other than to pass
      it verbatim to the linker method at every call.
      This means that the JDK runtime has wide latitude
      for choosing the shape of each linker method and its
      corresponding appendix.
      Linker methods should be generated from <code>LambdaForm</code>s
      so that they do not become visible on stack traces.
      </p><p>
      The <code>linkMethod</code> call is free to omit the appendix
      (returning null) and instead emulate the required function
      completely in the linker method.
      As a corner case, if N==255, no appendix is possible.
      In this case, the method returned must be custom-generated to
      to perform any needed type checking.
      </p><p>
      If the JVM does not reify a method at a call site, but instead
      calls <code>linkMethod</code>, the corresponding call represented
      in the bytecodes may mention a valid method which is not
      representable with a <code>MemberName</code>.
      Therefore, use cases for <code>linkMethod</code> tend to correspond to
      special cases in reflective code such as <code>findVirtual</code>
      or <code>revealDirect</code>.</p></div>
<a id="L419" name="L419"></a> 419     <strong class="reserved">static</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> linkMethod(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; callerClass, <strong class="reserved">int</strong> refKind,
<a id="L420" name="L420"></a> 420                                  <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; defc, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L421" name="L421"></a> 421                                  <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] appendixResult) <em class="brace">{</em>
<a id="L422" name="L422"></a> 422         <strong class="reserved">if</strong> (!TRACE_METHOD_LINKAGE)
<a id="L423" name="L423"></a> 423             <strong class="reserved">return</strong> <a href="../S/1603.html#L426" title="Defined at 426 in src/java/lang/invoke/MethodHandleNatives.java.">linkMethodImpl</a>(callerClass, refKind, defc, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, appendixResult);
<a id="L424" name="L424"></a> 424         <strong class="reserved">return</strong> <a href="../S/1603.html#L448" title="Defined at 448 in src/java/lang/invoke/MethodHandleNatives.java.">linkMethodTracing</a>(callerClass, refKind, defc, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, appendixResult);
<a id="L425" name="L425"></a> 425     <em class="brace">}</em>
<a id="L426" name="L426"></a> 426     <strong class="reserved">static</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> <a href="../R/22520.html" title="Multiple referred from 2 places.">linkMethodImpl</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; callerClass, <strong class="reserved">int</strong> refKind,
<a id="L427" name="L427"></a> 427                                      <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; defc, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L428" name="L428"></a> 428                                      <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] appendixResult) <em class="brace">{</em>
<a id="L429" name="L429"></a> 429         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L430" name="L430"></a> 430             <strong class="reserved">if</strong> (defc == <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a>.<strong class="reserved">class</strong> &amp;&amp; refKind == REF_invokeVirtual) <em class="brace">{</em>
<a id="L431" name="L431"></a> 431                 <strong class="reserved">return</strong> <a href="../S/1599.html#L40" title="Defined at 40 in src/java/lang/invoke/Invokers.java.">Invokers</a>.<a href="../S/1599.html#L187" title="Defined at 187 in src/java/lang/invoke/Invokers.java.">methodHandleInvokeLinkerMethod</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/1603.html#L441" title="Defined at 441 in src/java/lang/invoke/MethodHandleNatives.java.">fixMethodType</a>(callerClass, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>), appendixResult);
<a id="L432" name="L432"></a> 432             <em class="brace">}</em>
<a id="L433" name="L433"></a> 433         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434             <strong class="reserved">if</strong> (<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> <strong class="reserved">instanceof</strong> <a href="../S/1739.html#L38" title="Defined at 38 in src/java/lang/LinkageError.java.">LinkageError</a>)
<a id="L435" name="L435"></a> 435                 <strong class="reserved">throw</strong> (<a href="../S/1739.html#L38" title="Defined at 38 in src/java/lang/LinkageError.java.">LinkageError</a>) <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L436" name="L436"></a> 436             <strong class="reserved">else</strong>
<a id="L437" name="L437"></a> 437                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1739.html#L38" title="Defined at 38 in src/java/lang/LinkageError.java.">LinkageError</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>(), <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L438" name="L438"></a> 438         <em class="brace">}</em>
<a id="L439" name="L439"></a> 439         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1739.html#L38" title="Defined at 38 in src/java/lang/LinkageError.java.">LinkageError</a>("no such method "+defc.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>()+"."+<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L440" name="L440"></a> 440     <em class="brace">}</em>
<a id="L441" name="L441"></a> 441     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a> <a href="../S/1603.html#L431" title="Referred from 431 in src/java/lang/invoke/MethodHandleNatives.java.">fixMethodType</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; callerClass, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L442" name="L442"></a> 442         <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> <strong class="reserved">instanceof</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>)
<a id="L443" name="L443"></a> 443             <strong class="reserved">return</strong> (<a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>) <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L444" name="L444"></a> 444         <strong class="reserved">else</strong>
<a id="L445" name="L445"></a> 445             <strong class="reserved">return</strong> <a href="../D/5628.html" title="Multiple defined in 4 places.">MethodType</a>.<a href="../S/1616.html#L1060" title="Defined at 1060 in src/java/lang/invoke/MethodType.java.">fromMethodDescriptorString</a>((<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, callerClass.<a href="../D/17691.html" title="Multiple defined in 20 places.">getClassLoader</a>());
<a id="L446" name="L446"></a> 446     <em class="brace">}</em>
<a id="L447" name="L447"></a> 447     <em class="comment">// Tracing logic:</em>
<a id="L448" name="L448"></a> 448     <strong class="reserved">static</strong> <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> <a href="../S/1603.html#L424" title="Referred from 424 in src/java/lang/invoke/MethodHandleNatives.java.">linkMethodTracing</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; callerClass, <strong class="reserved">int</strong> refKind,
<a id="L449" name="L449"></a> 449                                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; defc, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>,
<a id="L450" name="L450"></a> 450                                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] appendixResult) <em class="brace">{</em>
<a id="L451" name="L451"></a> 451         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("linkMethod "+defc.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>()+"."+
<a id="L452" name="L452"></a> 452                            <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>+<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>+"/"+<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(refKind));
<a id="L453" name="L453"></a> 453         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L454" name="L454"></a> 454             <a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> res = <a href="../S/1603.html#L426" title="Defined at 426 in src/java/lang/invoke/MethodHandleNatives.java.">linkMethodImpl</a>(callerClass, refKind, defc, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, appendixResult);
<a id="L455" name="L455"></a> 455             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("linkMethod =&gt; "+res+" + "+appendixResult[0]);
<a id="L456" name="L456"></a> 456             <strong class="reserved">return</strong> res;
<a id="L457" name="L457"></a> 457         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L458" name="L458"></a> 458             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("linkMethod =&gt; throw "+<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L459" name="L459"></a> 459             <strong class="reserved">throw</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L460" name="L460"></a> 460         <em class="brace">}</em>
<a id="L461" name="L461"></a> 461     <em class="brace">}</em>
<a id="L462" name="L462"></a> 462 
<a id="L463" name="L463"></a> 463 
<div class="comment">
      The JVM is resolving a CONSTANT_MethodHandle CP entry.  And it wants our help.
      It will make an up-call to this method.  (Do not change the name or signature.)
      The type argument is a Class for field requests and a MethodType for non-fields.
      <p>
      Recent versions of the JVM may also pass a resolved MemberName for the type.
      In that case, the name is ignored and may be null.</p></div>
<a id="L472" name="L472"></a> 472     <strong class="reserved">static</strong> <a href="../S/1623.html#L421" title="Defined at 421 in src/java/lang/invoke/MethodHandle.java.">MethodHandle</a> <a href="../S/1603.html#L477" title="Referred from 477 in src/java/lang/invoke/MethodHandleNatives.java.">linkMethodHandleConstant</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; callerClass, <strong class="reserved">int</strong> refKind,
<a id="L473" name="L473"></a> 473                                                  <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; defc, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L474" name="L474"></a> 474         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L475" name="L475"></a> 475             <a href="../S/1619.html#L512" title="Defined at 512 in src/java/lang/invoke/MethodHandles.java.">Lookup</a> <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a> = IMPL_LOOKUP.<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>(callerClass);
<a id="L476" name="L476"></a> 476             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../S/1603.html#L191" title="Defined at 191 in src/java/lang/invoke/MethodHandleNatives.java.">refKindIsValid</a>(refKind));
<a id="L477" name="L477"></a> 477             <strong class="reserved">return</strong> <a href="../D/27095.html" title="Multiple defined in 22 places.">lookup</a>.<a href="../D/26859.html" title="Multiple defined in 2 places.">linkMethodHandleConstant</a>((<strong class="reserved">byte</strong>) refKind, defc, <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L478" name="L478"></a> 478         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1574.html#L59" title="Defined at 59 in src/java/lang/IllegalAccessException.java.">IllegalAccessException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L479" name="L479"></a> 479             <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> cause = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/17525.html" title="Multiple defined in 41 places.">getCause</a>();
<a id="L480" name="L480"></a> 480             <strong class="reserved">if</strong> (cause <strong class="reserved">instanceof</strong> <a href="../S/1595.html#L39" title="Defined at 39 in src/java/lang/AbstractMethodError.java.">AbstractMethodError</a>) <em class="brace">{</em>
<a id="L481" name="L481"></a> 481                 <strong class="reserved">throw</strong> (<a href="../S/1595.html#L39" title="Defined at 39 in src/java/lang/AbstractMethodError.java.">AbstractMethodError</a>) cause;
<a id="L482" name="L482"></a> 482             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L483" name="L483"></a> 483                 <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> err = <strong class="reserved">new</strong> <a href="../S/1639.html#L39" title="Defined at 39 in src/java/lang/IllegalAccessError.java.">IllegalAccessError</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L484" name="L484"></a> 484                 <strong class="reserved">throw</strong> <a href="../S/1603.html#L502" title="Defined at 502 in src/java/lang/invoke/MethodHandleNatives.java.">initCauseFrom</a>(err, <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L485" name="L485"></a> 485             <em class="brace">}</em>
<a id="L486" name="L486"></a> 486         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L487" name="L487"></a> 487             <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> err = <strong class="reserved">new</strong> <a href="../S/1678.html#L41" title="Defined at 41 in src/java/lang/NoSuchMethodError.java.">NoSuchMethodError</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L488" name="L488"></a> 488             <strong class="reserved">throw</strong> <a href="../S/1603.html#L502" title="Defined at 502 in src/java/lang/invoke/MethodHandleNatives.java.">initCauseFrom</a>(err, <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L489" name="L489"></a> 489         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1573.html#L34" title="Defined at 34 in src/java/lang/NoSuchFieldException.java.">NoSuchFieldException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L490" name="L490"></a> 490             <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> err = <strong class="reserved">new</strong> <a href="../S/1734.html#L40" title="Defined at 40 in src/java/lang/NoSuchFieldError.java.">NoSuchFieldError</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L491" name="L491"></a> 491             <strong class="reserved">throw</strong> <a href="../S/1603.html#L502" title="Defined at 502 in src/java/lang/invoke/MethodHandleNatives.java.">initCauseFrom</a>(err, <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L492" name="L492"></a> 492         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1731.html#L35" title="Defined at 35 in src/java/lang/ReflectiveOperationException.java.">ReflectiveOperationException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L493" name="L493"></a> 493             <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> err = <strong class="reserved">new</strong> <a href="../S/1755.html#L37" title="Defined at 37 in src/java/lang/IncompatibleClassChangeError.java.">IncompatibleClassChangeError</a>();
<a id="L494" name="L494"></a> 494             <strong class="reserved">throw</strong> <a href="../S/1603.html#L502" title="Defined at 502 in src/java/lang/invoke/MethodHandleNatives.java.">initCauseFrom</a>(err, <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L495" name="L495"></a> 495         <em class="brace">}</em>
<a id="L496" name="L496"></a> 496     <em class="brace">}</em>
<a id="L497" name="L497"></a> 497 
<div class="comment">
      Use best possible cause for err.initCause(), substituting the
      cause for err itself if the cause has the same (or better) type.</div>
<a id="L502" name="L502"></a> 502     <strong class="reserved">static</strong> <strong class="reserved">private</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> <a href="../R/20548.html" title="Multiple referred from 4 places.">initCauseFrom</a>(<a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> err, <a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L503" name="L503"></a> 503         <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> th = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/17525.html" title="Multiple defined in 41 places.">getCause</a>();
<a id="L504" name="L504"></a> 504         <strong class="reserved">if</strong> (err.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../S/1722.html#L483" title="Defined at 483 in src/java/lang/Class.java.">isInstance</a>(th))
<a id="L505" name="L505"></a> 505            <strong class="reserved">return</strong> (<a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>) th;
<a id="L506" name="L506"></a> 506         err.<a href="../D/24507.html" title="Multiple defined in 7 places.">initCause</a>(th == <strong class="reserved">null</strong> ? <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> : th);
<a id="L507" name="L507"></a> 507         <strong class="reserved">return</strong> err;
<a id="L508" name="L508"></a> 508     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<div class="comment">
      Is this method a caller-sensitive method?
      I.e., does it call Reflection.getCallerClass or a similer method
      to ask about the identity of its caller?</div>
<a id="L515" name="L515"></a> 515     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21230.html" title="Multiple referred from 6 places.">isCallerSensitive</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> mem) <em class="brace">{</em>
<a id="L516" name="L516"></a> 516         <strong class="reserved">if</strong> (!mem.<a href="../S/1611.html#L444" title="Defined at 444 in src/java/lang/invoke/MemberName.java.">isInvocable</a>())  <strong class="reserved">return</strong> <strong class="reserved">false</strong>;  <em class="comment">// fields are not caller sensitive</em>
<a id="L517" name="L517"></a> 517 
<a id="L518" name="L518"></a> 518         <strong class="reserved">return</strong> mem.<a href="../D/25278.html" title="Multiple defined in 2 places.">isCallerSensitive</a>() || <a href="../D/12125.html" title="Multiple defined in 2 places.">canBeCalledVirtual</a>(mem);
<a id="L519" name="L519"></a> 519     <em class="brace">}</em>
<a id="L520" name="L520"></a> 520 
<a id="L521" name="L521"></a> 521     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/10868.html" title="Multiple referred from 3 places.">canBeCalledVirtual</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> mem) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(mem.<a href="../S/1611.html#L444" title="Defined at 444 in src/java/lang/invoke/MemberName.java.">isInvocable</a>());
<a id="L523" name="L523"></a> 523         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; defc = mem.<a href="../D/18264.html" title="Multiple defined in 10 places.">getDeclaringClass</a>();
<a id="L524" name="L524"></a> 524         <strong class="reserved">switch</strong> (mem.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>()) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525         <strong class="reserved">case</strong> "checkMemberAccess":
<a id="L526" name="L526"></a> 526             <strong class="reserved">return</strong> <a href="../D/12125.html" title="Multiple defined in 2 places.">canBeCalledVirtual</a>(mem, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a>.<strong class="reserved">class</strong>);
<a id="L527" name="L527"></a> 527         <strong class="reserved">case</strong> "getContextClassLoader":
<a id="L528" name="L528"></a> 528             <strong class="reserved">return</strong> <a href="../D/12125.html" title="Multiple defined in 2 places.">canBeCalledVirtual</a>(mem, <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>.<strong class="reserved">class</strong>);
<a id="L529" name="L529"></a> 529         <em class="brace">}</em>
<a id="L530" name="L530"></a> 530         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L531" name="L531"></a> 531     <em class="brace">}</em>
<a id="L532" name="L532"></a> 532 
<a id="L533" name="L533"></a> 533     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/10868.html" title="Multiple referred from 3 places.">canBeCalledVirtual</a>(<a href="../S/1611.html#L72" title="Defined at 72 in src/java/lang/invoke/MemberName.java.">MemberName</a> symbolicRef, <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; definingClass) <em class="brace">{</em>
<a id="L534" name="L534"></a> 534         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; symbolicRefClass = symbolicRef.<a href="../D/18264.html" title="Multiple defined in 10 places.">getDeclaringClass</a>();
<a id="L535" name="L535"></a> 535         <strong class="reserved">if</strong> (symbolicRefClass == definingClass)  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L536" name="L536"></a> 536         <strong class="reserved">if</strong> (symbolicRef.<a href="../D/26281.html" title="Multiple defined in 7 places.">isStatic</a>() || symbolicRef.<a href="../D/26092.html" title="Multiple defined in 5 places.">isPrivate</a>())  <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L537" name="L537"></a> 537         <strong class="reserved">return</strong> (definingClass.<a href="../D/25213.html" title="Multiple defined in 7 places.">isAssignableFrom</a>(symbolicRefClass) ||  <em class="comment">// Msym overrides Mdef</em>
<a id="L538" name="L538"></a> 538                 symbolicRefClass.<a href="../D/25735.html" title="Multiple defined in 6 places.">isInterface</a>());                     <em class="comment">// Mdef implements Msym</em>
<a id="L539" name="L539"></a> 539     <em class="brace">}</em>
<a id="L540" name="L540"></a> 540 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L46">[^]</a><a href="#L533">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
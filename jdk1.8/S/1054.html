<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/concurrent/Semaphore.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L173">[^]</a><a href="#L704">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L173" title="Defined at 173.">getPermits</a></li>
<li><a href="#L177" title="Defined at 177.">nonfairTryAcquireShared</a></li>
<li><a href="#L187" title="Defined at 187.">tryReleaseShared</a></li>
<li><a href="#L198" title="Defined at 198.">reducePermits</a></li>
<li><a href="#L209" title="Defined at 209.">drainPermits</a></li>
<li><a href="#L228" title="Defined at 228.">tryAcquireShared</a></li>
<li><a href="#L243" title="Defined at 243.">tryAcquireShared</a></li>
<li><a href="#L311" title="Defined at 311.">acquire</a></li>
<li><a href="#L334" title="Defined at 334.">acquireUninterruptibly</a></li>
<li><a href="#L362" title="Defined at 362.">tryAcquire</a></li>
<li><a href="#L407" title="Defined at 407.">tryAcquire</a></li>
<li><a href="#L425" title="Defined at 425.">release</a></li>
<li><a href="#L465" title="Defined at 465.">acquire</a></li>
<li><a href="#L492" title="Defined at 492.">acquireUninterruptibly</a></li>
<li><a href="#L524" title="Defined at 524.">tryAcquire</a></li>
<li><a href="#L579" title="Defined at 579.">tryAcquire</a></li>
<li><a href="#L607" title="Defined at 607.">release</a></li>
<li><a href="#L619" title="Defined at 619.">availablePermits</a></li>
<li><a href="#L628" title="Defined at 628.">drainPermits</a></li>
<li><a href="#L642" title="Defined at 642.">reducePermits</a></li>
<li><a href="#L652" title="Defined at 652.">isFair</a></li>
<li><a href="#L666" title="Defined at 666.">hasQueuedThreads</a></li>
<li><a href="#L679" title="Defined at 679.">getQueueLength</a></li>
<li><a href="#L693" title="Defined at 693.">getQueuedThreads</a></li>
<li><a href="#L704" title="Defined at 704.">toString</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L24" name="L24"></a>  24 
<div class="comment">
  Written by Doug Lea with assistance from members of JCP JSR-166
  Expert Group and released to the public domain, as explained at
  http://creativecommons.org/publicdomain/zero/1.0/</div>
<a id="L35" name="L35"></a>  35 
<a id="L36" name="L36"></a>  36 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.concurrent;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.Collection;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.concurrent.locks.AbstractQueuedSynchronizer;
<a id="L39" name="L39"></a>  39 
<div class="comment">
  A counting semaphore.  Conceptually, a semaphore maintains a set of
  permits.  Each {@link #acquire} blocks if necessary until a permit is
  available, and then takes it.  Each {@link #release} adds a permit,
  potentially releasing a blocking acquirer.
  However, no actual permit objects are used; the <code>Semaphore</code> just
  keeps a count of the number available and acts accordingly.
  <p>Semaphores are often used to restrict the number of threads than can
  access some (physical or logical) resource. For example, here is
  a class that uses a semaphore to control access to a pool of items:
   </p><pre> {@code
  class Pool {
    private static final int MAX_AVAILABLE = 100;
    private final Semaphore available = new Semaphore(MAX_AVAILABLE, true);
    public Object getItem() throws InterruptedException {
      available.acquire();
      return getNextAvailableItem();
    }
    public void putItem(Object x) {
      if (markAsUnused(x))
        available.release();
    }
    // Not a particularly efficient data structure; just for demo
    protected Object[] items = ... whatever kinds of items being managed
    protected boolean[] used = new boolean[MAX_AVAILABLE];
    protected synchronized Object getNextAvailableItem() {
      for (int i = 0; i &lt; MAX_AVAILABLE; ++i) {
        if (!used[i]) {
           used[i] = true;
           return items[i];
        }
      }
      return null; // not reached
    }
    protected synchronized boolean markAsUnused(Object item) {
      for (int i = 0; i &lt; MAX_AVAILABLE; ++i) {
        if (item == items[i]) {
           if (used[i]) {
             used[i] = false;
             return true;
           } else
             return false;
        }
      }
      return false;
    }
  }}</pre>
  <p>Before obtaining an item each thread must acquire a permit from
  the semaphore, guaranteeing that an item is available for use. When
  the thread has finished with the item it is returned back to the
  pool and a permit is returned to the semaphore, allowing another
  thread to acquire that item.  Note that no synchronization lock is
  held when {@link #acquire} is called as that would prevent an item
  from being returned to the pool.  The semaphore encapsulates the
  synchronization needed to restrict access to the pool, separately
  from any synchronization needed to maintain the consistency of the
  pool itself.
  </p><p>A semaphore initialized to one, and which is used such that it
  only has at most one permit available, can serve as a mutual
  exclusion lock.  This is more commonly known as a <em>binary
  semaphore</em>, because it only has two states: one permit
  available, or zero permits available.  When used in this way, the
  binary semaphore has the property (unlike many {@link java.util.concurrent.locks.Lock}
  implementations), that the "lock" can be released by a
  thread other than the owner (as semaphores have no notion of
  ownership).  This can be useful in some specialized contexts, such
  as deadlock recovery.
  </p><p> The constructor for this class optionally accepts a
  <em>fairness</em> parameter. When set false, this class makes no
  guarantees about the order in which threads acquire permits. In
  particular, <em>barging</em> is permitted, that is, a thread
  invoking {@link #acquire} can be allocated a permit ahead of a
  thread that has been waiting - logically the new thread places itself at
  the head of the queue of waiting threads. When fairness is set true, the
  semaphore guarantees that threads invoking any of the {@link
  #acquire() acquire} methods are selected to obtain permits in the order in
  which their invocation of those methods was processed
  (first-in-first-out; FIFO). Note that FIFO ordering necessarily
  applies to specific internal points of execution within these
  methods.  So, it is possible for one thread to invoke
  <code>acquire</code> before another, but reach the ordering point after
  the other, and similarly upon return from the method.
  Also note that the untimed {@link #tryAcquire() tryAcquire} methods do not
  honor the fairness setting, but will take any permits that are
  available.
  </p><p>Generally, semaphores used to control resource access should be
  initialized as fair, to ensure that no thread is starved out from
  accessing a resource. When using semaphores for other kinds of
  synchronization control, the throughput advantages of non-fair
  ordering often outweigh fairness considerations.
  </p><p>This class also provides convenience methods to {@link
  #acquire(int) acquire} and {@link #release(int) release} multiple
  permits at a time.  Beware of the increased risk of indefinite
  postponement when these methods are used without fairness set true.
  </p><p>Memory consistency effects: Actions in a thread prior to calling
  a "release" method such as <code>release()</code>
  <a href="package-summary.html#MemoryVisibility"><i>happen-before</i></a>
  actions following a successful "acquire" method such as <code>acquire()</code>
  in another thread.
  @since 1.5
  @author Doug Lea</p></div>
<a id="L156" name="L156"></a> 156 <strong class="reserved">public</strong> <strong class="reserved">class</strong> Semaphore <strong class="reserved">implements</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L157" name="L157"></a> 157     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -3222578661600680210L;
<div class="comment">
     /** All mechanics via AbstractQueuedSynchronizer subclass */</div>
<a id="L159" name="L159"></a> 159     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/8573.html" title="Multiple defined in 5 places.">Sync</a> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>;
<a id="L160" name="L160"></a> 160 
<div class="comment">
      Synchronization implementation for semaphore.  Uses AQS state
      to represent permits. Subclassed into fair and nonfair
      versions.</div>
<a id="L166" name="L166"></a> 166     <strong class="reserved">abstract</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/7786.html" title="Multiple referred from 25 places.">Sync</a> <strong class="reserved">extends</strong> <a href="../S/1046.html#L289" title="Defined at 289 in src/java/util/concurrent/locks/AbstractQueuedSynchronizer.java.">AbstractQueuedSynchronizer</a> <em class="brace">{</em>
<a id="L167" name="L167"></a> 167         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 1192457210091910933L;
<a id="L168" name="L168"></a> 168 
<a id="L169" name="L169"></a> 169         Sync(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L170" name="L170"></a> 170             <a href="../D/34006.html" title="Multiple defined in 21 places.">setState</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L171" name="L171"></a> 171         <em class="brace">}</em>
<a id="L172" name="L172"></a> 172 
<a id="L173" name="L173"></a> 173         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/18336.html" title="Multiple referred from 2 places.">getPermits</a>() <em class="brace">{</em>
<a id="L174" name="L174"></a> 174             <strong class="reserved">return</strong> <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L175" name="L175"></a> 175         <em class="brace">}</em>
<a id="L176" name="L176"></a> 176 
<a id="L177" name="L177"></a> 177         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/23780.html" title="Multiple referred from 3 places.">nonfairTryAcquireShared</a>(<strong class="reserved">int</strong> acquires) <em class="brace">{</em>
<a id="L178" name="L178"></a> 178             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L179" name="L179"></a> 179                 <strong class="reserved">int</strong> <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L180" name="L180"></a> 180                 <strong class="reserved">int</strong> <a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a> = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a> - acquires;
<a id="L181" name="L181"></a> 181                 <strong class="reserved">if</strong> (<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a> &lt; 0 ||
<a id="L182" name="L182"></a> 182                     <a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>, <a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>))
<a id="L183" name="L183"></a> 183                     <strong class="reserved">return</strong> <a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>;
<a id="L184" name="L184"></a> 184             <em class="brace">}</em>
<a id="L185" name="L185"></a> 185         <em class="brace">}</em>
<a id="L186" name="L186"></a> 186 
<a id="L187" name="L187"></a> 187         <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/29561.html" title="Multiple referred from 2 places.">tryReleaseShared</a>(<strong class="reserved">int</strong> releases) <em class="brace">{</em>
<a id="L188" name="L188"></a> 188             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L189" name="L189"></a> 189                 <strong class="reserved">int</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L190" name="L190"></a> 190                 <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> + releases;
<a id="L191" name="L191"></a> 191                 <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> &lt; <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>) <em class="comment">// overflow</em>
<a id="L192" name="L192"></a> 192                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("Maximum permit count exceeded");
<a id="L193" name="L193"></a> 193                 <strong class="reserved">if</strong> (<a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>))
<a id="L194" name="L194"></a> 194                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L195" name="L195"></a> 195             <em class="brace">}</em>
<a id="L196" name="L196"></a> 196         <em class="brace">}</em>
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198         <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/1054.html#L644" title="Referred from 644 in src/java/util/concurrent/Semaphore.java.">reducePermits</a>(<strong class="reserved">int</strong> reductions) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200                 <strong class="reserved">int</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L201" name="L201"></a> 201                 <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> - reductions;
<a id="L202" name="L202"></a> 202                 <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> &gt; <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>) <em class="comment">// underflow</em>
<a id="L203" name="L203"></a> 203                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("Permit count underflow");
<a id="L204" name="L204"></a> 204                 <strong class="reserved">if</strong> (<a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>, <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>))
<a id="L205" name="L205"></a> 205                     <strong class="reserved">return</strong>;
<a id="L206" name="L206"></a> 206             <em class="brace">}</em>
<a id="L207" name="L207"></a> 207         <em class="brace">}</em>
<a id="L208" name="L208"></a> 208 
<a id="L209" name="L209"></a> 209         <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../S/1054.html#L629" title="Referred from 629 in src/java/util/concurrent/Semaphore.java.">drainPermits</a>() <em class="brace">{</em>
<a id="L210" name="L210"></a> 210             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L211" name="L211"></a> 211                 <strong class="reserved">int</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L212" name="L212"></a> 212                 <strong class="reserved">if</strong> (<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> == 0 || <a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>, 0))
<a id="L213" name="L213"></a> 213                     <strong class="reserved">return</strong> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>;
<a id="L214" name="L214"></a> 214             <em class="brace">}</em>
<a id="L215" name="L215"></a> 215         <em class="brace">}</em>
<a id="L216" name="L216"></a> 216     <em class="brace">}</em>
<a id="L217" name="L217"></a> 217 
<div class="comment">
      NonFair version</div>
<a id="L221" name="L221"></a> 221     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/5578.html" title="Multiple referred from 5 places.">NonfairSync</a> <strong class="reserved">extends</strong> <a href="../D/8573.html" title="Multiple defined in 5 places.">Sync</a> <em class="brace">{</em>
<a id="L222" name="L222"></a> 222         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -2694183684443567898L;
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224         NonfairSync(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L225" name="L225"></a> 225             <strong class="reserved">super</strong>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L226" name="L226"></a> 226         <em class="brace">}</em>
<a id="L227" name="L227"></a> 227 
<a id="L228" name="L228"></a> 228         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/29538.html" title="Multiple referred from 12 places.">tryAcquireShared</a>(<strong class="reserved">int</strong> acquires) <em class="brace">{</em>
<a id="L229" name="L229"></a> 229             <strong class="reserved">return</strong> <a href="../S/1054.html#L177" title="Defined at 177 in src/java/util/concurrent/Semaphore.java.">nonfairTryAcquireShared</a>(acquires);
<a id="L230" name="L230"></a> 230         <em class="brace">}</em>
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
      Fair version</div>
<a id="L236" name="L236"></a> 236     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2866.html" title="Multiple referred from 6 places.">FairSync</a> <strong class="reserved">extends</strong> <a href="../D/8573.html" title="Multiple defined in 5 places.">Sync</a> <em class="brace">{</em>
<a id="L237" name="L237"></a> 237         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 2014338818796000944L;
<a id="L238" name="L238"></a> 238 
<a id="L239" name="L239"></a> 239         FairSync(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L240" name="L240"></a> 240             <strong class="reserved">super</strong>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L241" name="L241"></a> 241         <em class="brace">}</em>
<a id="L242" name="L242"></a> 242 
<a id="L243" name="L243"></a> 243         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/29538.html" title="Multiple referred from 12 places.">tryAcquireShared</a>(<strong class="reserved">int</strong> acquires) <em class="brace">{</em>
<a id="L244" name="L244"></a> 244             <strong class="reserved">for</strong> (;;) <em class="brace">{</em>
<a id="L245" name="L245"></a> 245                 <strong class="reserved">if</strong> (<a href="../D/24165.html" title="Multiple defined in 2 places.">hasQueuedPredecessors</a>())
<a id="L246" name="L246"></a> 246                     <strong class="reserved">return</strong> -1;
<a id="L247" name="L247"></a> 247                 <strong class="reserved">int</strong> <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a> = <a href="../D/22724.html" title="Multiple defined in 28 places.">getState</a>();
<a id="L248" name="L248"></a> 248                 <strong class="reserved">int</strong> <a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a> = <a href="../D/11656.html" title="Multiple defined in 33 places.">available</a> - acquires;
<a id="L249" name="L249"></a> 249                 <strong class="reserved">if</strong> (<a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a> &lt; 0 ||
<a id="L250" name="L250"></a> 250                     <a href="../D/13041.html" title="Multiple defined in 2 places.">compareAndSetState</a>(<a href="../D/11656.html" title="Multiple defined in 33 places.">available</a>, <a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>))
<a id="L251" name="L251"></a> 251                     <strong class="reserved">return</strong> <a href="../S/1990.html#L390" title="Defined at 390 in src/java/nio/Buffer.java.">remaining</a>;
<a id="L252" name="L252"></a> 252             <em class="brace">}</em>
<a id="L253" name="L253"></a> 253         <em class="brace">}</em>
<a id="L254" name="L254"></a> 254     <em class="brace">}</em>
<a id="L255" name="L255"></a> 255 
<div class="comment">
      Creates a <code>Semaphore</code> with the given number of
      permits and nonfair fairness setting.
      @param permits the initial number of permits available.
             This value may be negative, in which case releases
             must occur before any acquires will be granted.</div>
<a id="L264" name="L264"></a> 264     <strong class="reserved">public</strong> Semaphore(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L265" name="L265"></a> 265         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a> = <strong class="reserved">new</strong> <a href="../D/6119.html" title="Multiple defined in 3 places.">NonfairSync</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L266" name="L266"></a> 266     <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 
<div class="comment">
      Creates a <code>Semaphore</code> with the given number of
      permits and the given fairness setting.
      @param permits the initial number of permits available.
             This value may be negative, in which case releases
             must occur before any acquires will be granted.
      @param fair <code>true</code> if this semaphore will guarantee
             first-in first-out granting of permits under contention,
             else <code>false</code></div>
<a id="L279" name="L279"></a> 279     <strong class="reserved">public</strong> Semaphore(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>, <strong class="reserved">boolean</strong> fair) <em class="brace">{</em>
<a id="L280" name="L280"></a> 280         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a> = fair ? <strong class="reserved">new</strong> <a href="../D/3129.html" title="Multiple defined in 3 places.">FairSync</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) : <strong class="reserved">new</strong> <a href="../D/6119.html" title="Multiple defined in 3 places.">NonfairSync</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L281" name="L281"></a> 281     <em class="brace">}</em>
<a id="L282" name="L282"></a> 282 
<div class="comment">
      Acquires a permit from this semaphore, blocking until one is
      available, or the thread is {@linkplain Thread#interrupt interrupted}.
      <p>Acquires a permit, if one is available and returns immediately,
      reducing the number of available permits by one.
      </p><p>If no permit is available then the current thread becomes
      disabled for thread scheduling purposes and lies dormant until
      one of two things happens:
      </p><ul><li>Some other thread invokes the {@link #release} method for this
      semaphore and the current thread is next to be assigned a permit; or
      </li><li>Some other thread {@linkplain Thread#interrupt interrupts}
      the current thread.
      </li></ul>
      <p>If the current thread:
      </p><ul><li>has its interrupted status set on entry to this method; or
      </li><li>is {@linkplain Thread#interrupt interrupted} while waiting
      for a permit,
      </li></ul>
      then {@link InterruptedException} is thrown and the current thread's
      interrupted status is cleared.
      @throws InterruptedException if the current thread is interrupted</div>
<a id="L311" name="L311"></a> 311     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9543.html" title="Multiple referred from 7 places.">acquire</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L312" name="L312"></a> 312         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/10587.html" title="Multiple defined in 2 places.">acquireSharedInterruptibly</a>(1);
<a id="L313" name="L313"></a> 313     <em class="brace">}</em>
<a id="L314" name="L314"></a> 314 
<div class="comment">
      Acquires a permit from this semaphore, blocking until one is
      available.
      <p>Acquires a permit, if one is available and returns immediately,
      reducing the number of available permits by one.
      </p><p>If no permit is available then the current thread becomes
      disabled for thread scheduling purposes and lies dormant until
      some other thread invokes the {@link #release} method for this
      semaphore and the current thread is next to be assigned a permit.
      </p><p>If the current thread is {@linkplain Thread#interrupt interrupted}
      while waiting for a permit then it will continue to wait, but the
      time at which the thread is assigned a permit may change compared to
      the time it would have received the permit had no interruption
      occurred.  When the thread does return from this method its interrupt
      status will be set.</p></div>
<a id="L334" name="L334"></a> 334     <strong class="reserved">public</strong> <strong class="reserved">void</strong> acquireUninterruptibly() <em class="brace">{</em>
<a id="L335" name="L335"></a> 335         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/10586.html" title="Multiple defined in 2 places.">acquireShared</a>(1);
<a id="L336" name="L336"></a> 336     <em class="brace">}</em>
<a id="L337" name="L337"></a> 337 
<div class="comment">
      Acquires a permit from this semaphore, only if one is available at the
      time of invocation.
      <p>Acquires a permit, if one is available and returns immediately,
      with the value <code>true</code>,
      reducing the number of available permits by one.
      </p><p>If no permit is available then this method will return
      immediately with the value <code>false</code>.
      </p><p>Even when this semaphore has been set to use a
      fair ordering policy, a call to <code>tryAcquire()</code> <em>will</em>
      immediately acquire a permit if one is available, whether or not
      other threads are currently waiting.
      This "barging" behavior can be useful in certain
      circumstances, even though it breaks fairness. If you want to honor
      the fairness setting, then use
      {@link #tryAcquire(long, TimeUnit) tryAcquire(0, TimeUnit.SECONDS) }
      which is almost equivalent (it also detects interruption).
      @return <code>true</code> if a permit was acquired and <code>false</code>
              otherwise</p></div>
<a id="L362" name="L362"></a> 362     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29536.html" title="Multiple referred from 13 places.">tryAcquire</a>() <em class="brace">{</em>
<a id="L363" name="L363"></a> 363         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../S/1054.html#L177" title="Defined at 177 in src/java/util/concurrent/Semaphore.java.">nonfairTryAcquireShared</a>(1) &gt;= 0;
<a id="L364" name="L364"></a> 364     <em class="brace">}</em>
<a id="L365" name="L365"></a> 365 
<div class="comment">
      Acquires a permit from this semaphore, if one becomes available
      within the given waiting time and the current thread has not
      been {@linkplain Thread#interrupt interrupted}.
      <p>Acquires a permit, if one is available and returns immediately,
      with the value <code>true</code>,
      reducing the number of available permits by one.
      </p><p>If no permit is available then the current thread becomes
      disabled for thread scheduling purposes and lies dormant until
      one of three things happens:
      </p><ul><li>Some other thread invokes the {@link #release} method for this
      semaphore and the current thread is next to be assigned a permit; or
      </li><li>Some other thread {@linkplain Thread#interrupt interrupts}
      the current thread; or
      </li><li>The specified waiting time elapses.
      </li></ul>
      <p>If a permit is acquired then the value <code>true</code> is returned.
      </p><p>If the current thread:
      </p><ul><li>has its interrupted status set on entry to this method; or
      </li><li>is {@linkplain Thread#interrupt interrupted} while waiting
      to acquire a permit,
      </li></ul>
      then {@link InterruptedException} is thrown and the current thread's
      interrupted status is cleared.
      <p>If the specified waiting time elapses then the value <code>false</code>
      is returned.  If the time is less than or equal to zero, the method
      will not wait at all.
      @param timeout the maximum time to wait for a permit
      @param unit the time unit of the <code>timeout</code> argument
      @return <code>true</code> if a permit was acquired and <code>false</code>
              if the waiting time elapsed before a permit was acquired
      @throws InterruptedException if the current thread is interrupted</p></div>
<a id="L407" name="L407"></a> 407     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29536.html" title="Multiple referred from 13 places.">tryAcquire</a>(<strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit)
<a id="L408" name="L408"></a> 408         <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L409" name="L409"></a> 409         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/35710.html" title="Multiple defined in 2 places.">tryAcquireSharedNanos</a>(1, unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout));
<a id="L410" name="L410"></a> 410     <em class="brace">}</em>
<a id="L411" name="L411"></a> 411 
<div class="comment">
      Releases a permit, returning it to the semaphore.
      <p>Releases a permit, increasing the number of available permits by
      one.  If any threads are trying to acquire a permit, then one is
      selected and given the permit that was just released.  That thread
      is (re)enabled for thread scheduling purposes.
      </p><p>There is no requirement that a thread that releases a permit must
      have acquired that permit by calling {@link #acquire}.
      Correct usage of a semaphore is established by programming convention
      in the application.</p></div>
<a id="L425" name="L425"></a> 425     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25846.html" title="Multiple referred from 40 places.">release</a>() <em class="brace">{</em>
<a id="L426" name="L426"></a> 426         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/30655.html" title="Multiple defined in 2 places.">releaseShared</a>(1);
<a id="L427" name="L427"></a> 427     <em class="brace">}</em>
<a id="L428" name="L428"></a> 428 
<div class="comment">
      Acquires the given number of permits from this semaphore,
      blocking until all are available,
      or the thread is {@linkplain Thread#interrupt interrupted}.
      <p>Acquires the given number of permits, if they are available,
      and returns immediately, reducing the number of available permits
      by the given amount.
      </p><p>If insufficient permits are available then the current thread becomes
      disabled for thread scheduling purposes and lies dormant until
      one of two things happens:
      </p><ul><li>Some other thread invokes one of the {@link #release() release}
      methods for this semaphore, the current thread is next to be assigned
      permits and the number of available permits satisfies this request; or
      </li><li>Some other thread {@linkplain Thread#interrupt interrupts}
      the current thread.
      </li></ul>
      <p>If the current thread:
      </p><ul><li>has its interrupted status set on entry to this method; or
      </li><li>is {@linkplain Thread#interrupt interrupted} while waiting
      for a permit,
      </li></ul>
      then {@link InterruptedException} is thrown and the current thread's
      interrupted status is cleared.
      Any permits that were to be assigned to this thread are instead
      assigned to other threads trying to acquire permits, as if
      permits had been made available by a call to {@link #release()}.
      @param permits the number of permits to acquire
      @throws InterruptedException if the current thread is interrupted
      @throws IllegalArgumentException if <code>permits</code> is negative</div>
<a id="L465" name="L465"></a> 465     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9543.html" title="Multiple referred from 7 places.">acquire</a>(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <strong class="reserved">if</strong> (<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a> &lt; 0) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L467" name="L467"></a> 467         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/10587.html" title="Multiple defined in 2 places.">acquireSharedInterruptibly</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L468" name="L468"></a> 468     <em class="brace">}</em>
<a id="L469" name="L469"></a> 469 
<div class="comment">
      Acquires the given number of permits from this semaphore,
      blocking until all are available.
      <p>Acquires the given number of permits, if they are available,
      and returns immediately, reducing the number of available permits
      by the given amount.
      </p><p>If insufficient permits are available then the current thread becomes
      disabled for thread scheduling purposes and lies dormant until
      some other thread invokes one of the {@link #release() release}
      methods for this semaphore, the current thread is next to be assigned
      permits and the number of available permits satisfies this request.
      </p><p>If the current thread is {@linkplain Thread#interrupt interrupted}
      while waiting for permits then it will continue to wait and its
      position in the queue is not affected.  When the thread does return
      from this method its interrupt status will be set.
      @param permits the number of permits to acquire
      @throws IllegalArgumentException if <code>permits</code> is negative</p></div>
<a id="L492" name="L492"></a> 492     <strong class="reserved">public</strong> <strong class="reserved">void</strong> acquireUninterruptibly(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L493" name="L493"></a> 493         <strong class="reserved">if</strong> (<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a> &lt; 0) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L494" name="L494"></a> 494         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/10586.html" title="Multiple defined in 2 places.">acquireShared</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L495" name="L495"></a> 495     <em class="brace">}</em>
<a id="L496" name="L496"></a> 496 
<div class="comment">
      Acquires the given number of permits from this semaphore, only
      if all are available at the time of invocation.
      <p>Acquires the given number of permits, if they are available, and
      returns immediately, with the value <code>true</code>,
      reducing the number of available permits by the given amount.
      </p><p>If insufficient permits are available then this method will return
      immediately with the value <code>false</code> and the number of available
      permits is unchanged.
      </p><p>Even when this semaphore has been set to use a fair ordering
      policy, a call to <code>tryAcquire</code> <em>will</em>
      immediately acquire a permit if one is available, whether or
      not other threads are currently waiting.  This
      "barging" behavior can be useful in certain
      circumstances, even though it breaks fairness. If you want to
      honor the fairness setting, then use {@link #tryAcquire(int,
      long, TimeUnit) tryAcquire(permits, 0, TimeUnit.SECONDS) }
      which is almost equivalent (it also detects interruption).
      @param permits the number of permits to acquire
      @return <code>true</code> if the permits were acquired and
              <code>false</code> otherwise
      @throws IllegalArgumentException if <code>permits</code> is negative</p></div>
<a id="L524" name="L524"></a> 524     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29536.html" title="Multiple referred from 13 places.">tryAcquire</a>(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525         <strong class="reserved">if</strong> (<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a> &lt; 0) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L526" name="L526"></a> 526         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../S/1054.html#L177" title="Defined at 177 in src/java/util/concurrent/Semaphore.java.">nonfairTryAcquireShared</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) &gt;= 0;
<a id="L527" name="L527"></a> 527     <em class="brace">}</em>
<a id="L528" name="L528"></a> 528 
<div class="comment">
      Acquires the given number of permits from this semaphore, if all
      become available within the given waiting time and the current
      thread has not been {@linkplain Thread#interrupt interrupted}.
      <p>Acquires the given number of permits, if they are available and
      returns immediately, with the value <code>true</code>,
      reducing the number of available permits by the given amount.
      </p><p>If insufficient permits are available then
      the current thread becomes disabled for thread scheduling
      purposes and lies dormant until one of three things happens:
      </p><ul><li>Some other thread invokes one of the {@link #release() release}
      methods for this semaphore, the current thread is next to be assigned
      permits and the number of available permits satisfies this request; or
      </li><li>Some other thread {@linkplain Thread#interrupt interrupts}
      the current thread; or
      </li><li>The specified waiting time elapses.
      </li></ul>
      <p>If the permits are acquired then the value <code>true</code> is returned.
      </p><p>If the current thread:
      </p><ul><li>has its interrupted status set on entry to this method; or
      </li><li>is {@linkplain Thread#interrupt interrupted} while waiting
      to acquire the permits,
      </li></ul>
      then {@link InterruptedException} is thrown and the current thread's
      interrupted status is cleared.
      Any permits that were to be assigned to this thread, are instead
      assigned to other threads trying to acquire permits, as if
      the permits had been made available by a call to {@link #release()}.
      <p>If the specified waiting time elapses then the value <code>false</code>
      is returned.  If the time is less than or equal to zero, the method
      will not wait at all.  Any permits that were to be assigned to this
      thread, are instead assigned to other threads trying to acquire
      permits, as if the permits had been made available by a call to
      {@link #release()}.
      @param permits the number of permits to acquire
      @param timeout the maximum time to wait for the permits
      @param unit the time unit of the <code>timeout</code> argument
      @return <code>true</code> if all permits were acquired and <code>false</code>
              if the waiting time elapsed before all permits were acquired
      @throws InterruptedException if the current thread is interrupted
      @throws IllegalArgumentException if <code>permits</code> is negative</p></div>
<a id="L579" name="L579"></a> 579     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/29536.html" title="Multiple referred from 13 places.">tryAcquire</a>(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>, <strong class="reserved">long</strong> timeout, <a href="../S/1102.html#L71" title="Defined at 71 in src/java/util/concurrent/TimeUnit.java.">TimeUnit</a> unit)
<a id="L580" name="L580"></a> 580         <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L581" name="L581"></a> 581         <strong class="reserved">if</strong> (<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a> &lt; 0) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L582" name="L582"></a> 582         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/35710.html" title="Multiple defined in 2 places.">tryAcquireSharedNanos</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>, unit.<a href="../D/35449.html" title="Multiple defined in 2 places.">toNanos</a>(timeout));
<a id="L583" name="L583"></a> 583     <em class="brace">}</em>
<a id="L584" name="L584"></a> 584 
<div class="comment">
      Releases the given number of permits, returning them to the semaphore.
      <p>Releases the given number of permits, increasing the number of
      available permits by that amount.
      If any threads are trying to acquire permits, then one
      is selected and given the permits that were just released.
      If the number of available permits satisfies that thread's request
      then that thread is (re)enabled for thread scheduling purposes;
      otherwise the thread will wait until sufficient permits are available.
      If there are still permits available
      after this thread's request has been satisfied, then those permits
      are assigned in turn to other threads trying to acquire permits.
      </p><p>There is no requirement that a thread that releases a permit must
      have acquired that permit by calling {@link Semaphore#acquire acquire}.
      Correct usage of a semaphore is established by programming convention
      in the application.
      @param permits the number of permits to release
      @throws IllegalArgumentException if <code>permits</code> is negative</p></div>
<a id="L607" name="L607"></a> 607     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25846.html" title="Multiple referred from 40 places.">release</a>(<strong class="reserved">int</strong> <a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>) <em class="brace">{</em>
<a id="L608" name="L608"></a> 608         <strong class="reserved">if</strong> (<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a> &lt; 0) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L609" name="L609"></a> 609         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/30655.html" title="Multiple defined in 2 places.">releaseShared</a>(<a href="../D/29332.html" title="Multiple defined in 3 places.">permits</a>);
<a id="L610" name="L610"></a> 610     <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<div class="comment">
      Returns the current number of permits available in this semaphore.
      <p>This method is typically used for debugging and testing purposes.
      @return the number of permits available in this semaphore</p></div>
<a id="L619" name="L619"></a> 619     <strong class="reserved">public</strong> <strong class="reserved">int</strong> availablePermits() <em class="brace">{</em>
<a id="L620" name="L620"></a> 620         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../S/1054.html#L173" title="Defined at 173 in src/java/util/concurrent/Semaphore.java.">getPermits</a>();
<a id="L621" name="L621"></a> 621     <em class="brace">}</em>
<a id="L622" name="L622"></a> 622 
<div class="comment">
      Acquires and returns all permits that are immediately available.
      @return the number of permits acquired</div>
<a id="L628" name="L628"></a> 628     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/1054.html#L629" title="Referred from 629 in src/java/util/concurrent/Semaphore.java.">drainPermits</a>() <em class="brace">{</em>
<a id="L629" name="L629"></a> 629         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/15157.html" title="Multiple defined in 2 places.">drainPermits</a>();
<a id="L630" name="L630"></a> 630     <em class="brace">}</em>
<a id="L631" name="L631"></a> 631 
<div class="comment">
      Shrinks the number of available permits by the indicated
      reduction. This method can be useful in subclasses that use
      semaphores to track resources that become unavailable. This
      method differs from <code>acquire</code> in that it does not block
      waiting for permits to become available.
      @param reduction the number of permits to remove
      @throws IllegalArgumentException if <code>reduction</code> is negative</div>
<a id="L642" name="L642"></a> 642     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/1054.html#L644" title="Referred from 644 in src/java/util/concurrent/Semaphore.java.">reducePermits</a>(<strong class="reserved">int</strong> reduction) <em class="brace">{</em>
<a id="L643" name="L643"></a> 643         <strong class="reserved">if</strong> (reduction &lt; 0) <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L644" name="L644"></a> 644         <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/30450.html" title="Multiple defined in 2 places.">reducePermits</a>(reduction);
<a id="L645" name="L645"></a> 645     <em class="brace">}</em>
<a id="L646" name="L646"></a> 646 
<div class="comment">
      Returns <code>true</code> if this semaphore has fairness set true.
      @return <code>true</code> if this semaphore has fairness set true</div>
<a id="L652" name="L652"></a> 652     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isFair() <em class="brace">{</em>
<a id="L653" name="L653"></a> 653         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a> <strong class="reserved">instanceof</strong> <a href="../D/3129.html" title="Multiple defined in 3 places.">FairSync</a>;
<a id="L654" name="L654"></a> 654     <em class="brace">}</em>
<a id="L655" name="L655"></a> 655 
<div class="comment">
      Queries whether any threads are waiting to acquire. Note that
      because cancellations may occur at any time, a <code>true</code>
      return does not guarantee that any other thread will ever
      acquire.  This method is designed primarily for use in
      monitoring of the system state.
      @return <code>true</code> if there may be other threads waiting to
              acquire the lock</div>
<a id="L666" name="L666"></a> 666     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/20258.html" title="Multiple referred from 5 places.">hasQueuedThreads</a>() <em class="brace">{</em>
<a id="L667" name="L667"></a> 667         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/24168.html" title="Multiple defined in 5 places.">hasQueuedThreads</a>();
<a id="L668" name="L668"></a> 668     <em class="brace">}</em>
<a id="L669" name="L669"></a> 669 
<div class="comment">
      Returns an estimate of the number of threads waiting to acquire.
      The value is only an estimate because the number of threads may
      change dynamically while this method traverses internal data
      structures.  This method is designed for use in monitoring of the
      system state, not for synchronization control.
      @return the estimated number of threads waiting for this lock</div>
<a id="L679" name="L679"></a> 679     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/18572.html" title="Multiple referred from 3 places.">getQueueLength</a>() <em class="brace">{</em>
<a id="L680" name="L680"></a> 680         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/21806.html" title="Multiple defined in 5 places.">getQueueLength</a>();
<a id="L681" name="L681"></a> 681     <em class="brace">}</em>
<a id="L682" name="L682"></a> 682 
<div class="comment">
      Returns a collection containing threads that may be waiting to acquire.
      Because the actual set of threads may change dynamically while
      constructing this result, the returned collection is only a best-effort
      estimate.  The elements of the returned collection are in no particular
      order.  This method is designed to facilitate construction of
      subclasses that provide more extensive monitoring facilities.
      @return the collection of threads</div>
<a id="L693" name="L693"></a> 693     <strong class="reserved">protected</strong> <a href="../S/875.html#L144" title="Defined at 144 in src/java/util/Collection.java.">Collection</a>&lt;<a href="../S/1769.html#L141" title="Defined at 141 in src/java/lang/Thread.java.">Thread</a>&gt; <a href="../R/18573.html" title="Multiple referred from 3 places.">getQueuedThreads</a>() <em class="brace">{</em>
<a id="L694" name="L694"></a> 694         <strong class="reserved">return</strong> <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../D/21810.html" title="Multiple defined in 5 places.">getQueuedThreads</a>();
<a id="L695" name="L695"></a> 695     <em class="brace">}</em>
<a id="L696" name="L696"></a> 696 
<div class="comment">
      Returns a string identifying this semaphore, as well as its state.
      The state, in brackets, includes the String <code>"Permits ="</code>
      followed by the number of permits.
      @return a string identifying this semaphore, as well as its state</div>
<a id="L704" name="L704"></a> 704     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L705" name="L705"></a> 705         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>() + "[Permits = " + <a href="../D/35158.html" title="Multiple defined in 9 places.">sync</a>.<a href="../S/1054.html#L173" title="Defined at 173 in src/java/util/concurrent/Semaphore.java.">getPermits</a>() + "]";
<a id="L706" name="L706"></a> 706     <em class="brace">}</em>
<a id="L707" name="L707"></a> 707 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L173">[^]</a><a href="#L704">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>